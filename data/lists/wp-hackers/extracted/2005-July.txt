From warchild13 at spymac.com  Fri Jul  1 03:22:30 2005
From: warchild13 at spymac.com (James Witherspoon)
Date: Fri Jul  1 03:22:40 2005
Subject: [wp-hackers] ecto and 1.5.1.3
Message-ID: <20050701032230.9C53B5C0035@webmail3.spymac.net>

I've been using ecto on Mac for about 3 years. I used Movable Type because it
interfaced better with ecto. I switched to WordPress at 1.5.
Using the new nightly (7/1) xmlrpc.php and the new functions-post.php posted on
this list together, ecto now seems to work again but my testing was light.
Without using both ecto was disasterous. I experienced everything mentioned here.
I never had a problem with 1.5.1.3 and MarsEdit (another Mac blogging tool). It
handled everything fine.

On Thu Jun 30 13:01 , wp-hackers-request@lists.automattic.com sent:

>Send wp-hackers mailing list submissions to
>	wp-hackers@lists.automattic.com
>
>To subscribe or unsubscribe via the World Wide Web, visit
>	http://lists.automattic.com/mailman/listinfo/wp-hackers
>or, via email, send a message with subject or body 'help' to
>	wp-hackers-request@lists.automattic.com
>
>You can reach the person managing the list at
>	wp-hackers-owner@lists.automattic.com
>
>When replying, please edit your Subject line so it is more specific
>than "Re: Contents of wp-hackers digest..."
>
>
>Today's Topics:
>
>   1. Re: 1.5.1.3 XMLRPC problems (Ryan Boren)
>   2. Re: 1.5.1.3 XMLRPC problems (Ryan Boren)
>   3. RE: 1.5.1.3 XMLRPC problems (Ryan Boren)
>   4. Re: 1.5.1.3 XMLRPC problems (Peter Westwood)
>   5. Re: 1.5.1.3 XMLRPC problems (Peter Westwood)
>   6. Re: 1.5.1.3 XMLRPC problems (Jenna Pfister)
>   7. Re: 1.5.1.3 XMLRPC problems (Ryan Boren)
>   8. Re: 1.5.1.3 XMLRPC problems (Jenna Pfister)
>
>
>----------------------------------------------------------------------
>
>Message: 1
>Date: Thu, 30 Jun 2005 10:43:53 -0500
>From: Ryan Boren ryan@boren.nu>
>Subject: Re: [wp-hackers] 1.5.1.3 XMLRPC problems
>To: wp-hackers@lists.automattic.com
>Message-ID: 1120146234.10601.33.camel@portnoy.fuzzybelly.org>
>Content-Type: text/plain
>
>On Thu, 2005-06-30 at 09:26 +0100, Podz wrote:
>> >>This also includes the image upload fix (already committed).  Please try
>> >>it out if your uploaded images were being corrupted.
>> > 
>> > 
>> > I went ahead and committed it so that it would be easier to get at.  I
>> > still need feedback.
>> > 
>> > http://trac.wordpress.org/file/branches/1.5/xmlrpc.php\?rev=2678&format=txt
>> > 
>> 
>> http://wordpress.org/support/topic/37880
>> BlogThis from Flickr failing.
>
>If you upgrade xmlrpc.php and not functions-post.php you will get extra
>slashes.
>
>Ryan
>
>
>
>------------------------------
>
>Message: 2
>Date: Thu, 30 Jun 2005 10:53:41 -0500
>From: Ryan Boren ryan@boren.nu>
>Subject: Re: [wp-hackers] 1.5.1.3 XMLRPC problems
>To: wp-hackers@lists.automattic.com
>Cc: wp-testers@lists.automattic.com
>Message-ID: 1120146821.10601.37.camel@portnoy.fuzzybelly.org>
>Content-Type: text/plain
>
>On Wed, 2005-06-29 at 20:21 -0500, Ryan Boren wrote:
>> On Wed, 2005-06-29 at 19:22 -0500, Ryan Boren wrote:
>> > On Wed, 2005-06-29 at 17:17 -0500, Ryan Boren wrote:
>> > > On Wed, 2005-06-29 at 17:14 -0400, Scott Merrill wrote:
>> > > > Ryan Boren wrote:
>> > > > > No.  There are only a couple of objects involved, most everything is a
>> > > > > string.  The object causing the problem here is IXR_Date.  IXR_Date
>> > > > > slices and dices the incoming date string and makes it safe for use.
>> > > > > So, it's contents don't need to be escaped.
>> > > > 
>> > > > This post:
>> > > > http://wordpress.org/support/topic/37788#post-213513
>> > > > links to this ticket:
>> > > > http://trac.wordpress.org/ticket/1355
>> > > > which should probably be reviewed before an official update to 1.5.1.3
>> > > > gets committed.
>> > > 
>> > > Too late.  That's been a bug for awhile; we'll have to live with it a
>> > > little longer.  Most of the patches I've seen floating around (such as
>> > > the one in 1355) will cause a more profound breakage in certain clients.
>> > > I'm tidying this area up for 1.6.
>> > 
>> > Since I have to fix the image thing anyway, I'll try to get this in.
>> > Patch attached that will hopefully work for everyone.  I also attached a
>> > full copy of xmlrpc.php for drop in convenience.  I need feedback quick.
>> > 
>> > This also includes the image upload fix (already committed).  Please try
>> > it out if your uploaded images were being corrupted.
>> 
>> I went ahead and committed it so that it would be easier to get at.  I
>> still need feedback.
>> 
>> http://trac.wordpress.org/file/branches/1.5/xmlrpc.php\?rev=2678&format=txt
>
>Any feedback?  I need feedback from ecto users, especially.  The forums
>report problems uploading images via ecto with the updated version even
>though others report no problems.  The forums are pretty useless for
>getting reliable feedback, so I need some here.
>
>Ryan
>
>
>
>
>------------------------------
>
>Message: 3
>Date: Thu, 30 Jun 2005 11:09:09 -0500
>From: Ryan Boren ryan@boren.nu>
>Subject: RE: [wp-hackers] 1.5.1.3 XMLRPC problems
>To: wp-hackers@lists.automattic.com
>Message-ID: 1120147749.10601.39.camel@portnoy.fuzzybelly.org>
>Content-Type: text/plain
>
>On Thu, 2005-06-30 at 11:25 +0200, Denis de Bernardy wrote:
>> 1.5.1.3 seems to have introduced a bug. All my posts are set to reject
>> pingbacks. Yet, I've received two last night.
>> 
>> Am I the only one in this case?
>
>Sigh.  It's a bug.  Fixed in svn on both branches.
>
>Ryan
>
>> > -----Original Message-----
>> > From: wp-hackers-bounces@lists.automattic.com 
>> >
[wp-hackers-bounces@lists.automattic.com','','','')">wp-hackers-bounces@lists.automattic.com]
On Behalf Of Podz
>> > Sent: Thursday, June 30, 2005 10:27 AM
>> > To: wp-hackers@lists.automattic.com
>> > Subject: Re: [wp-hackers] 1.5.1.3 XMLRPC problems
>> > 
>> > 
>> > >>This also includes the image upload fix (already 
>> > committed).  Please 
>> > >>try it out if your uploaded images were being corrupted.
>> > > 
>> > > 
>> > > I went ahead and committed it so that it would be easier to 
>> > get at.  I 
>> > > still need feedback.
>> > > 
>> > > 
>> > http://trac.wordpress.org/file/branches/1.5/xmlrpc.php\?rev=2678&format
>> > > =txt
>> > > 
>> > 
>> > http://wordpress.org/support/topic/37880
>> > BlogThis from Flickr failing. 
>> > _______________________________________________
>> > wp-hackers mailing list
>> > wp-hackers@lists.automattic.com 
>> > http://lists.automattic.com/mailman/listinfo/wp-hackers
>> > 
>> 
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers@lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
>
>
>------------------------------
>
>Message: 4
>Date: Thu, 30 Jun 2005 17:11:09 +0100 (BST)
>From: "Peter Westwood" peter.westwood@ftwr.co.uk>
>Subject: Re: [wp-hackers] 1.5.1.3 XMLRPC problems
>To: wp-hackers@lists.automattic.com
>Message-ID: www.ftwr.co.uk>
>Content-Type: text/plain;charset=iso-8859-1
>
>
>On Thu, June 30, 2005 4:53 pm, Ryan Boren said:
>> On Wed, 2005-06-29 at 20:21 -0500, Ryan Boren wrote:
>>> On Wed, 2005-06-29 at 19:22 -0500, Ryan Boren wrote:
>>> > On Wed, 2005-06-29 at 17:17 -0500, Ryan Boren wrote:
>>> > > On Wed, 2005-06-29 at 17:14 -0400, Scott Merrill wrote:
>>> > > > Ryan Boren wrote:
>>> > > > > No.  There are only a couple of objects involved, most everything is a
>>> > > > > string.  The object causing the problem here is IXR_Date.  IXR_Date
>>> > > > > slices and dices the incoming date string and makes it safe for use.
>>> > > > > So, it's contents don't need to be escaped.
>>> > > >
>>> > > > This post:
>>> > > > http://wordpress.org/support/topic/37788#post-213513
>>> > > > links to this ticket:
>>> > > > http://trac.wordpress.org/ticket/1355
>>> > > > which should probably be reviewed before an official update to 1.5.1.3
>>> > > > gets committed.
>>> > >
>>> > > Too late.  That's been a bug for awhile; we'll have to live with it a
>>> > > little longer.  Most of the patches I've seen floating around (such as
>>> > > the one in 1355) will cause a more profound breakage in certain clients.
>>> > > I'm tidying this area up for 1.6.
>>> >
>>> > Since I have to fix the image thing anyway, I'll try to get this in.
>>> > Patch attached that will hopefully work for everyone.  I also attached a
>>> > full copy of xmlrpc.php for drop in convenience.  I need feedback quick.
>>> >
>>> > This also includes the image upload fix (already committed).  Please try
>>> > it out if your uploaded images were being corrupted.
>>>
>>> I went ahead and committed it so that it would be easier to get at.  I
>>> still need feedback.
>>>
>>> http://trac.wordpress.org/file/branches/1.5/xmlrpc.php\?rev=2678&format=txt
>>
>> Any feedback?  I need feedback from ecto users, especially.  The forums
>> report problems uploading images via ecto with the updated version even
>> though others report no problems.  The forums are pretty useless for
>> getting reliable feedback, so I need some here.
>>
>
>I'm downloading ecto as I type this. Feedback soon
>
>westi
>-- 
>Peter Westwood
>Blog: http://www.ftwr.co.uk/blog/
>Get Firefox: http://www.spreadfirefox.com/\?q=affiliates&id=20287
>
>
>
>------------------------------
>
>Message: 5
>Date: Thu, 30 Jun 2005 17:23:19 +0100 (BST)
>From: "Peter Westwood" peter.westwood@ftwr.co.uk>
>Subject: Re: [wp-hackers] 1.5.1.3 XMLRPC problems
>To: wp-hackers@lists.automattic.com
>Message-ID: www.ftwr.co.uk>
>Content-Type: text/plain;charset=iso-8859-1
>
>
>On Thu, June 30, 2005 5:11 pm, Peter Westwood said:
>
>>
>> I'm downloading ecto as I type this. Feedback soon
>>
>
>Image Upload seems to works OK!
>
>However Posting didn't!
>Results:
>
>...WordPress database error: [You have an error in your SQL syntax.  Check the
>manual that corresponds to your MySQL server version for the right syntax to use
near ')' at line 2]
>...
>....INSERT INTO wp_post2cat (post_id, category_id)
>....VALUES (64, )
>...
>
>  
>    
>      
>        64
>      
>    
>  
>
>
>Hope this helps
>
>westi
>-- 
>Peter Westwood
>Blog: http://www.ftwr.co.uk/blog/
>Get Firefox: http://www.spreadfirefox.com/\?q=affiliates&id=20287
>
>
>
>------------------------------
>
>Message: 6
>Date: Thu, 30 Jun 2005 12:30:10 -0500
>From: Jenna Pfister jennapfister@gmail.com>
>Subject: Re: [wp-hackers] 1.5.1.3 XMLRPC problems
>To: wp-hackers@lists.automattic.com
>Message-ID: ad52146c050630103095cab7c@mail.gmail.com>
>Content-Type: text/plain; charset=ISO-8859-1
>
>I get the same error as Peter. I was using an old version of ecto
>(Mac), so I upgraded thinking it would change things. It didn't.
>
>
>On 6/30/05, Peter Westwood peter.westwood@ftwr.co.uk> wrote:
>> 
>> On Thu, June 30, 2005 5:11 pm, Peter Westwood said:
>> 
>> >
>> > I'm downloading ecto as I type this. Feedback soon
>> >
>> 
>> Image Upload seems to works OK!
>> 
>> However Posting didn't!
>> Results:
>> 
>> ...WordPress database error: [You have an error in your SQL syntax.  Check the
>> manual that corresponds to your MySQL server version for the right syntax to
use near ')' at line 2]
>> ...
>> ....INSERT INTO wp_post2cat (post_id, category_id)
>> ....VALUES (64, )
>> ...
>> 
>>   
>>     
>>       
>>         64
>>       
>>     
>>   
>> 
>> 
>> Hope this helps
>> 
>> westi
>> --
>> Peter Westwood
>> Blog: http://www.ftwr.co.uk/blog/
>> Get Firefox: http://www.spreadfirefox.com/\?q=affiliates&id=20287
>> 
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers@lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
>
>
>------------------------------
>
>Message: 7
>Date: Thu, 30 Jun 2005 18:47:33 -0000 (UTC)
>From: "Ryan Boren" ryan@boren.nu>
>Subject: Re: [wp-hackers] 1.5.1.3 XMLRPC problems
>To: wp-hackers@lists.automattic.com
>Cc: wp-hackers@lists.automattic.com
>Message-ID:
>	47477.64.101.146.91.1120157253.squirrel@webmail.barclay.textdrive.com>
>	
>Content-Type: text/plain;charset=iso-8859-1
>
>> I get the same error as Peter. I was using an old version of ecto
>> (Mac), so I upgraded thinking it would change things. It didn't.
>>
>>
>> On 6/30/05, Peter Westwood peter.westwood@ftwr.co.uk> wrote:
>>>
>>> On Thu, June 30, 2005 5:11 pm, Peter Westwood said:
>>>
>>> >
>>> > I'm downloading ecto as I type this. Feedback soon
>>> >
>>>
>>> Image Upload seems to works OK!
>>>
>>> However Posting didn't!
>>> Results:
>>> 
>>> ...WordPress database error: [You
>>> have an error in your SQL syntax.  Check the
>>> manual that corresponds to your MySQL server version for the right
>>> syntax to use near ')' at line 2]
>>> ...
>>> ....INSERT INTO wp_post2cat (post_id, category_id)
>>> ....VALUES (64, )
>>> ...
>>> 
>>>   
>>>     
>>>       
>>>         64
>>>       
>>>     
>>>   
>>> 
>>>
>>> Hope this helps
>>>
>>> westi
>
>Excellent.  That's what I needed.
>
>This version of functions-post.php "should" fix ecto.  Give it a twirl.
>
>http://trac.wordpress.org/file/branches/1.5/wp-includes/functions-post.php\?rev=2681&format=txt
>
>Ryan
>
>
>
>
>------------------------------
>
>Message: 8
>Date: Thu, 30 Jun 2005 14:01:01 -0500
>From: Jenna Pfister jennapfister@gmail.com>
>Subject: Re: [wp-hackers] 1.5.1.3 XMLRPC problems
>To: wp-hackers@lists.automattic.com
>Message-ID: ad52146c0506301201309ba157@mail.gmail.com>
>Content-Type: text/plain; charset=ISO-8859-1
>
>Indeed, it did fix it!
>
>
>On 6/30/05, Ryan Boren ryan@boren.nu> wrote:
>> > I get the same error as Peter. I was using an old version of ecto
>> > (Mac), so I upgraded thinking it would change things. It didn't.
>> >
>> >
>> > On 6/30/05, Peter Westwood peter.westwood@ftwr.co.uk> wrote:
>> >>
>> >> On Thu, June 30, 2005 5:11 pm, Peter Westwood said:
>> >>
>> >> >
>> >> > I'm downloading ecto as I type this. Feedback soon
>> >> >
>> >>
>> >> Image Upload seems to works OK!
>> >>
>> >> However Posting didn't!
>> >> Results:
>> >> 
>> >> ...WordPress database error: [You
>> >> have an error in your SQL syntax.  Check the
>> >> manual that corresponds to your MySQL server version for the right
>> >> syntax to use near ')' at line 2]
>> >> ...
>> >> ....INSERT INTO wp_post2cat (post_id, category_id)
>> >> ....VALUES (64, )
>> >> ...
>> >> 
>> >>   
>> >>     
>> >>       
>> >>         64
>> >>       
>> >>     
>> >>   
>> >> 
>> >>
>> >> Hope this helps
>> >>
>> >> westi
>> 
>> Excellent.  That's what I needed.
>> 
>> This version of functions-post.php "should" fix ecto.  Give it a twirl.
>> 
>>
http://trac.wordpress.org/file/branches/1.5/wp-includes/functions-post.php\?rev=2681&format=txt
>> 
>> Ryan
>> 
>> 
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers@lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
>
>
>------------------------------
>
>_______________________________________________
>wp-hackers mailing list
>wp-hackers@lists.automattic.com
>http://lists.automattic.com/mailman/listinfo/wp-hackers
>
>
>End of wp-hackers Digest, Vol 5, Issue 67
>*****************************************


From mark.wordpress at txfx.net  Fri Jul  1 05:18:47 2005
From: mark.wordpress at txfx.net (Mark Jaquith)
Date: Fri Jul  1 05:18:41 2005
Subject: [wp-hackers] Trackback RDF
Message-ID: <42C4D237.4040601@txfx.net>

Why was the Trackback RDF auto-discovery code axed from the default 
templates?  Matt's commit says "Removed needless RDF calls," but 
removing them makes it so that no existing blog software I know of can 
auto-discover the Trackback URI.
http://trac.wordpress.org/changeset/2417

Granted, the RDF solution isn't the cleanest, but it's the standard.
http://www.sixapart.com/pronet/docs/trackback_spec

Are we just saying that it's tough luck for people who were used to 
Trackback Autodiscovery and that they'll just have to start hunting for 
the Trackback URI on the to-be-pinged site?

rel="trackback" seems cleaner to me, but it's not supported by anything 
I know of.

- Mark Jaquith
From ryan at boren.nu  Fri Jul  1 05:34:35 2005
From: ryan at boren.nu (Ryan Boren)
Date: Fri Jul  1 05:34:38 2005
Subject: [wp-hackers] User Capabilities
Message-ID: <1120196075.7972.0.camel@portnoy.fuzzybelly.org>

Here's a sample capabilities/rights/privileges implementation.  It uses
the role/capability model.  A handful of default roles are specified,
each with its own set of capabilities.  I used the Textpattern roles as
a starting point.  The WP_Roles class holds the default roles.  These
are run through a filter in case plugins want to do wholesale role
changes.  WP_Roles instantiates each default role as a WP_Role object.
A global $wp_roles object is created during WP init which holds all of
the roles.  Plugins can manipulate roles and their capabilities using a
few add/remove methods.

// Get the 'staff_writer' role.
$staff = $wp_roles->get_role('staff_writer');

// Don't let staff writers upload images.
$staff->remove_cap('upload_image');

// Do let them edit pages
$staff->add_cap('edit_pages');

// Add a new role.
$wp_roles->add_role('ombudsman', array('edit_posts', 'publish_posts',
'edit_published_posts'));

A WP_User class takes a user id, gets the user_level, maps that to a
role, and checks capabilities against that role.  During WP init, a
global $current_user object is instantiated for the currently logged in
user.  The function current_user_can() is a convenience wrapper around
$current_user.  It  is used to check capabilities of the current user.

if ( current_user_can('edit_posts') )
   // Do posty edity type stuff

Right now roles map to user levels.  User levels 8 through 10 are a
Publisher, for example.  This can be changed, of course.  Leaving the
database alone and doing some mapping is easier for now.

Ryan
-------------- next part --------------
A non-text attachment was scrubbed...
Name: capabilities.php
Type: application/x-php
Size: 5966 bytes
Desc: not available
Url : http://comox.textdrive.com/pipermail/wp-hackers/attachments/20050701/f2c761ff/capabilities.bin
From mark.wordpress at txfx.net  Fri Jul  1 06:05:18 2005
From: mark.wordpress at txfx.net (Mark Jaquith)
Date: Fri Jul  1 06:05:17 2005
Subject: [wp-hackers] User Capabilities
In-Reply-To: <1120196075.7972.0.camel@portnoy.fuzzybelly.org>
References: <1120196075.7972.0.camel@portnoy.fuzzybelly.org>
Message-ID: <42C4DD1E.5080807@txfx.net>

Ryan Boren wrote:

>// Don't let staff writers upload images.
>$staff->remove_cap('upload_image');
>
Sir, I $staff->remove_cap('to_you')

</bad-bad-joke>

With edit_posts, it would be good to be able to specify if the role can 
edit own posts only, own posts and posts of lower levels, own posts and 
posts of same level.

For instance,

$collaborators = $wp_roles->get_role('collaborators');
$collaborators->add_cap('edit_post_same_level');

Or something.  Sometimes you want people of the same level to be able to 
edit each others posts, and sometimes you don't.  This would mean that 
there would have to be some sort of way of specifying that certain 
groups are "higher up" than others.

P.S. I love the "natural language" feel of 
current_user_can('edit_posts');  Brilliant.

From robla at robla.net  Fri Jul  1 06:41:34 2005
From: robla at robla.net (Rob Lanphier)
Date: Fri Jul  1 06:42:01 2005
Subject: [wp-hackers] User Capabilities
In-Reply-To: <1120196075.7972.0.camel@portnoy.fuzzybelly.org>
References: <1120196075.7972.0.camel@portnoy.fuzzybelly.org>
Message-ID: <1120200095.18801.136.camel@localhost.localdomain>

Very cool!  As far as the backwards compatibility mechanism goes, I was
thinking it might be smart to map things the other direction as well,
creating capabilities with names like "level1", "level2", etc, so that
chunks of code like this:

if ($user_level >= 6)

...can be replaced with this in a semi-automated fashion:

if ($current_user_can('level6')

...or keeping with the natural language feel of things:
current_user_can('dolevel6stuff')

...and then, of course, give level 6 users the "level1" through "level6"
capabilities.

Regardless, I like the fact that this moves toward something that aligns
well with other applications out there, and moves it closer to full RBAC
without introducing a ton of complexity.

Rob

On Fri, 2005-07-01 at 00:34 -0500, Ryan Boren wrote:
> Here's a sample capabilities/rights/privileges implementation.  It uses
> the role/capability model.  A handful of default roles are specified,
> each with its own set of capabilities.  I used the Textpattern roles as
> a starting point.  The WP_Roles class holds the default roles.  These
> are run through a filter in case plugins want to do wholesale role
> changes.  WP_Roles instantiates each default role as a WP_Role object.
> A global $wp_roles object is created during WP init which holds all of
> the roles.  Plugins can manipulate roles and their capabilities using a
> few add/remove methods.
> 
> // Get the 'staff_writer' role.
> $staff = $wp_roles->get_role('staff_writer');
> 
> // Don't let staff writers upload images.
> $staff->remove_cap('upload_image');
> 
> // Do let them edit pages
> $staff->add_cap('edit_pages');
> 
> // Add a new role.
> $wp_roles->add_role('ombudsman', array('edit_posts', 'publish_posts',
> 'edit_published_posts'));
> 
> A WP_User class takes a user id, gets the user_level, maps that to a
> role, and checks capabilities against that role.  During WP init, a
> global $current_user object is instantiated for the currently logged in
> user.  The function current_user_can() is a convenience wrapper around
> $current_user.  It  is used to check capabilities of the current user.
> 
> if ( current_user_can('edit_posts') )
>    // Do posty edity type stuff
> 
> Right now roles map to user levels.  User levels 8 through 10 are a
> Publisher, for example.  This can be changed, of course.  Leaving the
> database alone and doing some mapping is easier for now.
> 
> Ryan
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

From lstelie at gmail.com  Fri Jul  1 07:03:09 2005
From: lstelie at gmail.com (Luc Saint-Elie)
Date: Fri Jul  1 07:27:14 2005
Subject: [wp-hackers] A thought about wp-rss2.php
Message-ID: <6eb1cb41050701000322455d4c@mail.gmail.com>

Hello,

It's just a thought, not a proposition of some code.

wp-rss2.php conception relates to an area when RSS feed were just a
new, high tech way to access the weblog content.

Today things are rather quickly evolving. I'm pretty sure a poll about
the amount of RSS access among weblogs would be surprising

In my case current situation is shown here :
http://blog.saint-elie.com/images/viedusite/rss_access.jpg (as you can
see 50% of my visitors arrive by a RSS way and I doubt to be the only
one)

The day when the first "browser" will be a RSS reader is not that far.

The point of this message is that RSS is a higly delicate area, far
more that HTML/XHTML.
A very light error breaks the readers and so on.

WP is a dam good HTML/XHTML machine, probably the best one... but a
very average RSS machine.

Hacking wp-rss2.php is a very risky task... and for an average wp
install there is a lot to hack (to add creative commons namespace and
tags, now to add iTunes domain name and tags for podcasters and so on)

It would perhaps be a not so bad solution to have a system that output
a static xml file updated each time a new post is isued, in the spirit
of GoogleMaps plug ins.

This way, correcting a badly tagged output would be easier and it
would be possible more easily for users to adapt their system to new
propositions. For example the recent iTunes Podcasting story as shown
two things : the first one is that a huge lot of podcaster use
WordPress (I'm one of those), the second is that these guys have to
struggle a lot to suddenly adapt their install to the new situation.

My two cents

Luc
From false.hopes at gmail.com  Fri Jul  1 08:26:46 2005
From: false.hopes at gmail.com (Robert Deaton)
Date: Fri Jul  1 08:26:53 2005
Subject: [wp-hackers] A thought about wp-rss2.php
In-Reply-To: <6eb1cb41050701000322455d4c@mail.gmail.com>
References: <6eb1cb41050701000322455d4c@mail.gmail.com>
Message-ID: <a491f91d05070101265782e081@mail.gmail.com>

I say rather than make the users worry about hacking, we just add the proper 
hooks for plugins, makes everything so much simpler.

On 7/1/05, Luc Saint-Elie <lstelie@gmail.com> wrote:
> 
> Hello,
> 
> It's just a thought, not a proposition of some code.
> 
> wp-rss2.php conception relates to an area when RSS feed were just a
> new, high tech way to access the weblog content.
> 
> Today things are rather quickly evolving. I'm pretty sure a poll about
> the amount of RSS access among weblogs would be surprising
> 
> In my case current situation is shown here :
> http://blog.saint-elie.com/images/viedusite/rss_access.jpg (as you can
> see 50% of my visitors arrive by a RSS way and I doubt to be the only
> one)
> 
> The day when the first "browser" will be a RSS reader is not that far.
> 
> The point of this message is that RSS is a higly delicate area, far
> more that HTML/XHTML.
> A very light error breaks the readers and so on.
> 
> WP is a dam good HTML/XHTML machine, probably the best one... but a
> very average RSS machine.
> 
> Hacking wp-rss2.php is a very risky task... and for an average wp
> install there is a lot to hack (to add creative commons namespace and
> tags, now to add iTunes domain name and tags for podcasters and so on)
> 
> It would perhaps be a not so bad solution to have a system that output
> a static xml file updated each time a new post is isued, in the spirit
> of GoogleMaps plug ins.
> 
> This way, correcting a badly tagged output would be easier and it
> would be possible more easily for users to adapt their system to new
> propositions. For example the recent iTunes Podcasting story as shown
> two things : the first one is that a huge lot of podcaster use
> WordPress (I'm one of those), the second is that these guys have to
> struggle a lot to suddenly adapt their install to the new situation.
> 
> My two cents
> 
> Luc
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
> 



-- 
--Robert Deaton
http://somethingunpredictable.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://comox.textdrive.com/pipermail/wp-hackers/attachments/20050701/3d95783e/attachment-0001.html
From r at schestowitz.com  Fri Jul  1 09:49:22 2005
From: r at schestowitz.com (Roy Schestowitz)
Date: Fri Jul  1 09:49:26 2005
Subject: [wp-hackers] A thought about wp-rss2.php
In-Reply-To: <6eb1cb41050701000322455d4c@mail.gmail.com>
References: <6eb1cb41050701000322455d4c@mail.gmail.com>
Message-ID: <20050701104922.00thbs8pey80448g@banana.catalyst2.com>

Quoting Luc Saint-Elie <lstelie@gmail.com>:

> Hello,
>
> It's just a thought, not a proposition of some code.
>
> wp-rss2.php conception relates to an area when RSS feed were just a
> new, high tech way to access the weblog content.
>
> Today things are rather quickly evolving. I'm pretty sure a poll about
> the amount of RSS access among weblogs would be surprising
>
> In my case current situation is shown here :
> http://blog.saint-elie.com/images/viedusite/rss_access.jpg (as you can
> see 50% of my visitors arrive by a RSS way and I doubt to be the only
> one)
>
> The day when the first "browser" will be a RSS reader is not that far.
>
> The point of this message is that RSS is a higly delicate area, far
> more that HTML/XHTML.
> A very light error breaks the readers and so on.
>
> WP is a dam good HTML/XHTML machine, probably the best one... but a
> very average RSS machine.
>
> Hacking wp-rss2.php is a very risky task... and for an average wp
> install there is a lot to hack (to add creative commons namespace and
> tags, now to add iTunes domain name and tags for podcasters and so on)
>
> It would perhaps be a not so bad solution to have a system that output
> a static xml file updated each time a new post is isued, in the spirit
> of GoogleMaps plug ins.
>
> This way, correcting a badly tagged output would be easier and it
> would be possible more easily for users to adapt their system to new
> propositions. For example the recent iTunes Podcasting story as shown
> two things : the first one is that a huge lot of podcaster use
> WordPress (I'm one of those), the second is that these guys have to
> struggle a lot to suddenly adapt their install to the new situation.
>
> My two cents
>
> Luc

You are right in suggesting that wp-rss2.php is very fragile. However, if you
choose to muck about with it, then you might as well save it under a different
filename, syndicate it for a couple of days and if all goes well, 
overwrite the
old wp-rss2.php with your experimental revision.

Moreover, I suggest you look into the possibility of dumping 
'off-the-fly' site
summaries onto text files. Some systems use this approach, which also allows
people who are unfamiliar with RSS to syndicate sites. Text files can 
sometimes
be more manageable, although less semantically proper. If you then wish to
syndicate static HTML pages, you might as well have a look at code that 
I wrote
recently: http://www.schestowitz.com/Software/Syndication/

Regards,

Roy

-- 
Roy S. Schestowitz
http://Schestowitz.com

From lstelie at gmail.com  Fri Jul  1 10:19:51 2005
From: lstelie at gmail.com (Luc Saint-Elie)
Date: Fri Jul  1 10:19:59 2005
Subject: [wp-hackers] A thought about wp-rss2.php
In-Reply-To: <20050701104922.00thbs8pey80448g@banana.catalyst2.com>
References: <6eb1cb41050701000322455d4c@mail.gmail.com>
	<20050701104922.00thbs8pey80448g@banana.catalyst2.com>
Message-ID: <6eb1cb41050701031972c69b7d@mail.gmail.com>

2005/7/1, Roy Schestowitz <r@schestowitz.com>:

> You are right in suggesting that wp-rss2.php is very fragile. However, if you
> choose to muck about with it, then you might as well save it under a different
> filename, syndicate it for a couple of days and if all goes well,
> overwrite the  old wp-rss2.php with your experimental revision.

Hello,

In fact I was not calling for personal help, I use a heavily modified
wp-rss2.php that works pretty well (it must...I'm ranked #3 on the top
100 for my national iTunes podcast directory..)

What I wanted to express is that, it would be a great idea to have in
WP a RSS generation as sophisticated and efficient as the HTML/XHTML
one.

Today it's not the case.

WP emphasis the ease of use, and is clearly the best in this area as
long as it comes to http access.
I think RSS is no more about "syndication" in the meaning this word
had a few years ago. Today RSS is about basic standard weblog access.
As I stated in my first message, in my case, RSS represent 50% of my
weblog access and I'm sure I'm not the only one in this situation.

The fact iTunes has been "enclosures-enabled" is a huge step in this
direction, as I suppose Microsoft, yahoo, Google and other will do the
same pretty soon.

My "thought about wp-rss2.php" was in fact that RSS is no more a
simple and funny extention  to be added to a system intended to
generate HTML/XHTML but "the other way  to access your content"
waiting for the day (probably not very far) were for a lot of weblogs
it will be "the standrad and natural way to access the content".. http
been just another option..

Luc
From peter.westwood at ftwr.co.uk  Fri Jul  1 11:03:31 2005
From: peter.westwood at ftwr.co.uk (Peter Westwood)
Date: Fri Jul  1 11:04:19 2005
Subject: [wp-hackers] 1.5.1.3 XMLRPC problems
In-Reply-To: <1120172279.10601.52.camel@portnoy.fuzzybelly.org>
References: <42C2AD87.3030201@skippy.net> <42C2CE16.60100@skippy.net>
	<1120063604.29275.88.camel@portnoy.fuzzybelly.org>
	<42C30F33.7020806@skippy.net>
	<1120083476.10601.4.camel@portnoy.fuzzybelly.org>
	<1120090925.10601.27.camel@portnoy.fuzzybelly.org>
	<1120094518.10601.28.camel@portnoy.fuzzybelly.org>
	<1120146821.10601.37.camel@portnoy.fuzzybelly.org>
	<33514.194.242.149.254.1120147869.squirrel@www.ftwr.co.uk>
	<45780.194.242.149.254.1120148599.squirrel@www.ftwr.co.uk>
	<ad52146c050630103095cab7c@mail.gmail.com>
	<47477.64.101.146.91.1120157253.squirrel@webmail.barclay.textdrive.com>
	<1763.217.155.152.69.1120165951.squirrel@www.ftwr.co.uk>
	<1120172279.10601.52.camel@portnoy.fuzzybelly.org>
Message-ID: <1229.217.155.152.69.1120215811.squirrel@www.ftwr.co.uk>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On Thu, June 30, 2005 11:57 pm, Ryan Boren said:
> On Thu, 2005-06-30 at 22:12 +0100, Peter Westwood said:
>> On Thu, June 30, 2005 7:47 pm, Ryan Boren said:
>> > Excellent.  That's what I needed.
>> >
>> > This version of functions-post.php "should" fix ecto.  Give it a twirl.
>> >
>> > http://trac.wordpress.org/file/branches/1.5/wp-includes/functions-post.php?rev=2681&format=txt
>> >
>>
>> Glad we could help.  Ethereal has to be my favourite debugging tool for things like this!
>
> Indeed, ethereal is very useful.
>
> I borrowed a windows laptop and tried to install ecto, but it complained
> about .NET being too old.  If you or someone else can capture a session
> where ecto is used to write a new post, that would be helpful in
> tracking down why some ecto users are getting the extra default
> category.  I think everything else is resolved.
>

Ok .. An etheral capture. - "Ecto initial get posts error.txt"

New Ecto install today as it's a different machine - the initial get_posts doesn't work - php error in response

This diff fixes that: "functions-post.php.diff"

Etheral capture of new post: "new post.txt"
I didn't enter anything in the category box as by default it's empty

westi
- --
Peter Westwood
Blog: http://www.ftwr.co.uk/blog/
Get Firefox: http://www.spreadfirefox.com/?q=affiliates&id=20287

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.1 (GNU/Linux)

iD8DBQFCxSMDVPRdzag0AcURAlufAKC0gk4ksrGv/lCtmII3On6koXudoQCfUmA3
Pdk6hd5fXS6gsUKGIoLltJ4=
=1ECz
-----END PGP SIGNATURE-----
-------------- next part --------------
Skipped content of type multipart/signed-------------- next part --------------
Skipped content of type multipart/signed-------------- next part --------------
Skipped content of type multipart/signed
From r at schestowitz.com  Fri Jul  1 11:30:16 2005
From: r at schestowitz.com (Roy Schestowitz)
Date: Fri Jul  1 11:30:19 2005
Subject: [wp-hackers] A thought about wp-rss2.php
In-Reply-To: <6eb1cb41050701031972c69b7d@mail.gmail.com>
References: <6eb1cb41050701000322455d4c@mail.gmail.com>
	<20050701104922.00thbs8pey80448g@banana.catalyst2.com>
	<6eb1cb41050701031972c69b7d@mail.gmail.com>
Message-ID: <20050701123016.8mnj2s9t8jy808k8@banana.catalyst2.com>

Quoting Luc Saint-Elie <lstelie@gmail.com>:

> 2005/7/1, Roy Schestowitz <r@schestowitz.com>:
>
>> You are right in suggesting that wp-rss2.php is very fragile. 
>> However, if you
>> choose to muck about with it, then you might as well save it under a 
>> different
>> filename, syndicate it for a couple of days and if all goes well,
>> overwrite the  old wp-rss2.php with your experimental revision.
>
> Hello,
>
> In fact I was not calling for personal help, I use a heavily modified
> wp-rss2.php that works pretty well (it must...I'm ranked #3 on the top
> 100 for my national iTunes podcast directory..)
>
> What I wanted to express is that, it would be a great idea to have in
> WP a RSS generation as sophisticated and efficient as the HTML/XHTML
> one.
>
> Today it's not the case.
>
> WP emphasis the ease of use, and is clearly the best in this area as
> long as it comes to http access.
> I think RSS is no more about "syndication" in the meaning this word
> had a few years ago. Today RSS is about basic standard weblog access.
> As I stated in my first message, in my case, RSS represent 50% of my
> weblog access and I'm sure I'm not the only one in this situation.
>
> The fact iTunes has been "enclosures-enabled" is a huge step in this
> direction, as I suppose Microsoft, yahoo, Google and other will do the
> same pretty soon.
>
> My "thought about wp-rss2.php" was in fact that RSS is no more a
> simple and funny extention  to be added to a system intended to
> generate HTML/XHTML but "the other way  to access your content"
> waiting for the day (probably not very far) were for a lot of weblogs
> it will be "the standrad and natural way to access the content".. http
> been just another option..
>
> Luc

I can foresee this heading towards the religious war between supporters of
browsers and supporters of feed readers. Don't forget how you leave 
comments in
blogs and don't forget about bandwidth inflation, which makes those simplified
feeds less necessary. Microsoft geek frogger (Scoble) once suggested 
that feeds
will rule while Ballmer disagreed.

The bottom line is that extending feeds excessively leads to unification of
feeds and full content -- meeting somewhere along the middle if you like. If a
lot of your traffic originated from RSS, is it possible that your Web 
pages are
overly heavy? PalmAddicts, for example, include about 1 MB of pictures in the
front page alone. Would you blame everyone for syndicating? Perhaps a light
version of the site would bridge the gap between feeds and HTML/XHTML.

Roy

-- 
Roy S. Schestowitz
http://Schestowitz.com

From lstelie at gmail.com  Fri Jul  1 11:57:15 2005
From: lstelie at gmail.com (Luc Saint-Elie)
Date: Fri Jul  1 11:57:20 2005
Subject: [wp-hackers] A thought about wp-rss2.php
In-Reply-To: <20050701123016.8mnj2s9t8jy808k8@banana.catalyst2.com>
References: <6eb1cb41050701000322455d4c@mail.gmail.com>
	<20050701104922.00thbs8pey80448g@banana.catalyst2.com>
	<6eb1cb41050701031972c69b7d@mail.gmail.com>
	<20050701123016.8mnj2s9t8jy808k8@banana.catalyst2.com>
Message-ID: <6eb1cb4105070104574deec1d4@mail.gmail.com>

2005/7/1, Roy Schestowitz <r@schestowitz.com>:
> I can foresee this heading towards the religious war between supporters of
> browsers and supporters of feed readers.

Roy,

Starting a flame war was very far from my intention.
I don't know if RSS is good or bad, and to be honest I really don't
care (as long as my readers are happy with the content I publish the
way they access it is their problem not mine).

My 50% RSS readers use RSS.. because they find it more convenient (for
reason that I don't feel the need to judge).
By the way "RSS" is no more and for a pretty long time the opposite of
"comments".
In my case a lot of people access the content first by RSS then if the
subject fits, they connect the site and react, most (if not all ) RSS
readers allow this very easily.
In some cases (NetNewsWire on Mac OS X, (#3 in the browsers lists for
my site) you can event post a comment from the RSSreader interface.

You can see it in real life  there :
http://blog.saint-elie.com/images/viedusite/rss.jpg
What you see in this screenshot is a post from my site viewed with
NetNewsWire. in the center of the red circle is the link to comments,
clicking on it open in the rssreader the page ready to be commented.
So as you see "RSS vs Interactivity" is an outdated point of view.


If I don't care about RSS been good or bad, I do car about WP as the
best tool, I really love it. And to stay the best publishing tool WP
will have at some time  to rethink its RSS strategy. It was my point.

RSS stuff is so complicated  and so badly handled by all blogging
package that new services are poping up like feedburner whose only
purpose is to handle for you the RSS stuff.. strange situation..

Luc
From ringmaster at midnightcircus.com  Fri Jul  1 12:53:12 2005
From: ringmaster at midnightcircus.com (Owen Winkler)
Date: Fri Jul  1 12:49:57 2005
Subject: [wp-hackers] A thought about wp-rss2.php
In-Reply-To: <6eb1cb4105070104574deec1d4@mail.gmail.com>
References: <6eb1cb41050701000322455d4c@mail.gmail.com>	<20050701104922.00thbs8pey80448g@banana.catalyst2.com>	<6eb1cb41050701031972c69b7d@mail.gmail.com>	<20050701123016.8mnj2s9t8jy808k8@banana.catalyst2.com>
	<6eb1cb4105070104574deec1d4@mail.gmail.com>
Message-ID: <42C53CB8.8000204@midnightcircus.com>

Luc Saint-Elie wrote:
> RSS stuff is so complicated  and so badly handled by all blogging
> package that new services are poping up like feedburner whose only
> purpose is to handle for you the RSS stuff.. strange situation..

It seems like what you are looking for is a class that can manage and 
output feeds, something like what can be found at:
http://www.bitfolge.de/rsscreator-en.html

The key being, if I take your point correctly, that the output produced 
is always valid because you don't tweak the content directly, but from 
an object instead.

I don't have any experience with the class I mentioned, but it doesn't 
seem like a bad idea.  Assuming it allows for the custom tags that 
WordPress already outputs, and can be made to support the 1.6 plugin 
modifications to feeds, I don't see why this wouldn't be an improvement 
to the feed output WP already generates.

Didn't we have this discussion before?  Somewhat:
http://article.gmane.org/gmane.comp.web.wordpress.devel/75

Owen
From lstelie at gmail.com  Fri Jul  1 13:24:15 2005
From: lstelie at gmail.com (Luc Saint-Elie)
Date: Fri Jul  1 13:24:23 2005
Subject: [wp-hackers] A thought about wp-rss2.php
In-Reply-To: <42C53CB8.8000204@midnightcircus.com>
References: <6eb1cb41050701000322455d4c@mail.gmail.com>
	<20050701104922.00thbs8pey80448g@banana.catalyst2.com>
	<6eb1cb41050701031972c69b7d@mail.gmail.com>
	<20050701123016.8mnj2s9t8jy808k8@banana.catalyst2.com>
	<6eb1cb4105070104574deec1d4@mail.gmail.com>
	<42C53CB8.8000204@midnightcircus.com>
Message-ID: <6eb1cb4105070106246cadb7c6@mail.gmail.com>

2005/7/1, Owen Winkler <ringmaster@midnightcircus.com>:
> The key being, if I take your point correctly, that the output produced
> is always valid because you don't tweak the content directly, but from
> an object instead.

Hello,

yes exactly.
An example :
If you want to add Creative Commons statement to your feed you need to 

1)  add the namespace :
xmlns:creativeCommons="http://backend.userland.com/creativeCommonsRssModule"

2) add a chanel level data :
<creativeCommons:license>http://www.creativecommons.org/licenses/by-nd/2.0</creativeCommons:license>

This is not that difficult but requires editing wp-rss2.php and I
don't think it's a good thing to let to it in the end user hands. The
smallest error can break the feed.

Another example more complex , podcasting if "this week hyped stuff",
in order to be listed on Itunes Music Store you need to

1) add the namespace :
xmlns:itunes="http://www.itunes.com/DTDs/Podcast-1.0.dtd"

2) add various channel level data :
	<itunes:category text="category">
		<itunes:category text="sub-category" />
	</itunes:category>
	<itunes:category text="category">
		<itunes:category text="sub-category" />
		<itunes:category text="sub-category" />
		<itunes:category text="sub-category" />
	</itunes:category>
	<itunes:explicit>No</itunes:explicit>
	<itunes:subtitle>To be displayed in itunes</itunes:subtitle>
	<itunes:summary>Description of the site</itunes:summary>
	<itunes:author>author name</itunes:author>
	<itunes:owner>
		<itunes:name>author name</itunes:name>
		<itunes:email>author@stuff.com</itunes:email>
	</itunes:owner>
 and so on...


In my opinion it would be great from the admin section to provide 3
forms to be able to :

1 : modify/add   namespace statements from a form (with default values)
2:  modify/add   channel level values (with default values)
3:  modify/add   item level values (with default values)

WP allow modifying templates files (without form but this is normal as
template file is not a highly structured file, in fact I think it
would be great to have in the same way a wp-rss2.php editor allowing
through forms (because this file is a very highly structured one) that
can be edited without touching the real file.

In an ideal world, this wp-rss2.php editor would be able to receive
plug-in and for example a plug-in author would be able to provide an
extension to add iTunes tag with ease, while another one would provide
an extension to add Creative Commons tags with ease and so on for
future extension that may arise.

Luc

note : sorry if I'm not very clear but English is not my mother tongue...
From trevorturk at yahoo.com  Fri Jul  1 13:53:39 2005
From: trevorturk at yahoo.com (Trevor Turk)
Date: Fri Jul  1 13:53:42 2005
Subject: [wp-hackers] User Capabilities
In-Reply-To: <1120196075.7972.0.camel@portnoy.fuzzybelly.org>
Message-ID: <20050701135339.1257.qmail@web31801.mail.mud.yahoo.com>

> if ( current_user_can('edit_posts') )
>    // Do posty edity type stuff

Wow. It's little stuff like this... 

From abihari at gmail.com  Fri Jul  1 14:09:56 2005
From: abihari at gmail.com (Ashwin Bihari)
Date: Fri Jul  1 14:10:01 2005
Subject: [wp-hackers] /wp-admin/link-import.php with CURL support
Message-ID: <1f11a549050701070955865924@mail.gmail.com>

Greetings,

Just made a simple patch to add CURL support to
/wp-admin/link-import.php to allow updating links from sites such as
http://blogrolling.com from Links->Import Links in Administration.

Regards
-- 
~ Ashwin
-------------- next part --------------
A non-text attachment was scrubbed...
Name: link-import.diff
Type: application/octet-stream
Size: 936 bytes
Desc: not available
Url : http://comox.textdrive.com/pipermail/wp-hackers/attachments/20050701/b5700a3e/link-import.obj
From ryan at boren.nu  Fri Jul  1 15:08:17 2005
From: ryan at boren.nu (Ryan Boren)
Date: Fri Jul  1 15:08:22 2005
Subject: [wp-hackers] User Capabilities
In-Reply-To: <1120200095.18801.136.camel@localhost.localdomain>
References: <1120196075.7972.0.camel@portnoy.fuzzybelly.org>
	<1120200095.18801.136.camel@localhost.localdomain>
Message-ID: <1120230497.15622.9.camel@portnoy.fuzzybelly.org>

On Thu, 2005-06-30 at 23:41 -0700, Rob Lanphier wrote:
> Very cool!  As far as the backwards compatibility mechanism goes, I was
> thinking it might be smart to map things the other direction as well,
> creating capabilities with names like "level1", "level2", etc, so that
> chunks of code like this:
> 
> if ($user_level >= 6)
> 
> ...can be replaced with this in a semi-automated fashion:
> 
> if ($current_user_can('level6')
> 
> ...or keeping with the natural language feel of things:
> current_user_can('dolevel6stuff')
> 
> ...and then, of course, give level 6 users the "level1" through "level6"
> capabilities.

Yeah, we'll need stuff like this for backwards compat.  One specific
instance is plugins adding new admin menus.   They currently specify a
user level.  They need to specify capabilities instead.  To illustrate,
here's how the theme menu is currently constructed in menu.php.

$submenu['themes.php'][5] = array(__('Themes'), 8, 'themes.php');
$submenu['themes.php'][10] = array(__('Theme Editor'), 8,
'theme-editor.php');

In the capability model, this becomes:

$submenu['themes.php'][5] = array(__('Themes'), 'switch_themes',
'themes.php');
$submenu['themes.php'][10] = array(__('Theme Editor'), 'edit_themes',
'theme-editor.php');

A capability is used instead of a user level when creating menus.
Plugins too need to be updated to create menus with capabilities instead
of user levels.  However, there are a lot of plugins out there and we
need to be backwards compatible with them.  So, as you suggest, user
level 10 becomes a 'level10' capability, level 5 becomes 'level5', and
so on.  Roles will be assigned the 'level*' caps they need to be
compatible with old plugins.

Ryan



From ryan at boren.nu  Fri Jul  1 15:17:18 2005
From: ryan at boren.nu (Ryan Boren)
Date: Fri Jul  1 15:17:20 2005
Subject: [wp-hackers] User Capabilities
In-Reply-To: <42C4DD1E.5080807@txfx.net>
References: <1120196075.7972.0.camel@portnoy.fuzzybelly.org>
	<42C4DD1E.5080807@txfx.net>
Message-ID: <1120231038.15622.19.camel@portnoy.fuzzybelly.org>

On Fri, 2005-07-01 at 02:05 -0400, Mark Jaquith wrote:
> Ryan Boren wrote:
> 
> >// Don't let staff writers upload images.
> >$staff->remove_cap('upload_image');
> >
> Sir, I $staff->remove_cap('to_you')
> 
> </bad-bad-joke>
> 
> With edit_posts, it would be good to be able to specify if the role can 
> edit own posts only, own posts and posts of lower levels, own posts and 
> posts of same level.
> 
> For instance,
> 
> $collaborators = $wp_roles->get_role('collaborators');
> $collaborators->add_cap('edit_post_same_level');
> 
> Or something.  Sometimes you want people of the same level to be able to 
> edit each others posts, and sometimes you don't.  This would mean that 
> there would have to be some sort of way of specifying that certain 
> groups are "higher up" than others.

I'd prefer to get away from user levels entirely.  A user can either
edit other users' posts, or not.

A more useful and understandable model would be to limit roles to
categories.  A user would have a role and a list of categories to which
that role's post edit/create/publish capabilities would apply.  A
Managing Editor, for example, would have capabilities on all categories,
whereas a Copy Editor might have capabilities on only one or two
categories.  So, a Managing Editor could edit any user's posts and a
Copy Editor could edit other users' posts only within a set of
categories.

Ryan

From mark at wltc.net  Fri Jul  1 15:34:09 2005
From: mark at wltc.net (Mark Ghosh)
Date: Fri Jul  1 15:34:19 2005
Subject: [wp-hackers] User Capabilities
In-Reply-To: <1120231038.15622.19.camel@portnoy.fuzzybelly.org>
References: <1120196075.7972.0.camel@portnoy.fuzzybelly.org>	<42C4DD1E.5080807@txfx.net>
	<1120231038.15622.19.camel@portnoy.fuzzybelly.org>
Message-ID: <42C56271.8010105@wltc.net>

Ryan Boren wrote:

>I'd prefer to get away from user levels entirely.  A user can either
>edit other users' posts, or not.
>
>A more useful and understandable model would be to limit roles to
>categories. 
>

I have to agree. The user level system has never been quite as 
transparent as I would have liked it (as a Wordpress user).
 From my professional experience, a detailed user flags system with 
flags (or bits flags) which can be modified through a user management 
page, have worked very well.

I see three seperate groups of "flags" in Wordpress.
1) A set of Program flags - which could allow entry into and 
modification of items that control the whole Wordpress install.
2) A set of Function flags - which could control allowed functions for 
each user (can send pings, can create categories)
3) A set of Category flags - which could control a users' involvement 
and control over each category (can edit, can delete from category)

For backwards compatibility we could assign a pre-determined set of 
flags for each user level and populate the user_flags variable at the 
beginning of each session.

Something to think about.

Mark Ghosh

From ringmaster at midnightcircus.com  Fri Jul  1 15:37:40 2005
From: ringmaster at midnightcircus.com (Owen Winkler)
Date: Fri Jul  1 15:34:25 2005
Subject: [wp-hackers] User Capabilities
In-Reply-To: <1120231038.15622.19.camel@portnoy.fuzzybelly.org>
References: <1120196075.7972.0.camel@portnoy.fuzzybelly.org>	<42C4DD1E.5080807@txfx.net>
	<1120231038.15622.19.camel@portnoy.fuzzybelly.org>
Message-ID: <42C56344.4060006@midnightcircus.com>

Ryan Boren wrote:
> A more useful and understandable model would be to limit roles to
> categories.  A user would have a role and a list of categories to which
> that role's post edit/create/publish capabilities would apply.  A
> Managing Editor, for example, would have capabilities on all categories,
> whereas a Copy Editor might have capabilities on only one or two
> categories.  So, a Managing Editor could edit any user's posts and a
> Copy Editor could edit other users' posts only within a set of
> categories.

Are category permissions something you would consider for the core? 
Some sites don't use categories, and with the recent focus on 
keywords/tags, this might become more prevalent.  Of course, using 
categories this way might shift thinking toward using categories 
primarily for security, and keyword plugins instead of traditional 
categories.

What are your thoughts on plugin access to these permissions?  Will the 
permission structure allow for:

if( apply_filters('perm_edit_posts', current_user_can('edit_posts'), 
$post->ID) ) {...}

Or will filters only be applied in advance?  The difference being that 
filters applied as above might allow plugins to grant/deny editing 
permissions to individual posts based on custom criteria, whereas a 
up-front filter would not.

Just a thought.

Owen
From ryan at boren.nu  Fri Jul  1 15:52:17 2005
From: ryan at boren.nu (Ryan Boren)
Date: Fri Jul  1 15:52:24 2005
Subject: [wp-hackers] User Capabilities
In-Reply-To: <42C56344.4060006@midnightcircus.com>
References: <1120196075.7972.0.camel@portnoy.fuzzybelly.org>
	<42C4DD1E.5080807@txfx.net>
	<1120231038.15622.19.camel@portnoy.fuzzybelly.org>
	<42C56344.4060006@midnightcircus.com>
Message-ID: <1120233137.15622.30.camel@portnoy.fuzzybelly.org>

On Fri, 2005-07-01 at 11:37 -0400, Owen Winkler wrote:
> Ryan Boren wrote:
> > A more useful and understandable model would be to limit roles to
> > categories.  A user would have a role and a list of categories to which
> > that role's post edit/create/publish capabilities would apply.  A
> > Managing Editor, for example, would have capabilities on all categories,
> > whereas a Copy Editor might have capabilities on only one or two
> > categories.  So, a Managing Editor could edit any user's posts and a
> > Copy Editor could edit other users' posts only within a set of
> > categories.
> 
> Are category permissions something you would consider for the core? 
> Some sites don't use categories, and with the recent focus on 
> keywords/tags, this might become more prevalent.  Of course, using 
> categories this way might shift thinking toward using categories 
> primarily for security, and keyword plugins instead of traditional 
> categories.

Categories for such sites could strictly be a workflow device.
Personally, I say forget about per-category capabilities and keep it
simple.  I offered per-category capabilities as a compromise for those
wanting to maintain some sort of capability partitioning.

> What are your thoughts on plugin access to these permissions?  Will the 
> permission structure allow for:
> 
> if( apply_filters('perm_edit_posts', current_user_can('edit_posts'), 
> $post->ID) ) {...}
> 
> Or will filters only be applied in advance?  The difference being that 
> filters applied as above might allow plugins to grant/deny editing 
> permissions to individual posts based on custom criteria, whereas a 
> up-front filter would not.
> 
> Just a thought.

I'd like plugins to have all of the information available to
WP_User::has_cap() including post ids and any additional information
passed along.  So, we should probably apply the filter in has_cap().  We
should pass a reference to the user object along with the other args so
that the ID and user data is available to the plugin.

Ryan

From pete.prodoehl at cygnusinteractive.com  Fri Jul  1 16:41:38 2005
From: pete.prodoehl at cygnusinteractive.com (Pete Prodoehl)
Date: Fri Jul  1 16:41:51 2005
Subject: [wp-hackers] A thought about wp-rss2.php
In-Reply-To: <6eb1cb4105070106246cadb7c6@mail.gmail.com>
References: <6eb1cb41050701000322455d4c@mail.gmail.com>	<20050701104922.00thbs8pey80448g@banana.catalyst2.com>	<6eb1cb41050701031972c69b7d@mail.gmail.com>	<20050701123016.8mnj2s9t8jy808k8@banana.catalyst2.com>	<6eb1cb4105070104574deec1d4@mail.gmail.com>	<42C53CB8.8000204@midnightcircus.com>
	<6eb1cb4105070106246cadb7c6@mail.gmail.com>
Message-ID: <42C57242.4080207@cygnusinteractive.com>



Luc Saint-Elie wrote:
> 2005/7/1, Owen Winkler <ringmaster@midnightcircus.com>:
> 
>>The key being, if I take your point correctly, that the output produced
>>is always valid because you don't tweak the content directly, but from
>>an object instead.
> 
> 
> Hello,
> 
> yes exactly.

+1 to almost everything Luc had to say...

What about the possibility of syndication feeds using templates? Would 
that help?

I'm hacking up wp-atom.php quite a bit, as it's got issues... I ended up 
creating my own feed-functions-extended.php to fix some Atom issues and 
for XSPF. I know Clint is working on MediaRSS as well, and there might 
be more in the pipeline. (The Yahoo! Map API with geodata + other stuff 
in an RSS 2.0 feed can do some very cool things!)

Pete


From m at mullenweg.com  Fri Jul  1 16:51:34 2005
From: m at mullenweg.com (Matthew Mullenweg)
Date: Fri Jul  1 16:51:44 2005
Subject: [wp-hackers] A thought about wp-rss2.php
In-Reply-To: <a491f91d05070101265782e081@mail.gmail.com>
References: <6eb1cb41050701000322455d4c@mail.gmail.com>
	<a491f91d05070101265782e081@mail.gmail.com>
Message-ID: <42C57496.2020408@mullenweg.com>

Robert Deaton wrote:
> I say rather than make the users worry about hacking, we just add the 
> proper hooks for plugins, makes everything so much simpler.

Hooks were added a few weeks ago.

http://trac.wordpress.org/changeset/2625

Which Ryan also mentioned in his commit digest:

http://boren.nu/archives/2005/06/16/wordpress-commit-digest/

They make doing itunes/media RSS/wacky stuff easy.

-- 
Matt Mullenweg
  http://photomatt.net | http://wordpress.org
http://pingomatic.com | http://cnet.com
From jbainbridge at gmail.com  Fri Jul  1 18:55:44 2005
From: jbainbridge at gmail.com (Jason Bainbridge)
Date: Fri Jul  1 18:55:51 2005
Subject: [wp-hackers] Getting a post through without the HTML escaped?
Message-ID: <d6491f480507011155bc005f8@mail.gmail.com>

Hi all,

I thought I'd try posting this question here in case someone knows the
answer already, if not then I will go digging... I currently have a
modified version of phone2wp -
http://ryanduff.net/archives/2004/11/24/phone2wp-01/ working on my WP
blog to moblog from my s710a, which works great but I am now trying to
add a feature where it will include a map of my location using Google
Maps API.

I have that part working perfectly BUT somewhere either in the posting
or the rendering of the post WP escapes the HTML (replaces the double
quotes, adds <br />'s for newlines etc), which of course results in
broken Javascript. So my question is, is there anyway to let a post
through without having the HTML escaped?

FYI if I want to post my location when sending an email from my phone
I start the first line with a colon and then enter the address, then
if phone2wp detects the colon it looks up the address using
http://geocoder.us, then grabs the co-ordinates in order to display
the Google Map (Google's API will only take co-ordinates). As I said
all of that works fine, it is just the HTML escaping that breaks
things so if someone can help me out with that then it would be most
appreciated!

Cheers,
-- 
Jason Bainbridge
http://kde.org - webmaster@kde.org
Personal Site - http://jasonbainbridge.com
From davebytes at comcast.net  Fri Jul  1 19:18:34 2005
From: davebytes at comcast.net (David Chait)
Date: Fri Jul  1 19:18:38 2005
Subject: [wp-hackers] User Capabilities
References: <1120196075.7972.0.camel@portnoy.fuzzybelly.org><1120200095.18801.136.camel@localhost.localdomain>
	<1120230497.15622.9.camel@portnoy.fuzzybelly.org>
Message-ID: <005701c57e71$acc3bb40$6e01a8c0@sixfour>

There obviously would be a need for some plugins to possibly be 
available/work for editors/users, while others would be reserved for pure 
top-level Admins.  So there might need to be some other roles defined that 
help better for plugins that say show statistics (referrers/stats), or 
anti-spam stuff, etc.  As well as say a database backup/restore plugin.

Also, can we differentiate visitor (unregistered) vs subscriber 
(registered)?

And I assume admin panels would potentially then depend on what roles you 
have?  Might need some extra roles as above to help break down what kind of 
administrative tasks are outside the norm.

There should also always be an Admin 'meta role' that doesn't need explicit 
definition of every possible access -- rather, it should be inherently 
all-access.  God forbid we start having plugins that create new access 
roles, there should always be an administrator role that can access 
everything, period. ;)

-d

----- Original Message ----- 
From: "Ryan Boren" <ryan@boren.nu>
To: <wp-hackers@lists.automattic.com>
Sent: Friday, July 01, 2005 11:08 AM
Subject: Re: [wp-hackers] User Capabilities


> Yeah, we'll need stuff like this for backwards compat.  One specific
> instance is plugins adding new admin menus.   They currently specify a
> user level.  They need to specify capabilities instead.  To illustrate,
> here's how the theme menu is currently constructed in menu.php.
> 

From fd at firasd.org  Sat Jul  2 00:22:05 2005
From: fd at firasd.org (Firas D.)
Date: Sat Jul  2 00:22:11 2005
Subject: [wp-hackers] Trackback RDF
In-Reply-To: <42C4D237.4040601@txfx.net>
References: <42C4D237.4040601@txfx.net>
Message-ID: <42C5DE2D.5060805@firasd.org>

Mark Jaquith wrote:

> Why was the Trackback RDF auto-discovery code axed from the default 
> templates?  Matt's commit says "Removed needless RDF calls," but 
> removing them makes it so that no existing blog software I know of can 
> auto-discover the Trackback URI.
> http://trac.wordpress.org/changeset/2417


Matt, can you share your reasoning on this? It seems unnecessary and 
very narrowminded to get rid of the TB RDF that MT etc use from WP's 
packaged templates.

-- 
http://firasd.org

From m at mullenweg.com  Sat Jul  2 05:43:00 2005
From: m at mullenweg.com (Matthew Mullenweg)
Date: Sat Jul  2 05:43:09 2005
Subject: [wp-hackers] Trackback RDF
In-Reply-To: <42C5DE2D.5060805@firasd.org>
References: <42C4D237.4040601@txfx.net> <42C5DE2D.5060805@firasd.org>
Message-ID: <42C62964.6050700@mullenweg.com>

Firas D. wrote:
> Matt, can you share your reasoning on this? It seems unnecessary and 
> very narrowminded to get rid of the TB RDF that MT etc use from WP's 
> packaged templates.

Trackback RDF is a highly fragile (and invalid) hack that didn't work 
half the time the code was in the page anyway, because most 
implementations require it to be in the first few K of a page before 
they stop reading. WordPress/b2 has *never* supported auto-discovery for 
trackback. We support a *real* non-proprietary standard (pingback) that 
excels in every way that Trackback fails. (Discovery, spam prevention, 
internationalization and character set issues, being lightweight, no 
RDF.) Asking for the RDF back is like asking us to support HTML 3.2 or 
CDF. When I talked to Ben about Trackback about a year ago he said that 
the next version of Trackback probably wouldn't even be compatible with 
the current and would be based on Atom or something. Finally if people 
really want to Trackback you they'll just copy and paste the URL, the WP 
dev blog gets hundreds despite never supporting the embedded RDF. If 
people want it back, the template tag is still there.

-- 
Matt Mullenweg
  http://photomatt.net | http://wordpress.org
http://pingomatic.com | http://cnet.com
From amit at igeek.info  Sat Jul  2 09:58:26 2005
From: amit at igeek.info (Amit Gupta)
Date: Sat Jul  2 09:58:35 2005
Subject: [wp-hackers] REQUEST_URI fix in wp-settings.php doesn't work
Message-ID: <000d01c57eec$9906f9c0$57ebd4cb@unicorn>


The REQUEST_URI fix for the IIS in the wp-settings.php for IIS doesn't seem to work as I'm running WP1.5.1.3 on IIS6 with PHP installed as ISAPI. The reason for failure is because $_SERVER['REQUEST_URI'] is being checked if it is set or not. But the thing is that $_SERVER['REQUEST_URI'] is set, though its empty, thus the IF block wasn't executed as it was only checking whether its set or not.

as a result, some plugins using REQUEST_URI will not work as well as any other WP features that make use of REQUEST_URI.

I've filed a ticket at the trac

http://trac.wordpress.org/ticket/1488

just thought I'd let the guys know.

-----
Amit Gupta

|| Canned!! -- my Atropine || iG:Syntax Hiliter v2.01 ||
|| iGEEK.INFO || Free Nokia Ringtones || Online Gaming @ Games Planet || 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://comox.textdrive.com/pipermail/wp-hackers/attachments/20050702/49d365a3/attachment.html
From davebytes at comcast.net  Sat Jul  2 15:51:38 2005
From: davebytes at comcast.net (David Chait)
Date: Sat Jul  2 15:51:54 2005
Subject: [wp-hackers] REQUEST_URI fix in wp-settings.php doesn't work
References: <000d01c57eec$9906f9c0$57ebd4cb@unicorn>
Message-ID: <001301c57f1d$f571eb30$6e01a8c0@sixfour>

I saw Mike just changed the test to empty().  But, I'm not sure if that's valid or not... I'm trying to remember an early conversation with Matt or someone when we originally fixed up that test, and I'm trying to recall if there was a reason isset was used (i.e., the field could validly be empty?).  Anyway, if anyone recalls why !isset() was used instead of empty() in the first place, feel free to comment.  Otherwise, have a happy 4th for those of you in the US. ;)

-d
  ----- Original Message ----- 
  From: Amit Gupta 
  To: wp-hackers@lists.automattic.com 
  Sent: Saturday, July 02, 2005 5:58 AM
  Subject: [wp-hackers] REQUEST_URI fix in wp-settings.php doesn't work



  The REQUEST_URI fix for the IIS in the wp-settings.php for IIS doesn't seem to work as I'm running WP1.5.1.3 on IIS6 with PHP installed as ISAPI. The reason for failure is because $_SERVER['REQUEST_URI'] is being checked if it is set or not. But the thing is that $_SERVER['REQUEST_URI'] is set, though its empty, thus the IF block wasn't executed as it was only checking whether its set or not.

  as a result, some plugins using REQUEST_URI will not work as well as any other WP features that make use of REQUEST_URI.

  I've filed a ticket at the trac

  http://trac.wordpress.org/ticket/1488
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://comox.textdrive.com/pipermail/wp-hackers/attachments/20050702/4822048f/attachment.html
From amit at igeek.info  Sat Jul  2 18:00:51 2005
From: amit at igeek.info (Amit Gupta)
Date: Sat Jul  2 18:01:12 2005
Subject: [wp-hackers] REQUEST_URI fix in wp-settings.php doesn't work
Message-ID: <000801c57f30$006dc9c0$57ebd4cb@unicorn>


what I was proposing is not using only empty() or only isset(). I think that using both would be much better as then it can be checked whether $_SERVER['REQUEST_URI'] is set or not & if its set then it shouldn't be empty.

so this would be much better

if (!isset($_SERVER['REQUEST_URI']) || empty($_SERVER['REQUEST_URI'])) {
    $_SERVER['REQUEST_URI'] = $_SERVER['SCRIPT_NAME'];
    
    // Append the query string if it exists and isn't null
    if (isset($_SERVER['QUERY_STRING']) && !empty($_SERVER['QUERY_STRING'])) {
        $_SERVER['REQUEST_URI'] .= '?' . $_SERVER['QUERY_STRING'];
    }
}


-----
Amit Gupta

|| Canned!! -- my Atropine || iG:Syntax Hiliter v2.01 ||
|| iGEEK.INFO || Free Nokia Ringtones || Online Gaming @ Games Planet || 




---------- Original Message from davebytes@comcast.net ----------
I saw Mike just changed the test to empty().  But, I'm not sure if that's valid or not... I'm trying to remember an early conversation with Matt or someone when we originally fixed up that test, and I'm trying to recall if there was a reason isset was used (i.e., the field could validly be empty?).  Anyway, if anyone recalls why !isset() was used instead of empty() in the first place, feel free to comment.  Otherwise, have a happy 4th for those of you in the US. ;)
 
-d

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://comox.textdrive.com/pipermail/wp-hackers/attachments/20050702/59b6aefc/attachment.html
From journalized at gmail.com  Sat Jul  2 18:03:02 2005
From: journalized at gmail.com (Mike Little)
Date: Sat Jul  2 18:03:09 2005
Subject: [wp-hackers] REQUEST_URI fix in wp-settings.php doesn't work
In-Reply-To: <001301c57f1d$f571eb30$6e01a8c0@sixfour>
References: <000d01c57eec$9906f9c0$57ebd4cb@unicorn>
	<001301c57f1d$f571eb30$6e01a8c0@sixfour>
Message-ID: <7235ce780507021103566d90fd@mail.gmail.com>

On 02/07/05, David Chait <davebytes@comcast.net> wrote:
>  
> I saw Mike just changed the test to empty().  But, I'm not sure if that's
> valid or not... I'm trying to remember an early conversation with Matt or
> someone when we originally fixed up that test, and I'm trying to recall if
> there was a reason isset was used (i.e., the field could validly be empty?).
>  Anyway, if anyone recalls why !isset() was used instead of empty() in the
> first place, feel free to comment.  Otherwise, have a happy 4th for those of
> you in the US. ;) 
>   
> -d


I don't think the field can validly be empty on a system that is
supposed to ppoulate it. I believe the minimum request URI (in the
http scheme) is by convention a single slash '/'. I know apache goes
to a lot of trouble to insert it if you don't provide it.

If that is not the case, I think that (again, for the http scheme) a
single slash is an equivalent to the empty path.

And if that is not the case we have to consider coding around an
(other) IIS problem.

See also RFC 3986 http://www.faqs.org/rfcs/rfc3986.html

Mike
-- 
Mike Little
http://zed1.com/journalized/
From davebytes at comcast.net  Sat Jul  2 18:31:31 2005
From: davebytes at comcast.net (David Chait)
Date: Sat Jul  2 18:33:47 2005
Subject: [wp-hackers] REQUEST_URI fix in wp-settings.php doesn't work
References: <000d01c57eec$9906f9c0$57ebd4cb@unicorn><001301c57f1d$f571eb30$6e01a8c0@sixfour>
	<7235ce780507021103566d90fd@mail.gmail.com>
Message-ID: <003501c57f34$44a66670$6e01a8c0@sixfour>

That's cool -- I had thought I recalled cases where REQUEST_URI was coming 
out empty, but I'm either mistaken, or they are 'extra' bugs that were 
hopefully fixed by the webservers. ;)

-d

----- Original Message ----- 
From: "Mike Little" <journalized@gmail.com>
To: <wp-hackers@lists.automattic.com>
Sent: Saturday, July 02, 2005 2:03 PM
Subject: Re: [wp-hackers] REQUEST_URI fix in wp-settings.php doesn't work


On 02/07/05, David Chait <davebytes@comcast.net> wrote:
>
> I saw Mike just changed the test to empty().  But, I'm not sure if that's
> valid or not... I'm trying to remember an early conversation with Matt or
> someone when we originally fixed up that test, and I'm trying to recall if
> there was a reason isset was used (i.e., the field could validly be 
> empty?).
>  Anyway, if anyone recalls why !isset() was used instead of empty() in the
> first place, feel free to comment.  Otherwise, have a happy 4th for those 
> of
> you in the US. ;)
>
> -d


I don't think the field can validly be empty on a system that is
supposed to ppoulate it. I believe the minimum request URI (in the
http scheme) is by convention a single slash '/'. I know apache goes
to a lot of trouble to insert it if you don't provide it.

If that is not the case, I think that (again, for the http scheme) a
single slash is an equivalent to the empty path.

And if that is not the case we have to consider coding around an
(other) IIS problem.

See also RFC 3986 http://www.faqs.org/rfcs/rfc3986.html

Mike
-- 
Mike Little
http://zed1.com/journalized/
_______________________________________________
wp-hackers mailing list
wp-hackers@lists.automattic.com
http://lists.automattic.com/mailman/listinfo/wp-hackers

From journalized at gmail.com  Sat Jul  2 19:06:38 2005
From: journalized at gmail.com (Mike Little)
Date: Sat Jul  2 19:06:43 2005
Subject: [wp-hackers] REQUEST_URI fix in wp-settings.php doesn't work
In-Reply-To: <000801c57f30$006dc9c0$57ebd4cb@unicorn>
References: <000801c57f30$006dc9c0$57ebd4cb@unicorn>
Message-ID: <7235ce78050702120675848d61@mail.gmail.com>

On 02/07/05, Amit Gupta <amit@igeek.info> wrote:
> what I was proposing is not using only empty() or only isset(). I think that
> using both would be much better as then it can be checked whether
> $_SERVER['REQUEST_URI'] is set or not & if its set then it shouldn't be
> empty.
> 
> so this would be much better
> 
> if (!isset($_SERVER['REQUEST_URI']) ||
> empty($_SERVER['REQUEST_URI'])) {
>     $_SERVER['REQUEST_URI'] = $_SERVER['SCRIPT_NAME'];
>     
>     // Append the query string if it exists and isn't null
>     if (isset($_SERVER['QUERY_STRING']) &&
> !empty($_SERVER['QUERY_STRING'])) {
>         $_SERVER['REQUEST_URI'] .= '?' . $_SERVER['QUERY_STRING'];
>     }
> }
> 
> 
> -----
> Amit Gupta
> 


Given that an unset variable (!unset == true) evaluates to empty
(without errors) I  think that makes the test for !unset redundant.


Mike
-- 
Mike Little
http://zed1.com/journalized/
From journalized at gmail.com  Sat Jul  2 19:07:35 2005
From: journalized at gmail.com (Mike Little)
Date: Sat Jul  2 19:07:40 2005
Subject: [wp-hackers] REQUEST_URI fix in wp-settings.php doesn't work
In-Reply-To: <7235ce78050702120675848d61@mail.gmail.com>
References: <000801c57f30$006dc9c0$57ebd4cb@unicorn>
	<7235ce78050702120675848d61@mail.gmail.com>
Message-ID: <7235ce7805070212074c8ad370@mail.gmail.com>

On 02/07/05, Mike Little <journalized@gmail.com> wrote:
> Given that an unset variable (!unset == true) evaluates to empty
> (without errors) I  think that makes the test for !unset redundant.
> 

I meant 
I  think that makes the test for !isset() redundant.

Mike
-- 
Mike Little
http://zed1.com/journalized/
From dmhouse at gmail.com  Sat Jul  2 20:24:30 2005
From: dmhouse at gmail.com (David House)
Date: Sat Jul  2 20:24:37 2005
Subject: [wp-hackers] 1.5.1.3 bug fix request
In-Reply-To: <000001c57cc8$966e6d90$6702a8c0@DB>
References: <42C2AD87.3030201@skippy.net> <000001c57cc8$966e6d90$6702a8c0@DB>
Message-ID: <ebe43d6805070213244cdec861@mail.gmail.com>

On 6/29/05, Denis de Bernardy <denis@semiologic.com> wrote:
> While we're at it, could the following fix be added in 1.5.1.4?

http://trac.wordpress.org

Submit a bug report (assuming you haven't already done so, of course).

-- 
-David House, dmhouse@gmail.com, http://xmouse.ithium.net
From dmhouse at gmail.com  Sat Jul  2 20:26:22 2005
From: dmhouse at gmail.com (David House)
Date: Sat Jul  2 20:26:29 2005
Subject: [wp-hackers] Forum paging broken ?
In-Reply-To: <7C3828C3-A6E1-480C-9327-195437A4BD12@turbonet.com>
References: <42C3A747.5020006@tamba2.org.uk>
	<7C3828C3-A6E1-480C-9327-195437A4BD12@turbonet.com>
Message-ID: <ebe43d6805070213263c2742b8@mail.gmail.com>

On 6/30/05, Michael D Adams <mikea@turbonet.com> wrote:
> Yes, it's broken.  Hopefully not for long.

Seems to be fixed.

-- 
-David House, dmhouse@gmail.com, http://xmouse.ithium.net
From dmhouse at gmail.com  Sat Jul  2 20:32:45 2005
From: dmhouse at gmail.com (David House)
Date: Sat Jul  2 20:32:51 2005
Subject: [wp-hackers] /wp-admin/link-import.php with CURL support
In-Reply-To: <1f11a549050701070955865924@mail.gmail.com>
References: <1f11a549050701070955865924@mail.gmail.com>
Message-ID: <ebe43d68050702133222285b56@mail.gmail.com>

On 7/1/05, Ashwin Bihari <abihari@gmail.com> wrote:
> Greetings,
> 
> Just made a simple patch to add CURL support to
> /wp-admin/link-import.php to allow updating links from sites such as
> http://blogrolling.com from Links->Import Links in Administration.

Try submitting the patch to http://trac.wordpress.org. That's where
the bug reports, fixes and new features should be submitted to.

-- 
-David House, dmhouse@gmail.com, http://xmouse.ithium.net
From denis at semiologic.com  Sat Jul  2 20:36:10 2005
From: denis at semiologic.com (Denis de Bernardy)
Date: Sat Jul  2 20:38:12 2005
Subject: [wp-hackers] 1.5.1.3 bug fix request
In-Reply-To: <ebe43d6805070213244cdec861@mail.gmail.com>
Message-ID: <000001c57f45$aef722b0$6702a8c0@DB>

http://trac.wordpress.org/ticket/1482

Even has a diff. :)

D.

> -----Original Message-----
> From: wp-hackers-bounces@lists.automattic.com 
> [mailto:wp-hackers-bounces@lists.automattic.com] On Behalf Of 
> David House
> Sent: Saturday, July 02, 2005 10:25 PM
> To: wp-hackers@lists.automattic.com
> Subject: Re: [wp-hackers] 1.5.1.3 bug fix request
> 
> 
> On 6/29/05, Denis de Bernardy <denis@semiologic.com> wrote:
> > While we're at it, could the following fix be added in 1.5.1.4?
> 
> http://trac.wordpress.org
> 
> Submit a bug report (assuming you haven't already done so, of course).
> 
> -- 
> -David House, dmhouse@gmail.com, http://xmouse.ithium.net 
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com 
> http://lists.automattic.com/mailman/listinfo/wp-hackers
> 

From amit at igeek.info  Sat Jul  2 21:09:10 2005
From: amit at igeek.info (Amit Gupta)
Date: Sat Jul  2 21:09:27 2005
Subject: [wp-hackers] REQUEST_URI fix in wp-settings.php doesn't work
Message-ID: <000a01c57f4a$4e8650e0$57ebd4cb@unicorn>


yeah, well, I guess you are right!! I must've dozed off when writing that reply!! It was past midnight(but I'm awake now at 2:45am). ;)

-----
Amit Gupta

|| Canned!! -- my Atropine || iG:Syntax Hiliter v2.01 ||
|| iGEEK.INFO || Free Nokia Ringtones || Online Gaming @ Games Planet || 




---------- Original Message from journalized@gmail.com ----------
On 02/07/05, Mike Little <journalized@gmail.com> wrote:
> Given that an unset variable (!unset == true) evaluates to empty
> (without errors) I  think that makes the test for !unset redundant.
> 

I meant 
I  think that makes the test for !isset() redundant.

Mike
-- 
Mike Little
http://zed1.com/journalized/

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://comox.textdrive.com/pipermail/wp-hackers/attachments/20050702/78497ceb/attachment.html
From m at mullenweg.com  Sat Jul  2 23:23:42 2005
From: m at mullenweg.com (Matthew Mullenweg)
Date: Sat Jul  2 23:23:46 2005
Subject: [wp-hackers] REQUEST_URI fix in wp-settings.php doesn't work
In-Reply-To: <7235ce7805070212074c8ad370@mail.gmail.com>
References: <000801c57f30$006dc9c0$57ebd4cb@unicorn>	<7235ce78050702120675848d61@mail.gmail.com>
	<7235ce7805070212074c8ad370@mail.gmail.com>
Message-ID: <42C721FE.8010307@mullenweg.com>

Mike Little wrote:
> I meant 
> I  think that makes the test for !isset() redundant.

Is empty one of the functions that throws an error under E_ALL when run 
on an unset variable? I think that's why we have the redundant isset() 
everywhere.

-- 
Matt Mullenweg
  http://photomatt.net | http://wordpress.org
http://pingomatic.com | http://cnet.com
From kimmo+key+wordpress.c4f53f at suominen.com  Sat Jul  2 23:27:32 2005
From: kimmo+key+wordpress.c4f53f at suominen.com (Kimmo Suominen)
Date: Sat Jul  2 23:27:47 2005
Subject: [wp-hackers] REQUEST_URI fix in wp-settings.php doesn't work
In-Reply-To: <42C721FE.8010307@mullenweg.com>
References: <000801c57f30$006dc9c0$57ebd4cb@unicorn>
	<7235ce78050702120675848d61@mail.gmail.com>
	<7235ce7805070212074c8ad370@mail.gmail.com>
	<42C721FE.8010307@mullenweg.com>
Message-ID: <20050702232732.GD4686@kimmo.suominen.com>

On Sat, Jul 02, 2005 at 04:23:42PM -0700, Matthew Mullenweg wrote:
> Mike Little wrote:
> >I meant 
> >I  think that makes the test for !isset() redundant.
> 
> Is empty one of the functions that throws an error under E_ALL when run 
> on an unset variable? I think that's why we have the redundant isset() 
> everywhere.

empty() does not generate a warning when the variable is not set.

Regards,
+ Kimmo
-- 
<A HREF="http://kimmo.suominen.com/">Kimmo Suominen</A>
From joseph at randomnetworks.com  Sun Jul  3 00:13:38 2005
From: joseph at randomnetworks.com (Joseph Scott)
Date: Sun Jul  3 00:13:45 2005
Subject: [wp-hackers] REQUEST_URI fix in wp-settings.php doesn't work
In-Reply-To: <20050702232732.GD4686@kimmo.suominen.com>
References: <000801c57f30$006dc9c0$57ebd4cb@unicorn>
	<7235ce78050702120675848d61@mail.gmail.com>
	<7235ce7805070212074c8ad370@mail.gmail.com>
	<42C721FE.8010307@mullenweg.com>
	<20050702232732.GD4686@kimmo.suominen.com>
Message-ID: <7D6599BC-44E7-4C2A-82D1-479ED5013127@randomnetworks.com>


On Jul 2, 2005, at 4:27 PM, Kimmo Suominen wrote:

> On Sat, Jul 02, 2005 at 04:23:42PM -0700, Matthew Mullenweg wrote:
>
>> Mike Little wrote:
>>
>>> I meant
>>> I  think that makes the test for !isset() redundant.
>>>
>>
>> Is empty one of the functions that throws an error under E_ALL  
>> when run
>> on an unset variable? I think that's why we have the redundant  
>> isset()
>> everywhere.
>>
>
> empty() does not generate a warning when the variable is not set.

http://us4.php.net/manual/en/function.empty.php

Just be careful how you define empty :-)


--
Joseph Scott
URL: http://joseph.randomnetworks.com/
Email: joseph@randomnetworks.com


From abihari at gmail.com  Sun Jul  3 02:35:59 2005
From: abihari at gmail.com (Ashwin Bihari)
Date: Sun Jul  3 02:36:05 2005
Subject: [wp-hackers] /wp-admin/link-import.php with CURL support
In-Reply-To: <ebe43d68050702133222285b56@mail.gmail.com>
References: <1f11a549050701070955865924@mail.gmail.com>
	<ebe43d68050702133222285b56@mail.gmail.com>
Message-ID: <1f11a54905070219351a1a90f5@mail.gmail.com>

On 7/2/05, David House <dmhouse@gmail.com> wrote:
> Try submitting the patch to http://trac.wordpress.org. That's where
> the bug reports, fixes and new features should be submitted to.
> 
> --
> -David House, dmhouse@gmail.com, http://xmouse.ithium.net

Done, thank you for pointing me in the correct direction.

Regards

-- 
~ Ashwin
From christian at wilde-welt.de  Sun Jul  3 08:39:57 2005
From: christian at wilde-welt.de (Christian Aust)
Date: Sun Jul  3 08:40:07 2005
Subject: [wp-hackers] Overriding get_posts() behaviour
Message-ID: <639c5559a8822a3e91512da6fb481d1c@wilde-welt.de>

Hi,

I'm working on a more powerful search plugin. AFAIK I'd have to 
implement an action 'parse_query' to do the parameter stuff, after 
which get_posts() is called. That's where my plugin should step in an 
provide a list of posts that match the criteria. Unfortunately, there 
isn't any action hook to implement a special get_posts() behaviour 
which would allow me to retrieve a set of post IDs directly from 
get_posts(). There's only one parameter 'p' allowed, not an array of 
p's.

I'd like that plugin to be as unobtrusive as possible, allowing to use 
standard and extended search happily together. Any ideas what I could 
do? Best regards,

-  Christian

--

Christian Aust
http://publicvoidblog.de/  -  mailto:christian@wilde-welt.de
icq: 84500990 - Yahoo!: datenimperator - MSN: datenimperator

From denis at semiologic.com  Sun Jul  3 10:28:16 2005
From: denis at semiologic.com (Denis de Bernardy)
Date: Sun Jul  3 10:30:52 2005
Subject: [wp-hackers] Overriding get_posts() behaviour
In-Reply-To: <639c5559a8822a3e91512da6fb481d1c@wilde-welt.de>
Message-ID: <000501c57fb9$ed5b5430$6702a8c0@DB>


Hi Christian,

Maybe you'd like to merge your search plugin with mine.

http://www.semiologic.com/projects/search-reloaded/

Else, it might be helpful in using the right hooks. In particular, there is
a the_posts hook, in particular, that you can catch immediately before the
wp_query returns its results.

D.

> -----Original Message-----
> From: wp-hackers-bounces@lists.automattic.com 
> [mailto:wp-hackers-bounces@lists.automattic.com] On Behalf Of 
> Christian Aust
> Sent: Sunday, July 03, 2005 10:40 AM
> To: wp-hackers@lists.automattic.com
> Subject: [wp-hackers] Overriding get_posts() behaviour
> 
> 
> Hi,
> 
> I'm working on a more powerful search plugin. AFAIK I'd have to 
> implement an action 'parse_query' to do the parameter stuff, after 
> which get_posts() is called. That's where my plugin should step in an 
> provide a list of posts that match the criteria. Unfortunately, there 
> isn't any action hook to implement a special get_posts() behaviour 
> which would allow me to retrieve a set of post IDs directly from 
> get_posts(). There's only one parameter 'p' allowed, not an array of 
> p's.
> 
> I'd like that plugin to be as unobtrusive as possible, 
> allowing to use 
> standard and extended search happily together. Any ideas what I could 
> do? Best regards,
> 
> -  Christian
> 
> --
> 
> Christian Aust
> http://publicvoidblog.de/  -  mailto:christian@wilde-welt.de
> icq: 84500990 - Yahoo!: datenimperator - MSN: datenimperator
> 
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com 
> http://lists.automattic.com/mailman/listinfo/wp-hackers
> 

From christian at wilde-welt.de  Sun Jul  3 12:41:10 2005
From: christian at wilde-welt.de (Christian Aust)
Date: Sun Jul  3 12:41:15 2005
Subject: [wp-hackers] Overriding get_posts() behaviour
In-Reply-To: <000501c57fb9$ed5b5430$6702a8c0@DB>
References: <000501c57fb9$ed5b5430$6702a8c0@DB>
Message-ID: <a25fdd7a60d991151ac36ddba68169c6@wilde-welt.de>

Hi Denis,

I'm planning to use jakarta Lucene for creating the index and 
performing the search. I'm well aware that starting a Java runtime for 
every search request might not be feasible for each and every wordpress 
user, however it is for me, so I'd like to give it a try.

Assuming that it might be possible to reduce the overhead of starting a 
new runtime every time, lucene is so much more powerful than anything 
else freely available for searching. The list of features includes:

* weighted indexing and searching
* relevance calculation
* boolean term conjunction
* multiple index segments
* capable of indexing millions of 'documents'
* language-dependend stemming

I've used it for some Java projects, so I'd like to give it a try for 
WP, too. Best regards,

-  Christian

Am 03.07.2005 um 12:28 schrieb Denis de Bernardy:

>
> Hi Christian,
>
> Maybe you'd like to merge your search plugin with mine.
>
> http://www.semiologic.com/projects/search-reloaded/
>
> Else, it might be helpful in using the right hooks. In particular, 
> there is
> a the_posts hook, in particular, that you can catch immediately before 
> the
> wp_query returns its results.
>
> D.--

Christian Aust
http://publicvoidblog.de/  -  mailto:christian@wilde-welt.de
icq: 84500990 - Yahoo!: datenimperator - MSN: datenimperator


From ml_wordpress at copperleaf.org  Sun Jul  3 12:48:16 2005
From: ml_wordpress at copperleaf.org (ml_wordpress@copperleaf.org)
Date: Sun Jul  3 12:49:07 2005
Subject: [wp-hackers] Overriding get_posts() behaviour
In-Reply-To: <000501c57fb9$ed5b5430$6702a8c0@DB>
References: <000501c57fb9$ed5b5430$6702a8c0@DB>
Message-ID: <42C7DE90.4050003@copperleaf.org>

I've also taken a look at Denis' plugin and have a few ideas that maybe 
you guys could add. I've modified Denis' plugin on my testbed just for 
fun and could send you the code if you wish. Here is a list of ideas:

1) Probably the most useful function for me was that I added a filter to 
the sem_search_index function that allows additional plugins to add 
additional words to the node_content column. This could actually be a 
foundation filter for the plugin in that all search words could be added 
that way: the_content, the_title, post_tags, and, in my case, data from 
columns in new tables.

2) I found that by using a fulltext search, is you search on 'bean', it 
won't match 'beans'. I don't know if there is a something in the 
fulltext search that can allow you to do 'like' queries. If not, maybe 
that could be either a global option or something selected from an 
advanced search page that would allow you to do fulltext searches or 
like searches. (BTW Denis, some hosts default to Innodb tables so in 
your create table statement you need to specify ENGINE=myisam so that 
fulltext indexes can be created.)

3) I added some code that would clean out all funky characters, remove 
all duplicates and collapse all whitespace in the node_content column. 
This can shorten the size of the field significantly and removing the 
dups is nice if you aren't doing weighted searches. Something else to 
consider would be to remove all stopwords. (Configurable from an admin 
page?)

4) One last idea is that perhaps an option could be so store the soundex 
(or some other algorithm) for the word list so that searches are done on 
that instead of the actual word.

Anyway, like I said above, I'd be glad to send you guys my mods or I'd 
be glad to help with parts of this if you wish.

Bill
From christian at wilde-welt.de  Sun Jul  3 14:08:22 2005
From: christian at wilde-welt.de (Christian Aust)
Date: Sun Jul  3 14:08:28 2005
Subject: [wp-hackers] Overriding get_posts() behaviour
In-Reply-To: <42C7DE90.4050003@copperleaf.org>
References: <000501c57fb9$ed5b5430$6702a8c0@DB>
	<42C7DE90.4050003@copperleaf.org>
Message-ID: <1d48ae6c974fd1f1baac2dd7b2f95611@wilde-welt.de>

Hi Bill,

Am 03.07.2005 um 14:48 schrieb ml_wordpress@copperleaf.org:

> I've also taken a look at Denis' plugin and have a few ideas that 
> maybe you guys could add. I've modified Denis' plugin on my testbed 
> just for fun and could send you the code if you wish. Here is a list 
> of ideas:
>
> 1) Probably the most useful function for me was that I added a filter 
> to the sem_search_index function that allows additional plugins to add 
> additional words to the node_content column. This could actually be a 
> foundation filter for the plugin in that all search words could be 
> added that way: the_content, the_title, post_tags, and, in my case, 
> data from columns in new tables.

Done by lucene: A 'document' is a generic description of the data 
stored in the index, and consists of a number of fields. Fields can be 
indexed and/or stored as full text, searchable or auxiliary fields.

> 2) I found that by using a fulltext search, is you search on 'bean', 
> it won't match 'beans'. I don't know if there is a something in the 
> fulltext search that can allow you to do 'like' queries.

That's exactly what goes by the name of "stemming": A stemmer 
transforms the non-stopword words to their 'base' format, i.e. 
singular. "Houses" will become "house", "women" will be stored as 
"woman". The text finally stored might look funny - but is fully 
searchable, provided that the query will be transformed alike.

Obviously, stemmers are language dependend. An english stemmer won't 
produce too smart results when used with a german text. Lucene provides 
a number of stemmers.

> 3) I added some code that would clean out all funky characters, remove 
> all duplicates and collapse all whitespace in the node_content column. 
> This can shorten the size of the field significantly and removing the 
> dups is nice if you aren't doing weighted searches. Something else to 
> consider would be to remove all stopwords. (Configurable from an admin 
> page?)

Every language has a number of well-known stopwords. Filtering these 
out is usually done together with stemming.

> 4) One last idea is that perhaps an option could be so store the 
> soundex (or some other algorithm) for the word list so that searches 
> are done on that instead of the actual word.

see: Stemming.

> Anyway, like I said above, I'd be glad to send you guys my mods or I'd 
> be glad to help with parts of this if you wish.

My main problem would be: How can I start a process from PHP that forks 
and stays resident? How could those processes communicate efficiently? 
The search itself is actually quite trivial, since lucene is so well 
thought out. Regards,

-   Christian

--

Christian Aust
http://publicvoidblog.de/  -  mailto:christian@wilde-welt.de
icq: 84500990 - Yahoo!: datenimperator - MSN: datenimperator

From tdw at funkive.com  Sun Jul  3 23:36:14 2005
From: tdw at funkive.com (Terrence Wood)
Date: Sun Jul  3 23:36:47 2005
Subject: [wp-hackers] Plugin deactivation
Message-ID: <3EE03C76-EC1B-11D9-963C-0003931722DA@funkive.com>

Is there any way for a plugin to determine when it's deactivated so it 
can run some cleanup code?

I am testing a plugin that modifies .htaccess, and would like to remove 
some rewrite rules if the plugin is deactivated.

TIA
Terrence Wood.

From skippy at skippy.net  Mon Jul  4 00:52:43 2005
From: skippy at skippy.net (Scott Merrill)
Date: Mon Jul  4 00:52:42 2005
Subject: [wp-hackers] Plugin deactivation
In-Reply-To: <3EE03C76-EC1B-11D9-963C-0003931722DA@funkive.com>
References: <3EE03C76-EC1B-11D9-963C-0003931722DA@funkive.com>
Message-ID: <42C8885B.3040904@skippy.net>

Terrence Wood wrote:
> Is there any way for a plugin to determine when it's deactivated so it 
> can run some cleanup code?
> 
> I am testing a plugin that modifies .htaccess, and would like to remove 
> some rewrite rules if the plugin is deactivated.

Ticket 1052 was filed in early March:
    http://trac.wordpress.org/ticket/1052

I see no reason not to add hooks for plugin_activated 
plugin_deactivated.  The hooks could even take as options the name of 
the plugin being (de-)activated.

-- 
skippy@skippy.net | http://skippy.net/

gpg --keyserver pgp.mit.edu --recv-keys 9CFA4B35
506C F8BB 17AE 8A05 0B49  3544 476A 7DEC 9CFA 4B35
From ryan at boren.nu  Mon Jul  4 01:18:46 2005
From: ryan at boren.nu (Ryan Boren)
Date: Mon Jul  4 01:18:50 2005
Subject: [wp-hackers] Plugin deactivation
In-Reply-To: <42C8885B.3040904@skippy.net>
References: <3EE03C76-EC1B-11D9-963C-0003931722DA@funkive.com>
	<42C8885B.3040904@skippy.net>
Message-ID: <1120439926.3844.60.camel@portnoy.fuzzybelly.org>

On Sun, 2005-07-03 at 20:52 -0400, Scott Merrill wrote:
> Terrence Wood wrote:
> > Is there any way for a plugin to determine when it's deactivated so it 
> > can run some cleanup code?
> > 
> > I am testing a plugin that modifies .htaccess, and would like to remove 
> > some rewrite rules if the plugin is deactivated.
> 
> Ticket 1052 was filed in early March:
>     http://trac.wordpress.org/ticket/1052
> 
> I see no reason not to add hooks for plugin_activated 
> plugin_deactivated.  The hooks could even take as options the name of 
> the plugin being (de-)activated.

That method won't work.  We'll probably need to use something like the
register_activation_hook(), register_deactivation_hook() stuff I
proposed during the thread on overriding core functions.  We pushed that
aside because we decided to go with the simpler pluggable-functions.php
method for 1.5.1.  Maybe now is the time to investigate it again.

Ryan

From false.hopes at gmail.com  Mon Jul  4 02:02:32 2005
From: false.hopes at gmail.com (Robert Deaton)
Date: Mon Jul  4 02:02:40 2005
Subject: [wp-hackers] Plugin deactivation
In-Reply-To: <1120439926.3844.60.camel@portnoy.fuzzybelly.org>
References: <3EE03C76-EC1B-11D9-963C-0003931722DA@funkive.com>
	<42C8885B.3040904@skippy.net>
	<1120439926.3844.60.camel@portnoy.fuzzybelly.org>
Message-ID: <a491f91d050703190238ff6e2@mail.gmail.com>

I agree that we need activation and deactivation hooks, and its a shame that 
it was pushed aside for 1.5.1 because its a feature I know a lot of plugin 
authors really would have liked to seen included. Is there any chance of 
getting the patch attached to 1052 included in the core?

On 7/3/05, Ryan Boren <ryan@boren.nu> wrote:
> 
> On Sun, 2005-07-03 at 20:52 -0400, Scott Merrill wrote:
> > Terrence Wood wrote:
> > > Is there any way for a plugin to determine when it's deactivated so it
> > > can run some cleanup code?
> > >
> > > I am testing a plugin that modifies .htaccess, and would like to 
> remove
> > > some rewrite rules if the plugin is deactivated.
> >
> > Ticket 1052 was filed in early March:
> > http://trac.wordpress.org/ticket/1052
> >
> > I see no reason not to add hooks for plugin_activated
> > plugin_deactivated. The hooks could even take as options the name of
> > the plugin being (de-)activated.
> 
> That method won't work. We'll probably need to use something like the
> register_activation_hook(), register_deactivation_hook() stuff I
> proposed during the thread on overriding core functions. We pushed that
> aside because we decided to go with the simpler pluggable-functions.php
> method for 1.5.1. Maybe now is the time to investigate it again.
> 
> Ryan
> 
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
> 



-- 
--Robert Deaton
http://somethingunpredictable.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://comox.textdrive.com/pipermail/wp-hackers/attachments/20050704/f007fca7/attachment.html
From ryan at boren.nu  Mon Jul  4 02:15:52 2005
From: ryan at boren.nu (Ryan Boren)
Date: Mon Jul  4 02:15:58 2005
Subject: [wp-hackers] Plugin deactivation
In-Reply-To: <a491f91d050703190238ff6e2@mail.gmail.com>
References: <3EE03C76-EC1B-11D9-963C-0003931722DA@funkive.com>
	<42C8885B.3040904@skippy.net>
	<1120439926.3844.60.camel@portnoy.fuzzybelly.org>
	<a491f91d050703190238ff6e2@mail.gmail.com>
Message-ID: <1120443352.3844.70.camel@portnoy.fuzzybelly.org>

On Sun, 2005-07-03 at 22:02 -0400, Robert Deaton wrote:
> I agree that we need activation and deactivation hooks, and its a
> shame that it was pushed aside for 1.5.1 because its a feature I know
> a lot of plugin authors really would have liked to seen included. Is
> there any chance of getting the patch attached to 1052 included in the
> core?

Not that particular patch.  Every plugin listening for those events will
get them and think they are activating/deactivating.  It's a broadcast
to all plugins.  Won't work.  Attached is an old patch from April.  See
also:

http://comox.textdrive.com/pipermail/wp-hackers/2005-April/000377.html

Ryan

> On 7/3/05, Ryan Boren <ryan@boren.nu> wrote:
>         On Sun, 2005-07-03 at 20:52 -0400, Scott Merrill wrote:
>         > Terrence Wood wrote:
>         > > Is there any way for a plugin to determine when it's
>         deactivated so it
>         > > can run some cleanup code?
>         > >
>         > > I am testing a plugin that modifies .htaccess, and would
>         like to remove
>         > > some rewrite rules if the plugin is deactivated.
>         >
>         > Ticket 1052 was filed in early March:
>         >     http://trac.wordpress.org/ticket/1052
>         > 
>         > I see no reason not to add hooks for plugin_activated
>         > plugin_deactivated.  The hooks could even take as options
>         the name of
>         > the plugin being (de-)activated.
>         
>         That method won't work.  We'll probably need to use something
>         like the 
>         register_activation_hook(), register_deactivation_hook() stuff
>         I
>         proposed during the thread on overriding core functions.  We
>         pushed that
>         aside because we decided to go with the simpler
>         pluggable-functions.php
>         method for 1.5.1.  Maybe now is the time to investigate it
>         again.
>         
>         Ryan

-------------- next part --------------
A non-text attachment was scrubbed...
Name: activate_hook.diff
Type: text/x-patch
Size: 2254 bytes
Desc: not available
Url : http://comox.textdrive.com/pipermail/wp-hackers/attachments/20050704/1e726b9a/activate_hook-0001.bin
From skippy at skippy.net  Mon Jul  4 03:35:43 2005
From: skippy at skippy.net (Scott Merrill)
Date: Mon Jul  4 03:35:41 2005
Subject: [wp-hackers] Plugin deactivation
In-Reply-To: <1120443352.3844.70.camel@portnoy.fuzzybelly.org>
References: <3EE03C76-EC1B-11D9-963C-0003931722DA@funkive.com>	<42C8885B.3040904@skippy.net>	<1120439926.3844.60.camel@portnoy.fuzzybelly.org>	<a491f91d050703190238ff6e2@mail.gmail.com>
	<1120443352.3844.70.camel@portnoy.fuzzybelly.org>
Message-ID: <42C8AE8F.3000506@skippy.net>

Ryan Boren wrote:
> On Sun, 2005-07-03 at 22:02 -0400, Robert Deaton wrote:
> 
>>I agree that we need activation and deactivation hooks, and its a
>>shame that it was pushed aside for 1.5.1 because its a feature I know
>>a lot of plugin authors really would have liked to seen included. Is
>>there any chance of getting the patch attached to 1052 included in the
>>core?
> 
> 
> Not that particular patch.  Every plugin listening for those events will
> get them and think they are activating/deactivating.  It's a broadcast
> to all plugins.  Won't work.  

If you pass the name of the plugin as a parameter to the (de)activation 
hook, couldn't plugins just pay attention as necessary?

I can envision modest automated plugin dependency chains.  For example, 
de-activating my WP-Cron plugin should also deactivate all the helper 
plugins it enables.
Yes, the helper plugins should rely on
   `if (function_exists(WP-Cron stuff) { ... }`
but they'll still be left active, cluttering the plugin list for no good 
reason.

Skimming the older proposed patch, I looks like it supports all the 
above, just as well.

-- 
skippy@skippy.net | http://skippy.net/

gpg --keyserver pgp.mit.edu --recv-keys 9CFA4B35
506C F8BB 17AE 8A05 0B49  3544 476A 7DEC 9CFA 4B35
From ryan at boren.nu  Mon Jul  4 06:37:21 2005
From: ryan at boren.nu (Ryan Boren)
Date: Mon Jul  4 06:37:26 2005
Subject: [wp-hackers] Plugin deactivation
In-Reply-To: <42C8AE8F.3000506@skippy.net>
References: <3EE03C76-EC1B-11D9-963C-0003931722DA@funkive.com>
	<42C8885B.3040904@skippy.net>
	<1120439926.3844.60.camel@portnoy.fuzzybelly.org>
	<a491f91d050703190238ff6e2@mail.gmail.com>
	<1120443352.3844.70.camel@portnoy.fuzzybelly.org>
	<42C8AE8F.3000506@skippy.net>
Message-ID: <1120459041.3844.76.camel@portnoy.fuzzybelly.org>

On Sun, 2005-07-03 at 23:35 -0400, Scott Merrill wrote:
> Ryan Boren wrote:
> > On Sun, 2005-07-03 at 22:02 -0400, Robert Deaton wrote:
> > 
> >>I agree that we need activation and deactivation hooks, and its a
> >>shame that it was pushed aside for 1.5.1 because its a feature I know
> >>a lot of plugin authors really would have liked to seen included. Is
> >>there any chance of getting the patch attached to 1052 included in the
> >>core?
> > 
> > 
> > Not that particular patch.  Every plugin listening for those events will
> > get them and think they are activating/deactivating.  It's a broadcast
> > to all plugins.  Won't work.  
> 
> If you pass the name of the plugin as a parameter to the (de)activation 
> hook, couldn't plugins just pay attention as necessary?

Sure, but that would make the plugins more complicated and fragile.  The
whole process can be hidden behind one function call.

> I can envision modest automated plugin dependency chains.  For example, 
> de-activating my WP-Cron plugin should also deactivate all the helper 
> plugins it enables.
> Yes, the helper plugins should rely on
>    `if (function_exists(WP-Cron stuff) { ... }`
> but they'll still be left active, cluttering the plugin list for no good 
> reason.

Plugins can negotiate their own dependencies.  WP-Cron can send an "I'm
going down" event from its deactivation hook.

> Skimming the older proposed patch, I looks like it supports all the 
> above, just as well.

Patch updated for 1.6.

Ryan
-------------- next part --------------
A non-text attachment was scrubbed...
Name: activate_hook.diff
Type: text/x-patch
Size: 2406 bytes
Desc: not available
Url : http://comox.textdrive.com/pipermail/wp-hackers/attachments/20050704/2bc66004/activate_hook.bin
From false.hopes at gmail.com  Mon Jul  4 15:53:41 2005
From: false.hopes at gmail.com (Robert Deaton)
Date: Mon Jul  4 15:53:48 2005
Subject: [wp-hackers] Plugin deactivation
In-Reply-To: <1120459041.3844.76.camel@portnoy.fuzzybelly.org>
References: <3EE03C76-EC1B-11D9-963C-0003931722DA@funkive.com>
	<42C8885B.3040904@skippy.net>
	<1120439926.3844.60.camel@portnoy.fuzzybelly.org>
	<a491f91d050703190238ff6e2@mail.gmail.com>
	<1120443352.3844.70.camel@portnoy.fuzzybelly.org>
	<42C8AE8F.3000506@skippy.net>
	<1120459041.3844.76.camel@portnoy.fuzzybelly.org>
Message-ID: <a491f91d05070408533ce2cdbe@mail.gmail.com>

While on the topic of plugins and dependancy plugins, is there any chance 
that we can add a priority hook for plugins, so that plugins that may or 
will have plugins that depend upon it can ensure that they are loaded first, 
or at the very least that the dependancies can specify to be loaded later 
on, this way no fancy hooking around init or the like is required like I've 
been hacking to do in 1.5.

On 7/4/05, Ryan Boren <ryan@boren.nu> wrote: 
> 
> On Sun, 2005-07-03 at 23:35 -0400, Scott Merrill wrote:
> > Ryan Boren wrote:
> > > On Sun, 2005-07-03 at 22:02 -0400, Robert Deaton wrote:
> > >
> > >>I agree that we need activation and deactivation hooks, and its a
> > >>shame that it was pushed aside for 1.5.1 because its a feature I know
> > >>a lot of plugin authors really would have liked to seen included. Is
> > >>there any chance of getting the patch attached to 1052 included in the
> > >>core?
> > >
> > >
> > > Not that particular patch. Every plugin listening for those events 
> will
> > > get them and think they are activating/deactivating. It's a broadcast
> > > to all plugins. Won't work.
> >
> > If you pass the name of the plugin as a parameter to the (de)activation
> > hook, couldn't plugins just pay attention as necessary?
> 
> Sure, but that would make the plugins more complicated and fragile. The
> whole process can be hidden behind one function call.
> 
> > I can envision modest automated plugin dependency chains. For example,
> > de-activating my WP-Cron plugin should also deactivate all the helper
> > plugins it enables.
> > Yes, the helper plugins should rely on
> > `if (function_exists(WP-Cron stuff) { ... }`
> > but they'll still be left active, cluttering the plugin list for no good
> > reason.
> 
> Plugins can negotiate their own dependencies. WP-Cron can send an "I'm
> going down" event from its deactivation hook.
> 
> > Skimming the older proposed patch, I looks like it supports all the
> > above, just as well.
> 
> Patch updated for 1.6.
> 
> Ryan
> 
> 
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
> 
> 
> 
> 


-- 
--Robert Deaton
http://somethingunpredictable.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://comox.textdrive.com/pipermail/wp-hackers/attachments/20050704/a983a393/attachment.html
From davebytes at comcast.net  Mon Jul  4 16:16:55 2005
From: davebytes at comcast.net (David Chait)
Date: Mon Jul  4 16:17:00 2005
Subject: [wp-hackers] Plugin deactivation
References: <3EE03C76-EC1B-11D9-963C-0003931722DA@funkive.com><42C8885B.3040904@skippy.net><1120439926.3844.60.camel@portnoy.fuzzybelly.org><a491f91d050703190238ff6e2@mail.gmail.com><1120443352.3844.70.camel@portnoy.fuzzybelly.org><42C8AE8F.3000506@skippy.net><1120459041.3844.76.camel@portnoy.fuzzybelly.org>
	<a491f91d05070408533ce2cdbe@mail.gmail.com>
Message-ID: <003901c580b3$cbe12b40$6e01a8c0@sixfour>

Wouldn't it be easiest (and completely under your control) to have all the sub-plugins register off a custom message/action (init_any_blah_plugins), and then have the 'master' register for the plugins_loaded action, and when that gets hit do_action(init_any_blah_plugins)?

I agree that some priority ordering would be nice -- i.e., CG-Referrer would love to run first, as it may potentially 'bounce' access, and thus would like to short-circuit other plugin code loading.  Unfortunately, then EVERYONE fights for who really needs to run first. ;)  we might need 'classes' of plugins, so that things that want to prevent other code execution can run first, things that control secondary code loading/execution (chaining, whatever) run second, and 'normal' plugins can run third (oh, and 'late' plugins run fourth, as there's a class of things that want to run after all other plugins have hooked in...).  But this goes both for initial loading and hooking off of plugins_loaded...

-d

  ----- Original Message ----- 
  From: Robert Deaton 
  To: wp-hackers@lists.automattic.com 
  Sent: Monday, July 04, 2005 11:53 AM
  Subject: Re: [wp-hackers] Plugin deactivation


  While on the topic of plugins and dependancy plugins, is there any chance that we can add a priority hook for plugins, so that plugins that may or will have plugins that depend upon it can ensure that they are loaded first, or at the very least that the dependancies can specify to be loaded later on, this way no fancy hooking around init or the like is required like I've been hacking to do in 1.5.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://comox.textdrive.com/pipermail/wp-hackers/attachments/20050704/8490815c/attachment.html
From skeltoac at hotmail.com  Mon Jul  4 18:03:10 2005
From: skeltoac at hotmail.com (Andy Skelton)
Date: Mon Jul  4 18:03:13 2005
Subject: [wp-hackers] Plugin deactivation
In-Reply-To: <a491f91d05070408533ce2cdbe@mail.gmail.com>
Message-ID: <BAY108-F25BA32A8E05ABC63F9CC05C7E70@phx.gbl>

>From: Robert Deaton <false.hopes@gmail.com>
>While on the topic of plugins and dependancy plugins, is there any chance
>that we can add a priority hook for plugins, so that plugins that may or
>will have plugins that depend upon it can ensure that they are loaded 
>first,
>or at the very least that the dependancies can specify to be loaded later
>on, this way no fancy hooking around init or the like is required like I've
>been hacking to do in 1.5.

Robert,
I ran into this with Count My Clicks and I solved it by using custom hooks. 
There's no need to alter the way the core handles plugins. Is this what you 
meant by "fancy hooking around init":

count-my-clicks.php:
// Do all my plugin init stuff first, then:
global $cmc_loaded;
$cmc_loaded=true; // Leave a note for dependent plugins not yet loaded.
do_action('cmc_loaded'); // Signal dependent plugins already loaded to sart.

cmc-dependent-plugin.php:
function init_cmc_dependent_plugin() { // Wrap the guts in a function.
// Put all the cmc-dependent stuff here
}
if ( isset($cmc_loaded) ) init_cmc_dependent_plugin(); // Call the function; 
or
else add_action('cmc_loaded','init_cmc_dependent_plugin'); // let it be 
called later.

But what if your plugin depends on a plugin that wasn't written this way? We 
could have an official Plugin Template with these init lines added, or you 
could distribute your plugin with the needed plugin included and modified 
for your needs.

Cheers,
Andy

_________________________________________________________________
Express yourself instantly with MSN Messenger! Download today - it's FREE! 
http://messenger.msn.click-url.com/go/onm00200471ave/direct/01/

From amit at igeek.info  Mon Jul  4 18:33:53 2005
From: amit at igeek.info (Amit Gupta)
Date: Mon Jul  4 18:34:26 2005
Subject: [wp-hackers] Plugin deactivation
Message-ID: <000801c580c6$f93e8070$57ebd4cb@unicorn>


well, as I know of it, the application orders for the filters are there for the sole purpose of specifying which plugin runs first. Like

add_filter('the_content', 'my_plugin', 1);

this will make my plugin run first, if the sequence order is not specified then its defaulted to the last in the order, 10. I believe this was made so that like you said, plugins that want to stop the execution of other code can run first, and so on. however I don't think that this feature is used optimally by plugin-authors(myself included as I had my syntax hiliting plugin running at #1 in first versions, but now I've 2 filters at #3 & #4).

so IMHO, plugin authors need to understand that and use it, instead of just whipping up a quick hack. for that I think that there should be a page at the Codex stating the basic essential guidelines that the plugins must follow. though I know it can't be controlled, but to some extent it can be controlled. As wp-plugins.org is under control of WP, I suggest that it should be mandatory for all plugins listed there to follow the basic essential guidelines.

just my $0.02

-----
Amit Gupta

|| Canned!! -- my Atropine || iG:Syntax Hiliter v3.0 ||
|| iGEEK.INFO || Free Nokia Ringtones || Online Gaming @ Games Planet || 




---------- Original Message from davebytes@comcast.net ----------
Wouldn't it be easiest (and completely under your control) to have all the sub-plugins register off a custom message/action (init_any_blah_plugins), and then have the 'master' register for the plugins_loaded action, and when that gets hit do_action(init_any_blah_plugins)?
 
I agree that some priority ordering would be nice -- i.e., CG-Referrer would love to run first, as it may potentially 'bounce' access, and thus would like to short-circuit other plugin code loading.  Unfortunately, then EVERYONE fights for who really needs to run first. ;)  we might need 'classes' of plugins, so that things that want to prevent other code execution can run first, things that control secondary code loading/execution (chaining, whatever) run second, and 'normal' plugins can run third (oh, and 'late' plugins run fourth, as there's a class of things that want to run after all other plugins have hooked in...).  But this goes both for initial loading and hooking off of plugins_loaded...
 
-d
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://comox.textdrive.com/pipermail/wp-hackers/attachments/20050704/9ffda4de/attachment.html
From r at schestowitz.com  Tue Jul  5 01:06:03 2005
From: r at schestowitz.com (Roy Schestowitz)
Date: Tue Jul  5 01:06:08 2005
Subject: [wp-hackers] XML-RPC Exploit?
Message-ID: <20050705020603.salgkm6ywwg8w8kw@banana.catalyst2.com>

http://it.slashdot.org/article.pl?sid=05/07/04/2153224&tid=95&tid=172&tid=169

Can anybody please comment on the relevance of WordPress? Bearing in mind that
the  flaw may have been address already, it is still mentioned among
applications that are susceptible to an XML-RPC exploit.

My host's server was crippled by a DoS attack last Saturday. It was due to a
phpBB exploit which got many sites including mine suspended. So, it was not
just a case of backup, then restore.

Thanks for any reassurance,

Roy
From m at mullenweg.com  Tue Jul  5 01:13:22 2005
From: m at mullenweg.com (Matthew Mullenweg)
Date: Tue Jul  5 01:13:31 2005
Subject: [wp-hackers] XML-RPC Exploit?
In-Reply-To: <20050705020603.salgkm6ywwg8w8kw@banana.catalyst2.com>
References: <20050705020603.salgkm6ywwg8w8kw@banana.catalyst2.com>
Message-ID: <42C9DEB2.5070906@mullenweg.com>

Roy Schestowitz wrote:
> Can anybody please comment on the relevance of WordPress? Bearing in mind that
> the  flaw may have been address already, it is still mentioned among
> applications that are susceptible to an XML-RPC exploit.

A very similar issue was addressed in 1.5.1.3. If you know anyone on an 
old version of WP you may want to take a few minutes to help them upgrade.

-- 
Matt Mullenweg
  http://photomatt.net | http://wordpress.org
http://pingomatic.com | http://cnet.com
From ryan at boren.nu  Tue Jul  5 01:15:44 2005
From: ryan at boren.nu (Ryan Boren)
Date: Tue Jul  5 01:15:49 2005
Subject: [wp-hackers] XML-RPC Exploit?
In-Reply-To: <20050705020603.salgkm6ywwg8w8kw@banana.catalyst2.com>
References: <20050705020603.salgkm6ywwg8w8kw@banana.catalyst2.com>
Message-ID: <1120526144.3844.85.camel@portnoy.fuzzybelly.org>

On Tue, 2005-07-05 at 02:06 +0100, Roy Schestowitz wrote:
> http://it.slashdot.org/article.pl?sid=05/07/04/2153224&tid=95&tid=172&tid=169
> 
> Can anybody please comment on the relevance of WordPress? Bearing in mind that
> the  flaw may have been address already, it is still mentioned among
> applications that are susceptible to an XML-RPC exploit.

Not relevant to WP.  We don't use the php libraries.  Ours is a
different but similar XMLRPC exploit.  There was ours, the php one, and
the PEAR one all at the same time.  Ours was unique to us whereas the
php and PEAR ones affected lots of projects.

Ryan

From false.hopes at gmail.com  Tue Jul  5 03:04:21 2005
From: false.hopes at gmail.com (Robert Deaton)
Date: Tue Jul  5 03:04:29 2005
Subject: [wp-hackers] XML-RPC Exploit?
In-Reply-To: <1120526144.3844.85.camel@portnoy.fuzzybelly.org>
References: <20050705020603.salgkm6ywwg8w8kw@banana.catalyst2.com>
	<1120526144.3844.85.camel@portnoy.fuzzybelly.org>
Message-ID: <a491f91d05070420044b85d04@mail.gmail.com>

Thus is why you never trust anything posted on slashdot

On 7/4/05, Ryan Boren <ryan@boren.nu> wrote:
> 
> On Tue, 2005-07-05 at 02:06 +0100, Roy Schestowitz wrote:
> > 
> http://it.slashdot.org/article.pl?sid=05/07/04/2153224&tid=95&tid=172&tid=169
> >
> > Can anybody please comment on the relevance of WordPress? Bearing in 
> mind that
> > the flaw may have been address already, it is still mentioned among
> > applications that are susceptible to an XML-RPC exploit.
> 
> Not relevant to WP. We don't use the php libraries. Ours is a
> different but similar XMLRPC exploit. There was ours, the php one, and
> the PEAR one all at the same time. Ours was unique to us whereas the
> php and PEAR ones affected lots of projects.
> 
> Ryan
> 
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
> 



-- 
--Robert Deaton
http://somethingunpredictable.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://comox.textdrive.com/pipermail/wp-hackers/attachments/20050705/a67e6380/attachment.html
From davebytes at comcast.net  Tue Jul  5 03:06:27 2005
From: davebytes at comcast.net (David Chait)
Date: Tue Jul  5 03:06:43 2005
Subject: [wp-hackers] Plugin deactivation
References: <000801c580c6$f93e8070$57ebd4cb@unicorn>
Message-ID: <006901c5810e$88b90800$6e01a8c0@sixfour>

Actually, Robert's original question was ordering the loading/initialization of plugins, and not the order that filters/actions get executed...  Also, if I remember the code, you can actually go outside of (1, 10) bounds with the order/priority param... and the numbers are quite useless with a hundred people writing different plugins, and using the numbers differently (or not at all!).  Gee, sounds like the same problem with user levels. ;) ;)

Having some control over order of loading (and thus initialization/early-execution) would definitely be a good thing, and defined by categories (roles!), rather than numeric index.

-d
  ----- Original Message ----- 
  From: Amit Gupta 
  To: wp-hackers@lists.automattic.com 
  Sent: Monday, July 04, 2005 2:33 PM
  Subject: Re: [wp-hackers] Plugin deactivation



  well, as I know of it, the application orders for the filters are there for the sole purpose of specifying which plugin runs first. Like

  add_filter('the_content', 'my_plugin', 1);

  this will make my plugin run first, if the sequence order is not specified then its defaulted to the last in the order, 10. I believe this was made so that like you said, plugins that want to stop the execution of other code can run first, and so on. however I don't think that this feature is used optimally by plugin-authors(myself included as I had my syntax hiliting plugin running at #1 in first versions, but now I've 2 filters at #3 & #4).

  so IMHO, plugin authors need to understand that and use it, instead of just whipping up a quick hack. for that I think that there should be a page at the Codex stating the basic essential guidelines that the plugins must follow. though I know it can't be controlled, but to some extent it can be controlled. As wp-plugins.org is under control of WP, I suggest that it should be mandatory for all plugins listed there to follow the basic essential guidelines.

  just my $0.02

  -----
  Amit Gupta

  || Canned!! -- my Atropine || iG:Syntax Hiliter v3.0 ||
  || iGEEK.INFO || Free Nokia Ringtones || Online Gaming @ Games Planet || 




  ---------- Original Message from davebytes@comcast.net ----------
  Wouldn't it be easiest (and completely under your control) to have all the sub-plugins register off a custom message/action (init_any_blah_plugins), and then have the 'master' register for the plugins_loaded action, and when that gets hit do_action(init_any_blah_plugins)?
   
  I agree that some priority ordering would be nice -- i.e., CG-Referrer would love to run first, as it may potentially 'bounce' access, and thus would like to short-circuit other plugin code loading.  Unfortunately, then EVERYONE fights for who really needs to run first. ;)  we might need 'classes' of plugins, so that things that want to prevent other code execution can run first, things that control secondary code loading/execution (chaining, whatever) run second, and 'normal' plugins can run third (oh, and 'late' plugins run fourth, as there's a class of things that want to run after all other plugins have hooked in...).  But this goes both for initial loading and hooking off of plugins_loaded...
   
  -d



------------------------------------------------------------------------------


  _______________________________________________
  wp-hackers mailing list
  wp-hackers@lists.automattic.com
  http://lists.automattic.com/mailman/listinfo/wp-hackers
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://comox.textdrive.com/pipermail/wp-hackers/attachments/20050705/0767ec93/attachment.html
From false.hopes at gmail.com  Tue Jul  5 03:14:03 2005
From: false.hopes at gmail.com (Robert Deaton)
Date: Tue Jul  5 03:14:07 2005
Subject: [wp-hackers] Plugin deactivation
In-Reply-To: <000801c580c6$f93e8070$57ebd4cb@unicorn>
References: <000801c580c6$f93e8070$57ebd4cb@unicorn>
Message-ID: <a491f91d05070420143e45aac8@mail.gmail.com>

Amit, I do think that plugin authors understand this very well, but this is 
only true for filters, but what if a plugin was trying to call functions 
that your plugin needs to have defined before that plugin has been called, 
thereby creating errors and the like. I think that we don't necessarily need 
a way for plugins to load before other plugins, but how about a way for 
plugints to be specified to be loaded later? This way, plugins that have 
dependancies can take advantage of being loaded later when the independant 
plugins have already been loaded and their functions will be available. This 
way, the original plugin authors nor the independant plugin authors have to 
change the flow of their plugins to make it work.

Andy, your solution is just another way to do what I was thinking of. My 
method was telling all plugin authors to wrap everything in a function, and 
add it as add_action('init', 'their_function'); and then having my plugin 
add its action as add_action('init', 'my_function', 99999) to be sure that 
my code was executed later, but it'd be much nicer to not have to add these 
sort of things to my plugin documentation and to have to think of ways to do 
this.

On 7/4/05, Amit Gupta <amit@igeek.info> wrote:
> 
>  well, as I know of it, the application orders for the filters are there 
> for the sole purpose of specifying which plugin runs first. Like
> 
> add_filter('the_content', 'my_plugin', 1);
> 
> this will make my plugin run first, if the sequence order is not specified 
> then its defaulted to the last in the order, 10. I believe this was made so 
> that like you said, plugins that want to stop the execution of other code 
> can run first, and so on. however I don't think that this feature is used 
> optimally by plugin-authors(myself included as I had my syntax hiliting 
> plugin running at #1 in first versions, but now I've 2 filters at #3 & #4).
> 
> so IMHO, plugin authors need to understand that and use it, instead of 
> just whipping up a quick hack. for that I think that there should be a page 
> at the Codex stating the basic essential guidelines that the plugins must 
> follow. though I know it can't be controlled, but to some extent it can be 
> controlled. As wp-plugins.org <http://wp-plugins.org> is under control of 
> WP, I suggest that it should be mandatory for all plugins listed there to 
> follow the basic essential guidelines.
> 
> just my $0.02
> 
> -----
> Amit Gupta
> 
> || Canned!! -- my Atropine <http://blog.igeek.info/> || iG:Syntax Hiliter 
> v3.0<http://blog.igeek.info/still-fresh/2005/06/29/let-the-code-be-colourised/>||
> || iGEEK.INFO <http://www.igeek.info/> || Free Nokia Ringtones<http://www.igeek.info/ringtones.php>|| Online 
> Gaming @ Games Planet <http://www.igeek.info/games.php> || 
> 
> 
> 
> 
> ---------- Original Message from davebytes@comcast.net ----------
> Wouldn't it be easiest (and completely under your control) to have all the 
> sub-plugins register off a custom message/action (init_any_blah_plugins), 
> and then have the 'master' register for the plugins_loaded action, and when 
> that gets hit do_action(init_any_blah_plugins)?
> 
> I agree that some priority ordering would be nice -- i.e., CG-Referrer 
> would love to run first, as it may potentially 'bounce' access, and thus 
> would like to short-circuit other plugin code loading. Unfortunately, then 
> EVERYONE fights for who really needs to run first. ;) we might need 
> 'classes' of plugins, so that things that want to prevent other code 
> execution can run first, things that control secondary code 
> loading/execution (chaining, whatever) run second, and 'normal' plugins can 
> run third (oh, and 'late' plugins run fourth, as there's a class of things 
> that want to run after all other plugins have hooked in...). But this goes 
> both for initial loading and hooking off of plugins_loaded...
> 
> -d
> 
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
> 
> 
> 


-- 
--Robert Deaton
http://somethingunpredictable.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://comox.textdrive.com/pipermail/wp-hackers/attachments/20050705/63040086/attachment-0001.html
From skippy at skippy.net  Tue Jul  5 03:15:07 2005
From: skippy at skippy.net (Scott Merrill)
Date: Tue Jul  5 03:15:09 2005
Subject: [wp-hackers] XML-RPC Exploit?
In-Reply-To: <1120526144.3844.85.camel@portnoy.fuzzybelly.org>
References: <20050705020603.salgkm6ywwg8w8kw@banana.catalyst2.com>
	<1120526144.3844.85.camel@portnoy.fuzzybelly.org>
Message-ID: <42C9FB3B.7050901@skippy.net>

Ryan Boren wrote:
> On Tue, 2005-07-05 at 02:06 +0100, Roy Schestowitz wrote:
> 
>>http://it.slashdot.org/article.pl?sid=05/07/04/2153224&tid=95&tid=172&tid=169
>>
>>Can anybody please comment on the relevance of WordPress? Bearing in mind that
>>the  flaw may have been address already, it is still mentioned among
>>applications that are susceptible to an XML-RPC exploit.
> 
> 
> Not relevant to WP.  We don't use the php libraries.  Ours is a
> different but similar XMLRPC exploit.  There was ours, the php one, and
> the PEAR one all at the same time.  Ours was unique to us whereas the
> php and PEAR ones affected lots of projects.

It might be worth throwing this onto the Devblog, so that "our people" 
get the right news from us, instead of the Slashdot crowd.

-- 
skippy@skippy.net | http://skippy.net/

gpg --keyserver pgp.mit.edu --recv-keys 9CFA4B35
506C F8BB 17AE 8A05 0B49  3544 476A 7DEC 9CFA 4B35
From denis at semiologic.com  Tue Jul  5 04:41:57 2005
From: denis at semiologic.com (Denis de Bernardy)
Date: Tue Jul  5 04:45:23 2005
Subject: [wp-hackers] XML-RPC Exploit?
In-Reply-To: <1120526144.3844.85.camel@portnoy.fuzzybelly.org>
Message-ID: <001101c5811b$e10bbc70$6502a8c0@DB>

Speaking xml-rpc, is 1.5.1.4 due any time to fix the xml-rpc bug introduced
by 1.5.1.3?

D.

From amit at igeek.info  Tue Jul  5 05:03:29 2005
From: amit at igeek.info (Amit Gupta)
Date: Tue Jul  5 05:03:49 2005
Subject: [wp-hackers] Plugin deactivation
Message-ID: <000801c5811e$e6bbda80$57ebd4cb@unicorn>

----- On July 4th, 2005 wrote "David Chait" <davebytes@comcast.net> -----
> Actually, Robert's original question was ordering the loading/initialization of plugins, and not the order that 
> filters/actions get executed...  Also, if I remember the code, you can actually go outside of (1, 10) bounds 
> with the order/priority param... and the numbers are quite useless with a hundred people writing different 
> plugins, and using the numbers differently (or not at all!).  Gee, sounds like the same problem with user 
> levels. ;) ;)
> 
> Having some control over order of loading (and thus initialization/early-execution) would definitely be a good > thing, and defined by categories (roles!), rather than numeric index.

----- On July 4th, 2005 wrote "Robert Deaton" <false.hopes@gmail.com> -----
> Amit, I do think that plugin authors understand this very well, but this is only true for filters, but what if a
>  plugin was trying to call functions that your plugin needs to have defined before that plugin has been 
> called, thereby creating errors and the like. I think that we don't necessarily need a way for plugins to load 
> before other plugins, but how about a way for plugints to be specified to be loaded later? This way, plugins 
> that have dependancies can take advantage of being loaded later when the independant plugins have 
> already been loaded and their functions will be available. This way, the original plugin authors nor the 
> independant plugin authors have to change the flow of their plugins to make it work.

well, that does make sense now, it can be quite beneficial to have it defined which plugin to load first and which to load later(and last). I guess that I was just not reading it right!!! ;)

-----
Amit Gupta

|| Canned!! -- my Atropine || iG:Syntax Hiliter v3.0 ||
|| iGEEK.INFO || Free Nokia Ringtones || Online Gaming @ Games Planet || 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://comox.textdrive.com/pipermail/wp-hackers/attachments/20050705/510ade59/attachment.html
From r at schestowitz.com  Tue Jul  5 05:27:38 2005
From: r at schestowitz.com (Roy Schestowitz)
Date: Tue Jul  5 05:27:50 2005
Subject: [wp-hackers] XML-RPC Exploit?
In-Reply-To: <42C9FB3B.7050901@skippy.net>
References: <20050705020603.salgkm6ywwg8w8kw@banana.catalyst2.com>
	<1120526144.3844.85.camel@portnoy.fuzzybelly.org>
	<42C9FB3B.7050901@skippy.net>
Message-ID: <20050705062738.j5f01bscv9sc0oog@banana.catalyst2.com>

Quoting Scott Merrill:

> Ryan Boren wrote:
>> On Tue, 2005-07-05 at 02:06 +0100, Roy Schestowitz wrote:
>>
>>> http://it.slashdot.org/article.pl?sid=05/07/04/2153224&tid=95&tid=172&tid=169
>>>
>>> Can anybody please comment on the relevance of WordPress? Bearing 
>>> in mind that
>>> the  flaw may have been addressed already, it is still mentioned among
>>> applications that are susceptible to an XML-RPC exploit.
>>
>>
>> Not relevant to WP.  We don't use the php libraries.  Ours is a
>> different but similar XMLRPC exploit.  There was ours, the php one, and
>> the PEAR one all at the same time.  Ours was unique to us whereas the
>> php and PEAR ones affected lots of projects.
>
> It might be worth throwing this onto the Devblog, so that "our people"
> get the right news from us, instead of the Slashdot crowd.

I have just peeked at that Slashdot item again and ran a quick search. 
At least
3 commenters stated clearly that WordPress had released a fix.

Roy

-- 
Roy S. Schestowitz
http://Schestowitz.com

From mark.wordpress at txfx.net  Tue Jul  5 06:26:46 2005
From: mark.wordpress at txfx.net (Mark Jaquith)
Date: Tue Jul  5 06:26:57 2005
Subject: [wp-hackers] Plugin deactivation
In-Reply-To: <a491f91d05070408533ce2cdbe@mail.gmail.com>
References: <3EE03C76-EC1B-11D9-963C-0003931722DA@funkive.com>	<42C8885B.3040904@skippy.net>	<1120439926.3844.60.camel@portnoy.fuzzybelly.org>	<a491f91d050703190238ff6e2@mail.gmail.com>	<1120443352.3844.70.camel@portnoy.fuzzybelly.org>	<42C8AE8F.3000506@skippy.net>	<1120459041.3844.76.camel@portnoy.fuzzybelly.org>
	<a491f91d05070408533ce2cdbe@mail.gmail.com>
Message-ID: <42CA2826.6040602@txfx.net>

Robert Deaton wrote:

> While on the topic of plugins and dependancy plugins, is there any 
> chance that we can add a priority hook for plugins, so that plugins 
> that may or will have plugins that depend upon it can ensure that they 
> are loaded first, or at the very least that the dependancies can 
> specify to be loaded later on, this way no fancy hooking around init 
> or the like is required like I've been hacking to do in 1.5.

I've accomplished this by using require_once();

If plugin A needs plugin B to have been loaded first, put this at the 
top of plugin A:

require_once('plugin-a.php');

If it's already loaded, the _once part will ensure that it isn't loaded 
again.  If it isn't loaded, it'll be loaded, and then it comes time for 
it to be loaded by WP, it'll be skipped, again because of require_once().



From peter.westwood at ftwr.co.uk  Tue Jul  5 09:40:23 2005
From: peter.westwood at ftwr.co.uk (Peter Westwood)
Date: Tue Jul  5 09:40:34 2005
Subject: [wp-hackers] Re: [wp-svn] [2698] trunk/wp-admin: wp_delete_user()
Message-ID: <28008.194.242.149.254.1120556423.squirrel@www.ftwr.co.uk>

Looking at this changeset: http://trac.wordpress.org/changeset/2698

        310        $post_ids = $wpdb->get_col("SELECT ID FROM $wpdb->posts WHERE post_author = $id");
        311  	    if ($post_ids) {
  	312 	        $post_ids = implode(',', $post_ids);
  	313
  	314 	        // Delete comments, *backs
  	315 	        $wpdb->query("DELETE FROM $wpdb->comments WHERE comment_post_ID IN ($post_ids)");
  	316 	        // Clean cats
  	317 	        $wpdb->query("DELETE FROM $wpdb->post2cat WHERE post_id IN ($post_ids)");
  	318 	        // Clean post_meta
  	319 	        $wpdb->query("DELETE FROM $wpdb->postmeta WHERE post_id IN ($post_ids)");
  	320 	        // Clean links
  	321 	        $wpdb->query("DELETE FROM $wpdb->links WHERE link_owner = $id");
  	322 	        // Delete posts
  	323 	        $wpdb->query("DELETE FROM $wpdb->posts WHERE post_author = $id");
  	324 	    }

Shouldn't the delete's for links be outside the check for posts otherwise we can end up with orphaned links with no
owner because the owner only had links and no posts.

westi
-- 
Peter Westwood
Blog: http://www.ftwr.co.uk/blog/
Get Firefox: http://www.spreadfirefox.com/?q=affiliates&id=20287
-------------- next part --------------
An embedded message was scrubbed...
From: m@wordpress.org
Subject: [wp-svn] [2698] trunk/wp-admin: wp_delete_user()
Date: Mon,  4 Jul 2005 22:03:43 +0000 (GMT)
Size: 7302
Url: http://comox.textdrive.com/pipermail/wp-hackers/attachments/20050705/a3a472e5/wp_delete_user-0001.mht
From dmhouse at gmail.com  Tue Jul  5 10:26:28 2005
From: dmhouse at gmail.com (David House)
Date: Tue Jul  5 10:26:35 2005
Subject: [wp-hackers] Re: [wp-svn] [2698] trunk/wp-admin: wp_delete_user()
In-Reply-To: <28008.194.242.149.254.1120556423.squirrel@www.ftwr.co.uk>
References: <28008.194.242.149.254.1120556423.squirrel@www.ftwr.co.uk>
Message-ID: <ebe43d6805070503262abac77b@mail.gmail.com>

On 7/5/05, Peter Westwood <peter.westwood@ftwr.co.uk> wrote:
> Shouldn't the delete's for links be outside the check for posts otherwise we
> can end up with orphaned links with no
> owner because the owner only had links and no posts.

I'd agree. File a bug report over at http://trac.wordpress.org.

-- 
-David House, dmhouse@gmail.com, http://xmouse.ithium.net
From skippy at skippy.net  Tue Jul  5 10:42:25 2005
From: skippy at skippy.net (Scott Merrill)
Date: Tue Jul  5 10:42:33 2005
Subject: [wp-hackers] XML-RPC Exploit?
In-Reply-To: <20050705062738.j5f01bscv9sc0oog@banana.catalyst2.com>
References: <20050705020603.salgkm6ywwg8w8kw@banana.catalyst2.com>	<1120526144.3844.85.camel@portnoy.fuzzybelly.org>	<42C9FB3B.7050901@skippy.net>
	<20050705062738.j5f01bscv9sc0oog@banana.catalyst2.com>
Message-ID: <42CA6411.2060409@skippy.net>

Roy Schestowitz wrote:
> Quoting Scott Merrill:
>> It might be worth throwing this onto the Devblog, so that "our people"
>> get the right news from us, instead of the Slashdot crowd.
> 
> 
> I have just peeked at that Slashdot item again and ran a quick search. 
> At least
> 3 commenters stated clearly that WordPress had released a fix.

Wait, someone actually READS the comments?  =)  At what mod setting do 
you read them?  Seperating the wheat from the "I, for one, welcome our 
new XMLRPC overlords" chaff can be hard to do on slashdot sometimes.

Comments in slashdot threads dont have quite the ring of "official 
response" that a devblog post would.

These are just my opinions.  If Matt and Ryan feel it's address well 
enough, so be it.

-- 
skippy@skippy.net | http://skippy.net/

gpg --keyserver pgp.mit.edu --recv-keys 9CFA4B35
506C F8BB 17AE 8A05 0B49  3544 476A 7DEC 9CFA 4B35
From skippy at skippy.net  Tue Jul  5 12:09:09 2005
From: skippy at skippy.net (Scott Merrill)
Date: Tue Jul  5 12:09:15 2005
Subject: [wp-hackers] wp_delete_user()
Message-ID: <42CA7865.3020002@skippy.net>

http://trac.wordpress.org/changeset/2698

Should (could?) wp_delete_user() go in pluggable-functions?

I realize that deleting all the user's contributions to the blog is the
default behaviour.  But I've never had to delete a user, so the default
behavior never really entered my mind.

It seems ... extreme ... to delete a user's _comments_ just because you
remove them from the list of registered users.

-- 
skippy@skippy.net | http://skippy.net/

gpg --keyserver pgp.mit.edu --recv-keys 9CFA4B35
506C F8BB 17AE 8A05 0B49  3544 476A 7DEC 9CFA 4B35
From peter.westwood at ftwr.co.uk  Tue Jul  5 12:22:24 2005
From: peter.westwood at ftwr.co.uk (Peter Westwood)
Date: Tue Jul  5 12:22:36 2005
Subject: [wp-hackers] wp_delete_user()
In-Reply-To: <42CA7865.3020002@skippy.net>
References: <42CA7865.3020002@skippy.net>
Message-ID: <56315.194.242.149.254.1120566144.squirrel@www.ftwr.co.uk>


On Tue, July 5, 2005 1:09 pm, Scott Merrill said:
> http://trac.wordpress.org/changeset/2698
>
> Should (could?) wp_delete_user() go in pluggable-functions?
>
> I realize that deleting all the user's contributions to the blog is the
> default behaviour.  But I've never had to delete a user, so the default
> behavior never really entered my mind.
>
> It seems ... extreme ... to delete a user's _comments_ just because you
> remove them from the list of registered users.
>

Unless i read the code wrong

The users's comments are not deleted - just the comments on the users posts

westi
-- 
Peter Westwood
Blog: http://www.ftwr.co.uk/blog/
Get Firefox: http://www.spreadfirefox.com/?q=affiliates&id=20287

From skippy at skippy.net  Tue Jul  5 12:25:13 2005
From: skippy at skippy.net (Scott Merrill)
Date: Tue Jul  5 12:25:22 2005
Subject: [wp-hackers] wp_delete_user()
In-Reply-To: <56315.194.242.149.254.1120566144.squirrel@www.ftwr.co.uk>
References: <42CA7865.3020002@skippy.net>
	<56315.194.242.149.254.1120566144.squirrel@www.ftwr.co.uk>
Message-ID: <42CA7C29.4080706@skippy.net>

Peter Westwood wrote:
> On Tue, July 5, 2005 1:09 pm, Scott Merrill said:
> 
>>http://trac.wordpress.org/changeset/2698
>>
>>Should (could?) wp_delete_user() go in pluggable-functions?
>>
>>I realize that deleting all the user's contributions to the blog is the
>>default behaviour.  But I've never had to delete a user, so the default
>>behavior never really entered my mind.
>>
>>It seems ... extreme ... to delete a user's _comments_ just because you
>>remove them from the list of registered users.
>>
> 
> 
> Unless i read the code wrong
> 
> The users's comments are not deleted - just the comments on the users posts

Oh.  Thanks for pointing that out.

Even worse, in my mind.  Deleting contributions from other people seems
like a really bad idea.  Granted, if we're deleting their posts the
comments would have nowhere to go, so we might as well delete them.  I
guess I'm just really uncomfortable with deleting so much stuff.  Guess
I'll just not delete users ever...

-- 
skippy@skippy.net | http://skippy.net/

gpg --keyserver pgp.mit.edu --recv-keys 9CFA4B35
506C F8BB 17AE 8A05 0B49  3544 476A 7DEC 9CFA 4B35
From denis at semiologic.com  Tue Jul  5 12:59:46 2005
From: denis at semiologic.com (Denis de Bernardy)
Date: Tue Jul  5 13:03:02 2005
Subject: [wp-hackers] Overriding get_posts() behaviour
In-Reply-To: <42C7DE90.4050003@copperleaf.org>
Message-ID: <001001c58161$6be90010$6502a8c0@DB>

Hi Bill,

To be very frank I'd hardly expect any of the results we'll get in php will
be close to the things you can get from natural language seach spin offs
such as Delphes. Even with Nutche -- Lucene -- or one of MSN, Yahoo, Ask,
Vivimo or Google around.

That said, feel free to send your mods, I imagine. :)

A few comments:

#1 may break the very index. I think a more reasonable approache is some
kind of node_meta field. Best I know, a match against (node_name,
node_content) with meta in node_content is not the same as a match against
(node_name, node_meta, node_content).

#2 Fetching beans on a bean search as in a like statement is quite simple:
change the regex to \b\w*bean\w*\b rather than \bbean\b. Then again, if the
searcher wants queries on a query search, he won't get the expected result,
so I think a soundex or a similar approach is a more reasonable option.
Alternatively, there are stemming librairies, but it is top-down and as
Christian points out it is language dependant.

#3 breaks three relevance criterias. The first is the match against sql
statement. The second is whether all terms are present, and the last is
whether they are in the same order.

#4 makes good sense, and it even makes sense to search on it directly and to
give it a high score I think. Then again, it is language dependant, like
stemming. Also, you've to be wary that metaphone("this is a test") !=
metaphone("this") . metaphone("is") . metaphone("a") . metaphone("test").

As a last remark, my original intent was not to serve the resulting spew
directly. Rather, it was to use it as a seed for a second query that
conducts a structural analysis of the node graph. I've yet to start working
on that part. :)

--  
Denis de Bernardy
http://www.semiologic.com

> -----Original Message-----
> From: wp-hackers-bounces@lists.automattic.com 
> [mailto:wp-hackers-bounces@lists.automattic.com] On Behalf Of 
> ml_wordpress@copperleaf.org
> Sent: Sunday, July 03, 2005 2:48 PM
> To: wp-hackers@lists.automattic.com
> Subject: Re: [wp-hackers] Overriding get_posts() behaviour
> 
> 
> I've also taken a look at Denis' plugin and have a few ideas 
> that maybe 
> you guys could add. I've modified Denis' plugin on my testbed 
> just for 
> fun and could send you the code if you wish. Here is a list of ideas:
> 
> 1) Probably the most useful function for me was that I added 
> a filter to 
> the sem_search_index function that allows additional plugins to add 
> additional words to the node_content column. This could actually be a 
> foundation filter for the plugin in that all search words 
> could be added 
> that way: the_content, the_title, post_tags, and, in my case, 
> data from 
> columns in new tables.
> 
> 2) I found that by using a fulltext search, is you search on 
> 'bean', it 
> won't match 'beans'. I don't know if there is a something in the 
> fulltext search that can allow you to do 'like' queries. If 
> not, maybe 
> that could be either a global option or something selected from an 
> advanced search page that would allow you to do fulltext searches or 
> like searches. (BTW Denis, some hosts default to Innodb tables so in 
> your create table statement you need to specify ENGINE=myisam so that 
> fulltext indexes can be created.)
> 
> 3) I added some code that would clean out all funky 
> characters, remove 
> all duplicates and collapse all whitespace in the 
> node_content column. 
> This can shorten the size of the field significantly and removing the 
> dups is nice if you aren't doing weighted searches. Something else to 
> consider would be to remove all stopwords. (Configurable from 
> an admin 
> page?)
> 
> 4) One last idea is that perhaps an option could be so store 
> the soundex 
> (or some other algorithm) for the word list so that searches 
> are done on 
> that instead of the actual word.
> 
> Anyway, like I said above, I'd be glad to send you guys my 
> mods or I'd 
> be glad to help with parts of this if you wish.
> 
> Bill
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com 
> http://lists.automattic.com/mailman/listinfo/wp-hackers
> 

From journalized at gmail.com  Tue Jul  5 14:21:35 2005
From: journalized at gmail.com (Mike Little)
Date: Tue Jul  5 14:21:41 2005
Subject: [wp-hackers] wp_delete_user()
In-Reply-To: <42CA7C29.4080706@skippy.net>
References: <42CA7865.3020002@skippy.net>
	<56315.194.242.149.254.1120566144.squirrel@www.ftwr.co.uk>
	<42CA7C29.4080706@skippy.net>
Message-ID: <7235ce780507050721699f758f@mail.gmail.com>

On 05/07/05, Scott Merrill <skippy@skippy.net> wrote:
> 
> Even worse, in my mind.  Deleting contributions from other people seems
> like a really bad idea.  Granted, if we're deleting their posts the
> comments would have nowhere to go, so we might as well delete them.  I
> guess I'm just really uncomfortable with deleting so much stuff.  Guess
> I'll just not delete users ever...
> 
> --
> skippy@skippy.net | http://skippy.net/
> 

Is there perhaps a need for an action hook such that I could install a
plugin to allow me to transfer all the users 'property' to another
user or the admin. Or perhaps I need to update an external LDAP
system.

Mike
-- 
Mike Little
http://zed1.com/journalized/
From dmhouse at gmail.com  Tue Jul  5 17:34:52 2005
From: dmhouse at gmail.com (David House)
Date: Tue Jul  5 17:34:58 2005
Subject: [wp-hackers] wp_delete_user()
In-Reply-To: <7235ce780507050721699f758f@mail.gmail.com>
References: <42CA7865.3020002@skippy.net>
	<56315.194.242.149.254.1120566144.squirrel@www.ftwr.co.uk>
	<42CA7C29.4080706@skippy.net>
	<7235ce780507050721699f758f@mail.gmail.com>
Message-ID: <ebe43d68050705103429932bc5@mail.gmail.com>

On 7/5/05, Mike Little <journalized@gmail.com> wrote:
> Is there perhaps a need for an action hook such that I could install a
> plugin to allow me to transfer all the users 'property' to another
> user or the admin. Or perhaps I need to update an external LDAP
> system.

If you're uncomfortable with the amount of deletion that happens when
deleting a user, don't delete them. Simply reduce them to level 0. See
previous discussion [1].

[1]: http://comox.textdrive.com/pipermail/wp-hackers/2005-April/000448.html

-- 
-David House, dmhouse@gmail.com, http://xmouse.ithium.net
From false.hopes at gmail.com  Tue Jul  5 17:53:17 2005
From: false.hopes at gmail.com (Robert Deaton)
Date: Tue Jul  5 17:53:23 2005
Subject: [wp-hackers] wp_delete_user()
In-Reply-To: <ebe43d68050705103429932bc5@mail.gmail.com>
References: <42CA7865.3020002@skippy.net>
	<56315.194.242.149.254.1120566144.squirrel@www.ftwr.co.uk>
	<42CA7C29.4080706@skippy.net>
	<7235ce780507050721699f758f@mail.gmail.com>
	<ebe43d68050705103429932bc5@mail.gmail.com>
Message-ID: <a491f91d05070510536296e8f1@mail.gmail.com>

Why not, just like almost any other software out there, including many
operating systems, provide the option of whether or not to delete the
users posts, comments on those posts, pages, and anything else that
might belong to the user?

On 7/5/05, David House <dmhouse@gmail.com> wrote:
> On 7/5/05, Mike Little <journalized@gmail.com> wrote:
> > Is there perhaps a need for an action hook such that I could install a
> > plugin to allow me to transfer all the users 'property' to another
> > user or the admin. Or perhaps I need to update an external LDAP
> > system.
> 
> If you're uncomfortable with the amount of deletion that happens when
> deleting a user, don't delete them. Simply reduce them to level 0. See
> previous discussion [1].
> 
> [1]: http://comox.textdrive.com/pipermail/wp-hackers/2005-April/000448.html
> 
> --
> -David House, dmhouse@gmail.com, http://xmouse.ithium.net
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
> 


-- 
--Robert Deaton
http://somethingunpredictable.com
From mikea at turbonet.com  Tue Jul  5 19:22:31 2005
From: mikea at turbonet.com (Michael D Adams)
Date: Tue Jul  5 20:27:19 2005
Subject: [wp-hackers] wp_delete_user()
In-Reply-To: <ebe43d68050705103429932bc5@mail.gmail.com>
References: <42CA7865.3020002@skippy.net>
	<56315.194.242.149.254.1120566144.squirrel@www.ftwr.co.uk>
	<42CA7C29.4080706@skippy.net>
	<7235ce780507050721699f758f@mail.gmail.com>
	<ebe43d68050705103429932bc5@mail.gmail.com>
Message-ID: <DCDB5E92-A6C3-44A8-9AFC-9589381DA562@turbonet.com>

I think Kaf put it best: http://comox.textdrive.com/pipermail/wp- 
hackers/2005-April/000471.html

There's several things a person might want to do depending on the  
circumstance:
wp_delete_user(): purge from database.
user_status = 1 (for example): everything hidden from view.   
Obviously, as of now, this has not been implemented in the core.
user_level = 0:  Demotion.  Everything still visible, but user has no  
capabilities.

Different things for different purposes.

As to Mike Little's suggestion, I don't see the need to transfer  
posts/link/etc to another user (give credit where credit is due), but  
transferring user capabilities/permissions might be useful... or it  
might not.

Michael

On Jul 5, 2005, at 10:34 AM, David House wrote:

> On 7/5/05, Mike Little <journalized@gmail.com> wrote:
>
>> Is there perhaps a need for an action hook such that I could  
>> install a
>> plugin to allow me to transfer all the users 'property' to another
>> user or the admin. Or perhaps I need to update an external LDAP
>> system.
>>
>
> If you're uncomfortable with the amount of deletion that happens when
> deleting a user, don't delete them. Simply reduce them to level 0. See
> previous discussion [1].
>
> [1]: http://comox.textdrive.com/pipermail/wp-hackers/2005-April/ 
> 000448.html
>
> -- 
> -David House, dmhouse@gmail.com, http://xmouse.ithium.net

From ryan at boren.nu  Tue Jul  5 21:06:58 2005
From: ryan at boren.nu (Ryan Boren)
Date: Tue Jul  5 21:07:05 2005
Subject: [wp-hackers] s/addslashes/$wpdb->escape/
Message-ID: <1120597618.3844.93.camel@portnoy.fuzzybelly.org>

http://trac.wordpress.org/changeset/2699

Changing over to $wpdb->escape() instead of addslashes() to prepare data
for the DB.  $wpdb->escape() now looks like this:

function escape($string) {
  if( !$this->dbh || version_compare( phpversion(), '4.3.0' ) == '-1' )
    return mysql_escape_string( $string );
  else
    return mysql_real_escape_string( $string, $this->dbh );
}

Holler if something breaks.

Ryan

From denis at semiologic.com  Tue Jul  5 21:29:26 2005
From: denis at semiologic.com (Denis de Bernardy)
Date: Tue Jul  5 21:29:41 2005
Subject: [wp-hackers] s/addslashes/$wpdb->escape/
In-Reply-To: <1120597618.3844.93.camel@portnoy.fuzzybelly.org>
Message-ID: <001d01c581a8$9ee3df70$6502a8c0@DB>

Err... if(!$this->dbh) die('sorry, no db...');

D.

> -----Original Message-----
> From: wp-hackers-bounces@lists.automattic.com 
> [mailto:wp-hackers-bounces@lists.automattic.com] On Behalf Of 
> Ryan Boren
> Sent: Tuesday, July 05, 2005 11:07 PM
> To: wp-hackers@lists.automattic.com
> Subject: [wp-hackers] s/addslashes/$wpdb->escape/
> 
> 
> http://trac.wordpress.org/changeset/2699
> 
> Changing over to $wpdb->escape() instead of addslashes() to 
> prepare data for the DB.  $wpdb->escape() now looks like this:
> 
> function escape($string) {
>   if( !$this->dbh || version_compare( phpversion(), '4.3.0' ) 
> == '-1' )
>     return mysql_escape_string( $string );
>   else
>     return mysql_real_escape_string( $string, $this->dbh );
> }
> 
> Holler if something breaks.
> 
> Ryan
> 
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com 
> http://lists.automattic.com/mailman/listinfo/wp-hackers
> 

From ryan at boren.nu  Tue Jul  5 22:27:02 2005
From: ryan at boren.nu (Ryan Boren)
Date: Tue Jul  5 22:27:13 2005
Subject: [wp-hackers] User Capabilities
In-Reply-To: <42C56271.8010105@wltc.net>
References: <1120196075.7972.0.camel@portnoy.fuzzybelly.org>
	<42C4DD1E.5080807@txfx.net>
	<1120231038.15622.19.camel@portnoy.fuzzybelly.org>
	<42C56271.8010105@wltc.net>
Message-ID: <1120602422.3844.114.camel@portnoy.fuzzybelly.org>

On Fri, 2005-07-01 at 11:34 -0400, Mark Ghosh wrote:
> Ryan Boren wrote:
> 
> >I'd prefer to get away from user levels entirely.  A user can either
> >edit other users' posts, or not.
> >
> >A more useful and understandable model would be to limit roles to
> >categories. 
> >
> 
> I have to agree. The user level system has never been quite as 
> transparent as I would have liked it (as a Wordpress user).
>  From my professional experience, a detailed user flags system with 
> flags (or bits flags) which can be modified through a user management 
> page, have worked very well.

I find most of them to be horribly complex and confusing.  Permissions
is one of the hardest concepts to expose cleanly.  Often times users are
pretty much asked to understand a Lampson matrix.  Not nice.  Matters
get especially confusing when users can inherit privileges from
groups/roles.  Now you get to worry with capability masking.

I guess we need to answer some fundamental questions.  Do we allow
editing of users and roles?  My sample implementation does not provide
for this.  Roles can be manipulated only by plugins, and users don't
have individually configurable capabilities.  Users have a role and
that's it.  The UI for this would be very simple.  Instead of giving a
user a level, you give them a role.  A dropdown will do.  If the default
roles aren't to the site administrators taste, it's plugin time.  This
hides lots of complexity.

I can see possibly providing a Role provisioning UI and saving the roles
in the DB.  I'd rather not have editing of user capabilities beyond
assigning them a role.  If you have someone who doesn't quite fit the
current roles, create a new role for them.

Ryan

From ryan at boren.nu  Tue Jul  5 22:36:27 2005
From: ryan at boren.nu (Ryan Boren)
Date: Tue Jul  5 22:36:31 2005
Subject: [wp-hackers] User Capabilities
In-Reply-To: <005701c57e71$acc3bb40$6e01a8c0@sixfour>
References: <1120196075.7972.0.camel@portnoy.fuzzybelly.org>
	<1120200095.18801.136.camel@localhost.localdomain>
	<1120230497.15622.9.camel@portnoy.fuzzybelly.org>
	<005701c57e71$acc3bb40$6e01a8c0@sixfour>
Message-ID: <1120602987.3844.125.camel@portnoy.fuzzybelly.org>

On Fri, 2005-07-01 at 15:18 -0400, David Chait wrote:
> There obviously would be a need for some plugins to possibly be 
> available/work for editors/users, while others would be reserved for pure 
> top-level Admins.  So there might need to be some other roles defined that 
> help better for plugins that say show statistics (referrers/stats), or 
> anti-spam stuff, etc.  As well as say a database backup/restore plugin.

Capabilities are easily added. We'll need to do some mulling and decide
what the default capability set should be.

> Also, can we differentiate visitor (unregistered) vs subscriber 
> (registered)?

An unregistered user won't get past the login.  I don't think we need to
worry with them.  Let's call my proposed 'visitor' role 'subscriber'
instead.  That sounds better.

Also, an 'inactive' role that has no capabilities could be used for
retired users who are no longer contributing.  This would deactivate
them without deleting them.

> And I assume admin panels would potentially then depend on what roles you 
> have?  Might need some extra roles as above to help break down what kind of 
> administrative tasks are outside the norm.

Sure. 

> There should also always be an Admin 'meta role' that doesn't need explicit 
> definition of every possible access -- rather, it should be inherently 
> all-access.  God forbid we start having plugins that create new access 
> roles, there should always be an administrator role that can access 
> everything, period. ;)

Yeah, that will need discussion, and plugins will need to show some
restraint. :-)

Ryan

> ----- Original Message ----- 
> From: "Ryan Boren" <ryan@boren.nu>
> To: <wp-hackers@lists.automattic.com>
> Sent: Friday, July 01, 2005 11:08 AM
> Subject: Re: [wp-hackers] User Capabilities
> 
> 
> > Yeah, we'll need stuff like this for backwards compat.  One specific
> > instance is plugins adding new admin menus.   They currently specify a
> > user level.  They need to specify capabilities instead.  To illustrate,
> > here's how the theme menu is currently constructed in menu.php.


From journalized at gmail.com  Tue Jul  5 23:23:43 2005
From: journalized at gmail.com (Mike Little)
Date: Tue Jul  5 23:23:51 2005
Subject: [wp-hackers] s/addslashes/$wpdb->escape/
In-Reply-To: <1120597618.3844.93.camel@portnoy.fuzzybelly.org>
References: <1120597618.3844.93.camel@portnoy.fuzzybelly.org>
Message-ID: <7235ce78050705162341d88131@mail.gmail.com>

On 05/07/05, Ryan Boren <ryan@boren.nu> wrote:
> http://trac.wordpress.org/changeset/2699
> 
> Changing over to $wpdb->escape() instead of addslashes() to prepare data
> for the DB.  $wpdb->escape() now looks like this:
> 
> function escape($string) {
>   if( !$this->dbh || version_compare( phpversion(), '4.3.0' ) == '-1' )
>     return mysql_escape_string( $string );
>   else
>     return mysql_real_escape_string( $string, $this->dbh );
> }
> 
> Holler if something breaks.
> 
> Ryan
> 

Everything!

Home page equals empty feed.
can't login
upgrade appears to do nothing (returns to same page)
dropped database - install appears to do nothing (returns to same page)

revert to 2698
drop database
install 
all ok

update to 2699
run upgrade (returns to same page)
can't login
home page is empty feed.

drop database 
still with 2699 - install
does nothing (returns to same page)
no tables created.


Mike
-- 
Mike Little
http://zed1.com/journalized/
From ryan at boren.nu  Tue Jul  5 23:48:37 2005
From: ryan at boren.nu (Ryan Boren)
Date: Tue Jul  5 23:48:42 2005
Subject: [wp-hackers] s/addslashes/$wpdb->escape/
In-Reply-To: <7235ce78050705162341d88131@mail.gmail.com>
References: <1120597618.3844.93.camel@portnoy.fuzzybelly.org>
	<7235ce78050705162341d88131@mail.gmail.com>
Message-ID: <1120607318.3844.127.camel@portnoy.fuzzybelly.org>

On Wed, 2005-07-06 at 00:23 +0100, Mike Little wrote:
> On 05/07/05, Ryan Boren <ryan@boren.nu> wrote:
> > http://trac.wordpress.org/changeset/2699
> > 
> > Changing over to $wpdb->escape() instead of addslashes() to prepare data
> > for the DB.  $wpdb->escape() now looks like this:
> > 
> > function escape($string) {
> >   if( !$this->dbh || version_compare( phpversion(), '4.3.0' ) == '-1' )
> >     return mysql_escape_string( $string );
> >   else
> >     return mysql_real_escape_string( $string, $this->dbh );
> > }
> > 
> > Holler if something breaks.
> > 
> > Ryan
> > 
> 
> Everything!
> 
> Home page equals empty feed.
> can't login
> upgrade appears to do nothing (returns to same page)
> dropped database - install appears to do nothing (returns to same page)
> 
> revert to 2698
> drop database
> install 
> all ok
> 
> update to 2699
> run upgrade (returns to same page)
> can't login
> home page is empty feed.
> 
> drop database 
> still with 2699 - install
> does nothing (returns to same page)
> no tables created.

Everything is okay here.

Maybe wpdb->escape is returning an empty string.

Ryan

From journalized at gmail.com  Wed Jul  6 00:05:28 2005
From: journalized at gmail.com (Mike Little)
Date: Wed Jul  6 00:05:37 2005
Subject: [wp-hackers] s/addslashes/$wpdb->escape/
In-Reply-To: <1120607318.3844.127.camel@portnoy.fuzzybelly.org>
References: <1120597618.3844.93.camel@portnoy.fuzzybelly.org>
	<7235ce78050705162341d88131@mail.gmail.com>
	<1120607318.3844.127.camel@portnoy.fuzzybelly.org>
Message-ID: <7235ce78050705170555c71a47@mail.gmail.com>

On 06/07/05, Ryan Boren <ryan@boren.nu> wrote:
> 
> Everything is okay here.
> 
> Maybe wpdb->escape is returning an empty string.
> 
> Ryan

I've narrowed it down to wp-settings.php

If I get everything at 2699 except wp-settings.php, everything is fine.

Apache 1.3.33
PHP Version 4.3.10-15
magic_quotes_gpc	= On
magic_quotes_runtime = Off
register_globals=On

Mike
-- 
Mike Little
http://zed1.com/journalized/
From journalized at gmail.com  Wed Jul  6 00:22:49 2005
From: journalized at gmail.com (Mike Little)
Date: Wed Jul  6 00:22:54 2005
Subject: [wp-hackers] s/addslashes/$wpdb->escape/
In-Reply-To: <7235ce78050705170555c71a47@mail.gmail.com>
References: <1120597618.3844.93.camel@portnoy.fuzzybelly.org>
	<7235ce78050705162341d88131@mail.gmail.com>
	<1120607318.3844.127.camel@portnoy.fuzzybelly.org>
	<7235ce78050705170555c71a47@mail.gmail.com>
Message-ID: <7235ce7805070517226b74a2dd@mail.gmail.com>

On 06/07/05, Mike Little <journalized@gmail.com> wrote:
> On 06/07/05, Ryan Boren <ryan@boren.nu> wrote:
> >
> > Everything is okay here.
> >
> > Maybe wpdb->escape is returning an empty string.
> >
> > Ryan
> 
> I've narrowed it down to wp-settings.php
> 
> If I get everything at 2699 except wp-settings.php, everything is fine.
> 

if ( get_magic_quotes_gpc() ) {
	$_GET    = stripslashes($_GET   );
	$_POST   = stripslashes($_POST  );
	$_COOKIE = stripslashes($_COOKIE);
	$_SERVER = stripslashes($_SERVER);
}

stripslashes doesn't work on arrays [1]. 

I threw in the stripslashes_deep() from the documentation[1] and it fixed it.

Mike
-- 
Mike Little
http://zed1.com/journalized/

[1] http://uk2.php.net/stripslashes
From ryan at boren.nu  Wed Jul  6 01:14:04 2005
From: ryan at boren.nu (Ryan Boren)
Date: Wed Jul  6 01:14:18 2005
Subject: [wp-hackers] s/addslashes/$wpdb->escape/
In-Reply-To: <7235ce7805070517226b74a2dd@mail.gmail.com>
References: <1120597618.3844.93.camel@portnoy.fuzzybelly.org>
	<7235ce78050705162341d88131@mail.gmail.com>
	<1120607318.3844.127.camel@portnoy.fuzzybelly.org>
	<7235ce78050705170555c71a47@mail.gmail.com>
	<7235ce7805070517226b74a2dd@mail.gmail.com>
Message-ID: <1120612444.3844.129.camel@portnoy.fuzzybelly.org>

On Wed, 2005-07-06 at 01:22 +0100, Mike Little wrote:
> On 06/07/05, Mike Little <journalized@gmail.com> wrote:
> > On 06/07/05, Ryan Boren <ryan@boren.nu> wrote:
> > >
> > > Everything is okay here.
> > >
> > > Maybe wpdb->escape is returning an empty string.
> > >
> > > Ryan
> > 
> > I've narrowed it down to wp-settings.php
> > 
> > If I get everything at 2699 except wp-settings.php, everything is fine.
> > 
> 
> if ( get_magic_quotes_gpc() ) {
> 	$_GET    = stripslashes($_GET   );
> 	$_POST   = stripslashes($_POST  );
> 	$_COOKIE = stripslashes($_COOKIE);
> 	$_SERVER = stripslashes($_SERVER);
> }
> 
> stripslashes doesn't work on arrays [1]. 
> 
> I threw in the stripslashes_deep() from the documentation[1] and it fixed it.

Doh.  Thanks.

http://trac.wordpress.org/changeset/2700

Ryan

From mark.wordpress at txfx.net  Wed Jul  6 05:50:01 2005
From: mark.wordpress at txfx.net (Mark Jaquith)
Date: Wed Jul  6 05:50:08 2005
Subject: [wp-hackers] post processing weirdness
In-Reply-To: <20050628013141.GC19016@dulcinea.dwc.homedns.org>
References: <42BD7696.3040803@skippy.net>
	<42BD77EA.7080201@skippy.net>	<1119719191.6FB7EF7@bf11.dngr.org>	<42BDA99E.8050803@skippy.net>
	<42BDB274.4080402@skippy.net>	<42BDC326.7050602@skippy.net>	<1119737940.6143.1.camel@portnoy.fuzzybelly.org>	<42BDF241.9090705@skippy.net>
	<42BF15B7.4060507@txfx.net>
	<20050628013141.GC19016@dulcinea.dwc.homedns.org>
Message-ID: <42CB7109.4040701@txfx.net>

Daniel, could you please post that patch to this list?  It's 404 for 
me.  WP 1.6 is quite a ways from being usable, and this bug is driving 
me crazy.

- Mark Jaquith

P.S. Go Gators!

Daniel Westermann-Clark wrote:

>>Drafts should not have permalinks.  First, they're drafts, so
>>there's nothing "perma" about them, just on a conceptual level.
>>    
>>
>
>I agree.  There's some funny logic in get_permalinks, which is the
>cause of crufty URLs on posts which were originally saved as drafts.
>
>  
>
>>What should happen, though, is that the permalink is created before
>>the publish_post action goes out.  This is not always the case, and
>>that's a bug.
>>    
>>
>
>This appears to be simply a problem with the 'editpost' branch in
>wp-admin/post.php, which is missing the appropriate SQL.
>
>Patch against 1.5.1.2 (sorry, I'm not brave enough to run current SVN)
>at:
>
>http://dev.webadmin.ufl.edu/~dwc/tmp/permalinks-1.5.1.2.patch
>
>I'm not going to claim that's the "best" way to accomplish things, but
>it works in my tests.
>
>  
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://comox.textdrive.com/pipermail/wp-hackers/attachments/20050706/40cdc63a/attachment-0001.html
From davebytes at comcast.net  Wed Jul  6 06:03:49 2005
From: davebytes at comcast.net (David Chait)
Date: Wed Jul  6 06:03:55 2005
Subject: [wp-hackers] XML-RPC Exploit?
References: <20050705020603.salgkm6ywwg8w8kw@banana.catalyst2.com>	<1120526144.3844.85.camel@portnoy.fuzzybelly.org>	<42C9FB3B.7050901@skippy.net><20050705062738.j5f01bscv9sc0oog@banana.catalyst2.com>
	<42CA6411.2060409@skippy.net>
Message-ID: <018901c581f0$7ae158d0$6e01a8c0@sixfour>

Hey, a quick aside -- for users running OLD versions of WP (1.0, 1.2), is 
the xmlrpc.php a drop-in replacement, obviously with caveats related to 
updated fields in the database/table?  (I assume not necessarily, especially 
bc of changed tables, but worth asking...)

And, for all versions, if only using the built-in admin screens and not 
third party composition apps, can xmlrpc.php be deleted?  (I looked in the 
codex, didn't find a quick answer... I assume so, but prefer to not assume!)

Thanks, -d 

From r at schestowitz.com  Wed Jul  6 06:42:25 2005
From: r at schestowitz.com (Roy Schestowitz)
Date: Wed Jul  6 06:42:33 2005
Subject: [wp-hackers] XML-RPC Exploit?
In-Reply-To: <018901c581f0$7ae158d0$6e01a8c0@sixfour>
References: <20050705020603.salgkm6ywwg8w8kw@banana.catalyst2.com>
	<1120526144.3844.85.camel@portnoy.fuzzybelly.org>
	<42C9FB3B.7050901@skippy.net><20050705062738.j5f01bscv9sc0oog@banana.catalyst2.com>
	<42CA6411.2060409@skippy.net> <018901c581f0$7ae158d0$6e01a8c0@sixfour>
Message-ID: <20050706074225.ggoxexgk522o448g@banana.catalyst2.com>

Quoting David Chait <davebytes@comcast.net>:

> Hey, a quick aside -- for users running OLD versions of WP (1.0, 1.2), is
> the xmlrpc.php a drop-in replacement, obviously with caveats related to
> updated fields in the database/table?  (I assume not necessarily, especially
> bc of changed tables, but worth asking...)
>
> And, for all versions, if only using the built-in admin screens and not
> third party composition apps, can xmlrpc.php be deleted?  (I looked in the
> codex, didn't find a quick answer... I assume so, but prefer to not assume!)
>
> Thanks, -d

I still run a modified version of WordPress 1.2.1 on two domains and I 
noticed a
question similar to yours asked in the forums, never to get a reply, yet.

There are two files I can identify as the roots of XML-RPC:

* wp-includes/class-xmlrpc.php
* wp-includes/class-xmlrpcs.php

the latter appears to be Matt's complement to the first. I chose to do the
following:

chmod 0 wp-includes/class-xmlrpc.php wp-includes/class-xmlrpcs.php

Then, to avoid PHP warnings in your error logs, remember to disable Pingomatic
(you can still ping manually as it's painless):

Admin Panel -> Options -> Writing, then empty the 'Update Services' field.

I don't think you have an alternative as 1.2 (or earlier) is no longer
maintained. Whether the functions are flawed or not I don't know, but it's a
possible 'weapon' on the server, which I am scared of. I recently advised my
Web host to sniff around for unprotected WP 1.5 installations.

Roy

-- 
Roy S. Schestowitz
http://Schestowitz.com

From mikea at turbonet.com  Wed Jul  6 07:06:24 2005
From: mikea at turbonet.com (Michael D Adams)
Date: Wed Jul  6 07:05:23 2005
Subject: [wp-hackers] XML-RPC Exploit?
In-Reply-To: <018901c581f0$7ae158d0$6e01a8c0@sixfour>
References: <20050705020603.salgkm6ywwg8w8kw@banana.catalyst2.com>	<1120526144.3844.85.camel@portnoy.fuzzybelly.org>	<42C9FB3B.7050901@skippy.net><20050705062738.j5f01bscv9sc0oog@banana.catalyst2.com>
	<42CA6411.2060409@skippy.net>
	<018901c581f0$7ae158d0$6e01a8c0@sixfour>
Message-ID: <58DEF8D0-43C7-46DA-9D56-500D2A2E32CE@turbonet.com>

On Jul 5, 2005, at 11:03 PM, David Chait wrote:
> And, for all versions, if only using the built-in admin screens and  
> not third party composition apps, can xmlrpc.php be deleted?  (I  
> looked in the codex, didn't find a quick answer... I assume so, but  
> prefer to not assume!)

xmlrpc.php is used in pingback receiving.
Michael

From pete.prodoehl at cygnusinteractive.com  Wed Jul  6 13:44:31 2005
From: pete.prodoehl at cygnusinteractive.com (Pete Prodoehl)
Date: Wed Jul  6 13:44:39 2005
Subject: [wp-hackers] XML-RPC Exploit?
In-Reply-To: <58DEF8D0-43C7-46DA-9D56-500D2A2E32CE@turbonet.com>
References: <20050705020603.salgkm6ywwg8w8kw@banana.catalyst2.com>	<1120526144.3844.85.camel@portnoy.fuzzybelly.org>	<42C9FB3B.7050901@skippy.net><20050705062738.j5f01bscv9sc0oog@banana.catalyst2.com>	<42CA6411.2060409@skippy.net>	<018901c581f0$7ae158d0$6e01a8c0@sixfour>
	<58DEF8D0-43C7-46DA-9D56-500D2A2E32CE@turbonet.com>
Message-ID: <42CBE03F.2020908@cygnusinteractive.com>

Michael D Adams wrote:
> On Jul 5, 2005, at 11:03 PM, David Chait wrote:
> 
>> And, for all versions, if only using the built-in admin screens and  
>> not third party composition apps, can xmlrpc.php be deleted?  (I  
>> looked in the codex, didn't find a quick answer... I assume so, but  
>> prefer to not assume!)
> 
> 
> xmlrpc.php is used in pingback receiving.

So if you do not allow pingbacks, it's safe to delete it?

(Does it also handle trackbacks?)

Pete
From daniel at acceleration.net  Wed Jul  6 13:48:09 2005
From: daniel at acceleration.net (Daniel Westermann-Clark)
Date: Wed Jul  6 13:48:28 2005
Subject: [wp-hackers] post processing weirdness
In-Reply-To: <42CB7109.4040701@txfx.net>
References: <42BD77EA.7080201@skippy.net> <1119719191.6FB7EF7@bf11.dngr.org>
	<42BDA99E.8050803@skippy.net> <42BDB274.4080402@skippy.net>
	<42BDC326.7050602@skippy.net>
	<1119737940.6143.1.camel@portnoy.fuzzybelly.org>
	<42BDF241.9090705@skippy.net> <42BF15B7.4060507@txfx.net>
	<20050628013141.GC19016@dulcinea.dwc.homedns.org>
	<42CB7109.4040701@txfx.net>
Message-ID: <20050706134809.GI29555@dulcinea.dwc.homedns.org>

On 2005-07-06 01:50:01 -0400, Mark Jaquith wrote:
> Daniel, could you please post that patch to this list?  It's 404 for
> me.  WP 1.6 is quite a ways from being usable, and this bug is
> driving me crazy.

Oops.  Here's the patch.

To get a cruft-free permalink, the patch removes the current post from
the cache before setting the permalink.  Posts which move from draft
to publish status were cached as being in draft status when
get_permalink was called.

I realize it sets the permalink twice the 'post' action; previously I
had removed the first call but noticed that previews of posts in draft
status were broken (specifically the link in the title).

-- 
Daniel Westermann-Clark
-------------- next part --------------
Index: wp-admin/post.php
===================================================================
--- wp-admin/post.php	(revision 2700)
+++ wp-admin/post.php	(working copy)
@@ -188,11 +188,19 @@
 
 	add_meta($post_ID);
 
+	// Set the permalink regardless of post status so drafts have a valid link in the preview
 	$wpdb->query("UPDATE $wpdb->posts SET guid = '" . get_permalink($post_ID) . "' WHERE ID = '$post_ID'");
 
 	do_action('save_post', $post_ID);
 
 	if ('publish' == $post_status) {
+		// Bust the post cache to make sure permalinks work
+		global $post_cache;
+		if (isset($post_cache[$post_ID]))
+			unset($post_cache[$post_ID]);
+
+		$wpdb->query("UPDATE $wpdb->posts SET guid = '" . get_permalink($post_ID) . "' WHERE ID = '$post_ID'");
+
 		do_action('publish_post', $post_ID);
 		if ($post_pingback)
 			pingback($content, $post_ID);
@@ -433,6 +441,13 @@
 	do_action('edit_post', $post_ID);
 
 	if ($post_status == 'publish') {
+		// Bust the post cache to make sure permalinks work
+		global $post_cache;
+		if (isset($post_cache[$post_ID]))
+			unset($post_cache[$post_ID]);
+
+		$wpdb->query("UPDATE $wpdb->posts SET guid = '" . get_permalink($post_ID) . "' WHERE ID = '$post_ID'");
+
 		do_action('publish_post', $post_ID);
 		do_trackbacks($post_ID);
 		do_enclose( $content, $post_ID );
From denis at semiologic.com  Wed Jul  6 14:00:52 2005
From: denis at semiologic.com (Denis de Bernardy)
Date: Wed Jul  6 14:01:14 2005
Subject: [wp-hackers] XML-RPC Exploit?
In-Reply-To: <42CBE03F.2020908@cygnusinteractive.com>
Message-ID: <000601c58233$20768b70$6702a8c0@DB>

> So if you do not allow pingbacks, it's safe to delete it?
> 

Then you _should_ delete it, because 1.5.1.3 introduces a bug whereby
pingbacks will get inserted in your site even as you do not allow them.

> (Does it also handle trackbacks?)
> 

Nope

D.

From dougal at gunters.org  Wed Jul  6 14:03:45 2005
From: dougal at gunters.org (Dougal Campbell)
Date: Wed Jul  6 14:04:18 2005
Subject: [wp-hackers] XML-RPC Exploit?
In-Reply-To: <018901c581f0$7ae158d0$6e01a8c0@sixfour>
References: <20050705020603.salgkm6ywwg8w8kw@banana.catalyst2.com>	<1120526144.3844.85.camel@portnoy.fuzzybelly.org>	<42C9FB3B.7050901@skippy.net><20050705062738.j5f01bscv9sc0oog@banana.catalyst2.com>	<42CA6411.2060409@skippy.net>
	<018901c581f0$7ae158d0$6e01a8c0@sixfour>
Message-ID: <42CBE4C1.2080604@gunters.org>

David Chait wrote:
> Hey, a quick aside -- for users running OLD versions of WP (1.0, 1.2), 
> is the xmlrpc.php a drop-in replacement, obviously with caveats related 
> to updated fields in the database/table?  (I assume not necessarily, 
> especially bc of changed tables, but worth asking...)

I don't know for sure, but I doubt that it would work unaltered. I think 
that between 1.2 and 1.5, several functions related to xmlrpc.php were 
moved/modified. Plus we switched from the Useful, Inc. xmlrpc libraries 
to Simon Wilison's IXR library (which should be pretty transparent as 
far as the WP API goes, but...)

> And, for all versions, if only using the built-in admin screens and not 
> third party composition apps, can xmlrpc.php be deleted?  (I looked in 
> the codex, didn't find a quick answer... I assume so, but prefer to not 
> assume!)

As long as you don't need incoming or outgoing pingbacks, and if you use 
the web interface for managing your content, then you can safely delete 
xmlrpc.php and the associated libraries (class-xmlrpc.php and 
class-xmlrpcs.php in pre-1.5 versions, class-IXR.php in ver 1.5+). You 
probably just need to make sure that you disable the ping-related 
options in admin.

-- 
Dougal Campbell <dougal@gunters.org>
http://dougal.gunters.org/

From lorelle at cameraontheroad.com  Wed Jul  6 15:59:56 2005
From: lorelle at cameraontheroad.com (Lorelle VanFossen)
Date: Wed Jul  6 16:00:10 2005
Subject: [wp-hackers] Articles for Review
Message-ID: <42CBFFFC.8050008@cameraontheroad.com>

We are down to only a few articles from the Codex Cleanup Week that are 
finally ready for review. These are fairly technical so they need some 
expert attention.

http://codex.wordpress.org/UNIX_Shell_Skills
http://codex.wordpress.org/User:Lorelle/Test_Driving_WordPress
http://codex.wordpress.org/Hardening_WordPress

We are also currently missing an article at 
http://codex.wordpress.org/index.php?title=Database_Reference&action=edit
If you know the person writing the article or have something in mind, we 
need to have something of value on this page link from the Developer 
Documentation Table of Contents page. It's been there as a blank 
document for MONTHS. If we know the intent of such a document, then we 
can put it on the task list.

Thanks,

Lorelle
From mhancock at us.net  Wed Jul  6 16:12:20 2005
From: mhancock at us.net (Michael E. Hancock)
Date: Wed Jul  6 16:12:30 2005
Subject: [wp-hackers] User Capabilities
References: <1120196075.7972.0.camel@portnoy.fuzzybelly.org><42C4DD1E.5080807@txfx.net><1120231038.15622.19.camel@portnoy.fuzzybelly.org><42C56271.8010105@wltc.net>
	<1120602422.3844.114.camel@portnoy.fuzzybelly.org>
Message-ID: <012601c58245$7d2de040$6402a8c0@DELL8600>

From: "Ryan Boren" <ryan@boren.nu>
Sent: Tuesday, July 05, 2005 6:27 PM
> I guess we need to answer some fundamental questions.  Do we allow
> editing of users and roles?  My sample implementation does not provide
> for this.  Roles can be manipulated only by plugins, and users don't
> have individually configurable capabilities.  Users have a role and
> that's it.  The UI for this would be very simple.  Instead of giving a
> user a level, you give them a role.  A dropdown will do.  If the default
> roles aren't to the site administrators taste, it's plugin time.  This
> hides lots of complexity.
>
> I can see possibly providing a Role provisioning UI and saving the roles
> in the DB.  I'd rather not have editing of user capabilities beyond
> assigning them a role.  If you have someone who doesn't quite fit the
> current roles, create a new role for them.

Expanding on the capability/role model described by Mr. Boren, couldn't the
use of database tables support both capabilities and roles?

This could be done with two new tables and an additional field in wp_users
called 'role'.

A table called "wp_capabilities" could define all the possible user
capabilities in WordPress such as edit_posts, publish_posts, edit_themes,
manage_links, edit_users, edit_profile, and login.  The table could contain
the 'standard' set of capabilities defined by the developers.  Additional
capabilities could be defined by plugin authors.

A second table called "wp_roles" could detail each and every role and the
various capabilities allowed to that role.  Any number of roles could be
included in the standard WordPress distribution, but users and plugin
authors could also define any roles they needed.  Roles could also be used
to restrict users to a given Category (or Categories).

The administrator role would always possess all capabilities; the inactive
role would possess no capabilities.  Theoretically, these two roles would be
unchangeable.

An Options field could be created that defined the 'default'
newly-registered-user Role (currently Level 0 in 1.5)

Table details and sample data:

Table: "wp_capabilities"
Field1: capability_id
Field2: capability (unique)
Field3: capability_parent (not to sure why this field but it feels right)

Sample data for "wp_capabilities"
0,"edit_posts",""
1,"publish_posts",""
2,"edit_themes",""
3,"manage_links",""
4,"edit_users",""
5,"edit_profile",""
6,"login",""
7,"inactive",""
8,"democracy_ajax_create_poll",""  (example of what plugin author could add)
9,"democracy_ajax_delete_poll",""  (example of what plugin author could add)

Table: "wp_roles"
Field1: role_id
Field2: role
Field3: role_description
Field4: capability (or capability id)
Field5: cat_id

Sample data for "wp_roles"
0,"administrator","WordPress Administrator","edit_posts",""
1,"administrator","WordPress Administrator","publish_posts",""
2,"administrator","WordPress Administrator","edit_themes",""
3,"administrator","WordPress Administrator","manage_links",""
4,"administrator","WordPress Administrator","edit_users",""
5,"administrator","WordPress Administrator","edit_profile",""
6,"administrator","WordPress Administrator","login",""
7,"inactive","Inactive user","inactive",""
8,"writer","Can edit and publish","edit_posts",""
9,"writer","Can edit and publish","publish_posts",""
10,"writer","Can edit and publish","edit_profile",""
11,"writer","Can edit and publish","login",""
12,"political_writer","Edit/publish in Category 2","edit_posts","2"
13,"political_writer","Edit/publish in Category 2","publish_posts","2"
14,"political_writer","Edit/publish in Category 2","edit_profile",""
15,"political_writer","Edit/publish in Category 2","login",""
16,"level0","Backward capability for v1.5 Level 0","login",""
17,"level0","Backward capability for v1.5 Level 0","edit_profile",""
18,"Democracy Ajax Poll Administrator","democracy_ajax_create_poll",""
19,"Democracy Ajax Poll Administrator","democracy_ajax_delete_poll",""
20,"Democracy Ajax Poll Administrator","edit_profile",""
21,"Democracy Ajax Poll Administrator","login",""
22,"Democracy Ajax Poll Creator","democracy_ajax_create_poll",""
23,"Democracy Ajax Poll Creator","login",""

Of course, this is all so easy for me to say--I don't know beans about
implementing the code for this ;)

Thanks for taking the time to read this.

Michael E. Hancock
mhancock@us.net

From ringmaster at midnightcircus.com  Wed Jul  6 16:43:52 2005
From: ringmaster at midnightcircus.com (Owen Winkler)
Date: Wed Jul  6 16:40:02 2005
Subject: [wp-hackers] User Capabilities
In-Reply-To: <012601c58245$7d2de040$6402a8c0@DELL8600>
References: <1120196075.7972.0.camel@portnoy.fuzzybelly.org><42C4DD1E.5080807@txfx.net><1120231038.15622.19.camel@portnoy.fuzzybelly.org><42C56271.8010105@wltc.net>	<1120602422.3844.114.camel@portnoy.fuzzybelly.org>
	<012601c58245$7d2de040$6402a8c0@DELL8600>
Message-ID: <42CC0A48.8080905@midnightcircus.com>

Michael E. Hancock wrote:
> Expanding on the capability/role model described by Mr. Boren, couldn't the
> use of database tables support both capabilities and roles?
> 
> This could be done with two new tables and an additional field in wp_users
> called 'role'.

Alternatively, you could store an array of role definitions in the 
options table, and store an array of roles as a usermeta record.

For example, a record in options with the key "user_roles" could store 
this structure:

array(
	'admin'=>array(
		'create_posts',
		'edit_posts',
		'edit_users',
		'etc.',
	),
	'editor'=>array(
		'create_posts',
		'edit_posts',
		'etc.',
	),
	// etc.
);

In the usermeta table, a single core-defined permission entry would 
contain an array of permissions and roles for each user:

array(
	'editor',
	'edit_users',
);

An array entry that matches the name of a role causes WordPress to 
recursively pull the permissions for that role from its entry in the 
options table.  This system would allow the system to supply both 
numeric-level roles that are parallel to 1.5 and name-based roles for 
future use.

Using this recursive role method, one could define complicated 
heirarchical roles that are transparent to the user without adding 
special parent fields by using this as the roles definition:

array(
	'admin'=>array(
		'editor',
		'edit_users',
	),
	'editor'=>array(
		'create_posts',
		'edit_posts',
		'etc.',
	),
);

(Prevent endless self-referential recursion by keeping the role names in 
the user's permissions list as it's built, and only add permissions from 
a new role if the role isn't already in the permission list.  Maybe 
prefix role names in the permission list with a special character to 
make detection easier?)

There would be no interface to edit this data in the core beyond 
defining a single role for a single user.  A more complete user 
permissions plugin could allow admins to define multiple roles and 
permissions for a single user and/or alter roles and their permissions 
directly.

The nice thing about this system is that it doesn't require additional 
tables, it allows for future use of core-based per-user permissions, 
provides for heirarchical roles in more complicated custom permission 
schemes, and I think it hits all of the requirements we've discussed 
previously.

Owen

From p.a.r.a.s.e.w at gmx.net  Thu Jul  7 12:16:50 2005
From: p.a.r.a.s.e.w at gmx.net (Matthias Tarasiewicz)
Date: Thu Jul  7 12:16:05 2005
Subject: [wp-hackers] the future of wordpress: objects and media data?
Message-ID: <9F28753A-002B-49DD-A127-AF38BA54752F@gmx.net>

i started a thread in the wordpress support forum, where podz told me  
to join the wp-hackers list and discuss it there (that's exactly what  
i am doing right now)
the thread is here: http://wordpress.org/support/topic/38501

i am reposting my questions again here - i am wondering how far is  
the integration of media content and what is planned as final for the  
1.6 release?

greetings,
matthias tarasiewicz

i started a thread in the wordpress support forum, where podz told me  
to join the wp-hackers list and discuss it there (that's exactly what  
i am doing right now)
the thread is here: http://wordpress.org/support/topic/38501

i am reposting my questions again here - i am wondering how far is  
the integration of media content and what is planned as final for the  
1.6 release?

greetings,
matthias tarasiewicz

i was watching several blogging frameworks, including movabletype and  
typepad, trying to find the best that suited my needs. wordpress is  
for me the weapon of choice now, >although i am still missing some  
important features.
i think the main problem of wordpress, or better to say a needed  
feature would be to include some better way to deal with media  
contents, such as in manila or other big systems. photoblogs are  
gaining more and more popularity, but the main problem is, that  
wordpress at its current state does not link media content to posts.  
this could be achieved in 2 ways:

1. create a unique name for objects that are uploaded, that could be  
referred to via some sort of template-syntax: if i upload the picture  
test.jpg for example, name it "test", i should be able to include it  
into any post with some sort of syntax: e.g.((test))

2. make post-permalink-names folders in the system and put all the  
pics and media content inside. with this feature it would also be  
possible to get dynamically all the pics for example, to build a  
picturemap. in the current wordpress 1.5, there is no logical  
connection between media content and posts.

another way to go could be with relations in the database and the  
first point i mentioned above, the objects. in the admin, users could  
define which media is related to which post.

is there anything like this planned for upcoming worpress releases?
From p.a.r.a.s.e.w at gmx.net  Thu Jul  7 12:19:43 2005
From: p.a.r.a.s.e.w at gmx.net (Matthias Tarasiewicz)
Date: Thu Jul  7 12:18:58 2005
Subject: [wp-hackers] plugins should have uninstallers?
Message-ID: <1FC21090-6CD4-4291-B350-299F1BBB9F75@gmx.net>

when installing and testing several plugins for wordpress, after  
deactivating i still found tons of code and pieces left from the  
plugin installers. are there any ideas of creating an uninstall- 
guideline or uninstall-framework for plugin developers?
the next step would be to then create install/uninstall buttons in  
the admin-panel of the plugins.
is anything like this planned for future releases?

best,
parasew
From skippy at skippy.net  Thu Jul  7 12:21:12 2005
From: skippy at skippy.net (Scott Merrill)
Date: Thu Jul  7 12:21:16 2005
Subject: [wp-hackers] plugins should have uninstallers?
In-Reply-To: <1FC21090-6CD4-4291-B350-299F1BBB9F75@gmx.net>
References: <1FC21090-6CD4-4291-B350-299F1BBB9F75@gmx.net>
Message-ID: <42CD1E38.4080203@skippy.net>

Matthias Tarasiewicz wrote:
> when installing and testing several plugins for wordpress, after 
> deactivating i still found tons of code and pieces left from the  plugin
> installers. are there any ideas of creating an uninstall- guideline or
> uninstall-framework for plugin developers?
> the next step would be to then create install/uninstall buttons in  the
> admin-panel of the plugins.
> is anything like this planned for future releases?

We've discussed this just recently.  Follow this thread:
http://comox.textdrive.com/pipermail/wp-hackers/2005-July/001753.html

-- 
skippy@skippy.net | http://skippy.net/

gpg --keyserver pgp.mit.edu --recv-keys 9CFA4B35
506C F8BB 17AE 8A05 0B49  3544 476A 7DEC 9CFA 4B35
From ml_wordpress at copperleaf.org  Thu Jul  7 12:28:01 2005
From: ml_wordpress at copperleaf.org (Bill Smith)
Date: Thu Jul  7 12:28:59 2005
Subject: [wp-hackers] Plugin Activation Check
Message-ID: <42CD1FD1.6020800@copperleaf.org>

I have a plugin that is dependent on another plugin. Is there a straight 
forward way to check to see if a plugin is installed and active?

Bill
From skippy at skippy.net  Thu Jul  7 12:30:18 2005
From: skippy at skippy.net (Scott Merrill)
Date: Thu Jul  7 12:30:19 2005
Subject: [wp-hackers] Plugin Activation Check
In-Reply-To: <42CD1FD1.6020800@copperleaf.org>
References: <42CD1FD1.6020800@copperleaf.org>
Message-ID: <42CD205A.3000100@skippy.net>

Bill Smith wrote:
> I have a plugin that is dependent on another plugin. Is there a straight
> forward way to check to see if a plugin is installed and active?

The most basic method is for plugin B to perform:
if (! function_exists('plugin_A_function')) {
   return;
}

-- 
skippy@skippy.net | http://skippy.net/

gpg --keyserver pgp.mit.edu --recv-keys 9CFA4B35
506C F8BB 17AE 8A05 0B49  3544 476A 7DEC 9CFA 4B35
From mark.wordpress at txfx.net  Thu Jul  7 20:04:32 2005
From: mark.wordpress at txfx.net (Mark Jaquith)
Date: Thu Jul  7 20:04:34 2005
Subject: [wp-hackers] Plugin Activation Check
In-Reply-To: <42CD205A.3000100@skippy.net>
References: <42CD1FD1.6020800@copperleaf.org> <42CD205A.3000100@skippy.net>
Message-ID: <42CD8AD0.3010103@txfx.net>

Scott Merrill wrote:

>Bill Smith wrote:
>  
>
>>I have a plugin that is dependent on another plugin. Is there a straight
>>forward way to check to see if a plugin is installed and active?
>>    
>>
>
>The most basic method is for plugin B to perform:
>if (! function_exists('plugin_A_function')) {
>   return;
>}
>
>  
>
You can even get fancy with file_exists() and require_once() to find out 
if it is installed and require_once() it if it is.  Sometimes it's 
installed and active, but the plugins aren't loading in the order you'd 
like.  This will change that.

Be aware, though, that it's best not to run code as the plugin is 
included.  It's much better to create functions or classes and to 
include a "hook" to the "init" or "plugins_loaded" actions.  That way, 
all plugins that are active will have declared all their functions and 
you won't have to worry about loading order.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://comox.textdrive.com/pipermail/wp-hackers/attachments/20050707/54235be0/attachment.html
From skeltoac at hotmail.com  Thu Jul  7 20:48:41 2005
From: skeltoac at hotmail.com (Andy Skelton)
Date: Thu Jul  7 20:48:46 2005
Subject: [wp-hackers] Plugin Activation Check
In-Reply-To: <42CD8AD0.3010103@txfx.net>
Message-ID: <BAY108-F41E93FE148B25B5760DF53C7D80@phx.gbl>

>From: Mark Jaquith <mark.wordpress@txfx.net>
>Be aware, though, that it's best not to run code as the plugin is
>included.  It's much better to create functions or classes and to include a 
>"hook" to the "init" or "plugins_loaded" actions.  That way, all plugins 
>that are active will have declared all their functions and you won't have 
>to worry about loading order.

Mark, this is the umpteenth time I've seen a thread like this but the first 
time I've read the concise and valuable advice you give here. Would you care 
to Wikify it for up-and-coming plugin authors?

/me kicks himself hard

Andy

_________________________________________________________________
Dont just search. Find. Check out the new MSN Search! 
http://search.msn.click-url.com/go/onm00200636ave/direct/01/

From hendry at iki.fi  Fri Jul  8 00:29:05 2005
From: hendry at iki.fi (Kai Hendry)
Date: Fri Jul  8 00:29:32 2005
Subject: [wp-hackers] s/categories/tags
Message-ID: <20050708002903.GD17063@iki.fi>

Regarding the categories overhaul. Am I correct to consider categories
as tags? It would make things a little bit more consistent.

http://codex.wordpress.org/index.php?title=Special:Userlogin&action=submitlogin
Shouldn't my wordpress.org user/pass work here?

Is there a search for the archives?
http://comox.textdrive.com/pipermail/wp-hackers/

I think I like trac (timeline esp.) but the (bug) search sucks there
too.

Best wishes,
From jeff at jrm.cc  Fri Jul  8 00:36:55 2005
From: jeff at jrm.cc (Jeff Minard)
Date: Fri Jul  8 00:36:59 2005
Subject: [wp-hackers] s/categories/tags
In-Reply-To: <20050708002903.GD17063@iki.fi>
References: <20050708002903.GD17063@iki.fi>
Message-ID: <42CDCAA7.7010000@jrm.cc>

Kai Hendry wrote:
> Regarding the categories overhaul. Am I correct to consider categories
> as tags? It would make things a little bit more consistent.

I don't think so. Tags don't have a hierarchy like parents/siblings like 
categories do.

Jeff
From hendry at iki.fi  Fri Jul  8 02:27:29 2005
From: hendry at iki.fi (Kai Hendry)
Date: Fri Jul  8 02:27:55 2005
Subject: [wp-hackers] Debian: wordpress does not see mysql
Message-ID: <20050708022728.GH17063@iki.fi>

Some users experienced a problem here:
http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=312721

I applied the patch though this problem does not bother me. Any ideas?

Will you apply it upstream?
From false.hopes at gmail.com  Fri Jul  8 02:40:50 2005
From: false.hopes at gmail.com (Robert Deaton)
Date: Fri Jul  8 02:41:00 2005
Subject: [wp-hackers] Debian: wordpress does not see mysql
In-Reply-To: <20050708022728.GH17063@iki.fi>
References: <20050708022728.GH17063@iki.fi>
Message-ID: <a491f91d05070719405621c3ea@mail.gmail.com>

http://comox.textdrive.com/pipermail/wp-hackers/2005-April/000822.html
Matt forwarded something similar to this list before, but never committed 
any changes, and I really don't know why..

On 7/7/05, Kai Hendry <hendry@iki.fi> wrote:
> 
> Some users experienced a problem here:
> http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=312721
> 
> I applied the patch though this problem does not bother me. Any ideas?
> 
> Will you apply it upstream?
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
> 



-- 
--Robert Deaton
http://somethingunpredictable.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://comox.textdrive.com/pipermail/wp-hackers/attachments/20050708/e7bacd49/attachment-0001.html
From hendry at iki.fi  Fri Jul  8 04:42:53 2005
From: hendry at iki.fi (Kai Hendry)
Date: Fri Jul  8 04:43:17 2005
Subject: [wp-hackers] s/categories/tags
In-Reply-To: <42CDCAA7.7010000@jrm.cc>
References: <20050708002903.GD17063@iki.fi> <42CDCAA7.7010000@jrm.cc>
Message-ID: <20050708044252.GL17063@iki.fi>

On Thu, Jul 07, 2005 at 05:36:55PM -0700, Jeff Minard wrote:
> Kai Hendry wrote:
> >Regarding the categories overhaul. Am I correct to consider categories
> >as tags? It would make things a little bit more consistent.
> I don't think so. Tags don't have a hierarchy like parents/siblings like 
> categories do.

That's true, but tags are easy. Managing a hierarchy isn't. 

So if I want to tag a post with say some tags like "russian" "food" do I
have to create two categories or some sort of hierarchy? It's a pain
right now to do it either way.

Or is there some "plugin" for quickly creating "tag" metadata for a
post I should know about.
From jeff at jrm.cc  Fri Jul  8 04:58:15 2005
From: jeff at jrm.cc (Jeff Minard)
Date: Fri Jul  8 04:58:23 2005
Subject: [wp-hackers] s/categories/tags
In-Reply-To: <20050708044252.GL17063@iki.fi>
References: <20050708002903.GD17063@iki.fi> <42CDCAA7.7010000@jrm.cc>
	<20050708044252.GL17063@iki.fi>
Message-ID: <42CE07E7.5020403@jrm.cc>

Kai Hendry wrote:
> Or is there some "plugin" for quickly creating "tag" metadata for a
> post I should know about.

In fact, there is:

  - http://www.agkamai.com/archives/538/modified-cat2tag/

I know because I worked on it. Additionally, the plugin is set up so 
that it "hides" categories, but the "tags" are actually just categories 
in a clever guise. If that's not clear, try the plugin and then 
deactivate and see what happens.

Jeff
From jeff at jrm.cc  Fri Jul  8 05:13:42 2005
From: jeff at jrm.cc (Jeff Minard)
Date: Fri Jul  8 05:13:47 2005
Subject: [wp-hackers] s/categories/tags
In-Reply-To: <20050708044252.GL17063@iki.fi>
References: <20050708002903.GD17063@iki.fi> <42CDCAA7.7010000@jrm.cc>
	<20050708044252.GL17063@iki.fi>
Message-ID: <42CE0B86.6010503@jrm.cc>

Kai Hendry wrote:
> That's true, but tags are easy. Managing a hierarchy isn't. 

Correction, tags are easIER -- because they are simpler. However, a 
hierarchy is much more flexible and can accomodate much more 
functionality. Without heirarchy, I would have had to go to much more 
trouble make my site which is divided into many sections, each with 
different sub-categories, and each one unique to its parent category. 
Tags, on the other hand, encourage "flat" categorization. For example,

A picture of my computer:
  - pictures, computer hardware, case, metal

An article I wrote about a server case:
  - computer hardware, review, tech, server

You run into the issue that, while these are completely different items 
(one goes in a gallery, the other in a blog section), a "tagging" system 
will lump them both together for "computer hardware" when they are, 
categorically, different items.

Tags are great for lump sum categories where generalization is a good 
thing, but when you are looking for actual control over the organization 
of your information, hierarchies are simply better.


Aside from which is better of nor, WP doesn't force you to do any 
difficult hierarchy management tasks anyway. As of WP1.5, it just isn't 
easy enough to create categories on the fly (like you do when using 
tags) without a plugin.

Solutoins: As in the other email, the tags plugin is great, and the 
on-the-fly creation of categories is something that is being worked on 
for 1.6, I believe.

Jeff

From xavier.roy at wipro.com  Fri Jul  8 05:21:31 2005
From: xavier.roy at wipro.com (xavier.roy@wipro.com)
Date: Fri Jul  8 05:21:34 2005
Subject: [wp-hackers] s/categories/tags
Message-ID: <52C85426D39B314381D76DDD480EEE0C03793085@blr-m3-msg.wipro.com>



Jeff wrote:

>>In fact, there is:

>>  - http://www.agkamai.com/archives/538/modified-cat2tag/

>> I know because I worked on it. Additionally, the plug-in is set up so
that it "hides" categories, but the "tags" are >> >> actually just
categories in a clever guise. If that's not clear, try the plug-in and
then deactivate and see what >>>>>> >> happens.

I use it on my bookshelf, http://bookshelf.xavierroy.com , but the thing
is that cat2tag creates categories as tags but child categories are not
supported. As an example., say I create an entry with some "tags" as
'thriller' and 'robert littell'. They become categories - But I want
'thriller' to be a children category of 'genre' and 'robert littell' to
be a child of 'authors'. That isn't possible with the current cat2tag. I
usually change the categories manually (make them children of respective
parent categories").

I hope a on-the-fly creation of categories with an option to choose a
parent for that category (maybe a dropdown) would be real great for WP.

Jax.


-----Original Message-----
From: wp-hackers-bounces@lists.automattic.com
[mailto:wp-hackers-bounces@lists.automattic.com] On Behalf Of Jeff
Minard
Sent: Friday, July 08, 2005 10:28 AM
To: wp-hackers@lists.automattic.com
Subject: Re: [wp-hackers] s/categories/tags
Importance: Low

Kai Hendry wrote:
> Or is there some "plugin" for quickly creating "tag" metadata for a
> post I should know about.

In fact, there is:

  - http://www.agkamai.com/archives/538/modified-cat2tag/

I know because I worked on it. Additionally, the plugin is set up so
that it "hides" categories, but the "tags" are actually just categories
in a clever guise. If that's not clear, try the plugin and then
deactivate and see what happens.

Jeff
_______________________________________________
wp-hackers mailing list
wp-hackers@lists.automattic.com
http://lists.automattic.com/mailman/listinfo/wp-hackers



Confidentiality Notice

The information contained in this electronic message and any attachments to this message are intended
for the exclusive use of the addressee(s) and may contain confidential or privileged information. If
you are not the intended recipient, please notify the sender at Wipro or Mailadmin@wipro.com immediately
and destroy all copies of this message and any attachments.
From ryan at boren.nu  Fri Jul  8 04:24:42 2005
From: ryan at boren.nu (Ryan Boren)
Date: Fri Jul  8 06:43:24 2005
Subject: [wp-hackers] User Capabilities
In-Reply-To: <42CC0A48.8080905@midnightcircus.com>
References: <1120196075.7972.0.camel@portnoy.fuzzybelly.org>
	<42C4DD1E.5080807@txfx.net>
	<1120231038.15622.19.camel@portnoy.fuzzybelly.org>
	<42C56271.8010105@wltc.net>
	<1120602422.3844.114.camel@portnoy.fuzzybelly.org>
	<012601c58245$7d2de040$6402a8c0@DELL8600>
	<42CC0A48.8080905@midnightcircus.com>
Message-ID: <1120796682.3844.165.camel@portnoy.fuzzybelly.org>

On Wed, 2005-07-06 at 12:43 -0400, Owen Winkler wrote:
> There would be no interface to edit this data in the core beyond 
> defining a single role for a single user.  A more complete user 
> permissions plugin could allow admins to define multiple roles and 
> permissions for a single user and/or alter roles and their permissions 
> directly.
> 
> The nice thing about this system is that it doesn't require additional 
> tables, it allows for future use of core-based per-user permissions, 
> provides for heirarchical roles in more complicated custom permission 
> schemes, and I think it hits all of the requirements we've discussed 
> previously.

Sounds good.  Patch attached.

Ryan
-------------- next part --------------
A non-text attachment was scrubbed...
Name: caps.diff
Type: text/x-patch
Size: 14241 bytes
Desc: not available
Url : http://comox.textdrive.com/pipermail/wp-hackers/attachments/20050708/706d837f/caps-0001.bin
From jeff at jrm.cc  Fri Jul  8 07:41:32 2005
From: jeff at jrm.cc (Jeff Minard)
Date: Fri Jul  8 07:41:43 2005
Subject: [wp-hackers] s/categories/tags
In-Reply-To: <52C85426D39B314381D76DDD480EEE0C03793085@blr-m3-msg.wipro.com>
References: <52C85426D39B314381D76DDD480EEE0C03793085@blr-m3-msg.wipro.com>
Message-ID: <42CE2E2C.4050605@jrm.cc>

xavier.roy@wipro.com wrote:
> I hope a on-the-fly creation of categories with an option to choose a
> parent for that category (maybe a dropdown) would be real great for WP.

I thought about adding that, something like, using a / denotes 
parent-child relations. EG:

  - Computers/Hacking, Fun, Good Time

But i figured it would increase the complexity of using and displaying 
"tags" and take away from the ease with which they work. Also, I just 
didn't want to program it at the time ;)

Jeff
From mgeisler at mgeisler.net  Fri Jul  8 10:04:48 2005
From: mgeisler at mgeisler.net (Martin Geisler)
Date: Fri Jul  8 10:11:03 2005
Subject: [wp-hackers] Re: s/categories/tags
References: <20050708002903.GD17063@iki.fi>
Message-ID: <87pstttxz3.fsf@futtelifut.dyndns.org>

Kai Hendry <hendry@iki.fi> writes:

> Is there a search for the archives?
> http://comox.textdrive.com/pipermail/wp-hackers/

Yes, try Gmame:

  http://dir.gmane.org/gmane.comp.web.wordpress.devel

-- 
Martin Geisler                                     GnuPG Key: 0x7E45DD38

PHP EXIF Library      |  PHP Weather             |  PHP Shell
http://pel.sf.net/    |  http://phpweather.net/  |  http://mgeisler.net/
Read/write EXIF data  |  Show current weather    |  A shell in a browser
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 188 bytes
Desc: not available
Url : http://comox.textdrive.com/pipermail/wp-hackers/attachments/20050708/84d94498/attachment.bin
From hendry at iki.fi  Fri Jul  8 12:11:21 2005
From: hendry at iki.fi (Kai Hendry)
Date: Fri Jul  8 12:11:29 2005
Subject: [wp-hackers] s/categories/tags
In-Reply-To: <42CE2E2C.4050605@jrm.cc>
References: <52C85426D39B314381D76DDD480EEE0C03793085@blr-m3-msg.wipro.com>
	<42CE2E2C.4050605@jrm.cc>
Message-ID: <20050708121119.GB3319@iki.fi>

On Fri, Jul 08, 2005 at 12:41:32AM -0700, Jeff Minard wrote:
> I thought about adding that, something like, using a / denotes 
> parent-child relations. EG:
>  - Computers/Hacking, Fun, Good Time

Could be Hacking/Computers.

I like cat2tag for now. :)
From dmhouse at gmail.com  Fri Jul  8 13:04:02 2005
From: dmhouse at gmail.com (David House)
Date: Fri Jul  8 13:04:13 2005
Subject: [wp-hackers] User Capabilities
In-Reply-To: <1120796682.3844.165.camel@portnoy.fuzzybelly.org>
References: <1120196075.7972.0.camel@portnoy.fuzzybelly.org>
	<42C4DD1E.5080807@txfx.net>
	<1120231038.15622.19.camel@portnoy.fuzzybelly.org>
	<42C56271.8010105@wltc.net>
	<1120602422.3844.114.camel@portnoy.fuzzybelly.org>
	<012601c58245$7d2de040$6402a8c0@DELL8600>
	<42CC0A48.8080905@midnightcircus.com>
	<1120796682.3844.165.camel@portnoy.fuzzybelly.org>
Message-ID: <ebe43d680507080604214ddfe0@mail.gmail.com>

On 7/8/05, Ryan Boren <ryan@boren.nu> wrote:
> Sounds good.  Patch attached.

I was going through your code, and found it pretty hard to work out in
places. I'm still not 100% sure, but here's my altered patch with
comments. I'd appreciate it, Ryan, if you could check the comments in
WP_User::has_cap, as this is where most of my confusion was stemming
from. Thanks.

-- 
-David House, dmhouse@gmail.com, http://xmouse.ithium.net
-------------- next part --------------
A non-text attachment was scrubbed...
Name: caps.diff
Type: text/x-patch
Size: 15766 bytes
Desc: not available
Url : http://comox.textdrive.com/pipermail/wp-hackers/attachments/20050708/b64dc11a/caps.bin
From dougal at gunters.org  Fri Jul  8 13:57:43 2005
From: dougal at gunters.org (Dougal Campbell)
Date: Fri Jul  8 13:58:12 2005
Subject: [wp-hackers] Apache2 Security Update
Message-ID: <42CE8657.6020700@gunters.org>

Those of you running Apache2 should update to version 2.1.6:

 
http://www.whitedust.net/speaks/825/Apache%20Request%20Smuggling%20Vulnerability/

(via Slashdot)

-- 
Dougal Campbell <dougal@gunters.org>
http://dougal.gunters.org/

From skippy at skippy.net  Fri Jul  8 14:01:19 2005
From: skippy at skippy.net (Scott Merrill)
Date: Fri Jul  8 14:01:24 2005
Subject: [wp-hackers] Apache2 Security Update
In-Reply-To: <42CE8657.6020700@gunters.org>
References: <42CE8657.6020700@gunters.org>
Message-ID: <42CE872F.6000905@skippy.net>

Dougal Campbell wrote:
> Those of you running Apache2 should update to version 2.1.6:

2.1.6 is the unstable branch.  Don't upgrade to the unstable branch
unless you know what you're doing.

> http://www.whitedust.net/speaks/825/Apache%20Request%20Smuggling%20Vulnerability/

The actual vulnerability seems only to apply to systems running
mod_proxy, or behind proxies of some other sort.  The exploit involves
multiple systems speaking to one another, each handling Content-Length
differently.

If you're not behind a proxy, you're not vulnerable to this exploit,
from what I understand.

-- 
skippy@skippy.net | http://skippy.net/

gpg --keyserver pgp.mit.edu --recv-keys 9CFA4B35
506C F8BB 17AE 8A05 0B49  3544 476A 7DEC 9CFA 4B35
From dougal at gunters.org  Fri Jul  8 14:13:06 2005
From: dougal at gunters.org (Dougal Campbell)
Date: Fri Jul  8 14:13:26 2005
Subject: [wp-hackers] Apache2 Security Update
In-Reply-To: <42CE872F.6000905@skippy.net>
References: <42CE8657.6020700@gunters.org> <42CE872F.6000905@skippy.net>
Message-ID: <42CE89F2.3070502@gunters.org>

Scott Merrill wrote:
> Dougal Campbell wrote:
> 
>>Those of you running Apache2 should update to version 2.1.6:
> 
> 
> 2.1.6 is the unstable branch.  Don't upgrade to the unstable branch
> unless you know what you're doing.
> 
> 
>>http://www.whitedust.net/speaks/825/Apache%20Request%20Smuggling%20Vulnerability/
> 
> 
> The actual vulnerability seems only to apply to systems running
> mod_proxy, or behind proxies of some other sort.  The exploit involves
> multiple systems speaking to one another, each handling Content-Length
> differently.
> 
> If you're not behind a proxy, you're not vulnerable to this exploit,
> from what I understand.

Ah, sorry for jumping the gun. I should have read more in-depth. I just 
wanted to make sure that anyone affected go the information as quickly 
as possible.

-- 
Dougal Campbell <dougal@gunters.org>
http://dougal.gunters.org/

From ringmaster at midnightcircus.com  Fri Jul  8 15:10:33 2005
From: ringmaster at midnightcircus.com (Owen Winkler)
Date: Fri Jul  8 15:07:12 2005
Subject: [wp-hackers] User Capabilities
In-Reply-To: <1120796682.3844.165.camel@portnoy.fuzzybelly.org>
References: <1120196075.7972.0.camel@portnoy.fuzzybelly.org>	<42C4DD1E.5080807@txfx.net>	<1120231038.15622.19.camel@portnoy.fuzzybelly.org>	<42C56271.8010105@wltc.net>	<1120602422.3844.114.camel@portnoy.fuzzybelly.org>	<012601c58245$7d2de040$6402a8c0@DELL8600>	<42CC0A48.8080905@midnightcircus.com>
	<1120796682.3844.165.camel@portnoy.fuzzybelly.org>
Message-ID: <42CE9769.80702@midnightcircus.com>

Ryan Boren wrote:
> Sounds good.  Patch attached.

Holy caps, Batman.

There's a glitch or two.  I don't think that usermeta values get 
unserialized in get_userdata() when they are added to the WP_User 
object, so checking against $this->caps[] in WP_User::has_cap() won't 
return a valid value.  (It was returning "a" for me, which is "true", 
even though I shouldn't have the cap I requested.)

The confusing IF statement in that function seems to say:
If ((the user does not have the cap directly) and (a role exists with 
that name) and (the role doesn't have the cap)) then the user doesn't 
have the cap.

A problem is that it's not checking the requested cap against the caps 
of the *user's* roles.  It's only checking the requested cap against the 
caps of a role with the same name as the requested cap, which is 
incorrect.

I've attached new files to try with changes that look to me like they 
work.  It builds a complete list of caps when WP_User is created by 
reading the user roles recursively.  Apply my patch over Ryan's and 
replace the capabilities.php file with this new one.  You'll need to 
delete the options table row that contains the roles and run the upgrade 
to see the recursive roles work.

Hint: echo $current_user->caps from admin-footer.php.

Can you set a cap to false to deny that cap?  I think that my patch 
could enable this.  Just a thought, since it might be useful to grant 
users capabilities by role, and then revoke a single permission.

As I said before, the admin UI need not support setting these 
capabilities, but it's handy if the core supports them if someone wants 
to augment the permission page by plugin.

I also see in this code a trend toward assigning permissions to 
different table prefixes, which implies that MU functionality is in the 
pipeline for the core.  I'm not up to speed on MU - Which tables are 
shared and which aren't?  It seems that the options table would be a 
shared table, and that any option that's not global should have a table 
prefix.  This would be good to know for plugins with option data that 
want to support MU.

Owen
-------------- next part --------------
A non-text attachment was scrubbed...
Name: newcaps.diff
Type: text/x-patch
Size: 5100 bytes
Desc: not available
Url : http://comox.textdrive.com/pipermail/wp-hackers/attachments/20050708/3c7be53f/newcaps.bin
-------------- next part --------------
A non-text attachment was scrubbed...
Name: capabilities.php
Type: application/x-php
Size: 5469 bytes
Desc: not available
Url : http://comox.textdrive.com/pipermail/wp-hackers/attachments/20050708/3c7be53f/capabilities.bin
From m at mullenweg.com  Fri Jul  8 17:00:14 2005
From: m at mullenweg.com (Matt Mullenweg)
Date: Fri Jul  8 17:00:23 2005
Subject: [wp-hackers] s/categories/tags
In-Reply-To: <20050708002903.GD17063@iki.fi>
References: <20050708002903.GD17063@iki.fi>
Message-ID: <42CEB11E.60709@mullenweg.com>

Kai Hendry wrote:
> Regarding the categories overhaul. Am I correct to consider categories
> as tags? It would make things a little bit more consistent.

The only functional difference is the UI, which we're working on. There 
need to be some changes with both ease of adding categories on the fly 
and also how the interface deals with hundreds (or thousands) of categories.

> http://codex.wordpress.org/index.php?title=Special:Userlogin&action=submitlogin
> Shouldn't my wordpress.org user/pass work here?

It will someday, but not for now.

-- 
Matt Mullenweg
http://photomatt.net  | http://wordpress.org
http://pingomatic.com | http://cnet.com
From ryan at boren.nu  Fri Jul  8 20:28:23 2005
From: ryan at boren.nu (Ryan Boren)
Date: Fri Jul  8 20:50:37 2005
Subject: [wp-hackers] User Capabilities
In-Reply-To: <42CE9769.80702@midnightcircus.com>
References: <1120196075.7972.0.camel@portnoy.fuzzybelly.org>	<42C4DD1E.5080807@txfx.net>	<1120231038.15622.19.camel@portnoy.fuzzybelly.org>	<42C56271.8010105@wltc.net>	<1120602422.3844.114.camel@portnoy.fuzzybelly.org>	<012601c58245$7d2de040$6402a8c0@DELL8600>	<42CC0A48.8080905@midnightcircus.com>
	<1120796682.3844.165.camel@portnoy.fuzzybelly.org>
	<42CE9769.80702@midnightcircus.com>
Message-ID: <42572.64.101.146.91.1120854503.squirrel@webmail.barclay.textdrive.com>

> Ryan Boren wrote:
>> Sounds good.  Patch attached.
>
> Holy caps, Batman.
>
> There's a glitch or two.  I don't think that usermeta values get
> unserialized in get_userdata() when they are added to the WP_User
> object, so checking against $this->caps[] in WP_User::has_cap() won't
> return a valid value.  (It was returning "a" for me, which is "true",
> even though I shouldn't have the cap I requested.)

Roght you are.

> The confusing IF statement in that function seems to say:
> If ((the user does not have the cap directly) and (a role exists with
> that name) and (the role doesn't have the cap)) then the user doesn't
> have the cap.
>
> A problem is that it's not checking the requested cap against the caps
> of the *user's* roles.  It's only checking the requested cap against the
> caps of a role with the same name as the requested cap, which is
> incorrect.

Indeed.  It's not quite there.

> I've attached new files to try with changes that look to me like they
> work.  It builds a complete list of caps when WP_User is created by
> reading the user roles recursively.  Apply my patch over Ryan's and
> replace the capabilities.php file with this new one.  You'll need to
> delete the options table row that contains the roles and run the upgrade
> to see the recursive roles work.
>
> Hint: echo $current_user->caps from admin-footer.php.

I'll give it a try when I get home.

> Can you set a cap to false to deny that cap?  I think that my patch
> could enable this.  Just a thought, since it might be useful to grant
> users capabilities by role, and then revoke a single permission.

That's the intention, altough the implementation doesn't correctly check
for this at the moment.  The idea is if the cap is not set in the user's
cap list, then fall through to role checking.  If it is set and false,
then the user does not have that cap and the role should not be checked.

> As I said before, the admin UI need not support setting these
> capabilities, but it's handy if the core supports them if someone wants
> to augment the permission page by plugin.
>
> I also see in this code a trend toward assigning permissions to
> different table prefixes, which implies that MU functionality is in the
> pipeline for the core.  I'm not up to speed on MU - Which tables are
> shared and which aren't?  It seems that the options table would be a
> shared table, and that any option that's not global should have a table
> prefix.  This would be good to know for plugins with option data that
> want to support MU.

Matt added the prefix thing to the user level when he added the usermeta
table.  I extended it to the roles and caps.  I think the idea is to make
it possible share the user and usermeta tables but be able to partition
privileges.

Ryan

From ringmaster at midnightcircus.com  Fri Jul  8 21:27:23 2005
From: ringmaster at midnightcircus.com (Owen Winkler)
Date: Fri Jul  8 21:23:25 2005
Subject: [wp-hackers] User Capabilities
In-Reply-To: <42572.64.101.146.91.1120854503.squirrel@webmail.barclay.textdrive.com>
References: <1120196075.7972.0.camel@portnoy.fuzzybelly.org>	<42C4DD1E.5080807@txfx.net>	<1120231038.15622.19.camel@portnoy.fuzzybelly.org>	<42C56271.8010105@wltc.net>	<1120602422.3844.114.camel@portnoy.fuzzybelly.org>	<012601c58245$7d2de040$6402a8c0@DELL8600>	<42CC0A48.8080905@midnightcircus.com>	<1120796682.3844.165.camel@portnoy.fuzzybelly.org>	<42CE9769.80702@midnightcircus.com>
	<42572.64.101.146.91.1120854503.squirrel@webmail.barclay.textdrive.com>
Message-ID: <42CEEFBB.3090507@midnightcircus.com>

Ryan Boren wrote:
>>Can you set a cap to false to deny that cap?  I think that my patch
>>could enable this.  Just a thought, since it might be useful to grant
>>users capabilities by role, and then revoke a single permission.
> 
> That's the intention, altough the implementation doesn't correctly check
> for this at the moment.  The idea is if the cap is not set in the user's
> cap list, then fall through to role checking.  If it is set and false,
> then the user does not have that cap and the role should not be checked.

With the patch I provided, if you set a capability for a user directly, 
it will override anything previously set via role.  The uksort() you see 
in there accomplishes aggregating role caps first, then user caps.

has_cap() doesn't return the value that's in the user caps list, but it 
should be pretty simple to do that now.

A couple of caveats that I thought of during lunch:  The WP_Roles and 
WP_Role classes don't return hierarchical caps, just flat caps for the 
request.  I can't think of a case where recursion would be useful 
anywhere other than the WP_User::has_cap(), but maybe there is.  Perhaps 
a $recursive argument should be added to all of those functions?  This 
might be useful for using the classes to tie caps to specific 
roles/users in an advanced admin plugin.


Owen
From ryan at boren.nu  Fri Jul  8 21:34:41 2005
From: ryan at boren.nu (Ryan Boren)
Date: Fri Jul  8 21:35:06 2005
Subject: [wp-hackers] User Capabilities
In-Reply-To: <42572.64.101.146.91.1120854503.squirrel@webmail.barclay.textdrive.com>
References: <1120196075.7972.0.camel@portnoy.fuzzybelly.org>
	<42C4DD1E.5080807@txfx.net>
	<1120231038.15622.19.camel@portnoy.fuzzybelly.org>
	<42C56271.8010105@wltc.net>
	<1120602422.3844.114.camel@portnoy.fuzzybelly.org>
	<012601c58245$7d2de040$6402a8c0@DELL8600>
	<42CC0A48.8080905@midnightcircus.com>
	<1120796682.3844.165.camel@portnoy.fuzzybelly.org>
	<42CE9769.80702@midnightcircus.com>
	<42572.64.101.146.91.1120854503.squirrel@webmail.barclay.textdrive.com>
Message-ID: <1120858481.12652.17.camel@portnoy.fuzzybelly.org>

> > I've attached new files to try with changes that look to me like they
> > work.  It builds a complete list of caps when WP_User is created by
> > reading the user roles recursively.  Apply my patch over Ryan's and
> > replace the capabilities.php file with this new one.  You'll need to
> > delete the options table row that contains the roles and run the upgrade
> > to see the recursive roles work.
> >
> > Hint: echo $current_user->caps from admin-footer.php.
> 
> I'll give it a try when I get home.

I'm not sure about having roles reference other roles.  If a privilege
is removed for one role, the privilege is lost to higher roles as well.
If manage_links is removed for the Managing Editor, the Publisher loses
that priv as well unless it is separately added to the Publisher role.
I think each role should be self contained.

Also, if we expand the role caps into the user caps it is possible for
the user caps to get saved to the DB in this expanded state.  The user
caps will no longer reference a role and no longer reflect changes made
to the role.

Ryan

From skippy at skippy.net  Sat Jul  9 00:59:43 2005
From: skippy at skippy.net (Scott Merrill)
Date: Sat Jul  9 00:59:51 2005
Subject: [wp-hackers] Plugin: WP-DB-Backup
Message-ID: <42CF217F.5040509@skippy.net>

In an effort to lower the bar to participation in the upcoming WordPress 
Backup Bonanza, and to make it as simple as possible -- for as many 
people as possible -- to backup their WordPress data with the minimum 
fuss, I have written wp-db-backup.php.

http://www.skippy.net/download/plugins/wp-db-backup/wp-db-backup.tar.gz

This plugin borrows heavily from Mark Ghosh's "One Click Backup", which 
in turn borrows from phpMyAdmin and other sources.  I've updated Mark's 
functions to use the $wpdb object instead of the raw mysql_* functions.

== Instructions ==
* Make a directory /wp-content/backup/ and make this directory writable 
by your webserver.
* Install and activate the plugin.
* Navigate to Manage -> Backup.
* Select optional tables, choose your delivery mechanism, and backup.

If you select "email", the dump will be emailed to the admin email account.
If you select "email" or "download", the dump will be deleted after 
transfer.

=== LIMITATIONS ===
This plugin "works for me", but I know it won't work for everyone; so 
I'm actively seeking your help!

* Most notably it lacks sufficient error handling; particularly if the 
database is huge.
** It would be swell if we could detect big tables and automatically 
export them separately, into discrete files.  I don't know if that's 
practical.

* I can't figure out how to make the direct download option redirect to 
a clean page after finishing the download.

It's not the world's most elegant plugin, but I think it's a solid start 
to help the casual user backup the WordPress database.  Please feel free 
to reply to me directly off-list if you like.  Feel free also to discuss 
this on-list -- I think the argument could be made that this (or 
something better) has value in the core.

-- 
skippy@skippy.net | http://skippy.net/

gpg --keyserver pgp.mit.edu --recv-keys 9CFA4B35
506C F8BB 17AE 8A05 0B49  3544 476A 7DEC 9CFA 4B35
From m at mullenweg.com  Sat Jul  9 01:30:56 2005
From: m at mullenweg.com (Matt Mullenweg)
Date: Sat Jul  9 01:31:15 2005
Subject: [wp-hackers] User levels in 1.6
Message-ID: <42CF28D0.3030807@mullenweg.com>

Though this may change in 1.6 re: the role discussion, we still have 
user levels for now. If your plugin or code interacted directly with the 
user_level field in the wp_users table it will not work in 1.6, that 
value has been moved to the usermeta table. If you're accessing it 
throguh the standard get_userdata object then you're *fine*, none of 
your code needs to change.

In the DB the meta_key is now $wpdb->prefix . 'user_level'.

-- 
Matt Mullenweg
http://photomatt.net  | http://wordpress.org
http://pingomatic.com | http://cnet.com
From m at mullenweg.com  Sat Jul  9 01:36:00 2005
From: m at mullenweg.com (Matt Mullenweg)
Date: Sat Jul  9 01:36:16 2005
Subject: [wp-hackers] 500 euros for WP + plugins
Message-ID: <42CF2A00.2040402@mullenweg.com>

I'm curious how people feel about this:

http://www.semiologic.com/projects/sem-theme-pro/

-- 
Matt Mullenweg
http://photomatt.net  | http://wordpress.org
http://pingomatic.com | http://cnet.com
From skippy at skippy.net  Sat Jul  9 01:47:38 2005
From: skippy at skippy.net (Scott Merrill)
Date: Sat Jul  9 01:47:54 2005
Subject: [wp-hackers] 500 euros for WP + plugins
In-Reply-To: <42CF2A00.2040402@mullenweg.com>
References: <42CF2A00.2040402@mullenweg.com>
Message-ID: <42CF2CBA.9040905@skippy.net>

Matt Mullenweg wrote:
> I'm curious how people feel about this:
> 
> http://www.semiologic.com/projects/sem-theme-pro/
> 

I think it's awesome that someone's making money with WordPress.

It doesn't say anywhere on there what the license of the Pro package is. 
  Since WordPress comes with it, and WordPress is GPL, it stands to 
reason that the entire suite is GPL:
http://www.fsf.org/licensing/licenses/gpl-faq.html#GPLAndPlugins

Therefore, one person who buys the full suite would be legally entitled 
to use the suite for any purpose, and to share the entire suite with 
their friends and neighbors at no cost.  As long Denis is cool with 
that, I'm cool with the suite.

Unless the WordPress copyright holders have extended to Denis a special 
license for WordPress?  I'm less cool with that, but I fully acknowledge 
that it is the copyright holder's perogative to do so.

This is interesting:
"An entire collection of (debugged) third party plugins, all one click 
installs"
This implies that Denis has debugged the scripts.  Have the results of 
the debugging been shared with the original developers?

-- 
skippy@skippy.net | http://skippy.net/

gpg --keyserver pgp.mit.edu --recv-keys 9CFA4B35
506C F8BB 17AE 8A05 0B49  3544 476A 7DEC 9CFA 4B35
From r at schestowitz.com  Sat Jul  9 01:55:26 2005
From: r at schestowitz.com (Roy Schestowitz)
Date: Sat Jul  9 01:55:42 2005
Subject: [wp-hackers] 500 euros for WP + plugins
In-Reply-To: <42CF2A00.2040402@mullenweg.com>
References: <42CF2A00.2040402@mullenweg.com>
Message-ID: <20050709025526.muq8bfmmhu1wwgkc@banana.catalyst2.com>

Quoting Matt Mullenweg <m@mullenweg.com>:

> I'm curious how people feel about this:
>
> http://www.semiologic.com/projects/sem-theme-pro/

There is nothing to prevent him from doing that because it's GPL'd. 
It's rather
clear that when you put forward the URL, you wanted to hear the same 
rants that
stir in your mind.

Having said that, the GPL might somehow cover these circumstances. It's like
people selling tickets to a free, charity concert. The plugins must be made
public, but there is nothing to prevent cashing in on the services. Nuclear
Moose called it a "Kick in the Face" when users asked for paid support. I can
only imagine that other people do it too, only without advertising.

Lastly, remember that putting an offer on-line does not warrant business.

Roy

-- 
Roy S. Schestowitz
http://Schestowitz.com

From fd at firasd.org  Sat Jul  9 02:06:52 2005
From: fd at firasd.org (Firas D.)
Date: Sat Jul  9 02:07:01 2005
Subject: [wp-hackers] 500 euros for WP + plugins
In-Reply-To: <42CF2A00.2040402@mullenweg.com>
References: <42CF2A00.2040402@mullenweg.com>
Message-ID: <42CF313C.9050402@firasd.org>

Matt Mullenweg wrote:

> I'm curious how people feel about this:
>
> http://www.semiologic.com/projects/sem-theme-pro/
>
It's not that far off being a sort of WP consulting, with the consulting 
already done (stuff packaged, etc.) Seems above-board.

Although that part about 'An entire collection of (debugged) third party 
plugins, all one click installs' does make my stomach churn a wee bit. 
Which plugins, how debugged, going to share the source..?

Firas.

-- 
http://firasd.org

From peter.westwood at ftwr.co.uk  Sat Jul  9 02:26:42 2005
From: peter.westwood at ftwr.co.uk (Peter Westwood)
Date: Sat Jul  9 02:26:59 2005
Subject: [wp-hackers] 500 euros for WP + plugins
In-Reply-To: <42CF313C.9050402@firasd.org>
References: <42CF2A00.2040402@mullenweg.com> <42CF313C.9050402@firasd.org>
Message-ID: <2354.217.155.152.69.1120876002.squirrel@www.ftwr.co.uk>


On Sat, July 9, 2005 3:06 am, Firas D. said:
> Matt Mullenweg wrote:
>
>> I'm curious how people feel about this:
>>
>> http://www.semiologic.com/projects/sem-theme-pro/
>>
> It's not that far off being a sort of WP consulting, with the consulting
> already done (stuff packaged, etc.) Seems above-board.
>

If the product _is_ support then it would seem above-board - the wording though implies that you are paying for
WordPress + 3rd party plugins rather than for support which I'm not sure is above-board.

I would think it fair for him to sell plugins/themes that he has created because to me that would be the equivalent of
developing them specifically for a client to use and as such I don't think they would need to be GPL/GPL Compatible
licenced.

> Although that part about 'An entire collection of (debugged) third party
> plugins, all one click installs' does make my stomach churn a wee bit.
> Which plugins, how debugged, going to share the source..?
>

This makes my stomach churn too.  The possibility of an end user contacting the original plugin dev for support is
quite high and if they don't have access to the code in use they are not going to be able to help much.

westi
-- 
Peter Westwood
Blog: http://www.ftwr.co.uk/blog/
Get Firefox: http://www.spreadfirefox.com/?q=affiliates&id=20287

From rjorgy at gmail.com  Sat Jul  9 04:16:37 2005
From: rjorgy at gmail.com (BoBB)
Date: Sat Jul  9 04:16:49 2005
Subject: [wp-hackers] the $post variable
Message-ID: <ff1ad1fe05070821166b2b207e@mail.gmail.com>

I looked on the codex and I couldn't find alot documentation on the
$post variable ... of course I am not really familiar with a Wiki so I
might just not be finding it.

What I need is a way to, within the loop, access the DB information
for each post, such as the timestamp, for a template tag. Obviously
grabbing the ID and submitting another query for each post would be
very undesireable. Is there anything that stores information such as
that? And what would be the best way to access it?

-- 
/* BoBB
 * AIM: Jodokast49 ICQ: 151495596
 * Jabber: BoBB@jabber.com
 * http://myeurotrip.org
 */
From mark.wordpress at txfx.net  Sat Jul  9 04:24:13 2005
From: mark.wordpress at txfx.net (Mark Jaquith)
Date: Sat Jul  9 04:54:01 2005
Subject: [wp-hackers] the $post variable
In-Reply-To: <ff1ad1fe05070821166b2b207e@mail.gmail.com>
References: <ff1ad1fe05070821166b2b207e@mail.gmail.com>
Message-ID: <42CF516D.5090808@txfx.net>

BoBB wrote:

>I looked on the codex and I couldn't find alot documentation on the
>$post variable ... of course I am not really familiar with a Wiki so I
>might just not be finding it.
>
>What I need is a way to, within the loop, access the DB information
>for each post, such as the timestamp, for a template tag. Obviously
>grabbing the ID and submitting another query for each post would be
>very undesireable. Is there anything that stores information such as
>that? And what would be the best way to access it?
>
>  
>
The posts returned are stored in $posts (array of objects) and $post is 
essentially foreach ($posts as $post) which is actually how the loop 
used to work in WP 1.2

So within the loop, $post is the post object currently being processed.  
You can access $post->name_of_column to grab the data you need.
From skeltoac at hotmail.com  Sat Jul  9 08:52:19 2005
From: skeltoac at hotmail.com (Andy Skelton)
Date: Sat Jul  9 08:52:26 2005
Subject: [wp-hackers] 500 euros for WP + plugins
In-Reply-To: <42CF2A00.2040402@mullenweg.com>
Message-ID: <BAY108-F4B94C87FDF097C8DF93CEC7DA0@phx.gbl>

Smartly done.

>From: Matt Mullenweg <m@mullenweg.com>
>Reply-To: wp-hackers@lists.automattic.com
>To: wp-hackers@lists.automattic.com
>Subject: [wp-hackers] 500 euros for WP + plugins
>Date: Fri, 08 Jul 2005 18:36:00 -0700
>
>I'm curious how people feel about this:
>
>http://www.semiologic.com/projects/sem-theme-pro/
>
>--
>Matt Mullenweg
>http://photomatt.net  | http://wordpress.org
>http://pingomatic.com | http://cnet.com
>_______________________________________________
>wp-hackers mailing list
>wp-hackers@lists.automattic.com
>http://lists.automattic.com/mailman/listinfo/wp-hackers

_________________________________________________________________
Express yourself instantly with MSN Messenger! Download today - it's FREE! 
http://messenger.msn.click-url.com/go/onm00200471ave/direct/01/

From tarique at sanisoft.com  Sat Jul  9 09:34:04 2005
From: tarique at sanisoft.com (Dr Tarique Sani)
Date: Sat Jul  9 09:32:10 2005
Subject: [wp-hackers] 500 euros for WP + plugins
In-Reply-To: <BAY108-F4B94C87FDF097C8DF93CEC7DA0@phx.gbl>
References: <BAY108-F4B94C87FDF097C8DF93CEC7DA0@phx.gbl>
Message-ID: <42CF9A0C.5000402@sanisoft.com>

Andy Skelton wrote:

> Smartly done.
>
But overpriced I would say.... or perhaps the intent is to price the 
product out of the market :D

Tarique

>> From: Matt Mullenweg <m@mullenweg.com>
>> Reply-To: wp-hackers@lists.automattic.com
>> To: wp-hackers@lists.automattic.com
>> Subject: [wp-hackers] 500 euros for WP + plugins
>> Date: Fri, 08 Jul 2005 18:36:00 -0700
>>
>> I'm curious how people feel about this:
>>
>> http://www.semiologic.com/projects/sem-theme-pro/
>

-- 
=============================================================
PHP Applications for E-Biz: http://www.sanisoft.com

Coppermine Picture Gallery: http://coppermine.sf.net
=============================================================

From dmhouse at gmail.com  Sat Jul  9 09:48:54 2005
From: dmhouse at gmail.com (David House)
Date: Sat Jul  9 09:49:00 2005
Subject: [wp-hackers] User Capabilities
In-Reply-To: <1120858481.12652.17.camel@portnoy.fuzzybelly.org>
References: <1120196075.7972.0.camel@portnoy.fuzzybelly.org>
	<1120231038.15622.19.camel@portnoy.fuzzybelly.org>
	<42C56271.8010105@wltc.net>
	<1120602422.3844.114.camel@portnoy.fuzzybelly.org>
	<012601c58245$7d2de040$6402a8c0@DELL8600>
	<42CC0A48.8080905@midnightcircus.com>
	<1120796682.3844.165.camel@portnoy.fuzzybelly.org>
	<42CE9769.80702@midnightcircus.com>
	<42572.64.101.146.91.1120854503.squirrel@webmail.barclay.textdrive.com>
	<1120858481.12652.17.camel@portnoy.fuzzybelly.org>
Message-ID: <ebe43d6805070902487406482a@mail.gmail.com>

On 7/8/05, Ryan Boren <ryan@boren.nu> wrote:
> I'm not sure about having roles reference other roles.  If a privilege
> is removed for one role, the privilege is lost to higher roles as well.
> If manage_links is removed for the Managing Editor, the Publisher loses
> that priv as well unless it is separately added to the Publisher role.
> I think each role should be self contained.

I agree, this business of removing permissions cascading upward is too
confusing. (Besides, why _upward_? I mean, If you disallowed, say a
Managing Editor to do something, I'd expect everyone junior of him to
also be banned from doing that, but bubbling upward?)

I'd agree, each role should be isolated.

-- 
-David House, dmhouse@gmail.com, http://xmouse.ithium.net
From denis at semiologic.com  Sat Jul  9 09:38:47 2005
From: denis at semiologic.com (Denis de Bernardy)
Date: Sat Jul  9 10:10:33 2005
Subject: [wp-hackers] 500 euros for WP + plugins
In-Reply-To: <42CF2CBA.9040905@skippy.net>
Message-ID: <000001c5846a$01f35050$6702a8c0@DB>


@Matt: thanks for the link. :)

>   Since WordPress comes with it, and WordPress is GPL, it stands to 
> reason that the entire suite is GPL: 
> http://www.fsf.org/licensing/licenses/gpl-faq.html#GPLAndPlugins

The case is borderline, in fact. That said, most of the package is GPL. A
couple of plugins are CC-By. I've double checked for CC-NC.

> This implies that Denis has debugged the scripts.  Have the 
> results of 
> the debugging been shared with the original developers?

Of course. That's what community-driven software development is all about.
:)

--  
Denis de Bernardy
http://www.semiologic.com

From dmhouse at gmail.com  Sat Jul  9 10:18:20 2005
From: dmhouse at gmail.com (David House)
Date: Sat Jul  9 10:18:25 2005
Subject: [wp-hackers] 500 euros for WP + plugins
In-Reply-To: <42CF2A00.2040402@mullenweg.com>
References: <42CF2A00.2040402@mullenweg.com>
Message-ID: <ebe43d6805070903181e8d957c@mail.gmail.com>

On 7/9/05, Matt Mullenweg <m@mullenweg.com> wrote:
> I'm curious how people feel about this:
> 
> http://www.semiologic.com/projects/sem-theme-pro/

I guess its his perogative to do so, given that WP is open source.
It's interesting that it's not a full fork, rather an enhancement that
Denis has made. I'm not against the idea of someone making money off
their own work, but it does seem somewhat against the spirit of open
source to develop privately and not let the benefits of their work
flood into the community. I guess Denis doesn't plan to release his
source of his Pro code, and whilst he's entitled to do so, I think WP
would have benefited more if Denis had developed this within the
community.

But then, other things beyond the community are important, too. This
isn't going to hurt WP, and if it helps Denis pay his bills, then I'm
fine with it.

-- 
-David House, dmhouse@gmail.com, http://xmouse.ithium.net
From amit at igeek.info  Sat Jul  9 10:59:52 2005
From: amit at igeek.info (Amit Gupta)
Date: Sat Jul  9 11:00:22 2005
Subject: [wp-hackers] 500 euros for WP + plugins
Message-ID: <000b01c58475$5f4cdcc0$57ebd4cb@unicorn>


On Fri, 08 Jul 2005 "Matt Mullenweg" <m@mullenweg.com> wrote:
> I'm curious how people feel about this:
> http://www.semiologic.com/projects/sem-theme-pro/
what are you curious about? that someone's making money by way of WordPress? Or is he doing any violations of the license? or something else? :)
I doubt that its the first time someone's making money through WordPress. There are a lot of people who provide consultancy for WordPress and setup WordPress for clients for a fee. Its just that its the first time(as I see it) that someone is doing this in such an advertised way.


On Fri, 08 Jul 2005 "Firas D." <fd@firasd.org> wrote:
> Although that part about 'An entire collection of (debugged) third party
> plugins, all one click installs' does make my stomach churn a wee bit. 
> Which plugins, how debugged, going to share the source..?
is there any thing in GPL under which he's required to share the source if he modifies it? I don't think so!! As I understand GPL, it states that the person is required to give out the source of the application and any changes he makes, but he can do that at his own discretion!! He may agree to provide you the source and not to me, that's his choice, but nothing stops you from sharing it with me or anyone else, that's GPL's freedom. So why does it makes your stomach churn?


On Sat, 09 Jul 2005 "Peter Westwood" <peter.westwood@ftwr.co.uk> wrote:
> If the product _is_ support then it would seem above-board - the 
> wording though implies that you are paying for
> WordPress + 3rd party plugins rather than for support which I'm not 
> sure is above-board.
Yes, I don't think its above-board as well, as by what he's stating is that you are paying for the plugins/themes/wordpress, which under GPL can't be sold. Because an additional note on the page states that the buyer is on his own as far as support is concerned, unless he pays extra for the support. That I think is the violation of the GPL as you can't sell anything licensed under GPL for money or any other monetory gain. I think Matt should take this up with Denis reminding him that he's in violation of GPL.

> I would think it fair for him to sell plugins/themes that he has 
> created because to me that would be the equivalent of
> developing them specifically for a client to use and as such I don't 
> think they would need to be GPL/GPL Compatible
> licenced.
The licensing of Plugins & Themes has been discussed at the support forums.
http://wordpress.org/support/topic/21169
I think that the Plugins & Themes should(must?) be GPL compatible as they use the WP code which is licensed under GPL. Earlier when we had just CSS based styles, it was ok to release those styles under any license that the author desires, but now that we have themes which have WP Code in them, then their licenses must be GPL compatible, the styles however can remain under any license as they don't use any WP code.
Besides, I think that he's mentioned the fact on that page that even his plugins & themes are GPLed, or did I read it wrong? So he can't sell them anyway.

I don't and wouldn't say that Denis is doing something wrong. He can do that, technically and ethically, and people who do don't like him doing this(or whine that instead of selling his code he should've released it to the community or anything like that) can take a hike, they are of no concern to anyone(not atleast to me). The idea of Open Source is afterall(as I understand it) is to combine collective efforts of more than 1 developers and create a product that is beneficial to them and then distribute it among them and other people. People who claim to be Open Source supporters & voice that everything should be Open-Sourced(to them, Open-Source is a synonym of FREE), they don't ever think what will happen if everything is made available for free. What will happen to companies like Microsoft, Apple, Sun etc. that spend millions & billions in research every year so that they can bring out new features, new stuff that we all love & cherish!! will these same people work for free full day/5 days a week? I don't think so, because if they do, how are they gonna pay their bills? Will the electricity company waive your bill b'coz you are an open-source contributor? Will the supermarts provide you with free food b'coz you develop free software(and if its running their online store and their billing system)?? I don't think so.

But what I think is that Denis should consider revising his words at that page(or any other page which is about selling his CMS) because those words imply that he's selling WP+Plugins+Themes which he can't as per GPL.

just my $0.02 on the topic. :)

-----
Amit Gupta

|| Canned!! -- my Atropine || iG:Syntax Hiliter v3.1 ||
|| iGEEK.INFO || Free Nokia Ringtones || Online Gaming @ Games Planet || 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://comox.textdrive.com/pipermail/wp-hackers/attachments/20050709/5ee0130f/attachment.html
From heilemann at mac.com  Sat Jul  9 11:12:44 2005
From: heilemann at mac.com (Michael Heilemann)
Date: Sat Jul  9 11:14:12 2005
Subject: [wp-hackers] 500 euros for WP + plugins
In-Reply-To: <BAY108-F4B94C87FDF097C8DF93CEC7DA0@phx.gbl>
References: <BAY108-F4B94C87FDF097C8DF93CEC7DA0@phx.gbl>
Message-ID: <70F2D6A8-26B5-460A-9B6D-EEC71FD428D6@mac.com>

I think it's pretty damn expensive :)


On Jul 9, 2005, at 10:52 AM, Andy Skelton wrote:

>> I'm curious how people feel about this:
>>
>> http://www.semiologic.com/projects/sem-theme-pro/

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://comox.textdrive.com/pipermail/wp-hackers/attachments/20050709/a696f9a1/attachment-0001.html
From false.hopes at gmail.com  Sat Jul  9 11:38:51 2005
From: false.hopes at gmail.com (Robert Deaton)
Date: Sat Jul  9 11:38:56 2005
Subject: [wp-hackers] 500 euros for WP + plugins
In-Reply-To: <000b01c58475$5f4cdcc0$57ebd4cb@unicorn>
References: <000b01c58475$5f4cdcc0$57ebd4cb@unicorn>
Message-ID: <a491f91d050709043866e8ad5e@mail.gmail.com>

I think that you've never read the GPL or any real resources on it, nor 
understand the purpose of the GPL. I highly suggest that before you accuse 
someone of being in violation of the GPL you read up on what exactly the GPL 
is for.

On 7/9/05, Amit Gupta <amit@igeek.info> wrote:
> 
>  On Fri, 08 Jul 2005 "Matt Mullenweg" <m@mullenweg.com> wrote:
> > I'm curious how people feel about this:
> > http://www.semiologic.com/projects/sem-theme-pro/
> what are you curious about? that someone's making money by way of 
> WordPress? Or is he doing any violations of the license? or something else? 
> :)
> I doubt that its the first time someone's making money through WordPress. 
> There are a lot of people who provide consultancy for WordPress and setup 
> WordPress for clients for a fee. Its just that its the first time(as I see 
> it) that someone is doing this in such an advertised way.
> 
> 
> On Fri, 08 Jul 2005 "Firas D." <fd@firasd.org> wrote:
> > Although that part about 'An entire collection of (debugged) third party
> > plugins, all one click installs' does make my stomach churn a wee bit. 
> > Which plugins, how debugged, going to share the source..?
> is there any thing in GPL under which he's required to share the source if 
> he modifies it? I don't think so!! As I understand GPL, it states that the 
> person is required to give out the source of the application and any changes 
> he makes, but he can do that at his own discretion!! He may agree to provide 
> you the source and not to me, that's his choice, but nothing stops you from 
> sharing it with me or anyone else, that's GPL's freedom. So why does it 
> makes your stomach churn?
> 
> 
> On Sat, 09 Jul 2005 "Peter Westwood" <peter.westwood@ftwr.co.uk> wrote:
> > If the product _is_ support then it would seem above-board - the 
> > wording though implies that you are paying for
> > WordPress + 3rd party plugins rather than for support which I'm not 
> > sure is above-board.
> Yes, I don't think its above-board as well, as by what he's stating is 
> that you are paying for the plugins/themes/wordpress, which under GPL can't 
> be sold. Because an additional note on the page states that the buyer is on 
> his own as far as support is concerned, unless he pays extra for the 
> support. That I think is the violation of the GPL as you can't sell anything 
> licensed under GPL for money or any other monetory gain. I think Matt should 
> take this up with Denis reminding him that he's in violation of GPL.
> 
> > I would think it fair for him to sell plugins/themes that he has 
> > created because to me that would be the equivalent of
> > developing them specifically for a client to use and as such I don't 
> > think they would need to be GPL/GPL Compatible
> > licenced.
> The licensing of Plugins & Themes has been discussed at the support 
> forums.
> http://wordpress.org/support/topic/21169
> I think that the Plugins & Themes should(must?) be GPL compatible as they 
> use the WP code which is licensed under GPL. Earlier when we had just CSS 
> based styles, it was ok to release those styles under any license that the 
> author desires, but now that we have themes which have WP Code in them, then 
> their licenses must be GPL compatible, the styles however can remain under 
> any license as they don't use any WP code.
> Besides, I think that he's mentioned the fact on that page that even his 
> plugins & themes are GPLed, or did I read it wrong? So he can't sell them 
> anyway.
> 
> I don't and wouldn't say that Denis is doing something wrong. He can do 
> that, technically and ethically, and people who do don't like him doing 
> this(or whine that instead of selling his code he should've released it to 
> the community or anything like that) can take a hike, they are of no concern 
> to anyone(not atleast to me). The idea of Open Source is afterall(as I 
> understand it) is to combine collective efforts of more than 1 developers 
> and create a product that is beneficial to them and then distribute it among 
> them and other people. People who claim to be Open Source supporters & voice 
> that everything should be Open-Sourced(to them, Open-Source is a synonym of 
> FREE), they don't ever think what will happen if everything is made 
> available for free. What will happen to companies like Microsoft, Apple, Sun 
> etc. that spend millions & billions in research every year so that they can 
> bring out new features, new stuff that we all love & cherish!! will these 
> same people work for free full day/5 days a week? I don't think so, because 
> if they do, how are they gonna pay their bills? Will the electricity company 
> waive your bill b'coz you are an open-source contributor? Will the 
> supermarts provide you with free food b'coz you develop free software(and if 
> its running their online store and their billing system)?? I don't think so.
> 
> But what I think is that Denis should consider revising his words at that 
> page(or any other page which is about selling his CMS) because those words 
> imply that he's selling WP+Plugins+Themes which he can't as per GPL.
> 
> just my $0.02 on the topic. :)
> 
> -----
> Amit Gupta
> 
> || Canned!! -- my Atropine <http://blog.igeek.info/> || iG:Syntax Hiliter 
> v3.1<http://blog.igeek.info/still-fresh/2005/06/29/let-the-code-be-colourised/>||
> || iGEEK.INFO <http://www.igeek.info/> || Free Nokia Ringtones<http://www.igeek.info/ringtones.php>|| Online 
> Gaming @ Games Planet <http://www.igeek.info/games.php> || 
> 
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
> 
> 
> 


-- 
--Robert Deaton
http://somethingunpredictable.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://comox.textdrive.com/pipermail/wp-hackers/attachments/20050709/6121dbfc/attachment.html
From amit at igeek.info  Sat Jul  9 14:02:20 2005
From: amit at igeek.info (Amit Gupta)
Date: Sat Jul  9 14:02:35 2005
Subject: [wp-hackers] 500 euros for WP + plugins
Message-ID: <000801c5848e$d6283970$57ebd4cb@unicorn>


On Sat, 9 Jul 2005 "Robert Deaton" <false.hopes@gmail.com> wrote:
> I think that you've never read the GPL or any real resources on it, nor understand the purpose of the GPL. I 
> highly suggest that before you accuse someone of being in violation of the GPL you read up on what exactly > the GPL is for.
I've read the GPL quite a number of times and just read it again!! As I understand it, you can charge for supplying the software(like RedHat used to charge for Linux by providing it on CDs) and you can charge for any support or support materials like manuals, handbooks etc. but you can't charge for the code, the software. Am I wrong in understanding GPL? If I'm wrong, then would you please put me right & explain where I am wrong in understand it?(we'll keep the GPL in context of this topic only & not discuss other parts of GPL if not relevant here)

I wasn't accusing Denis of anything, I just said that his wordings on that page are not in compatibility with the GPL. If I was wrong in saying that, I don't know how/where/why I was wrong, you can't possibly know that sometimes unless someone else more enlightened that you can tell you that!! :) 

So ease off and tell me where I'm wrong. :)

-----
Amit Gupta

|| Canned!! -- my Atropine || iG:Syntax Hiliter v3.1 ||
|| iGEEK.INFO || Free Nokia Ringtones || Online Gaming @ Games Planet || 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://comox.textdrive.com/pipermail/wp-hackers/attachments/20050709/d7f0b3ba/attachment.html
From mark.wordpress at txfx.net  Sat Jul  9 14:13:08 2005
From: mark.wordpress at txfx.net (Mark Jaquith)
Date: Sat Jul  9 14:13:02 2005
Subject: [wp-hackers] 500 euros for WP + plugins
In-Reply-To: <000801c5848e$d6283970$57ebd4cb@unicorn>
References: <000801c5848e$d6283970$57ebd4cb@unicorn>
Message-ID: <42CFDB74.5040007@txfx.net>

mit Gupta wrote:

> I've read the GPL quite a number of times and just read it again!! As 
> I understand it, you can charge for supplying the software(like RedHat 
> used to charge for Linux by providing it on CDs) and you can charge 
> for any support or support materials like manuals, handbooks etc. but 
> you can't charge for the code, the software. Am I wrong in 
> understanding GPL? If I'm wrong, then would you please put me right & 
> explain where I am wrong in understand it?(we'll keep the GPL in 
> context of this topic only & not discuss other parts of GPL if not 
> relevant here)

http://www.gnu.org/licenses/gpl-faq.html#DoesTheGPLAllowMoney

> * Does the GPL allow me to sell copies of the program for money?*
>     Yes, the GPL allows everyone to do this. The right to sell copies 
> is part of the definition of free software. Except in one special 
> situation, there is no limit on what price you can charge. (The one 
> exception is the required written offer to provide source code that 
> must accompany binary-only release.)

http://www.gnu.org/licenses/gpl-faq.html#DoesTheGPLRequireAvailabilityToPublic

> *If I distribute GPL'd software for a fee, am I required to also make 
> it available to the public without a charge?*
>     No. However, if someone pays your fee and gets a copy, the GPL 
> gives them the freedom to release it to the public, with or without a 
> fee. For example, someone could pay your fee, and then put her copy on 
> a web site for the general public.


See also:
http://www.gnu.org/philosophy/selling.html

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://comox.textdrive.com/pipermail/wp-hackers/attachments/20050709/c61ed39e/attachment.html
From mgeisler at mgeisler.net  Sat Jul  9 14:27:43 2005
From: mgeisler at mgeisler.net (Martin Geisler)
Date: Sat Jul  9 15:09:02 2005
Subject: [wp-hackers] Re: 500 euros for WP + plugins
References: <000b01c58475$5f4cdcc0$57ebd4cb@unicorn>
Message-ID: <87d5psnjfk.fsf@futtelifut.dyndns.org>

"Amit Gupta" <amit@igeek.info> writes:

> On Fri, 08 Jul 2005 "Firas D." <fd@firasd.org> wrote:
>> Although that part about 'An entire collection of (debugged) third
>> party plugins, all one click installs' does make my stomach churn a
>> wee bit. Which plugins, how debugged, going to share the source..?
>
> is there any thing in GPL under which he's required to share the
> source if he modifies it?  I don't think so!!  As I understand GPL,
> it states that the person is required to give out the source of the
> application and any changes he makes, but he can do that at his own
> discretion!!  He may agree to provide you the source and not to me,
> that's his choice, but nothing stops you from sharing it with me or
> anyone else, that's GPL's freedom.  So why does it makes your
> stomach churn?

Take a look at the GPL FAQ, especially the question about selling
programs licensed under the GPL:

  http://www.fsf.org/licensing/licenses/gpl-faq.html#DoesTheGPLAllowMoney

The crusual point is that the GPL tells you what rights you have to
(re)distribute programs, and a work licensed under the GPL can be
redistributed only under the GPL.

So if Denis' work is a derived work of WordPress, then his Pro theme
must be distributed under the GPL too.  That means that his customers
get the same right: they can distribute the Pro version themselves
under the GPL, and in particular, they are allowed to do so for no
money if they want.

-- 
Martin Geisler                                     GnuPG Key: 0x7E45DD38

PHP EXIF Library      |  PHP Weather             |  PHP Shell
http://pel.sf.net/    |  http://phpweather.net/  |  http://mgeisler.net/
Read/write EXIF data  |  Show current weather    |  A shell in a browser
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 188 bytes
Desc: not available
Url : http://comox.textdrive.com/pipermail/wp-hackers/attachments/20050709/a07dd2ef/attachment.bin
From m at mullenweg.com  Sat Jul  9 15:54:00 2005
From: m at mullenweg.com (Matthew Mullenweg)
Date: Sat Jul  9 15:54:09 2005
Subject: [wp-hackers] 500 euros for WP + plugins
In-Reply-To: <42CF2CBA.9040905@skippy.net>
References: <42CF2A00.2040402@mullenweg.com> <42CF2CBA.9040905@skippy.net>
Message-ID: <42CFF318.4060308@mullenweg.com>

Scott Merrill wrote:
> Unless the WordPress copyright holders have extended to Denis a special 
> license for WordPress?  I'm less cool with that, but I fully acknowledge 
> that it is the copyright holder's perogative to do so.

We've never granted special licenses to WP as far as I know, it's always 
been GPL.

-- 
Matt Mullenweg
  http://photomatt.net | http://wordpress.org
http://pingomatic.com | http://cnet.com
From m at mullenweg.com  Sat Jul  9 16:01:11 2005
From: m at mullenweg.com (Matthew Mullenweg)
Date: Sat Jul  9 16:01:16 2005
Subject: [wp-hackers] 500 euros for WP + plugins
In-Reply-To: <000001c5846a$01f35050$6702a8c0@DB>
References: <000001c5846a$01f35050$6702a8c0@DB>
Message-ID: <42CFF4C7.4090802@mullenweg.com>

Denis de Bernardy wrote:
> @Matt: thanks for the link. :)

No prob, good luck.

> Of course. That's what community-driven software development is all about.
> :)

If you decide so you could probably share the whole package, I doubt 
that there is much overlap between the WP hacker community and those 
that would pay for the package.

-- 
Matt Mullenweg
  http://photomatt.net | http://wordpress.org
http://pingomatic.com | http://cnet.com
From ryan at boren.nu  Sat Jul  9 17:00:05 2005
From: ryan at boren.nu (Ryan Boren)
Date: Sat Jul  9 17:00:15 2005
Subject: [wp-hackers] User Capabilities
In-Reply-To: <1120858481.12652.17.camel@portnoy.fuzzybelly.org>
References: <1120196075.7972.0.camel@portnoy.fuzzybelly.org>
	<42C4DD1E.5080807@txfx.net>
	<1120231038.15622.19.camel@portnoy.fuzzybelly.org>
	<42C56271.8010105@wltc.net>
	<1120602422.3844.114.camel@portnoy.fuzzybelly.org>
	<012601c58245$7d2de040$6402a8c0@DELL8600>
	<42CC0A48.8080905@midnightcircus.com>
	<1120796682.3844.165.camel@portnoy.fuzzybelly.org>
	<42CE9769.80702@midnightcircus.com>
	<42572.64.101.146.91.1120854503.squirrel@webmail.barclay.textdrive.com>
	<1120858481.12652.17.camel@portnoy.fuzzybelly.org>
Message-ID: <1120928406.22248.7.camel@portnoy.fuzzybelly.org>

On Fri, 2005-07-08 at 16:34 -0500, Ryan Boren wrote:
> > > I've attached new files to try with changes that look to me like they
> > > work.  It builds a complete list of caps when WP_User is created by
> > > reading the user roles recursively.  Apply my patch over Ryan's and
> > > replace the capabilities.php file with this new one.  You'll need to
> > > delete the options table row that contains the roles and run the upgrade
> > > to see the recursive roles work.
> > >
> > > Hint: echo $current_user->caps from admin-footer.php.
> > 
> > I'll give it a try when I get home.
> 
> I'm not sure about having roles reference other roles.  If a privilege
> is removed for one role, the privilege is lost to higher roles as well.
> If manage_links is removed for the Managing Editor, the Publisher loses
> that priv as well unless it is separately added to the Publisher role.
> I think each role should be self contained.
> 
> Also, if we expand the role caps into the user caps it is possible for
> the user caps to get saved to the DB in this expanded state.  The user
> caps will no longer reference a role and no longer reflect changes made
> to the role.

Perhaps WP_User should have separate arrays for individual capabilities
and roles.  Your merge code could be used to create a third array that
would contain the full operating set of capabilities.  This array would
be checked by has_cap() but would be not be persisted.  Any time the
role or capability arrays change the merge would be rerun.

Adding some dedicated role management methods to WP_User might be handy.
add_role(), remove_role(), and maybe a set_role() shortcut used by the
default UI for changing a user's role (assuming they only have one).
remove_role() could enforce a "you can't delete the last role" rule.

Whaddya think?

Ryan

From robmientjes at gmail.com  Sat Jul  9 17:04:48 2005
From: robmientjes at gmail.com (Rob Mientjes)
Date: Sat Jul  9 17:04:57 2005
Subject: [wp-hackers] 500 euros for WP + plugins
In-Reply-To: <42CF2A00.2040402@mullenweg.com>
References: <42CF2A00.2040402@mullenweg.com>
Message-ID: <e8e97f9f050709100459e7d636@mail.gmail.com>

On 7/9/05, Matt Mullenweg <m@mullenweg.com> wrote:
> I'm curious how people feel about this:

I know what goes on in the minds of many when they see this, but in
fact, I think it's smart and well, can't really say he shouldn't do
it. It's okay, because people who don't want the hassle can pay
someone to do it all. Obviously it _should_ be shared so the people
who dare do it themselves still can. That's the thought behind GPL for
me. Make money of it, but also provide others the exact same means to
do so.
-- 
Cheers,
Rob.

http://zooibaai.nl/ | http://digital-proof.org/
http://design.zooibaai.nl/ | More soon...
From davebytes at comcast.net  Sat Jul  9 18:33:33 2005
From: davebytes at comcast.net (David Chait)
Date: Sat Jul  9 18:33:57 2005
Subject: [wp-hackers] 500 euros for WP + plugins
References: <42CF2A00.2040402@mullenweg.com>
Message-ID: <00c601c584b4$b5f88530$6e01a8c0@sixfour>

Good for him!

I've been thinking about this for well over a year now, and I'm really torn 
by it.  If more people donated (thanks to those that have!!), it wouldn't be 
a question -- if everyone who downloads and puts my plugins to good use 
would just donate $1-10 apiece, I'd have NO problem covering my 'costs' 
maintaining and enhancing things.  But as it is, I'm seeing similar plugins 
for certain other blog programs selling for decent money (and apparently 
they are selling...), and at $100 a pop with a few dozen 'subscribers' I 
wouldn't have to consider giving up the hobby I love (in order to focus on 
paying contract development work..).  As it is, I might >have< to revamp a 
few of my plugins and make them available only to paid customers.

I agree it seems like he might be 'over-charging', including the 
update/hosting stuff, but if he can sell it, well, capitalism is all about 
charging what the market can bear, supply and demand, etc., etc.  If there's 
enough demand, and he does well, I can promise you that others will follow 
suit, and a market will develop around WP.  Of course, given that many of 
his plugins were already released, and that some of his 'add-ons' for the 
Pro package aren't as 'rocket science' as a few of his earlier things, folks 
can go with what's already out there and build what they need.  The people 
who just want it up and running will pay something to have it done for them. 
How much is to be seen.

It shows that WP is evolving beyond its origins into something much bigger. 
This was the next natural step.  It follows the stages of the N*ke sites and 
BBs, where paid hosting, paid sites, paid themes, etc. are a natural part of 
trying to merge open source with people needing to earn money. ;)

-d

----- Original Message ----- 
From: "Matt Mullenweg" <m@mullenweg.com>
To: <wp-hackers@lists.automattic.com>
Sent: Friday, July 08, 2005 9:36 PM
Subject: [wp-hackers] 500 euros for WP + plugins


> I'm curious how people feel about this:
>
> http://www.semiologic.com/projects/sem-theme-pro/
>
> -- 
> Matt Mullenweg
> http://photomatt.net  | http://wordpress.org
> http://pingomatic.com | http://cnet.com
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
> 

From amit at igeek.info  Sat Jul  9 19:29:45 2005
From: amit at igeek.info (Amit Gupta)
Date: Sat Jul  9 19:30:05 2005
Subject: [wp-hackers] 500 euros for WP + plugins
Message-ID: <000801c584bc$93d62450$57ebd4cb@unicorn>


Thanks Mark, that does clear up parts of GPL that I didn't understand and some misconceptions that GPL software can't be sold. Until now, I thought that you can't sell GPL software but can charge to distribute it. :)

-----
Amit Gupta

|| Canned!! -- my Atropine || iG:Syntax Hiliter v3.1 ||
|| iGEEK.INFO || Free Nokia Ringtones || Online Gaming @ Games Planet || 




---------- Original Message from mark.wordpress@txfx.net ----------
mit Gupta wrote: 
I've read the GPL quite a number of times and just read it again!! As I understand it, you can charge for supplying the software(like RedHat used to charge for Linux by providing it on CDs) and you can charge for any support or support materials like manuals, handbooks etc. but you can't charge for the code, the software. Am I wrong in understanding GPL? If I'm wrong, then would you please put me right & explain where I am wrong in understand it?(we'll keep the GPL in context of this topic only & not discuss other parts of GPL if not relevant here)

http://www.gnu.org/licenses/gpl-faq.html#DoesTheGPLAllowMoney


 Does the GPL allow me to sell copies of the program for money?
    Yes, the GPL allows everyone to do this. The right to sell copies is part of the definition of free software. Except in one special situation, there is no limit on what price you can charge. (The one exception is the required written offer to provide source code that must accompany binary-only release.)
http://www.gnu.org/licenses/gpl-faq.html#DoesTheGPLRequireAvailabilityToPublic


If I distribute GPL'd software for a fee, am I required to also make it available to the public without a charge?
    No. However, if someone pays your fee and gets a copy, the GPL gives them the freedom to release it to the public, with or without a fee. For example, someone could pay your fee, and then put her copy on a web site for the general public.

See also:
http://www.gnu.org/philosophy/selling.html

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://comox.textdrive.com/pipermail/wp-hackers/attachments/20050709/e141a8cd/attachment.html
From amit at igeek.info  Sat Jul  9 19:36:40 2005
From: amit at igeek.info (Amit Gupta)
Date: Sat Jul  9 19:36:55 2005
Subject: [wp-hackers] Re: 500 euros for WP + plugins
Message-ID: <000f01c584bd$89b4a590$57ebd4cb@unicorn>


Martin
Please read what you quoted on me again!! I did say the same thing as you said. Denis can distribute the software for a fee and has the right for not giving it for free but those who buy it from him for a fee have every right to distribute it for fee or free. :)

-----
Amit Gupta

|| Canned!! -- my Atropine || iG:Syntax Hiliter v3.1 ||
|| iGEEK.INFO || Free Nokia Ringtones || Online Gaming @ Games Planet || 




---------- Original Message from mgeisler@mgeisler.net ----------
"Amit Gupta" <amit@igeek.info> writes:

> On Fri, 08 Jul 2005 "Firas D." <fd@firasd.org> wrote:
>> Although that part about 'An entire collection of (debugged) third
>> party plugins, all one click installs' does make my stomach churn a
>> wee bit. Which plugins, how debugged, going to share the source..?
>
> is there any thing in GPL under which he's required to share the
> source if he modifies it?  I don't think so!!  As I understand GPL,
> it states that the person is required to give out the source of the
> application and any changes he makes, but he can do that at his own
> discretion!!  He may agree to provide you the source and not to me,
> that's his choice, but nothing stops you from sharing it with me or
> anyone else, that's GPL's freedom.  So why does it makes your
> stomach churn?

Take a look at the GPL FAQ, especially the question about selling
programs licensed under the GPL:

  
http://www.fsf.org/licensing/licenses/gpl-faq.html#DoesTheGPLAllowMoney

The crusual point is that the GPL tells you what rights you have to
(re)distribute programs, and a work licensed under the GPL can be
redistributed only under the GPL.

So if Denis' work is a derived work of WordPress, then his Pro theme
must be distributed under the GPL too.  That means that his customers
get the same right: they can distribute the Pro version themselves
under the GPL, and in particular, they are allowed to do so for no
money if they want.

-- 
Martin Geisler

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://comox.textdrive.com/pipermail/wp-hackers/attachments/20050709/c7acdcc9/attachment.html
From amit at igeek.info  Sat Jul  9 19:45:01 2005
From: amit at igeek.info (Amit Gupta)
Date: Sat Jul  9 19:45:28 2005
Subject: [wp-hackers] 500 euros for WP + plugins
Message-ID: <001601c584be$b40227e0$57ebd4cb@unicorn>


On Sat, 09 Jul 2005 "Matthew Mullenweg" <m@mullenweg.com> wrote:
> We've never granted special licenses to WP as far as I know, it's 
> always been GPL.
would you consider releasing WP under any other license to all or selected parties in future Matt?
also, can you license WP under anything other than GPL? I think I read a blog post by you where you said that since WP is under GPL, it'll always remain so and won't/can't be re-licensed!!

-----
Amit Gupta

|| Canned!! -- my Atropine || iG:Syntax Hiliter v3.1 ||
|| iGEEK.INFO || Free Nokia Ringtones || Online Gaming @ Games Planet || 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://comox.textdrive.com/pipermail/wp-hackers/attachments/20050709/88c69a01/attachment.html
From false.hopes at gmail.com  Sat Jul  9 21:08:58 2005
From: false.hopes at gmail.com (Robert Deaton)
Date: Sat Jul  9 21:09:03 2005
Subject: [wp-hackers] 500 euros for WP + plugins
In-Reply-To: <001601c584be$b40227e0$57ebd4cb@unicorn>
References: <001601c584be$b40227e0$57ebd4cb@unicorn>
Message-ID: <a491f91d05070914081db2acb8@mail.gmail.com>

WordPress can't really be relicensed under something non-GPL compatible 
because it uses various bits of code from other GPL projects. Sure.. take 
out the IXR, Magpie, the WPDB class, and maybe other bits of code, and then 
it could be relicensed, but where would we be without all that?

On 7/9/05, Amit Gupta <amit@igeek.info> wrote:
> 
>  On Sat, 09 Jul 2005 "Matthew Mullenweg" <m@mullenweg.com> wrote:
> > We've never granted special licenses to WP as far as I know, it's 
> > always been GPL.
> would you consider releasing WP under any other license to all or selected 
> parties in future Matt?
> also, can you license WP under anything other than GPL? I think I read a 
> blog post by you where you said that since WP is under GPL, it'll always 
> remain so and won't/can't be re-licensed!!
> 
> -----
> Amit Gupta
> 
> || Canned!! -- my Atropine <http://blog.igeek.info/> || iG:Syntax Hiliter 
> v3.1<http://blog.igeek.info/still-fresh/2005/06/29/let-the-code-be-colourised/>||
> || iGEEK.INFO <http://www.igeek.info/> || Free Nokia Ringtones<http://www.igeek.info/ringtones.php>|| Online 
> Gaming @ Games Planet <http://www.igeek.info/games.php> || 
> 
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
> 
> 
> 


-- 
--Robert Deaton
http://somethingunpredictable.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://comox.textdrive.com/pipermail/wp-hackers/attachments/20050709/5d7d6573/attachment-0001.html
From amit at igeek.info  Sat Jul  9 21:36:59 2005
From: amit at igeek.info (Amit Gupta)
Date: Sat Jul  9 21:37:15 2005
Subject: [wp-hackers] 500 euros for WP + plugins
Message-ID: <000801c584ce$5aa920d0$57ebd4cb@unicorn>


On Sat, 9 Jul 2005 "Robert Deaton" <false.hopes@gmail.com> wrote:
> WordPress can't really be relicensed under something non-GPL compatible because it
> uses various bits of code from other GPL projects. Sure.. take out the IXR, Magpie,
> the WPDB class, and maybe other bits of code, and then it could be relicensed, but
> where would we be without all that?

No, I wasn't talking about taking out the GPLed components from WP, I was merely asking that can WordPress be re-licensed under any other license? Perhaps a GPL compatible license? I'm asking this because I read somewhere(someplace else besides Matt's post) that when you license something as GPL, you can't re-license it unless you do-away with older code & write from scratch. Now I do think that this is not quite right as some-one can write the next version of the software and can make it GPL compatible, being a derivative work, but I'm not sure on this!!

Also, are all licenses listed at http://www.opensource.org/licenses/index.php GPL Compatible or only the ones mentioned at http://www.gnu.org/philosophy/license-list.html#GPLCompatibleLicenses are GPL Compatible?

-----
Amit Gupta

|| Canned!! -- my Atropine || iG:Syntax Hiliter v3.1 ||
|| iGEEK.INFO || Free Nokia Ringtones || Online Gaming @ Games Planet || 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://comox.textdrive.com/pipermail/wp-hackers/attachments/20050709/9adecf85/attachment.html
From skippy at skippy.net  Sat Jul  9 21:48:35 2005
From: skippy at skippy.net (Scott Merrill)
Date: Sat Jul  9 21:48:38 2005
Subject: [wp-hackers] 500 euros for WP + plugins
In-Reply-To: <000801c584ce$5aa920d0$57ebd4cb@unicorn>
References: <000801c584ce$5aa920d0$57ebd4cb@unicorn>
Message-ID: <42D04633.3000508@skippy.net>

Amit Gupta wrote:
>  
> On Sat, 9 Jul 2005 "Robert Deaton" <false.hopes@gmail.com 
> <mailto:false.hopes@gmail.com>> wrote:
>  > WordPress can't really be relicensed under something non-GPL 
> compatible because it
>  > uses various bits of code from other GPL projects. Sure.. take out 
> the IXR, Magpie,
>  > the WPDB class, and maybe other bits of code, and then it could be 
> relicensed, but
>  > where would we be without all that?
> 
> No, I wasn't talking about taking out the GPLed components from WP, I 
> was merely asking that can WordPress be re-licensed under any other 
> license? Perhaps a GPL compatible license? I'm asking this because I 
> read somewhere(someplace else besides Matt's post) that when you license 
> something as GPL, you can't re-license it unless you do-away with older 
> code & write from scratch. Now I do think that this is not quite right 
> as some-one can write the next version of the software and can make it 
> GPL compatible, being a derivative work, but I'm not sure on this!!

The copyright owner is allowed to relicense his or her work whenever 
they feel like.

If Matt suddenly licensed WordPress under an Apache license, for 
example, all future releases would be restricted under the Apache terms. 
  All _previous_ releases would still be GPL licensed.

> Also, are all licenses listed at 
> http://www.opensource.org/licenses/index.php GPL Compatible or only the 
> ones mentioned at 
> http://www.gnu.org/philosophy/license-list.html#GPLCompatibleLicenses are 
> GPL Compatible?

Open Source and Free Software are very different concepts.

Only the Free Software Foundation is in position to decide which license 
are GPL compatible.

-- 
skippy@skippy.net | http://skippy.net/

gpg --keyserver pgp.mit.edu --recv-keys 9CFA4B35
506C F8BB 17AE 8A05 0B49  3544 476A 7DEC 9CFA 4B35
From epierce at usf.edu  Sat Jul  9 21:51:14 2005
From: epierce at usf.edu (Eric Pierce)
Date: Sat Jul  9 21:51:18 2005
Subject: [wp-hackers] 500 euros for WP + plugins
In-Reply-To: <000801c584ce$5aa920d0$57ebd4cb@unicorn>
References: <000801c584ce$5aa920d0$57ebd4cb@unicorn>
Message-ID: <F0B33AA6-06CA-468B-B6CB-E54776070D2D@usf.edu>



On Jul 9, 2005, at 5:36 PM, Amit Gupta wrote:

>
> On Sat, 9 Jul 2005 "Robert Deaton" <false.hopes@gmail.com> wrote:
> > WordPress can't really be relicensed under something non-GPL  
> compatible because it
> > uses various bits of code from other GPL projects. Sure.. take  
> out the IXR, Magpie,
> > the WPDB class, and maybe other bits of code, and then it could  
> be relicensed, but
> > where would we be without all that?
>
> No, I wasn't talking about taking out the GPLed components from WP,  
> I was merely asking that can WordPress be re-licensed under any  
> other license? Perhaps a GPL compatible license? I'm asking this  
> because I read somewhere(someplace else besides Matt's post) that  
> when you license something as GPL, you can't re-license it unless  
> you do-away with older code & write from scratch. Now I do think  
> that this is not quite right as some-one can write the next version  
> of the software and can make it GPL compatible, being a derivative  
> work, but I'm not sure on this!!
>
I believe that if all of the copy-right holders agreed, then the  
current code base could be transferred to a different license.  The  
reason that is VERY unlikely to happen is that it would be nearly  
impossible to get that many people to agree to change the license.   
The GPL'd components would also have to be replaced by licensed code  
or be rewritten from scratch.
In addition, this license change would only affect distribution of  
the code after the change date.  All code that was distributed before  
the change would still be under the GPL and could be modified and  
redistributed by anyone.  Basically what would happen is that the  
project would fork and the new fork would be under a non-GPL  
license.  The GPL'd version could still be maintained by anyone that  
wanted to work on it.

> Also, are all licenses listed at http://www.opensource.org/licenses/ 
> index.php GPL Compatible or only the ones mentioned at http:// 
> www.gnu.org/philosophy/license-list.html#GPLCompatibleLicenses are  
> GPL Compatible?
>
Since the GPL is controlled by the Free Software Foundation, they  
define what licenses are compatible.


> -----
> Amit Gupta
>
> || Canned!! -- my Atropine || iG:Syntax Hiliter v3.1 ||
> || iGEEK.INFO || Free Nokia Ringtones || Online Gaming @ Games  
> Planet ||
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>


#########################################################
Eric Pierce, RHCE                  Phone: (813) 974-8868
Academic Computing                 Fax:   (813) 974-1799
University of South Florida        Email: epierce@usf.edu

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://comox.textdrive.com/pipermail/wp-hackers/attachments/20050709/2a95e73e/attachment.html
From epierce at usf.edu  Sat Jul  9 21:57:07 2005
From: epierce at usf.edu (Eric Pierce)
Date: Sat Jul  9 21:57:03 2005
Subject: [wp-hackers] 500 euros for WP + plugins
In-Reply-To: <42D04633.3000508@skippy.net>
References: <000801c584ce$5aa920d0$57ebd4cb@unicorn>
	<42D04633.3000508@skippy.net>
Message-ID: <B5DED72E-F4C9-4229-AB79-7D7BE637388E@usf.edu>



On Jul 9, 2005, at 5:48 PM, Scott Merrill wrote:
>>
>
> The copyright owner is allowed to relicense his or her work  
> whenever they feel like.
>
> If Matt suddenly licensed WordPress under an Apache license, for  
> example, all future releases would be restricted under the Apache  
> terms.  All _previous_ releases would still be GPL licensed.

It would have to be more than Matt that would have to OK the change.   
Every person who has ever had a patch committed to the WordPress  
source would also have to agree to the change because they retain the  
copyright to their work under the GPL.  The only exeption to this is  
if the copyright is explicitly transferred to another person/entity,  
such as with the developers of many of the GNU tools that have given  
their copyright privileges to the FSF.

-Eric
From turnip at turnipspatch.com  Sat Jul  9 23:03:16 2005
From: turnip at turnipspatch.com (Jonathan Leighton)
Date: Sat Jul  9 22:03:28 2005
Subject: [wp-hackers] 500 euros for WP + plugins
In-Reply-To: <42D04633.3000508@skippy.net>
References: <000801c584ce$5aa920d0$57ebd4cb@unicorn>
	<42D04633.3000508@skippy.net>
Message-ID: <42D057B4.8090405@turnipspatch.com>

Scott Merrill wrote:

> Amit Gupta wrote:
>
>>  
>> On Sat, 9 Jul 2005 "Robert Deaton" <false.hopes@gmail.com
>> <mailto:false.hopes@gmail.com>> wrote:
>>  > WordPress can't really be relicensed under something non-GPL
>> compatible because it
>>  > uses various bits of code from other GPL projects. Sure.. take out
>> the IXR, Magpie,
>>  > the WPDB class, and maybe other bits of code, and then it could be
>> relicensed, but
>>  > where would we be without all that?
>>
>> No, I wasn't talking about taking out the GPLed components from WP, I
>> was merely asking that can WordPress be re-licensed under any other
>> license? Perhaps a GPL compatible license? I'm asking this because I
>> read somewhere(someplace else besides Matt's post) that when you
>> license something as GPL, you can't re-license it unless you do-away
>> with older code & write from scratch. Now I do think that this is not
>> quite right as some-one can write the next version of the software
>> and can make it GPL compatible, being a derivative work, but I'm not
>> sure on this!!
>
> The copyright owner is allowed to relicense his or her work whenever
> they feel like.
>
> If Matt suddenly licensed WordPress under an Apache license, for
> example, all future releases would be restricted under the Apache
> terms.  All _previous_ releases would still be GPL licensed.

Not entirely correct -- every single person responsible for code in
WordPress would have to agree. Matt only holds the copyright to the code
*he* has written, not all of it. As there have been various patches from
various people, it would be very very inpractical to even *contact*
everybody, let alone get them to agree.

-- 
Jonathan Leighton aka. Turnip
http://turnipspatch.com/ | http://digital-proof.org/

From skippy at skippy.net  Sat Jul  9 22:03:47 2005
From: skippy at skippy.net (Scott Merrill)
Date: Sat Jul  9 22:03:47 2005
Subject: [wp-hackers] 500 euros for WP + plugins
In-Reply-To: <B5DED72E-F4C9-4229-AB79-7D7BE637388E@usf.edu>
References: <000801c584ce$5aa920d0$57ebd4cb@unicorn>	<42D04633.3000508@skippy.net>
	<B5DED72E-F4C9-4229-AB79-7D7BE637388E@usf.edu>
Message-ID: <42D049C3.1090108@skippy.net>

Eric Pierce wrote:
> On Jul 9, 2005, at 5:48 PM, I wrote:
>> If Matt suddenly licensed WordPress under an Apache license, for  
>> example, all future releases would be restricted under the Apache  
>> terms.  All _previous_ releases would still be GPL licensed.
> 
> 
> It would have to be more than Matt that would have to OK the change.   

Yes, I understand the distinction.  I was making an overly simplistic 
example for Amit to understand that previously released works would not 
have their licenses altered.

Thanks for the thorough explication, though.

-- 
skippy@skippy.net | http://skippy.net/

gpg --keyserver pgp.mit.edu --recv-keys 9CFA4B35
506C F8BB 17AE 8A05 0B49  3544 476A 7DEC 9CFA 4B35
From amit at igeek.info  Sat Jul  9 23:11:02 2005
From: amit at igeek.info (Amit Gupta)
Date: Sat Jul  9 23:11:18 2005
Subject: [wp-hackers] 500 euros for WP + plugins
Message-ID: <000801c584db$7d0d3910$57ebd4cb@unicorn>


On Sat, 09 Jul 2005 "Eric Pierce" <epierce@usf.edu> wrote:
> I believe that if all of the copy-right holders agreed, then the current code base
> could be transferred to a different license.  The reason that is VERY unlikely to
> happen is that it would be nearly impossible to get that many people to agree to
> change the license.  The GPL'd components would also have to be replaced by licensed
> code or be rewritten from scratch.
> In addition, this license change would only affect distribution of the code after the
> change date.  All code that was distributed before the change would still be under
> the GPL and could be modified and redistributed by anyone.  Basically what would
> happen is that the project would fork and the new fork would be under a non-GPL
> license.  The GPL'd version could still be maintained by anyone that wanted to work on it.

lol, I think you went too far with forking etc., I was merely asking if the license of WordPress can be changed, I think I should've asked, if the license of a GPLed software can be changed, instead of pointing at WordPress. But thanks for the explanation anyway.

Thanks to everyone who explained bits and pieces to me, that was good, helped me clear out a lot of misconceptions I had with/about GPL. :)

-----
Amit Gupta

|| Canned!! -- my Atropine || iG:Syntax Hiliter v3.1 ||
|| iGEEK.INFO || Free Nokia Ringtones || Online Gaming @ Games Planet || 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://comox.textdrive.com/pipermail/wp-hackers/attachments/20050709/f30d29eb/attachment.html
From ringmaster at midnightcircus.com  Sun Jul 10 07:06:18 2005
From: ringmaster at midnightcircus.com (Owen Winkler)
Date: Sun Jul 10 07:14:00 2005
Subject: [wp-hackers] User Capabilities
In-Reply-To: <1120928406.22248.7.camel@portnoy.fuzzybelly.org>
References: <1120196075.7972.0.camel@portnoy.fuzzybelly.org>	<42C4DD1E.5080807@txfx.net>	<1120231038.15622.19.camel@portnoy.fuzzybelly.org>	<42C56271.8010105@wltc.net>	<1120602422.3844.114.camel@portnoy.fuzzybelly.org>	<012601c58245$7d2de040$6402a8c0@DELL8600>	<42CC0A48.8080905@midnightcircus.com>	<1120796682.3844.165.camel@portnoy.fuzzybelly.org>	<42CE9769.80702@midnightcircus.com>	<42572.64.101.146.91.1120854503.squirrel@webmail.barclay.textdrive.com>	<1120858481.12652.17.camel@portnoy.fuzzybelly.org>
	<1120928406.22248.7.camel@portnoy.fuzzybelly.org>
Message-ID: <42D0C8EA.1020801@midnightcircus.com>

Ryan Boren wrote:

>I'm not sure about having roles reference other roles.  If a privilege
>is removed for one role, the privilege is lost to higher roles as well.
>If manage_links is removed for the Managing Editor, the Publisher loses
>that priv as well unless it is separately added to the Publisher role.
>I think each role should be self contained.
>  
>
Hmm.  Ok.  So then does "Publisher" need not only level_10, level_9, and 
level_8, but also level_1 through level_7?

>Perhaps WP_User should have separate arrays for individual capabilities
>and roles.  Your merge code could be used to create a third array that
>would contain the full operating set of capabilities.  This array would
>be checked by has_cap() but would be not be persisted.  Any time the
>role or capability arrays change the merge would be rerun.
>  
>
Ok, except the merge code I wrote is a bit complicated if we're not 
doing recursion.  My new code is more simple.

>Adding some dedicated role management methods to WP_User might be handy.
>add_role(), remove_role(), and maybe a set_role() shortcut used by the
>default UI for changing a user's role (assuming they only have one).
>remove_role() could enforce a "you can't delete the last role" rule.
>  
>
I think those are great ideas - abstracting these functions to avoid 
messing with the database is wise.

I would also add is_role() to WP_Roles, which is just an alias for a 
single line of code, but makes the code read a lot easier.  I used it.

While trying to debug this, I noticed that my usermeta data kept being 
returned serialized, even though I added code to unserialize it.  It 
turns out that usermeta data is also loaded into $cache_userdata, which 
is updated by update_user_cache().  Now update_user_cache() isn't 
pluggable (oops!), but it is called in wp-settings.php in order to 
detect if the database is installed, presumably without wasting the 
query hit on something throwaway.  So...

My solution: I moved update_user_cache() to pluggable_functions.php.  I 
changed the wp-settings.php check to use update_category_cache() 
instead, and then updated update_category_cache() to return true on 
successful data retrieval.  I also updated update_user_cache() so that 
it unserializes, and I think that solves the matter.

Changes attached:
* Replaced role recursion with flat role cap merge.
* WP_User now has ->roles and ->allcaps.
* Added WP_Roles::is_role() for checking if a string is a valid role name.
* Added WP_User:: add_role(), remove_role(), and set_role() as per above.
* Changed WP_User::remove_cap() so that you can't remove roles with it.
* Changed add_cap() so that you can deny caps with it.
* has_cap() returns true/false based on cap true/false state - user caps 
override role caps.
* Made update_user_cache() pluggable.
* wp-settings.php now checks for db data using update_category_cache() 
instead of update_user_cache().

Has anyone else tried the patch?  If your plugin depends on user levels, 
it might be a good idea to check out these changes before they get 
committed.

What changes will there be to the user admin UI?  How extensive will it 
get?  I imagine that the only thing that *has* to be done is to use a 
dropdown of roles in place of the numeric level gadget.  Oh, how sweet 
that will be, finally!  (Sorted alphabetically?  No numbers anymore...)

Owen

-------------- next part --------------
A non-text attachment was scrubbed...
Name: capabilities.php
Type: text/x-patch
Size: 6173 bytes
Desc: not available
Url : http://comox.textdrive.com/pipermail/wp-hackers/attachments/20050710/d946af03/capabilities-0001.bin
-------------- next part --------------
Index: functions.php
===================================================================
--- functions.php	(revision 2702)
+++ functions.php	(working copy)
@@ -1218,32 +1218,11 @@
 
 function update_category_cache() {
 	global $cache_categories, $wpdb;
-	$dogs = $wpdb->get_results("SELECT * FROM $wpdb->categories");
-	foreach ($dogs as $catt)
-		$cache_categories[$catt->cat_ID] = $catt;
-}
-
-function update_user_cache() {
-	global $cache_userdata, $wpdb;
-	$level_key = $wpdb->prefix . 'user_level';
-	$user_ids = $wpdb->get_col("SELECT user_id FROM $wpdb->usermeta WHERE meta_key = '$level_key'");
-	$user_ids = join(',', $user_ids);
-	$query = apply_filters('user_cache_query', "SELECT * FROM $wpdb->users WHERE ID IN ($user_ids)");
-	if ( $users = $wpdb->get_results( $query ) ) :
-		foreach ($users as $user) :
-			$metavalues = $wpdb->get_results("SELECT meta_key, meta_value FROM $wpdb->usermeta WHERE user_id = '$user->ID'");
-			foreach ( $metavalues as $meta ) {
-				$user->{$meta->meta_key} = $meta->meta_value;
-				// We need to set user_level from meta, not row
-				if ( $wpdb->prefix . 'user_level' == $meta->meta_key )
-					$user->user_level = $meta->meta_value;
-			}
-
-			$cache_userdata[$user->ID] = $user;
-			$cache_userdata[$user->user_login] =& $cache_userdata[$user->ID];
-		endforeach;
+	if($dogs = $wpdb->get_results("SELECT * FROM $wpdb->categories")):
+		foreach ($dogs as $catt)
+			$cache_categories[$catt->cat_ID] = $catt;
 		return true;
-	else : 
+	else:
 		return false;
 	endif;
 }
@@ -1959,11 +1938,38 @@
 	@ header('Pragma: no-cache');
 }
 
+function get_usermeta( $user_id, $meta_key = '') {
+	global $wpdb;
+	$user_id = (int) $user_id;
+
+	if ( !empty($meta_key) ) {
+	$meta_key = preg_replace('|a-z0-9_|i', '', $meta_key);
+		$metas = $wpdb->get_results("SELECT * FROM $wpdb->usermeta WHERE user_id = '$user_id' AND meta_key = '$meta_key'");
+	} else {
+		$metas = $wpdb->get_results("SELECT * FROM $wpdb->usermeta WHERE user_id = '$user_id'");
+	}
+
+	foreach ($metas as $index => $meta) {
+		@ $value = unserialize($meta->meta_key);
+		if ($value !== FALSE)
+			$metas[$index]->meta_key = $value;			
+	}
+
+	if ( !empty($meta_key) )
+		return $metas[0];
+	else
+		return $metas;
+}
+
 function update_usermeta( $user_id, $meta_key, $meta_value ) {
 	global $wpdb;
 	if ( !is_numeric( $user_id ) )
 		return false;
 	$meta_key = preg_replace('|a-z0-9_|i', '', $meta_key);
+
+	if ( is_array($meta_value) || is_object($meta_value) )
+		$meta_value = serialize($meta_value);
+
 	$cur = $wpdb->get_row("SELECT * FROM $wpdb->usermeta WHERE user_id = '$user_id' AND meta_key = '$meta_key'");
 	if ( !$cur ) {
 		$wpdb->query("INSERT INTO $wpdb->usermeta ( user_id, meta_key, meta_value )
@@ -1991,4 +1997,4 @@
 	return preg_replace('/^.*wp-content[\\\\\/]plugins[\\\\\/]/', '', $file);
 }
 
-?>
\ No newline at end of file
+?>
Index: wp-includes/pluggable-functions.php
===================================================================
--- wp-includes/pluggable-functions.php	(revision 2702)
+++ wp-includes/pluggable-functions.php	(working copy)
@@ -19,7 +19,8 @@
 	$user_url    = $userdata->user_url;
 	$user_pass_md5 = md5($userdata->user_pass);
 	$user_identity = $userdata->display_name;
-	$current_user  = $userdata;
+	if ( empty($current_user) )
+		$current_user = new WP_User($user_ID);
 }
 endif;
 
@@ -29,7 +30,7 @@
 	$user_id = (int) $user_id;
 	if ( $user_id == 0 )
 		return false;
-
+		
 	if ( isset( $cache_userdata[$user_id] ) ) 
 		return $cache_userdata[$user_id];
 
@@ -39,20 +40,53 @@
 	$metavalues = $wpdb->get_results("SELECT meta_key, meta_value FROM $wpdb->usermeta WHERE user_id = '$user_id'");
 
 	foreach ( $metavalues as $meta ) {
-		$user->{$meta->meta_key} = $meta->meta_value;
+		@ $value = unserialize($meta->meta_value);
+		if ($value === FALSE)
+			$value = $meta->meta_value;
+		$user->{$meta->meta_key} = $value;
+
 		// We need to set user_level from meta, not row
 		if ( $wpdb->prefix . 'user_level' == $meta->meta_key )
 			$user->user_level = $meta->meta_value;
 	}
 
 	$cache_userdata[$user_id] = $user;
-
 	$cache_userdata[$cache_userdata[$userid]->user_login] =& $cache_userdata[$user_id];
 
 	return $cache_userdata[$user_id];
 }
 endif;
 
+if ( !function_exists('update_user_cache') ) :
+function update_user_cache() {
+	global $cache_userdata, $wpdb;
+	$level_key = $wpdb->prefix . 'user_level';
+	$user_ids = $wpdb->get_col("SELECT user_id FROM $wpdb->usermeta WHERE meta_key = '$level_key'");
+	$user_ids = join(',', $user_ids);
+	$query = apply_filters('user_cache_query', "SELECT * FROM $wpdb->users WHERE ID IN ($user_ids)");
+	if ( $users = $wpdb->get_results( $query ) ) :
+		foreach ($users as $user) :
+			$metavalues = $wpdb->get_results("SELECT meta_key, meta_value FROM $wpdb->usermeta WHERE user_id = '$user->ID'");
+			foreach ( $metavalues as $meta ) {
+				@ $value = unserialize($meta->meta_value);
+				if ($value === FALSE)
+					$value = $meta->meta_value;
+				$user->{$meta->meta_key} = $value;
+				// We need to set user_level from meta, not row
+				if ( $wpdb->prefix . 'user_level' == $meta->meta_key )
+					$user->user_level = $meta->meta_value;
+			}
+
+			$cache_userdata[$user->ID] = $user;
+			$cache_userdata[$user->user_login] =& $cache_userdata[$user->ID];
+		endforeach;
+		return true;
+	else : 
+		return false;
+	endif;
+}
+endif;
+
 if ( !function_exists('get_userdatabylogin') ) :
 function get_userdatabylogin($user_login) {
 	global $cache_userdata, $wpdb;
Index: wp-settings.php
===================================================================
--- wp-settings.php	(revision 2702)
+++ wp-settings.php	(working copy)
@@ -74,7 +74,7 @@
 require_once (ABSPATH . WPINC . '/wp-l10n.php');
 
 $wpdb->hide_errors();
-if ( !update_user_cache() && (!strstr($_SERVER['PHP_SELF'], 'install.php') && !defined('WP_INSTALLING')) ) {
+if ( !update_category_cache() && (!strstr($_SERVER['PHP_SELF'], 'install.php') && !defined('WP_INSTALLING')) ) {
 	if ( strstr($_SERVER['PHP_SELF'], 'wp-admin') )
 		$link = 'install.php';
 	else
@@ -85,6 +85,7 @@
 
 require (ABSPATH . WPINC . '/functions-formatting.php');
 require (ABSPATH . WPINC . '/functions-post.php');
+require (ABSPATH . WPINC . '/capabilities.php');
 require (ABSPATH . WPINC . '/classes.php');
 require (ABSPATH . WPINC . '/template-functions-general.php');
 require (ABSPATH . WPINC . '/template-functions-links.php');
@@ -160,7 +161,8 @@
 $wp_query = new WP_Query();
 $wp_rewrite = new WP_Rewrite();
 $wp = new WP();
+$wp_roles = new WP_Roles();
 
 // Everything is loaded and initialized.
 do_action('init');
-?>
\ No newline at end of file
+?>
Index: wp-admin/post.php
===================================================================
--- wp-admin/post.php	(revision 2702)
+++ wp-admin/post.php	(working copy)
@@ -66,7 +66,7 @@
 
 	$post_ID = $p = (int) $_GET['post'];
 
-	if ( !user_can_edit_post($user_ID, $post_ID) )
+	if ( !current_user_can('edit_post', $post_ID) )
 		die ( __('You are not allowed to edit this post.') );
 
 	if ( !user_can_edit_post($user_ID, $post_ID) )
@@ -322,7 +322,7 @@
 <div class="updated"><p><?php printf(__('Post saved. <a href="%s">View site &raquo;</a>'), get_bloginfo('home')); ?></p></div>
 <?php endif; ?>
 <?php
-	if ( user_can_create_draft($user_ID) ) {
+	if (user_can_create_draft($user_ID)) {
 		$action = 'post';
 		get_currentuserinfo();
 		if ( $drafts = get_users_drafts( $user_ID ) ) {
@@ -332,13 +332,13 @@
 			<?php
 			for ( $i = 0; $i < 15; $i++ ) {
 				$draft = $drafts[$i];
-				if ( 0 != $i )
+				if (0 != $i)
 					echo ', ';
 				$draft->post_title = stripslashes($draft->post_title);
 				if ( empty($draft->post_title) )
 					$draft->post_title = sprintf(__('Post # %s'), $draft->ID);
 				echo "<a href='post.php?action=edit&amp;post=$draft->ID' title='" . __('Edit this draft') . "'>$draft->post_title</a>";
-			}
+				}
 			?>
 			<?php if ( 15 < count($drafts) ) { ?>
 			, <a href="edit.php"><?php echo sprintf(__('and %s more'), (count($drafts) - 15) ); ?> &raquo;</a>
Index: wp-admin/upgrade-functions.php
===================================================================
--- wp-admin/upgrade-functions.php	(revision 2702)
+++ wp-admin/upgrade-functions.php	(working copy)
@@ -226,8 +226,11 @@
 			update_usermeta( $user->ID, 'last_name', $wpdb->escape($user->user_lastname) );
 		if ( !empty( $user->user_nickname ) )
 			update_usermeta( $user->ID, 'nickname', $wpdb->escape($user->user_nickname) );
-		if ( !empty( $user->user_level ) )
+		if ( !empty( $user->user_level ) ) {
 			update_usermeta( $user->ID, $table_prefix . 'user_level', $user->user_level );
+			$role = translate_level_to_role($user->user_level);
+			update_usermeta( $user->ID, $table_prefix . 'capabilities', array($role => true) );
+		}
 		if ( !empty( $user->user_icq ) )
 			update_usermeta( $user->ID, 'icq', $wpdb->escape($user->user_icq) );
 		if ( !empty( $user->user_aim ) )
@@ -749,4 +752,27 @@
 	}
 	return $template;
 }
-?>
\ No newline at end of file
+
+function translate_level_to_role($level) {
+	switch ($level) {
+	case 10:
+	case 9:
+	case 8:
+		return 'publisher';
+	case 7:
+	case 6:
+	case 5:
+		return 'managing_editor';
+	case 4:
+	case 3:
+		return 'copy_editor';
+	case 2:
+		return 'staff_writer';
+	case 1:
+		return 'freelancer';
+	case 0:
+		return 'visitor';
+	}
+}
+
+?>
Index: wp-admin/upgrade-schema.php
===================================================================
--- wp-admin/upgrade-schema.php	(revision 2702)
+++ wp-admin/upgrade-schema.php	(working copy)
@@ -216,6 +216,8 @@
 	// 1.5.1
 	add_option('use_trackback', 0);
 
+	populate_roles();
+
 	// Delete unused options
 	$unusedoptions = array ('blodotgsping_url', 'bodyterminator', 'emailtestonly', 'phoneemail_separator', 'smilies_directory', 'subjectprefix', 'use_bbcode', 'use_blodotgsping', 'use_phoneemail', 'use_quicktags', 'use_weblogsping', 'weblogs_cache_file', 'use_preview', 'use_htmltrans', 'smilies_directory', 'fileupload_allowedusers', 'use_phoneemail', 'default_post_status', 'default_post_category', 'archive_mode', 'time_difference', 'links_minadminlevel', 'links_use_adminlevels', 'links_rating_type', 'links_rating_char', 'links_rating_ignore_zero', 'links_rating_single_image', 'links_rating_image0', 'links_rating_image1', 'links_rating_image2', 'links_rating_image3', 'links_rating_image4', 'links_rating_image5', 'links_rating_image6', 'links_rating_image7', 'links_rating_image8', 'links_rating_image9', 'weblogs_cacheminutes', 'comment_allowed_tags', 'search_engine_friendly_urls', 'default_geourl_lat', 'default_geourl_lon', 'use_default_geourl', 'weblogs_xml_url');
 	foreach ($unusedoptions as $option) :
@@ -229,4 +231,101 @@
 	endforeach;
 }
 
+function populate_roles() {
+	global $table_prefix;
+
+	$roles = array ('publisher' =>
+									array('name' => __('Publisher'),
+											'capabilities' => array(
+												'edit_posts' => true,
+												'edit_others_posts' => true,
+												'edit_published_posts' => true,
+												'publish_posts' => true,
+												'edit_pages' => true,
+												'manage_categories' => true,
+												'manage_links' => true,
+												'upload_images' => true,
+												'manage_options' => true,
+												'switch_themes' => true,
+												'edit_themes' => true,
+												'activate_plugins' => true,
+												'edit_plugins' => true,
+												'edit_users' => true,
+												'edit_files' => true,
+												'read' => true,
+												'level_10' => true,
+												'level_9' => true,
+												'level_8' => true
+												)),
+											
+									'managing_editor' =>
+									array('name' => __('Managing Editor'),
+											'capabilities' => array(
+												'edit_posts' => true,
+												'edit_others_posts' => true,
+												'edit_published_posts' => true,
+												'publish_posts' => true,
+												'edit_pages' => true,
+												'manage_categories' => true,
+												'manage_links' => true,
+												'upload_images' => true,
+												'read' => true,
+												'level_7' => true,
+												'level_6' => true,
+												'level_5' => true
+												)),
+											
+									'copy_editor' =>
+									array('name' => __('Copy Editor'),
+											'capabilities' => array(
+												'edit_posts' => true,
+												'edit_others_posts' => true,
+												'edit_published_posts' => true,
+												'publish_posts' => true,
+												'edit_pages' => true,
+												'upload_images' => true,
+												'read' => true,
+												'level_4' => true,
+												'level_3' => true
+												)),
+											
+									'staff_writer' =>
+									array('name' => __('Staff Writer'),
+											'capabilities' => array(
+												'edit_posts' => true,
+												'publish_posts' => true,
+												'upload_images' => true,
+												'read' => true,
+												'level_2' => true
+												)),
+											
+									'freelancer' =>
+									array('name' => __('Freelancer'),
+											'capabilities' => array(
+												'edit_posts' => true,
+												'read' => true,
+												'level_1' => true
+												)),
+											
+									'designer' =>
+									array('name' => __('Designer'),
+											'capabilities' => array(
+												'edit_themes' => true,
+												'read' => true
+												)),
+											
+									'subscriber' =>
+									array('name' => __('Subscriber'),
+											'capabilities' => array(
+												'read' => true,
+												'level_0' => true
+												)),
+											
+									'inactive' =>
+									array('name' => __('Inactive'),
+												'capabilities' => array())
+									);
+
+	add_option($table_prefix . 'user_roles', $roles);
+}
 ?>
From dmhouse at gmail.com  Sun Jul 10 10:34:02 2005
From: dmhouse at gmail.com (David House)
Date: Sun Jul 10 10:34:08 2005
Subject: [wp-hackers] User Capabilities
In-Reply-To: <42D0C8EA.1020801@midnightcircus.com>
References: <1120196075.7972.0.camel@portnoy.fuzzybelly.org>
	<1120602422.3844.114.camel@portnoy.fuzzybelly.org>
	<012601c58245$7d2de040$6402a8c0@DELL8600>
	<42CC0A48.8080905@midnightcircus.com>
	<1120796682.3844.165.camel@portnoy.fuzzybelly.org>
	<42CE9769.80702@midnightcircus.com>
	<42572.64.101.146.91.1120854503.squirrel@webmail.barclay.textdrive.com>
	<1120858481.12652.17.camel@portnoy.fuzzybelly.org>
	<1120928406.22248.7.camel@portnoy.fuzzybelly.org>
	<42D0C8EA.1020801@midnightcircus.com>
Message-ID: <ebe43d68050710033413061bf8@mail.gmail.com>

On 7/10/05, Owen Winkler <ringmaster@midnightcircus.com> wrote:
> Has anyone else tried the patch?  If your plugin depends on user levels,
> it might be a good idea to check out these changes before they get
> committed.

I'm trying to try this out! What program are you both using to
generate your diffs? GNU patch 2.5.9 is erroring on every single hunk;
I can't apply that diff.

There's no svn subcommand that will apply patches, is there? I don't
think svn merge does it.

-- 
-David House, dmhouse@gmail.com, http://xmouse.ithium.net
From ringmaster at midnightcircus.com  Sun Jul 10 12:38:44 2005
From: ringmaster at midnightcircus.com (Owen Winkler)
Date: Sun Jul 10 12:39:26 2005
Subject: [wp-hackers] User Capabilities
In-Reply-To: <ebe43d68050710033413061bf8@mail.gmail.com>
References: <1120196075.7972.0.camel@portnoy.fuzzybelly.org>	<1120602422.3844.114.camel@portnoy.fuzzybelly.org>	<012601c58245$7d2de040$6402a8c0@DELL8600>	<42CC0A48.8080905@midnightcircus.com>	<1120796682.3844.165.camel@portnoy.fuzzybelly.org>	<42CE9769.80702@midnightcircus.com>	<42572.64.101.146.91.1120854503.squirrel@webmail.barclay.textdrive.com>	<1120858481.12652.17.camel@portnoy.fuzzybelly.org>	<1120928406.22248.7.camel@portnoy.fuzzybelly.org>	<42D0C8EA.1020801@midnightcircus.com>
	<ebe43d68050710033413061bf8@mail.gmail.com>
Message-ID: <42D116D4.9040104@midnightcircus.com>

David House wrote:

>I'm trying to try this out! What program are you both using to
>generate your diffs? GNU patch 2.5.9 is erroring on every single hunk;
>I can't apply that diff.
>
>There's no svn subcommand that will apply patches, is there? I don't
>think svn merge does it.
>  
>
Oops.  I think maybe this diff will work better.  (The capabilities.php 
is the same as the last.)

I'm using TortoiseSVN on Windows to generate and apply patches.  I 
hacked up the last one a bit to remove some media functions from the 
patch and I think I mangled the section for functions.php in the 
process, but I tried this patch myself on a fresh svn Update and it 
worked swell.

I know that command-line svn offers diff output (via svn diff), but I 
don't see the command to apply a patch from SVN.  Maybe give GNU patch 
another try with the included diff?

Owen




-------------- next part --------------
Index: functions.php
===================================================================
--- wp-includes/functions.php	(revision 2702)
+++ wp-includes/functions.php	(working copy)
@@ -1218,32 +1218,11 @@
 
 function update_category_cache() {
 	global $cache_categories, $wpdb;
-	$dogs = $wpdb->get_results("SELECT * FROM $wpdb->categories");
-	foreach ($dogs as $catt)
-		$cache_categories[$catt->cat_ID] = $catt;
-}
-
-function update_user_cache() {
-	global $cache_userdata, $wpdb;
-	$level_key = $wpdb->prefix . 'user_level';
-	$user_ids = $wpdb->get_col("SELECT user_id FROM $wpdb->usermeta WHERE meta_key = '$level_key'");
-	$user_ids = join(',', $user_ids);
-	$query = apply_filters('user_cache_query', "SELECT * FROM $wpdb->users WHERE ID IN ($user_ids)");
-	if ( $users = $wpdb->get_results( $query ) ) :
-		foreach ($users as $user) :
-			$metavalues = $wpdb->get_results("SELECT meta_key, meta_value FROM $wpdb->usermeta WHERE user_id = '$user->ID'");
-			foreach ( $metavalues as $meta ) {
-				$user->{$meta->meta_key} = $meta->meta_value;
-				// We need to set user_level from meta, not row
-				if ( $wpdb->prefix . 'user_level' == $meta->meta_key )
-					$user->user_level = $meta->meta_value;
-			}
-
-			$cache_userdata[$user->ID] = $user;
-			$cache_userdata[$user->user_login] =& $cache_userdata[$user->ID];
-		endforeach;
+	if($dogs = $wpdb->get_results("SELECT * FROM $wpdb->categories")):
+		foreach ($dogs as $catt)
+			$cache_categories[$catt->cat_ID] = $catt;
 		return true;
-	else : 
+	else:
 		return false;
 	endif;
 }
@@ -1959,11 +1938,38 @@
 	@ header('Pragma: no-cache');
 }
 
+function get_usermeta( $user_id, $meta_key = '') {
+	global $wpdb;
+	$user_id = (int) $user_id;
+
+	if ( !empty($meta_key) ) {
+	$meta_key = preg_replace('|a-z0-9_|i', '', $meta_key);
+		$metas = $wpdb->get_results("SELECT * FROM $wpdb->usermeta WHERE user_id = '$user_id' AND meta_key = '$meta_key'");
+	} else {
+		$metas = $wpdb->get_results("SELECT * FROM $wpdb->usermeta WHERE user_id = '$user_id'");
+	}
+
+	foreach ($metas as $index => $meta) {
+		@ $value = unserialize($meta->meta_key);
+		if ($value !== FALSE)
+			$metas[$index]->meta_key = $value;			
+	}
+
+	if ( !empty($meta_key) )
+		return $metas[0];
+	else
+		return $metas;
+}
+
 function update_usermeta( $user_id, $meta_key, $meta_value ) {
 	global $wpdb;
 	if ( !is_numeric( $user_id ) )
 		return false;
 	$meta_key = preg_replace('|a-z0-9_|i', '', $meta_key);
+
+	if ( is_array($meta_value) || is_object($meta_value) )
+		$meta_value = serialize($meta_value);
+
 	$cur = $wpdb->get_row("SELECT * FROM $wpdb->usermeta WHERE user_id = '$user_id' AND meta_key = '$meta_key'");
 	if ( !$cur ) {
 		$wpdb->query("INSERT INTO $wpdb->usermeta ( user_id, meta_key, meta_value )
@@ -1991,4 +1997,4 @@
 	return preg_replace('/^.*wp-content[\\\\\/]plugins[\\\\\/]/', '', $file);
 }
 
-?>
\ No newline at end of file
+?>
Index: wp-includes/pluggable-functions.php
===================================================================
--- wp-includes/pluggable-functions.php	(revision 2702)
+++ wp-includes/pluggable-functions.php	(working copy)
@@ -19,7 +19,8 @@
 	$user_url    = $userdata->user_url;
 	$user_pass_md5 = md5($userdata->user_pass);
 	$user_identity = $userdata->display_name;
-	$current_user  = $userdata;
+	if ( empty($current_user) )
+		$current_user = new WP_User($user_ID);
 }
 endif;
 
@@ -29,7 +30,7 @@
 	$user_id = (int) $user_id;
 	if ( $user_id == 0 )
 		return false;
-
+		
 	if ( isset( $cache_userdata[$user_id] ) ) 
 		return $cache_userdata[$user_id];
 
@@ -39,20 +40,53 @@
 	$metavalues = $wpdb->get_results("SELECT meta_key, meta_value FROM $wpdb->usermeta WHERE user_id = '$user_id'");
 
 	foreach ( $metavalues as $meta ) {
-		$user->{$meta->meta_key} = $meta->meta_value;
+		@ $value = unserialize($meta->meta_value);
+		if ($value === FALSE)
+			$value = $meta->meta_value;
+		$user->{$meta->meta_key} = $value;
+
 		// We need to set user_level from meta, not row
 		if ( $wpdb->prefix . 'user_level' == $meta->meta_key )
 			$user->user_level = $meta->meta_value;
 	}
 
 	$cache_userdata[$user_id] = $user;
-
 	$cache_userdata[$cache_userdata[$userid]->user_login] =& $cache_userdata[$user_id];
 
 	return $cache_userdata[$user_id];
 }
 endif;
 
+if ( !function_exists('update_user_cache') ) :
+function update_user_cache() {
+	global $cache_userdata, $wpdb;
+	$level_key = $wpdb->prefix . 'user_level';
+	$user_ids = $wpdb->get_col("SELECT user_id FROM $wpdb->usermeta WHERE meta_key = '$level_key'");
+	$user_ids = join(',', $user_ids);
+	$query = apply_filters('user_cache_query', "SELECT * FROM $wpdb->users WHERE ID IN ($user_ids)");
+	if ( $users = $wpdb->get_results( $query ) ) :
+		foreach ($users as $user) :
+			$metavalues = $wpdb->get_results("SELECT meta_key, meta_value FROM $wpdb->usermeta WHERE user_id = '$user->ID'");
+			foreach ( $metavalues as $meta ) {
+				@ $value = unserialize($meta->meta_value);
+				if ($value === FALSE)
+					$value = $meta->meta_value;
+				$user->{$meta->meta_key} = $value;
+				// We need to set user_level from meta, not row
+				if ( $wpdb->prefix . 'user_level' == $meta->meta_key )
+					$user->user_level = $meta->meta_value;
+			}
+
+			$cache_userdata[$user->ID] = $user;
+			$cache_userdata[$user->user_login] =& $cache_userdata[$user->ID];
+		endforeach;
+		return true;
+	else : 
+		return false;
+	endif;
+}
+endif;
+
 if ( !function_exists('get_userdatabylogin') ) :
 function get_userdatabylogin($user_login) {
 	global $cache_userdata, $wpdb;
Index: wp-settings.php
===================================================================
--- wp-settings.php	(revision 2702)
+++ wp-settings.php	(working copy)
@@ -74,7 +74,7 @@
 require_once (ABSPATH . WPINC . '/wp-l10n.php');
 
 $wpdb->hide_errors();
-if ( !update_user_cache() && (!strstr($_SERVER['PHP_SELF'], 'install.php') && !defined('WP_INSTALLING')) ) {
+if ( !update_category_cache() && (!strstr($_SERVER['PHP_SELF'], 'install.php') && !defined('WP_INSTALLING')) ) {
 	if ( strstr($_SERVER['PHP_SELF'], 'wp-admin') )
 		$link = 'install.php';
 	else
@@ -85,6 +85,7 @@
 
 require (ABSPATH . WPINC . '/functions-formatting.php');
 require (ABSPATH . WPINC . '/functions-post.php');
+require (ABSPATH . WPINC . '/capabilities.php');
 require (ABSPATH . WPINC . '/classes.php');
 require (ABSPATH . WPINC . '/template-functions-general.php');
 require (ABSPATH . WPINC . '/template-functions-links.php');
@@ -160,7 +161,8 @@
 $wp_query = new WP_Query();
 $wp_rewrite = new WP_Rewrite();
 $wp = new WP();
+$wp_roles = new WP_Roles();
 
 // Everything is loaded and initialized.
 do_action('init');
-?>
\ No newline at end of file
+?>
Index: wp-admin/post.php
===================================================================
--- wp-admin/post.php	(revision 2702)
+++ wp-admin/post.php	(working copy)
@@ -66,7 +66,7 @@
 
 	$post_ID = $p = (int) $_GET['post'];
 
-	if ( !user_can_edit_post($user_ID, $post_ID) )
+	if ( !current_user_can('edit_post', $post_ID) )
 		die ( __('You are not allowed to edit this post.') );
 
 	if ( !user_can_edit_post($user_ID, $post_ID) )
@@ -322,7 +322,7 @@
 <div class="updated"><p><?php printf(__('Post saved. <a href="%s">View site &raquo;</a>'), get_bloginfo('home')); ?></p></div>
 <?php endif; ?>
 <?php
-	if ( user_can_create_draft($user_ID) ) {
+	if (user_can_create_draft($user_ID)) {
 		$action = 'post';
 		get_currentuserinfo();
 		if ( $drafts = get_users_drafts( $user_ID ) ) {
@@ -332,13 +332,13 @@
 			<?php
 			for ( $i = 0; $i < 15; $i++ ) {
 				$draft = $drafts[$i];
-				if ( 0 != $i )
+				if (0 != $i)
 					echo ', ';
 				$draft->post_title = stripslashes($draft->post_title);
 				if ( empty($draft->post_title) )
 					$draft->post_title = sprintf(__('Post # %s'), $draft->ID);
 				echo "<a href='post.php?action=edit&amp;post=$draft->ID' title='" . __('Edit this draft') . "'>$draft->post_title</a>";
-			}
+				}
 			?>
 			<?php if ( 15 < count($drafts) ) { ?>
 			, <a href="edit.php"><?php echo sprintf(__('and %s more'), (count($drafts) - 15) ); ?> &raquo;</a>
Index: wp-admin/upgrade-functions.php
===================================================================
--- wp-admin/upgrade-functions.php	(revision 2702)
+++ wp-admin/upgrade-functions.php	(working copy)
@@ -226,8 +226,11 @@
 			update_usermeta( $user->ID, 'last_name', $wpdb->escape($user->user_lastname) );
 		if ( !empty( $user->user_nickname ) )
 			update_usermeta( $user->ID, 'nickname', $wpdb->escape($user->user_nickname) );
-		if ( !empty( $user->user_level ) )
+		if ( !empty( $user->user_level ) ) {
 			update_usermeta( $user->ID, $table_prefix . 'user_level', $user->user_level );
+			$role = translate_level_to_role($user->user_level);
+			update_usermeta( $user->ID, $table_prefix . 'capabilities', array($role => true) );
+		}
 		if ( !empty( $user->user_icq ) )
 			update_usermeta( $user->ID, 'icq', $wpdb->escape($user->user_icq) );
 		if ( !empty( $user->user_aim ) )
@@ -749,4 +752,27 @@
 	}
 	return $template;
 }
-?>
\ No newline at end of file
+
+function translate_level_to_role($level) {
+	switch ($level) {
+	case 10:
+	case 9:
+	case 8:
+		return 'publisher';
+	case 7:
+	case 6:
+	case 5:
+		return 'managing_editor';
+	case 4:
+	case 3:
+		return 'copy_editor';
+	case 2:
+		return 'staff_writer';
+	case 1:
+		return 'freelancer';
+	case 0:
+		return 'visitor';
+	}
+}
+
+?>
Index: wp-admin/upgrade-schema.php
===================================================================
--- wp-admin/upgrade-schema.php	(revision 2702)
+++ wp-admin/upgrade-schema.php	(working copy)
@@ -216,6 +216,8 @@
 	// 1.5.1
 	add_option('use_trackback', 0);
 
+	populate_roles();
+
 	// Delete unused options
 	$unusedoptions = array ('blodotgsping_url', 'bodyterminator', 'emailtestonly', 'phoneemail_separator', 'smilies_directory', 'subjectprefix', 'use_bbcode', 'use_blodotgsping', 'use_phoneemail', 'use_quicktags', 'use_weblogsping', 'weblogs_cache_file', 'use_preview', 'use_htmltrans', 'smilies_directory', 'fileupload_allowedusers', 'use_phoneemail', 'default_post_status', 'default_post_category', 'archive_mode', 'time_difference', 'links_minadminlevel', 'links_use_adminlevels', 'links_rating_type', 'links_rating_char', 'links_rating_ignore_zero', 'links_rating_single_image', 'links_rating_image0', 'links_rating_image1', 'links_rating_image2', 'links_rating_image3', 'links_rating_image4', 'links_rating_image5', 'links_rating_image6', 'links_rating_image7', 'links_rating_image8', 'links_rating_image9', 'weblogs_cacheminutes', 'comment_allowed_tags', 'search_engine_friendly_urls', 'default_geourl_lat', 'default_geourl_lon', 'use_default_geourl', 'weblogs_xml_url');
 	foreach ($unusedoptions as $option) :
@@ -229,4 +231,101 @@
 	endforeach;
 }
 
+function populate_roles() {
+	global $table_prefix;
+
+	$roles = array ('publisher' =>
+									array('name' => __('Publisher'),
+											'capabilities' => array(
+												'edit_posts' => true,
+												'edit_others_posts' => true,
+												'edit_published_posts' => true,
+												'publish_posts' => true,
+												'edit_pages' => true,
+												'manage_categories' => true,
+												'manage_links' => true,
+												'upload_images' => true,
+												'manage_options' => true,
+												'switch_themes' => true,
+												'edit_themes' => true,
+												'activate_plugins' => true,
+												'edit_plugins' => true,
+												'edit_users' => true,
+												'edit_files' => true,
+												'read' => true,
+												'level_10' => true,
+												'level_9' => true,
+												'level_8' => true
+												)),
+											
+									'managing_editor' =>
+									array('name' => __('Managing Editor'),
+											'capabilities' => array(
+												'edit_posts' => true,
+												'edit_others_posts' => true,
+												'edit_published_posts' => true,
+												'publish_posts' => true,
+												'edit_pages' => true,
+												'manage_categories' => true,
+												'manage_links' => true,
+												'upload_images' => true,
+												'read' => true,
+												'level_7' => true,
+												'level_6' => true,
+												'level_5' => true
+												)),
+											
+									'copy_editor' =>
+									array('name' => __('Copy Editor'),
+											'capabilities' => array(
+												'edit_posts' => true,
+												'edit_others_posts' => true,
+												'edit_published_posts' => true,
+												'publish_posts' => true,
+												'edit_pages' => true,
+												'upload_images' => true,
+												'read' => true,
+												'level_4' => true,
+												'level_3' => true
+												)),
+											
+									'staff_writer' =>
+									array('name' => __('Staff Writer'),
+											'capabilities' => array(
+												'edit_posts' => true,
+												'publish_posts' => true,
+												'upload_images' => true,
+												'read' => true,
+												'level_2' => true
+												)),
+											
+									'freelancer' =>
+									array('name' => __('Freelancer'),
+											'capabilities' => array(
+												'edit_posts' => true,
+												'read' => true,
+												'level_1' => true
+												)),
+											
+									'designer' =>
+									array('name' => __('Designer'),
+											'capabilities' => array(
+												'edit_themes' => true,
+												'read' => true
+												)),
+											
+									'subscriber' =>
+									array('name' => __('Subscriber'),
+											'capabilities' => array(
+												'read' => true,
+												'level_0' => true
+												)),
+											
+									'inactive' =>
+									array('name' => __('Inactive'),
+												'capabilities' => array())
+									);
+
+	add_option($table_prefix . 'user_roles', $roles);
+}
 ?>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: capabilities.php
Type: text/x-patch
Size: 6173 bytes
Desc: not available
Url : http://comox.textdrive.com/pipermail/wp-hackers/attachments/20050710/100d9b60/capabilities.bin
From peter.westwood at ftwr.co.uk  Sun Jul 10 13:20:31 2005
From: peter.westwood at ftwr.co.uk (Peter Westwood)
Date: Sun Jul 10 13:21:01 2005
Subject: [wp-hackers] User Capabilities
In-Reply-To: <42D116D4.9040104@midnightcircus.com>
References: <1120196075.7972.0.camel@portnoy.fuzzybelly.org>	<1120602422.3844.114.camel@portnoy.fuzzybelly.org>	<012601c58245$7d2de040$6402a8c0@DELL8600>	<42CC0A48.8080905@midnightcircus.com>	<1120796682.3844.165.camel@portnoy.fuzzybelly.org>	<42CE9769.80702@midnightcircus.com>	<42572.64.101.146.91.1120854503.squirrel@webmail.barclay.textdrive.com>	<1120858481.12652.17.camel@portnoy.fuzzybelly.org>	<1120928406.22248.7.camel@portnoy.fuzzybelly.org>	<42D0C8EA.1020801@midnightcircus.com>	<ebe43d68050710033413061bf8@mail.gmail.com>
	<42D116D4.9040104@midnightcircus.com>
Message-ID: <42D1209F.4030008@ftwr.co.uk>

Owen Winkler wrote:

> David House wrote:
>
>> I'm trying to try this out! What program are you both using to
>> generate your diffs? GNU patch 2.5.9 is erroring on every single hunk;
>> I can't apply that diff.
>>
>> There's no svn subcommand that will apply patches, is there? I don't
>> think svn merge does it.
>>  
>>
> Oops.  I think maybe this diff will work better.  (The 
> capabilities.php is the same as the last.)
>
> I'm using TortoiseSVN on Windows to generate and apply patches.  I 
> hacked up the last one a bit to remove some media functions from the 
> patch and I think I mangled the section for functions.php in the 
> process, but I tried this patch myself on a fresh svn Update and it 
> worked swell.
>
> I know that command-line svn offers diff output (via svn diff), but I 
> don't see the command to apply a patch from SVN.  Maybe give GNU patch 
> another try with the included diff?
>

To apply the patch to a svn checkout the command you want is patch 
--dry-run < patch.name

Remove the --dry-run if it applies ok.

I believe svn merge is about merging svn branched back into trunk.

westi
From dmhouse at gmail.com  Sun Jul 10 14:31:59 2005
From: dmhouse at gmail.com (David House)
Date: Sun Jul 10 14:32:05 2005
Subject: [wp-hackers] User Capabilities
In-Reply-To: <42D1209F.4030008@ftwr.co.uk>
References: <1120196075.7972.0.camel@portnoy.fuzzybelly.org>
	<1120796682.3844.165.camel@portnoy.fuzzybelly.org>
	<42CE9769.80702@midnightcircus.com>
	<42572.64.101.146.91.1120854503.squirrel@webmail.barclay.textdrive.com>
	<1120858481.12652.17.camel@portnoy.fuzzybelly.org>
	<1120928406.22248.7.camel@portnoy.fuzzybelly.org>
	<42D0C8EA.1020801@midnightcircus.com>
	<ebe43d68050710033413061bf8@mail.gmail.com>
	<42D116D4.9040104@midnightcircus.com> <42D1209F.4030008@ftwr.co.uk>
Message-ID: <ebe43d6805071007318ca1a84@mail.gmail.com>

On 7/10/05, Peter Westwood <peter.westwood@ftwr.co.uk> wrote:
> To apply the patch to a svn checkout the command you want is patch
> --dry-run < patch.name

That's what I've been trying, but as I said, patch was giving errors.
I'm now trying Owen's new patch.

-- 
-David House, dmhouse@gmail.com, http://xmouse.ithium.net
From ecb29 at cornell.edu  Sun Jul 10 16:34:09 2005
From: ecb29 at cornell.edu (=?ISO-8859-1?Q?Elliott_B=E4ck?=)
Date: Sun Jul 10 16:35:15 2005
Subject: [wp-hackers] DB Queries--which way to go?
Message-ID: <42D14E01.4000801@cornell.edu>

I've currently got two options for db access with a plugin I'm writing, 
and would like an opinion on which one is better:

1)  get the applicable row, update if exists, insert if not
2)  insert blindly, schedule a "cleanup" thread to consolidate duplicates

Another option is something like oracle's MERGE function, where I can 
check a condition and then base my query off subqueries if it exists to 
update the row or else insert, but I don't think MYSQL can do that...

-- 
Thanks,
Elliott C. B?ck

607-229-0623
http://elliottback.com

From ecb29 at cornell.edu  Sun Jul 10 16:46:12 2005
From: ecb29 at cornell.edu (=?ISO-8859-1?Q?Elliott_B=E4ck?=)
Date: Sun Jul 10 16:47:26 2005
Subject: [wp-hackers] WP-Plugins.org Perms
Message-ID: <42D150D4.5030106@cornell.edu>

Is wp-plugins.org still granting new dev folders only through Matt, or 
is there a new perms system?

-- 
Thanks,
Elliott C. B?ck

607-229-0623
http://elliottback.com

From ryan at boren.nu  Sun Jul 10 17:25:27 2005
From: ryan at boren.nu (Ryan Boren)
Date: Sun Jul 10 17:25:37 2005
Subject: [wp-hackers] User Capabilities
In-Reply-To: <42D0C8EA.1020801@midnightcircus.com>
References: <1120196075.7972.0.camel@portnoy.fuzzybelly.org>
	<42C4DD1E.5080807@txfx.net>
	<1120231038.15622.19.camel@portnoy.fuzzybelly.org>
	<42C56271.8010105@wltc.net>
	<1120602422.3844.114.camel@portnoy.fuzzybelly.org>
	<012601c58245$7d2de040$6402a8c0@DELL8600>
	<42CC0A48.8080905@midnightcircus.com>
	<1120796682.3844.165.camel@portnoy.fuzzybelly.org>
	<42CE9769.80702@midnightcircus.com>
	<42572.64.101.146.91.1120854503.squirrel@webmail.barclay.textdrive.com>
	<1120858481.12652.17.camel@portnoy.fuzzybelly.org>
	<1120928406.22248.7.camel@portnoy.fuzzybelly.org>
	<42D0C8EA.1020801@midnightcircus.com>
Message-ID: <1121016327.22248.17.camel@portnoy.fuzzybelly.org>

On Sun, 2005-07-10 at 03:06 -0400, Owen Winkler wrote:
> Changes attached:
> * Replaced role recursion with flat role cap merge.
> * WP_User now has ->roles and ->allcaps.
> * Added WP_Roles::is_role() for checking if a string is a valid role name.
> * Added WP_User:: add_role(), remove_role(), and set_role() as per above.
> * Changed WP_User::remove_cap() so that you can't remove roles with it.
> * Changed add_cap() so that you can deny caps with it.
> * has_cap() returns true/false based on cap true/false state - user caps 
> override role caps.
> * Made update_user_cache() pluggable.
> * wp-settings.php now checks for db data using update_category_cache() 
> instead of update_user_cache().

Awesome.

> Has anyone else tried the patch?  If your plugin depends on user levels, 
> it might be a good idea to check out these changes before they get 
> committed.

For plugin back compat, we'll need to add some code that sets an
"equivalent user level" whenever we change a user's role.

> What changes will there be to the user admin UI?  How extensive will it 
> get?  I imagine that the only thing that *has* to be done is to use a 
> dropdown of roles in place of the numeric level gadget.  Oh, how sweet 
> that will be, finally!  (Sorted alphabetically?  No numbers anymore...)

I'd like to see that dropdown too.  Beyond that, I leave the UI design
to others.

Ryan


From ringmaster at midnightcircus.com  Sun Jul 10 18:39:17 2005
From: ringmaster at midnightcircus.com (Owen Winkler)
Date: Sun Jul 10 18:39:59 2005
Subject: [wp-hackers] User Capabilities
In-Reply-To: <1121016327.22248.17.camel@portnoy.fuzzybelly.org>
References: <1120196075.7972.0.camel@portnoy.fuzzybelly.org>	<42C4DD1E.5080807@txfx.net>	<1120231038.15622.19.camel@portnoy.fuzzybelly.org>	<42C56271.8010105@wltc.net>	<1120602422.3844.114.camel@portnoy.fuzzybelly.org>	<012601c58245$7d2de040$6402a8c0@DELL8600>	<42CC0A48.8080905@midnightcircus.com>	<1120796682.3844.165.camel@portnoy.fuzzybelly.org>	<42CE9769.80702@midnightcircus.com>	<42572.64.101.146.91.1120854503.squirrel@webmail.barclay.textdrive.com>	<1120858481.12652.17.camel@portnoy.fuzzybelly.org>	<1120928406.22248.7.camel@portnoy.fuzzybelly.org>	<42D0C8EA.1020801@midnightcircus.com>
	<1121016327.22248.17.camel@portnoy.fuzzybelly.org>
Message-ID: <42D16B55.8090806@midnightcircus.com>

Ryan Boren wrote:

>For plugin back compat, we'll need to add some code that sets an
>"equivalent user level" whenever we change a user's role.
>  
>
What do you think about adding a param to add_role() that specifies an 
equivalent user level?  Not WP_User::set_role(), but WP_Roles::add_role().

The default set of roles would already have built-in equivalent user 
levels (via "level_x" caps).  A role itself defines its level, and any 
future roles that anyone might define will automatically (if added 
through this API rather than direct database additions) be backwards 
compatible, since the system will add the appropriate "level_x" caps 
automatically. 

Like this:

$wp_roles->add_role('foo', array('eat_pie'=>true),'Foo',3);

executes:

function add_role($role, $capabilities, $display_name, $user_level = 0) {
    for($z=0;$z<=$user_level;$z++) $capabilities["level_{$z}"] = true;  
//New line
    $this->roles[$role] = array('name' => $display_name,
                                                            
'capabilities' => $capabilities);
    update_option($this->role_key, $this->roles);
    $this->role_objects[$role] = new WP_Role($role, $capabilities);
    $this->role_names[$role] = $display_name;
}


When the system updates a user's role, the WP_User class would filter 
through allcaps (after the role change) looking for the highest 
"level_x" and then use that to set the user_level for backwards 
compatibility.

Something like:

function level_reduction($max, $item) {
    if(preg_match('/^level_(10|[0-9])$/i', $item, $matches)) {
        $level = intval($matches[1]);
        return max($max, $level);
    } else {
        return $max;
    }
}
function update_user_level_from_caps() {
    global $table_prefix;
    $this->data->user_level = array_reduce(array_keys($this->allcaps), 
array(&$this, 'level_reduction'), 0);
    update_usermeta($this->id, $table_prefix.'user_level', 
$this->data->user_level);
}

This would help avoid a hard-coded switch statement that converts 
default roles into user levels, which wouldn't accomodate custom role 
schemes.  It also doesn't really discourage people from using the old 
user_level permissions, because everything would still work pretty well 
that way.

Grr.  This backwards compatibility thing is a bear.  It's almost not 
worth the trouble.

Similarly - I'm just noting this now - capabilities.php probably 
shouldn't be using translate_level_to_role() from upgrade_functions.php, 
since the roles in the switch might not exist in a custom role scheme.  
In what case would get_role() be used with a numeric argument anyway?

Owen


From bfults at gmail.com  Sun Jul 10 18:40:47 2005
From: bfults at gmail.com (Brad Fults)
Date: Sun Jul 10 18:40:53 2005
Subject: [wp-hackers] DB Queries--which way to go?
In-Reply-To: <42D14E01.4000801@cornell.edu>
References: <42D14E01.4000801@cornell.edu>
Message-ID: <1959130b050710114036c5de58@mail.gmail.com>

I would go with option (1). Out of curiosity, what were your concerns
with that method?

-- 
Brad Fults
NeatBox


On 7/10/05, Elliott B?ck <ecb29@cornell.edu> wrote:
> I've currently got two options for db access with a plugin I'm writing,
> and would like an opinion on which one is better:
> 
> 1)  get the applicable row, update if exists, insert if not
> 2)  insert blindly, schedule a "cleanup" thread to consolidate duplicates
> 
> Another option is something like oracle's MERGE function, where I can
> check a condition and then base my query off subqueries if it exists to
> update the row or else insert, but I don't think MYSQL can do that...
> 
> --
> Thanks,
> Elliott C. B?ck
> 
> 607-229-0623
> http://elliottback.com
> 
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
From wp at igeek.info  Sun Jul 10 19:11:47 2005
From: wp at igeek.info (Amit Gupta)
Date: Sun Jul 10 19:12:00 2005
Subject: [wp-hackers] Re: 500 euros for WP + plugins
Message-ID: <001301c58583$3a101670$57ebd4cb@unicorn>


On Sun, 10 Jul 2005 "Martin Geisler" <mgeisler@mgeisler.net> wrote:
> Another thing: could you please configure your mail program to wrap
> the lined in your messages at 72 characters?  Your long lines are
> difficult to read.
> 
> Similarly, make your mail program insert proper References headers so
> that your messages end up in the right threads instead of starting new
> ones all the time.

hmm, can't help about the 72 char problem, I don't know how to do it & will it effect my other mails, but that thread problem should be solved from now(not including this email). :)


-----
Amit Gupta

|| Canned!! -- my Atropine || iG:Syntax Hiliter v3.1 ||
|| iGEEK.INFO || Free Nokia Ringtones || Online Gaming @ Games Planet || 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://comox.textdrive.com/pipermail/wp-hackers/attachments/20050710/99695fa9/attachment.html
From ecb29 at cornell.edu  Sun Jul 10 18:58:32 2005
From: ecb29 at cornell.edu (=?ISO-8859-1?Q?Elliott_B=E4ck?=)
Date: Sun Jul 10 19:20:17 2005
Subject: [wordpress] Re: [wp-hackers] DB Queries--which way to go?
In-Reply-To: <1959130b050710114036c5de58@mail.gmail.com>
References: <42D14E01.4000801@cornell.edu>
	<1959130b050710114036c5de58@mail.gmail.com>
Message-ID: <42D16FD8.10205@cornell.edu>

Well, it's two queries versus a single query and then an amortized "long 
batch run" later.  On a high-traffic site, having two additional (but 
small) queries run for every user might noticeably increase latency.  
Then again, it might not!

It seems less likely to cause potentially errors this first (1) way, 
though...

Thanks,
Elliott C. B?ck

607-229-0623
http://elliottback.com



Brad Fults wrote:

>I would go with option (1). Out of curiosity, what were your concerns
>with that method?
>
>  
>
From jeff at jrm.cc  Sun Jul 10 19:22:30 2005
From: jeff at jrm.cc (Jeff Minard)
Date: Sun Jul 10 19:22:36 2005
Subject: [wp-hackers] DB Queries--which way to go?
In-Reply-To: <42D14E01.4000801@cornell.edu>
References: <42D14E01.4000801@cornell.edu>
Message-ID: <42D17576.1010607@jrm.cc>

Elliott B?ck wrote:
> Another option is something like oracle's MERGE function, where I can 
> check a condition and then base my query off subqueries if it exists to 
> update the row or else insert, but I don't think MYSQL can do that...
> 

See REPLACE (I know, it was new to me as well.)

  - http://dev.mysql.com/doc/mysql/en/replace.html

Otherwise, go with "update/if fail/insert" which is what I tend to do. I 
like update/insert better because a single update is faster than what 
replace does. Replace will delete a record entirely (if duplicate keys), 
then insert a new record. This takes longer than an update.

So I usually run something like....

-------------------------------

$set = "`col1`=('joe'), `col2`=('jane'), `col3`=('susy'), `id`=($id)";

$update = "UPDATE $this->stats_table SET $set WHERE `id`=$id LIMIT 1";
$u_results = mysql_query($update_query);
			
if( mysql_affected_rows() != 1  ){
	$this->log[] = "Updating failed: " . mysql_error();
			
	$insert_query = "INSERT INTO $this->stats_table SET $set";
	$i_results = mysql_query($insert_query);
	if( mysql_affected_rows() != 1  ){
		$this->log[] = "Inserting failed: " . mysql_error();
		return false;
	}
}

return true;

----------------------------


EXAMPLE CODE ONLY (probably missing a ; or something stupid...)


Jeff
From podz at tamba2.org.uk  Sun Jul 10 19:36:11 2005
From: podz at tamba2.org.uk (Podz)
Date: Sun Jul 10 19:36:13 2005
Subject: [wp-hackers] Forum post: Server Load
Message-ID: <42D178AB.1030501@tamba2.org.uk>

http://wordpress.org/support/topic/38792
From m at mullenweg.com  Sun Jul 10 19:53:33 2005
From: m at mullenweg.com (Matthew Mullenweg)
Date: Sun Jul 10 19:53:40 2005
Subject: [wp-hackers] WP-Plugins.org Perms
In-Reply-To: <42D150D4.5030106@cornell.edu>
References: <42D150D4.5030106@cornell.edu>
Message-ID: <42D17CBD.10303@mullenweg.com>

Elliott B?ck wrote:
> Is wp-plugins.org still granting new dev folders only through Matt, or 
> is there a new perms system?

Yep just email me forum username and repository name and I'll set it up.

-- 
Matt Mullenweg
  http://photomatt.net | http://wordpress.org
http://pingomatic.com | http://cnet.com
From ecb29 at cornell.edu  Sun Jul 10 20:20:46 2005
From: ecb29 at cornell.edu (=?ISO-8859-1?Q?Elliott_B=E4ck?=)
Date: Sun Jul 10 20:21:53 2005
Subject: [wordpress] Re: [wp-hackers] WP-Plugins.org Perms
In-Reply-To: <42D17CBD.10303@mullenweg.com>
References: <42D150D4.5030106@cornell.edu> <42D17CBD.10303@mullenweg.com>
Message-ID: <42D1831E.6030203@cornell.edu>

My username is ecb29, and I guess I'd like a /elliott-back/ folder ;)

Thanks!

Thanks,
Elliott C. B?ck

607-229-0623
http://elliottback.com



Matthew Mullenweg wrote:

> Elliott B?ck wrote:
>
>> Is wp-plugins.org still granting new dev folders only through Matt, 
>> or is there a new perms system?
>
>
> Yep just email me forum username and repository name and I'll set it up.
>
From mgeisler at mgeisler.net  Sun Jul 10 20:22:12 2005
From: mgeisler at mgeisler.net (Martin Geisler)
Date: Sun Jul 10 21:09:35 2005
Subject: [wp-hackers] Re: 500 euros for WP + plugins
References: <001301c58583$3a101670$57ebd4cb@unicorn>
Message-ID: <87hdf2l8cr.fsf@futtelifut.dyndns.org>

"Amit Gupta" <wp@igeek.info> writes:

> On Sun, 10 Jul 2005 "Martin Geisler" <mgeisler@mgeisler.net> wrote:
>> Another thing: could you please configure your mail program to wrap
>> the lined in your messages at 72 characters? Your long lines are
>> difficult to read.
>> 
>> Similarly, make your mail program insert proper References headers
>> so that your messages end up in the right threads instead of
>> starting new ones all the time.
>
> hmm, can't help about the 72 char problem, I don't know how to do it
> & will it effect my other mails, but that thread problem should be
> solved from now(not including this email). :)

It's great that you solved the threading problem!

As for the long lines, try following the instructions here:

  http://www.critters.org/plaintext2.html#outlook5

They also explain how to configure Outlook so that you stop sending
out HTML mail.

-- 
Martin Geisler                                     GnuPG Key: 0x7E45DD38

PHP EXIF Library      |  PHP Weather             |  PHP Shell
http://pel.sf.net/    |  http://phpweather.net/  |  http://mgeisler.net/
Read/write EXIF data  |  Show current weather    |  A shell in a browser
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 188 bytes
Desc: not available
Url : http://comox.textdrive.com/pipermail/wp-hackers/attachments/20050710/f41901fd/attachment.bin
From m at mullenweg.com  Sun Jul 10 21:50:15 2005
From: m at mullenweg.com (Matthew Mullenweg)
Date: Sun Jul 10 21:50:32 2005
Subject: [wordpress] Re: [wp-hackers] WP-Plugins.org Perms
In-Reply-To: <42D1831E.6030203@cornell.edu>
References: <42D150D4.5030106@cornell.edu> <42D17CBD.10303@mullenweg.com>
	<42D1831E.6030203@cornell.edu>
Message-ID: <42D19817.3000103@mullenweg.com>

Elliott B?ck wrote:
> My username is ecb29, and I guess I'd like a /elliott-back/ folder ;)

The way it's done isn't per-person, but rather a repository for each 
plugin. I can make a bunch at once.

-- 
Matt Mullenweg
  http://photomatt.net | http://wordpress.org
http://pingomatic.com | http://cnet.com
From ryan at boren.nu  Sun Jul 10 22:00:35 2005
From: ryan at boren.nu (Ryan Boren)
Date: Sun Jul 10 22:00:46 2005
Subject: [wp-hackers] User Capabilities
In-Reply-To: <42D16B55.8090806@midnightcircus.com>
References: <1120196075.7972.0.camel@portnoy.fuzzybelly.org>
	<42C4DD1E.5080807@txfx.net>
	<1120231038.15622.19.camel@portnoy.fuzzybelly.org>
	<42C56271.8010105@wltc.net>
	<1120602422.3844.114.camel@portnoy.fuzzybelly.org>
	<012601c58245$7d2de040$6402a8c0@DELL8600>
	<42CC0A48.8080905@midnightcircus.com>
	<1120796682.3844.165.camel@portnoy.fuzzybelly.org>
	<42CE9769.80702@midnightcircus.com>
	<42572.64.101.146.91.1120854503.squirrel@webmail.barclay.textdrive.com>
	<1120858481.12652.17.camel@portnoy.fuzzybelly.org>
	<1120928406.22248.7.camel@portnoy.fuzzybelly.org>
	<42D0C8EA.1020801@midnightcircus.com>
	<1121016327.22248.17.camel@portnoy.fuzzybelly.org>
	<42D16B55.8090806@midnightcircus.com>
Message-ID: <1121032835.22248.24.camel@portnoy.fuzzybelly.org>

On Sun, 2005-07-10 at 14:39 -0400, Owen Winkler wrote:
> Ryan Boren wrote:
> 
> >For plugin back compat, we'll need to add some code that sets an
> >"equivalent user level" whenever we change a user's role.
> >  
> >
> What do you think about adding a param to add_role() that specifies an 
> equivalent user level?  Not WP_User::set_role(), but WP_Roles::add_role().
> 
> The default set of roles would already have built-in equivalent user 
> levels (via "level_x" caps).  A role itself defines its level, and any 
> future roles that anyone might define will automatically (if added 
> through this API rather than direct database additions) be backwards 
> compatible, since the system will add the appropriate "level_x" caps 
> automatically. 
> 
> Like this:
> 
> $wp_roles->add_role('foo', array('eat_pie'=>true),'Foo',3);
> 
> executes:
> 
> function add_role($role, $capabilities, $display_name, $user_level = 0) {
>     for($z=0;$z<=$user_level;$z++) $capabilities["level_{$z}"] = true;  
> //New line
>     $this->roles[$role] = array('name' => $display_name,
>                                                             
> 'capabilities' => $capabilities);
>     update_option($this->role_key, $this->roles);
>     $this->role_objects[$role] = new WP_Role($role, $capabilities);
>     $this->role_names[$role] = $display_name;
> }

How about we just tell plugin authors to specify "level_X" capabilities
when creating new roles?  One day, when levels are deprecated entirely,
we can simply ignore any level_x capabilities and not be left with any
user_level cruft in the role/cap API.

> When the system updates a user's role, the WP_User class would filter 
> through allcaps (after the role change) looking for the highest 
> "level_x" and then use that to set the user_level for backwards 
> compatibility.
> 
> Something like:
> 
> function level_reduction($max, $item) {
>     if(preg_match('/^level_(10|[0-9])$/i', $item, $matches)) {
>         $level = intval($matches[1]);
>         return max($max, $level);
>     } else {
>         return $max;
>     }
> }
> function update_user_level_from_caps() {
>     global $table_prefix;
>     $this->data->user_level = array_reduce(array_keys($this->allcaps), 
> array(&$this, 'level_reduction'), 0);
>     update_usermeta($this->id, $table_prefix.'user_level', 
> $this->data->user_level);
> }

Sounds good.

> This would help avoid a hard-coded switch statement that converts 
> default roles into user levels, which wouldn't accomodate custom role 
> schemes.  It also doesn't really discourage people from using the old 
> user_level permissions, because everything would still work pretty well 
> that way.
> 
> Grr.  This backwards compatibility thing is a bear.  It's almost not 
> worth the trouble.
> 
> Similarly - I'm just noting this now - capabilities.php probably 
> shouldn't be using translate_level_to_role() from upgrade_functions.php, 
> since the roles in the switch might not exist in a custom role scheme.  
> In what case would get_role() be used with a numeric argument anyway?

I think that is just leftover.  It can probably be removed.

Ryan

From skeltoac at hotmail.com  Sun Jul 10 22:10:11 2005
From: skeltoac at hotmail.com (Andy Skelton)
Date: Sun Jul 10 22:10:17 2005
Subject: [wp-hackers] Re: DB Queries--which way to go?
In-Reply-To: <42D16FD8.10205@cornell.edu>
Message-ID: <BAY19-F3238C330FFD703AD3577C5C7DD0@phx.gbl>

>From: Elliott Bck <ecb29@cornell.edu>
>Well, it's two queries versus a single query and then an amortized "long 
>batch run" later.  On a high-traffic site, having two additional (but 
>small) queries run for every user might noticeably increase latency.  Then 
>again, it might not!
>
>It seems less likely to cause potentially errors this first (1) way, 
>though...

I have had success with doing a blind UPDATE, checking for success with 
either the function's return value or mysql_affected_rows() and then doing 
an INSERT on failure.

Cheers,
Andy

_________________________________________________________________
Express yourself instantly with MSN Messenger! Download today - it's FREE! 
http://messenger.msn.click-url.com/go/onm00200471ave/direct/01/

From ryan at boren.nu  Sun Jul 10 22:11:56 2005
From: ryan at boren.nu (Ryan Boren)
Date: Sun Jul 10 22:12:02 2005
Subject: [wp-hackers] User Capabilities
In-Reply-To: <1121032835.22248.24.camel@portnoy.fuzzybelly.org>
References: <1120196075.7972.0.camel@portnoy.fuzzybelly.org>
	<42C4DD1E.5080807@txfx.net>
	<1120231038.15622.19.camel@portnoy.fuzzybelly.org>
	<42C56271.8010105@wltc.net>
	<1120602422.3844.114.camel@portnoy.fuzzybelly.org>
	<012601c58245$7d2de040$6402a8c0@DELL8600>
	<42CC0A48.8080905@midnightcircus.com>
	<1120796682.3844.165.camel@portnoy.fuzzybelly.org>
	<42CE9769.80702@midnightcircus.com>
	<42572.64.101.146.91.1120854503.squirrel@webmail.barclay.textdrive.com>
	<1120858481.12652.17.camel@portnoy.fuzzybelly.org>
	<1120928406.22248.7.camel@portnoy.fuzzybelly.org>
	<42D0C8EA.1020801@midnightcircus.com>
	<1121016327.22248.17.camel@portnoy.fuzzybelly.org>
	<42D16B55.8090806@midnightcircus.com>
	<1121032835.22248.24.camel@portnoy.fuzzybelly.org>
Message-ID: <1121033516.22248.33.camel@portnoy.fuzzybelly.org>

While we're working out the design and implementation details of the
role/capability system, let's talk about roles.  Currently, we are using
Textpattern's role definitions.

http://textpattern.org/tips/280/editing-user-priveleges

In addition, we have "Inactive" and "Subscriber" roles.  Inactive has no
capabilities at all.  It serves as a means of deactivating an account
without deleting it.  A Subscriber is someone who can login and read but
not do anything else.

The Textpattern roles are based on a newsroom workflow.  Is that what we
want for WordPress, or do we want different roles using a different
paradigm?  Many have suggested that "Publisher" be "Administrator", for
example.  Any other suggestions?

Ryan

From false.hopes at gmail.com  Sun Jul 10 22:22:37 2005
From: false.hopes at gmail.com (Robert Deaton)
Date: Sun Jul 10 22:22:45 2005
Subject: [wp-hackers] User Capabilities
In-Reply-To: <1121033516.22248.33.camel@portnoy.fuzzybelly.org>
References: <1120196075.7972.0.camel@portnoy.fuzzybelly.org>
	<42CE9769.80702@midnightcircus.com>
	<42572.64.101.146.91.1120854503.squirrel@webmail.barclay.textdrive.com>
	<1120858481.12652.17.camel@portnoy.fuzzybelly.org>
	<1120928406.22248.7.camel@portnoy.fuzzybelly.org>
	<42D0C8EA.1020801@midnightcircus.com>
	<1121016327.22248.17.camel@portnoy.fuzzybelly.org>
	<42D16B55.8090806@midnightcircus.com>
	<1121032835.22248.24.camel@portnoy.fuzzybelly.org>
	<1121033516.22248.33.camel@portnoy.fuzzybelly.org>
Message-ID: <a491f91d050710152240026ad1@mail.gmail.com>

I think a combination of the two would be great. Having roles like 
publisher, editor, newsroom type roles that allow for the management of 
posts, but then also things like Administrator and a few lesser powerful but 
still administrative roles so that one person can not only be omni-powerful, 
but grant other users permissions to do things that they can be trusted to 
do.

On 7/10/05, Ryan Boren <ryan@boren.nu> wrote:
> 
> While we're working out the design and implementation details of the
> role/capability system, let's talk about roles. Currently, we are using
> Textpattern's role definitions.
> 
> http://textpattern.org/tips/280/editing-user-priveleges
> 
> In addition, we have "Inactive" and "Subscriber" roles. Inactive has no
> capabilities at all. It serves as a means of deactivating an account
> without deleting it. A Subscriber is someone who can login and read but
> not do anything else.
> 
> The Textpattern roles are based on a newsroom workflow. Is that what we
> want for WordPress, or do we want different roles using a different
> paradigm? Many have suggested that "Publisher" be "Administrator", for
> example. Any other suggestions?
> 
> Ryan
> 
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
> 



-- 
--Robert Deaton
http://somethingunpredictable.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://comox.textdrive.com/pipermail/wp-hackers/attachments/20050710/538948bf/attachment-0001.html
From m at mullenweg.com  Sun Jul 10 22:26:22 2005
From: m at mullenweg.com (Matthew Mullenweg)
Date: Sun Jul 10 22:26:25 2005
Subject: [wp-hackers] User Capabilities
In-Reply-To: <1121033516.22248.33.camel@portnoy.fuzzybelly.org>
References: <1120196075.7972.0.camel@portnoy.fuzzybelly.org>	<42C4DD1E.5080807@txfx.net>	<1120231038.15622.19.camel@portnoy.fuzzybelly.org>	<42C56271.8010105@wltc.net>	<1120602422.3844.114.camel@portnoy.fuzzybelly.org>	<012601c58245$7d2de040$6402a8c0@DELL8600>	<42CC0A48.8080905@midnightcircus.com>	<1120796682.3844.165.camel@portnoy.fuzzybelly.org>	<42CE9769.80702@midnightcircus.com>	<42572.64.101.146.91.1120854503.squirrel@webmail.barclay.textdrive.com>	<1120858481.12652.17.camel@portnoy.fuzzybelly.org>	<1120928406.22248.7.camel@portnoy.fuzzybelly.org>	<42D0C8EA.1020801@midnightcircus.com>	<1121016327.22248.17.camel@portnoy.fuzzybelly.org>	<42D16B55.8090806@midnightcircus.com>	<1121032835.22248.24.camel@portnoy.fuzzybelly.org>
	<1121033516.22248.33.camel@portnoy.fuzzybelly.org>
Message-ID: <42D1A08E.8020800@mullenweg.com>

Ryan Boren wrote:
> While we're working out the design and implementation details of the
> role/capability system, let's talk about roles.  Currently, we are using
> Textpattern's role definitions.
> 
> http://textpattern.org/tips/280/editing-user-priveleges

I think TP goes a bit overboard, we should try to simplify our default 
roles to as few as possible and leave more complex things to plugins. 
When you look at the current system, we basically only have a few 
functional things even though the levels are 0-10:

* Registered
* Ability to post
* Administrator

Or to break it down differently, people who leave comments, people who 
post entries, and people who administer everything (including templates).

-- 
Matt Mullenweg
  http://photomatt.net | http://wordpress.org
http://pingomatic.com | http://cnet.com
From ecb29 at cornell.edu  Sun Jul 10 22:32:31 2005
From: ecb29 at cornell.edu (=?ISO-8859-1?Q?Elliott_B=E4ck?=)
Date: Sun Jul 10 22:33:39 2005
Subject: [wordpress] Re: [wp-hackers] WP-Plugins.org Perms
In-Reply-To: <42D19817.3000103@mullenweg.com>
References: <42D150D4.5030106@cornell.edu>
	<42D17CBD.10303@mullenweg.com>	<42D1831E.6030203@cornell.edu>
	<42D19817.3000103@mullenweg.com>
Message-ID: <42D1A1FF.9080904@cornell.edu>

Matthew Mullenweg wrote:

> The way it's done isn't per-person, but rather a repository for each 
> plugin. I can make a bunch at once.


Alright, although that makes it harder to manage in the long run.  The 
current plugin-thing I want to create is "wp-from-where"
~El
From ringmaster at midnightcircus.com  Sun Jul 10 22:33:10 2005
From: ringmaster at midnightcircus.com (Owen Winkler)
Date: Sun Jul 10 22:33:51 2005
Subject: [wp-hackers] User Capabilities
In-Reply-To: <1121032835.22248.24.camel@portnoy.fuzzybelly.org>
References: <1120196075.7972.0.camel@portnoy.fuzzybelly.org>	<42C4DD1E.5080807@txfx.net>	<1120231038.15622.19.camel@portnoy.fuzzybelly.org>	<42C56271.8010105@wltc.net>	<1120602422.3844.114.camel@portnoy.fuzzybelly.org>	<012601c58245$7d2de040$6402a8c0@DELL8600>	<42CC0A48.8080905@midnightcircus.com>	<1120796682.3844.165.camel@portnoy.fuzzybelly.org>	<42CE9769.80702@midnightcircus.com>	<42572.64.101.146.91.1120854503.squirrel@webmail.barclay.textdrive.com>	<1120858481.12652.17.camel@portnoy.fuzzybelly.org>	<1120928406.22248.7.camel@portnoy.fuzzybelly.org>	<42D0C8EA.1020801@midnightcircus.com>	<1121016327.22248.17.camel@portnoy.fuzzybelly.org>	<42D16B55.8090806@midnightcircus.com>
	<1121032835.22248.24.camel@portnoy.fuzzybelly.org>
Message-ID: <42D1A226.1000401@midnightcircus.com>

Ryan Boren wrote:

>How about we just tell plugin authors to specify "level_X" capabilities
>when creating new roles?  One day, when levels are deprecated entirely,
>we can simply ignore any level_x capabilities and not be left with any
>user_level cruft in the role/cap API.
>  
>
Ok by me.
It would be cool if there was an easy way to tag these emails so that 
they get transferred to Codex in the future.

>>When the system updates a user's role, the WP_User class would filter 
>>through allcaps (after the role change) looking for the highest 
>>"level_x" and then use that to set the user_level for backwards 
>>compatibility.
>>    
>>
>Sounds good.
>  
>
Merged and working.

>>Similarly - I'm just noting this now - capabilities.php probably 
>>shouldn't be using translate_level_to_role() from upgrade_functions.php, 
>>    
>>
>I think that is just leftover.  It can probably be removed.
>  
>
Removed.
New capabilities.php attached.

Owen

-------------- next part --------------
A non-text attachment was scrubbed...
Name: capabilities.php
Type: text/x-patch
Size: 6670 bytes
Desc: not available
Url : http://comox.textdrive.com/pipermail/wp-hackers/attachments/20050710/fec8b412/capabilities.bin
From ryan at boren.nu  Sun Jul 10 22:34:57 2005
From: ryan at boren.nu (Ryan Boren)
Date: Sun Jul 10 22:35:00 2005
Subject: [wp-hackers] User Capabilities
In-Reply-To: <42D1A08E.8020800@mullenweg.com>
References: <1120196075.7972.0.camel@portnoy.fuzzybelly.org>
	<42C4DD1E.5080807@txfx.net>
	<1120231038.15622.19.camel@portnoy.fuzzybelly.org>
	<42C56271.8010105@wltc.net>
	<1120602422.3844.114.camel@portnoy.fuzzybelly.org>
	<012601c58245$7d2de040$6402a8c0@DELL8600>
	<42CC0A48.8080905@midnightcircus.com>
	<1120796682.3844.165.camel@portnoy.fuzzybelly.org>
	<42CE9769.80702@midnightcircus.com>
	<42572.64.101.146.91.1120854503.squirrel@webmail.barclay.textdrive.com>
	<1120858481.12652.17.camel@portnoy.fuzzybelly.org>
	<1120928406.22248.7.camel@portnoy.fuzzybelly.org>
	<42D0C8EA.1020801@midnightcircus.com>
	<1121016327.22248.17.camel@portnoy.fuzzybelly.org>
	<42D16B55.8090806@midnightcircus.com>
	<1121032835.22248.24.camel@portnoy.fuzzybelly.org>
	<1121033516.22248.33.camel@portnoy.fuzzybelly.org>
	<42D1A08E.8020800@mullenweg.com>
Message-ID: <1121034897.22248.40.camel@portnoy.fuzzybelly.org>

On Sun, 2005-07-10 at 15:26 -0700, Matthew Mullenweg wrote:
> Ryan Boren wrote:
> > While we're working out the design and implementation details of the
> > role/capability system, let's talk about roles.  Currently, we are using
> > Textpattern's role definitions.
> > 
> > http://textpattern.org/tips/280/editing-user-priveleges
> 
> I think TP goes a bit overboard, we should try to simplify our default 
> roles to as few as possible and leave more complex things to plugins. 
> When you look at the current system, we basically only have a few 
> functional things even though the levels are 0-10:
> 
> * Registered
> * Ability to post
> * Administrator
> 
> Or to break it down differently, people who leave comments, people who 
> post entries, and people who administer everything (including templates).

Yeah, those three plus an editor would cover most of what people usually
want.  Arguably, the editor could be left to plugin territory.  

* Registered (Powerless, might be able to create drafts)
* Writer/Author (Can write and publish posts)
* Editor (Can edit other people's posts)
* Administrator (Root)

Ryan


From ryan at boren.nu  Sun Jul 10 22:46:45 2005
From: ryan at boren.nu (Ryan Boren)
Date: Sun Jul 10 22:46:50 2005
Subject: [wp-hackers] User Capabilities
In-Reply-To: <42D1A226.1000401@midnightcircus.com>
References: <1120196075.7972.0.camel@portnoy.fuzzybelly.org>
	<42C4DD1E.5080807@txfx.net>
	<1120231038.15622.19.camel@portnoy.fuzzybelly.org>
	<42C56271.8010105@wltc.net>
	<1120602422.3844.114.camel@portnoy.fuzzybelly.org>
	<012601c58245$7d2de040$6402a8c0@DELL8600>
	<42CC0A48.8080905@midnightcircus.com>
	<1120796682.3844.165.camel@portnoy.fuzzybelly.org>
	<42CE9769.80702@midnightcircus.com>
	<42572.64.101.146.91.1120854503.squirrel@webmail.barclay.textdrive.com>
	<1120858481.12652.17.camel@portnoy.fuzzybelly.org>
	<1120928406.22248.7.camel@portnoy.fuzzybelly.org>
	<42D0C8EA.1020801@midnightcircus.com>
	<1121016327.22248.17.camel@portnoy.fuzzybelly.org>
	<42D16B55.8090806@midnightcircus.com>
	<1121032835.22248.24.camel@portnoy.fuzzybelly.org>
	<42D1A226.1000401@midnightcircus.com>
Message-ID: <1121035605.22248.41.camel@portnoy.fuzzybelly.org>

On Sun, 2005-07-10 at 18:33 -0400, Owen Winkler wrote:
> New capabilities.php attached.

Jam up and jelly tight.

Ryan

From davebytes at comcast.net  Sun Jul 10 22:50:12 2005
From: davebytes at comcast.net (David Chait)
Date: Sun Jul 10 22:50:21 2005
Subject: [wp-hackers] Re: 500 euros for WP + plugins
References: <001301c58583$3a101670$57ebd4cb@unicorn>
	<87hdf2l8cr.fsf@futtelifut.dyndns.org>
Message-ID: <00d601c585a1$bb573290$6e01a8c0@sixfour>

Martin - just so you know, your response comes through to Outlook Express as 
a .txt attachment file, no other body content...

-d

----- Original Message ----- 
From: "Martin Geisler" <mgeisler@mgeisler.net>
To: <wp-hackers@lists.automattic.com>
Sent: Sunday, July 10, 2005 4:22 PM
Subject: [wp-hackers] Re: 500 euros for WP + plugins


> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
> 

From m at mullenweg.com  Sun Jul 10 23:49:47 2005
From: m at mullenweg.com (Matthew Mullenweg)
Date: Sun Jul 10 23:49:51 2005
Subject: [wp-hackers] User Capabilities
In-Reply-To: <1121034897.22248.40.camel@portnoy.fuzzybelly.org>
References: <1120196075.7972.0.camel@portnoy.fuzzybelly.org>	<42C4DD1E.5080807@txfx.net>	<1120231038.15622.19.camel@portnoy.fuzzybelly.org>	<42C56271.8010105@wltc.net>	<1120602422.3844.114.camel@portnoy.fuzzybelly.org>	<012601c58245$7d2de040$6402a8c0@DELL8600>	<42CC0A48.8080905@midnightcircus.com>	<1120796682.3844.165.camel@portnoy.fuzzybelly.org>	<42CE9769.80702@midnightcircus.com>	<42572.64.101.146.91.1120854503.squirrel@webmail.barclay.textdrive.com>	<1120858481.12652.17.camel@portnoy.fuzzybelly.org>	<1120928406.22248.7.camel@portnoy.fuzzybelly.org>	<42D0C8EA.1020801@midnightcircus.com>	<1121016327.22248.17.camel@portnoy.fuzzybelly.org>	<42D16B55.8090806@midnightcircus.com>	<1121032835.22248.24.camel@portnoy.fuzzybelly.org>	<1121033516.22248.33.camel@portnoy.fuzzybelly.org>	<42D1A08E.8020800@mullenweg.com>
	<1121034897.22248.40.camel@portnoy.fuzzybelly.org>
Message-ID: <42D1B41B.8020506@mullenweg.com>

Ryan Boren wrote:
> Yeah, those three plus an editor would cover most of what people usually
> want.  Arguably, the editor could be left to plugin territory.  
> 
> * Registered (Powerless, might be able to create drafts)
> * Writer/Author (Can write and publish posts)
> * Editor (Can edit other people's posts)
> * Administrator (Root)

Perfect. :)

-- 
Matt Mullenweg
  http://photomatt.net | http://wordpress.org
http://pingomatic.com | http://cnet.com
From skippy at skippy.net  Sun Jul 10 23:52:35 2005
From: skippy at skippy.net (Scott Merrill)
Date: Sun Jul 10 23:52:35 2005
Subject: [wp-hackers] User Capabilities
In-Reply-To: <42D1B41B.8020506@mullenweg.com>
References: <1120196075.7972.0.camel@portnoy.fuzzybelly.org>	<42C4DD1E.5080807@txfx.net>	<1120231038.15622.19.camel@portnoy.fuzzybelly.org>	<42C56271.8010105@wltc.net>	<1120602422.3844.114.camel@portnoy.fuzzybelly.org>	<012601c58245$7d2de040$6402a8c0@DELL8600>	<42CC0A48.8080905@midnightcircus.com>	<1120796682.3844.165.camel@portnoy.fuzzybelly.org>	<42CE9769.80702@midnightcircus.com>	<42572.64.101.146.91.1120854503.squirrel@webmail.barclay.textdrive.com>	<1120858481.12652.17.camel@portnoy.fuzzybelly.org>	<1120928406.22248.7.camel@portnoy.fuzzybelly.org>	<42D0C8EA.1020801@midnightcircus.com>	<1121016327.22248.17.camel@portnoy.fuzzybelly.org>	<42D16B55.8090806@midnightcircus.com>	<1121032835.22248.24.camel@portnoy.fuzzybelly.org>	<1121033516.22248.33.camel@portnoy.fuzzybelly.org>	<42D1A08E.8020800@mullenweg.com>	<1121034897.22248.40.camel@portnoy.fuzzybelly.org>
	<42D1B41B.8020506@mullenweg.com>
Message-ID: <42D1B4C3.7090001@skippy.net>

Matthew Mullenweg wrote:
> Ryan Boren wrote:
> 
>> Yeah, those three plus an editor would cover most of what people usually
>> want.  Arguably, the editor could be left to plugin territory. 
>> * Registered (Powerless, might be able to create drafts)
>> * Writer/Author (Can write and publish posts)
>> * Editor (Can edit other people's posts)
>> * Administrator (Root)
> 
> 
> Perfect. :)

So we're leaving it to plugins then to create a "Junior Author" or 
contributor role, which only allows the user to save drafts?

A lot of plugins are making use of registered, non-author users.  I 
think the following would be acceptable to the overwhelming majority of 
users:
* Registered
* Contributor
* Author
* Editor
* Admin

-- 
skippy@skippy.net | http://skippy.net/

gpg --keyserver pgp.mit.edu --recv-keys 9CFA4B35
506C F8BB 17AE 8A05 0B49  3544 476A 7DEC 9CFA 4B35
From ryan at boren.nu  Sun Jul 10 23:56:22 2005
From: ryan at boren.nu (Ryan Boren)
Date: Sun Jul 10 23:56:29 2005
Subject: [wp-hackers] User Capabilities
In-Reply-To: <42D1B41B.8020506@mullenweg.com>
References: <1120196075.7972.0.camel@portnoy.fuzzybelly.org>
	<42C4DD1E.5080807@txfx.net>
	<1120231038.15622.19.camel@portnoy.fuzzybelly.org>
	<42C56271.8010105@wltc.net>
	<1120602422.3844.114.camel@portnoy.fuzzybelly.org>
	<012601c58245$7d2de040$6402a8c0@DELL8600>
	<42CC0A48.8080905@midnightcircus.com>
	<1120796682.3844.165.camel@portnoy.fuzzybelly.org>
	<42CE9769.80702@midnightcircus.com>
	<42572.64.101.146.91.1120854503.squirrel@webmail.barclay.textdrive.com>
	<1120858481.12652.17.camel@portnoy.fuzzybelly.org>
	<1120928406.22248.7.camel@portnoy.fuzzybelly.org>
	<42D0C8EA.1020801@midnightcircus.com>
	<1121016327.22248.17.camel@portnoy.fuzzybelly.org>
	<42D16B55.8090806@midnightcircus.com>
	<1121032835.22248.24.camel@portnoy.fuzzybelly.org>
	<1121033516.22248.33.camel@portnoy.fuzzybelly.org>
	<42D1A08E.8020800@mullenweg.com>
	<1121034897.22248.40.camel@portnoy.fuzzybelly.org>
	<42D1B41B.8020506@mullenweg.com>
Message-ID: <1121039783.22248.56.camel@portnoy.fuzzybelly.org>

On Sun, 2005-07-10 at 16:49 -0700, Matthew Mullenweg wrote:
> Ryan Boren wrote:
> > Yeah, those three plus an editor would cover most of what people usually
> > want.  Arguably, the editor could be left to plugin territory.  
> > 
> > * Registered (Powerless, might be able to create drafts)
> > * Writer/Author (Can write and publish posts)
> > * Editor (Can edit other people's posts)
> > * Administrator (Root)
> 
> Perfect. :)

Alright, I'll tweak the default roles.

I think Owen's last patch gives us a good infrastructure upon which to
build.  I think we can commit it and start ironing out the remaining
details.  Sound good?  Okay by you Owen?  Anyone else?

Ryan

From mark.wordpress at txfx.net  Sun Jul 10 23:58:07 2005
From: mark.wordpress at txfx.net (Mark Jaquith)
Date: Sun Jul 10 23:58:15 2005
Subject: [wp-hackers] User Capabilities
In-Reply-To: <42D1B4C3.7090001@skippy.net>
References: <1120196075.7972.0.camel@portnoy.fuzzybelly.org>	<42C4DD1E.5080807@txfx.net>	<1120231038.15622.19.camel@portnoy.fuzzybelly.org>	<42C56271.8010105@wltc.net>	<1120602422.3844.114.camel@portnoy.fuzzybelly.org>	<012601c58245$7d2de040$6402a8c0@DELL8600>	<42CC0A48.8080905@midnightcircus.com>	<1120796682.3844.165.camel@portnoy.fuzzybelly.org>	<42CE9769.80702@midnightcircus.com>	<42572.64.101.146.91.1120854503.squirrel@webmail.barclay.textdrive.com>	<1120858481.12652.17.camel@portnoy.fuzzybelly.org>	<1120928406.22248.7.camel@portnoy.fuzzybelly.org>	<42D0C8EA.1020801@midnightcircus.com>	<1121016327.22248.17.camel@portnoy.fuzzybelly.org>	<42D16B55.8090806@midnightcircus.com>	<1121032835.22248.24.camel@portnoy.fuzzybelly.org>	<1121033516.22248.33.camel@portnoy.fuzzybelly.org>	<42D1A08E.8020800@mullenweg.com>	<1121034897.22248.40.camel@portnoy.fuzzybelly.org>	<42D1B41B.8020506@mullenweg.com>
	<42D1B4C3.7090001@skippy.net>
Message-ID: <42D1B60F.3010903@txfx.net>

Scott Merrill wrote:

> So we're leaving it to plugins then to create a "Junior Author" or 
> contributor role, which only allows the user to save drafts?
>
> A lot of plugins are making use of registered, non-author users.  I 
> think the following would be acceptable to the overwhelming majority 
> of users:
> * Registered
> * Contributor
> * Author
> * Editor
> * Admin

That would be my pick.  I think allowing user submissions is a cool 
feature that needs to be beefed up.

From ringmaster at midnightcircus.com  Sun Jul 10 23:58:48 2005
From: ringmaster at midnightcircus.com (Owen Winkler)
Date: Sun Jul 10 23:59:36 2005
Subject: [wp-hackers] User Capabilities
In-Reply-To: <1121034897.22248.40.camel@portnoy.fuzzybelly.org>
References: <1120196075.7972.0.camel@portnoy.fuzzybelly.org>	<42C4DD1E.5080807@txfx.net>	<1120231038.15622.19.camel@portnoy.fuzzybelly.org>	<42C56271.8010105@wltc.net>	<1120602422.3844.114.camel@portnoy.fuzzybelly.org>	<012601c58245$7d2de040$6402a8c0@DELL8600>	<42CC0A48.8080905@midnightcircus.com>	<1120796682.3844.165.camel@portnoy.fuzzybelly.org>	<42CE9769.80702@midnightcircus.com>	<42572.64.101.146.91.1120854503.squirrel@webmail.barclay.textdrive.com>	<1120858481.12652.17.camel@portnoy.fuzzybelly.org>	<1120928406.22248.7.camel@portnoy.fuzzybelly.org>	<42D0C8EA.1020801@midnightcircus.com>	<1121016327.22248.17.camel@portnoy.fuzzybelly.org>	<42D16B55.8090806@midnightcircus.com>	<1121032835.22248.24.camel@portnoy.fuzzybelly.org>	<1121033516.22248.33.camel@portnoy.fuzzybelly.org>	<42D1A08E.8020800@mullenweg.com>
	<1121034897.22248.40.camel@portnoy.fuzzybelly.org>
Message-ID: <42D1B638.2080904@midnightcircus.com>

Ryan Boren wrote:

>* Registered (Powerless, might be able to create drafts)
>* Writer/Author (Can write and publish posts)
>* Editor (Can edit other people's posts)
>* Administrator (Root)
>  
>
I think there needs to be two Author roles, one who can publish his own 
posts and one who can't.  Skippy's list (+Contributor) suits me better.

Which role has control of pages?

How will these roles be affected by the 1.5 setting for allowing 
newly-/self-registered users to publish/create drafts?  It seems like it 
would be a good idea instead to use a dropdown to set the default role 
for a newly-/self-registered user, and that role would either have the 
capability to create and/or publish posts or not.

The trick is that unless there is at least a basic role-editing 
interface, there is no way to emulate the "Newly registered members" 
setting in Options | Writing.  That radio group - in parlance of the new 
capabilities stuff - changes the capabilities of the level 0 user, which 
technically doesn't exist any more.  The group could be changed to 
grant/revoke 'edit_posts' and 'publish_posts' on the role selected for 
new registrations, but somehow that doesn't seem like a good idea to me.

Owen



From mark.wordpress at txfx.net  Mon Jul 11 00:00:18 2005
From: mark.wordpress at txfx.net (Mark Jaquith)
Date: Mon Jul 11 00:00:52 2005
Subject: [wordpress] Re: [wp-hackers] WP-Plugins.org Perms
In-Reply-To: <42D19817.3000103@mullenweg.com>
References: <42D150D4.5030106@cornell.edu>
	<42D17CBD.10303@mullenweg.com>	<42D1831E.6030203@cornell.edu>
	<42D19817.3000103@mullenweg.com>
Message-ID: <42D1B692.2090507@txfx.net>

Matthew Mullenweg wrote:

> Elliott B?ck wrote:
>
>> My username is ecb29, and I guess I'd like a /elliott-back/ folder ;)
>
>
> The way it's done isn't per-person, but rather a repository for each 
> plugin. I can make a bunch at once.
>
Hm... this brings up an interesting point... I think it would be cool to 
have an author sandbox for misc stuff that isn't quite ready for its own 
directory.  Perhaps each user who has control of a plugin could be given 
/user/user-name/ for their use.
From ryan at boren.nu  Mon Jul 11 00:12:43 2005
From: ryan at boren.nu (Ryan Boren)
Date: Mon Jul 11 00:12:52 2005
Subject: [wp-hackers] User Capabilities
In-Reply-To: <42D1B638.2080904@midnightcircus.com>
References: <1120196075.7972.0.camel@portnoy.fuzzybelly.org>
	<42C4DD1E.5080807@txfx.net>
	<1120231038.15622.19.camel@portnoy.fuzzybelly.org>
	<42C56271.8010105@wltc.net>
	<1120602422.3844.114.camel@portnoy.fuzzybelly.org>
	<012601c58245$7d2de040$6402a8c0@DELL8600>
	<42CC0A48.8080905@midnightcircus.com>
	<1120796682.3844.165.camel@portnoy.fuzzybelly.org>
	<42CE9769.80702@midnightcircus.com>
	<42572.64.101.146.91.1120854503.squirrel@webmail.barclay.textdrive.com>
	<1120858481.12652.17.camel@portnoy.fuzzybelly.org>
	<1120928406.22248.7.camel@portnoy.fuzzybelly.org>
	<42D0C8EA.1020801@midnightcircus.com>
	<1121016327.22248.17.camel@portnoy.fuzzybelly.org>
	<42D16B55.8090806@midnightcircus.com>
	<1121032835.22248.24.camel@portnoy.fuzzybelly.org>
	<1121033516.22248.33.camel@portnoy.fuzzybelly.org>
	<42D1A08E.8020800@mullenweg.com>
	<1121034897.22248.40.camel@portnoy.fuzzybelly.org>
	<42D1B638.2080904@midnightcircus.com>
Message-ID: <1121040763.17612.10.camel@portnoy.fuzzybelly.org>

On Sun, 2005-07-10 at 19:58 -0400, Owen Winkler wrote:
> Ryan Boren wrote:
> 
> >* Registered (Powerless, might be able to create drafts)
> >* Writer/Author (Can write and publish posts)
> >* Editor (Can edit other people's posts)
> >* Administrator (Root)
> >  
> >
> I think there needs to be two Author roles, one who can publish his own 
> posts and one who can't.  Skippy's list (+Contributor) suits me better.

I don't mind either way.  I know some folks will holler if we don't
support this, and don't feel strongly enough to argue about it.  I'll
leave that to Matt if he feels strongly. :-)

> Which role has control of pages?

I think an Editor can have that.  If someone wants to have two levels of
editors, a plugin is in order.

> How will these roles be affected by the 1.5 setting for allowing 
> newly-/self-registered users to publish/create drafts?  It seems like it 
> would be a good idea instead to use a dropdown to set the default role 
> for a newly-/self-registered user, and that role would either have the 
> capability to create and/or publish posts or not.
> 
> The trick is that unless there is at least a basic role-editing 
> interface, there is no way to emulate the "Newly registered members" 
> setting in Options | Writing.  That radio group - in parlance of the new 
> capabilities stuff - changes the capabilities of the level 0 user, which 
> technically doesn't exist any more.  The group could be changed to 
> grant/revoke 'edit_posts' and 'publish_posts' on the role selected for 
> new registrations, but somehow that doesn't seem like a good idea to me.

Actually, after some bugfixing done in 1.5.1, that setting determines
whether new users are given level 0 or 1.  So, we'll just give them
"Registered" or "Contributor" roles instead (assuming we do the
"Contributor" role).  Backward compatibility would be assisted by a
"Contributor" role that maps to level 1.

Ryan

From ringmaster at midnightcircus.com  Mon Jul 11 01:20:33 2005
From: ringmaster at midnightcircus.com (Owen Winkler)
Date: Mon Jul 11 01:21:26 2005
Subject: [wp-hackers] User Capabilities
In-Reply-To: <1121040763.17612.10.camel@portnoy.fuzzybelly.org>
References: <1120196075.7972.0.camel@portnoy.fuzzybelly.org>	<42C4DD1E.5080807@txfx.net>	<1120231038.15622.19.camel@portnoy.fuzzybelly.org>	<42C56271.8010105@wltc.net>	<1120602422.3844.114.camel@portnoy.fuzzybelly.org>	<012601c58245$7d2de040$6402a8c0@DELL8600>	<42CC0A48.8080905@midnightcircus.com>	<1120796682.3844.165.camel@portnoy.fuzzybelly.org>	<42CE9769.80702@midnightcircus.com>	<42572.64.101.146.91.1120854503.squirrel@webmail.barclay.textdrive.com>	<1120858481.12652.17.camel@portnoy.fuzzybelly.org>	<1120928406.22248.7.camel@portnoy.fuzzybelly.org>	<42D0C8EA.1020801@midnightcircus.com>	<1121016327.22248.17.camel@portnoy.fuzzybelly.org>	<42D16B55.8090806@midnightcircus.com>	<1121032835.22248.24.camel@portnoy.fuzzybelly.org>	<1121033516.22248.33.camel@portnoy.fuzzybelly.org>	<42D1A08E.8020800@mullenweg.com>	<1121034897.22248.40.camel@portnoy.fuzzybelly.org>	<42D1B638.2080904@midnightcircus.com>
	<1121040763.17612.10.camel@portnoy.fuzzybelly.org>
Message-ID: <42D1C961.9050200@midnightcircus.com>

Ryan Boren wrote:

>Actually, after some bugfixing done in 1.5.1, that setting determines
>whether new users are given level 0 or 1.  So, we'll just give them
>"Registered" or "Contributor" roles instead (assuming we do the
>"Contributor" role).  Backward compatibility would be assisted by a
>"Contributor" role that maps to level 1.
>  
>
Right, as long as we're talking about a dropdown that lists *all* roles, 
for two reasons: 
1) I could set mine to 'Author', which is what I currently do for 
Free-For-All-Friday.
2) Custom roles would be supported, so I could set self-registered users 
on FFAF to a special role that I define, and then grant publish_post 
rights only on that Friday. 

This would be a royal pain to implement under the bugfixes you've 
described, therefore it's a good improvement in 1.6, and also explains 
why thing haven't been working as I've expected every so often when a 
new user registers in my current 1.5 install.  ;)

Ugh... I've just taken a cursory look at updating the UI for roles.  
There is a lot of stuff that depends on user_level.  For example, users 
of level 5 can edit users of level 4 or less.  In my opinion, this 
should not be; You should be able to edit any user if you have the 
'edit_users' cap.  Thoughts on this?  Can we ditch the user_level 
dependencies in the core altogether?

Owen


From ryan at boren.nu  Mon Jul 11 01:53:48 2005
From: ryan at boren.nu (Ryan Boren)
Date: Mon Jul 11 01:53:51 2005
Subject: [wp-hackers] User Capabilities
In-Reply-To: <42D1C961.9050200@midnightcircus.com>
References: <1120196075.7972.0.camel@portnoy.fuzzybelly.org>
	<42C4DD1E.5080807@txfx.net>
	<1120231038.15622.19.camel@portnoy.fuzzybelly.org>
	<42C56271.8010105@wltc.net>
	<1120602422.3844.114.camel@portnoy.fuzzybelly.org>
	<012601c58245$7d2de040$6402a8c0@DELL8600>
	<42CC0A48.8080905@midnightcircus.com>
	<1120796682.3844.165.camel@portnoy.fuzzybelly.org>
	<42CE9769.80702@midnightcircus.com>
	<42572.64.101.146.91.1120854503.squirrel@webmail.barclay.textdrive.com>
	<1120858481.12652.17.camel@portnoy.fuzzybelly.org>
	<1120928406.22248.7.camel@portnoy.fuzzybelly.org>
	<42D0C8EA.1020801@midnightcircus.com>
	<1121016327.22248.17.camel@portnoy.fuzzybelly.org>
	<42D16B55.8090806@midnightcircus.com>
	<1121032835.22248.24.camel@portnoy.fuzzybelly.org>
	<1121033516.22248.33.camel@portnoy.fuzzybelly.org>
	<42D1A08E.8020800@mullenweg.com>
	<1121034897.22248.40.camel@portnoy.fuzzybelly.org>
	<42D1B638.2080904@midnightcircus.com>
	<1121040763.17612.10.camel@portnoy.fuzzybelly.org>
	<42D1C961.9050200@midnightcircus.com>
Message-ID: <1121046828.17612.12.camel@portnoy.fuzzybelly.org>

On Sun, 2005-07-10 at 21:20 -0400, Owen Winkler wrote:
> Ugh... I've just taken a cursory look at updating the UI for roles.  
> There is a lot of stuff that depends on user_level.  For example, users 
> of level 5 can edit users of level 4 or less.  In my opinion, this 
> should not be; You should be able to edit any user if you have the 
> 'edit_users' cap.  Thoughts on this?  Can we ditch the user_level 
> dependencies in the core altogether?

I agree.  Ditch the dependencies.

Ryan


From jeff at jrm.cc  Mon Jul 11 02:36:44 2005
From: jeff at jrm.cc (Jeff Minard)
Date: Mon Jul 11 02:36:51 2005
Subject: [wordpress] Re: [wp-hackers] WP-Plugins.org Perms
In-Reply-To: <42D1B692.2090507@txfx.net>
References: <42D150D4.5030106@cornell.edu>	<42D17CBD.10303@mullenweg.com>	<42D1831E.6030203@cornell.edu>	<42D19817.3000103@mullenweg.com>
	<42D1B692.2090507@txfx.net>
Message-ID: <42D1DB3C.3070809@jrm.cc>

Mark Jaquith wrote:
> I think it would be cool to 
> have an author sandbox for misc stuff that isn't quite ready for its own 
> directory.

Or they could put their development things in the trunk exactly the way 
SVN (and versioning systems) are suposed to be used and then "TAG" them 
when a stable is reached.

Jeff
From michael at wakeless.net  Mon Jul 11 03:16:45 2005
From: michael at wakeless.net (Michael Gall)
Date: Mon Jul 11 03:15:19 2005
Subject: [wp-hackers] User Capabilities
In-Reply-To: <1120196075.7972.0.camel@portnoy.fuzzybelly.org>
References: <1120196075.7972.0.camel@portnoy.fuzzybelly.org>
Message-ID: <42D1E49D.20109@wakeless.net>

I've been away for a week and everything blows up! Good work guys, just 
wondering if I can get someone to write a page in the codex with a bit 
more detail about how this is going.


Cheers,

Michael Gall

From mark.wordpress at txfx.net  Mon Jul 11 04:08:27 2005
From: mark.wordpress at txfx.net (Mark Jaquith)
Date: Mon Jul 11 04:08:35 2005
Subject: [wordpress] Re: [wp-hackers] WP-Plugins.org Perms
In-Reply-To: <42D1DB3C.3070809@jrm.cc>
References: <42D150D4.5030106@cornell.edu>	<42D17CBD.10303@mullenweg.com>	<42D1831E.6030203@cornell.edu>	<42D19817.3000103@mullenweg.com>	<42D1B692.2090507@txfx.net>
	<42D1DB3C.3070809@jrm.cc>
Message-ID: <42D1F0BB.9080408@txfx.net>

Jeff Minard wrote:

> Mark Jaquith wrote:
>
>> I think it would be cool to have an author sandbox for misc stuff 
>> that isn't quite ready for its own directory.
>
>
> Or they could put their development things in the trunk exactly the 
> way SVN (and versioning systems) are suposed to be used and then "TAG" 
> them when a stable is reached. 

Oh, I didn't mean for existing projects... I meant for ideas of new 
projects.
From jeff at jrm.cc  Mon Jul 11 04:17:02 2005
From: jeff at jrm.cc (Jeff Minard)
Date: Mon Jul 11 04:17:08 2005
Subject: [wordpress] Re: [wp-hackers] WP-Plugins.org Perms
In-Reply-To: <42D1F0BB.9080408@txfx.net>
References: <42D150D4.5030106@cornell.edu>	<42D17CBD.10303@mullenweg.com>	<42D1831E.6030203@cornell.edu>	<42D19817.3000103@mullenweg.com>	<42D1B692.2090507@txfx.net>	<42D1DB3C.3070809@jrm.cc>
	<42D1F0BB.9080408@txfx.net>
Message-ID: <42D1F2BE.3050600@jrm.cc>

Mark Jaquith wrote:
> Oh, I didn't mean for existing projects... I meant for ideas of new 
> projects.
> 

Mmm.. Maybe just a general, WIP kinda directory. I believe that SVN will 
leave names along with commits etc which would look pretty well.

Jeff
From wp at igeek.info  Mon Jul 11 04:44:42 2005
From: wp at igeek.info (Amit Gupta)
Date: Mon Jul 11 04:44:54 2005
Subject: [wp-hackers] Re: 500 euros for WP + plugins
References: <001301c58583$3a101670$57ebd4cb@unicorn>
	<87hdf2l8cr.fsf@futtelifut.dyndns.org>
Message-ID: <003501c585d3$42d50ea0$57ebd4cb@unicorn>

OFF-TOPIC:
thanks for that Martin, I know how to send emails as plain-text but don't want to use it that way!!!! I prefer HTML email for many reasons. :)
  ----- Original Message ----- 
  From: Martin Geisler 
  To: wp-hackers@lists.automattic.com 
  Sent: Monday, July 11, 2005 1:52 AM
  Subject: [wp-hackers] Re: 500 euros for WP + plugins

  "Amit Gupta" <wp@igeek.info> writes:

  > On Sun, 10 Jul 2005 "Martin Geisler" <mgeisler@mgeisler.net> wrote:
  >> Another thing: could you please configure your mail program to wrap
  >> the lined in your messages at 72 characters? Your long lines are
  >> difficult to read.
  >> 
  >> Similarly, make your mail program insert proper References headers
  >> so that your messages end up in the right threads instead of
  >> starting new ones all the time.
  >
  > hmm, can't help about the 72 char problem, I don't know how to do it
  > & will it effect my other mails, but that thread problem should be
  > solved from now(not including this email). :)

  It's great that you solved the threading problem!

  As for the long lines, try following the instructions here:

    http://www.critters.org/plaintext2.html#outlook5

  They also explain how to configure Outlook so that you stop sending
  out HTML mail.

  -- 
  Martin Geisler                                     GnuPG Key: 0x7E45DD38

  PHP EXIF Library      |  PHP Weather             |  PHP Shell
  http://pel.sf.net/    |  http://phpweather.net/  |  http://mgeisler.net/
  Read/write EXIF data  |  Show current weather    |  A shell in a browser


  _______________________________________________
  wp-hackers mailing list
  wp-hackers@lists.automattic.com
  http://lists.automattic.com/mailman/listinfo/wp-hackers
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://comox.textdrive.com/pipermail/wp-hackers/attachments/20050711/76c0d946/attachment.html
From jbainbridge at gmail.com  Mon Jul 11 04:49:19 2005
From: jbainbridge at gmail.com (Jason Bainbridge)
Date: Mon Jul 11 04:49:23 2005
Subject: [wp-hackers] Re: 500 euros for WP + plugins
In-Reply-To: <003501c585d3$42d50ea0$57ebd4cb@unicorn>
References: <001301c58583$3a101670$57ebd4cb@unicorn>
	<87hdf2l8cr.fsf@futtelifut.dyndns.org>
	<003501c585d3$42d50ea0$57ebd4cb@unicorn>
Message-ID: <d6491f4805071021497a6c08c5@mail.gmail.com>

On 7/10/05, Amit Gupta <wp@igeek.info> wrote:
>  
> OFF-TOPIC:
> thanks for that Martin, I know how to send emails as plain-text but don't
> want to use it that way!!!! I prefer HTML email for many reasons. :) 

Actually it is usual mailing list etiquette to not use HTML emails and
a lot of lists disallow it and insist on plain text, I'm not sure
about wp-hackers though.

Regards,
-- 
Jason Bainbridge
http://kde.org - webmaster@kde.org
Personal Site - http://jasonbainbridge.com
From false.hopes at gmail.com  Mon Jul 11 04:54:23 2005
From: false.hopes at gmail.com (Robert Deaton)
Date: Mon Jul 11 04:54:27 2005
Subject: [wp-hackers] User Capabilities
In-Reply-To: <42D1E49D.20109@wakeless.net>
References: <1120196075.7972.0.camel@portnoy.fuzzybelly.org>
	<42D1E49D.20109@wakeless.net>
Message-ID: <a491f91d0507102154c440ddf@mail.gmail.com>

Nothing is set in stone, so its best not to start writing documentation that 
may change in five minutes. Once its established and committed it might be a 
good idea though.

On 7/10/05, Michael Gall <michael@wakeless.net> wrote:
> 
> I've been away for a week and everything blows up! Good work guys, just
> wondering if I can get someone to write a page in the codex with a bit
> more detail about how this is going.
> 
> 
> Cheers,
> 
> Michael Gall
> 
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
> 



-- 
--Robert Deaton
http://somethingunpredictable.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://comox.textdrive.com/pipermail/wp-hackers/attachments/20050711/4934c37d/attachment.html
From r at schestowitz.com  Mon Jul 11 05:15:03 2005
From: r at schestowitz.com (Roy Schestowitz)
Date: Mon Jul 11 05:15:13 2005
Subject: [wp-hackers] Re: 500 euros for WP + plugins
In-Reply-To: <d6491f4805071021497a6c08c5@mail.gmail.com>
References: <001301c58583$3a101670$57ebd4cb@unicorn>
	<87hdf2l8cr.fsf@futtelifut.dyndns.org>
	<003501c585d3$42d50ea0$57ebd4cb@unicorn>
	<d6491f4805071021497a6c08c5@mail.gmail.com>
Message-ID: <20050711061503.k0x20j04mh0k8k48@banana.catalyst2.com>

Quoting Jason Bainbridge <jbainbridge@gmail.com>:

> On 7/10/05, Amit Gupta <wp@igeek.info> wrote:
>
>> OFF-TOPIC:
>> thanks for that Martin, I know how to send emails as plain-text but don't
>> want to use it that way!!!! I prefer HTML email for many reasons. :)
>
> Actually it is usual mailing list etiquette to not use HTML emails and
> a lot of lists disallow it and insist on plain text, I'm not sure
> about wp-hackers though.

I actually agree with Martin who pointed this out quite subtly. many 
people will
be inconvenienced by an HTML-formatted message. If you did this in 
UseNet, your
message would probably get devoured or ignored, much like messages from Google
Groups (hit-and-run posters who do so because they "prefer it for many
reasons"; when happy with the answers, not even a thank-you).

I was going to follow-up to Amit's message, but the HTML caused 
inconsistencies
that had me give up. So, the bottom line is that instead of personal
preferences, the preferences of the _community_ need to be honoured. Nobody
PGP's messages to this list, right?

Roy

-- 
Roy S. Schestowitz
http://Schestowitz.com

From m at mullenweg.com  Mon Jul 11 06:09:46 2005
From: m at mullenweg.com (Matthew Mullenweg)
Date: Mon Jul 11 06:09:49 2005
Subject: [wp-hackers] User Capabilities
In-Reply-To: <42D1B4C3.7090001@skippy.net>
References: <1120196075.7972.0.camel@portnoy.fuzzybelly.org>	<42C4DD1E.5080807@txfx.net>	<1120231038.15622.19.camel@portnoy.fuzzybelly.org>	<42C56271.8010105@wltc.net>	<1120602422.3844.114.camel@portnoy.fuzzybelly.org>	<012601c58245$7d2de040$6402a8c0@DELL8600>	<42CC0A48.8080905@midnightcircus.com>	<1120796682.3844.165.camel@portnoy.fuzzybelly.org>	<42CE9769.80702@midnightcircus.com>	<42572.64.101.146.91.1120854503.squirrel@webmail.barclay.textdrive.com>	<1120858481.12652.17.camel@portnoy.fuzzybelly.org>	<1120928406.22248.7.camel@portnoy.fuzzybelly.org>	<42D0C8EA.1020801@midnightcircus.com>	<1121016327.22248.17.camel@portnoy.fuzzybelly.org>	<42D16B55.8090806@midnightcircus.com>	<1121032835.22248.24.camel@portnoy.fuzzybelly.org>	<1121033516.22248.33.camel@portnoy.fuzzybelly.org>	<42D1A08E.8020800@mullenweg.com>	<1121034897.22248.40.camel@portnoy.fuzzybelly.org>	<42D1B41B.8020506@mullenweg.com>
	<42D1B4C3.7090001@skippy.net>
Message-ID: <42D20D2A.3090700@mullenweg.com>

Scott Merrill wrote:
> So we're leaving it to plugins then to create a "Junior Author" or 
> contributor role, which only allows the user to save drafts?

Sorry, I forgot about that until after I sent the message. A lot of 
people really like that feature of WP and we already support it so we 
shouldn't downgrade.

-- 
Matt Mullenweg
  http://photomatt.net | http://wordpress.org
http://pingomatic.com | http://cnet.com
From wp at igeek.info  Mon Jul 11 06:30:14 2005
From: wp at igeek.info (Amit Gupta)
Date: Mon Jul 11 06:30:26 2005
Subject: [wp-hackers] Re: 500 euros for WP + plugins
References: <001301c58583$3a101670$57ebd4cb@unicorn><87hdf2l8cr.fsf@futtelifut.dyndns.org><003501c585d3$42d50ea0$57ebd4cb@unicorn><d6491f4805071021497a6c08c5@mail.gmail.com>
	<20050711061503.k0x20j04mh0k8k48@banana.catalyst2.com>
Message-ID: <005401c585e2$0120d840$57ebd4cb@unicorn>

ok guys, chill out, I'll set it up to use Plain-Text, its probably will 
be more inconvenient to me as I'll have to switch email accounts just to 
check on this lists messages!! because I can't set this account to send 
plain-text messages, whatever the result. but I'll do it anyway, I'm 
addicted!!! ;)
  ----- Original Message ----- 
  From: Roy Schestowitz
  To: wp-hackers@lists.automattic.com
  Sent: Monday, July 11, 2005 10:45 AM
  Subject: Re: [wp-hackers] Re: 500 euros for WP + plugins


  Quoting Jason Bainbridge <jbainbridge@gmail.com>:

  > On 7/10/05, Amit Gupta <wp@igeek.info> wrote:
  >
  >> OFF-TOPIC:
  >> thanks for that Martin, I know how to send emails as plain-text but 
don't
  >> want to use it that way!!!! I prefer HTML email for many reasons. 
:)
  >
  > Actually it is usual mailing list etiquette to not use HTML emails 
and
  > a lot of lists disallow it and insist on plain text, I'm not sure
  > about wp-hackers though.

  I actually agree with Martin who pointed this out quite subtly. many
  people will
  be inconvenienced by an HTML-formatted message. If you did this in
  UseNet, your
  message would probably get devoured or ignored, much like messages 
from Google
  Groups (hit-and-run posters who do so because they "prefer it for many
  reasons"; when happy with the answers, not even a thank-you).

  I was going to follow-up to Amit's message, but the HTML caused
  inconsistencies
  that had me give up. So, the bottom line is that instead of personal
  preferences, the preferences of the _community_ need to be honoured. 
Nobody
  PGP's messages to this list, right?

  Roy

  -- 
  Roy S. Schestowitz
  http://Schestowitz.com

  _______________________________________________
  wp-hackers mailing list
  wp-hackers@lists.automattic.com
  http://lists.automattic.com/mailman/listinfo/wp-hackers


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://comox.textdrive.com/pipermail/wp-hackers/attachments/20050711/fcecc0a2/attachment.html
From false.hopes at gmail.com  Mon Jul 11 06:58:12 2005
From: false.hopes at gmail.com (Robert Deaton)
Date: Mon Jul 11 06:58:19 2005
Subject: [wp-hackers] Re: 500 euros for WP + plugins
In-Reply-To: <005401c585e2$0120d840$57ebd4cb@unicorn>
References: <001301c58583$3a101670$57ebd4cb@unicorn>
	<87hdf2l8cr.fsf@futtelifut.dyndns.org>
	<003501c585d3$42d50ea0$57ebd4cb@unicorn>
	<d6491f4805071021497a6c08c5@mail.gmail.com>
	<20050711061503.k0x20j04mh0k8k48@banana.catalyst2.com>
	<005401c585e2$0120d840$57ebd4cb@unicorn>
Message-ID: <a491f91d0507102358d076bea@mail.gmail.com>

Maybe using a decent mail client would help?
From denis at semiologic.com  Mon Jul 11 10:55:54 2005
From: denis at semiologic.com (Denis de Bernardy)
Date: Mon Jul 11 10:56:49 2005
Subject: [wp-hackers] 500 euros for WP + plugins
In-Reply-To: <e8e97f9f050709100459e7d636@mail.gmail.com>
Message-ID: <000001c58607$1c972e10$6702a8c0@DB>

Long thread... I'd like to thank you all for the positive feedback.

A few answers.


> David said:
>
> I think WP would have benefited more if Denis had developed
> this within the community.

Technically, I have: The package is mostly wp-plugins.net noise filtered,
with extras that are available on the web as downloads or code snippets. And
you can download the bulk of the package for free on my site.

Regarding software communities, I had these few thoughts last April:

http://www.semiologic.com/resources/open-source-business-model/


> David said:
> 
> I've been thinking about this for well over a year now, and I'm really 
> torn by it. If more people donated (thanks to those that have!!), it 
> wouldn't be a question

Try this trick:

Create a notify list to send users email notification when an update is
available. Be explicit that only those who make a more donation will receive
proper and timely update notifications. Don't forget to add any or all bug
fix contributors -- they donated time.

Then, post your notifications in WP the forums as usual. But strip them of a
few key details. Make it obvious that there is a bonus in gretting email
notifications -- I personally add tips and deep links. And you will see your
donation rate increase.

I haven't gone as far as detailing the benefits of the email notifications
on a sell page, but I suspect the resulting donation rate increase can be
significant. And with enough subscribers, you can of course sell ads on your
notify list.


> Amit said:
>
> those words imply that he's selling WP+Plugins+Themes which he can't 
> as per GPL

As a complement to Mark's answer: I suspect you were confusing GPL and
intellectual property laws. IP laws are so that you cannot claim ownership
for something that is copyright someone else.

My wording implies no such thing. I'm just selling a WP+Plugins+Themes
package. Trade is about packaging products together as a new product. And
the free software foundation's very purpose is to ensure you are free to
trade software.


To answer the license-related questions that were raised in the thread:

GPL and CC-By terms mandate that I provide my customers with source code
under the same terms I acquired it. Which I of course do. End-users hardly
care, however. The only thing they do care about with respect to license
terms is on the page: 'The full package will let you install any number of
web sites'.

Also, GPL terms make WP derives and plugins virally GPL except in a
borderline case mentionned in the GPL FAQ. When a plugin can't work out of
the box without WP function calls and WP data structures, it is clearly not
in said borderline case. I tend to think this is where you draw the line,
short of making every software GPL.

--  
Denis de Bernardy
http://www.semiologic.com

From fd at firasd.org  Mon Jul 11 11:04:38 2005
From: fd at firasd.org (Firas D.)
Date: Mon Jul 11 11:04:57 2005
Subject: [wp-hackers] 500 euros for WP + plugins
In-Reply-To: <000001c58607$1c972e10$6702a8c0@DB>
References: <000001c58607$1c972e10$6702a8c0@DB>
Message-ID: <42D25246.5010506@firasd.org>

Denis de Bernardy wrote:

>Also, GPL terms make WP derives and plugins virally GPL except in a
>borderline case mentionned in the GPL FAQ. When a plugin can't work out of
>the box without WP function calls and WP data structures, it is clearly not
>in said borderline case. I tend to think this is where you draw the line,
>short of making every software GPL.
>
But--and I realize you haven't argued against what I am to claim--one 
must respect the stated license accorded to a plugin by its developer 
until there is a court case or suchlike that establishes said 
plugin/theme under the GPL. The GPL FAQ is just one organization's view 
of what the GPL compels.

It would be quite unfair for WP to have an API for external tools, and 
then virally clamp onto any usage of its API with its own license.

-- 
http://firasd.org

From mgeisler at mgeisler.net  Mon Jul 11 11:12:24 2005
From: mgeisler at mgeisler.net (Martin Geisler)
Date: Mon Jul 11 12:09:34 2005
Subject: [wp-hackers] Re: 500 euros for WP + plugins
References: <001301c58583$3a101670$57ebd4cb@unicorn>
	<87hdf2l8cr.fsf@futtelifut.dyndns.org>
	<00d601c585a1$bb573290$6e01a8c0@sixfour>
Message-ID: <871x65fvfr.fsf@futtelifut.dyndns.org>

"David Chait" <davebytes@comcast.net> writes:

> Martin - just so you know, your response comes through to Outlook
> Express as a .txt attachment file, no other body content...

Ehm yes... I know, it's my use of digital signatures that confuses
Outlook Express.

Most other email programs handle signatures fine and I believe that
it's a problem with OE, as discussed here for example:

  http://lists.gnupg.org/pipermail/gnupg-users/2003-September/020161.html

-- 
Martin Geisler                                     GnuPG Key: 0x7E45DD38

PHP EXIF Library      |  PHP Weather             |  PHP Shell
http://pel.sf.net/    |  http://phpweather.net/  |  http://mgeisler.net/
Read/write EXIF data  |  Show current weather    |  A shell in a browser
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 188 bytes
Desc: not available
Url : http://comox.textdrive.com/pipermail/wp-hackers/attachments/20050711/d03fd637/attachment.bin
From mgeisler at mgeisler.net  Mon Jul 11 11:17:18 2005
From: mgeisler at mgeisler.net (Martin Geisler)
Date: Mon Jul 11 12:10:42 2005
Subject: [wp-hackers] Re: 500 euros for WP + plugins
References: <001301c58583$3a101670$57ebd4cb@unicorn>
	<87hdf2l8cr.fsf@futtelifut.dyndns.org>
	<003501c585d3$42d50ea0$57ebd4cb@unicorn>
Message-ID: <87wtnxegn5.fsf@futtelifut.dyndns.org>

"Amit Gupta" <wp@igeek.info> writes:

> OFF-TOPIC:
>
> thanks for that Martin, I know how to send emails as plain-text but
> don't want to use it that way!!!! I prefer HTML email for many
> reasons. :)

I'm curious as to what reasons that might be? Unless you do nothing
all day but send out birthday cards with funny colored text and happy
music in the background, then I really don't see what HTML brings you
except bigger emails and a label as yet another "typical Windows user".

-- 
Martin Geisler                                     GnuPG Key: 0x7E45DD38

PHP EXIF Library      |  PHP Weather             |  PHP Shell
http://pel.sf.net/    |  http://phpweather.net/  |  http://mgeisler.net/
Read/write EXIF data  |  Show current weather    |  A shell in a browser
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 188 bytes
Desc: not available
Url : http://comox.textdrive.com/pipermail/wp-hackers/attachments/20050711/f6915e30/attachment.bin
From wp at igeek.info  Mon Jul 11 12:11:02 2005
From: wp at igeek.info (Amit Gupta)
Date: Mon Jul 11 12:11:13 2005
Subject: [wp-hackers] 500 euros for WP + plugins
References: <000001c58607$1c972e10$6702a8c0@DB>
Message-ID: <001301c58611$9d994200$57ebd4cb@unicorn>


On Monday, July 11, 2005 "Denis de Bernardy" <denis@semiologic.com> 
wrote:
| As a complement to Mark's answer: I suspect you were confusing GPL and
| intellectual property laws. IP laws are so that you cannot claim 
ownership
| for something that is copyright someone else.
|
| My wording implies no such thing. I'm just selling a WP+Plugins+Themes
| package. Trade is about packaging products together as a new product. 
And
| the free software foundation's very purpose is to ensure you are free 
to
| trade software.

I believe I've already admitted that I did mis-understand some parts of 
the GPL and what you quoted was one of them. Now do you want a written 
apology? ;) :lol:

------------
Amit Gupta
http://igeek.info/  ||  http://blog.igeek.info/
http://blog.igeek.info/wp-plugins/igsyntax-hiliter 


From wp at igeek.info  Mon Jul 11 12:24:35 2005
From: wp at igeek.info (Amit Gupta)
Date: Mon Jul 11 12:24:48 2005
Subject: [wp-hackers] Re: 500 euros for WP + plugins
References: <001301c58583$3a101670$57ebd4cb@unicorn><87hdf2l8cr.fsf@futtelifut.dyndns.org><003501c585d3$42d50ea0$57ebd4cb@unicorn>
	<87wtnxegn5.fsf@futtelifut.dyndns.org>
Message-ID: <003f01c58613$81ea1730$57ebd4cb@unicorn>

OFF-TOPIC:
----------------
On Monday, July 11, 2005 "Martin Geisler" <mgeisler@mgeisler.net> wrote:
| I'm curious as to what reasons that might be? Unless you do nothing
| all day but send out birthday cards with funny colored text and happy
| music in the background, then I really don't see what HTML brings you
| except bigger emails and a label as yet another "typical Windows 
user".

strong words Martin!! but I'll still reply.
If you don't know, OE allows you to have multiple email accounts in 2 
ways, either you have multiple email accounts in 1 OE account or you 
have multiple OE accounts with 1 or more email accounts in each of them. 
Now, if I've HTML formatted eMails by default, then this setting applies 
to the whole OE account and all email accounts in that, I don't think 
you can specify different settings for different email accounts in 1 OE 
account. So instead of having multiple OE accounts and switching between 
them for checking different emails, I had 1 OE account with all email 
accounts in it. This also includes my office email account and for which 
I need HTML eMail settings. HTML emails might not be any worth to you 
but they are the only solution if you want to send emails to collegues 
and your boss about different things with highlighted points, emphasised 
points(read points in bold/italics), etc., just basic bold/italics 
formatting that is quite useful.

So HTML emails are not just for "birthday cards with funny colored text 
and happy music in the background". *rolleyes* Infact I don't use OE for 
sending out any B'Day cards at all, that's what the services like Blue 
Mountain, Yahoo! Greetings etc. are for.

But seeing the problems with HTML emails in this list(I think there 
still are some people who use HTML emails to send to this list, I wasn't 
the only one), I've created another OE account with plain-text settings, 
as you can see from this email!!!

------------
Amit Gupta
http://igeek.info/  ||  http://blog.igeek.info/
http://blog.igeek.info/wp-plugins/igsyntax-hiliter


From denis at semiologic.com  Mon Jul 11 12:42:25 2005
From: denis at semiologic.com (Denis de Bernardy)
Date: Mon Jul 11 12:43:25 2005
Subject: [wp-hackers] 500 euros for WP + plugins
In-Reply-To: <001301c58611$9d994200$57ebd4cb@unicorn>
Message-ID: <001201c58615$fe3fdac0$6702a8c0@DB>



> Amit Gupta
> 
> I believe I've already admitted that I did mis-understand 
> some parts of 
> the GPL and what you quoted was one of them. Now do you want 
> a written 
> apology? ;) :lol:

Not at all, I just wanted to clarify my understanding of OSS for those who
might be wondering. :)

D.

From pete.prodoehl at cygnusinteractive.com  Mon Jul 11 13:08:17 2005
From: pete.prodoehl at cygnusinteractive.com (Pete Prodoehl)
Date: Mon Jul 11 13:08:30 2005
Subject: [wp-hackers] Re: 500 euros for WP + plugins
In-Reply-To: <003f01c58613$81ea1730$57ebd4cb@unicorn>
References: <001301c58583$3a101670$57ebd4cb@unicorn><87hdf2l8cr.fsf@futtelifut.dyndns.org><003501c585d3$42d50ea0$57ebd4cb@unicorn>	<87wtnxegn5.fsf@futtelifut.dyndns.org>
	<003f01c58613$81ea1730$57ebd4cb@unicorn>
Message-ID: <42D26F41.4000404@cygnusinteractive.com>

Amit Gupta wrote:
> OFF-TOPIC:
> ----------------
> I need HTML eMail settings. HTML emails might not be any worth to you 
> but they are the only solution if you want to send emails to collegues 
> and your boss about different things with highlighted points, emphasised 
> points(read points in bold/italics), etc., just basic bold/italics 
> formatting that is quite useful.

Hmmm, we've managed to highlight and emphasize points just fine using 
plain text emails for *years* now. I work with colleagues and bosses in 
a large company and send everyone plain text emails. No one has 
complained yet.

Pete

From skippy at skippy.net  Mon Jul 11 13:11:56 2005
From: skippy at skippy.net (Scott Merrill)
Date: Mon Jul 11 13:11:58 2005
Subject: [wp-hackers] Re: 500 euros for WP + plugins
In-Reply-To: <42D26F41.4000404@cygnusinteractive.com>
References: <001301c58583$3a101670$57ebd4cb@unicorn><87hdf2l8cr.fsf@futtelifut.dyndns.org><003501c585d3$42d50ea0$57ebd4cb@unicorn>	<87wtnxegn5.fsf@futtelifut.dyndns.org>	<003f01c58613$81ea1730$57ebd4cb@unicorn>
	<42D26F41.4000404@cygnusinteractive.com>
Message-ID: <42D2701C.2040407@skippy.net>

Pete Prodoehl wrote:
> Amit Gupta wrote:
> 
>> OFF-TOPIC:
>> ----------------
>> I need HTML eMail settings. HTML emails might not be any worth to you
>> but they are the only solution if you want to send emails to collegues
>> and your boss about different things with highlighted points,
>> emphasised points(read points in bold/italics), etc., just basic
>> bold/italics formatting that is quite useful.
> 
> 
> Hmmm, we've managed to highlight and emphasize points just fine using
> plain text emails for *years* now. I work with colleagues and bosses in
> a large company and send everyone plain text emails. No one has
> complained yet.
> 
> Pete

Not all work environments are the same; and the social and political
climates from office to office may vary wildly.

I encourage those interested in pursuing this discussion take it
off-list.  I am not interested in pursuing it, so please do not include
me in your replies.

-- 
skippy@skippy.net | http://skippy.net/

gpg --keyserver pgp.mit.edu --recv-keys 9CFA4B35
506C F8BB 17AE 8A05 0B49  3544 476A 7DEC 9CFA 4B35
From ryan at boren.nu  Mon Jul 11 14:05:44 2005
From: ryan at boren.nu (Ryan Boren)
Date: Mon Jul 11 14:05:51 2005
Subject: [wp-hackers] User Capabilities
In-Reply-To: <42D20D2A.3090700@mullenweg.com>
References: <1120196075.7972.0.camel@portnoy.fuzzybelly.org>
	<42C4DD1E.5080807@txfx.net>
	<1120231038.15622.19.camel@portnoy.fuzzybelly.org>
	<42C56271.8010105@wltc.net>
	<1120602422.3844.114.camel@portnoy.fuzzybelly.org>
	<012601c58245$7d2de040$6402a8c0@DELL8600>
	<42CC0A48.8080905@midnightcircus.com>
	<1120796682.3844.165.camel@portnoy.fuzzybelly.org>
	<42CE9769.80702@midnightcircus.com>
	<42572.64.101.146.91.1120854503.squirrel@webmail.barclay.textdrive.com>
	<1120858481.12652.17.camel@portnoy.fuzzybelly.org>
	<1120928406.22248.7.camel@portnoy.fuzzybelly.org>
	<42D0C8EA.1020801@midnightcircus.com>
	<1121016327.22248.17.camel@portnoy.fuzzybelly.org>
	<42D16B55.8090806@midnightcircus.com>
	<1121032835.22248.24.camel@portnoy.fuzzybelly.org>
	<1121033516.22248.33.camel@portnoy.fuzzybelly.org>
	<42D1A08E.8020800@mullenweg.com>
	<1121034897.22248.40.camel@portnoy.fuzzybelly.org>
	<42D1B41B.8020506@mullenweg.com> <42D1B4C3.7090001@skippy.net>
	<42D20D2A.3090700@mullenweg.com>
Message-ID: <1121090744.17612.62.camel@portnoy.fuzzybelly.org>

Here's the patch as it currently stands.

Ryan
-------------- next part --------------
A non-text attachment was scrubbed...
Name: caps.diff
Type: text/x-patch
Size: 17786 bytes
Desc: not available
Url : http://comox.textdrive.com/pipermail/wp-hackers/attachments/20050711/75690608/caps-0001.bin
From mgeisler at mgeisler.net  Mon Jul 11 13:36:09 2005
From: mgeisler at mgeisler.net (Martin Geisler)
Date: Mon Jul 11 14:09:43 2005
Subject: [wp-hackers] OT: HTML mail
References: <001301c58583$3a101670$57ebd4cb@unicorn>
	<87hdf2l8cr.fsf@futtelifut.dyndns.org>
	<003501c585d3$42d50ea0$57ebd4cb@unicorn>
	<87wtnxegn5.fsf@futtelifut.dyndns.org>
	<003f01c58613$81ea1730$57ebd4cb@unicorn>
Message-ID: <87oe99ea7q.fsf_-_@futtelifut.dyndns.org>

"Amit Gupta" <wp@igeek.info> writes:

> [...] HTML emails might not be any worth to you but they are the
> only solution if you want to send emails to collegues and your boss
> about different things with highlighted points, emphasised
> points(read points in bold/italics), etc., just basic bold/italics
> formatting that is quite useful.

Yes, bold/italics are nice, but it's nothing that you cannot indicate
with *bold* or /italic/ in your plain text mails.  Very simple and
fast to type.

Having your mail reader turn into a fullblown HTML browser is overkill
and the number of security problems you get along with the extra
functionality is not worth it, in my opinion.

But let's not continue discussing this here.  Feel free to reply to me
off the list if you want --- I intended this whole netiquette
discussion to be off list in the first place.

> So HTML emails are not just for "birthday cards with funny colored
> text and happy music in the background". *rolleyes* Infact I don't
> use OE for sending out any B'Day cards at all, that's what the
> services like Blue Mountain, Yahoo! Greetings etc. are for.

Of course, that sentence was supposed to be funny! :-)

-- 
Martin Geisler                                     GnuPG Key: 0x7E45DD38

PHP EXIF Library      |  PHP Weather             |  PHP Shell
http://pel.sf.net/    |  http://phpweather.net/  |  http://mgeisler.net/
Read/write EXIF data  |  Show current weather    |  A shell in a browser
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 188 bytes
Desc: not available
Url : http://comox.textdrive.com/pipermail/wp-hackers/attachments/20050711/8208d777/attachment.bin
From ringmaster at midnightcircus.com  Mon Jul 11 16:22:46 2005
From: ringmaster at midnightcircus.com (Owen Winkler)
Date: Mon Jul 11 16:19:33 2005
Subject: [wp-hackers] User Capabilities
In-Reply-To: <1121090744.17612.62.camel@portnoy.fuzzybelly.org>
References: <1120196075.7972.0.camel@portnoy.fuzzybelly.org>	<1120231038.15622.19.camel@portnoy.fuzzybelly.org>	<42C56271.8010105@wltc.net>	<1120602422.3844.114.camel@portnoy.fuzzybelly.org>	<012601c58245$7d2de040$6402a8c0@DELL8600>	<42CC0A48.8080905@midnightcircus.com>	<1120796682.3844.165.camel@portnoy.fuzzybelly.org>	<42CE9769.80702@midnightcircus.com>	<42572.64.101.146.91.1120854503.squirrel@webmail.barclay.textdrive.com>	<1120858481.12652.17.camel@portnoy.fuzzybelly.org>	<1120928406.22248.7.camel@portnoy.fuzzybelly.org>	<42D0C8EA.1020801@midnightcircus.com>	<1121016327.22248.17.camel@portnoy.fuzzybelly.org>	<42D16B55.8090806@midnightcircus.com>	<1121032835.22248.24.camel@portnoy.fuzzybelly.org>	<1121033516.22248.33.camel@portnoy.fuzzybelly.org>	<42D1A08E.8020800@mullenweg.com>	<1121034897.22248.40.camel@portnoy.fuzzybelly.org>	<42D1B41B.8020506@mullenweg.com>
	<42D1B4C3.7090001@skippy.net>	<42D20D2A.3090700@mullenweg.com>
	<1121090744.17612.62.camel@portnoy.fuzzybelly.org>
Message-ID: <42D29CD6.1030102@midnightcircus.com>

Ryan Boren wrote:
> Here's the patch as it currently stands.

Looks like update_user_cache() didn't make it into 
pluggable_functions.php.  It's not used anywhere now, but the admin UI 
will require functionality very much like it.

Unless someone objects, commit and I'll continue with UI, which I've got 
to maybe 20% right now.

My ideas:

My user editor allows you to choose a single role from a dropdown.  You 
may not assign extra capabilities to users via the core user manager. 
The user display system lists all roles assigned to a user (even though 
the UI only lets you assign one).  I'll add a table row to display 
user-assigned capabilities if they exist, too.

I'm thinking to add a sub-menu on Users to assign capabilities to roles. 
  Also, I think it might be a good idea to add a get_assignable_caps() 
to capabilities.php that returns an array of (duh) assignable 
capabilities.   This will be populated initially with all caps in the 
core.  There will be also a filter in there for plugins to add/remove caps.

The user list will be sorted alphabetically by role then by username to 
emulate the current Author/Registered User behavior.  The "Promote" link 
and the level number with +/- will be replaced with a dropdown. 
Submitting the page updates changes.

My current implementation of the User Editor page doesn't die() on 
errors and force the user to use the browser's Back button.  Instead, it 
redisplays the form with the submitted data, and displays an error 
message at the top in a .error CSS class similar to the .update class. 
How do you feel about that?

All level-based checks will be removed.

Thoughts on UI from concerned quarters speak up now.  I'll post a patch 
of what I have for UI late this afternoon.

Owen



From davebytes at comcast.net  Mon Jul 11 17:40:23 2005
From: davebytes at comcast.net (David Chait)
Date: Mon Jul 11 17:51:07 2005
Subject: [wp-hackers] OT: HTML mail
References: <001301c58583$3a101670$57ebd4cb@unicorn><87hdf2l8cr.fsf@futtelifut.dyndns.org><003501c585d3$42d50ea0$57ebd4cb@unicorn><87wtnxegn5.fsf@futtelifut.dyndns.org><003f01c58613$81ea1730$57ebd4cb@unicorn>
	<87oe99ea7q.fsf_-_@futtelifut.dyndns.org>
Message-ID: <009001c5863f$9db03680$6e01a8c0@sixfour>

FYI, I >can< read HTML emails, I generally prefer them myself (I don't like 
the line-truncated, monotype, plaintext stuff)...  And I certainly prefer 
them to emails using some form of a .sig that causes it to become an 
attachment in the default windows email progam... ;)

You can take this off-list now. ;) ;)

-d

----- Original Message ----- 
From: "Martin Geisler" <mgeisler@mgeisler.net>
To: <wp-hackers@lists.automattic.com>
Sent: Monday, July 11, 2005 9:36 AM
Subject: [wp-hackers] OT: HTML mail


> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
> 

From dmhouse at gmail.com  Mon Jul 11 17:57:28 2005
From: dmhouse at gmail.com (David House)
Date: Mon Jul 11 17:57:39 2005
Subject: [wp-hackers] User Capabilities
In-Reply-To: <42D29CD6.1030102@midnightcircus.com>
References: <1120196075.7972.0.camel@portnoy.fuzzybelly.org>
	<1121032835.22248.24.camel@portnoy.fuzzybelly.org>
	<1121033516.22248.33.camel@portnoy.fuzzybelly.org>
	<42D1A08E.8020800@mullenweg.com>
	<1121034897.22248.40.camel@portnoy.fuzzybelly.org>
	<42D1B41B.8020506@mullenweg.com> <42D1B4C3.7090001@skippy.net>
	<42D20D2A.3090700@mullenweg.com>
	<1121090744.17612.62.camel@portnoy.fuzzybelly.org>
	<42D29CD6.1030102@midnightcircus.com>
Message-ID: <ebe43d6805071110571c4b2c78@mail.gmail.com>

On 7/11/05, Owen Winkler <ringmaster@midnightcircus.com> wrote:
> My current implementation of the User Editor page doesn't die() on
> errors and force the user to use the browser's Back button.  Instead, it
> redisplays the form with the submitted data, and displays an error
> message at the top in a .error CSS class similar to the .update class.
> How do you feel about that?

That sounds good. That could be something we could implement in more
places in the core, too.

-- 
-David House, dmhouse@gmail.com, http://xmouse.ithium.net
From dmhouse at gmail.com  Mon Jul 11 18:02:09 2005
From: dmhouse at gmail.com (David House)
Date: Mon Jul 11 18:02:14 2005
Subject: [wordpress] Re: [wp-hackers] WP-Plugins.org Perms
In-Reply-To: <42D1B692.2090507@txfx.net>
References: <42D150D4.5030106@cornell.edu> <42D17CBD.10303@mullenweg.com>
	<42D1831E.6030203@cornell.edu> <42D19817.3000103@mullenweg.com>
	<42D1B692.2090507@txfx.net>
Message-ID: <ebe43d68050711110265de9458@mail.gmail.com>

On 7/11/05, Mark Jaquith <mark.wordpress@txfx.net> wrote:
> Hm... this brings up an interesting point... I think it would be cool to
> have an author sandbox for misc stuff that isn't quite ready for its own
> directory.  Perhaps each user who has control of a plugin could be given
> /user/user-name/ for their use.

A bit like kdenonbeta for KDE, but done on a per-user basis. Sounds
interesting; I'm just worried that you'd either get people commiting
crap left right and centre, or no-one would use it. I guess if the
permissions etc aren't too hard to set up then one extra folder
doesn't do much harm...

-- 
-David House, dmhouse@gmail.com, http://xmouse.ithium.net
From tdw at funkive.com  Mon Jul 11 19:56:25 2005
From: tdw at funkive.com (Terrence Wood)
Date: Mon Jul 11 20:04:58 2005
Subject: [wp-hackers] Re: 500 euros for WP + plugins
In-Reply-To: <87wtnxegn5.fsf@futtelifut.dyndns.org>
References: <001301c58583$3a101670$57ebd4cb@unicorn>
	<87hdf2l8cr.fsf@futtelifut.dyndns.org>
	<003501c585d3$42d50ea0$57ebd4cb@unicorn>
	<87wtnxegn5.fsf@futtelifut.dyndns.org>
Message-ID: <DCF43217-F245-11D9-82C6-0003931722DA@funkive.com>

well, we're on the subject of inconvenient mail formats, 
multipart/signed isn't exactly plain text either, but since it's my 
choice to demime my list mail I'm not going to complain.

I know I might miss something of interest but there is always the 
online archive to refer to.

regards
Terrence Wood.
On 11 Jul 2005, at 11:17 PM, Martin Geisler wrote:

>
> [demime 1.01d removed an attachment of type multipart/signed]
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

From ringmaster at midnightcircus.com  Mon Jul 11 20:51:07 2005
From: ringmaster at midnightcircus.com (Owen Winkler)
Date: Tue Jul 12 00:02:01 2005
Subject: [wp-hackers] User Capabilities
In-Reply-To: <ebe43d6805071110571c4b2c78@mail.gmail.com>
References: <1120196075.7972.0.camel@portnoy.fuzzybelly.org>	<1121032835.22248.24.camel@portnoy.fuzzybelly.org>	<1121033516.22248.33.camel@portnoy.fuzzybelly.org>	<42D1A08E.8020800@mullenweg.com>	<1121034897.22248.40.camel@portnoy.fuzzybelly.org>	<42D1B41B.8020506@mullenweg.com>
	<42D1B4C3.7090001@skippy.net>	<42D20D2A.3090700@mullenweg.com>	<1121090744.17612.62.camel@portnoy.fuzzybelly.org>	<42D29CD6.1030102@midnightcircus.com>
	<ebe43d6805071110571c4b2c78@mail.gmail.com>
Message-ID: <42D2DBBB.9090302@midnightcircus.com>

David House wrote:
> On 7/11/05, Owen Winkler <ringmaster@midnightcircus.com> wrote:
> 
>>My current implementation of the User Editor page doesn't die() on
>>errors and force the user to use the browser's Back button.  Instead, it
>>redisplays the form with the submitted data, and displays an error
>>message at the top in a .error CSS class similar to the .update class.
>>How do you feel about that?
> 
> That sounds good. That could be something we could implement in more
> places in the core, too.

So far I've been lucky with the way things are built that I can 
rearrange a switch statement and have errors fall through to the next 
case.  I've already implemented this error fall-through on both the 
edit-user page and the users list (for adding new users).  Another nice 
side effect of this is that all errors are reported rather than just the 
first one that calls die().

I also set up the $errors array so that if we wanted to, we could put 
the error messages right near the entry fields.  For example, if there's 
an error with the user_login field (say, a username is already in use), 
then I set:

$errors['user_login'] = __('ERROR: Username already in use');

And so later in the form, you could do:

<?php
function form_error_class($field, $errors) {
	echo isset($errors[$field]) ?
	' class="error" title="' . $errors[$field] . '" ' :
	'';
}
?>
...
<input type="text" name="user_login"
<?php form_error_class('user_login', $errors); ?> />

Or something crazy like that there.

I'm considering adding the oft-asked-for reassignment of posts to a 
different user when a user is deleted.  I'm in there already, right?

I've already modified the options pages to set a default user role for 
new users, and updated the upgrade-schema to use Inactive as the default 
by default.  The default settings on that page are fine, but it's going 
to need a link to Codex if people what to understand what they're changing.

Well, there's not a lot of time left this afternoon and I still have to 
run through my lines for class, so I've attached a new patch that has 
both the caps stuff and the UI stuff that I've completed so far.

The one interface element that doesn't yet work is the Group 
Delete/Reassign Roles section on the user list.  I think everything else 
on the Users tab is working ok.  Try submitting some errors (like 
filling out only one password field) and see if you like the error 
handling.  I'll pick up the ball again tomorrow.

Also be sure to visit the Options | General and Options |Writing pages 
for the changes there regarding new user registrations.  Don't forget to 
  run upgrade.php so that you get the default Role settings.

Lots and lots of small changes in this patch.

Owen
-------------- next part --------------
A non-text attachment was scrubbed...
Name: caps_and_UI.diff
Type: text/x-patch
Size: 49471 bytes
Desc: not available
Url : http://comox.textdrive.com/pipermail/wp-hackers/attachments/20050712/6fda9842/caps_and_UI-0001.bin
From dinkumator at gmail.com  Mon Jul 11 23:04:13 2005
From: dinkumator at gmail.com (Jeremy Jay)
Date: Tue Jul 12 00:07:41 2005
Subject: [wp-hackers] xanga import script
Message-ID: <635cc16105071116043a267fa1@mail.gmail.com>

hi,
  I wrote this import script a while ago (1.2) used it on mine and a
couple other friends' sites, and then forgot about it. Recently a
friend asked if he could use it for his own blog, so I updated it to
get it to work with 1.5.1.3.  All it does is take a Xanga Premium
archive file and imports it into WordPress including all the comments
from the posts as well (unlike from the rss feed)...  I was wondering
what everyone thought about it or if it there was a need to include it
with the rest of the import scripts.  The code's kinda ugly but it
works well.  I can clean it up and submit it if someone wants. =)

www.dinkumator.com/works/import-xanga.phps

Thanks!
From dinkumator at gmail.com  Tue Jul 12 00:10:02 2005
From: dinkumator at gmail.com (Jeremy Jay)
Date: Tue Jul 12 00:11:13 2005
Subject: [wp-hackers] xanga import script
Message-ID: <635cc161050711171017be0a67@mail.gmail.com>

hi,
 I wrote this import script a while ago (1.2) used it on mine and a
couple other friends' sites, and then forgot about it. Recently a
friend asked if he could use it for his own blog, so I updated it to
get it to work with 1.5.1.3.  All it does is take a Xanga Premium
archive file and imports it into WordPress including all the comments
from the posts as well (unlike from the rss feed)...  I was wondering
what everyone thought about it or if it there was enough of a need
to include it with the rest of the import scripts.  The code's kinda
ugly but it works well.  I can clean it up and submit it if
someone wants. =)

www.dinkumator.com/works/import-xanga.phps

Thanks!

Jeremy Jay
From jdingman at gmail.com  Mon Jul 11 22:27:36 2005
From: jdingman at gmail.com (Jonathan Dingman)
Date: Tue Jul 12 00:15:51 2005
Subject: [wp-hackers] Thumbnail HTML Code
Message-ID: <13af0b6305071115275318e107@mail.gmail.com>

This issue was recently brought up on the forums and I thought it should be 
addressed. It's not of high concern, but something that could be easily 
fixed for everyone.

When uploading a file/image through the upload application in the admin 
area, selecting to create a thumbnail while uploading it doesn't show the 
html to display the thumbnail. It's a simple fix that would help a lot of 
new users.

I'm recommending that Wordpress insert the code below underneath the code 
already there:

Thumbnail Code:

{display html for the thumbnail}

Or something of the sort.

========================
Jonathan Dingman
http://www.bleakgeek.com
http://www.christian-lyrics.net
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://comox.textdrive.com/pipermail/wp-hackers/attachments/20050712/0fe278d1/attachment.html
From false.hopes at gmail.com  Tue Jul 12 00:20:25 2005
From: false.hopes at gmail.com (Robert Deaton)
Date: Tue Jul 12 00:20:34 2005
Subject: [wp-hackers] Thumbnail HTML Code
In-Reply-To: <13af0b6305071115275318e107@mail.gmail.com>
References: <13af0b6305071115275318e107@mail.gmail.com>
Message-ID: <a491f91d050711172065249284@mail.gmail.com>

This sort of thing in the stable release has intentionally been left
to plugins from my understanding. WordPress tries to stay as
lightweight as possible, and let plugins do the rest when possible.

On 7/11/05, Jonathan Dingman <jdingman@gmail.com> wrote:
> This issue was recently brought up on the forums and I thought it should be
> addressed.  It's not of high concern, but something that could be easily
> fixed for everyone.
>  
>  When uploading a file/image through the upload application in the admin
> area, selecting to create a thumbnail while uploading it doesn't show the
> html to display the thumbnail.  It's a simple fix that would help a lot of
> new users.
>  
>  I'm recommending that Wordpress insert the code below underneath the code
> already there:
>  
>  Thumbnail Code:
>  
>  {display html for the thumbnail}
>  
>  Or something of the sort.
>  
>  ========================
>  Jonathan Dingman
>  http://www.bleakgeek.com
>  http://www.christian-lyrics.net
>  
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
> 
> 
> 


-- 
--Robert Deaton
http://somethingunpredictable.com
From m at mullenweg.com  Tue Jul 12 00:30:27 2005
From: m at mullenweg.com (Matthew Mullenweg)
Date: Tue Jul 12 00:30:33 2005
Subject: [wp-hackers] xanga import script
In-Reply-To: <635cc161050711171017be0a67@mail.gmail.com>
References: <635cc161050711171017be0a67@mail.gmail.com>
Message-ID: <42D30F23.6050801@mullenweg.com>

Jeremy Jay wrote:
>  I wrote this import script a while ago (1.2) used it on mine and a
> couple other friends' sites, and then forgot about it. Recently a
> friend asked if he could use it for his own blog, so I updated it to
> get it to work with 1.5.1.3.  All it does is take a Xanga Premium
> archive file and imports it into WordPress including all the comments
> from the posts as well (unlike from the rss feed)...  I was wondering
> what everyone thought about it or if it there was enough of a need
> to include it with the rest of the import scripts.  The code's kinda
> ugly but it works well.  I can clean it up and submit it if
> someone wants. =)

I've added this to the list of importers for 1.6, so hopefully we can 
get it in:

http://codex.wordpress.org/Version_1.6#New_Features

-- 
Matt Mullenweg
  http://photomatt.net | http://wordpress.org
http://pingomatic.com | http://cnet.com
From m at mullenweg.com  Tue Jul 12 00:35:03 2005
From: m at mullenweg.com (Matthew Mullenweg)
Date: Tue Jul 12 00:35:11 2005
Subject: [wp-hackers] Thumbnail HTML Code
In-Reply-To: <a491f91d050711172065249284@mail.gmail.com>
References: <13af0b6305071115275318e107@mail.gmail.com>
	<a491f91d050711172065249284@mail.gmail.com>
Message-ID: <42D31037.2020301@mullenweg.com>

Robert Deaton wrote:
> This sort of thing in the stable release has intentionally been left
> to plugins from my understanding. WordPress tries to stay as
> lightweight as possible, and let plugins do the rest when possible.

I don't think it would hurt to rip out the Upload tab and make uploading 
something that's done inline with posting (where it makes sense).

Owen, any update on the media uploading stuff?

-- 
Matt Mullenweg
  http://photomatt.net | http://wordpress.org
http://pingomatic.com | http://cnet.com
From ryan at boren.nu  Mon Jul 11 22:49:46 2005
From: ryan at boren.nu (Ryan Boren)
Date: Tue Jul 12 00:49:43 2005
Subject: [wp-hackers] User Capabilities
In-Reply-To: <42D29CD6.1030102@midnightcircus.com>
References: <1120196075.7972.0.camel@portnoy.fuzzybelly.org>
	<1120231038.15622.19.camel@portnoy.fuzzybelly.org>
	<42C56271.8010105@wltc.net>
	<1120602422.3844.114.camel@portnoy.fuzzybelly.org>
	<012601c58245$7d2de040$6402a8c0@DELL8600>
	<42CC0A48.8080905@midnightcircus.com>
	<1120796682.3844.165.camel@portnoy.fuzzybelly.org>
	<42CE9769.80702@midnightcircus.com>
	<42572.64.101.146.91.1120854503.squirrel@webmail.barclay.textdrive.com>
	<1120858481.12652.17.camel@portnoy.fuzzybelly.org>
	<1120928406.22248.7.camel@portnoy.fuzzybelly.org>
	<42D0C8EA.1020801@midnightcircus.com>
	<1121016327.22248.17.camel@portnoy.fuzzybelly.org>
	<42D16B55.8090806@midnightcircus.com>
	<1121032835.22248.24.camel@portnoy.fuzzybelly.org>
	<1121033516.22248.33.camel@portnoy.fuzzybelly.org>
	<42D1A08E.8020800@mullenweg.com>
	<1121034897.22248.40.camel@portnoy.fuzzybelly.org>
	<42D1B41B.8020506@mullenweg.com> <42D1B4C3.7090001@skippy.net>
	<42D20D2A.3090700@mullenweg.com>
	<1121090744.17612.62.camel@portnoy.fuzzybelly.org>
	<42D29CD6.1030102@midnightcircus.com>
Message-ID: <1121122187.17612.67.camel@portnoy.fuzzybelly.org>

On Mon, 2005-07-11 at 12:22 -0400, Owen Winkler wrote:
> Ryan Boren wrote:
> > Here's the patch as it currently stands.
> 
> Looks like update_user_cache() didn't make it into 
> pluggable_functions.php.  It's not used anywhere now, but the admin UI 
> will require functionality very much like it.

I'm losing track of the patches.  I committed with what I had.  Could
you send a patch for what I missed?

> My ideas:
> ...
> 
> Thoughts on UI from concerned quarters speak up now.  I'll post a patch 
> of what I have for UI late this afternoon.

All sounds good to me, although I usually leave the UI design to others.
Regardless, sounds like a solid move in the right direction.  It'll give
us a good base to quibble over at least. :-)

Ryan

From ringmaster at midnightcircus.com  Mon Jul 11 20:52:45 2005
From: ringmaster at midnightcircus.com (Owen Winkler)
Date: Tue Jul 12 01:17:34 2005
Subject: [wp-hackers] User Capabilities
In-Reply-To: <a491f91d0507102154c440ddf@mail.gmail.com>
References: <1120196075.7972.0.camel@portnoy.fuzzybelly.org>	<42D1E49D.20109@wakeless.net>
	<a491f91d0507102154c440ddf@mail.gmail.com>
Message-ID: <42D2DC1D.204@midnightcircus.com>

Robert Deaton wrote:
> Nothing is set in stone, so its best not to start writing documentation that 
> may change in five minutes. Once its established and committed it might be a 
> good idea though.

On the other hand, it might be a good idea to centralize the specs that 
have led us to this point, so when we're rewriting all of that or coding 
the UI for capabilities we aren't left scratching our heads wondering 
why something was done in the first place.

Completely incomplete:
http://codex.wordpress.org/User:ringmaster/Capabilities_Classes

More informative:
http://asymptomatic.net/wp/2005/07/11/1747/permission-change-overview-in-16/

Owen
From ringmaster at midnightcircus.com  Tue Jul 12 02:25:56 2005
From: ringmaster at midnightcircus.com (Owen Winkler)
Date: Tue Jul 12 02:26:46 2005
Subject: [wp-hackers] Thumbnail HTML Code
In-Reply-To: <42D31037.2020301@mullenweg.com>
References: <13af0b6305071115275318e107@mail.gmail.com>	<a491f91d050711172065249284@mail.gmail.com>
	<42D31037.2020301@mullenweg.com>
Message-ID: <42D32A34.8060803@midnightcircus.com>

Matthew Mullenweg wrote:

> I don't think it would hurt to rip out the Upload tab and make 
> uploading something that's done inline with posting (where it makes 
> sense).
>
> Owen, any update on the media uploading stuff?

Part of the reason why my patches on the permissions stuff is coming so 
slowly (!!) is because I have to remove the media stuff from the unified 
diffs that TortoiseSVN makes.  I know I keep promising to send it, but 
obviously my schedule is a bit clearer this week than it has been for 
the past few months and there should be goodness.

In the media patch at the very, very minimum:

* Permalinks for images and thumbnails.
* A new advanced section in the post editing form for selecting images, 
dubbed "media browser".
* Uploading into directories via the media browser.
* Several functions for building media albums from child object posts on 
a new template similar to page.php.

What I'm doing in between permissions patches:

* Fiddling with the file selection UI, including the option to sandbox a 
user into their own user-image-upload directory unless they have a 
permission (see why I like the new capabilities stuff?).
* Basic options page settings for media.

To answer the question directly about adding thumbnails- The Upload tab 
is history.  There is a button for inserting something (one of two sizes 
of thumbnails or the original image), and having it link to something 
(nothing, the full sized image, or the dedicated image post page).  
WordPress creates the thumbnails automatically, and although the custom 
thumb-cropping doodad isn't in there yet, I still have that code.

There are still some problems I haven't solved to my satisfaction, for 
example, how to display different media types using different HTML 
snippets.  (For example, movies should use some kind of object tag, not 
<img>.)  I think I might just throw a plugin hook there and say, "Add 
via plugin whatever I couldn't think of."

I finally figured out my sticky issue - how to add children to a post ID 
that doesn't exist yet.  The solution was one of those thing where I hit 
my head on the toilet -wham!- and I had the design for the Flux Capacitor.

Another tricky bit is the expando js code.  I need to fire an event to 
load an iframe either when the box expands (easy) or when the page loads 
and the cookie says "leave expanded" (not possible with current code).  
So that change (in the shared dbx lib from brothercake) will be in the diff.

Owen


From m at mullenweg.com  Tue Jul 12 03:01:17 2005
From: m at mullenweg.com (Matthew Mullenweg)
Date: Tue Jul 12 03:01:23 2005
Subject: [wp-hackers] Thumbnail HTML Code
In-Reply-To: <42D32A34.8060803@midnightcircus.com>
References: <13af0b6305071115275318e107@mail.gmail.com>	<a491f91d050711172065249284@mail.gmail.com>	<42D31037.2020301@mullenweg.com>
	<42D32A34.8060803@midnightcircus.com>
Message-ID: <42D3327D.6040804@mullenweg.com>

Owen Winkler wrote:
> Part of the reason why my patches on the permissions stuff is coming so 
> slowly (!!) is because I have to remove the media stuff from the unified 
> diffs that TortoiseSVN makes.  I know I keep promising to send it, but 
> obviously my schedule is a bit clearer this week than it has been for 
> the past few months and there should be goodness.

Good to hear! It doesn't need to boil the ocean, just enough to get 
everyone started using and testing it.

> * Fiddling with the file selection UI, including the option to sandbox a 
> user into their own user-image-upload directory unless they have a 
> permission (see why I like the new capabilities stuff?).

That's probably overkill.

> I finally figured out my sticky issue - how to add children to a post ID 
> that doesn't exist yet.  The solution was one of those thing where I hit 
> my head on the toilet -wham!- and I had the design for the Flux Capacitor.

Feel free to create drafts at will and with reckless abandon, IDs are cheap.

> Another tricky bit is the expando js code.  I need to fire an event to 
> load an iframe either when the box expands (easy) or when the page loads 
> and the cookie says "leave expanded" (not possible with current code).  
> So that change (in the shared dbx lib from brothercake) will be in the 
> diff.

No prob.

-- 
Matt Mullenweg
  http://photomatt.net | http://wordpress.org
http://pingomatic.com | http://cnet.com
From jeff at jrm.cc  Tue Jul 12 03:20:57 2005
From: jeff at jrm.cc (Jeff Minard)
Date: Tue Jul 12 04:08:56 2005
Subject: [wp-hackers] Thumbnail HTML Code
In-Reply-To: <42D3327D.6040804@mullenweg.com>
References: <13af0b6305071115275318e107@mail.gmail.com>	<a491f91d050711172065249284@mail.gmail.com>	<42D31037.2020301@mullenweg.com>	<42D32A34.8060803@midnightcircus.com>
	<42D3327D.6040804@mullenweg.com>
Message-ID: <42D33719.3030502@jrm.cc>

Matthew Mullenweg wrote:
> > * Fiddling with the file selection UI, including the option to sandbox a 
> > user into their own user-image-upload directory unless they have a 
> > permission (see why I like the new capabilities stuff?).
> >
> 
> 
> That's probably overkill.
> 

Not really. If you want it locked down so one user can't override 
another's uploaded images (goatse anyone?) then this is a very good 
idea. With expanded capabilities giving WordPress even more CMS 
possibilities and extending it's multi-user friendliness, this is rather 
necessary.

Jeff
From ringmaster at midnightcircus.com  Tue Jul 12 04:38:08 2005
From: ringmaster at midnightcircus.com (Owen Winkler)
Date: Tue Jul 12 04:38:52 2005
Subject: [wp-hackers] Thumbnail HTML Code
In-Reply-To: <42D3327D.6040804@mullenweg.com>
References: <13af0b6305071115275318e107@mail.gmail.com>	<a491f91d050711172065249284@mail.gmail.com>	<42D31037.2020301@mullenweg.com>	<42D32A34.8060803@midnightcircus.com>
	<42D3327D.6040804@mullenweg.com>
Message-ID: <42D34930.2030409@midnightcircus.com>

Matthew Mullenweg wrote:
>> * Fiddling with the file selection UI, including the option to sandbox 
>> a user into their own user-image-upload directory unless they have a 
>> permission (see why I like the new capabilities stuff?).
> 
> That's probably overkill.

I agree that it seems a bit excessive.  But it was the most commonly 
requested feature I had for Exhibit until I implemented it.  Maybe I 
should track down my userbase and force them to explain themselves.

> Feel free to create drafts at will and with reckless abandon, IDs are 
> cheap.

Every time the user would click on the Write tab, I would need a new ID, 
leaving possibly tons of draft posts.  I guess I would feel better about 
this if I didn't feel like I was creating a sea of unmanaged empty draft 
posts.  So instead, I've got a hidden field that stores child object 
IDs, and when the post gets saved, the "children" are re-parented using 
the new post ID.

One clarification:  An image that appears in two separate posts should 
have two different permalinks, correct?  My gut reaction was "no", but 
as I thought it through, I'm thinking "yes".

Owen


From ringmaster at midnightcircus.com  Tue Jul 12 04:38:06 2005
From: ringmaster at midnightcircus.com (Owen Winkler)
Date: Tue Jul 12 04:38:57 2005
Subject: [wp-hackers] User Capabilities
In-Reply-To: <1121122187.17612.67.camel@portnoy.fuzzybelly.org>
References: <1120196075.7972.0.camel@portnoy.fuzzybelly.org>	<012601c58245$7d2de040$6402a8c0@DELL8600>	<42CC0A48.8080905@midnightcircus.com>	<1120796682.3844.165.camel@portnoy.fuzzybelly.org>	<42CE9769.80702@midnightcircus.com>	<42572.64.101.146.91.1120854503.squirrel@webmail.barclay.textdrive.com>	<1120858481.12652.17.camel@portnoy.fuzzybelly.org>	<1120928406.22248.7.camel@portnoy.fuzzybelly.org>	<42D0C8EA.1020801@midnightcircus.com>	<1121016327.22248.17.camel@portnoy.fuzzybelly.org>	<42D16B55.8090806@midnightcircus.com>	<1121032835.22248.24.camel@portnoy.fuzzybelly.org>	<1121033516.22248.33.camel@portnoy.fuzzybelly.org>	<42D1A08E.8020800@mullenweg.com>	<1121034897.22248.40.camel@portnoy.fuzzybelly.org>	<42D1B41B.8020506@mullenweg.com>
	<42D1B4C3.7090001@skippy.net>	<42D20D2A.3090700@mullenweg.com>	<1121090744.17612.62.camel@portnoy.fuzzybelly.org>	<42D29CD6.1030102@midnightcircus.com>
	<1121122187.17612.67.camel@portnoy.fuzzybelly.org>
Message-ID: <42D3492E.7080007@midnightcircus.com>

Ryan Boren wrote:

>I'm losing track of the patches.  I committed with what I had.  Could
>you send a patch for what I missed?
>  
>
Yeah, I think the confusing patches are my fault.  Sorry.

Here are two patches with missing bits.  One is for 
upgrade-functions.php, which didn't have the correct role names in 
translate_level_to_role() -- my error, not in a previous patch.  The 
other is for pluggable-functions.php, to which update_user_cache() 
should have moved and didn't.  But unless you think we need 
update_user_cache() don't apply it because that function is no longer 
used anywhere, and it's not going to be as useful for the UI as I 
thought (now that I've coded that part).

roles_ui.diff is all of the above, /plus/ UI for managing roles, so it's 
bigger and needs much review.  Since the last patch, I've added the 
ability to delete and change roles on multiple users.  The user deletion 
code now prompts you to either delete all posts and links or *reassign* 
them to a different user.

>All sounds good to me, although I usually leave the UI design to others.
>Regardless, sounds like a solid move in the right direction.  It'll give
>us a good base to quibble over at least. :-)
>  
>
Always looking forward to some quality quibbling.  :)

Owen

-------------- next part --------------
Index: upgrade-functions.php
===================================================================
--- upgrade-functions.php	(revision 2703)
+++ upgrade-functions.php	(working copy)
@@ -758,21 +758,20 @@
 	case 10:
 	case 9:
 	case 8:
-		return 'publisher';
+		return 'administrator';
 	case 7:
 	case 6:
 	case 5:
-		return 'managing_editor';
+		return 'editor';
 	case 4:
 	case 3:
-		return 'copy_editor';
 	case 2:
-		return 'staff_writer';
+		return 'author';
 	case 1:
-		return 'freelancer';
+		return 'contributor';
 	case 0:
-		return 'visitor';
+		return 'subscriber';
 	}
 }
 
-?>
\ No newline at end of file
+?>
-------------- next part --------------
Index: pluggable-functions.php
===================================================================
--- pluggable-functions.php	(revision 2703)
+++ pluggable-functions.php	(working copy)
@@ -31,7 +31,7 @@
 	$user_id = (int) $user_id;
 	if ( $user_id == 0 )
 		return false;
-		
+
 	if ( isset( $cache_userdata[$user_id] ) ) 
 		return $cache_userdata[$user_id];
 
@@ -52,13 +52,42 @@
 	}
 
 	$cache_userdata[$user_id] = $user;
-
 	$cache_userdata[$cache_userdata[$userid]->user_login] =& $cache_userdata[$user_id];
 
 	return $cache_userdata[$user_id];
 }
 endif;
 
+if ( !function_exists('update_user_cache') ) :
+function update_user_cache() {
+	global $cache_userdata, $wpdb;
+	$level_key = $wpdb->prefix . 'user_level';
+	$user_ids = $wpdb->get_col("SELECT user_id FROM $wpdb->usermeta WHERE meta_key = '$level_key'");
+	$user_ids = join(',', $user_ids);
+	$query = apply_filters('user_cache_query', "SELECT * FROM $wpdb->users WHERE ID IN ($user_ids)");
+	if ( $users = $wpdb->get_results( $query ) ) :
+		foreach ($users as $user) :
+			$metavalues = $wpdb->get_results("SELECT meta_key, meta_value FROM $wpdb->usermeta WHERE user_id = '$user->ID'");
+			foreach ( $metavalues as $meta ) {
+				@ $value = unserialize($meta->meta_value);
+				if ($value === FALSE)
+					$value = $meta->meta_value;
+				$user->{$meta->meta_key} = $value;
+				// We need to set user_level from meta, not row
+				if ( $wpdb->prefix . 'user_level' == $meta->meta_key )
+					$user->user_level = $meta->meta_value;
+			}
+
+			$cache_userdata[$user->ID] = $user;
+			$cache_userdata[$user->user_login] =& $cache_userdata[$user->ID];
+		endforeach;
+		return true;
+	else : 
+		return false;
+	endif;
+}
+endif;
+
 if ( !function_exists('get_userdatabylogin') ) :
 function get_userdatabylogin($user_login) {
 	global $cache_userdata, $wpdb;
@@ -279,4 +308,4 @@
 }
 endif;
 
-?>
\ No newline at end of file
+?>
-------------- next part --------------
Index: wp-includes/functions.php
===================================================================
--- wp-includes/functions.php	(revision 2703)
+++ wp-includes/functions.php	(working copy)
@@ -1219,10 +1219,10 @@
 function update_category_cache() {
 	global $cache_categories, $wpdb;
 	if($dogs = $wpdb->get_results("SELECT * FROM $wpdb->categories")):
-		foreach ($dogs as $catt)
-			$cache_categories[$catt->cat_ID] = $catt;
+	foreach ($dogs as $catt)
+		$cache_categories[$catt->cat_ID] = $catt;
 		return true;
-	else:
+	else : 
 		return false;
 	endif;
 }
Index: wp-includes/pluggable-functions.php
===================================================================
--- wp-includes/pluggable-functions.php	(revision 2703)
+++ wp-includes/pluggable-functions.php	(working copy)
@@ -31,7 +31,7 @@
 	$user_id = (int) $user_id;
 	if ( $user_id == 0 )
 		return false;
-		
+
 	if ( isset( $cache_userdata[$user_id] ) ) 
 		return $cache_userdata[$user_id];
 
@@ -52,13 +52,42 @@
 	}
 
 	$cache_userdata[$user_id] = $user;
-
 	$cache_userdata[$cache_userdata[$userid]->user_login] =& $cache_userdata[$user_id];
 
 	return $cache_userdata[$user_id];
 }
 endif;
 
+if ( !function_exists('update_user_cache') ) :
+function update_user_cache() {
+	global $cache_userdata, $wpdb;
+	$level_key = $wpdb->prefix . 'user_level';
+	$user_ids = $wpdb->get_col("SELECT user_id FROM $wpdb->usermeta WHERE meta_key = '$level_key'");
+	$user_ids = join(',', $user_ids);
+	$query = apply_filters('user_cache_query', "SELECT * FROM $wpdb->users WHERE ID IN ($user_ids)");
+	if ( $users = $wpdb->get_results( $query ) ) :
+		foreach ($users as $user) :
+			$metavalues = $wpdb->get_results("SELECT meta_key, meta_value FROM $wpdb->usermeta WHERE user_id = '$user->ID'");
+			foreach ( $metavalues as $meta ) {
+				@ $value = unserialize($meta->meta_value);
+				if ($value === FALSE)
+					$value = $meta->meta_value;
+				$user->{$meta->meta_key} = $value;
+				// We need to set user_level from meta, not row
+				if ( $wpdb->prefix . 'user_level' == $meta->meta_key )
+					$user->user_level = $meta->meta_value;
+			}
+
+			$cache_userdata[$user->ID] = $user;
+			$cache_userdata[$user->user_login] =& $cache_userdata[$user->ID];
+		endforeach;
+		return true;
+	else : 
+		return false;
+	endif;
+}
+endif;
+
 if ( !function_exists('get_userdatabylogin') ) :
 function get_userdatabylogin($user_login) {
 	global $cache_userdata, $wpdb;
@@ -279,4 +308,4 @@
 }
 endif;
 
-?>
\ No newline at end of file
+?>
Index: wp-register.php
===================================================================
--- wp-register.php	(revision 2703)
+++ wp-register.php	(working copy)
@@ -14,48 +14,53 @@
 
 	$user_login = sanitize_user( $_POST['user_login'] );
 	$user_email = $_POST['user_email'];
+	
+	$errors = array();
 		
 	if ( $user_login == '' )
-		die (__('<strong>ERROR</strong>: Please enter a username.'));
+		$errors['user_login'] = __('<strong>ERROR</strong>: Please enter a username.');
 
 	/* checking e-mail address */
 	if ($user_email == '') {
-		die (__('<strong>ERROR</strong>: Please type your e-mail address.'));
+		$errors['user_email'] = __('<strong>ERROR</strong>: Please type your e-mail address.');
 	} else if (!is_email($user_email)) {
-		die (__('<strong>ERROR</strong>: The email address isn&#8217;t correct.'));
+		$errors['user_email'] = __('<strong>ERROR</strong>: The email address isn&#8217;t correct.');
 	}
 
-    if ( username_exists( $user_login ) )
-		die (__('<strong>ERROR</strong>: This username is already registered, please choose another one.'));
+  if ( username_exists( $user_login ) )
+		$errors['user_login'] = __('<strong>ERROR</strong>: This username is already registered, please choose another one.');
 
-	$user_level = get_settings('new_users_can_blog');
 	$password = substr( md5( uniqid( microtime() ) ), 0, 7);
 
-	$user_id = create_user( $user_login, $password, $user_email, $user_level );
-
-	do_action('user_register', $user_id);
-
+	$user_id = create_user( $user_login, $password, $user_email, 0 );
 	if ( !$user_id ) {
-		die (sprintf(__('<strong>ERROR</strong>: Couldn&#8217;t register you... please contact the <a href="mailto:%s">webmaster</a> !'), get_settings('admin_email')));
+		$errors['user_id'] = sprintf(__('<strong>ERROR</strong>: Couldn&#8217;t register you... please contact the <a href="mailto:%s">webmaster</a> !'), get_settings('admin_email'));
 	}
 
-	$stars = '';
-	for ($i = 0; $i < strlen($pass1); $i = $i + 1) {
-		$stars .= '*';
-	}
+	if(count($errors) == 0) {
+		$user = new WP_User($user_id);
+		$user->set_role(get_settings('default_role'));
 	
-	$message  = sprintf(__('Username: %s'), $user_login) . "\r\n";
-	$message .= sprintf(__('Password: %s'), $password) . "\r\n";
-	$message .= get_settings('siteurl') . "/wp-login.php\r\n";
+		do_action('user_register', $user_id);
 	
-	wp_mail($user_email, sprintf(__('[%s] Your username and password'), get_settings('blogname')), $message);
+	
+		$stars = '';
+		for ($i = 0; $i < strlen($pass1); $i = $i + 1) {
+			$stars .= '*';
+		}
+		
+		$message  = sprintf(__('Username: %s'), $user_login) . "\r\n";
+		$message .= sprintf(__('Password: %s'), $password) . "\r\n";
+		$message .= get_settings('siteurl') . "/wp-login.php\r\n";
+		
+		wp_mail($user_email, sprintf(__('[%s] Your username and password'), get_settings('blogname')), $message);
+	
+		$message  = sprintf(__('New user registration on your blog %s:'), get_settings('blogname')) . "\r\n\r\n";
+		$message .= sprintf(__('Username: %s'), $user_login) . "\r\n\r\n";
+		$message .= sprintf(__('E-mail: %s'), $user_email) . "\r\n";
+	
+		@wp_mail(get_settings('admin_email'), sprintf(__('[%s] New User Registration'), get_settings('blogname')), $message);
 
-	$message  = sprintf(__('New user registration on your blog %s:'), get_settings('blogname')) . "\r\n\r\n";
-	$message .= sprintf(__('Username: %s'), $user_login) . "\r\n\r\n";
-	$message .= sprintf(__('E-mail: %s'), $user_email) . "\r\n";
-
-	@wp_mail(get_settings('admin_email'), sprintf(__('[%s] New User Registration'), get_settings('blogname')), $message);
-
 	?>
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
 <html xmlns="http://www.w3.org/1999/xhtml">
@@ -81,35 +86,10 @@
 </body>
 </html>
 
-	<?php
-break;
+		<?php
+		break;
+	}
 
-case 'disabled':
-
-	?>
-<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
-<html xmlns="http://www.w3.org/1999/xhtml">
-<head>
-	<title>WordPress &raquo; <?php _e('Registration Currently Disabled') ?></title>
-	<meta http-equiv="Content-Type" content="<?php bloginfo('html_type'); ?>; charset=<?php echo get_settings('blog_charset'); ?>">
-	<link rel="stylesheet" href="wp-admin/wp-admin.css" type="text/css">
-</head>
-
-<body>
-
-<div id="login">
-	<h2><?php _e('Registration Disabled') ?></h2>
-	<p><?php _e('User registration is currently not allowed.') ?><br />
-	<a href="<?php echo get_settings('home') . '/'; ?>" title="<?php _e('Go back to the blog') ?>"><?php _e('Home') ?></a>
-	</p>
-</div>
-
-</body>
-</html>
-
-	<?php
-break;
-
 default:
 
 ?>
@@ -130,11 +110,19 @@
 <div id="login">
 <h1><a href="http://wordpress.org/">WordPress</a></h1>
 <h2><?php _e('Register for this blog') ?></h2>
-
+<?php if ( isset($errors) ) : ?>
+<div class="error">
+	<ul>
+	<?php
+	foreach($errors as $error) echo "<li>$error</li>";
+	?>
+	</ul>
+</div>
+<?php endif; ?>
 <form method="post" action="wp-register.php" id="registerform">
 	<p><input type="hidden" name="action" value="register" />
-	<label for="user_login"><?php _e('Username:') ?></label><br /> <input type="text" name="user_login" id="user_login" size="20" maxlength="20" /><br /></p>
-	<p><label for="user_email"><?php _e('E-mail:') ?></label><br /> <input type="text" name="user_email" id="user_email" size="25" maxlength="100" /></p>
+	<label for="user_login"><?php _e('Username:') ?></label><br /> <input type="text" name="user_login" id="user_login" size="20" maxlength="20" value="<?php echo $user_login; ?>" /><br /></p>
+	<p><label for="user_email"><?php _e('E-mail:') ?></label><br /> <input type="text" name="user_email" id="user_email" size="25" maxlength="100" value="<?php echo $user_email; ?>" /></p>
 	<p>A password will be emailed to you.</p>
 	<p class="submit"><input type="submit" value="<?php _e('Register') ?> &raquo;" id="submit" name="submit" /></p>
 </form>
@@ -150,5 +138,32 @@
 <?php
 
 break;
+
+case 'disabled':
+
+	?>
+<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
+<html xmlns="http://www.w3.org/1999/xhtml">
+<head>
+	<title>WordPress &raquo; <?php _e('Registration Currently Disabled') ?></title>
+	<meta http-equiv="Content-Type" content="<?php bloginfo('html_type'); ?>; charset=<?php echo get_settings('blog_charset'); ?>">
+	<link rel="stylesheet" href="wp-admin/wp-admin.css" type="text/css">
+</head>
+
+<body>
+
+<div id="login">
+	<h2><?php _e('Registration Disabled') ?></h2>
+	<p><?php _e('User registration is currently not allowed.') ?><br />
+	<a href="<?php echo get_settings('home') . '/'; ?>" title="<?php _e('Go back to the blog') ?>"><?php _e('Home') ?></a>
+	</p>
+</div>
+
+</body>
+</html>
+
+	<?php
+break;
+
 }
-?>
\ No newline at end of file
+?>
Index: wp-settings.php
===================================================================
--- wp-settings.php	(revision 2703)
+++ wp-settings.php	(working copy)
@@ -165,4 +165,4 @@
 
 // Everything is loaded and initialized.
 do_action('init');
-?>
\ No newline at end of file
+?>
Index: wp-admin/users.php
===================================================================
--- wp-admin/users.php	(revision 2703)
+++ wp-admin/users.php	(working copy)
@@ -8,140 +8,242 @@
 $action = $_REQUEST['action'];
 
 switch ($action) {
-case 'adduser':
+
+case 'promote':
 	check_admin_referer();
 
-	$user_login     = wp_specialchars(trim($_POST['user_login']));
-	$pass1          = $_POST['pass1'];
-	$pass2          = $_POST['pass2'];
-	$user_email     = wp_specialchars(trim($_POST['email']));
-	$user_firstname = wp_specialchars(trim($_POST['firstname']));
-	$user_lastname  = wp_specialchars(trim($_POST['lastname']));
-	$user_uri       = wp_specialchars(trim($_POST['uri']));
+	if (empty($_POST['users'])) {
+		header('Location: users.php');
+	}
+
+	if ( !current_user_can('edit_users') )
+		die(__('You can&#8217;t edit users.'));
+
+	$userids = $_POST['users'];
+	foreach($userids as $id) {
+		$user = new WP_User($id);
+		$user->set_role($_POST['new_role']);
+	}
 		
-	/* checking that username has been typed */
-	if ($user_login == '')
-		die (__('<strong>ERROR</strong>: Please enter a username.'));
+	header('Location: users.php?update=promote');
 
-	/* checking the password has been typed twice */
-	do_action('check_passwords', array($user_login, &$pass1, &$pass2));
-	if ($pass1 == '' || $pass2 == '')
-		die (__('<strong>ERROR</strong>: Please enter your password twice.'));
+break;
 
-	/* checking the password has been typed twice the same */
-	if ($pass1 != $pass2)
-		die (__('<strong>ERROR</strong>: Please type the same password in the two password fields.'));
+case 'dodelete':
 
-	$user_nickname = $user_login;
+	check_admin_referer();
 
-    if ( username_exists( $user_login ) )
-		die (__('<strong>ERROR</strong>: This username is already registered, please choose another one.'));
-
-	/* checking e-mail address */
-	if (empty($user_email)) {
-		die (__("<strong>ERROR</strong>: please type an e-mail address"));
-		return false;
-	} else if (!is_email($user_email)) {
-		die (__("<strong>ERROR</strong>: the email address isn't correct"));
-		return false;
+	if (empty($_POST['users'])) {
+		header('Location: users.php');
 	}
 
-	$user_ID = create_user( $user_login, $pass1, $user_email, 0 );
+	if ( !current_user_can('edit_users') )
+		die(__('You can&#8217;t delete users.'));
 
-	update_usermeta( $user_ID, 'first_name', $user_firstname);
-	update_usermeta( $user_ID, 'last_name', $user_lastname);
-	update_usermeta( $user_ID, 'first_name', $user_firstname);
+	$userids = $_POST['users'];
 	
-	$stars = '';
-	for ($i = 0; $i < strlen($pass1); $i = $i + 1)
-		$stars .= '*';
+	foreach($userids as $id) {
+		switch($_POST['delete_option']) {
+		case 'delete':
+			wp_delete_user($id);
+			break;
+		case 'reassign':
+			wp_delete_user($id, $_POST['reassign_user']);
+			break;
+		}
+	}
 
-	$user_login = stripslashes($user_login);
-	$message  = sprintf(__('New user registration on your blog %s:'), get_settings('blogname')) . "\r\n\r\n";
-	$message .= sprintf(__('Username: %s'), $user_login) . "\r\n\r\n";
-	$message .= sprintf(__('E-mail: %s'), $user_email) . "\r\n";
+	header('Location: users.php?update=del');
 
-	@wp_mail(get_settings('admin_email'), sprintf(__('[%s] New User Registration'), get_settings('blogname')), $message);
-	header('Location: users.php');
 break;
 
-case 'promote':
+case 'delete':
+
 	check_admin_referer();
 
-	if (empty($_GET['prom'])) {
+	if (empty($_POST['users'])) {
 		header('Location: users.php');
 	}
 
-	$id = (int) $_GET['id'];
-	$prom = $_GET['prom'];
+	if ( !current_user_can('edit_users') )
+		$error['edit_users'] = __('You can&#8217;t delete users.');
 
-	$user_data = get_userdata($id);
+	$userids = $_POST['users'];
 
-	$usertopromote_level = $user_data->user_level;
-
-	if ( $user_level <= $usertopromote_level )
-		die(__('Can&#8217;t change the level of a user whose level is higher than yours.'));
-
-	if ('up' == $prom) {
-		$new_level = $usertopromote_level + 1;
-	} elseif ('down' == $prom) {
-		$new_level = $usertopromote_level - 1;
+	include ('admin-header.php');
+?>
+<form action="" method="post" name="updateusers" id="updateusers">
+<div class="wrap">
+	<h2><?php _e('Delete Users'); ?></h2>
+	<p><?php _e('You have specified these users for deletion:'); ?></p>
+	<ul>
+	<?php
+	foreach($userids as $id) {
+		$user = new WP_User($id);
+		echo "<li><input type=\"hidden\" name=\"users[]\" value=\"{$id}\" />";
+		echo "{$id}: {$user->data->user_login}</li>\n";
 	}
-	update_usermeta( $id, $wpdb->prefix . 'user_level', $new_level);
+	$all_logins = $wpdb->get_results("SELECT ID, user_login FROM $wpdb->users ORDER BY user_login");
+	$user_dropdown = '<select name="reassign_user">';
+	foreach($all_logins as $login) {
+		if(!in_array($login->ID, $userids)) {
+			$user_dropdown .= "<option value=\"{$login->ID}\">{$login->user_login}</option>";
+		}
+	}
+	$user_dropdown .= '</select>';
+	?>
+	</ul>
+	<p><?php _e('What should be done with posts and links owned by this user?'); ?></p>
+	<ul style="list-style:none;">
+		<li><label><input type="radio" id="delete_option0" name="delete_option" value="delete" checked="checked" />
+		<?php _e('Delete all posts and links.'); ?></label></li>
+		<li><input type="radio" id="delete_option1" name="delete_option" value="reassign" />
+		<?php echo sprintf(__('<label for="delete_option1">Attribute all posts and links to:</label> %s'), $user_dropdown); ?></li>
+	</ul>
+	<input type="hidden" name="action" value="dodelete" />
+	<p class="submit"><input type="submit" name="submit" value="<?php _e('Confirm Deletion'); ?>" /></p>
+</div>
+</form>
+<?php
 
-	header('Location: users.php');
-
 break;
 
-case 'delete':
-
+case 'adduser':
 	check_admin_referer();
 
-	$id = (int) $_GET['id'];
+	$new_user_login     = wp_specialchars(trim($_POST['user_login']));
+	$new_pass1          = $_POST['pass1'];
+	$new_pass2          = $_POST['pass2'];
+	$new_user_email     = wp_specialchars(trim($_POST['email']));
+	$new_user_firstname = wp_specialchars(trim($_POST['firstname']));
+	$new_user_lastname  = wp_specialchars(trim($_POST['lastname']));
+	$new_user_uri       = wp_specialchars(trim($_POST['uri']));
+	
+	$errors = array();
+		
+	/* checking that username has been typed */
+	if ($new_user_login == '')
+		$errors['user_login'] = __('<strong>ERROR</strong>: Please enter a username.');
 
-	if (!$id) {
-		header('Location: users.php');
-	}
+	/* checking the password has been typed twice */
+	do_action('check_passwords', array($new_user_login, &$new_pass1, &$new_pass2));
+	if ($new_pass1 == '' || $new_pass2 == '')
+		$errors['pass'] = __('<strong>ERROR</strong>: Please enter your password twice.');
 
-	$user_data = get_userdata($id);
-	$usertodelete_level = $user_data->user_level;
+	/* checking the password has been typed twice the same */
+	if ($new_pass1 != $new_pass2)
+		$errors['pass'] = __('<strong>ERROR</strong>: Please type the same password in the two password fields.');
 
-	if ($user_level <= $usertodelete_level)
-		die(__('Can&#8217;t delete a user whose level is higher than yours.'));
+	$new_user_nickname = $new_user_login;
 
-	wp_delete_user($id);
+  if ( username_exists( $new_user_login ) )
+		$errors['pass'] = __('<strong>ERROR</strong>: This username is already registered, please choose another one.');
 
-	header('Location: users.php?deleted=true');
+	/* checking e-mail address */
+	if (empty($new_user_email)) {
+		$errors['user_email'] = __("<strong>ERROR</strong>: please type an e-mail address");
+	} else if (!is_email($new_user_email)) {
+		$errors['user_email'] = __("<strong>ERROR</strong>: the email address isn't correct");
+	}
 
-break;
+	if(count($errors) == 0) {	
+		$user_ID = create_user( $new_user_login, $new_pass1, $new_user_email, 0 );
+	
+		update_usermeta( $user_ID, 'first_name', $new_user_firstname);
+		update_usermeta( $user_ID, 'last_name', $new_user_lastname);
+		update_usermeta( $user_ID, 'first_name', $new_user_firstname);
+		
+		$user = new WP_User($user_ID);
+		$user->set_role(get_settings('default_role'));
+		
+		$stars = '';
+		for ($i = 0; $i < strlen($pass1); $i = $i + 1)
+			$stars .= '*';
+	
+		$user_login = stripslashes($new_user_login);
+		$message  = sprintf(__('New user registration on your blog %s:'), get_settings('blogname')) . "\r\n\r\n";
+		$message .= sprintf(__('Username: %s'), $new_user_login) . "\r\n\r\n";
+		$message .= sprintf(__('E-mail: %s'), $new_user_email) . "\r\n";
+	
+		@wp_mail(get_settings('admin_email'), sprintf(__('[%s] New User Registration'), get_settings('blogname')), $message);
+		header('Location: users.php?update=add');
+		die();
+	}
 
 default:
 	
 	include ('admin-header.php');
+	
+	$userids = $wpdb->get_col("SELECT ID FROM $wpdb->users;");
+	
+	foreach($userids as $userid) {
+		$tmp_user = new WP_User($userid);
+		$roles = array_keys($tmp_user->roles);
+		$role = $roles[0];
+		$roleclasses[$role][$tmp_user->data->user_login] = $tmp_user;
+	}	
+	
 	?>
 
-<?php if (isset($_GET['deleted'])) : ?>
-<div class="updated"><p><?php _e('User deleted.') ?></p></div>
-<?php endif; ?>
+	<?php 
+	if (isset($_GET['update'])) : 
+		switch($_GET['update']) {
+		case 'del':
+		?>
+			<div class="updated"><p><?php _e('User deleted.'); ?></p></div>
+		<?php
+			break;
+		case 'add':
+		?>
+			<div class="updated"><p><?php _e('New user created.'); ?></p></div>
+		<?php
+			break;
+		case 'promote':
+		?>
+			<div class="updated"><p><?php _e('Changed roles.'); ?></p></div>
+		<?php
+			break;
+		}
+	endif; 
+	if ( isset($errors) ) : ?>
+	<div class="error">
+		<ul>
+		<?php
+		foreach($errors as $error) echo "<li>$error</li>";
+		?>
+		</ul>
+	</div>
+	<?php 
+	endif;
+	?>
+	
+<form action="" method="post" name="updateusers" id="updateusers">
 <div class="wrap">
-  <h2><?php _e('Authors') ?></h2>
+	<h2><?php _e('User List by Role'); ?></h2>
   <table cellpadding="3" cellspacing="3" width="100%">
+	<?php
+	foreach($roleclasses as $role => $roleclass) {
+		ksort($roleclass);
+		?>
+
 	<tr>
+	<th colspan="8" align="left">
+  <h3><?php echo $wp_roles->role_names[$role]; ?></h3>
+  </th>
+
+	<tr>
 	<th><?php _e('ID') ?></th>
-	<th><?php _e('Nickname') ?></th>
+	<th><?php _e('Username') ?></th>
 	<th><?php _e('Name') ?></th>
 	<th><?php _e('E-mail') ?></th>
 	<th><?php _e('Website') ?></th>
-	<th><?php _e('Level') ?></th>
 	<th><?php _e('Posts') ?></th>
 	<th>&nbsp;</th>
 	</tr>
 	<?php
-	$authors = 
-	$users = get_author_user_ids();
 	$style = '';
-	foreach ($users as $user) {
-		$user_data = get_userdata($user);
+	foreach ($roleclass as $user_object) {
+		$user_data = &$user_object->data;
 		$email = $user_data->user_email;
 		$url = $user_data->user_url;
 		$short_url = str_replace('http://', '', $url);
@@ -151,24 +253,18 @@
 		if (strlen($short_url) > 35)
 		$short_url =  substr($short_url, 0, 32).'...';
 		$style = ('class="alternate"' == $style) ? '' : 'class="alternate"';
-		$numposts = $wpdb->get_var("SELECT COUNT(*) FROM $wpdb->posts WHERE post_author = '$user' and post_status = 'publish'");
+		$numposts = $wpdb->get_var("SELECT COUNT(*) FROM $wpdb->posts WHERE post_author = '$user_data->ID' and post_status = 'publish'");
 		if (0 < $numposts) $numposts = "<a href='edit.php?author=$user_data->ID' title='" . __('View posts') . "'>$numposts</a>";
 		echo "
 <tr $style>
-	<td align='center'>$user_data->ID</td>
-	<td><strong>$user_data->user_login</strong></td>
-	<td>$user_data->first_name $user_data->last_name</td>
+	<td><input type='checkbox' name='users[]' id='user_{$user_data->ID}' value='{$user_data->ID}' /> <label for='user_{$user_data->ID}'>{$user_data->ID}</label></td>
+	<td><label for='user_{$user_data->ID}'><strong>$user_data->user_login</strong></label></td>
+	<td><label for='user_{$user_data->ID}'>$user_data->first_name $user_data->last_name</label></td>
 	<td><a href='mailto:$email' title='" . sprintf(__('e-mail: %s'), $email) . "'>$email</a></td>
-	<td><a href='$url' title='website: $url'>$short_url</a></td>
-	<td align='center'>";
-	if (($user_level >= 2) and ($user_level > $user_data->user_level) and ($user_data->user_level > 0))
-		echo " <a href=\"users.php?action=promote&amp;id=".$user_data->ID."&amp;prom=down\">-</a> ";
-	echo $user_data->user_level;
-	if (($user_level >= 2) and ($user_level > ($user_data->user_level + 1)))
-		echo " <a href=\"users.php?action=promote&amp;id=".$user_data->ID."&amp;prom=up\">+</a> ";
-	echo "</td><td align='right'>$numposts</td>";
+	<td><a href='$url' title='website: $url'>$short_url</a></td>";
+	echo "<td align='right'>$numposts</td>";
 	echo '<td>';
-	if (($user_level >= 2) and ($user_level > $user_data->user_level))
+	if (current_user_can('edit_users'))
 		echo "<a href='user-edit.php?user_id=$user_data->ID' class='edit'>".__('Edit')."</a>";
 	echo '</td>';
 	echo '</tr>';
@@ -176,68 +272,29 @@
 	
 	?>
 	
-  </table>
-</div>
 
 <?php
-$users = get_nonauthor_user_ids();
-if ($users) {
+	}
 ?>
-<div class="wrap">
-	<h2><?php _e('Registered Users') ?></h2>
-	<table cellpadding="3" cellspacing="3" width="100%">
-	<tr>
-		<th><?php _e('ID') ?></th>
-		<th><?php _e('Nickname') ?></th>
-		<th><?php _e('Name') ?></th>
-		<th><?php _e('E-mail') ?></th>
-		<th><?php _e('Website') ?></th>
-		<th></th>
-		<th></th>
-		<th></th>
-	</tr>
-<?php
-$style = '';
-foreach ($users as $user) {
-	$user_data = get_userdata($user);
-	$email = $user_data->user_email;
-	$url = $user_data->user_url;
-	$short_url = str_replace('http://', '', $url);
-	$short_url = str_replace('www.', '', $short_url);
-	if ('/' == substr($short_url, -1))
-		$short_url = substr($short_url, 0, -1);
-	if (strlen($short_url) > 35)
-	$short_url =  substr($short_url, 0, 32).'...';
-	$style = ('class="alternate"' == $style) ? '' : 'class="alternate"';
-echo "\n<tr $style>
-<td align='center'>$user_data->ID</td>
-<td><strong>$user_data->user_login</strong></td>
-<td>$user_data->first_name $user_data->last_name</td>
-<td><a href='mailto:$email' title='" . sprintf(__('e-mail: %s'), $email) . "'>$email</a></td>
-<td><a href='$url' title='website: $url'>$short_url</a></td>
-<td align='center'>";
+  </table>
 
-	if ($user_level >= 6)
-		echo "<a href='users.php?action=promote&amp;id=$user_data->ID&amp;prom=up' class='edit'>". __('Promote') . '</a>';	
-	echo "</td>\n";
-	echo '<td>';
-	if (($user_level >= 6) and ($user_level > $user_data->user_level))
-		echo "<a href='user-edit.php?user_id=$user_data->ID' class='edit'>".__('Edit')."</a>";
-	echo '</td><td>';
-	if ($user_level >= 6)
-		echo "<a href='users.php?action=delete&amp;id=$user_data->ID' class='delete' onclick='return confirm(\"" . __('You are about to delete this user \n  OK to delete, Cancel to stop.') . "\")'>" . __('Delete'). '</a>';
-	echo '</td></tr>';
 
+	<h2><?php _e('Update Users'); ?></h2>
+<?php
+$role_select = '<select name="new_role">';
+foreach($wp_roles->role_names as $role => $name) {
+	$role_select .= "<option value=\"{$role}\">{$name}</option>";
 }
-
-?>
-	
-	</table>
-	  <p><?php _e('Deleting a user also deletes all posts made by that user.') ?></p>
+$role_select .= '</select>';
+?>  
+  <ul style="list-style:none;">
+  	<li><input type="radio" name="action" id="action0" value="delete"> <label for="action0"><?php _e('Delete checked users.'); ?></label></li>
+  	<li><input type="radio" name="action" id="action1" value="promote"> <?php echo sprintf(__('<label for="action1">Set the Role of checked users to:</label> %s'), $role_select); ?></li>
+  </ul>
+	<p class="submit"><input type="submit" value="<?php _e('Update &raquo;'); ?>"></p>
 </div>
+</form>
 
-	<?php 
-	} ?>
 <div class="wrap">
 <h2><?php _e('Add New User') ?></h2>
 <?php printf(__('<p>Users can <a href="%s/wp-register.php">register themselves</a> or you can manually create users here.</p>'), get_settings('siteurl')); ?>
@@ -246,23 +303,23 @@
     <tr>
       <th scope="row" width="33%"><?php _e('Nickname') ?>
       <input name="action" type="hidden" id="action" value="adduser" /></th>
-      <td width="66%"><input name="user_login" type="text" id="user_login" /></td>
+      <td width="66%"><input name="user_login" type="text" id="user_login" value="<?php echo $new_user_login; ?>" /></td>
     </tr>
     <tr>
       <th scope="row"><?php _e('First Name') ?> </th>
-      <td><input name="firstname" type="text" id="firstname" /></td>
+      <td><input name="firstname" type="text" id="firstname" value="<?php echo $new_user_firstname; ?>" /></td>
     </tr>
     <tr>
       <th scope="row"><?php _e('Last Name') ?> </th>
-      <td><input name="lastname" type="text" id="lastname" /></td>
+      <td><input name="lastname" type="text" id="lastname" value="<?php echo $new_user_lastname; ?>" /></td>
     </tr>
     <tr>
       <th scope="row"><?php _e('E-mail') ?></th>
-      <td><input name="email" type="text" id="email" /></td>
+      <td><input name="email" type="text" id="email" value="<?php echo $new_user_email; ?>" /></td>
     </tr>
     <tr>
       <th scope="row"><?php _e('Website') ?></th>
-      <td><input name="uri" type="text" id="uri" /></td>
+      <td><input name="uri" type="text" id="uri" value="<?php echo $new_user_uri; ?>" /></td>
     </tr>
 <?php
 $show_password_fields = apply_filters('show_password_fields', true);
Index: wp-admin/wp-admin.css
===================================================================
--- wp-admin/wp-admin.css	(revision 2703)
+++ wp-admin/wp-admin.css	(working copy)
@@ -246,6 +246,13 @@
 	padding: 0 1em 0 1em;
 }
 
+.error {
+	background: #FFEFF7;
+	border: 1px solid #c69;
+	margin: 1em 5% 10px;
+	padding: 0 1em 0 1em;
+}
+
 .wrap {
 	background: #fff;
 	border: 1px solid #ccc;
@@ -679,4 +686,4 @@
 	-moz-opacity: 0.8;
 	-khtml-opacity: 0.8;
 	filter: alpha(opacity=80);
-}
\ No newline at end of file
+}
Index: wp-admin/upgrade-functions.php
===================================================================
--- wp-admin/upgrade-functions.php	(revision 2703)
+++ wp-admin/upgrade-functions.php	(working copy)
@@ -758,21 +758,20 @@
 	case 10:
 	case 9:
 	case 8:
-		return 'publisher';
+		return 'administrator';
 	case 7:
 	case 6:
 	case 5:
-		return 'managing_editor';
+		return 'editor';
 	case 4:
 	case 3:
-		return 'copy_editor';
 	case 2:
-		return 'staff_writer';
+		return 'author';
 	case 1:
-		return 'freelancer';
+		return 'contributor';
 	case 0:
-		return 'visitor';
+		return 'subscriber';
 	}
 }
 
-?>
\ No newline at end of file
+?>
Index: wp-admin/admin-functions.php
===================================================================
--- wp-admin/admin-functions.php	(revision 2703)
+++ wp-admin/admin-functions.php	(working copy)
@@ -301,26 +301,33 @@
 	return 1;
 }
 
-function wp_delete_user($id) {
+function wp_delete_user($id, $reassign = 'novalue') {
 	global $wpdb;
 
 	$id = (int) $id;
-
-	$post_ids = $wpdb->get_col("SELECT ID FROM $wpdb->posts WHERE post_author = $id");
-
-	if ($post_ids) {
-		$post_ids = implode(',', $post_ids);
-		
-		// Delete comments, *backs
-		$wpdb->query("DELETE FROM $wpdb->comments WHERE comment_post_ID IN ($post_ids)");
-		// Clean cats
-		$wpdb->query("DELETE FROM $wpdb->post2cat WHERE post_id IN ($post_ids)");
-		// Clean post_meta
-		$wpdb->query("DELETE FROM $wpdb->postmeta WHERE post_id IN ($post_ids)");
+	
+	if($reassign == 'novalue') {
+		$post_ids = $wpdb->get_col("SELECT ID FROM $wpdb->posts WHERE post_author = $id");
+	
+		if ($post_ids) {
+			$post_ids = implode(',', $post_ids);
+			
+			// Delete comments, *backs
+			$wpdb->query("DELETE FROM $wpdb->comments WHERE comment_post_ID IN ($post_ids)");
+			// Clean cats
+			$wpdb->query("DELETE FROM $wpdb->post2cat WHERE post_id IN ($post_ids)");
+			// Clean post_meta
+			$wpdb->query("DELETE FROM $wpdb->postmeta WHERE post_id IN ($post_ids)");
+			// Delete posts
+			$wpdb->query("DELETE FROM $wpdb->posts WHERE post_author = $id");
+		}
+	
 		// Clean links
 		$wpdb->query("DELETE FROM $wpdb->links WHERE link_owner = $id");
-		// Delete posts
-		$wpdb->query("DELETE FROM $wpdb->posts WHERE post_author = $id");
+	} else {
+		$reassign = (int)$reassign;
+		$wpdb->query("UPDATE $wpdb->posts SET post_author = {$reassign} WHERE post_author = {$id}");
+		$wpdb->query("UPDATE $wpdb->links SET link_owner = {$reassign} WHERE link_owner = {$id}");
 	}
 
 	// FINALLY, delete user
Index: wp-admin/profile.php
===================================================================
--- wp-admin/profile.php	(revision 2703)
+++ wp-admin/profile.php	(working copy)
@@ -24,6 +24,38 @@
 auth_redirect();
 switch($action) {
 
+case 'IErightclick':
+
+	$bookmarklet_height= 550;
+
+	?>
+
+	<div class="menutop">&nbsp;IE one-click bookmarklet</div>
+
+	<table width="100%" cellpadding="20">
+	<tr><td>
+
+	<p>To have a one-click bookmarklet, just copy and paste this<br />into a new text file:</p>
+	<?php
+	$regedit = "REGEDIT4\r\n[HKEY_CURRENT_USER\Software\Microsoft\Internet Explorer\MenuExt\Post To &WP : ". get_settings('blogname') ."]\r\n@=\"javascript:doc=external.menuArguments.document;Q=doc.selection.createRange().text;void(btw=window.open('". get_settings('siteurl') ."/wp-admin/bookmarklet.php?text='+escape(Q)+'".$bookmarklet_tbpb."&popupurl='+escape(doc.location.href)+'&popuptitle='+escape(doc.title),'bookmarklet','scrollbars=no,width=480,height=".$bookmarklet_height.",left=100,top=150,status=yes'));btw.focus();\"\r\n\"contexts\"=hex:31\"";
+	?>
+	<pre style="margin: 20px; background-color: #cccccc; border: 1px dashed #333333; padding: 5px; font-size: 12px;"><?php echo $regedit; ?></pre>
+	<p>Save it as wordpress.reg, and double-click on this file in an Explorer<br />
+	window. Answer Yes to the question, and restart Internet Explorer.<br /><br />
+	That's it, you can now right-click in an IE window and select <br />
+	'Post to WP' to make the bookmarklet appear. :)</p>
+
+	<p align="center">
+	  <form>
+		<input class="search" type="button" value="1" name="Close this window" />
+	  </form>
+	</p>
+	</td></tr>
+	</table>
+	<?php
+
+break;
+
 case 'update':
 
 	get_currentuserinfo();
@@ -100,43 +132,12 @@
 	wp_redirect('profile.php?updated=true');
 break;
 
-case 'IErightclick':
 
-	$bookmarklet_height= 550;
-
-	?>
-
-	<div class="menutop">&nbsp;IE one-click bookmarklet</div>
-
-	<table width="100%" cellpadding="20">
-	<tr><td>
-
-	<p>To have a one-click bookmarklet, just copy and paste this<br />into a new text file:</p>
-	<?php
-	$regedit = "REGEDIT4\r\n[HKEY_CURRENT_USER\Software\Microsoft\Internet Explorer\MenuExt\Post To &WP : ". get_settings('blogname') ."]\r\n@=\"javascript:doc=external.menuArguments.document;Q=doc.selection.createRange().text;void(btw=window.open('". get_settings('siteurl') ."/wp-admin/bookmarklet.php?text='+escape(Q)+'".$bookmarklet_tbpb."&popupurl='+escape(doc.location.href)+'&popuptitle='+escape(doc.title),'bookmarklet','scrollbars=no,width=480,height=".$bookmarklet_height.",left=100,top=150,status=yes'));btw.focus();\"\r\n\"contexts\"=hex:31\"";
-	?>
-	<pre style="margin: 20px; background-color: #cccccc; border: 1px dashed #333333; padding: 5px; font-size: 12px;"><?php echo $regedit; ?></pre>
-	<p>Save it as wordpress.reg, and double-click on this file in an Explorer<br />
-	window. Answer Yes to the question, and restart Internet Explorer.<br /><br />
-	That's it, you can now right-click in an IE window and select <br />
-	'Post to WP' to make the bookmarklet appear. :)</p>
-
-	<p align="center">
-	  <form>
-		<input class="search" type="button" value="1" name="Close this window" />
-	  </form>
-	</p>
-	</td></tr>
-	</table>
-	<?php
-
-break;
-
-
 default:
 	$parent_file = 'profile.php';
 	include_once('admin-header.php');
-	$profiledata = get_userdata($user_ID);
+	$profileuser = new WP_User($user_ID);
+	$profiledata = &$profileuser->data;
 
 	$bookmarklet_height= 440;
 
@@ -159,8 +160,15 @@
       <td width="67%"><?php echo $profiledata->user_login; ?></td>
     </tr>
     <tr>
-      <th scope="row"><?php _e('Level:') ?></th>
-      <td><?php echo $profiledata->user_level; ?></td>
+      <th scope="row"><?php _e('Role:') ?></th>
+      <td><?php 
+			$output = '';
+			foreach($profileuser->roles as $role => $value) {
+				if($output != '') $output .= ', ';
+				$output .= $wp_roles->role_names[$role];
+			}
+			echo $output;
+			?></td>
     </tr>
     <tr>
       <th scope="row"><?php _e('Posts:') ?></th>
@@ -169,7 +177,26 @@
 	echo $posts;
 	?></td>
     </tr>
+    <?php
+    if(count($profileuser->caps) > count($profileuser->roles)):
+    ?>
     <tr>
+      <th scope="row"><?php _e('Additional Capabilities:') ?></th>
+      <td><?php 
+			$output = '';
+			foreach($profileuser->caps as $cap => $value) {
+				if(!$wp_roles->is_role($cap)) {
+					if($output != '') $output .= ', ';
+					$output .= $value ? $cap : "Denied: {$cap}";
+				}
+			}
+			echo $output;
+			?></td>
+    </tr>
+    <?php
+    endif;
+    ?>
+    <tr>
       <th scope="row"><?php _e('First name:') ?></th>
       <td><input type="text" name="newuser_firstname" id="newuser_firstname" value="<?php echo $profiledata->first_name ?>" /></td>
     </tr>
@@ -229,6 +256,8 @@
       <td><textarea name="user_description" rows="5" id="textarea2" style="width: 99%; "><?php echo $profiledata->user_description ?></textarea></td>
     </tr>
 <?php
+do_action('show_user_profile');
+
 $show_password_fields = apply_filters('show_password_fields', true);
 if ( $show_password_fields ) :
 ?>
Index: wp-admin/user-edit.php
===================================================================
--- wp-admin/user-edit.php	(revision 2703)
+++ wp-admin/user-edit.php	(working copy)
@@ -22,16 +22,27 @@
 }
 
 switch ($action) {
+case 'switchposts':
+
+check_admin_referer();
+
+/* TODO: Switch all posts from one user to another user */
+
+break;
+
 case 'update':
 
-get_currentuserinfo();
-$edituser = get_userdata($user_id);
-if ($edituser->user_level >= $user_level) die( __('You do not have permission to edit this user.') );
+$errors = array();
+if(empty($wp_user)) {
+	$wp_user = new WP_User($user_id);
+	$edituser = &$wp_user->data;
+}
 
+if (!current_user_can('edit_users')) $errors['head'] = __('You do not have permission to edit this user.');
+
 /* checking the nickname has been typed */
 if (empty($_POST["new_nickname"])) {
-	die (__("<strong>ERROR</strong>: please enter your nickname (can be the same as your username)"));
-	return false;
+	$errors['nickname'] = __("<strong>ERROR</strong>: please enter your nickname (can be the same as your username)");
 }
 
 $new_user_login  = wp_specialchars($_POST['new_user_login']);
@@ -41,60 +52,61 @@
 
 if ( '' == $pass1 ) {
 	if ( '' != $pass2 )
-		die (__("<strong>ERROR</strong>: you typed your new password only once. Go back to type it twice."));
+		$errors['pass'] = __("<strong>ERROR</strong>: you typed your new password only once.");
 	$updatepassword = '';
 } else {
 	if ( '' == $pass2)
-		die (__("<strong>ERROR</strong>: you typed your new password only once. Go back to type it twice."));
+		$errors['pass'] = __("<strong>ERROR</strong>: you typed your new password only once.");
 	if ( $pass1 != $pass2 )
-		die (__("<strong>ERROR</strong>: you typed two different passwords. Go back to correct that."));
+		$errors['pass'] = __("<strong>ERROR</strong>: you typed two different passwords.");
 	$new_pass = $pass1;
 	$updatepassword = "user_pass=MD5('$new_pass'), ";
 }
 
-$new_firstname   = wp_specialchars($_POST['new_firstname']);
-$new_lastname    = wp_specialchars($_POST['new_lastname']);
-$new_nickname    = $_POST['new_nickname'];
-$new_nicename    = sanitize_title($new_nickname, $user_id);
-$new_icq         = wp_specialchars($_POST['new_icq']);
-$new_aim         = wp_specialchars($_POST['new_aim']);
-$new_msn         = wp_specialchars($_POST['new_msn']);
-$new_yim         = wp_specialchars($_POST['new_yim']);
-$new_email       = wp_specialchars($_POST['new_email']);
-$new_url         = wp_specialchars($_POST['new_url']);
-$new_url         = preg_match('/^(https?|ftps?|mailto|news|gopher):/is', $new_url) ? $new_url : 'http://' . $new_url; 
-$display_name    = wp_specialchars($_POST['display_name']);
-$new_description = $_POST['new_description'];
+$edituser->user_login       = wp_specialchars($_POST['new_user_login']);
+$edituser->user_nicename    = sanitize_title($new_nickname, $user_id);
+$edituser->user_email       = wp_specialchars($_POST['new_email']);
+$edituser->user_url         = wp_specialchars($_POST['new_url']);
+$edituser->user_url         = preg_match('/^(https?|ftps?|mailto|news|gopher):/is', $edituser->user_url) ? $edituser->user_url : 'http://' . $edituser->user_url; 
+$edituser->display_name     = wp_specialchars($_POST['display_name']);
 
-$result = $wpdb->query("UPDATE $wpdb->users SET user_login = '$new_user_login', $updatepassword user_email='$new_email', user_url='$new_url', user_nicename = '$new_nicename', display_name = '$display_name' WHERE ID = '$user_id'");
+$edituser->first_name  = wp_specialchars($_POST['new_firstname']);
+$edituser->last_name   = wp_specialchars($_POST['new_lastname']);
+$edituser->nickname    = $_POST['new_nickname'];
+$edituser->icq         = wp_specialchars($_POST['new_icq']);
+$edituser->aim         = wp_specialchars($_POST['new_aim']);
+$edituser->msn         = wp_specialchars($_POST['new_msn']);
+$edituser->yim         = wp_specialchars($_POST['new_yim']);
+$edituser->description = $_POST['new_description'];
 
-update_usermeta( $user_id, 'first_name', $new_firstname );
-update_usermeta( $user_id, 'last_name', $new_lastname );
-update_usermeta( $user_id, 'nickname', $new_nickname );
-update_usermeta( $user_id, 'description', $new_description );
-update_usermeta( $user_id, 'icq', $new_icq );
-update_usermeta( $user_id, 'aim', $new_aim );
-update_usermeta( $user_id, 'msn', $new_msn );
-update_usermeta( $user_id, 'yim', $new_yim );
+if(count($errors) == 0) {
+	$result = $wpdb->query("UPDATE $wpdb->users SET user_login = '$edituser->user_login', $updatepassword user_email='$edituser->user_email', user_url='$edituser->user_url', user_nicename = '$edituser->user_nicename', display_name = '$edituser->display_name' WHERE ID = '$user_id'");
+	
+	update_usermeta( $user_id, 'first_name', $edituser->firstname );
+	update_usermeta( $user_id, 'last_name', $edituser->lastname );
+	update_usermeta( $user_id, 'nickname', $edituser->nickname );
+	update_usermeta( $user_id, 'description', $edituser->description );
+	update_usermeta( $user_id, 'icq', $edituser->icq );
+	update_usermeta( $user_id, 'aim', $edituser->aim );
+	update_usermeta( $user_id, 'msn', $edituser->msn );
+	update_usermeta( $user_id, 'yim', $edituser->yim );
+	
+	$wp_user->set_role($_POST['new_role']);
+	
+	header("Location: user-edit.php?user_id=$user_id&updated=true");
+} else {
+	$wp_user->roles = array($_POST['new_role'] => true);
+}
 
-header("Location: user-edit.php?user_id=$user_id&updated=true");
-
-break;
-
-case 'switchposts':
-
-check_admin_referer();
-
-/* TODO: Switch all posts from one user to another user */
-
-break;
-
 default:
 include ('admin-header.php');
 
-$edituser = get_userdata($user_id);
+if(empty($wp_user)) {
+	$wp_user = new WP_User($user_id);
+	$edituser = &$wp_user->data;
+}
 
-if ($edituser->user_level >= $user_level) die( __('You do not have permission to edit this user.') );
+if (!current_user_can('edit_users')) $errors['head'] = __('You do not have permission to edit this user.');
 ?>
 
 <?php if ( isset($_GET['updated']) ) : ?>
@@ -102,6 +114,15 @@
 	<p><strong><?php _e('User updated.') ?></strong></p>
 </div>
 <?php endif; ?>
+<?php if ( isset($errors) ) : ?>
+<div class="error">
+	<ul>
+	<?php
+	foreach($errors as $error) echo "<li>$error</li>";
+	?>
+	</ul>
+</div>
+<?php endif; ?>
 
 <div class="wrap">
 <h2><?php _e('Edit User'); ?></h2>
@@ -112,14 +133,19 @@
 		<td width="73%"><input type="text" name="new_user_login" id="new_user_login" value="<?php echo $edituser->user_login; ?>" /></td>
 	</tr>
 	<tr>
-		<th scope="row"><?php _e('Level:') ?></th>
-		<td><?php echo $edituser->user_level; ?></td>
+		<th scope="row"><?php _e('Role:') ?></th>
+		<td><select name="new_role" id="new_role"><?php 
+		foreach($wp_roles->role_names as $role => $name) {
+			$selected = (empty($wp_user->roles[$role])) ? '' : 'selected="selected"';
+			echo "<option {$selected} value=\"{$role}\">{$name}</option>";
+		}
+		?></select></td>
 	</tr>
 	<tr>
 		<th scope="row"><?php _e('Posts:') ?></th>
 		<td><?php echo get_usernumposts($edituser->ID); ?></td>
 	</tr>
-<?php if ( '0000-00-00 00:00:00' != $edituser->user_registered ) { ?>
+<?php if ( isset($edituser->user_registered) && ('0000-00-00 00:00:00' != $edituser->user_registered) ) { ?>
 	<tr>
 		<th scope="row"><?php _e('Registered on:') ?></th>
 		<td><?php echo substr($edituser->user_registered, 0, 11); ?></td>
@@ -135,7 +161,7 @@
 	</tr>
 	<tr>
 		<th scope="row"><?php _e('Profile:') ?></th>
-		<td><textarea name="new_description" rows="5" id="new_description" style="width: 99%; "><?php echo $edituser->user_description ?></textarea></td>
+		<td><textarea name="new_description" rows="5" id="new_description" style="width: 99%; "><?php echo $edituser->description ?></textarea></td>
 	</tr>
 	<tr>
 		<th scope="row"><?php _e('Nickname:') ?></th>
@@ -189,6 +215,8 @@
 		</td>
 	</tr>
 <?php
+do_action('edit_user_profile');
+
 $show_password_fields = apply_filters('show_password_fields', true);
 if ( $show_password_fields ) :
 ?>
Index: wp-admin/options-general.php
===================================================================
--- wp-admin/options-general.php	(revision 2703)
+++ wp-admin/options-general.php	(working copy)
@@ -11,7 +11,7 @@
   <h2><?php _e('General Options') ?></h2> 
   <form name="form1" method="post" action="options.php"> 
     <input type="hidden" name="action" value="update" /> 
-	<input type="hidden" name="action" value="update" /> <input type="hidden" name="page_options" value="'blogname','blogdescription','siteurl','admin_email','users_can_register','gmt_offset','date_format','time_format','home','start_of_week','comment_registration'" /> 
+	<input type="hidden" name="action" value="update" /> <input type="hidden" name="page_options" value="'blogname','blogdescription','siteurl','admin_email','users_can_register','gmt_offset','date_format','time_format','home','start_of_week','comment_registration','default_role'" /> 
     <table width="100%" cellspacing="2" cellpadding="5" class="editform"> 
       <tr valign="top"> 
         <th width="33%" scope="row"><?php _e('Weblog title:') ?></th> 
@@ -48,6 +48,17 @@
 			</label>
 </td> 
       </tr> 
+      <tr valign="top"> 
+        <th scope="row"><?php _e('New User Default Role:') ?></th> 
+        <td><label for="default_role"> 
+          <select name="default_role" id="default_role"><?php 
+					foreach($wp_roles->role_names as $role => $name) {
+						$selected = (get_settings('default_role') == $role) ? 'selected="selected"' : '';
+						echo "<option {$selected} value=\"{$role}\">{$name}</option>";
+					}
+					?></select></label>
+				</td> 
+      </tr> 
     </table> 
     <fieldset class="options"> 
     <legend><?php _e('Date and Time') ?></legend> 
Index: wp-admin/options-writing.php
===================================================================
--- wp-admin/options-writing.php	(revision 2703)
+++ wp-admin/options-writing.php	(working copy)
@@ -11,7 +11,7 @@
   <h2><?php _e('Writing Options') ?></h2> 
   <form name="form1" method="post" action="options.php"> 
     <input type="hidden" name="action" value="update" /> 
-    <input type="hidden" name="page_options" value="'default_post_edit_rows','use_smilies','use_balanceTags','ping_sites','mailserver_url', 'mailserver_port','mailserver_login','mailserver_pass','default_category','default_email_category','new_users_can_blog'" /> 
+    <input type="hidden" name="page_options" value="'default_post_edit_rows','use_smilies','use_balanceTags','ping_sites','mailserver_url', 'mailserver_port','mailserver_login','mailserver_pass','default_category','default_email_category'," /> 
     <table width="100%" cellspacing="2" cellpadding="5" class="editform"> 
       <tr valign="top"> 
         <th width="33%" scope="row"> <?php _e('Size of the post box:') ?></th> 
@@ -39,12 +39,6 @@
 ?>
        			</select></td>
 	</tr>
-	<tr>
-        <th scope="row"><?php _e('Newly registered members:') ?></th> 
-        <td> <label for="new_users_can_blog0"><input name="new_users_can_blog" id="new_users_can_blog0" type="radio" value="0" <?php checked('0', get_settings('new_users_can_blog')); ?> /> <?php _e('Cannot write articles') ?></label><br />
-<label for="new_users_can_blog1"><input name="new_users_can_blog" id="new_users_can_blog1" type="radio" value="1" <?php checked('1', get_settings('new_users_can_blog')); ?> /> <?php _e('May submit drafts for review') ?></label><br />
-<label for="new_users_can_blog2"><input name="new_users_can_blog" id="new_users_can_blog2" type="radio" value="2" <?php checked('2', get_settings('new_users_can_blog')); ?> /> <?php _e('May publish articles') ?></label><br /></td> 
-	</tr> 
 </table>
 
 <fieldset class="options">
@@ -98,4 +92,4 @@
 </form> 
 </div> 
 
-<?php include('./admin-footer.php') ?>
\ No newline at end of file
+<?php include('./admin-footer.php') ?>
Index: wp-admin/upgrade-schema.php
===================================================================
--- wp-admin/upgrade-schema.php	(revision 2703)
+++ wp-admin/upgrade-schema.php	(working copy)
@@ -215,11 +215,13 @@
 	add_option('html_type', 'text/html');
 	// 1.5.1
 	add_option('use_trackback', 0);
+	// 1.6
+	add_option('default_role', 'Inactive');
 
 	populate_roles();
 
 	// Delete unused options
-	$unusedoptions = array ('blodotgsping_url', 'bodyterminator', 'emailtestonly', 'phoneemail_separator', 'smilies_directory', 'subjectprefix', 'use_bbcode', 'use_blodotgsping', 'use_phoneemail', 'use_quicktags', 'use_weblogsping', 'weblogs_cache_file', 'use_preview', 'use_htmltrans', 'smilies_directory', 'fileupload_allowedusers', 'use_phoneemail', 'default_post_status', 'default_post_category', 'archive_mode', 'time_difference', 'links_minadminlevel', 'links_use_adminlevels', 'links_rating_type', 'links_rating_char', 'links_rating_ignore_zero', 'links_rating_single_image', 'links_rating_image0', 'links_rating_image1', 'links_rating_image2', 'links_rating_image3', 'links_rating_image4', 'links_rating_image5', 'links_rating_image6', 'links_rating_image7', 'links_rating_image8', 'links_rating_image9', 'weblogs_cacheminutes', 'comment_allowed_tags', 'search_engine_friendly_urls', 'default_geourl_lat', 'default_geourl_lon', 'use_default_geourl', 'weblogs_xml_url');
+	$unusedoptions = array ('blodotgsping_url', 'bodyterminator', 'emailtestonly', 'phoneemail_separator', 'smilies_directory', 'subjectprefix', 'use_bbcode', 'use_blodotgsping', 'use_phoneemail', 'use_quicktags', 'use_weblogsping', 'weblogs_cache_file', 'use_preview', 'use_htmltrans', 'smilies_directory', 'fileupload_allowedusers', 'use_phoneemail', 'default_post_status', 'default_post_category', 'archive_mode', 'time_difference', 'links_minadminlevel', 'links_use_adminlevels', 'links_rating_type', 'links_rating_char', 'links_rating_ignore_zero', 'links_rating_single_image', 'links_rating_image0', 'links_rating_image1', 'links_rating_image2', 'links_rating_image3', 'links_rating_image4', 'links_rating_image5', 'links_rating_image6', 'links_rating_image7', 'links_rating_image8', 'links_rating_image9', 'weblogs_cacheminutes', 'comment_allowed_tags', 'search_engine_friendly_urls', 'default_geourl_lat', 'default_geourl_lon', 'use_default_geourl', 'weblogs_xml_url', 'new_users_can_blog');
 	foreach ($unusedoptions as $option) :
 		delete_option($option);
 	endforeach;
From podz at tamba2.org.uk  Tue Jul 12 09:54:14 2005
From: podz at tamba2.org.uk (Podz)
Date: Tue Jul 12 16:04:55 2005
Subject: [wp-hackers] Forum post: Huge server hits
Message-ID: <42D39346.7030705@tamba2.org.uk>

http://wordpress.org/support/topic/38937

  "as a recation to the attacks in london we set up a website called 
werenotafraid.com, and we are running it on a wordpress blog. i am not 
pimping the project here, my questions is of a somewhat technical nature.

the project has really taken off, we had 11 million hits in just a few 
days, but we had to notice that the wordpress software was not able to 
deal with the load:"

It's been linked from the BBC too so the problem will remain. I've 
pointed the guy at staticise-reloaded, but maybe this number of hits 
needs something more ?

P.
From jason at textdrive.com  Tue Jul 12 16:11:37 2005
From: jason at textdrive.com (Jason A. Hoffman)
Date: Tue Jul 12 16:12:03 2005
Subject: [wp-hackers] Forum post: Huge server hits
In-Reply-To: <42D39346.7030705@tamba2.org.uk>
References: <42D39346.7030705@tamba2.org.uk>
Message-ID: <881B2C5A-3314-43BB-9612-1790B5C81D3F@textdrive.com>

On Jul 12, 2005, at 2:54 AM, Podz wrote:

> http://wordpress.org/support/topic/38937
>
>  "as a recation to the attacks in london we set up a website called  
> werenotafraid.com, and we are running it on a wordpress blog. i am  
> not pimping the project here, my questions is of a somewhat  
> technical nature.
>
> the project has really taken off, we had 11 million hits in just a  
> few days, but we had to notice that the wordpress software was not  
> able to deal with the load:"
>
> It's been linked from the BBC too so the problem will remain. I've  
> pointed the guy at staticise-reloaded, but maybe this number of  
> hits needs something more ?
>
> P.

Not to inject myself here, but why do people slap up a wordpress site  
(or anything for that matter) on a little server, and then expect a  
piece of software to just scale up automatically?

What kind of hardware is it on? What web server? What mysql? What ...?

- Jason
From podz at tamba2.org.uk  Tue Jul 12 16:20:42 2005
From: podz at tamba2.org.uk (Podz)
Date: Tue Jul 12 16:20:38 2005
Subject: [wp-hackers] Forum post: Huge server hits
In-Reply-To: <881B2C5A-3314-43BB-9612-1790B5C81D3F@textdrive.com>
References: <42D39346.7030705@tamba2.org.uk>
	<881B2C5A-3314-43BB-9612-1790B5C81D3F@textdrive.com>
Message-ID: <42D3EDDA.7090707@tamba2.org.uk>

Jason A. Hoffman wrote:
<<snip>>
> 
> Not to inject myself here, but why do people slap up a wordpress site  
> (or anything for that matter) on a little server, and then expect a  
> piece of software to just scale up automatically?
> 
> What kind of hardware is it on? What web server? What mysql? What ...?
> 
> - Jason

Well it's said it scales well :)
Having said that, what does cope well on a normal web account with 5 
million hits in a day ?

wp-cache came in too late it seems - a switch to a different non-db 
solution is being pursued right now.
I do have a 4.7meg file which is mainly the mysql log which may be of 
interest to someone ? If someone is looking to improve wp-cache it may 
be useful ?

P.
From ryan at boren.nu  Tue Jul 12 15:55:30 2005
From: ryan at boren.nu (Ryan Boren)
Date: Tue Jul 12 16:23:21 2005
Subject: [wp-hackers] User Capabilities
In-Reply-To: <42D3492E.7080007@midnightcircus.com>
References: <1120196075.7972.0.camel@portnoy.fuzzybelly.org>
	<012601c58245$7d2de040$6402a8c0@DELL8600>
	<42CC0A48.8080905@midnightcircus.com>
	<1120796682.3844.165.camel@portnoy.fuzzybelly.org>
	<42CE9769.80702@midnightcircus.com>
	<42572.64.101.146.91.1120854503.squirrel@webmail.barclay.textdrive.com>
	<1120858481.12652.17.camel@portnoy.fuzzybelly.org>
	<1120928406.22248.7.camel@portnoy.fuzzybelly.org>
	<42D0C8EA.1020801@midnightcircus.com>
	<1121016327.22248.17.camel@portnoy.fuzzybelly.org>
	<42D16B55.8090806@midnightcircus.com>
	<1121032835.22248.24.camel@portnoy.fuzzybelly.org>
	<1121033516.22248.33.camel@portnoy.fuzzybelly.org>
	<42D1A08E.8020800@mullenweg.com>
	<1121034897.22248.40.camel@portnoy.fuzzybelly.org>
	<42D1B41B.8020506@mullenweg.com> <42D1B4C3.7090001@skippy.net>
	<42D20D2A.3090700@mullenweg.com>
	<1121090744.17612.62.camel@portnoy.fuzzybelly.org>
	<42D29CD6.1030102@midnightcircus.com>
	<1121122187.17612.67.camel@portnoy.fuzzybelly.org>
	<42D3492E.7080007@midnightcircus.com>
Message-ID: <1121183730.15653.10.camel@portnoy.fuzzybelly.org>

On Tue, 2005-07-12 at 00:38 -0400, Owen Winkler wrote:
> roles_ui.diff is all of the above, /plus/ UI for managing roles, so it's 
> bigger and needs much review.  Since the last patch, I've added the 
> ability to delete and change roles on multiple users.  The user deletion 
> code now prompts you to either delete all posts and links or *reassign* 
> them to a different 

I committed this so folks can update and take a look.

> Always looking forward to some quality quibbling.  :)

Let the quibbling begin.

Ryan

From journalized at gmail.com  Tue Jul 12 16:23:15 2005
From: journalized at gmail.com (Mike Little)
Date: Tue Jul 12 16:23:35 2005
Subject: [wp-hackers] Forum post: Huge server hits
In-Reply-To: <881B2C5A-3314-43BB-9612-1790B5C81D3F@textdrive.com>
References: <42D39346.7030705@tamba2.org.uk>
	<881B2C5A-3314-43BB-9612-1790B5C81D3F@textdrive.com>
Message-ID: <7235ce7805071209233d8718fc@mail.gmail.com>

On 12/07/05, Jason A. Hoffman <jason@textdrive.com> wrote:
> 
> Not to inject myself here, but why do people slap up a wordpress site
> (or anything for that matter) on a little server, and then expect a
> piece of software to just scale up automatically?
> 
> What kind of hardware is it on? What web server? What mysql? What ...?
> 
> - Jason

Because they don't understand. 
They don't understand that it matters what hardware you have. They
don't understand that it matters how that hardware is configured. They
don't understand that software has to be configured/tuned
appropriately for both the content and the load. That's what separates
the experts from the knowledgeable amateurs.

Lastly, I don't expect any amateur throwing up a site even one like
this would expect 11 million page views. Thousands, yes. They may,
given the nature of the subject, even predict hundreds of thousands of
hits, but I wouldn't expect tens of millions.

Mike
-- 
Mike Little
http://zed1.com/journalized/
From ryan at ryanduff.net  Tue Jul 12 16:34:53 2005
From: ryan at ryanduff.net (Ryan Duff)
Date: Tue Jul 12 16:32:54 2005
Subject: [wp-hackers] User Capabilities
In-Reply-To: <1121183730.15653.10.camel@portnoy.fuzzybelly.org>
References: <1120196075.7972.0.camel@portnoy.fuzzybelly.org>	<42CC0A48.8080905@midnightcircus.com>	<1120796682.3844.165.camel@portnoy.fuzzybelly.org>	<42CE9769.80702@midnightcircus.com>	<42572.64.101.146.91.1120854503.squirrel@webmail.barclay.textdrive.com>	<1120858481.12652.17.camel@portnoy.fuzzybelly.org>	<1120928406.22248.7.camel@portnoy.fuzzybelly.org>	<42D0C8EA.1020801@midnightcircus.com>	<1121016327.22248.17.camel@portnoy.fuzzybelly.org>	<42D16B55.8090806@midnightcircus.com>	<1121032835.22248.24.camel@portnoy.fuzzybelly.org>	<1121033516.22248.33.camel@portnoy.fuzzybelly.org>	<42D1A08E.8020800@mullenweg.com>	<1121034897.22248.40.camel@portnoy.fuzzybelly.org>	<42D1B41B.8020506@mullenweg.com>
	<42D1B4C3.7090001@skippy.net>	<42D20D2A.3090700@mullenweg.com>	<1121090744.17612.62.camel@portnoy.fuzzybelly.org>	<42D29CD6.1030102@midnightcircus.com>	<1121122187.17612.67.camel@portnoy.fuzzybelly.org>	<42D3492E.7080007@midnightcircus.com>
	<1121183730.15653.10.camel@portnoy.fuzzybelly.org>
Message-ID: <42D3F12D.2060602@ryanduff.net>

Ryan Boren wrote:
> I committed this so folks can update and take a look.


The upgrader appears to be semi-broken. It returns to the step1 page 
that says its done, but the have fun link links to same page instead of 
back. I'm assuming the upgrader completed sucessfully.

-- 
Ryan Duff
http://ryanduff.net
AIM: ryancduff
irc.freenode.net #wordpress

From jbainbridge at gmail.com  Tue Jul 12 16:29:11 2005
From: jbainbridge at gmail.com (Jason Bainbridge)
Date: Tue Jul 12 16:53:38 2005
Subject: [wp-hackers] Forum post: Huge server hits
In-Reply-To: <881B2C5A-3314-43BB-9612-1790B5C81D3F@textdrive.com>
References: <42D39346.7030705@tamba2.org.uk>
	<881B2C5A-3314-43BB-9612-1790B5C81D3F@textdrive.com>
Message-ID: <d6491f4805071209295187c354@mail.gmail.com>

On 7/12/05, Jason A. Hoffman <jason@textdrive.com> wrote:
> On Jul 12, 2005, at 2:54 AM, Podz wrote:
> 
> > http://wordpress.org/support/topic/38937
> >
> >  "as a recation to the attacks in london we set up a website called
> > werenotafraid.com, and we are running it on a wordpress blog. i am
> > not pimping the project here, my questions is of a somewhat
> > technical nature.
> >
> > the project has really taken off, we had 11 million hits in just a
> > few days, but we had to notice that the wordpress software was not
> > able to deal with the load:"
> >
> > It's been linked from the BBC too so the problem will remain. I've
> > pointed the guy at staticise-reloaded, but maybe this number of
> > hits needs something more ?
> >
> > P.
> 
> Not to inject myself here, but why do people slap up a wordpress site
> (or anything for that matter) on a little server, and then expect a
> piece of software to just scale up automatically?
> 
> What kind of hardware is it on? What web server? What mysql? What ...?

A tracert leads it to:

http://moblog.co.uk/help.php?thesite

"Q: How does it all work?

One linux server, a few thousand lines of php, a sprinkling of mySql
and a dab of procmail magic. Mmmm, tasty."

One shared server for all the other moblog.co.uk users plus a high
traffic website such as this is not going to scale well no matter how
you do it, especially when your front page is about 220k all up. Using
a cache plugin or similar to save hits to MySQL and CPU time to
generate the dynamic page would help some but it isn't going to be a
magic pill given the environment.

For a site like that you NEED a dedicated server to begin with and
thenn you need to look at doing things like serving images using a
light weight webserver to spread the load amongst other things.

Regards,
-- 
Jason Bainbridge
http://kde.org - webmaster@kde.org
Personal Site - http://jasonbainbridge.com
From m at mullenweg.com  Tue Jul 12 17:03:25 2005
From: m at mullenweg.com (Matthew Mullenweg)
Date: Tue Jul 12 17:03:26 2005
Subject: [wp-hackers] Forum post: Huge server hits
In-Reply-To: <7235ce7805071209233d8718fc@mail.gmail.com>
References: <42D39346.7030705@tamba2.org.uk>	<881B2C5A-3314-43BB-9612-1790B5C81D3F@textdrive.com>
	<7235ce7805071209233d8718fc@mail.gmail.com>
Message-ID: <42D3F7DD.7010203@mullenweg.com>

Mike Little wrote:
> Because they don't understand. 
> They don't understand that it matters what hardware you have. They
> don't understand that it matters how that hardware is configured. They
> don't understand that software has to be configured/tuned
> appropriately for both the content and the load. That's what separates
> the experts from the knowledgeable amateurs.

Which is a good argument for having WP-Cache functionality and speed 
being a checkbox inside of WP.

-- 
Matt Mullenweg
  http://photomatt.net | http://wordpress.org
http://pingomatic.com | http://cnet.com
From podz at tamba2.org.uk  Tue Jul 12 17:12:30 2005
From: podz at tamba2.org.uk (Podz)
Date: Tue Jul 12 17:12:29 2005
Subject: [wp-hackers] Forum post: Huge server hits
In-Reply-To: <d6491f4805071209295187c354@mail.gmail.com>
References: <42D39346.7030705@tamba2.org.uk>	<881B2C5A-3314-43BB-9612-1790B5C81D3F@textdrive.com>
	<d6491f4805071209295187c354@mail.gmail.com>
Message-ID: <42D3F9FE.8070708@tamba2.org.uk>

Jason Bainbridge wrote:
> For a site like that you NEED a dedicated server to begin with and
> thenn you need to look at doing things like serving images using a
> light weight webserver to spread the load amongst other things.
> 

To be fair to them - having chatted a lot to them since I posted 
initially, this started as something very small, between mates type 
thing but somewhere it caught the imagination and they have been running 
after it since. No doubt the bandwidth costs will clobber them soon enough.

Still... as an extreme test given the circumstances, I think it ranks 
pretty highly ? We do get questions about server load in the forums and 
we are - as yet - unable to give definitive answers. Not that this does, 
but those issues are not answerable. Unless someone wants to take a shot ?

P.
From ryan at ryanduff.net  Tue Jul 12 17:20:03 2005
From: ryan at ryanduff.net (Ryan Duff)
Date: Tue Jul 12 17:17:48 2005
Subject: [wp-hackers] User Capabilities
In-Reply-To: <42D3F12D.2060602@ryanduff.net>
References: <1120196075.7972.0.camel@portnoy.fuzzybelly.org>	<1120796682.3844.165.camel@portnoy.fuzzybelly.org>	<42CE9769.80702@midnightcircus.com>	<42572.64.101.146.91.1120854503.squirrel@webmail.barclay.textdrive.com>	<1120858481.12652.17.camel@portnoy.fuzzybelly.org>	<1120928406.22248.7.camel@portnoy.fuzzybelly.org>	<42D0C8EA.1020801@midnightcircus.com>	<1121016327.22248.17.camel@portnoy.fuzzybelly.org>	<42D16B55.8090806@midnightcircus.com>	<1121032835.22248.24.camel@portnoy.fuzzybelly.org>	<1121033516.22248.33.camel@portnoy.fuzzybelly.org>	<42D1A08E.8020800@mullenweg.com>	<1121034897.22248.40.camel@portnoy.fuzzybelly.org>	<42D1B41B.8020506@mullenweg.com>	<42D1B4C3.7090001@skippy.net>	<42D20D2A.3090700@mullenweg.com>	<1121090744.17612.62.camel@portnoy.fuzzybelly.org>	<42D29CD6.1030102@midnightcircus.com>	<1121122187.17612.67.camel@portnoy.fuzzybelly.org>	<42D3492E.7080007@midnightcircus.com>	<1121183730.15653.10.camel@portnoy.fuzzybelly.org>
	<42D3F12D.2060602@ryanduff.net>
Message-ID: <42D3FBC3.4000305@ryanduff.net>

Ryan Duff wrote:
> Ryan Boren wrote:
> 
>> I committed this so folks can update and take a look.
> 
> 
> 
> The upgrader appears to be semi-broken. It returns to the step1 page 
> that says its done, but the have fun link links to same page instead of 
> back. I'm assuming the upgrader completed sucessfully.
> 

Its running, the link generated at the end is incorrect.

get_settings('home') is still an empty variable.

http://trac.wordpress.org/file/trunk/wp-admin/upgrade.php?rev=2641

Maybe change it back to siteurl or is there future development planned 
for the home option?

Thanks to Owen for helping me find this.

-- 
Ryan Duff
http://ryanduff.net
AIM: ryancduff
irc.freenode.net #wordpress
From false.hopes at gmail.com  Tue Jul 12 17:32:13 2005
From: false.hopes at gmail.com (Robert Deaton)
Date: Tue Jul 12 17:32:21 2005
Subject: [wp-hackers] Forum post: Huge server hits
In-Reply-To: <42D3F9FE.8070708@tamba2.org.uk>
References: <42D39346.7030705@tamba2.org.uk>
	<881B2C5A-3314-43BB-9612-1790B5C81D3F@textdrive.com>
	<d6491f4805071209295187c354@mail.gmail.com>
	<42D3F9FE.8070708@tamba2.org.uk>
Message-ID: <a491f91d050712103227694dec@mail.gmail.com>

The best place to point people is:

A) To WP-Cache over staticize reloaded. Staticize reloaded has some
shortfallings in being a normal plugin as opposed to using the
advanced cache interface. Specifically, the advanced plugin interface
is loaded before any database interface is loaded, before the tens of
thousands of lines in the wp-includes directory, etc.

B) If for some reason, they refuse a caching plugin, to LightPress,
the lightweight frontend to WordPress, as it generates far fewer
queries and shortens various things (at the expense of some features
that not everyone uses, but aren't normally used anyways).

On 7/12/05, Podz <podz@tamba2.org.uk> wrote:
> Jason Bainbridge wrote:
> > For a site like that you NEED a dedicated server to begin with and
> > thenn you need to look at doing things like serving images using a
> > light weight webserver to spread the load amongst other things.
> >
> 
> To be fair to them - having chatted a lot to them since I posted
> initially, this started as something very small, between mates type
> thing but somewhere it caught the imagination and they have been running
> after it since. No doubt the bandwidth costs will clobber them soon enough.
> 
> Still... as an extreme test given the circumstances, I think it ranks
> pretty highly ? We do get questions about server load in the forums and
> we are - as yet - unable to give definitive answers. Not that this does,
> but those issues are not answerable. Unless someone wants to take a shot ?
> 
> P.
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
> 


-- 
--Robert Deaton
http://somethingunpredictable.com
From denis at semiologic.com  Tue Jul 12 17:35:01 2005
From: denis at semiologic.com (Denis de Bernardy)
Date: Tue Jul 12 17:36:35 2005
Subject: [wp-hackers] Forum post: Huge server hits
In-Reply-To: <42D3F9FE.8070708@tamba2.org.uk>
Message-ID: <003701c58708$08bded00$6702a8c0@DB>

> We do get questions about server load in the forums and 
> we are - as yet - unable to give definitive answers.

I disagree. If WP-cache isn't enough for a user, he should be considering a
hardware solution. Not a software solution.

D.

From podz at tamba2.org.uk  Tue Jul 12 17:46:06 2005
From: podz at tamba2.org.uk (Podz)
Date: Tue Jul 12 17:46:05 2005
Subject: [wp-hackers] Forum post: Huge server hits
In-Reply-To: <003701c58708$08bded00$6702a8c0@DB>
References: <003701c58708$08bded00$6702a8c0@DB>
Message-ID: <42D401DE.2030800@tamba2.org.uk>

Denis de Bernardy wrote:
>>We do get questions about server load in the forums and 
>>we are - as yet - unable to give definitive answers.
> 
> 
> I disagree. If WP-cache isn't enough for a user, he should be considering a
> hardware solution. Not a software solution.
> 

and as someone who answers these, how do I know what the answer is 
before they go ahead and break things ?
What /is/ an answer ?

P.
From m at mullenweg.com  Tue Jul 12 19:03:16 2005
From: m at mullenweg.com (Matt Mullenweg)
Date: Tue Jul 12 19:03:24 2005
Subject: [wp-hackers] Forum post: Huge server hits
In-Reply-To: <42D401DE.2030800@tamba2.org.uk>
References: <003701c58708$08bded00$6702a8c0@DB>
	<42D401DE.2030800@tamba2.org.uk>
Message-ID: <42D413F4.5010806@mullenweg.com>

Podz wrote:
> and as someone who answers these, how do I know what the answer is 
> before they go ahead and break things ?
> What /is/ an answer ?

WP-Cache is the first answer, it's faster than anything else out there. 
They could use LightPress, but it's slower than WP-Cache and uses a 
different template system, etc.

If after using WP-Cache it's still too slow, then they need to modify 
their hosting situation by upgrading hardware to something faster, with 
more memory, or that doesn't have to share resources. Unfortunately this 
usually isn't free.

-- 
Matt Mullenweg
http://photomatt.net  | http://wordpress.org
http://pingomatic.com | http://cnet.com
From jason at textdrive.com  Tue Jul 12 19:09:46 2005
From: jason at textdrive.com (Jason A. Hoffman)
Date: Tue Jul 12 19:09:55 2005
Subject: [wp-hackers] Forum post: Huge server hits
In-Reply-To: <42D401DE.2030800@tamba2.org.uk>
References: <003701c58708$08bded00$6702a8c0@DB>
	<42D401DE.2030800@tamba2.org.uk>
Message-ID: <4549F87C-E60C-4F3C-89CE-17B53F6337F4@textdrive.com>

On Jul 12, 2005, at 10:46 AM, Podz wrote:
> Denis de Bernardy wrote:
>
>>> We do get questions about server load in the forums and we are -  
>>> as yet - unable to give definitive answers.
>>>
>> I disagree. If WP-cache isn't enough for a user, he should be  
>> considering a
>> hardware solution. Not a software solution.
>>
>
> and as someone who answers these, how do I know what the answer is  
> before they go ahead and break things ?
> What /is/ an answer ?
>
> P.

As a quickie:

OK, so 5e6 hits/day(day/24hours)(hr/60mins)(min/60sec) = 58 requests/ 
second

And then there's no concurrency consideration there. Should it handle  
large linked-by-the-BBC-slashdot kind of stuff?

Basically a standard Apache install on a single server won't do that.

Taking it static would allow that that kind of req/second no problem,  
as long as there isn't a persistent concurrency more than 10-50ish.

Then let's think that query-wise (going to assume nothing query  
cached to have an a grossly overestimated upper limit) it's 10-20  
queries/request. So MySQL could be doing ~1200 queries/second (100  
million a day).

For example, weblog.textdrive.com is on a commodity piece of Dell  
hardware (a 2850) that retails for about US$7500 and is on a 100Mbps  
network drop (and gigabit switch/router), we run lighttpd and php- 
fastcgi, and do a decent amount of mysql query caching, and kernel- 
level tuning of FreeBSD.

Fully dynamic our "weblog" can do about 30-40 reqs/second and  
concurrencies up to about 600 (the concurrency is a function of how  
many php-fastcgi processes one has running, this is with 4, running  
20 wouldn't be a big deal). When we involve a static cache, it's  
about 500-600 req/second (and this is a test over a network). That's  
keeping loads less than 1 (can do 20 or 30 before there's semi- 
noticeable lags) etc.

So someone wants a site that does 5-10 million dynamic hits a day,  
and be able to do 10-100x # of visitors-at-a-given-time bursts  
without issues? Then yeah, hardware wise, it's more than one server.  
Network wise, for a 100kb front page, someone can do the math on that.

- J
From davebytes at comcast.net  Tue Jul 12 19:19:17 2005
From: davebytes at comcast.net (David Chait)
Date: Tue Jul 12 19:19:28 2005
Subject: [wp-hackers] Forum post: Huge server hits
References: <003701c58708$08bded00$6702a8c0@DB><42D401DE.2030800@tamba2.org.uk>
	<4549F87C-E60C-4F3C-89CE-17B53F6337F4@textdrive.com>
Message-ID: <01a101c58716$992b01d0$6e01a8c0@sixfour>

Heh.  I just deleted my email, which was going to say we needed someone to 
provide some real-world numbers. Thanks!

You need WP-Cache, query-caching, lots of RAM, lighttpd or thttpd (at the 
least for images!), and a TON of network bandwidth.  Average cheap shared 
server won't even come close.  High-end multi-cpu shared box might, but 
they'd shut down the site within the first 10 minutes of extreme load... ;)

-d

----- Original Message ----- 
From: "Jason A. Hoffman" <jason@textdrive.com>
To: <wp-hackers@lists.automattic.com>
Sent: Tuesday, July 12, 2005 3:09 PM
Subject: Re: [wp-hackers] Forum post: Huge server hits
> So someone wants a site that does 5-10 million dynamic hits a day,  and be 
> able to do 10-100x # of visitors-at-a-given-time bursts  without issues? 
> Then yeah, hardware wise, it's more than one server.  Network wise, for a 
> 100kb front page, someone can do the math on that.
>
> - J
> 

From deirdre at deirdre.net  Tue Jul 12 19:28:13 2005
From: deirdre at deirdre.net (Deirdre Saoirse Moen)
Date: Tue Jul 12 19:23:56 2005
Subject: [wp-hackers] Forum post: Huge server hits
In-Reply-To: <42D3F9FE.8070708@tamba2.org.uk>
References: <42D39346.7030705@tamba2.org.uk>
	<881B2C5A-3314-43BB-9612-1790B5C81D3F@textdrive.com>
	<d6491f4805071209295187c354@mail.gmail.com>
	<42D3F9FE.8070708@tamba2.org.uk>
Message-ID: <Pine.LNX.4.58.0507121223590.17897@freesia.deirdre.org>

On Tue, 12 Jul 2005, Podz wrote:

> Still... as an extreme test given the circumstances, I think it ranks
> pretty highly ? We do get questions about server load in the forums and
> we are - as yet - unable to give definitive answers. Not that this does,
> but those issues are not answerable. Unless someone wants to take a shot
> ?

One small thing that can be done is reduce the # of blog items shown per
page. It won't reduce the traffic, but it will reduce the complexity of
the page.

-- 
_Deirdre  web / blog: http://deirdre.net/
yarn: http://fuzzyorange.com    cat's blog: http://fuzzyorange.com/vsd/
"Memes are a hoax! Pass it on!"
From lorelle at cameraontheroad.com  Tue Jul 12 19:46:33 2005
From: lorelle at cameraontheroad.com (Lorelle VanFossen)
Date: Tue Jul 12 19:46:35 2005
Subject: [wp-hackers] Backup Week Announcement
Message-ID: <42D41E19.3040403@cameraontheroad.com>

The Forum and Codex Teams would appreciate it if you could help us to 
promote WordPress Backup Week. We will be having a series of events 
leading up to the Backup Week so we need to start promoting it now.  Any 
help would be appreciated to make this a success.  Thanks.

Edit this below as you want or need.

Lorelle

=======

Press Release

Backing Up is Not Just for Cars

Your WordPress database contains every post, every comment and every 
link you have on your blog. If your database gets erased or corrupted, 
you stand to lose everything you have written. There are many reasons 
why this could happen and not all are things you can control. But what 
you can do is <b>backup your data<b>. After all, it is important isn't it?

<a href="http://codex.wordpress.org/WordPress_Backups">WordPress Backup 
Week July 23-30</a> aims to help you become more familiar with the 
process of backing up and protecting your data.

Step-by-step backup instructions will be available in the online manual, 
the <a href="http://codex.wordpress.org">WordPress Codex</a>, and 
support provided online in the <a 
href="http://www.wordpress.org/support">WordPress Support Forum</a> to 
help you through the process.

Guides will be available to help you backup your WordPress site and 
database for a variety of systems and server software such as 
<b>cPanel<b>, <b>DirectAdmin<b>, <b>Plesk<b> and <b>vDeck<b>. Consider 
using this Backup Week as an incentive to backup all your valuable 
documents and software, too.

These guides will assist you in determining:

<ul>
<li>When and how to make backups.</li>
<li>How to make things right after an unexpected data loss befalls your 
WordPress database.</li>
</ul>

Making backups is essential because problems inevitably occur and you 
need to be in a position to take action when disaster strikes. Spending 
a few minutes to make an easy, convenient backup of your database will 
allow you to spend even more time being creative and productive with 
your website.

For more information or to help volunteer on this WordPress Community 
Event, see <a 
href="http://codex.wordpress.org/WordPress_Backups">WordPress Backup 
Week</a>.


From podz at tamba2.org.uk  Tue Jul 12 19:56:34 2005
From: podz at tamba2.org.uk (Podz)
Date: Tue Jul 12 19:56:35 2005
Subject: [wp-hackers] Forum post: Huge server hits
In-Reply-To: <42D401DE.2030800@tamba2.org.uk>
References: <003701c58708$08bded00$6702a8c0@DB>
	<42D401DE.2030800@tamba2.org.uk>
Message-ID: <42D42072.5060202@tamba2.org.uk>

Someone posts to the forums and says "I'm going to create a website for 
someone famous and I expect 100,000 hits a day. Can WP handle this ?"

It would seem that the response would be "Use wp-cache, it might handle it".

"Might"

Why should they invest time energy and money when it "might not" ?

The people asking these questions may have no idea about maths / 
requests / bursts / dedicated whatever - they are asking for help in 
making an informed choice. Is "might" the best we can offer ?
Would it be good to read that a big site dumped WP because - as /they/ 
see it - WP couldn't handle the traffic ? It doesn't matter what the 
answer really is, no-ne will hear that.

I do not think it unreasonable for WP to have an answer which people 
could be told to pass to their host. Make the contents of that answer as 
  geeky and as technical as you want because right now it is better than 
what we have - which at best is guesswork, and at worst nothing.

And that post at the top ? It's been asked a few times now.

P.
From jbainbridge at gmail.com  Tue Jul 12 20:05:31 2005
From: jbainbridge at gmail.com (Jason Bainbridge)
Date: Tue Jul 12 20:05:39 2005
Subject: [wp-hackers] Forum post: Huge server hits
In-Reply-To: <42D42072.5060202@tamba2.org.uk>
References: <003701c58708$08bded00$6702a8c0@DB>
	<42D401DE.2030800@tamba2.org.uk> <42D42072.5060202@tamba2.org.uk>
Message-ID: <d6491f48050712130538f42cfa@mail.gmail.com>

On 7/12/05, Podz <podz@tamba2.org.uk> wrote:
> Someone posts to the forums and says "I'm going to create a website for
> someone famous and I expect 100,000 hits a day. Can WP handle this ?"
> 
> It would seem that the response would be "Use wp-cache, it might handle it".

It isn't a matter of if Wordpress can handle it, it is more a matter
of if your current hosting situation will handle it.

There are so many variables like how many images they are and the
number of posts displayed & their length it really is impossible to
say, with wp-cache Wordpress should behave fairly similar to a static
site.

Regards,
-- 
Jason Bainbridge
http://kde.org - webmaster@kde.org
Personal Site - http://jasonbainbridge.com
From john at sinteur.com  Tue Jul 12 20:05:52 2005
From: john at sinteur.com (John Sinteur)
Date: Tue Jul 12 20:05:57 2005
Subject: [wp-hackers] Forum post: Huge server hits
In-Reply-To: <42D42072.5060202@tamba2.org.uk>
References: <003701c58708$08bded00$6702a8c0@DB>
	<42D401DE.2030800@tamba2.org.uk> <42D42072.5060202@tamba2.org.uk>
Message-ID: <8F56C27E-A24E-4823-999D-352953E39BC4@sinteur.com>


On Jul 12, 2005, at 9:56 PM, Podz wrote:

>
> I do not think it unreasonable for WP to have an answer which  
> people could be told to pass to their host. Make the contents of  
> that answer as  geeky and as technical as you want because right  
> now it is better than what we have - which at best is guesswork,  
> and at worst nothing.


The correct answer is "you'll need somebody with expertise".

In fact, that's how I earn a living. www.kpn.com is the website for  
the largest dutch telco, and one of the top-ten sites in the  
Netherlands. I'm one of the technical architects. It's my job to make  
it deal with the load.

There *is* no easy answer. With the current state of technology,  
you'll need somebody who knows his way around servers that get a  
load. That will cost money. My hourly rates for this kind of stuff is  
not low.

Perhaps in *cough* years, technology will be at a point where this is  
a no-brainer. I suspect Google will play a big role in that, but this  
form isn't really the place to elaborate on that.

At best, you'll get to a point where you can say "up to load X,  
you'll be fine with a generic pentium 4 server" but if I recall the  
start of this thread, the load was unexpectedly high.

-John
From skeltoac at gmail.com  Tue Jul 12 20:12:20 2005
From: skeltoac at gmail.com (Andy Skelton)
Date: Tue Jul 12 20:12:25 2005
Subject: [wp-hackers] Forum post: Huge server hits
In-Reply-To: <42D42072.5060202@tamba2.org.uk>
References: <003701c58708$08bded00$6702a8c0@DB>
	<42D401DE.2030800@tamba2.org.uk> <42D42072.5060202@tamba2.org.uk>
Message-ID: <e6ec604d05071213124db3f40f@mail.gmail.com>

On 7/12/05, Podz <podz@tamba2.org.uk> wrote:
> Someone posts to the forums and says "I'm going to create a website for
> someone famous and I expect 100,000 hits a day. Can WP handle this ?"

The truth about weaintskeerd.com (I forgot the url) is that /their
hosting package/ couldn't handle the load, no matter what blogging
software they used, even if they were serving a static HTML file.
Jason's scenario was for 5e6 hits per day. That's 1/20th of 10 million
hits.

It would be good to have some kind of benchmark done so we could say,
"on a dedicated 2GHz Xeon with 4GB RAM, Apache 2, [exact specs],
WordPress has been shown to handle a XXkb page with XXXkb of graphics
at XXXXX hits per day with peak loads of XXXX." It wouldn't be an
end-all for these questions but it would be very valuable for anyone
serious about setting up a high-traffic site like that.

Andy
From bfults at gmail.com  Tue Jul 12 20:30:06 2005
From: bfults at gmail.com (Brad Fults)
Date: Tue Jul 12 20:30:12 2005
Subject: [wp-hackers] Forum post: Huge server hits
In-Reply-To: <e6ec604d05071213124db3f40f@mail.gmail.com>
References: <003701c58708$08bded00$6702a8c0@DB>
	<42D401DE.2030800@tamba2.org.uk> <42D42072.5060202@tamba2.org.uk>
	<e6ec604d05071213124db3f40f@mail.gmail.com>
Message-ID: <1959130b05071213307b3e090c@mail.gmail.com>

This seems like a good opportunity for WP to partner with some large hosting 
companies that would offer a WP install + wp-cache + hardware that can 
handle "a load of up to X", giving WP a referral fee for the customer.

It would be much better to answer the question Podz exemplified with "If you 
go with our hosting partner, X, WordPress will handle your situation for Y 
amount of dollars per month."

Helping customers and making money at the same time.

-- 
Brad Fults
NeatBox

On 7/12/05, Andy Skelton <skeltoac@gmail.com> wrote:
> 
> On 7/12/05, Podz <podz@tamba2.org.uk> wrote:
> > Someone posts to the forums and says "I'm going to create a website for
> > someone famous and I expect 100,000 hits a day. Can WP handle this ?"
> 
> The truth about weaintskeerd.com <http://weaintskeerd.com> (I forgot the 
> url) is that /their
> hosting package/ couldn't handle the load, no matter what blogging
> software they used, even if they were serving a static HTML file.
> Jason's scenario was for 5e6 hits per day. That's 1/20th of 10 million
> hits.
> 
> It would be good to have some kind of benchmark done so we could say,
> "on a dedicated 2GHz Xeon with 4GB RAM, Apache 2, [exact specs],
> WordPress has been shown to handle a XXkb page with XXXkb of graphics
> at XXXXX hits per day with peak loads of XXXX." It wouldn't be an
> end-all for these questions but it would be very valuable for anyone
> serious about setting up a high-traffic site like that.
> 
> Andy
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://comox.textdrive.com/pipermail/wp-hackers/attachments/20050712/6704d595/attachment.html
From skeltoac at gmail.com  Tue Jul 12 20:14:48 2005
From: skeltoac at gmail.com (Andy Skelton)
Date: Tue Jul 12 20:46:07 2005
Subject: [wp-hackers] Forum post: Huge server hits
In-Reply-To: <e6ec604d05071213124db3f40f@mail.gmail.com>
References: <003701c58708$08bded00$6702a8c0@DB>
	<42D401DE.2030800@tamba2.org.uk> <42D42072.5060202@tamba2.org.uk>
	<e6ec604d05071213124db3f40f@mail.gmail.com>
Message-ID: <e6ec604d050712131465515bd@mail.gmail.com>

On 7/12/05, Andy Skelton <skeltoac@gmail.com> wrote:
> Jason's scenario was for 5e6 hits per day. That's 1/20th of 10 million
> hits.

Go ahead, correct my math. :-)
From jason at textdrive.com  Tue Jul 12 20:46:02 2005
From: jason at textdrive.com (Jason A. Hoffman)
Date: Tue Jul 12 20:46:10 2005
Subject: [wp-hackers] Forum post: Huge server hits
In-Reply-To: <e6ec604d05071213124db3f40f@mail.gmail.com>
References: <003701c58708$08bded00$6702a8c0@DB>
	<42D401DE.2030800@tamba2.org.uk> <42D42072.5060202@tamba2.org.uk>
	<e6ec604d05071213124db3f40f@mail.gmail.com>
Message-ID: <C51268A5-0E55-40A4-BD2A-4085E44E2340@textdrive.com>

On Jul 12, 2005, at 1:12 PM, Andy Skelton wrote:
> On 7/12/05, Podz <podz@tamba2.org.uk> wrote:
>> Someone posts to the forums and says "I'm going to create a  
>> website for
>> someone famous and I expect 100,000 hits a day. Can WP handle this ?"
>
> The truth about weaintskeerd.com (I forgot the url) is that /their
> hosting package/ couldn't handle the load, no matter what blogging
> software they used, even if they were serving a static HTML file.
> Jason's scenario was for 5e6 hits per day. That's 1/20th of 10 million
> hits.
>
> It would be good to have some kind of benchmark done so we could say,
> "on a dedicated 2GHz Xeon with 4GB RAM, Apache 2, [exact specs],
> WordPress has been shown to handle a XXkb page with XXXkb of graphics
> at XXXXX hits per day with peak loads of XXXX." It wouldn't be an
> end-all for these questions but it would be very valuable for anyone
> serious about setting up a high-traffic site like that.

We've already done this for a number of sites in this range, and I've  
been meaning to make such things public on our weblog as an article  
about "resource planning" and a transparent discussion of what things  
really cost (it's related to the tendency of web hosts to oversell  
resources and how I think podcasting is the end of that practice).

It's been primarily in the wake of what we did when a number of  
podcasts here found themselves on page one of iTunes, and we watched  
with them as they cranked out a terabyte of bandwidth (which we  
didn't send them a bill for, a benefit of underselling bandwidth).

It's a helpful discussion in general, because a common "goal" is to  
be "popular" and if I would use up all my fingers and toes if I  
counted the number of people who showed up at TextDrive on a $132/ 
year account, had one of these "political weblogs", then got picked  
up by a "MSNBC" and then ... we're surprised to find out that such  
popularity requires a system administrator and about $50,000 of  
hardware (that's already nicely discounted as part of our deal with  
Dell ...).

Then bandwidth ... the reality is this, when we co-lo in a "bandwidth  
competitive" environment like Equinix, then you can get down to about  
$15/Mbps/month from a single provider on a 100Mbps unmetered commit.  
This is what an "alternative" provider like Hurricane Electric is  
going down to and it's not the kind of rate that's just available to  
anyone, it's part of a larger co-location setup.

100 Mbps is 16,000GB/mo, or roughly 800 accounts x 200GB/mo

What's 200GB/mo? It's 1000 downloads a week of a 50MB (a standard  
stereo mp3 of about 40 minutes) podcast.

Hmm....

- Jason
From jason at textdrive.com  Tue Jul 12 20:47:06 2005
From: jason at textdrive.com (Jason A. Hoffman)
Date: Tue Jul 12 20:47:12 2005
Subject: [wp-hackers] Forum post: Huge server hits
In-Reply-To: <e6ec604d050712131465515bd@mail.gmail.com>
References: <003701c58708$08bded00$6702a8c0@DB>
	<42D401DE.2030800@tamba2.org.uk> <42D42072.5060202@tamba2.org.uk>
	<e6ec604d05071213124db3f40f@mail.gmail.com>
	<e6ec604d050712131465515bd@mail.gmail.com>
Message-ID: <022B1C88-C338-4902-BD9B-09540C0E4F39@textdrive.com>


On Jul 12, 2005, at 1:14 PM, Andy Skelton wrote:

> On 7/12/05, Andy Skelton <skeltoac@gmail.com> wrote:
>
>> Jason's scenario was for 5e6 hits per day. That's 1/20th of 10  
>> million
>> hits.
>>
>
> Go ahead, correct my math. :-)


1/2

- Jason
From davebytes at comcast.net  Tue Jul 12 21:15:36 2005
From: davebytes at comcast.net (David Chait)
Date: Tue Jul 12 21:15:51 2005
Subject: [wp-hackers] Forum post: Huge server hits
References: <003701c58708$08bded00$6702a8c0@DB><42D401DE.2030800@tamba2.org.uk>
	<42D42072.5060202@tamba2.org.uk>
Message-ID: <022801c58726$d88a0c80$6e01a8c0@sixfour>

(I wrote this before Jason's latest 'data points', which continue to show 
real-word costs and numbers...)

"Might" is because it depends on their host, their hosting plan, and their 
hosting server(s).

The problem is that many HOSTS can't even answer the question!  In some 
cases, the hosts are resellers, just making a buck.  In some they might have 
decent linux expertise, but they have no idea what it'd take to handle a 
large-scale site.

The question they could ask is: do you have a hosting plan and server 
resources that can handle a 100K/day PHP based website?  If they need a 
starting base, many of them might be familiar with one of the PHP BB 
systems, or PHPN*ke, etc., as a (heavier-weight) comparative.

I guess the answer is we could come up with some example numbers (Jason gave 
some interesting ones), we could set up a test server to bang on, but the 
reality is that when you hit 100K, 1M, or 10M, you are talking a scale 
that's beyond whether >WP< can handle it, it is whether the INFRASTRUCTURE 
can. ;)

Someone check my math:
100K/day is approx 1.16 hits per second (and by the way, 'hits' could be 
interpreted as users, as pageviews, as...).
Take a website that's a maybe 160K in exchanges for page with cool graphics, 
core html/js, and CSS.
That's about 190K/s in throughput.  Which is about 1.5Mb/s sustained 
throughput -- what many basic 'unmetered' dedicated servers are CAPPED at, 
btw.  But that's ONLY if people visit in nice succession.
So, for 10 people to hit the site simultaneously per second, sustained over 
some period, you'd need something around 15Mb/s connection (note, that's 
higher than a 10Mb connection would sustain already... I know, should be 
obvious 15 > 10, but wanted to be clear).  So, some places now offer 20Mb/s 
connections, non-sustained but in bursts.  So, you could actually burst up 
to maybe 13-14 hits per second, sustained, for some period.
Okay, up another notch.  Let's say you have a 100Mb connection.  You could 
handle up to around 70 hits per second.  That's sustaining the maximum 
throughput.
Now for reality.  You never get sustained maximum throughputs -- at least 
not without paying thousands of dollars a month for it.  The net gets 
congested, traffics gets slowed.
Second reality.  10 hits per second isn't 10 hits per second -- not really. 
There's php executing per load, retrieving the html for the page.  Then the 
browser grabs the css file(s).  Then all the images.  And much of that is 
simultaneous requests!  So depending on page content, you could be getting 
100 http requests per second easily.  Someone with apache knowledge can 
comment on that...
And that was just PURELY NETWORK.  The 20Mb/s, which was 13 hits/s, for 
let's say 15 queries, is 195 queries/s.  Someone who knows mySql can give an 
aspect of what load that'll put on a server. ;)

And as Jason pointed out, that's assuming there's no video, no podcasts, no 
downloads, just the base page.  Jason's nice to not be charging for overage 
on the bandwidth -- I don't know many other hosts out there that wouldn't 
sock you with a potential couple-grand-plus bill.  some charge like $1/GB 
overage, and if you have 1000GB extra over a base of maybe 30-300GB, that's 
a $1K charge!  but we've been talking about cases where you could be seeing 
a jump to over 10TB with millions of hits, or larger downloads like 
podcasts.  That kind of site needs hardware, network, admins, 
software/config, and bandwidth.  Hardware isn't cheap (as Jason noted), and 
unless you can get a discount provider, even pre-buying a 100Mb line/mo 
could run thousands of dollars (or more for premium, less congested, 
redundant, networks).

Just realities to think about.

----- Original Message ----- 
From: "Podz" <podz@tamba2.org.uk>
To: <wp-hackers@lists.automattic.com>
Sent: Tuesday, July 12, 2005 3:56 PM
Subject: Re: [wp-hackers] Forum post: Huge server hits


> Someone posts to the forums and says "I'm going to create a website for 
> someone famous and I expect 100,000 hits a day. Can WP handle this ?"
>
> It would seem that the response would be "Use wp-cache, it might handle 
> it".
>
> "Might"
>
> Why should they invest time energy and money when it "might not" ?
>
> The people asking these questions may have no idea about maths / requests 
> / bursts / dedicated whatever - they are asking for help in making an 
> informed choice. Is "might" the best we can offer ?
> Would it be good to read that a big site dumped WP because - as /they/ see 
> it - WP couldn't handle the traffic ? It doesn't matter what the answer 
> really is, no-ne will hear that.
>
> I do not think it unreasonable for WP to have an answer which people could 
> be told to pass to their host. Make the contents of that answer as geeky 
> and as technical as you want because right now it is better than what we 
> have - which at best is guesswork, and at worst nothing.
> 

From m at mullenweg.com  Tue Jul 12 22:20:32 2005
From: m at mullenweg.com (Matt Mullenweg)
Date: Tue Jul 12 22:20:38 2005
Subject: [wp-hackers] Forum post: Huge server hits
In-Reply-To: <e6ec604d05071213124db3f40f@mail.gmail.com>
References: <003701c58708$08bded00$6702a8c0@DB>	<42D401DE.2030800@tamba2.org.uk>
	<42D42072.5060202@tamba2.org.uk>
	<e6ec604d05071213124db3f40f@mail.gmail.com>
Message-ID: <42D44230.2050602@mullenweg.com>

Andy Skelton wrote:
> It would be good to have some kind of benchmark done so we could say,
> "on a dedicated 2GHz Xeon with 4GB RAM, Apache 2, [exact specs],
> WordPress has been shown to handle a XXkb page with XXXkb of graphics
> at XXXXX hits per day with peak loads of XXXX." It wouldn't be an
> end-all for these questions but it would be very valuable for anyone
> serious about setting up a high-traffic site like that.

I would LOVE to see some serious benchmarks done, everything I've seen 
thus far has been sort of janky.

-- 
Matt Mullenweg
http://photomatt.net  | http://wordpress.org
http://pingomatic.com | http://cnet.com
From jason at textdrive.com  Tue Jul 12 23:04:13 2005
From: jason at textdrive.com (Jason A. Hoffman)
Date: Tue Jul 12 23:04:24 2005
Subject: [wp-hackers] Forum post: Huge server hits
In-Reply-To: <42D44230.2050602@mullenweg.com>
References: <003701c58708$08bded00$6702a8c0@DB>	<42D401DE.2030800@tamba2.org.uk>
	<42D42072.5060202@tamba2.org.uk>
	<e6ec604d05071213124db3f40f@mail.gmail.com>
	<42D44230.2050602@mullenweg.com>
Message-ID: <D4CD9235-A5F2-4357-B945-01F8D37264A1@textdrive.com>

On Jul 12, 2005, at 3:20 PM, Matt Mullenweg wrote:
> Andy Skelton wrote:
>> It would be good to have some kind of benchmark done so we could say,
>> "on a dedicated 2GHz Xeon with 4GB RAM, Apache 2, [exact specs],
>> WordPress has been shown to handle a XXkb page with XXXkb of graphics
>> at XXXXX hits per day with peak loads of XXXX." It wouldn't be an
>> end-all for these questions but it would be very valuable for anyone
>> serious about setting up a high-traffic site like that.
>>
>
> I would LOVE to see some serious benchmarks done, everything I've  
> seen thus far has been sort of janky.
>
> -- 

OK, I'll put some together, as a function of hardware and network.

- Jason
From false.hopes at gmail.com  Tue Jul 12 23:13:56 2005
From: false.hopes at gmail.com (Robert Deaton)
Date: Tue Jul 12 23:14:02 2005
Subject: [wp-hackers] Forum post: Huge server hits
In-Reply-To: <42D44230.2050602@mullenweg.com>
References: <003701c58708$08bded00$6702a8c0@DB>
	<42D401DE.2030800@tamba2.org.uk> <42D42072.5060202@tamba2.org.uk>
	<e6ec604d05071213124db3f40f@mail.gmail.com>
	<42D44230.2050602@mullenweg.com>
Message-ID: <a491f91d050712161359952456@mail.gmail.com>

I just finished up my first set of a few mini-benchmarks I'm going to
be working on, comparing WordPress out of the box with various caching
plugins. I'll post what I have so far.

I used my laptop for the benchmark. It has the following specs:
P4 2.8GHz Extreme Edition with Hyperthreading (its a desktop
processor, not a mobility piece of crap)
1GB DDR RAM

The laptop is running Gentoo Linux. A 2.6.10-cko4 kernel with vm
mapped set to 0 (server). It was running X at the time, as well as
xchat and a termnial so I could watch progress (doesn't truely have
much to do with it, since I forgot to watch RAM usage over tim).

The WordPress install was the latest 1.5 branch out of subversion,
fresh install, with 5 additional posts to the default, ranging from a
few characters to 75KB or so. Nothing else was changed.

Apache is 2.0.54-r11 (gentoo). The config file had nothing but the
document root changed.
mySQL is  4.0.24-r1 (gentoo). Absolutely nothing in the config was
changed, straight out of the box installation.

The test I did only covered loadaverage over the period of time. I
used ab2 for the test, and monitored load average over one hour,
taking a look at the load every 1 minute from /proc/loadavg. The ab
test didn't finish, since I put it at some insanely large number so
that it would keep going for at least an hour, not thinking about the
consequences. At any rate, here's the file that my scripts output.


(1 minute load average) (5 minute load average) (15 minute load
average) (irrelevant)
0.15 0.17 0.09 1/66 11489
12.54 3.63 1.27 24/123 11635
18.04 6.84 2.52 21/116 11721
19.48 9.30 3.64 21/116 11789
20.33 11.39 4.71 21/116 11846
20.80 13.14 5.73 23/116 11904
20.80 14.55 6.67 21/116 11963
21.11 15.76 7.58 22/116 12032
20.87 16.67 8.41 22/116 12085
21.24 17.56 9.23 24/116 12139
21.16 18.21 9.97 21/116 12193
19.98 18.37 10.54 22/114 12244
20.96 18.94 11.22 22/114 12297
21.04 19.33 11.84 24/114 12348
21.39 19.74 12.44 25/114 12403
21.71 20.12 13.03 22/114 12453
21.14 20.27 13.52 24/114 12502
21.31 20.47 14.02 22/114 12564
21.43 20.67 14.52 23/114 12615
21.47 20.83 14.95 23/114 12661
22.02 21.09 15.41 23/114 12710
20.27 20.86 15.69 13/110 12757
21.51 21.11 16.10 22/114 12811
21.48 21.17 16.43 23/114 12857
21.83 21.33 16.78 23/114 12905
21.88 21.43 17.10 24/114 12956
21.15 21.33 17.33 21/114 13004
21.32 21.34 17.58 24/114 13063
21.73 21.47 17.86 22/114 13116
21.64 21.50 18.10 21/114 13162
22.12 21.65 18.36 24/114 13208
22.22 21.77 18.61 23/114 13267
21.53 21.66 18.76 16/115 13316
20.88 21.44 18.87 22/114 13367
20.42 21.16 18.93 22/114 13412
19.47 20.83 18.96 19/114 13463
18.30 20.25 18.87 18/114 13508
16.50 19.43 18.68 13/114 13573
15.83 18.76 18.50 8/114 13621
17.52 18.70 18.49 22/114 13662
19.22 18.98 18.60 21/114 13719
19.86 19.19 18.69 21/114 13766
20.23 19.41 18.80 21/114 13813
20.31 19.59 18.89 21/114 13866
20.23 19.70 18.97 22/114 13914
20.48 19.87 19.07 21/114 13967
20.42 19.96 19.16 22/114 14016
20.32 20.03 19.23 21/114 14079
20.15 20.03 19.28 21/114 14128
20.25 20.08 19.34 23/114 14178
20.30 20.15 19.41 21/114 14229
20.17 20.15 19.45 21/114 14276
20.47 20.23 19.52 23/114 14325
20.52 20.29 19.58 22/114 14378
20.33 20.28 19.62 22/114 14427
20.49 20.33 19.68 22/114 14474
20.36 20.33 19.72 23/114 14525
20.42 20.35 19.76 22/114 14586
20.35 20.35 19.80 22/114 14638
20.76 20.45 19.87 21/114 14689


I'm currently in the process of refining how I take these benchmarks
to gather the most information possible. If anybody has some ideas for
apache bench or any other tool to do some benchmarking, please pass it
my way, and I will preform more benchmarks (I plan to duplicate the
benchmarks on my desktop also.


-- 
--Robert Deaton
http://somethingunpredictable.com
From steve at hydramusic.net  Wed Jul 13 01:15:00 2005
From: steve at hydramusic.net (Stever)
Date: Wed Jul 13 01:09:46 2005
Subject: [wp-hackers] Simple commandline client for wordpress?
Message-ID: <42D46B14.2020300@hydramusic.net>

I need to post to my wordpress blog with just a simple title and 
messagebody, nothing fancy. I checked 
http://codex.wordpress.org/XML-RPC_Support and it seems that most of the 
links to commandline clients are broken. The one commandline client that 
did seem useful (pyBlogger) doesn't seem to have any community support.

Anyone here working on a simple commandline client for wordpress?

- Steve

From false.hopes at gmail.com  Wed Jul 13 01:27:36 2005
From: false.hopes at gmail.com (Robert Deaton)
Date: Wed Jul 13 01:27:43 2005
Subject: [wp-hackers] Forum post: Huge server hits
In-Reply-To: <a491f91d050712161359952456@mail.gmail.com>
References: <003701c58708$08bded00$6702a8c0@DB>
	<42D401DE.2030800@tamba2.org.uk> <42D42072.5060202@tamba2.org.uk>
	<e6ec604d05071213124db3f40f@mail.gmail.com>
	<42D44230.2050602@mullenweg.com>
	<a491f91d050712161359952456@mail.gmail.com>
Message-ID: <a491f91d050712182718e84e3@mail.gmail.com>

I just got back the results from the second test that used WP-Cache on
top of the install, and I must say in comparison, neither is showing
much differnce. It may be the insane settings I used on apache bench,
so if anyone could recommend some sane test cases to try it'd be
greatly appreciated.

0.53 0.31 0.12 1/70 11278
12.40 3.66 1.27 23/115 11396
17.29 6.66 2.45 23/115 11468
19.20 9.14 3.56 21/115 11545
20.08 11.22 4.62 21/115 11619
19.24 12.58 5.51 21/115 11686
19.76 13.95 6.42 21/115 11754
20.33 15.15 7.30 21/115 11823
20.64 16.18 8.14 21/113 11888
19.34 16.69 8.82 17/113 11958
17.27 16.55 9.27 9/108 12024
18.81 17.08 9.90 22/111 12096
19.69 17.65 10.54 19/108 12160
20.69 18.32 11.22 25/111 12232
20.72 18.76 11.81 21/111 12303
19.71 18.84 12.27 22/111 12361
20.00 19.09 12.77 21/111 12422
20.10 19.28 13.23 21/111 12477
20.27 19.46 13.67 21/111 12536
20.61 19.71 14.11 23/111 12593
20.10 19.76 14.48 21/112 12655
20.32 19.88 14.88 21/110 12715
20.23 19.93 15.21 21/112 12772
20.45 20.05 15.54 22/112 12828
20.48 20.14 15.85 22/112 12899
19.69 20.02 16.08 21/111 12958
19.91 19.99 16.31 24/111 13020
20.17 20.06 16.57 22/111 13077
20.49 20.17 16.82 22/111 13134
20.43 20.21 17.04 22/111 13192
18.90 19.93 17.15 18/105 13248
19.30 19.78 17.26 19/111 13309
19.15 19.66 17.38 12/111 13374
18.28 19.27 17.38 11/111 13432
19.25 19.32 17.51 21/111 13504
20.17 19.60 17.72 21/111 13561
20.57 19.81 17.91 23/111 13620
20.74 20.00 18.09 22/111 13673
20.63 20.09 18.24 21/111 13734
20.77 20.24 18.41 21/111 13794
20.66 20.30 18.54 21/111 13849
21.13 20.49 18.71 22/111 13910
21.26 20.63 18.87 21/111 13967
19.48 20.11 18.79 23/111 14027
20.33 20.25 18.92 24/111 14095
21.07 20.47 19.08 23/111 14155
21.49 20.68 19.24 22/111 14213
21.23 20.77 19.35 22/111 14275
19.89 20.52 19.36 11/105 14327
18.75 20.02 19.26 22/111 14386
20.25 20.20 19.36 23/111 14448
20.78 20.35 19.46 19/106 14505
21.10 20.56 19.59 23/111 14567
21.15 20.64 19.68 22/112 14626
21.26 20.75 19.77 22/111 14694
20.87 20.75 19.83 22/111 14755
20.51 20.67 19.86 22/111 14812
21.06 20.79 19.95 24/111 14870
21.27 20.89 20.03 22/111 14930
21.58 21.02 20.13 23/111 14985

Overall, it looks like this

On 7/12/05, Robert Deaton <false.hopes@gmail.com> wrote:
> I just finished up my first set of a few mini-benchmarks I'm going to
> be working on, comparing WordPress out of the box with various caching
> plugins. I'll post what I have so far.
> 
> I used my laptop for the benchmark. It has the following specs:
> P4 2.8GHz Extreme Edition with Hyperthreading (its a desktop
> processor, not a mobility piece of crap)
> 1GB DDR RAM
> 
> The laptop is running Gentoo Linux. A 2.6.10-cko4 kernel with vm
> mapped set to 0 (server). It was running X at the time, as well as
> xchat and a termnial so I could watch progress (doesn't truely have
> much to do with it, since I forgot to watch RAM usage over tim).
> 
> The WordPress install was the latest 1.5 branch out of subversion,
> fresh install, with 5 additional posts to the default, ranging from a
> few characters to 75KB or so. Nothing else was changed.
> 
> Apache is 2.0.54-r11 (gentoo). The config file had nothing but the
> document root changed.
> mySQL is  4.0.24-r1 (gentoo). Absolutely nothing in the config was
> changed, straight out of the box installation.
> 
> The test I did only covered loadaverage over the period of time. I
> used ab2 for the test, and monitored load average over one hour,
> taking a look at the load every 1 minute from /proc/loadavg. The ab
> test didn't finish, since I put it at some insanely large number so
> that it would keep going for at least an hour, not thinking about the
> consequences. At any rate, here's the file that my scripts output.
> 
> 
> (1 minute load average) (5 minute load average) (15 minute load
> average) (irrelevant)
> 0.15 0.17 0.09 1/66 11489
> 12.54 3.63 1.27 24/123 11635
> 18.04 6.84 2.52 21/116 11721
> 19.48 9.30 3.64 21/116 11789
> 20.33 11.39 4.71 21/116 11846
> 20.80 13.14 5.73 23/116 11904
> 20.80 14.55 6.67 21/116 11963
> 21.11 15.76 7.58 22/116 12032
> 20.87 16.67 8.41 22/116 12085
> 21.24 17.56 9.23 24/116 12139
> 21.16 18.21 9.97 21/116 12193
> 19.98 18.37 10.54 22/114 12244
> 20.96 18.94 11.22 22/114 12297
> 21.04 19.33 11.84 24/114 12348
> 21.39 19.74 12.44 25/114 12403
> 21.71 20.12 13.03 22/114 12453
> 21.14 20.27 13.52 24/114 12502
> 21.31 20.47 14.02 22/114 12564
> 21.43 20.67 14.52 23/114 12615
> 21.47 20.83 14.95 23/114 12661
> 22.02 21.09 15.41 23/114 12710
> 20.27 20.86 15.69 13/110 12757
> 21.51 21.11 16.10 22/114 12811
> 21.48 21.17 16.43 23/114 12857
> 21.83 21.33 16.78 23/114 12905
> 21.88 21.43 17.10 24/114 12956
> 21.15 21.33 17.33 21/114 13004
> 21.32 21.34 17.58 24/114 13063
> 21.73 21.47 17.86 22/114 13116
> 21.64 21.50 18.10 21/114 13162
> 22.12 21.65 18.36 24/114 13208
> 22.22 21.77 18.61 23/114 13267
> 21.53 21.66 18.76 16/115 13316
> 20.88 21.44 18.87 22/114 13367
> 20.42 21.16 18.93 22/114 13412
> 19.47 20.83 18.96 19/114 13463
> 18.30 20.25 18.87 18/114 13508
> 16.50 19.43 18.68 13/114 13573
> 15.83 18.76 18.50 8/114 13621
> 17.52 18.70 18.49 22/114 13662
> 19.22 18.98 18.60 21/114 13719
> 19.86 19.19 18.69 21/114 13766
> 20.23 19.41 18.80 21/114 13813
> 20.31 19.59 18.89 21/114 13866
> 20.23 19.70 18.97 22/114 13914
> 20.48 19.87 19.07 21/114 13967
> 20.42 19.96 19.16 22/114 14016
> 20.32 20.03 19.23 21/114 14079
> 20.15 20.03 19.28 21/114 14128
> 20.25 20.08 19.34 23/114 14178
> 20.30 20.15 19.41 21/114 14229
> 20.17 20.15 19.45 21/114 14276
> 20.47 20.23 19.52 23/114 14325
> 20.52 20.29 19.58 22/114 14378
> 20.33 20.28 19.62 22/114 14427
> 20.49 20.33 19.68 22/114 14474
> 20.36 20.33 19.72 23/114 14525
> 20.42 20.35 19.76 22/114 14586
> 20.35 20.35 19.80 22/114 14638
> 20.76 20.45 19.87 21/114 14689
> 
> 
> I'm currently in the process of refining how I take these benchmarks
> to gather the most information possible. If anybody has some ideas for
> apache bench or any other tool to do some benchmarking, please pass it
> my way, and I will preform more benchmarks (I plan to duplicate the
> benchmarks on my desktop also.
> 
> 
> --
> --Robert Deaton
> http://somethingunpredictable.com
> 


-- 
--Robert Deaton
http://somethingunpredictable.com
From false.hopes at gmail.com  Wed Jul 13 01:30:25 2005
From: false.hopes at gmail.com (Robert Deaton)
Date: Wed Jul 13 01:30:31 2005
Subject: [wp-hackers] Simple commandline client for wordpress?
In-Reply-To: <42D46B14.2020300@hydramusic.net>
References: <42D46B14.2020300@hydramusic.net>
Message-ID: <a491f91d050712183057e76146@mail.gmail.com>

If you would like a _very_ simple interface and don't mind installing
a plugin to WordPress to achieve it, I have something that could have
an interface easily written for (it uses query strings to pass along
username, password, title, and text, and posts to WP with it. A
commandline client in PHP, Python, or Perl would be extremely easy.

On 7/12/05, Stever <steve@hydramusic.net> wrote:
> I need to post to my wordpress blog with just a simple title and
> messagebody, nothing fancy. I checked
> http://codex.wordpress.org/XML-RPC_Support and it seems that most of the
> links to commandline clients are broken. The one commandline client that
> did seem useful (pyBlogger) doesn't seem to have any community support.
> 
> Anyone here working on a simple commandline client for wordpress?
> 
> - Steve
> 
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
> 


-- 
--Robert Deaton
http://somethingunpredictable.com
From ringmaster at midnightcircus.com  Wed Jul 13 01:30:01 2005
From: ringmaster at midnightcircus.com (Owen Winkler)
Date: Wed Jul 13 01:30:51 2005
Subject: [wp-hackers] Forum post: Huge server hits
In-Reply-To: <022801c58726$d88a0c80$6e01a8c0@sixfour>
References: <003701c58708$08bded00$6702a8c0@DB><42D401DE.2030800@tamba2.org.uk>	<42D42072.5060202@tamba2.org.uk>
	<022801c58726$d88a0c80$6e01a8c0@sixfour>
Message-ID: <42D46E99.4090708@midnightcircus.com>

David Chait wrote:
> (I wrote this before Jason's latest 'data points', which continue to 
> show real-word costs and numbers...)

I took large segments of your post, reworded some things, added a bunch, 
and posted it here:

http://codex.wordpress.org/User:Ringmaster/WordPress_in_High_Traffic

Everyone please edit and extend.

Owen



From false.hopes at gmail.com  Wed Jul 13 01:33:43 2005
From: false.hopes at gmail.com (Robert Deaton)
Date: Wed Jul 13 01:33:47 2005
Subject: [wp-hackers] Forum post: Huge server hits
In-Reply-To: <42D46E99.4090708@midnightcircus.com>
References: <003701c58708$08bded00$6702a8c0@DB>
	<42D401DE.2030800@tamba2.org.uk> <42D42072.5060202@tamba2.org.uk>
	<022801c58726$d88a0c80$6e01a8c0@sixfour>
	<42D46E99.4090708@midnightcircus.com>
Message-ID: <a491f91d0507121833669bcaf3@mail.gmail.com>

Ugh, I'm an idiot, and I forgot to enable the cache before running
that last set of benchmarks, the second mail can be safely ignored..

On 7/12/05, Owen Winkler <ringmaster@midnightcircus.com> wrote:
> David Chait wrote:
> > (I wrote this before Jason's latest 'data points', which continue to
> > show real-word costs and numbers...)
> 
> I took large segments of your post, reworded some things, added a bunch,
> and posted it here:
> 
> http://codex.wordpress.org/User:Ringmaster/WordPress_in_High_Traffic
> 
> Everyone please edit and extend.
> 
> Owen
> 
> 
> 
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
> 


-- 
--Robert Deaton
http://somethingunpredictable.com
From false.hopes at gmail.com  Wed Jul 13 01:45:31 2005
From: false.hopes at gmail.com (Robert Deaton)
Date: Wed Jul 13 01:45:38 2005
Subject: [wp-hackers] Simple commandline client for wordpress?
In-Reply-To: <a491f91d050712183057e76146@mail.gmail.com>
References: <42D46B14.2020300@hydramusic.net>
	<a491f91d050712183057e76146@mail.gmail.com>
Message-ID: <a491f91d05071218453fd733f6@mail.gmail.com>

http://scott.yang.id.au/2002/12/mtsendpy/

I also found that on a quick search for google, which is better than
reinventing the wheel.

On 7/12/05, Robert Deaton <false.hopes@gmail.com> wrote:
> If you would like a _very_ simple interface and don't mind installing
> a plugin to WordPress to achieve it, I have something that could have
> an interface easily written for (it uses query strings to pass along
> username, password, title, and text, and posts to WP with it. A
> commandline client in PHP, Python, or Perl would be extremely easy.
> 
> On 7/12/05, Stever <steve@hydramusic.net> wrote:
> > I need to post to my wordpress blog with just a simple title and
> > messagebody, nothing fancy. I checked
> > http://codex.wordpress.org/XML-RPC_Support and it seems that most of the
> > links to commandline clients are broken. The one commandline client that
> > did seem useful (pyBlogger) doesn't seem to have any community support.
> >
> > Anyone here working on a simple commandline client for wordpress?
> >
> > - Steve
> >
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers@lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> >
> 
> 
> --
> --Robert Deaton
> http://somethingunpredictable.com
> 


-- 
--Robert Deaton
http://somethingunpredictable.com
From ecb29 at cornell.edu  Wed Jul 13 03:05:19 2005
From: ecb29 at cornell.edu (=?UTF-8?B?RWxsaW90dCBCw6Rjaw==?=)
Date: Wed Jul 13 03:05:34 2005
Subject: [wordpress] Re: [wp-hackers] Forum post: Huge server hits
In-Reply-To: <42D46E99.4090708@midnightcircus.com>
References: <003701c58708$08bded00$6702a8c0@DB><42D401DE.2030800@tamba2.org.uk>	<42D42072.5060202@tamba2.org.uk>	<022801c58726$d88a0c80$6e01a8c0@sixfour>
	<42D46E99.4090708@midnightcircus.com>
Message-ID: <42D484EF.6030906@cornell.edu>

It bugged me that WP-cache doesn't detect and send gzip'ed files, but I 
suppose it's purpose is to be fast, not bandwidth-savvy.  I've hacked 
mine up to send gzip....

Thanks,
Elliott C. B?ck

607-229-0623
http://elliottback.com



Owen Winkler wrote:

> David Chait wrote:
>
>> (I wrote this before Jason's latest 'data points', which continue to 
>> show real-word costs and numbers...)
>
>
> I took large segments of your post, reworded some things, added a 
> bunch, and posted it here:
>
> http://codex.wordpress.org/User:Ringmaster/WordPress_in_High_Traffic
>
> Everyone please edit and extend.
>
> Owen
>
>
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
From mx at warpedvisions.org  Wed Jul 13 03:59:10 2005
From: mx at warpedvisions.org (Bruce Alderson)
Date: Wed Jul 13 03:59:16 2005
Subject: [wp-hackers] Simple commandline client for wordpress?
In-Reply-To: <a491f91d050712183057e76146@mail.gmail.com>
References: <42D46B14.2020300@hydramusic.net>
	<a491f91d050712183057e76146@mail.gmail.com>
Message-ID: <42D4918E.2050902@warpedvisions.org>

Robert Deaton wrote:
> If you would like a _very_ simple interface and don't mind installing
> a plugin to WordPress to achieve it, I have something that could have
> an interface easily written for (it uses query strings to pass along
> username, password, title, and text, and posts to WP with it. A
> commandline client in PHP, Python, or Perl would be extremely easy.

You could also use a command-line mailer, and send mail to your WP mail 
address (after enabling it of course).

-- 
Bruce Alderson <mx@warpedvisions.org>
From mark.wordpress at txfx.net  Wed Jul 13 04:19:16 2005
From: mark.wordpress at txfx.net (Mark Jaquith)
Date: Wed Jul 13 04:19:20 2005
Subject: [wordpress] Re: [wp-hackers] Forum post: Huge server hits
In-Reply-To: <42D484EF.6030906@cornell.edu>
References: <003701c58708$08bded00$6702a8c0@DB><42D401DE.2030800@tamba2.org.uk>	<42D42072.5060202@tamba2.org.uk>	<022801c58726$d88a0c80$6e01a8c0@sixfour>	<42D46E99.4090708@midnightcircus.com>
	<42D484EF.6030906@cornell.edu>
Message-ID: <42D49644.40904@txfx.net>

Elliott B?ck wrote:

> It bugged me that WP-cache doesn't detect and send gzip'ed files, but 
> I suppose it's purpose is to be fast, not bandwidth-savvy.  I've 
> hacked mine up to send gzip.... 

No reason that it can't be both!  I don't think gzip takes much 
overhead... at least not from what I've heard.  Care to submit those 
changes as a ticket so that all may benefit?
http://dev.wp-plugins.org/newticket?component=wp-cache
From ecb29 at cornell.edu  Wed Jul 13 04:35:46 2005
From: ecb29 at cornell.edu (=?UTF-8?B?RWxsaW90dCBCw6Rjaw==?=)
Date: Wed Jul 13 04:35:58 2005
Subject: [wordpress] Re: [wp-hackers] Forum post: Huge server hits
In-Reply-To: <42D49644.40904@txfx.net>
References: <003701c58708$08bded00$6702a8c0@DB><42D401DE.2030800@tamba2.org.uk>	<42D42072.5060202@tamba2.org.uk>	<022801c58726$d88a0c80$6e01a8c0@sixfour>	<42D46E99.4090708@midnightcircus.com>	<42D484EF.6030906@cornell.edu>
	<42D49644.40904@txfx.net>
Message-ID: <42D49A22.9090207@cornell.edu>

Done!

http://dev.wp-plugins.org/ticket/215

Thanks,
Elliott C. B?ck

607-229-0623
http://elliottback.com



Mark Jaquith wrote:

> Elliott B?ck wrote:
>
>> It bugged me that WP-cache doesn't detect and send gzip'ed files, but 
>> I suppose it's purpose is to be fast, not bandwidth-savvy.  I've 
>> hacked mine up to send gzip.... 
>
>
> No reason that it can't be both!  I don't think gzip takes much 
> overhead... at least not from what I've heard.  Care to submit those 
> changes as a ticket so that all may benefit?
> http://dev.wp-plugins.org/newticket?component=wp-cache
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
From false.hopes at gmail.com  Wed Jul 13 04:56:47 2005
From: false.hopes at gmail.com (Robert Deaton)
Date: Wed Jul 13 04:56:57 2005
Subject: [wordpress] Re: [wp-hackers] Forum post: Huge server hits
In-Reply-To: <42D49A22.9090207@cornell.edu>
References: <003701c58708$08bded00$6702a8c0@DB>
	<42D401DE.2030800@tamba2.org.uk> <42D42072.5060202@tamba2.org.uk>
	<022801c58726$d88a0c80$6e01a8c0@sixfour>
	<42D46E99.4090708@midnightcircus.com> <42D484EF.6030906@cornell.edu>
	<42D49644.40904@txfx.net> <42D49A22.9090207@cornell.edu>
Message-ID: <a491f91d05071221563e2ccc46@mail.gmail.com>

A better idea, why not cache the gzipped pages also? Lessens server
load AND bandwidth.

On 7/12/05, Elliott B?ck <ecb29@cornell.edu> wrote:
> Done!
> 
> http://dev.wp-plugins.org/ticket/215
> 
> Thanks,
> Elliott C. B?ck
> 
> 607-229-0623
> http://elliottback.com
> 
> 
> 
> Mark Jaquith wrote:
> 
> > Elliott B?ck wrote:
> >
> >> It bugged me that WP-cache doesn't detect and send gzip'ed files, but
> >> I suppose it's purpose is to be fast, not bandwidth-savvy.  I've
> >> hacked mine up to send gzip....
> >
> >
> > No reason that it can't be both!  I don't think gzip takes much
> > overhead... at least not from what I've heard.  Care to submit those
> > changes as a ticket so that all may benefit?
> > http://dev.wp-plugins.org/newticket?component=wp-cache
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers@lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> >
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
> 


-- 
--Robert Deaton
http://somethingunpredictable.com
From ecb29 at cornell.edu  Wed Jul 13 04:58:31 2005
From: ecb29 at cornell.edu (=?ISO-8859-1?Q?Elliott_B=E4ck?=)
Date: Wed Jul 13 04:58:46 2005
Subject: [wordpress] Re: [wp-hackers] Forum post: Huge server hits
In-Reply-To: <a491f91d05071221563e2ccc46@mail.gmail.com>
References: <003701c58708$08bded00$6702a8c0@DB>	<42D401DE.2030800@tamba2.org.uk>
	<42D42072.5060202@tamba2.org.uk>	<022801c58726$d88a0c80$6e01a8c0@sixfour>	<42D46E99.4090708@midnightcircus.com>
	<42D484EF.6030906@cornell.edu>	<42D49644.40904@txfx.net>
	<42D49A22.9090207@cornell.edu>
	<a491f91d05071221563e2ccc46@mail.gmail.com>
Message-ID: <42D49F77.1050800@cornell.edu>

I thought of it, but it's too much work for tonight.  You'd need to keep 
the gzipped and the non-gzipped around anyway....

Thanks,
Elliott C. B?ck

607-229-0623
http://elliottback.com



Robert Deaton wrote:

>A better idea, why not cache the gzipped pages also? Lessens server
>load AND bandwidth.
>
>On 7/12/05, Elliott B?ck <ecb29@cornell.edu> wrote:
>  
>
>>Done!
>>
>>http://dev.wp-plugins.org/ticket/215
>>
>>Thanks,
>>Elliott C. B?ck
>>
>>607-229-0623
>>http://elliottback.com
>>
>>
>>
>>Mark Jaquith wrote:
>>
>>    
>>
>>>Elliott B?ck wrote:
>>>
>>>      
>>>
>>>>It bugged me that WP-cache doesn't detect and send gzip'ed files, but
>>>>I suppose it's purpose is to be fast, not bandwidth-savvy.  I've
>>>>hacked mine up to send gzip....
>>>>        
>>>>
>>>No reason that it can't be both!  I don't think gzip takes much
>>>overhead... at least not from what I've heard.  Care to submit those
>>>changes as a ticket so that all may benefit?
>>>http://dev.wp-plugins.org/newticket?component=wp-cache
>>>_______________________________________________
>>>wp-hackers mailing list
>>>wp-hackers@lists.automattic.com
>>>http://lists.automattic.com/mailman/listinfo/wp-hackers
>>>
>>>      
>>>
>>_______________________________________________
>>wp-hackers mailing list
>>wp-hackers@lists.automattic.com
>>http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
>>    
>>
>
>
>  
>
From false.hopes at gmail.com  Wed Jul 13 06:05:04 2005
From: false.hopes at gmail.com (Robert Deaton)
Date: Wed Jul 13 06:05:14 2005
Subject: [wordpress] Re: [wp-hackers] Forum post: Huge server hits
In-Reply-To: <42D49F77.1050800@cornell.edu>
References: <003701c58708$08bded00$6702a8c0@DB>
	<42D401DE.2030800@tamba2.org.uk> <42D42072.5060202@tamba2.org.uk>
	<022801c58726$d88a0c80$6e01a8c0@sixfour>
	<42D46E99.4090708@midnightcircus.com> <42D484EF.6030906@cornell.edu>
	<42D49644.40904@txfx.net> <42D49A22.9090207@cornell.edu>
	<a491f91d05071221563e2ccc46@mail.gmail.com>
	<42D49F77.1050800@cornell.edu>
Message-ID: <a491f91d05071223052cb5403a@mail.gmail.com>

That's not that big of a deal, a different page is cached for each
version of a query string, a compressed file wouldn't do any more
damage. Besides, storage space is much cheaper than bandwidth. I'll
look into working on a patch later.

On 7/12/05, Elliott B?ck <ecb29@cornell.edu> wrote:
> I thought of it, but it's too much work for tonight.  You'd need to keep
> the gzipped and the non-gzipped around anyway....
> 
> Thanks,
> Elliott C. B?ck
> 
> 607-229-0623
> http://elliottback.com
> 
> 
> 
> Robert Deaton wrote:
> 
> >A better idea, why not cache the gzipped pages also? Lessens server
> >load AND bandwidth.
> >
> >On 7/12/05, Elliott B?ck <ecb29@cornell.edu> wrote:
> >
> >
> >>Done!
> >>
> >>http://dev.wp-plugins.org/ticket/215
> >>
> >>Thanks,
> >>Elliott C. B?ck
> >>
> >>607-229-0623
> >>http://elliottback.com
> >>
> >>
> >>
> >>Mark Jaquith wrote:
> >>
> >>
> >>
> >>>Elliott B?ck wrote:
> >>>
> >>>
> >>>
> >>>>It bugged me that WP-cache doesn't detect and send gzip'ed files, but
> >>>>I suppose it's purpose is to be fast, not bandwidth-savvy.  I've
> >>>>hacked mine up to send gzip....
> >>>>
> >>>>
> >>>No reason that it can't be both!  I don't think gzip takes much
> >>>overhead... at least not from what I've heard.  Care to submit those
> >>>changes as a ticket so that all may benefit?
> >>>http://dev.wp-plugins.org/newticket?component=wp-cache
> >>>_______________________________________________
> >>>wp-hackers mailing list
> >>>wp-hackers@lists.automattic.com
> >>>http://lists.automattic.com/mailman/listinfo/wp-hackers
> >>>
> >>>
> >>>
> >>_______________________________________________
> >>wp-hackers mailing list
> >>wp-hackers@lists.automattic.com
> >>http://lists.automattic.com/mailman/listinfo/wp-hackers
> >>
> >>
> >>
> >
> >
> >
> >
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
> 


-- 
--Robert Deaton
http://somethingunpredictable.com
From davebytes at comcast.net  Wed Jul 13 06:17:54 2005
From: davebytes at comcast.net (David Chait)
Date: Wed Jul 13 06:17:59 2005
Subject: [wordpress] Re: [wp-hackers] Forum post: Huge server hits
References: <003701c58708$08bded00$6702a8c0@DB><42D401DE.2030800@tamba2.org.uk>
	<42D42072.5060202@tamba2.org.uk><022801c58726$d88a0c80$6e01a8c0@sixfour><42D46E99.4090708@midnightcircus.com>
	<42D484EF.6030906@cornell.edu><42D49644.40904@txfx.net>
	<42D49A22.9090207@cornell.edu><a491f91d05071221563e2ccc46@mail.gmail.com><42D49F77.1050800@cornell.edu>
	<a491f91d05071223052cb5403a@mail.gmail.com>
Message-ID: <03a501c58772$9b35c120$6e01a8c0@sixfour>

That's a great idea.

I've left gzip off typically as I've always been told that it IS a 
performance suck on a server -- could be fractional, but fractional * 100000 
== something big. ;)

But cached gzips is something completely different!  Cool!

-d

----- Original Message ----- 
From: "Robert Deaton" <false.hopes@gmail.com>
To: <wp-hackers@lists.automattic.com>
Sent: Wednesday, July 13, 2005 2:05 AM
Subject: Re: [wordpress] Re: [wp-hackers] Forum post: Huge server hits


That's not that big of a deal, a different page is cached for each
version of a query string, a compressed file wouldn't do any more
damage. Besides, storage space is much cheaper than bandwidth. I'll
look into working on a patch later.

On 7/12/05, Elliott B?ck <ecb29@cornell.edu> wrote:
> I thought of it, but it's too much work for tonight.  You'd need to keep
> the gzipped and the non-gzipped around anyway....
>
> Robert Deaton wrote:
>
> >A better idea, why not cache the gzipped pages also? Lessens server
> >load AND bandwidth.
> > 

From davebytes at comcast.net  Wed Jul 13 06:18:30 2005
From: davebytes at comcast.net (David Chait)
Date: Wed Jul 13 06:18:33 2005
Subject: [wp-hackers] Forum post: Huge server hits
References: <003701c58708$08bded00$6702a8c0@DB><42D401DE.2030800@tamba2.org.uk>	<42D42072.5060202@tamba2.org.uk><022801c58726$d88a0c80$6e01a8c0@sixfour>
	<42D46E99.4090708@midnightcircus.com>
Message-ID: <03ad01c58772$b0256770$6e01a8c0@sixfour>

That'll teach me to open my big mouth. ;)

-d

----- Original Message ----- 
From: "Owen Winkler" <ringmaster@midnightcircus.com>
> David Chait wrote:
>> (I wrote this before Jason's latest 'data points', which continue to 
>> show real-word costs and numbers...)
> 
> I took large segments of your post, reworded some things, added a bunch, 
> and posted it here:
> 
> http://codex.wordpress.org/User:Ringmaster/WordPress_in_High_Traffic
> 
> Everyone please edit and extend.
> 
> Owen
> 
From m at mullenweg.com  Wed Jul 13 06:23:25 2005
From: m at mullenweg.com (Matthew Mullenweg)
Date: Wed Jul 13 06:23:26 2005
Subject: [wp-hackers] Forum post: Huge server hits
In-Reply-To: <42D46E99.4090708@midnightcircus.com>
References: <003701c58708$08bded00$6702a8c0@DB><42D401DE.2030800@tamba2.org.uk>	<42D42072.5060202@tamba2.org.uk>	<022801c58726$d88a0c80$6e01a8c0@sixfour>
	<42D46E99.4090708@midnightcircus.com>
Message-ID: <42D4B35D.2000100@mullenweg.com>

Owen Winkler wrote:
> I took large segments of your post, reworded some things, added a bunch, 
> and posted it here:
> 
> http://codex.wordpress.org/User:Ringmaster/WordPress_in_High_Traffic
> 
> Everyone please edit and extend.

I think it makes sense to put things in order of practicality. It's much 
easier to use gzip or install a caching plugin than changing your 
network interface or bandwidth peering arrangements. I *seriously* doubt 
that anyone who has asked about this in the forums was running into 
network card limitations.

-- 
Matt Mullenweg
  http://photomatt.net | http://wordpress.org
http://pingomatic.com | http://cnet.com
From ecb29 at cornell.edu  Wed Jul 13 06:30:42 2005
From: ecb29 at cornell.edu (=?UTF-8?B?RWxsaW90dCBCw6Rjaw==?=)
Date: Wed Jul 13 06:30:53 2005
Subject: [wordpress] Re: [wp-hackers] Forum post: Huge server hits
In-Reply-To: <42D4B35D.2000100@mullenweg.com>
References: <003701c58708$08bded00$6702a8c0@DB><42D401DE.2030800@tamba2.org.uk>	<42D42072.5060202@tamba2.org.uk>	<022801c58726$d88a0c80$6e01a8c0@sixfour>	<42D46E99.4090708@midnightcircus.com>
	<42D4B35D.2000100@mullenweg.com>
Message-ID: <42D4B512.5040509@cornell.edu>

I used up 90 GB of bandwidth yesterday:

90,000 mb / 24 hours * 1 hr / 60 min * 1 min / 60 s = 1.04 MB/s = 8.33 Mb/s

That's saturation level on older cards.  Since my machine is a shared 
host, it was probably getting hammered pretty hard overall...

Thanks,
Elliott C. B?ck

607-229-0623
http://elliottback.com



Matthew Mullenweg wrote:

> Owen Winkler wrote:
>
>> I took large segments of your post, reworded some things, added a 
>> bunch, and posted it here:
>>
>> http://codex.wordpress.org/User:Ringmaster/WordPress_in_High_Traffic
>>
>> Everyone please edit and extend.
>
>
> I think it makes sense to put things in order of practicality. It's 
> much easier to use gzip or install a caching plugin than changing your 
> network interface or bandwidth peering arrangements. I *seriously* 
> doubt that anyone who has asked about this in the forums was running 
> into network card limitations.
>
From r at schestowitz.com  Wed Jul 13 06:38:48 2005
From: r at schestowitz.com (Roy Schestowitz)
Date: Wed Jul 13 06:39:00 2005
Subject: [wordpress] Re: [wp-hackers] Forum post: Huge server hits
In-Reply-To: <42D4B512.5040509@cornell.edu>
References: <003701c58708$08bded00$6702a8c0@DB><42D401DE.2030800@tamba2.org.uk>
	<42D42072.5060202@tamba2.org.uk>
	<022801c58726$d88a0c80$6e01a8c0@sixfour>
	<42D46E99.4090708@midnightcircus.com> <42D4B35D.2000100@mullenweg.com>
	<42D4B512.5040509@cornell.edu>
Message-ID: <20050713073848.94kn3yxqnwcg8kgg@banana.catalyst2.com>

Quoting Elliott B?ck <ecb29@cornell.edu>:

> I used up 90 GB of bandwidth yesterday:
>
> 90,000 mb / 24 hours * 1 hr / 60 min * 1 min / 60 s = 1.04 MB/s = 8.33 Mb/s
>
> That's saturation level on older cards.  Since my machine is a shared
> host, it was probably getting hammered pretty hard overall...
>
> Thanks,
> Elliott C. B?ck
>
> 607-229-0623
> http://elliottback.com

Oh, dear! Well done.

When I got Slashdotted it was not even remotely similar, perhaps 
because it was
Sunday and was purely Palm-related.

It is unlikely that your hosts will vent their anger for high bandwidth 
provided
you do not share large media files. Strong players reflect well on the 
hosts and
often get forced to upgrade to costly premium packages.

Roy

-- 
Roy S. Schestowitz
http://Schestowitz.com

From m at mullenweg.com  Wed Jul 13 06:40:47 2005
From: m at mullenweg.com (Matthew Mullenweg)
Date: Wed Jul 13 06:40:49 2005
Subject: [wordpress] Re: [wp-hackers] Forum post: Huge server hits
In-Reply-To: <42D4B512.5040509@cornell.edu>
References: <003701c58708$08bded00$6702a8c0@DB><42D401DE.2030800@tamba2.org.uk>	<42D42072.5060202@tamba2.org.uk>	<022801c58726$d88a0c80$6e01a8c0@sixfour>	<42D46E99.4090708@midnightcircus.com>	<42D4B35D.2000100@mullenweg.com>
	<42D4B512.5040509@cornell.edu>
Message-ID: <42D4B76F.5060605@mullenweg.com>

Elliott B?ck wrote:
> I used up 90 GB of bandwidth yesterday:
> 
> 90,000 mb / 24 hours * 1 hr / 60 min * 1 min / 60 s = 1.04 MB/s = 8.33 Mb/s
> 
> That's saturation level on older cards.  Since my machine is a shared 
> host, it was probably getting hammered pretty hard overall...

If you were doing 90 GB of weblog text, it'd be a WP issue, but I'm 
guessing (correct me if I'm wrong) that the bulk of that bandwidth is 
due to multimedia files like the longhorn screenshots you're hosting, 
not gzipped HTML. I would characterize your situation as atypical.

-- 
Matt Mullenweg
  http://photomatt.net | http://wordpress.org
http://pingomatic.com | http://cnet.com
From r at schestowitz.com  Wed Jul 13 06:46:20 2005
From: r at schestowitz.com (Roy Schestowitz)
Date: Wed Jul 13 06:46:29 2005
Subject: [wp-hackers] Forum post: Huge server hits
In-Reply-To: <42D4B35D.2000100@mullenweg.com>
References: <003701c58708$08bded00$6702a8c0@DB><42D401DE.2030800@tamba2.org.uk>
	<42D42072.5060202@tamba2.org.uk>
	<022801c58726$d88a0c80$6e01a8c0@sixfour>
	<42D46E99.4090708@midnightcircus.com> <42D4B35D.2000100@mullenweg.com>
Message-ID: <20050713074620.9dshcgy04ls8gs4c@banana.catalyst2.com>

Quoting Matthew Mullenweg <m@mullenweg.com>:

> Owen Winkler wrote:
>> I took large segments of your post, reworded some things, added a 
>> bunch, and posted it here:
>>
>> http://codex.wordpress.org/User:Ringmaster/WordPress_in_High_Traffic
>>
>> Everyone please edit and extend.
>
> I think it makes sense to put things in order of practicality. It's much
> easier to use gzip or install a caching plugin than changing your
> network interface or bandwidth peering arrangements. I *seriously* doubt
> that anyone who has asked about this in the forums was running into
> network card limitations.

Peering arrangements are a good idea, but compression will not deal with
increase that scales by orders of magnitude. Network card limitations are very
hard to meet. Many dedicated server come with dual Gigabit Ethernet
cores. Even Slashdot cannot beat that in terms of bandwidth unless Tiger for
Intel architecture is up for grabs. If Slashdotted sites go doolaly, you can
always use the Network Mirror provided that you don't need very much browsing
depth.

http://www.networkmirror.com/

Roy

-- 
Roy S. Schestowitz
http://Schestowitz.com

From ecb29 at cornell.edu  Wed Jul 13 06:55:17 2005
From: ecb29 at cornell.edu (=?UTF-8?B?RWxsaW90dCBCw6Rjaw==?=)
Date: Wed Jul 13 06:55:37 2005
Subject: [wordpress] Re: [wp-hackers] Forum post: Huge server hits
In-Reply-To: <42D4B76F.5060605@mullenweg.com>
References: <003701c58708$08bded00$6702a8c0@DB><42D401DE.2030800@tamba2.org.uk>	<42D42072.5060202@tamba2.org.uk>	<022801c58726$d88a0c80$6e01a8c0@sixfour>	<42D46E99.4090708@midnightcircus.com>	<42D4B35D.2000100@mullenweg.com>	<42D4B512.5040509@cornell.edu>
	<42D4B76F.5060605@mullenweg.com>
Message-ID: <42D4BAD5.5090601@cornell.edu>

Yup, bingo!  Imagine my horror to wake up to 50,000 hits on a page where 
I was serving 1024x768 pngs... needless to say I jpeded them immediately....

Thanks,
Elliott C. B?ck

607-229-0623
http://elliottback.com



Matthew Mullenweg wrote:

> Elliott B?ck wrote:
>
>> I used up 90 GB of bandwidth yesterday:
>>
>> 90,000 mb / 24 hours * 1 hr / 60 min * 1 min / 60 s = 1.04 MB/s = 
>> 8.33 Mb/s
>>
>> That's saturation level on older cards.  Since my machine is a shared 
>> host, it was probably getting hammered pretty hard overall...
>
>
> If you were doing 90 GB of weblog text, it'd be a WP issue, but I'm 
> guessing (correct me if I'm wrong) that the bulk of that bandwidth is 
> due to multimedia files like the longhorn screenshots you're hosting, 
> not gzipped HTML. I would characterize your situation as atypical.
>
From john at sinteur.com  Wed Jul 13 07:27:20 2005
From: john at sinteur.com (John Sinteur)
Date: Wed Jul 13 07:27:25 2005
Subject: [wordpress] Re: [wp-hackers] Forum post: Huge server hits
In-Reply-To: <42D4B512.5040509@cornell.edu>
References: <003701c58708$08bded00$6702a8c0@DB>
	<42D401DE.2030800@tamba2.org.uk> <42D42072.5060202@tamba2.org.uk>
	<022801c58726$d88a0c80$6e01a8c0@sixfour>
	<42D46E99.4090708@midnightcircus.com>
	<42D4B35D.2000100@mullenweg.com> <42D4B512.5040509@cornell.edu>
Message-ID: <C0918048-9B96-4E1B-B710-7D7716DA6BF2@sinteur.com>


On Jul 13, 2005, at 8:30 AM, Elliott B?ck wrote:


> I used up 90 GB of bandwidth yesterday:
>
> 90,000 mb / 24 hours * 1 hr / 60 min * 1 min / 60 s = 1.04 MB/s =  
> 8.33 Mb/s
>
> That's saturation level on older cards.  Since my machine is a  
> shared host, it was probably getting hammered pretty hard overall...
>
>


I guess that's indeed the images - but if you could add your  
experiences, with a description of what the pages looked like and  
where to bandwidth went, and a description of the hardware involved,  
to the codex, it would go a long way to answering a lot of questions.  
If you could run analog on the webserverlogs to see what files were  
hit most, you've got a great experience for the codex...

-John
From ringmaster at midnightcircus.com  Wed Jul 13 10:58:29 2005
From: ringmaster at midnightcircus.com (Owen Winkler)
Date: Wed Jul 13 10:59:23 2005
Subject: [wp-hackers] Forum post: Huge server hits
In-Reply-To: <42D4B35D.2000100@mullenweg.com>
References: <003701c58708$08bded00$6702a8c0@DB><42D401DE.2030800@tamba2.org.uk>	<42D42072.5060202@tamba2.org.uk>	<022801c58726$d88a0c80$6e01a8c0@sixfour>	<42D46E99.4090708@midnightcircus.com>
	<42D4B35D.2000100@mullenweg.com>
Message-ID: <42D4F3D5.7070903@midnightcircus.com>

Matthew Mullenweg wrote:
> Owen Winkler wrote:
>> http://codex.wordpress.org/User:Ringmaster/WordPress_in_High_Traffic
> 
> I think it makes sense to put things in order of practicality. It's much 
> easier to use gzip or install a caching plugin than changing your 
> network interface or bandwidth peering arrangements. I *seriously* doubt 
> that anyone who has asked about this in the forums was running into 
> network card limitations.

Absolutely true.  I was just making an effort to centralize things 
rather than leave this whole topic to languish in the mailing list archives.

Clearly, the configuration issues are more relevant to the questions in 
the forums.  But nobody's really summarized that too well yet...

Owen




From p.a.r.a.s.e.w at gmx.net  Wed Jul 13 15:09:20 2005
From: p.a.r.a.s.e.w at gmx.net (Matthias Tarasiewicz)
Date: Wed Jul 13 15:08:33 2005
Subject: [wp-hackers] Simple commandline client for wordpress?
In-Reply-To: <42D46B14.2020300@hydramusic.net>
References: <42D46B14.2020300@hydramusic.net>
Message-ID: <6DA474B2-A930-48E7-A6D9-77EF2316FFB9@gmx.net>

hi steve,
i recently did a small commandline client for wordpress based on The  
Incutio XML-RPC Library for PHP
find the library here: http://scripts.incutio.com/xmlrpc/

i used php-cli as shell-interpreter: http://php.net/features.commandline

a script that posts to your wordpress blog would then look like this:

include("./IXR_Library.inc.php");
$client = new IXR_Client('http://yoursite.com/xmlrpc.php');
$client->query('blogger.newPost','','','username','pass','content',1);

you can use different XMLRPC APIs, i found blogger the most easy one  
to use.

greetings,
matthias


On 13 Jul 2005, at 03:15, Stever wrote:

> I need to post to my wordpress blog with just a simple title and  
> messagebody, nothing fancy. I checked http://codex.wordpress.org/ 
> XML-RPC_Support and it seems that most of the links to commandline  
> clients are broken. The one commandline client that did seem useful  
> (pyBlogger) doesn't seem to have any community support.
>
> Anyone here working on a simple commandline client for wordpress?
>
> - Steve
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
>

From mrbill at gmail.com  Wed Jul 13 15:10:41 2005
From: mrbill at gmail.com (Bill Bradford)
Date: Wed Jul 13 15:11:44 2005
Subject: [wordpress] Re: [wp-hackers] Forum post: Huge server hits
In-Reply-To: <42D4BAD5.5090601@cornell.edu>
References: <003701c58708$08bded00$6702a8c0@DB>
	<42D401DE.2030800@tamba2.org.uk> <42D42072.5060202@tamba2.org.uk>
	<022801c58726$d88a0c80$6e01a8c0@sixfour>
	<42D46E99.4090708@midnightcircus.com> <42D4B35D.2000100@mullenweg.com>
	<42D4B512.5040509@cornell.edu> <42D4B76F.5060605@mullenweg.com>
	<42D4BAD5.5090601@cornell.edu>
Message-ID: <22197e1d05071308106adbac46@mail.gmail.com>

On 7/13/05, Elliott B?ck <ecb29@cornell.edu> wrote:
> Yup, bingo!  Imagine my horror to wake up to 50,000 hits on a page where
> I was serving 1024x768 pngs... needless to say I jpeded them immediately....

(offtopic) apache mod_bandwidth is your friend as well 8-)

Bill
From davebytes at comcast.net  Wed Jul 13 15:18:49 2005
From: davebytes at comcast.net (David Chait)
Date: Wed Jul 13 15:18:53 2005
Subject: [wp-hackers] Forum post: Huge server hits
References: <003701c58708$08bded00$6702a8c0@DB><42D401DE.2030800@tamba2.org.uk>	<42D42072.5060202@tamba2.org.uk>	<022801c58726$d88a0c80$6e01a8c0@sixfour>	<42D46E99.4090708@midnightcircus.com><42D4B35D.2000100@mullenweg.com>
	<42D4F3D5.7070903@midnightcircus.com>
Message-ID: <004601c587be$2b5fecd0$6e01a8c0@sixfour>

I don't have time in the next week, but after that I'm happy to assist in 
formatting & 'dumbing down' if others get content together.

I agree - a discussion of things like:
- posts per page (lower is better)
- content on the page (images mainly)
- don't forget the sidebar (generating certain elements could be heavy)
- issues with high-computation plugins (some archive plugins, some of the 
match-and-replace plugins, etc.)
- plugins that enable their own internal caching (some good, like CG-Amazon 
or CG-FeedRead not re-grabbing stuff every pageload, versus some potentially 
'not good', like caching gravatars locally means you take on graphics 
loading you don't need...)
- staticizing/meta-caching plugins (wp-cache for current gen, 
staticize-reloaded for older wp)
... is a good start.

Then there's technical discussions of things like:
- apache, mysql configuration for optimal performance, based on maybe two 
'types' of sites?
- mysql query caching details, implementation approach
- if you own your machine, add more RAM. ;)
- lighttpd, thttpd, in some cases just serving images, in some cases 
replacing apache
... etc.

-d

----- Original Message ----- 
From: "Owen Winkler" <ringmaster@midnightcircus.com>
To: <wp-hackers@lists.automattic.com>
Sent: Wednesday, July 13, 2005 6:58 AM
Subject: Re: [wp-hackers] Forum post: Huge server hits


> Matthew Mullenweg wrote:
>> Owen Winkler wrote:
>>> http://codex.wordpress.org/User:Ringmaster/WordPress_in_High_Traffic
>>
>> I think it makes sense to put things in order of practicality. It's much 
>> easier to use gzip or install a caching plugin than changing your network 
>> interface or bandwidth peering arrangements. I *seriously* doubt that 
>> anyone who has asked about this in the forums was running into network 
>> card limitations.
>
> Absolutely true.  I was just making an effort to centralize things rather 
> than leave this whole topic to languish in the mailing list archives.
>
> Clearly, the configuration issues are more relevant to the questions in 
> the forums.  But nobody's really summarized that too well yet...
>
> Owen
>
>
>
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
> 

From mark at wltc.net  Wed Jul 13 15:25:05 2005
From: mark at wltc.net (Mark Ghosh)
Date: Wed Jul 13 15:25:20 2005
Subject: [wordpress] Re: [wp-hackers] Forum post: Huge server hits
In-Reply-To: <22197e1d05071308106adbac46@mail.gmail.com>
References: <003701c58708$08bded00$6702a8c0@DB>	<42D401DE.2030800@tamba2.org.uk>
	<42D42072.5060202@tamba2.org.uk>	<022801c58726$d88a0c80$6e01a8c0@sixfour>	<42D46E99.4090708@midnightcircus.com>
	<42D4B35D.2000100@mullenweg.com>	<42D4B512.5040509@cornell.edu>
	<42D4B76F.5060605@mullenweg.com>	<42D4BAD5.5090601@cornell.edu>
	<22197e1d05071308106adbac46@mail.gmail.com>
Message-ID: <42D53251.8010009@wltc.net>

Can we, as a group, establish some benchmark guidelines and then, 
according to those guidelines, provide benchmarks from our own servers 
with our live blogs? This would give everyone a chance to weigh in, 
provide real world metrics and might be useful in the long run.

Anyone willing to be the torch bearer on this one (be responisble for 
maintaining the guidelines and the data)?

I can dig up (I think) the apachebench script that I had used to 
bechmark WP-Cache at one time.

Mark


From ryan at boren.nu  Wed Jul 13 16:08:50 2005
From: ryan at boren.nu (Ryan Boren)
Date: Wed Jul 13 16:08:58 2005
Subject: [wp-hackers] User Capabilities
In-Reply-To: <1121183730.15653.10.camel@portnoy.fuzzybelly.org>
References: <1120196075.7972.0.camel@portnoy.fuzzybelly.org>
	<012601c58245$7d2de040$6402a8c0@DELL8600>
	<42CC0A48.8080905@midnightcircus.com>
	<1120796682.3844.165.camel@portnoy.fuzzybelly.org>
	<42CE9769.80702@midnightcircus.com>
	<42572.64.101.146.91.1120854503.squirrel@webmail.barclay.textdrive.com>
	<1120858481.12652.17.camel@portnoy.fuzzybelly.org>
	<1120928406.22248.7.camel@portnoy.fuzzybelly.org>
	<42D0C8EA.1020801@midnightcircus.com>
	<1121016327.22248.17.camel@portnoy.fuzzybelly.org>
	<42D16B55.8090806@midnightcircus.com>
	<1121032835.22248.24.camel@portnoy.fuzzybelly.org>
	<1121033516.22248.33.camel@portnoy.fuzzybelly.org>
	<42D1A08E.8020800@mullenweg.com>
	<1121034897.22248.40.camel@portnoy.fuzzybelly.org>
	<42D1B41B.8020506@mullenweg.com> <42D1B4C3.7090001@skippy.net>
	<42D20D2A.3090700@mullenweg.com>
	<1121090744.17612.62.camel@portnoy.fuzzybelly.org>
	<42D29CD6.1030102@midnightcircus.com>
	<1121122187.17612.67.camel@portnoy.fuzzybelly.org>
	<42D3492E.7080007@midnightcircus.com>
	<1121183730.15653.10.camel@portnoy.fuzzybelly.org>
Message-ID: <1121270930.15653.59.camel@portnoy.fuzzybelly.org>

I went forth and moved the menus from levels to caps.

http://trac.wordpress.org/changeset/2705

Take a look at the caps assigned to each menu and propose any cap
changes or additions you think useful.

Ryan

From mikea at turbonet.com  Wed Jul 13 18:00:56 2005
From: mikea at turbonet.com (Michael D Adams)
Date: Wed Jul 13 17:59:47 2005
Subject: [wp-hackers] User Capabilities
In-Reply-To: <1121183730.15653.10.camel@portnoy.fuzzybelly.org>
References: <1120196075.7972.0.camel@portnoy.fuzzybelly.org>
	<012601c58245$7d2de040$6402a8c0@DELL8600>
	<42CC0A48.8080905@midnightcircus.com>
	<1120796682.3844.165.camel@portnoy.fuzzybelly.org>
	<42CE9769.80702@midnightcircus.com>
	<42572.64.101.146.91.1120854503.squirrel@webmail.barclay.textdrive.com>
	<1120858481.12652.17.camel@portnoy.fuzzybelly.org>
	<1120928406.22248.7.camel@portnoy.fuzzybelly.org>
	<42D0C8EA.1020801@midnightcircus.com>
	<1121016327.22248.17.camel@portnoy.fuzzybelly.org>
	<42D16B55.8090806@midnightcircus.com>
	<1121032835.22248.24.camel@portnoy.fuzzybelly.org>
	<1121033516.22248.33.camel@portnoy.fuzzybelly.org>
	<42D1A08E.8020800@mullenweg.com>
	<1121034897.22248.40.camel@portnoy.fuzzybelly.org>
	<42D1B41B.8020506@mullenweg.com> <42D1B4C3.7090001@skippy.net>
	<42D20D2A.3090700@mullenweg.com>
	<1121090744.17612.62.camel@portnoy.fuzzybelly.org>
	<42D29CD6.1030102@midnightcircus.com>
	<1121122187.17612.67.camel@portnoy.fuzzybelly.org>
	<42D3492E.7080007@midnightcircus.com> <1
	121183730.15653.10.camel@portnoy.fuzzybelly.org>
Message-ID: <CF5B2693-6BF6-42C0-AEB2-EC61C3B198B9@turbonet.com>

On Jul 12, 2005, at 8:55 AM, Ryan Boren wrote:
> Let the quibbling begin.

Currently $wp_roles is set essentially at the end of wp- 
settings.php.  This can cause problems for plugins using hooks that  
have already been called by that point:

'option_*' filters
'core_files_loaded' action
anything in wp_cache_postload()
'plugins_loaded' action
'template' filter
'theme_root' filter
'template_directory' filter
'locale' filter
(and anything in my-hacks.php)

And any others I missed (I just gave things a quick glance).

For example, Ryan's Preview Theme plugin calls get_currentuserinfo()  
during the 'template' filter, and get_currentuserinfo() needs global  
$wp_roles around when creating the new $current_user object.

How far up should $wp_roles go?  Putting it straight after the  
capabilities.php include doesn't *seem* to break anything, and there  
are no hooks used before that point.

--Michael

From jbainbridge at gmail.com  Wed Jul 13 19:07:06 2005
From: jbainbridge at gmail.com (Jason Bainbridge)
Date: Wed Jul 13 19:07:15 2005
Subject: [wp-hackers] User Capabilities
In-Reply-To: <CF5B2693-6BF6-42C0-AEB2-EC61C3B198B9@turbonet.com>
References: <1120196075.7972.0.camel@portnoy.fuzzybelly.org>
	<42D1B41B.8020506@mullenweg.com> <42D1B4C3.7090001@skippy.net>
	<42D20D2A.3090700@mullenweg.com>
	<1121090744.17612.62.camel@portnoy.fuzzybelly.org>
	<42D29CD6.1030102@midnightcircus.com>
	<1121122187.17612.67.camel@portnoy.fuzzybelly.org>
	<42D3492E.7080007@midnightcircus.com>
	<1121183730.15653.10.camel@portnoy.fuzzybelly.org>
	<CF5B2693-6BF6-42C0-AEB2-EC61C3B198B9@turbonet.com>
Message-ID: <d6491f4805071312074ea822e5@mail.gmail.com>

On 7/13/05, Michael D Adams <mikea@turbonet.com> wrote:
> On Jul 12, 2005, at 8:55 AM, Ryan Boren wrote:
> > Let the quibbling begin.
> 
> Currently $wp_roles is set essentially at the end of wp-
> settings.php.  This can cause problems for plugins using hooks that
> have already been called by that point:
> 
> 'option_*' filters
> 'core_files_loaded' action
> anything in wp_cache_postload()
> 'plugins_loaded' action
> 'template' filter
> 'theme_root' filter
> 'template_directory' filter
> 'locale' filter
> (and anything in my-hacks.php)
> 
> And any others I missed (I just gave things a quick glance).
> 
> For example, Ryan's Preview Theme plugin calls get_currentuserinfo()
> during the 'template' filter, and get_currentuserinfo() needs global
> $wp_roles around when creating the new $current_user object.

Ah so that was what was happening on my site! I have Ryan's Preview
Theme plugin enabled, which was causing $wp_roles to not get populated
due to the above so I moved the setting of $wp_roles to the suggested
location and now everything is working fine.

Although somewhere along the line I had lost user_level from wp_users
so I had to add that back in to get wp_capabilities set in wp_usermeta
by the upgrader before I got to the stage of discovvering the
$wp_roles problem, living on the bleeding edge is fun. :)

Cheers,
-- 
Jason Bainbridge
http://kde.org - webmaster@kde.org
Personal Site - http://jasonbainbridge.com
From ryan at boren.nu  Wed Jul 13 19:31:42 2005
From: ryan at boren.nu (Ryan Boren)
Date: Wed Jul 13 19:31:51 2005
Subject: [wp-hackers] User Capabilities
In-Reply-To: <d6491f4805071312074ea822e5@mail.gmail.com>
References: <1120196075.7972.0.camel@portnoy.fuzzybelly.org>
	<42D1B41B.8020506@mullenweg.com> <42D1B4C3.7090001@skippy.net>
	<42D20D2A.3090700@mullenweg.com>
	<1121090744.17612.62.camel@portnoy.fuzzybelly.org>
	<42D29CD6.1030102@midnightcircus.com>
	<1121122187.17612.67.camel@portnoy.fuzzybelly.org>
	<42D3492E.7080007@midnightcircus.com>
	<1121183730.15653.10.camel@portnoy.fuzzybelly.org>
	<CF5B2693-6BF6-42C0-AEB2-EC61C3B198B9@turbonet.com>
	<d6491f4805071312074ea822e5@mail.gmail.com>
Message-ID: <1121283102.15653.62.camel@portnoy.fuzzybelly.org>

On Wed, 2005-07-13 at 14:07 -0500, Jason Bainbridge wrote:
> On 7/13/05, Michael D Adams <mikea@turbonet.com> wrote:
> > On Jul 12, 2005, at 8:55 AM, Ryan Boren wrote:
> > > Let the quibbling begin.
> > 
> > Currently $wp_roles is set essentially at the end of wp-
> > settings.php.  This can cause problems for plugins using hooks that
> > have already been called by that point:
> > 
> > 'option_*' filters
> > 'core_files_loaded' action
> > anything in wp_cache_postload()
> > 'plugins_loaded' action
> > 'template' filter
> > 'theme_root' filter
> > 'template_directory' filter
> > 'locale' filter
> > (and anything in my-hacks.php)
> > 
> > And any others I missed (I just gave things a quick glance).
> > 
> > For example, Ryan's Preview Theme plugin calls get_currentuserinfo()
> > during the 'template' filter, and get_currentuserinfo() needs global
> > $wp_roles around when creating the new $current_user object.
> 
> Ah so that was what was happening on my site! I have Ryan's Preview
> Theme plugin enabled, which was causing $wp_roles to not get populated
> due to the above so I moved the setting of $wp_roles to the suggested
> location and now everything is working fine.

http://trac.wordpress.org/changeset/2706

I rearranged the load order a bit.  That should patch things over for
now.

> Although somewhere along the line I had lost user_level from wp_users
> so I had to add that back in to get wp_capabilities set in wp_usermeta
> by the upgrader before I got to the stage of discovvering the
> $wp_roles problem, living on the bleeding edge is fun. :)

user_level has been purposely moved from users to usermeta.  However, I
think we're deleting user_level from users first and then later trying
to use it when setting up the roles and migrating to usermeta.  We need
to look into that.

Ryan

From jbainbridge at gmail.com  Wed Jul 13 19:44:31 2005
From: jbainbridge at gmail.com (Jason Bainbridge)
Date: Wed Jul 13 19:44:36 2005
Subject: [wp-hackers] User Capabilities
In-Reply-To: <1121283102.15653.62.camel@portnoy.fuzzybelly.org>
References: <1120196075.7972.0.camel@portnoy.fuzzybelly.org>
	<42D20D2A.3090700@mullenweg.com>
	<1121090744.17612.62.camel@portnoy.fuzzybelly.org>
	<42D29CD6.1030102@midnightcircus.com>
	<1121122187.17612.67.camel@portnoy.fuzzybelly.org>
	<42D3492E.7080007@midnightcircus.com>
	<1121183730.15653.10.camel@portnoy.fuzzybelly.org>
	<CF5B2693-6BF6-42C0-AEB2-EC61C3B198B9@turbonet.com>
	<d6491f4805071312074ea822e5@mail.gmail.com>
	<1121283102.15653.62.camel@portnoy.fuzzybelly.org>
Message-ID: <d6491f48050713124458f71d36@mail.gmail.com>

On 7/13/05, Ryan Boren <ryan@boren.nu> wrote:
> On Wed, 2005-07-13 at 14:07 -0500, Jason Bainbridge wrote:
> > On 7/13/05, Michael D Adams <mikea@turbonet.com> wrote:
> > > On Jul 12, 2005, at 8:55 AM, Ryan Boren wrote:
> > > > Let the quibbling begin.
> > >
> > > Currently $wp_roles is set essentially at the end of wp-
> > > settings.php.  This can cause problems for plugins using hooks that
> > > have already been called by that point:
> > >
> > > 'option_*' filters
> > > 'core_files_loaded' action
> > > anything in wp_cache_postload()
> > > 'plugins_loaded' action
> > > 'template' filter
> > > 'theme_root' filter
> > > 'template_directory' filter
> > > 'locale' filter
> > > (and anything in my-hacks.php)
> > >
> > > And any others I missed (I just gave things a quick glance).
> > >
> > > For example, Ryan's Preview Theme plugin calls get_currentuserinfo()
> > > during the 'template' filter, and get_currentuserinfo() needs global
> > > $wp_roles around when creating the new $current_user object.
> >
> > Ah so that was what was happening on my site! I have Ryan's Preview
> > Theme plugin enabled, which was causing $wp_roles to not get populated
> > due to the above so I moved the setting of $wp_roles to the suggested
> > location and now everything is working fine.
> 
> http://trac.wordpress.org/changeset/2706
> 
> I rearranged the load order a bit.  That should patch things over for
> now.

Seems to do the trick. :)

However I noticed that some of the plugin menu item entries like Spam
Karma 2 under Options and Polaroidonizer under Dashboard no longer
display after going from changeset 2702 to 2706, but TextControl
Config & WP Plugin Mgr still appear under Options. Any ideas off the
top of your head on what would case that? If not I'll have a dig and
familiarise myself with more of the WP internals.

Cheers,
-- 
Jason Bainbridge
http://kde.org - webmaster@kde.org
Personal Site - http://jasonbainbridge.com
From ringmaster at midnightcircus.com  Wed Jul 13 19:52:53 2005
From: ringmaster at midnightcircus.com (Owen Winkler)
Date: Wed Jul 13 19:48:58 2005
Subject: [wp-hackers] User Capabilities
In-Reply-To: <1121283102.15653.62.camel@portnoy.fuzzybelly.org>
References: <1120196075.7972.0.camel@portnoy.fuzzybelly.org>	<42D1B41B.8020506@mullenweg.com>
	<42D1B4C3.7090001@skippy.net>	<42D20D2A.3090700@mullenweg.com>	<1121090744.17612.62.camel@portnoy.fuzzybelly.org>	<42D29CD6.1030102@midnightcircus.com>	<1121122187.17612.67.camel@portnoy.fuzzybelly.org>	<42D3492E.7080007@midnightcircus.com>	<1121183730.15653.10.camel@portnoy.fuzzybelly.org>	<CF5B2693-6BF6-42C0-AEB2-EC61C3B198B9@turbonet.com>	<d6491f4805071312074ea822e5@mail.gmail.com>
	<1121283102.15653.62.camel@portnoy.fuzzybelly.org>
Message-ID: <42D57115.9060003@midnightcircus.com>

Ryan Boren wrote:
> user_level has been purposely moved from users to usermeta.  However, I
> think we're deleting user_level from users first and then later trying
> to use it when setting up the roles and migrating to usermeta.  We need
> to look into that.

I put a patch for this in Trac yesterday.
http://trac.wordpress.org/ticket/1505

Owen
From ryan at boren.nu  Wed Jul 13 19:51:21 2005
From: ryan at boren.nu (Ryan Boren)
Date: Wed Jul 13 19:51:25 2005
Subject: [wp-hackers] User Capabilities
In-Reply-To: <d6491f48050713124458f71d36@mail.gmail.com>
References: <1120196075.7972.0.camel@portnoy.fuzzybelly.org>
	<42D20D2A.3090700@mullenweg.com>
	<1121090744.17612.62.camel@portnoy.fuzzybelly.org>
	<42D29CD6.1030102@midnightcircus.com>
	<1121122187.17612.67.camel@portnoy.fuzzybelly.org>
	<42D3492E.7080007@midnightcircus.com>
	<1121183730.15653.10.camel@portnoy.fuzzybelly.org>
	<CF5B2693-6BF6-42C0-AEB2-EC61C3B198B9@turbonet.com>
	<d6491f4805071312074ea822e5@mail.gmail.com>
	<1121283102.15653.62.camel@portnoy.fuzzybelly.org>
	<d6491f48050713124458f71d36@mail.gmail.com>
Message-ID: <1121284281.15653.66.camel@portnoy.fuzzybelly.org>

On Wed, 2005-07-13 at 14:44 -0500, Jason Bainbridge wrote:
> However I noticed that some of the plugin menu item entries like Spam
> Karma 2 under Options and Polaroidonizer under Dashboard no longer
> display after going from changeset 2702 to 2706, but TextControl
> Config & WP Plugin Mgr still appear under Options. Any ideas off the
> top of your head on what would case that? If not I'll have a dig and
> familiarise myself with more of the WP internals.

SK2 install its option menu at level 7.  Alas, I only gave level 8 - 10
to Administrators.  Admins need to have all levels included in their
capability set.  I'll commit an update.  The roles field will need to be
removed from your options DB so that upgrade.php create an updated role
list.

Ryan

From ryan at boren.nu  Wed Jul 13 19:56:11 2005
From: ryan at boren.nu (Ryan Boren)
Date: Wed Jul 13 19:56:14 2005
Subject: [wp-hackers] User Capabilities
In-Reply-To: <42D57115.9060003@midnightcircus.com>
References: <1120196075.7972.0.camel@portnoy.fuzzybelly.org>
	<42D1B41B.8020506@mullenweg.com> <42D1B4C3.7090001@skippy.net>
	<42D20D2A.3090700@mullenweg.com>
	<1121090744.17612.62.camel@portnoy.fuzzybelly.org>
	<42D29CD6.1030102@midnightcircus.com>
	<1121122187.17612.67.camel@portnoy.fuzzybelly.org>
	<42D3492E.7080007@midnightcircus.com>
	<1121183730.15653.10.camel@portnoy.fuzzybelly.org>
	<CF5B2693-6BF6-42C0-AEB2-EC61C3B198B9@turbonet.com>
	<d6491f4805071312074ea822e5@mail.gmail.com>
	<1121283102.15653.62.camel@portnoy.fuzzybelly.org>
	<42D57115.9060003@midnightcircus.com>
Message-ID: <1121284571.15653.67.camel@portnoy.fuzzybelly.org>

On Wed, 2005-07-13 at 15:52 -0400, Owen Winkler wrote:
> Ryan Boren wrote:
> > user_level has been purposely moved from users to usermeta.  However, I
> > think we're deleting user_level from users first and then later trying
> > to use it when setting up the roles and migrating to usermeta.  We need
> > to look into that.
> 
> I put a patch for this in Trac yesterday.
> http://trac.wordpress.org/ticket/1505

http://trac.wordpress.org/changeset/2707

I think we might have some other issues during the migration.  Need to
check.

Ryan

From ringmaster at midnightcircus.com  Wed Jul 13 20:17:30 2005
From: ringmaster at midnightcircus.com (Owen Winkler)
Date: Wed Jul 13 20:13:42 2005
Subject: [wp-hackers] User Capabilities
In-Reply-To: <1121284571.15653.67.camel@portnoy.fuzzybelly.org>
References: <1120196075.7972.0.camel@portnoy.fuzzybelly.org>	<42D1B41B.8020506@mullenweg.com>
	<42D1B4C3.7090001@skippy.net>	<42D20D2A.3090700@mullenweg.com>	<1121090744.17612.62.camel@portnoy.fuzzybelly.org>	<42D29CD6.1030102@midnightcircus.com>	<1121122187.17612.67.camel@portnoy.fuzzybelly.org>	<42D3492E.7080007@midnightcircus.com>	<1121183730.15653.10.camel@portnoy.fuzzybelly.org>	<CF5B2693-6BF6-42C0-AEB2-EC61C3B198B9@turbonet.com>	<d6491f4805071312074ea822e5@mail.gmail.com>	<1121283102.15653.62.camel@portnoy.fuzzybelly.org>	<42D57115.9060003@midnightcircus.com>
	<1121284571.15653.67.camel@portnoy.fuzzybelly.org>
Message-ID: <42D576DA.2070005@midnightcircus.com>

Ryan Boren wrote:
> http://trac.wordpress.org/changeset/2707

Cool.

> I think we might have some other issues during the migration.  Need to
> check.

If you were thinking about a problem during an upgrade, see if this 
makes sense...

The database upgrader won't remove extra fields that are not defined in 
the schema.  So if you upgrade, your user_level field stays intact until 
upgrade_160() runs, transferring the data to usermeta and deleting the 
field.

The upgrades I ran worked ok, but it's worth testing at least a few more 
times.

Owen
From ryan at boren.nu  Wed Jul 13 20:22:03 2005
From: ryan at boren.nu (Ryan Boren)
Date: Wed Jul 13 20:22:13 2005
Subject: [wp-hackers] User Capabilities
In-Reply-To: <1121284281.15653.66.camel@portnoy.fuzzybelly.org>
References: <1120196075.7972.0.camel@portnoy.fuzzybelly.org>
	<42D20D2A.3090700@mullenweg.com>
	<1121090744.17612.62.camel@portnoy.fuzzybelly.org>
	<42D29CD6.1030102@midnightcircus.com>
	<1121122187.17612.67.camel@portnoy.fuzzybelly.org>
	<42D3492E.7080007@midnightcircus.com>
	<1121183730.15653.10.camel@portnoy.fuzzybelly.org>
	<CF5B2693-6BF6-42C0-AEB2-EC61C3B198B9@turbonet.com>
	<d6491f4805071312074ea822e5@mail.gmail.com>
	<1121283102.15653.62.camel@portnoy.fuzzybelly.org>
	<d6491f48050713124458f71d36@mail.gmail.com>
	<1121284281.15653.66.camel@portnoy.fuzzybelly.org>
Message-ID: <1121286123.15653.74.camel@portnoy.fuzzybelly.org>

On Wed, 2005-07-13 at 14:51 -0500, Ryan Boren wrote:
> On Wed, 2005-07-13 at 14:44 -0500, Jason Bainbridge wrote:
> > However I noticed that some of the plugin menu item entries like Spam
> > Karma 2 under Options and Polaroidonizer under Dashboard no longer
> > display after going from changeset 2702 to 2706, but TextControl
> > Config & WP Plugin Mgr still appear under Options. Any ideas off the
> > top of your head on what would case that? If not I'll have a dig and
> > familiarise myself with more of the WP internals.
> 
> SK2 install its option menu at level 7.  Alas, I only gave level 8 - 10
> to Administrators.  Admins need to have all levels included in their
> capability set.  I'll commit an update.  The roles field will need to be
> removed from your options DB so that upgrade.php create an updated role
> list.

http://trac.wordpress.org/changeset/2708

Try that on.  Delete the *user_roles field from the options DB and rerun
upgrade.php.

We probably need to add some code that merges new caps into existing
roles during upgrade.  This could be tricky since we don't want to
re-add caps that were purposefully removed.  We might have to snapshot
cap sets for each release and do some diffing.  We can think about that
later.  For now, a "remake the roles" flag could be handy for bringing
the roles up-to-date as we inevitably add caps over the course of 1.6
development.

Ryan


From jbainbridge at gmail.com  Wed Jul 13 20:25:54 2005
From: jbainbridge at gmail.com (Jason Bainbridge)
Date: Wed Jul 13 20:56:19 2005
Subject: [wp-hackers] User Capabilities
In-Reply-To: <1121286123.15653.74.camel@portnoy.fuzzybelly.org>
References: <1120196075.7972.0.camel@portnoy.fuzzybelly.org>
	<1121122187.17612.67.camel@portnoy.fuzzybelly.org>
	<42D3492E.7080007@midnightcircus.com>
	<1121183730.15653.10.camel@portnoy.fuzzybelly.org>
	<CF5B2693-6BF6-42C0-AEB2-EC61C3B198B9@turbonet.com>
	<d6491f4805071312074ea822e5@mail.gmail.com>
	<1121283102.15653.62.camel@portnoy.fuzzybelly.org>
	<d6491f48050713124458f71d36@mail.gmail.com>
	<1121284281.15653.66.camel@portnoy.fuzzybelly.org>
	<1121286123.15653.74.camel@portnoy.fuzzybelly.org>
Message-ID: <d6491f4805071313255dba1467@mail.gmail.com>

On 7/13/05, Ryan Boren <ryan@boren.nu> wrote:
> On Wed, 2005-07-13 at 14:51 -0500, Ryan Boren wrote:
> > On Wed, 2005-07-13 at 14:44 -0500, Jason Bainbridge wrote:
> > > However I noticed that some of the plugin menu item entries like Spam
> > > Karma 2 under Options and Polaroidonizer under Dashboard no longer
> > > display after going from changeset 2702 to 2706, but TextControl
> > > Config & WP Plugin Mgr still appear under Options. Any ideas off the
> > > top of your head on what would case that? If not I'll have a dig and
> > > familiarise myself with more of the WP internals.
> >
> > SK2 install its option menu at level 7.  Alas, I only gave level 8 - 10
> > to Administrators.  Admins need to have all levels included in their
> > capability set.  I'll commit an update.  The roles field will need to be
> > removed from your options DB so that upgrade.php create an updated role
> > list.
> 
> http://trac.wordpress.org/changeset/2708
> 
> Try that on.  Delete the *user_roles field from the options DB and rerun
> upgrade.php.

Works a treat, thanks. :)

Cheer,
-- 
Jason Bainbridge
http://kde.org - webmaster@kde.org
Personal Site - http://jasonbainbridge.com
From ecb29 at cornell.edu  Thu Jul 14 04:52:57 2005
From: ecb29 at cornell.edu (=?ISO-8859-1?Q?Elliott_B=E4ck?=)
Date: Thu Jul 14 04:53:18 2005
Subject: [wordpress] Re: [wp-hackers] Forum post: Huge server hits
In-Reply-To: <42D53251.8010009@wltc.net>
References: <003701c58708$08bded00$6702a8c0@DB>	<42D401DE.2030800@tamba2.org.uk>	<42D42072.5060202@tamba2.org.uk>	<022801c58726$d88a0c80$6e01a8c0@sixfour>	<42D46E99.4090708@midnightcircus.com>	<42D4B35D.2000100@mullenweg.com>	<42D4B512.5040509@cornell.edu>	<42D4B76F.5060605@mullenweg.com>	<42D4BAD5.5090601@cornell.edu>	<22197e1d05071308106adbac46@mail.gmail.com>
	<42D53251.8010009@wltc.net>
Message-ID: <42D5EFA9.5030805@cornell.edu>

BTW, someone should also mention the following valuable resource:  
Flickr.  If you use Flickr to link your popular / large images, or just 
link all images on policy, or even write a silly plugin to upload 
non-linked images to flickr and rewrite them, you will never have to 
worry about regular bandwidth costs again.

Thanks,
Elliott C. B?ck

607-229-0623
http://elliottback.com



Mark Ghosh wrote:

> Can we, as a group, establish some benchmark guidelines and then, 
> according to those guidelines, provide benchmarks from our own servers 
> with our live blogs? This would give everyone a chance to weigh in, 
> provide real world metrics and might be useful in the long run.
>
> Anyone willing to be the torch bearer on this one (be responisble for 
> maintaining the guidelines and the data)?
>
> I can dig up (I think) the apachebench script that I had used to 
> bechmark WP-Cache at one time.
>
> Mark
>
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
From ecb29 at cornell.edu  Thu Jul 14 07:49:50 2005
From: ecb29 at cornell.edu (=?ISO-8859-1?Q?Elliott_B=E4ck?=)
Date: Thu Jul 14 07:50:17 2005
Subject: [wordpress] Re: [wp-hackers] Forum post: Huge server hits
In-Reply-To: <C0918048-9B96-4E1B-B710-7D7716DA6BF2@sinteur.com>
References: <003701c58708$08bded00$6702a8c0@DB>	<42D401DE.2030800@tamba2.org.uk>
	<42D42072.5060202@tamba2.org.uk>	<022801c58726$d88a0c80$6e01a8c0@sixfour>	<42D46E99.4090708@midnightcircus.com>	<42D4B35D.2000100@mullenweg.com>
	<42D4B512.5040509@cornell.edu>
	<C0918048-9B96-4E1B-B710-7D7716DA6BF2@sinteur.com>
Message-ID: <42D6191E.5040308@cornell.edu>

Sure.  I'll analog my server logs over the last week or so and put 
something on the codex about it.

Thanks,
Elliott C. B?ck

607-229-0623
http://elliottback.com



John Sinteur wrote:

>
> On Jul 13, 2005, at 8:30 AM, Elliott B?ck wrote:
>
>
>> I used up 90 GB of bandwidth yesterday:
>>
>> 90,000 mb / 24 hours * 1 hr / 60 min * 1 min / 60 s = 1.04 MB/s =  
>> 8.33 Mb/s
>>
>> That's saturation level on older cards.  Since my machine is a  
>> shared host, it was probably getting hammered pretty hard overall...
>>
>>
>
>
> I guess that's indeed the images - but if you could add your  
> experiences, with a description of what the pages looked like and  
> where to bandwidth went, and a description of the hardware involved,  
> to the codex, it would go a long way to answering a lot of questions.  
> If you could run analog on the webserverlogs to see what files were  
> hit most, you've got a great experience for the codex...
>
> -John
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
From dmhouse at gmail.com  Thu Jul 14 11:06:50 2005
From: dmhouse at gmail.com (David House)
Date: Thu Jul 14 11:07:00 2005
Subject: [wp-hackers] User Capabilities
In-Reply-To: <1121284571.15653.67.camel@portnoy.fuzzybelly.org>
References: <1120196075.7972.0.camel@portnoy.fuzzybelly.org>
	<42D29CD6.1030102@midnightcircus.com>
	<1121122187.17612.67.camel@portnoy.fuzzybelly.org>
	<42D3492E.7080007@midnightcircus.com>
	<1121183730.15653.10.camel@portnoy.fuzzybelly.org>
	<CF5B2693-6BF6-42C0-AEB2-EC61C3B198B9@turbonet.com>
	<d6491f4805071312074ea822e5@mail.gmail.com>
	<1121283102.15653.62.camel@portnoy.fuzzybelly.org>
	<42D57115.9060003@midnightcircus.com>
	<1121284571.15653.67.camel@portnoy.fuzzybelly.org>
Message-ID: <ebe43d6805071404061ec6fb18@mail.gmail.com>

On 7/13/05, Ryan Boren <ryan@boren.nu> wrote:
> I think we might have some other issues during the migration.  Need to
> check.

There seem to be major problems when creating a user -- I get a
faceful of PHP warnings when creating a user (and thus I'm not
redirected back to users.php, because of the warnings).

I think this is because WP_User::get_role_caps() is called from the
WP_User constructor, but at this time, the user doesn't have any
roles. The code in users.php to create a user looks like this:

$user = new WP_User($user_ID);
$user->set_role(get_settings('default_role'));

Now, WP_User::get_role_caps() will be called from the first statement,
but it's not until the second statement that the user gets a role set.
The warnings were all warnings to do with variables not being arrays:
foreach() and array_merge() were complaining. I'm pretty sure it's
replicatable; just try to create a user through the admin interface.

-- 
-David House, dmhouse@gmail.com, http://xmouse.ithium.net
From dvandorp at gmail.com  Thu Jul 14 13:40:46 2005
From: dvandorp at gmail.com (Darryl)
Date: Thu Jul 14 13:40:55 2005
Subject: [wordpress] Re: [wp-hackers] Forum post: Huge server hits
In-Reply-To: <42D5EFA9.5030805@cornell.edu>
References: <003701c58708$08bded00$6702a8c0@DB>
	<022801c58726$d88a0c80$6e01a8c0@sixfour>
	<42D46E99.4090708@midnightcircus.com> <42D4B35D.2000100@mullenweg.com>
	<42D4B512.5040509@cornell.edu> <42D4B76F.5060605@mullenweg.com>
	<42D4BAD5.5090601@cornell.edu>
	<22197e1d05071308106adbac46@mail.gmail.com>
	<42D53251.8010009@wltc.net> <42D5EFA9.5030805@cornell.edu>
Message-ID: <fba87cb9050714064020b6594f@mail.gmail.com>

Per the Flickr TOS:

7. Flickr is intended for personal use and is not a generic image
hosting service. Professional or corporate uses of Flickr are
prohibited.


and in General Conditions:

Your account will also be terminated if it is used for hosting graphic
elements of web page designs, icons, smilies, buddy icons, forum
avatars, badges and other non-photographic elements on external
websites.

-darryl


On 7/13/05, Elliott B?ck <ecb29@cornell.edu> wrote:
> BTW, someone should also mention the following valuable resource:
> Flickr.  If you use Flickr to link your popular / large images, or just
> link all images on policy, or even write a silly plugin to upload
> non-linked images to flickr and rewrite them, you will never have to
> worry about regular bandwidth costs again.
> 
> Thanks,
> Elliott C. B?ck
> 
> 607-229-0623
> http://elliottback.com
> 
> 
> 
> Mark Ghosh wrote:
> 
> > Can we, as a group, establish some benchmark guidelines and then,
> > according to those guidelines, provide benchmarks from our own servers
> > with our live blogs? This would give everyone a chance to weigh in,
> > provide real world metrics and might be useful in the long run.
> >
> > Anyone willing to be the torch bearer on this one (be responisble for
> > maintaining the guidelines and the data)?
> >
> > I can dig up (I think) the apachebench script that I had used to
> > bechmark WP-Cache at one time.
> >
> > Mark
> >
> >
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers@lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> >
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
> 


-- 
http://randomthoughts.vandorp.ca
From davebytes at comcast.net  Thu Jul 14 14:49:29 2005
From: davebytes at comcast.net (David Chait)
Date: Thu Jul 14 14:49:38 2005
Subject: [wordpress] Re: [wp-hackers] Forum post: Huge server hits
References: <003701c58708$08bded00$6702a8c0@DB>	<42D401DE.2030800@tamba2.org.uk>	<42D42072.5060202@tamba2.org.uk>	<022801c58726$d88a0c80$6e01a8c0@sixfour>	<42D46E99.4090708@midnightcircus.com>	<42D4B35D.2000100@mullenweg.com>	<42D4B512.5040509@cornell.edu>	<42D4B76F.5060605@mullenweg.com>	<42D4BAD5.5090601@cornell.edu>	<22197e1d05071308106adbac46@mail.gmail.com><42D53251.8010009@wltc.net>
	<42D5EFA9.5030805@cornell.edu>
Message-ID: <002f01c58883$3d02e3a0$6e01a8c0@sixfour>

Well, that might work in certain cases.  IF your images aren't the draw to 
your site, then maybe.  And if you aren't a biz/pro user.

If you have a site that's all about images you can't find elsewhere (I 
dunno, a nature photographer, wedding photographer, something like that), 
you'd maybe sprinkle a few images to flickr or something as 'advertising'. 
OR, you could push some low-res versions out around, keep the ultra high-res 
for yourself.  (I'm working on a design for a astronomy photographer, and 
the bandwidth issues are huge for the hi-res imagery...).

There are probably a dozen 'free image hosting' sites out there.  For people 
who don't care, most of them don't have any of the restrictions flickr 
might, but a few of them push their own advertising on image-view pages.

-d

----- Original Message ----- 
From: "Elliott B?ck" <ecb29@cornell.edu>
To: <wp-hackers@lists.automattic.com>
Sent: Thursday, July 14, 2005 12:52 AM
Subject: Re: [wordpress] Re: [wp-hackers] Forum post: Huge server hits


> BTW, someone should also mention the following valuable resource:  Flickr. 
> If you use Flickr to link your popular / large images, or just link all 
> images on policy, or even write a silly plugin to upload non-linked images 
> to flickr and rewrite them, you will never have to worry about regular 
> bandwidth costs again.
>
> Thanks,
> Elliott C. B?ck
>
> 607-229-0623
> http://elliottback.com

From dougal at gunters.org  Thu Jul 14 15:15:05 2005
From: dougal at gunters.org (Dougal Campbell)
Date: Thu Jul 14 15:15:26 2005
Subject: [wp-hackers] Forum post: Huge server hits
In-Reply-To: <42D39346.7030705@tamba2.org.uk>
References: <42D39346.7030705@tamba2.org.uk>
Message-ID: <42D68179.7050205@gunters.org>

Podz wrote:
> http://wordpress.org/support/topic/38937
> 
>  "as a recation to the attacks in london we set up a website called 
> werenotafraid.com, and we are running it on a wordpress blog. i am not 
> pimping the project here, my questions is of a somewhat technical nature.
> 
> the project has really taken off, we had 11 million hits in just a few 
> days, but we had to notice that the wordpress software was not able to 
> deal with the load:"
> 
> It's been linked from the BBC too so the problem will remain. I've 
> pointed the guy at staticise-reloaded, but maybe this number of hits 
> needs something more ?

FWIW, the footer on the site now says that they are no longer running WP 
(though it appears to be a static template originally generated and 
saved from WP).

Also, the site (http://werenotafraid.com/) was mentioned on Good Morning 
America today (in a segment that lasted about 5 minutes and included an 
interview with Alfie, the site's creator), so they're likely to get yet 
another burst of traffic.

-- 
Dougal Campbell <dougal@gunters.org>
http://dougal.gunters.org/

From journalized at gmail.com  Thu Jul 14 15:56:43 2005
From: journalized at gmail.com (Mike Little)
Date: Thu Jul 14 15:56:49 2005
Subject: [wp-hackers] Forum post: Huge server hits
In-Reply-To: <42D68179.7050205@gunters.org>
References: <42D39346.7030705@tamba2.org.uk> <42D68179.7050205@gunters.org>
Message-ID: <7235ce7805071408561c1b8c36@mail.gmail.com>

On 14/07/05, Dougal Campbell <dougal@gunters.org> wrote:
> 
> FWIW, the footer on the site now says that they are no longer running WP
> (though it appears to be a static template originally generated and
> saved from WP).
> 
> Also, the site (http://werenotafraid.com/) was mentioned on Good Morning
> America today (in a segment that lasted about 5 minutes and included an
> interview with Alfie, the site's creator), so they're likely to get yet
> another burst of traffic.
> 

That's a shame, it makes WordPress look bad. 
Though it does look like most everything but index.php is still there.
e.g. rss still works.


Mike
-- 
Mike Little
http://zed1.com/journalized/
From peasant at gmail.com  Thu Jul 14 16:15:45 2005
From: peasant at gmail.com (Sam Angove)
Date: Thu Jul 14 16:41:49 2005
Subject: [wp-hackers] Forum post: Huge server hits
In-Reply-To: <42D3F9FE.8070708@tamba2.org.uk>
References: <42D39346.7030705@tamba2.org.uk>
	<881B2C5A-3314-43BB-9612-1790B5C81D3F@textdrive.com>
	<d6491f4805071209295187c354@mail.gmail.com>
	<42D3F9FE.8070708@tamba2.org.uk>
Message-ID: <aa74b1910507140915410ab79a@mail.gmail.com>

On 7/13/05, Podz <podz@tamba2.org.uk> wrote:
> Still... as an extreme test given the circumstances, I think it ranks
> pretty highly ? We do get questions about server load in the forums and
> we are - as yet - unable to give definitive answers. Not that this does,
> but those issues are not answerable. Unless someone wants to take a shot ?

FWIW, since I'm sure most people don't have dedicated servers:

DreamHost says that their shared hosting customers shouldn't be using
more than 30-40 [CPU minutes per day][1], and if they consistently
exceed it they may be asked to upgrade to a dedicated package.

It obviously depends on what plugins/themes are being used, but for me
works out at about 10,000 pageviews per day with no cache.[2] WP-Cache
should be at least 10x that, or more.

[1]: https://panel.dreamhost.com/kbase/index.cgi?area=3079
[2]: I think. Have you ever tried to analyze a log where every single
item is `php.cgi`? :)
From false.hopes at gmail.com  Thu Jul 14 19:36:09 2005
From: false.hopes at gmail.com (Robert Deaton)
Date: Thu Jul 14 19:36:22 2005
Subject: [wp-hackers] Forum post: Huge server hits
In-Reply-To: <aa74b1910507140915410ab79a@mail.gmail.com>
References: <42D39346.7030705@tamba2.org.uk>
	<881B2C5A-3314-43BB-9612-1790B5C81D3F@textdrive.com>
	<d6491f4805071209295187c354@mail.gmail.com>
	<42D3F9FE.8070708@tamba2.org.uk>
	<aa74b1910507140915410ab79a@mail.gmail.com>
Message-ID: <a491f91d05071412362627b737@mail.gmail.com>

Well, there's another no wonder the traffic is so high. PHP as CGI
suffers a pretty hefty preformance hit. Any particular reason why
dreamhost would do this?

On 7/14/05, Sam Angove <peasant@gmail.com> wrote:
> On 7/13/05, Podz <podz@tamba2.org.uk> wrote:
> > Still... as an extreme test given the circumstances, I think it ranks
> > pretty highly ? We do get questions about server load in the forums and
> > we are - as yet - unable to give definitive answers. Not that this does,
> > but those issues are not answerable. Unless someone wants to take a shot ?
> 
> FWIW, since I'm sure most people don't have dedicated servers:
> 
> DreamHost says that their shared hosting customers shouldn't be using
> more than 30-40 [CPU minutes per day][1], and if they consistently
> exceed it they may be asked to upgrade to a dedicated package.
> 
> It obviously depends on what plugins/themes are being used, but for me
> works out at about 10,000 pageviews per day with no cache.[2] WP-Cache
> should be at least 10x that, or more.
> 
> [1]: https://panel.dreamhost.com/kbase/index.cgi?area=3079
> [2]: I think. Have you ever tried to analyze a log where every single
> item is `php.cgi`? :)
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
> 


-- 
--Robert Deaton
http://somethingunpredictable.com
From mark.wordpress at txfx.net  Thu Jul 14 22:49:18 2005
From: mark.wordpress at txfx.net (Mark Jaquith)
Date: Thu Jul 14 22:49:10 2005
Subject: [wp-hackers] Forum post: Huge server hits
In-Reply-To: <a491f91d05071412362627b737@mail.gmail.com>
References: <42D39346.7030705@tamba2.org.uk>	<881B2C5A-3314-43BB-9612-1790B5C81D3F@textdrive.com>	<d6491f4805071209295187c354@mail.gmail.com>	<42D3F9FE.8070708@tamba2.org.uk>	<aa74b1910507140915410ab79a@mail.gmail.com>
	<a491f91d05071412362627b737@mail.gmail.com>
Message-ID: <42D6EBEE.8070708@txfx.net>

Robert Deaton wrote:

>Well, there's another no wonder the traffic is so high. PHP as CGI
>suffers a pretty hefty preformance hit. Any particular reason why
>dreamhost would do this?
>
They cite security reasons.  However, they let you turn off PHP as CGI 
and use the Apache module instead in the control panel (highly recommended!)

-- 
Mark Jaquith
http://txfx.net/
MCincubus @ #wordpress

From peasant at gmail.com  Fri Jul 15 01:17:13 2005
From: peasant at gmail.com (Sam Angove)
Date: Fri Jul 15 01:17:22 2005
Subject: [wp-hackers] Forum post: Huge server hits
In-Reply-To: <42D6EBEE.8070708@txfx.net>
References: <42D39346.7030705@tamba2.org.uk>
	<881B2C5A-3314-43BB-9612-1790B5C81D3F@textdrive.com>
	<d6491f4805071209295187c354@mail.gmail.com>
	<42D3F9FE.8070708@tamba2.org.uk>
	<aa74b1910507140915410ab79a@mail.gmail.com>
	<a491f91d05071412362627b737@mail.gmail.com>
	<42D6EBEE.8070708@txfx.net>
Message-ID: <aa74b191050714181740637740@mail.gmail.com>

On 7/15/05, Mark Jaquith <mark.wordpress@txfx.net> wrote:
> Robert Deaton wrote:
>
> They cite security reasons.  However, they let you turn off PHP as CGI
> and use the Apache module instead in the control panel (highly recommended!)

I've used both, but haven't noticed a big performance difference.
Definitely nothing to offset the convenience of suexec. According to
the only benchmarks I can find, performance is about the same with
[complex scripts][1], which WordPress is. Are there any better
benchmarks around?

[1]: http://lists.debian.org/debian-isp/2004/03/msg00148.html
From kaf at szub.net  Fri Jul 15 15:39:31 2005
From: kaf at szub.net (Kaf Oseo)
Date: Fri Jul 15 15:39:55 2005
Subject: [wp-hackers] Knowing when you're in The Loop, and when you're not
In-Reply-To: <aa74b191050714181740637740@mail.gmail.com>
References: <42D39346.7030705@tamba2.org.uk>	<881B2C5A-3314-43BB-9612-1790B5C81D3F@textdrive.com>	<d6491f4805071209295187c354@mail.gmail.com>	<42D3F9FE.8070708@tamba2.org.uk>	<aa74b1910507140915410ab79a@mail.gmail.com>	<a491f91d05071412362627b737@mail.gmail.com>	<42D6EBEE.8070708@txfx.net>
	<aa74b191050714181740637740@mail.gmail.com>
Message-ID: <42D7D8B3.1020706@szub.net>

I have a copyright mark plugin which bases it's output in part on the
query type, so single posts, Pages and archive queries display the year
for the current content, while elsewhere a range (first-last) is used.
When the plugin function blog_copyright() is called within The Loop, for
query types other than those listed I'd like it to be "Loop aware" and
display the year of the current post, instead of a range.

Testing on $post or something like get_the_author() works to a degree,
but as these leak out beyond The Loop calling the function afterwards
provides false positives. I had luck with have_posts(), but this fails
in the last post of The Loop, and won't work if using a foreach() loop
statement.

I'm about to go the way of a parameter, but before taking such a drastic
measure (...), is there some variable or mechanism I can test on that's
only around while The Loop is in effect?

-Kaf
From mark.wordpress at txfx.net  Sat Jul 16 03:57:53 2005
From: mark.wordpress at txfx.net (Mark Jaquith)
Date: Sat Jul 16 03:57:42 2005
Subject: [wp-hackers] Knowing when you're in The Loop, and when you're not
In-Reply-To: <42D7D8B3.1020706@szub.net>
References: <42D39346.7030705@tamba2.org.uk>	<881B2C5A-3314-43BB-9612-1790B5C81D3F@textdrive.com>	<d6491f4805071209295187c354@mail.gmail.com>	<42D3F9FE.8070708@tamba2.org.uk>	<aa74b1910507140915410ab79a@mail.gmail.com>	<a491f91d05071412362627b737@mail.gmail.com>	<42D6EBEE.8070708@txfx.net>	<aa74b191050714181740637740@mail.gmail.com>
	<42D7D8B3.1020706@szub.net>
Message-ID: <42D885C1.9050607@txfx.net>

Kaf Oseo wrote:

> I have a copyright mark plugin which bases it's output in part on the
> query type, so single posts, Pages and archive queries display the year
> for the current content, while elsewhere a range (first-last) is used.
> When the plugin function blog_copyright() is called within The Loop, for
> query types other than those listed I'd like it to be "Loop aware" and
> display the year of the current post, instead of a range.
>
> Testing on $post or something like get_the_author() works to a degree,
> but as these leak out beyond The Loop calling the function afterwards
> provides false positives. I had luck with have_posts(), but this fails
> in the last post of The Loop, and won't work if using a foreach() loop
> statement.
>
> I'm about to go the way of a parameter, but before taking such a drastic
> measure (...), is there some variable or mechanism I can test on that's
> only around while The Loop is in effect?

Hm... This is a tricky one.  The problem is that how the variables look 
for the duration of the final run through the loop is the same as how 
they look after the loop.

The only function that gets run after the last run of the loop is 
have_posts() (which is $wp_query->have_posts() ).

> function have_posts() {
>     if ($this->current_post + 1 < $this->post_count) {
>     return true;
>     }
>     return false;
>     }


If modified thusly, we would be able to tell when the post has expired:

> function have_posts() {
>     if ($this->current_post + 1 < $this->post_count) {
>     return true;
>     } elseif ($this->current_post + 1 == $this->post_count) {
>     $this->current_post++; // set the current_post to be one higher 
> than the post_count
>     return false;
>     }    
>     return false;
>     }

This way, when you reach the first case that fails (when the 
current_post + 1 is equal to the post_count), you push it one more.

Then, this function (within the class) could test for "in the loop"-ness

> function in_the_loop() {
>     if ($this->post_count && $this->current_post + 2 == 
> $this->post_count) {
>     return false; // loop has been run already
>     } elseif (!$this->current_post) {
>     return false; // loop hasn't started
>     } else {
>     return true; // in the loop
>     }
> }

and then of course, outside the class (like in functions.php):

> function in_the_loop() {
>     global $wp_query;
>     return $wp_query->in_the_loop();
> }


Thoughts?

I may just not be seeing it, but I really can't think of another way to 
tell if you're in the loop or not.  Nothing is run at the very bottom of 
the loop, and the only thing different from the runthrough of the last 
loop iteration and the end is that have_posts() is run again, and it 
currently doesn't change anything... only observes.

-- 
Mark Jaquith
http://txfx.net/
MCincubus @ #wordpress

From mark.wordpress at txfx.net  Sat Jul 16 04:14:43 2005
From: mark.wordpress at txfx.net (Mark Jaquith)
Date: Sat Jul 16 04:14:23 2005
Subject: [wp-hackers] Knowing when you're in The Loop, and when you're not
In-Reply-To: <42D885C1.9050607@txfx.net>
References: <42D39346.7030705@tamba2.org.uk>	<881B2C5A-3314-43BB-9612-1790B5C81D3F@textdrive.com>	<d6491f4805071209295187c354@mail.gmail.com>	<42D3F9FE.8070708@tamba2.org.uk>	<aa74b1910507140915410ab79a@mail.gmail.com>	<a491f91d05071412362627b737@mail.gmail.com>	<42D6EBEE.8070708@txfx.net>	<aa74b191050714181740637740@mail.gmail.com>	<42D7D8B3.1020706@szub.net>
	<42D885C1.9050607@txfx.net>
Message-ID: <42D889B3.1070309@txfx.net>

Mark Jaquith wrote:

> Then, this function (within the class) could test for "in the loop"-ness
>
>> function in_the_loop() {
>>     if ($this->post_count && $this->current_post + 2 == 
>> $this->post_count) {
>>     return false; // loop has been run already
>>     } elseif (!$this->current_post) {
>>     return false; // loop hasn't started
>>     } else {
>>     return true; // in the loop
>>     }
>> }
>
Actually, it because $this->current_post is initialized at -1, you'd 
have to do something else... because $this->current_post can equal 0 
when you're in the loop.

Here's one way:

> function in_the_loop() {
>     if ($this->post_count && $this->current_post + 2 == 
> $this->post_count) {
>     return false; // loop has been run already
>     } elseif ($this->current_post < 0) {
>     return false; // loop hasn't started
>     } else {
>     return true; // in the loop
>     }
> }


Another way would be to have $wp_query->have_posts() set 
$this->current_post to -2 when the end of the last loop iteration is 
reached.  -1 could stand for "hasn't started yet" and -2 could stand for 
"has already run."

Or, you could just have a $this->in_loop; variable that is set as true 
with the first the_post() call and set false on the last have_posts() call.

-- 
Mark Jaquith
http://txfx.net/
MCincubus @ #wordpress

From denis at semiologic.com  Sat Jul 16 10:37:56 2005
From: denis at semiologic.com (Denis de Bernardy)
Date: Sat Jul 16 10:38:57 2005
Subject: [wp-hackers] Seen in the forum/Escaping problem
Message-ID: <000101c589f2$6e576780$6502a8c0@DB>

http://wordpress.org/support/topic/31498

Just checking... Has this been investigated?

D.

From podz at tamba2.org.uk  Sat Jul 16 12:10:18 2005
From: podz at tamba2.org.uk (Podz)
Date: Sat Jul 16 12:10:14 2005
Subject: [wp-hackers] Forum Post.
Message-ID: <42D8F92A.7050000@tamba2.org.uk>

http://wordpress.org/support/topic/39328

"I don't know if this is to be considered a bug, but anyone can read 
your drafts simply by entering the post number to the url by hand."

Not seen this reported before.
From tunicwriter at gmail.com  Sat Jul 16 13:07:27 2005
From: tunicwriter at gmail.com (Joey B)
Date: Sat Jul 16 13:07:32 2005
Subject: [wp-hackers] Forum Post.
In-Reply-To: <42D8F92A.7050000@tamba2.org.uk>
References: <42D8F92A.7050000@tamba2.org.uk>
Message-ID: <6901708b050716060722849f9@mail.gmail.com>

Before anyone goes off bug-hunting, it's been resolved, as seen here:
http://wordpress.org/support/topic/39328#post-221738

On 7/16/05, Podz <podz@tamba2.org.uk> wrote:
> http://wordpress.org/support/topic/39328
> 
> "I don't know if this is to be considered a bug, but anyone can read
> your drafts simply by entering the post number to the url by hand."
> 
> Not seen this reported before.
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
> 


-- 
Joey Brooks
Milk Carton Designs || milkcarton.protonage.net
From mark.wordpress at txfx.net  Sat Jul 16 22:36:40 2005
From: mark.wordpress at txfx.net (Mark Jaquith)
Date: Sat Jul 16 22:36:22 2005
Subject: [wp-hackers] New proposed function: in_loop() to determine "in the
	loop" status
Message-ID: <42D98BF8.8040508@txfx.net>

Until now, there's been no good way to figure out if you are currently 
in "the loop."  There were hacky methods, such as checking $post or 
$wp_query->current_post against $wp_query->post_count, but those methods 
either fail after the loop, or on the last post in the loop.

I've created a ticket with a set of patches that will fix this.
http://trac.wordpress.org/ticket/1518

in_loop() returns true or false, depending on your in-the-loop status.

A new var for the WP_Query class, $in_loop, stores the status.  On each 
the_post() call, which calls $wp_query->the_post, the $in_loop var is 
set as true, as you are beginning a loop iteration.

The loop is ended when have_posts() (again, $wp_query->have_posts()) 
returns false.  I modified $wp_query->have_posts() to be aware that it 
has reached the last post, and to do the following:
1) set $in_loop false (that's the end of the loop)
2) run rewind_posts(), so that it is really easy to run through the loop 
again
3) unset the global $post object.  Normally this is left filled to the 
end of the page, and that's bloody useless.  The loop is over, this 
transient object needs to leave.

This also partially addresses this ticket:
http://trac.wordpress.org/ticket/977

How's this sound?

-- 
Mark Jaquith
http://txfx.net/
MCincubus @ #wordpress

From kaf at szub.net  Sat Jul 16 22:51:33 2005
From: kaf at szub.net (Kaf Oseo)
Date: Sat Jul 16 22:51:52 2005
Subject: [wp-hackers] New proposed function: in_loop() to determine "in
	the	loop" status
In-Reply-To: <42D98BF8.8040508@txfx.net>
References: <42D98BF8.8040508@txfx.net>
Message-ID: <42D98F75.5050906@szub.net>

Mark Jaquith wrote:
> How's this sound?

Well I'm pretty sure you know what I think of the idea. :)

-Kaf

From ryan at boren.nu  Sat Jul 16 22:58:17 2005
From: ryan at boren.nu (Ryan Boren)
Date: Sat Jul 16 22:58:22 2005
Subject: [wp-hackers] New proposed function: in_loop() to determine "in
	the loop" status
In-Reply-To: <42D98BF8.8040508@txfx.net>
References: <42D98BF8.8040508@txfx.net>
Message-ID: <1121554697.3081.15.camel@portnoy.fuzzybelly.org>

On Sat, 2005-07-16 at 18:36 -0400, Mark Jaquith wrote:
> Until now, there's been no good way to figure out if you are currently 
> in "the loop."  There were hacky methods, such as checking $post or 
> $wp_query->current_post against $wp_query->post_count, but those methods 
> either fail after the loop, or on the last post in the loop.
> 
> I've created a ticket with a set of patches that will fix this.
> http://trac.wordpress.org/ticket/1518
> 
> in_loop() returns true or false, depending on your in-the-loop status.

Cool by me.  Do we want to call it in_loop() or in_the_loop()?  I ask
because we refer to it as "The Loop" in so many places.  Either way is
fine by me, just wondering if there is a preference.

Ryan

From kaf at szub.net  Sat Jul 16 23:04:27 2005
From: kaf at szub.net (Kaf Oseo)
Date: Sat Jul 16 23:04:36 2005
Subject: [wp-hackers] New proposed function: in_loop() to determine "in
	the	loop" status
In-Reply-To: <42D98BF8.8040508@txfx.net>
References: <42D98BF8.8040508@txfx.net>
Message-ID: <42D9927B.3000007@szub.net>

Do want to highlight this:

Mark Jaquith wrote:
> 3) unset the global $post object.  Normally this is left filled to the 
> end of the page, and that's bloody useless.  The loop is over, this 
> transient object needs to leave.

I agree with that, but we're going to fins code out there that relies on
it. For example, the default template displays archive year/month/day in
the sidebar by using the_time(), when it really should be collecting it
from the query vars.

-Kaf
From mark.wordpress at txfx.net  Sat Jul 16 23:06:18 2005
From: mark.wordpress at txfx.net (Mark Jaquith)
Date: Sat Jul 16 23:06:03 2005
Subject: [wp-hackers] New proposed function: in_loop() to determine "in
	the loop" status
In-Reply-To: <1121554697.3081.15.camel@portnoy.fuzzybelly.org>
References: <42D98BF8.8040508@txfx.net>
	<1121554697.3081.15.camel@portnoy.fuzzybelly.org>
Message-ID: <42D992EA.4010607@txfx.net>

Ryan Boren wrote:

>Cool by me.  Do we want to call it in_loop() or in_the_loop()?  I ask
>because we refer to it as "The Loop" in so many places.  Either way is
>fine by me, just wondering if there is a preference.
>
Yeah, in_the_loop() sounds better.  I like when code sounds like natural 
language:

<?php if (in_the_loop()) do_this(); ?>

Either way, should definitely change the var in WP_Query to be consistent!

-- 
Mark Jaquith
http://txfx.net/
MCincubus @ #wordpress

From mark.wordpress at txfx.net  Sat Jul 16 23:14:42 2005
From: mark.wordpress at txfx.net (Mark Jaquith)
Date: Sat Jul 16 23:14:16 2005
Subject: [wp-hackers] New proposed function: in_loop() to determine "in
	the	loop" status
In-Reply-To: <42D9927B.3000007@szub.net>
References: <42D98BF8.8040508@txfx.net> <42D9927B.3000007@szub.net>
Message-ID: <42D994E2.5000507@txfx.net>

Kaf Oseo wrote:

> Do want to highlight this:
>
> Mark Jaquith wrote:
>
>> 3) unset the global $post object.  Normally this is left filled to 
>> the end of the page, and that's bloody useless.  The loop is over, 
>> this transient object needs to leave.
>
>
> I agree with that, but we're going to fins code out there that relies on
> it. For example, the default template displays archive year/month/day in
> the sidebar by using the_time(), when it really should be collecting it
> rom the query vars.

Bah... yeah, we may have to lay off that.  That's okay, it wasn't really 
essential.  But still, we should fix that... the_time() is an 
"in-the-loop" function.

-- 
Mark Jaquith
http://txfx.net/
MCincubus @ #wordpress

From dmhouse at gmail.com  Sun Jul 17 08:45:23 2005
From: dmhouse at gmail.com (David House)
Date: Sun Jul 17 08:45:29 2005
Subject: [wp-hackers] New proposed function: in_loop() to determine "in
	the loop" status
In-Reply-To: <42D98BF8.8040508@txfx.net>
References: <42D98BF8.8040508@txfx.net>
Message-ID: <ebe43d68050717014572d4869@mail.gmail.com>

On 7/16/05, Mark Jaquith <mark.wordpress@txfx.net> wrote:
> 3) unset the global $post object.  Normally this is left filled to the
> end of the page, and that's bloody useless.  The loop is over, this
> transient object needs to leave.

Can we deprecate this before we remove it completely? It'll break a
lot of people's code.

-- 
-David House, dmhouse@gmail.com, http://xmouse.ithium.net
From luke at neuro-tech.net  Sun Jul 17 15:14:45 2005
From: luke at neuro-tech.net (Luke Reeves)
Date: Sun Jul 17 15:13:38 2005
Subject: [wp-hackers] Patch for image thumbnail code.
Message-ID: <42DA75E5.4060404@neuro-tech.net>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

This is a patch in relation to a problem I filed on the support board
(http://wordpress.org/support/topic/38872) about the fact that Wordpress
doesn't generate any HTML for images uploaded with thumbnails.  It's
simple, it justs wraps the thumbnail image in an A tag which is a link
to the full-size image.

The only affected file is wp-admin/upload.php:


202c202
< if ( ereg('image/',$img1_type) )
- ---
> if ( ereg('image/',$img1_type) ) {
204c204,208
< else
- ---
>       if($_POST['thumbsize']) {
>               $piece_of_code = "<a href='" .
get_settings('fileupload_url') ."/$img1_name'><img src='" .
>                       get_settings('fileupload_url')
."/thumb-$img1_name' alt='$imgdesc' border='1'/></a>";
>       }
> } else {
205a210
> }

Someone may find this fix useful.  Thanks,

	Luke Reeves
This is a patch in relation to a problem I filed on the support board
(http://wordpress.org/support/topic/38872) about the fact that Wordpress
doesn't generate any HTML for images uploaded with thumbnails.  It's
simple, it justs wraps the thumbnail image in an A tag which is a link
to the full-size image.

The only affected file is wp-admin/upload.php:


202c202
< if ( ereg('image/',$img1_type) )
- ---
> if ( ereg('image/',$img1_type) ) {
204c204,208
< else
- ---
>       if($_POST['thumbsize']) {
>               $piece_of_code = "<a href='" .
get_settings('fileupload_url') ."/$img1_name'><img src='" .
>                       get_settings('fileupload_url')
."/thumb-$img1_name' alt='$imgdesc' border='1'/></a>";
>       }
> } else {
205a210
> }

Someone may find this fix useful.  Thanks,

	Luke Reeves

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.1 (GNU/Linux)
Comment: Using GnuPG with Thunderbird - http://enigmail.mozdev.org

iD8DBQFC2nXlEkTpono0swERAuZUAJ0dveKvGixXVOu+b4W895LqZSgRxwCdG6uW
evQMiocNfvK7gvgpzgzEaU0=
=mvBu
-----END PGP SIGNATURE-----
From false.hopes at gmail.com  Sun Jul 17 17:53:28 2005
From: false.hopes at gmail.com (Robert Deaton)
Date: Sun Jul 17 17:53:39 2005
Subject: [wp-hackers] Patch for image thumbnail code.
In-Reply-To: <42DA75E5.4060404@neuro-tech.net>
References: <42DA75E5.4060404@neuro-tech.net>
Message-ID: <a491f91d050717105314c5c477@mail.gmail.com>

It's been said that Owen's new multimedia handling code will be
integrated into the core, which will fix this and add many more
features with images.

On 7/17/05, Luke Reeves <luke@neuro-tech.net> wrote:
> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
> 
> This is a patch in relation to a problem I filed on the support board
> (http://wordpress.org/support/topic/38872) about the fact that Wordpress
> doesn't generate any HTML for images uploaded with thumbnails.  It's
> simple, it justs wraps the thumbnail image in an A tag which is a link
> to the full-size image.
> 
> The only affected file is wp-admin/upload.php:
> 
> 
> 202c202
> < if ( ereg('image/',$img1_type) )
> - ---
> > if ( ereg('image/',$img1_type) ) {
> 204c204,208
> < else
> - ---
> >       if($_POST['thumbsize']) {
> >               $piece_of_code = "<a href='" .
> get_settings('fileupload_url') ."/$img1_name'><img src='" .
> >                       get_settings('fileupload_url')
> ."/thumb-$img1_name' alt='$imgdesc' border='1'/></a>";
> >       }
> > } else {
> 205a210
> > }
> 
> Someone may find this fix useful.  Thanks,
> 
>         Luke Reeves
> This is a patch in relation to a problem I filed on the support board
> (http://wordpress.org/support/topic/38872) about the fact that Wordpress
> doesn't generate any HTML for images uploaded with thumbnails.  It's
> simple, it justs wraps the thumbnail image in an A tag which is a link
> to the full-size image.
> 
> The only affected file is wp-admin/upload.php:
> 
> 
> 202c202
> < if ( ereg('image/',$img1_type) )
> - ---
> > if ( ereg('image/',$img1_type) ) {
> 204c204,208
> < else
> - ---
> >       if($_POST['thumbsize']) {
> >               $piece_of_code = "<a href='" .
> get_settings('fileupload_url') ."/$img1_name'><img src='" .
> >                       get_settings('fileupload_url')
> ."/thumb-$img1_name' alt='$imgdesc' border='1'/></a>";
> >       }
> > } else {
> 205a210
> > }
> 
> Someone may find this fix useful.  Thanks,
> 
>         Luke Reeves
> 
> -----BEGIN PGP SIGNATURE-----
> Version: GnuPG v1.4.1 (GNU/Linux)
> Comment: Using GnuPG with Thunderbird - http://enigmail.mozdev.org
> 
> iD8DBQFC2nXlEkTpono0swERAuZUAJ0dveKvGixXVOu+b4W895LqZSgRxwCdG6uW
> evQMiocNfvK7gvgpzgzEaU0=
> =mvBu
> -----END PGP SIGNATURE-----
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
> 


-- 
--Robert Deaton
http://somethingunpredictable.com
From luke at neuro-tech.net  Sun Jul 17 17:58:02 2005
From: luke at neuro-tech.net (Luke Reeves)
Date: Sun Jul 17 17:56:55 2005
Subject: [wp-hackers] Patch for image thumbnail code.
In-Reply-To: <a491f91d050717105314c5c477@mail.gmail.com>
References: <42DA75E5.4060404@neuro-tech.net>
	<a491f91d050717105314c5c477@mail.gmail.com>
Message-ID: <42DA9C2A.2000308@neuro-tech.net>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Yeah, I've read about that.  This tides my (few) users over until that
code is in place.

	Luke

Robert Deaton wrote:
> It's been said that Owen's new multimedia handling code will be
> integrated into the core, which will fix this and add many more
> features with images.
> 
> On 7/17/05, Luke Reeves <luke@neuro-tech.net> wrote:
> 
> This is a patch in relation to a problem I filed on the support board
> (http://wordpress.org/support/topic/38872) about the fact that Wordpress
> doesn't generate any HTML for images uploaded with thumbnails.  It's
> simple, it justs wraps the thumbnail image in an A tag which is a link
> to the full-size image.
> 
> The only affected file is wp-admin/upload.php:
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.1 (GNU/Linux)
Comment: Using GnuPG with Thunderbird - http://enigmail.mozdev.org

iD8DBQFC2pwqEkTpono0swERAs2rAJwLYYzlWPE8ChwoWqdWWSyX7rgW1QCggCmc
nUY+ryyEpe0rOm3JHzp17u0=
=OZq2
-----END PGP SIGNATURE-----
From mark.wordpress at txfx.net  Sun Jul 17 21:01:31 2005
From: mark.wordpress at txfx.net (Mark Jaquith)
Date: Sun Jul 17 21:03:44 2005
Subject: [wp-hackers] New proposed function: in_loop() to determine "in
	the loop" status
In-Reply-To: <ebe43d68050717014572d4869@mail.gmail.com>
References: <42D98BF8.8040508@txfx.net>
	<ebe43d68050717014572d4869@mail.gmail.com>
Message-ID: <42DAC72B.7060800@txfx.net>

David House wrote:

>On 7/16/05, Mark Jaquith <mark.wordpress@txfx.net> wrote:
>  
>
>>3) unset the global $post object.  Normally this is left filled to the
>>end of the page, and that's bloody useless.  The loop is over, this
>>transient object needs to leave.
>>    
>>
>
>Can we deprecate this before we remove it completely? It'll break a
>lot of people's code.
>
As there is actually code in the default 1.5.x templates that needs 
this, it's probably best that we leave it, for now. (i.e. leave the 
$post variable set)

-- 
Mark Jaquith
http://txfx.net/
MCincubus @ #wordpress

From ryan at boren.nu  Sun Jul 17 21:55:48 2005
From: ryan at boren.nu (Ryan Boren)
Date: Sun Jul 17 21:55:53 2005
Subject: [wp-hackers] User Capabilities
In-Reply-To: <ebe43d6805071404061ec6fb18@mail.gmail.com>
References: <1120196075.7972.0.camel@portnoy.fuzzybelly.org>
	<42D29CD6.1030102@midnightcircus.com>
	<1121122187.17612.67.camel@portnoy.fuzzybelly.org>
	<42D3492E.7080007@midnightcircus.com>
	<1121183730.15653.10.camel@portnoy.fuzzybelly.org>
	<CF5B2693-6BF6-42C0-AEB2-EC61C3B198B9@turbonet.com>
	<d6491f4805071312074ea822e5@mail.gmail.com>
	<1121283102.15653.62.camel@portnoy.fuzzybelly.org>
	<42D57115.9060003@midnightcircus.com>
	<1121284571.15653.67.camel@portnoy.fuzzybelly.org>
	<ebe43d6805071404061ec6fb18@mail.gmail.com>
Message-ID: <1121637348.2111.1.camel@portnoy.fuzzybelly.org>

On Thu, 2005-07-14 at 12:06 +0100, David House wrote:
> I think this is because WP_User::get_role_caps() is called from the
> WP_User constructor, but at this time, the user doesn't have any
> roles. The code in users.php to create a user looks like this:
> 
> $user = new WP_User($user_ID);
> $user->set_role(get_settings('default_role'));
> 
> Now, WP_User::get_role_caps() will be called from the first statement,
> but it's not until the second statement that the user gets a role set.
> The warnings were all warnings to do with variables not being arrays:
> foreach() and array_merge() were complaining. I'm pretty sure it's
> replicatable; just try to create a user through the admin interface.

Should be fixed now.

Ryan

From ryan at boren.nu  Sun Jul 17 22:01:04 2005
From: ryan at boren.nu (Ryan Boren)
Date: Sun Jul 17 22:01:09 2005
Subject: [wp-hackers] User Capabilities
In-Reply-To: <1121637348.2111.1.camel@portnoy.fuzzybelly.org>
References: <1120196075.7972.0.camel@portnoy.fuzzybelly.org>
	<42D29CD6.1030102@midnightcircus.com>
	<1121122187.17612.67.camel@portnoy.fuzzybelly.org>
	<42D3492E.7080007@midnightcircus.com>
	<1121183730.15653.10.camel@portnoy.fuzzybelly.org>
	<CF5B2693-6BF6-42C0-AEB2-EC61C3B198B9@turbonet.com>
	<d6491f4805071312074ea822e5@mail.gmail.com>
	<1121283102.15653.62.camel@portnoy.fuzzybelly.org>
	<42D57115.9060003@midnightcircus.com>
	<1121284571.15653.67.camel@portnoy.fuzzybelly.org>
	<ebe43d6805071404061ec6fb18@mail.gmail.com>
	<1121637348.2111.1.camel@portnoy.fuzzybelly.org>
Message-ID: <1121637664.2111.5.camel@portnoy.fuzzybelly.org>

The code base is mostly moved over to capabilities.  The functions in
admin-db.php need to be updated as do the old user_can_*() functions.
Do any plugins use the user_can_*() functions?  We never advertised
them.  If no one is using them, we can simply remove them.  They are no
longer used internally within WP.  Anyone want to update admin-db.php?

Ryan

From jbainbridge at gmail.com  Sun Jul 17 22:25:42 2005
From: jbainbridge at gmail.com (Jason Bainbridge)
Date: Sun Jul 17 22:25:47 2005
Subject: [wp-hackers] User Capabilities
In-Reply-To: <1121637664.2111.5.camel@portnoy.fuzzybelly.org>
References: <1120196075.7972.0.camel@portnoy.fuzzybelly.org>
	<1121183730.15653.10.camel@portnoy.fuzzybelly.org>
	<CF5B2693-6BF6-42C0-AEB2-EC61C3B198B9@turbonet.com>
	<d6491f4805071312074ea822e5@mail.gmail.com>
	<1121283102.15653.62.camel@portnoy.fuzzybelly.org>
	<42D57115.9060003@midnightcircus.com>
	<1121284571.15653.67.camel@portnoy.fuzzybelly.org>
	<ebe43d6805071404061ec6fb18@mail.gmail.com>
	<1121637348.2111.1.camel@portnoy.fuzzybelly.org>
	<1121637664.2111.5.camel@portnoy.fuzzybelly.org>
Message-ID: <d6491f48050717152514ac19ac@mail.gmail.com>

On 7/17/05, Ryan Boren <ryan@boren.nu> wrote:
> The code base is mostly moved over to capabilities.  The functions in
> admin-db.php need to be updated as do the old user_can_*() functions.
> Do any plugins use the user_can_*() functions?  We never advertised
> them.  If no one is using them, we can simply remove them.  They are no
> longer used internally within WP.  Anyone want to update admin-db.php?
> 

I just started looking at this (I'm rusty with PHP so I was going to
just hack away and see if I could get it working and then post about
it) but it isn't clear how the permisisons on editing drafts should be
handled under the roles model.

Obviously both Admin and Editor have edit_others_posts as part of
their role but the current permissions look for posts made by users of
the same level or below so should this be changed just to check for
Admin or Editor? Should Editor be able to edit posts by Admin?

Regards,
-- 
Jason Bainbridge
http://kde.org - webmaster@kde.org
Personal Site - http://jasonbainbridge.com
From ringmaster at midnightcircus.com  Sun Jul 17 22:54:35 2005
From: ringmaster at midnightcircus.com (Owen Winkler)
Date: Sun Jul 17 22:55:19 2005
Subject: [wp-hackers] User Capabilities
In-Reply-To: <d6491f48050717152514ac19ac@mail.gmail.com>
References: <1120196075.7972.0.camel@portnoy.fuzzybelly.org>	<1121183730.15653.10.camel@portnoy.fuzzybelly.org>	<CF5B2693-6BF6-42C0-AEB2-EC61C3B198B9@turbonet.com>	<d6491f4805071312074ea822e5@mail.gmail.com>	<1121283102.15653.62.camel@portnoy.fuzzybelly.org>	<42D57115.9060003@midnightcircus.com>	<1121284571.15653.67.camel@portnoy.fuzzybelly.org>	<ebe43d6805071404061ec6fb18@mail.gmail.com>	<1121637348.2111.1.camel@portnoy.fuzzybelly.org>	<1121637664.2111.5.camel@portnoy.fuzzybelly.org>
	<d6491f48050717152514ac19ac@mail.gmail.com>
Message-ID: <42DAE1AB.1090802@midnightcircus.com>

Jason Bainbridge wrote:
> Obviously both Admin and Editor have edit_others_posts as part of
> their role but the current permissions look for posts made by users of
> the same level or below so should this be changed just to check for
> Admin or Editor? Should Editor be able to edit posts by Admin?

No, this resolves to the general capability 'edit_posts'.  Just remember 
to pass the post ID as a second parameter to the current_user_can() 
function, like:

current_user_can('edit_posts', $post_id)

The map_meta_cap() function figures out what additional capabilities the 
current user needs based on the passed-in ID.

So to answer your last couple of questions, the Role of the user is 
irrelevant to the check.  Just check for the 'edit_posts' capability.

If the "Editor" has 'edit_others_posts', then obviously he can edit 
other's posts - yes, including those with the Role "Administrator", 
which is an arbitrary name assigned to a type of user with a certain 
list of capabilities.  The Role system makes no distinction of one role 
being more powerful than another.

On the other hand, we need to put a plugin hook in map_meta_caps() so 
that plugins can define additional capability requirements per post-ID, 
so that you can do things like protecting the posts of certain users 
from editing by other users that do have 'edit_others_posts'.  Or even 
crazy things like limiting editing permissions based on postmeta, which 
sounds like a cool thing to me.

Owen


From ringmaster at midnightcircus.com  Sun Jul 17 22:55:14 2005
From: ringmaster at midnightcircus.com (Owen Winkler)
Date: Sun Jul 17 22:55:54 2005
Subject: [wp-hackers] Patch for image thumbnail code.
In-Reply-To: <42DA9C2A.2000308@neuro-tech.net>
References: <42DA75E5.4060404@neuro-tech.net>	<a491f91d050717105314c5c477@mail.gmail.com>
	<42DA9C2A.2000308@neuro-tech.net>
Message-ID: <42DAE1D2.4070703@midnightcircus.com>

Luke Reeves wrote:
> Robert Deaton wrote:
> 
>>It's been said that Owen's new multimedia handling code will be
>>integrated into the core, which will fix this and add many more
>>features with images.
> 
> Yeah, I've read about that.  This tides my (few) users over until that
> code is in place.
> 

It's also a 1.6-only feature, so unless your users are guinea pigs, they 
shouldn't be running my stuff that soon anyway.

I've allocated the rest of the evening (minus pizza dinner with the 
family and a round of Legend of the Green Dragon) to that work.

Owen


From mikea at turbonet.com  Mon Jul 18 00:23:37 2005
From: mikea at turbonet.com (Michael D Adams)
Date: Mon Jul 18 00:22:27 2005
Subject: [wp-hackers] User Capabilities
In-Reply-To: <42DAE1AB.1090802@midnightcircus.com>
References: <1120196075.7972.0.camel@portnoy.fuzzybelly.org>	<1121183730.15653.10.camel@portnoy.fuzzybelly.org>	<CF5B2693-6BF6-42C0-AEB2-EC61C3B198B9@turbonet.com>	<d6491f4805071312074ea822e5@mail.gmail.com>	<1121283102.15653.62.camel@portnoy.fuzzybelly.org>	<42D57115.9060003@midnightcircus.com>	<1121284571.15653.67.camel@portnoy.fuzzybelly.org>	<ebe43d6805071404061ec6fb18@mail.gmail.com>	<1121637348.2111.1.camel@portnoy.fuzzybelly.org>	<1121637664.2111.5.camel@portnoy.fuzzybelly.org>
	<d6491f48050717152514ac19ac@mail.gmail.com>
	<42DAE1AB.1090802@midnightcircus.com>
Message-ID: <5CCA5F61-4AB4-48F9-A6C8-15C58B102830@turbonet.com>

On Jul 17, 2005, at 3:54 PM, Owen Winkler wrote:

> No, this resolves to the general capability 'edit_posts'.  Just  
> remember to pass the post ID as a second parameter to the  
> current_user_can() function, like:
>
> current_user_can('edit_posts', $post_id)

Do you mean 'edit_posts' or 'edit_post'  (plural or singular)?  It  
seems 'edit_post' is the the meta capability we're looking for here.
--Michael
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://comox.textdrive.com/pipermail/wp-hackers/attachments/20050718/563a2cbe/attachment.html
From ringmaster at midnightcircus.com  Mon Jul 18 01:58:09 2005
From: ringmaster at midnightcircus.com (Owen Winkler)
Date: Mon Jul 18 01:58:52 2005
Subject: [wp-hackers] User Capabilities
In-Reply-To: <5CCA5F61-4AB4-48F9-A6C8-15C58B102830@turbonet.com>
References: <1120196075.7972.0.camel@portnoy.fuzzybelly.org>	<1121183730.15653.10.camel@portnoy.fuzzybelly.org>	<CF5B2693-6BF6-42C0-AEB2-EC61C3B198B9@turbonet.com>	<d6491f4805071312074ea822e5@mail.gmail.com>	<1121283102.15653.62.camel@portnoy.fuzzybelly.org>	<42D57115.9060003@midnightcircus.com>	<1121284571.15653.67.camel@portnoy.fuzzybelly.org>	<ebe43d6805071404061ec6fb18@mail.gmail.com>	<1121637348.2111.1.camel@portnoy.fuzzybelly.org>	<1121637664.2111.5.camel@portnoy.fuzzybelly.org>	<d6491f48050717152514ac19ac@mail.gmail.com>	<42DAE1AB.1090802@midnightcircus.com>
	<5CCA5F61-4AB4-48F9-A6C8-15C58B102830@turbonet.com>
Message-ID: <42DB0CB1.1080705@midnightcircus.com>

Michael D Adams wrote:
> On Jul 17, 2005, at 3:54 PM, Owen Winkler wrote:
> 
>> No, this resolves to the general capability 'edit_posts'.  Just 
>> remember to pass the post ID as a second parameter to the 
>> current_user_can() function, like:
>>
>>
>> current_user_can('edit_posts', $post_id)
>>
> 
> Do you mean 'edit_posts' or 'edit_post'  (plural or singular)?  It seems 
> 'edit_post' is the the meta capability we're looking for here.
> --Michael

Yeah, what's that all about?  It's "edit_post" not "edit_posts".  That 
is, with "edit_post" supply a post ID, as if to ask "current user can 
edit post #4?"

Asking "current user can edit posts #4" makes less sense.

Owen



From dmhouse at gmail.com  Mon Jul 18 08:54:21 2005
From: dmhouse at gmail.com (David House)
Date: Mon Jul 18 08:54:28 2005
Subject: [wp-hackers] Patch for image thumbnail code.
In-Reply-To: <42DAE1D2.4070703@midnightcircus.com>
References: <42DA75E5.4060404@neuro-tech.net>
	<a491f91d050717105314c5c477@mail.gmail.com>
	<42DA9C2A.2000308@neuro-tech.net>
	<42DAE1D2.4070703@midnightcircus.com>
Message-ID: <ebe43d68050718015441a5082e@mail.gmail.com>

On 7/17/05, Owen Winkler <ringmaster@midnightcircus.com> wrote:
> I've allocated the rest of the evening (minus pizza dinner with the
> family and a round of Legend of the Green Dragon) to that work.

Hows the media stuff coming along? It's a major new feature for 1.6, I
was wandering if you have an estimate on how much more work will be
necessary for it? I guess the date it's ready really depends on when
you get to work on it, but it'd be nice to know how far along the
process you are.

-- 
-David House, dmhouse@gmail.com, http://xmouse.ithium.net
From dmhouse at gmail.com  Mon Jul 18 09:10:14 2005
From: dmhouse at gmail.com (David House)
Date: Mon Jul 18 09:10:22 2005
Subject: [wp-hackers] User Capabilities
In-Reply-To: <1121637348.2111.1.camel@portnoy.fuzzybelly.org>
References: <1120196075.7972.0.camel@portnoy.fuzzybelly.org>
	<42D3492E.7080007@midnightcircus.com>
	<1121183730.15653.10.camel@portnoy.fuzzybelly.org>
	<CF5B2693-6BF6-42C0-AEB2-EC61C3B198B9@turbonet.com>
	<d6491f4805071312074ea822e5@mail.gmail.com>
	<1121283102.15653.62.camel@portnoy.fuzzybelly.org>
	<42D57115.9060003@midnightcircus.com>
	<1121284571.15653.67.camel@portnoy.fuzzybelly.org>
	<ebe43d6805071404061ec6fb18@mail.gmail.com>
	<1121637348.2111.1.camel@portnoy.fuzzybelly.org>
Message-ID: <ebe43d6805071802101a867220@mail.gmail.com>

On 7/17/05, Ryan Boren <ryan@boren.nu> wrote:
> On Thu, 2005-07-14 at 12:06 +0100, David House wrote:
> > I think this is because WP_User::get_role_caps() is called from the
> > WP_User constructor, but at this time, the user doesn't have any
> > roles. The code in users.php to create a user looks like this:
> >
> > $user = new WP_User($user_ID);
> > $user->set_role(get_settings('default_role'));
> >
> > Now, WP_User::get_role_caps() will be called from the first statement,
> > but it's not until the second statement that the user gets a role set.
> > The warnings were all warnings to do with variables not being arrays:
> > foreach() and array_merge() were complaining. I'm pretty sure it's
> > replicatable; just try to create a user through the admin interface.
> 
> Should be fixed now.

It doesn't appear to be. Can no-one else replicate this?

Can you point me at the specific revision that fixed this?

-- 
-David House, dmhouse@gmail.com, http://xmouse.ithium.net
From podz at tamba2.org.uk  Mon Jul 18 09:23:05 2005
From: podz at tamba2.org.uk (Podz)
Date: Mon Jul 18 09:23:01 2005
Subject: [wp-hackers] Watermarking Images
Message-ID: <42DB74F9.60108@tamba2.org.uk>

http://www.sitepoint.com/article/watermark-images-php
Watermark Images on the Fly in PHP

Any chance this could make it's way into either a plugin or be an option 
in the core ?

P.
From dmhouse at gmail.com  Mon Jul 18 09:29:19 2005
From: dmhouse at gmail.com (David House)
Date: Mon Jul 18 09:29:24 2005
Subject: [wp-hackers] Watermarking Images
In-Reply-To: <42DB74F9.60108@tamba2.org.uk>
References: <42DB74F9.60108@tamba2.org.uk>
Message-ID: <ebe43d6805071802291e1409b7@mail.gmail.com>

On 7/18/05, Podz <podz@tamba2.org.uk> wrote:
> Any chance this could make it's way into either a plugin or be an option
> in the core ?

It's pretty likely someone will want to make it a plugin, but I doubt
it'd be well used enough to make it into the core. Especially as it
adds dependancies to WP (the GD libraries).

-- 
-David House, dmhouse@gmail.com, http://xmouse.ithium.net
From lorelle at cameraontheroad.com  Mon Jul 18 14:07:53 2005
From: lorelle at cameraontheroad.com (Lorelle VanFossen)
Date: Mon Jul 18 14:08:35 2005
Subject: [wp-hackers] Help Promote WordPress Backup Week
Message-ID: <42DBB7B9.6010408@cameraontheroad.com>

Below is another press release for backup week.  PLEASE post it on your 
blogs, email it to friends, and edit it however you like. Also, this is 
an "official" press release from WordPress so do not use phrases like 
"Lorelle says". Just copy and paste the information below onto your site 
or emails, or rewrite it yourself with some sob story about your 
computer or server crashing to help everyone understand that BACKING UP 
is a good thing. Even if the story does not pertain to WordPress.  The 
Forum and Codex volunteers need your help to get this unusual event 
promoted. It begins in five days, so we need help from all of you. Thanks.

===============

WordPress is celebrating blog security and protection with WordPress 
Backup Week July 23-30.

WordPress, one of the most popular blogging and website management 
tools, is sponsoring WordPress Backup Week July 23-30. Step-by-step 
backup instructions will be available in the online manual, the 
WordPress Codex (http://codex.wordpress.org), and online in the 
WordPress Support Forum (http://www.wordpress.org/support) to help you 
through the process.

Your database contains every post, every comment and every link you have 
on your blog. If your database gets erased or corrupted, you stand to 
lose everything you have written. There are many reasons why this could 
happen and not all are things you can control. But what you can do is 
backup your data, after all, it is important isn't it? Making backups is 
essential because problems inevitably occur and you need to be in a 
position to take action when disaster strikes. Spending a few minutes to 
make an easy, convenient backup of your database will allow you to spend 
even more time being creative and productive with your web site.

Backing up your WordPress database has never been easier with WordPress 
plugins which allow you control over how, what, and when you backup, 
even emailing your database backups to you - all pain free.  
Documentation is available to take you through the step-by-step process, 
as well, for backing up your WordPress site and database with cPanel, 
vDeck, DirectAdmin, Plesk, and others.

For your own protection and security, and peace of mind, join us in 
learning how to backup and protect our valuable data and writings during 
WordPress Backup Week. Consider using this Backup Week as an incentive 
to backup all your valuable documents and software, too.


From lorelle at cameraontheroad.com  Mon Jul 18 15:42:35 2005
From: lorelle at cameraontheroad.com (Lorelle VanFossen)
Date: Mon Jul 18 15:43:56 2005
Subject: [wp-hackers] WordPress Backup Sob Stories
Message-ID: <42DBCDEB.4080809@cameraontheroad.com>

As promised, WordPress Backup Sob Stories has been posted on the Forum 
at http://wordpress.org/support/topic/39496

We need your whines, woes, suffering, and lessons learned from the 
agonies of losing your data, WordPress or otherwise.  This will not only 
help promote WordPress Backup Week, it will help others learn:

1) How important it is to backup your data
2) How to backup your data in WordPress
3) Spread the news that WordPress Backups are easy to do
4) Spread the news that WordPress is cool stuff

Your help and stories are greatly appreciated!

Lorelle and Podz

From jbainbridge at gmail.com  Mon Jul 18 15:59:04 2005
From: jbainbridge at gmail.com (Jason Bainbridge)
Date: Mon Jul 18 15:59:39 2005
Subject: [wp-hackers] WordPress Backup Sob Stories
In-Reply-To: <42DBCDEB.4080809@cameraontheroad.com>
References: <42DBCDEB.4080809@cameraontheroad.com>
Message-ID: <d6491f48050718085939842c97@mail.gmail.com>

On 7/18/05, Lorelle VanFossen <lorelle@cameraontheroad.com> wrote:
> As promised, WordPress Backup Sob Stories has been posted on the Forum
> at http://wordpress.org/support/topic/39496
> 
> We need your whines, woes, suffering, and lessons learned from the
> agonies of losing your data, WordPress or otherwise.  This will not only
> help promote WordPress Backup Week, it will help others learn:
> 
> 1) How important it is to backup your data
> 2) How to backup your data in WordPress
> 3) Spread the news that WordPress Backups are easy to do
> 4) Spread the news that WordPress is cool stuff
> 

Just out of curiosity where are all these people hosted that don't get
nightly backups by their host anyway? Although redundancy is always a
good thing wouldn't it have to be rare for the host provided backup to
fail?

It just seems hard to give this the proper spin that is all.

Regards,
-- 
Jason Bainbridge
http://kde.org - webmaster@kde.org
Personal Site - http://jasonbainbridge.com
From podz at tamba2.org.uk  Mon Jul 18 16:06:55 2005
From: podz at tamba2.org.uk (Podz)
Date: Mon Jul 18 16:06:49 2005
Subject: [wp-hackers] WordPress Backup Sob Stories
In-Reply-To: <d6491f48050718085939842c97@mail.gmail.com>
References: <42DBCDEB.4080809@cameraontheroad.com>
	<d6491f48050718085939842c97@mail.gmail.com>
Message-ID: <42DBD39F.7000403@tamba2.org.uk>

Jason Bainbridge wrote:
> Just out of curiosity where are all these people hosted that don't get
> nightly backups by their host anyway? Although redundancy is always a
> good thing wouldn't it have to be rare for the host provided backup to
> fail?
> 
> It just seems hard to give this the proper spin that is all.
> 

It's partly to get people used to the idea that they can control this. 
We get a fair number of questions about the topic.

And although I agree about the host backup, I wonder how many people on 
this list also backup their data ?

P.
From fdevillamil at gmail.com  Mon Jul 18 16:14:47 2005
From: fdevillamil at gmail.com (Frederic de Villamil)
Date: Mon Jul 18 16:15:56 2005
Subject: [wp-hackers] WordPress Backup Sob Stories
In-Reply-To: <42DBD39F.7000403@tamba2.org.uk>
References: <42DBCDEB.4080809@cameraontheroad.com>
	<d6491f48050718085939842c97@mail.gmail.com>
	<42DBD39F.7000403@tamba2.org.uk>
Message-ID: <20050718161315.M30558@7el.net>

On Mon, 18 Jul 2005 17:06:55 +0100, Podz wrote
> Jason Bainbridge wrote:
> > Just out of curiosity where are all these people hosted that don't get
> > nightly backups by their host anyway? Although redundancy is always a
> > good thing wouldn't it have to be rare for the host provided backup to
> > fail?
> > 
> > It just seems hard to give this the proper spin that is all.
> >
> 
> It's partly to get people used to the idea that they can control 
> this. We get a fair number of questions about the topic.
> 
> And although I agree about the host backup, I wonder how many people 
> on this list also backup their data ?
> 

Daily backup of all files + database + configuration file of my server sent
via scp on my home machine and automated rewritable DVD burning at 4am with
the new data + the ones from yesterday.
Less than 20 lines of shellscript can save your life :-)

--
Fr?d?ric de Villamil
Ce qui est ? moi est ? moi, ce qui est ? toi ?a se n?gocie. (proverbe motokiste)
http://www.eretzvaju.org

From r at schestowitz.com  Mon Jul 18 16:20:04 2005
From: r at schestowitz.com (Roy Schestowitz)
Date: Mon Jul 18 16:20:19 2005
Subject: [wp-hackers] WordPress Backup Sob Stories
In-Reply-To: <d6491f48050718085939842c97@mail.gmail.com>
References: <42DBCDEB.4080809@cameraontheroad.com>
	<d6491f48050718085939842c97@mail.gmail.com>
Message-ID: <20050718172004.rmbk0kdve9f4sgog@banana.catalyst2.com>

Quoting Jason Bainbridge:

> On 7/18/05, Lorelle VanFossen <lorelle@cameraontheroad.com> wrote:
>> As promised, WordPress Backup Sob Stories has been posted on the Forum
>> at http://wordpress.org/support/topic/39496
>>
>> We need your whines, woes, suffering, and lessons learned from the
>> agonies of losing your data, WordPress or otherwise.  This will not only
>> help promote WordPress Backup Week, it will help others learn:
>>
>> 1) How important it is to backup your data
>> 2) How to backup your data in WordPress
>> 3) Spread the news that WordPress Backups are easy to do
>> 4) Spread the news that WordPress is cool stuff
>>
>
> Just out of curiosity where are all these people hosted that don't get
> nightly backups by their host anyway? Although redundancy is always a
> good thing wouldn't it have to be rare for the host provided backup to
> fail?
>
> It just seems hard to give this the proper spin that is all.

You are very much right Jason, but the situation will vary across 
hosts. Having
nightly backups means that at least twice as much space needs to be allocated
per account. If a host assigns a single server to 300 domains, duplication of
data requires a second server (or cheaper, more versatile storage unit) that
has the same capacity. Therefore, the expenses can easily double. Backups at
the host-side are extremely important if the client has a slow 
connection or is
unable to make back-ups remotely.

Lorelle, backing up the databases is one thing. Anybody whose host does not
mirror the home directory overnight is not worth doing business with. The
exception is when the user has a very high speed connection or can set up a
cron job to fetch back-ups at nighttime (if the connection speed is low).

Roy


-- 
Roy S. Schestowitz
http://Schestowitz.com

From podz at tamba2.org.uk  Mon Jul 18 16:28:33 2005
From: podz at tamba2.org.uk (Podz)
Date: Mon Jul 18 16:28:27 2005
Subject: [wp-hackers] WordPress Backup Sob Stories
In-Reply-To: <20050718172004.rmbk0kdve9f4sgog@banana.catalyst2.com>
References: <42DBCDEB.4080809@cameraontheroad.com>	<d6491f48050718085939842c97@mail.gmail.com>
	<20050718172004.rmbk0kdve9f4sgog@banana.catalyst2.com>
Message-ID: <42DBD8B1.8050501@tamba2.org.uk>

Roy Schestowitz wrote:
> 
> Lorelle, backing up the databases is one thing. Anybody whose host does not
> mirror the home directory overnight is not worth doing business with. The
> exception is when the user has a very high speed connection or can set up a
> cron job to fetch back-ups at nighttime (if the connection speed is low).

I started this whole thing, along with writing the original guides for 
people. This was done due to a very high level of questions in the 
forums - it wasn't done for fun :) And answering those questions time 
after time gets really tedious.
This thing is user-led, and we cater for all users.

Remember as well that people may want to move hosts, create a dupe blog 
for testing, move their blog inside their machine. There are other 
reasons apart from a crash that people may want a backup to work with.

This is not a bad thing.

P.
From lorelle at cameraontheroad.com  Mon Jul 18 20:40:29 2005
From: lorelle at cameraontheroad.com (Lorelle VanFossen)
Date: Mon Jul 18 20:41:59 2005
Subject: [wp-hackers] Version 1.6 Suggestions on Codex
Message-ID: <42DC13BD.6040305@cameraontheroad.com>

http://codex.wordpress.org/Version_1.6 is the page on the Codex that is 
the collection point for suggestions for the next version of WordPress. 
The list has become extremely confusing and long in the tooth and was 
beginning to get repeat suggestions. It's been cleaned up and organized 
and structured so that related requests are collected together, such as 
improvements to the Admin Panels, Uploads, Image handling, Themes and 
Templates and so on.

We hope that this will not only help you and the developers, but it will 
help people as they submit their suggestions.

Please review and move things around to help the structure.

Lorelle

From chris.lott at gmail.com  Tue Jul 19 00:57:00 2005
From: chris.lott at gmail.com (Chris Lott)
Date: Tue Jul 19 00:58:00 2005
Subject: [wp-hackers] WordPress Backup Sob Stories
In-Reply-To: <42DBD8B1.8050501@tamba2.org.uk>
References: <42DBCDEB.4080809@cameraontheroad.com>
	<d6491f48050718085939842c97@mail.gmail.com>
	<20050718172004.rmbk0kdve9f4sgog@banana.catalyst2.com>
	<42DBD8B1.8050501@tamba2.org.uk>
Message-ID: <9b1b9dab05071817574a6ea730@mail.gmail.com>

Unfortunately, you often don't find out that what your host DOES and
what they SAY they do are two different things until disaster strikes.
For that reason, it's never a bad thing to take some control, even if
it is potentially "redundant."

c
--
Chris Lott
From davebytes at comcast.net  Tue Jul 19 01:13:57 2005
From: davebytes at comcast.net (David Chait)
Date: Tue Jul 19 01:14:03 2005
Subject: [wp-hackers] WordPress Backup Sob Stories
References: <42DBCDEB.4080809@cameraontheroad.com>
	<d6491f48050718085939842c97@mail.gmail.com>
Message-ID: <006601c58bff$2308d570$6e01a8c0@sixfour>

lots of smaller hosts, free hosts, resellers, etc., don't have automated 
backups.  even some of the more established hosts may make you pay for 
backup space or auto-backups.  In the case that they do backups at some 
point, maybe the top folks do nightlies, some may do weekly, some may do 
monthly.

don't trust your data is backed up by a third-party, unless you are 
 >explicitly< paying them for nightly backups of your webserver and dbserver 
files...  And even then, catastrophic things happen.  Backups done to a 
secondary server can be botched.  Viruses/trojans can wipe machines.  etc.

-d

----- Original Message ----- 
From: "Jason Bainbridge" <jbainbridge@gmail.com>
To: <wp-hackers@lists.automattic.com>
Sent: Monday, July 18, 2005 11:59 AM
Subject: Re: [wp-hackers] WordPress Backup Sob Stories

Just out of curiosity where are all these people hosted that don't get
nightly backups by their host anyway? Although redundancy is always a
good thing wouldn't it have to be rare for the host provided backup to
fail?

From dmhouse at gmail.com  Tue Jul 19 08:52:35 2005
From: dmhouse at gmail.com (David House)
Date: Tue Jul 19 08:53:06 2005
Subject: [wp-hackers] Version 1.6 Suggestions on Codex
In-Reply-To: <42DC13BD.6040305@cameraontheroad.com>
References: <42DC13BD.6040305@cameraontheroad.com>
Message-ID: <ebe43d6805071901525ea5f868@mail.gmail.com>

On 7/18/05, Lorelle VanFossen <lorelle@cameraontheroad.com> wrote:
> http://codex.wordpress.org/Version_1.6 is the page on the Codex that is
> the collection point for suggestions for the next version of WordPress.
> The list has become extremely confusing and long in the tooth and was
> beginning to get repeat suggestions. It's been cleaned up and organized
> and structured so that related requests are collected together, such as
> improvements to the Admin Panels, Uploads, Image handling, Themes and
> Templates and so on.

Brilliant work! I've added a few words to encourage new entries to be
posted to the appropriate section.

-- 
-David House, dmhouse@gmail.com, http://xmouse.ithium.net
From xavier.roy at wipro.com  Tue Jul 19 10:40:11 2005
From: xavier.roy at wipro.com (Xavier Roy)
Date: Tue Jul 19 10:40:37 2005
Subject: [wp-hackers] How do you downgrade?
Message-ID: <BLR-M3-MSGuMhvqgStM0000063a@blr-m3-msg.wipro.com>


Hi,
 
    Anyone got any ideas on how to downgrade from a WP1.6 alpha to WP1.5?
 
Thanks,
Xavier




Confidentiality Notice 

The information contained in this electronic message and any attachments to this message are intended
for the exclusive use of the addressee(s) and may contain confidential or privileged information. If
you are not the intended recipient, please notify the sender at Wipro or Mailadmin@wipro.com immediately
and destroy all copies of this message and any attachments.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://comox.textdrive.com/pipermail/wp-hackers/attachments/20050719/9e9d89eb/attachment.html
From denis at semiologic.com  Tue Jul 19 11:00:46 2005
From: denis at semiologic.com (Denis de Bernardy)
Date: Tue Jul 19 11:02:00 2005
Subject: [wp-hackers] How do you downgrade?
In-Reply-To: <BLR-M3-MSGuMhvqgStM0000063a@blr-m3-msg.wipro.com>
Message-ID: <000601c58c51$1d80d830$6602a8c0@DB>

1.6 is alpha do-not-use software.

If you forgot to backup, locate changes to the DB via the upgrade.php
script, and good luck.

D.



> -----Original Message-----
> From: wp-hackers-bounces@lists.automattic.com 
> [mailto:wp-hackers-bounces@lists.automattic.com] On Behalf Of 
> Xavier Roy
> Sent: Tuesday, July 19, 2005 12:40 PM
> To: wp-hackers@lists.automattic.com
> Subject: [wp-hackers] How do you downgrade?
> 
> 
> Hi,
>  
>     Anyone got any ideas on how to downgrade from a WP1.6 
> alpha to WP1.5?
>  
> Thanks,
> Xavier
> 
> 
> Confidentiality Notice 
> 
> The information contained in this electronic message and any 
> attachments to this message are intended for the exclusive 
> use of the addressee(s) and may contain confidential or 
> privileged information. If you are not the intended 
> recipient, please notify the sender at Wipro or 
> Mailadmin@wipro.com immediately and destroy all copies of 
> this message and any attachments.
> 	
> 

From xavier.roy at wipro.com  Tue Jul 19 11:53:35 2005
From: xavier.roy at wipro.com (Xavier Roy)
Date: Tue Jul 19 11:53:44 2005
Subject: [wp-hackers] How do you downgrade?
In-Reply-To: <000601c58c51$1d80d830$6602a8c0@DB>
References: <000601c58c51$1d80d830$6602a8c0@DB>
Message-ID: <42DCE9BF.60406@wipro.com>



>1.6 is alpha do-not-use software.
>  
>
Yeah, I know  ;-) Everything was working fine till a few hours ago on 
July 18th's nightly. When I upgraded to July 19th's nightly, everything 
went kaput. On upgrading, I am sent to the profile page and got this 
message: "You do not have sufficient permissions to access this page."

Anyone else facing this issue?

>If you forgot to backup, locate changes to the DB via the upgrade.php
>script, and good luck.
>  
>
Of course, I need all the luck in the world if I am to get things back 
to the way they were. :-)

Xavier.




Confidentiality Notice 

The information contained in this electronic message and any attachments to this message are intended
for the exclusive use of the addressee(s) and may contain confidential or privileged information. If
you are not the intended recipient, please notify the sender at Wipro or Mailadmin@wipro.com immediately
and destroy all copies of this message and any attachments.
From ryan at ryanduff.net  Tue Jul 19 11:59:58 2005
From: ryan at ryanduff.net (Ryan Duff)
Date: Tue Jul 19 12:00:04 2005
Subject: [wp-hackers] How do you downgrade?
In-Reply-To: <42DCE9BF.60406@wipro.com>
References: <000601c58c51$1d80d830$6602a8c0@DB> <42DCE9BF.60406@wipro.com>
Message-ID: <42DCEB3E.8060508@ryanduff.net>

Xavier Roy wrote:

>> 1.6 is alpha do-not-use software.
>>  
>>
> Yeah, I know  ;-) Everything was working fine till a few hours ago on 
> July 18th's nightly. When I upgraded to July 19th's nightly, everything 
> went kaput. On upgrading, I am sent to the profile page and got this 
> message: "You do not have sufficient permissions to access this page."
> 
> Anyone else facing this issue?

Your best bet is to post to the testers list and not the hackers list 
(if you're actually testing the software for bugs).

>> If you forgot to backup, locate changes to the DB via the upgrade.php
>> script, and good luck.
>>  
>>
> Of course, I need all the luck in the world if I am to get things back 
> to the way they were. :-)

Please tell me you were not using this on a production blog. If you're 
lucky, another nightly in the near future might fix this and put you 
back to a near-working environment. Please heed the warnings next time.

Ryan Duff
http://ryanduff.net
AIM: ryancduff
irc.freenode.net #wordpress
From ryan at boren.nu  Tue Jul 19 14:29:08 2005
From: ryan at boren.nu (Ryan Boren)
Date: Tue Jul 19 14:29:24 2005
Subject: [wp-hackers] How do you downgrade?
In-Reply-To: <42DCE9BF.60406@wipro.com>
References: <000601c58c51$1d80d830$6602a8c0@DB>  <42DCE9BF.60406@wipro.com>
Message-ID: <1121783348.8029.10.camel@portnoy.fuzzybelly.org>

On Tue, 2005-07-19 at 17:23 +0530, Xavier Roy wrote:
> 
> >1.6 is alpha do-not-use software.
> >  
> >
> Yeah, I know  ;-) Everything was working fine till a few hours ago on 
> July 18th's nightly. When I upgraded to July 19th's nightly, everything 
> went kaput. On upgrading, I am sent to the profile page and got this 
> message: "You do not have sufficient permissions to access this page."
> 
> Anyone else facing this issue?

The current user level to capability upgrade code is meant to be run
coming from a 1.5.x DB.  To help us out during the 1.6 development
cycle, I refactored the upgrade code so that it does the right thing
when run from either 1.5.x or from a previous 1.6 nightly.

http://trac.wordpress.org/changeset/2727

As mentioned on the testers list, I also added some code that will reset
all roles and capabilities during upgrade if a RESET_CAPS flag is set.  
Add the following to wp-config.php to enable the cap/role resetter.
With RESET_CAPS enabled, updates to the roles will be blown into your DB
each time you upgrade.

define('RESET_CAPS', true);

Ryan

From ryan at boren.nu  Tue Jul 19 14:38:19 2005
From: ryan at boren.nu (Ryan Boren)
Date: Tue Jul 19 14:38:25 2005
Subject: [wp-hackers] User Capabilities
In-Reply-To: <42DB0CB1.1080705@midnightcircus.com>
References: <1120196075.7972.0.camel@portnoy.fuzzybelly.org>
	<1121183730.15653.10.camel@portnoy.fuzzybelly.org>
	<CF5B2693-6BF6-42C0-AEB2-EC61C3B198B9@turbonet.com>
	<d6491f4805071312074ea822e5@mail.gmail.com>
	<1121283102.15653.62.camel@portnoy.fuzzybelly.org>
	<42D57115.9060003@midnightcircus.com>
	<1121284571.15653.67.camel@portnoy.fuzzybelly.org>
	<ebe43d6805071404061ec6fb18@mail.gmail.com>
	<1121637348.2111.1.camel@portnoy.fuzzybelly.org>
	<1121637664.2111.5.camel@portnoy.fuzzybelly.org>
	<d6491f48050717152514ac19ac@mail.gmail.com>
	<42DAE1AB.1090802@midnightcircus.com>
	<5CCA5F61-4AB4-48F9-A6C8-15C58B102830@turbonet.com>
	<42DB0CB1.1080705@midnightcircus.com>
Message-ID: <1121783900.8029.15.camel@portnoy.fuzzybelly.org>

On Sun, 2005-07-17 at 21:58 -0400, Owen Winkler wrote:
> Michael D Adams wrote:
> > On Jul 17, 2005, at 3:54 PM, Owen Winkler wrote:
> > 
> >> No, this resolves to the general capability 'edit_posts'.  Just 
> >> remember to pass the post ID as a second parameter to the 
> >> current_user_can() function, like:
> >>
> >>
> >> current_user_can('edit_posts', $post_id)
> >>
> > 
> > Do you mean 'edit_posts' or 'edit_post'  (plural or singular)?  It seems 
> > 'edit_post' is the the meta capability we're looking for here.
> > --Michael
> 
> Yeah, what's that all about?  It's "edit_post" not "edit_posts".  That 
> is, with "edit_post" supply a post ID, as if to ask "current user can 
> edit post #4?"
> 
> Asking "current user can edit posts #4" makes less sense.

If we're doing that somewhere, it's broken.

To clarify for everyone, edit_posts is the primitive cap used to
determine if a user has the generic "can edit posts" capability.
edit_post is a meta cap that determines whether the user has the
capability to edit a specific post. edit_post requires a post ID.
edit_posts does not.

Ryan

From podz at tamba2.org.uk  Tue Jul 19 17:17:58 2005
From: podz at tamba2.org.uk (Podz)
Date: Tue Jul 19 17:17:57 2005
Subject: [wp-hackers] Theme Creation on Install ?
Message-ID: <42DD35C6.4000908@tamba2.org.uk>

Noticed a post on the forum.
http://wordpress.org/support/topic/39579
thought nothing of it then.

Just now I set up a local testblog.
Install
It asks for name of blog
Install proceeds just fine.

I then see that in /themes/ I now have a theme called after my blog.
So I have Classic, Default and Test4

When did this happen ? Why ? For what reason ?
It's already getting us confused.

P.
From jbainbridge at gmail.com  Tue Jul 19 17:32:21 2005
From: jbainbridge at gmail.com (Jason Bainbridge)
Date: Tue Jul 19 17:32:58 2005
Subject: [wp-hackers] Theme Creation on Install ?
In-Reply-To: <42DD35C6.4000908@tamba2.org.uk>
References: <42DD35C6.4000908@tamba2.org.uk>
Message-ID: <d6491f48050719103237382ce5@mail.gmail.com>

On 7/19/05, Podz <podz@tamba2.org.uk> wrote:
> Noticed a post on the forum.
> http://wordpress.org/support/topic/39579
> thought nothing of it then.
> 
> Just now I set up a local testblog.
> Install
> It asks for name of blog
> Install proceeds just fine.
> 
> I then see that in /themes/ I now have a theme called after my blog.
> So I have Classic, Default and Test4
> 
> When did this happen ? Why ? For what reason ?
> It's already getting us confused.

I noticed that myself the other day, the changeset that implemented it was:

http://trac.wordpress.org/changeset/2037

But that was back in January and I'm sure that theme didn't pop up
until recently.

Regards,
-- 
Jason Bainbridge
http://kde.org - webmaster@kde.org
Personal Site - http://jasonbainbridge.com
From m at mullenweg.com  Tue Jul 19 18:09:32 2005
From: m at mullenweg.com (Matt Mullenweg)
Date: Tue Jul 19 18:09:39 2005
Subject: [wp-hackers] Theme Creation on Install ?
In-Reply-To: <d6491f48050719103237382ce5@mail.gmail.com>
References: <42DD35C6.4000908@tamba2.org.uk>
	<d6491f48050719103237382ce5@mail.gmail.com>
Message-ID: <42DD41DC.2020307@mullenweg.com>

Jason Bainbridge wrote:
> I noticed that myself the other day, the changeset that implemented it was:
> 
> http://trac.wordpress.org/changeset/2037
> 
> But that was back in January and I'm sure that theme didn't pop up
> until recently.

Part of the problem we noted at the time is that if you change the name 
of your blog and re-upgrade it'll create a new theme. This is still 
unresolved. Maybe we should use the domain instead of the name?

-- 
Matt Mullenweg
http://photomatt.net  | http://wordpress.org
http://pingomatic.com | http://cnet.com
From podz at tamba2.org.uk  Tue Jul 19 18:16:34 2005
From: podz at tamba2.org.uk (Podz)
Date: Tue Jul 19 18:16:33 2005
Subject: [wp-hackers] Theme Creation on Install ?
In-Reply-To: <42DD41DC.2020307@mullenweg.com>
References: <42DD35C6.4000908@tamba2.org.uk>	<d6491f48050719103237382ce5@mail.gmail.com>
	<42DD41DC.2020307@mullenweg.com>
Message-ID: <42DD4382.9040109@tamba2.org.uk>

Matt Mullenweg wrote:
> Part of the problem we noted at the time is that if you change the name 
> of your blog and re-upgrade it'll create a new theme. This is still 
> unresolved. Maybe we should use the domain instead of the name?
> 

The user who posted had a permissions problem.
WP generated an error because it could not write to a folder that it 
just made.
I can't see why this is being done on install - I'm sure it will lead to 
many forum posts though.

P.
From jbainbridge at gmail.com  Tue Jul 19 18:25:48 2005
From: jbainbridge at gmail.com (Jason Bainbridge)
Date: Tue Jul 19 18:26:26 2005
Subject: [wp-hackers] Theme Creation on Install ?
In-Reply-To: <42DD41DC.2020307@mullenweg.com>
References: <42DD35C6.4000908@tamba2.org.uk>
	<d6491f48050719103237382ce5@mail.gmail.com>
	<42DD41DC.2020307@mullenweg.com>
Message-ID: <d6491f4805071911251d7dd9b@mail.gmail.com>

On 7/19/05, Matt Mullenweg <m@mullenweg.com> wrote:
> Jason Bainbridge wrote:
> > I noticed that myself the other day, the changeset that implemented it was:
> >
> > http://trac.wordpress.org/changeset/2037
> >
> > But that was back in January and I'm sure that theme didn't pop up
> > until recently.
> 
> Part of the problem we noted at the time is that if you change the name
> of your blog and re-upgrade it'll create a new theme. This is still
> unresolved. Maybe we should use the domain instead of the name?

That would explain it... 

I'm guessing this is so people can edit their theme instead of the
default so their changes don't get clobbered when they upgrade,
correct? If so then wouldn't a generic name like "Your theme" be good
enough for them to start with and then provide instructions for users
to the effect that they should edit that theme and not the default
plus givie it a more descriptive name etc etc?

Regards,
-- 
Jason Bainbridge
http://kde.org - webmaster@kde.org
Personal Site - http://jasonbainbridge.com
From denis at semiologic.com  Tue Jul 19 18:27:32 2005
From: denis at semiologic.com (Denis de Bernardy)
Date: Tue Jul 19 18:27:41 2005
Subject: [wp-hackers] =?iso-8859-1?q?=FCbernerd?=
Message-ID: <000601c58c8f$878a0ab0$6602a8c0@DB>

http://wordpress.org/support/

I hate to point this out, but sending application/xml headers on
wordpress.org is ?bernerdy. Or then, at least ensure that user-inserted data
validates.

XML Parsing Error: undefined entity Location: http://wordpress.org/support/
Line Number 172, Column 67: <td><a
href="http://wordpress.org/support/topic/39595">HELP with &Apos;</a></td>
------------------------------------------------------------------^

(via FF, WinXP)

D.

From m at mullenweg.com  Tue Jul 19 18:29:24 2005
From: m at mullenweg.com (Matt Mullenweg)
Date: Tue Jul 19 18:52:55 2005
Subject: [wp-hackers] =?ISO-8859-1?Q?=FCbernerd?=
In-Reply-To: <000601c58c8f$878a0ab0$6602a8c0@DB>
References: <000601c58c8f$878a0ab0$6602a8c0@DB>
Message-ID: <42DD4684.8020003@mullenweg.com>

Denis de Bernardy wrote:
> I hate to point this out, but sending application/xml headers on
> wordpress.org is ?bernerdy. Or then, at least ensure that user-inserted data
> validates.

We've been doing it for almost two years now, and probably the largest 
site in the world that does.

We do a bit of validation, but fake entities aren't checked.

-- 
Matt Mullenweg
http://photomatt.net  | http://wordpress.org
http://pingomatic.com | http://cnet.com
From denis at semiologic.com  Tue Jul 19 19:00:02 2005
From: denis at semiologic.com (Denis de Bernardy)
Date: Tue Jul 19 19:00:21 2005
Subject: =?iso-8859-1?Q?RE:_=5Bwp-hackers=5D_=FCbernerd?=
In-Reply-To: <42DD4684.8020003@mullenweg.com>
Message-ID: <000001c58c94$1233cbc0$6602a8c0@DB>

Aye, so you would be the ?bernerd. ;)

Now... where did I see that nerd test again... Oh yes!

http://www.nerdtests.com/ft_nq.php

D.

> -----Original Message-----
> From: wp-hackers-bounces@lists.automattic.com 
> [mailto:wp-hackers-bounces@lists.automattic.com] On Behalf Of 
> Matt Mullenweg
> Sent: Tuesday, July 19, 2005 8:29 PM
> To: wp-hackers@lists.automattic.com
> Subject: Re: [wp-hackers] ?bernerd
> 
> 
> Denis de Bernardy wrote:
> > I hate to point this out, but sending application/xml headers on 
> > wordpress.org is ?bernerdy. Or then, at least ensure that 
> > user-inserted data validates.
> 
> We've been doing it for almost two years now, and probably 
> the largest 
> site in the world that does.
> 
> We do a bit of validation, but fake entities aren't checked.
> 
> -- 
> Matt Mullenweg
> http://photomatt.net  | http://wordpress.org 
> http://pingomatic.com | http://cnet.com 
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com 
> http://lists.automattic.com/mailman/listinfo/wp-hackers
> 

From skippy at skippy.net  Tue Jul 19 19:14:58 2005
From: skippy at skippy.net (Scott Merrill)
Date: Tue Jul 19 19:15:00 2005
Subject: [wp-hackers] Theme Creation on Install ?
In-Reply-To: <d6491f4805071911251d7dd9b@mail.gmail.com>
References: <42DD35C6.4000908@tamba2.org.uk>	<d6491f48050719103237382ce5@mail.gmail.com>	<42DD41DC.2020307@mullenweg.com>
	<d6491f4805071911251d7dd9b@mail.gmail.com>
Message-ID: <42DD5132.7090207@skippy.net>

Jason Bainbridge wrote:
> I'm guessing this is so people can edit their theme instead of the
> default so their changes don't get clobbered when they upgrade,
> correct? If so then wouldn't a generic name like "Your theme" be good
> enough for them to start with and then provide instructions for users
> to the effect that they should edit that theme and not the default
> plus givie it a more descriptive name etc etc?

Arguably, "default" should be the default theme at installation as
generated by this process, instead of the blog name.  The current
"default" theme could be renamed to something else ("Kubrick"?) and
"Classic" could remain named as is.

-- 
skippy@skippy.net | http://skippy.net/

gpg --keyserver pgp.mit.edu --recv-keys 9CFA4B35
506C F8BB 17AE 8A05 0B49  3544 476A 7DEC 9CFA 4B35
From podz at tamba2.org.uk  Wed Jul 20 15:33:07 2005
From: podz at tamba2.org.uk (Podz)
Date: Wed Jul 20 15:33:16 2005
Subject: [wp-hackers] Recent Comments Plugins.
Message-ID: <42DE6EB3.10804@tamba2.org.uk>

http://wordpress.org/support/topic/39637
"DreamHost support: I've temporarily disabled your database because you 
are running a query that is hitting the database too hard."

This is not the first time that we've had a "My host shut me down" post 
where a plugin is concerned. I'm sure I posted a while ago about this.
Given that these plugins will be used, and that some sites state that 
they are a good thing to use as they can increase interaction (I'm the 
messanger here, okay), then can someone advise as to which are the bad 
guys ? These are the ones I could find right now:

Name: Get Recent Comments
http://wp-plugins.net/index.php?id=100

Name: Recent Comments Grouped By Post
http://wp-plugins.net/index.php?id=169

Name: Fuzzy recent comments
http://wp-plugins.net/index.php?id=236

http://www.coffee2code.com/archives/2005/03/30/plugin-customizable-comment-listings/

http://dev.wp-plugins.org/browser/recent-comments/

http://meidell.dk/archives/2005/07/17/brians-latest-comments-152/

The vast majority of people whose use these do so in good faith and 
although there will be users who do daft things like display the last 40 
comments, and yes I know that some of these work differently to others, 
but those issues aside for the average user, which of these are the 
least likely to get a host shutting down a site ?
Or do I install each one in turn, run 10 comments through them while 
using the Query Diagnostics plugin and then rank according to time taken 
? I somehow think I'd get yelled at if I did that.
Any and all advice would be great.

P.
From fdevillamil at gmail.com  Wed Jul 20 15:43:24 2005
From: fdevillamil at gmail.com (Frederic de Villamil)
Date: Wed Jul 20 15:44:46 2005
Subject: [wp-hackers] Recent Comments Plugins.
In-Reply-To: <42DE6EB3.10804@tamba2.org.uk>
References: <42DE6EB3.10804@tamba2.org.uk>
Message-ID: <20050720153756.M66211@7el.net>

Hi Podz, list,
I've just done such a benchmark on the application I'm developping at work,
and I've done it according to:
1/ time taken to execute the whole stuff (a page displaying in more than 1
second was automagically sent back to the developper).
2/ number of requests used by each page to display. 
3/ the server load average for each page. Sometimes, bad joins can produce
incredibly high load on a mySQL server.
That's what I would take into account if I wanted to test all those plugins.

Maybe plugin developpers should also warn users above a certain number of
comments displayed. I'll have a look at those plugins SQL request to see if
nothing's wrong with them as soon as I'm home.

And don't fear to be yelled at just because you recommand a plugin for its
ability not to charge too much a server, I think it's just natural selection
process.
Regards
Frederic / neuro


On Wed, 20 Jul 2005 16:33:07 +0100, Podz wrote
> http://wordpress.org/support/topic/39637
> "DreamHost support: I've temporarily disabled your database because 
> you are running a query that is hitting the database too hard."
> 
> This is not the first time that we've had a "My host shut me down" 
> post where a plugin is concerned. I'm sure I posted a while ago 
> about this. Given that these plugins will be used, and that some 
> sites state that they are a good thing to use as they can increase 
> interaction (I'm the messanger here, okay), then can someone advise 
> as to which are the bad guys ? These are the ones I could find right 
> now:
> 
> Name: Get Recent Comments
> http://wp-plugins.net/index.php?id=100
> 
> Name: Recent Comments Grouped By Post
> http://wp-plugins.net/index.php?id=169
> 
> Name: Fuzzy recent comments
> http://wp-plugins.net/index.php?id=236
> 
> http://www.coffee2code.com/archives/2005/03/30/plugin-customizable-
> comment-listings/
> 
> http://dev.wp-plugins.org/browser/recent-comments/
> 
> http://meidell.dk/archives/2005/07/17/brians-latest-comments-152/
> 
> The vast majority of people whose use these do so in good faith and 
> although there will be users who do daft things like display the 
> last 40 comments, and yes I know that some of these work differently 
> to others, but those issues aside for the average user, which of 
> these are the least likely to get a host shutting down a site ? Or 
> do I install each one in turn, run 10 comments through them while 
> using the Query Diagnostics plugin and then rank according to time 
> taken ? I somehow think I'd get yelled at if I did that. Any and all 
> advice would be great.
> 
> P.
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers


--
Fr?d?ric de Villamil
Ce qui est ? moi est ? moi, ce qui est ? toi ?a se n?gocie. (proverbe motokiste)
http://www.eretzvaju.org

From jbainbridge at gmail.com  Wed Jul 20 16:00:08 2005
From: jbainbridge at gmail.com (Jason Bainbridge)
Date: Wed Jul 20 16:01:18 2005
Subject: [wp-hackers] Recent Comments Plugins.
In-Reply-To: <42DE6EB3.10804@tamba2.org.uk>
References: <42DE6EB3.10804@tamba2.org.uk>
Message-ID: <d6491f480507200900742423fa@mail.gmail.com>

On 7/20/05, Podz <podz@tamba2.org.uk> wrote:
> http://wordpress.org/support/topic/39637
> "DreamHost support: I've temporarily disabled your database because you
> are running a query that is hitting the database too hard."

That is why I like A Small Orange, a wonky rewrite rule on my site was
causing a plugin to fill up the connection queue in Apache (was doing
a getimagesize on a URL) so they tracked that down and just disabled
the plugin, letting me know so I could fix it instead of disabling my
account or DB.

> This is not the first time that we've had a "My host shut me down" post
> where a plugin is concerned. I'm sure I posted a while ago about this.
> Given that these plugins will be used, and that some sites state that
> they are a good thing to use as they can increase interaction (I'm the
> messanger here, okay), then can someone advise as to which are the bad
> guys ? These are the ones I could find right now:

If I wasn't at work I'd set them up on my development box to see what
they are doing but I don't know if I'll get time before I leave for
Australia tomorrow. However the number of comments displayed should
not effect anything except for the page rendering speed, a well
written query shouldn't tax the database at all especially with a
database that is as simple and normalized as the WP database.

Maybe something like having the author publish average resource usage
should be a requirement to get their plugin listed?

Regards,
-- 
Jason Bainbridge
http://kde.org - webmaster@kde.org
Personal Site - http://jasonbainbridge.com
From denis at semiologic.com  Wed Jul 20 16:02:38 2005
From: denis at semiologic.com (Denis de Bernardy)
Date: Wed Jul 20 16:03:21 2005
Subject: [wp-hackers] Recent Comments Plugins.
In-Reply-To: <42DE6EB3.10804@tamba2.org.uk>
Message-ID: <000001c58d44$7407d4d0$6502a8c0@DB>

While underoptimized, the plugin's strange scenario might come from it
allowing parameters.

With respect to your question, the least resource hogger of the recent post,
updates and comments plugins lot will likely be mine, since all three have a
built-in cache. Assuming the cache dir is writable by the server, each will
hit the sql server one to three times per hour depending on how you
configure it -- unless of course a new post, update or comment triggers a
flush.

D.





> -----Original Message-----
> From: wp-hackers-bounces@lists.automattic.com 
> [mailto:wp-hackers-bounces@lists.automattic.com] On Behalf Of Podz
> Sent: Wednesday, July 20, 2005 5:33 PM
> To: wp-hackers@lists.automattic.com
> Subject: [wp-hackers] Recent Comments Plugins.
> 
> 
> http://wordpress.org/support/topic/39637
> "DreamHost support: I've temporarily disabled your database 
> because you 
> are running a query that is hitting the database too hard."
> 
> This is not the first time that we've had a "My host shut me 
> down" post 
> where a plugin is concerned. I'm sure I posted a while ago 
> about this. Given that these plugins will be used, and that 
> some sites state that 
> they are a good thing to use as they can increase interaction 
> (I'm the 
> messanger here, okay), then can someone advise as to which 
> are the bad 
> guys ? These are the ones I could find right now:
> 
> Name: Get Recent Comments http://wp-plugins.net/index.php?id=100
> 
> Name: Recent Comments Grouped By Post 
> http://wp-plugins.net/index.php?id=169
> 
> Name: Fuzzy recent comments http://wp-plugins.net/index.php?id=236
> 
> http://www.coffee2code.com/archives/2005/03/30/plugin-customiz
able-comment-listings/

http://dev.wp-plugins.org/browser/recent-comments/

http://meidell.dk/archives/2005/07/17/brians-latest-comments-152/

The vast majority of people whose use these do so in good faith and 
although there will be users who do daft things like display the last 40 
comments, and yes I know that some of these work differently to others, 
but those issues aside for the average user, which of these are the 
least likely to get a host shutting down a site ?
Or do I install each one in turn, run 10 comments through them while 
using the Query Diagnostics plugin and then rank according to time taken 
? I somehow think I'd get yelled at if I did that.
Any and all advice would be great.

P.
_______________________________________________
wp-hackers mailing list
wp-hackers@lists.automattic.com
http://lists.automattic.com/mailman/listinfo/wp-hackers

From skeltoac at gmail.com  Wed Jul 20 16:27:40 2005
From: skeltoac at gmail.com (Andy Skelton)
Date: Wed Jul 20 16:28:31 2005
Subject: [wp-hackers] Recent Comments Plugins.
In-Reply-To: <000001c58d44$7407d4d0$6502a8c0@DB>
References: <42DE6EB3.10804@tamba2.org.uk> <000001c58d44$7407d4d0$6502a8c0@DB>
Message-ID: <e6ec604d0507200927737376a9@mail.gmail.com>

> > http://wordpress.org/support/topic/39637
> > "DreamHost support: I've temporarily disabled your database
> > because you
> > are running a query that is hitting the database too hard."

SELECT alas_posts.*, MAX(comment_date) AS max_comment_date FROM
alas_comments, alas_posts WHERE alas_posts.post_date <= '2005-07-19
13:38:31' AND ( alas_posts.post_status = 'publish' OR
alas_posts.post_status = 'sticky' ) AND alas_posts.post_password = '' AND
alas_posts.ID = alas_comments.comment_post_ID AND
alas_comments.comment_approved = '1' GROUP BY alas_posts.ID ORDER BY
max_comment_date DESC LIMIT 0, 20;

The way I read this query, it produces a list of the 20
most-recently-commented-upon posts. I find one thing screwy about it:

alas_posts.ID = alas_comments.comment_post_ID

is in the WHERE clause. Wouldn't you put this in an ON clause?

I could be wrong,
Andy

http://www.skeltoac.com
From timeistight at gmail.com  Wed Jul 20 16:41:45 2005
From: timeistight at gmail.com (Arthur Jennings)
Date: Wed Jul 20 16:41:58 2005
Subject: [wp-hackers] Recent Comments Plugins.
In-Reply-To: <e6ec604d0507200927737376a9@mail.gmail.com>
References: <42DE6EB3.10804@tamba2.org.uk> <000001c58d44$7407d4d0$6502a8c0@DB>
	<e6ec604d0507200927737376a9@mail.gmail.com>
Message-ID: <e31b0bf80507200941433844c6@mail.gmail.com>

Aren't we veering away from the most important question here, i.e.,
how can users determine which plugins are safe to use in a shared
environment?
-- 
Arthur Jennings
http://www.timeistight.com
From r at schestowitz.com  Wed Jul 20 16:49:26 2005
From: r at schestowitz.com (Roy Schestowitz)
Date: Wed Jul 20 16:48:17 2005
Subject: [wp-hackers] Recent Comments Plugins.
In-Reply-To: <e31b0bf80507200941433844c6@mail.gmail.com>
References: <42DE6EB3.10804@tamba2.org.uk> <000001c58d44$7407d4d0$6502a8c0@DB>
	<e6ec604d0507200927737376a9@mail.gmail.com>
	<e31b0bf80507200941433844c6@mail.gmail.com>
Message-ID: <20050720174926.9o4vdybdkh8gws8g@banana.catalyst2.com>

Quoting Podz:

> http://wordpress.org/support/topic/39637
> "DreamHost support: I've temporarily disabled your database because you
> are running a query that is hitting the database too hard."
>
> This is not the first time that we've had a "My host shut me down" post
> where a plugin is concerned. I'm sure I posted a while ago about this.
> Given that these plugins will be used, and that some sites state that
> they are a good thing to use as they can increase interaction (I'm the
> messanger here, okay), then can someone advise as to which are the bad
> guys ? ...

Quoting Arthur Jennings:

> Aren't we veering away from the most important question here, i.e.,
> how can users determine which plugins are safe to use in a shared
> environment?

That's quite true, but supervision of such initiative takes a lot of 
testers who
congragate a a selection of 'approved' plug-ins. You then face the issue of
having to review and hammer on any plug-in that an anonymous, obscure 
developer
submits to you.

How about suggesting to the users to uncomment retrival statistics at the
bottom? You can then provide them with a table (a benchmark reference) 
to judge
against.

Roy

-- 
Roy S. Schestowitz
http://Schestowitz.com

From m at mullenweg.com  Wed Jul 20 18:10:00 2005
From: m at mullenweg.com (Matt Mullenweg)
Date: Wed Jul 20 18:10:27 2005
Subject: [wp-hackers] Recent Comments Plugins.
In-Reply-To: <20050720174926.9o4vdybdkh8gws8g@banana.catalyst2.com>
References: <42DE6EB3.10804@tamba2.org.uk>
	<000001c58d44$7407d4d0$6502a8c0@DB>	<e6ec604d0507200927737376a9@mail.gmail.com>	<e31b0bf80507200941433844c6@mail.gmail.com>
	<20050720174926.9o4vdybdkh8gws8g@banana.catalyst2.com>
Message-ID: <42DE9378.4040909@mullenweg.com>

Roy Schestowitz wrote:
> That's quite true, but supervision of such initiative takes a lot of 
> testers who
> congragate a a selection of 'approved' plug-ins. You then face the issue of
> having to review and hammer on any plug-in that an anonymous, obscure 
> developer
> submits to you.

However some are just badly written as to cause undue load, and we 
should remove or patch those plugins, at least in the repository. The 
one in the previous message gets slower with every additional comment. 
It's probably a case where two queries would be better than one:

mysql> EXPLAIN SELECT wp_posts . * , MAX( comment_date ) AS max_comment_date
     -> FROM wp_comments, wp_posts
WHERE wp_posts.post_date <= '2005-07-19 13:38:31'
     -> WHERE wp_posts.post_date <= '2005-07-19 13:38:31'
     -> AND (
     -> wp_posts.post_status = 'publish'
     -> OR wp_posts.post_status = 'sticky'
     -> )
     -> AND wp_posts.post_password = ''
     -> AND wp_posts.ID = wp_comments.comment_post_ID
     -> AND wp_comments.comment_approved = '1'
     -> GROUP BY wp_posts.ID
     -> ORDER BY max_comment_date DESC
     -> LIMIT 0 , 20;
+-------------+--------+----------------------------------+------------------+---------+-----------------------------+-------+----------------------------------------------+
| table       | type   | possible_keys                    | key 
      | key_len | ref                         | rows  | Extra 
                              |
+-------------+--------+----------------------------------+------------------+---------+-----------------------------+-------+----------------------------------------------+
| wp_comments | ref    | comment_approved,comment_post_ID | 
comment_approved |       1 | const                       | 11676 | Using 
where; Using temporary; Using filesort |
| wp_posts    | eq_ref | PRIMARY,post_date,post_status    | PRIMARY 
      |       8 | wp_comments.comment_post_ID |     1 | Using where 
                              |
+-------------+--------+----------------------------------+------------------+---------+-----------------------------+-------+----------------------------------------------+


-- 
Matt Mullenweg
http://photomatt.net  | http://wordpress.org
http://pingomatic.com | http://cnet.com
From denis at semiologic.com  Wed Jul 20 18:31:12 2005
From: denis at semiologic.com (Denis de Bernardy)
Date: Wed Jul 20 18:31:21 2005
Subject: [wp-hackers] Recent Comments Plugins.
In-Reply-To: <42DE9378.4040909@mullenweg.com>
Message-ID: <000401c58d59$34e8e090$6502a8c0@DB>

> It's probably a case where two queries would be better than one:

Or, more likely, where the aggregate is useless:

SELECT
  posts.*
FROM
  wp_posts as posts
INNER JOIN
  wp_comments as comments
    ON comments.post_ID = posts.ID
WHERE
  comments.comment_approved = '1'
  # and whatever else
GROUP BY
  posts.ID # prevent a post to appear twice
ORDER BY
  comments.comment_date DESC # works too
LIMIT 0,20


> mysql> EXPLAIN SELECT wp_posts . * , MAX( comment_date ) AS 
> mysql> max_comment_date
>      -> FROM wp_comments, wp_posts
> WHERE wp_posts.post_date <= '2005-07-19 13:38:31'
>      -> WHERE wp_posts.post_date <= '2005-07-19 13:38:31'
>      -> AND (
>      -> wp_posts.post_status = 'publish'
>      -> OR wp_posts.post_status = 'sticky'
>      -> )
>      -> AND wp_posts.post_password = ''
>      -> AND wp_posts.ID = wp_comments.comment_post_ID
>      -> AND wp_comments.comment_approved = '1'
>      -> GROUP BY wp_posts.ID
>      -> ORDER BY max_comment_date DESC
>      -> LIMIT 0 , 20;

From podz at tamba2.org.uk  Wed Jul 20 18:49:08 2005
From: podz at tamba2.org.uk (Podz)
Date: Wed Jul 20 18:49:07 2005
Subject: [wp-hackers] Recent Comments Plugins.
In-Reply-To: <42DE6EB3.10804@tamba2.org.uk>
References: <42DE6EB3.10804@tamba2.org.uk>
Message-ID: <42DE9CA4.1020306@tamba2.org.uk>

As unscientific as it gets.

Fuzzy Comments - the server doesn't have the XSLT bit needed.
Recent Comments List - could not get it to work.

Upload, activate, hard refresh twice, View Source and copy out all those 
between what was Array 46 and Array 47 (which is where the function 
would have displayed in the block) and take second set of numbers. The 
numbers are those produced by Jeromes Query Diagnostics. Each 'Array' 
had a time for completion. Each time is listed:

http://dev.wp-plugins.org/browser/recent-comments/
[1] => 0.00010895729064941

http://www.coffee2code.com/archives/2005/03/30/plugin-customizable-comment-listings/
[1] => 0.00014400482177734

http://meidell.dk/archives/2005/07/17/brians-latest-comments-152/
[1] => 0.074209928512573
[1] => 0.0012128353118896
[1] => 0.00017619132995605
[1] => 0.0003809928894043
[1] => 0.0001981258392334
[1] => 0.0086190700531006
[1] => 0.00019383430480957
[1] => 0.00012898445129395
[1] => 0.00035691261291504
[1] => 0.00016903877258301
[1] => 0.00020194053649902
[1] => 0.00030803680419922
[1] => 0.00016212463378906
[1] => 0.00040578842163086
[1] => 0.00019502639770508

http://wp-plugins.net/index.php?id=169
[1] => 9.0837478637695E-05
[1] => 7.0095062255859E-05
[1] => 6.7949295043945E-05
[1] => 6.7234039306641E-05
[1] => 6.8187713623047E-05
[1] => 6.6995620727539E-05
[1] => 6.6995620727539E-05
[1] => 6.6995620727539E-05
[1] => 6.6995620727539E-05
[1] => 6.6995620727539E-05
[1] => 6.6995620727539E-05
[1] => 6.6995620727539E-05
[1] => 0.00013589859008789   <-----
The one indicated actually does something. The stuff above are functions 
not called but they execute (strangely).

I have no idea what - if anything - this has to do with server loads.
And I know how I did this is probably bad, but ...

P.
From jbainbridge at gmail.com  Wed Jul 20 19:10:08 2005
From: jbainbridge at gmail.com (Jason Bainbridge)
Date: Wed Jul 20 19:10:59 2005
Subject: [wp-hackers] Recent Comments Plugins.
In-Reply-To: <42DE9CA4.1020306@tamba2.org.uk>
References: <42DE6EB3.10804@tamba2.org.uk> <42DE9CA4.1020306@tamba2.org.uk>
Message-ID: <d6491f48050720121070d56e12@mail.gmail.com>

On 7/20/05, Podz <podz@tamba2.org.uk> wrote:
> As unscientific as it gets.
> 
> Fuzzy Comments - the server doesn't have the XSLT bit needed.
> Recent Comments List - could not get it to work.
> 
> Upload, activate, hard refresh twice, View Source and copy out all those
> between what was Array 46 and Array 47 (which is where the function
> would have displayed in the block) and take second set of numbers. The
> numbers are those produced by Jeromes Query Diagnostics. Each 'Array'
> had a time for completion. Each time is listed:

> http://wp-plugins.net/index.php?id=169
> [1] => 9.0837478637695E-05
> [1] => 7.0095062255859E-05
> [1] => 6.7949295043945E-05
> [1] => 6.7234039306641E-05
> [1] => 6.8187713623047E-05
> [1] => 6.6995620727539E-05
> [1] => 6.6995620727539E-05
> [1] => 6.6995620727539E-05
> [1] => 6.6995620727539E-05
> [1] => 6.6995620727539E-05
> [1] => 6.6995620727539E-05
> [1] => 6.6995620727539E-05
> [1] => 0.00013589859008789   <-----
> The one indicated actually does something. The stuff above are functions
> not called but they execute (strangely).

Can you turn on the debug output for that plugin by un-commenting the
$output row towards the bottom and commenting out the other line? Also
does the query diagnostics plugin give you the actual query? Try
running an EXPLAIN on it if you can like Matt's post earlier in the
thread.

Where was the call to get_recent_comments placed?

Regards,
-- 
Jason Bainbridge
http://kde.org - webmaster@kde.org
Personal Site - http://jasonbainbridge.com
From podz at tamba2.org.uk  Wed Jul 20 19:29:54 2005
From: podz at tamba2.org.uk (Podz)
Date: Wed Jul 20 19:29:49 2005
Subject: [wp-hackers] Recent Comments Plugins.
In-Reply-To: <d6491f48050720121070d56e12@mail.gmail.com>
References: <42DE6EB3.10804@tamba2.org.uk> <42DE9CA4.1020306@tamba2.org.uk>
	<d6491f48050720121070d56e12@mail.gmail.com>
Message-ID: <42DEA632.5000100@tamba2.org.uk>

Jason Bainbridge wrote:
>>http://wp-plugins.net/index.php?id=169
>>[1] => 9.0837478637695E-05
>>[1] => 7.0095062255859E-05
>>[1] => 6.7949295043945E-05
>>[1] => 6.7234039306641E-05
>>[1] => 6.8187713623047E-05
>>[1] => 6.6995620727539E-05
>>[1] => 6.6995620727539E-05
>>[1] => 6.6995620727539E-05
>>[1] => 6.6995620727539E-05
>>[1] => 6.6995620727539E-05
>>[1] => 6.6995620727539E-05
>>[1] => 6.6995620727539E-05
>>[1] => 0.00013589859008789   <-----
>>The one indicated actually does something. The stuff above are functions
>>not called but they execute (strangely).
> 
> 
> Can you turn on the debug output for that plugin by un-commenting the
> $output row towards the bottom and commenting out the other line? Also
> does the query diagnostics plugin give you the actual query? Try
> running an EXPLAIN on it if you can like Matt's post earlier in the
> thread.
> Where was the call to get_recent_comments placed?

The call is in my sidebar.

The output as seen in the Source of the page:
[47] => Array
         (
             [0] => SELECT ID, post_title, post_excerpt FROM t2b_posts 
WHERE post_status = 'publish' AND post_password ='' AND post_date_gmt < 
'2005-07-20 19:26:16' ORDER BY post_date DESC LIMIT 6, 5
             [1] => 0.010740995407104
         )

     [48] => Array
         (
             [0] => SELECT option_name FROM t2b_options WHERE 
option_name = 'kjgrc_grc_max_comments'
             [1] => 0.00023198127746582
         )

     [49] => Array
         (
             [0] => SELECT option_name FROM t2b_options WHERE 
option_name = 'kjgrc_grc_chars_per_comment'
             [1] => 0.00016689300537109
         )

     [50] => Array
         (
             [0] => SELECT option_name FROM t2b_options WHERE 
option_name = 'kjgrc_grc_chars_per_word'
             [1] => 0.00016593933105469
         )

     [51] => Array
         (
             [0] => SELECT option_name FROM t2b_options WHERE 
option_name = 'kjgrc_grc_format'
             [1] => 0.0001521110534668
         )

     [52] => Array
         (
             [0] => SELECT option_name FROM t2b_options WHERE 
option_name = 'kjgrc_grt_max_comments'
             [1] => 0.00014710426330566
         )

     [53] => Array
         (
             [0] => SELECT option_name FROM t2b_options WHERE 
option_name = 'kjgrc_grt_chars_per_comment'
             [1] => 0.00014901161193848
         )

     [54] => Array
         (
             [0] => SELECT option_name FROM t2b_options WHERE 
option_name = 'kjgrc_grt_chars_per_word'
             [1] => 0.00014281272888184
         )

     [55] => Array
         (
             [0] => SELECT option_name FROM t2b_options WHERE 
option_name = 'kjgrc_grt_format'
             [1] => 0.00015687942504883
         )

     [56] => Array
         (
             [0] => SELECT option_name FROM t2b_options WHERE 
option_name = 'kjgrc_misc_exclude_cat'
             [1] => 0.00015091896057129
         )

     [57] => Array
         (
             [0] => SELECT option_name FROM t2b_options WHERE 
option_name = 'kjgrc_gravatar_size'
             [1] => 0.00014209747314453
         )

     [58] => Array
         (
             [0] => SELECT option_name FROM t2b_options WHERE 
option_name = 'kjgrc_gravatar_alt_url'
             [1] => 0.00014400482177734
         )

     [59] => Array
         (
             [0] => SELECT option_name FROM t2b_options WHERE 
option_name = 'kjgrc_gravatar_rating'
             [1] => 0.00013899803161621
         )

     [60] => Array
         (
             [0] => SELECT DISTINCT t2b_comments.* FROM t2b_comments 
LEFT JOIN t2b_posts ON t2b_posts.ID=t2b_comments.comment_post_ID WHERE 
(post_status = 'publish' OR post_status = 'static') AND 
comment_approved= '1' AND  post_password = '' AND comment_type = '' 
ORDER BY comment_date DESC LIMIT 5
             [1] => 0.25421714782715
         )

From m at mullenweg.com  Wed Jul 20 23:25:01 2005
From: m at mullenweg.com (Matt Mullenweg)
Date: Wed Jul 20 23:25:17 2005
Subject: [wp-hackers] 360 cross-post
Message-ID: <42DEDD4D.6010900@mullenweg.com>

I know there are cross-post plugins for Xanga, Livejournal, and Blogger, 
has anyone written one for Yahoo 360 yet? Anyone interested in writing one?

-- 
Matt Mullenweg
http://photomatt.net  | http://wordpress.org
http://pingomatic.com | http://cnet.com
From fd at firasd.org  Thu Jul 21 02:09:49 2005
From: fd at firasd.org (Firas D.)
Date: Thu Jul 21 02:09:59 2005
Subject: [wp-hackers] Plugin Readmes
Message-ID: <42DF03ED.9010006@firasd.org>

Hi everyone,

A few of us (Robert Deaton, Andrew Sutherland and I) are whipping up a 
replacement/successor to wp-plugins.net. Right now we're working on an 
importer from the wp-plugins.org repository (which'll sync nightly via 
'svn up'). Of the nearly 340 plugins in the repository, only a portion 
are 'discoverable':

http://firasd.ath.cx/ext/is_readme.php

So please standardize your /trunk/readme.txt so we have some data to 
crunch :)

The expectation is (a) there's a file in /trunk/ called readme.txt, (b) 
It's formatted like 
<http://dev.wp-plugins.org/file/staticize-reloaded/trunk/readme.txt>

(If you're curious, the parser is 
http://firasd.ath.cx/ext/import/parse-readme.phps .. quite primitive, 
early alpha, etc.)

(And this'll be an open source project of course, with all source 
available in an svn/trac environment and readily redeployable. It will 
work for plugins that aren't in the repo, but it will take only one 
readme format.)

-- 
http://firasd.org

From m at mullenweg.com  Thu Jul 21 02:27:24 2005
From: m at mullenweg.com (Matthew Mullenweg)
Date: Thu Jul 21 02:27:32 2005
Subject: [wp-hackers] Plugin Readmes
In-Reply-To: <42DF03ED.9010006@firasd.org>
References: <42DF03ED.9010006@firasd.org>
Message-ID: <42DF080C.9010409@mullenweg.com>

Firas D. wrote:
> The expectation is (a) there's a file in /trunk/ called readme.txt, (b) 
> It's formatted like 
> <http://dev.wp-plugins.org/file/staticize-reloaded/trunk/readme.txt>

Before anyone implements something, it would be a good time to discuss 
improvements and intentions of that format. Right now Contributors is 
expected to be forum usernames, for example.

-- 
Matt Mullenweg
  http://photomatt.net | http://wordpress.org
http://pingomatic.com | http://cnet.com
From jalenack at gmail.com  Thu Jul 21 02:48:13 2005
From: jalenack at gmail.com (Jalenack)
Date: Thu Jul 21 02:49:25 2005
Subject: [wp-hackers] Plugin Readmes
In-Reply-To: <42DF080C.9010409@mullenweg.com>
References: <42DF03ED.9010006@firasd.org> <42DF080C.9010409@mullenweg.com>
Message-ID: <ed51b67c050720194859df520d@mail.gmail.com>

The forum usernames is a great idea. It'll allow the parser to link to the 
other plugins the other has made and their support forum profiles. One thing 
I'd like to see on there would be a header for the description section like: 
== Description ==. And possibly one for == Features ==


Andrew Sutherland
http://blog.jalenack.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://comox.textdrive.com/pipermail/wp-hackers/attachments/20050721/03cd62d0/attachment.html
From m at mullenweg.com  Thu Jul 21 02:52:48 2005
From: m at mullenweg.com (Matthew Mullenweg)
Date: Thu Jul 21 02:53:38 2005
Subject: [wp-hackers] Plugin Readmes
In-Reply-To: <ed51b67c050720194859df520d@mail.gmail.com>
References: <42DF03ED.9010006@firasd.org> <42DF080C.9010409@mullenweg.com>
	<ed51b67c050720194859df520d@mail.gmail.com>
Message-ID: <42DF0E00.6000408@mullenweg.com>

Jalenack wrote:
> The forum usernames is a great idea. It'll allow the parser to link to 
> the other plugins the other has made and their support forum profiles. 
> One thing I'd like to see on there would be a header for the description 
> section like: == Description ==. And possibly one for == Features ==

The description and features go right under the title header. That's 
what the first paragraph is in the Staticize example. I think of it as 
the introduction, in plain language what people should know about the 
plugin. 95% of people will only ever skim that and look at the screenshots.

-- 
Matt Mullenweg
  http://photomatt.net | http://wordpress.org
http://pingomatic.com | http://cnet.com
From fd at firasd.org  Thu Jul 21 08:14:57 2005
From: fd at firasd.org (Firas D.)
Date: Thu Jul 21 08:15:41 2005
Subject: [wp-hackers] Plugin Readmes
In-Reply-To: <42DF080C.9010409@mullenweg.com>
References: <42DF03ED.9010006@firasd.org> <42DF080C.9010409@mullenweg.com>
Message-ID: <42DF5981.5050005@firasd.org>

Matthew Mullenweg wrote:

> Before anyone implements something, it would be a good time to discuss 
> improvements and intentions of that format. Right now Contributors is 
> expected to be forum usernames, for example.

What would be wonderful is if we could eventually link to profiles by 
username (rather than the current /profile/(int) way)--any plans for 
that sort of thing?

-- 
http://firasd.org

From turnip at turnipspatch.com  Thu Jul 21 11:10:20 2005
From: turnip at turnipspatch.com (Jonathan Leighton)
Date: Thu Jul 21 10:10:38 2005
Subject: [wp-hackers] Plugin Readmes
In-Reply-To: <42DF080C.9010409@mullenweg.com>
References: <42DF03ED.9010006@firasd.org> <42DF080C.9010409@mullenweg.com>
Message-ID: <42DF829C.6030207@turnipspatch.com>

Matthew Mullenweg wrote:

> Firas D. wrote:
>
>> The expectation is (a) there's a file in /trunk/ called readme.txt,
>> (b) It's formatted like
>> <http://dev.wp-plugins.org/file/staticize-reloaded/trunk/readme.txt>
>
>
> Before anyone implements something, it would be a good time to discuss
> improvements and intentions of that format. Right now Contributors is
> expected to be forum usernames, for example.

Personally I don't like the readme.txt idea at all. Whenever I change
the wiki page for my plugin, I have to alter the readme.txt, and vice
versa. It's annoying and bound to cause problems with them going out of
sync. I'd much prefer that details about the plugin could just be pulled
from the comment stuff at the top and people used a wiki page for docs.
This has two advantages:

a) EVERY plugin has this comment -- it needs to in order to work
b) Wiki pages are FAR more formattable than a text file.

Jon

-- 
Jonathan Leighton aka. Turnip
http://turnipspatch.com/ | http://digital-proof.org/

From denis at semiologic.com  Thu Jul 21 10:13:35 2005
From: denis at semiologic.com (Denis de Bernardy)
Date: Thu Jul 21 10:14:24 2005
Subject: [wp-hackers] Plugin Readmes
In-Reply-To: <42DF829C.6030207@turnipspatch.com>
Message-ID: <000601c58ddc$db2eb500$6502a8c0@DB>

Just curious... Why not catch the page where the plugin's official page via
RSS?

That way, it is structured properly, can be formatted otherwise, the
documentation is synchonized, and there is even a direct link to the
comments.

D.

> -----Original Message-----
> From: wp-hackers-bounces@lists.automattic.com 
> [mailto:wp-hackers-bounces@lists.automattic.com] On Behalf Of 
> Jonathan Leighton
> Sent: Thursday, July 21, 2005 1:10 PM
> To: wp-hackers@lists.automattic.com
> Subject: Re: [wp-hackers] Plugin Readmes
> 
> 
> Matthew Mullenweg wrote:
> 
> > Firas D. wrote:
> >
> >> The expectation is (a) there's a file in /trunk/ called readme.txt,
> >> (b) It's formatted like 
> >> 
> <http://dev.wp-plugins.org/file/staticize-reloaded/trunk/readme.txt>
> >
> >
> > Before anyone implements something, it would be a good time 
> to discuss 
> > improvements and intentions of that format. Right now 
> Contributors is 
> > expected to be forum usernames, for example.
> 
> Personally I don't like the readme.txt idea at all. Whenever 
> I change the wiki page for my plugin, I have to alter the 
> readme.txt, and vice versa. It's annoying and bound to cause 
> problems with them going out of sync. I'd much prefer that 
> details about the plugin could just be pulled from the 
> comment stuff at the top and people used a wiki page for 
> docs. This has two advantages:
> 
> a) EVERY plugin has this comment -- it needs to in order to work
> b) Wiki pages are FAR more formattable than a text file.
> 
> Jon
> 
> -- 
> Jonathan Leighton aka. Turnip
> http://turnipspatch.com/ | http://digital-proof.org/
> 
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com 
> http://lists.automattic.com/mailman/listinfo/wp-hackers
> 

From denis at semiologic.com  Thu Jul 21 10:20:22 2005
From: denis at semiologic.com (Denis de Bernardy)
Date: Thu Jul 21 10:20:47 2005
Subject: [wp-hackers] Plugin Readmes
In-Reply-To: <000601c58ddc$db2eb500$6502a8c0@DB>
Message-ID: <000701c58ddd$cd9b19f0$6502a8c0@DB>

Eww... Sorry about that. For those who are wondering, I meant: Why not catch
the plugin's official page via RSS? :)

D.

> -----Original Message-----
> From: wp-hackers-bounces@lists.automattic.com 
> [mailto:wp-hackers-bounces@lists.automattic.com] On Behalf Of 
> Denis de Bernardy
> Sent: Thursday, July 21, 2005 12:14 PM
> To: wp-hackers@lists.automattic.com
> Subject: RE: [wp-hackers] Plugin Readmes
> 
> 
> Just curious... Why not catch the page where the plugin's 
> official page via RSS?
> 
> That way, it is structured properly, can be formatted 
> otherwise, the documentation is synchonized, and there is 
> even a direct link to the comments.
> 
> D.
> 
> > -----Original Message-----
> > From: wp-hackers-bounces@lists.automattic.com
> > [mailto:wp-hackers-bounces@lists.automattic.com] On Behalf Of 
> > Jonathan Leighton
> > Sent: Thursday, July 21, 2005 1:10 PM
> > To: wp-hackers@lists.automattic.com
> > Subject: Re: [wp-hackers] Plugin Readmes
> > 
> > 
> > Matthew Mullenweg wrote:
> > 
> > > Firas D. wrote:
> > >
> > >> The expectation is (a) there's a file in /trunk/ called 
> readme.txt,
> > >> (b) It's formatted like
> > >> 
> > <http://dev.wp-plugins.org/file/staticize-reloaded/trunk/readme.txt>
> > >
> > >
> > > Before anyone implements something, it would be a good time
> > to discuss
> > > improvements and intentions of that format. Right now
> > Contributors is
> > > expected to be forum usernames, for example.
> > 
> > Personally I don't like the readme.txt idea at all. Whenever
> > I change the wiki page for my plugin, I have to alter the 
> > readme.txt, and vice versa. It's annoying and bound to cause 
> > problems with them going out of sync. I'd much prefer that 
> > details about the plugin could just be pulled from the 
> > comment stuff at the top and people used a wiki page for 
> > docs. This has two advantages:
> > 
> > a) EVERY plugin has this comment -- it needs to in order to work
> > b) Wiki pages are FAR more formattable than a text file.
> > 
> > Jon
> > 
> > --
> > Jonathan Leighton aka. Turnip
> > http://turnipspatch.com/ | http://digital-proof.org/
> > 
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers@lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> > 
> 
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
> 

From fd at firasd.org  Thu Jul 21 10:34:24 2005
From: fd at firasd.org (Firas D.)
Date: Thu Jul 21 10:34:36 2005
Subject: [wp-hackers] Plugin Readmes
In-Reply-To: <000601c58ddc$db2eb500$6502a8c0@DB>
References: <000601c58ddc$db2eb500$6502a8c0@DB>
Message-ID: <42DF7A30.7030807@firasd.org>

Denis de Bernardy wrote:

>Just curious... Why not catch the page where the plugin's official page via
>RSS?
>
>That way, it is structured properly, can be formatted otherwise, the
>documentation is synchonized, and there is even a direct link to the
>comments.
>
>D.
>
Someone wants to put their plugin docs in the trac wiki. Someone wants 
to put it in a fancy WP page with a continuous RSS feed. Someone else 
may want to put it in mediawiki. I've put my plugin pages in straight html.

There are a gazillion ways to expose information about a plugin, all of 
which may be perused when you click through to the actual page you're 
directed to for further info about the plugin. I just want to make it 
easy for you to put your stuff in a directory without you having to get 
an account with the website and log in to describe it and notify of 
updates (which is how wp-plugins.net currently works)--the plan is to 
sync with descriptive files in your webspace/repository/etc, and with 
some consistency across items. I could just ask for an xml file, but the 
markdowned text file idea Matt came up with a while ago just seems more 
sound.
From denis at semiologic.com  Thu Jul 21 10:51:37 2005
From: denis at semiologic.com (Denis de Bernardy)
Date: Thu Jul 21 10:51:55 2005
Subject: [wp-hackers] Plugin Readmes
In-Reply-To: <42DF7A30.7030807@firasd.org>
Message-ID: <000001c58de2$2b46e940$6502a8c0@DB>

OK, well, how about this then?

Step 1, either of:

- rss2xml (simple xslt)
- atom2xml (simple xslt)
- wiki2xml (parser needed)
- readme2xml (parser needed)

And then: xml2plugindoc (simple xslt)

There is an obvious argument for the plain text readme file (human
readability), but introducing an intermediary xml step may very well make it
a lot more appropriate to pull content from other sources. The xml format
would need to be determined -- though I can't see why RSS would not fit
here.

D.


> -----Original Message-----
> From: wp-hackers-bounces@lists.automattic.com 
> [mailto:wp-hackers-bounces@lists.automattic.com] On Behalf Of Firas D.
> Sent: Thursday, July 21, 2005 12:34 PM
> To: wp-hackers@lists.automattic.com
> Subject: Re: [wp-hackers] Plugin Readmes
> 
> 
> Denis de Bernardy wrote:
> 
> >Just curious... Why not catch the page where the plugin's 
> official page 
> >via RSS?
> >
> >That way, it is structured properly, can be formatted otherwise, the 
> >documentation is synchonized, and there is even a direct link to the 
> >comments.
> >
> >D.
> >
> Someone wants to put their plugin docs in the trac wiki. 
> Someone wants 
> to put it in a fancy WP page with a continuous RSS feed. Someone else 
> may want to put it in mediawiki. I've put my plugin pages in 
> straight html.
> 
> There are a gazillion ways to expose information about a 
> plugin, all of 
> which may be perused when you click through to the actual page you're 
> directed to for further info about the plugin. I just want to make it 
> easy for you to put your stuff in a directory without you 
> having to get 
> an account with the website and log in to describe it and notify of 
> updates (which is how wp-plugins.net currently works)--the plan is to 
> sync with descriptive files in your webspace/repository/etc, and with 
> some consistency across items. I could just ask for an xml 
> file, but the 
> markdowned text file idea Matt came up with a while ago just 
> seems more 
> sound.
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com 
> http://lists.automattic.com/mailman/listinfo/wp-hackers
> 

From turnip at turnipspatch.com  Thu Jul 21 12:04:58 2005
From: turnip at turnipspatch.com (Jonathan Leighton)
Date: Thu Jul 21 11:05:12 2005
Subject: [wp-hackers] Plugin Readmes
In-Reply-To: <42DF7A30.7030807@firasd.org>
References: <000601c58ddc$db2eb500$6502a8c0@DB> <42DF7A30.7030807@firasd.org>
Message-ID: <42DF8F6A.2070206@turnipspatch.com>

Firas D. wrote:

> Denis de Bernardy wrote:
>
>> Just curious... Why not catch the page where the plugin's official
>> page via
>> RSS?
>>
>> That way, it is structured properly, can be formatted otherwise, the
>> documentation is synchonized, and there is even a direct link to the
>> comments.
>>
>> D.
>>
> Someone wants to put their plugin docs in the trac wiki. Someone wants
> to put it in a fancy WP page with a continuous RSS feed. Someone else
> may want to put it in mediawiki. I've put my plugin pages in straight
> html.
>
> There are a gazillion ways to expose information about a plugin, all
> of which may be perused when you click through to the actual page
> you're directed to for further info about the plugin. I just want to
> make it easy for you to put your stuff in a directory without you
> having to get an account with the website and log in to describe it
> and notify of updates (which is how wp-plugins.net currently
> works)--the plan is to sync with descriptive files in your
> webspace/repository/etc, and with some consistency across items. I
> could just ask for an xml file, but the markdowned text file idea Matt
> came up with a while ago just seems more sound.

Why not have an extra "Documentation: ..." value in the descriptive
comment each plugin has. That can hold the URI of some documentation and
people can write fancy parsers to pull it from WP-Plugins.org without
any problem...

I really don't see everybody who write a plugin also making a readme.txt
for it.

Jon

-- 
Jonathan Leighton aka. Turnip
http://turnipspatch.com/ | http://digital-proof.org/

From turnip at turnipspatch.com  Thu Jul 21 12:06:47 2005
From: turnip at turnipspatch.com (Jonathan Leighton)
Date: Thu Jul 21 11:07:00 2005
Subject: [wp-hackers] Plugin Readmes
In-Reply-To: <42DF8F6A.2070206@turnipspatch.com>
References: <000601c58ddc$db2eb500$6502a8c0@DB> <42DF7A30.7030807@firasd.org>
	<42DF8F6A.2070206@turnipspatch.com>
Message-ID: <42DF8FD7.8020309@turnipspatch.com>

In fact, ignore that, it's already there is the form of "Plugin URI: ..."

What advantage does a readme.txt have over a simple URI to documentation
in whatever form it is in?

Jon

Jonathan Leighton wrote:

>Firas D. wrote:
>
>  
>
>>Denis de Bernardy wrote:
>>
>>    
>>
>>>Just curious... Why not catch the page where the plugin's official
>>>page via
>>>RSS?
>>>
>>>That way, it is structured properly, can be formatted otherwise, the
>>>documentation is synchonized, and there is even a direct link to the
>>>comments.
>>>
>>>D.
>>>
>>>      
>>>
>>Someone wants to put their plugin docs in the trac wiki. Someone wants
>>to put it in a fancy WP page with a continuous RSS feed. Someone else
>>may want to put it in mediawiki. I've put my plugin pages in straight
>>html.
>>
>>There are a gazillion ways to expose information about a plugin, all
>>of which may be perused when you click through to the actual page
>>you're directed to for further info about the plugin. I just want to
>>make it easy for you to put your stuff in a directory without you
>>having to get an account with the website and log in to describe it
>>and notify of updates (which is how wp-plugins.net currently
>>works)--the plan is to sync with descriptive files in your
>>webspace/repository/etc, and with some consistency across items. I
>>could just ask for an xml file, but the markdowned text file idea Matt
>>came up with a while ago just seems more sound.
>>    
>>
>
>Why not have an extra "Documentation: ..." value in the descriptive
>comment each plugin has. That can hold the URI of some documentation and
>people can write fancy parsers to pull it from WP-Plugins.org without
>any problem...
>
>I really don't see everybody who write a plugin also making a readme.txt
>for it.
>
>Jon
>
>  
>

-- 
Jonathan Leighton aka. Turnip
http://turnipspatch.com/ | http://digital-proof.org/

From fd at firasd.org  Thu Jul 21 11:23:20 2005
From: fd at firasd.org (Firas D.)
Date: Thu Jul 21 11:23:30 2005
Subject: [wp-hackers] Plugin Readmes
In-Reply-To: <42DF8FD7.8020309@turnipspatch.com>
References: <000601c58ddc$db2eb500$6502a8c0@DB>
	<42DF7A30.7030807@firasd.org>	<42DF8F6A.2070206@turnipspatch.com>
	<42DF8FD7.8020309@turnipspatch.com>
Message-ID: <42DF85A8.6040607@firasd.org>

Jonathan Leighton wrote:

>In fact, ignore that, it's already there is the form of "Plugin URI: ..."
>
>What advantage does a readme.txt have over a simple URI to documentation
>in whatever form it is in?
>
>Jon
>  
>
It's the difference between https://addons.mozilla.org and a simple list 
of items.

Here's my current issue: i want lots and lots of tags <-> plugin 
relationships to start building the relationship matching engine for the 
directory. The readme.txt type thing I pointed to has a parsable, 
semi-standard way of showing that. How else would I get this info, ask 
dozens of plugin authors to make me an xml file with a <tags> element?
From turnip at turnipspatch.com  Thu Jul 21 12:51:07 2005
From: turnip at turnipspatch.com (Jonathan Leighton)
Date: Thu Jul 21 11:51:30 2005
Subject: [wp-hackers] Plugin Readmes
In-Reply-To: <42DF85A8.6040607@firasd.org>
References: <000601c58ddc$db2eb500$6502a8c0@DB>	<42DF7A30.7030807@firasd.org>	<42DF8F6A.2070206@turnipspatch.com>	<42DF8FD7.8020309@turnipspatch.com>
	<42DF85A8.6040607@firasd.org>
Message-ID: <42DF9A3B.1080002@turnipspatch.com>

Firas D. wrote:

> Jonathan Leighton wrote:
>
>> In fact, ignore that, it's already there is the form of "Plugin URI:
>> ..."
>>
>> What advantage does a readme.txt have over a simple URI to documentation
>> in whatever form it is in?
>>
>> Jon
>>  
>>
> It's the difference between https://addons.mozilla.org and a simple
> list of items.
>
> Here's my current issue: i want lots and lots of tags <-> plugin
> relationships to start building the relationship matching engine for
> the directory. The readme.txt type thing I pointed to has a parsable,
> semi-standard way of showing that. How else would I get this info, ask
> dozens of plugin authors to make me an xml file with a <tags> element?

I think a better way would a extra "Tags: ..." value in the plugin
definition comment type thing. It wouldn't need an extra file, is
backwards compatible (I've tested it and nothing breaks by adding extra
values), and could be added to the core for the next version. What's
wrong with that?

Jon

-- 
Jonathan Leighton aka. Turnip
http://turnipspatch.com/ | http://digital-proof.org/

From chris.lott at gmail.com  Thu Jul 21 20:45:34 2005
From: chris.lott at gmail.com (Chris Lott)
Date: Thu Jul 21 20:46:08 2005
Subject: [wp-hackers] Pinging pingomatic.com making posting SLOOOW
Message-ID: <9b1b9dab050721134513ac48b5@mail.gmail.com>

I have a number of WP 1.5.1.3 sites running on Linux (Mandrake 10).
All of these sites are exhibiting a similar problem: when pinging
pingomatic.com (the only site I am pinging), post times (measured from
pressing the publish button to returning control to the user) are
60-90 seconds. If I remove pingomatic.com from the ping list, leaving
nothing in the box, post times are 2-5 seconds.

I have already turned off "Attempt to notify any Weblogs linked to
from the article (slows down posting.)" This behavior occurs even with
2-10 word posts that have no links in them at all.

There is one public blog that has this behavior: 
http://locus.dist-ed.uaf.edu/cde/blog/

But about 10 more private ones that exhibit the same symptoms.

The wordpress.org discussion boards indicate it can't be a firewall
problem since it uses port 80. No one appears to have further
suggestions. How can I further troubleshoot this?

c
-- 
Chris Lott
From p.a.r.a.s.e.w at gmx.net  Thu Jul 21 22:16:00 2005
From: p.a.r.a.s.e.w at gmx.net (Matthias Tarasiewicz)
Date: Thu Jul 21 22:15:04 2005
Subject: [wp-hackers] wpdb and qp_query,
	and how to save query results for posts_nav_link
Message-ID: <A43E046A-D3DD-41D4-BEB3-7802AFCB1D8C@gmx.net>

i have a question regarding multiple loops: as i am using several  
queries to show the last entries in various categories, but the  
posts_nav_link seems to lose the information about the previous  
entries. if i comment out the other queries, everything works fine.

i posted a code snipped to show, that the way to store the wp_query  
object as described in http://codex.wordpress.org/the_loop does not  
work correctly. i found out that the $wp_query changes, even though  
i'm trying to write it back. any ideas how to save the original  
query, so the posts_nav_link works on the search pages?

the following code i am putting in the header.php to get the  
following outut
before:39 after:23
before and after should be the same. any ideas?


<?php

global $request, $posts_per_page, $wpdb, $max_num_pages;
$temp_query = $wp_query;
$wpdb_bkp=$wpdb;

preg_match('#FROM (.*) GROUP BY#', $request, $matches);
$fromwhere = $matches[1];
echo "before:".$wpdb->get_var("SELECT COUNT(ID) FROM $fromwhere");

# saving the posts_per_page and wpdb
$posts_per_page_backup = $posts_per_page;
$wpdb_backup = $wpdb;


$my_query=new WP_Query('category_name=Events&showposts=1');
if ($my_query->have_posts()) : while ($my_query->have_posts()) :  
$my_query->the_post();
$link_events=$post->ID;
endwhile; endif;

# writing back posts_per_page and wpdb
$wpdb=$wpdb_bkp;
$posts_per_page = $posts_per_page_backup;
$wpdb = $wpdb_backup;

$wp_query = $temp_query;

echo(" after:");
preg_match('#FROM (.*) GROUP BY#', $request, $matches);
$fromwhere = $matches[1];
echo $wpdb->get_var("SELECT COUNT(ID) FROM $fromwhere");

?>
From m at mullenweg.com  Fri Jul 22 01:50:11 2005
From: m at mullenweg.com (Matt Mullenweg)
Date: Fri Jul 22 01:50:26 2005
Subject: [wp-hackers] Plugin Readmes
In-Reply-To: <42DF8F6A.2070206@turnipspatch.com>
References: <000601c58ddc$db2eb500$6502a8c0@DB> <42DF7A30.7030807@firasd.org>
	<42DF8F6A.2070206@turnipspatch.com>
Message-ID: <42E050D3.7070102@mullenweg.com>

Jonathan Leighton wrote:
> I really don't see everybody who write a plugin also making a readme.txt
> for it.

That's fine. And for the directory on WordPress.org, I don't want any 
plugins where the authors couldn't be bothered to make a readme.txt. 
It's a self-selection process.

-- 
Matt Mullenweg
http://photomatt.net  | http://wordpress.org
http://pingomatic.com | http://cnet.com
From m at mullenweg.com  Fri Jul 22 01:50:53 2005
From: m at mullenweg.com (Matt Mullenweg)
Date: Fri Jul 22 01:51:10 2005
Subject: [wp-hackers] Plugin Readmes
In-Reply-To: <42DF5981.5050005@firasd.org>
References: <42DF03ED.9010006@firasd.org> <42DF080C.9010409@mullenweg.com>
	<42DF5981.5050005@firasd.org>
Message-ID: <42E050FD.1050906@mullenweg.com>

Firas D. wrote:
> What would be wonderful is if we could eventually link to profiles by 
> username (rather than the current /profile/(int) way)--any plans for 
> that sort of thing?

Here you go, it redirects:

http://wordpress.org/support/profile.php?username=matt

-- 
Matt Mullenweg
http://photomatt.net  | http://wordpress.org
http://pingomatic.com | http://cnet.com
From davebytes at comcast.net  Fri Jul 22 03:27:17 2005
From: davebytes at comcast.net (David Chait)
Date: Fri Jul 22 03:27:24 2005
Subject: [wp-hackers] wpdb and qp_query,
	and how to save query results for posts_nav_link
References: <A43E046A-D3DD-41D4-BEB3-7802AFCB1D8C@gmx.net>
Message-ID: <00e301c58e6d$4322a2d0$6e01a8c0@sixfour>

Ummm... why don't you wrapper the posts_nav_link in a output buffer, store 
it in a variable, and output it later when needed?  You don't really want to 
reconstitute wpdb, you just want the nav links you would have had if you 
didn't do extra queries... ;)

Just a thought! ;)

-d

----- Original Message ----- 
From: "Matthias Tarasiewicz" <p.a.r.a.s.e.w@gmx.net>
To: <wp-hackers@lists.automattic.com>
Sent: Thursday, July 21, 2005 6:16 PM
Subject: [wp-hackers] wpdb and qp_query,and how to save query results for 
posts_nav_link


>i have a question regarding multiple loops: as i am using several  queries 
>to show the last entries in various categories, but the  posts_nav_link 
>seems to lose the information about the previous  entries. if i comment out 
>the other queries, everything works fine.

From naudefj at telkomsa.net  Fri Jul 22 06:04:28 2005
From: naudefj at telkomsa.net (Frank Naude)
Date: Fri Jul 22 06:04:37 2005
Subject: [wp-hackers] WP as FAQ/ Knowledge Base System
Message-ID: <200507220804.28549.naudefj@telkomsa.net>

Would it be possible to hack WP into a FAQ/ Knowledge Base system, or are 
there better products to use? This is what I would like to achieve:

First page must show a Yahoo-directory of category links. Drilling down must 
show a Yahoo-directory of subcategories, and a listing of posts in that 
category.

Posts and categories should be listed in logical order - 'book-style'. I guess 
this can only be achieved by entering a "sort key" to control Category/ Post 
display order. 

Any ideas/ pointers will be greatly appreciated!

Best regards.

Frank
From turnip at turnipspatch.com  Fri Jul 22 07:41:40 2005
From: turnip at turnipspatch.com (Jonathan Leighton)
Date: Fri Jul 22 06:42:05 2005
Subject: [wp-hackers] Plugin Readmes
In-Reply-To: <42E050D3.7070102@mullenweg.com>
References: <000601c58ddc$db2eb500$6502a8c0@DB>
	<42DF7A30.7030807@firasd.org>	<42DF8F6A.2070206@turnipspatch.com>
	<42E050D3.7070102@mullenweg.com>
Message-ID: <42E0A334.7030503@turnipspatch.com>

Matt Mullenweg wrote:

> Jonathan Leighton wrote:
>
>> I really don't see everybody who write a plugin also making a readme.txt
>> for it.
>
> That's fine. And for the directory on WordPress.org, I don't want any
> plugins where the authors couldn't be bothered to make a readme.txt.
> It's a self-selection process.

It's not a case of being bothered (actually look at my Post Teaser
plugin -- it has one), it's a case of whether it's really very effective
to maintain two different formats of a document which say exactly the
same thing. I'd perhaps agree more if I could actually understand the
benefit these readmes have over a wiki page and the commenty tag things
every single plugin has.

Jon

-- 
Jonathan Leighton aka. Turnip
http://turnipspatch.com/ | http://digital-proof.org/

From r at schestowitz.com  Fri Jul 22 11:42:56 2005
From: r at schestowitz.com (Roy Schestowitz)
Date: Fri Jul 22 11:42:17 2005
Subject: [wp-hackers] WP as FAQ/ Knowledge Base System
In-Reply-To: <200507220804.28549.naudefj@telkomsa.net>
References: <200507220804.28549.naudefj@telkomsa.net>
Message-ID: <20050722124256.x4fhhdwe1skgk4o4@banana.catalyst2.com>

Quoting Frank Naude:

> Would it be possible to hack WP into a FAQ/ Knowledge Base system, or are
> there better products to use? This is what I would like to achieve:
>
> First page must show a Yahoo-directory of category links. Drilling down must
> show a Yahoo-directory of subcategories, and a listing of posts in that
> category.
>
> Posts and categories should be listed in logical order - 
> 'book-style'. I guess
> this can only be achieved by entering a "sort key" to control Category/ Post
> display order.
>
> Any ideas/ pointers will be greatly appreciated!
>
> Best regards.
>
> Frank

You can manipulate WordPress to do anything you like, though the amount of
coding and tailoring involved will vary.

PHP-Nuke has a FAQ module and it its recent versions also contain the
encyclopaedia module which you can use as a knowledgebase.

Hope it helps,

Roy

PS - apologies for an answer that is not entirely WordPress-friendly, but I am
trying to be helpful based on /personal/ experience. I am sure somebody else
knows the plug-ins you can use to make WordPress suitable for the task 
as well.
Alex King has used WordPress as a CMS several times in the past and 
wrote about
it. It's worth pursuing his notes on the topic.

-- 
Roy S. Schestowitz
http://Schestowitz.com

From denis at semiologic.com  Fri Jul 22 12:03:58 2005
From: denis at semiologic.com (Denis de Bernardy)
Date: Fri Jul 22 12:04:48 2005
Subject: [wp-hackers] WP as FAQ/ Knowledge Base System
In-Reply-To: <20050722124256.x4fhhdwe1skgk4o4@banana.catalyst2.com>
Message-ID: <000401c58eb5$715e7e10$6502a8c0@DB>

You can also:

- Create a small plugin to order category listings by title;
- Use categories as FAQ sections;
- Use posts as FAQ questions/answers; and
- Create a category.php template to make the best of the above

D.

> -----Original Message-----
> From: wp-hackers-bounces@lists.automattic.com 
> [mailto:wp-hackers-bounces@lists.automattic.com] On Behalf Of 
> Roy Schestowitz
> Sent: Friday, July 22, 2005 1:43 PM
> To: wp-hackers@lists.automattic.com
> Subject: Re: [wp-hackers] WP as FAQ/ Knowledge Base System
> 
> 
> Quoting Frank Naude:
> 
> > Would it be possible to hack WP into a FAQ/ Knowledge Base 
> system, or 
> > are there better products to use? This is what I would like to 
> > achieve:
> >
> > First page must show a Yahoo-directory of category links. Drilling 
> > down must show a Yahoo-directory of subcategories, and a listing of 
> > posts in that category.
> >
> > Posts and categories should be listed in logical order -
> > 'book-style'. I guess
> > this can only be achieved by entering a "sort key" to 
> control Category/ Post
> > display order.
> >
> > Any ideas/ pointers will be greatly appreciated!
> >
> > Best regards.
> >
> > Frank
> 
> You can manipulate WordPress to do anything you like, though 
> the amount of coding and tailoring involved will vary.
> 
> PHP-Nuke has a FAQ module and it its recent versions also 
> contain the encyclopaedia module which you can use as a knowledgebase.
> 
> Hope it helps,
> 
> Roy
> 
> PS - apologies for an answer that is not entirely 
> WordPress-friendly, but I am trying to be helpful based on 
> /personal/ experience. I am sure somebody else knows the 
> plug-ins you can use to make WordPress suitable for the task 
> as well.
> Alex King has used WordPress as a CMS several times in the past and 
> wrote about
> it. It's worth pursuing his notes on the topic.
> 
> -- 
> Roy S. Schestowitz
> http://Schestowitz.com
> 
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com 
> http://lists.automattic.com/mailman/listinfo/wp-hackers
> 

From skeltoac at gmail.com  Fri Jul 22 13:10:14 2005
From: skeltoac at gmail.com (Andy Skelton)
Date: Fri Jul 22 13:10:19 2005
Subject: [wp-hackers] Plugin Readmes
In-Reply-To: <42E0A334.7030503@turnipspatch.com>
References: <000601c58ddc$db2eb500$6502a8c0@DB> <42DF7A30.7030807@firasd.org>
	<42DF8F6A.2070206@turnipspatch.com>
	<42E050D3.7070102@mullenweg.com>
	<42E0A334.7030503@turnipspatch.com>
Message-ID: <e6ec604d050722061056feb163@mail.gmail.com>

On 7/22/05, Jonathan Leighton <turnip@turnipspatch.com> wrote:
> <<snip>> I'd perhaps agree more if I could actually understand the
> benefit these readmes have over a wiki page and the commenty tag things
> every single plugin has.

This is how I understand it, maybe it'll help. When I look at every
packaged software distro I've downloaded since I had to dial a local
BBS called The Dog Dish, the vast majority were packaged with a readme
file. The readme is a traditional, professional courtesy. So I can see
the value of a readme when distributing a packaged plugin.

A plugin installed by a one-click feature, similarly to extensions
from Mozilla, is not such a package and might not need such a readme
because a link to centralized documentation is sufficient and
appropriate. However, WP plugins are usually distributed as packages
and so they should include a readme. It's a mark of professionalism.

Andy
From dmhouse at gmail.com  Fri Jul 22 08:15:41 2005
From: dmhouse at gmail.com (David House)
Date: Fri Jul 22 15:24:58 2005
Subject: [wp-hackers] WP as FAQ/ Knowledge Base System
In-Reply-To: <200507220804.28549.naudefj@telkomsa.net>
References: <200507220804.28549.naudefj@telkomsa.net>
Message-ID: <ebe43d68050722011554353ca7@mail.gmail.com>

On 22/07/05, Frank Naude <naudefj@telkomsa.net> wrote:
> Would it be possible to hack WP into a FAQ/ Knowledge Base system, or are
> there better products to use? This is what I would like to achieve:

This is certainly possible. I don't know of any other systems that
would do the job, but there probably are some, so maybe you should
check those out before you proceed. Anyway, assuming you're going with
WordPress:
 
> First page must show a Yahoo-directory of category links. 

Create your own theme where index.php calls wp_list_cats().

> Drilling down must show a Yahoo-directory of subcategories, and 
> a listing of posts in that category.

In this theme of yours, make category.php list the sub categories
below the posts.

> Posts and categories should be listed in logical order - 'book-style'. I guess
> this can only be achieved by entering a "sort key" to control Category/ Post
> display order.

What do you mean, 'book style'?
 
> Any ideas/ pointers will be greatly appreciated!

This should all be possible with just a custom theme.

-- 
-David House, dmhouse@gmail.com, http://xmouse.ithium.net
From p.a.r.a.s.e.w at gmx.net  Fri Jul 22 16:00:47 2005
From: p.a.r.a.s.e.w at gmx.net (Matthias Tarasiewicz)
Date: Fri Jul 22 15:59:50 2005
Subject: [wp-hackers] wpdb and qp_query,
	and how to save query results for posts_nav_link
In-Reply-To: <00e301c58e6d$4322a2d0$6e01a8c0@sixfour>
References: <A43E046A-D3DD-41D4-BEB3-7802AFCB1D8C@gmx.net>
	<00e301c58e6d$4322a2d0$6e01a8c0@sixfour>
Message-ID: <69F91C5C-4911-408B-B827-891EEE0F1376@gmx.net>

hi david and thanks for your answer.
how would i "wrapper" the post_nav_link in an output buffer? could  
you give me an example?

thanks a lot!

-matthias


On 22 Jul 2005, at 05:27, David Chait wrote:


> Ummm... why don't you wrapper the posts_nav_link in a output  
> buffer, store it in a variable, and output it later when needed?   
> You don't really want to reconstitute wpdb, you just want the nav  
> links you would have had if you didn't do extra queries... ;)
>
> Just a thought! ;)
>
> -d
>
> ----- Original Message ----- From: "Matthias Tarasiewicz"  
> <p.a.r.a.s.e.w@gmx.net>
> To: <wp-hackers@lists.automattic.com>
> Sent: Thursday, July 21, 2005 6:16 PM
> Subject: [wp-hackers] wpdb and qp_query,and how to save query  
> results for posts_nav_link
>
>
>
>
>> i have a question regarding multiple loops: as i am using several   
>> queries to show the last entries in various categories, but the   
>> posts_nav_link seems to lose the information about the previous   
>> entries. if i comment out the other queries, everything works fine.
>>
>>
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
>
>


From spleeman at gmail.com  Fri Jul 22 16:46:32 2005
From: spleeman at gmail.com (Lee)
Date: Fri Jul 22 16:46:39 2005
Subject: [wp-hackers] WP as FAQ/ Knowledge Base System
In-Reply-To: <ebe43d68050722011554353ca7@mail.gmail.com>
References: <200507220804.28549.naudefj@telkomsa.net>
	<ebe43d68050722011554353ca7@mail.gmail.com>
Message-ID: <7d09b09c050722094677a343de@mail.gmail.com>

For having your posts in a 'logical order', Skippy's "In Series"
plugin may fit the bill.

http://www.skippy.net/blog/2005/05/26/plugin-in-series/

Also bear in mind that you can split one post into mulitple pages with
the "<!--page-->" markup.

On 22/07/05, David House <dmhouse@gmail.com> wrote:
> On 22/07/05, Frank Naude <naudefj@telkomsa.net> wrote:
> > Would it be possible to hack WP into a FAQ/ Knowledge Base system, or are
> > there better products to use? This is what I would like to achieve:
> 
> This is certainly possible. I don't know of any other systems that
> would do the job, but there probably are some, so maybe you should
> check those out before you proceed. Anyway, assuming you're going with
> WordPress:
> 
> > First page must show a Yahoo-directory of category links.
> 
> Create your own theme where index.php calls wp_list_cats().
> 
> > Drilling down must show a Yahoo-directory of subcategories, and
> > a listing of posts in that category.
> 
> In this theme of yours, make category.php list the sub categories
> below the posts.
> 
> > Posts and categories should be listed in logical order - 'book-style'. I guess
> > this can only be achieved by entering a "sort key" to control Category/ Post
> > display order.
> 
> What do you mean, 'book style'?
> 
> > Any ideas/ pointers will be greatly appreciated!
> 
> This should all be possible with just a custom theme.
> 
> --
> -David House, dmhouse@gmail.com, http://xmouse.ithium.net
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
From lorelle at cameraontheroad.com  Fri Jul 22 18:32:43 2005
From: lorelle at cameraontheroad.com (Lorelle VanFossen)
Date: Fri Jul 22 18:32:58 2005
Subject: [wp-hackers] Trackback Spam
Message-ID: <42E13BCB.3050308@cameraontheroad.com>

I'm sure some of you saw this but I thought I'd point it out just in case.

http://www.businessweek.com/the_thread/blogspotting/archives/2005/07/trackback_spam.html

It looks like comment spammers are changing their approach and coming in 
through trackbacks, and they are growing. There will be questions about 
this soon on the forum and we need to be prepared to answer them. Are 
trackbacks handled through spam filters like comments?

Thanks,

Lorelle
From fdevillamil at gmail.com  Fri Jul 22 18:36:37 2005
From: fdevillamil at gmail.com (Frederic de Villamil)
Date: Fri Jul 22 18:37:52 2005
Subject: [wp-hackers] Trackback Spam
In-Reply-To: <42E13BCB.3050308@cameraontheroad.com>
References: <42E13BCB.3050308@cameraontheroad.com>
Message-ID: <20050722183637.GA80739@7el.net>

Lorelle VanFossen wrote:
> I'm sure some of you saw this but I thought I'd point it out just in case.
>
> http://www.businessweek.com/the_thread/blogspotting/archives/2005/07/trackback_spam.html
>
> It looks like comment spammers are changing their approach and coming in 
> through trackbacks, and they are growing. There will be questions about 
> this soon on the forum and we need to be prepared to answer them. Are 
> trackbacks handled through spam filters like comments?
>
> Thanks,
>
> Lorelle

Hi,
spammers have been doing such a thing for monthes now.
I use spam karma and I never had any trackback going through.
From robmientjes at gmail.com  Fri Jul 22 19:43:27 2005
From: robmientjes at gmail.com (Rob Mientjes)
Date: Fri Jul 22 19:43:35 2005
Subject: [wp-hackers] Trackback Spam
In-Reply-To: <42E13BCB.3050308@cameraontheroad.com>
References: <42E13BCB.3050308@cameraontheroad.com>
Message-ID: <e8e97f9f050722124365b1dac@mail.gmail.com>

On 7/22/05, Lorelle VanFossen <lorelle@cameraontheroad.com> wrote:
> It looks like comment spammers are changing their approach and coming in
> through trackbacks, and they are growing. There will be questions about
> this soon on the forum and we need to be prepared to answer them. Are
> trackbacks handled through spam filters like comments?

It's been like that for quite some time. Spam Karma was too strict and
made some several false positives, so I tried the Spaminator, but that
doesn't work on Trackbacks. Oh well, I commented out most of
wp-trackback.php. Not a functionality I need, especially because it's
too easy to spoof.
-- 
-Rob.

http://zooibaai.nl/ - http://digital-proof.org/
http://design.zooibaai.nl/
From mark.wordpress at txfx.net  Fri Jul 22 19:45:03 2005
From: mark.wordpress at txfx.net (Mark Jaquith)
Date: Fri Jul 22 19:47:00 2005
Subject: [wp-hackers] Trackback Spam
In-Reply-To: <20050722183637.GA80739@7el.net>
References: <42E13BCB.3050308@cameraontheroad.com>
	<20050722183637.GA80739@7el.net>
Message-ID: <42E14CBF.4080808@txfx.net>

Frederic de Villamil wrote:

>Lorelle VanFossen wrote:
>  
>
>>I'm sure some of you saw this but I thought I'd point it out just in case.
>>
>>http://www.businessweek.com/the_thread/blogspotting/archives/2005/07/trackback_spam.html
>>
>>It looks like comment spammers are changing their approach and coming in 
>>through trackbacks, and they are growing. There will be questions about 
>>this soon on the forum and we need to be prepared to answer them. Are 
>>trackbacks handled through spam filters like comments?
>>
Bad Behavior + Spam Karma 2 is a pretty close to unbeatable combo.  
Especially useful is the option in Spam Karma 2 that checks the source 
URI for a valid link (much like WordPress already does for pingbacks).

-- 
Mark Jaquith
http://txfx.net/
MCincubus @ #wordpress

From peter.westwood at ftwr.co.uk  Fri Jul 22 19:49:37 2005
From: peter.westwood at ftwr.co.uk (Peter Westwood)
Date: Fri Jul 22 19:49:46 2005
Subject: [wp-hackers] Trackback Spam
In-Reply-To: <e8e97f9f050722124365b1dac@mail.gmail.com>
References: <42E13BCB.3050308@cameraontheroad.com>
	<e8e97f9f050722124365b1dac@mail.gmail.com>
Message-ID: <42E14DD1.1080001@ftwr.co.uk>

Rob Mientjes wrote:

>On 7/22/05, Lorelle VanFossen <lorelle@cameraontheroad.com> wrote:
>  
>
>>It looks like comment spammers are changing their approach and coming in
>>through trackbacks, and they are growing. There will be questions about
>>this soon on the forum and we need to be prepared to answer them. Are
>>trackbacks handled through spam filters like comments?
>>    
>>
>
>It's been like that for quite some time. Spam Karma was too strict and
>made some several false positives, so I tried the Spaminator, but that
>doesn't work on Trackbacks. Oh well, I commented out most of
>wp-trackback.php. Not a functionality I need, especially because it's
>too easy to spoof.
>  
>
Spam Karma 2 && Bad Behaviour provide very good protection against 
trackback spammers.  which are definetly not a new/recently increasing 
thing from what I see.

The original Spam Karma was not as good against trackbacks.
I believe in wp 1.2 trackbacks didn't go through the same route as 
comments and so were harder to run through spam checks hence why older 
spam tools are not any good against them

-- 
westi
From turnip at turnipspatch.com  Fri Jul 22 20:53:10 2005
From: turnip at turnipspatch.com (Jonathan Leighton)
Date: Fri Jul 22 19:53:24 2005
Subject: [wp-hackers] Trackback Spam
In-Reply-To: <e8e97f9f050722124365b1dac@mail.gmail.com>
References: <42E13BCB.3050308@cameraontheroad.com>
	<e8e97f9f050722124365b1dac@mail.gmail.com>
Message-ID: <42E15CB6.2050206@turnipspatch.com>

Rob Mientjes wrote:

>On 7/22/05, Lorelle VanFossen <lorelle@cameraontheroad.com> wrote:
>  
>
>>It looks like comment spammers are changing their approach and coming in
>>through trackbacks, and they are growing. There will be questions about
>>this soon on the forum and we need to be prepared to answer them. Are
>>trackbacks handled through spam filters like comments?
>>    
>>
>
>It's been like that for quite some time. Spam Karma was too strict and
>made some several false positives, so I tried the Spaminator, but that
>doesn't work on Trackbacks. Oh well, I commented out most of
>wp-trackback.php. Not a functionality I need, especially because it's
>too easy to spoof.
>  
>
Rob have you tried SK2? It's loads better.

-- 
Jonathan Leighton aka. Turnip
http://turnipspatch.com/ | http://digital-proof.org/

From ckunte at gmail.com  Sat Jul 23 03:01:04 2005
From: ckunte at gmail.com (Chetan Kunte)
Date: Sat Jul 23 03:01:17 2005
Subject: [wp-hackers] Comment rating - a feature request
Message-ID: <74b84aa305072220015f3d571b@mail.gmail.com>

Hi,

I was wondering if a feature like comment rating is a good idea. I was
reading across a few Indian bloggers where they have a unique problem:
Comments are not spam, but flames, trolls or downright nasty to
personal attacks.

A few bloggers share their experiences followed by discussions on how
to deal with such:

http://indsight.org/blog/archives/2005/07/19/dealing-with-nasty-comments/
http://www.ravikiran.com/2005/07/22/on-nasty-comments/
http://radio.weblogs.com/0121664/2005/07/21.html#a661

For the sake of conversation and transparency, and instead of
deleting, I was wondering if marking nasty comments like Slashdot
would be a good idea. Hence this request to look at an option like
comment rating.

Comment rating would be controlled by the author (from the admin
area). For uncivilized comments, he/she will mark them as "below the
threshold" or something to that effect.

As an addition in comment moderation area, in addition to "Approved",
"Spam", "Delete", .. there could be a radio like "Flame/Troll/Nasty".
When the admin marks a comment as such, the comment is seen in a
lighter color, italicized and/or a strikethrough is used with a note
automatically appearing above the comment like:

"This comment is below the threshold and is marked by the author as a
flame/troll"

Is this a good idea?
-- 
Chetan, ckunte.com
From ckunte at gmail.com  Sat Jul 23 03:34:01 2005
From: ckunte at gmail.com (Chetan Kunte)
Date: Sat Jul 23 03:34:18 2005
Subject: [wp-hackers] Re: Comment rating - a feature request
In-Reply-To: <74b84aa305072220015f3d571b@mail.gmail.com>
References: <74b84aa305072220015f3d571b@mail.gmail.com>
Message-ID: <74b84aa3050722203472604981@mail.gmail.com>

It looks like comments are transitioning from pure spam to
hate/troll/attacks, which is harder to beat (and require manual
intervention). Here's another example:

http://joi.ito.com/archives/2005/07/22/my_dear_trolls.html
-- 
Chetan, ckunte.com
From m at mullenweg.com  Sat Jul 23 03:36:17 2005
From: m at mullenweg.com (Matthew Mullenweg)
Date: Sat Jul 23 03:36:34 2005
Subject: [wp-hackers] Comment rating - a feature request
In-Reply-To: <74b84aa305072220015f3d571b@mail.gmail.com>
References: <74b84aa305072220015f3d571b@mail.gmail.com>
Message-ID: <42E1BB31.4060405@mullenweg.com>

Chetan Kunte wrote:
> "This comment is below the threshold and is marked by the author as a
> flame/troll"
> 
> Is this a good idea?

I think it'd be good for a plugin. Moderation keys work with names and 
IPs too already.

-- 
Matt Mullenweg
  http://photomatt.net | http://wordpress.org
http://pingomatic.com | http://cnet.com
From r at schestowitz.com  Sat Jul 23 04:03:24 2005
From: r at schestowitz.com (Roy Schestowitz)
Date: Sat Jul 23 04:03:34 2005
Subject: [wp-hackers] Comment rating - a feature request
In-Reply-To: <74b84aa305072220015f3d571b@mail.gmail.com>
References: <74b84aa305072220015f3d571b@mail.gmail.com>
Message-ID: <20050723050324.gaqutbtc03cwko88@banana.catalyst2.com>

Quoting Chetan Kunte <ckunte@gmail.com>:

> Hi,
>
> I was wondering if a feature like comment rating is a good idea. I was
> reading across a few Indian bloggers where they have a unique problem:
> Comments are not spam, but flames, trolls or downright nasty to
> personal attacks.
>
> A few bloggers share their experiences followed by discussions on how
> to deal with such:
>
> http://indsight.org/blog/archives/2005/07/19/dealing-with-nasty-comments/
> http://www.ravikiran.com/2005/07/22/on-nasty-comments/
> http://radio.weblogs.com/0121664/2005/07/21.html#a661
>
> For the sake of conversation and transparency, and instead of
> deleting, I was wondering if marking nasty comments like Slashdot
> would be a good idea. Hence this request to look at an option like
> comment rating.
>
> Comment rating would be controlled by the author (from the admin
> area). For uncivilized comments, he/she will mark them as "below the
> threshold" or something to that effect.
>
> As an addition in comment moderation area, in addition to "Approved",
> "Spam", "Delete", .. there could be a radio like "Flame/Troll/Nasty".
> When the admin marks a comment as such, the comment is seen in a
> lighter color, italicized and/or a strikethrough is used with a note
> automatically appearing above the comment like:
>
> "This comment is below the threshold and is marked by the author as a
> flame/troll"
>
> Is this a good idea?

You introduce a lot of extra complexity if you incorporate comment moderation
that becomes visible beyond dashboard-level. I remember how long it took me to
become fully-acquainted with all the rules and practices in Slashdot
(PHP-Nuke-based). Imagine yourself what a burden this will be to 'hit-and-run'
blog visitors.

If it becomes a plug-in, as I believe it should, the small proportion 
of people
who practically _require_ it will be able to install it. This makes me wonder
if plug-ins for threading of comments already exist... I once saw something,
but it was shallow...

Roy

-- 
Roy S. Schestowitz
http://Schestowitz.com

From r at schestowitz.com  Sat Jul 23 04:36:44 2005
From: r at schestowitz.com (Roy Schestowitz)
Date: Sat Jul 23 04:36:42 2005
Subject: [wp-hackers] Interface Language
Message-ID: <20050723053644.n6nih2iigwmoo40k@banana.catalyst2.com>

On an issue that does involve plug-ins, will WordPress allow change of interface
language in the future? As far as I know, language is currently hard-coded. It
would be a huge pro if phrases were defined outside the functions. The diverse
WordPress community would quickly provide a huge selection of translations,
which only weigh at a few kilobytes.

As Gallery version 2 (beta 4) was released yesterday (
http://gallery.menalto.com/modules.php?op=modload&name=News&file=article&sid=161
), you can see that they took similar steps, e.g.
http://photos.kevinnehls.com/main.php

This seems to be a trend, which is perhaps worth following. I don't think it can
be turned into a plug-in. It has a global effect and requires support from the
core. In terms of performance, you only need to access a single peripheral
file.

Roy

-- 
Roy S. Schestowitz
http://Schestowitz.com

From false.hopes at gmail.com  Sat Jul 23 04:39:01 2005
From: false.hopes at gmail.com (Robert Deaton)
Date: Sat Jul 23 04:39:25 2005
Subject: [wp-hackers] Interface Language
In-Reply-To: <20050723053644.n6nih2iigwmoo40k@banana.catalyst2.com>
References: <20050723053644.n6nih2iigwmoo40k@banana.catalyst2.com>
Message-ID: <a491f91d0507222139582ce079@mail.gmail.com>

Everything is internationalized already, and there are tons of
translations to various languages. See
http://codex.wordpress.org/Localization

On 7/22/05, Roy Schestowitz <r@schestowitz.com> wrote:
> On an issue that does involve plug-ins, will WordPress allow change of interface
> language in the future? As far as I know, language is currently hard-coded. It
> would be a huge pro if phrases were defined outside the functions. The diverse
> WordPress community would quickly provide a huge selection of translations,
> which only weigh at a few kilobytes.
> 
> As Gallery version 2 (beta 4) was released yesterday (
> http://gallery.menalto.com/modules.php?op=modload&name=News&file=article&sid=161
> ), you can see that they took similar steps, e.g.
> http://photos.kevinnehls.com/main.php
> 
> This seems to be a trend, which is perhaps worth following. I don't think it can
> be turned into a plug-in. It has a global effect and requires support from the
> core. In terms of performance, you only need to access a single peripheral
> file.
> 
> Roy
> 
> --
> Roy S. Schestowitz
> http://Schestowitz.com
> 
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
> 


-- 
--Robert Deaton
http://somethingunpredictable.com
From naudefj at telkomsa.net  Sun Jul 24 18:54:39 2005
From: naudefj at telkomsa.net (Frank Naude)
Date: Sun Jul 24 18:54:49 2005
Subject: [wp-hackers] Future of WordPress MU
Message-ID: <200507242054.39693.naudefj@telkomsa.net>

Hi,

Does anyone know how WordPress MU (http://mu.wordpress.org/) will evolve in 
future?

Will it eventually be integrated into standard WP? What is the expected 
timeframe before it would be stable enough for production use?

Best regards.

Frank
From m at mullenweg.com  Sun Jul 24 19:03:24 2005
From: m at mullenweg.com (Matthew Mullenweg)
Date: Sun Jul 24 19:05:35 2005
Subject: [wp-hackers] Future of WordPress MU
In-Reply-To: <200507242054.39693.naudefj@telkomsa.net>
References: <200507242054.39693.naudefj@telkomsa.net>
Message-ID: <42E3E5FC.4020300@mullenweg.com>

Frank Naude wrote:
> Does anyone know how WordPress MU (http://mu.wordpress.org/) will evolve in 
> future?

You should read this entry and participate on their forums:

http://mu.wordpress.org/blog/2005/06/mu-progress/

> Will it eventually be integrated into standard WP? What is the expected 
> timeframe before it would be stable enough for production use?

Stable is relative. MU and WordPress will always be separate products 
because they have very separate audiences.

-- 
Matt Mullenweg
  http://photomatt.net | http://wordpress.org
http://pingomatic.com | http://cnet.com
From naudefj at telkomsa.net  Sun Jul 24 19:45:23 2005
From: naudefj at telkomsa.net (Frank Naude)
Date: Sun Jul 24 19:45:32 2005
Subject: [wp-hackers] Future of WordPress MU
In-Reply-To: <42E3E5FC.4020300@mullenweg.com>
References: <200507242054.39693.naudefj@telkomsa.net>
	<42E3E5FC.4020300@mullenweg.com>
Message-ID: <200507242145.23250.naudefj@telkomsa.net>

Thank you for the reply. Personally I would prefer one product, similar to 
MovableType. Anyway, I will continue my discussions on the WPMU forum when it 
is available again.

Best regards.

Frank

On Sunday 24 July 2005 21:03, Matthew Mullenweg wrote:
> Frank Naude wrote:
> > Does anyone know how WordPress MU (http://mu.wordpress.org/) will evolve
> > in future?
>
> You should read this entry and participate on their forums:
>
> http://mu.wordpress.org/blog/2005/06/mu-progress/
>
> > Will it eventually be integrated into standard WP? What is the expected
> > timeframe before it would be stable enough for production use?
>
> Stable is relative. MU and WordPress will always be separate products
> because they have very separate audiences.
From mmq at dekinai.com  Sun Jul 24 21:18:45 2005
From: mmq at dekinai.com (Mark Quinn)
Date: Sun Jul 24 21:18:59 2005
Subject: [wp-hackers] Adding user options pages
Message-ID: <42E405B5.4030909@dekinai.com>

I'm working on an OpenID authentication plugin for Wordpress. The plugin 
would allow registers users to associate URLs with their accounts, and 
then login by proving ownership of those URLs using OpenID instead of 
using the standard username and password authentication.
    I'm fine with creating a new table to store the URLs and what userid 
they're associated with, but I also need to give the user an interface 
to manage these URLs. Is there a way to add an extra user options page, 
like you can with admin options? As far as I can tell, there is no hook 
for it. I get the feeling that this is coming in 1.6 (with the new 
usermeta stuff?), but it doesn't seem like it is in the repository yet. 
If there is going to be a hook, does anybody know what/where it will be 
yet? This is part of a google summer of code project, so I can't wait 
for 1.6, but I would like to mimic its interface as closely as possible 
if I have to patch the 1.5 core code.

Mark Quinn

From jalenack at gmail.com  Sun Jul 24 21:32:59 2005
From: jalenack at gmail.com (Jalenack)
Date: Sun Jul 24 21:33:06 2005
Subject: [wp-hackers] Adding user options pages
In-Reply-To: <42E405B5.4030909@dekinai.com>
References: <42E405B5.4030909@dekinai.com>
Message-ID: <ed51b67c0507241432e37c305@mail.gmail.com>

If I understand you correctly, you're looking for: 

http://codex.wordpress.org/Adding_Administration_Menus

--
Andrew Sutherland
Jalenack.com <http://Jalenack.com>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://comox.textdrive.com/pipermail/wp-hackers/attachments/20050724/c10677b9/attachment.html
From false.hopes at gmail.com  Sun Jul 24 21:33:09 2005
From: false.hopes at gmail.com (Robert Deaton)
Date: Sun Jul 24 21:35:32 2005
Subject: [wp-hackers] Adding user options pages
In-Reply-To: <42E405B5.4030909@dekinai.com>
References: <42E405B5.4030909@dekinai.com>
Message-ID: <a491f91d0507241433521e73c3@mail.gmail.com>

http://codex.wordpress.org/Writing_a_Plugin#Adding_Administration_Panels
http://codex.wordpress.org/Adding_Administration_Menus

On 7/24/05, Mark Quinn <mmq@dekinai.com> wrote:
> I'm working on an OpenID authentication plugin for Wordpress. The plugin
> would allow registers users to associate URLs with their accounts, and
> then login by proving ownership of those URLs using OpenID instead of
> using the standard username and password authentication.
>     I'm fine with creating a new table to store the URLs and what userid
> they're associated with, but I also need to give the user an interface
> to manage these URLs. Is there a way to add an extra user options page,
> like you can with admin options? As far as I can tell, there is no hook
> for it. I get the feeling that this is coming in 1.6 (with the new
> usermeta stuff?), but it doesn't seem like it is in the repository yet.
> If there is going to be a hook, does anybody know what/where it will be
> yet? This is part of a google summer of code project, so I can't wait
> for 1.6, but I would like to mimic its interface as closely as possible
> if I have to patch the 1.5 core code.
> 
> Mark Quinn
> 
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
> 


-- 
--Robert Deaton
http://somethingunpredictable.com
From gslin at ccca.nctu.edu.tw  Sun Jul 24 22:55:25 2005
From: gslin at ccca.nctu.edu.tw (Gea-Suan Lin)
Date: Sun Jul 24 23:24:23 2005
Subject: [wp-hackers] 1.6-do-not-use,
	PHP warning in Categories (when write post)
Message-ID: <20050724225525.GA21871@ccca.nctu.edu.tw>

When I upgrade to r2735 (and wp-admin/upgrade.php, of course), I found
there are some PHP warning when I write post:

http://www.flickr.com/photos/gslin/28300708/

I trace the code and found it's because this patch:

http://trac.wordpress.org/changeset/2730#file3

I revert this function then it works fine.

-- 
* Gea-Suan Lin  (public key: http://ccreader.nctu.edu.tw/~gslin/key.txt)
* If you cannot convince them, confuse them.           -- Harry S Truman
From m at mullenweg.com  Mon Jul 25 01:44:07 2005
From: m at mullenweg.com (Matthew Mullenweg)
Date: Mon Jul 25 01:46:23 2005
Subject: [wp-hackers] 1.6-do-not-use,	PHP warning in Categories (when
	write post)
In-Reply-To: <20050724225525.GA21871@ccca.nctu.edu.tw>
References: <20050724225525.GA21871@ccca.nctu.edu.tw>
Message-ID: <42E443E7.4080600@mullenweg.com>

Gea-Suan Lin wrote:
> When I upgrade to r2735 (and wp-admin/upgrade.php, of course), I found
> there are some PHP warning when I write post:
> 
> http://www.flickr.com/photos/gslin/28300708/

Could you dig a little further. It seems to only way you would get that 
error is if you have no categories, or you didn't run the upgrade.

-- 
Matt Mullenweg
  http://photomatt.net | http://wordpress.org
http://pingomatic.com | http://cnet.com
From dstewart at atl.lmco.com  Mon Jul 25 13:12:39 2005
From: dstewart at atl.lmco.com (Doug Stewart)
Date: Mon Jul 25 13:12:52 2005
Subject: [wp-hackers] Comment rating - a feature request
In-Reply-To: <20050723050324.gaqutbtc03cwko88@banana.catalyst2.com>
References: <74b84aa305072220015f3d571b@mail.gmail.com>
	<20050723050324.gaqutbtc03cwko88@banana.catalyst2.com>
Message-ID: <42E4E547.4010405@atl.lmco.com>

Roy Schestowitz wrote:
> I remember how long it took me to become fully-acquainted with 
 > all the rules and practices in Slashdot (PHP-Nuke-based).

That is wrong on so many levels.

1) Slashdot runs on Slashcode, which they developed on their own over 
the course of many years. (http://www.slashcode.com/)

2) Slashcode is written in Perl, not php, and utilizes mod_perl for 
speedups.

3) How dare you bring up PHP Nuke?  *grin*

-- 
----------
Doug Stewart
Systems Administrator/Web Applications Developer
Lockheed Martin Advanced Technology Labs
dstewart@atl.lmco.com
From r at schestowitz.com  Mon Jul 25 13:38:53 2005
From: r at schestowitz.com (Roy Schestowitz)
Date: Mon Jul 25 13:31:30 2005
Subject: [wp-hackers] Comment rating - a feature request
In-Reply-To: <42E4E547.4010405@atl.lmco.com>
References: <74b84aa305072220015f3d571b@mail.gmail.com>
	<20050723050324.gaqutbtc03cwko88@banana.catalyst2.com>
	<42E4E547.4010405@atl.lmco.com>
Message-ID: <20050725143853.v440ilbsv7a8gw0k@banana.catalyst2.com>

Quoting Doug Stewart <dstewart@atl.lmco.com>:

> Roy Schestowitz wrote:
>> I remember how long it took me to become fully-acquainted with
>  > all the rules and practices in Slashdot (PHP-Nuke-based).
>
> That is wrong on so many levels.
>
> 1) Slashdot runs on Slashcode, which they developed on their own over
> the course of many years. (http://www.slashcode.com/)


I have always imagined that CmdrTaco nicked it from somewhere else and hacked
some bits of it...


> 2) Slashcode is written in Perl, not php, and utilizes mod_perl for
> speedups.


Have you seen the obscene amount of overlap between PHP-Nuke and 
Slashdot? They
even use the same language with the same typos and the same bugs. The PHP-Nuke
team named one of their base themes after Slashdot.


> 3) How dare you bring up PHP Nuke?  *grin*


I dared *smile*. I happily run two sites on it.

Cheers,

Roy

-- 
Roy S. Schestowitz
http://Schestowitz.com

From fdevillamil at gmail.com  Mon Jul 25 13:35:25 2005
From: fdevillamil at gmail.com (Frederic de Villamil)
Date: Mon Jul 25 13:36:45 2005
Subject: [wp-hackers] Comment rating - a feature request
In-Reply-To: <42E4E547.4010405@atl.lmco.com>
References: <74b84aa305072220015f3d571b@mail.gmail.com>
	<20050723050324.gaqutbtc03cwko88@banana.catalyst2.com>
	<42E4E547.4010405@atl.lmco.com>
Message-ID: <20050725133448.M4121@7el.net>

On Mon, 25 Jul 2005 09:12:39 -0400, Doug Stewart wrote
> Roy Schestowitz wrote:
> > I remember how long it took me to become fully-acquainted with 
>  > all the rules and practices in Slashdot (PHP-Nuke-based).
> 
> That is wrong on so many levels.
> 
> 1) Slashdot runs on Slashcode, which they developed on their own 
> over the course of many years. (http://www.slashcode.com/)
> 
> 2) Slashcode is written in Perl, not php, and utilizes mod_perl for 
> speedups.
> 
> 3) How dare you bring up PHP Nuke?  *grin*

PHPNuke is just great.
Providing script kiddies a playground since october 2000.
--
Fr?d?ric de Villamil
Ce qui est ? moi est ? moi, ce qui est ? toi ?a se n?gocie. (proverbe motokiste)
http://www.eretzvaju.org

From dstewart at atl.lmco.com  Mon Jul 25 13:41:56 2005
From: dstewart at atl.lmco.com (Doug Stewart)
Date: Mon Jul 25 13:42:03 2005
Subject: [wp-hackers] Comment rating - a feature request
In-Reply-To: <20050725143853.v440ilbsv7a8gw0k@banana.catalyst2.com>
References: <74b84aa305072220015f3d571b@mail.gmail.com>
	<20050723050324.gaqutbtc03cwko88@banana.catalyst2.com>
	<42E4E547.4010405@atl.lmco.com>
	<20050725143853.v440ilbsv7a8gw0k@banana.catalyst2.com>
Message-ID: <42E4EC24.8090106@atl.lmco.com>

Roy Schestowitz wrote:
> I have always imagined that CmdrTaco nicked it from somewhere else and 
> hacked
> some bits of it...
> 

A distinct possibility, but IIRC Slashcode has been in existence for 
longer than PHP Nuke.  It could be that PHP Nuke has cribbed code from 
Slash. *shrug*

> 
> Have you seen the obscene amount of overlap between PHP-Nuke and 
> Slashdot? They
> even use the same language with the same typos and the same bugs. The 
> PHP-Nuke
> team named one of their base themes after Slashdot.
> 

See above.  Could be the reverse of what you're proposing.

> 
> I dared *smile*. I happily run two sites on it.
> 

You're a better man than I.  Every single one of my [Post|PHP]Nuke 
experiences has been marred with difficult upgrades, finnicky templates, 
a distinct lack of documentation and long-way-round-the-horn solutions 
to problems that ought to be easy.

I've been replacing our intranet *Nuke solutions with WP as the CMS.  My 
content creators and communications dept. couldn't be happier.

For the heavier-weight stuff, I've been pondering Mamboserver.

-- 
----------
Doug Stewart
Systems Administrator/Web Applications Developer
Lockheed Martin Advanced Technology Labs
dstewart@atl.lmco.com
From dstewart at atl.lmco.com  Mon Jul 25 13:44:09 2005
From: dstewart at atl.lmco.com (Doug Stewart)
Date: Mon Jul 25 13:44:18 2005
Subject: [wp-hackers] Comment rating - a feature request
In-Reply-To: <20050725133448.M4121@7el.net>
References: <74b84aa305072220015f3d571b@mail.gmail.com>
	<20050723050324.gaqutbtc03cwko88@banana.catalyst2.com>
	<42E4E547.4010405@atl.lmco.com> <20050725133448.M4121@7el.net>
Message-ID: <42E4ECA9.7020206@atl.lmco.com>

Frederic de Villamil wrote:
> 
> PHPNuke is just great.
> Providing script kiddies a playground since october 2000.

Heh.  That and phpBB.

-- 
----------
Doug Stewart
Systems Administrator/Web Applications Developer
Lockheed Martin Advanced Technology Labs
dstewart@atl.lmco.com
From false.hopes at gmail.com  Mon Jul 25 13:45:09 2005
From: false.hopes at gmail.com (Robert Deaton)
Date: Mon Jul 25 13:46:16 2005
Subject: [wp-hackers] Comment rating - a feature request
In-Reply-To: <20050725143853.v440ilbsv7a8gw0k@banana.catalyst2.com>
References: <74b84aa305072220015f3d571b@mail.gmail.com>
	<20050723050324.gaqutbtc03cwko88@banana.catalyst2.com>
	<42E4E547.4010405@atl.lmco.com>
	<20050725143853.v440ilbsv7a8gw0k@banana.catalyst2.com>
Message-ID: <a491f91d0507250645623427b2@mail.gmail.com>

> Have you seen the obscene amount of overlap between PHP-Nuke and
> Slashdot? They
> even use the same language with the same typos and the same bugs. 

There is no such thing. They're written in entirely different
programming languages by entirely different teams. They're not
related, nor have they ever been, and odds are they will never be.
Just because the default theme on slashdot looks like PHP-Nuke,
doesn't mean it is.



-- 
--Robert Deaton
http://somethingunpredictable.com
From fdevillamil at gmail.com  Mon Jul 25 13:45:39 2005
From: fdevillamil at gmail.com (Frederic de Villamil)
Date: Mon Jul 25 13:47:01 2005
Subject: [wp-hackers] Comment rating - a feature request
In-Reply-To: <42E4ECA9.7020206@atl.lmco.com>
References: <74b84aa305072220015f3d571b@mail.gmail.com>
	<20050723050324.gaqutbtc03cwko88@banana.catalyst2.com>
	<42E4E547.4010405@atl.lmco.com> <20050725133448.M4121@7el.net>
	<42E4ECA9.7020206@atl.lmco.com>
Message-ID: <20050725134518.M28077@7el.net>

On Mon, 25 Jul 2005 09:44:09 -0400, Doug Stewart wrote
> Frederic de Villamil wrote:
> > 
> > PHPNuke is just great.
> > Providing script kiddies a playground since october 2000.
> 
> Heh.  That and phpBB.
> 

s/BB//g
--
Fr?d?ric de Villamil
Ce qui est ? moi est ? moi, ce qui est ? toi ?a se n?gocie. (proverbe motokiste)
http://www.eretzvaju.org

From r at schestowitz.com  Mon Jul 25 14:10:58 2005
From: r at schestowitz.com (Roy Schestowitz)
Date: Mon Jul 25 14:34:48 2005
Subject: [wp-hackers] Comment rating - a feature request
In-Reply-To: <42E4EC24.8090106@atl.lmco.com>
References: <74b84aa305072220015f3d571b@mail.gmail.com>
	<20050723050324.gaqutbtc03cwko88@banana.catalyst2.com>
	<42E4E547.4010405@atl.lmco.com>
	<20050725143853.v440ilbsv7a8gw0k@banana.catalyst2.com>
	<42E4EC24.8090106@atl.lmco.com>
Message-ID: <20050725151058.o037s1q5oqgwk0ws@banana.catalyst2.com>

Quoting Doug Stewart <dstewart@atl.lmco.com>:

> Roy Schestowitz wrote:
>> I have always imagined that CmdrTaco nicked it from somewhere else 
>> and hacked
>> some bits of it...
>>
>
> A distinct possibility, but IIRC Slashcode has been in existence for
> longer than PHP Nuke.  It could be that PHP Nuke has cribbed code from
> Slash. *shrug*


from [ http://cmdrtaco.net/rob.shtml ]:

"Towards the end of The College Experience I began putting together all my
skills and assembled a website I obnoxiously named Slashdot, and the rest is
internet history! I combined my love of Linux and Technology with my abilities
as a webmaster to produce a site that exploded in popularity and to this day
(as I write this, 6 and a half years later) is one of the largest and most
influential sites on the net."

The earliest archive goes back to December 1997:

http://web.archive.org/web/19971221012817/http://slashdot.org/

I guess you are possibly right then.


>> Have you seen the obscene amount of overlap between PHP-Nuke and 
>> Slashdot? They
>> even use the same language with the same typos and the same bugs. 
>> The PHP-Nuke
>> team named one of their base themes after Slashdot.
>>
>
> See above.  Could be the reverse of what you're proposing.
>
>>
>> I dared *smile*. I happily run two sites on it.
>>
>
> You're a better man than I.  Every single one of my [Post|PHP]Nuke
> experiences has been marred with difficult upgrades, finnicky templates,
> a distinct lack of documentation and long-way-round-the-horn solutions
> to problems that ought to be easy.
>
> I've been replacing our intranet *Nuke solutions with WP as the CMS.  My
> content creators and communications dept. couldn't be happier.
>
> For the heavier-weight stuff, I've been pondering Mamboserver.

Mambo drives our LUG's Web site. My colleague who runs it seems satisfied with
it, although he has a great deal of respect to WordPress, which I recommended
to him all along. He wanted a CMS/announcement platform rather than a blogging
package. WordPress is called a "publishing platform", but is best 
renowned as a
"blog thingie".

Roy

-- 
Roy S. Schestowitz
http://Schestowitz.com

From dstewart at atl.lmco.com  Mon Jul 25 14:39:20 2005
From: dstewart at atl.lmco.com (Doug Stewart)
Date: Mon Jul 25 14:40:21 2005
Subject: [wp-hackers] Comment rating - a feature request
In-Reply-To: <20050725151058.o037s1q5oqgwk0ws@banana.catalyst2.com>
References: <74b84aa305072220015f3d571b@mail.gmail.com>
	<20050723050324.gaqutbtc03cwko88@banana.catalyst2.com>
	<42E4E547.4010405@atl.lmco.com>
	<20050725143853.v440ilbsv7a8gw0k@banana.catalyst2.com>
	<42E4EC24.8090106@atl.lmco.com>
	<20050725151058.o037s1q5oqgwk0ws@banana.catalyst2.com>
Message-ID: <42E4F998.4010708@atl.lmco.com>

Roy Schestowitz wrote:
> The earliest archive goes back to December 1997:
> 
> http://web.archive.org/web/19971221012817/http://slashdot.org/
> 
> I guess you are possibly right then.

I believe it was called "Chips n' Dips" prior to morphing into /., back 
when Rob was  still attending college in Michigan.  I recall a friend of 
mine pointing me to it my frosh year (or maybe sophomore year) in ~'96...

-- 
----------
Doug Stewart
Systems Administrator/Web Applications Developer
Lockheed Martin Advanced Technology Labs
dstewart@atl.lmco.com
From m at mullenweg.com  Mon Jul 25 20:19:42 2005
From: m at mullenweg.com (Matt Mullenweg)
Date: Mon Jul 25 20:20:00 2005
Subject: [wp-hackers] Two plugin ideas
Message-ID: <42E5495E.1060607@mullenweg.com>

If these don't already exist, might be fun for somebody:

When using WP as a CMS, it'd be great to have a way to represent 
alternate languages for the same content. So on my About page I can link 
to 3 translations of that if they exist, and vice versa.

The second is a a submission form much in the same vein as the contact 
form. Let people submit content and it puts it into some sort of 
moderation cue which will either publish it with the proper attribution 
or archive it. This can be done currently with having people register 
and then letting them submit drafts but not publish, but that's not the 
most inviting way to do things.

-- 
Matt Mullenweg
http://photomatt.net  | http://wordpress.org
http://pingomatic.com | http://cnet.com
From robmientjes at gmail.com  Mon Jul 25 21:12:29 2005
From: robmientjes at gmail.com (Rob Mientjes)
Date: Mon Jul 25 21:12:41 2005
Subject: [wp-hackers] Two plugin ideas
In-Reply-To: <42E5495E.1060607@mullenweg.com>
References: <42E5495E.1060607@mullenweg.com>
Message-ID: <e8e97f9f050725141275de541a@mail.gmail.com>

On 7/25/05, Matt Mullenweg <m@mullenweg.com> wrote:
> When using WP as a CMS, it'd be great to have a way to represent
> alternate languages for the same content. So on my About page I can link
> to 3 translations of that if they exist, and vice versa.

Or even with content negotiation and some smart scripting...

> The second is a a submission form much in the same vein as the contact
> form. Let people submit content and it puts it into some sort of
> moderation cue which will either publish it with the proper attribution
> or archive it. This can be done currently with having people register
> and then letting them submit drafts but not publish, but that's not the
> most inviting way to do things.

Been looking at Slashdot? ;)
From m at mullenweg.com  Mon Jul 25 21:38:50 2005
From: m at mullenweg.com (Matt Mullenweg)
Date: Mon Jul 25 21:39:03 2005
Subject: [wp-hackers] Two plugin ideas
In-Reply-To: <e8e97f9f050725141275de541a@mail.gmail.com>
References: <42E5495E.1060607@mullenweg.com>
	<e8e97f9f050725141275de541a@mail.gmail.com>
Message-ID: <42E55BEA.9030004@mullenweg.com>

Rob Mientjes wrote:
>>When using WP as a CMS, it'd be great to have a way to represent
>>alternate languages for the same content. So on my About page I can link
>>to 3 translations of that if they exist, and vice versa.
> 
> Or even with content negotiation and some smart scripting...

I would rather have distinct URIs for the different resources, but I 
suppose content negotiation could give hints as to what a proper default is.

-- 
Matt Mullenweg
http://photomatt.net  | http://wordpress.org
http://pingomatic.com | http://cnet.com
From cicloid at idealabs.tk  Mon Jul 25 21:45:23 2005
From: cicloid at idealabs.tk (Gustavo Barron)
Date: Mon Jul 25 21:45:26 2005
Subject: [wp-hackers] Two plugin ideas
In-Reply-To: <42E5495E.1060607@mullenweg.com>
References: <42E5495E.1060607@mullenweg.com>
Message-ID: <42E55D73.9040604@idealabs.tk>

Matt Mullenweg wrote:

> If these don't already exist, might be fun for somebody:
>
> When using WP as a CMS, it'd be great to have a way to represent
> alternate languages for the same content. So on my About page I can
> link to 3 translations of that if they exist, and vice versa.
>
Sounds like a great idea...

> The second is a a submission form much in the same vein as the contact
> form. Let people submit content and it puts it into some sort of
> moderation cue which will either publish it with the proper
> attribution or archive it. This can be done currently with having
> people register and then letting them submit drafts but not publish,
> but that's not the most inviting way to do things.
>
Working on that, as a very alpha version, i just got a WP Submit News.
That is basically the Contact Form plugin inserting the content as
drafts, but I'm making a new version from scratch that will do almost
all this...
From false.hopes at gmail.com  Mon Jul 25 23:18:14 2005
From: false.hopes at gmail.com (Robert Deaton)
Date: Mon Jul 25 23:18:25 2005
Subject: [wp-hackers] Two plugin ideas
In-Reply-To: <42E55D73.9040604@idealabs.tk>
References: <42E5495E.1060607@mullenweg.com> <42E55D73.9040604@idealabs.tk>
Message-ID: <a491f91d05072516181d12411f@mail.gmail.com>

For the first idea, you might talk to chrys_seren on IRC. Her site is
at http://serendipity.lascribe.net/ and is powered by WordPress, so
finding out how she did it might be nice. iirc, her stuff is based on
Kitten's old language patches that were submitted for inclusion in
1.3/1.5 but didn't make it.

On 7/25/05, Gustavo Barron <cicloid@idealabs.tk> wrote:
> Matt Mullenweg wrote:
> 
> > If these don't already exist, might be fun for somebody:
> >
> > When using WP as a CMS, it'd be great to have a way to represent
> > alternate languages for the same content. So on my About page I can
> > link to 3 translations of that if they exist, and vice versa.
> >
> Sounds like a great idea...
> 
> > The second is a a submission form much in the same vein as the contact
> > form. Let people submit content and it puts it into some sort of
> > moderation cue which will either publish it with the proper
> > attribution or archive it. This can be done currently with having
> > people register and then letting them submit drafts but not publish,
> > but that's not the most inviting way to do things.
> >
> Working on that, as a very alpha version, i just got a WP Submit News.
> That is basically the Contact Form plugin inserting the content as
> drafts, but I'm making a new version from scratch that will do almost
> all this...
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
> 


-- 
--Robert Deaton
http://somethingunpredictable.com
From m at mullenweg.com  Tue Jul 26 01:32:43 2005
From: m at mullenweg.com (Matthew Mullenweg)
Date: Tue Jul 26 01:34:59 2005
Subject: [wp-hackers] Forbes.com award
Message-ID: <42E592BB.1050400@mullenweg.com>

http://www.forbes.com/bow/b2c/review.jhtml?id=7262

Congrats everybody!

Ahem, Owen? ;)

-- 
Matt Mullenweg
  http://photomatt.net | http://wordpress.org
http://pingomatic.com | http://cnet.com
From ryan at ryanduff.net  Tue Jul 26 02:04:36 2005
From: ryan at ryanduff.net (Ryan Duff)
Date: Tue Jul 26 02:04:27 2005
Subject: [wp-hackers] Forbes.com award
In-Reply-To: <42E592BB.1050400@mullenweg.com>
References: <42E592BB.1050400@mullenweg.com>
Message-ID: <42E59A34.3050002@ryanduff.net>

Matthew Mullenweg wrote:
> http://www.forbes.com/bow/b2c/review.jhtml?id=7262
> 
> Congrats everybody!
> 
> Ahem, Owen? ;)
> 

Awesome! Heh, don't pick on poor Owen if you want it built into 1.6 :P

Ryan Duff
http://ryanduff.net
AIM: ryancduff
irc.freenode.net #wordpress
From jdingman at gmail.com  Tue Jul 26 13:24:05 2005
From: jdingman at gmail.com (Jonathan Dingman)
Date: Tue Jul 26 13:24:58 2005
Subject: [wp-hackers] Forbes.com award
In-Reply-To: <20050726120037.E7235B926@comox.textdrive.com>
References: <20050726120037.E7235B926@comox.textdrive.com>
Message-ID: <13af0b63050726062474ca2163@mail.gmail.com>

Matthew Mullenweg wrote:

> > http://www.forbes.com/bow/b2c/review.jhtml?id=7262
> >
> > Congrats everybody!
> >
> > Ahem, Owen? ;)
> >
> 
> Awesome! Heh, don't pick on poor Owen if you want it built into 1.6 :P



I figure if the worst thing someone can find about Wordpress is poor image 
management, we have some AWESOME software on our hands here! We didn't have 
image management in mind at first anyway, but we're still moving in that 
direction and people are coming out with plugins for it. Again, with matt, 
congarats everyone!!

Jonathan Dingman
http://www.bleakgeek.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://comox.textdrive.com/pipermail/wp-hackers/attachments/20050726/65aaf9c3/attachment.html
From turnip at turnipspatch.com  Tue Jul 26 22:09:24 2005
From: turnip at turnipspatch.com (Jonathan Leighton)
Date: Tue Jul 26 21:09:41 2005
Subject: [wp-hackers] Plugin download repository
Message-ID: <42E6B494.2060002@turnipspatch.com>

Would it be possible to have a mirror of http://svn.wp-plugins.org/ at
http://download.wp-plugins.org/ with a HTTP header such that files get
downloaded rather than displayed? It would make non-techie users' lives
that little bit easier if we can link to files there I think. I know
there's going to be http://wordpress.org/extend/plugins/, but for
plugins with only one file it's not particularly useful to have it
zipped up (just makes more work for the user). What think ye all?

Jon

-- 
Jonathan Leighton aka. Turnip
http://turnipspatch.com/ | http://digital-proof.org/

From turnip at turnipspatch.com  Tue Jul 26 22:10:47 2005
From: turnip at turnipspatch.com (Jonathan Leighton)
Date: Tue Jul 26 21:11:00 2005
Subject: [wp-hackers] Plugin download repository
In-Reply-To: <42E6B494.2060002@turnipspatch.com>
References: <42E6B494.2060002@turnipspatch.com>
Message-ID: <42E6B4E7.4000206@turnipspatch.com>

Another benefit would be that users are less likely to whack whitespace
into their plugin files.

Jonathan Leighton wrote:

>Would it be possible to have a mirror of http://svn.wp-plugins.org/ at
>http://download.wp-plugins.org/ with a HTTP header such that files get
>downloaded rather than displayed? It would make non-techie users' lives
>that little bit easier if we can link to files there I think. I know
>there's going to be http://wordpress.org/extend/plugins/, but for
>plugins with only one file it's not particularly useful to have it
>zipped up (just makes more work for the user). What think ye all?
>
>Jon
>
>  
>

-- 
Jonathan Leighton aka. Turnip
http://turnipspatch.com/ | http://digital-proof.org/

From m at mullenweg.com  Tue Jul 26 21:11:04 2005
From: m at mullenweg.com (Matt Mullenweg)
Date: Tue Jul 26 21:11:16 2005
Subject: [wp-hackers] Plugin download repository
In-Reply-To: <42E6B494.2060002@turnipspatch.com>
References: <42E6B494.2060002@turnipspatch.com>
Message-ID: <42E6A6E8.1010907@mullenweg.com>

Jonathan Leighton wrote:
> Would it be possible to have a mirror of http://svn.wp-plugins.org/ at
> http://download.wp-plugins.org/ with a HTTP header such that files get
> downloaded rather than displayed? It would make non-techie users' lives
> that little bit easier if we can link to files there I think. I know
> there's going to be http://wordpress.org/extend/plugins/, but for
> plugins with only one file it's not particularly useful to have it
> zipped up (just makes more work for the user). What think ye all?

Sure:

http://downloads.wordpress.org/plugin/

-- 
Matt Mullenweg
http://photomatt.net  | http://wordpress.org
http://pingomatic.com | http://cnet.com
From turnip at turnipspatch.com  Tue Jul 26 22:31:07 2005
From: turnip at turnipspatch.com (Jonathan Leighton)
Date: Tue Jul 26 21:31:28 2005
Subject: [wp-hackers] Plugin download repository
In-Reply-To: <42E6A6E8.1010907@mullenweg.com>
References: <42E6B494.2060002@turnipspatch.com>
	<42E6A6E8.1010907@mullenweg.com>
Message-ID: <42E6B9AB.3030503@turnipspatch.com>

Matt Mullenweg wrote:

> Jonathan Leighton wrote:
>
>> Would it be possible to have a mirror of http://svn.wp-plugins.org/ at
>> http://download.wp-plugins.org/ with a HTTP header such that files get
>> downloaded rather than displayed? It would make non-techie users' lives
>> that little bit easier if we can link to files there I think. I know
>> there's going to be http://wordpress.org/extend/plugins/, but for
>> plugins with only one file it's not particularly useful to have it
>> zipped up (just makes more work for the user). What think ye all?
>
>
> Sure:
>
> http://downloads.wordpress.org/plugin/

Yeah, but they're zip files -- I'd like to be able to have each
individual file as a downloadable.

For my purposes at least (don't know about other people), a zip is less
than ideal because:

a) There is only one file _REALLY_ needed (the plugin php file)
b) It's not very big -- unzipping just gets in the way
c) I haven't committed it yet, but I'm working with someone else to add
localisation to Post Teaser. Into the repository will go a .pot file,
and a .po and .mo for each translation (in a new directory structure).
The .pots and .pos aren't remotely useful to anyone not participating in
translation, and I don't suppose the .mo of a language the user doesn't
speak will be useful to them either. In other words, I'd like to provide
.mos as a separate download, for those that want/need a translated version.

Finally, the last I heard, the zip was take straight from the trunk. Is
this correct?

Cheers
Jon

-- 
Jonathan Leighton aka. Turnip
http://turnipspatch.com/ | http://digital-proof.org/

From m at mullenweg.com  Tue Jul 26 21:33:53 2005
From: m at mullenweg.com (Matt Mullenweg)
Date: Tue Jul 26 21:33:58 2005
Subject: [wp-hackers] Plugin download repository
In-Reply-To: <42E6B9AB.3030503@turnipspatch.com>
References: <42E6B494.2060002@turnipspatch.com>	<42E6A6E8.1010907@mullenweg.com>
	<42E6B9AB.3030503@turnipspatch.com>
Message-ID: <42E6AC41.4040901@mullenweg.com>

Jonathan Leighton wrote:
> a) There is only one file _REALLY_ needed (the plugin php file)
> b) It's not very big -- unzipping just gets in the way

But it's still much more reliable.

> c) I haven't committed it yet, but I'm working with someone else to add
> localisation to Post Teaser. Into the repository will go a .pot file,
> and a .po and .mo for each translation (in a new directory structure).
> The .pots and .pos aren't remotely useful to anyone not participating in
> translation, and I don't suppose the .mo of a language the user doesn't
> speak will be useful to them either. In other words, I'd like to provide
> .mos as a separate download, for those that want/need a translated version.

We have a separate repository for translations.

> Finally, the last I heard, the zip was take straight from the trunk. Is
> this correct?

Correct.

-- 
Matt Mullenweg
http://photomatt.net  | http://wordpress.org
http://pingomatic.com | http://cnet.com
From turnip at turnipspatch.com  Tue Jul 26 22:38:27 2005
From: turnip at turnipspatch.com (Jonathan Leighton)
Date: Tue Jul 26 21:38:39 2005
Subject: [wp-hackers] Plugin download repository
In-Reply-To: <42E6AC41.4040901@mullenweg.com>
References: <42E6B494.2060002@turnipspatch.com>	<42E6A6E8.1010907@mullenweg.com>	<42E6B9AB.3030503@turnipspatch.com>
	<42E6AC41.4040901@mullenweg.com>
Message-ID: <42E6BB63.3050602@turnipspatch.com>

Matt Mullenweg wrote:

> Jonathan Leighton wrote:
>
>> a) There is only one file _REALLY_ needed (the plugin php file)
>> b) It's not very big -- unzipping just gets in the way
>
> But it's still much more reliable.

What do you mean? In what way is it more "reliable"?

>> c) I haven't committed it yet, but I'm working with someone else to add
>> localisation to Post Teaser. Into the repository will go a .pot file,
>> and a .po and .mo for each translation (in a new directory structure).
>> The .pots and .pos aren't remotely useful to anyone not participating in
>> translation, and I don't suppose the .mo of a language the user doesn't
>> speak will be useful to them either. In other words, I'd like to provide
>> .mos as a separate download, for those that want/need a translated
>> version.
>
> We have a separate repository for translations.

Oh, I'm sorry then, I didn't realise that. Where is it and how can I
gain access?

>> Finally, the last I heard, the zip was take straight from the trunk. Is
>> this correct?
>
> Correct.

Well that's one thing which will need to be resolved before I even think
about getting people to download the zip from there.

Jon

-- 
Jonathan Leighton aka. Turnip
http://turnipspatch.com/ | http://digital-proof.org/

From m at mullenweg.com  Tue Jul 26 21:42:11 2005
From: m at mullenweg.com (Matt Mullenweg)
Date: Tue Jul 26 21:42:29 2005
Subject: [wp-hackers] Plugin download repository
In-Reply-To: <42E6BB63.3050602@turnipspatch.com>
References: <42E6B494.2060002@turnipspatch.com>	<42E6A6E8.1010907@mullenweg.com>	<42E6B9AB.3030503@turnipspatch.com>	<42E6AC41.4040901@mullenweg.com>
	<42E6BB63.3050602@turnipspatch.com>
Message-ID: <42E6AE33.2030005@mullenweg.com>

Jonathan Leighton wrote:
> What do you mean? In what way is it more "reliable"?

When I've done direct downloads of files before I ran into all sorts of 
browser problems, it was a pain.

> Well that's one thing which will need to be resolved before I even think
> about getting people to download the zip from there.

Are you volunteering to fix it?

-- 
Matt Mullenweg
http://photomatt.net  | http://wordpress.org
http://pingomatic.com | http://cnet.com
From turnip at turnipspatch.com  Tue Jul 26 22:44:48 2005
From: turnip at turnipspatch.com (Jonathan Leighton)
Date: Tue Jul 26 21:45:43 2005
Subject: [wp-hackers] Plugin download repository
In-Reply-To: <42E6AE33.2030005@mullenweg.com>
References: <42E6B494.2060002@turnipspatch.com>	<42E6A6E8.1010907@mullenweg.com>	<42E6B9AB.3030503@turnipspatch.com>	<42E6AC41.4040901@mullenweg.com>	<42E6BB63.3050602@turnipspatch.com>
	<42E6AE33.2030005@mullenweg.com>
Message-ID: <42E6BCE0.3090708@turnipspatch.com>

Matt Mullenweg wrote:

> Jonathan Leighton wrote:
>
>> What do you mean? In what way is it more "reliable"?
>
> When I've done direct downloads of files before I ran into all sorts
> of browser problems, it was a pain.

Oh right. Okay, I've not experienced that before (or at least I don't
think so), but I'll take your word for it.

>> Well that's one thing which will need to be resolved before I even think
>> about getting people to download the zip from there.
>
> Are you volunteering to fix it?

Are you asking me to? ; )

No, I wasn't, but if it's up for the fixing then I'm willing. What's
involved?

Jon

-- 
Jonathan Leighton aka. Turnip
http://turnipspatch.com/ | http://digital-proof.org/

From jalenack at gmail.com  Tue Jul 26 22:16:42 2005
From: jalenack at gmail.com (Jalenack)
Date: Tue Jul 26 22:16:46 2005
Subject: [wp-hackers] Plugin download repository
In-Reply-To: <42E6BCE0.3090708@turnipspatch.com>
References: <42E6B494.2060002@turnipspatch.com>
	<42E6A6E8.1010907@mullenweg.com> <42E6B9AB.3030503@turnipspatch.com>
	<42E6AC41.4040901@mullenweg.com> <42E6BB63.3050602@turnipspatch.com>
	<42E6AE33.2030005@mullenweg.com> <42E6BCE0.3090708@turnipspatch.com>
Message-ID: <ed51b67c050726151610f17aba@mail.gmail.com>

I'd advise against direct downloads of the plugin file, because some plugins 
are in their own folders and have more than one file, like Bad Behavior.

Also, I kind of like Owen's interface @ 
http://www.redalt.com/External/plugins.php
It lets you choose from tags or from the trunk, and then download a .zip

On 7/26/05, Jonathan Leighton <turnip@turnipspatch.com> wrote:
> 
> Matt Mullenweg wrote:
> 
> > Jonathan Leighton wrote:
> >
> >> What do you mean? In what way is it more "reliable"?
> >
> > When I've done direct downloads of files before I ran into all sorts
> > of browser problems, it was a pain.
> 
> Oh right. Okay, I've not experienced that before (or at least I don't
> think so), but I'll take your word for it.
> 
> >> Well that's one thing which will need to be resolved before I even 
> think
> >> about getting people to download the zip from there.
> >
> > Are you volunteering to fix it?
> 
> Are you asking me to? ; )
> 
> No, I wasn't, but if it's up for the fixing then I'm willing. What's
> involved?
> 
> Jon
> 
> --
> Jonathan Leighton aka. Turnip
> http://turnipspatch.com/ | http://digital-proof.org/
> 
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
> 



-- 
Andrew Sutherland
Jalenack.com <http://Jalenack.com>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://comox.textdrive.com/pipermail/wp-hackers/attachments/20050726/f7b8abd5/attachment.html
From mark.wordpress at txfx.net  Wed Jul 27 00:17:12 2005
From: mark.wordpress at txfx.net (Mark Jaquith)
Date: Wed Jul 27 00:15:14 2005
Subject: [wp-hackers] Plugin download repository
In-Reply-To: <ed51b67c050726151610f17aba@mail.gmail.com>
References: <42E6B494.2060002@turnipspatch.com>	<42E6A6E8.1010907@mullenweg.com>
	<42E6B9AB.3030503@turnipspatch.com>	<42E6AC41.4040901@mullenweg.com>
	<42E6BB63.3050602@turnipspatch.com>	<42E6AE33.2030005@mullenweg.com>
	<42E6BCE0.3090708@turnipspatch.com>
	<ed51b67c050726151610f17aba@mail.gmail.com>
Message-ID: <42E6D288.6010400@txfx.net>

Jalenack wrote:

> Also, I kind of like Owen's interface @ 
> http://www.redalt.com/External/plugins.php
> It lets you choose from tags or from the trunk, and then download a .zip

Wow, that's fantastic!  I'm guessing that he's doing  the zipping of the 
tags/branches himself.  I've been doing that manually (pain in the 
butt).  It would really be nice for download.wp-plugins.org to have 
this.  There could even be a "stable" branch that is downloaded by 
default, if it exists, instead of /trunk/.  I don't really want people 
downloading from /trunk/ unless they REALLY know what they're doing.

-- 
Mark Jaquith
http://txfx.net/
MCincubus @ #wordpress

From fd at firasd.org  Wed Jul 27 00:23:19 2005
From: fd at firasd.org (Firas D.)
Date: Wed Jul 27 00:23:30 2005
Subject: [wp-hackers] Plugin download repository
In-Reply-To: <42E6D288.6010400@txfx.net>
References: <42E6B494.2060002@turnipspatch.com>	<42E6A6E8.1010907@mullenweg.com>	<42E6B9AB.3030503@turnipspatch.com>	<42E6AC41.4040901@mullenweg.com>	<42E6BB63.3050602@turnipspatch.com>	<42E6AE33.2030005@mullenweg.com>	<42E6BCE0.3090708@turnipspatch.com>	<ed51b67c050726151610f17aba@mail.gmail.com>
	<42E6D288.6010400@txfx.net>
Message-ID: <42E6D3F7.9090806@firasd.org>

Mark Jaquith wrote:

> Wow, that's fantastic!  I'm guessing that he's doing  the zipping of 
> the tags/branches himself.  I've been doing that manually (pain in the 
> butt).  It would really be nice for download.wp-plugins.org to have 
> this.  There could even be a "stable" branch that is downloaded by 
> default, if it exists, instead of /trunk/.  I don't really want people 
> downloading from /trunk/ unless they REALLY know what they're doing.
>
I'd say the trunk should be bypassed altogether. Want a trunk version? 
You must be somewhat technically adept then--use an svn client.

-- 
http://firasd.org

From m at mullenweg.com  Wed Jul 27 00:32:26 2005
From: m at mullenweg.com (Matt Mullenweg)
Date: Wed Jul 27 00:32:35 2005
Subject: [wp-hackers] Plugin download repository
In-Reply-To: <42E6D3F7.9090806@firasd.org>
References: <42E6B494.2060002@turnipspatch.com>	<42E6A6E8.1010907@mullenweg.com>	<42E6B9AB.3030503@turnipspatch.com>	<42E6AC41.4040901@mullenweg.com>	<42E6BB63.3050602@turnipspatch.com>	<42E6AE33.2030005@mullenweg.com>	<42E6BCE0.3090708@turnipspatch.com>	<ed51b67c050726151610f17aba@mail.gmail.com>	<42E6D288.6010400@txfx.net>
	<42E6D3F7.9090806@firasd.org>
Message-ID: <42E6D61A.5030101@mullenweg.com>

Firas D. wrote:
> I'd say the trunk should be bypassed altogether. Want a trunk version? 
> You must be somewhat technically adept then--use an svn client.

Most plugins aren't complicated enough to require 
stable/unstable/snapshot development cycles. The latest and greatest 
code is in the trunk, development occurs elsewhere. (Perhaps a branch.)

Unless everybody tags consistently (and they haven't thus far) it's hard 
to tell which is the "best" tag to choose. Users shouldn't have to 
decide which version they want, it should be automatic.

-- 
Matt Mullenweg
http://photomatt.net  | http://wordpress.org
http://pingomatic.com | http://cnet.com
From mark.wordpress at txfx.net  Wed Jul 27 00:50:22 2005
From: mark.wordpress at txfx.net (Mark Jaquith)
Date: Wed Jul 27 00:48:37 2005
Subject: [wp-hackers] Plugin download repository
In-Reply-To: <42E6D61A.5030101@mullenweg.com>
References: <42E6B494.2060002@turnipspatch.com>	<42E6A6E8.1010907@mullenweg.com>	<42E6B9AB.3030503@turnipspatch.com>	<42E6AC41.4040901@mullenweg.com>	<42E6BB63.3050602@turnipspatch.com>	<42E6AE33.2030005@mullenweg.com>	<42E6BCE0.3090708@turnipspatch.com>	<ed51b67c050726151610f17aba@mail.gmail.com>	<42E6D288.6010400@txfx.net>	<42E6D3F7.9090806@firasd.org>
	<42E6D61A.5030101@mullenweg.com>
Message-ID: <42E6DA4E.7030209@txfx.net>

Matt Mullenweg wrote:

> Most plugins aren't complicated enough to require 
> stable/unstable/snapshot development cycles. The latest and greatest 
> code is in the trunk, development occurs elsewhere. (Perhaps a branch.)
>
> Unless everybody tags consistently (and they haven't thus far) it's 
> hard to tell which is the "best" tag to choose. Users shouldn't have 
> to decide which version they want, it should be automatic.

Hm... I've always thought of /trunk/ as where development happens.  
Never considered using /trunk/ for my "stable" branch... and using a 
branch for development .  It's a good idea... and it solves the zip 
download problem rather conveniently (also: without more coding for you, 
Matt :-D )  I'll have to give that a shot.  This should be written up as 
standard practice on: http://dev.wp-plugins.org/wiki/RepositorySetup

It currently says:

> Trunk
>
> This is where your main (current) development takes place. The 'trunk' 
> directory is the root directory for your code. You will (usually) be 
> copying your 'trunk' directory to create tags and branches.

... which is how I've been doing it.

-- 
Mark Jaquith
http://txfx.net/
MCincubus @ #wordpress

From michael at wakeless.net  Wed Jul 27 02:26:12 2005
From: michael at wakeless.net (Michael Gall)
Date: Wed Jul 27 02:23:41 2005
Subject: [wp-hackers] Plugin download repository
In-Reply-To: <42E6B9AB.3030503@turnipspatch.com>
References: <42E6B494.2060002@turnipspatch.com>	<42E6A6E8.1010907@mullenweg.com>
	<42E6B9AB.3030503@turnipspatch.com>
Message-ID: <42E6F0C4.8040202@wakeless.net>

Would it be possible to install plugins while they are still zipped? 
Possibly the plugin view screen could look into the zipfile and pull out 
the README for information, and then when you hit activate it unzips it? 
Does that sound crazy?

Michael

From bfults at gmail.com  Wed Jul 27 03:35:19 2005
From: bfults at gmail.com (Brad Fults)
Date: Wed Jul 27 03:35:27 2005
Subject: [wp-hackers] Plugin download repository
In-Reply-To: <42E6F0C4.8040202@wakeless.net>
References: <42E6B494.2060002@turnipspatch.com>
	<42E6A6E8.1010907@mullenweg.com> <42E6B9AB.3030503@turnipspatch.com>
	<42E6F0C4.8040202@wakeless.net>
Message-ID: <1959130b05072620354ecdda82@mail.gmail.com>

I'd love to see an interface that would allow uploading of the zip
file into the plugin interface (from the user's hard drive), then
displaying the README and allowing "Activate" to
unzip/install/activate the plugin.

I think this would lower the technical ability needed to use plugins
(maybe the same for themes?).

-- 
Brad Fults
NeatBox

On 7/26/05, Michael Gall <michael@wakeless.net> wrote:
> Would it be possible to install plugins while they are still zipped?
> Possibly the plugin view screen could look into the zipfile and pull out
> the README for information, and then when you hit activate it unzips it?
> Does that sound crazy?
> 
> Michael
> 
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
From mark.wordpress at txfx.net  Wed Jul 27 03:51:14 2005
From: mark.wordpress at txfx.net (Mark Jaquith)
Date: Wed Jul 27 03:49:20 2005
Subject: [wp-hackers] Plugin download repository
In-Reply-To: <1959130b05072620354ecdda82@mail.gmail.com>
References: <42E6B494.2060002@turnipspatch.com>	<42E6A6E8.1010907@mullenweg.com>
	<42E6B9AB.3030503@turnipspatch.com>	<42E6F0C4.8040202@wakeless.net>
	<1959130b05072620354ecdda82@mail.gmail.com>
Message-ID: <42E704B2.7000206@txfx.net>

Brad Fults wrote:

>I'd love to see an interface that would allow uploading of the zip
>file into the plugin interface (from the user's hard drive), then
>displaying the README and allowing "Activate" to
>unzip/install/activate the plugin.
>
>I think this would lower the technical ability needed to use plugins
>(maybe the same for themes?).
>
>  
>
I believe that some sort of one-click install is planned for 1.6 (or a 
future version).  Would definitely be cool.

-- 
Mark Jaquith
http://txfx.net/
MCincubus @ #wordpress

From m at mullenweg.com  Wed Jul 27 04:55:46 2005
From: m at mullenweg.com (Matthew Mullenweg)
Date: Wed Jul 27 04:58:01 2005
Subject: [wp-hackers] Plugin download repository
In-Reply-To: <42E6F0C4.8040202@wakeless.net>
References: <42E6B494.2060002@turnipspatch.com>	<42E6A6E8.1010907@mullenweg.com>	<42E6B9AB.3030503@turnipspatch.com>
	<42E6F0C4.8040202@wakeless.net>
Message-ID: <42E713D2.6000000@mullenweg.com>

Michael Gall wrote:
> Would it be possible to install plugins while they are still zipped? 
> Possibly the plugin view screen could look into the zipfile and pull out 
> the README for information, and then when you hit activate it unzips it? 
> Does that sound crazy?

That would be awesome, I'd happily make something that did that robustly 
a core feature.

-- 
Matt Mullenweg
  http://photomatt.net | http://wordpress.org
http://pingomatic.com | http://cnet.com
From false.hopes at gmail.com  Wed Jul 27 11:15:36 2005
From: false.hopes at gmail.com (Robert Deaton)
Date: Wed Jul 27 11:15:45 2005
Subject: [wp-hackers] Dashboard Replacement Plugin: WP-Dash
Message-ID: <a491f91d05072704155f36fa16@mail.gmail.com>

I just released WP-Dash, my dashboard replacement plugin. Now, I'm not
just trying to shamelessly advertise my own plugin, you guys have a
role to. It has a full API, so hopefully I can get some of you all to
write some useful widgets.

Information on the plugin can be found at
http://somethingunpredictable.com/wp-dash/
The API docs can be found at
http://www.somethingunpredictable.com/dash-wiki/index.php/API

Comments, suggestions, and hatemail are all welcome
-- 
--Robert Deaton
http://somethingunpredictable.com
From m at mullenweg.com  Wed Jul 27 15:31:49 2005
From: m at mullenweg.com (Matthew Mullenweg)
Date: Wed Jul 27 15:33:56 2005
Subject: [wp-hackers] IRC Meetup
Message-ID: <42E7A8E5.9030808@mullenweg.com>

The IRC meetup is today folks, but we're going to bump the start back at 
a few minutes to 2:30 PST, 30 minutes later than normal. See you all 
there in #wordpress-meetup!

-- 
Matt Mullenweg
  http://photomatt.net | http://wordpress.org
http://pingomatic.com | http://cnet.com
From turnip at turnipspatch.com  Wed Jul 27 20:54:15 2005
From: turnip at turnipspatch.com (Jonathan Leighton)
Date: Thu Jul 28 01:26:05 2005
Subject: [wp-hackers] Plugin download repository
In-Reply-To: <42E6BB63.3050602@turnipspatch.com>
References: <42E6B494.2060002@turnipspatch.com>	<42E6A6E8.1010907@mullenweg.com>	<42E6B9AB.3030503@turnipspatch.com>	<42E6AC41.4040901@mullenweg.com>
	<42E6BB63.3050602@turnipspatch.com>
Message-ID: <42E7F477.2020800@turnipspatch.com>

Jonathan Leighton wrote:

>Matt Mullenweg wrote:
>  
>
>>>c) I haven't committed it yet, but I'm working with someone else to add
>>>localisation to Post Teaser. Into the repository will go a .pot file,
>>>and a .po and .mo for each translation (in a new directory structure).
>>>The .pots and .pos aren't remotely useful to anyone not participating in
>>>translation, and I don't suppose the .mo of a language the user doesn't
>>>speak will be useful to them either. In other words, I'd like to provide
>>>.mos as a separate download, for those that want/need a translated
>>>version.
>>>      
>>>
>>We have a separate repository for translations.
>>    
>>
>
>Oh, I'm sorry then, I didn't realise that. Where is it and how can I
>gain access?
>
Matt, you didn't answer this. What's the answer?

Jon

-- 
Jonathan Leighton aka. Turnip
http://turnipspatch.com/ | http://digital-proof.org/

From turnip at turnipspatch.com  Wed Jul 27 21:03:13 2005
From: turnip at turnipspatch.com (Jonathan Leighton)
Date: Thu Jul 28 01:26:16 2005
Subject: [wp-hackers] Plugin download repository
In-Reply-To: <42E6D61A.5030101@mullenweg.com>
References: <42E6B494.2060002@turnipspatch.com>	<42E6A6E8.1010907@mullenweg.com>	<42E6B9AB.3030503@turnipspatch.com>	<42E6AC41.4040901@mullenweg.com>	<42E6BB63.3050602@turnipspatch.com>	<42E6AE33.2030005@mullenweg.com>	<42E6BCE0.3090708@turnipspatch.com>	<ed51b67c050726151610f17aba@mail.gmail.com>	<42E6D288.6010400@txfx.net>	<42E6D3F7.9090806@firasd.org>
	<42E6D61A.5030101@mullenweg.com>
Message-ID: <42E7F691.1060900@turnipspatch.com>

Matt Mullenweg wrote:

> Unless everybody tags consistently (and they haven't thus far) it's
> hard to tell which is the "best" tag to choose. Users shouldn't have
> to decide which version they want, it should be automatic.

This is the real problem -- knowing which tag is the latest one. Can
anyone think of a solution to this? I think a symbolic link was
suggested last time this came up but I don't know if that's possible in
SVN and would be a problem to Windows people anyway.

The two solutions I see:

a) Telling people that they MUST use a specific format for their tag
names if they want it to work with the zipping service.
b) Having a kind of databasey thing where they can specify either the
format they use, or specify their latest tag.

Personally I think a is easier and better. What does everyone else think?

If we can all agree on a solution I'll implement it.

Jon

-- 
Jonathan Leighton aka. Turnip
http://turnipspatch.com/ | http://digital-proof.org/

From m at mullenweg.com  Thu Jul 28 01:28:15 2005
From: m at mullenweg.com (Matthew Mullenweg)
Date: Thu Jul 28 01:30:27 2005
Subject: [wp-hackers] Plugin download repository
In-Reply-To: <42E7F691.1060900@turnipspatch.com>
References: <42E6B494.2060002@turnipspatch.com>	<42E6A6E8.1010907@mullenweg.com>	<42E6B9AB.3030503@turnipspatch.com>	<42E6AC41.4040901@mullenweg.com>	<42E6BB63.3050602@turnipspatch.com>	<42E6AE33.2030005@mullenweg.com>	<42E6BCE0.3090708@turnipspatch.com>	<ed51b67c050726151610f17aba@mail.gmail.com>	<42E6D288.6010400@txfx.net>	<42E6D3F7.9090806@firasd.org>	<42E6D61A.5030101@mullenweg.com>
	<42E7F691.1060900@turnipspatch.com>
Message-ID: <42E834AF.5040900@mullenweg.com>

Jonathan Leighton wrote:
> If we can all agree on a solution I'll implement it.

In trunk/readme.txt:

Stable tag: (trunk|0.3|tag-name)

-- 
Matt Mullenweg
  http://photomatt.net | http://wordpress.org
http://pingomatic.com | http://cnet.com
From fd at firasd.org  Thu Jul 28 01:30:56 2005
From: fd at firasd.org (Firas D.)
Date: Thu Jul 28 01:31:12 2005
Subject: [wp-hackers] Plugin download repository
In-Reply-To: <42E7F691.1060900@turnipspatch.com>
References: <42E6B494.2060002@turnipspatch.com>	<42E6A6E8.1010907@mullenweg.com>	<42E6B9AB.3030503@turnipspatch.com>	<42E6AC41.4040901@mullenweg.com>	<42E6BB63.3050602@turnipspatch.com>	<42E6AE33.2030005@mullenweg.com>	<42E6BCE0.3090708@turnipspatch.com>	<ed51b67c050726151610f17aba@mail.gmail.com>	<42E6D288.6010400@txfx.net>	<42E6D3F7.9090806@firasd.org>	<42E6D61A.5030101@mullenweg.com>
	<42E7F691.1060900@turnipspatch.com>
Message-ID: <42E83550.6010000@firasd.org>

Jonathan Leighton wrote:

>This is the real problem -- knowing which tag is the latest one. Can
>anyone think of a solution to this? I think a symbolic link was
>suggested last time this came up but I don't know if that's possible in
>SVN and would be a problem to Windows people anyway.
>
I just started writing some code for the directory I'm making that 
figures that out.. here's the pseudocode:

For Each Plugin Folder
    If there is a tags folder
       For each tag, find the version of the plugin in it
          If this tag has a newer version than the previous tag, use 
this one
    Else
       Use trunk

-- 
http://firasd.org

From fd at firasd.org  Thu Jul 28 01:42:00 2005
From: fd at firasd.org (Firas D.)
Date: Thu Jul 28 01:42:50 2005
Subject: [wp-hackers] Plugin download repository
In-Reply-To: <42E834AF.5040900@mullenweg.com>
References: <42E6B494.2060002@turnipspatch.com>	<42E6A6E8.1010907@mullenweg.com>	<42E6B9AB.3030503@turnipspatch.com>	<42E6AC41.4040901@mullenweg.com>	<42E6BB63.3050602@turnipspatch.com>	<42E6AE33.2030005@mullenweg.com>	<42E6BCE0.3090708@turnipspatch.com>	<ed51b67c050726151610f17aba@mail.gmail.com>	<42E6D288.6010400@txfx.net>	<42E6D3F7.9090806@firasd.org>	<42E6D61A.5030101@mullenweg.com>	<42E7F691.1060900@turnipspatch.com>
	<42E834AF.5040900@mullenweg.com>
Message-ID: <42E837E8.3040704@firasd.org>

Matthew Mullenweg wrote:

> Jonathan Leighton wrote:
>
>> If we can all agree on a solution I'll implement it.
>
>
> In trunk/readme.txt:
>
> Stable tag: (trunk|0.3|tag-name)
>
That sounds good. Maybe 'Stable version:' ?

-- 
http://firasd.org

From ringmaster at midnightcircus.com  Thu Jul 28 03:06:20 2005
From: ringmaster at midnightcircus.com (Owen Winkler)
Date: Thu Jul 28 03:38:57 2005
Subject: [wp-hackers] Plugin download repository
In-Reply-To: <42E837E8.3040704@firasd.org>
References: <42E6B494.2060002@turnipspatch.com>	<42E6A6E8.1010907@mullenweg.com>	<42E6B9AB.3030503@turnipspatch.com>	<42E6AC41.4040901@mullenweg.com>	<42E6BB63.3050602@turnipspatch.com>	<42E6AE33.2030005@mullenweg.com>	<42E6BCE0.3090708@turnipspatch.com>	<ed51b67c050726151610f17aba@mail.gmail.com>	<42E6D288.6010400@txfx.net>	<42E6D3F7.9090806@firasd.org>	<42E6D61A.5030101@mullenweg.com>	<42E7F691.1060900@turnipspatch.com>	<42E834AF.5040900@mullenweg.com>
	<42E837E8.3040704@firasd.org>
Message-ID: <42E84BAC.8070609@midnightcircus.com>

Firas D. wrote:
> Matthew Mullenweg wrote:
> 
>> Jonathan Leighton wrote:
>>
>>> If we can all agree on a solution I'll implement it.
>>
>> In trunk/readme.txt:
>>
>> Stable tag: (trunk|0.3|tag-name)
>>
> That sounds good. Maybe 'Stable version:' ?

Why not instead have a SVN branch named "stable"?  Why not pull the 
plugin data from existing and new fields in the plugin header instead of 
the readme file?  Why not point to a web/wiki/WP-static page in the 
plugin header for a plugin's documentation?

I thought the idea of the official repository was to release plugin 
developers from the burden of jumping through the hoops of each separate 
deployment site.  This just seems like added hoops.

Reasons that a wiki page is better than a readme.txt file:
- Documentation is as fresh as it can be, not dependent on when a user 
downloaded it.
- Wiki documentation will alert a user to when a version upgrade is 
recommended, which a readme can't do.
- Documentation on a wiki is written once and not converted into an 
alternate format for deployment.
- The documentation won't be overwritten by a file of the same name 
stored in the same directory - a very likely event in the case of a 
readme.txt.
- Documentation can be more easily accessed and searched before 
downloading.  (ie.- 
http://search.yahoo.com/search?p=site%3Adev.wp-plugins.org+inurl%3Awiki+geo
vs. 
http://search.yahoo.com/search?p=site%3Adev.wp-plugins.org+file%3Areadme.txt+geo)
- Nobody reads a file named "readme.txt" anyway, even if it contains the 
secret to great riches and happiness.

Reasons that the metadata about a plugin should be in the plugin header:
- The WP interface can provide a documentation link, not just a home page.
- The plugin header is a flexible "standard" that already exists, rather 
than a new proprietary format.
- The authorship and keyword metadata is attached unquestionably to the 
plugin even if the readme is unavailable.
- The metadata could be useful to the admin interface or other plugins.
- It seems that a plugin author may be more likely to fill in details 
that are part of the code than create a whole separate file, thus 
leading to more available plugins.

Just my simple thoughts on this topic.  Nothing groundbreaking here. 
Move along.

Owen

From fd at firasd.org  Thu Jul 28 04:41:22 2005
From: fd at firasd.org (Firas D.)
Date: Thu Jul 28 04:41:37 2005
Subject: [wp-hackers] Plugin download repository
In-Reply-To: <42E84BAC.8070609@midnightcircus.com>
References: <42E6B494.2060002@turnipspatch.com>	<42E6A6E8.1010907@mullenweg.com>	<42E6B9AB.3030503@turnipspatch.com>	<42E6AC41.4040901@mullenweg.com>	<42E6BB63.3050602@turnipspatch.com>	<42E6AE33.2030005@mullenweg.com>	<42E6BCE0.3090708@turnipspatch.com>	<ed51b67c050726151610f17aba@mail.gmail.com>	<42E6D288.6010400@txfx.net>	<42E6D3F7.9090806@firasd.org>	<42E6D61A.5030101@mullenweg.com>	<42E7F691.1060900@turnipspatch.com>	<42E834AF.5040900@mullenweg.com>	<42E837E8.3040704@firasd.org>
	<42E84BAC.8070609@midnightcircus.com>
Message-ID: <42E861F2.9020401@firasd.org>

Owen Winkler wrote:

> I thought the idea of the official repository was to release plugin 
> developers from the burden of jumping through the hoops of each 
> separate deployment site.  This just seems like added hoops.

I don't know about Matt's plans with wordpress.org, but for my project I 
don't care where the readme is located per se, just that there is one. 
If people really want 500 sites spidered I can live with that, as long 
as there's a microformat or something they use that mirrors the info I'd 
get out of the readme, ie div class="readme-starts" div 
class="shortdesciption", div class="contributors", etc.

-- 
http://firasd.org

From m at mullenweg.com  Thu Jul 28 06:14:58 2005
From: m at mullenweg.com (Matthew Mullenweg)
Date: Thu Jul 28 06:17:16 2005
Subject: [wp-hackers] Plugin download repository
In-Reply-To: <42E837E8.3040704@firasd.org>
References: <42E6B494.2060002@turnipspatch.com>	<42E6A6E8.1010907@mullenweg.com>	<42E6B9AB.3030503@turnipspatch.com>	<42E6AC41.4040901@mullenweg.com>	<42E6BB63.3050602@turnipspatch.com>	<42E6AE33.2030005@mullenweg.com>	<42E6BCE0.3090708@turnipspatch.com>	<ed51b67c050726151610f17aba@mail.gmail.com>	<42E6D288.6010400@txfx.net>	<42E6D3F7.9090806@firasd.org>	<42E6D61A.5030101@mullenweg.com>	<42E7F691.1060900@turnipspatch.com>	<42E834AF.5040900@mullenweg.com>
	<42E837E8.3040704@firasd.org>
Message-ID: <42E877E2.7090503@mullenweg.com>

Firas D. wrote:
> That sounds good. Maybe 'Stable version:' ?

I like that better, since we use "tag" with different semantics elsewhere.

-- 
Matt Mullenweg
  http://photomatt.net | http://wordpress.org
http://pingomatic.com | http://cnet.com
From wp at igeek.info  Thu Jul 28 10:16:38 2005
From: wp at igeek.info (Amit Gupta)
Date: Thu Jul 28 10:16:59 2005
Subject: [wp-hackers] Forbes.com award
References: <20050726120037.E7235B926@comox.textdrive.com>
	<13af0b63050726062474ca2163@mail.gmail.com>
Message-ID: <002901c5935d$7550fa50$57ebd4cb@unicorn>

Jonathan Dingman <jdingman@gmail.com> wrote:
| figure if the worst thing someone can find about Wordpress is poor 
image management,
| we have some AWESOME software on our hands here!  We didn't have image 
management
| in mind at first anyway, but we're still moving in that direction and 
people are coming out with
| plugins for it.  Again, with matt, congarats everyone!!

yeah, WordPress afterall is not an image-management software, its a Blog 
Tool!!!! & if that's the worst thing(image-management) in WordPress, 
then yes, we have something awesome on our hands!!!! Yay!!! Congrats 
everyone!!!!! :)

------------
Amit Gupta
http://igeek.info/  ||  http://blog.igeek.info/
http://blog.igeek.info/wp-plugins/igsyntax-hiliter

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://comox.textdrive.com/pipermail/wp-hackers/attachments/20050728/1fdbf9d0/attachment-0001.html
From chris.lott at gmail.com  Thu Jul 28 16:32:44 2005
From: chris.lott at gmail.com (Chris Lott)
Date: Thu Jul 28 16:32:52 2005
Subject: [wp-hackers] Multiple Enclosures, detecting enclosures
Message-ID: <9b1b9dab050728093239b9d8f9@mail.gmail.com>

Is the way that Wordpress creates multiple enclosures in its RSS feed
(for example, multiple mp3 files using multiple custom fields with the
"enclosure" key) non-standard or is Apple iTunes broken? I see the
multiple enclosures in the feed when I examine it, but iTunes sees
only the first one.

I also find the "automatic enclosure" detection based on the headers
to be unreliable at best. I'm sure there are technical reasons that
this is a better way than just (or also) using the file extension for
known media types? Could that be an option? That would also enable WP
users to podcast using ourmedia.org storage, which apparently doesn't
send the proper headers... as most sites don't seem to!

c
-- 
Chris Lott
From false.hopes at gmail.com  Thu Jul 28 18:29:11 2005
From: false.hopes at gmail.com (Robert Deaton)
Date: Thu Jul 28 18:29:34 2005
Subject: [wp-hackers] Multiple Enclosures, detecting enclosures
In-Reply-To: <9b1b9dab050728093239b9d8f9@mail.gmail.com>
References: <9b1b9dab050728093239b9d8f9@mail.gmail.com>
Message-ID: <a491f91d05072811294359e33c@mail.gmail.com>

iTunes is by far, the best and the worst thing to happen to
podcasting. Its the best in the sense that its raising public
awareness of podcasting, but the worst in the way that it handles
podcasts. So, to be frank, iTunes is broken.

As for detecting based on headers, I would stand by this as being the
best way because servers are supposed to send the right headers, and
its hard to account for all possible media types and all the different
ways servers may be broken. Honestly, if your server isn't sending the
right headers for simple media types like mp3, you're damn lucky its
up and running at all.

On 7/28/05, Chris Lott <chris.lott@gmail.com> wrote:
> Is the way that Wordpress creates multiple enclosures in its RSS feed
> (for example, multiple mp3 files using multiple custom fields with the
> "enclosure" key) non-standard or is Apple iTunes broken? I see the
> multiple enclosures in the feed when I examine it, but iTunes sees
> only the first one.
> 
> I also find the "automatic enclosure" detection based on the headers
> to be unreliable at best. I'm sure there are technical reasons that
> this is a better way than just (or also) using the file extension for
> known media types? Could that be an option? That would also enable WP
> users to podcast using ourmedia.org storage, which apparently doesn't
> send the proper headers... as most sites don't seem to!
> 
> c
> --
> Chris Lott
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
> 


-- 
--Robert Deaton
http://somethingunpredictable.com
From chris.lott at gmail.com  Fri Jul 29 00:49:10 2005
From: chris.lott at gmail.com (Chris Lott)
Date: Fri Jul 29 00:49:14 2005
Subject: [wp-hackers] Multiple Enclosures, detecting enclosures
In-Reply-To: <a491f91d05072811294359e33c@mail.gmail.com>
References: <9b1b9dab050728093239b9d8f9@mail.gmail.com>
	<a491f91d05072811294359e33c@mail.gmail.com>
Message-ID: <9b1b9dab0507281749565803db@mail.gmail.com>

On 7/28/05, Robert Deaton <false.hopes@gmail.com> wrote:
> iTunes is by far, the best and the worst thing to happen to
> podcasting. Its the best in the sense that its raising public
> awareness of podcasting, but the worst in the way that it handles
> podcasts. So, to be frank, iTunes is broken.

That's what I suspected. Do you have any references to which part of
the specification iTunes is ignoring? I've seen a hack to make
multiple enclosures work with iTunes, so it must not be grokking some
part correctly.

And is it the only podcast aggregator that fails on them?
 
> As for detecting based on headers, I would stand by this as being the
> best way because servers are supposed to send the right headers, and
> its hard to account for all possible media types and all the different
> ways servers may be broken. Honestly, if your server isn't sending the
> right headers for simple media types like mp3, you're damn lucky its
> up and running at all.

*MY* servers do-- the problem is that so many don't. And when the best
free resource (important in educational circles) is ourmedia.org-- and
THEY can't (or won't) figure it out-- it seems like a bigger problem.
I also didn't ask to accommodate all possible media types, just the
most common ones that are causing the most problems.

It would just be nice, I guess, if there were an option to help deal
with things that are so commonly broken. Standing on principles is
great, but results and working products are often useful too.

c
From mark.wordpress at txfx.net  Fri Jul 29 01:03:55 2005
From: mark.wordpress at txfx.net (Mark Jaquith)
Date: Fri Jul 29 01:01:50 2005
Subject: [wp-hackers] Multiple Enclosures, detecting enclosures
In-Reply-To: <9b1b9dab0507281749565803db@mail.gmail.com>
References: <9b1b9dab050728093239b9d8f9@mail.gmail.com>	<a491f91d05072811294359e33c@mail.gmail.com>
	<9b1b9dab0507281749565803db@mail.gmail.com>
Message-ID: <42E9807B.1030704@txfx.net>

evah IChris Lott wrote:

>>As for detecting based on headers, I would stand by this as being the
>>best way because servers are supposed to send the right headers, and
>>its hard to account for all possible media types and all the different
>>ways servers may be broken. Honestly, if your server isn't sending the
>>right headers for simple media types like mp3, you're damn lucky its
>>up and running at all.
>>    
>>
>
>*MY* servers do-- the problem is that so many don't. And when the best
>free resource (important in educational circles) is ourmedia.org-- and
>THEY can't (or won't) figure it out-- it seems like a bigger problem.
>I also didn't ask to accommodate all possible media types, just the
>most common ones that are causing the most problems.
>
>It would just be nice, I guess, if there were an option to help deal
>with things that are so commonly broken. Standing on principles is
>great, but results and working products are often useful too.
>
Yeah, I agree.  The major use for enclosures is podcasting.  The vast 
majority of podcasting is with mp3 files.  I think we can stand to 
compromise our principles here just a little bit, to ensure that .mp3 
media types are validly detected on poorly configured servers.  We can 
even put a comment in the code:  /* but next time do it RIGHT! */

-- 
Mark Jaquith
http://txfx.net/
MCincubus @ #wordpress

From m at mullenweg.com  Fri Jul 29 02:04:07 2005
From: m at mullenweg.com (Matthew Mullenweg)
Date: Fri Jul 29 02:06:14 2005
Subject: [wp-hackers] Multiple Enclosures, detecting enclosures
In-Reply-To: <9b1b9dab0507281749565803db@mail.gmail.com>
References: <9b1b9dab050728093239b9d8f9@mail.gmail.com>	<a491f91d05072811294359e33c@mail.gmail.com>
	<9b1b9dab0507281749565803db@mail.gmail.com>
Message-ID: <42E98E97.5040203@mullenweg.com>

Chris Lott wrote:
> *MY* servers do-- the problem is that so many don't. And when the best
> free resource (important in educational circles) is ourmedia.org-- and
> THEY can't (or won't) figure it out-- it seems like a bigger problem.
> I also didn't ask to accommodate all possible media types, just the
> most common ones that are causing the most problems.

I think the problem with ourmedia/archive.org is that they serve up 
redirects usually, and we don't follow redirects. Anyone want to fix our 
code to follow up to 2 redirects (but no more as to not get stuck in a 
loop)?

-- 
Matt Mullenweg
  http://photomatt.net | http://wordpress.org
http://pingomatic.com | http://cnet.com
From lstelie at gmail.com  Fri Jul 29 06:06:40 2005
From: lstelie at gmail.com (Luc Saint-Elie)
Date: Fri Jul 29 06:06:51 2005
Subject: [wp-hackers] Multiple Enclosures, detecting enclosures
In-Reply-To: <9b1b9dab050728093239b9d8f9@mail.gmail.com>
References: <9b1b9dab050728093239b9d8f9@mail.gmail.com>
Message-ID: <6eb1cb4105072823063bcfa73b@mail.gmail.com>

2005/7/28, Chris Lott <chris.lott@gmail.com>:
> Is the way that Wordpress creates multiple enclosures in its RSS feed
> (for example, multiple mp3 files using multiple custom fields with the
> "enclosure" key) non-standard or is Apple iTunes broken? I see the
> multiple enclosures in the feed when I examine it, but iTunes sees
> only the first one.

iTunes is not the most standard thing on earth but is not guilty on this point.

The specs says clearly that enclosure is an item level element, so one
enclosure by message (in the same way there is one title, one text,
one date  for a post... a multi-enclosures stuff makes as muche sense
than a multi-title or a multi-text thing.

http://blogs.law.harvard.edu/tech/rss
http://blogs.law.harvard.edu/tech/rss#hrelementsOfLtitemgt

See a Dave Vinner rant about this point :
http://www.reallysimplesyndication.com/discuss/msgReader$221?mode=topic

Luc

http://audioblog.fr
From lorelle at cameraontheroad.com  Sat Jul 30 14:18:08 2005
From: lorelle at cameraontheroad.com (Lorelle VanFossen)
Date: Sat Jul 30 14:19:19 2005
Subject: [wp-hackers] Question about the_author_email template tag
Message-ID: <42EB8C20.4010600@cameraontheroad.com>

I guess there has been some debate posted in the Discussion Page of 
http://codex.wordpress.org/Template_Tags/the_author_email about whether 
or not the_author_email and related email tags actually do "hide" the 
email address from harvesters or not. Can someone address this concern 
on that page and on the discussion page so we know for sure how this tag 
works.

Thanks,

Lorelle

From chris at coggburn.us  Sat Jul 30 18:09:39 2005
From: chris at coggburn.us (Chris Coggburn)
Date: Sat Jul 30 18:09:51 2005
Subject: [wp-hackers] Question about the_author_email template tag
In-Reply-To: <42EB8C20.4010600@cameraontheroad.com>
References: <42EB8C20.4010600@cameraontheroad.com>
Message-ID: <42EBC263.7050205@coggburn.us>

Have you tried viewing the source and not just the rendered page? Using 
HTML character encoding it should partially protect the email address 
when using antispambot(get_the_author_email()); There will not be any 
noticeable obfuscation on the rendered page.

Lorelle VanFossen wrote:

> I guess there has been some debate posted in the Discussion Page of 
> http://codex.wordpress.org/Template_Tags/the_author_email about 
> whether or not the_author_email and related email tags actually do 
> "hide" the email address from harvesters or not. Can someone address 
> this concern on that page and on the discussion page so we know for 
> sure how this tag works.
>
> Thanks,
>
> Lorelle
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 3615 bytes
Desc: S/MIME Cryptographic Signature
Url : http://comox.textdrive.com/pipermail/wp-hackers/attachments/20050730/c182ffb1/smime.bin
From kaf at szub.net  Sat Jul 30 21:04:15 2005
From: kaf at szub.net (Kaf Oseo)
Date: Sat Jul 30 21:04:17 2005
Subject: [wp-hackers] Question about the_author_email template tag
In-Reply-To: <42EB8C20.4010600@cameraontheroad.com>
References: <42EB8C20.4010600@cameraontheroad.com>
Message-ID: <42EBEB4F.4090709@szub.net>

There's little to debate on it (unfortunately). It used to be encoded
or obfuscated by passing it through the antispambot() function, but
that was changed in 1.5 when it was decided to make the various parts
of a post 'pluggable'.

The issue was already noted in on the Codex page, but appears to have
been reverted to an earlier version at some point. I'll readdress it.

-Kaf

Lorelle VanFossen wrote:
> I guess there has been some debate posted in the Discussion Page of 
> http://codex.wordpress.org/Template_Tags/the_author_email about whether 
> or not the_author_email and related email tags actually do "hide" the 
> email address from harvesters or not. Can someone address this concern 
> on that page and on the discussion page so we know for sure how this tag 
> works.
> 
> Thanks,
> 
> Lorelle
> 
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
> 
> 
From che.sosa at gmail.com  Sun Jul 31 05:37:07 2005
From: che.sosa at gmail.com (Che Sosa)
Date: Sun Jul 31 05:37:15 2005
Subject: [wp-hackers] bug: add new category
Message-ID: <67835a2905073022372c52159f@mail.gmail.com>

line 250 of admin-functions.php should be replaced with $category_parent
I am using: wordpress-2005-07-30

Thanks,
From lorelle at cameraontheroad.com  Sun Jul 31 22:03:53 2005
From: lorelle at cameraontheroad.com (Lorelle VanFossen)
Date: Sun Jul 31 23:04:13 2005
Subject: [wp-hackers] b2evo importing script
Message-ID: <42ED4AC9.2010108@cameraontheroad.com>

In the Codex, there is this comment/inquiry:

Hi, about that b2evo script. Converting titles and posts to UTF-8 
mangles the special characters (the blog I'm trying to convert is 
partially in Finnish). Also, converting from an older b2evo, the dates 
were wrong. These were trivial to correct, but it would be really nice 
to get them corrected in the "official" script.
Sorry to bitch here if this is the wrong place, and thanks for the hard 
work! :) --Mandrl 
<http://codex.wordpress.org/index.php?title=User:Mandrl&action=edit> 
21:36, 31 Jul 2005 (UTC)
http://codex.wordpress.org/Talk:Importing_Content

====

I'm not sure who is handling upgrading the conversion scripts, so I just 
thought I would pass on the information.

Thanks,

Lorelle

