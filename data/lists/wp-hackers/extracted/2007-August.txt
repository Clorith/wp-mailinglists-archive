From r at schestowitz.com  Wed Aug  1 04:25:55 2007
From: r at schestowitz.com (Roy Schestowitz)
Date: Wed Aug  1 04:33:42 2007
Subject: [wp-hackers] WP-Hackers Stats for July 2007
Message-ID: <46B00B53.5020900@schestowitz.com>

  ?  Times are Greenwich Mean Time (GMT) +0:00

  ?  Statistics span a period of one month

  ?  Subject line formatted consistently "WP-Hackers Stats for <MONTH>
<YEAR>"

  ?  Killfile <subject contains "WP-Hackers Stats for "> if uninterested
____________________________________________________________
Stats for wp-hackers
~~~~~~~~~~~~~~~~~~~~
***** People who have written most messages:
+----+-----Author-----------------------------------+--Msg-+-Percent-+
|  1 | speedboxer@gmail.com                         |   25 | 10.55 % |
|  2 | computerguru@neosmart.net                    |   22 |  9.28 % |
|  3 | otto@ottodestruct.com                        |   14 |  5.91 % |
|  4 | hovercrafter@earthlink.net                   |   10 |  4.22 % |
|  5 | wphackers@galleryembedded.com                |    8 |  3.38 % |
|  6 | jeremy.visser@gmail.com                      |    8 |  3.38 % |
|  7 | lists07@wiltgen.net                          |    7 |  2.95 % |
|  8 | foolistbar@googlemail.com                    |    7 |  2.95 % |
|  9 | tohru@nakarika.com                           |    7 |  2.95 % |
| 10 | omry@yadan.net                               |    5 |  2.11 % |
| 11 | leonid@mamchenkov.net                        |    5 |  2.11 % |
| 12 | ron@cavemonkey50.com                         |    5 |  2.11 % |
| 13 | supporto@pixline.net                         |    5 |  2.11 % |
| 14 | r@robm.me.uk                                 |    4 |  1.69 % |
| 15 | marci@odaffer.net                            |    4 |  1.69 % |
| 16 | iacobs@m0n5t3r.info                          |    4 |  1.69 % |
| 17 | ag.ml2007@zirona.com                         |    4 |  1.69 % |
| 18 | andy@yellowswordfish.com                     |    4 |  1.69 % |
| 19 | cpoteet@siolon.com                           |    4 |  1.69 % |
| 20 | lloydomattic@gmail.com                       |    4 |  1.69 % |
| 21 | wordpress@dd32.id.au                         |    4 |  1.69 % |
| 22 | wp-hackers@striderweb.com                    |    3 |  1.27 % |
| 23 | chris@clwill.com                             |    3 |  1.27 % |
| 24 | MattPat@mattpat.net                          |    3 |  1.27 % |
| 25 | tsbalaban@yahoo.com                          |    3 |  1.27 % |
+----+----------------------------------------------+------+---------+
|    | other                                        |   65 | 27.43 % |
+----+----------------------------------------------+------+---------+

***** Best authors, by total size of their messages (w/o quoting):
+----+-----Author-------------------------------------------+-KBytes-+
|  1 | computerguru neosmart.net                            |   21.3 |
|  2 | speedboxer gmail.com                                 |   12.9 |
|  3 | otto ottodestruct.com                                |   10.9 |
|  4 | jacobsantos branson.com                              |   10.8 |
|  5 | david.schoonover gmail.com                           |    9.5 |
|  6 | tohru nakarika.com                                   |    9.2 |
|  7 | emmensetech gmail.com                                |    7.9 |
|  8 | wphackers galleryembedded.com                        |    7.4 |
|  9 | hovercrafter earthlink.net                           |    6.5 |
| 10 | leonid mamchenkov.net                                |    4.8 |
| 11 | lists07 wiltgen.net                                  |    4.3 |
| 12 | foolistbar googlemail.com                            |    3.6 |
| 13 | supporto pixline.net                                 |    3.6 |
| 14 | morty gmx.net                                        |    3.2 |
| 15 | ron cavemonkey50.com                                 |    3.0 |
| 16 | dougal gunters.org                                   |    3.0 |
| 17 | wordpress dd32.id.au                                 |    3.0 |
| 18 | ag.ml2007 zirona.com                                 |    2.9 |
| 19 | ozh planetozh.com                                    |    2.8 |
| 20 | yahgrp poplarware.com                                |    2.4 |
| 21 | jeremy.visser gmail.com                              |    2.3 |
| 22 | r robm.me.uk                                         |    2.2 |
| 23 | lloydomattic gmail.com                               |    2.1 |
| 24 | tsbalaban yahoo.com                                  |    2.1 |
| 25 | iacobs m0n5t3r.info                                  |    2.1 |
+----+------------------------------------------------------+--------+

***** Best authors, by average size of their message (w/o quoting):
+----+-----Author--------------------------------------------+-bytes-+
|  1 | david.schoonover gmail.com                            |  4858 |
|  2 | emmensetech gmail.com                                 |  4044 |
|  3 | jacobsantos branson.com                               |  3688 |
|  4 | filippo.toso creativepark.it                          |  1679 |
|  5 | dougal gunters.org                                    |  1524 |
|  6 | ozh planetozh.com                                     |  1436 |
|  7 | Brian TheCodeCave.com                                 |  1400 |
|  8 | tohru nakarika.com                                    |  1348 |
|  9 | wordpress nazgul.nu                                   |  1285 |
| 10 | yahgrp poplarware.com                                 |  1239 |
| 11 | lawrence krubner.com                                  |  1189 |
| 12 | morty gmx.net                                         |  1075 |
| 13 | david coppit.org                                      |  1066 |
| 14 | Brian thecodecave.com                                 |  1064 |
| 15 | chris.hearn01 ntlworld.com                            |  1025 |
| 16 | computerguru neosmart.net                             |   992 |
| 17 | bayportblues gmail.com                                |   988 |
| 18 | leonid mamchenkov.net                                 |   982 |
| 19 | michael michaelverdi.com                              |   980 |
| 20 | wphackers galleryembedded.com                         |   952 |
| 21 | hovenko linpro.no                                     |   947 |
| 22 | viper viper007bond.com                                |   835 |
| 23 | docwhat+list.wp.hackers gerf.org                      |   818 |
| 24 | otto ottodestruct.com                                 |   794 |
| 25 | mywebadmin gmail.com                                  |   782 |
+----+-------------------------------------------------------+-------+

***** Table showing the most successful subjects:
+----+----Subject-----------------------------------+--Msg-+-Percent-+
|  1 | [wp-hackers] Drop PHP4 support entirely?     |   66 | 27.85 % |
|  2 | [wp-hackers] WordPress Uses "Wrong" Apostrop |   34 | 14.35 % |
|  3 | [wp-hackers] Advantage (or not) of hosting b |   12 |  5.06 % |
|  4 | [wp-hackers] Lunarpages PHP5 Discussion      |   10 |  4.22 % |
|  5 | [wp-hackers] Changing two variables listed i |    8 |  3.38 % |
|  6 | [wp-hackers] 2.0 branch                      |    8 |  3.38 % |
|  7 | [wp-hackers] is there any interest in suppor |    6 |  2.53 % |
|  8 | [wp-hackers] ID attributes for admin menu it |    6 |  2.53 % |
|  9 | [wp-hackers] Assigning Pages to Categories   |    6 |  2.53 % |
| 10 | [wp-hackers] Re: Please Help: Gallery2 Rewri |    5 |  2.11 % |
| 11 | [wp-hackers] Re: Please Help: Gallery2 Rewri |    5 |  2.11 % |
| 12 | [wp-hackers] Per Post comment feed...feature |    5 |  2.11 % |
| 13 | [wp-hackers] Strange behavior in plugin with |    4 |  1.69 % |
| 14 | [wp-hackers] Auto Suggest                    |    4 |  1.69 % |
| 15 | [wp-hackers] Re: Drop PHP4 support entirely? |    4 |  1.69 % |
| 16 | [wp-hackers] Search Widget                   |    4 |  1.69 % |
| 17 | [wp-hackers] strange get_posts behaviour in  |    4 |  1.69 % |
| 18 | [wp-hackers] wp-plugins.org + wp-hackers     |    4 |  1.69 % |
| 19 | [wp-hackers] using translated strings for ac |    3 |  1.27 % |
| 20 | [wp-hackers] Please Help: Gallery2 Rewrites  |    3 |  1.27 % |
| 21 | [wp-hackers] date_i18n                       |    3 |  1.27 % |
| 22 | [wp-hackers] WP_Cache and contents filtering |    3 |  1.27 % |
| 23 | [wp-hackers] WP visual editor feeling lucky  |    3 |  1.27 % |
| 24 | [wp-hackers] Re: [wp-trac] Re: [WordPress Tr |    3 |  1.27 % |
| 25 | [wp-hackers] PHP 4 - End of Life             |    2 |  0.84 % |
+----+----------------------------------------------+------+---------+
|    | other                                        |   22 |  9.28 % |
+----+----------------------------------------------+------+---------+

***** Most used email clients:
+----+----Mailer------------------------------------+--Msg-+-Percent-+
|  1 | Google Mail/Other                            |   88 | 37.13 % |
|  2 | Microsoft Office Outlook 12.0                |   44 | 18.57 % |
|  3 | Apple Mail (2.752.2)                         |   21 |  8.86 % |
|  4 | Thunderbird 2.0.0.4 (Windows/20070604)       |   10 |  4.22 % |
|  5 | Apple Mail (2.752.3)                         |    8 |  3.38 % |
|  6 | Thunderbird 2.0.0.4 (X11/20070604)           |    7 |  2.95 % |
|  7 | Becky! ver. 2.31 [ja]                        |    7 |  2.95 % |
|  8 | Thunderbird 2.0.0.5 (Windows/20070716)       |    6 |  2.53 % |
|  9 | Icedove 1.5.0.10 (X11/20070329)              |    4 |  1.69 % |
| 10 | Thunderbird 2.0b1 (X11/20070208)             |    4 |  1.69 % |
| 11 | Evolution 2.10.1                             |    4 |  1.69 % |
| 12 | Opera Mail/9.22 (Win32)                      |    4 |  1.69 % |
| 13 | Microsoft-Entourage/11.3.3.061214            |    3 |  1.27 % |
| 14 | Microsoft Office Outlook 11                  |    3 |  1.27 % |
| 15 | Microsoft Outlook Express 6.x                |    3 |  1.27 % |
| 16 | KMail                                        |    3 |  1.27 % |
| 17 | Thunderbird 1.5.0.10 (Windows/20070221)      |    2 |  0.84 % |
| 18 | Apple Mail (2.890.2)                         |    2 |  0.84 % |
| 19 | Mozilla/5.x                                  |    2 |  0.84 % |
| 20 | Thunderbird 1.5.0.12 (X11/20070604)          |    2 |  0.84 % |
| 21 | Icedove 1.5.0.12 (X11/20070607)              |    2 |  0.84 % |
| 22 | Mutt                                         |    2 |  0.84 % |
| 23 | Lotus Notes Release 5.0                      |    1 |  0.42 % |
| 24 | Internet Messaging Program (IMP) H3 (4.1.1)  |    1 |  0.42 % |
| 25 | Foxmail 6, 8, 105, 25 [cn]                   |    1 |  0.42 % |
+----+----------------------------------------------+------+---------+
|    | other                                        |    3 |  1.27 % |
+----+----------------------------------------------+------+---------+

***** Table of maximal quoting:
+----+-----Author------------------------------------------+-Percent-+
|  1 | mywebadmin gmail.com                                | 82.29 % |
|  2 | galeenet gmail.com                                  | 76.17 % |
|  3 | hovenko linpro.no                                   | 75.68 % |
|  4 | andy yellowswordfish.com                            | 66.89 % |
|  5 | atthe404 gmail.com                                  | 66.49 % |
|  6 | dabbaking gmail.com                                 | 65.91 % |
|  7 | m marcosmedia.com                                   | 65.36 % |
|  8 | hovercrafter earthlink.net                          | 65.20 % |
|  9 | les lcb.me.uk                                       | 60.80 % |
| 10 | omry yadan.net                                      | 60.27 % |
| 11 | MattPat mattpat.net                                 | 59.84 % |
| 12 | robin.adr gmail.com                                 | 59.36 % |
| 13 | shacker birdhouse.org                               | 58.21 % |
| 14 | chris.hearn01 ntlworld.com                          | 56.23 % |
| 15 | computerguru neosmart.net                           | 55.58 % |
| 16 | wordpress dd32.id.au                                | 55.53 % |
| 17 | viper viper007bond.com                              | 51.66 % |
| 18 | iacobs m0n5t3r.info                                 | 50.57 % |
| 19 | ron cavemonkey50.com                                | 49.36 % |
| 20 | tyler tylersmalley.com                              | 47.42 % |
| 21 | otto ottodestruct.com                               | 45.24 % |
| 22 | peter.westwood ftwr.co.uk                           | 44.32 % |
| 23 | Brian TheCodeCave.com                               | 43.01 % |
| 24 | speedboxer gmail.com                                | 42.14 % |
| 25 | r robm.me.uk                                        | 39.67 % |
+----+-----------------------------------------------------+---------+
|    | average                                             | 38.61 % |
+----+-----------------------------------------------------+---------+

***** Graph showing number of messages written during hours of day:

100% -----------------------------#---#--------------- - 20
 90% -----------------------#---#-#-#-#--------------- msgs
 80% -----------------------#---#-#-#-#---------------
 70% -------------------#-#-#---#-#-#-#---------------
 60% -------------------#-#-#---#-#-#-#-#-------------
 50% -------------------#-#-#---#-#-#-#-#---#-------#-
 40% -#-----------------#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-
 30% -#-------------#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-
 20% -#-------#-----#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-
 10% -#-#-----#-----#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-
      * * * * * * * * * * * * * * * * * * * * * * * *
hour  0         5           11          17          23


***** Graph showing number of messages written during days of month:

100% ---------------#----------------------------------------------- - 26
 90% -------------#-#-#--------------------------------------------- msgs
 80% -----------#-#-#-#---------------------------------------------
 70% -----------#-#-#-#---------------------------------------------
 60% ---------#-#-#-#-#-------------------------------------#-------
 50% ---------#-#-#-#-#-#-----------------------------------#-----#-
 40% -#-------#-#-#-#-#-#-----#-----------------------------#-----#-
 30% -#-------#-#-#-#-#-#-----#-----------------------------#-----#-
 20% -#-#-----#-#-#-#-#-#-----#---------------#-#-----------#-----#-
 10% -#-#-#---#-#-#-#-#-#-#---#---------#-----#-#-----#-#-#-#-----#-
      * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
 day  1         6           12          18          24            31


***** Graph showing number of messages written during days of week:

100% ---------------------#------- - 50
 90% ---------------------#------- msgs
 80% -----------------#---#---#---
 70% -#---------------#---#---#---
 60% -#---#-----------#---#---#---
 50% -#---#-----------#---#---#---
 40% -#---#-------#---#---#---#---
 30% -#---#-------#---#---#---#---
 20% -#---#---#---#---#---#---#---
 10% -#---#---#---#---#---#---#---
      *   *   *   *   *   *   *  
     Mon Tue Wed Thu Fri Sat Sun


***** Maximal quoting:
      Author     : hovercrafter earthlink.net
      Subject    : [wp-hackers] Drop PHP4 support entirely?
      Date       : Sun, 8 Jul 2007 14:29:22 -0400
      Quote ratio: 92.17% / 4280 bytes

***** Longest message:
      Author     : david.schoonover gmail.com
      Subject    : [wp-hackers] Re: [wp-trac] Re: [WordPress Trac]
#3875: Proposal for
      Date       : Sat, 21 Jul 2007 16:03:20 -0400
      Size       : 10668 bytes

***** Most successful subject:
      Subject    : [wp-hackers] Drop PHP4 support entirely?
      No. of msgs: 66
      Total size : 94165 bytes

***** Final summary:
      Total number of messages:             237
      Total number of different authors:    70
      Total number of different subjects:   42
      Total size of messages (w/o headers): 312893 bytes
      Average size of a message:            1320 bytes

***** Generated by MailListStat v1.3, (C) 2001-2003 <marki (at) nexin.sk>
***** See http://freshmeat.net/projects/mls for details...

DISCLAIMER: Stats automatically produced. Remember that stats are often
meaningless and deceiving.
From jacobsantos at branson.com  Wed Aug  1 16:33:44 2007
From: jacobsantos at branson.com (jacobsantos@branson.com)
Date: Wed Aug  1 16:33:49 2007
Subject: [wp-hackers] Re: [wp-trac] Re: [WordPress Trac] #3875: Proposal
	for a new plugin architecture
In-Reply-To: <F532FFDB-3786-41CB-8350-76D80313707D@gmail.com>
References: <46AF7A8D.7080503@branson.com>
	<F532FFDB-3786-41CB-8350-76D80313707D@gmail.com>
Message-ID: <46B0B5E8.9010204@branson.com>

I uploaded a new diff to WordPress Trac system for the ticket. I've 
tested it, profiled it (running at 0.3 ms for 
_wp_filter_build_unique_id()), and wrote unit testing. The unit test 
only covers the _wp_filter_build_unique_id() function, so it is at only 
21% of the plugins.php file. If you want to add in the other 
add_filter() and remove_filter to make absolutely sure that it works, 
then let me know and I'll attach the unit test to the ticket also.

For the last email I sent, I didn't do tests for Use Cases 3 and 4, but 
I figured that 1 and 2 would cover that at this point. Do you think I 
should install a couple of plugins that use Classes to be sure that it 
works correctly? The plugin that started the issue would be a good 
candidate, but also perhaps Subscribe2 (which I know uses array(&$this, 
'methodname') in its code) with others?

One thing that I had to do with the unit testing was remove the class 
comparsion checking. It didn't seem to function properly. I just figured 
that if the class already has $wp_filter_id, then it must have already 
been through the process. Oh wait, $wp_filter_id should be 
$_wp_filter_id, in case any class might use that for some reason. Would 
have to find a better unique name.

The modification shouldn't require any changes to existing classes, 
because of the above usage. In my profiling, with 206 calls to the 
function, it takes only 4ms.
From jacobsantos at branson.com  Wed Aug  1 18:28:46 2007
From: jacobsantos at branson.com (jacobsantos@branson.com)
Date: Wed Aug  1 18:28:51 2007
Subject: [wp-hackers] Unit Testing, Yet Another Discussion
Message-ID: <46B0D0DE.4040702@branson.com>

Everything I've found has stated that Unit Testing isn't something that 
WordPress does, or *thinks* is impossible for WordPress. I hope I'm not 
beating a dead horse, but I really do think this should be actively 
pursued to improve the quality of WordPress.

Regressions be be avoided with unit testing. Theories and bug fixing can 
be improved. Unit Testing is not just for classes and methods. My unit 
test for the Plugin.php file proves this. You don't have to test what is 
in the function, just the result. If the result is not what you 
expected, then something in the function changed or is wrong.

One of the best advantages of using unit tests is writing tests for 
bugs. I don't think anyone can write an unit test that covers 
everything, including the interactions. To illustrate this point, the 
coding that I'm doing with WordPress has mostly been developed using 
Unit Tests, with functions and with classes.

I think the next Summer Of Code should involve Unit Testing WordPress 
wp-includes and/or functional testing of WordPress pages. The quality of 
WordPress releases should improve greatly.

--------------------

#1: The question I should ask is what is needed to get the ball started? 
I'm willing to write unit tests for wp-includes, that I work with, when 
I get to them. However, since I'm not a core developer, I have no 
motivation to start such a project. Which might be a lie. Damn, I guess 
I could use this to learn better Unit Testing and perhaps try Functional 
Testing.

#2 If someone did write a complete unit testing suite of wp-includes 
code (about 70%-80% code coverage), would that be used actively by 
testers and developers? There is no point putting work into something 
that would only be used by one or two people.

#3 Has anyone else (besides the guy building the functional testing with 
SimpleTest, which is massively incomplete) started or finished their own 
unit testing suite of WordPress?

-------------------

It wouldn't be difficult to finish the unit test that I have for 
wp-includes/plugin.php, I think also it would be a good idea to check 
the previous commits and see what regressions were made by the recent 
2.2.1 changes. Well, I only have about 30% code coverage of the plugin.php.

Oh, the discussion about Test Driven Development is not needed. If you 
write unit tests enough, you'll naturally fall into TDD, but for others, 
it could just be that a few people write unit tests after the code was 
committed or for new bugs. So even if you don't use unit tests for 
development, it doesn't mean that it wouldn't be useful currently and in 
the future.
From david at coppit.org  Wed Aug  1 19:38:16 2007
From: david at coppit.org (David Coppit)
Date: Wed Aug  1 19:38:45 2007
Subject: [wp-hackers] Re: How to redirect to login when filtered posts are
	empty?
In-Reply-To: <Pine.BSF.4.64.0707311014150.30057@www.provisio.net>
References: <Pine.BSF.4.64.0707311014150.30057@www.provisio.net>
Message-ID: <Pine.BSF.4.64.0708011535210.74227@www.provisio.net>

On Tue, 31 Jul 2007, David Coppit wrote:

> My question is this: Is there some way to get WP to redirect to the login
> screen in this case instead of showing a 404 message?

Here's a workable solution:
   - In my filter, set a global if the page should be hidden
   - Use add_action to hook template_redirect
   - In my hook, check to see if the global is set and call auth_redirect()
     if it is.

I wish there was a better way than setting a global, but I don't see it.

David

_____________________________________________________________________
David Coppit                           david@coppit.org
The College of William and Mary        http://coppit.org/

"When the president does it that means that it is not illegal."
- Richard Nixon on domestic surveillance, 5/19/1977
"Do I have the legal authority to do this? And the answer is, absolutely."
- George W. Bush on domestic surveillance, 12/19/2005
From mark.wordpress at txfx.net  Wed Aug  1 19:41:36 2007
From: mark.wordpress at txfx.net (Mark Jaquith)
Date: Wed Aug  1 19:42:00 2007
Subject: [wp-hackers] Re: How to redirect to login when filtered posts are
	empty?
In-Reply-To: <Pine.BSF.4.64.0708011535210.74227@www.provisio.net>
References: <Pine.BSF.4.64.0707311014150.30057@www.provisio.net>
	<Pine.BSF.4.64.0708011535210.74227@www.provisio.net>
Message-ID: <17F5686C-04AB-482C-9955-E5EC468A09E4@txfx.net>

On Aug 1, 2007, at 3:38 PM, David Coppit wrote:

> I wish there was a better way than setting a global, but I don't  
> see it.

Try using a lambda-style function (using create_function()).

http://php.net/create_function

--
Mark Jaquith
http://markjaquith.com/

Covered Web Services
http://coveredwebservices.com/

WordPress Ninja @ b5media Inc
http://b5media.com/


From wordpress at dd32.id.au  Thu Aug  2 00:16:54 2007
From: wordpress at dd32.id.au (DD32)
Date: Thu Aug  2 00:17:18 2007
Subject: [wp-hackers] Re: How to redirect to login when filtered posts are
	empty?
In-Reply-To: <Pine.BSF.4.64.0708011535210.74227@www.provisio.net>
References: <Pine.BSF.4.64.0707311014150.30057@www.provisio.net>
	<Pine.BSF.4.64.0708011535210.74227@www.provisio.net>
Message-ID: <op.tweoegamk6w4mc@dd32.no-ip.com>

On Thu, 02 Aug 2007 05:38:16 +1000, David Coppit <david@coppit.org> wrote:
> Here's a workable solution:
>    - In my filter, set a global if the page should be hidden
>    - Use add_action to hook template_redirect
>    - In my hook, check to see if the global is set and call  
> auth_redirect()
>      if it is.
>
> I wish there was a better way than setting a global, but I don't see it.

I'm not sure of the code your using, But what i've done was only register  
the template_redirect hook IF in the filter its realised as needing the  
hook.

For what i was doing:
In the Query vars filter,
Check for a query item of ABC,
If exists, then setup a few options, and then register the template  
redirect hook with add_action

once more i'm unsure of your exact code, but is it possible to call  
auth_redirect in the initial filter rather than later in the hook?

-- 
Using Opera's revolutionary e-mail client: http://www.opera.com/mail/
From david at coppit.org  Thu Aug  2 00:50:47 2007
From: david at coppit.org (David Coppit)
Date: Thu Aug  2 00:51:25 2007
Subject: [wp-hackers] Re: How to redirect to login when filtered posts are
	empty?
In-Reply-To: <op.tweoegamk6w4mc@dd32.no-ip.com>
References: <Pine.BSF.4.64.0707311014150.30057@www.provisio.net>
	<Pine.BSF.4.64.0708011535210.74227@www.provisio.net>
	<op.tweoegamk6w4mc@dd32.no-ip.com>
Message-ID: <Pine.BSF.4.64.0708012045250.94315@www.provisio.net>

On Thu, 2 Aug 2007, DD32 wrote:

> On Thu, 02 Aug 2007 05:38:16 +1000, David Coppit <david@coppit.org> wrote:
>> Here's a workable solution:
>>   - In my filter, set a global if the page should be hidden
>>   - Use add_action to hook template_redirect
>>   - In my hook, check to see if the global is set and call auth_redirect()
>>     if it is.
>> 
>> I wish there was a better way than setting a global, but I don't see it.
>
> I'm not sure of the code your using, But what i've done was only register the 
> template_redirect hook IF in the filter its realised as needing the hook.

Let me make sure I understand... In my filter callback I call add_action
if I need the redirect. The add_action callback unconditionally calls
auth_redirect. I also need to call remove_action in the action callback,
right?

David

_____________________________________________________________________
David Coppit                           david@coppit.org
The College of William and Mary        http://coppit.org/

"When the president does it that means that it is not illegal."
- Richard Nixon on domestic surveillance, 5/19/1977
"Do I have the legal authority to do this? And the answer is, absolutely."
- George W. Bush on domestic surveillance, 12/19/2005
From wordpress at dd32.id.au  Thu Aug  2 01:00:55 2007
From: wordpress at dd32.id.au (DD32)
Date: Thu Aug  2 01:00:57 2007
Subject: [wp-hackers] Re: How to redirect to login when filtered posts are
	empty?
In-Reply-To: <Pine.BSF.4.64.0708012045250.94315@www.provisio.net>
References: <Pine.BSF.4.64.0707311014150.30057@www.provisio.net>
	<Pine.BSF.4.64.0708011535210.74227@www.provisio.net>
	<op.tweoegamk6w4mc@dd32.no-ip.com>
	<Pine.BSF.4.64.0708012045250.94315@www.provisio.net>
Message-ID: <op.tweqftnbk6w4mc@dd32.no-ip.com>

We might be on completely different pages, but heres some code from my  
latest plugin:

add_action('template_redirect','dda_template');
function dda_template($arg){
	global $wp_query;
	if( isset($wp_query->query_vars['ddeviantart']) )
		add_filter('home_template','dda_template_override');
	return $arg;
}
function dda_template_override($template){
	//Override the template for the current page and replace it with our own.
	return dirname(__FILE__).'/dda_portfolio.php';
}


ie. Conditionally add the 2nd filter only if its needed..

On Thu, 02 Aug 2007 10:50:47 +1000, David Coppit <david@coppit.org> wrote:

> On Thu, 2 Aug 2007, DD32 wrote:
>
>> On Thu, 02 Aug 2007 05:38:16 +1000, David Coppit <david@coppit.org>  
>> wrote:
>>> Here's a workable solution:
>>>   - In my filter, set a global if the page should be hidden
>>>   - Use add_action to hook template_redirect
>>>   - In my hook, check to see if the global is set and call  
>>> auth_redirect()
>>>     if it is.
>>>  I wish there was a better way than setting a global, but I don't see  
>>> it.
>>
>> I'm not sure of the code your using, But what i've done was only  
>> register the template_redirect hook IF in the filter its realised as  
>> needing the hook.
>
> Let me make sure I understand... In my filter callback I call add_action
> if I need the redirect. The add_action callback unconditionally calls
> auth_redirect. I also need to call remove_action in the action callback,
> right?
>
> David
>
> _____________________________________________________________________
> David Coppit                           david@coppit.org
> The College of William and Mary        http://coppit.org/
>
> "When the president does it that means that it is not illegal."
> - Richard Nixon on domestic surveillance, 5/19/1977
> "Do I have the legal authority to do this? And the answer is,  
> absolutely."
> - George W. Bush on domestic surveillance, 12/19/2005
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers



-- 
Using Opera's revolutionary e-mail client: http://www.opera.com/mail/
From jeremy.visser at gmail.com  Thu Aug  2 03:14:25 2007
From: jeremy.visser at gmail.com (Jeremy Visser)
Date: Thu Aug  2 03:14:34 2007
Subject: [wp-hackers] Trac(k) WP development with Mugshot
Message-ID: <46B14C11.7020302@gmail.com>

I found a cool way to track WP development progress: with Mugshot.

If you don't know already, Mugshot is kind of like a 'Web 2.0
Aggregator'. A 'social network of social networks', which integrates
with blogs, and services like YouTube, Flickr, etc. You can see what
your friends are up to through 'groups'. If you're in a group, and you,
say, upload to Flickr, everyone in the group will see the photo in their
Stacker. You can also add RSS feeds to a group, and everyone in the
group will see the RSS feeds pop up.

The Mugshot Stacker is a desktop application that gives you popups
whenever something happens in a group you're in.

So, I created a group called 'WordPress Development', and subscribed it
to the Trac timeline's RSS feed.

	See: http://mugshot.org/group?who=npFL0SSbsg9X5Z

Now, anyone who uses Mugshot, downloads their desktop client (Windows,
Linux, but no Mac, I think), and joins the aforementioned group, will
get popups of all the Trac activity (tickets, changesets).

I think it's quite handy. What does everyone else think?

-- 
Jeremy Visser

()  ascii ribbon campaign - against html e-mail
/\  www.asciiribbon.org   - against proprietary attachments
From sam at rephrase.net  Thu Aug  2 08:59:02 2007
From: sam at rephrase.net (Sam Angove)
Date: Thu Aug  2 08:59:08 2007
Subject: [wp-hackers] Unit Testing, Yet Another Discussion
In-Reply-To: <46B0D0DE.4040702@branson.com>
References: <46B0D0DE.4040702@branson.com>
Message-ID: <aa74b1910708020159x490042fam7809e3fef1f37799@mail.gmail.com>

On 8/2/07, jacobsantos@branson.com <jacobsantos@branson.com> wrote:
>
> #3 Has anyone else (besides the guy building the functional testing with
> SimpleTest, which is massively incomplete) started or finished their own
> unit testing suite of WordPress?

I started writing some tests with PHPUnit about a month ago, got
halfway through wp-includes/formatting.php and gave up.

There were a few reasons, the main one being that too much of the code
is very tightly-coupled: unit testing it is impossible without an
absurdly complicated harness. There didn't seem much point to only
testing the easily-tested functions -- most of them are stable anyway.

At this point I think there's more value in starting with higher-level
interface testing:

 1. Tests of WP APIs: "if I call `wp_insert_post` with a title of
'foo', `the_title` returns 'foo'".
 2. Tests of the WP interface with, say,
<http://www.openqa.org/selenium/>. Wasn't one of the summer of code
people was doing something like this?

It's less useful than it would be with complementary unit tests, but
still, better than nothing. The coverage could be deepened with unit
tests later on.

Anyway, good luck. I took up learning Haskell instead; it's much more
rewarding. ;)
From wordpress at dd32.id.au  Thu Aug  2 09:06:06 2007
From: wordpress at dd32.id.au (DD32)
Date: Thu Aug  2 09:07:53 2007
Subject: [wp-hackers] Unit Testing, Yet Another Discussion
In-Reply-To: <aa74b1910708020159x490042fam7809e3fef1f37799@mail.gmail.com>
References: <46B0D0DE.4040702@branson.com>
	<aa74b1910708020159x490042fam7809e3fef1f37799@mail.gmail.com>
Message-ID: <op.twfcwg13k6w4mc@dd32.no-ip.com>

On Thu, 02 Aug 2007 18:59:02 +1000, Sam Angove <sam@rephrase.net> wrote:
> Wasn't one of the summer of code
> people was doing something like this?

Theres 2 which are related:
Create Unit Test Framework for Editor Formatting
http://groups.google.com/group/wordpress-soc-2007/web/create-unit-test-framework-for-editor-formatting

and
Performance Testing
http://groups.google.com/group/wordpress-soc-2007/web/performance-testing

-- 
Using Opera's revolutionary e-mail client: http://www.opera.com/mail/
From jacobsantos at branson.com  Thu Aug  2 14:41:12 2007
From: jacobsantos at branson.com (jacobsantos@branson.com)
Date: Thu Aug  2 14:41:22 2007
Subject: [wp-hackers] Unit Testing, Yet Another Discussion
In-Reply-To: <aa74b1910708020159x490042fam7809e3fef1f37799@mail.gmail.com>
References: <46B0D0DE.4040702@branson.com>
	<aa74b1910708020159x490042fam7809e3fef1f37799@mail.gmail.com>
Message-ID: <46B1ED08.8010003@branson.com>

Thanks Sam,

I really don't think that should deter unit testing. If enough people 
get started then it will be easier for others to add, modify and improve 
upon existing tests. At this point, a developer doesn't see anything in 
the repository, and most of the research online brings up only 
discussions about probably, maybe, sort of not ever doing it for WordPress.

I don't know when I'll be giving up. I'm finishing plugins.php, which is 
easier, and I might jump over to cache.php and post.php (which I think 
is more difficult), since I've had some tests for that already. If you 
start out with the most difficult, then yeah, it will be depressing and 
the more depressing something is, the easier it is to give up. 
Preventing regressions in return values, is my main concern and 
something that should be prevented by unit testing, both the easy and 
more difficult functions (which are more likely to be updated).

It would be a good idea to test the hooks actions and filters. Creating 
a contained and live work flow is worth investigating.

My goal is to get >95% code coverage on the easy files first and try to 
get about 20% through 30% on the more difficult files for the unit tests 
of wp-includes.

I'm also going to try to do some functional testing (acceptance 
testing). I need a project to get started on learning how to do 
acceptance testing, and I think WordPress is a good choice, because I 
use it everyday.

I'll be back with any results and post all unit tests that I complete. 
At least in the future there will be something.

Sam Angove wrote:
> On 8/2/07, jacobsantos@branson.com <jacobsantos@branson.com> wrote:
>   
>> #3 Has anyone else (besides the guy building the functional testing with
>> SimpleTest, which is massively incomplete) started or finished their own
>> unit testing suite of WordPress?
>>     
>
> I started writing some tests with PHPUnit about a month ago, got
> halfway through wp-includes/formatting.php and gave up.
>
> There were a few reasons, the main one being that too much of the code
> is very tightly-coupled: unit testing it is impossible without an
> absurdly complicated harness. There didn't seem much point to only
> testing the easily-tested functions -- most of them are stable anyway.
>
> At this point I think there's more value in starting with higher-level
> interface testing:
>
>  1. Tests of WP APIs: "if I call `wp_insert_post` with a title of
> 'foo', `the_title` returns 'foo'".
>  2. Tests of the WP interface with, say,
> <http://www.openqa.org/selenium/>. Wasn't one of the summer of code
> people was doing something like this?
>
> It's less useful than it would be with complementary unit tests, but
> still, better than nothing. The coverage could be deepened with unit
> tests later on.
>
> Anyway, good luck. I took up learning Haskell instead; it's much more
> rewarding. ;)
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
>
>
>   

From hovenko at linpro.no  Thu Aug  2 15:06:09 2007
From: hovenko at linpro.no (Knut-Olav Hoven)
Date: Thu Aug  2 15:07:16 2007
Subject: [wp-hackers] canary mismatch on efree() - heap overflow detected
Message-ID: <200708021706.11299.hovenko@linpro.no>

I get the following in my Apache error log.

Aug  2 16:28:20 beta suhosin[49368]: ALERT - canary mismatch on efree() - heap 
overflow detected (attacker '127.0.0.1', 
file '/some/dir/wordpress/wp-includes/kses.php', line 518)



This makes mod_php and Apache crash, and the only "fix" I have found so far is 
to restart apache (apachectl graceful) every 15 minutes with cron.


This error happend some times during the summer. We got many visitors on the 
website today. So far have I noticed crashes 4 or 5 times today.

The first time the error appaired was one month ago, when switching from one 
server to another (Linux -> FreeBSD). I upgraded all FreeBSD ports that time.

Don't know if it is a bug in the Suhosin patch, PHP or WordPress. Line 518 in 
kses.php doesn't look bad too me. I will try breaking up that line in 
multiple lines, with only one function call on each line. I'll report back 
when i notice another crash after the change.



== Log details ==

The IP address 127.0.0.1 in the log is my proxy-server.


Line 518 in kses.php looks like this:
 return addslashes( wp_kses(stripslashes( $data ), $allowedtags) );

The function in WordPress that gets executed on line 518 (wp_filter_kses) is 
connected to the filters "pre_comment_content" and "title_save_pre". I guess 
it happens only when users post comments or write posts.



== Server info ==

Server: FreeBSD 6.2-RELEASE
Apache: 1.3.37

PHP: 5.2.3
with Suhosin-Patch 0.9.6.2 (cli) (built: Jul  6 2007 22:13:03)
Copyright (c) 1997-2007 The PHP Group
Zend Engine v2.2.0, Copyright (c) 1998-2007 Zend Technologies
    with XCache v1.2.0, Copyright (c) 2005-2006, by mOo


-- 
Knut-Olav Hoven
Systemutvikler               mob: +47 986 71 700
Linpro AS                    http://www.linpro.no/
From jeff at jrm.cc  Thu Aug  2 15:43:44 2007
From: jeff at jrm.cc (jeff@jrm.cc)
Date: Thu Aug  2 15:43:54 2007
Subject: [wp-hackers] canary mismatch on efree() - heap overflow detected
In-Reply-To: <200708021706.11299.hovenko@linpro.no>
References: <200708021706.11299.hovenko@linpro.no>
Message-ID: <20070802114344.uxgo4i6vhxs84woo@jrm.cc>

Quoting Knut-Olav Hoven <hovenko@linpro.no>:
> I get the following in my Apache error log.
>
> Aug  2 16:28:20 beta suhosin[49368]: ALERT - canary mismatch on   
> efree() - heap
> overflow detected (attacker '127.0.0.1',
> file '/some/dir/wordpress/wp-includes/kses.php', line 518)

I got this same error and I think it's a problem with op caching kses.

Try modifying the kses.php file so that the opcache has to be redone  
-- should clear the problem. Not sure if that will keep it from doing  
it again though, but mine hasn't reoccured.

Jeff
From p at owind.com  Thu Aug  2 09:46:06 2007
From: p at owind.com (Paveo Chen)
Date: Thu Aug  2 17:46:39 2007
Subject: [wp-hackers] Varnish and WordPress
References: <200708021706.11299.hovenko@linpro.no>
Message-ID: <200708021746048591431@owind.com>

Is there any one using Varnish HTTP accelerator for WordPress site? 

I try it with the default vcl.conf, it's working and make site faster, but it has some problems, for example,
generate blank page sometimes, images load incorrectly, page can't update(like post comments)...

Can someone give me a nice Varnish's configuration file for WordPress?

The Bests,	
		 
Paveo Chen
2007-08-02

From supercanadian at gmail.com  Thu Aug  2 17:50:18 2007
From: supercanadian at gmail.com (Charles Iliya Krempeaux)
Date: Thu Aug  2 17:50:24 2007
Subject: [wp-hackers] Varnish and WordPress
In-Reply-To: <200708021746048591431@owind.com>
References: <200708021706.11299.hovenko@linpro.no>
	<200708021746048591431@owind.com>
Message-ID: <84ce626f0708021050u43395908mc8a2d7bfbaaef77f@mail.gmail.com>

Hello,

I haven't used Varnish... but I have used eAccelerator
<http://eaccelerator.net/>... and that works fine with Wordpress


See ya

On 8/2/07, Paveo Chen <p@owind.com> wrote:
> Is there any one using Varnish HTTP accelerator for WordPress site?
>
> I try it with the default vcl.conf, it's working and make site faster, but it has some problems, for example,
> generate blank page sometimes, images load incorrectly, page can't update(like post comments)...
>
> Can someone give me a nice Varnish's configuration file for WordPress?



-- 
    Charles Iliya Krempeaux, B.Sc. <http://ChangeLog.ca/>


                 Vlog Razor... Vlogging News
                    http://vlograzor.com/
From ag.ml2007 at zirona.com  Thu Aug  2 18:26:25 2007
From: ag.ml2007 at zirona.com (Alex =?ISO-8859-1?Q?G=FCnsche?=)
Date: Thu Aug  2 18:26:34 2007
Subject: [wp-hackers] canary mismatch on efree() - heap overflow detected
In-Reply-To: <200708021706.11299.hovenko@linpro.no>
References: <200708021706.11299.hovenko@linpro.no>
Message-ID: <1186079185.12254.52.camel@localhost>

On Thu, 2007-08-02 at 17:06 +0200, Knut-Olav Hoven wrote:
> I get the following in my Apache error log.
> 
> Aug  2 16:28:20 beta suhosin[49368]: ALERT - canary mismatch on efree() - heap 
> overflow detected (attacker '127.0.0.1', 
> file '/some/dir/wordpress/wp-includes/kses.php', line 518)

As far as I know, you can/must tweak Suhoshin to only trigger on
relevant errors. By default, it has very many false positives. There
should be a config file where you can disable the error triggering for
this specific issue.


Alex


-- 
Alex G?nsche, Zirona OpenSource-Consulting
http://www.zirona.com/ | Hilfe f?r das HQ AC: http://www.prohq.de
PubKey for this address: http://www.zirona.com/misc/ag.ml2007.asc

From daya at meyshan.com  Thu Aug  2 18:34:14 2007
From: daya at meyshan.com (dayaparan ponnambalam)
Date: Thu Aug  2 18:34:19 2007
Subject: [wp-hackers] Mashup plugin
Message-ID: <e50d103b0708021134p137c1caehfa85c0981b3df022@mail.gmail.com>

Dear Wordpress users,

Does anyone want, me to convert the plugin i have used here
http://www.spicypipes.com, such as the travel plugin, share plugin where i
have used ubber and amazon s3, slideshow plugin etc Please check the site
and let me know, so that, i can release the plugin regards daya
From VOGELAP at UCMAIL.UC.EDU  Thu Aug  2 18:54:24 2007
From: VOGELAP at UCMAIL.UC.EDU (Vogel, Andrew (vogelap))
Date: Thu Aug  2 18:54:30 2007
Subject: [wp-hackers] Mashup plugin
In-Reply-To: <e50d103b0708021134p137c1caehfa85c0981b3df022@mail.gmail.com>
References: <e50d103b0708021134p137c1caehfa85c0981b3df022@mail.gmail.com>
Message-ID: <E7340445E0595A418B2F8DE0AE480E20149D9D18@ucmail6.ad.uc.edu>

Please release it!

-drew vogel
www.drewvogel.com

-----Original Message-----
From: wp-hackers-bounces@lists.automattic.com
[mailto:wp-hackers-bounces@lists.automattic.com] On Behalf Of dayaparan
ponnambalam
Sent: Thursday, August 02, 2007 2:34 PM
To: wp-hackers@lists.automattic.com
Subject: [wp-hackers] Mashup plugin

Dear Wordpress users,

Does anyone want, me to convert the plugin i have used here
http://www.spicypipes.com, such as the travel plugin, share plugin where
i
have used ubber and amazon s3, slideshow plugin etc Please check the
site
and let me know, so that, i can release the plugin regards daya
_______________________________________________
wp-hackers mailing list
wp-hackers@lists.automattic.com
http://lists.automattic.com/mailman/listinfo/wp-hackers
From p at owind.com  Thu Aug  2 11:05:33 2007
From: p at owind.com (Paveo Chen)
Date: Thu Aug  2 19:06:09 2007
Subject: [wp-hackers] Varnish and WordPress
References: <200708021706.11299.hovenko@linpro.no>,
	<200708021746048591431@owind.com>,
	<84ce626f0708021050u43395908mc8a2d7bfbaaef77f@mail.gmail.com>
Message-ID: <200708021905319210412@owind.com>

>I haven't used Varnish... but I have used eAccelerator
><http://eaccelerator.net/>... and that works fine with Wordpress

Varnish like Squid and eAccelerator like APC,
that's not the same :)

The Bests,	
		 
Paveo Chen
2007-08-02

From hovenko at linpro.no  Thu Aug  2 19:16:16 2007
From: hovenko at linpro.no (Knut-Olav Hoven)
Date: Thu Aug  2 19:16:29 2007
Subject: [wp-hackers] Varnish and WordPress
In-Reply-To: <200708021746048591431@owind.com>
References: <200708021706.11299.hovenko@linpro.no>
	<200708021746048591431@owind.com>
Message-ID: <200708022116.23172.hovenko@linpro.no>

On Thursday 02 August 2007 11:46:06 Paveo Chen wrote:
> Is there any one using Varnish HTTP accelerator for WordPress site?

Yes.

I use Varnish 1.0.4 in front of a highly customized WordPress site (lots of 
plugins, trying to keep the WordPress core mostly unchanged).

>
> I try it with the default vcl.conf, it's working and make site faster, but
> it has some problems, for example, generate blank page sometimes, images
> load incorrectly, page can't update(like post comments)...

I have no such problems.

It even works perfect to display different frontpages based on cookies.

>
> Can someone give me a nice Varnish's configuration file for WordPress?

I use an empty configuration

>
> The Bests,
>
> Paveo Chen
> 2007-08-02
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers



-- 
Knut-Olav Hoven
Systemutvikler               mob: +47 986 71 700
Linpro AS                    http://www.linpro.no/
From apokalyptik at apokalyptik.com  Thu Aug  2 19:25:35 2007
From: apokalyptik at apokalyptik.com (Demitrious S. Kelly)
Date: Thu Aug  2 19:25:37 2007
Subject: [wp-hackers] Varnish and WordPress
In-Reply-To: <200708021905319210412@owind.com>
References: <200708021706.11299.hovenko@linpro.no>,
	<200708021746048591431@owind.com>,
	<84ce626f0708021050u43395908mc8a2d7bfbaaef77f@mail.gmail.com>
	<200708021905319210412@owind.com>
Message-ID: <46B22FAF.1020308@apokalyptik.com>

To the best of my knowledge varnish does not work as a content
accelerator with wordpress. Because of the flow of information through
wordpress blogs (last-in-first-out) the entire blog (or at least very
large chunks of it) would need to be invalidated for every
add/edit/delete action. Because of the mutable URI structure of
wordpress it difficult to generate a complete list of URI/URLs that
might have changed because of a given action. This, mixed with the fact
that (afaik) varnish does not allow wild card invalidations, only
specific URI/URL invalidations, makes varnish less than ideal as a
content accelerator for WP. We're working on a project called WPCP which
should alleviate this problem for very large shops for whom wp-cache is
too unruly. For now, wp-cache is still your safest bet.

-Demitrious

Paveo Chen wrote:
> Varnish like Squid and eAccelerator like APC,
> that's not the same :)
>
>   
From apokalyptik at apokalyptik.com  Thu Aug  2 19:29:35 2007
From: apokalyptik at apokalyptik.com (Demitrious S. Kelly)
Date: Thu Aug  2 19:29:39 2007
Subject: [wp-hackers] Varnish and WordPress
In-Reply-To: <200708022116.23172.hovenko@linpro.no>
References: <200708021706.11299.hovenko@linpro.no>	<200708021746048591431@owind.com>
	<200708022116.23172.hovenko@linpro.no>
Message-ID: <46B2309F.1080900@apokalyptik.com>

Interesting, Indeed. I dont know if we ever tried an empty config

Knut-Olav Hoven wrote:
> On Thursday 02 August 2007 11:46:06 Paveo Chen wrote:
>   
>> Is there any one using Varnish HTTP accelerator for WordPress site?
>>     
>
> Yes.
>
> I use Varnish 1.0.4 in front of a highly customized WordPress site (lots of 
> plugins, trying to keep the WordPress core mostly unchanged).
>
>   
>> I try it with the default vcl.conf, it's working and make site faster, but
>> it has some problems, for example, generate blank page sometimes, images
>> load incorrectly, page can't update(like post comments)...
>>     
>
> I have no such problems.
>
> It even works perfect to display different frontpages based on cookies.
>
>   
>> Can someone give me a nice Varnish's configuration file for WordPress?
>>     
>
> I use an empty configuration
>
>   
>> The Bests,
>>
>> Paveo Chen
>> 2007-08-02
>>
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers@lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>     
>
>
>
>   
From hovenko at linpro.no  Thu Aug  2 19:35:18 2007
From: hovenko at linpro.no (Knut-Olav Hoven)
Date: Thu Aug  2 19:35:27 2007
Subject: [wp-hackers] Varnish and WordPress
In-Reply-To: <46B22FAF.1020308@apokalyptik.com>
References: <200708021706.11299.hovenko@linpro.no>
	<200708021905319210412@owind.com>
	<46B22FAF.1020308@apokalyptik.com>
Message-ID: <200708022135.20514.hovenko@linpro.no>

In my case it is the other way around.

When using WP-Cache we got problems with Internet Explorer when redirecting 
with Javascripts after manipulating cookies. The old cache was given to IE 
users.

That's not the case with Varnish.

We have a lot of javascripts and feeds generated with PHP  that lives happy 
lifes because of Varnish.


For the record, we use memcache and xcache too.


On Thursday 02 August 2007 21:25:35 Demitrious S. Kelly wrote:
> To the best of my knowledge varnish does not work as a content
> accelerator with wordpress. Because of the flow of information through
> wordpress blogs (last-in-first-out) the entire blog (or at least very
> large chunks of it) would need to be invalidated for every
> add/edit/delete action. Because of the mutable URI structure of
> wordpress it difficult to generate a complete list of URI/URLs that
> might have changed because of a given action. This, mixed with the fact
> that (afaik) varnish does not allow wild card invalidations, only
> specific URI/URL invalidations, makes varnish less than ideal as a
> content accelerator for WP. We're working on a project called WPCP which
> should alleviate this problem for very large shops for whom wp-cache is
> too unruly. For now, wp-cache is still your safest bet.
>
> -Demitrious
>
> Paveo Chen wrote:
> > Varnish like Squid and eAccelerator like APC,
> > that's not the same :)
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers



-- 
Knut-Olav Hoven
Systemutvikler               mob: +47 986 71 700
Linpro AS                    http://www.linpro.no/
From chris.hearn01 at ntlworld.com  Thu Aug  2 19:54:55 2007
From: chris.hearn01 at ntlworld.com (Chris)
Date: Thu Aug  2 19:55:13 2007
Subject: [wp-hackers] Why kses filtered html strips class?  
Message-ID: <46B2368F.9050703@ntlworld.com>

Hi,
I have a modified plugin which allows my "Editor" users to upload and 
add links to pdf files from within tinymce editor - (it inserts an icon 
with a link to the actual pdf file). I have put a class="thumb_icon" 
into the html, so that the link icons can be styled - but kses is 
stripping code out - why? and how to modify so that it doesn't.
I don't really want to allow unfiltered html for the "Editor" capabilities.
The kses.php mentions using my-hacks.php... if this is the way to go, 
what would I put in there?
But I still don't understand why class="xx" is considered nasty and must 
be removed!
thanks
Chris

-- 

    ********************************************************************** 
    Chris Hearn 
    *Tel:* 01625 827589 
    *Mob:* 07768 725141 
    *email:* chris.hearn01@ntlworld.com 
    ********************************************************************** 
    The information transmitted is intended only for the person or entity 
    to which it is addressed and may contain confidential and/or privileged 
    material. Any review, retransmission, dissemination or other use of, 
    or taking of any action in reliance upon, this information by persons 
    or entities other than the intended recipient is prohibited. 
    If you received this in error, please contact the sender and delete the 
    material from any computer. 
    ********************************************************************** 

From jacobsantos at branson.com  Thu Aug  2 20:03:26 2007
From: jacobsantos at branson.com (jacobsantos@branson.com)
Date: Thu Aug  2 20:03:32 2007
Subject: [wp-hackers] Why kses filtered html strips class?
In-Reply-To: <46B2368F.9050703@ntlworld.com>
References: <46B2368F.9050703@ntlworld.com>
Message-ID: <46B2388E.6060105@branson.com>

Why don't you use something like HTML Purifier and overwrite the default 
Kses for editors? HTML Purifier and a WordPress plugin can be found at 
http://htmlpurifier.org .

If it isn't whitelisted, then it is removed. From reading kses.php, from 
what I can gather is that there are two whitelists. One that has major 
permissions, I guess for Administrators and one that is a more 
restrictive version.

Chris wrote:
> Hi,
> I have a modified plugin which allows my "Editor" users to upload and 
> add links to pdf files from within tinymce editor - (it inserts an 
> icon with a link to the actual pdf file). I have put a 
> class="thumb_icon" into the html, so that the link icons can be styled 
> - but kses is stripping code out - why? and how to modify so that it 
> doesn't.
> I don't really want to allow unfiltered html for the "Editor" 
> capabilities.
> The kses.php mentions using my-hacks.php... if this is the way to go, 
> what would I put in there?
> But I still don't understand why class="xx" is considered nasty and 
> must be removed!
> thanks
> Chris
>
From p at owind.com  Thu Aug  2 12:20:06 2007
From: p at owind.com (Paveo Chen)
Date: Thu Aug  2 20:20:40 2007
Subject: [wp-hackers] Varnish and WordPress
References: <200708021706.11299.hovenko@linpro.no>,
	<200708021746048591431@owind.com>,
	<200708022116.23172.hovenko@linpro.no>,
	<46B2309F.1080900@apokalyptik.com>
Message-ID: <200708022020039845935@owind.com>

Thanks for all your help. The empty conf file works better for WordPress :)

BTW, I'm using WP-cache too. 

>=== 2007-08-03 03:29:45 Demitrious S. Kelly you wrote "Re: [wp-hackers] Varnish and WordPress" ===
>Interesting, Indeed. I dont know if we ever tried an empty config
>


The Bests,	
		 
Paveo Chen
2007-08-02

From joseph at randomnetworks.com  Thu Aug  2 20:32:19 2007
From: joseph at randomnetworks.com (Joseph Scott)
Date: Thu Aug  2 20:32:36 2007
Subject: [wp-hackers] Varnish and WordPress
In-Reply-To: <46B22FAF.1020308@apokalyptik.com>
References: <200708021706.11299.hovenko@linpro.no>,
	<200708021746048591431@owind.com>,
	<84ce626f0708021050u43395908mc8a2d7bfbaaef77f@mail.gmail.com>
	<200708021905319210412@owind.com>
	<46B22FAF.1020308@apokalyptik.com>
Message-ID: <CFA2CD95-DFE7-4B3A-BDB7-BB091DDEB9F3@randomnetworks.com>


On Aug 2, 2007, at 1:25 PM, Demitrious S. Kelly wrote:

> To the best of my knowledge varnish does not work as a content
> accelerator with wordpress. Because of the flow of information through
> wordpress blogs (last-in-first-out) the entire blog (or at least very
> large chunks of it) would need to be invalidated for every
> add/edit/delete action. Because of the mutable URI structure of
> wordpress it difficult to generate a complete list of URI/URLs that
> might have changed because of a given action. This, mixed with the  
> fact
> that (afaik) varnish does not allow wild card invalidations, only
> specific URI/URL invalidations, makes varnish less than ideal as a
> content accelerator for WP. We're working on a project called WPCP  
> which
> should alleviate this problem for very large shops for whom wp- 
> cache is
> too unruly. For now, wp-cache is still your safest bet.


Purging (invalidation) is one of the nice features of Varnish.  The  
FAQ (http://varnish.projects.linpro.no/wiki/FAQ) shows how to purge  
using the command line tool and via HTTP.  They use regexs so you can  
purge as much or as little of the cache as you want.


--
Joseph Scott
http://joseph.randomnetworks.com/


From apokalyptik at apokalyptik.com  Thu Aug  2 20:51:12 2007
From: apokalyptik at apokalyptik.com (Demitrious S. Kelly)
Date: Thu Aug  2 20:51:15 2007
Subject: [wp-hackers] Varnish and WordPress
In-Reply-To: <CFA2CD95-DFE7-4B3A-BDB7-BB091DDEB9F3@randomnetworks.com>
References: <200708021706.11299.hovenko@linpro.no>,
	<200708021746048591431@owind.com>,
	<84ce626f0708021050u43395908mc8a2d7bfbaaef77f@mail.gmail.com>	<200708021905319210412@owind.com>	<46B22FAF.1020308@apokalyptik.com>
	<CFA2CD95-DFE7-4B3A-BDB7-BB091DDEB9F3@randomnetworks.com>
Message-ID: <46B243C0.9090808@apokalyptik.com>

yes, but there are some gotchas

A) you can only do regex invalidation through the command line client, 
which is not so useful if you are running varnish on a seperate server 
from your wordpress install. 

B) invalidations through VCL are one for one, .* does not work this way

C) varnish cannot purge just for a specific host.  It's all hosts or 
nothing.

D) in our tests we found the telnet interface was... less than reliable.

So for large sites with scaled needs varnish is less attractive than it 
could be.

Joseph Scott wrote:
>
> On Aug 2, 2007, at 1:25 PM, Demitrious S. Kelly wrote:
>
>> To the best of my knowledge varnish does not work as a content
>> accelerator with wordpress. Because of the flow of information through
>> wordpress blogs (last-in-first-out) the entire blog (or at least very
>> large chunks of it) would need to be invalidated for every
>> add/edit/delete action. Because of the mutable URI structure of
>> wordpress it difficult to generate a complete list of URI/URLs that
>> might have changed because of a given action. This, mixed with the fact
>> that (afaik) varnish does not allow wild card invalidations, only
>> specific URI/URL invalidations, makes varnish less than ideal as a
>> content accelerator for WP. We're working on a project called WPCP which
>> should alleviate this problem for very large shops for whom wp-cache is
>> too unruly. For now, wp-cache is still your safest bet.
>
>
> Purging (invalidation) is one of the nice features of Varnish.  The 
> FAQ (http://varnish.projects.linpro.no/wiki/FAQ) shows how to purge 
> using the command line tool and via HTTP.  They use regexs so you can 
> purge as much or as little of the cache as you want.
>
>
> -- 
> Joseph Scott
> http://joseph.randomnetworks.com/
>
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
From m at marcosmedia.com  Thu Aug  2 21:05:12 2007
From: m at marcosmedia.com (Marcos Sader | marcosmedia)
Date: Thu Aug  2 21:05:20 2007
Subject: [wp-hackers] Mashup plugin
In-Reply-To: <E7340445E0595A418B2F8DE0AE480E20149D9D18@ucmail6.ad.uc.edu>
References: <e50d103b0708021134p137c1caehfa85c0981b3df022@mail.gmail.com>
	<E7340445E0595A418B2F8DE0AE480E20149D9D18@ucmail6.ad.uc.edu>
Message-ID: <8ff7155b0708021405i7275f4f8n6a1407fb74636b15@mail.gmail.com>

+1 for the S3 one.

On 8/2/07, Vogel, Andrew (vogelap) <VOGELAP@ucmail.uc.edu> wrote:
>
> Please release it!
>
> -drew vogel
> www.drewvogel.com
>
> -----Original Message-----
> From: wp-hackers-bounces@lists.automattic.com
> [mailto:wp-hackers-bounces@lists.automattic.com] On Behalf Of dayaparan
> ponnambalam
> Sent: Thursday, August 02, 2007 2:34 PM
> To: wp-hackers@lists.automattic.com
> Subject: [wp-hackers] Mashup plugin
>
> Dear Wordpress users,
>
> Does anyone want, me to convert the plugin i have used here
> http://www.spicypipes.com, such as the travel plugin, share plugin where
> i
> have used ubber and amazon s3, slideshow plugin etc Please check the
> site
> and let me know, so that, i can release the plugin regards daya
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>



-- 
Marcos Sader
m@marcosmedia.com
http://defmay.com | http://marcosmedia.com
From joseph at randomnetworks.com  Thu Aug  2 20:45:03 2007
From: joseph at randomnetworks.com (Joseph Scott)
Date: Thu Aug  2 21:09:51 2007
Subject: [wp-hackers] Varnish and WordPress
In-Reply-To: <CFA2CD95-DFE7-4B3A-BDB7-BB091DDEB9F3@randomnetworks.com>
References: <200708021706.11299.hovenko@linpro.no>,
	<200708021746048591431@owind.com>,
	<84ce626f0708021050u43395908mc8a2d7bfbaaef77f@mail.gmail.com>
	<200708021905319210412@owind.com>
	<46B22FAF.1020308@apokalyptik.com>
	<CFA2CD95-DFE7-4B3A-BDB7-BB091DDEB9F3@randomnetworks.com>
Message-ID: <E3867757-57A9-4236-8899-1BC7B04ACDBE@randomnetworks.com>


On Aug 2, 2007, at 2:32 PM, Joseph Scott wrote:

> On Aug 2, 2007, at 1:25 PM, Demitrious S. Kelly wrote:
>
>> To the best of my knowledge varnish does not work as a content
>> accelerator with wordpress. Because of the flow of information  
>> through
>> wordpress blogs (last-in-first-out) the entire blog (or at least very
>> large chunks of it) would need to be invalidated for every
>> add/edit/delete action. Because of the mutable URI structure of
>> wordpress it difficult to generate a complete list of URI/URLs that
>> might have changed because of a given action. This, mixed with the  
>> fact
>> that (afaik) varnish does not allow wild card invalidations, only
>> specific URI/URL invalidations, makes varnish less than ideal as a
>> content accelerator for WP. We're working on a project called WPCP  
>> which
>> should alleviate this problem for very large shops for whom wp- 
>> cache is
>> too unruly. For now, wp-cache is still your safest bet.
>
>
> Purging (invalidation) is one of the nice features of Varnish.  The  
> FAQ (http://varnish.projects.linpro.no/wiki/FAQ) shows how to purge  
> using the command line tool and via HTTP.  They use regexs so you  
> can purge as much or as little of the cache as you want.

As Demitrious is sure to mention in a minute, the wild card  
invalidation doesn't currently work via HTTP.

--
Joseph Scott
http://joseph.randomnetworks.com/


From chris.hearn01 at ntlworld.com  Thu Aug  2 23:36:18 2007
From: chris.hearn01 at ntlworld.com (Chris)
Date: Fri Aug  3 00:11:24 2007
Subject: [wp-hackers] Why kses filtered html strips class?
In-Reply-To: <46B2388E.6060105@branson.com>
References: <46B2368F.9050703@ntlworld.com> <46B2388E.6060105@branson.com>
Message-ID: <46B26A72.4090602@ntlworld.com>

Jacob, thanks for the link - have downloaded it and that does solve the 
problem - just _another plugin!
Still dont understand why WP whacks it tho!
Chris



jacobsantos@branson.com wrote:
> Why don't you use something like HTML Purifier and overwrite the 
> default Kses for editors? HTML Purifier and a WordPress plugin can be 
> found at http://htmlpurifier.org .
>
> If it isn't whitelisted, then it is removed. From reading kses.php, 
> from what I can gather is that there are two whitelists. One that has 
> major permissions, I guess for Administrators and one that is a more 
> restrictive version.
>
> Chris wrote:
>> Hi,
>> I have a modified plugin which allows my "Editor" users to upload and 
>> add links to pdf files from within tinymce editor - (it inserts an 
>> icon with a link to the actual pdf file). I have put a 
>> class="thumb_icon" into the html, so that the link icons can be 
>> styled - but kses is stripping code out - why? and how to modify so 
>> that it doesn't.
>> I don't really want to allow unfiltered html for the "Editor" 
>> capabilities.
>> The kses.php mentions using my-hacks.php... if this is the way to go, 
>> what would I put in there?
>> But I still don't understand why class="xx" is considered nasty and 
>> must be removed!
>> thanks
>> Chris
>>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
From sam at rephrase.net  Fri Aug  3 06:50:25 2007
From: sam at rephrase.net (Sam Angove)
Date: Fri Aug  3 06:50:36 2007
Subject: [wp-hackers] Unit Testing, Yet Another Discussion
In-Reply-To: <46B1ED08.8010003@branson.com>
References: <46B0D0DE.4040702@branson.com>
	<aa74b1910708020159x490042fam7809e3fef1f37799@mail.gmail.com>
	<46B1ED08.8010003@branson.com>
Message-ID: <aa74b1910708022350s1316e845n3313728a583e4a54@mail.gmail.com>

On 8/3/07, Jacob Santos <jacobsantos@branson.com> wrote:
>
> If you start out with the most difficult, then yeah, it will be depressing and
> the more depressing something is, the easier it is to give up.
> Preventing regressions in return values, is my main concern and
> something that should be prevented by unit testing, both the easy and
> more difficult functions (which are more likely to be updated).

I don't want to give the wrong impression: I really, really want to
see automated tests for WordPress, and I'm glad to see someone doing
it.

It's not just a matter of difficulty, though. Proper unit-testing
means that units are tested in isolation, with mock objects etc.
substituting for other components.

The problem with this approach in WordPress is that it uses mostly
functions, not classes. If `foo()` and `bar()` are in the same file,
and `foo()` calls `bar()`, you can't use a dummy version of `bar()`.
If `bar()` calls `baz()` and ten of its closest friends, you can't use
dummy versions of any of them. Or, rather, you can, but you end up
with a harness that's ten times more complicated than WordPress is.

It's difficult, *and* it reduces agility, *and* it increases
maintenance costs -- the tradeoff isn't worth it.

The alternative is to test the functions as a group, which is really
closer to functional testing... It should still catch (some?)
regressions, and having stable, tested interfaces would make it safer
to refactor "difficult" functions into a form more amenable to smaller
units. I gave up on *that* because the only way I could see to do it
properly required more up-front work building the harness than my
limited interest allowed. YMM(hopefully!)V.


> If enough people
> get started then it will be easier for others to add, modify and improve
> upon existing tests. [...]
> I'll be back with any results and post all unit tests that I complete.
> At least in the future there will be something.

If you set up an open repository somewhere (Google Code?), I'm happy
to pitch in -- at the very least I can convert my existing formatting
tests to whatever framework you're using.
From hovenko at linpro.no  Fri Aug  3 08:42:06 2007
From: hovenko at linpro.no (Knut-Olav Hoven)
Date: Fri Aug  3 08:42:26 2007
Subject: [wp-hackers] canary mismatch on efree() - heap overflow detected
In-Reply-To: <1186079185.12254.52.camel@localhost>
References: <200708021706.11299.hovenko@linpro.no>
	<1186079185.12254.52.camel@localhost>
Message-ID: <200708031042.08624.hovenko@linpro.no>

On Thursday 02 August 2007 20:26:25 Alex G?nsche wrote:
> On Thu, 2007-08-02 at 17:06 +0200, Knut-Olav Hoven wrote:
> > I get the following in my Apache error log.
> >
> > Aug  2 16:28:20 beta suhosin[49368]: ALERT - canary mismatch on efree() -
> > heap overflow detected (attacker '127.0.0.1',
> > file '/some/dir/wordpress/wp-includes/kses.php', line 518)
>
> As far as I know, you can/must tweak Suhoshin to only trigger on
> relevant errors. By default, it has very many false positives. There
> should be a config file where you can disable the error triggering for
> this specific issue.

I use only the Suhosin patch... According to this page 
(http://www.hardened-php.net/suhosin/configuration.html) the patch will only 
log the events...

Maybe PHP just crashes then, not because of Suhosin, but because of something 
else...


I got a tip to modify the kses.php file to make xcache generate new opcodes 
for it, but that did not solve the problem either.

It is the call to function "wp_kses" that triggers the error. Don't know what 
inside that function that makes it fail.

>
>
> Alex



-- 
Knut-Olav Hoven
Systemutvikler               mob: +47 986 71 700
Linpro AS                    http://www.linpro.no/
From ckunte at gmail.com  Fri Aug  3 10:10:50 2007
From: ckunte at gmail.com (Chetan Kunte)
Date: Fri Aug  3 10:10:56 2007
Subject: [wp-hackers] Personalizing db down WordPress errors
Message-ID: <74b84aa30708030310u59160ae0tfb76915aa409ca69@mail.gmail.com>

I came across this yesterday:

http://bitworking.org/news/224/One-of-these-things-is-not-like-the-other

On self-hosted sites, this is a familiar sight, and it is a bit
obvious to site owners. But not so for visitors, particularly when
they see a WordPress error message on screen [as seen in the link
above].

Personalizing this "database-down" error message using the active
Wordpress theme would be a better idea [and should be in the core].
What do you'all think?
-- 
Chetan, ckunte.com
From peter.westwood at ftwr.co.uk  Fri Aug  3 10:17:20 2007
From: peter.westwood at ftwr.co.uk (Peter Westwood)
Date: Fri Aug  3 10:17:19 2007
Subject: [wp-hackers] Personalizing db down WordPress errors
In-Reply-To: <74b84aa30708030310u59160ae0tfb76915aa409ca69@mail.gmail.com>
References: <74b84aa30708030310u59160ae0tfb76915aa409ca69@mail.gmail.com>
Message-ID: <46B300B0.6000503@ftwr.co.uk>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Chetan Kunte wrote:
> I came across this yesterday:
> 
> http://bitworking.org/news/224/One-of-these-things-is-not-like-the-other
> 
> On self-hosted sites, this is a familiar sight, and it is a bit
> obvious to site owners. But not so for visitors, particularly when
> they see a WordPress error message on screen [as seen in the link
> above].
> 
> Personalizing this "database-down" error message using the active
> Wordpress theme would be a better idea [and should be in the core].
> What do you'all think?

If the db is down then you don't know what the active theme is ( or for
that matter any other of the options values).

The best that can be done is providing a single plugin-in mechanism for
replacing the page e.g. is a file in wp-content called db-error.php
exists then include that rather than use the normal error output handler.

westi
- --
Peter Westwood
http://blog.ftwr.co.uk
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.2 (MingW32)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iD8DBQFGswCwVPRdzag0AcURAlS3AKDOC4tOsCdscZwDhWYH+LJO5YVgrwCgucl2
QgzM1zZ47BjETSJ06IrEJdM=
=Lo0c
-----END PGP SIGNATURE-----
From david.schoonover at gmail.com  Fri Aug  3 12:48:15 2007
From: david.schoonover at gmail.com (David Schoonover)
Date: Fri Aug  3 12:48:25 2007
Subject: [wp-hackers] Re: [wp-trac] [WordPress Trac] #4694: Comments RSS2
	needs a hook to add extra channel data
In-Reply-To: <049.040c1a82b8cfc2e0fd94a961671fc52b@lists.automattic.com>
References: <049.040c1a82b8cfc2e0fd94a961671fc52b@lists.automattic.com>
Message-ID: <15F59953-0C16-4EEC-9C3C-90D55CB7A3D3@gmail.com>

+1 great idea.

--
David Alan Schoonover
571.265.3138


On Aug 2, 2007, at 5:36 p, WordPress Trac wrote:

> #4694: Comments RSS2 needs a hook to add extra channel data
> ---------------------------- 
> +-----------------------------------------------
>  Reporter:  joostdevalk     |       Owner:  anonymous
>      Type:  enhancement     |      Status:  new
>  Priority:  normal          |   Milestone:  2.3 (trunk)
> Component:  Administration  |     Version:
>  Severity:  normal          |    Keywords:  has-patch needs-testing
> ---------------------------- 
> +-----------------------------------------------
>  To be able to add extra channel data, the RSS2 comments feed needs  
> a hook.
>
> -- 
> Ticket URL: <http://trac.wordpress.org/ticket/4694>
> WordPress Trac <http://trac.wordpress.org/>
> WordPress blogging  
> software_______________________________________________
> wp-trac mailing list
> wp-trac@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-trac

From jacobsantos at branson.com  Fri Aug  3 13:55:56 2007
From: jacobsantos at branson.com (jacobsantos@branson.com)
Date: Fri Aug  3 13:56:02 2007
Subject: [wp-hackers] Unit Testing, Yet Another Discussion
In-Reply-To: <aa74b1910708022350s1316e845n3313728a583e4a54@mail.gmail.com>
References: <46B0D0DE.4040702@branson.com>	<aa74b1910708020159x490042fam7809e3fef1f37799@mail.gmail.com>	<46B1ED08.8010003@branson.com>
	<aa74b1910708022350s1316e845n3313728a583e4a54@mail.gmail.com>
Message-ID: <46B333EC.9040104@branson.com>

Thanks,

I believe I will place the unit tests up on a subversion repository, if 
you are interested. However, it is highly likely that it won't be 
Google. It isn't that I don't like Google Code, well actually it is. I 
just don't like how the interface works. I'll set it up this weekend and 
finish up some more unit tests. My direction now will be to unit test 
the simple functions that have no or minimal dependencies on other 
WordPress functions first (see below). And complete one or two 
acceptance tests (will contact the other guy and see if I could use his 
and convert it to PHPUnit with Selenium).

To be honest, I have no experience with Mock Objects and the concept 
does not make sense to me. Dealing with live data when testing seems to 
be the most logical approach to testing bugs and regressions. I can 
create the perfect world and fudge results using Mock Objects, but once 
I subject the code to live environment, I doubt the results would be the 
same in 100% of test cases. While it might be more accurate and true to 
the Unit Testing and TDD paradigm, I'm not concern with that at the 
moment. If I had to be true to it, then yes, I would give up just the same.

I did however, create a mock function and object for wpdb, but only 
until I include wpdb.php and then the mock function will be useless. The 
way I have PHPUnit set up now, I'm running off of an AllTests that will 
include acceptance tests and includes all of the unit tests.

You are very helpful. Well, I'm doing what I usually do with classes. 
Perhaps, I'm not doing the unit testing right when I'm doing it with 
classes. The way I'm isolating the functions is by testing the functions 
that the other functions calls. If the function is unit tested and it is 
called from within another function, you can make the assumption that if 
the first function passes and the second does not, then the problem is 
associated with the second function (barring that the second function 
does not use any other function from inside of it).

Another way to isolate that I've done, is to copy the contents of the 
function or method and place inside the testing method and call 
assertions. More for TDD development, but I've found it is useful when 
you don't know the work flow and need to find where the problem is.

Really, the reason I'm doing this is to learn more about TDD, unit 
testing, functional testing and acceptance testing. The second reason, 
is that even if you happened to refactor what is inside the functions to 
classes, you will still need to maintain backwards compatibility. If you 
have unit tests or functional tests for the functions, then you can 
maintain that what you are doing is not going to drastically affect 
backwards compatibility. Hopefully, if you can prove that nothing 
breaks, then you should be able to convince the core developers that the 
class method should and can be used alongside the functions.

I do not know what your goals were (are), but mine is basically 
rewriting WordPress to be completely OO and only use PHP 5.2+. My 
current classes and the WordPress classes are unit tested in that 
system, (however I'm not finished with the Plugin Model and I've not 
concerned myself with the cache class).

Jacob Santos

Sam Angove wrote:
> On 8/3/07, Jacob Santos <jacobsantos@branson.com> wrote:
>   
>> If you start out with the most difficult, then yeah, it will be depressing and
>> the more depressing something is, the easier it is to give up.
>> Preventing regressions in return values, is my main concern and
>> something that should be prevented by unit testing, both the easy and
>> more difficult functions (which are more likely to be updated).
>>     
>
> I don't want to give the wrong impression: I really, really want to
> see automated tests for WordPress, and I'm glad to see someone doing
> it.
>
> It's not just a matter of difficulty, though. Proper unit-testing
> means that units are tested in isolation, with mock objects etc.
> substituting for other components.
>
> The problem with this approach in WordPress is that it uses mostly
> functions, not classes. If `foo()` and `bar()` are in the same file,
> and `foo()` calls `bar()`, you can't use a dummy version of `bar()`.
> If `bar()` calls `baz()` and ten of its closest friends, you can't use
> dummy versions of any of them. Or, rather, you can, but you end up
> with a harness that's ten times more complicated than WordPress is.
>
> It's difficult, *and* it reduces agility, *and* it increases
> maintenance costs -- the tradeoff isn't worth it.
>
> The alternative is to test the functions as a group, which is really
> closer to functional testing... It should still catch (some?)
> regressions, and having stable, tested interfaces would make it safer
> to refactor "difficult" functions into a form more amenable to smaller
> units. I gave up on *that* because the only way I could see to do it
> properly required more up-front work building the harness than my
> limited interest allowed. YMM(hopefully!)V.
>
>
>   
>> If enough people
>> get started then it will be easier for others to add, modify and improve
>> upon existing tests. [...]
>> I'll be back with any results and post all unit tests that I complete.
>> At least in the future there will be something.
>>     
>
> If you set up an open repository somewhere (Google Code?), I'm happy
> to pitch in -- at the very least I can convert my existing formatting
> tests to whatever framework you're using.
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

From paul at codehooligans.com  Fri Aug  3 14:31:01 2007
From: paul at codehooligans.com (Paul Menard)
Date: Fri Aug  3 14:28:57 2007
Subject: [wp-hackers] Personalizing db down WordPress errors
In-Reply-To: <46B300B0.6000503@ftwr.co.uk>
References: <74b84aa30708030310u59160ae0tfb76915aa409ca69@mail.gmail.com>
	<46B300B0.6000503@ftwr.co.uk>
Message-ID: <5F5C77D8-7C01-43B3-AE56-55CE63B2913B@codehooligans.com>


On Aug 3, 2007, at 5:17 AM, Peter Westwood wrote:

> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
>
> Chetan Kunte wrote:
>> Personalizing this "database-down" error message using the active
>> Wordpress theme would be a better idea [and should be in the core].
>> What do you'all think?
>
> If the db is down then you don't know what the active theme is ( or  
> for
> that matter any other of the options values).
>
> The best that can be done is providing a single plugin-in mechanism  
> for
> replacing the page e.g. is a file in wp-content called db-error.php
> exists then include that rather than use the normal error output  
> handler.

For what it's worth I found these two articles last summer. They  
offer instructions (for the then version of WP) for hacking your WP  
code to display friendly DB error messages. We use this on some of  
the higher traffic site when requested by the client. It's some  
pretty simple steps. Just create a static file via view source from a  
browser and save to a file.

http://5thirtyone.com/archives/408
http://allforces.com/2006/06/18/custom-wordpress-errors/

Westi, would like to know more about using the db-error.php file you  
mentioned. I've checked the code and don't see referenced to this  
file in any of the WP core.

Paul
From peter.westwood at ftwr.co.uk  Fri Aug  3 14:40:25 2007
From: peter.westwood at ftwr.co.uk (Peter Westwood)
Date: Fri Aug  3 14:40:26 2007
Subject: [wp-hackers] Personalizing db down WordPress errors
In-Reply-To: <5F5C77D8-7C01-43B3-AE56-55CE63B2913B@codehooligans.com>
References: <74b84aa30708030310u59160ae0tfb76915aa409ca69@mail.gmail.com>	<46B300B0.6000503@ftwr.co.uk>
	<5F5C77D8-7C01-43B3-AE56-55CE63B2913B@codehooligans.com>
Message-ID: <46B33E59.40308@ftwr.co.uk>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Paul Menard wrote:
> 
> On Aug 3, 2007, at 5:17 AM, Peter Westwood wrote:
> 
>> -----BEGIN PGP SIGNED MESSAGE-----
>> Hash: SHA1
>>
>> Chetan Kunte wrote:
>>> Personalizing this "database-down" error message using the active
>>> Wordpress theme would be a better idea [and should be in the core].
>>> What do you'all think?
>>
>> If the db is down then you don't know what the active theme is ( or for
>> that matter any other of the options values).
>>
>> The best that can be done is providing a single plugin-in mechanism for
>> replacing the page e.g. is a file in wp-content called db-error.php
>> exists then include that rather than use the normal error output handler.
> 
> For what it's worth I found these two articles last summer. They offer
> instructions (for the then version of WP) for hacking your WP code to
> display friendly DB error messages. We use this on some of the higher
> traffic site when requested by the client. It's some pretty simple
> steps. Just create a static file via view source from a browser and save
> to a file.
> 
> http://5thirtyone.com/archives/408
> http://allforces.com/2006/06/18/custom-wordpress-errors/
> 
> Westi, would like to know more about using the db-error.php file you
> mentioned. I've checked the code and don't see referenced to this file
> in any of the WP core.
> 

I guess I wrote my description a bit vague.  It was a description of a
way in which is could be implemented in WP rather than how it works now!

A trac ticket with implementation of something like what I described
would probably make it into the core.  Anything based on current theme
etc wouldn't as the data isn't available.

sorry for the confusion.

westi
- --
Peter Westwood
http://blog.ftwr.co.uk
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.2 (MingW32)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iD8DBQFGsz5ZVPRdzag0AcURAnZ3AKDHXVRlh79Q8MjcbHmFuXjrvfvEswCeMDaa
g0Cs0yY8qgqLJMZB2vhZlaU=
=GaFC
-----END PGP SIGNATURE-----
From otto at ottodestruct.com  Fri Aug  3 17:53:29 2007
From: otto at ottodestruct.com (Otto)
Date: Fri Aug  3 17:53:34 2007
Subject: [wp-hackers] Why kses filtered html strips class?
In-Reply-To: <46B26A72.4090602@ntlworld.com>
References: <46B2368F.9050703@ntlworld.com> <46B2388E.6060105@branson.com>
	<46B26A72.4090602@ntlworld.com>
Message-ID: <161617690708031053q2d7c7399oc4c6136370ba722@mail.gmail.com>

On 8/2/07, Chris <chris.hearn01@ntlworld.com> wrote:
> Still dont understand why WP whacks it tho!

Because class is a security risk. So is style and such. With access to
classes and/or styles, it's possible to absolutely position some text
or other code elsewhere on the page. Perhaps overwriting a login form
or something else, and thus allowing one of your editors to trick
somebody into giving up information. There's other ways to do bad
things with class too, the point is that if they have unfettered
access to class adjustment then they can potentially change your site
in insecure ways.
From dougal at gunters.org  Fri Aug  3 18:39:52 2007
From: dougal at gunters.org (Dougal Campbell)
Date: Fri Aug  3 18:39:59 2007
Subject: [wp-hackers] Personalizing db down WordPress errors
In-Reply-To: <46B300B0.6000503@ftwr.co.uk>
References: <74b84aa30708030310u59160ae0tfb76915aa409ca69@mail.gmail.com>
	<46B300B0.6000503@ftwr.co.uk>
Message-ID: <46B37678.4090808@gunters.org>

Peter Westwood wrote:
> Chetan Kunte wrote:
> > I came across this yesterday:
>
> > http://bitworking.org/news/224/One-of-these-things-is-not-like-the-other
>
> > On self-hosted sites, this is a familiar sight, and it is a bit
> > obvious to site owners. But not so for visitors, particularly when
> > they see a WordPress error message on screen [as seen in the link
> > above].
>
> > Personalizing this "database-down" error message using the active
> > Wordpress theme would be a better idea [and should be in the core].
> > What do you'all think?
>
> If the db is down then you don't know what the active theme is ( or for
> that matter any other of the options values).
>
> The best that can be done is providing a single plugin-in mechanism for
> replacing the page e.g. is a file in wp-content called db-error.php
> exists then include that rather than use the normal error output handler.
>

I had an idea I was going to suggest, but I couldn't actually get it to
work, and it would probably never make it into core anyhow, because of
the dependencies....

The basic idea I had was that a template (or possibly a plugin) could
put a new rewrite rule into the .htaccess file, defining an
ErrorDocument directive for a custom error page.

Problems:

  1) Wouldn't work for sites that don't use Apache and/or mod_rewrite.
  2) In addition, the ErrorDocument directive requires that
"AllowOverride FileInfo" is active, as well. There may be server setups
where this isn't the case, and the user has no control over it.
  3) Requires us to modify WordPress core: In wp-settings.php, we'd have
shift some includes around (need functions.php, classes.php, and
plugin.php to come before the wp-db.php include). In wp-db.php, we need
to modify the bail() function to emit an HTTP 500 status code (which is
why we have to shuffle the includes around). WE SHOULD PROBABLY DO THIS
ANYWAYS. Emitting the correct HTTP status when we encounter this type of
error would be a Good Thing.

And lastly, even when I tried setting all that up, it still wouldn't
work. I'm not sure why -- I verified that Apache was serving a 500
status code, but my custom ErrorDocument was not served to me, I still
got the standard WP error.

Maybe someone with more time to work on it can come up with something
along these lines that works?

-- 
Dougal Campbell <dougal@gunters.org <mailto:dougal@gunters.org>>
http://dougal.gunters.org/ <http://dougal.gunters.org>

From mark.wordpress at txfx.net  Fri Aug  3 18:51:59 2007
From: mark.wordpress at txfx.net (Mark Jaquith)
Date: Fri Aug  3 18:52:23 2007
Subject: [wp-hackers] Personalizing db down WordPress errors
In-Reply-To: <46B300B0.6000503@ftwr.co.uk>
References: <74b84aa30708030310u59160ae0tfb76915aa409ca69@mail.gmail.com>
	<46B300B0.6000503@ftwr.co.uk>
Message-ID: <8BBC3264-B119-4C51-AA8B-54A018DA6731@txfx.net>

Chetan Kunte wrote:

>> On self-hosted sites, this is a familiar sight, and it is a bit
>> obvious to site owners. But not so for visitors, particularly when
>> they see a WordPress error message on screen [as seen in the link
>> above].

Customization is nice (although technically tricky without a DB), but  
what would be even better, and benefit more people, is a better DB  
error page, one that serves visitors as well as administrators.

--
Mark Jaquith
http://markjaquith.com/

Covered Web Services
http://coveredwebservices.com/

WordPress Ninja @ b5media Inc
http://b5media.com/


From chris.hearn01 at ntlworld.com  Fri Aug  3 19:41:40 2007
From: chris.hearn01 at ntlworld.com (Chris)
Date: Fri Aug  3 19:41:58 2007
Subject: [wp-hackers] Why kses filtered html strips class?
In-Reply-To: <161617690708031053q2d7c7399oc4c6136370ba722@mail.gmail.com>
References: <46B2368F.9050703@ntlworld.com>
	<46B2388E.6060105@branson.com>	<46B26A72.4090602@ntlworld.com>
	<161617690708031053q2d7c7399oc4c6136370ba722@mail.gmail.com>
Message-ID: <46B384F4.6020201@ntlworld.com>

Otto,
thanks for the explanation - I guess I will  either use HTML purifier, 
or simply unfiltered HTML access to my editors - who I trust - I want to 
fix this some way, and these 2 options seem the best.
Chris


Otto wrote:
> On 8/2/07, Chris <chris.hearn01@ntlworld.com> wrote:
>   
>> Still dont understand why WP whacks it tho!
>>     
>
> Because class is a security risk. So is style and such. With access to
> classes and/or styles, it's possible to absolutely position some text
> or other code elsewhere on the page. Perhaps overwriting a login form
> or something else, and thus allowing one of your editors to trick
> somebody into giving up information. There's other ways to do bad
> things with class too, the point is that if they have unfettered
> access to class adjustment then they can potentially change your site
> in insecure ways.
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
>   
From dragonwing at dragonu.net  Sun Aug  5 16:36:52 2007
From: dragonwing at dragonu.net (Jacob Santos)
Date: Sun Aug  5 16:37:29 2007
Subject: [wp-hackers] Unit Testing, Yet Another Discussion
In-Reply-To: <aa74b1910708022350s1316e845n3313728a583e4a54@mail.gmail.com>
References: <46B0D0DE.4040702@branson.com>	<aa74b1910708020159x490042fam7809e3fef1f37799@mail.gmail.com>	<46B1ED08.8010003@branson.com>
	<aa74b1910708022350s1316e845n3313728a583e4a54@mail.gmail.com>
Message-ID: <46B5FCA4.4070609@dragonu.net>

Characterizations Tests

"...tests that characterize the actual behavior of a piece of code. In 
other words, they don?t check what the code is supposed to do, as 
specification tests do, but what the code actually and currently does." 
(http://www.artima.com/weblogs/viewpost.jsp?thread=198296)

I would say that it matches WordPress extremely well. Therefore, I 
propose that Unit Testing be developed for the functions that have no 
external module dependencies, an example would be that plugins.php is 
unit tested, but posts.php is not. Acceptance Tests for testing web 
pages and finally Characterizations tests for functions with dependencies.

If completed, regressions and future bugs will be testable, with a 
better chance of not reoccurring.

Jacob Santos

Sam Angove wrote:
> On 8/3/07, Jacob Santos <jacobsantos@branson.com> wrote:
>   
>> If you start out with the most difficult, then yeah, it will be depressing and
>> the more depressing something is, the easier it is to give up.
>> Preventing regressions in return values, is my main concern and
>> something that should be prevented by unit testing, both the easy and
>> more difficult functions (which are more likely to be updated).
>>     
>
> I don't want to give the wrong impression: I really, really want to
> see automated tests for WordPress, and I'm glad to see someone doing
> it.
>
> It's not just a matter of difficulty, though. Proper unit-testing
> means that units are tested in isolation, with mock objects etc.
> substituting for other components.
>
> The problem with this approach in WordPress is that it uses mostly
> functions, not classes. If `foo()` and `bar()` are in the same file,
> and `foo()` calls `bar()`, you can't use a dummy version of `bar()`.
> If `bar()` calls `baz()` and ten of its closest friends, you can't use
> dummy versions of any of them. Or, rather, you can, but you end up
> with a harness that's ten times more complicated than WordPress is.
>
> It's difficult, *and* it reduces agility, *and* it increases
> maintenance costs -- the tradeoff isn't worth it.
>
> The alternative is to test the functions as a group, which is really
> closer to functional testing... It should still catch (some?)
> regressions, and having stable, tested interfaces would make it safer
> to refactor "difficult" functions into a form more amenable to smaller
> units. I gave up on *that* because the only way I could see to do it
> properly required more up-front work building the harness than my
> limited interest allowed. YMM(hopefully!)V.
>
>
>   
>> If enough people
>> get started then it will be easier for others to add, modify and improve
>> upon existing tests. [...]
>> I'll be back with any results and post all unit tests that I complete.
>> At least in the future there will be something.
>>     
>
> If you set up an open repository somewhere (Google Code?), I'm happy
> to pitch in -- at the very least I can convert my existing formatting
> tests to whatever framework you're using.
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>   
From dragonwing at dragonu.net  Tue Aug  7 04:06:54 2007
From: dragonwing at dragonu.net (Jacob Santos)
Date: Tue Aug  7 04:05:01 2007
Subject: [wp-hackers] Thoughts on Trac ticket #3875 patch
Message-ID: <46B7EFDE.4070305@dragonu.net>

    I submitted a patch several days and haven't received any word 
(probably due to the high priority security defects), but has anyone 
confirmed or tested the patch. My unit tests show that everything works 
fine, but I haven't tested any real world plugins.

I would rather keep the _wp_filter_build_unique_id() function, even if 
it is slower than placing the code internally in the add_filter and 
remove_filter functions.
From sam at rephrase.net  Tue Aug  7 05:48:26 2007
From: sam at rephrase.net (Sam Angove)
Date: Tue Aug  7 05:48:31 2007
Subject: [wp-hackers] Unit Testing, Yet Another Discussion
In-Reply-To: <46B333EC.9040104@branson.com>
References: <46B0D0DE.4040702@branson.com>
	<aa74b1910708020159x490042fam7809e3fef1f37799@mail.gmail.com>
	<46B1ED08.8010003@branson.com>
	<aa74b1910708022350s1316e845n3313728a583e4a54@mail.gmail.com>
	<46B333EC.9040104@branson.com>
Message-ID: <aa74b1910708062248n4f1606d8s5903ec266782cb13@mail.gmail.com>

On 8/3/07, jacobsantos@branson.com <jacobsantos@branson.com> wrote:
>
> I do not know what your goals were (are), but mine is basically
> rewriting WordPress to be completely OO and only use PHP 5.2+. My
> current classes and the WordPress classes are unit tested in that
> system, (however I'm not finished with the Plugin Model and I've not
> concerned myself with the cache class).

I'd prefer a PHP 5.2+ WordPress, but it seems unlikely to happen
without a fork [1].

[1]: http://photomatt.net/2007/07/13/on-php/

My interest was/is for a couple of reasons:

 1. It'd really help in pin-pointing problems on other platforms.
Users often have problems (sometimes platform-related) that can be
hard to trace. If the user could be told to "run the WP-Test tool and
report the output", they'd be easier to pinpoint.

 2. Preventing regressions.

 3. Make refactoring safer. The general effect is to speed
development, because small changes are easier and major changes (like
a move to OO PHP 5) are possible.

My frustration was partly because #1 dictates a PHP4-compatible suite
but the best tools (e.g. PHPUnit 3) are PHP5 only. #2 is useful, but
in practice most regressions get caught in the current big bang
testing (which sucks, but still). I was really after #3, but it
started looking like the suite would be so complex that maintaining it
would actually *slow* development. (Or, at least, be enough of a
burden that no-one not already convinced that testing is worthwhile
would willingly adopt it.) I'm really hoping to be proven wrong on
that one.

Anyway, it sounds like you've got things well in hand, so I'll butt
out and let you get on with it. Good luck! :)

> I believe I will place the unit tests up on a subversion repository, if
> you are interested. However, it is highly likely that it won't be
> Google. It isn't that I don't like Google Code, well actually it is. I
> just don't like how the interface works

Anywhere is cool, it's just like you said in your earlier message:
there's been talk about testing, but little in the way of actual
tests. It's nothing but good if there's source code available for
people to try out/add to/build from. :)
From dragonwing at dragonu.net  Tue Aug  7 05:51:04 2007
From: dragonwing at dragonu.net (Jacob Santos)
Date: Tue Aug  7 05:49:10 2007
Subject: [wp-hackers] Clarification of merge_filters?
Message-ID: <46B80848.10001@dragonu.net>

While writing tests for merge_filters, I came across something strange. 
This might belong in wp-testers, but I'm not sure it is a bug or the 
intended result.

Work flow:

merge_filters('tag');

1: Get globals
2: Does $wp_filter['all'] exist?

Yes: merge $wp_filter['all'] to the array of $wp-filter['tag']. (#1).

3: Is $wp_filter[$tag] set? (#2)

Yes:
1: reset($wp_filter['tag'])
2: sort by key using *strnatcasecmp* function (#3)

4: Set $merge_filters['tag'] to true


#1: I suppose it is the intended result because array_merge does not 
preserve keys and everything in $wp_filter['all'] will be inserted at 
the beginning  of $wp_filter['tag'].

$wp_filter['all'] = array(
    4 => array(    // Priority
        'ID1' => array('function' => 'whatever', 'args' => 'whatever')
    ),
    10 => array(    // Priority
        'ID2' => array('function' => 'whatever', 'args' => 'whatever')
    )
);

$wp_filter['tag'] = array(
    1 => array(    // Priority
        'ID3' => array('function' => 'whatever', 'args' => 'whatever')
    ),
    5 => array(    // Priority
        'ID4' => array('function' => 'whatever', 'args' => 'whatever')
    )
);

The result will be:

$wp_filter['tag'] = array(
    0 => array(    // Priority
        'ID1' => array('function' => 'whatever', 'args' => 'whatever')
    ),
    1 => array(    // Priority
        'ID2' => array('function' => 'whatever', 'args' => 'whatever')
    )
    2=> array(    // Priority
        'ID3' => array('function' => 'whatever', 'args' => 'whatever')
    ),
    3 => array(    // Priority
        'ID4' => array('function' => 'whatever', 'args' => 'whatever')
    )
);

I would have assumed the result should have been

$wp_filter['tag'] = array(
    0 => array(    // Priority
        'ID3' => array('function' => 'whatever', 'args' => 'whatever')
    ),
    1 => array(    // Priority
        'ID1' => array('function' => 'whatever', 'args' => 'whatever')
    )
    2=> array(    // Priority
        'ID4' => array('function' => 'whatever', 'args' => 'whatever')
    ),
    3 => array(    // Priority
        'ID2' => array('function' => 'whatever', 'args' => 'whatever')
    )
);

or prefer:

$wp_filter['tag'] = array(
    1 => array(    // Priority
        'ID3' => array('function' => 'whatever', 'args' => 'whatever')
    ),
    4 => array(    // Priority
        'ID1' => array('function' => 'whatever', 'args' => 'whatever')
    )
    5=> array(    // Priority
        'ID4' => array('function' => 'whatever', 'args' => 'whatever')
    ),
    10 => array(    // Priority
        'ID2' => array('function' => 'whatever', 'args' => 'whatever')
    )
);

#2

Even if $wp_filter['tag'] is not added (by add_filter), it is be set if 
$wp_filter['all'] (if it is also set). This from the code and 
apply_filters code, is so that even if the tag doesn't exist (wasn't 
added), but ['all'] is set, it will still get the hooks from ['all'], 
which is expected and correct. However, if $wp_filters['all'] is not set 
and $wp_filters['tag'] is not set, $merge_filters['tag'] is still set to 
true? Why is this?

#3

By all accounts, I would assume all keys would be numbers, unless some 
fool decided to set the priority of 'first' expecting something to come 
of it? That makes for an interesting feature. The documentation states 
that the priority should be number, however support for strings has been 
added.

Has any thought been given to extend such a feature to allow for 'first' 
to be run first and 'last' to run at the absolute last?
From dragonwing at dragonu.net  Tue Aug  7 06:24:01 2007
From: dragonwing at dragonu.net (Jacob Santos)
Date: Tue Aug  7 06:22:07 2007
Subject: [wp-hackers] Unit Testing, Yet Another Discussion
In-Reply-To: <aa74b1910708062248n4f1606d8s5903ec266782cb13@mail.gmail.com>
References: <46B0D0DE.4040702@branson.com>	<aa74b1910708020159x490042fam7809e3fef1f37799@mail.gmail.com>	<46B1ED08.8010003@branson.com>	<aa74b1910708022350s1316e845n3313728a583e4a54@mail.gmail.com>	<46B333EC.9040104@branson.com>
	<aa74b1910708062248n4f1606d8s5903ec266782cb13@mail.gmail.com>
Message-ID: <46B81001.1050505@dragonu.net>

I decided to go with PHPUnit, since it is awesome and supports 
everything I want out of box.

http://svn.dragonu.net/WordPress/UnitTest/ - Subversion Repository for 
WordPress Unit Tests using PHP 5 and PHPUnit 3.1.4+ (I might have to 
move this to google to easily allow others to modify the code, I forgot 
that I have to add users and some people have issues with giving another 
a password). At least you can tell me how bad it sucks.

I do not include PHPUnit, I do have a system to where I can 
automatically get reports based on the unit tests. I also have a 
generated (CRAP) index for all of WordPress Files (root and wp-includes).

The PHP 5.2 branch (not active while working on Unit Tests) is 
elsewhere, since I doubt it would be of any interest. It is up one 
folder in the repository root. I also do not structure it like you would 
normally with trunk, tags, and branches, since the purpose is more 
refine. There is also an external property for getting the trunk of 
WordPress. However, the wp-tests folder is outside of that repository 
and can be commited to without permissions to the Automattic repository. 
If you want a username and password, email me privately (however, I 
think it is also possible, maybe, to create a PHP script that can add 
users).

The Change Risk Analysis and Predictions Index is helpful in finding 
which files are unit testable. The higher the number, the more logic is 
in the file. If such logic is in functions or classes, then it can be 
tested. 
http://www.santosj.name/programming/php-related/php/what-is-your-crap-index/ 
(at the bottom) has the results. It is useful in deciding which files 
can be unit tested, which should be have characterizations tests, and 
which should have acceptance tests (to test the whole of the functionality).

The only files I'll probably never test (directly) is gettext.php and 
streams.php. That reminds me, you will have to patch your wp-includes 
files for the plugin.php tests to pass. I will create patches of the 
files and add them to a new folder. I had to patch plugin.php a lot.

Jacob Santos

Sam Angove wrote:
> On 8/3/07, jacobsantos@branson.com <jacobsantos@branson.com> wrote:
>   
>> I do not know what your goals were (are), but mine is basically
>> rewriting WordPress to be completely OO and only use PHP 5.2+. My
>> current classes and the WordPress classes are unit tested in that
>> system, (however I'm not finished with the Plugin Model and I've not
>> concerned myself with the cache class).
>>     
>
> I'd prefer a PHP 5.2+ WordPress, but it seems unlikely to happen
> without a fork [1].
>
> [1]: http://photomatt.net/2007/07/13/on-php/
>
> My interest was/is for a couple of reasons:
>
>  1. It'd really help in pin-pointing problems on other platforms.
> Users often have problems (sometimes platform-related) that can be
> hard to trace. If the user could be told to "run the WP-Test tool and
> report the output", they'd be easier to pinpoint.
>
>  2. Preventing regressions.
>
>  3. Make refactoring safer. The general effect is to speed
> development, because small changes are easier and major changes (like
> a move to OO PHP 5) are possible.
>
> My frustration was partly because #1 dictates a PHP4-compatible suite
> but the best tools (e.g. PHPUnit 3) are PHP5 only. #2 is useful, but
> in practice most regressions get caught in the current big bang
> testing (which sucks, but still). I was really after #3, but it
> started looking like the suite would be so complex that maintaining it
> would actually *slow* development. (Or, at least, be enough of a
> burden that no-one not already convinced that testing is worthwhile
> would willingly adopt it.) I'm really hoping to be proven wrong on
> that one.
>
> Anyway, it sounds like you've got things well in hand, so I'll butt
> out and let you get on with it. Good luck! :)
>
>   
>> I believe I will place the unit tests up on a subversion repository, if
>> you are interested. However, it is highly likely that it won't be
>> Google. It isn't that I don't like Google Code, well actually it is. I
>> just don't like how the interface works
>>     
>
> Anywhere is cool, it's just like you said in your earlier message:
> there's been talk about testing, but little in the way of actual
> tests. It's nothing but good if there's source code available for
> people to try out/add to/build from. :)
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>   
From chris at clwill.com  Wed Aug  8 16:20:38 2007
From: chris at clwill.com (Chris Williams)
Date: Wed Aug  8 16:20:57 2007
Subject: [wp-hackers] [OT] Resources for Defending Against Blog Attacks
Message-ID: <C2DF3B66.694A%chris@clwill.com>

I am the (moderately experienced) webmaster for three blogs that are being
ruthlessly attacked.  I've Googled and searched the WP support forums but I
feel I need the expertise of the elite company herein.  Please forgive me if
this is ridiculously off-topic here.

The sites I'm responsible for are owned by three women who speak for women
and woman's issues.  They are being besieged by misogynist idiots.  The
jerks moved on from truly sick comment storms to DDoS attacks designed to
chase them from their shared hosts.  That succeeded and I mitigated the
problem by using a dedicated server, judicious performance tuning (light
theme, caching, etc.), and some good defenses.  Not only did this help with
these clowns, but it also had the side benefit of allowing them to easily
handle Diggs, and mentions in the New York Times.

Then, after a month or so, the attackers moved on to more insidious attacks.
Recently they managed to chase us from the dedicated host by some other
means.  Some program got on the server and chewed up all the memory and CPU
time, grinding the server to its knees despite quite modest web traffic.
The logs showed nothing funny, there was no logging into the root I could
uncover, I could find no programs installed in temp directories, etc.
Without restarting the blog again only to fail quite publicly and
embarrassingly, I can't analyze the problem in more detail.

We retreated to blogger so I could take the time to move to a new host.  The
old host was beyond useless, taking as much as three days to respond to a
simple email request for assistance, running literally ancient versions
(Fedora 4!) and forbidding me from upgrading, etc. (let me know if you want
to know their name).

I'm in the process of setting up a new machine on a better host and I need
advice from the experts here.  I am surely going to run all the requisite
performance tuning goodies, but I'm looking for more security related help.
Are there good resources, check-lists, etc. that you know of that will help
me insure that this new server will not suffer the same fate?  Even better
would be some form of audit program that would point out my machine's holes
and weaknesses.  I'd even be willing to hire a bright star on a contingent
basis to help in this effort.

As this is clearly off-topic from WP core code, please respond to me
directly off-list if you can provide any advice and counsel.

Thank you in advance for your help,
Chris

From jacobsantos at branson.com  Wed Aug  8 16:53:37 2007
From: jacobsantos at branson.com (jacobsantos@branson.com)
Date: Wed Aug  8 16:58:10 2007
Subject: [wp-hackers] [OT] Resources for Defending Against Blog Attacks
In-Reply-To: <C2DF3B66.694A%chris@clwill.com>
References: <C2DF3B66.694A%chris@clwill.com>
Message-ID: <46B9F511.4040209@branson.com>

Well, there are auditing (free and premium) that will run automatic 
security attacks against your site and give you the results.

As always, you should upgrade any and all applications (whether PHP, C, 
C++, or any other language) to plug holes. WordPress did have and 
probably still has some security issues in the 2.2.0 and 2.2.1 versions. 
Version 2.2.2 (and for the 2.0.x branch) plugged most, if not all, of 
the issues pointed out by some guy. The method would have been able to 
gain hold of the WordPress and delete and whatever.

I would recommend Dreamhost for DDOS, as they will probably handle it 
better (and won't boot your ass for causing it). However, I only 
recommend them because I use them.

Check http://www.planet-php.net for two security professionals, one 
named Chris and the other who manages the Hardened PHP patch. The audit 
tool you will have to search for, but it was also on planet-php and 
still probably is.

There is also a site devoted to securing WordPress, has an free audit 
tool (not as complete as the one above) and tips for securing wordpress. 
I'm sure someone else has the URL, but if not I'll reply once I find the 
links.

You can probably do a google search and find these yourself. I think the 
best counter action, would be to lock down the comments, change 
passwords, disable login, etc. It would be cool if WordPress had this 
feature that you can set by FTPing into the config and lock down the 
site by setting the config to true.

Well, good luck and I would like to hear more about what you do to block 
hackers. I luckily don't do politics (or not enough), probably for the 
reason you mentioned. Since my blog is in my name and my address is 
available by WHOIS, I'm a little bit more weary of speaking out about 
matters that might have my knees broken over.

Jacob Santos

Chris Williams wrote:
> I am the (moderately experienced) webmaster for three blogs that are being
> ruthlessly attacked.  I've Googled and searched the WP support forums but I
> feel I need the expertise of the elite company herein.  Please forgive me if
> this is ridiculously off-topic here.
>
> The sites I'm responsible for are owned by three women who speak for women
> and woman's issues.  They are being besieged by misogynist idiots.  The
> jerks moved on from truly sick comment storms to DDoS attacks designed to
> chase them from their shared hosts.  That succeeded and I mitigated the
> problem by using a dedicated server, judicious performance tuning (light
> theme, caching, etc.), and some good defenses.  Not only did this help with
> these clowns, but it also had the side benefit of allowing them to easily
> handle Diggs, and mentions in the New York Times.
>
> Then, after a month or so, the attackers moved on to more insidious attacks.
> Recently they managed to chase us from the dedicated host by some other
> means.  Some program got on the server and chewed up all the memory and CPU
> time, grinding the server to its knees despite quite modest web traffic.
> The logs showed nothing funny, there was no logging into the root I could
> uncover, I could find no programs installed in temp directories, etc.
> Without restarting the blog again only to fail quite publicly and
> embarrassingly, I can't analyze the problem in more detail.
>
> We retreated to blogger so I could take the time to move to a new host.  The
> old host was beyond useless, taking as much as three days to respond to a
> simple email request for assistance, running literally ancient versions
> (Fedora 4!) and forbidding me from upgrading, etc. (let me know if you want
> to know their name).
>
> I'm in the process of setting up a new machine on a better host and I need
> advice from the experts here.  I am surely going to run all the requisite
> performance tuning goodies, but I'm looking for more security related help.
> Are there good resources, check-lists, etc. that you know of that will help
> me insure that this new server will not suffer the same fate?  Even better
> would be some form of audit program that would point out my machine's holes
> and weaknesses.  I'd even be willing to hire a bright star on a contingent
> basis to help in this effort.
>
> As this is clearly off-topic from WP core code, please respond to me
> directly off-list if you can provide any advice and counsel.
>
> Thank you in advance for your help,
> Chris
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
>
>
>   

From ag.ml2007 at zirona.com  Wed Aug  8 19:21:49 2007
From: ag.ml2007 at zirona.com (Alex =?ISO-8859-1?Q?G=FCnsche?=)
Date: Wed Aug  8 19:21:57 2007
Subject: [wp-hackers] [OT] Resources for Defending Against Blog Attacks
In-Reply-To: <C2DF3B66.694A%chris@clwill.com>
References: <C2DF3B66.694A%chris@clwill.com>
Message-ID: <1186600909.5493.105.camel@localhost>

On Wed, 2007-08-08 at 09:20 -0700, Chris Williams wrote:
> I'm in the process of setting up a new machine on a better host and I need
> advice from the experts here.  I am surely going to run all the requisite
> performance tuning goodies, but I'm looking for more security related help.
> Are there good resources, check-lists, etc. that you know of that will help
> me insure that this new server will not suffer the same fate?  Even better
> would be some form of audit program that would point out my machine's holes
> and weaknesses.  I'd even be willing to hire a bright star on a contingent
> basis to help in this effort.

Some good advices came from Jacob already, I think I'll also add my 2
cents.

* Set up the firewall properly. "Drop" policy for all not required
ports. Take measures against flooding. Set up and maintain blacklists
(although this might render useless with certain sorts of DDOS).
Good tutorials on advanced firewall configuration:
 - http://gentoo-wiki.com/HOWTO_Iptables_and_stateful_firewalls
 - http://forums.gentoo.org/viewtopic-t-159710.html
If you don't want to maintain your IPtables rulesets manually, I can
recommend Firehol (also a CLI tool, but very easy and quick to use).

* Fail2ban (http://www.fail2ban.org) is a good tool against DDOS
attacks. It will automatically ban users for a certain time who violate
your policy, and add them to a temporary blacklist.

* Use a dedicated mail server or service (simply set the DNS MX record
for the other machine and let that one handle mail). This way, massive
spam surges won't affect your main server.

* Don't install software you don't need. I've seen people running X on a
webserver, but even too many Apache modules can be a risk.

* Talking about Apache: Consider using mod_security and mod_bwshare.
These are basicly firewalls too, but on a higher network layer.

* Again Apache: Chose the right MPM for your purpose. (Also depends on
the question if you need multithreading.)

* As for PHP: Also use only modules you need, and use open_basedir
restrictions. Safe Mode is rubbish, but open_basedir can really protect
your system if there's a leak in a PHP application. (When setting up
open_basedir restrictions, set them per vHost, and put the tmp path into
the same folder. No global /tmp for webapps.)

* As for MySQL: Of course, no network access for MySQL. But you can also
try to set up MySQL recourses in a fashion that a DOS attack doesn't
render your system unusuable because of MySQL bottlenecks. If you can,
increase the query and table caches.

* Possibly decrease logging: Heavy logging can decrease your harddisk's
performance. Sometimes it can be better to log less. Btw, MySQL by
default creates binlogs. They can be useful, but mostly they do nothing
but eating harddisk space and performance, so switch them off in my.cnf.

* If you're really paranoid, compile your kernel with only support for
stuff you need, and deactivate loadable modules in the kernel
configuration. Recent attack vectors don't use userspace rootkits, but
kernel rootkids loaded as modules.

* And a non-tech note, if you know these guys: Sue them.

HTH

Regards,
Alex

-- 
Alex G?nsche, Zirona OpenSource-Consulting
Blogs: http://www.zirona.com/ | http://www.regularimpressions.net
PubKey for this address: http://www.zirona.com/misc/ag.ml2007.asc

From iacobs at m0n5t3r.info  Wed Aug  8 20:30:37 2007
From: iacobs at m0n5t3r.info (Sabin Iacob)
Date: Wed Aug  8 20:30:42 2007
Subject: [wp-hackers] [OT] Resources for Defending Against Blog Attacks
In-Reply-To: <1186600909.5493.105.camel@localhost>
References: <C2DF3B66.694A%chris@clwill.com>
	<1186600909.5493.105.camel@localhost>
Message-ID: <46BA27ED.5060105@m0n5t3r.info>

Alex G?nsche wrote:
> Some good advices came from Jacob already, I think I'll also add my 2
> cents.
>
> * Set up the firewall properly. "Drop" policy for all not required
> ports. Take measures against flooding. Set up and maintain blacklists
> (although this might render useless with certain sorts of DDOS).
> Good tutorials on advanced firewall configuration:
>  - http://gentoo-wiki.com/HOWTO_Iptables_and_stateful_firewalls
>  - http://forums.gentoo.org/viewtopic-t-159710.html
> If you don't want to maintain your IPtables rulesets manually, I can
> recommend Firehol (also a CLI tool, but very easy and quick to use).
>   

 * default "drop" policy is risky (you can lock yourself out if you're 
not creful), you'll be better off with a drop rule at the end of the 
filtering chain
 * the gentoo initscripts make managing firewalls easy without other 
software; I think the Fedora/Centos init scripts do a similar job (they 
use iptables-save and iptables-restore); otherwise, you'll need some 
configuration tool (I ound the firewall managing initscripts from Suse 
horrible, for instance, and Debian has no such thing, AFAIK)

> * Fail2ban (http://www.fail2ban.org) is a good tool against DDOS
> attacks. It will automatically ban users for a certain time who violate
> your policy, and add them to a temporary blacklist.
>   

DDOS can't really be mitigated at the server level; you'll need an ISP 
that responds quickly for this (the attacker's goal is usually to fill 
your pipe, which makes filtering at the server level useless)

> * Use a dedicated mail server or service (simply set the DNS MX record
> for the other machine and let that one handle mail). This way, massive
> spam surges won't affect your main server.
>   

good suggestion... also, you may want to use tmda or a similar tool 
(whitelist-based) instead of the usual SpamAssassin / bayesian filtering 
software

> * Don't install software you don't need. I've seen people running X on a
> webserver, but even too many Apache modules can be a risk.
>   

especially avoid development tools, if using a compiled distribution

> [...]
> * As for PHP: Also use only modules you need, and use open_basedir
> restrictions. Safe Mode is rubbish, but open_basedir can really protect
> your system if there's a leak in a PHP application. (When setting up
> open_basedir restrictions, set them per vHost, and put the tmp path into
> the same folder. No global /tmp for webapps.)
>   

/me should do this, too

> * As for MySQL: Of course, no network access for MySQL. But you can also
> try to set up MySQL recourses in a fashion that a DOS attack doesn't
> render your system unusuable because of MySQL bottlenecks. If you can,
> increase the query and table caches.
>   

if you have control over the hardware you can do some more: give mysql 
its own hard drive and plenty of RAM

> * Possibly decrease logging: Heavy logging can decrease your harddisk's
> performance. Sometimes it can be better to log less. Btw, MySQL by
> default creates binlogs. They can be useful, but mostly they do nothing
> but eating harddisk space and performance, so switch them off in my.cnf.
>   

... and/or don't serve files off the same harddisk which holds the logs

> * If you're really paranoid, compile your kernel with only support for
> stuff you need, and deactivate loadable modules in the kernel
> configuration. Recent attack vectors don't use userspace rootkits, but
> kernel rootkids loaded as modules.
>   

if an attacker has root access, he can always write to /proc/kcore and 
hide anything he likes, even without modules

> * And a non-tech note, if you know these guys: Sue them.
>   

I would add:
 * use linux-vserver; it's chroot on steroids ;)

From jacobsantos at branson.com  Wed Aug  8 20:27:13 2007
From: jacobsantos at branson.com (jacobsantos@branson.com)
Date: Wed Aug  8 20:32:09 2007
Subject: [wp-hackers] Personalizing db down WordPress errors
In-Reply-To: <8BBC3264-B119-4C51-AA8B-54A018DA6731@txfx.net>
References: <74b84aa30708030310u59160ae0tfb76915aa409ca69@mail.gmail.com>	<46B300B0.6000503@ftwr.co.uk>
	<8BBC3264-B119-4C51-AA8B-54A018DA6731@txfx.net>
Message-ID: <46BA2721.5070504@branson.com>

I was thinking about it and I think that since caching is done, that 
when the Database is down, the cached version could be displayed instead 
with an email sent to the admin that the database is down. If the email 
address was in the config.php file, it wouldn't depend on the database 
and will still be able to send the email. If the email changes, the 
config.php could be updated with the change.

As for the options, I think that it might be better off if the option to 
use INI file or XML file was given. It would be faster (in some 
instances). I don't know what the caching options feature depends on, I 
haven't dived that far into it, but it might be useful to limit Database 
usage as much as possible. Using the database is awesome, quick, and 
easy, but it does fail and it will piss users off. I know I was pissed 
when it happened to me.

Mark Jaquith wrote:
> Chetan Kunte wrote:
>
>>> On self-hosted sites, this is a familiar sight, and it is a bit
>>> obvious to site owners. But not so for visitors, particularly when
>>> they see a WordPress error message on screen [as seen in the link
>>> above].
>
> Customization is nice (although technically tricky without a DB), but 
> what would be even better, and benefit more people, is a better DB 
> error page, one that serves visitors as well as administrators.
>
> -- 
> Mark Jaquith
> http://markjaquith.com/
>
> Covered Web Services
> http://coveredwebservices.com/
>
> WordPress Ninja @ b5media Inc
> http://b5media.com/
>
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
>
>

From emmensetech at gmail.com  Wed Aug  8 20:35:55 2007
From: emmensetech at gmail.com (=?utf-8?B?QWFyb24gQnJhemVsbA==?=)
Date: Wed Aug  8 20:36:08 2007
Subject: [wp-hackers] Personalizing db down WordPress errors
In-Reply-To: <46BA2721.5070504@branson.com>
References: <74b84aa30708030310u59160ae0tfb76915aa409ca69@mail.gmail.com>	<46B300B0.6000503@ftwr.co.uk><8BBC3264-B119-4C51-AA8B-54A018DA6731@txfx.net><46BA2721.5070504@branson.com>
Message-ID: <443067006-1186605358-cardhu_decombobulator_blackberry.rim.net-898865140-@bxe011.bisx.prod.on.blackberry>

What happens when there is no cached version because the blog is in initial setup and never had proper credentials, etc to bootstrap with? ;)
(via Blackberry)
Aaron Brazell 
Director of Technology, b5media
"A Global New Media Company" 

web:: www.b5media.com, www.technosailor.com
phone:: 410-608-6620 
skype:: technosailor     

-----Original Message-----
From: "jacobsantos@branson.com" <jacobsantos@branson.com>

Date: Wed, 08 Aug 2007 15:27:13 
To:wp-hackers@lists.automattic.com
Subject: Re: [wp-hackers] Personalizing db down WordPress errors


I was thinking about it and I think that since caching is done, that 
when the Database is down, the cached version could be displayed instead 
with an email sent to the admin that the database is down. If the email 
address was in the config.php file, it wouldn't depend on the database 
and will still be able to send the email. If the email changes, the 
config.php could be updated with the change.

As for the options, I think that it might be better off if the option to 
use INI file or XML file was given. It would be faster (in some 
instances). I don't know what the caching options feature depends on, I 
haven't dived that far into it, but it might be useful to limit Database 
usage as much as possible. Using the database is awesome, quick, and 
easy, but it does fail and it will piss users off. I know I was pissed 
when it happened to me.

Mark Jaquith wrote:
> Chetan Kunte wrote:
>
>>> On self-hosted sites, this is a familiar sight, and it is a bit
>>> obvious to site owners. But not so for visitors, particularly when
>>> they see a WordPress error message on screen [as seen in the link
>>> above].
>
> Customization is nice (although technically tricky without a DB), but 
> what would be even better, and benefit more people, is a better DB 
> error page, one that serves visitors as well as administrators.
>
> -- 
> Mark Jaquith
> http://markjaquith.com/
>
> Covered Web Services
> http://coveredwebservices.com/
>
> WordPress Ninja @ b5media Inc
> http://b5media.com/
>
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
>
>

_______________________________________________
wp-hackers mailing list
wp-hackers@lists.automattic.com
http://lists.automattic.com/mailman/listinfo/wp-hackers
From jacobsantos at branson.com  Wed Aug  8 20:48:45 2007
From: jacobsantos at branson.com (jacobsantos@branson.com)
Date: Wed Aug  8 20:53:18 2007
Subject: [wp-hackers] Personalizing db down WordPress errors
In-Reply-To: <443067006-1186605358-cardhu_decombobulator_blackberry.rim.net-898865140-@bxe011.bisx.prod.on.blackberry>
References: <74b84aa30708030310u59160ae0tfb76915aa409ca69@mail.gmail.com>	<46B300B0.6000503@ftwr.co.uk><8BBC3264-B119-4C51-AA8B-54A018DA6731@txfx.net><46BA2721.5070504@branson.com>
	<443067006-1186605358-cardhu_decombobulator_blackberry.rim.net-898865140-@bxe011.bisx.prod.on.blackberry>
Message-ID: <46BA2C2D.4060503@branson.com>

That would mean either that caching was disabled or you are in the 
initial install step. If you are in the initial setup step, then yeah, 
there wouldn't be any cache and no database setup either. In which case, 
it is a mute point. This would protect blogs which are established, 
meaning installed and with a cached version.

It also means it would require a core patch, because a plugin won't be 
able to handle this, or at least not with the current plugin system. I 
think it would be useful and I will seek to implement this myself, 
however, I'll probably run it by my work first as it would be useful for 
a current maintained site to make sure that nothing goes "Boom!" The 
default Database Error is pretty crappy, when you are using WordPress as 
a CMS, and even more crappy than the (good) old days when people placed 
"Under Construction" splash screens. Just as useful too.

I think having something, even if it is an older saved version is better 
than, "Hey, this site uses WordPress that failed" and it makes you wish 
for something that is flat file based (I'm kidding). My site was down 
for about a week, which doesn't matter because it was only a personal 
blog (that is low traffic and no one cares about except me). I don't 
want to think about if it happens to sites that I maintain now that 
absolutely require that they be up 100% with no downtime.

I think I might have read of this as a solution before, or at least 
thought about it while my site was down.

Jacob Santos

Aaron Brazell wrote:
> What happens when there is no cached version because the blog is in initial setup and never had proper credentials, etc to bootstrap with? ;)
> (via Blackberry)
> Aaron Brazell 
> Director of Technology, b5media
> "A Global New Media Company" 
>
> web:: www.b5media.com, www.technosailor.com
> phone:: 410-608-6620 
> skype:: technosailor  
>

From chris at clwill.com  Wed Aug  8 21:01:38 2007
From: chris at clwill.com (Chris Williams)
Date: Wed Aug  8 21:02:00 2007
Subject: [wp-hackers] [OT] Resources for Defending Against Blog Attacks
In-Reply-To: <46BA27ED.5060105@m0n5t3r.info>
Message-ID: <C2DF7D42.1DBE1%chris@clwill.com>

Thank you all for your good input on this.  Lots of things to chew on, many
good resources.

Yes, I'm setting up a dedicated WP server machine.  Just centos, apache,
php, and mysql.  No mail, no X, no nothing.  Locked down /tmp (no execute)
and the like.  Only ports 80 and 22 open.  Checks on outbound port 80. That
kind of thing.

On the DDoS attacks, I'm comfortable that my host will help me here, and I'm
really not driven to distraction over them.  Of course I'll use
mod_security/mod_evasive/fail2ban kinds of things, but a truly distributed
attack will be unfazed by these.  As Sabin notes, sever level is really too
late.

My goal for surviving DDoS is to provide a truly speedy page serving
experience.  It will serve both the goal of making the user experience great
(and surviving slashdot/digg/NYT) and make it harder to have an impact on
us.  These attacks are always at the one given page, and with wp-cache it
server thousands of them a second.  Not a problem.

Even so, we're on our own server.  If the worst that happens is they slow us
to a crawl and we hunker down and survive it, we'll just wait till it
passes.  They'll soon tire.  This approach has worked so far... We survived
a couple of attempts shortly after I set up this approach.  They then
switched tactics.

As for the other stuff, is Nikto the current state of the art in testing my
system?  If I can get a clean bill of health from it can I feel relatively
confident?  Are there other ways/resources I should use to check to my
defenses?

Thanks again to all for the excellent advice.
Chris

From ag.ml2007 at zirona.com  Wed Aug  8 21:40:20 2007
From: ag.ml2007 at zirona.com (Alex =?ISO-8859-1?Q?G=FCnsche?=)
Date: Wed Aug  8 22:02:54 2007
Subject: [wp-hackers] [OT] Resources for Defending Against Blog Attacks
In-Reply-To: <C2DF7D42.1DBE1%chris@clwill.com>
References: <C2DF7D42.1DBE1%chris@clwill.com>
Message-ID: <1186609220.5493.136.camel@localhost>

On Wed, 2007-08-08 at 14:01 -0700, Chris Williams wrote:
> As for the other stuff, is Nikto the current state of the art in testing my
> system?  If I can get a clean bill of health from it can I feel relatively
> confident?  Are there other ways/resources I should use to check to my
> defenses?

Nessus is great. It is an OSS (v2, not v3) security suite, however, you
must register to obtain all plugins.

By the way, some more things to mention:

* I agree that DDoS countermeasures at server level are a bit late, but
if your host is not supportive (mine luckily is), you must take action
yourself, and it's always good to know useful tools.

* Security items I forgot to mention before are Intrusion Detection
Systems like Tripwire (Host IDS), Snort (Network IDS), Prelude (Hybrid).
If really managed to break in, you will be able to react fast and get a
good idea of the actual damage.

* Something I found useful is putting the SSH server to a non-standard
port, e.g. 8022 on my server. Of course somebody with Nmap and Netcat
won't be fooled, but at least automated SSH break-in tools won't drag at
your performance. Also, and more important, disable root login, and
rather log in with a non-privileged account. You could also switch to
key-based authentication, but this is not a good idea when working from
different machines.

* as for Drop policy (Iacob): Yes, you can lock yourself out if you're
not careful. But once everything is set up, "drop" the best solution. As
I said, I can really recommend Firehol, it sets up a complex IPtables
ruleset with only 6 lines (or a bit more, depending on the services you
run). For whom it may be interesting: have a look at
http://firehol.sourceforge.net/ and scroll down and read the section
"Learn another language?" to get an idea.


Best regards,
Alex

-- 
Alex G?nsche, Zirona OpenSource-Consulting
Blogs: http://www.zirona.com/ | http://www.regularimpressions.net
PubKey for this address: http://www.zirona.com/misc/ag.ml2007.asc

From jeremy.visser at gmail.com  Thu Aug  9 07:46:20 2007
From: jeremy.visser at gmail.com (Jeremy Visser)
Date: Thu Aug  9 07:46:31 2007
Subject: [wp-hackers] Re: How to redirect to login when filtered posts
	are	empty?
In-Reply-To: <17F5686C-04AB-482C-9955-E5EC468A09E4@txfx.net>
References: <Pine.BSF.4.64.0707311014150.30057@www.provisio.net>	<Pine.BSF.4.64.0708011535210.74227@www.provisio.net>
	<17F5686C-04AB-482C-9955-E5EC468A09E4@txfx.net>
Message-ID: <46BAC64C.3060603@gmail.com>

Mark Jaquith wrote:
> Try using a lambda-style function (using create_function()).
> 
> http://php.net/create_function

Sweet! I though only JavaScript could do that!
From sam at viveka.net.au  Thu Aug  9 08:42:31 2007
From: sam at viveka.net.au (Sam Bauers)
Date: Thu Aug  9 08:42:39 2007
Subject: [wp-hackers] [OT] Resources for Defending Against Blog Attacks
In-Reply-To: <C2DF3B66.694A%chris@clwill.com>
References: <C2DF3B66.694A%chris@clwill.com>
Message-ID: <7021C162-A946-481D-BD03-BE854DA972FF@viveka.net.au>

Is this ( http://wordpress.com/vip-hosting/ ) out of your scope.
From sam at rephrase.net  Thu Aug  9 09:30:20 2007
From: sam at rephrase.net (Sam Angove)
Date: Thu Aug  9 09:30:29 2007
Subject: [wp-hackers] Re: How to redirect to login when filtered posts are
	empty?
In-Reply-To: <46BAC64C.3060603@gmail.com>
References: <Pine.BSF.4.64.0707311014150.30057@www.provisio.net>
	<Pine.BSF.4.64.0708011535210.74227@www.provisio.net>
	<17F5686C-04AB-482C-9955-E5EC468A09E4@txfx.net>
	<46BAC64C.3060603@gmail.com>
Message-ID: <aa74b1910708090230k70a42322oc87a11fb28175c64@mail.gmail.com>

On 8/9/07, Jeremy Visser <jeremy.visser@gmail.com> wrote:
>
> Sweet! I though only JavaScript could do that!

It's a common pattern in languages where functions are first-class
objects[1] (JavaScript, Python, Ruby, Lisp, Haskell etc.) and
occasionally tacked on to languages where they aren't. C++ has
boost::lambda, for example.

PHP's support is of the tacked-on variety, so it isn't great.
`create_function()` can be useful, but it's basically just an `eval()`
macro[2] -- not quite *evil*, but getting there. Unlike anonymous
functions in JavaScript, you should think twice before using it. :(

[1]: http://www.joelonsoftware.com/items/2006/08/01.html
[2]: http://blog.libssh2.org/index.php?/archives/60-create_function-is-not-your-friend.html
From chris at clwill.com  Thu Aug  9 14:31:26 2007
From: chris at clwill.com (Chris Williams)
Date: Thu Aug  9 14:44:59 2007
Subject: [wp-hackers] [OT] Resources for Defending Against Blog Attacks
In-Reply-To: <7021C162-A946-481D-BD03-BE854DA972FF@viveka.net.au>
Message-ID: <C2E0734E.1DCFD%chris@clwill.com>

We've discussed it several times here, but with three (and more soon) blogs,
it would run something close to $1000 a month.  Ouch...

> From: Sam Bauers <sam@viveka.net.au>
> Subject: Re: [wp-hackers] [OT] Resources for Defending Against Blog Attacks
> 
> Is this ( http://wordpress.com/vip-hosting/ ) out of your scope.

From docwhat+list.wp.hackers at gerf.org  Fri Aug 10 14:49:28 2007
From: docwhat+list.wp.hackers at gerf.org (Christian =?iso-8859-1?Q?H=F6ltje?=)
Date: Sat Aug 11 17:23:49 2007
Subject: [wp-hackers] Re: [OT] Resources for Defending Against Blog Attacks
In-Reply-To: <1186600909.5493.105.camel@localhost>
References: <C2DF3B66.694A%chris@clwill.com>
	<1186600909.5493.105.camel@localhost>
Message-ID: <20070810144928.GB1788@gerf.org>

* Alex G?nsche (ag.ml2007@zirona.com) [070808 15:22]:
> * As for PHP: Also use only modules you need, and use open_basedir
> restrictions. Safe Mode is rubbish, but open_basedir can really protect
> your system if there's a leak in a PHP application. (When setting up
> open_basedir restrictions, set them per vHost, and put the tmp path into
> the same folder. No global /tmp for webapps.)

The setting for the apache.conf file for open_basedir is:
php_value open_basedir             '/path/to/your/webbase/'

Don't forget the trailing '/' as the string is just a prefix check.

How do you set the local tmp directory?

Ciao!

-- 
Now is the time for all good men to come to.
	 -- Walt Kelly

The Doctor What: Need I say more?                http://docwhat.gerf.org/
docwhat *at* gerf *dot* org                                        KF6VNC
From sam.clark at polaris-digital.com  Sat Aug 11 20:03:11 2007
From: sam.clark at polaris-digital.com (sam.clark@polaris-digital.com)
Date: Sat Aug 11 19:51:19 2007
Subject: [wp-hackers] Re: wp-hackers Digest, Vol 31, Issue 13
Message-ID: <20070811200311.25100.qmail@s15216476.onlinehome-server.info>


Sam Clark is away on leave until Thursday 16th August, 2007. Your e-mail has been received and Sam will respond to it as soon as he returns.

Kind regards,


From ag.ml2007 at zirona.com  Sat Aug 11 20:16:30 2007
From: ag.ml2007 at zirona.com (Alex =?ISO-8859-1?Q?G=FCnsche?=)
Date: Sat Aug 11 20:16:46 2007
Subject: [wp-hackers] Re: [OT] Resources for Defending Against Blog Attacks
In-Reply-To: <20070810144928.GB1788@gerf.org>
References: <C2DF3B66.694A%chris@clwill.com>
	<1186600909.5493.105.camel@localhost> <20070810144928.GB1788@gerf.org>
Message-ID: <1186863390.14824.10.camel@localhost>

On Fri, 2007-08-10 at 10:49 -0400, Christian H?ltje wrote:
> The setting for the apache.conf file for open_basedir is:
> php_value open_basedir             '/path/to/your/webbase/'
> Don't forget the trailing '/' as the string is just a prefix check.

Good point, I forgot to mention that. It is to say however that since
PHP 5.2.2, I have problems with open_basedir when operating on
DocumentRoot level with the trailing slash. For example
is_writable('/var/www/www.example.com/htdocs/') with the below
configuration would produce an error -- even if it is writable.
Therefore I had to remove the trailing slash in the open_basedir value
for some of my hosts.

> How do you set the local tmp directory?

I have one config file per vHost. A simple VirtualHost section in this
file could look like this:

<VirtualHost 123.123.123.123:80>
DocumentRoot /var/www/www.example.com/htdocs/
ServerName www.example.com
ServerAdmin webmaster@example.com
Setenv VLOG /var/www/www.example.com/htdocs/log/
ErrorLog /var/www/www.example.com/htdocs/log/error.log
php_admin_value open_basedir "/var/www/www.example.com/htdocs/"
php_admin_value file_uploads 1
php_admin_value upload_tmp_dir "/var/www/www.example.com/htdocs/phptmp/"
php_admin_value session.save_path "/var/www/www.example.com/htdocs/phptmp/"
RewriteEngine On
RewriteOptions inherit
</VirtualHost>


Best regards,
Alex

-- 
Alex G?nsche, Zirona OpenSource-Consulting
Blogs: http://www.zirona.com/ | http://www.regularimpressions.net
PubKey for this address: http://www.zirona.com/misc/ag.ml2007.asc

From sam.clark at polaris-digital.com  Sun Aug 12 12:13:20 2007
From: sam.clark at polaris-digital.com (sam.clark@polaris-digital.com)
Date: Sun Aug 12 12:01:09 2007
Subject: [wp-hackers] Re: wp-hackers Digest, Vol 31, Issue 14
Message-ID: <20070812121320.5194.qmail@s15216476.onlinehome-server.info>


Sam Clark is away on leave until Thursday 16th August, 2007. Your e-mail has been received and Sam will respond to it as soon as he returns.

Kind regards,


From sam at viveka.net.au  Sun Aug 12 13:04:06 2007
From: sam at viveka.net.au (sam@viveka.net.au)
Date: Sun Aug 12 13:04:10 2007
Subject: [wp-hackers] [OT] Resources for Defending Against Blog Attacks
In-Reply-To: <C2E0734E.1DCFD%chris@clwill.com>
References: <7021C162-A946-481D-BD03-BE854DA972FF@viveka.net.au>
	<C2E0734E.1DCFD%chris@clwill.com>
Message-ID: <35117.220.101.176.231.1186923846.squirrel@webmail.viveka.net.au>

I'm not sure it's a per-blog cost, certainly some of their clients have
more than one blog (albeit under one domain name). You should enquire in
any case to cover the option.

> We've discussed it several times here, but with three (and more soon)
> blogs,
> it would run something close to $1000 a month.  Ouch...
>
>> From: Sam Bauers
>>
>> Is this ( http://wordpress.com/vip-hosting/ ) out of your scope.

From gamerz84 at hotmail.com  Mon Aug 13 07:33:51 2007
From: gamerz84 at hotmail.com (Lester Chan)
Date: Mon Aug 13 07:33:56 2007
Subject: [wp-hackers] Error: CHECKOUT 403 Forbidden
Message-ID: <BAY117-W20D46895356338D3B3FDA8C5DC0@phx.gbl>

Hi All, I am unable to commit to http://svn.wp-plugins.org, for my latest plugin (wp-pluginsused). But I am able to commit normally for my other plugins. Any idea why? Error message:Error: CHECKOUT of '/!svn/ver/16677/wp-pluginsused': 403 Forbidden (http://svn.wp-plugins.org)  With Regards, Lester 'GaMerZ' Chanhttp://lesterchan.net
_________________________________________________________________
Call friends with PC-to-PC calling for free!
http://get.live.com/messenger/overview
From sam.clark at polaris-digital.com  Mon Aug 13 12:13:54 2007
From: sam.clark at polaris-digital.com (sam.clark@polaris-digital.com)
Date: Mon Aug 13 12:01:42 2007
Subject: [wp-hackers] Re: wp-hackers Digest, Vol 31, Issue 15
Message-ID: <20070813121354.18157.qmail@s15216476.onlinehome-server.info>


Sam Clark is away on leave until Thursday 16th August, 2007. Your e-mail has been received and Sam will respond to it as soon as he returns.

Kind regards,


From speedboxer at gmail.com  Mon Aug 13 17:55:28 2007
From: speedboxer at gmail.com (Matt)
Date: Mon Aug 13 17:55:40 2007
Subject: [wp-hackers] Error: CHECKOUT 403 Forbidden
In-Reply-To: <BAY117-W20D46895356338D3B3FDA8C5DC0@phx.gbl>
References: <BAY117-W20D46895356338D3B3FDA8C5DC0@phx.gbl>
Message-ID: <b88434820708131055q3db81f00s4ce69b46c0d67512@mail.gmail.com>

Wrong username/password would be my first guess? Are you sure that you can
use dashes (-)? Or, it could have been setup incorrectly...

On 8/13/07, Lester Chan <gamerz84@hotmail.com> wrote:
>
> Hi All, I am unable to commit to http://svn.wp-plugins.org, for my latest
> plugin (wp-pluginsused). But I am able to commit normally for my other
> plugins. Any idea why? Error message:Error: CHECKOUT of
> '/!svn/ver/16677/wp-pluginsused': 403 Forbidden (http://svn.wp-plugins.org)  With
> Regards, Lester 'GaMerZ' Chanhttp://lesterchan.net
> _________________________________________________________________
> Call friends with PC-to-PC calling for free!
> http://get.live.com/messenger/overview
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>



-- 
Matt (speedboxer@gmail.com)
http://mattsblog.ca/ | http://livemp.net/
From gamerz84 at hotmail.com  Mon Aug 13 18:39:28 2007
From: gamerz84 at hotmail.com (Lester Chan)
Date: Mon Aug 13 18:39:40 2007
Subject: [wp-hackers] Error: CHECKOUT 403 Forbidden
Message-ID: <BAY117-W129245EB1D8871BAB4094EC5DC0@phx.gbl>

Hi Matt,
 
Nope, I am 100% sure that the username/password is correct because I am able to commit my other older plugins without any problems. I am sure dash is allowed because my other older plugins is also using dash. Check out http://dev.wp-plugins.org/browser/wp-pluginsused.
 
Apparently some of the users have similar problem Like (Pistos) http://wordpress.org/support/topic/110659?replies=9
 
Thank you.With Regards, Lester 'GaMerZ' Chanhttp://lesterchan.net



> Date: Mon, 13 Aug 2007 10:55:28 -0700> From: speedboxer@gmail.com> To: wp-hackers@lists.automattic.com> Subject: Re: [wp-hackers] Error: CHECKOUT 403 Forbidden> > Wrong username/password would be my first guess? Are you sure that you can> use dashes (-)? Or, it could have been setup incorrectly...> > On 8/13/07, Lester Chan <gamerz84@hotmail.com> wrote:> >> > Hi All, I am unable to commit to http://svn.wp-plugins.org, for my latest> > plugin (wp-pluginsused). But I am able to commit normally for my other> > plugins. Any idea why? Error message:Error: CHECKOUT of> > '/!svn/ver/16677/wp-pluginsused': 403 Forbidden (http://svn.wp-plugins.org) With> > Regards, Lester 'GaMerZ' Chanhttp://lesterchan.net> > _________________________________________________________________> > Call friends with PC-to-PC calling for free!> > http://get.live.com/messenger/overview> > _______________________________________________> > wp-hackers mailing list> > wp-hackers@lists.automattic.com> > http://lists.automattic.com/mailman/listinfo/wp-hackers> >> > > > -- > Matt (speedboxer@gmail.com)> http://mattsblog.ca/ | http://livemp.net/> _______________________________________________> wp-hackers mailing list> wp-hackers@lists.automattic.com> http://lists.automattic.com/mailman/listinfo/wp-hackers
_________________________________________________________________
Did you know you can now customize your mailbox with different colours to suit your mood with Windows Live Hotmail?
http://get.live.com/mail/features
From ryan at boren.nu  Mon Aug 13 18:58:10 2007
From: ryan at boren.nu (Ryan Boren)
Date: Mon Aug 13 18:58:17 2007
Subject: [wp-hackers] phpdoc for taxonomy API
Message-ID: <c8f37c930708131158n671ca0a7p993b3dd01098ff7f@mail.gmail.com>

http://trac.wordpress.org/ticket/4742

Anyone want to take a crack at adding phpdoc for the functions in
wp-includes/taxonomy.php?  The API needs eyes other than mine on it,
and documenting it is a good way to get those eyes.

Ryan
From jacobsantos at branson.com  Mon Aug 13 20:02:45 2007
From: jacobsantos at branson.com (jacobsantos@branson.com)
Date: Mon Aug 13 20:07:25 2007
Subject: [wp-hackers] phpdoc for taxonomy API
In-Reply-To: <c8f37c930708131158n671ca0a7p993b3dd01098ff7f@mail.gmail.com>
References: <c8f37c930708131158n671ca0a7p993b3dd01098ff7f@mail.gmail.com>
Message-ID: <46C0B8E5.1090309@branson.com>

I'll probably take you up on that offer. I know phpDoc tags and have 
some experience with how it works.

Ryan Boren wrote:
> http://trac.wordpress.org/ticket/4742
>
> Anyone want to take a crack at adding phpdoc for the functions in
> wp-includes/taxonomy.php?  The API needs eyes other than mine on it,
> and documenting it is a good way to get those eyes.
>
> Ryan
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
>
>
>   

From mikea at turbonet.com  Mon Aug 13 23:37:15 2007
From: mikea at turbonet.com (Michael D Adams)
Date: Mon Aug 13 23:36:54 2007
Subject: [Spam 7.09] [wp-hackers] Error: CHECKOUT 403 Forbidden
In-Reply-To: <BAY117-W20D46895356338D3B3FDA8C5DC0@phx.gbl>
References: <BAY117-W20D46895356338D3B3FDA8C5DC0@phx.gbl>
Message-ID: <89FCE9C4-6012-4D15-BBB2-D370557EF4E2@turbonet.com>

On Aug 13, 2007, at 12:33 AM, Lester Chan wrote:

> Hi All, I am unable to commit to http://svn.wp-plugins.org, for my  
> latest plugin (wp-pluginsused). But I am able to commit normally  
> for my other plugins. Any idea why?

Only a tiny idea :)  I'm working on it now though.  Sorry for the  
inconvenience.

Michael

From gamerz84 at hotmail.com  Tue Aug 14 01:29:10 2007
From: gamerz84 at hotmail.com (Lester Chan)
Date: Tue Aug 14 01:29:14 2007
Subject: [Spam 7.09] [wp-hackers] Error: CHECKOUT 403 Forbidden
Message-ID: <BAY117-W1056368BF4301A34753120C5DD0@phx.gbl>

Hi Michael,
 
Thank you =)With Regards, Lester 'GaMerZ' Chanhttp://lesterchan.net



> From: mikea@turbonet.com> Subject: Re: [Spam 7.09] [wp-hackers] Error: CHECKOUT 403 Forbidden> Date: Mon, 13 Aug 2007 16:37:15 -0700> To: wp-hackers@lists.automattic.com> > On Aug 13, 2007, at 12:33 AM, Lester Chan wrote:> > > Hi All, I am unable to commit to http://svn.wp-plugins.org, for my > > latest plugin (wp-pluginsused). But I am able to commit normally > > for my other plugins. Any idea why?> > Only a tiny idea :) I'm working on it now though. Sorry for the > inconvenience.> > Michael> > _______________________________________________> wp-hackers mailing list> wp-hackers@lists.automattic.com> http://lists.automattic.com/mailman/listinfo/wp-hackers
_________________________________________________________________
Did you know you can now customize your mailbox with different colours to suit your mood with Windows Live Hotmail?
http://get.live.com/mail/features
From mikea at turbonet.com  Tue Aug 14 06:30:09 2007
From: mikea at turbonet.com (Michael D Adams)
Date: Tue Aug 14 06:30:38 2007
Subject: [wp-hackers] Error: CHECKOUT 403 Forbidden
In-Reply-To: <89FCE9C4-6012-4D15-BBB2-D370557EF4E2@turbonet.com>
References: <BAY117-W20D46895356338D3B3FDA8C5DC0@phx.gbl>
	<89FCE9C4-6012-4D15-BBB2-D370557EF4E2@turbonet.com>
Message-ID: <8BA8120C-EEE2-4E72-B70B-2AE3AC70151B@turbonet.com>

I think the 403 errors for the plugins repository should be fixed  
now.  If you still experience problems (that one or new ones :) ),  
please let me know.

Michael
From gamerz84 at hotmail.com  Tue Aug 14 06:52:20 2007
From: gamerz84 at hotmail.com (Lester Chan)
Date: Tue Aug 14 06:52:26 2007
Subject: [wp-hackers] Error: CHECKOUT 403 Forbidden
Message-ID: <BAY117-W258073FDBEC69B6D67ACB0C5DD0@phx.gbl>

Hi Michael,
 
THANK YOU, tested and it works perfectly =)With Regards, Lester 'GaMerZ' Chanhttp://lesterchan.net



> From: mikea@turbonet.com> Subject: Re: [wp-hackers] Error: CHECKOUT 403 Forbidden> Date: Mon, 13 Aug 2007 23:30:09 -0700> To: wp-hackers@lists.automattic.com> > I think the 403 errors for the plugins repository should be fixed > now. If you still experience problems (that one or new ones :) ), > please let me know.> > Michael> _______________________________________________> wp-hackers mailing list> wp-hackers@lists.automattic.com> http://lists.automattic.com/mailman/listinfo/wp-hackers
_________________________________________________________________
Call friends with PC-to-PC calling for free!
http://get.live.com/messenger/overview
From sam.clark at polaris-digital.com  Tue Aug 14 12:13:58 2007
From: sam.clark at polaris-digital.com (sam.clark@polaris-digital.com)
Date: Tue Aug 14 12:01:43 2007
Subject: [wp-hackers] Re: wp-hackers Digest, Vol 31, Issue 16
Message-ID: <20070814121358.6362.qmail@s15216476.onlinehome-server.info>


Sam Clark is away on leave until Thursday 16th August, 2007. Your e-mail has been received and Sam will respond to it as soon as he returns.

Kind regards,


From jay.dedman at gmail.com  Tue Aug 14 13:56:26 2007
From: jay.dedman at gmail.com (Jay dedman)
Date: Tue Aug 14 13:56:32 2007
Subject: [wp-hackers] Text post, separate from video post
Message-ID: <34ced5f40708140656s2509d463y3df35211a09df853@mail.gmail.com>

Go a question for the group.
We're building a suite of plugins for videobloggers.
(you can see our work at showinabox.tv)

One need we have is the ability to let a blogger publish a text post
separate from a video post.

Here's an example of the look we want:
http://www.veracifier.com/
The newest video is always first...then it goes to the Archiive page
when another video is chosen.
Below is the text blog that can change multiple times each day.
So kits like there are two blogs on one page.

Anyone know of an existing plugin to make this happen?

jay

-- 
Here I am....
http://jaydedman.com
917 371 6790

Check out http://ryanishungry.com.
Two videos a week documenting the Green movement in all its different forms.
From casey.bisson at gmail.com  Tue Aug 14 14:25:03 2007
From: casey.bisson at gmail.com (Casey Bisson)
Date: Tue Aug 14 14:25:18 2007
Subject: [wp-hackers] Text post, separate from video post
In-Reply-To: <34ced5f40708140656s2509d463y3df35211a09df853@mail.gmail.com>
References: <34ced5f40708140656s2509d463y3df35211a09df853@mail.gmail.com>
Message-ID: <126A3A95-EAEA-4DCF-9979-23E5CDD6E91E@gmail.com>

I don't know of a plugin, but you should look at the query_posts  
function.

http://codex.wordpress.org/Template_Tags/query_posts

--Casey

On Aug 14, 2007, at 9:56 AM, Jay dedman wrote:

> Go a question for the group.
> We're building a suite of plugins for videobloggers.
> (you can see our work at showinabox.tv)
>
> One need we have is the ability to let a blogger publish a text post
> separate from a video post.
>
> Here's an example of the look we want:
> http://www.veracifier.com/
> The newest video is always first...then it goes to the Archiive page
> when another video is chosen.
> Below is the text blog that can change multiple times each day.
> So kits like there are two blogs on one page.
>
> Anyone know of an existing plugin to make this happen?
>
> jay
From dragonwing at dragonu.net  Wed Aug 15 04:42:48 2007
From: dragonwing at dragonu.net (Jacob Santos)
Date: Wed Aug 15 04:41:11 2007
Subject: [wp-hackers] phpdoc for taxonomy API
In-Reply-To: <46C0B8E5.1090309@branson.com>
References: <c8f37c930708131158n671ca0a7p993b3dd01098ff7f@mail.gmail.com>
	<46C0B8E5.1090309@branson.com>
Message-ID: <46C28448.5050406@dragonu.net>

I added a patch that adds phpDoc tags to the taxonomy API. Let me know 
what you think of the style. Basically it is more of a copy, paste, and 
edit for the simple functions. phpDoc is not that difficult, so just 
check over the notes and see if I'm correct in my assumptions. I'm going 
to be adding another patch depending on feedback.

Jacob Santos
>  
From joseph at randomnetworks.com  Wed Aug 15 04:56:31 2007
From: joseph at randomnetworks.com (Joseph Scott)
Date: Wed Aug 15 04:57:03 2007
Subject: [wp-hackers] phpdoc for taxonomy API
In-Reply-To: <46C28448.5050406@dragonu.net>
References: <c8f37c930708131158n671ca0a7p993b3dd01098ff7f@mail.gmail.com>
	<46C0B8E5.1090309@branson.com> <46C28448.5050406@dragonu.net>
Message-ID: <342DD70B-6F5D-4527-9D8A-8CFCDB3734BA@randomnetworks.com>


On Aug 14, 2007, at 10:42 PM, Jacob Santos wrote:

> I added a patch that adds phpDoc tags to the taxonomy API. Let me  
> know what you think of the style. Basically it is more of a copy,  
> paste, and edit for the simple functions. phpDoc is not that  
> difficult, so just check over the notes and see if I'm correct in  
> my assumptions. I'm going to be adding another patch depending on  
> feedback.


I think this looks like a great start.  I would avoid words like  
"appears" though.

Perhaps it would be best to leave out the text descriptions unless  
sure of what the function does.


--
Joseph Scott
http://joseph.randomnetworks.com/


From sam.clark at polaris-digital.com  Wed Aug 15 12:13:19 2007
From: sam.clark at polaris-digital.com (sam.clark@polaris-digital.com)
Date: Wed Aug 15 12:01:06 2007
Subject: [wp-hackers] Re: wp-hackers Digest, Vol 31, Issue 17
Message-ID: <20070815121319.15684.qmail@s15216476.onlinehome-server.info>


Sam Clark is away on leave until Thursday 16th August, 2007. Your e-mail has been received and Sam will respond to it as soon as he returns.

Kind regards,


From iacobs at m0n5t3r.info  Wed Aug 15 12:27:50 2007
From: iacobs at m0n5t3r.info (Sabin Iacob)
Date: Wed Aug 15 12:27:58 2007
Subject: [wp-hackers] Re: wp-hackers Digest, Vol 31, Issue 17
In-Reply-To: <20070815121319.15684.qmail@s15216476.onlinehome-server.info>
References: <20070815121319.15684.qmail@s15216476.onlinehome-server.info>
Message-ID: <46C2F146.2040905@m0n5t3r.info>

sam.clark@polaris-digital.com wrote:
> Sam Clark is away on leave until Thursday 16th August, 2007. Your e-mail has been received and Sam will respond to it as soon as he returns.
>
> Kind regards,
>   

yay, tomorrow's the last day we'll get one of these :D
From dragonwing at dragonu.net  Wed Aug 15 12:51:55 2007
From: dragonwing at dragonu.net (Jacob Santos)
Date: Wed Aug 15 12:50:20 2007
Subject: [wp-hackers] phpdoc for taxonomy API
In-Reply-To: <342DD70B-6F5D-4527-9D8A-8CFCDB3734BA@randomnetworks.com>
References: <c8f37c930708131158n671ca0a7p993b3dd01098ff7f@mail.gmail.com>	<46C0B8E5.1090309@branson.com>
	<46C28448.5050406@dragonu.net>
	<342DD70B-6F5D-4527-9D8A-8CFCDB3734BA@randomnetworks.com>
Message-ID: <46C2F6EB.2030509@dragonu.net>

Thanks, but until the original developer(s) of the API or someone 
confirms the phpDoc description, I'm going to keep it in.

What I did, was read the function code based on the parameters and 
create a flow. Based on if I was a hacker and needing to know what the 
functions were, I would make the assumptions based in the phpDoc. It is 
by no means meant to be a final patch.

I may have added my opinion with WP_Error usage. Which I think is 
interesting, but would have to be conveyed to the user as a possible 
return. On functions that don't return anything, I believe I also gave 
my opinion. Really, with those functions (or methods), you shouldn't use 
@returns because technically, no value is returned.

Jacob Santos

Joseph Scott wrote:
>
> On Aug 14, 2007, at 10:42 PM, Jacob Santos wrote:
>
>> I added a patch that adds phpDoc tags to the taxonomy API. Let me 
>> know what you think of the style. Basically it is more of a copy, 
>> paste, and edit for the simple functions. phpDoc is not that 
>> difficult, so just check over the notes and see if I'm correct in my 
>> assumptions. I'm going to be adding another patch depending on feedback.
>
>
> I think this looks like a great start.  I would avoid words like 
> "appears" though.
>
> Perhaps it would be best to leave out the text descriptions unless 
> sure of what the function does.
>
>
> -- 
> Joseph Scott
> http://joseph.randomnetworks.com/
>
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
From docwhat+list.wp.hackers at gerf.org  Wed Aug 15 13:10:03 2007
From: docwhat+list.wp.hackers at gerf.org (Christian =?iso-8859-1?Q?H=F6ltje?=)
Date: Wed Aug 15 13:10:09 2007
Subject: [wp-hackers] Re: Re: wp-hackers Digest, Vol 31, Issue 17
In-Reply-To: <46C2F146.2040905@m0n5t3r.info>
References: <20070815121319.15684.qmail@s15216476.onlinehome-server.info>
	<46C2F146.2040905@m0n5t3r.info>
Message-ID: <20070815131003.GB18149@gerf.org>

* Sabin Iacob (iacobs@m0n5t3r.info) [070815 08:28]:
> sam.clark@polaris-digital.com wrote:
> >Sam Clark is away on leave until Thursday 16th August, 2007. Your e-mail 
> >has been received and Sam will respond to it as soon as he returns.
> >
> >Kind regards,
> >  
> 
> yay, tomorrow's the last day we'll get one of these :D

Seriously.  What a twit. ;-)

Ciao!

-- 
This is Scrump. I made her, but her head is too big. So I
pretend a bug laid eggs in her ears, and she's upset because
she only has a few more days to....
         -- Lilo explaining her doll (Lilo & Stitch)

The Doctor What: Not that 'who' guy.             http://docwhat.gerf.org/
docwhat *at* gerf *dot* org                                        KF6VNC
From admin at laptoptips.ca  Wed Aug 15 17:19:45 2007
From: admin at laptoptips.ca (Andrew Ozz)
Date: Wed Aug 15 17:22:56 2007
Subject: [wp-hackers] Text post, separate from video post
In-Reply-To: <20070815120018.A9406674F@comox.textdrive.com>
References: <20070815120018.A9406674F@comox.textdrive.com>
Message-ID: <46C335B1.5090009@laptoptips.ca>

The easiest (best?) way to do this IMO is:

- have all video posts assigned to a special category,
- make a mini-loop with get_posts() above the "normal" loop that will 
get only the latest post from that category,
- and finally exclude the post that is shown in the mini-loop from the 
"normal" loop (so it doesn't show twice).

Or perhaps exclude all posts that are in that special category from the 
"normal" loop, leaving only the "text" posts there.


> Date: Tue, 14 Aug 2007 06:56:26 -0700
> From: "Jay dedman" <jay.dedman@gmail.com>
> Subject: [wp-hackers] Text post, separate from video post
> To: wp-hackers@lists.automattic.com
> Message-ID:
> 	<34ced5f40708140656s2509d463y3df35211a09df853@mail.gmail.com>
> Content-Type: text/plain; charset=ISO-8859-1
> 
> Go a question for the group.
> We're building a suite of plugins for videobloggers.
> (you can see our work at showinabox.tv)
> 
> One need we have is the ability to let a blogger publish a text post
> separate from a video post.
> 
> Here's an example of the look we want:
> http://www.veracifier.com/
> The newest video is always first...then it goes to the Archiive page
> when another video is chosen.
> Below is the text blog that can change multiple times each day.
> So kits like there are two blogs on one page.
> 
> Anyone know of an existing plugin to make this happen?
> 
> jay
> 
From jay.dedman at gmail.com  Wed Aug 15 18:25:46 2007
From: jay.dedman at gmail.com (Jay dedman)
Date: Wed Aug 15 18:25:51 2007
Subject: [wp-hackers] Text post, separate from video post
In-Reply-To: <46C335B1.5090009@laptoptips.ca>
References: <20070815120018.A9406674F@comox.textdrive.com>
	<46C335B1.5090009@laptoptips.ca>
Message-ID: <34ced5f40708151125s7f0802d5i7b061c1777dc2e6c@mail.gmail.com>

On 8/15/07, Andrew Ozz <admin@laptoptips.ca> wrote:
> The easiest (best?) way to do this IMO is:
> - have all video posts assigned to a special category,
> - make a mini-loop with get_posts() above the "normal" loop that will
> get only the latest post from that category,
> - and finally exclude the post that is shown in the mini-loop from the
> "normal" loop (so it doesn't show twice).
> Or perhaps exclude all posts that are in that special category from the
> "normal" loop, leaving only the "text" posts there.

we've been putting our heads around this kind of solution.
Its smart.
Would happen to know of an example we could look at?

Jay




-- 
Here I am....
http://jaydedman.com
917 371 6790

Check out http://ryanishungry.com.
Two videos a week documenting the Green movement in all its different forms.
From wp-hackers at striderweb.com  Wed Aug 15 18:54:43 2007
From: wp-hackers at striderweb.com (Stephen Rider)
Date: Wed Aug 15 18:54:50 2007
Subject: [wp-hackers] Text post, separate from video post
In-Reply-To: <34ced5f40708151125s7f0802d5i7b061c1777dc2e6c@mail.gmail.com>
References: <20070815120018.A9406674F@comox.textdrive.com>
	<46C335B1.5090009@laptoptips.ca>
	<34ced5f40708151125s7f0802d5i7b061c1777dc2e6c@mail.gmail.com>
Message-ID: <AC83510D-A36F-4B8A-AF91-5C0ACC2C2451@striderweb.com>


On Aug 15, 2007, at 1:25 PM, Jay dedman wrote:

> On 8/15/07, Andrew Ozz <admin@laptoptips.ca> wrote:
>> The easiest (best?) way to do this IMO is:
>> - have all video posts assigned to a special category,
>> - make a mini-loop with get_posts() above the "normal" loop that will
>> get only the latest post from that category,
>> - and finally exclude the post that is shown in the mini-loop from  
>> the
>> "normal" loop (so it doesn't show twice).
>> Or perhaps exclude all posts that are in that special category  
>> from the
>> "normal" loop, leaving only the "text" posts there.
>
> we've been putting our heads around this kind of solution.
> Its smart.
> Would happen to know of an example we could look at?

You might look into various solutions people have come up with for  
doing "asides" for hints at this.

Stephen
From wp-hackers at striderweb.com  Wed Aug 15 21:04:39 2007
From: wp-hackers at striderweb.com (Stephen Rider)
Date: Wed Aug 15 21:04:47 2007
Subject: [wp-hackers] Modify search function?
Message-ID: <64320E0B-6CEA-4D29-8FAE-F1981FBC7107@striderweb.com>

Hi --

I'm trying to work out a system (possibly a plugin) that will allow a  
certain amount of cross-over between two different blogs in the same  
database (that is, different table-prefixes).

The two things I'm aiming for are the ability to Search both blogs in  
one search, and the ability for one blog to see the "Pages" list of  
the other.  (Maybe also to pull up a combined list of Pages from both  
blogs.)

I'm well on the way to the cross-pages list, but completely flummoxed  
with the Search.

Can somebody tell me where to find the actual function that runs the  
"Search" box?  I would like to make modifications to it, but I'm  
puzzled as to the function that actually goes to the database and  
returns results.

Overall, any info or tips that might assist would be appreciated.

Thanks!

Stephen


-- 
Stephen Rider
<http://striderweb.com/>



From paul at codehooligans.com  Wed Aug 15 21:11:19 2007
From: paul at codehooligans.com (Paul Menard)
Date: Wed Aug 15 21:09:07 2007
Subject: [wp-hackers] Modify search function?
In-Reply-To: <64320E0B-6CEA-4D29-8FAE-F1981FBC7107@striderweb.com>
References: <64320E0B-6CEA-4D29-8FAE-F1981FBC7107@striderweb.com>
Message-ID: <41E17777-FC73-4EEF-9502-90B92E7CA8CA@codehooligans.com>

Well I would try downloading and reading through the code used by the  
Search Everything plugin. I don't think it will solve your desire to  
search dual sites but it will provide some insight into the search  
hooks used. Then you can add your own functions.

http://wordpress.org/extend/plugins/search-everything/

Paul


On Aug 15, 2007, at 4:04 PM, Stephen Rider wrote:

> Hi --
>
> I'm trying to work out a system (possibly a plugin) that will allow  
> a certain amount of cross-over between two different blogs in the  
> same database (that is, different table-prefixes).
>
> The two things I'm aiming for are the ability to Search both blogs  
> in one search, and the ability for one blog to see the "Pages" list  
> of the other.  (Maybe also to pull up a combined list of Pages from  
> both blogs.)
>
> I'm well on the way to the cross-pages list, but completely  
> flummoxed with the Search.
>
> Can somebody tell me where to find the actual function that runs  
> the "Search" box?  I would like to make modifications to it, but  
> I'm puzzled as to the function that actually goes to the database  
> and returns results.
>
> Overall, any info or tips that might assist would be appreciated.
>
> Thanks!
>
> Stephen
>
>
> -- 
> Stephen Rider
> <http://striderweb.com/>
>
>
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

From m at mullenweg.com  Wed Aug 15 21:44:44 2007
From: m at mullenweg.com (Matt Mullenweg)
Date: Wed Aug 15 21:44:50 2007
Subject: [wp-hackers] Modify search function?
In-Reply-To: <64320E0B-6CEA-4D29-8FAE-F1981FBC7107@striderweb.com>
References: <64320E0B-6CEA-4D29-8FAE-F1981FBC7107@striderweb.com>
Message-ID: <46C373CC.9070408@mullenweg.com>

Stephen Rider wrote:
> I'm trying to work out a system (possibly a plugin) that will allow a 
> certain amount of cross-over between two different blogs in the same 
> database (that is, different table-prefixes).

Another cool way to combine things might be via RSS. Every search in WP 
can also generate an RSS feed:

http://photomatt.net/?s=totally&feed=rss2

Just add feed=rss2 to the query string.

-- 
Matt Mullenweg
  http://photomatt.net | http://wordpress.org
http://automattic.com | http://akismet.com
From daya at meyshan.com  Thu Aug 16 03:02:55 2007
From: daya at meyshan.com (dayaparan ponnambalam)
Date: Thu Aug 16 03:03:02 2007
Subject: [wp-hackers] Modify search function?
In-Reply-To: <41E17777-FC73-4EEF-9502-90B92E7CA8CA@codehooligans.com>
References: <64320E0B-6CEA-4D29-8FAE-F1981FBC7107@striderweb.com>
	<41E17777-FC73-4EEF-9502-90B92E7CA8CA@codehooligans.com>
Message-ID: <e50d103b0708152002p87e6f2euf65859ecf7e0c7ea@mail.gmail.com>

instead of search everything plugin, you must use meyshan ultimate search
plugin, which is much better, and i guess that should solve your problem.
http://gallery.yahoo.com/apps/8324

On 8/16/07, Paul Menard <paul@codehooligans.com> wrote:
>
> Well I would try downloading and reading through the code used by the
> Search Everything plugin. I don't think it will solve your desire to
> search dual sites but it will provide some insight into the search
> hooks used. Then you can add your own functions.
>
> http://wordpress.org/extend/plugins/search-everything/
>
> Paul
>
>
> On Aug 15, 2007, at 4:04 PM, Stephen Rider wrote:
>
> > Hi --
> >
> > I'm trying to work out a system (possibly a plugin) that will allow
> > a certain amount of cross-over between two different blogs in the
> > same database (that is, different table-prefixes).
> >
> > The two things I'm aiming for are the ability to Search both blogs
> > in one search, and the ability for one blog to see the "Pages" list
> > of the other.  (Maybe also to pull up a combined list of Pages from
> > both blogs.)
> >
> > I'm well on the way to the cross-pages list, but completely
> > flummoxed with the Search.
> >
> > Can somebody tell me where to find the actual function that runs
> > the "Search" box?  I would like to make modifications to it, but
> > I'm puzzled as to the function that actually goes to the database
> > and returns results.
> >
> > Overall, any info or tips that might assist would be appreciated.
> >
> > Thanks!
> >
> > Stephen
> >
> >
> > --
> > Stephen Rider
> > <http://striderweb.com/>
> >
> >
> >
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers@lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
From ozh at planetozh.com  Thu Aug 16 14:00:24 2007
From: ozh at planetozh.com (Ozh)
Date: Thu Aug 16 14:00:29 2007
Subject: [wp-hackers] protecting wp-content/plugins ?
Message-ID: <ae81acd10708160700s596e5d93w6086b76c45f73710@mail.gmail.com>

Hello there

I wonder: how come there is no blank index.html file sitting in
wp-content/plugins ? This is such a trivial thing to do that I suspect
there must have been some ruling against it by the past (although I
cannot really see any reason why one shouldnt have this file)

I think it would greatly decrease script kiddies ability to discover
exploitable plugins in open directories
(http://www.google.com/search?q=inurl:"wp-content/plugins"+intitle:"index
of")


Cheers
Ozh

-- 
http://FrenchFragFactory.net ~ Daily Quake News
   http://planetOzh.com ~ Useless Blog & Code
From james at freecharity.org.uk  Thu Aug 16 14:14:02 2007
From: james at freecharity.org.uk (James Davis)
Date: Thu Aug 16 14:14:12 2007
Subject: [wp-hackers] protecting wp-content/plugins ?
In-Reply-To: <ae81acd10708160700s596e5d93w6086b76c45f73710@mail.gmail.com>
References: <ae81acd10708160700s596e5d93w6086b76c45f73710@mail.gmail.com>
Message-ID: <46C45BAA.6060008@freecharity.org.uk>

Ozh wrote:

> I wonder: how come there is no blank index.html file sitting in
> wp-content/plugins ? This is such a trivial thing to do that I suspect
> there must have been some ruling against it by the past (although I
> cannot really see any reason why one shouldnt have this file)

It'd be a nasty hack, hiding what is really an issue with the web
server's configuration.  If you think this is an issue you will almost
certainly want to address it across everything and not just WordPress.

This risks of allowing directory indexing might be something to mention
in the documentation if it's not already but that's all I think it needs.

James

-- 
http://www.freecharity.org.uk/ - Free IT services for charities
http://www.freecharity.org.uk/wiki/ - The VCSWiki
From ozh at planetozh.com  Thu Aug 16 14:27:18 2007
From: ozh at planetozh.com (Ozh)
Date: Thu Aug 16 14:27:23 2007
Subject: [wp-hackers] protecting wp-content/plugins ?
In-Reply-To: <46C45BAA.6060008@freecharity.org.uk>
References: <ae81acd10708160700s596e5d93w6086b76c45f73710@mail.gmail.com>
	<46C45BAA.6060008@freecharity.org.uk>
Message-ID: <ae81acd10708160727k3bd6c978rdfc5c46027e6d655@mail.gmail.com>

Why nasty ? /wp-content has had its blank index.php for ages, but it's
pretty useless and should rather "protect" plugins & themes

As for it being a web server configuration, well, for sure. Except
that 98% of WordPress bloggers have no control and choice over their
shared hosting apache config.

Cheers,

Ozh

On 8/16/07, James Davis <james@freecharity.org.uk> wrote:
> Ozh wrote:
>
> > I wonder: how come there is no blank index.html file sitting in
> > wp-content/plugins ? This is such a trivial thing to do that I suspect
> > there must have been some ruling against it by the past (although I
> > cannot really see any reason why one shouldnt have this file)
>
> It'd be a nasty hack, hiding what is really an issue with the web
> server's configuration.  If you think this is an issue you will almost
> certainly want to address it across everything and not just WordPress.
>
> This risks of allowing directory indexing might be something to mention
> in the documentation if it's not already but that's all I think it needs.
>
> James
>
> --
> http://www.freecharity.org.uk/ - Free IT services for charities
> http://www.freecharity.org.uk/wiki/ - The VCSWiki
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>


-- 
http://FrenchFragFactory.net ~ Daily Quake News
   http://planetOzh.com ~ Useless Blog & Code
From james at freecharity.org.uk  Thu Aug 16 14:38:07 2007
From: james at freecharity.org.uk (James Davis)
Date: Thu Aug 16 14:38:16 2007
Subject: [wp-hackers] protecting wp-content/plugins ?
In-Reply-To: <ae81acd10708160727k3bd6c978rdfc5c46027e6d655@mail.gmail.com>
References: <ae81acd10708160700s596e5d93w6086b76c45f73710@mail.gmail.com>	<46C45BAA.6060008@freecharity.org.uk>
	<ae81acd10708160727k3bd6c978rdfc5c46027e6d655@mail.gmail.com>
Message-ID: <46C4614F.8070704@freecharity.org.uk>

Ozh wrote:
> Why nasty ? /wp-content has had its blank index.php for ages, but it's
> pretty useless and should rather "protect" plugins & themes

It's nasty as it masks a larger problem.

So it does. If that's the reason why it's there - I can at least agree
that things should be done consistently one way or t'other.

James

-- 
http://www.freecharity.org.uk/ - Free IT services for charities
http://www.freecharity.org.uk/wiki/ - The VCSWiki
From dancameron at gmail.com  Thu Aug 16 14:54:20 2007
From: dancameron at gmail.com (Daniel Cameron)
Date: Thu Aug 16 14:54:25 2007
Subject: [wp-hackers] RE: RE: Modify search function?
Message-ID: <7cf9ae490708160754y631af8f4j8a8b005295e43c68@mail.gmail.com>

Stephan,
Well I can't compete with that modal box that meyshan provides but I have a
similar plugin that instead uses Google's AJAX API which in search results
from your main blog and other custom URIs, i.e. you second blog or flickr.
Otherwise if these don't help, I always accept code contributions to my
plugins if you ever make SE work out for what you want.
--
Dan
http://dancameron.org/wordpress
-->
http://dancameron.org/wordpress/wordpress-plugins/google-ajax-search-plugin/


Date: Thu, 16 Aug 2007 08:32:55 +0530
>
> instead of search everything plugin, you must use meyshan ultimate search
> plugin, which is much better, and i guess that should solve your problem.
> http://gallery.yahoo.com/apps/8324
>
> On 8/16/07, Paul Menard <paul@codehooligans.com> wrote:
> >
> > Well I would try downloading and reading through the code used by the
> > Search Everything plugin. I don't think it will solve your desire to
> > search dual sites but it will provide some insight into the search
> > hooks used. Then you can add your own functions.
> >
> > http://wordpress.org/extend/plugins/search-everything/
> >
> > Paul
> >
> >
> > On Aug 15, 2007, at 4:04 PM, Stephen Rider wrote:
> >
> > > Hi --
> > >
> > > I'm trying to work out a system (possibly a plugin) that will allow
> > > a certain amount of cross-over between two different blogs in the
> > > same database (that is, different table-prefixes).
> > >
> > > The two things I'm aiming for are the ability to Search both blogs
> > > in one search, and the ability for one blog to see the "Pages" list
> > > of the other.  (Maybe also to pull up a combined list of Pages from
> > > both blogs.)
> > >
> > > I'm well on the way to the cross-pages list, but completely
> > > flummoxed with the Search.
> > >
> > > Can somebody tell me where to find the actual function that runs
> > > the "Search" box?  I would like to make modifications to it, but
> > > I'm puzzled as to the function that actually goes to the database
> > > and returns results.
> > >
> > > Overall, any info or tips that might assist would be appreciated.
> > >
> > > Thanks!
> > >
> > > Stephen
> > >
> > >
> > > --
> > > Stephen Rider
> > > <http://striderweb.com/>
> > >
From zamoose at gmail.com  Thu Aug 16 15:09:53 2007
From: zamoose at gmail.com (Doug Stewart)
Date: Thu Aug 16 15:09:59 2007
Subject: [wp-hackers] protecting wp-content/plugins ?
In-Reply-To: <71ddd7490708160746m2b7582f3p83987c1127587a49@mail.gmail.com>
References: <ae81acd10708160700s596e5d93w6086b76c45f73710@mail.gmail.com>
	<46C45BAA.6060008@freecharity.org.uk>
	<ae81acd10708160727k3bd6c978rdfc5c46027e6d655@mail.gmail.com>
	<46C4614F.8070704@freecharity.org.uk>
	<71ddd7490708160746m2b7582f3p83987c1127587a49@mail.gmail.com>
Message-ID: <71ddd7490708160809s76f4c28br4007bfa5bf3115d0@mail.gmail.com>

D'oh, looks like we had some cross-mojonation going on -- 4759 looks
like yours...

On 8/16/07, Doug Stewart <zamoose@gmail.com> wrote:
> I just submitted Trac ticket 4760 on this issue.
>
> On 8/16/07, James Davis <james@freecharity.org.uk> wrote:
> > Ozh wrote:
> > > Why nasty ? /wp-content has had its blank index.php for ages, but it's
> > > pretty useless and should rather "protect" plugins & themes
> >
> > It's nasty as it masks a larger problem.
> >
> > So it does. If that's the reason why it's there - I can at least agree
> > that things should be done consistently one way or t'other.
> >
> > James
> >
> > --
> > http://www.freecharity.org.uk/ - Free IT services for charities
> > http://www.freecharity.org.uk/wiki/ - The VCSWiki
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers@lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> >
>
>
> --
> -Doug
>
> http://literalbarrage.org/blog/
>


-- 
-Doug

http://literalbarrage.org/blog/
From zamoose at gmail.com  Thu Aug 16 14:46:06 2007
From: zamoose at gmail.com (Doug Stewart)
Date: Thu Aug 16 15:14:55 2007
Subject: [wp-hackers] protecting wp-content/plugins ?
In-Reply-To: <46C4614F.8070704@freecharity.org.uk>
References: <ae81acd10708160700s596e5d93w6086b76c45f73710@mail.gmail.com>
	<46C45BAA.6060008@freecharity.org.uk>
	<ae81acd10708160727k3bd6c978rdfc5c46027e6d655@mail.gmail.com>
	<46C4614F.8070704@freecharity.org.uk>
Message-ID: <71ddd7490708160746m2b7582f3p83987c1127587a49@mail.gmail.com>

I just submitted Trac ticket 4760 on this issue.

On 8/16/07, James Davis <james@freecharity.org.uk> wrote:
> Ozh wrote:
> > Why nasty ? /wp-content has had its blank index.php for ages, but it's
> > pretty useless and should rather "protect" plugins & themes
>
> It's nasty as it masks a larger problem.
>
> So it does. If that's the reason why it's there - I can at least agree
> that things should be done consistently one way or t'other.
>
> James
>
> --
> http://www.freecharity.org.uk/ - Free IT services for charities
> http://www.freecharity.org.uk/wiki/ - The VCSWiki
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>


-- 
-Doug

http://literalbarrage.org/blog/
From awarner20 at yahoo.com  Thu Aug 16 20:43:52 2007
From: awarner20 at yahoo.com (One Eyed View)
Date: Thu Aug 16 20:43:58 2007
Subject: [wp-hackers] Embed WP Post in Page outside WP. Tried,
	but getting error.
Message-ID: <12180557.post@talk.nabble.com>


Hi everyone, this is my first post here (just found this list). I have a
question about embedding a WP post in my .php page outside of my WP
installation. I'm trying to include just the latest post on the main page of
my site. Seems relatively easy right?

I found this thread on the WP forums
http://wordpress.org/support/topic/83086. Here what it says...

Any page that is outside the WP installation can still have WP stuff on it.
Just add this to the top of the page:

<?php require('pathtoyourwordpressinstall/wp-blog-header.php'); ?>

So, if you put that little bit of code at the top of the page, this should
work to display the most recent post:
<?php
$posts = get_posts('numberposts=1');
foreach($posts as $post) :
setup_postdata($post);
?>
"<?php the_permalink(); ? " id="post-<?php the_ID(); ?>"><?php the_title();
?> 
<?php the_content(); ?>
<?php endforeach; ?>

So, I tried this and I am getting an error: Fatal error: Call to undefined
function: get_posts() in
/home/content/a/a/a/myusername/html/newsite/index.php on line 78

The file I am including, wp-blog-header.php seems to includes this line:
require_once( dirname(__FILE__) . '/wp-includes/functions.php');

I've looked inside the functions.php page and searched for get_posts(), but
did not see a reference to it.

My main page is here: http://mysite.com/newsite/index.php
My blog is here: http://mysite.com/blog/
I am using the latest version of WP (Version 2.2.2)

Would anyone here be able to clue me in as to what's going wrong here, or
maybe point me in the right direction of where to look? I would be very
appreciative.

Sincerely,


Adam
-- 
View this message in context: http://www.nabble.com/Embed-WP-Post-in-Page-outside-WP.-Tried%2C-but-getting-error.-tf4279389.html#a12180557
Sent from the Wordpress Hackers mailing list archive at Nabble.com.

From MattPat at mattpat.net  Thu Aug 16 20:55:14 2007
From: MattPat at mattpat.net (Matt Patenaude)
Date: Thu Aug 16 20:55:22 2007
Subject: [wp-hackers] Embed WP Post in Page outside WP. Tried,
	but getting error.
In-Reply-To: <12180557.post@talk.nabble.com>
References: <12180557.post@talk.nabble.com>
Message-ID: <898ED256-5515-4A4B-AD15-D5EC42639A77@mattpat.net>

Logically speaking, the file should be included just fine-- it's  
included from wp-settings.php, which is included from wp-config.php  
(which is included by wp-blog-header.php). Make sure the requirement  
is going to the proper file, perhaps? Other than that, I'm not sure.

Just my two cents. :P

-Matt

On Aug 16, 2007, at 4:43 PM, One Eyed View wrote:

>
> Hi everyone, this is my first post here (just found this list). I  
> have a
> question about embedding a WP post in my .php page outside of my WP
> installation. I'm trying to include just the latest post on the  
> main page of
> my site. Seems relatively easy right?
>
> I found this thread on the WP forums
> http://wordpress.org/support/topic/83086. Here what it says...
>
> Any page that is outside the WP installation can still have WP  
> stuff on it.
> Just add this to the top of the page:
>
> <?php require('pathtoyourwordpressinstall/wp-blog-header.php'); ?>
>
> So, if you put that little bit of code at the top of the page, this  
> should
> work to display the most recent post:
> <?php
> $posts = get_posts('numberposts=1');
> foreach($posts as $post) :
> setup_postdata($post);
> ?>
> "<?php the_permalink(); ? " id="post-<?php the_ID(); ?>"><?php  
> the_title();
> ?>
> <?php the_content(); ?>
> <?php endforeach; ?>
>
> So, I tried this and I am getting an error: Fatal error: Call to  
> undefined
> function: get_posts() in
> /home/content/a/a/a/myusername/html/newsite/index.php on line 78
>
> The file I am including, wp-blog-header.php seems to includes this  
> line:
> require_once( dirname(__FILE__) . '/wp-includes/functions.php');
>
> I've looked inside the functions.php page and searched for get_posts 
> (), but
> did not see a reference to it.
>
> My main page is here: http://mysite.com/newsite/index.php
> My blog is here: http://mysite.com/blog/
> I am using the latest version of WP (Version 2.2.2)
>
> Would anyone here be able to clue me in as to what's going wrong  
> here, or
> maybe point me in the right direction of where to look? I would be  
> very
> appreciative.
>
> Sincerely,
>
>
> Adam
> -- 
> View this message in context: http://www.nabble.com/Embed-WP-Post- 
> in-Page-outside-WP.-Tried%2C-but-getting-error.- 
> tf4279389.html#a12180557
> Sent from the Wordpress Hackers mailing list archive at Nabble.com.
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

From jacobsantos at branson.com  Thu Aug 16 20:56:27 2007
From: jacobsantos at branson.com (jacobsantos@branson.com)
Date: Thu Aug 16 21:01:05 2007
Subject: [wp-hackers] Embed WP Post in Page outside WP. Tried, but getting
	error.
In-Reply-To: <12180557.post@talk.nabble.com>
References: <12180557.post@talk.nabble.com>
Message-ID: <46C4B9FB.4000304@branson.com>

<?php
require dirname(__FILE__).'/../blog/wp-config.php';
require('pathtoyourwordpressinstall/wp-blog-header.php');
?>

Wp-config.php includes wp-settings.php which includes all required files.

Jacob Santos

One Eyed View wrote:
> Hi everyone, this is my first post here (just found this list). I have a
> question about embedding a WP post in my .php page outside of my WP
> installation. I'm trying to include just the latest post on the main page of
> my site. Seems relatively easy right?
>
> I found this thread on the WP forums
> http://wordpress.org/support/topic/83086. Here what it says...
>
> Any page that is outside the WP installation can still have WP stuff on it.
> Just add this to the top of the page:
>
> <?php require('pathtoyourwordpressinstall/wp-blog-header.php'); ?>
>
> So, if you put that little bit of code at the top of the page, this should
> work to display the most recent post:
> <?php
> $posts = get_posts('numberposts=1');
> foreach($posts as $post) :
> setup_postdata($post);
> ?>
> "<?php the_permalink(); ? " id="post-<?php the_ID(); ?>"><?php the_title();
> ?> 
> <?php the_content(); ?>
> <?php endforeach; ?>
>
> So, I tried this and I am getting an error: Fatal error: Call to undefined
> function: get_posts() in
> /home/content/a/a/a/myusername/html/newsite/index.php on line 78
>
> The file I am including, wp-blog-header.php seems to includes this line:
> require_once( dirname(__FILE__) . '/wp-includes/functions.php');
>
> I've looked inside the functions.php page and searched for get_posts(), but
> did not see a reference to it.
>
> My main page is here: http://mysite.com/newsite/index.php
> My blog is here: http://mysite.com/blog/
> I am using the latest version of WP (Version 2.2.2)
>
> Would anyone here be able to clue me in as to what's going wrong here, or
> maybe point me in the right direction of where to look? I would be very
> appreciative.
>
> Sincerely,
>
>
> Adam
>   

From wp-hackers at striderweb.com  Thu Aug 16 21:25:08 2007
From: wp-hackers at striderweb.com (Stephen Rider)
Date: Thu Aug 16 21:25:14 2007
Subject: [wp-hackers] & function name?
Message-ID: <D1A33870-94E4-4CD7-B01B-62567B82C827@striderweb.com>

I'm looking at the get_pages function, (which isn't documented at  
all, darnit....) and am confused by the way it is defined.

post.php, line 1059:

function &get_pages($args = '') {

What is the meaning of the ampersand at the beginning of the function  
name?  According to the PHP docs, function names start with a letter  
or understroke.  Is this a typo?

Stephen
From mark.wordpress at txfx.net  Thu Aug 16 21:53:22 2007
From: mark.wordpress at txfx.net (Mark Jaquith)
Date: Thu Aug 16 21:53:51 2007
Subject: [wp-hackers] & function name?
In-Reply-To: <D1A33870-94E4-4CD7-B01B-62567B82C827@striderweb.com>
References: <D1A33870-94E4-4CD7-B01B-62567B82C827@striderweb.com>
Message-ID: <73F7A722-7C66-4571-961A-6FCE483B5F42@txfx.net>

On Aug 16, 2007, at 5:25 PM, Stephen Rider wrote:

> What is the meaning of the ampersand at the beginning of the  
> function name?  According to the PHP docs, function names start  
> with a letter or understroke.  Is this a typo?

http://www.php.net/manual/en/language.references.return.php

--
Mark Jaquith
http://markjaquith.com/

Covered Web Services
http://coveredwebservices.com/

WordPress Ninja @ b5media Inc
http://b5media.com/


From awarner20 at yahoo.com  Thu Aug 16 22:49:16 2007
From: awarner20 at yahoo.com (One Eyed View)
Date: Thu Aug 16 22:49:22 2007
Subject: [wp-hackers] Embed WP Post in Page outside WP. Tried, but
	getting error.
In-Reply-To: <46C4B9FB.4000304@branson.com>
References: <12180557.post@talk.nabble.com> <46C4B9FB.4000304@branson.com>
Message-ID: <12190851.post@talk.nabble.com>


Jacob,

Thank you sso much, this worked perfectly! I hope this helps others in the
future!



jacobsantos@branson.com wrote:
> 
> <?php
> require dirname(__FILE__).'/../blog/wp-config.php';
> require('pathtoyourwordpressinstall/wp-blog-header.php');
> ?>
> 
> Wp-config.php includes wp-settings.php which includes all required files.
> 
> Jacob Santos
> 
> One Eyed View wrote:
>> Hi everyone, this is my first post here (just found this list). I have a
>> question about embedding a WP post in my .php page outside of my WP
>> installation. I'm trying to include just the latest post on the main page
>> of
>> my site. Seems relatively easy right?
>>
>> I found this thread on the WP forums
>> http://wordpress.org/support/topic/83086. Here what it says...
>>
>> Any page that is outside the WP installation can still have WP stuff on
>> it.
>> Just add this to the top of the page:
>>
>> <?php require('pathtoyourwordpressinstall/wp-blog-header.php'); ?>
>>
>> So, if you put that little bit of code at the top of the page, this
>> should
>> work to display the most recent post:
>> <?php
>> $posts = get_posts('numberposts=1');
>> foreach($posts as $post) :
>> setup_postdata($post);
>> ?>
>> "<?php the_permalink(); ? " id="post-<?php the_ID(); ?>"><?php
>> the_title();
>> ?> 
>> <?php the_content(); ?>
>> <?php endforeach; ?>
>>
>> So, I tried this and I am getting an error: Fatal error: Call to
>> undefined
>> function: get_posts() in
>> /home/content/a/a/a/myusername/html/newsite/index.php on line 78
>>
>> The file I am including, wp-blog-header.php seems to includes this line:
>> require_once( dirname(__FILE__) . '/wp-includes/functions.php');
>>
>> I've looked inside the functions.php page and searched for get_posts(),
>> but
>> did not see a reference to it.
>>
>> My main page is here: http://mysite.com/newsite/index.php
>> My blog is here: http://mysite.com/blog/
>> I am using the latest version of WP (Version 2.2.2)
>>
>> Would anyone here be able to clue me in as to what's going wrong here, or
>> maybe point me in the right direction of where to look? I would be very
>> appreciative.
>>
>> Sincerely,
>>
>>
>> Adam
>>   
> 
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
> 
> 

-- 
View this message in context: http://www.nabble.com/Embed-WP-Post-in-Page-outside-WP.-Tried%2C-but-getting-error.-tf4279389.html#a12190851
Sent from the Wordpress Hackers mailing list archive at Nabble.com.

From mark.wordpress at txfx.net  Fri Aug 17 03:43:29 2007
From: mark.wordpress at txfx.net (Mark Jaquith)
Date: Fri Aug 17 03:43:46 2007
Subject: [wp-hackers] IIS Testers needed for Trunk
Message-ID: <343BF8EA-3A1C-4270-B0C1-50A7EAEC9A96@txfx.net>

I need help from IIS users for the following Trunk changesets:

? http://trac.wordpress.org/changeset/5889
? http://trac.wordpress.org/changeset/5890

Specifically, people using fancy permalinks (i.e. NOT ?p=x).  If  
[5889] isn't right, [5890] has the potential to fail spectacularly,  
as [5890] depends on $_SERVER['REQUEST_URI'] looking how it looks on  
Apache et al.

--
Mark Jaquith
http://markjaquith.com/

Covered Web Services
http://coveredwebservices.com/

WordPress Ninja @ b5media Inc
http://b5media.com/


From docwhat+list.wp.hackers at gerf.org  Fri Aug 17 13:18:37 2007
From: docwhat+list.wp.hackers at gerf.org (Christian =?iso-8859-1?Q?H=F6ltje?=)
Date: Fri Aug 17 13:18:41 2007
Subject: [wp-hackers] Re: protecting wp-content/plugins ?
In-Reply-To: <71ddd7490708160809s76f4c28br4007bfa5bf3115d0@mail.gmail.com>
References: <ae81acd10708160700s596e5d93w6086b76c45f73710@mail.gmail.com>
	<46C45BAA.6060008@freecharity.org.uk>
	<ae81acd10708160727k3bd6c978rdfc5c46027e6d655@mail.gmail.com>
	<46C4614F.8070704@freecharity.org.uk>
	<71ddd7490708160746m2b7582f3p83987c1127587a49@mail.gmail.com>
	<71ddd7490708160809s76f4c28br4007bfa5bf3115d0@mail.gmail.com>
Message-ID: <20070817131837.GE1251@gerf.org>

In addition to adding a blank index file (I prefer index.html, my
self, just because it cannot run code even accidentally), I have an
apache rule like this...

RewriteCond %{REQUEST_FILENAME} !\.(css|gif|js|png|xml|xsl)$
RewriteRule ^/(wp-includes|wp-content)/ - [F,L]

It prevents people from scanning for plugins by the php files.
Obviously, additional files will be visible, but they leave their
fingerprint anyway.

Ciao!

-- 
Statistics cannot refute logic
       -- Murray N. Rothbard, Making Economic Sense,
                              Chapter 2: Ten Great Economic Myths

The Doctor What: A Holtje Production             http://docwhat.gerf.org/
docwhat *at* gerf *dot* org                                        KF6VNC
From clwoodard at gmail.com  Fri Aug 17 17:58:44 2007
From: clwoodard at gmail.com (Curt Woodard)
Date: Fri Aug 17 17:58:50 2007
Subject: [wp-hackers] Files associated with table *_users
Message-ID: <a3b809ae0708171058q676d9dacg613ddef3c8bfa625@mail.gmail.com>

Was curious as to exactly which files are affected by and access the
*_users table in WordPress 2.0.

Why?

I'm tired of dealing with multiple user tables for different things
and want to use SMF's user table for WordPress just as I have for
MediaWiki.

I want to disable anything that uses the WordPress tables for user
information and instead use SMF's.

Any information would be greatly appreciated.

Thanks,
-Excalibur
From m at mullenweg.com  Fri Aug 17 18:05:26 2007
From: m at mullenweg.com (Matt Mullenweg)
Date: Fri Aug 17 18:05:50 2007
Subject: [wp-hackers] Files associated with table *_users
In-Reply-To: <a3b809ae0708171058q676d9dacg613ddef3c8bfa625@mail.gmail.com>
References: <a3b809ae0708171058q676d9dacg613ddef3c8bfa625@mail.gmail.com>
Message-ID: <46C5E366.5020703@mullenweg.com>

Curt Woodard wrote:
> Was curious as to exactly which files are affected by and access the
> *_users table in WordPress 2.0.

Grep through the code for $wpdb->users and $wpdb->usermeta and you'll 
see all the places we query those tables.

-- 
Matt Mullenweg
  http://photomatt.net | http://wordpress.org
http://automattic.com | http://akismet.com
From ag.ml2007 at zirona.com  Fri Aug 17 18:17:15 2007
From: ag.ml2007 at zirona.com (Alex =?ISO-8859-1?Q?G=FCnsche?=)
Date: Fri Aug 17 18:17:27 2007
Subject: [wp-hackers] Files associated with table *_users
In-Reply-To: <a3b809ae0708171058q676d9dacg613ddef3c8bfa625@mail.gmail.com>
References: <a3b809ae0708171058q676d9dacg613ddef3c8bfa625@mail.gmail.com>
Message-ID: <1187374635.6047.3.camel@localhost>

On Fri, 2007-08-17 at 13:58 -0400, Curt Woodard wrote:
> I want to disable anything that uses the WordPress tables for user
> information and instead use SMF's.

A better solution for this would be writing a plugin which handles the
authentication against your other system. This will make upgrading much
easier. (Don't forget to write a replacement for the pluggable function
wp_get_current_user().)

Best regards,
Alex

-- 
Alex G?nsche, Zirona OpenSource-Consulting
Blogs: http://www.zirona.com/ | http://www.regularimpressions.net
PubKey for this address: http://www.zirona.com/misc/ag.ml2007.asc

From speedboxer at gmail.com  Fri Aug 17 19:27:21 2007
From: speedboxer at gmail.com (Matt)
Date: Fri Aug 17 19:27:25 2007
Subject: [wp-hackers] protecting wp-content/plugins ?
In-Reply-To: <ae81acd10708160727k3bd6c978rdfc5c46027e6d655@mail.gmail.com>
References: <ae81acd10708160700s596e5d93w6086b76c45f73710@mail.gmail.com>
	<46C45BAA.6060008@freecharity.org.uk>
	<ae81acd10708160727k3bd6c978rdfc5c46027e6d655@mail.gmail.com>
Message-ID: <b88434820708171227s6eb5e4cbg8918e19ff5f850a6@mail.gmail.com>

Most people can put IndexIgnore */* in their .htaccess to stop Apache from
showing those files listings.

Also, some servers are also setup to be able to have PHP run in .html files,
so it doesn't matter all that much...


-- 
Matt (speedboxer@gmail.com)
http://mattsblog.ca/ | http://livemp.net/
From omry at yadan.net  Fri Aug 17 22:36:08 2007
From: omry at yadan.net (Omry Yadan)
Date: Fri Aug 17 22:36:18 2007
Subject: [wp-hackers] protecting wp-content/plugins ?
In-Reply-To: <b88434820708171227s6eb5e4cbg8918e19ff5f850a6@mail.gmail.com>
References: <ae81acd10708160700s596e5d93w6086b76c45f73710@mail.gmail.com>	<46C45BAA.6060008@freecharity.org.uk>	<ae81acd10708160727k3bd6c978rdfc5c46027e6d655@mail.gmail.com>
	<b88434820708171227s6eb5e4cbg8918e19ff5f850a6@mail.gmail.com>
Message-ID: <46C622D8.9010301@yadan.net>

Most people can, but most people don't.


Matt wrote:

> Most people can put IndexIgnore */* in their .htaccess to stop Apache from
> showing those files listings.
>
> Also, some servers are also setup to be able to have PHP run in .html files,
> so it doesn't matter all that much...
>
>
>   

From speedboxer at gmail.com  Fri Aug 17 22:37:48 2007
From: speedboxer at gmail.com (Matt)
Date: Fri Aug 17 22:37:53 2007
Subject: [wp-hackers] protecting wp-content/plugins ?
In-Reply-To: <46C622D8.9010301@yadan.net>
References: <ae81acd10708160700s596e5d93w6086b76c45f73710@mail.gmail.com>
	<46C45BAA.6060008@freecharity.org.uk>
	<ae81acd10708160727k3bd6c978rdfc5c46027e6d655@mail.gmail.com>
	<b88434820708171227s6eb5e4cbg8918e19ff5f850a6@mail.gmail.com>
	<46C622D8.9010301@yadan.net>
Message-ID: <b88434820708171537w9acc67fl10d86761f0522d42@mail.gmail.com>

On 8/17/07, Omry Yadan <omry@yadan.net> wrote:
>
> Most people can, but most people don't.


Probably because they don't know about it or they don't know how...

-- 
Matt (speedboxer@gmail.com)
http://mattsblog.ca/ | http://livemp.net/
From omry at yadan.net  Fri Aug 17 22:41:13 2007
From: omry at yadan.net (Omry Yadan)
Date: Fri Aug 17 22:41:25 2007
Subject: [wp-hackers] protecting wp-content/plugins ?
In-Reply-To: <b88434820708171537w9acc67fl10d86761f0522d42@mail.gmail.com>
References: <ae81acd10708160700s596e5d93w6086b76c45f73710@mail.gmail.com>	<46C45BAA.6060008@freecharity.org.uk>	<ae81acd10708160727k3bd6c978rdfc5c46027e6d655@mail.gmail.com>	<b88434820708171227s6eb5e4cbg8918e19ff5f850a6@mail.gmail.com>	<46C622D8.9010301@yadan.net>
	<b88434820708171537w9acc67fl10d86761f0522d42@mail.gmail.com>
Message-ID: <46C62409.1040303@yadan.net>

Matt wrote:

> On 8/17/07, Omry Yadan <omry@yadan.net> wrote:
>   
>> Most people can, but most people don't.
>>     
>
>
> Probably because they don't know about it or they don't know how...
True.
but it does not mean we can ignore the problem because there are other
ways to solve it.
I really don't see the big deal here. why not add an empty index.html
file and be done with it?
it will certainly reduce the vulnerability of many wp blogs out there.
From will at willnorris.com  Sat Aug 18 05:03:23 2007
From: will at willnorris.com (Will Norris)
Date: Sat Aug 18 05:04:14 2007
Subject: [wp-hackers] Re: protecting wp-content/plugins ?
In-Reply-To: <20070817131837.GE1251@gerf.org>
References: <ae81acd10708160700s596e5d93w6086b76c45f73710@mail.gmail.com>
	<46C45BAA.6060008@freecharity.org.uk>
	<ae81acd10708160727k3bd6c978rdfc5c46027e6d655@mail.gmail.com>
	<46C4614F.8070704@freecharity.org.uk>
	<71ddd7490708160746m2b7582f3p83987c1127587a49@mail.gmail.com>
	<71ddd7490708160809s76f4c28br4007bfa5bf3115d0@mail.gmail.com>
	<20070817131837.GE1251@gerf.org>
Message-ID: <5671D53D-2E88-4198-A898-48BC614CB903@willnorris.com>


On Aug 17, 2007, at 6:18 AM, Christian H?ltje wrote:

> In addition to adding a blank index file (I prefer index.html, my
> self, just because it cannot run code even accidentally), I have an
> apache rule like this...
>
> RewriteCond %{REQUEST_FILENAME} !\.(css|gif|js|png|xml|xsl)$
> RewriteRule ^/(wp-includes|wp-content)/ - [F,L]
>
> It prevents people from scanning for plugins by the php files.
> Obviously, additional files will be visible, but they leave their
> fingerprint anyway.

just a quick note... if you want to find exactly which file types you  
have in your plugins directory, the following should do the trick...

   find . -type f | sed -E "s/.+(\.[^\.]+)$/\\1/" | sort | uniq

and for what it's worth, +1 for adding a blank index.html :)

-will
From g30rg3x at gmail.com  Sat Aug 18 06:10:59 2007
From: g30rg3x at gmail.com (g30rg3_x)
Date: Sat Aug 18 06:11:03 2007
Subject: [wp-hackers] protecting wp-content/plugins ?
In-Reply-To: <46C62409.1040303@yadan.net>
References: <ae81acd10708160700s596e5d93w6086b76c45f73710@mail.gmail.com>
	<46C45BAA.6060008@freecharity.org.uk>
	<ae81acd10708160727k3bd6c978rdfc5c46027e6d655@mail.gmail.com>
	<b88434820708171227s6eb5e4cbg8918e19ff5f850a6@mail.gmail.com>
	<46C622D8.9010301@yadan.net>
	<b88434820708171537w9acc67fl10d86761f0522d42@mail.gmail.com>
	<46C62409.1040303@yadan.net>
Message-ID: <d5d5430f0708172310v1d1d6c0ev68ffb8299c93923@mail.gmail.com>

2007/8/17, Omry Yadan <omry@yadan.net>:
> Matt wrote:.
> I really don't see the big deal here. why not add an empty index.html
> file and be done with it?
> it will certainly reduce the vulnerability of many wp blogs out there.

because you will need to add a blank index.html to every directory
(and subdirectories), its a not efficient way to solve this...


-- 
_________________________
             g30rg3_x
From clwoodard at gmail.com  Sat Aug 18 06:53:09 2007
From: clwoodard at gmail.com (Curt Woodard)
Date: Sat Aug 18 06:53:15 2007
Subject: [wp-hackers] Files associated with table *_users
Message-ID: <a3b809ae0708172353j672313c4o67a5d9a3d155bc13@mail.gmail.com>

Matt, Alex, thanks for the swift replies.

Matt: I don't use linux, I'm on Windows... I suppose I could install
grep for Win32 if it exists...

Alex: I was thinking that as well, I'd just have to figure out how to
write the plugin and then how to interface everything with SMF. I'd
need to be able to replace everything dealing with WP logins with SMF
SSI calls. Do you know of any information available to allow me to
write a plugin that replaces all of this? I've already looked at the
two databases and am in the process of mapping what fields in WP would
match with those in SMF and could probably, very easily, write a
wrapper that places the SMF user data in the format that
wp_get_current_user uses... I'll have to see what I can do.

PS are there archives for this list?

Thanks again for the swift replies.
-Curt

------------------------------
Message: 2
Date: Fri, 17 Aug 2007 13:58:44 -0400
From: "Curt Woodard" <clwoodard@gmail.com>
Subject: [wp-hackers] Files associated with table *_users
To: wp-hackers@lists.automattic.com
Message-ID:
       <a3b809ae0708171058q676d9dacg613ddef3c8bfa625@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

Was curious as to exactly which files are affected by and access the
*_users table in WordPress 2.0.

Why?

I'm tired of dealing with multiple user tables for different things
and want to use SMF's user table for WordPress just as I have for
MediaWiki.

I want to disable anything that uses the WordPress tables for user
information and instead use SMF's.

Any information would be greatly appreciated.

Thanks,
-Excalibur


------------------------------

Message: 3
Date: Fri, 17 Aug 2007 11:05:26 -0700
From: Matt Mullenweg <m@mullenweg.com>
Subject: Re: [wp-hackers] Files associated with table *_users
To: wp-hackers@lists.automattic.com
Message-ID: <46C5E366.5020703@mullenweg.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Curt Woodard wrote:
> Was curious as to exactly which files are affected by and access the
> *_users table in WordPress 2.0.

Grep through the code for $wpdb->users and $wpdb->usermeta and you'll
see all the places we query those tables.

--
Matt Mullenweg
 http://photomatt.net | http://wordpress.org
http://automattic.com | http://akismet.com
------------------------------
Message: 4
Date: Fri, 17 Aug 2007 20:17:15 +0200
From: Alex G?nsche <ag.ml2007@zirona.com>
Subject: Re: [wp-hackers] Files associated with table *_users
To: wp-hackers@lists.automattic.com
Message-ID: <1187374635.6047.3.camel@localhost>
Content-Type: text/plain; charset=ISO-8859-15

On Fri, 2007-08-17 at 13:58 -0400, Curt Woodard wrote:
> I want to disable anything that uses the WordPress tables for user
> information and instead use SMF's.

A better solution for this would be writing a plugin which handles the
authentication against your other system. This will make upgrading much
easier. (Don't forget to write a replacement for the pluggable function
wp_get_current_user().)

Best regards,
Alex

--
Alex G?nsche, Zirona OpenSource-Consulting
Blogs: http://www.zirona.com/ | http://www.regularimpressions.net
PubKey for this address: http://www.zirona.com/misc/ag.ml2007.asc
------------------------------
From m at marcosmedia.com  Sat Aug 18 08:04:50 2007
From: m at marcosmedia.com (Marcos Sader | marcosmedia)
Date: Sat Aug 18 08:04:57 2007
Subject: [wp-hackers] Files associated with table *_users
In-Reply-To: <a3b809ae0708172353j672313c4o67a5d9a3d155bc13@mail.gmail.com>
References: <a3b809ae0708172353j672313c4o67a5d9a3d155bc13@mail.gmail.com>
Message-ID: <8ff7155b0708180104l1335a070t20c3f8bef8f72adb@mail.gmail.com>

On 8/18/07, Curt Woodard <clwoodard@gmail.com> wrote:
>
> Matt, Alex, thanks for the swift replies.
>
> Matt: I don't use linux, I'm on Windows... I suppose I could install
> grep for Win32 if it exists...


I'm sure your IDE, text editor or even dreamweaver! have a search tool you
can use instead of grep.

Alex: I was thinking that as well, I'd just have to figure out how to
> write the plugin and then how to interface everything with SMF. I'd
> need to be able to replace everything dealing with WP logins with SMF
> SSI calls. Do you know of any information available to allow me to
> write a plugin that replaces all of this? I've already looked at the
> two databases and am in the process of mapping what fields in WP would
> match with those in SMF and could probably, very easily, write a
> wrapper that places the SMF user data in the format that
> wp_get_current_user uses... I'll have to see what I can do.


Once i had to bridge five different systems, 3 php, one jsp and one asp, all
using the user data stored on a central database which was updated and
maintained through a sixth system, that i have no access to, all i had was a
papper with the API results structure.

So, since the customer wanted to still use the user system he Had, and was
reluctant about modifying wordpress or using a plugin, i just made a script
that would periodically (cron) update the wordpress database using the
central server data, it was quite easy, took me a few hours and none of the
systems got affected ;)

One drawback, user data changed in the wordpress panel will not be reflected
in the central database.

PS are there archives for this list?


Yup http://comox.textdrive.com/pipermail/wp-hackers/

Thanks again for the swift replies.
> -Curt
>
> ------------------------------
> Message: 2
> Date: Fri, 17 Aug 2007 13:58:44 -0400
> From: "Curt Woodard" <clwoodard@gmail.com>
> Subject: [wp-hackers] Files associated with table *_users
> To: wp-hackers@lists.automattic.com
> Message-ID:
>        <a3b809ae0708171058q676d9dacg613ddef3c8bfa625@mail.gmail.com>
> Content-Type: text/plain; charset=ISO-8859-1
>
> Was curious as to exactly which files are affected by and access the
> *_users table in WordPress 2.0.
>
> Why?
>
> I'm tired of dealing with multiple user tables for different things
> and want to use SMF's user table for WordPress just as I have for
> MediaWiki.
>
> I want to disable anything that uses the WordPress tables for user
> information and instead use SMF's.
>
> Any information would be greatly appreciated.
>
> Thanks,
> -Excalibur
>
>
> ------------------------------
>
> Message: 3
> Date: Fri, 17 Aug 2007 11:05:26 -0700
> From: Matt Mullenweg <m@mullenweg.com>
> Subject: Re: [wp-hackers] Files associated with table *_users
> To: wp-hackers@lists.automattic.com
> Message-ID: <46C5E366.5020703@mullenweg.com>
> Content-Type: text/plain; charset=ISO-8859-1; format=flowed
>
> Curt Woodard wrote:
> > Was curious as to exactly which files are affected by and access the
> > *_users table in WordPress 2.0.
>
> Grep through the code for $wpdb->users and $wpdb->usermeta and you'll
> see all the places we query those tables.
>
> --
> Matt Mullenweg
> http://photomatt.net | http://wordpress.org
> http://automattic.com | http://akismet.com
> ------------------------------
> Message: 4
> Date: Fri, 17 Aug 2007 20:17:15 +0200
> From: Alex G?nsche <ag.ml2007@zirona.com>
> Subject: Re: [wp-hackers] Files associated with table *_users
> To: wp-hackers@lists.automattic.com
> Message-ID: <1187374635.6047.3.camel@localhost>
> Content-Type: text/plain; charset=ISO-8859-15
>
> On Fri, 2007-08-17 at 13:58 -0400, Curt Woodard wrote:
> > I want to disable anything that uses the WordPress tables for user
> > information and instead use SMF's.
>
> A better solution for this would be writing a plugin which handles the
> authentication against your other system. This will make upgrading much
> easier. (Don't forget to write a replacement for the pluggable function
> wp_get_current_user().)
>
> Best regards,
> Alex
>
> --
> Alex G?nsche, Zirona OpenSource-Consulting
> Blogs: http://www.zirona.com/ | http://www.regularimpressions.net
> PubKey for this address: http://www.zirona.com/misc/ag.ml2007.asc
> ------------------------------
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>



-- 
Marcos Sader
m@marcosmedia.com
http://defmay.com | http://marcosmedia.com
From ag.ml2007 at zirona.com  Sat Aug 18 08:11:31 2007
From: ag.ml2007 at zirona.com (Alex =?ISO-8859-1?Q?G=FCnsche?=)
Date: Sat Aug 18 08:11:37 2007
Subject: [wp-hackers] Files associated with table *_users
In-Reply-To: <a3b809ae0708172353j672313c4o67a5d9a3d155bc13@mail.gmail.com>
References: <a3b809ae0708172353j672313c4o67a5d9a3d155bc13@mail.gmail.com>
Message-ID: <1187424691.5583.12.camel@localhost>

On Sat, 2007-08-18 at 02:53 -0400, Curt Woodard wrote:
> Alex: I was thinking that as well, I'd just have to figure out how to
> write the plugin and then how to interface everything with SMF. I'd
> need to be able to replace everything dealing with WP logins with SMF
> SSI calls. Do you know of any information available to allow me to
> write a plugin that replaces all of this? I've already looked at the
> two databases and am in the process of mapping what fields in WP would
> match with those in SMF and could probably, very easily, write a
> wrapper that places the SMF user data in the format that
> wp_get_current_user uses... I'll have to see what I can do.

Basically, if you require() the file wp-blog-header.php, you have full
access to the WP base system. If you want to authenticate against SMF,
you simply let your user log in and require() wp-blog-header.php. 

However, if you directly require() this file, the user will have no
rights. Therefore, you must also replace the pluggable user management
functions. Have a look at wp-includes/pluggable-functions.php and create
a plugin write a replacement for each of the user functions. To
understand which roles and capabilities must be implemented, have a look
at http://codex.wordpress.org/Roles_and_Capabilities.

Note: The above is in no way tested, it's rather what I would consider a
useful approach at first sight. Please check everything for security and
stuff.

> PS are there archives for this list?

The below are the primary archives, but there are others, too (the usual
suspects).
http://comox.textdrive.com/pipermail/wp-hackers/


Best regards,
Alex

-- 
Alex G?nsche, Zirona OpenSource-Consulting
Blogs: http://www.zirona.com/ | http://www.regularimpressions.net
PubKey for this address: http://www.zirona.com/misc/ag.ml2007.asc

From omry at yadan.net  Sat Aug 18 08:14:51 2007
From: omry at yadan.net (Omry Yadan)
Date: Sat Aug 18 08:15:04 2007
Subject: [wp-hackers] protecting wp-content/plugins ?
In-Reply-To: <d5d5430f0708172310v1d1d6c0ev68ffb8299c93923@mail.gmail.com>
References: <ae81acd10708160700s596e5d93w6086b76c45f73710@mail.gmail.com>	<46C45BAA.6060008@freecharity.org.uk>	<ae81acd10708160727k3bd6c978rdfc5c46027e6d655@mail.gmail.com>	<b88434820708171227s6eb5e4cbg8918e19ff5f850a6@mail.gmail.com>	<46C622D8.9010301@yadan.net>	<b88434820708171537w9acc67fl10d86761f0522d42@mail.gmail.com>	<46C62409.1040303@yadan.net>
	<d5d5430f0708172310v1d1d6c0ev68ffb8299c93923@mail.gmail.com>
Message-ID: <46C6AA7B.3000603@yadan.net>

g30rg3_x wrote:

> 2007/8/17, Omry Yadan <omry@yadan.net>:
>   
>> Matt wrote:.
>> I really don't see the big deal here. why not add an empty index.html
>> file and be done with it?
>> it will certainly reduce the vulnerability of many wp blogs out there.
>>     
>
> because you will need to add a blank index.html to every directory
> (and subdirectories), its a not efficient way to solve this...

covering wp-content and wp-themes will make the life of an attacker much
harder.
there is a huge difference because those are guarantied to be there.

From ozh at planetozh.com  Sat Aug 18 10:46:17 2007
From: ozh at planetozh.com (Ozh)
Date: Sat Aug 18 10:46:22 2007
Subject: [wp-hackers] Files associated with table *_users
In-Reply-To: <a3b809ae0708172353j672313c4o67a5d9a3d155bc13@mail.gmail.com>
References: <a3b809ae0708172353j672313c4o67a5d9a3d155bc13@mail.gmail.com>
Message-ID: <ae81acd10708180346v5061c6f9t4b23c84b6c037e11@mail.gmail.com>

Curt,

On 8/18/07, Curt Woodard <clwoodard@gmail.com> wrote:
> Matt: I don't use linux, I'm on Windows... I suppose I could install
> grep for Win32 if it exists...

What, you mean you live without it ? :)
There are plenty of win32 builds available for most if not all gnu
utils (grep, sed, etc)
http://www.steve.org.uk/Software/grep/
http://gnuwin32.sourceforge.net/packages.html

> PS are there archives for this list?
If you're asking about searching:
http://news.gmane.org/gmane.comp.web.wordpress.devel has a slightly
more convenient search interface than
http://www.google.com/search?q={terms}+site%3Ahttp%3A%2F%2Fcomox.textdrive.com%2Fpipermail%2Fwp-hackers%2F


-- 
http://FrenchFragFactory.net ~ Daily Quake News
   http://planetOzh.com ~ Useless Blog & Code
From james at freecharity.org.uk  Sat Aug 18 12:11:58 2007
From: james at freecharity.org.uk (James Davis)
Date: Sat Aug 18 12:12:08 2007
Subject: [wp-hackers] protecting wp-content/plugins ?
In-Reply-To: <46C6AA7B.3000603@yadan.net>
References: <ae81acd10708160700s596e5d93w6086b76c45f73710@mail.gmail.com>	<46C45BAA.6060008@freecharity.org.uk>	<ae81acd10708160727k3bd6c978rdfc5c46027e6d655@mail.gmail.com>	<b88434820708171227s6eb5e4cbg8918e19ff5f850a6@mail.gmail.com>	<46C622D8.9010301@yadan.net>	<b88434820708171537w9acc67fl10d86761f0522d42@mail.gmail.com>	<46C62409.1040303@yadan.net>	<d5d5430f0708172310v1d1d6c0ev68ffb8299c93923@mail.gmail.com>
	<46C6AA7B.3000603@yadan.net>
Message-ID: <46C6E20E.5070702@freecharity.org.uk>

Omry Yadan wrote:

> covering wp-content and wp-themes will make the life of an attacker much
> harder.
> there is a huge difference because those are guarantied to be there.

You've made the mistake of believing that the attacker is an inquisitive 
person who cares whether his exploits succeed or not.

The lack of a directory index is not going to stop an attacker trying to 
exploit a vulnerable script that may or may not exist on your server. 
They're going to try it regardless. They won't even care if you're 
attentive enough to notice their failed attempts in your logs.

The problem is a server wide one and should be fixed at that level if 
you really care about it. Placing an index file in the directory only 
masks the problem for a single application.

James

-- 
FreeCharity.org.uk - Free hosting for charities and non-profits
WordPress and Blogging Consultancy       -      (01348) 800101
From zamoose at gmail.com  Sat Aug 18 13:17:38 2007
From: zamoose at gmail.com (Doug Stewart)
Date: Sat Aug 18 13:17:42 2007
Subject: [wp-hackers] protecting wp-content/plugins ?
In-Reply-To: <46C6E20E.5070702@freecharity.org.uk>
References: <ae81acd10708160700s596e5d93w6086b76c45f73710@mail.gmail.com>
	<46C45BAA.6060008@freecharity.org.uk>
	<ae81acd10708160727k3bd6c978rdfc5c46027e6d655@mail.gmail.com>
	<b88434820708171227s6eb5e4cbg8918e19ff5f850a6@mail.gmail.com>
	<46C622D8.9010301@yadan.net>
	<b88434820708171537w9acc67fl10d86761f0522d42@mail.gmail.com>
	<46C62409.1040303@yadan.net>
	<d5d5430f0708172310v1d1d6c0ev68ffb8299c93923@mail.gmail.com>
	<46C6AA7B.3000603@yadan.net> <46C6E20E.5070702@freecharity.org.uk>
Message-ID: <71ddd7490708180617m614fe275lc8134b7273b8e3c8@mail.gmail.com>

On 8/18/07, James Davis <james@freecharity.org.uk> wrote:
>
> The problem is a server wide one and should be fixed at that level if
> you really care about it. Placing an index file in the directory only
> masks the problem for a single application.

A point which would have legitimacy, were we a web-focused sysadmin
mailing list.   Seeing as we are concerned with the development of
WordPress and what we can do to alleviate the problem as far as WP is
concerned, I'd say a few index.php/index.html files scattered about is
the SMALLEST step we can take, and an easy one to boot.

-- 
-Doug

http://literalbarrage.org/blog/
From tbarta at gmail.com  Sat Aug 18 15:09:54 2007
From: tbarta at gmail.com (Tom Barta)
Date: Sat Aug 18 15:09:59 2007
Subject: [wp-hackers] protecting wp-content/plugins ?
In-Reply-To: <46C6E20E.5070702@freecharity.org.uk>
References: <ae81acd10708160700s596e5d93w6086b76c45f73710@mail.gmail.com>
	<46C45BAA.6060008@freecharity.org.uk>
	<ae81acd10708160727k3bd6c978rdfc5c46027e6d655@mail.gmail.com>
	<b88434820708171227s6eb5e4cbg8918e19ff5f850a6@mail.gmail.com>
	<46C622D8.9010301@yadan.net>
	<b88434820708171537w9acc67fl10d86761f0522d42@mail.gmail.com>
	<46C62409.1040303@yadan.net>
	<d5d5430f0708172310v1d1d6c0ev68ffb8299c93923@mail.gmail.com>
	<46C6AA7B.3000603@yadan.net> <46C6E20E.5070702@freecharity.org.uk>
Message-ID: <7d6d8bd0708180809y779fe291w3b555c3eb0bf59ba@mail.gmail.com>

On 8/18/07, James Davis <james@freecharity.org.uk> wrote:
>
> Omry Yadan wrote:
>
> > covering wp-content and wp-themes will make the life of an attacker much
> > harder.
> > there is a huge difference because those are guarantied to be there.
>
> The problem is a server wide one and should be fixed at that level if
> you really care about it. Placing an index file in the directory only
> masks the problem for a single application.


The problems is that those files have no place being subdirectories of the
Document Root in the first place.  I'm guessing they're placed there for
configuration simplicity (just unzip/untar wordpress in this directory and
it works), but couldn't there be a rather easy way to say "modify your PHP
include path, then move these directories somewhere else"?  I think anyone
with .htaccess can do this, and it's a heck of a lot better than the index
hack we're talking about.

Though, if those files are placed in the Document Root in the first place,
and since Wordpress as a whole has clearly prioritized ease-of-use even in
bad server environments, it makes sense that a blank index.{html,php} should
be sitting in any of those directories by default, since 1) it hurts
nothing, and 2) it reduces a potential attacker's knowledge about the
system.
From clwoodard at gmail.com  Sun Aug 19 03:59:45 2007
From: clwoodard at gmail.com (Curt Woodard)
Date: Sun Aug 19 04:02:49 2007
Subject: [wp-hackers] Files associated with table *_users
Message-ID: <a3b809ae0708182059p6537491ft6ebe3d67078ea4b7@mail.gmail.com>

Well, I started messing around with a test plug-in... it's a bit
tricky trying to find exactly when and where to do things. But,
basically I've come to this conclusion:

I think, if I override the functions in pluggables.php that use
$wpdb->users and $wpdb->usermeta, I might just be able to sneak in the
SMF functions I need to pull that data instead.

I can use SMF groups to simulate the Roles and let WP deal with the
Capabilities assigned to the roles. Of course, the 10 levels would be
user configurable in the plug-in to point to the different user groups
in SMF.

So, if I can just map the SMF fields to the WP fields (WP 2.2.2) I may
be golden.

So, basically:
Override:
    wp_login
    get_userdata
    get_userdatabylogin

And map SMF fields to WP fields so WP is tricked into thinking they
came from the WP database.

I might have to work on all the user stuff that can be overridden, but
I'll have to look at that as well.

Does this sound about right to you guys?
From wp-hackers at striderweb.com  Sun Aug 19 08:59:01 2007
From: wp-hackers at striderweb.com (Stephen Rider)
Date: Sun Aug 19 08:59:10 2007
Subject: [wp-hackers] $wpdb cacheing?
Message-ID: <BDDD76AC-3039-4104-A2BC-38C178BD87D6@striderweb.com>

Hi --

I'm trying to make a function that gets a combined list of Pages from  
two different blogs (both in the same database)

Since the login info is the same, it occurred to me to try changing  
the table prefix to get the second blog's data.  Here's the code:

$mbpages1 = get_pages( $args );
$orig_prefix = $wpdb->prefix;
$wpdb->prefix = 'blah_';
$mbpages2 = get_pages( $args );
$mbpages1 = array_merge( $mbpages1, $mbpages2 );
$wpdb->prefix = $orig_prefix;

It pulls the first blog's data twice.

Is the get_pages being cached somehow?  Is there a way to reset the  
cache so it pulls the different data?

...and if I do that, is there a way for me to cache the combined list  
and thus avoid a big performance hit?

My head hurts.  Thanks in advance.

Stephen
From emmensetech at gmail.com  Sun Aug 19 16:36:03 2007
From: emmensetech at gmail.com (=?utf-8?B?QWFyb24gQnJhemVsbA==?=)
Date: Sun Aug 19 16:36:19 2007
Subject: [wp-hackers] $wpdb cacheing?
In-Reply-To: <BDDD76AC-3039-4104-A2BC-38C178BD87D6@striderweb.com>
References: <BDDD76AC-3039-4104-A2BC-38C178BD87D6@striderweb.com>
Message-ID: <265783944-1187541368-cardhu_decombobulator_blackberry.rim.net-1152174977-@bxe011.bisx.prod.on.blackberry>

WP instantiates the db data for a single blog and the cache mechanism revolves around that. I have not tried messing with double installs in the same db so my advice might be bunk, however your best bet is probably raw SQL.
(via Blackberry)
Aaron Brazell 
Director of Technology, b5media
"A Global New Media Company" 

web:: www.b5media.com, www.technosailor.com
phone:: 410-608-6620 
skype:: technosailor     

-----Original Message-----
From: Stephen Rider <wp-hackers@striderweb.com>

Date: Sun, 19 Aug 2007 03:59:01 
To:wp-hackers@lists.automattic.com
Subject: [wp-hackers] $wpdb cacheing?


Hi --

I'm trying to make a function that gets a combined list of Pages from  
two different blogs (both in the same database)

Since the login info is the same, it occurred to me to try changing  
the table prefix to get the second blog's data.  Here's the code:

$mbpages1 = get_pages( $args );
$orig_prefix = $wpdb->prefix;
$wpdb->prefix = 'blah_';
$mbpages2 = get_pages( $args );
$mbpages1 = array_merge( $mbpages1, $mbpages2 );
$wpdb->prefix = $orig_prefix;

It pulls the first blog's data twice.

Is the get_pages being cached somehow?  Is there a way to reset the  
cache so it pulls the different data?

....and if I do that, is there a way for me to cache the combined list  
and thus avoid a big performance hit?

My head hurts.  Thanks in advance.

Stephen
_______________________________________________
wp-hackers mailing list
wp-hackers@lists.automattic.com
http://lists.automattic.com/mailman/listinfo/wp-hackers
From dragonwing at dragonu.net  Sun Aug 19 19:08:34 2007
From: dragonwing at dragonu.net (Jacob Santos)
Date: Sun Aug 19 19:07:06 2007
Subject: [wp-hackers] $wpdb cacheing?
In-Reply-To: <265783944-1187541368-cardhu_decombobulator_blackberry.rim.net-1152174977-@bxe011.bisx.prod.on.blackberry>
References: <BDDD76AC-3039-4104-A2BC-38C178BD87D6@striderweb.com>
	<265783944-1187541368-cardhu_decombobulator_blackberry.rim.net-1152174977-@bxe011.bisx.prod.on.blackberry>
Message-ID: <46C89532.9070808@dragonu.net>

You'll probably want to take a look at WordPress Mu, but if I remember 
correctly, you stated that it doesn't meet your requirements. Perhaps, 
but modifying it might be easier, since its intention is what you want. 
WordPress is meant to be a single blog (CMS) platform. I remember that 
any attempts to make it otherwise has been met with resistance.

It is an interesting problem. I believe I might have seen a couple of 
ways it might be possible. However, since it is not my requirement, I'll 
probably won't investigate any further.

Good luck.

Jacob Santos

Aaron Brazell wrote:
> WP instantiates the db data for a single blog and the cache mechanism revolves around that. I have not tried messing with double installs in the same db so my advice might be bunk, however your best bet is probably raw SQL.
> (via Blackberry)
> Aaron Brazell 
> Director of Technology, b5media
> "A Global New Media Company" 
>
> web:: www.b5media.com, www.technosailor.com
> phone:: 410-608-6620 
> skype:: technosailor     
>
> -----Original Message-----
> From: Stephen Rider <wp-hackers@striderweb.com>
>
> Date: Sun, 19 Aug 2007 03:59:01 
> To:wp-hackers@lists.automattic.com
> Subject: [wp-hackers] $wpdb cacheing?
>
>
> Hi --
>
> I'm trying to make a function that gets a combined list of Pages from  
> two different blogs (both in the same database)
>
> Since the login info is the same, it occurred to me to try changing  
> the table prefix to get the second blog's data.  Here's the code:
>
> $mbpages1 = get_pages( $args );
> $orig_prefix = $wpdb->prefix;
> $wpdb->prefix = 'blah_';
> $mbpages2 = get_pages( $args );
> $mbpages1 = array_merge( $mbpages1, $mbpages2 );
> $wpdb->prefix = $orig_prefix;
>
> It pulls the first blog's data twice.
>
> Is the get_pages being cached somehow?  Is there a way to reset the  
> cache so it pulls the different data?
>
> ....and if I do that, is there a way for me to cache the combined list  
> and thus avoid a big performance hit?
>
> My head hurts.  Thanks in advance.
>
> Stephen
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>   
> ------------------------------------------------------------------------
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>   
From ron at cavemonkey50.com  Mon Aug 20 01:43:38 2007
From: ron at cavemonkey50.com (Ronald Heft)
Date: Mon Aug 20 01:43:43 2007
Subject: [wp-hackers] Feedback: Include Summer of Code's Podcasting Support
	With WordPress
Message-ID: <eff2e86c0708191843n77e8a0d4rf2ea6b8e15ebed73@mail.gmail.com>

Hello WordPress Hackers! If you aren't familiar with me, I am the Summer of
Code student assigned to adding improved podcasting support to WordPress.
Now that the summer is over, I am trying to figure out what the interest is
for adding my Summer of Code project directly to WordPress. I could use
everyone's opinion on where they feel this project should end up. Voice your
opinion over at the Trac ticket I created. Thanks!
http://trac.wordpress.org/ticket/4777

-- 
Ronald Heft, Jr.
Information Sciences and Technology
Pennsylvania State University

cavemonkey50.com
9rules Network
From wordpress at dd32.id.au  Mon Aug 20 03:44:39 2007
From: wordpress at dd32.id.au (DD32)
Date: Mon Aug 20 03:44:03 2007
Subject: [wp-hackers] wp_nonce_url and &amp;
Message-ID: <op.txb90pwok6w4mc@dd32.no-ip.com>

Hi all,
Just a question about wp_nonce_url,
I've noticed several places through the sourcecode where &amp; is used  
within urls to make them XHTML compatible i assume.
However, after just noncing my urls for a plugin, i've noticed that &amp;  
doesnt seem to work correctly in a link, yet is used by WP in places, eg:

$activate_link =  
wp_nonce_url("themes.php?action=activate&amp;template=$template&amp;stylesheet=$stylesheet",  
'switch-theme_' . $template);

results in this:
themes.php?action=activate&#038;amp&#038;template=TEST_TEMPLATE&#038;stylesheet=TEST_SHEET&#038;_wpnonce=d1abcfcd17

Which is then interpated as this: (At least in Opera)
http://localhost/themes.php?action=activate&amp&template=TEST_TEMPLATE&stylesheet=TEST_SHEET&_wpnonce=d1abcfcd17

Is it expected behaviour that wp_nonce_url should only accept a string  
line "page.php?a=b&c=d", or should it also be supporting  
"page.php?a=b&amp;c=d"

D
-- 
Using Opera's revolutionary e-mail client: http://www.opera.com/mail/
From clwoodard at gmail.com  Mon Aug 20 05:47:41 2007
From: clwoodard at gmail.com (Curt Woodard)
Date: Mon Aug 20 05:47:48 2007
Subject: [wp-hackers] Pluggables: wp_login -> Causing Fatal Errors
Message-ID: <a3b809ae0708192247m1362621bu60edfb691664f3ca@mail.gmail.com>

I've started work on replacing the WP user stuff with SMF as I'd
discussed in an earlier post. But I've come across an issue.

When I'm trying to override the wp_login() function, WP can't start
the plug-in... I'm rather baffled by this.

The code:

$smf_path = '/Path/To/SMF/';

require ($smf_path.'smf_api.php');

function wp_login($username, $password, $already_md5 = false)
{
	global $wpdb, $error, $smf_user_info;

	$username = sanitize_user($username);
	if(!smf_authenticateUser())
	{
		smf_setLoginCookie(3600, addslashes($username), $password, false);
		smf_loadSession();
		smf_authenticateUser();
	}
	else
		smf_authenticateUser();
	
//... Actual code from pluggable.php's wp_login() here
}

Pretty much, I've just added the smf_api functions. It was working
before, but now, when I attempt to override the function, it errors
out on me...

Should I just use do_action()? Or has anyone heard of a bug where an
override no longer works?

Thanks,
-Curt
From wordpress at dd32.id.au  Mon Aug 20 06:01:14 2007
From: wordpress at dd32.id.au (DD32)
Date: Mon Aug 20 06:00:08 2007
Subject: [wp-hackers] Pluggables: wp_login -> Causing Fatal Errors
In-Reply-To: <a3b809ae0708192247m1362621bu60edfb691664f3ca@mail.gmail.com>
References: <a3b809ae0708192247m1362621bu60edfb691664f3ca@mail.gmail.com>
Message-ID: <op.txcgccaqk6w4mc@dd32.no-ip.com>

On Mon, 20 Aug 2007 15:47:41 +1000, Curt Woodard <clwoodard@gmail.com>
wrote:

> When I'm trying to override the wp_login() function, WP can't start
> the plug-in... I'm rather baffled by this.

The problem is that when you ACTIVATE the plugin, wp_login DOES exist(ie.
plugables has allready been loaded).
But when the plugin is LOADED (after activation) then its loaded BEFORE
plugables, so wp_login is NOT defined when your plugin is parsed.

The fix is to wrap your plugable functions in a conditional wrapper too:

$smf_path = '/Path/To/SMF/';

require ($smf_path.'smf_api.php');

if( ! function_exists('wp_login') ){
function wp_login($username, $password, $already_md5 = false)
{
	global $wpdb, $error, $smf_user_info;

	$username = sanitize_user($username);
	if(!smf_authenticateUser())
	{
		smf_setLoginCookie(3600, addslashes($username), $password, false);
		smf_loadSession();
		smf_authenticateUser();
	}
	else
		smf_authenticateUser();
	
//... Actual code from pluggable.php's wp_login() here
}}

You'll probably have to do that to anyother plugable functions you want to
override too.

D
-- 
Using Opera's revolutionary e-mail client: http://www.opera.com/mail/
From dan at kuykendall.org  Mon Aug 20 06:23:36 2007
From: dan at kuykendall.org (Dan Kuykendall)
Date: Mon Aug 20 06:22:21 2007
Subject: [wp-hackers] Feedback: Include Summer of Code's Podcasting Support
	With WordPress
In-Reply-To: <eff2e86c0708191843n77e8a0d4rf2ea6b8e15ebed73@mail.gmail.com>
References: <eff2e86c0708191843n77e8a0d4rf2ea6b8e15ebed73@mail.gmail.com>
Message-ID: <46C93368.606@kuykendall.org>

Well, if you want to know what podcasting features are needed for
wordpress, just look at podpress

Ronald Heft wrote:
> Hello WordPress Hackers! If you aren't familiar with me, I am the Summer of
> Code student assigned to adding improved podcasting support to WordPress.
> Now that the summer is over, I am trying to figure out what the interest is
> for adding my Summer of Code project directly to WordPress. I could use
> everyone's opinion on where they feel this project should end up. Voice your
> opinion over at the Trac ticket I created. Thanks!
> http://trac.wordpress.org/ticket/4777
> 


-- 
Dan Kuykendall (aka Seek3r)
http://www.mightyseek.com

The ultimate security is your understanding of reality.
From clwoodard at gmail.com  Mon Aug 20 08:01:25 2007
From: clwoodard at gmail.com (Curt Woodard)
Date: Mon Aug 20 08:01:34 2007
Subject: [wp-hackers] Re: Pluggables: wp_login -> Causing Fatal Errors
Message-ID: <a3b809ae0708200101h16f3628eif841424b2cbe39c3@mail.gmail.com>

Thanks for the tip, D!

I guess I hadn't really thought about that part, even though I've been
looking through pluggable.php and seeing that around each function...

Though, the syntax is:

if(!function_exists(<function name>)) :
function <function name> { }
endif;

For some reason, it wouldn't work the other way.

Anyhow, good news is: If you have an account in WordPress that has the
same username and password as that in SMF, you now log into both at
the same time! As long as both WordPress and SMF are on the same
server... heh. I had to fix some issues with smf_api, however, but
after doing that, it worked.

There is a function in smf_api.php that is nested and here is the fix
(if you're interested):

if(!function_exists('smf_cookie_url')):
function smf_cookie_url($local, $global)
{
	global $smf_settings;
	// Use PHP to parse the URL, hopefully it does its job.
	$parsed_url = parse_url($smf_settings['forum_url']);
	if (isset($parsed_url['port']))
		$parsed_url['host'] .= ':' . $parsed_url['port'];

	// Set the cookie to the forum's path only?
	if (empty($parsed_url['path']) || !$local)
		$parsed_url['path'] = '';

	// This is probably very likely for apis and such, no?
	if ($global)
	{
		// Try to figure out where to set the cookie; this can be confused, though.
		if (preg_match('~(?:[^\.]+\.)?(.+)\z~i', $parsed_url['host'], $parts) == 1)
			$parsed_url['host'] = '.' . $parts[1];
	}
	// If both options are off, just use no host and /.
	elseif (!$local)
		$parsed_url['host'] = '';
	return $parsed_url;
}
endif;

Wrapping this function in an if...exists statement fixes an issue with
WordPress since it seems to run the wp_login function twice... I don't
know why, but it does.

Now to trick the login and logout of WordPress to use the SMF members
database instead of it's users/usermeta databases... and, of course,
set the WP cookies properly (or use the SMF cookies)... Slow but sure
progress!

Let's hope it can be done or all this pain will be for naught ;)
Thanks again for your help, guys! And for the links to the archives!

-Curt
From wp-hackers at striderweb.com  Mon Aug 20 12:02:23 2007
From: wp-hackers at striderweb.com (Stephen Rider)
Date: Mon Aug 20 12:02:39 2007
Subject: [wp-hackers] $wpdb cacheing?
In-Reply-To: <265783944-1187541368-cardhu_decombobulator_blackberry.rim.net-1152174977-@bxe011.bisx.prod.on.blackberry>
References: <BDDD76AC-3039-4104-A2BC-38C178BD87D6@striderweb.com>
	<265783944-1187541368-cardhu_decombobulator_blackberry.rim.net-1152174977-@bxe011.bisx.prod.on.blackberry>
Message-ID: <AF3BA7DC-71C8-4326-A9F0-4FE2CBAAFA24@striderweb.com>

On this page <http://codex.wordpress.org/Function_Reference/WP_Cache>  
it says:

"Caching is not enabled by default."

So I'm confused as to why caching is happening anyways.  Unless that  
sentence is incorrect in the Codex?

Anyway, thanks for the help.  I may use raw SQL if I must (last  
resort) but I'd much rather reference existing functions for future  
compatibility.

I think what I might try is to unset the wp_pages cache info, run the  
new query, and then set it again.  If I can figure out how to cache  
_my_ function's data, all the better!  :)

Again, thanks Aaron and Jacob.

Stephen


On Aug 19, 2007, at 11:36 AM, Aaron Brazell wrote:

> WP instantiates the db data for a single blog and the cache  
> mechanism revolves around that. I have not tried messing with  
> double installs in the same db so my advice might be bunk, however  
> your best bet is probably raw SQL.
> (via Blackberry)
> Aaron Brazell
> Director of Technology, b5media
> "A Global New Media Company"
>
> web:: www.b5media.com, www.technosailor.com
> phone:: 410-608-6620
> skype:: technosailor
>
> -----Original Message-----
> From: Stephen Rider <wp-hackers@striderweb.com>
>
> Date: Sun, 19 Aug 2007 03:59:01
> To:wp-hackers@lists.automattic.com
> Subject: [wp-hackers] $wpdb cacheing?
>
>
> Hi --
>
> I'm trying to make a function that gets a combined list of Pages from
> two different blogs (both in the same database)
>
> Since the login info is the same, it occurred to me to try changing
> the table prefix to get the second blog's data.  Here's the code:
>
> $mbpages1 = get_pages( $args );
> $orig_prefix = $wpdb->prefix;
> $wpdb->prefix = 'blah_';
> $mbpages2 = get_pages( $args );
> $mbpages1 = array_merge( $mbpages1, $mbpages2 );
> $wpdb->prefix = $orig_prefix;
>
> It pulls the first blog's data twice.
>
> Is the get_pages being cached somehow?  Is there a way to reset the
> cache so it pulls the different data?
>
> ....and if I do that, is there a way for me to cache the combined list
> and thus avoid a big performance hit?
>
> My head hurts.  Thanks in advance.
>
> Stephen
From peter.westwood at ftwr.co.uk  Mon Aug 20 12:19:52 2007
From: peter.westwood at ftwr.co.uk (Peter Westwood)
Date: Mon Aug 20 12:19:56 2007
Subject: [wp-hackers] $wpdb cacheing?
In-Reply-To: <AF3BA7DC-71C8-4326-A9F0-4FE2CBAAFA24@striderweb.com>
References: <BDDD76AC-3039-4104-A2BC-38C178BD87D6@striderweb.com>	<265783944-1187541368-cardhu_decombobulator_blackberry.rim.net-1152174977-@bxe011.bisx.prod.on.blackberry>
	<AF3BA7DC-71C8-4326-A9F0-4FE2CBAAFA24@striderweb.com>
Message-ID: <46C986E8.9000507@ftwr.co.uk>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hi,

Stephen Rider wrote:
> On this page <http://codex.wordpress.org/Function_Reference/WP_Cache> it
> says:
> 
> "Caching is not enabled by default."
> 
> So I'm confused as to why caching is happening anyways.  Unless that
> sentence is incorrect in the Codex?
> 

That sentence was ambiguous and I have tried to improve it.

Basically, the WP_Cache class builds an in memory cache of data
retrieved from the database during a single page load - this always happens.

The define that you can enable/disable extra functionality with
basically enables the storing of the cached data in files so that the
information is available to multiple page loads.

I hope this helps.

westi
- --
Peter Westwood
http://blog.ftwr.co.uk
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.2 (MingW32)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iD8DBQFGyYboVPRdzag0AcURAnmWAJ4+mYq7avo74Ihp/vG6K5hOkMoM7QCdER9o
s2uvb1voKQPAk04aS2X4ob4=
=Eznd
-----END PGP SIGNATURE-----
From r at robm.me.uk  Mon Aug 20 14:45:31 2007
From: r at robm.me.uk (Rob Miller)
Date: Mon Aug 20 14:45:50 2007
Subject: [wp-hackers] $wpdb cacheing?
In-Reply-To: <AF3BA7DC-71C8-4326-A9F0-4FE2CBAAFA24@striderweb.com>
References: <BDDD76AC-3039-4104-A2BC-38C178BD87D6@striderweb.com>	<265783944-1187541368-cardhu_decombobulator_blackberry.rim.net-1152174977-@bxe011.bisx.prod.on.blackberry>
	<AF3BA7DC-71C8-4326-A9F0-4FE2CBAAFA24@striderweb.com>
Message-ID: <46C9A90B.3040909@robm.me.uk>

Stephen Rider wrote:
> On this page <http://codex.wordpress.org/Function_Reference/WP_Cache> 
> it says:
>
> "Caching is not enabled by default."
>
> So I'm confused as to why caching is happening anyways.  Unless that 
> sentence is incorrect in the Codex?
>
> Anyway, thanks for the help.  I may use raw SQL if I must (last 
> resort) but I'd much rather reference existing functions for future 
> compatibility.
>
> I think what I might try is to unset the wp_pages cache info, run the 
> new query, and then set it again.  If I can figure out how to cache 
> _my_ function's data, all the better!  :)
>
> Again, thanks Aaron and Jacob.
>
> Stephen
I think it's more likely to be that get_pages doesn't use $wpdb->prefix, 
it uses the actual table names ($wpdb->posts etc.).

Set those yourself (full list is in wp-settings.php) and try again.

Cheers,
Rob

-- 
Rob Miller
http://robm.me.uk/

From sam at viveka.net.au  Mon Aug 20 15:37:42 2007
From: sam at viveka.net.au (Sam Bauers)
Date: Mon Aug 20 15:37:45 2007
Subject: [wp-hackers] protecting wp-content/plugins ?
In-Reply-To: <7d6d8bd0708180809y779fe291w3b555c3eb0bf59ba@mail.gmail.com>
References: <ae81acd10708160700s596e5d93w6086b76c45f73710@mail.gmail.com>
	<46C45BAA.6060008@freecharity.org.uk>
	<ae81acd10708160727k3bd6c978rdfc5c46027e6d655@mail.gmail.com>
	<b88434820708171227s6eb5e4cbg8918e19ff5f850a6@mail.gmail.com>
	<46C622D8.9010301@yadan.net>
	<b88434820708171537w9acc67fl10d86761f0522d42@mail.gmail.com>
	<46C62409.1040303@yadan.net>
	<d5d5430f0708172310v1d1d6c0ev68ffb8299c93923@mail.gmail.com>
	<46C6AA7B.3000603@yadan.net> <46C6E20E.5070702@freecharity.org.uk>
	<7d6d8bd0708180809y779fe291w3b555c3eb0bf59ba@mail.gmail.com>
Message-ID: <E9EB9DB4-CE73-4421-8B60-178313006ADE@viveka.net.au>

> Omry Yadan wrote:
>
>> covering wp-content and wp-themes will make the life of an  
>> attacker much
>> harder.

But adding a blank index file does nothing to actually protect  
against detection of a known exploitable plugin. It's classic  
security through obscurity.

If an attacker knows the common name for an exploitable plugin file  
and also the common location of the plugin directory, then all they  
have to do is construct the URI and request it.

So if I know of an exploitable plugin whose main file name is "bad- 
plugin.php". Then it is reasonable to assume that on a WordPress  
install at http://www.example.com/blog, if I hit http:// 
www.example.com/blog/wp-content/plugins/bad-plugin.php in curl and  
get a response that isn't a 404, then it's there and I can use  
whatever trick I know to work the exploit.

I can even script it to test a bunch of domains and run the exploit  
automatically.

The best way to protect against this is to test for some known  
WordPress constant at the start of each plugin file, then if it is  
not there you can return a 404 HTTP Response. E.g.:


<?php
... plugin header ...

if ( !defined('ABSPATH') ) {
	$protocol = $_SERVER["SERVER_PROTOCOL"];
	if ( ('HTTP/1.1' != $protocol) && ('HTTP/1.0' != $protocol) )
		$protocol = 'HTTP/1.0';
	
	if ( version_compare( phpversion(), '4.3.0', '>=' ) ) {
		return @header( $protocol . ' 404 Not Found', true, 404 );
	} else {
		return @header( $protocol . ' 404 Not Found' );
	}
	
	exit();
}

... rest of plugin ...
?>


This means direct requests for the file will fail, but when included  
as a plugin, it will continue as normal.

If you wanted to add a bit more cloaking to the file, you could  
include your servers standard 404 page before you exit. E.g.


<?php
... plugin header ...

if (!defined('ABSPATH')) {
	$protocol = $_SERVER["SERVER_PROTOCOL"];
	if ( ('HTTP/1.1' != $protocol) && ('HTTP/1.0' != $protocol) )
		$protocol = 'HTTP/1.0';
	
	if ( version_compare( phpversion(), '4.3.0', '>=' ) ) {
		return @header( $protocol . ' 404 Not Found', true, 404 );
	} else {
		return @header( $protocol . ' 404 Not Found' );
	}
	
	// Your 404 file location may vary
	include '/var/www/localhost/errors/404.html';
	
	exit();
}

... rest of plugin ...
?>


Now if you add to this a well configured .htaccess file, the file  
becomes practically invisible.

I would prefer to see the proper directives added to the rewrite- 
rules generator instead of a bunch of empty index files floating around.


BUT...

The best idea of all is to move the directories out of the web  
accessible directories...

Lets say you have a directory structure like this:


www.example.org
   |
   +-- htdocs
   |      |
   |      +-- blog
   |
   +-- wp-plugins


Firstly, files in wp-plugins have to be executable. Then, you simply  
add the following to the wp-config.php file in htdocs/blog


define('PLUGINDIR', '../../wp-plugins');


That's it. Plugins can then be placed in that directory and available  
as normal to the WordPress install.

I haven't tested either of these solutions, so I'm sorry for any  
mistakes in them, but the basic premises are there.

Sam

--------------------------------------------------------------
  Sam Bauers

  sam@viveka.net.au
--------------------------------------------------------------



From jacobsantos at branson.com  Mon Aug 20 15:51:25 2007
From: jacobsantos at branson.com (jacobsantos@branson.com)
Date: Mon Aug 20 15:56:04 2007
Subject: [wp-hackers] protecting wp-content/plugins ?
In-Reply-To: <E9EB9DB4-CE73-4421-8B60-178313006ADE@viveka.net.au>
References: <ae81acd10708160700s596e5d93w6086b76c45f73710@mail.gmail.com>	<46C45BAA.6060008@freecharity.org.uk>	<ae81acd10708160727k3bd6c978rdfc5c46027e6d655@mail.gmail.com>	<b88434820708171227s6eb5e4cbg8918e19ff5f850a6@mail.gmail.com>	<46C622D8.9010301@yadan.net>	<b88434820708171537w9acc67fl10d86761f0522d42@mail.gmail.com>	<46C62409.1040303@yadan.net>	<d5d5430f0708172310v1d1d6c0ev68ffb8299c93923@mail.gmail.com>	<46C6AA7B.3000603@yadan.net>
	<46C6E20E.5070702@freecharity.org.uk>	<7d6d8bd0708180809y779fe291w3b555c3eb0bf59ba@mail.gmail.com>
	<E9EB9DB4-CE73-4421-8B60-178313006ADE@viveka.net.au>
Message-ID: <46C9B87D.8090802@branson.com>

Yes, the PLUGIN_DIR would work, expect for that pesky function that 
looks for wp-content/plugins to test for plugin filename. I'm not 
exactly sure what would happen then. I'm sure this has been tested and 
known to work. In fact, I was contemplating trying it myself, since I 
have access outside of web root.

I'll get back with my results. I think it might also be possible to move 
wp-includes, but I'm not sure what impact it would have on the js 
folders which must remain in www root.

In this sense, it is completely up to the administrator to take proper 
action to avoid hackers. With as much as someone can do on their own, it 
can't be blamed on WordPress (but actually it can), it is just easier to 
just download and go. Not every host allows for folder access outside of 
www root, Dreamhost does, GoDaddy does not.

Jacob Santos

Sam Bauers wrote:
>> Omry Yadan wrote:
>>
>>> covering wp-content and wp-themes will make the life of an attacker 
>>> much
>>> harder.
>
> But adding a blank index file does nothing to actually protect against 
> detection of a known exploitable plugin. It's classic security through 
> obscurity.
>
> If an attacker knows the common name for an exploitable plugin file 
> and also the common location of the plugin directory, then all they 
> have to do is construct the URI and request it.
>
> So if I know of an exploitable plugin whose main file name is 
> "bad-plugin.php". Then it is reasonable to assume that on a WordPress 
> install at http://www.example.com/blog, if I hit 
> http://www.example.com/blog/wp-content/plugins/bad-plugin.php in curl 
> and get a response that isn't a 404, then it's there and I can use 
> whatever trick I know to work the exploit.
>
> I can even script it to test a bunch of domains and run the exploit 
> automatically.
>
> The best way to protect against this is to test for some known 
> WordPress constant at the start of each plugin file, then if it is not 
> there you can return a 404 HTTP Response. E.g.:
>
>
> <?php
> ... plugin header ...
>
> if ( !defined('ABSPATH') ) {
>     $protocol = $_SERVER["SERVER_PROTOCOL"];
>     if ( ('HTTP/1.1' != $protocol) && ('HTTP/1.0' != $protocol) )
>         $protocol = 'HTTP/1.0';
>     
>     if ( version_compare( phpversion(), '4.3.0', '>=' ) ) {
>         return @header( $protocol . ' 404 Not Found', true, 404 );
>     } else {
>         return @header( $protocol . ' 404 Not Found' );
>     }
>     
>     exit();
> }
>
> ... rest of plugin ...
> ?>
>
>
> This means direct requests for the file will fail, but when included 
> as a plugin, it will continue as normal.
>
> If you wanted to add a bit more cloaking to the file, you could 
> include your servers standard 404 page before you exit. E.g.
>
>
> <?php
> ... plugin header ...
>
> if (!defined('ABSPATH')) {
>     $protocol = $_SERVER["SERVER_PROTOCOL"];
>     if ( ('HTTP/1.1' != $protocol) && ('HTTP/1.0' != $protocol) )
>         $protocol = 'HTTP/1.0';
>     
>     if ( version_compare( phpversion(), '4.3.0', '>=' ) ) {
>         return @header( $protocol . ' 404 Not Found', true, 404 );
>     } else {
>         return @header( $protocol . ' 404 Not Found' );
>     }
>     
>     // Your 404 file location may vary
>     include '/var/www/localhost/errors/404.html';
>     
>     exit();
> }
>
> ... rest of plugin ...
> ?>
>
>
> Now if you add to this a well configured .htaccess file, the file 
> becomes practically invisible.
>
> I would prefer to see the proper directives added to the rewrite-rules 
> generator instead of a bunch of empty index files floating around.
>
>
> BUT...
>
> The best idea of all is to move the directories out of the web 
> accessible directories...
>
> Lets say you have a directory structure like this:
>
>
> www.example.org
>   |
>   +-- htdocs
>   |      |
>   |      +-- blog
>   |
>   +-- wp-plugins
>
>
> Firstly, files in wp-plugins have to be executable. Then, you simply 
> add the following to the wp-config.php file in htdocs/blog
>
>
> define('PLUGINDIR', '../../wp-plugins');
>
>
> That's it. Plugins can then be placed in that directory and available 
> as normal to the WordPress install.
>
> I haven't tested either of these solutions, so I'm sorry for any 
> mistakes in them, but the basic premises are there.
>
> Sam
>
> --------------------------------------------------------------
>  Sam Bauers
>
>  sam@viveka.net.au
> --------------------------------------------------------------
>
>
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
>
>

From r at robm.me.uk  Mon Aug 20 16:16:13 2007
From: r at robm.me.uk (Rob Miller)
Date: Mon Aug 20 16:16:33 2007
Subject: [wp-hackers] protecting wp-content/plugins ?
In-Reply-To: <46C9B87D.8090802@branson.com>
References: <ae81acd10708160700s596e5d93w6086b76c45f73710@mail.gmail.com>	<46C45BAA.6060008@freecharity.org.uk>	<ae81acd10708160727k3bd6c978rdfc5c46027e6d655@mail.gmail.com>	<b88434820708171227s6eb5e4cbg8918e19ff5f850a6@mail.gmail.com>	<46C622D8.9010301@yadan.net>	<b88434820708171537w9acc67fl10d86761f0522d42@mail.gmail.com>	<46C62409.1040303@yadan.net>	<d5d5430f0708172310v1d1d6c0ev68ffb8299c93923@mail.gmail.com>	<46C6AA7B.3000603@yadan.net>	<46C6E20E.5070702@freecharity.org.uk>	<7d6d8bd0708180809y779fe291w3b555c3eb0bf59ba@mail.gmail.com>	<E9EB9DB4-CE73-4421-8B60-178313006ADE@viveka.net.au>
	<46C9B87D.8090802@branson.com>
Message-ID: <46C9BE4D.4060401@robm.me.uk>

jacobsantos@branson.com wrote:
> Yes, the PLUGIN_DIR would work, expect for that pesky function that 
> looks for wp-content/plugins to test for plugin filename. I'm not 
> exactly sure what would happen then. I'm sure this has been tested and 
> known to work. In fact, I was contemplating trying it myself, since I 
> have access outside of web root.
>
> I'll get back with my results. I think it might also be possible to 
> move wp-includes, but I'm not sure what impact it would have on the js 
> folders which must remain in www root.
>
> In this sense, it is completely up to the administrator to take proper 
> action to avoid hackers. With as much as someone can do on their own, 
> it can't be blamed on WordPress (but actually it can), it is just 
> easier to just download and go. Not every host allows for folder 
> access outside of www root, Dreamhost does, GoDaddy does not.
>
> Jacob Santos
There's also the potential to break lots of plugins, both ones that 
hardcode `wp-content/plugins` and ones that reference web-accessible 
stuff from their directories (images, form actions, etc.).

The former is perhaps bad practice, but I don't see how you can avoid 
the latter.

-- 
Rob Miller
http://robm.me.uk/

From alan at verselogic.net  Mon Aug 20 17:29:06 2007
From: alan at verselogic.net (Alan J Castonguay)
Date: Mon Aug 20 17:29:17 2007
Subject: [wp-hackers] protecting wp-content/plugins ?
In-Reply-To: <E9EB9DB4-CE73-4421-8B60-178313006ADE@viveka.net.au>
References: <ae81acd10708160700s596e5d93w6086b76c45f73710@mail.gmail.com>
	<46C45BAA.6060008@freecharity.org.uk>
	<ae81acd10708160727k3bd6c978rdfc5c46027e6d655@mail.gmail.com>
	<b88434820708171227s6eb5e4cbg8918e19ff5f850a6@mail.gmail.com>
	<46C622D8.9010301@yadan.net>
	<b88434820708171537w9acc67fl10d86761f0522d42@mail.gmail.com>
	<46C62409.1040303@yadan.net>
	<d5d5430f0708172310v1d1d6c0ev68ffb8299c93923@mail.gmail.com>
	<46C6AA7B.3000603@yadan.net> <46C6E20E.5070702@freecharity.org.uk>
	<7d6d8bd0708180809y779fe291w3b555c3eb0bf59ba@mail.gmail.com>
	<E9EB9DB4-CE73-4421-8B60-178313006ADE@viveka.net.au>
Message-ID: <A04B7251-CD08-4BBC-A04E-395277D0FED8@verselogic.net>

> Now if you add to this a well configured .htaccess file, the file  
> becomes practically invisible.

Returning 404 for direct plugin access does nothing to actually  
protect against detection of a known exploitable plugin. It's classic  
security through obscurity. In the unlikely case that the plugin is  
not dependent on add_action/filter() to bootstrap, but runs code  
directly in the global namespace on every page request, then there  
could be an exploit in this fashion.

If an attacker knows the common name for an exploitable plugin file  
and how it hooks into the public website (given, as the source is  
probably available) and that it keys off certain non-validated cookie/ 
get/post parameters, then all they have to do is construct the URI to  
wordpress' index.php and request it.

The best way to protect against this is for the plugin to validate  
all access (like to http://example/wp-content/plugins/badplugin.php)  
and input (like /index.php?unvalidatedsql=...), and deny anything  
that is not specifically desired.

With respect to "knowing the plugins installed is a security risk",  
sometimes bloggers make posts like http://www.douglaskarr.com/ 
2007/04/12/wordpress-what-plugins-am-i-running/ or use plugins like  
http://wordpress.org/extend/plugins/wp-pluginsused/ . This knowledge,  
together with source should not be sufficient to perform a remote- 
exploit.
From jacobsantos at branson.com  Mon Aug 20 18:04:18 2007
From: jacobsantos at branson.com (jacobsantos@branson.com)
Date: Mon Aug 20 18:08:55 2007
Subject: [wp-hackers] protecting wp-content/plugins ?
In-Reply-To: <46C9BE4D.4060401@robm.me.uk>
References: <ae81acd10708160700s596e5d93w6086b76c45f73710@mail.gmail.com>	<46C45BAA.6060008@freecharity.org.uk>	<ae81acd10708160727k3bd6c978rdfc5c46027e6d655@mail.gmail.com>	<b88434820708171227s6eb5e4cbg8918e19ff5f850a6@mail.gmail.com>	<46C622D8.9010301@yadan.net>	<b88434820708171537w9acc67fl10d86761f0522d42@mail.gmail.com>	<46C62409.1040303@yadan.net>	<d5d5430f0708172310v1d1d6c0ev68ffb8299c93923@mail.gmail.com>	<46C6AA7B.3000603@yadan.net>	<46C6E20E.5070702@freecharity.org.uk>	<7d6d8bd0708180809y779fe291w3b555c3eb0bf59ba@mail.gmail.com>	<E9EB9DB4-CE73-4421-8B60-178313006ADE@viveka.net.au>	<46C9B87D.8090802@branson.com>
	<46C9BE4D.4060401@robm.me.uk>
Message-ID: <46C9D7A2.2080207@branson.com>

I sometimes wonder if it is worth working on WordPress, and this kind of 
stuff explains why. Of course, the alternative is to spend a couple of 
years building a system from the ground up, so the choice remains to 
continue with WordPress.

Whatever solution, but security through obscurity isn't a bad solution, 
it justs gets a bad name because that is the only *security* implemented 
(lack of validation, sanitizing, etc). I think the easiest solution, 
with notes on codex is best, in my opinion.

Jacob Santos

Rob Miller wrote:
> jacobsantos@branson.com wrote:
>> Yes, the PLUGIN_DIR would work, expect for that pesky function that 
>> looks for wp-content/plugins to test for plugin filename. I'm not 
>> exactly sure what would happen then. I'm sure this has been tested 
>> and known to work. In fact, I was contemplating trying it myself, 
>> since I have access outside of web root.
>>
>> I'll get back with my results. I think it might also be possible to 
>> move wp-includes, but I'm not sure what impact it would have on the 
>> js folders which must remain in www root.
>>
>> In this sense, it is completely up to the administrator to take 
>> proper action to avoid hackers. With as much as someone can do on 
>> their own, it can't be blamed on WordPress (but actually it can), it 
>> is just easier to just download and go. Not every host allows for 
>> folder access outside of www root, Dreamhost does, GoDaddy does not.
>>
>> Jacob Santos
> There's also the potential to break lots of plugins, both ones that 
> hardcode `wp-content/plugins` and ones that reference web-accessible 
> stuff from their directories (images, form actions, etc.).
>
> The former is perhaps bad practice, but I don't see how you can avoid 
> the latter.
>

From sam at viveka.net.au  Mon Aug 20 18:23:47 2007
From: sam at viveka.net.au (Sam Bauers)
Date: Mon Aug 20 18:24:22 2007
Subject: [wp-hackers] protecting wp-content/plugins ?
In-Reply-To: <A04B7251-CD08-4BBC-A04E-395277D0FED8@verselogic.net>
References: <ae81acd10708160700s596e5d93w6086b76c45f73710@mail.gmail.com>
	<46C45BAA.6060008@freecharity.org.uk>
	<ae81acd10708160727k3bd6c978rdfc5c46027e6d655@mail.gmail.com>
	<b88434820708171227s6eb5e4cbg8918e19ff5f850a6@mail.gmail.com>
	<46C622D8.9010301@yadan.net>
	<b88434820708171537w9acc67fl10d86761f0522d42@mail.gmail.com>
	<46C62409.1040303@yadan.net>
	<d5d5430f0708172310v1d1d6c0ev68ffb8299c93923@mail.gmail.com>
	<46C6AA7B.3000603@yadan.net> <46C6E20E.5070702@freecharity.org.uk>
	<7d6d8bd0708180809y779fe291w3b555c3eb0bf59ba@mail.gmail.com>
	<E9EB9DB4-CE73-4421-8B60-178313006ADE@viveka.net.au>
	<A04B7251-CD08-4BBC-A04E-395277D0FED8@verselogic.net>
Message-ID: <8F8D0D65-499D-4587-A49A-14AFCAEDB99E@viveka.net.au>


On 21/08/2007, at 3:29 AM, Alan J Castonguay wrote:

> If an attacker knows the common name for an exploitable plugin file  
> and how it hooks into the public website (given, as the source is  
> probably available) and that it keys off certain non-validated  
> cookie/get/post parameters, then all they have to do is construct  
> the URI to wordpress' index.php and request it.
>
> The best way to protect against this is for the plugin to validate  
> all access (like to http://example/wp-content/plugins/ 
> badplugin.php) and input (like /index.php?unvalidatedsql=...), and  
> deny anything that is not specifically desired.

Well, now you are talking about running an actual exploit, and about  
good coding practice (like validating user input). Running an exploit  
may not always lead to a result that is immediately obvious or  
testable, but running a scan over multiple domains on known  
directories will produce an easily quantifiable result for those  
cases that are standard. This result can be tabulated for  
exploitation by a real human later.

I do think there's some advantage in removing the most efficient  
method of testing for the presence of exploitable files, which was  
the point the original poster has raised.

Even though you raise further valid points about security in general,  
there is not much that can be done in the core code to make various  
plugin code of a higher standard.

Sam


--------------------------------------------------------------
  Sam Bauers

  sam@viveka.net.au
--------------------------------------------------------------



From otto at ottodestruct.com  Tue Aug 21 18:15:05 2007
From: otto at ottodestruct.com (Otto)
Date: Tue Aug 21 18:15:11 2007
Subject: [wp-hackers] $wpdb cacheing?
In-Reply-To: <BDDD76AC-3039-4104-A2BC-38C178BD87D6@striderweb.com>
References: <BDDD76AC-3039-4104-A2BC-38C178BD87D6@striderweb.com>
Message-ID: <161617690708211115q24adcc4ct2bce450d01d4a401@mail.gmail.com>

Caching is not your problem. Although it will be, eventually.. ;)

get_pages contains this:
$query = "SELECT * FROM $wpdb->posts " ;

$wpdb->posts is set in wp-settings.php. It uses the prefix there, but
not later. So you'll need to change $wpdb->posts and probably other
$wpdb->tablename variables as well.

Also, get_pages does use the $wp_object_cache global, so if you have
object caching on, you'll get from the cache instead of making the
database call. The easy solution to this is simply to flush the cache
by calling wp_cache_flush() before making the call. Or just not enable
the object cache to begin with.

The memory cache isn't used with a get_pages() call.


On 8/19/07, Stephen Rider <wp-hackers@striderweb.com> wrote:
> Hi --
>
> I'm trying to make a function that gets a combined list of Pages from
> two different blogs (both in the same database)
>
> Since the login info is the same, it occurred to me to try changing
> the table prefix to get the second blog's data.  Here's the code:
>
> $mbpages1 = get_pages( $args );
> $orig_prefix = $wpdb->prefix;
> $wpdb->prefix = 'blah_';
> $mbpages2 = get_pages( $args );
> $mbpages1 = array_merge( $mbpages1, $mbpages2 );
> $wpdb->prefix = $orig_prefix;
>
> It pulls the first blog's data twice.
>
> Is the get_pages being cached somehow?  Is there a way to reset the
> cache so it pulls the different data?
>
> ...and if I do that, is there a way for me to cache the combined list
> and thus avoid a big performance hit?
>
> My head hurts.  Thanks in advance.
>
> Stephen
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
From otto at ottodestruct.com  Tue Aug 21 18:23:23 2007
From: otto at ottodestruct.com (Otto)
Date: Tue Aug 21 18:23:31 2007
Subject: [wp-hackers] protecting wp-content/plugins ?
In-Reply-To: <E9EB9DB4-CE73-4421-8B60-178313006ADE@viveka.net.au>
References: <ae81acd10708160700s596e5d93w6086b76c45f73710@mail.gmail.com>
	<b88434820708171227s6eb5e4cbg8918e19ff5f850a6@mail.gmail.com>
	<46C622D8.9010301@yadan.net>
	<b88434820708171537w9acc67fl10d86761f0522d42@mail.gmail.com>
	<46C62409.1040303@yadan.net>
	<d5d5430f0708172310v1d1d6c0ev68ffb8299c93923@mail.gmail.com>
	<46C6AA7B.3000603@yadan.net> <46C6E20E.5070702@freecharity.org.uk>
	<7d6d8bd0708180809y779fe291w3b555c3eb0bf59ba@mail.gmail.com>
	<E9EB9DB4-CE73-4421-8B60-178313006ADE@viveka.net.au>
Message-ID: <161617690708211123t5101cc6er2b7a0e95489754ab@mail.gmail.com>

On 8/20/07, Sam Bauers <sam@viveka.net.au> wrote:
> But adding a blank index file does nothing to actually protect
> against detection of a known exploitable plugin. It's classic
> security through obscurity.
>
> If an attacker knows the common name for an exploitable plugin file
> and also the common location of the plugin directory, then all they
> have to do is construct the URI and request it.
> ...
> The best way to protect against this is to test for some known
> WordPress constant at the start of each plugin file, then if it is
> not there you can return a 404 HTTP Response. E.g.:

While that works, the problem here is that 90% of the plugins out
there don't actually do anything when executed directly. They define
functions and then use hooks to attach to the proper points in
Wordpress. Used exclusively, this is 100% safe coding style.

The only reason a plugin would be exploitable is if the plugin
actually executes some code of substance at include time. No plugin
should ever do this *unless* it's intended to be called directly (to
return some kind of dynamic code to the page, say, something that
outputs an image file). If the plugin actually needs to run code at
include time, it should throw it in a function and hook that to
plugins_loaded or init or some other action hook.

So the utility of a method like yours (check for ABSPATH) is limited
in scope, since a properly made plugin would never need such a check
in the first place. It's generally a fine way to partially secure a
plugin after the fact, by the end user though.
From sam at viveka.net.au  Wed Aug 22 00:51:54 2007
From: sam at viveka.net.au (Sam Bauers)
Date: Wed Aug 22 00:51:55 2007
Subject: [wp-hackers] protecting wp-content/plugins ?
In-Reply-To: <161617690708211123t5101cc6er2b7a0e95489754ab@mail.gmail.com>
References: <ae81acd10708160700s596e5d93w6086b76c45f73710@mail.gmail.com>
	<b88434820708171227s6eb5e4cbg8918e19ff5f850a6@mail.gmail.com>
	<46C622D8.9010301@yadan.net>
	<b88434820708171537w9acc67fl10d86761f0522d42@mail.gmail.com>
	<46C62409.1040303@yadan.net>
	<d5d5430f0708172310v1d1d6c0ev68ffb8299c93923@mail.gmail.com>
	<46C6AA7B.3000603@yadan.net> <46C6E20E.5070702@freecharity.org.uk>
	<7d6d8bd0708180809y779fe291w3b555c3eb0bf59ba@mail.gmail.com>
	<E9EB9DB4-CE73-4421-8B60-178313006ADE@viveka.net.au>
	<161617690708211123t5101cc6er2b7a0e95489754ab@mail.gmail.com>
Message-ID: <E2440484-D3DC-44EA-BE35-B28910E0EAE5@viveka.net.au>

You are absolutely right that using a properly made plugin is the  
best security technique. But the point of the method I wrote up was  
to hide the files existence to stop it from being detected by some  
sort of scanning technique. Returning a 404 is the way to do this,  
the good plugin coding practices you mention will secure any direct  
exploit (if one might exist) from calling the file directly, but it  
will still return an HTTP status of 200, so if I'm an attacker, I  
know it is there. This *may* be helpful down the track, when a  
seemingly well written and secure plugin becomes insecure for some  
reason. So appending that conditional to the start of a plugin will  
help in that it will slow down an attackers detection of available  
exploits. It is also a lot easier than auditing the code in every  
plugin you install.

Sam

On 22/08/2007, at 4:23 AM, Otto wrote:

> So the utility of a method like yours (check for ABSPATH) is limited
> in scope, since a properly made plugin would never need such a check
> in the first place. It's generally a fine way to partially secure a
> plugin after the fact, by the end user though.

--------------------------------------------------------------
  Sam Bauers

  sam@viveka.net.au
--------------------------------------------------------------



From wordpress at tekartist.org  Wed Aug 22 02:42:33 2007
From: wordpress at tekartist.org (Stephane Daury)
Date: Wed Aug 22 02:42:41 2007
Subject: [wp-hackers] Newb: is it appropriate to ask for a plugin peer
	review here?
Message-ID: <2D8FBC9D-34B4-4512-A868-236497458731@tekartist.org>

Hey there,

I only recently subscribed and was wondering if it is appropriate to  
ask for a plugin peer review on this list?
I'm looking forward to releasing a plugin, but would like LDAP/ 
security related constructive criticism before I release it into the  
wild.
Last thing I want is to be responsible for a hole. :)

Let me know, and I'll post more.

Thanks,

Stephane

From ozh at planetozh.com  Wed Aug 22 06:12:42 2007
From: ozh at planetozh.com (Ozh)
Date: Wed Aug 22 06:12:47 2007
Subject: [wp-hackers] Newb: is it appropriate to ask for a plugin peer
	review here?
In-Reply-To: <2D8FBC9D-34B4-4512-A868-236497458731@tekartist.org>
References: <2D8FBC9D-34B4-4512-A868-236497458731@tekartist.org>
Message-ID: <ae81acd10708212312l51c4d064yd618ec849c1a2113@mail.gmail.com>

Given the recent discussion related to plugin security, I think
several people here will be glad giving their two cents (I will)

Ozh

On 8/22/07, Stephane Daury <wordpress@tekartist.org> wrote:
> Hey there,
>
> I only recently subscribed and was wondering if it is appropriate to
> ask for a plugin peer review on this list?
> I'm looking forward to releasing a plugin, but would like LDAP/
> security related constructive criticism before I release it into the
> wild.
> Last thing I want is to be responsible for a hole. :)
>
> Let me know, and I'll post more.
>
> Thanks,
>
> Stephane
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>


-- 
http://FrenchFragFactory.net ~ Daily Quake News
   http://planetOzh.com ~ Useless Blog & Code
From andre at pixelplexus.co.za  Wed Aug 22 07:06:59 2007
From: andre at pixelplexus.co.za (andre@pixelplexus.co.za)
Date: Wed Aug 22 07:07:08 2007
Subject: [wp-hackers] Newb: is it appropriate to ask for a plugin peer 
	review here?
In-Reply-To: <ae81acd10708212312l51c4d064yd618ec849c1a2113@mail.gmail.com>
References: <2D8FBC9D-34B4-4512-A868-236497458731@tekartist.org>
	<ae81acd10708212312l51c4d064yd618ec849c1a2113@mail.gmail.com>
Message-ID: <38907.198.54.202.182.1187766419.squirrel@webmail.pixelplexus.co.za>

Suspect many of us lurkers will find the discussion valuable. Please go
ahead.
Andr? SC
> Given the recent discussion related to plugin security, I think
> several people here will be glad giving their two cents (I will)
>
> Ozh
>
> On 8/22/07, Stephane Daury <wordpress@tekartist.org> wrote:
>> Hey there,
>>
>> I only recently subscribed and was wondering if it is appropriate to
>> ask for a plugin peer review on this list?
>> I'm looking forward to releasing a plugin, but would like LDAP/
>> security related constructive criticism before I release it into the
>> wild.
>> Last thing I want is to be responsible for a hole. :)
>>
>> Let me know, and I'll post more.
>>
>> Thanks,
>>
>> Stephane
>>
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers@lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
>
>
> --
> http://FrenchFragFactory.net ~ Daily Quake News
>    http://planetOzh.com ~ Useless Blog & Code
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>


From otto at ottodestruct.com  Wed Aug 22 19:39:24 2007
From: otto at ottodestruct.com (Otto)
Date: Wed Aug 22 19:39:32 2007
Subject: [wp-hackers] protecting wp-content/plugins ?
In-Reply-To: <E2440484-D3DC-44EA-BE35-B28910E0EAE5@viveka.net.au>
References: <ae81acd10708160700s596e5d93w6086b76c45f73710@mail.gmail.com>
	<b88434820708171537w9acc67fl10d86761f0522d42@mail.gmail.com>
	<46C62409.1040303@yadan.net>
	<d5d5430f0708172310v1d1d6c0ev68ffb8299c93923@mail.gmail.com>
	<46C6AA7B.3000603@yadan.net> <46C6E20E.5070702@freecharity.org.uk>
	<7d6d8bd0708180809y779fe291w3b555c3eb0bf59ba@mail.gmail.com>
	<E9EB9DB4-CE73-4421-8B60-178313006ADE@viveka.net.au>
	<161617690708211123t5101cc6er2b7a0e95489754ab@mail.gmail.com>
	<E2440484-D3DC-44EA-BE35-B28910E0EAE5@viveka.net.au>
Message-ID: <161617690708221239l74d6fc1eqf5017eb8db66675a@mail.gmail.com>

Mmmmm... I think I didn't get my point across well here...

Knowing whether the plugin exists on the site or not is irrelevant
unless the pluign has a security hole. They're not going to "scan" for
plugins that don't have known exploitable holes. So we can discount
all plugins that do basic stuff like defining functions and using
hooks. This is 80-90% of all plugins. Whether you know they are there
or not, if they're not exploitable, it makes absolutely zero
difference if the attacker knows of it.

So, if a plugin does have a directly exploitable hole, then it must
execute code when called directly. Just defining functions and adding
hooks cannot be exploited directly.

Now, if the plugin executes actual code when called directly, then it's either:
a) Incredibly poorly written, or
b) Designed specifically to do exactly that.

Example of B: A plugin adds an "img src" link that points to itself
into the body of a post. Then when called directly, it returns a
binary image file to display on the webpage. Handy way of getting the
plugin and associated images all into one file for ease of
installation, perhaps. I've used this trick before myself.

Anyway, so you suggested checking to be sure it's not being called
directly and quitting if it is...
-For case A, this is fine, but it may not actually solve the bug if
the plugin is that poorly written, because the same code is still
executed at the plugin include time and there's quite likely an
exploitable vector there.
-For case B, your method simply breaks the operation of the plugin entirely.

So what I'm saying here is that this idea, while sound, falls apart in
actual use. It doesn't add anything except somewhat useless overhead.
Okay, so somebody can't find out what plugins you use. Big deal, if
your plugins are not exploitable, then it doesn't matter, and if they
are exploitable, it's unlikely that this will fix them. A hidden bit
of exploitable code can still be exploited by simply spamming the
exploit on every WordPress site you find. They don't *need* to scan
for holes in the code, they just have to attempt to use them. Scanning
for what plugins you have is *useless* to a site hacker.

-Otto



On 8/21/07, Sam Bauers <sam@viveka.net.au> wrote:
> You are absolutely right that using a properly made plugin is the
> best security technique. But the point of the method I wrote up was
> to hide the files existence to stop it from being detected by some
> sort of scanning technique. Returning a 404 is the way to do this,
> the good plugin coding practices you mention will secure any direct
> exploit (if one might exist) from calling the file directly, but it
> will still return an HTTP status of 200, so if I'm an attacker, I
> know it is there. This *may* be helpful down the track, when a
> seemingly well written and secure plugin becomes insecure for some
> reason. So appending that conditional to the start of a plugin will
> help in that it will slow down an attackers detection of available
> exploits. It is also a lot easier than auditing the code in every
> plugin you install.
>
> Sam
>
> On 22/08/2007, at 4:23 AM, Otto wrote:
>
> > So the utility of a method like yours (check for ABSPATH) is limited
> > in scope, since a properly made plugin would never need such a check
> > in the first place. It's generally a fine way to partially secure a
> > plugin after the fact, by the end user though.
>
> --------------------------------------------------------------
>   Sam Bauers
>
>   sam@viveka.net.au
> --------------------------------------------------------------
>
>
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
From wordpress at tekartist.org  Wed Aug 22 22:39:07 2007
From: wordpress at tekartist.org (Stephane Daury)
Date: Wed Aug 22 22:39:14 2007
Subject: [wp-hackers] Newb: is it appropriate to ask for a plugin peer
	review here?
In-Reply-To: <ae81acd10708212312l51c4d064yd618ec849c1a2113@mail.gmail.com>
References: <2D8FBC9D-34B4-4512-A868-236497458731@tekartist.org>
	<ae81acd10708212312l51c4d064yd618ec849c1a2113@mail.gmail.com>
Message-ID: <02B1678D-8497-4BBD-9F6D-CBDA54BBD17B@tekartist.org>


Thanks, it is very much appreciated.

The project page can be found at <http://tekartist.org/labs/wordpress/ 
plugins/wpdirauth/>

An ongoing discussion thread can be found at <http://wordpress.org/ 
support/topic/129814>

Unreleased (ie: not packaged) source is in my personal svn repo at  
<http://labs.tekartist.org/wordpress/svn/branches/dev/plugins/ 
wpDirAuth/>

And finally, the generated code docs and syntax highlighted code are  
at <http://tekartist.org/labs/wordpress/plugins/wpdirauth/phpdocs/>

A couple of people are already onboard, but we're looking forward to  
having your input.

Feedback in the thread listed above would be appreciated, but I'll  
monitor the list as well.

Thanks, and cheers,

Stephane



On Aug 22, 2007, at 2:12, Ozh wrote:

> Given the recent discussion related to plugin security, I think
> several people here will be glad giving their two cents (I will)
>
> Ozh
>
> On 8/22/07, Stephane Daury <wordpress@tekartist.org> wrote:
>> Hey there,
>>
>> I only recently subscribed and was wondering if it is appropriate to
>> ask for a plugin peer review on this list?
>> I'm looking forward to releasing a plugin, but would like LDAP/
>> security related constructive criticism before I release it into the
>> wild.
>> Last thing I want is to be responsible for a hole. :)
>>
>> Let me know, and I'll post more.
>>
>> Thanks,
>>
>> Stephane
>>
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers@lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
>
>
> -- 
> http://FrenchFragFactory.net ~ Daily Quake News
>    http://planetOzh.com ~ Useless Blog & Code
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

From tbarta at gmail.com  Thu Aug 23 00:30:01 2007
From: tbarta at gmail.com (Tom Barta)
Date: Thu Aug 23 00:30:07 2007
Subject: [wp-hackers] protecting wp-content/plugins ?
In-Reply-To: <161617690708221239l74d6fc1eqf5017eb8db66675a@mail.gmail.com>
References: <ae81acd10708160700s596e5d93w6086b76c45f73710@mail.gmail.com>
	<46C62409.1040303@yadan.net>
	<d5d5430f0708172310v1d1d6c0ev68ffb8299c93923@mail.gmail.com>
	<46C6AA7B.3000603@yadan.net> <46C6E20E.5070702@freecharity.org.uk>
	<7d6d8bd0708180809y779fe291w3b555c3eb0bf59ba@mail.gmail.com>
	<E9EB9DB4-CE73-4421-8B60-178313006ADE@viveka.net.au>
	<161617690708211123t5101cc6er2b7a0e95489754ab@mail.gmail.com>
	<E2440484-D3DC-44EA-BE35-B28910E0EAE5@viveka.net.au>
	<161617690708221239l74d6fc1eqf5017eb8db66675a@mail.gmail.com>
Message-ID: <7d6d8bd0708221730r17f0942dx7cdef047540c9c03@mail.gmail.com>

On 8/22/07, Otto <otto@ottodestruct.com> wrote:
>
> Knowing whether the plugin exists on the site or not is irrelevant
> unless the pluign has a security hole. They're not going to "scan" for
> plugins that don't have known exploitable holes. So we can discount
> all plugins that do basic stuff like defining functions and using
> hooks. This is 80-90% of all plugins. Whether you know they are there
> or not, if they're not exploitable, it makes absolutely zero
> difference if the attacker knows of it.


Even so, the way that Wordpress puts library scripts (e.g. not to be
accessed directly) into the document root is fundamentally a bad idea:
1) if your server setup breaks for whatever reason, it might end up
delivering script source instead of executing scripts (more of an issue with
someone writing custom plugins than with publicly-available plugins)
2) the discovery of a new exploit is suddenly troublesome if the PHP script
is web-accessible, making any vulnerabilities that are found potentially
more damaging
3) it provides extra information that no one *needs* to know.  Maybe I'm
paranoid, but why bother broadcasting something when there's nothing that
should be told?

Sure, perfectly-written plugins don't have any issues, but most computer
security is based around layers of protection.  If your only protection is
"plugins probably don't have bugs" then you're worse off than if your
protection is "plugins probably don't have bugs, and even if they did, most
of them wouldn't be exploitable since they're not web-accessible".

Of course, this is an argument against a bit more of wordpress's
architecture than the directory-listing issue.

-- 
Tom Barta
From wordpress at tekartist.org  Thu Aug 23 04:17:25 2007
From: wordpress at tekartist.org (Stephane Daury)
Date: Thu Aug 23 04:17:32 2007
Subject: [wp-hackers] WP3 pointers
Message-ID: <F7E1A594-5523-4864-9AA2-D3A9A9AA09B2@tekartist.org>

Hey,

As a new subscriber, I've been digging through the list archive for  
WP3 dev related info, but I'm actually having too much luck. I'm  
getting hundreds of branding-related hits, but not much in light of  
code development chatter.

Can someone please point this newB to a URL?

I'm increasingly getting involved in WP-related stuff, and I'd like  
to keep ahead of what's to come as much as I can, and potentially  
contribute to the drive to 3 if/where/when I can be of help.

Thanks,

Stephane


From wordpress at tekartist.org  Thu Aug 23 04:21:02 2007
From: wordpress at tekartist.org (Stephane Daury)
Date: Thu Aug 23 04:21:09 2007
Subject: [wp-hackers] WP3 pointers
In-Reply-To: <F7E1A594-5523-4864-9AA2-D3A9A9AA09B2@tekartist.org>
References: <F7E1A594-5523-4864-9AA2-D3A9A9AA09B2@tekartist.org>
Message-ID: <B197806F-5CA0-4088-810E-7E2D0AACFE76@tekartist.org>


PS: contributions I'm looking forward to bring are primarily related  
to experience gained through the following (!! buzzword overload  
warning !!):
<http://tekartist.org/labs/mcgill-wps/>

Stephane



On Aug 23, 2007, at 0:17, Stephane Daury wrote:

> Hey,
>
> As a new subscriber, I've been digging through the list archive for  
> WP3 dev related info, but I'm actually having too much luck. I'm  
> getting hundreds of branding-related hits, but not much in light of  
> code development chatter.
>
> Can someone please point this newB to a URL?
>
> I'm increasingly getting involved in WP-related stuff, and I'd like  
> to keep ahead of what's to come as much as I can, and potentially  
> contribute to the drive to 3 if/where/when I can be of help.
>
> Thanks,
>
> Stephane
>
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

From viper at viper007bond.com  Thu Aug 23 11:06:10 2007
From: viper at viper007bond.com (Viper007Bond)
Date: Thu Aug 23 11:13:54 2007
Subject: [wp-hackers] Why in the heck won't this work?
Message-ID: <8f93a7390708230406o20bf390t5b1733f8c6f914dc@mail.gmail.com>

Perhaps coding at 4am isn't the best idea, I know, but I can't figure out
for the life of me why this won't work.

I've made of copy of in_category() and modified it slightly to accept the
post ID rather than getting it from the global $post (due to use in a plugin
-- I need to find out if a certain post is in a certain category).

My code: http://wordpress.pastebin.com/f5c7e4b6a

The original's $categories array's keys are the values of the category ID.

ex:

Array
(
    [6] => stdClass Object
        (
            [term_id] => 6


However, the one in my function does it sequentially:

Array
(
    [0] => stdClass Object
        (
            [term_id] => 6


Then 1, then 2, etc.

Due to this, the array_key_exists() test is failing.

Any ideas why? I don't see what is making the difference.

-- 
Viper007Bond | http://www.viper007bond.com/
From wordpress at dd32.id.au  Thu Aug 23 11:26:24 2007
From: wordpress at dd32.id.au (DD32)
Date: Thu Aug 23 11:25:41 2007
Subject: [wp-hackers] Why in the heck won't this work?
In-Reply-To: <8f93a7390708230406o20bf390t5b1733f8c6f914dc@mail.gmail.com>
References: <8f93a7390708230406o20bf390t5b1733f8c6f914dc@mail.gmail.com>
Message-ID: <op.txifeaofk6w4mc@dd32.no-ip.com>

Perhaps this will help?

term_taxonomy_id is the Category ID


<?php
$post_ID = 28;

$categories = wp_get_object_terms($post_ID, 'category');

var_dump($categories);
?>

array
    0 =>
      object(stdClass)[165]
        public 'term_id' => string '9' (length=1)
        public 'name' => string 'Test Cat' (length=14)
        public 'slug' => string 'test-cat' (length=14)
        public 'term_group' => string '0' (length=1)
        public 'term_taxonomy_id' => string '9' (length=1)
        public 'taxonomy' => string 'category' (length=8)
        public 'description' => string '' (length=0)
        public 'parent' => string '0' (length=1)
        public 'count' => string '1' (length=1)
    1 =>
      object(stdClass)[166]
        public 'term_id' => string '14' (length=2)
        public 'name' => string 'Wordpress Plugins' (length=17)
        public 'slug' => string 'wordpress-plugins' (length=17)
        public 'term_group' => string '0' (length=1)
        public 'term_taxonomy_id' => string '14' (length=2)
        public 'taxonomy' => string 'category' (length=8)
        public 'description' => string '' (length=0)
        public 'parent' => string '0' (length=1)
        public 'count' => string '1' (length=1)

On Thu, 23 Aug 2007 21:06:10 +1000, Viper007Bond <viper@viper007bond.com>
wrote:

> Perhaps coding at 4am isn't the best idea, I know, but I can't figure out
> for the life of me why this won't work.
>
> I've made of copy of in_category() and modified it slightly to accept the
> post ID rather than getting it from the global $post (due to use in a  
> plugin
> -- I need to find out if a certain post is in a certain category).
>
> My code: http://wordpress.pastebin.com/f5c7e4b6a
>
> The original's $categories array's keys are the values of the category  
> ID.
>
> ex:
>
> Array
> (
>     [6] => stdClass Object
>         (
>             [term_id] => 6
>
>
> However, the one in my function does it sequentially:
>
> Array
> (
>     [0] => stdClass Object
>         (
>             [term_id] => 6
>
>
> Then 1, then 2, etc.
>
> Due to this, the array_key_exists() test is failing.
>
> Any ideas why? I don't see what is making the difference.
>

-- 
Using Opera's revolutionary e-mail client: http://www.opera.com/mail/
From viper at viper007bond.com  Thu Aug 23 12:15:21 2007
From: viper at viper007bond.com (Viper007Bond)
Date: Thu Aug 23 12:15:28 2007
Subject: [wp-hackers] Why in the heck won't this work?
In-Reply-To: <op.txifeaofk6w4mc@dd32.no-ip.com>
References: <8f93a7390708230406o20bf390t5b1733f8c6f914dc@mail.gmail.com>
	<op.txifeaofk6w4mc@dd32.no-ip.com>
Message-ID: <8f93a7390708230515m5ddecb10laa7dda026e44537d@mail.gmail.com>

Yes, as is term_id, but having to loop through each object in the array is a
pain, especially when the $categories array should have the term_id /
term_taxonomy_id as the key as it is in in_category().

On 8/23/07, DD32 <wordpress@dd32.id.au> wrote:
>
> Perhaps this will help?
>
> term_taxonomy_id is the Category ID
>
>
> <?php
> $post_ID = 28;
>
> $categories = wp_get_object_terms($post_ID, 'category');
>
> var_dump($categories);
> ?>
>
> array
>     0 =>
>       object(stdClass)[165]
>         public 'term_id' => string '9' (length=1)
>         public 'name' => string 'Test Cat' (length=14)
>         public 'slug' => string 'test-cat' (length=14)
>         public 'term_group' => string '0' (length=1)
>         public 'term_taxonomy_id' => string '9' (length=1)
>         public 'taxonomy' => string 'category' (length=8)
>         public 'description' => string '' (length=0)
>         public 'parent' => string '0' (length=1)
>         public 'count' => string '1' (length=1)
>     1 =>
>       object(stdClass)[166]
>         public 'term_id' => string '14' (length=2)
>         public 'name' => string 'Wordpress Plugins' (length=17)
>         public 'slug' => string 'wordpress-plugins' (length=17)
>         public 'term_group' => string '0' (length=1)
>         public 'term_taxonomy_id' => string '14' (length=2)
>         public 'taxonomy' => string 'category' (length=8)
>         public 'description' => string '' (length=0)
>         public 'parent' => string '0' (length=1)
>         public 'count' => string '1' (length=1)
>
> On Thu, 23 Aug 2007 21:06:10 +1000, Viper007Bond <viper@viper007bond.com>
> wrote:
>
> > Perhaps coding at 4am isn't the best idea, I know, but I can't figure
> out
> > for the life of me why this won't work.
> >
> > I've made of copy of in_category() and modified it slightly to accept
> the
> > post ID rather than getting it from the global $post (due to use in a
> > plugin
> > -- I need to find out if a certain post is in a certain category).
> >
> > My code: http://wordpress.pastebin.com/f5c7e4b6a
> >
> > The original's $categories array's keys are the values of the category
> > ID.
> >
> > ex:
> >
> > Array
> > (
> >     [6] => stdClass Object
> >         (
> >             [term_id] => 6
> >
> >
> > However, the one in my function does it sequentially:
> >
> > Array
> > (
> >     [0] => stdClass Object
> >         (
> >             [term_id] => 6
> >
> >
> > Then 1, then 2, etc.
> >
> > Due to this, the array_key_exists() test is failing.
> >
> > Any ideas why? I don't see what is making the difference.
> >
>
> --
> Using Opera's revolutionary e-mail client: http://www.opera.com/mail/
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>



-- 
Viper007Bond | http://www.viper007bond.com/
From jacobsantos at branson.com  Thu Aug 23 13:55:40 2007
From: jacobsantos at branson.com (jacobsantos@branson.com)
Date: Thu Aug 23 14:00:19 2007
Subject: [wp-hackers] Why in the heck won't this work?
In-Reply-To: <8f93a7390708230515m5ddecb10laa7dda026e44537d@mail.gmail.com>
References: <8f93a7390708230406o20bf390t5b1733f8c6f914dc@mail.gmail.com>	<op.txifeaofk6w4mc@dd32.no-ip.com>
	<8f93a7390708230515m5ddecb10laa7dda026e44537d@mail.gmail.com>
Message-ID: <46CD91DC.3000203@branson.com>

Makes sense.

You are looking for a key value that doesn't exist, because the array 
key is created not by category id (wouldn't be unique), but numerically. 
You will have to either do an array_filter function which will iterate 
through each element and check the objects for the id or do a manual 
looping. No other way around it, unless you either want to use SQL, or 
ask for arrays instead of objects. The latter is possible, but the 
specifics eludes me at this moment and I lack time to find the answer 
for you.

It is highly likely that the function you are looking for has a third 
parameter for returning array.

Jacob Santos

Viper007Bond wrote:
> Yes, as is term_id, but having to loop through each object in the array is a
> pain, especially when the $categories array should have the term_id /
> term_taxonomy_id as the key as it is in in_category().
>
> On 8/23/07, DD32 <wordpress@dd32.id.au> wrote:
>   
>> Perhaps this will help?
>>
>> term_taxonomy_id is the Category ID
>>
>>
>> <?php
>> $post_ID = 28;
>>
>> $categories = wp_get_object_terms($post_ID, 'category');
>>
>> var_dump($categories);
>> ?>
>>
>> array
>>     0 =>
>>       object(stdClass)[165]
>>         public 'term_id' => string '9' (length=1)
>>         public 'name' => string 'Test Cat' (length=14)
>>         public 'slug' => string 'test-cat' (length=14)
>>         public 'term_group' => string '0' (length=1)
>>         public 'term_taxonomy_id' => string '9' (length=1)
>>         public 'taxonomy' => string 'category' (length=8)
>>         public 'description' => string '' (length=0)
>>         public 'parent' => string '0' (length=1)
>>         public 'count' => string '1' (length=1)
>>     1 =>
>>       object(stdClass)[166]
>>         public 'term_id' => string '14' (length=2)
>>         public 'name' => string 'Wordpress Plugins' (length=17)
>>         public 'slug' => string 'wordpress-plugins' (length=17)
>>         public 'term_group' => string '0' (length=1)
>>         public 'term_taxonomy_id' => string '14' (length=2)
>>         public 'taxonomy' => string 'category' (length=8)
>>         public 'description' => string '' (length=0)
>>         public 'parent' => string '0' (length=1)
>>         public 'count' => string '1' (length=1)
>>
>> On Thu, 23 Aug 2007 21:06:10 +1000, Viper007Bond <viper@viper007bond.com>
>> wrote:
>>
>>     
>>> Perhaps coding at 4am isn't the best idea, I know, but I can't figure
>>>       
>> out
>>     
>>> for the life of me why this won't work.
>>>
>>> I've made of copy of in_category() and modified it slightly to accept
>>>       
>> the
>>     
>>> post ID rather than getting it from the global $post (due to use in a
>>> plugin
>>> -- I need to find out if a certain post is in a certain category).
>>>
>>> My code: http://wordpress.pastebin.com/f5c7e4b6a
>>>
>>> The original's $categories array's keys are the values of the category
>>> ID.
>>>
>>> ex:
>>>
>>> Array
>>> (
>>>     [6] => stdClass Object
>>>         (
>>>             [term_id] => 6
>>>
>>>
>>> However, the one in my function does it sequentially:
>>>
>>> Array
>>> (
>>>     [0] => stdClass Object
>>>         (
>>>             [term_id] => 6
>>>
>>>
>>> Then 1, then 2, etc.
>>>
>>> Due to this, the array_key_exists() test is failing.
>>>
>>> Any ideas why? I don't see what is making the difference.
>>>
>>>       
>> --
>> Using Opera's revolutionary e-mail client: http://www.opera.com/mail/
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers@lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
>>     
>
>
>
>   

From lists.automattic.com at callum-macdonald.com  Thu Aug 23 14:27:40 2007
From: lists.automattic.com at callum-macdonald.com (Callum Macdonald)
Date: Thu Aug 23 14:27:52 2007
Subject: [wp-hackers] usermeta is missing from wpdb
Message-ID: <46CD995C.7000904@callum-macdonald.com>

G'day,

I just checked, and there's no variable for the table name for usermeta 
in wpdb.

Is that for a reason?

I had a quick look at wp-includes/wp-db.php but I couldn't see where the 
values are set. I'm happy to make the changes and submit a patch. Anyone 
know where the values are initialised? I could dig about and find it but 
I figured I'd ask first.

Cheers,


Callum.

From jacobsantos at branson.com  Thu Aug 23 14:52:03 2007
From: jacobsantos at branson.com (jacobsantos@branson.com)
Date: Thu Aug 23 14:56:42 2007
Subject: [wp-hackers] usermeta is missing from wpdb
In-Reply-To: <46CD995C.7000904@callum-macdonald.com>
References: <46CD995C.7000904@callum-macdonald.com>
Message-ID: <46CD9F13.5030706@branson.com>

Variables set in /wp-settings.php.

Callum Macdonald wrote:
> G'day,
>
> I just checked, and there's no variable for the table name for 
> usermeta in wpdb.
>
> Is that for a reason?
>
> I had a quick look at wp-includes/wp-db.php but I couldn't see where 
> the values are set. I'm happy to make the changes and submit a patch. 
> Anyone know where the values are initialised? I could dig about and 
> find it but I figured I'd ask first.
>
> Cheers,
>
>
> Callum.
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
>
>

From otto at ottodestruct.com  Thu Aug 23 15:23:12 2007
From: otto at ottodestruct.com (Otto)
Date: Thu Aug 23 15:23:17 2007
Subject: [wp-hackers] protecting wp-content/plugins ?
In-Reply-To: <7d6d8bd0708221730r17f0942dx7cdef047540c9c03@mail.gmail.com>
References: <ae81acd10708160700s596e5d93w6086b76c45f73710@mail.gmail.com>
	<d5d5430f0708172310v1d1d6c0ev68ffb8299c93923@mail.gmail.com>
	<46C6AA7B.3000603@yadan.net> <46C6E20E.5070702@freecharity.org.uk>
	<7d6d8bd0708180809y779fe291w3b555c3eb0bf59ba@mail.gmail.com>
	<E9EB9DB4-CE73-4421-8B60-178313006ADE@viveka.net.au>
	<161617690708211123t5101cc6er2b7a0e95489754ab@mail.gmail.com>
	<E2440484-D3DC-44EA-BE35-B28910E0EAE5@viveka.net.au>
	<161617690708221239l74d6fc1eqf5017eb8db66675a@mail.gmail.com>
	<7d6d8bd0708221730r17f0942dx7cdef047540c9c03@mail.gmail.com>
Message-ID: <161617690708230823x7e566e7cucc74bf355f2855ff@mail.gmail.com>

On 8/22/07, Tom Barta <tbarta@gmail.com> wrote:
> Sure, perfectly-written plugins don't have any issues

I'm sorry, but you also missed my point here.

A plugin either a) has an exploit or b) does not. For the "no exploit"
case, this sort of code is wholly unnecessary. For the exploit case,
this sort of code doesn't actually fix the exploitable code.

What Sam was suggesting was a way to prevent "hackers" from "scanning"
for known exploits.

What you are all missing is that "hackers" don't scan for exploits.
There's *no point* in scanning for exploits. It's a web page. Scanning
for an exploit and actually performing the exploit are *the same
thing* from the standpoint of the hacker. It's just a single HTTP
request.

> but most computer security is based around layers of protection.

I agree with this, however this is an invalid layer of protection. It
doesn't solve the exploit. You're still vulnerable with this sort of
code, if the plugin is vulnerable in the first place.

A layer of protection should actually *protect* something. Hiding
something is not protecting it.
From lists.automattic.com at callum-macdonald.com  Thu Aug 23 17:53:24 2007
From: lists.automattic.com at callum-macdonald.com (Callum Macdonald)
Date: Thu Aug 23 17:53:48 2007
Subject: [wp-hackers] usermeta is missing from wpdb
In-Reply-To: <46CD9F13.5030706@branson.com>
References: <46CD995C.7000904@callum-macdonald.com>
	<46CD9F13.5030706@branson.com>
Message-ID: <46CDC994.4080608@callum-macdonald.com>

Aha, so usermeta is set there, but it's not defined in the wp-db.php 
file. In which case, it's a very, very simple patch. I've pasted a copy 
here. Do I need to submit it somehow, or can somebody on the list deal 
with it? I don't have an SVN account, etc, etc.

Cheers - Callum.

diff -u wp-db.php.orig wp-db.php
--- wp-db.php.orig      2007-08-23 18:51:42.000000000 +0100
+++ wp-db.php   2007-08-23 18:51:47.000000000 +0100
@@ -34,6 +34,7 @@
        var $optiongroups;
        var $optiongroup_options;
        var $postmeta;
+       var $usermeta;
 
        var $charset;
        var $collate;

jacobsantos@branson.com wrote:
> Variables set in /wp-settings.php.
>
> Callum Macdonald wrote:
>> G'day,
>>
>> I just checked, and there's no variable for the table name for 
>> usermeta in wpdb.
>>
>> Is that for a reason?
>>
>> I had a quick look at wp-includes/wp-db.php but I couldn't see where 
>> the values are set. I'm happy to make the changes and submit a patch. 
>> Anyone know where the values are initialised? I could dig about and 
>> find it but I figured I'd ask first.
>>
>> Cheers,
>>
>>
>> Callum.
>>
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers@lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
>>
>>
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
>

From peter.westwood at ftwr.co.uk  Thu Aug 23 18:00:16 2007
From: peter.westwood at ftwr.co.uk (Peter Westwood)
Date: Thu Aug 23 18:02:33 2007
Subject: [wp-hackers] usermeta is missing from wpdb
In-Reply-To: <46CDC994.4080608@callum-macdonald.com>
References: <46CD995C.7000904@callum-macdonald.com>
	<46CD9F13.5030706@branson.com>
	<46CDC994.4080608@callum-macdonald.com>
Message-ID: <45E3F94D-A5CC-4B5B-AC9C-8403C8271C9D@ftwr.co.uk>

Hi Callum,

On 23 Aug 2007, at 18:53, Callum Macdonald wrote:

> Aha, so usermeta is set there, but it's not defined in the wp- 
> db.php file. In which case, it's a very, very simple patch. I've  
> pasted a copy here. Do I need to submit it somehow, or can somebody  
> on the list deal with it? I don't have an SVN account, etc, etc.
>
> Cheers - Callum.
>
> diff -u wp-db.php.orig wp-db.php
> --- wp-db.php.orig      2007-08-23 18:51:42.000000000 +0100
> +++ wp-db.php   2007-08-23 18:51:47.000000000 +0100
> @@ -34,6 +34,7 @@
>        var $optiongroups;
>        var $optiongroup_options;
>        var $postmeta;
> +       var $usermeta;
>        var $charset;
>        var $collate;
>

Please raise a ticket on trac [1] and attach a patch and then someone  
will check it in.

[1] http://trac.wordpress.org

Cheers
westi
-- 
Peter Westwood <peter.westwood@ftwr.co.uk>
Blog: http://blog.ftwr.co.uk/
WordPress Plugins: http://blog.ftwr.co.uk/wordpress/



From otto at ottodestruct.com  Thu Aug 23 20:38:40 2007
From: otto at ottodestruct.com (Otto)
Date: Thu Aug 23 20:38:45 2007
Subject: [wp-hackers] usermeta is missing from wpdb
In-Reply-To: <45E3F94D-A5CC-4B5B-AC9C-8403C8271C9D@ftwr.co.uk>
References: <46CD995C.7000904@callum-macdonald.com>
	<46CD9F13.5030706@branson.com> <46CDC994.4080608@callum-macdonald.com>
	<45E3F94D-A5CC-4B5B-AC9C-8403C8271C9D@ftwr.co.uk>
Message-ID: <161617690708231338qefa89a0o244f5c50c2ba39ed@mail.gmail.com>

Question: Is the var line even necessary? What does adding this
actually gain you?

I thought that the only reason for the var $whataver in a PHP class
was to ensure that the variable name would come back as part of a
request to get_class_vars() or get_object_vars(). Without it, if it's
not set, it won't get returned in those.


On 8/23/07, Peter Westwood <peter.westwood@ftwr.co.uk> wrote:
> Hi Callum,
>
> On 23 Aug 2007, at 18:53, Callum Macdonald wrote:
>
> > Aha, so usermeta is set there, but it's not defined in the wp-
> > db.php file. In which case, it's a very, very simple patch. I've
> > pasted a copy here. Do I need to submit it somehow, or can somebody
> > on the list deal with it? I don't have an SVN account, etc, etc.
> >
> > Cheers - Callum.
> >
> > diff -u wp-db.php.orig wp-db.php
> > --- wp-db.php.orig      2007-08-23 18:51:42.000000000 +0100
> > +++ wp-db.php   2007-08-23 18:51:47.000000000 +0100
> > @@ -34,6 +34,7 @@
> >        var $optiongroups;
> >        var $optiongroup_options;
> >        var $postmeta;
> > +       var $usermeta;
> >        var $charset;
> >        var $collate;
> >
>
> Please raise a ticket on trac [1] and attach a patch and then someone
> will check it in.
>
> [1] http://trac.wordpress.org
>
> Cheers
> westi
> --
> Peter Westwood <peter.westwood@ftwr.co.uk>
> Blog: http://blog.ftwr.co.uk/
> WordPress Plugins: http://blog.ftwr.co.uk/wordpress/
>
>
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
From jacobsantos at branson.com  Thu Aug 23 21:02:33 2007
From: jacobsantos at branson.com (jacobsantos@branson.com)
Date: Thu Aug 23 21:07:11 2007
Subject: [wp-hackers] usermeta is missing from wpdb
In-Reply-To: <161617690708231338qefa89a0o244f5c50c2ba39ed@mail.gmail.com>
References: <46CD995C.7000904@callum-macdonald.com>	<46CD9F13.5030706@branson.com>
	<46CDC994.4080608@callum-macdonald.com>	<45E3F94D-A5CC-4B5B-AC9C-8403C8271C9D@ftwr.co.uk>
	<161617690708231338qefa89a0o244f5c50c2ba39ed@mail.gmail.com>
Message-ID: <46CDF5E9.3090705@branson.com>

It would return with get_object_vars(), just not get_class_vars(). Who 
would use get_class_vars() in a plugin anyway?

Well, a OOP zealot would probably have a fuss about it.

Jacob Santos

Otto wrote:
> Question: Is the var line even necessary? What does adding this
> actually gain you?
>
> I thought that the only reason for the var $whataver in a PHP class
> was to ensure that the variable name would come back as part of a
> request to get_class_vars() or get_object_vars(). Without it, if it's
> not set, it won't get returned in those.
>
>
> On 8/23/07, Peter Westwood <peter.westwood@ftwr.co.uk> wrote:
>   
>> Hi Callum,
>>
>> On 23 Aug 2007, at 18:53, Callum Macdonald wrote:
>>
>>     
>>> Aha, so usermeta is set there, but it's not defined in the wp-
>>> db.php file. In which case, it's a very, very simple patch. I've
>>> pasted a copy here. Do I need to submit it somehow, or can somebody
>>> on the list deal with it? I don't have an SVN account, etc, etc.
>>>
>>> Cheers - Callum.
>>>
>>> diff -u wp-db.php.orig wp-db.php
>>> --- wp-db.php.orig      2007-08-23 18:51:42.000000000 +0100
>>> +++ wp-db.php   2007-08-23 18:51:47.000000000 +0100
>>> @@ -34,6 +34,7 @@
>>>        var $optiongroups;
>>>        var $optiongroup_options;
>>>        var $postmeta;
>>> +       var $usermeta;
>>>        var $charset;
>>>        var $collate;
>>>
>>>       
>> Please raise a ticket on trac [1] and attach a patch and then someone
>> will check it in.
>>
>> [1] http://trac.wordpress.org
>>
>> Cheers
>> westi
>> --
>> Peter Westwood <peter.westwood@ftwr.co.uk>
>> Blog: http://blog.ftwr.co.uk/
>> WordPress Plugins: http://blog.ftwr.co.uk/wordpress/
>>
>>
>>
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers@lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
>>     
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
>
>
>   

From tbarta at gmail.com  Thu Aug 23 23:12:59 2007
From: tbarta at gmail.com (Tom Barta)
Date: Thu Aug 23 23:13:04 2007
Subject: [wp-hackers] protecting wp-content/plugins ?
In-Reply-To: <161617690708230823x7e566e7cucc74bf355f2855ff@mail.gmail.com>
References: <ae81acd10708160700s596e5d93w6086b76c45f73710@mail.gmail.com>
	<46C6AA7B.3000603@yadan.net> <46C6E20E.5070702@freecharity.org.uk>
	<7d6d8bd0708180809y779fe291w3b555c3eb0bf59ba@mail.gmail.com>
	<E9EB9DB4-CE73-4421-8B60-178313006ADE@viveka.net.au>
	<161617690708211123t5101cc6er2b7a0e95489754ab@mail.gmail.com>
	<E2440484-D3DC-44EA-BE35-B28910E0EAE5@viveka.net.au>
	<161617690708221239l74d6fc1eqf5017eb8db66675a@mail.gmail.com>
	<7d6d8bd0708221730r17f0942dx7cdef047540c9c03@mail.gmail.com>
	<161617690708230823x7e566e7cucc74bf355f2855ff@mail.gmail.com>
Message-ID: <7d6d8bd0708231612p62815edau47f403ab26750ca2@mail.gmail.com>

On 8/23/07, Otto <otto@ottodestruct.com> wrote:
>
> On 8/22/07, Tom Barta <tbarta@gmail.com> wrote:
> > Sure, perfectly-written plugins don't have any issues
>
> I'm sorry, but you also missed my point here.
>
> A plugin either a) has an exploit or b) does not. For the "no exploit"
> case, this sort of code is wholly unnecessary. For the exploit case,
> this sort of code doesn't actually fix the exploitable code.


It's more like this...

A plugin either a) has a known exploit, b) has no known exploits but at
least one unknown exploit, or c) has no known or unknown exploits.  It's
rather tough to *prove* something is in the (c) camp because of all of the
work involved, but with simple codebases it's simple enough to "nearly
prove" it.  For every script that is in camp (a), it was at some point in
camp (b) as well (when one person discovered it and potentially used it
privately before disclosing it).

What you are all missing is that "hackers" don't scan for exploits.
> There's *no point* in scanning for exploits. It's a web page. Scanning
> for an exploit and actually performing the exploit are *the same
> thing* from the standpoint of the hacker. It's just a single HTTP
> request.


I fully realize that scanning directory listings isn't how exploits get
found; I see it in my own web server logs (e.g. a bajiliion attempts at
xmlrpc.php in various subdirectories).  That doesn't change my point: If the
script is a library script and not a web page, it /should not/ be accessible
from the document root.

> but most computer security is based around layers of protection.
>
> I agree with this, however this is an invalid layer of protection. It
> doesn't solve the exploit. You're still vulnerable with this sort of
> code, if the plugin is vulnerable in the first place.


Sure it does.  If I have a PHP script that is vulnerable when executed
directly, but then I move it out of the document root, it can no longer be
executed directly (via HTTP requests) and therefore is no longer a real
vulnerability (assuming it's secure as a library).  It's the same argument
with linux rootkits.  Most exploits are only vulnerable to local users, so
if you successfully deny the public local access, you reduce the risk that a
local exploit will cause your server to be compromised.

Obviously, you can't take scripts that are meant to be directly executed and
remove them from the document root like this.  But if what someone in the
thread said earlier is true (80-90% of plugins are pure library code), that
means 80-90% of the plugins can be moved outside of the document root,
thereby reducing the likelihood that a newly-discovered exploit is actually
usable.

-- 
Tom
From if.website at gmail.com  Thu Aug 23 23:34:11 2007
From: if.website at gmail.com (Austin Matzko)
Date: Thu Aug 23 23:34:16 2007
Subject: [wp-hackers] usermeta is missing from wpdb
In-Reply-To: <45E3F94D-A5CC-4B5B-AC9C-8403C8271C9D@ftwr.co.uk>
References: <46CD995C.7000904@callum-macdonald.com>
	<46CD9F13.5030706@branson.com> <46CDC994.4080608@callum-macdonald.com>
	<45E3F94D-A5CC-4B5B-AC9C-8403C8271C9D@ftwr.co.uk>
Message-ID: <674b4a3b0708231634r61ef445av13b78c2297d3bc98@mail.gmail.com>

On 8/23/07, Peter Westwood <peter.westwood@ftwr.co.uk> wrote:
> Please raise a ticket on trac [1] and attach a patch and then someone
> will check it in.

Apparently no one else created a ticket, so I went ahead and did it:
http://trac.wordpress.org/ticket/4806
From ryan at boren.nu  Thu Aug 23 23:37:24 2007
From: ryan at boren.nu (Ryan Boren)
Date: Thu Aug 23 23:37:30 2007
Subject: [wp-hackers] 2.3 Release Timeline
Message-ID: <c8f37c930708231637g43e280f3n13aa2818e979e8aa@mail.gmail.com>

Cross-posted to hackers, testers, and polyglots.

2.3 is due on September 24th. Tonight (PDT) we enter feature freeze.
>From tonight on we'll be committing bug fixes only.  The first of
several beta releases will go out on Monday the 27th.  A bug hunt will
follow on Wednesday the 29th.  A second and third beta release will go
out on September 3rd and 10th with bug hunts on the 5th and 12th.  On
the 17th we enter hard freeze.  Only critical bug fixes will go in,
and any string changes will require notification of the polyglots
list.  A final bug hunt goes down on the 19th.  Monday the 24th is
release day.

Here's the calendar in various formats.

ICAL:

http://www.google.com/calendar/ical/fhcihol34up7rl0pqa6ngc9qf8%40group.calendar.google.com/public/basic.ics

XML:

http://www.google.com/calendar/feeds/fhcihol34up7rl0pqa6ngc9qf8%40group.calendar.google.com/public/basic

HTML:

http://www.google.com/calendar/embed?src=fhcihol34up7rl0pqa6ngc9qf8%40group.calendar.google.com

Gcal share:

http://www.google.com/calendar/render?cid=fhcihol34up7rl0pqa6ngc9qf8%40group.calendar.google.com
From viper at viper007bond.com  Fri Aug 24 06:10:47 2007
From: viper at viper007bond.com (Viper007Bond)
Date: Fri Aug 24 06:10:52 2007
Subject: [wp-hackers] Why in the heck won't this work?
In-Reply-To: <46CD91DC.3000203@branson.com>
References: <8f93a7390708230406o20bf390t5b1733f8c6f914dc@mail.gmail.com>
	<op.txifeaofk6w4mc@dd32.no-ip.com>
	<8f93a7390708230515m5ddecb10laa7dda026e44537d@mail.gmail.com>
	<46CD91DC.3000203@branson.com>
Message-ID: <8f93a7390708232310m3b6b2d45h5fb577d0b4d1744a@mail.gmail.com>

I know how to deal with the data that's returned and how to loop through it
and all that good stuff.

But my point is I shouldn't have to. When in_category() is used in a theme,
it's $categories array is different than when I use it on an admin page and
I can't figure out why (same data, different keys).

I even ditched my custom function, set $post and global'ed it, and
in_category() itself is getting the data with the wrong keys.

Something is causing wp_get_object_terms() to return the data differently.
Hmm.

-- 
Viper007Bond | http://www.viper007bond.com/
From viper at viper007bond.com  Fri Aug 24 06:19:27 2007
From: viper at viper007bond.com (Viper007Bond)
Date: Fri Aug 24 06:19:33 2007
Subject: [wp-hackers] 2.3 Release Timeline
In-Reply-To: <c8f37c930708231637g43e280f3n13aa2818e979e8aa@mail.gmail.com>
References: <c8f37c930708231637g43e280f3n13aa2818e979e8aa@mail.gmail.com>
Message-ID: <8f93a7390708232319s4025204y99628c64c44eabdc@mail.gmail.com>

Sounds good. I'll be running the sucker on my main blog and get my hunting
cap on. :D

On 8/23/07, Ryan Boren <ryan@boren.nu> wrote:
>
> Cross-posted to hackers, testers, and polyglots.
>
> 2.3 is due on September 24th. Tonight (PDT) we enter feature freeze.
> >From tonight on we'll be committing bug fixes only.  The first of
> several beta releases will go out on Monday the 27th.  A bug hunt will
> follow on Wednesday the 29th.  A second and third beta release will go
> out on September 3rd and 10th with bug hunts on the 5th and 12th.  On
> the 17th we enter hard freeze.  Only critical bug fixes will go in,
> and any string changes will require notification of the polyglots
> list.  A final bug hunt goes down on the 19th.  Monday the 24th is
> release day.
>
> Here's the calendar in various formats.
>
> ICAL:
>
>
> http://www.google.com/calendar/ical/fhcihol34up7rl0pqa6ngc9qf8%40group.calendar.google.com/public/basic.ics
>
> XML:
>
>
> http://www.google.com/calendar/feeds/fhcihol34up7rl0pqa6ngc9qf8%40group.calendar.google.com/public/basic
>
> HTML:
>
>
> http://www.google.com/calendar/embed?src=fhcihol34up7rl0pqa6ngc9qf8%40group.calendar.google.com
>
> Gcal share:
>
>
> http://www.google.com/calendar/render?cid=fhcihol34up7rl0pqa6ngc9qf8%40group.calendar.google.com
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>



-- 
Viper007Bond | http://www.viper007bond.com/
From spencerp1 at gmail.com  Fri Aug 24 08:00:03 2007
From: spencerp1 at gmail.com (spencerp)
Date: Fri Aug 24 08:03:42 2007
Subject: [wp-hackers] 2.3 Release Timeline
In-Reply-To: <8f93a7390708232319s4025204y99628c64c44eabdc@mail.gmail.com>
References: <c8f37c930708231637g43e280f3n13aa2818e979e8aa@mail.gmail.com>
	<8f93a7390708232319s4025204y99628c64c44eabdc@mail.gmail.com>
Message-ID: <46CE9003.9090001@gmail.com>

Viper007Bond wrote:
> Sounds good. I'll be running the sucker on my main blog and get my hunting
> cap on. :D

Just wondering, I'm not sure if it's MY theme or what. But, when I had 
comment moderation on, and went to post a comment on the site in IE6, I 
didn't get the comment being held in moderation message? Now, I'm logged 
into the blog in Firefox browser at all times, not in IE6.

In IE6 I just post as normal visitor. So I'm wondering if it's the 
coding in the actual theme itself... or if it's the software.. Odd thing 
is though, the code in the theme itself should be fine.. I checked it 
with the normal code of the default theme? Any thoughts? =/ Maybe 
someone else could try this out too?

Also, what's going on with the Tag cloud codes, the various output for 
the amount of tags to display, and any other functionality with it? 
Maybe a list of how and what to do, and use function wise? Other than 
these questions, I've been running trunk "Live" since it started, and I 
didn't have much trouble at all. Except for that little conversion issue 
with VB. But now that's fixed, so.. =)

--
spencerp
http://spencerp.net
http://www.vindictivebastard.net




From wp-hackers at striderweb.com  Fri Aug 24 14:28:01 2007
From: wp-hackers at striderweb.com (Stephen Rider)
Date: Fri Aug 24 14:28:06 2007
Subject: [wp-hackers] protecting wp-content/plugins ?
In-Reply-To: <E9EB9DB4-CE73-4421-8B60-178313006ADE@viveka.net.au>
References: <ae81acd10708160700s596e5d93w6086b76c45f73710@mail.gmail.com>
	<46C45BAA.6060008@freecharity.org.uk>
	<ae81acd10708160727k3bd6c978rdfc5c46027e6d655@mail.gmail.com>
	<b88434820708171227s6eb5e4cbg8918e19ff5f850a6@mail.gmail.com>
	<46C622D8.9010301@yadan.net>
	<b88434820708171537w9acc67fl10d86761f0522d42@mail.gmail.com>
	<46C62409.1040303@yadan.net>
	<d5d5430f0708172310v1d1d6c0ev68ffb8299c93923@mail.gmail.com>
	<46C6AA7B.3000603@yadan.net> <46C6E20E.5070702@freecharity.org.uk>
	<7d6d8bd0708180809y779fe291w3b555c3eb0bf59ba@mail.gmail.com>
	<E9EB9DB4-CE73-4421-8B60-178313006ADE@viveka.net.au>
Message-ID: <3C267B6A-B37B-4306-8AD2-F900D460A092@striderweb.com>

So...  if I'm a hacker, can't I just write a PHP script that defines  
that constant and then includes or calls the exploitable plugin?  (Or  
would I have to somehow get my script onto your server?)

Stephen

On Aug 20, 2007, at 10:37 AM, Sam Bauers wrote:

>> The best way to protect against this is to test for some known  
>> WordPress constant at the start of each plugin file, then if it is  
>> not there you can return a 404 HTTP Response. E.g.:
>
> <?php
> ... plugin header ...
>
> if ( !defined('ABSPATH') ) {
> 	$protocol = $_SERVER["SERVER_PROTOCOL"];
> 	if ( ('HTTP/1.1' != $protocol) && ('HTTP/1.0' != $protocol) )
> 		$protocol = 'HTTP/1.0';
> 	
> 	if ( version_compare( phpversion(), '4.3.0', '>=' ) ) {
> 		return @header( $protocol . ' 404 Not Found', true, 404 );
> 	} else {
> 		return @header( $protocol . ' 404 Not Found' );
> 	}
> 	
> 	exit();
> }
>
> ... rest of plugin ...
> ?>
>
>
> This means direct requests for the file will fail, but when  
> included as a plugin, it will continue as normal.
>
From r at robm.me.uk  Fri Aug 24 14:36:35 2007
From: r at robm.me.uk (Rob Miller)
Date: Fri Aug 24 14:37:02 2007
Subject: [wp-hackers] protecting wp-content/plugins ?
In-Reply-To: <3C267B6A-B37B-4306-8AD2-F900D460A092@striderweb.com>
References: <ae81acd10708160700s596e5d93w6086b76c45f73710@mail.gmail.com>	<46C45BAA.6060008@freecharity.org.uk>	<ae81acd10708160727k3bd6c978rdfc5c46027e6d655@mail.gmail.com>	<b88434820708171227s6eb5e4cbg8918e19ff5f850a6@mail.gmail.com>	<46C622D8.9010301@yadan.net>	<b88434820708171537w9acc67fl10d86761f0522d42@mail.gmail.com>	<46C62409.1040303@yadan.net>	<d5d5430f0708172310v1d1d6c0ev68ffb8299c93923@mail.gmail.com>	<46C6AA7B.3000603@yadan.net>
	<46C6E20E.5070702@freecharity.org.uk>	<7d6d8bd0708180809y779fe291w3b555c3eb0bf59ba@mail.gmail.com>	<E9EB9DB4-CE73-4421-8B60-178313006ADE@viveka.net.au>
	<3C267B6A-B37B-4306-8AD2-F900D460A092@striderweb.com>
Message-ID: <46CEECF3.4060505@robm.me.uk>

Stephen Rider wrote:
> So...  if I'm a hacker, can't I just write a PHP script that defines 
> that constant and then includes or calls the exploitable plugin?  (Or 
> would I have to somehow get my script onto your server?)
>
You would have to get your code onto their server, and when that's 
possible there are rather a few more concerns than holes in plugins.

Rob

-- 
Rob Miller
http://robm.me.uk/

From alan at verselogic.net  Fri Aug 24 17:23:17 2007
From: alan at verselogic.net (Alan J Castonguay)
Date: Fri Aug 24 17:23:25 2007
Subject: [wp-hackers] protecting wp-content/plugins ?
In-Reply-To: <7d6d8bd0708231612p62815edau47f403ab26750ca2@mail.gmail.com>
References: <ae81acd10708160700s596e5d93w6086b76c45f73710@mail.gmail.com>
	<46C6AA7B.3000603@yadan.net> <46C6E20E.5070702@freecharity.org.uk>
	<7d6d8bd0708180809y779fe291w3b555c3eb0bf59ba@mail.gmail.com>
	<E9EB9DB4-CE73-4421-8B60-178313006ADE@viveka.net.au>
	<161617690708211123t5101cc6er2b7a0e95489754ab@mail.gmail.com>
	<E2440484-D3DC-44EA-BE35-B28910E0EAE5@viveka.net.au>
	<161617690708221239l74d6fc1eqf5017eb8db66675a@mail.gmail.com>
	<7d6d8bd0708221730r17f0942dx7cdef047540c9c03@mail.gmail.com>
	<161617690708230823x7e566e7cucc74bf355f2855ff@mail.gmail.com>
	<7d6d8bd0708231612p62815edau47f403ab26750ca2@mail.gmail.com>
Message-ID: <AA23F748-1BA7-424C-AEE4-B7F0DD02EADF@verselogic.net>


On 23-Aug-07, at 7:12 PM, Tom Barta wrote:

> If I have a PHP script that is vulnerable when executed
> directly, but then I move it out of the document root, it can no  
> longer be
> executed directly (via HTTP requests) and therefore is no longer a  
> real
> vulnerability (assuming it's secure as a library).

Wordpress Plugins, assuming they're active, are included when someone  
requests any page on the blog (eg http://example.com/blog/ 
index.php ). Most anything that's exploitable when called directly  
with some data, like in a get string (eg http://example.com/blog/wp- 
content/plugins/badplugin.php?shellcode=rm%20-rf%20/ ) will still be  
exploitable when called via Wordpress (eg http://example.com/blog/ 
index.php?shellcode=rm%20-rf%20/ ).

The only situation I can think of where your cloaking suggestion  
makes sense, is one where a plugin does something when executed  
directly that it doesn't do when included in Wordpress. Aka, it  
checks to see how it was called, and executes a different code path  
based on that. If it's doing this, it fits into Otto's B scenario  
above: designed to do just that.

In the case of WP, there is no point in scanning for directly- 
requestable exploitable plugins. An attacker don't need to know  
whether an exploit exists before attempting it. Hiding direct file  
access does not make you any more or less secure.

Alan J Castonguay

From chris.lott at gmail.com  Fri Aug 24 17:54:18 2007
From: chris.lott at gmail.com (Chris Lott)
Date: Fri Aug 24 17:54:24 2007
Subject: [wp-hackers] Sharing Users/authentication
Message-ID: <9b1b9dab0708241054g749e24c0md73235d986d24bfa@mail.gmail.com>

Faculty members have discovered CommentPress and would like to use
CommentPress enabled blogs alongside their regular class blogs... is
there a simple way to share the usernames/logins between two WP
installations? All that really needs to be shared is the login name
and password...

c
-- 
Chris Lott
University of Alaska
From jacobsantos at branson.com  Fri Aug 24 18:07:47 2007
From: jacobsantos at branson.com (jacobsantos@branson.com)
Date: Fri Aug 24 18:12:22 2007
Subject: [wp-hackers] Sharing Users/authentication
In-Reply-To: <9b1b9dab0708241054g749e24c0md73235d986d24bfa@mail.gmail.com>
References: <9b1b9dab0708241054g749e24c0md73235d986d24bfa@mail.gmail.com>
Message-ID: <46CF1E73.6000407@branson.com>

Yes. There are defines in the wp-settings.php file that can be defined 
in the wp-config.php file.

wp-config.php
-----------------------

// Underneath database config info
define('CUSTOM_USER_TABLE', 'wp_users');
define('CUSTOM_USER_META_TABLE', 'wp_usermeta');

In this way, you only need to have one wordpress users table and 
usermeta table. You will have to keep track of the prefix of the 
wordpress installation you have all of the users in.

Jacob Santos

Chris Lott wrote:
> Faculty members have discovered CommentPress and would like to use
> CommentPress enabled blogs alongside their regular class blogs... is
> there a simple way to share the usernames/logins between two WP
> installations? All that really needs to be shared is the login name
> and password...
>
> c
>   

From sam at viveka.net.au  Fri Aug 24 18:20:57 2007
From: sam at viveka.net.au (Sam Bauers)
Date: Fri Aug 24 18:21:20 2007
Subject: [wp-hackers] protecting wp-content/plugins ?
In-Reply-To: <AA23F748-1BA7-424C-AEE4-B7F0DD02EADF@verselogic.net>
References: <ae81acd10708160700s596e5d93w6086b76c45f73710@mail.gmail.com>
	<46C6AA7B.3000603@yadan.net> <46C6E20E.5070702@freecharity.org.uk>
	<7d6d8bd0708180809y779fe291w3b555c3eb0bf59ba@mail.gmail.com>
	<E9EB9DB4-CE73-4421-8B60-178313006ADE@viveka.net.au>
	<161617690708211123t5101cc6er2b7a0e95489754ab@mail.gmail.com>
	<E2440484-D3DC-44EA-BE35-B28910E0EAE5@viveka.net.au>
	<161617690708221239l74d6fc1eqf5017eb8db66675a@mail.gmail.com>
	<7d6d8bd0708221730r17f0942dx7cdef047540c9c03@mail.gmail.com>
	<161617690708230823x7e566e7cucc74bf355f2855ff@mail.gmail.com>
	<7d6d8bd0708231612p62815edau47f403ab26750ca2@mail.gmail.com>
	<AA23F748-1BA7-424C-AEE4-B7F0DD02EADF@verselogic.net>
Message-ID: <37AAB69F-9237-45D9-A8ED-E6CFD24880BD@viveka.net.au>

On 25/08/2007, at 3:23 AM, Alan J Castonguay wrote:

> In the case of WP, there is no point in scanning for directly- 
> requestable exploitable plugins. An attacker don't need to know  
> whether an exploit exists before attempting it. Hiding direct file  
> access does not make you any more or less secure.

That all depends on what the exploit does, but rather than debate the  
benefits of this method perhaps we can just leave it on the table for  
anyone that wants to use it. I was just trying to provide a complete  
solution to the original question, i.e. "How do I hide my plugins?".

--------------------------------------------------------------
  Sam Bauers

  sam@viveka.net.au
--------------------------------------------------------------



From lloydomattic at gmail.com  Sat Aug 25 00:15:02 2007
From: lloydomattic at gmail.com (Lloyd Budd)
Date: Sat Aug 25 00:15:08 2007
Subject: [wp-hackers] wpautop should first check if p tags, and if so,
	don't autop
Message-ID: <70ebb7140708241715q6bc3b000vc0f33cec6f6a574b@mail.gmail.com>

wpautop should first check if <p> tag in a $pee, and if so, assume
person knows what he is doing and don't autop

Everyone's favorite wpautop !

wpautop( $pee, $br = 1 ) - Returns the text with HTML formatting for
paragraphs, WordPress
automatically paragraph.

Before putting this in trac, I wanted to raise this here, because I
lack the historical context, though I have tried to research it.

For those newer to WordPress, WordPress generally stores your content
as you typed it (or import it), and then "filters" it when someone
loads the content (output) in their browser. This behavior allows for
the huge range of input plugins, the most famous probably being
http://daringfireball.net/projects/markdown/
http://www.michelf.com/projects/php-markdown/

It is a famous wp-includes/default-filters.php and the code is in
wp-includes/formatting.php

It's safe to say that wpautop drives some people crazy, and that is
why http://urbangiraffe.com/plugins/disable-wpautop/ is a favorite,
and why articles like
http://wpbits.wordpress.com/2007/08/06/a-look-at-wordpress-filters-disable-wpautop-on-post-formatting/
are such an entising read.

On the other hand, most of us love it (most of the time), or don't
even notice its wonderful magic -- it's that good ;-)

Working through some scenarios, specifically importing from other
blogging platforms, or pasting in HTML, the current (default) behavior
is... awkward.

Entered:
<p>I may be
too smart for my own good</p>

Output:
<p>I may be <br />
too smart for my own good</p>

As the Subject reads, I think the best experience given the
implementation is for wpautop to first check to see if there is any
<p> tags in the input and if so don't automatically paragraph, line
break, etc.

If the entered text is a mix of HTML and plain text, too bad for them,
they don't get an wpautop.

Thank you,
-- 
Lloyd Budd | Digital Entomologist | | Skype:foolswisdom
WordPress.com | WordPress.org | Automattic.com
From jeremy.visser at gmail.com  Sat Aug 25 00:39:32 2007
From: jeremy.visser at gmail.com (Jeremy Visser)
Date: Sat Aug 25 00:39:45 2007
Subject: [wp-hackers] wpautop should first check if p tags, and if so,
	don't autop
In-Reply-To: <70ebb7140708241715q6bc3b000vc0f33cec6f6a574b@mail.gmail.com>
References: <70ebb7140708241715q6bc3b000vc0f33cec6f6a574b@mail.gmail.com>
Message-ID: <46CF7A44.5000300@gmail.com>

Lloyd Budd wrote:
> Entered:
> <p>I may be
> too smart for my own good</p>
> 
> Output:
> <p>I may be <br />
> too smart for my own good</p>

So first, everybody complains that they can't manually insert
linebreaks. Now, you're complaining when it actually _does_ insert them. ;)
From jeremy.visser at gmail.com  Sat Aug 25 00:57:23 2007
From: jeremy.visser at gmail.com (Jeremy Visser)
Date: Sat Aug 25 00:57:32 2007
Subject: [wp-hackers] Sharing Users/authentication
In-Reply-To: <46CF1E73.6000407@branson.com>
References: <9b1b9dab0708241054g749e24c0md73235d986d24bfa@mail.gmail.com>
	<46CF1E73.6000407@branson.com>
Message-ID: <46CF7E73.7020303@gmail.com>

jacobsantos@branson.com wrote:
> Yes. There are defines in the wp-settings.php file that can be defined
> in the wp-config.php file.
> 
> wp-config.php
> -----------------------
> 
> // Underneath database config info
> define('CUSTOM_USER_TABLE', 'wp_users');
> define('CUSTOM_USER_META_TABLE', 'wp_usermeta');

Wow, I wish someone had told me about that before. Is it possible to
tell it to use different databases as well?
From wp-hackers at striderweb.com  Sat Aug 25 02:03:08 2007
From: wp-hackers at striderweb.com (Stephen Rider)
Date: Sat Aug 25 02:03:25 2007
Subject: [wp-hackers] Sharing Users/authentication
In-Reply-To: <46CF1E73.6000407@branson.com>
References: <9b1b9dab0708241054g749e24c0md73235d986d24bfa@mail.gmail.com>
	<46CF1E73.6000407@branson.com>
Message-ID: <B9F84AB9-E5E4-4B3A-945E-C15C899285B5@striderweb.com>

That could be extremely useful for me.  However... when I do that I  
can't get into the admin screen on the "secondary" blog.  All I see is:

You do not have sufficient permissions to access this page.

The main blog still works fine.  Any idea why???

Stephen


On Aug 24, 2007, at 1:07 PM, jacobsantos@branson.com wrote:

> Yes. There are defines in the wp-settings.php file that can be  
> defined in the wp-config.php file.
>
> wp-config.php
> -----------------------
>
> // Underneath database config info
> define('CUSTOM_USER_TABLE', 'wp_users');
> define('CUSTOM_USER_META_TABLE', 'wp_usermeta');
>
> In this way, you only need to have one wordpress users table and  
> usermeta table. You will have to keep track of the prefix of the  
> wordpress installation you have all of the users in.
>
> Jacob Santos
>
> Chris Lott wrote:
>> Faculty members have discovered CommentPress and would like to use
>> CommentPress enabled blogs alongside their regular class blogs... is
>> there a simple way to share the usernames/logins between two WP
>> installations? All that really needs to be shared is the login name
>> and password...
>>
>> c
>>
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

From wp-hackers at striderweb.com  Sat Aug 25 02:10:08 2007
From: wp-hackers at striderweb.com (Stephen Rider)
Date: Sat Aug 25 02:10:24 2007
Subject: [wp-hackers] wpautop should first check if p tags, and if so,
	don't autop
In-Reply-To: <70ebb7140708241715q6bc3b000vc0f33cec6f6a574b@mail.gmail.com>
References: <70ebb7140708241715q6bc3b000vc0f33cec6f6a574b@mail.gmail.com>
Message-ID: <4FA36B8A-7EEE-4A8E-8912-790F85E374AA@striderweb.com>

This would be very bad for me.  I quite often have certain paragraphs  
to which I want to apply a class, so I wrap it in <p> tags with the  
class.  The rest of the text I want autoformatted.


On Aug 24, 2007, at 7:15 PM, Lloyd Budd wrote:

> wpautop should first check if <p> tag in a $pee, and if so, assume
> person knows what he is doing and don't autop

From r at robm.me.uk  Sat Aug 25 02:12:49 2007
From: r at robm.me.uk (Rob Miller)
Date: Sat Aug 25 02:13:17 2007
Subject: [wp-hackers] wpautop should first check if p tags, and if so,
	don't autop
In-Reply-To: <4FA36B8A-7EEE-4A8E-8912-790F85E374AA@striderweb.com>
References: <70ebb7140708241715q6bc3b000vc0f33cec6f6a574b@mail.gmail.com>
	<4FA36B8A-7EEE-4A8E-8912-790F85E374AA@striderweb.com>
Message-ID: <46CF9021.6000704@robm.me.uk>

Stephen Rider wrote:
> This would be very bad for me.  I quite often have certain paragraphs 
> to which I want to apply a class, so I wrap it in <p> tags with the 
> class.  The rest of the text I want autoformatted.
>
>
Same here, and I should imagine the same is true of many users.

-- 
Rob Miller
http://robm.me.uk/

From hovercrafter at earthlink.net  Sat Aug 25 02:18:04 2007
From: hovercrafter at earthlink.net (Jamie Holly)
Date: Sat Aug 25 02:18:17 2007
Subject: [wp-hackers] wpautop should first check if p tags, and if so,
	don't autop
In-Reply-To: <46CF9021.6000704@robm.me.uk>
References: <70ebb7140708241715q6bc3b000vc0f33cec6f6a574b@mail.gmail.com>	<4FA36B8A-7EEE-4A8E-8912-790F85E374AA@striderweb.com>
	<46CF9021.6000704@robm.me.uk>
Message-ID: <008001c7e6be$2eae0640$8c0a12c0$@net>

I agree too. I think it would be best served as an option box on each post
that could be clicked to bypass autop and the value stored in postmeta.

Jamie Holly
http://www.intoxination.net
1.513.252.2919 | Skype:intoxination


>-----Original Message-----
>From: wp-hackers-bounces@lists.automattic.com [mailto:wp-hackers-
>bounces@lists.automattic.com] On Behalf Of Rob Miller
>Sent: Friday, August 24, 2007 10:13 PM
>To: wp-hackers@lists.automattic.com
>Subject: Re: [wp-hackers] wpautop should first check if p tags, and if
>so, don't autop
>
>Stephen Rider wrote:
>> This would be very bad for me.  I quite often have certain paragraphs
>> to which I want to apply a class, so I wrap it in <p> tags with the
>> class.  The rest of the text I want autoformatted.
>>
>>
>Same here, and I should imagine the same is true of many users.
>
>--
>Rob Miller
>http://robm.me.uk/
>
>_______________________________________________
>wp-hackers mailing list
>wp-hackers@lists.automattic.com
>http://lists.automattic.com/mailman/listinfo/wp-hackers

From dragonwing at dragonu.net  Sat Aug 25 02:56:08 2007
From: dragonwing at dragonu.net (Jacob Santos)
Date: Sat Aug 25 02:54:52 2007
Subject: [wp-hackers] Sharing Users/authentication
In-Reply-To: <B9F84AB9-E5E4-4B3A-945E-C15C899285B5@striderweb.com>
References: <9b1b9dab0708241054g749e24c0md73235d986d24bfa@mail.gmail.com>	<46CF1E73.6000407@branson.com>
	<B9F84AB9-E5E4-4B3A-945E-C15C899285B5@striderweb.com>
Message-ID: <46CF9A48.8000403@dragonu.net>

No. You would have to rewrite the Database Access Layer for which all 
other API functions use. Given that WordPress uses MySQL extension, it 
would be a total bitch to switch back and forth (trust me, once you get 
into this realm you'll scream for the final cut across the throat). Be 
easier with PDO or MySQLi and creating two objects with each Database 
Information. This would still require hacking the Database Access Layer 
and hacking the user API functions to use that Database Object or at 
least hacking the User API.

There might be a less painful way, but from what I know and experimented 
with, it is better to just walk away while you still have your sanity.

Jeremy Visser wrote:
> Wow, I wish someone had told me about that before. Is it possible to
> tell it to use different databases as well?
No idea. It could be any number of variables or problems. Write a ticket 
to the forums and see if someone who is experienced knows anything.

Did you change the config of the second blog? Or third? Or Fourth?

Is the second blog on the same database as the first blog?

As I have had no need to attempt something like this, I have no idea how 
to troubleshoot it. I might attempt it to see what the requirements are 
beyond setting those two constants, but I really don't think I will have 
time.

Good Luck,

Jacob Santos

Stephen Rider wrote:
> That could be extremely useful for me.  However... when I do that I 
> can't get into the admin screen on the "secondary" blog.  All I see is:
>
> You do not have sufficient permissions to access this page.
>
> The main blog still works fine.  Any idea why???
>
> Stephen
>
>
> On Aug 24, 2007, at 1:07 PM, jacobsantos@branson.com wrote:
>
>> Yes. There are defines in the wp-settings.php file that can be 
>> defined in the wp-config.php file.
>>
>> wp-config.php
>> -----------------------
>>
>> // Underneath database config info
>> define('CUSTOM_USER_TABLE', 'wp_users');
>> define('CUSTOM_USER_META_TABLE', 'wp_usermeta');
>>
>> In this way, you only need to have one wordpress users table and 
>> usermeta table. You will have to keep track of the prefix of the 
>> wordpress installation you have all of the users in.
>>
>> Jacob Santos
>>
>> Chris Lott wrote:
>>> Faculty members have discovered CommentPress and would like to use
>>> CommentPress enabled blogs alongside their regular class blogs... is
>>> there a simple way to share the usernames/logins between two WP
>>> installations? All that really needs to be shared is the login name
>>> and password...
>>>
>>> c
>>>
>>
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers@lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
From wp-hackers at striderweb.com  Sat Aug 25 03:22:14 2007
From: wp-hackers at striderweb.com (Stephen Rider)
Date: Sat Aug 25 03:22:30 2007
Subject: [wp-hackers] Sharing Users/authentication
In-Reply-To: <46CF9A48.8000403@dragonu.net>
References: <9b1b9dab0708241054g749e24c0md73235d986d24bfa@mail.gmail.com>	<46CF1E73.6000407@branson.com>
	<B9F84AB9-E5E4-4B3A-945E-C15C899285B5@striderweb.com>
	<46CF9A48.8000403@dragonu.net>
Message-ID: <AB809068-D235-4F76-B15C-FD01DE5D7B7A@striderweb.com>

Two blogs on the same database.  In fact, I'm trying this on a test  
setup that has the same Users and passwords in each.

The main blog (that is, the blog that uses the table prefix in  
question) is unchanged -- I didn't change the wp-config since it  
already looks at the right tables.  The second blog (that uses a  
different prefix) has the new defines in its wp-config file pointing  
to the tables of the first blog.

I'll do some digging into exactly what happens during the  
authentication, but I can't imagine why this would not work....

Thanks for the info so far.. :)

Stephen

On Aug 24, 2007, at 9:56 PM, Jacob Santos wrote:

> No idea. It could be any number of variables or problems. Write a  
> ticket to the forums and see if someone who is experienced knows  
> anything.
>
> Did you change the config of the second blog? Or third? Or Fourth?
>
> Is the second blog on the same database as the first blog?
>
> As I have had no need to attempt something like this, I have no  
> idea how to troubleshoot it. I might attempt it to see what the  
> requirements are beyond setting those two constants, but I really  
> don't think I will have time.
>
> Good Luck,
>
> Jacob Santos
>
> Stephen Rider wrote:
>> That could be extremely useful for me.  However... when I do that  
>> I can't get into the admin screen on the "secondary" blog.  All I  
>> see is:
>>
>> You do not have sufficient permissions to access this page.
>>
>> The main blog still works fine.  Any idea why???
>>
>> Stephen
>>
>>
>> On Aug 24, 2007, at 1:07 PM, jacobsantos@branson.com wrote:
>>
>>> Yes. There are defines in the wp-settings.php file that can be  
>>> defined in the wp-config.php file.
>>>
>>> wp-config.php
>>> -----------------------
>>>
>>> // Underneath database config info
>>> define('CUSTOM_USER_TABLE', 'wp_users');
>>> define('CUSTOM_USER_META_TABLE', 'wp_usermeta');
>>>
>>> In this way, you only need to have one wordpress users table and  
>>> usermeta table. You will have to keep track of the prefix of the  
>>> wordpress installation you have all of the users in.
>>>
>>> Jacob Santos
>>>
>>> Chris Lott wrote:
>>>> Faculty members have discovered CommentPress and would like to use
>>>> CommentPress enabled blogs alongside their regular class  
>>>> blogs... is
>>>> there a simple way to share the usernames/logins between two WP
>>>> installations? All that really needs to be shared is the login name
>>>> and password...
>>>>
>>>> c
>>>>
>>>
>>> _______________________________________________
>>> wp-hackers mailing list
>>> wp-hackers@lists.automattic.com
>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers@lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

From clwoodard at gmail.com  Sat Aug 25 03:42:54 2007
From: clwoodard at gmail.com (Curt Woodard)
Date: Sat Aug 25 03:43:00 2007
Subject: [wp-hackers] Sharing Users/authentication
Message-ID: <a3b809ae0708242042x35691b1av256f41de4abcbfdf@mail.gmail.com>

> Yes. There are defines in the wp-settings.php file that can be defined
> in the wp-config.php file.
>
> wp-config.php
> -----------------------
>
> // Underneath database config info
> define('CUSTOM_USER_TABLE', 'wp_users');
> define('CUSTOM_USER_META_TABLE', 'wp_usermeta');
>
> In this way, you only need to have one wordpress users table and
> usermeta table. You will have to keep track of the prefix of the
> wordpress installation you have all of the users in.
>
> Jacob Santos
>
> Chris Lott wrote:
> > Faculty members have discovered CommentPress and would like to use
> > CommentPress enabled blogs alongside their regular class blogs... is
> > there a simple way to share the usernames/logins between two WP
> > installations? All that really needs to be shared is the login name
> > and password...
> >
> > c

Quick question:
Can these defines point to a MySQL view instead of actual tables? If
that's the case then my work will be MUCH easier than I think...

-Curt
From dragonwing at dragonu.net  Sat Aug 25 03:55:21 2007
From: dragonwing at dragonu.net (Jacob Santos)
Date: Sat Aug 25 03:54:11 2007
Subject: [wp-hackers] Sharing Users/authentication
In-Reply-To: <a3b809ae0708242042x35691b1av256f41de4abcbfdf@mail.gmail.com>
References: <a3b809ae0708242042x35691b1av256f41de4abcbfdf@mail.gmail.com>
Message-ID: <46CFA829.8090807@dragonu.net>

No, the defines replace the default WordPress table names, if they are 
defined. Does not include the prefix with the constant, so the name has 
to be the full custom table name.

If you want to define the user, you can do so by another method. I want 
to say by creating the WordPress cookie or by writing your own User API 
function in a plugin.

Can you explain more by what you mean of 'MySQL view'?

Jacob Santos

Curt Woodard wrote:
>> Yes. There are defines in the wp-settings.php file that can be defined
>> in the wp-config.php file.
>>
>> wp-config.php
>> -----------------------
>>
>> // Underneath database config info
>> define('CUSTOM_USER_TABLE', 'wp_users');
>> define('CUSTOM_USER_META_TABLE', 'wp_usermeta');
>>
>> In this way, you only need to have one wordpress users table and
>> usermeta table. You will have to keep track of the prefix of the
>> wordpress installation you have all of the users in.
>>
>> Jacob Santos
>>
>> Chris Lott wrote:
>>     
>>> Faculty members have discovered CommentPress and would like to use
>>> CommentPress enabled blogs alongside their regular class blogs... is
>>> there a simple way to share the usernames/logins between two WP
>>> installations? All that really needs to be shared is the login name
>>> and password...
>>>
>>> c
>>>       
>
> Quick question:
> Can these defines point to a MySQL view instead of actual tables? If
> that's the case then my work will be MUCH easier than I think...
>
> -Curt
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>   
From wordpress at dd32.id.au  Sat Aug 25 04:06:00 2007
From: wordpress at dd32.id.au (DD32)
Date: Sat Aug 25 04:05:55 2007
Subject: [wp-hackers] Sharing Users/authentication
In-Reply-To: <a3b809ae0708242042x35691b1av256f41de4abcbfdf@mail.gmail.com>
References: <a3b809ae0708242042x35691b1av256f41de4abcbfdf@mail.gmail.com>
Message-ID: <op.txlkcasvk6w4mc@dd32.no-ip.com>

On Sat, 25 Aug 2007 13:42:54 +1000, Curt Woodard <clwoodard@gmail.com>
wrote:

>> Yes. There are defines in the wp-settings.php file that can be defined
>> in the wp-config.php file.
>>
>> wp-config.php
>> -----------------------
>>
>> // Underneath database config info
>> define('CUSTOM_USER_TABLE', 'wp_users');
>> define('CUSTOM_USER_META_TABLE', 'wp_usermeta');
>>
>> In this way, you only need to have one wordpress users table and
>> usermeta table. You will have to keep track of the prefix of the
>> wordpress installation you have all of the users in.
>>
>> Jacob Santos
>>
>> Chris Lott wrote:
>> > Faculty members have discovered CommentPress and would like to use
>> > CommentPress enabled blogs alongside their regular class blogs... is
>> > there a simple way to share the usernames/logins between two WP
>> > installations? All that really needs to be shared is the login name
>> > and password...
>> >
>> > c
>
> Quick question:
> Can these defines point to a MySQL view instead of actual tables? If
> that's the case then my work will be MUCH easier than I think...


I dont see why they couldnt, As long as the view is present at the time of
querying, AND it has the same column names, then as far as a MySQL client
is concierned its just another database table?

-- 
Using Opera's revolutionary e-mail client: http://www.opera.com/mail/
From sam at viveka.net.au  Sat Aug 25 04:23:39 2007
From: sam at viveka.net.au (Sam Bauers)
Date: Sat Aug 25 04:23:43 2007
Subject: [wp-hackers] wpautop should first check if p tags, and if so,
	don't autop
In-Reply-To: <46CF9021.6000704@robm.me.uk>
References: <70ebb7140708241715q6bc3b000vc0f33cec6f6a574b@mail.gmail.com>
	<4FA36B8A-7EEE-4A8E-8912-790F85E374AA@striderweb.com>
	<46CF9021.6000704@robm.me.uk>
Message-ID: <AD2B9F4E-B364-40A3-9E71-C22345A86892@viveka.net.au>

I've just finished writing a routine with similar functionality to  
wpautop(). It deals with this specific problem quite elegantly. e.g.

<p class="something">
One

Two

Three
</p>

Becomes:

<p class="something">
One
</p>

<p class="something">
Two
</p>

<p class="something">
Three
</p>

I was considering wrapping it up into a little proof of concept  
plugin for WordPress so it could be assessed as a potential  
replacement. But the final formatting is slightly different (dare I  
say cleaner), so the functions that reverse the process would also  
have to be adapted. Plus, from memory WordPress has a Javascript  
version of wpautop() as well, and I'm not sure how I would replicate  
that functionality.

Sam

On 25/08/2007, at 12:12 PM, Rob Miller wrote:

> Stephen Rider wrote:
>> This would be very bad for me.  I quite often have certain  
>> paragraphs to which I want to apply a class, so I wrap it in <p>  
>> tags with the class.  The rest of the text I want autoformatted.
>>
>>
> Same here, and I should imagine the same is true of many users.

--------------------------------------------------------------
  Sam Bauers

  sam@viveka.net.au
--------------------------------------------------------------



From clwoodard at gmail.com  Sat Aug 25 04:56:12 2007
From: clwoodard at gmail.com (Curt Woodard)
Date: Sat Aug 25 04:56:18 2007
Subject: [wp-hackers] Sharing Users/authentication
Message-ID: <a3b809ae0708242156x1e9dbbc6j2850bd741fe40945@mail.gmail.com>

A view simply allows you to turn a sql statement into a table, of
sorts... You can find out more about views here:
http://philip.greenspun.com/sql/views.html

Though I don't think they can be updated... *ponder* I'll have to look
into that.

Basically, if you set up a view through the plugin that maps SMF data
in the smf_members table so that it looks like the wp_users table,
through a view, that is updatable then I don't have to worry about all
the hullabaloo associated with a lot of program code.

I'll have to research this. But basically an SQL view acts like a
table. You can use it in place of a table name in an SQL query. A view
is basically a select statement that's presented as a table (or a
relation if you want to get into db-speak).

I'll research this and run some tests. If it works then things will
become pretty spiffy for the smf<=>wp world. Especially if these can
be redefined in a plugin.

-Curt

On 8/24/07, wp-hackers-request@lists.automattic.com
<wp-hackers-request@lists.automattic.com> wrote:
> Send wp-hackers mailing list submissions to
>         wp-hackers@lists.automattic.com
>
> To subscribe or unsubscribe via the World Wide Web, visit
>         http://lists.automattic.com/mailman/listinfo/wp-hackers
> or, via email, send a message with subject or body 'help' to
>         wp-hackers-request@lists.automattic.com
>
> You can reach the person managing the list at
>         wp-hackers-owner@lists.automattic.com
>
> When replying, please edit your Subject line so it is more specific
> than "Re: Contents of wp-hackers digest..."
>
>
> Today's Topics:
>
>    1. Re: Sharing Users/authentication (Stephen Rider)
>    2. Re: wpautop should first check if p tags, and if so,      don't
>       autop (Stephen Rider)
>    3. Re: wpautop should first check if p tags, and if so,      don't
>       autop (Rob Miller)
>    4. RE: wpautop should first check if p tags, and if so,      don't
>       autop (Jamie Holly)
>    5. Re: Sharing Users/authentication (Jacob Santos)
>    6. Re: Sharing Users/authentication (Stephen Rider)
>    7. Re: Sharing Users/authentication (Curt Woodard)
>    8. Re: Sharing Users/authentication (Jacob Santos)
>
>
> ----------------------------------------------------------------------
>
> Message: 1
> Date: Fri, 24 Aug 2007 21:03:08 -0500
> From: Stephen Rider <wp-hackers@striderweb.com>
> Subject: Re: [wp-hackers] Sharing Users/authentication
> To: wp-hackers@lists.automattic.com
> Message-ID: <B9F84AB9-E5E4-4B3A-945E-C15C899285B5@striderweb.com>
> Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
>
> That could be extremely useful for me.  However... when I do that I
> can't get into the admin screen on the "secondary" blog.  All I see is:
>
> You do not have sufficient permissions to access this page.
>
> The main blog still works fine.  Any idea why???
>
> Stephen
>
>
> On Aug 24, 2007, at 1:07 PM, jacobsantos@branson.com wrote:
>
> > Yes. There are defines in the wp-settings.php file that can be
> > defined in the wp-config.php file.
> >
> > wp-config.php
> > -----------------------
> >
> > // Underneath database config info
> > define('CUSTOM_USER_TABLE', 'wp_users');
> > define('CUSTOM_USER_META_TABLE', 'wp_usermeta');
> >
> > In this way, you only need to have one wordpress users table and
> > usermeta table. You will have to keep track of the prefix of the
> > wordpress installation you have all of the users in.
> >
> > Jacob Santos
> >
> > Chris Lott wrote:
> >> Faculty members have discovered CommentPress and would like to use
> >> CommentPress enabled blogs alongside their regular class blogs... is
> >> there a simple way to share the usernames/logins between two WP
> >> installations? All that really needs to be shared is the login name
> >> and password...
> >>
> >> c
> >>
> >
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers@lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
>
>
>
> ------------------------------
>
> Message: 2
> Date: Fri, 24 Aug 2007 21:10:08 -0500
> From: Stephen Rider <wp-hackers@striderweb.com>
> Subject: Re: [wp-hackers] wpautop should first check if p tags, and if
>         so,     don't autop
> To: wp-hackers@lists.automattic.com
> Message-ID: <4FA36B8A-7EEE-4A8E-8912-790F85E374AA@striderweb.com>
> Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
>
> This would be very bad for me.  I quite often have certain paragraphs
> to which I want to apply a class, so I wrap it in <p> tags with the
> class.  The rest of the text I want autoformatted.
>
>
> On Aug 24, 2007, at 7:15 PM, Lloyd Budd wrote:
>
> > wpautop should first check if <p> tag in a $pee, and if so, assume
> > person knows what he is doing and don't autop
>
>
>
> ------------------------------
>
> Message: 3
> Date: Sat, 25 Aug 2007 03:12:49 +0100
> From: Rob Miller <r@robm.me.uk>
> Subject: Re: [wp-hackers] wpautop should first check if p tags, and if
>         so,     don't autop
> To: wp-hackers@lists.automattic.com
> Message-ID: <46CF9021.6000704@robm.me.uk>
> Content-Type: text/plain; charset=ISO-8859-1; format=flowed
>
> Stephen Rider wrote:
> > This would be very bad for me.  I quite often have certain paragraphs
> > to which I want to apply a class, so I wrap it in <p> tags with the
> > class.  The rest of the text I want autoformatted.
> >
> >
> Same here, and I should imagine the same is true of many users.
>
> --
> Rob Miller
> http://robm.me.uk/
>
>
>
> ------------------------------
>
> Message: 4
> Date: Fri, 24 Aug 2007 22:18:04 -0400
> From: "Jamie Holly" <hovercrafter@earthlink.net>
> Subject: RE: [wp-hackers] wpautop should first check if p tags, and if
>         so,     don't autop
> To: <wp-hackers@lists.automattic.com>
> Message-ID: <008001c7e6be$2eae0640$8c0a12c0$@net>
> Content-Type: text/plain;       charset="us-ascii"
>
> I agree too. I think it would be best served as an option box on each post
> that could be clicked to bypass autop and the value stored in postmeta.
>
> Jamie Holly
> http://www.intoxination.net
> 1.513.252.2919 | Skype:intoxination
>
>
> >-----Original Message-----
> >From: wp-hackers-bounces@lists.automattic.com [mailto:wp-hackers-
> >bounces@lists.automattic.com] On Behalf Of Rob Miller
> >Sent: Friday, August 24, 2007 10:13 PM
> >To: wp-hackers@lists.automattic.com
> >Subject: Re: [wp-hackers] wpautop should first check if p tags, and if
> >so, don't autop
> >
> >Stephen Rider wrote:
> >> This would be very bad for me.  I quite often have certain paragraphs
> >> to which I want to apply a class, so I wrap it in <p> tags with the
> >> class.  The rest of the text I want autoformatted.
> >>
> >>
> >Same here, and I should imagine the same is true of many users.
> >
> >--
> >Rob Miller
> >http://robm.me.uk/
> >
> >_______________________________________________
> >wp-hackers mailing list
> >wp-hackers@lists.automattic.com
> >http://lists.automattic.com/mailman/listinfo/wp-hackers
>
>
>
> ------------------------------
>
> Message: 5
> Date: Fri, 24 Aug 2007 21:56:08 -0500
> From: Jacob Santos <dragonwing@dragonu.net>
> Subject: Re: [wp-hackers] Sharing Users/authentication
> To: wp-hackers@lists.automattic.com
> Message-ID: <46CF9A48.8000403@dragonu.net>
> Content-Type: text/plain; charset=ISO-8859-1; format=flowed
>
> No. You would have to rewrite the Database Access Layer for which all
> other API functions use. Given that WordPress uses MySQL extension, it
> would be a total bitch to switch back and forth (trust me, once you get
> into this realm you'll scream for the final cut across the throat). Be
> easier with PDO or MySQLi and creating two objects with each Database
> Information. This would still require hacking the Database Access Layer
> and hacking the user API functions to use that Database Object or at
> least hacking the User API.
>
> There might be a less painful way, but from what I know and experimented
> with, it is better to just walk away while you still have your sanity.
>
> Jeremy Visser wrote:
> > Wow, I wish someone had told me about that before. Is it possible to
> > tell it to use different databases as well?
> No idea. It could be any number of variables or problems. Write a ticket
> to the forums and see if someone who is experienced knows anything.
>
> Did you change the config of the second blog? Or third? Or Fourth?
>
> Is the second blog on the same database as the first blog?
>
> As I have had no need to attempt something like this, I have no idea how
> to troubleshoot it. I might attempt it to see what the requirements are
> beyond setting those two constants, but I really don't think I will have
> time.
>
> Good Luck,
>
> Jacob Santos
>
> Stephen Rider wrote:
> > That could be extremely useful for me.  However... when I do that I
> > can't get into the admin screen on the "secondary" blog.  All I see is:
> >
> > You do not have sufficient permissions to access this page.
> >
> > The main blog still works fine.  Any idea why???
> >
> > Stephen
> >
> >
> > On Aug 24, 2007, at 1:07 PM, jacobsantos@branson.com wrote:
> >
> >> Yes. There are defines in the wp-settings.php file that can be
> >> defined in the wp-config.php file.
> >>
> >> wp-config.php
> >> -----------------------
> >>
> >> // Underneath database config info
> >> define('CUSTOM_USER_TABLE', 'wp_users');
> >> define('CUSTOM_USER_META_TABLE', 'wp_usermeta');
> >>
> >> In this way, you only need to have one wordpress users table and
> >> usermeta table. You will have to keep track of the prefix of the
> >> wordpress installation you have all of the users in.
> >>
> >> Jacob Santos
> >>
> >> Chris Lott wrote:
> >>> Faculty members have discovered CommentPress and would like to use
> >>> CommentPress enabled blogs alongside their regular class blogs... is
> >>> there a simple way to share the usernames/logins between two WP
> >>> installations? All that really needs to be shared is the login name
> >>> and password...
> >>>
> >>> c
> >>>
> >>
> >> _______________________________________________
> >> wp-hackers mailing list
> >> wp-hackers@lists.automattic.com
> >> http://lists.automattic.com/mailman/listinfo/wp-hackers
> >
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers@lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
>
>
> ------------------------------
>
> Message: 6
> Date: Fri, 24 Aug 2007 22:22:14 -0500
> From: Stephen Rider <wp-hackers@striderweb.com>
> Subject: Re: [wp-hackers] Sharing Users/authentication
> To: wp-hackers@lists.automattic.com
> Message-ID: <AB809068-D235-4F76-B15C-FD01DE5D7B7A@striderweb.com>
> Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
>
> Two blogs on the same database.  In fact, I'm trying this on a test
> setup that has the same Users and passwords in each.
>
> The main blog (that is, the blog that uses the table prefix in
> question) is unchanged -- I didn't change the wp-config since it
> already looks at the right tables.  The second blog (that uses a
> different prefix) has the new defines in its wp-config file pointing
> to the tables of the first blog.
>
> I'll do some digging into exactly what happens during the
> authentication, but I can't imagine why this would not work....
>
> Thanks for the info so far.. :)
>
> Stephen
>
> On Aug 24, 2007, at 9:56 PM, Jacob Santos wrote:
>
> > No idea. It could be any number of variables or problems. Write a
> > ticket to the forums and see if someone who is experienced knows
> > anything.
> >
> > Did you change the config of the second blog? Or third? Or Fourth?
> >
> > Is the second blog on the same database as the first blog?
> >
> > As I have had no need to attempt something like this, I have no
> > idea how to troubleshoot it. I might attempt it to see what the
> > requirements are beyond setting those two constants, but I really
> > don't think I will have time.
> >
> > Good Luck,
> >
> > Jacob Santos
> >
> > Stephen Rider wrote:
> >> That could be extremely useful for me.  However... when I do that
> >> I can't get into the admin screen on the "secondary" blog.  All I
> >> see is:
> >>
> >> You do not have sufficient permissions to access this page.
> >>
> >> The main blog still works fine.  Any idea why???
> >>
> >> Stephen
> >>
> >>
> >> On Aug 24, 2007, at 1:07 PM, jacobsantos@branson.com wrote:
> >>
> >>> Yes. There are defines in the wp-settings.php file that can be
> >>> defined in the wp-config.php file.
> >>>
> >>> wp-config.php
> >>> -----------------------
> >>>
> >>> // Underneath database config info
> >>> define('CUSTOM_USER_TABLE', 'wp_users');
> >>> define('CUSTOM_USER_META_TABLE', 'wp_usermeta');
> >>>
> >>> In this way, you only need to have one wordpress users table and
> >>> usermeta table. You will have to keep track of the prefix of the
> >>> wordpress installation you have all of the users in.
> >>>
> >>> Jacob Santos
> >>>
> >>> Chris Lott wrote:
> >>>> Faculty members have discovered CommentPress and would like to use
> >>>> CommentPress enabled blogs alongside their regular class
> >>>> blogs... is
> >>>> there a simple way to share the usernames/logins between two WP
> >>>> installations? All that really needs to be shared is the login name
> >>>> and password...
> >>>>
> >>>> c
> >>>>
> >>>
> >>> _______________________________________________
> >>> wp-hackers mailing list
> >>> wp-hackers@lists.automattic.com
> >>> http://lists.automattic.com/mailman/listinfo/wp-hackers
> >>
> >> _______________________________________________
> >> wp-hackers mailing list
> >> wp-hackers@lists.automattic.com
> >> http://lists.automattic.com/mailman/listinfo/wp-hackers
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers@lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
>
>
>
> ------------------------------
>
> Message: 7
> Date: Fri, 24 Aug 2007 23:42:54 -0400
> From: "Curt Woodard" <clwoodard@gmail.com>
> Subject: Re: [wp-hackers] Sharing Users/authentication
> To: wp-hackers@lists.automattic.com
> Message-ID:
>         <a3b809ae0708242042x35691b1av256f41de4abcbfdf@mail.gmail.com>
> Content-Type: text/plain; charset=ISO-8859-1
>
> > Yes. There are defines in the wp-settings.php file that can be defined
> > in the wp-config.php file.
> >
> > wp-config.php
> > -----------------------
> >
> > // Underneath database config info
> > define('CUSTOM_USER_TABLE', 'wp_users');
> > define('CUSTOM_USER_META_TABLE', 'wp_usermeta');
> >
> > In this way, you only need to have one wordpress users table and
> > usermeta table. You will have to keep track of the prefix of the
> > wordpress installation you have all of the users in.
> >
> > Jacob Santos
> >
> > Chris Lott wrote:
> > > Faculty members have discovered CommentPress and would like to use
> > > CommentPress enabled blogs alongside their regular class blogs... is
> > > there a simple way to share the usernames/logins between two WP
> > > installations? All that really needs to be shared is the login name
> > > and password...
> > >
> > > c
>
> Quick question:
> Can these defines point to a MySQL view instead of actual tables? If
> that's the case then my work will be MUCH easier than I think...
>
> -Curt
>
>
> ------------------------------
>
> Message: 8
> Date: Fri, 24 Aug 2007 22:55:21 -0500
> From: Jacob Santos <dragonwing@dragonu.net>
> Subject: Re: [wp-hackers] Sharing Users/authentication
> To: wp-hackers@lists.automattic.com
> Message-ID: <46CFA829.8090807@dragonu.net>
> Content-Type: text/plain; charset=ISO-8859-1; format=flowed
>
> No, the defines replace the default WordPress table names, if they are
> defined. Does not include the prefix with the constant, so the name has
> to be the full custom table name.
>
> If you want to define the user, you can do so by another method. I want
> to say by creating the WordPress cookie or by writing your own User API
> function in a plugin.
>
> Can you explain more by what you mean of 'MySQL view'?
>
> Jacob Santos
>
> Curt Woodard wrote:
> >> Yes. There are defines in the wp-settings.php file that can be defined
> >> in the wp-config.php file.
> >>
> >> wp-config.php
> >> -----------------------
> >>
> >> // Underneath database config info
> >> define('CUSTOM_USER_TABLE', 'wp_users');
> >> define('CUSTOM_USER_META_TABLE', 'wp_usermeta');
> >>
> >> In this way, you only need to have one wordpress users table and
> >> usermeta table. You will have to keep track of the prefix of the
> >> wordpress installation you have all of the users in.
> >>
> >> Jacob Santos
> >>
> >> Chris Lott wrote:
> >>
> >>> Faculty members have discovered CommentPress and would like to use
> >>> CommentPress enabled blogs alongside their regular class blogs... is
> >>> there a simple way to share the usernames/logins between two WP
> >>> installations? All that really needs to be shared is the login name
> >>> and password...
> >>>
> >>> c
> >>>
> >
> > Quick question:
> > Can these defines point to a MySQL view instead of actual tables? If
> > that's the case then my work will be MUCH easier than I think...
> >
> > -Curt
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers@lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> >
>
>
> ------------------------------
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
>
> End of wp-hackers Digest, Vol 31, Issue 33
> ******************************************
>
From iacobs at m0n5t3r.info  Sat Aug 25 10:28:36 2007
From: iacobs at m0n5t3r.info (Sabin Iacob)
Date: Sat Aug 25 10:29:01 2007
Subject: [wp-hackers] Sharing Users/authentication
In-Reply-To: <46CFA829.8090807@dragonu.net>
References: <a3b809ae0708242042x35691b1av256f41de4abcbfdf@mail.gmail.com>
	<46CFA829.8090807@dragonu.net>
Message-ID: <46D00454.5080000@m0n5t3r.info>

Jacob Santos wrote:
> No, the defines replace the default WordPress table names, if they are 
> defined. Does not include the prefix with the constant, so the name 
> has to be the full custom table name.
>
> If you want to define the user, you can do so by another method. I 
> want to say by creating the WordPress cookie or by writing your own 
> User API function in a plugin.
>
> Can you explain more by what you mean of 'MySQL view'?


you know, like "create view my_users as select * from 
other_database.wp_users;"

to the OP: you may get around with authentication (which is a read-only 
process), but you won't be able to change user details, because mysql 
devs didn't think something like (sqlite code)

create trigger my_users_update instead of update on my_users
begin
update other_database.wp_users set user_login = new.user_login, [...] 
where id = old.id;
end

would be useful (it's scheduled for 5.2, AFAIR)
From omry at yadan.net  Sat Aug 25 10:55:13 2007
From: omry at yadan.net (Omry Yadan)
Date: Sat Aug 25 10:55:25 2007
Subject: [wp-hackers] protecting wp-content/plugins ?
In-Reply-To: <46C6E20E.5070702@freecharity.org.uk>
References: <ae81acd10708160700s596e5d93w6086b76c45f73710@mail.gmail.com>	<46C45BAA.6060008@freecharity.org.uk>	<ae81acd10708160727k3bd6c978rdfc5c46027e6d655@mail.gmail.com>	<b88434820708171227s6eb5e4cbg8918e19ff5f850a6@mail.gmail.com>	<46C622D8.9010301@yadan.net>	<b88434820708171537w9acc67fl10d86761f0522d42@mail.gmail.com>	<46C62409.1040303@yadan.net>	<d5d5430f0708172310v1d1d6c0ev68ffb8299c93923@mail.gmail.com>	<46C6AA7B.3000603@yadan.net>
	<46C6E20E.5070702@freecharity.org.uk>
Message-ID: <46D00A91.2020602@yadan.net>

I have read the whole thread, and I am not convinced.

the main argument against this is:

attackers don't care, they just run all the existing exploits against
random sites.

you making the assumption that all attackers are script kiddies.

what about an real hacker (cracker, whatever)  that wants to screw a
specific site?

he will first try existing scripts, and when this fails he will start to
really learn the site.

every bit of info helps, and a list of plugins - most of which are open
source, is a huge help.

if I really wanted to hack such a site, I would start learning its
plugins, looking for holes.

yes, it may be possible to learn of the existence of known plugins in
other ways, but a list will give you the unknown ones as well, and much
faster.



James Davis wrote:

> Omry Yadan wrote:
>
>> covering wp-content and wp-themes will make the life of an attacker much
>> harder.
>> there is a huge difference because those are guarantied to be there.
>
> You've made the mistake of believing that the attacker is an
> inquisitive person who cares whether his exploits succeed or not.
>
> The lack of a directory index is not going to stop an attacker trying
> to exploit a vulnerable script that may or may not exist on your
> server. They're going to try it regardless. They won't even care if
> you're attentive enough to notice their failed attempts in your logs.
>
> The problem is a server wide one and should be fixed at that level if
> you really care about it. Placing an index file in the directory only
> masks the problem for a single application.
>
> James
>

From clwoodard at gmail.com  Sat Aug 25 12:21:29 2007
From: clwoodard at gmail.com (Curt Woodard)
Date: Sat Aug 25 12:21:34 2007
Subject: [wp-hackers] Sharing Users/authentication
Message-ID: <a3b809ae0708250521u5d472971j6c2b9b9c5d5163d3@mail.gmail.com>

Well, good news! I have used a VIEW to be able to log into WP using
SMF's user table! :)

Bad News... I forgot which files I messed with... heh

Actually, the main part is that I updated wp-config to define a custom
user table. Then I overrode a lot of the pluggable functions that WP
has available.

I'm going to see about getting user updates and registration working now. WEE!

Here's the SQL if you're interested:

CREATE VIEW wp_smf_users
AS SELECT
	a.ID_MEMBER AS ID,
	a.memberName AS user_login,
	a.passwd AS user_pass,
	a.usertitle AS user_nicename,
	a.emailAddress AS user_email,
	a.websiteUrl AS user_url,
	FROM_UNIXTIME(a.dateRegistered) AS user_registered,
	a.validation_code AS user_activation_key,
	a.is_activated AS user_status,
	a.realName AS display_name
FROM smf.smf_members AS a

I'm considering using the plug-in system to rename the WP users table
to a backup then replace it with the view... But it'd be nifty if the
plug-in could have been used to define the user table.

The user_meta works fine since it's an auxiliary table that holds
extra stuff... I might see about making that a view as well, but we'll
have to see about that.

If I can get this all working so that WP is using the SMF members
table exclusively with a plug-in and changing 1 file, then I'll be
sure to press forward and add in some bridge code that will make
certain that WP uses the SMF cookie as well... if that's at all
possible.

Of course, the more I can convert over from SMF to WP, the better.

I did try to do an update using the view, but it didn't work as I
figured. I'll have to try the trigger method I guess as Sabin
suggested.
From iacobs at m0n5t3r.info  Sat Aug 25 12:43:49 2007
From: iacobs at m0n5t3r.info (Sabin Iacob)
Date: Sat Aug 25 12:43:58 2007
Subject: [wp-hackers] Sharing Users/authentication
In-Reply-To: <a3b809ae0708250521u5d472971j6c2b9b9c5d5163d3@mail.gmail.com>
References: <a3b809ae0708250521u5d472971j6c2b9b9c5d5163d3@mail.gmail.com>
Message-ID: <46D02405.6040304@m0n5t3r.info>

Curt Woodard wrote:
> Well, good news! I have used a VIEW to be able to log into WP using
> SMF's user table! :)
>
> Bad News... I forgot which files I messed with... heh
>
> Actually, the main part is that I updated wp-config to define a custom
> user table. Then I overrode a lot of the pluggable functions that WP
> has available.
>
> I'm going to see about getting user updates and registration working now. WEE!
>
> Here's the SQL if you're interested:
>
> CREATE VIEW wp_smf_users
> AS SELECT
> 	a.ID_MEMBER AS ID,
> 	a.memberName AS user_login,
> 	a.passwd AS user_pass,
> 	a.usertitle AS user_nicename,
> 	a.emailAddress AS user_email,
> 	a.websiteUrl AS user_url,
> 	FROM_UNIXTIME(a.dateRegistered) AS user_registered,
> 	a.validation_code AS user_activation_key,
> 	a.is_activated AS user_status,
> 	a.realName AS display_name
> FROM smf.smf_members AS a
>
> I'm considering using the plug-in system to rename the WP users table
> to a backup then replace it with the view... But it'd be nifty if the
> plug-in could have been used to define the user table.
>
> The user_meta works fine since it's an auxiliary table that holds
> extra stuff... I might see about making that a view as well, but we'll
> have to see about that.
>
> If I can get this all working so that WP is using the SMF members
> table exclusively with a plug-in and changing 1 file, then I'll be
> sure to press forward and add in some bridge code that will make
> certain that WP uses the SMF cookie as well... if that's at all
> possible.
>
> Of course, the more I can convert over from SMF to WP, the better.
>
> I did try to do an update using the view, but it didn't work as I
> figured. I'll have to try the trigger method I guess as Sabin
> suggested.
>   

"instead of" triggers are not supported by mysql yet, so you'll have to 
replace parts of the user management/authentication layer;  take a look 
at wp-includes/pluggable.php and the hooks related to user data editing
From iacobs at m0n5t3r.info  Sat Aug 25 12:48:07 2007
From: iacobs at m0n5t3r.info (Sabin Iacob)
Date: Sat Aug 25 12:48:14 2007
Subject: [wp-hackers] Sharing Users/authentication
In-Reply-To: <46D02405.6040304@m0n5t3r.info>
References: <a3b809ae0708250521u5d472971j6c2b9b9c5d5163d3@mail.gmail.com>
	<46D02405.6040304@m0n5t3r.info>
Message-ID: <46D02507.40403@m0n5t3r.info>

Sabin Iacob wrote:
> Curt Woodard wrote:
>> Well, good news! I have used a VIEW to be able to log into WP using
>> SMF's user table! :)
>>
>> Bad News... I forgot which files I messed with... heh

diff is your friend;

>>
>> Actually, the main part is that I updated wp-config to define a custom
>> user table. Then I overrode a lot of the pluggable functions that WP
>> has available.
>   take a look at wp-includes/pluggable.php and the hooks related to 
> user data editing

it appears you already did that :); good luck and keep us updated.
From clwoodard at gmail.com  Sat Aug 25 14:47:24 2007
From: clwoodard at gmail.com (Curt Woodard)
Date: Sat Aug 25 14:47:29 2007
Subject: [wp-hackers] Re: Sharing Users/authentication
Message-ID: <a3b809ae0708250747q4a491b41x614a1aa1c629d1e7@mail.gmail.com>

Some more news:

I've gone through the files I toyed with and the only ones I modified
for this hack/plug-in were wp-config and my plug-in. I did some
testing and was able to pull all the information into the plug-in so
that's the only thing that has changed! Now, for authentication/login
the user can log into WP using the smf_member's table.

Now, here come the issues:
I have to find a way to log the user into SMF at the same time.
I have to find a way to get WP to use the SMF cookie instead of its
separate ones.
I have to find a way to delete/update/insert users into the SMF table.

It looks like, for the last one, I'll have to hack the admin-db,
wp-login, and registration files since it would be a good idea to fix
the reset/lost password parts as well.

For the login stuff, it looks like I can use the action system to add
to the wp_login and wp_logout functions. I believe that's where I need
to update the SMF table with the data necessary (killing sessions,
setting logged off, etc.) I'll be using one of the SMF bridges (mambo,
actually) to see how that was done.

For the cookie stuff, I might have to override the wp_set_cookie()
function but it doesn't seem like I will even need to do this if I can
get the SMF cookie to work. Since I overrode this function already to
store the password the way SMF does (
sha1(strtolower($username).$password) where $password is clear text as
is the username) versus the double-md5() hashed way that WP does it.
So, I think I can ignore this... I can always check to see if the SMF
cookie exists. If it does, I can just set the WP cookie information
based on it before the cookie check.

Well, anyway, my plug-in is partially working and it looks like I'll
have to modify the main files... unless there's a filter or action
that can preempt update/insert/delete in WP...

-Curt
From wp-hackers at striderweb.com  Sat Aug 25 16:20:09 2007
From: wp-hackers at striderweb.com (Stephen Rider)
Date: Sat Aug 25 16:20:25 2007
Subject: [wp-hackers] Sharing Users/authentication
In-Reply-To: <AB809068-D235-4F76-B15C-FD01DE5D7B7A@striderweb.com>
References: <9b1b9dab0708241054g749e24c0md73235d986d24bfa@mail.gmail.com>	<46CF1E73.6000407@branson.com>
	<B9F84AB9-E5E4-4B3A-945E-C15C899285B5@striderweb.com>
	<46CF9A48.8000403@dragonu.net>
	<AB809068-D235-4F76-B15C-FD01DE5D7B7A@striderweb.com>
Message-ID: <C70AAC98-E574-4F51-8025-8E1827E8BA33@striderweb.com>

Potential bug report and further discussion....

Okay, I've discovered this much:

The problem appears to be the "wp_capabilities" and "wp_user_level"  
fields in the wp_usermeta table.  WordPress needs these field names  
to match the active table prefix.

So, when I use the define()s to point to the other blog's user and  
usermeta tables, it sees the wrong prefix in this field and hits an  
error.

This only appears to affect admin screens, not the main blog itself.

Has anybody ever actually gotten this to work or is it just theory  
that you can point one blog to another's user tables?

ALSO:  Should it be considered a bug that the field names have the  
prefix hard-coded into them?  This seems like unnecessary duplication  
of information to me, which is a database design no-no.

Stephen

On Aug 24, 2007, at 9:56 PM, Jacob Santos wrote:
>
> No idea. It could be any number of variables or problems. Write a  
> ticket to the forums and see if someone who is experienced knows  
> anything.
>
> Did you change the config of the second blog? Or third? Or Fourth?
>
> Is the second blog on the same database as the first blog?
>
> As I have had no need to attempt something like this, I have no  
> idea how to troubleshoot it. I might attempt it to see what the  
> requirements are beyond setting those two constants, but I really  
> don?t think I will have time.
>
> Good Luck,
>
> Jacob Santos
>
> Stephen Rider wrote:
>> That could be extremely useful for me.  However... when I do that  
>> I can?t get into the admin screen on the ?secondary? blog.  All I  
>> see is:
>>
>> You do not have sufficient permissions to access this page.
>>
>> The main blog still works fine.  Any idea why???
>>
>> Stephen
>>
>>
>> On Aug 24, 2007, at 1:07 PM, jacobsantos@branson.com wrote:
>>>
>>> Yes. There are defines in the wp-settings.php file that can be  
>>> defined in the wp-config.php file.
>>>
>>> wp-config.php
>>> -----------------------
>>>
>>> // Underneath database config info
>>> define(?CUSTOM_USER_TABLE?, ?wp_users?);
>>> define(?CUSTOM_USER_META_TABLE?, ?wp_usermeta?);
>>>
>>> In this way, you only need to have one wordpress users table and  
>>> usermeta table. You will have to keep track of the prefix of the  
>>> wordpress installation you have all of the users in.
>>>
>>> Jacob Santos
>>>
>>> Chris Lott wrote:
>>>> Faculty members have discovered CommentPress and would like to use
>>>> CommentPress enabled blogs alongside their regular class  
>>>> blogs... is
>>>> there a simple way to share the usernames/logins between two WP
>>>> installations? All that really needs to be shared is the login name
>>>> and password...
>>>>
>>>> c

From wp-hackers at striderweb.com  Sat Aug 25 16:26:40 2007
From: wp-hackers at striderweb.com (Stephen Rider)
Date: Sat Aug 25 16:26:55 2007
Subject: [wp-hackers] Sharing Users/authentication
In-Reply-To: <C70AAC98-E574-4F51-8025-8E1827E8BA33@striderweb.com>
References: <9b1b9dab0708241054g749e24c0md73235d986d24bfa@mail.gmail.com>	<46CF1E73.6000407@branson.com>
	<B9F84AB9-E5E4-4B3A-945E-C15C899285B5@striderweb.com>
	<46CF9A48.8000403@dragonu.net>
	<AB809068-D235-4F76-B15C-FD01DE5D7B7A@striderweb.com>
	<C70AAC98-E574-4F51-8025-8E1827E8BA33@striderweb.com>
Message-ID: <2EA73CDD-7A32-4435-A418-7A0218FE820F@striderweb.com>

CORRECTION:

They aren't field names:  They are data in the "meta_key" field.   
Nonetheless my question stands:

IS there any legitimate use for the table-prefix to be repeated  
here?  Would WordPress lose anything by removing the table prefixes  
from these two fields?

Stephen

On Aug 25, 2007, at 11:20 AM, Stephen Rider wrote:

> The problem appears to be the "wp_capabilities" and "wp_user_level"  
> fields in the wp_usermeta table.  WordPress needs these field names  
> to match the active table prefix.
>
> So, when I use the define()s to point to the other blog's user and  
> usermeta tables, it sees the wrong prefix in this field and hits an  
> error.
>
>
> ALSO:  Should it be considered a bug that the field names have the  
> prefix hard-coded into them?  This seems like unnecessary  
> duplication of information to me, which is a database design no-no.
>
From hovenko at linpro.no  Sat Aug 25 16:31:00 2007
From: hovenko at linpro.no (Knut-Olav Hoven)
Date: Sat Aug 25 16:31:06 2007
Subject: [wp-hackers] Sharing Users/authentication
In-Reply-To: <2EA73CDD-7A32-4435-A418-7A0218FE820F@striderweb.com>
References: <9b1b9dab0708241054g749e24c0md73235d986d24bfa@mail.gmail.com>
	<C70AAC98-E574-4F51-8025-8E1827E8BA33@striderweb.com>
	<2EA73CDD-7A32-4435-A418-7A0218FE820F@striderweb.com>
Message-ID: <200708251831.00809.hovenko@linpro.no>

On Saturday 25 August 2007 18:26:40 Stephen Rider wrote:
> CORRECTION:
>
> They aren't field names:  They are data in the "meta_key" field.
> Nonetheless my question stands:
>
> IS there any legitimate use for the table-prefix to be repeated
> here?  Would WordPress lose anything by removing the table prefixes
> from these two fields?

I believe this was a (poor?) design decision regarding WordPress MU, to allow 
users have different capabilities on a per-blog basis.

>
> Stephen
>
> On Aug 25, 2007, at 11:20 AM, Stephen Rider wrote:
> > The problem appears to be the "wp_capabilities" and "wp_user_level"
> > fields in the wp_usermeta table.  WordPress needs these field names
> > to match the active table prefix.
> >
> > So, when I use the define()s to point to the other blog's user and
> > usermeta tables, it sees the wrong prefix in this field and hits an
> > error.
> >
> >
> > ALSO:  Should it be considered a bug that the field names have the
> > prefix hard-coded into them?  This seems like unnecessary
> > duplication of information to me, which is a database design no-no.
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers



-- 
Knut-Olav Hoven
Systemutvikler               mob: +47 986 71 700
Linpro AS                    http://www.linpro.no/
From hovercrafter at earthlink.net  Sat Aug 25 16:33:16 2007
From: hovercrafter at earthlink.net (Jamie Holly)
Date: Sat Aug 25 16:35:05 2007
Subject: [wp-hackers] Sharing Users/authentication
In-Reply-To: <2EA73CDD-7A32-4435-A418-7A0218FE820F@striderweb.com>
References: <9b1b9dab0708241054g749e24c0md73235d986d24bfa@mail.gmail.com>	<46CF1E73.6000407@branson.com>	<B9F84AB9-E5E4-4B3A-945E-C15C899285B5@striderweb.com>	<46CF9A48.8000403@dragonu.net>	<AB809068-D235-4F76-B15C-FD01DE5D7B7A@striderweb.com>	<C70AAC98-E574-4F51-8025-8E1827E8BA33@striderweb.com>
	<2EA73CDD-7A32-4435-A418-7A0218FE820F@striderweb.com>
Message-ID: <015001c7e735$a4a8b030$edfa1090$@net>

The prefixes are used in MU. For example user X might have different
capabilities on one blog than the other. The capabilities are stored as
{tableprefix}_{blogid}_capabilities, so it would be something like
wp_1_capabilities. 



Jamie Holly
http://www.intoxination.net
1.513.252.2919 | Skype:intoxination


>-----Original Message-----
>From: wp-hackers-bounces@lists.automattic.com [mailto:wp-hackers-
>bounces@lists.automattic.com] On Behalf Of Stephen Rider
>Sent: Saturday, August 25, 2007 12:27 PM
>To: wp-hackers@lists.automattic.com
>Subject: Re: [wp-hackers] Sharing Users/authentication
>
>CORRECTION:
>
>They aren't field names:  They are data in the "meta_key" field.
>Nonetheless my question stands:
>
>IS there any legitimate use for the table-prefix to be repeated
>here?  Would WordPress lose anything by removing the table prefixes
>from these two fields?
>
>Stephen
>
>On Aug 25, 2007, at 11:20 AM, Stephen Rider wrote:
>
>> The problem appears to be the "wp_capabilities" and "wp_user_level"
>> fields in the wp_usermeta table.  WordPress needs these field names
>> to match the active table prefix.
>>
>> So, when I use the define()s to point to the other blog's user and
>> usermeta tables, it sees the wrong prefix in this field and hits an
>> error.
>>
>>
>> ALSO:  Should it be considered a bug that the field names have the
>> prefix hard-coded into them?  This seems like unnecessary
>> duplication of information to me, which is a database design no-no.
>>
>_______________________________________________
>wp-hackers mailing list
>wp-hackers@lists.automattic.com
>http://lists.automattic.com/mailman/listinfo/wp-hackers

From clwoodard at gmail.com  Sat Aug 25 20:38:41 2007
From: clwoodard at gmail.com (Curt Woodard)
Date: Sat Aug 25 20:38:47 2007
Subject: [wp-hackers] Re: Sharing Users/authentication
Message-ID: <a3b809ae0708251338m51096ccdla8edae70f3f53850@mail.gmail.com>

Another Update:

OK, some more news. I have fixed the _usermeta issue when someone from
SMF goes to WP for the first time.
All I do is set up 3 basic things: *_capabilities, *_user_level, and nickname.

Since you decide the role and everything in WP when you register
someone, this won't be an issue. Now, if someone is registered in SMF
and logs into WP, they will be issued the above 3 usermeta keys as
they enter WP.

You will have to set up 1 array for this, an array that shows the user
groups in SMF as their BASIC roles in WP.

For instance. Someone with the Administrator group in SMF (1) will be
assigned a user_level of 10 and a capabilities of [administrator] => 1
(or administrator = true). I will look at a default version of SMF for
default user groups and set that up. If you have different ones, it
might just be part of the installation (or options, if I can figure
them out).

OK: Next up will be to clear out invalid usermeta data to make sure
that users who are deleted in SMF are also deleted in WP. I'll look
into that soon.

Following this will be user insert/update from the WP side so that
registration by user and admin both work. For now, it's time for me to
go to bed (12 hour shifts kill me).
From wordpress at uberdose.com  Sun Aug 26 06:04:13 2007
From: wordpress at uberdose.com (uberdose)
Date: Sun Aug 26 06:04:20 2007
Subject: [wp-hackers] protecting wp-content/plugins ?
In-Reply-To: <46D00A91.2020602@yadan.net>
References: <ae81acd10708160700s596e5d93w6086b76c45f73710@mail.gmail.com>
	<ae81acd10708160727k3bd6c978rdfc5c46027e6d655@mail.gmail.com>
	<b88434820708171227s6eb5e4cbg8918e19ff5f850a6@mail.gmail.com>
	<46C622D8.9010301@yadan.net>
	<b88434820708171537w9acc67fl10d86761f0522d42@mail.gmail.com>
	<46C62409.1040303@yadan.net>
	<d5d5430f0708172310v1d1d6c0ev68ffb8299c93923@mail.gmail.com>
	<46C6AA7B.3000603@yadan.net> <46C6E20E.5070702@freecharity.org.uk>
	<46D00A91.2020602@yadan.net>
Message-ID: <4ba640480708252304v110d9bb5ydb86d28316ec9499@mail.gmail.com>

I too think this has to be fixed. I recently noticed plugin files
indexed by google. This can't be healthy.
From andy at yellowswordfish.com  Sun Aug 26 13:01:18 2007
From: andy at yellowswordfish.com (Andy Staines)
Date: Sun Aug 26 13:01:25 2007
Subject: [wp-hackers] Lost POST variables
Message-ID: <C45109F7-5D20-4792-93BE-19E2A8B0BFA1@yellowswordfish.com>

Hi all

For my forum plugin I created separate user registration, login and  
profile forms on the front-end because many users don't like members  
getting to their admin profile page plus it confuses their non-WP  
users. These were modelled closely on the WP ones and do all the  
right stuff. And in 2.0, 2.1 and 2.2 they have functioned correctly.
But for some reason on 2.3 - with the same code - the POST variables  
are either not getting set or are in some way being cleared before  
the re-direct back to the registration code. Forms on the front-end  
work as always.
I've searched through TRAC but can't find any indication that  
anything has changed but I may have missed it. Does anyone know if  
this is caused by a change n WP 2.3 code?

Thanks and regards
Andy
From ozh at planetozh.com  Sun Aug 26 13:06:57 2007
From: ozh at planetozh.com (Ozh)
Date: Sun Aug 26 13:07:02 2007
Subject: [wp-hackers] protecting wp-content/plugins ?
In-Reply-To: <4ba640480708252304v110d9bb5ydb86d28316ec9499@mail.gmail.com>
References: <ae81acd10708160700s596e5d93w6086b76c45f73710@mail.gmail.com>
	<b88434820708171227s6eb5e4cbg8918e19ff5f850a6@mail.gmail.com>
	<46C622D8.9010301@yadan.net>
	<b88434820708171537w9acc67fl10d86761f0522d42@mail.gmail.com>
	<46C62409.1040303@yadan.net>
	<d5d5430f0708172310v1d1d6c0ev68ffb8299c93923@mail.gmail.com>
	<46C6AA7B.3000603@yadan.net> <46C6E20E.5070702@freecharity.org.uk>
	<46D00A91.2020602@yadan.net>
	<4ba640480708252304v110d9bb5ydb86d28316ec9499@mail.gmail.com>
Message-ID: <ae81acd10708260606h5d8ab401na991fca309c1f09e@mail.gmail.com>

This was indeed part of Matt Cutt's WP Wishlist as expressed during
last WordCamp
(Matt Cutt's slides:
<http://www.slideshare.net/ozh/whitehat-seo-tips-for-bloggers/> the WP
wishlist is on slide 27/28)

On 8/26/07, uberdose <wordpress@uberdose.com> wrote:
> I too think this has to be fixed. I recently noticed plugin files
> indexed by google. This can't be healthy.



-- 
http://FrenchFragFactory.net ~ Daily Quake News
   http://planetOzh.com ~ Useless Blog & Code
From wordpress at tekartist.org  Sun Aug 26 17:16:01 2007
From: wordpress at tekartist.org (Stephane Daury)
Date: Sun Aug 26 17:16:11 2007
Subject: [wp-hackers] wpDirAuth beta release schedule and thanks.
Message-ID: <F9428F61-BE38-424C-A758-AA1223E4BD42@tekartist.org>

Hey there,

I wanted to thank everybody who contacted me through wordpress[at] 
tekartist[dot]org for the help that they have provided with getting  
wpDirAuth peer reviewed and ready for its first official beta release.

It has been an absolute pleasure to interact with all of you, and  
your skills, time and support have been deeply appreciated.

I have now opened two Google Groups as collaboration and support  
channels, should you be interested in being involved in future use  
and/or development.

- Support channel: <http://groups.google.com/group/wpdirauth-support>

- Development channel: <http://groups.google.com/group/wpdirauth-dev>

I have now committed what will hopefully be my final draft (before  
suggested corrections, if any) of the readme file and inline info.
Please feel free to review it and suggest modifications, should you  
feel any are required.

<http://labs.tekartist.org/wordpress/svn/branches/dev/plugins/ 
wpDirAuth/>

The listed trunk, tag and download locations will be active at  
release time.

Unless something happens to the code or my schedule, I think the 1.0b  
release will happen sometimes on Tuesday evening.

Again, thank you for your help, and hoping we will get to work on  
wpDirAuth again or who knows, maybe even future projects.
As I mentioned to most of you, please feel free to pass along similar  
requests to me, and I will do my best to return the favour.

Very best regards,

--
Stephane Daury - http://tekartist.org/
From lists.automattic.com at callum-macdonald.com  Sun Aug 26 18:52:34 2007
From: lists.automattic.com at callum-macdonald.com (Callum Macdonald)
Date: Sun Aug 26 18:53:12 2007
Subject: [wp-hackers] usermeta is missing from wpdb
In-Reply-To: <674b4a3b0708231634r61ef445av13b78c2297d3bc98@mail.gmail.com>
References: <46CD995C.7000904@callum-macdonald.com>	<46CD9F13.5030706@branson.com>
	<46CDC994.4080608@callum-macdonald.com>	<45E3F94D-A5CC-4B5B-AC9C-8403C8271C9D@ftwr.co.uk>
	<674b4a3b0708231634r61ef445av13b78c2297d3bc98@mail.gmail.com>
Message-ID: <46D1CBF2.2090501@callum-macdonald.com>

Thanks Austin, I was offline for a couple of days so just saw the mails 
now. You saved me doing it! :) - C.

Austin Matzko wrote:
> On 8/23/07, Peter Westwood <peter.westwood@ftwr.co.uk> wrote:
>   
>> Please raise a ticket on trac [1] and attach a patch and then someone
>> will check it in.
>>     
>
> Apparently no one else created a ticket, so I went ahead and did it:
> http://trac.wordpress.org/ticket/4806
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
>
>   

From clwoodard at gmail.com  Mon Aug 27 03:00:18 2007
From: clwoodard at gmail.com (Curt Woodard)
Date: Mon Aug 27 03:00:22 2007
Subject: [wp-hackers] SMF Integrator (A WordPress 2.2.2 Plugin)
Message-ID: <a3b809ae0708262000h5aff55afl61786fb1f54532b9@mail.gmail.com>

Well, I'm very, very close to finishing this off!

What is SMF Integrator? SMF Integrator is a new plug-in for WordPress
2.2.2 and SMF 1.1.3.

Features:

    * WordPress and SMF share the SMF user tables. No need to have a
users table in WordPress any longer (though keeping it with the
default admin account is a good idea if there are issues). This
integration is achieved by using features in MySQL version 5 called
Views. In the most basic sense, fields in the smf_members table are
mapped to fields in the wp_users database. The result, along with a
custom user table definition, is that WP thinks the SMF members table
is it's own!
    * Due to the above feature ALL SMF members on your forums are now
able to access WP using the 5 default roles that WP offers. When a
user logs into WordPress for the first time, their usermeta
information is set up. But this is only if they were not added from
WordPress and already exist in SMF...
    * Administrators who are able to add and update users can do so
from the WP admin panel. Added/Updated users are immediately available
in SMF!
    * Users may update their profiles in WordPress if they have that capability.
    * SMF membergroups can be tied to specific roles, with the default
roles of Administrator, Editor, Author, Contributor, and Subscriber
already configured with the default SMF membergroups. Administrators
can change which membergroups belong to which roles via the handy
option panel.
    * Via the options panel, admins can update the path of SMF (where
SSI.php is located), change the name of the MySQL View that the
plug-in uses, and delete/reassign orphaned posts from WordPress's old
user table. Of course, if it's left alone, there's no harm or foul...
But there may be clashes due to the SMF user id's possibly matching
the WordPress ones...
    * All features of SMF still work.

I am currently working on:

    * Concurrent login: Logging into WP will log you into SMF.
    * Self-Registration from WP (I have that feature turned off atm... heh)
    * Lost/Reset Password requests from WP.


Installation is quite simple:
Make sure that you unzip SMF_Integrator.php into either a directory in
the wp-content/plugins folder or directly to that folder.

Edit the file to make sure the default option points to your SMF
directory. Otherwise it will crap out... heh. I know, it defeats the
purpose of the option, but you won't have to deal with the file again.
If you happen to move your forum to a different directory, you'll have
the option to change it.

Then activate the plugin from the plugins panel on the admin page.
That should be all there is to it. You'll need to log in as yourself
from SMF, but other than that everything should be cool. Usually, the
person who is running the forum is also user #1. But if this isn't the
case, let me know and I'll see about fixing this.

Once I have the above three taken care of, I'll make the plugin
available for beta testing. The interesting thing is, it's one file
that goes with WordPress and doesn't modify anything in SMF! Hopefully
this will be it, but I might have to do some file hacks to get around
the above issues with WordPress... we'll have to see.

Well, you've officially heard it here, features and all! Let me know
what you think and what features you'd like to *eventually* see!

Thank you all for your help!

-Ex
From wordpress at tekartist.org  Mon Aug 27 05:21:14 2007
From: wordpress at tekartist.org (Stephane Daury)
Date: Mon Aug 27 05:21:24 2007
Subject: [wp-hackers] SMF Integrator (A WordPress 2.2.2 Plugin)
In-Reply-To: <a3b809ae0708262000h5aff55afl61786fb1f54532b9@mail.gmail.com>
References: <a3b809ae0708262000h5aff55afl61786fb1f54532b9@mail.gmail.com>
Message-ID: <1D28354F-0C21-46F2-9182-C71A05855258@tekartist.org>


Quick questions, by curiosity:
- are you using updatable views?
- are they 1 to 1 views or linking to multiple joined tables?

Stephane




On Aug 26, 2007, at 23:00, Curt Woodard wrote:

> Well, I'm very, very close to finishing this off!
>
> What is SMF Integrator? SMF Integrator is a new plug-in for WordPress
> 2.2.2 and SMF 1.1.3.
>
> Features:
>
>     * WordPress and SMF share the SMF user tables. No need to have a
> users table in WordPress any longer (though keeping it with the
> default admin account is a good idea if there are issues). This
> integration is achieved by using features in MySQL version 5 called
> Views. In the most basic sense, fields in the smf_members table are
> mapped to fields in the wp_users database. The result, along with a
> custom user table definition, is that WP thinks the SMF members table
> is it's own!
>     * Due to the above feature ALL SMF members on your forums are now
> able to access WP using the 5 default roles that WP offers. When a
> user logs into WordPress for the first time, their usermeta
> information is set up. But this is only if they were not added from
> WordPress and already exist in SMF...
>     * Administrators who are able to add and update users can do so
> from the WP admin panel. Added/Updated users are immediately available
> in SMF!
>     * Users may update their profiles in WordPress if they have  
> that capability.
>     * SMF membergroups can be tied to specific roles, with the default
> roles of Administrator, Editor, Author, Contributor, and Subscriber
> already configured with the default SMF membergroups. Administrators
> can change which membergroups belong to which roles via the handy
> option panel.
>     * Via the options panel, admins can update the path of SMF (where
> SSI.php is located), change the name of the MySQL View that the
> plug-in uses, and delete/reassign orphaned posts from WordPress's old
> user table. Of course, if it's left alone, there's no harm or foul...
> But there may be clashes due to the SMF user id's possibly matching
> the WordPress ones...
>     * All features of SMF still work.
>
> I am currently working on:
>
>     * Concurrent login: Logging into WP will log you into SMF.
>     * Self-Registration from WP (I have that feature turned off  
> atm... heh)
>     * Lost/Reset Password requests from WP.
>
>
> Installation is quite simple:
> Make sure that you unzip SMF_Integrator.php into either a directory in
> the wp-content/plugins folder or directly to that folder.
>
> Edit the file to make sure the default option points to your SMF
> directory. Otherwise it will crap out... heh. I know, it defeats the
> purpose of the option, but you won't have to deal with the file again.
> If you happen to move your forum to a different directory, you'll have
> the option to change it.
>
> Then activate the plugin from the plugins panel on the admin page.
> That should be all there is to it. You'll need to log in as yourself
> from SMF, but other than that everything should be cool. Usually, the
> person who is running the forum is also user #1. But if this isn't the
> case, let me know and I'll see about fixing this.
>
> Once I have the above three taken care of, I'll make the plugin
> available for beta testing. The interesting thing is, it's one file
> that goes with WordPress and doesn't modify anything in SMF! Hopefully
> this will be it, but I might have to do some file hacks to get around
> the above issues with WordPress... we'll have to see.
>
> Well, you've officially heard it here, features and all! Let me know
> what you think and what features you'd like to *eventually* see!
>
> Thank you all for your help!
>
> -Ex
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

From clwoodard at gmail.com  Mon Aug 27 12:33:53 2007
From: clwoodard at gmail.com (Curt Woodard)
Date: Mon Aug 27 12:34:00 2007
Subject: [wp-hackers] SMF Integrator (A WordPress 2.2.2 Plugin)
Message-ID: <a3b809ae0708270533r7c05e1e7qab95060e877634dc@mail.gmail.com>

> Quick questions, by curiosity:
> - are you using updatable views?

No, the view isn't updatable. This is because, in the view, I'm
changing the table header to match that of WordPress so that it's a
mirror of the users table. MySQL doesn't allow updatable views that do
this, for obvious reasons. One of those reasons being: SMF and WP
store dates differently. SMF stores them as unix timestamps while WP
stores them as datetime. So I had to use a MySQL function to
translate.

Now, I *could* make it updatable and find a way to change the result
of database queries into a form that WP uses, but that would require
hacking the core files, which we don't really want to do. If WP were
written so that you could override ANY function, then this wouldn't be
an issue, but that would require hacking WP as well at this point...
:)

> - are they 1 to 1 views or linking to multiple joined tables?
>
> Stephane

The view is 1-to-1 without joining to other tables. This is because
SMF has all of it's user information in the members table, unlike
WordPress's users and usermeta tables.

I went ahead and kept the usermeta table because it stores stuff that
is WordPress specific from plug-ins and the like.

Which reminds me, I need to check compatibility with a few of the
plugins that I use, like the LJ cross-poster. It might be a good idea
to somehow hack that plugin so that it's user-specific and can be
turned off on a user-by-user basis... No need to have JimmyBob posting
to my Live Journal, eh? Though, I could change that to a
community-based LJ and have people post that way... I'll have to see.
From docwhat+list.wp.hackers at gerf.org  Mon Aug 27 12:54:04 2007
From: docwhat+list.wp.hackers at gerf.org (Christian =?iso-8859-1?Q?H=F6ltje?=)
Date: Mon Aug 27 12:54:14 2007
Subject: [wp-hackers] Re: SMF Integrator (A WordPress 2.2.2 Plugin)
In-Reply-To: <a3b809ae0708270533r7c05e1e7qab95060e877634dc@mail.gmail.com>
References: <a3b809ae0708270533r7c05e1e7qab95060e877634dc@mail.gmail.com>
Message-ID: <20070827125404.GC28383@gerf.org>

* Curt Woodard (clwoodard@gmail.com) [070827 08:34]:
> I went ahead and kept the usermeta table because it stores stuff that
> is WordPress specific from plug-ins and the like.

I'm unfamiliar with SMF; is there a risk that a user_id is recycled
getting an ex-user's capabilities?

Ciao!

-- 
AMAZING BUT TRUE
A demonstration of the failings of statistics:
The most common first name in the world is "Mohammed". The  most
common last name in  the world is "Chang". From this, however, it
is not wise to assume that there is an inordinate number of people
in the world named Mohammed Chang.

The Doctor What: "What, Doctor What"             http://docwhat.gerf.org/
docwhat *at* gerf *dot* org                                        KF6VNC
From clwoodard at gmail.com  Mon Aug 27 13:27:34 2007
From: clwoodard at gmail.com (Curt Woodard)
Date: Mon Aug 27 13:27:46 2007
Subject: [wp-hackers] Re: SMF Integrator (A WordPress 2.2.2 Plugin)
Message-ID: <a3b809ae0708270627g64139243he3e50bf9fccd3e61@mail.gmail.com>

> * Curt Woodard (clwoodard <at> gmail.com) [070827 08:34]:
> > I went ahead and kept the usermeta table because it stores stuff that
> > is WordPress specific from plug-ins and the like.
>
> I'm unfamiliar with SMF; is there a risk that a user_id is recycled
> getting an ex-user's capabilities?
>
> Ciao!

There is that possibility, especially if WordPress has more than one
user when the SMF Integrator is installed. Perhaps I can clear out old
user capabilities the first time someone from SMF logs in... *ponder*
I'll have to check on that.

This is mainly WordPress's fault anyway since they use more than one
table to handle users, but then again, to make the users table
dynamically increase it's RELVAR when new data is added makes things a
bit squirrelly... heh

I'll look into that, perhaps I could introduce a new usermeta table so
that the old usermeta isn't overrun... but that's going to be easier
than the mapping of SMF stuff over to WP... heh

Thanks for brining this up. Since I only have one user (me) I didn't
think about this... *sigh* and I still have to test the LJ posting
stuff...
From docwhat+list.wp.hackers at gerf.org  Mon Aug 27 14:01:40 2007
From: docwhat+list.wp.hackers at gerf.org (Christian =?iso-8859-1?Q?H=F6ltje?=)
Date: Mon Aug 27 14:01:46 2007
Subject: [wp-hackers] Re: SMF Integrator (A WordPress 2.2.2 Plugin)
In-Reply-To: <a3b809ae0708270627g64139243he3e50bf9fccd3e61@mail.gmail.com>
References: <a3b809ae0708270627g64139243he3e50bf9fccd3e61@mail.gmail.com>
Message-ID: <20070827140140.GB31270@gerf.org>

* Curt Woodard (clwoodard@gmail.com) [070827 09:27]:
> There is that possibility, especially if WordPress has more than one
> user when the SMF Integrator is installed. Perhaps I can clear out old
> user capabilities the first time someone from SMF logs in... *ponder*
> I'll have to check on that.
> 
> This is mainly WordPress's fault anyway since they use more than one
> table to handle users, but then again, to make the users table
> dynamically increase it's RELVAR when new data is added makes things a
> bit squirrelly... heh
> 
> I'll look into that, perhaps I could introduce a new usermeta table so
> that the old usermeta isn't overrun... but that's going to be easier
> than the mapping of SMF stuff over to WP... heh
> 
> Thanks for brining this up. Since I only have one user (me) I didn't
> think about this... *sigh* and I still have to test the LJ posting
> stuff...

No problem.  I've integrated the users for systems a couple of times
in the past.

How do you determine the user_id for use in wordpress?  Does SMF has a
guaranteed unique number?  If not, can you add one?  That would
prevent the problem of accidentally getting an ex-user's metadata.

If SMF differentiates between 'deleted' and 'deactivated', make sure
you remove the capabilities and reset the user_level instead of
deleting the user from the view; I'm unsure if WP will delete the
metadata if the user is missing.  If it doesn't, then it doesn't
matter.  But that could change in the future.

Also note that if admin the changes the table prefix from 'wp_', it
alters the meta_key for wp_capabilities and wp_user_level; it changes
the wp_ to whatever the prefix is.

Ciao!

-- 
If the facts don't fit the theory, change the facts.
	 -- Albert Einstein

The Doctor What: Second Baseman                  http://docwhat.gerf.org/
docwhat *at* gerf *dot* org                                        KF6VNC
From clwoodard at gmail.com  Mon Aug 27 14:23:17 2007
From: clwoodard at gmail.com (Curt Woodard)
Date: Mon Aug 27 14:23:23 2007
Subject: [wp-hackers] Re: SMF Integrator (A WordPress 2.2.2 Plugin)
Message-ID: <a3b809ae0708270723m7b9c3742g79c850af0902901c@mail.gmail.com>

> No problem.  I've integrated the users for systems a couple of times
> in the past.
>
> How do you determine the user_id for use in wordpress?  Does SMF has a
> guaranteed unique number?  If not, can you add one?  That would
> prevent the problem of accidentally getting an ex-user's metadata.

SMF uses autoincrement for the user-id. The same way that WP does as well.

> If SMF differentiates between 'deleted' and 'deactivated', make sure
> you remove the capabilities and reset the user_level instead of
> deleting the user from the view; I'm unsure if WP will delete the
> metadata if the user is missing.  If it doesn't, then it doesn't
> matter.  But that could change in the future.

Well, SMF actually deletes the record.

What I did is check the usermeta table for user_ids that do not exist
in the view. I then delete those records. That does leave an issue
with previous posts, links, and usermeta information possibly going to
the wrong user... That will have to be fixed.

> Also note that if admin the changes the table prefix from 'wp_', it
> alters the meta_key for wp_capabilities and wp_user_level; it changes
> the wp_ to whatever the prefix is.
>
> Ciao!

Yeah, I keep that in mind when I enter info into the usermeta table. I
add the $wpdb->prefix to user_level and capabilities. That way it will
be set up properly for the blog.
From foolistbar at googlemail.com  Mon Aug 27 19:04:19 2007
From: foolistbar at googlemail.com (Geoffrey Sneddon)
Date: Mon Aug 27 19:04:30 2007
Subject: [wp-hackers] Fixing Bugs
Message-ID: <F384F5BF-C422-4B83-A3CF-287B98F2221E@googlemail.com>

The number in bugs in WP has grown steadily over several years, yet  
the number of unfixed ones increasing quicker still. We need a  
release that is stable. We need a release where everything _works_.  
Can we have one release which includes _nothing_ but bug fixes. There  
are 409 open bugs according to trac (and I expect there are others  
marked as wontfix/invalid without reason). There are some massively  
annoying bugs for users, not least things like being unable to use  
IRIs in sanitised content (#4570, target 2.4).



- Geoffrey Sneddon


From jacobsantos at branson.com  Mon Aug 27 20:00:44 2007
From: jacobsantos at branson.com (jacobsantos@branson.com)
Date: Mon Aug 27 20:05:20 2007
Subject: [wp-hackers] Fixing Bugs
In-Reply-To: <F384F5BF-C422-4B83-A3CF-287B98F2221E@googlemail.com>
References: <F384F5BF-C422-4B83-A3CF-287B98F2221E@googlemail.com>
Message-ID: <46D32D6C.9090804@branson.com>

I like this idea, but I think it has more to do with users submitting 
patches for bugs. Which I think is what the bug hunts are all about, 
finding and submitting patches.

I also think that reasons should be given when closing as invalid or 
wontfix. It is good bug handling in my opinion and something that won't 
annoy those who submit bugs. Some bugs marked as won't fix or invalid 
mean that the bug is external to the application that can't be fixed 
easily. However, making it clear what the developers intention was would 
go a long way.

There will never be any release in any application where everything 
works. However, fixing what bugs we have now would be an awesome idea! 
Documenting the code should go along with this idea.

Jacob Santos

Geoffrey Sneddon wrote:
> The number in bugs in WP has grown steadily over several years, yet 
> the number of unfixed ones increasing quicker still. We need a release 
> that is stable. We need a release where everything _works_. Can we 
> have one release which includes _nothing_ but bug fixes. There are 409 
> open bugs according to trac (and I expect there are others marked as 
> wontfix/invalid without reason). There are some massively annoying 
> bugs for users, not least things like being unable to use IRIs in 
> sanitised content (#4570, target 2.4).
>
>
>
> - Geoffrey Sneddon
>
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
>
>

From wordpress at tekartist.org  Mon Aug 27 20:26:49 2007
From: wordpress at tekartist.org (Stephane Daury)
Date: Mon Aug 27 20:27:03 2007
Subject: [wp-hackers] SMF Integrator (A WordPress 2.2.2 Plugin)
In-Reply-To: <a3b809ae0708270533r7c05e1e7qab95060e877634dc@mail.gmail.com>
References: <a3b809ae0708270533r7c05e1e7qab95060e877634dc@mail.gmail.com>
Message-ID: <4D24F51D-FDF1-4883-981E-CD9D950CBDCC@tekartist.org>


Thanks for the details Curt.

I'm more of a PostgreSQL guy, and I was surprised to see that views  
only made it into MySQL at version 5.
The MySQL stuff I do not being as advanced as my PostgreSQL stuff, I  
had never really noticed they weren't there. :)

Stephane







On Aug 27, 2007, at 08:33, Curt Woodard wrote:

>> Quick questions, by curiosity:
>> - are you using updatable views?
>
> No, the view isn't updatable. This is because, in the view, I'm
> changing the table header to match that of WordPress so that it's a
> mirror of the users table. MySQL doesn't allow updatable views that do
> this, for obvious reasons. One of those reasons being: SMF and WP
> store dates differently. SMF stores them as unix timestamps while WP
> stores them as datetime. So I had to use a MySQL function to
> translate.
>
> Now, I *could* make it updatable and find a way to change the result
> of database queries into a form that WP uses, but that would require
> hacking the core files, which we don't really want to do. If WP were
> written so that you could override ANY function, then this wouldn't be
> an issue, but that would require hacking WP as well at this point...
> :)
>
>> - are they 1 to 1 views or linking to multiple joined tables?
>>
>> Stephane
>
> The view is 1-to-1 without joining to other tables. This is because
> SMF has all of it's user information in the members table, unlike
> WordPress's users and usermeta tables.
>
> I went ahead and kept the usermeta table because it stores stuff that
> is WordPress specific from plug-ins and the like.
>
> Which reminds me, I need to check compatibility with a few of the
> plugins that I use, like the LJ cross-poster. It might be a good idea
> to somehow hack that plugin so that it's user-specific and can be
> turned off on a user-by-user basis... No need to have JimmyBob posting
> to my Live Journal, eh? Though, I could change that to a
> community-based LJ and have people post that way... I'll have to see.
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

From Martin at Cleaver.org  Mon Aug 27 20:30:05 2007
From: Martin at Cleaver.org (Martin@Cleaver.org)
Date: Mon Aug 27 21:36:02 2007
Subject: [wp-hackers] Fixing Bugs
In-Reply-To: <46D32D6C.9090804@branson.com>
References: <F384F5BF-C422-4B83-A3CF-287B98F2221E@googlemail.com>
	<46D32D6C.9090804@branson.com>
Message-ID: <fe8dba6a0708271330j1d2b5c81j39d508fbada2b8ae@mail.gmail.com>

Indeed, unless a system gets documentation, to explain and put rigour into
the model of how it should work, bugs will continue to get through the
cracks.

Martin.

On 8/27/07, jacobsantos@branson.com <jacobsantos@branson.com> wrote:
>
> I like this idea, but I think it has more to do with users submitting
> patches for bugs. Which I think is what the bug hunts are all about,
> finding and submitting patches.
>
> I also think that reasons should be given when closing as invalid or
> wontfix. It is good bug handling in my opinion and something that won't
> annoy those who submit bugs. Some bugs marked as won't fix or invalid
> mean that the bug is external to the application that can't be fixed
> easily. However, making it clear what the developers intention was would
> go a long way.
>
> There will never be any release in any application where everything
> works. However, fixing what bugs we have now would be an awesome idea!
> Documenting the code should go along with this idea.
>
> Jacob Santos
>
> Geoffrey Sneddon wrote:
> > The number in bugs in WP has grown steadily over several years, yet
> > the number of unfixed ones increasing quicker still. We need a release
> > that is stable. We need a release where everything _works_. Can we
> > have one release which includes _nothing_ but bug fixes. There are 409
> > open bugs according to trac (and I expect there are others marked as
> > wontfix/invalid without reason). There are some massively annoying
> > bugs for users, not least things like being unable to use IRIs in
> > sanitised content (#4570, target 2.4).
> >
> >
> >
> > - Geoffrey Sneddon
> >
> >
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers@lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> >
> >
> >
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>



-- 
Martin@Cleaver.org
From wordpress at tekartist.org  Mon Aug 27 21:54:42 2007
From: wordpress at tekartist.org (Stephane Daury)
Date: Mon Aug 27 21:54:51 2007
Subject: [wp-hackers] Fixing Bugs
In-Reply-To: <fe8dba6a0708271330j1d2b5c81j39d508fbada2b8ae@mail.gmail.com>
References: <F384F5BF-C422-4B83-A3CF-287B98F2221E@googlemail.com>
	<46D32D6C.9090804@branson.com>
	<fe8dba6a0708271330j1d2b5c81j39d508fbada2b8ae@mail.gmail.com>
Message-ID: <66169348-EA13-47E5-AB08-470F43238869@tekartist.org>


One way we use at work that has helped with the "wontfix/invalid"  
bugs tracking in the long term is to simply refer to the Trac ticket#  
using the @see phpdoc keyword around the involved source code,  
coupled with an explanation in the ticket.

It's an easy way of correlating these issues in our generated docs  
without adding too much comment content to the source.

If nothing else, it helps the developers to tame duplicate bug  
entries and addressing.

I'm not going to preach for proper inline phpdocs/natural docs here,  
but it sure is helping us a lot with rather painlessly documenting  
our APIs.

Stephane


On Aug 27, 2007, at 16:30, Martin@Cleaver.org wrote:

> Indeed, unless a system gets documentation, to explain and put  
> rigour into
> the model of how it should work, bugs will continue to get through the
> cracks.
>
> Martin.
>
> On 8/27/07, jacobsantos@branson.com <jacobsantos@branson.com> wrote:
>>
>> I like this idea, but I think it has more to do with users submitting
>> patches for bugs. Which I think is what the bug hunts are all about,
>> finding and submitting patches.
>>
>> I also think that reasons should be given when closing as invalid or
>> wontfix. It is good bug handling in my opinion and something that  
>> won't
>> annoy those who submit bugs. Some bugs marked as won't fix or invalid
>> mean that the bug is external to the application that can't be fixed
>> easily. However, making it clear what the developers intention was  
>> would
>> go a long way.
>>
>> There will never be any release in any application where everything
>> works. However, fixing what bugs we have now would be an awesome  
>> idea!
>> Documenting the code should go along with this idea.
>>
>> Jacob Santos
>>
>> Geoffrey Sneddon wrote:
>>> The number in bugs in WP has grown steadily over several years, yet
>>> the number of unfixed ones increasing quicker still. We need a  
>>> release
>>> that is stable. We need a release where everything _works_. Can we
>>> have one release which includes _nothing_ but bug fixes. There  
>>> are 409
>>> open bugs according to trac (and I expect there are others marked as
>>> wontfix/invalid without reason). There are some massively annoying
>>> bugs for users, not least things like being unable to use IRIs in
>>> sanitised content (#4570, target 2.4).
>>>
>>>
>>>
>>> - Geoffrey Sneddon
>>>
>>>
>>> _______________________________________________
>>> wp-hackers mailing list
>>> wp-hackers@lists.automattic.com
>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>>
>>>
>>>
>>
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers@lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
>
>
>
> -- 
> Martin@Cleaver.org
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

From jacobsantos at branson.com  Mon Aug 27 21:56:42 2007
From: jacobsantos at branson.com (jacobsantos@branson.com)
Date: Mon Aug 27 22:01:18 2007
Subject: [wp-hackers] Fixing Bugs
In-Reply-To: <fe8dba6a0708271330j1d2b5c81j39d508fbada2b8ae@mail.gmail.com>
References: <F384F5BF-C422-4B83-A3CF-287B98F2221E@googlemail.com>	<46D32D6C.9090804@branson.com>
	<fe8dba6a0708271330j1d2b5c81j39d508fbada2b8ae@mail.gmail.com>
Message-ID: <46D3489A.8000000@branson.com>

Well, yeah, also it should be unit tested, along with QA. A few people 
are doing so already and I am one of those people. However, the unit 
tests won't be ready for the 2.3 release, or cover 100% of the 
functions. Some files and functions are unit testable (but are 
acceptance testable and characterization testable), which would add to 
the time needed to test the API functions.

I was able to find and patch a few bugs in a plugins.php alone, which is 
relatively stable. I started unit tests for taxonomy.php, but don't have 
complete coverage and won't probably have it for a few weeks.

Unit tests won't completely stop bugs, unless test are written for the 
bugs after the fact (which is always a good idea, to make sure that the 
bug never shows up again). What I've been trying to do is test the 
expected behavior (characterization tests), instead of the intended 
(what the original developer thought) or morphed behavior (what happens 
when you give the wrong input; garbage in, does garbage come out?).

Unit Tests won't replace manually testing WordPress features, nor would 
acceptance tests when those are complete. Humans have a better odds of 
finding errors where the tests don't and tests have the advantage of 
being able to run so that past bugs don't show up again and make sure 
humans didn't miss out an intended feature.

Some WordPress code would only be tested if someone runs that portion, 
while others require manually entering data from the site.

The best case would to be to also unit test the JavaScript code that 
isn't part of external libraries.

Jacob Santos

Martin@Cleaver.org wrote:
> Indeed, unless a system gets documentation, to explain and put rigour into
> the model of how it should work, bugs will continue to get through the
> cracks.
>
> Martin.
>
> On 8/27/07, jacobsantos@branson.com <jacobsantos@branson.com> wrote:
>   
>> I like this idea, but I think it has more to do with users submitting
>> patches for bugs. Which I think is what the bug hunts are all about,
>> finding and submitting patches.
>>
>> I also think that reasons should be given when closing as invalid or
>> wontfix. It is good bug handling in my opinion and something that won't
>> annoy those who submit bugs. Some bugs marked as won't fix or invalid
>> mean that the bug is external to the application that can't be fixed
>> easily. However, making it clear what the developers intention was would
>> go a long way.
>>
>> There will never be any release in any application where everything
>> works. However, fixing what bugs we have now would be an awesome idea!
>> Documenting the code should go along with this idea.
>>
>> Jacob Santos
>>
>> Geoffrey Sneddon wrote:
>>     
>>> The number in bugs in WP has grown steadily over several years, yet
>>> the number of unfixed ones increasing quicker still. We need a release
>>> that is stable. We need a release where everything _works_. Can we
>>> have one release which includes _nothing_ but bug fixes. There are 409
>>> open bugs according to trac (and I expect there are others marked as
>>> wontfix/invalid without reason). There are some massively annoying
>>> bugs for users, not least things like being unable to use IRIs in
>>> sanitised content (#4570, target 2.4).
>>>
>>>
>>>
>>> - Geoffrey Sneddon
>>>
>>>
>>> _______________________________________________
>>> wp-hackers mailing list
>>> wp-hackers@lists.automattic.com
>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>>
>>>
>>>
>>>       
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers@lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
>>     
>
>
>
>   

From jacobsantos at branson.com  Mon Aug 27 22:01:18 2007
From: jacobsantos at branson.com (jacobsantos@branson.com)
Date: Mon Aug 27 22:06:10 2007
Subject: [wp-hackers] Fixing Bugs
In-Reply-To: <66169348-EA13-47E5-AB08-470F43238869@tekartist.org>
References: <F384F5BF-C422-4B83-A3CF-287B98F2221E@googlemail.com>	<46D32D6C.9090804@branson.com>	<fe8dba6a0708271330j1d2b5c81j39d508fbada2b8ae@mail.gmail.com>
	<66169348-EA13-47E5-AB08-470F43238869@tekartist.org>
Message-ID: <46D349AE.3080604@branson.com>

Sweet idea!

A lot of the internals of WordPress, the real good stuff, isn't 
documented. Which sucks. It would be cool to have a phpDoc site for 
plugin and internals developers to look at. Besides the sites that try 
to do that manually.

Stephane Daury wrote:
>
> One way we use at work that has helped with the "wontfix/invalid" bugs 
> tracking in the long term is to simply refer to the Trac ticket# using 
> the @see phpdoc keyword around the involved source code, coupled with 
> an explanation in the ticket.
>
> It's an easy way of correlating these issues in our generated docs 
> without adding too much comment content to the source.
>
> If nothing else, it helps the developers to tame duplicate bug entries 
> and addressing.
>
> I'm not going to preach for proper inline phpdocs/natural docs here, 
> but it sure is helping us a lot with rather painlessly documenting our 
> APIs.
>
> Stephane
>
>
> On Aug 27, 2007, at 16:30, Martin@Cleaver.org wrote:
>
>> Indeed, unless a system gets documentation, to explain and put rigour 
>> into
>> the model of how it should work, bugs will continue to get through the
>> cracks.
>>
>> Martin.
>>
>> On 8/27/07, jacobsantos@branson.com <jacobsantos@branson.com> wrote:
>>>
>>> I like this idea, but I think it has more to do with users submitting
>>> patches for bugs. Which I think is what the bug hunts are all about,
>>> finding and submitting patches.
>>>
>>> I also think that reasons should be given when closing as invalid or
>>> wontfix. It is good bug handling in my opinion and something that won't
>>> annoy those who submit bugs. Some bugs marked as won't fix or invalid
>>> mean that the bug is external to the application that can't be fixed
>>> easily. However, making it clear what the developers intention was 
>>> would
>>> go a long way.
>>>
>>> There will never be any release in any application where everything
>>> works. However, fixing what bugs we have now would be an awesome idea!
>>> Documenting the code should go along with this idea.
>>>
>>> Jacob Santos
>>>
>>> Geoffrey Sneddon wrote:
>>>> The number in bugs in WP has grown steadily over several years, yet
>>>> the number of unfixed ones increasing quicker still. We need a release
>>>> that is stable. We need a release where everything _works_. Can we
>>>> have one release which includes _nothing_ but bug fixes. There are 409
>>>> open bugs according to trac (and I expect there are others marked as
>>>> wontfix/invalid without reason). There are some massively annoying
>>>> bugs for users, not least things like being unable to use IRIs in
>>>> sanitised content (#4570, target 2.4).
>>>>
>>>>
>>>>
>>>> - Geoffrey Sneddon
>>>>
>>>>
>>>> _______________________________________________
>>>> wp-hackers mailing list
>>>> wp-hackers@lists.automattic.com
>>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>>>
>>>>
>>>>
>>>
>>> _______________________________________________
>>> wp-hackers mailing list
>>> wp-hackers@lists.automattic.com
>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>>
>>
>>
>>
>> -- 
>> Martin@Cleaver.org
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers@lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
>
>

From lloydomattic at gmail.com  Mon Aug 27 22:06:08 2007
From: lloydomattic at gmail.com (Lloyd Budd)
Date: Mon Aug 27 22:06:19 2007
Subject: [wp-hackers] Fixing Bugs
In-Reply-To: <F384F5BF-C422-4B83-A3CF-287B98F2221E@googlemail.com>
References: <F384F5BF-C422-4B83-A3CF-287B98F2221E@googlemail.com>
Message-ID: <70ebb7140708271506n7f9814a7k3e5781b40a5499bd@mail.gmail.com>

On 8/27/07, Geoffrey Sneddon <foolistbar@googlemail.com> wrote:
> The number in bugs in WP has grown steadily over several years, yet
> the number of unfixed ones increasing quicker still. We need a
> release that is stable. We need a release where everything _works_.
> Can we have one release which includes _nothing_ but bug fixes. There
> are 409 open bugs according to trac (and I expect there are others
> marked as wontfix/invalid without reason).

> There are some massively
> annoying bugs for users, not least things like being unable to use
> IRIs in sanitised content (#4570, target 2.4).

As Ryan described each Wednesday until 2.3 there will be bug hunts,
which will be a great opportunity to collaborate on working on the
annoying bugs getting fixed!

#4570 is a good example of a bug that definitely could use some love.
Geoffrey, thanks for bringing this one to everyone's attention! Sounds
like Joseph is going to see if he can wrap his head around it.

What are some other "massively annoying" bugs that might be buried
among the others?

Thank you,
Lloyd
From joseph at randomnetworks.com  Mon Aug 27 22:34:25 2007
From: joseph at randomnetworks.com (Joseph Scott)
Date: Mon Aug 27 22:38:12 2007
Subject: [wp-hackers] Fixing Bugs
In-Reply-To: <F384F5BF-C422-4B83-A3CF-287B98F2221E@googlemail.com>
References: <F384F5BF-C422-4B83-A3CF-287B98F2221E@googlemail.com>
Message-ID: <E71D72B2-98F5-4671-8427-4DAFDF8D3CC2@randomnetworks.com>


On Aug 27, 2007, at 1:04 PM, Geoffrey Sneddon wrote:

> The number in bugs in WP has grown steadily over several years, yet  
> the number of unfixed ones increasing quicker still. We need a  
> release that is stable. We need a release where everything _works_.  
> Can we have one release which includes _nothing_ but bug fixes.  
> There are 409 open bugs according to trac (and I expect there are  
> others marked as wontfix/invalid without reason). There are some  
> massively annoying bugs for users, not least things like being  
> unable to use IRIs in sanitised content (#4570, target 2.4).


I've poked around the IRI issue mentioned in #4570.  The function  
that is eating this is clean_url() in wp-includes/formatting.php.  It  
doesn't support characters outside of US-ASCII.  I didn't see and  
obvious/easy/well tested solution to this issue and given the  
potential risks (we have to filter URLs) this will have stay a 2.4  
target at this point I think.

As Lloyd has mentioned with 2.3 a month a way we are pretty much in  
full bug squashing mode so if you have some point to a ticket (or  
submit) with enough information to duplicate the problem and ideally  
with a little bit of research as to why and patch would be really  
great :-)


--
Joseph Scott
http://joseph.randomnetworks.com/


From chris.lott at gmail.com  Mon Aug 27 23:15:50 2007
From: chris.lott at gmail.com (Chris Lott)
Date: Mon Aug 27 23:15:55 2007
Subject: [wp-hackers] Re: Sharing Users/authentication
In-Reply-To: <a3b809ae0708251338m51096ccdla8edae70f3f53850@mail.gmail.com>
References: <a3b809ae0708251338m51096ccdla8edae70f3f53850@mail.gmail.com>
Message-ID: <9b1b9dab0708271615k680a23baic5d75b260172017a@mail.gmail.com>

On 8/25/07, Curt Woodard <clwoodard@gmail.com> wrote:
> Another Update:
>
> OK, some more news. I have fixed the _usermeta issue when someone from
> SMF goes to WP for the first time.
> All I do is set up 3 basic things: *_capabilities, *_user_level, and nickname.
>
>
[...]

> Following this will be user insert/update from the WP side so that
> registration by user and admin both work. For now, it's time for me to
> go to bed (12 hour shifts kill me).

Have you worked on this more? I am still trying to get two blogs to
share the same user data :)

c
From wordpress at tekartist.org  Mon Aug 27 23:38:29 2007
From: wordpress at tekartist.org (Stephane Daury)
Date: Mon Aug 27 23:38:36 2007
Subject: [wp-hackers] Fixing Bugs
In-Reply-To: <46D349AE.3080604@branson.com>
References: <F384F5BF-C422-4B83-A3CF-287B98F2221E@googlemail.com>	<46D32D6C.9090804@branson.com>	<fe8dba6a0708271330j1d2b5c81j39d508fbada2b8ae@mail.gmail.com>
	<66169348-EA13-47E5-AB08-470F43238869@tekartist.org>
	<46D349AE.3080604@branson.com>
Message-ID: <CAB9382E-22B2-444C-BC4B-5A0B4CF3C28F@tekartist.org>


It's panning out well for my plugins (IMHO).

EG output: http://labs.tekartist.org/wordpress/wpdirauth/phpdocs/

We use phpdocs on a 260,000+ LOC codebase at work and it's great for  
the decentralized dev teams as well as with tools such as eclipse/PDT.

Stephane



On Aug 27, 2007, at 18:01, jacobsantos@branson.com wrote:

> Sweet idea!
>
> A lot of the internals of WordPress, the real good stuff, isn't  
> documented. Which sucks. It would be cool to have a phpDoc site for  
> plugin and internals developers to look at. Besides the sites that  
> try to do that manually.
>
> Stephane Daury wrote:
>>
>> One way we use at work that has helped with the "wontfix/invalid"  
>> bugs tracking in the long term is to simply refer to the Trac  
>> ticket# using the @see phpdoc keyword around the involved source  
>> code, coupled with an explanation in the ticket.
>>
>> It's an easy way of correlating these issues in our generated docs  
>> without adding too much comment content to the source.
>>
>> If nothing else, it helps the developers to tame duplicate bug  
>> entries and addressing.
>>
>> I'm not going to preach for proper inline phpdocs/natural docs  
>> here, but it sure is helping us a lot with rather painlessly  
>> documenting our APIs.
>>
>> Stephane
>>
>>
>> On Aug 27, 2007, at 16:30, Martin@Cleaver.org wrote:
>>
>>> Indeed, unless a system gets documentation, to explain and put  
>>> rigour into
>>> the model of how it should work, bugs will continue to get  
>>> through the
>>> cracks.
>>>
>>> Martin.
>>>
>>> On 8/27/07, jacobsantos@branson.com <jacobsantos@branson.com> wrote:
>>>>
>>>> I like this idea, but I think it has more to do with users  
>>>> submitting
>>>> patches for bugs. Which I think is what the bug hunts are all  
>>>> about,
>>>> finding and submitting patches.
>>>>
>>>> I also think that reasons should be given when closing as  
>>>> invalid or
>>>> wontfix. It is good bug handling in my opinion and something  
>>>> that won't
>>>> annoy those who submit bugs. Some bugs marked as won't fix or  
>>>> invalid
>>>> mean that the bug is external to the application that can't be  
>>>> fixed
>>>> easily. However, making it clear what the developers intention  
>>>> was would
>>>> go a long way.
>>>>
>>>> There will never be any release in any application where everything
>>>> works. However, fixing what bugs we have now would be an awesome  
>>>> idea!
>>>> Documenting the code should go along with this idea.
>>>>
>>>> Jacob Santos
>>>>
>>>> Geoffrey Sneddon wrote:
>>>>> The number in bugs in WP has grown steadily over several years,  
>>>>> yet
>>>>> the number of unfixed ones increasing quicker still. We need a  
>>>>> release
>>>>> that is stable. We need a release where everything _works_. Can we
>>>>> have one release which includes _nothing_ but bug fixes. There  
>>>>> are 409
>>>>> open bugs according to trac (and I expect there are others  
>>>>> marked as
>>>>> wontfix/invalid without reason). There are some massively annoying
>>>>> bugs for users, not least things like being unable to use IRIs in
>>>>> sanitised content (#4570, target 2.4).
>>>>>
>>>>>
>>>>>
>>>>> - Geoffrey Sneddon
>>>>>
>>>>>
>>>>> _______________________________________________
>>>>> wp-hackers mailing list
>>>>> wp-hackers@lists.automattic.com
>>>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>>>>
>>>>>
>>>>>
>>>>
>>>> _______________________________________________
>>>> wp-hackers mailing list
>>>> wp-hackers@lists.automattic.com
>>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>>>
>>>
>>>
>>>
>>> -- 
>>> Martin@Cleaver.org
>>> _______________________________________________
>>> wp-hackers mailing list
>>> wp-hackers@lists.automattic.com
>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers@lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
>>
>>
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

From wordpress at dd32.id.au  Mon Aug 27 23:50:05 2007
From: wordpress at dd32.id.au (DD32)
Date: Mon Aug 27 23:48:55 2007
Subject: [wp-hackers] Re: [wp-svn] [5951] trunk: Bring in atomlib 0.4 and
	update wp-app to use it.
In-Reply-To: <20070827195258.79CA1710E55@basie.automattic.com>
References: <20070827195258.79CA1710E55@basie.automattic.com>
Message-ID: <op.txqshrbrk6w4mc@dd32.no-ip.com>

Might not be a bug, But are you sure you wanted '.*/wp-app.php' ?
keeping in mind that str_replace only replaces literals, it doesnt support  
regular expresions.

On Tue, 28 Aug 2007 05:52:58 +1000, <m@wordpress.org> wrote:
> Modified: trunk/wp-app.php (5950 => 5951)
>  } else {
> -	$_SERVER['PATH_INFO'] = str_replace( '/wp-app.php', '',  
> $_SERVER['REQUEST_URI'] );
> +	$_SERVER['PATH_INFO'] = str_replace( '.*/wp-app.php', '',  
> $_SERVER['REQUEST_URI'] );
>  }



-- 
Using Opera's revolutionary e-mail client: http://www.opera.com/mail/
From clwoodard at gmail.com  Tue Aug 28 00:05:50 2007
From: clwoodard at gmail.com (Curt Woodard)
Date: Tue Aug 28 00:05:57 2007
Subject: [wp-hackers] Re: Sharing Users/authentication
Message-ID: <a3b809ae0708271705j13bc3721q1bc9045325bbe640@mail.gmail.com>

> > Another Update:
> >
> > OK, some more news. I have fixed the _usermeta issue when someone from
> > SMF goes to WP for the first time.
> > All I do is set up 3 basic things: *_capabilities, *_user_level, and nickname.
> >
> >
> [...]
>
> > Following this will be user insert/update from the WP side so that
> > registration by user and admin both work. For now, it's time for me to
> > go to bed (12 hour shifts kill me).
>
> Have you worked on this more? I am still trying to get two blogs to
> share the same user data :)
>
> c

Chris,
Actually, I posted this a bit earlier... Yep, you can now update user
info and register users (at least from the admin panel...
self-registration is still not fully implemented).

Are you attempting to combine 2 WP blogs? If so, that's a BUTTLOAD
easier than doing SMF and WP... Sharing the user base between 2 WP
blogs is just a matter of assigning one install to be the 'master'
install and the other to be a 'slave'. I can work on a plugin for you
if you'd like, since this is somewhat similar to what I'm doing, but
would require much less hacking through the code finding where all the
passwords are MD5()'d...

-Curt
From jeremy.visser at gmail.com  Tue Aug 28 00:39:23 2007
From: jeremy.visser at gmail.com (Jeremy Visser)
Date: Tue Aug 28 00:39:33 2007
Subject: [wp-hackers] Fixing Bugs
In-Reply-To: <F384F5BF-C422-4B83-A3CF-287B98F2221E@googlemail.com>
References: <F384F5BF-C422-4B83-A3CF-287B98F2221E@googlemail.com>
Message-ID: <46D36EBB.90804@gmail.com>

Geoffrey Sneddon wrote:
> The number in bugs in WP has grown steadily over several years, yet the
> number of unfixed ones increasing quicker still. We need a release that
> is stable. We need a release where everything _works_. Can we have one
> release which includes _nothing_ but bug fixes. There are 409 open bugs
> according to trac (and I expect there are others marked as
> wontfix/invalid without reason). There are some massively annoying bugs
> for users, not least things like being unable to use IRIs in sanitised
> content (#4570, target 2.4).

Shouldn't you maybe be looking at using the 2.0 branch?

-- 
Jeremy Visser

()  ascii ribbon campaign - against html e-mail
/\  www.asciiribbon.org   - against proprietary attachments
From clwoodard at gmail.com  Tue Aug 28 01:03:59 2007
From: clwoodard at gmail.com (Curt Woodard)
Date: Tue Aug 28 02:05:13 2007
Subject: [wp-hackers] Re: Sharing Users/authentication
References: <a3b809ae0708251338m51096ccdla8edae70f3f53850@mail.gmail.com>
	<9b1b9dab0708271615k680a23baic5d75b260172017a@mail.gmail.com>
Message-ID: <loom.20070828T030250-318@post.gmane.org>

Chris Lott <chris.lott <at> gmail.com> writes:

> Have you worked on this more? I am still trying to get two blogs to
> share the same user data :)
> 
> c
> 

Chris,
Actually, I posted this a bit earlier... Yep, you can now update user
info and register users (at least from the admin panel...
self-registration is still not fully implemented).

Are you attempting to combine 2 WP blogs? If so, that's a BUTTLOAD
easier than doing SMF and WP... Sharing the user base between 2 WP
blogs is just a matter of assigning one install to be the 'master'
install and the other to be a 'slave'. I can work on a plugin for you
if you'd like, since this is somewhat similar to what I'm doing, but
would require much less hacking through the code finding where all the
passwords are MD5()'d...

-Curt

From viper at viper007bond.com  Tue Aug 28 04:35:53 2007
From: viper at viper007bond.com (Viper007Bond)
Date: Tue Aug 28 04:36:01 2007
Subject: [wp-hackers] Why in the heck won't this work?
In-Reply-To: <8f93a7390708232310m3b6b2d45h5fb577d0b4d1744a@mail.gmail.com>
References: <8f93a7390708230406o20bf390t5b1733f8c6f914dc@mail.gmail.com>
	<op.txifeaofk6w4mc@dd32.no-ip.com>
	<8f93a7390708230515m5ddecb10laa7dda026e44537d@mail.gmail.com>
	<46CD91DC.3000203@branson.com>
	<8f93a7390708232310m3b6b2d45h5fb577d0b4d1744a@mail.gmail.com>
Message-ID: <8f93a7390708272135j831069tf967db7e990a90d5@mail.gmail.com>

I found the problem, but I'm not sure as to the solution.

When in_category() uses get_object_term_cache() to retrieve the request from
the cache, it gets an associative array in the cases I've tried. If the
cache is empty (which apparently it is on my admin page),
wp_get_object_terms() is used which returns a numerical array.

Am I missing something or is this a bug?

-- 
Viper007Bond | http://www.viper007bond.com/
From clwoodard at gmail.com  Tue Aug 28 05:23:14 2007
From: clwoodard at gmail.com (Curt Woodard)
Date: Tue Aug 28 05:23:41 2007
Subject: [wp-hackers] Re: Sharing Users/authentication
References: <a3b809ae0708251338m51096ccdla8edae70f3f53850@mail.gmail.com>
	<9b1b9dab0708271615k680a23baic5d75b260172017a@mail.gmail.com>
Message-ID: <loom.20070828T071442-52@post.gmane.org>

> Have you worked on this more? I am still trying to get two blogs to
> share the same user data :)
> 
> c
> 

OK, here's a question: How intertwined do you want this to be? Also, are you
installing the WordPress servers from scratch or are they already installed?

If you already have users, are they the same users? If not, how do you want to
handle user_id collisions?

And are you using two copies of WordPress or two different blogs?

I have successfully created a simple plugin that allows for multiple WordPress
installations to share one user base. There is an issue, however, since the keys
use the $wpdb->prefix for the user_level and capabilities keys. I had to put in
a way to copy the slave copy's versions over to the master copy's usermeta. Once
that's done, I set the slave copy's user and usermeta tables to be those of the
master copy's.

It works well, though you might want to make sure your slave copy has a password
you can remember. As far as I'm aware at this point, everything should work
fine...

Let me know the answer to these questions, also, if there are other features
you're looking for...

With this plugin, you should be able to easily create several slave blogs and
one master... Though that requires several copies of WP to be installed ;) Not
really a space-saver, but one way to do it... heh

From mylists at polite.se  Tue Aug 28 13:30:56 2007
From: mylists at polite.se (Alex Polite)
Date: Tue Aug 28 13:31:00 2007
Subject: [wp-hackers] Getting up to speed with WP-hacking.
Message-ID: <65955b6b0708280630p44b18fe8y9ddad1fe98a173f5@mail.gmail.com>

Hi.

I'm not sure that this is this right mailing list for this question,
but here goes any way. I've been running Wordpress for personal
purposes for three years or so. At one point I jumped in and hacked
the hell out of my installation, but then all of those hacks broke
when I upgraded from 1.x to 2.x

Now I'm maintaining a growing list of Wordpress-installations and I'm
putting a bit of an effort into making sure that they all stay
updated, backed up etc, and that any customizations I do to them don't
break on the next Worpress upgrade.

For starters I've written a rake[1] script that will do all the
installing, upgrading etc of a wp-installation.

Now I've come to the point where I need to understand more about the
inner workings of Wordpress. I find the documentation[2] patchy and
inconsistent. Some of it obviously deals with older versions and with
some pages it's hard to tell whether they are current or not.

So what's my best strategy for getting up to speed with Wordpress-hacking?


[1] http://rake.rubyforge.org/
[2] http://codex.wordpress.org
-- 
http://polite.se
From wordpress at uberdose.com  Tue Aug 28 13:59:09 2007
From: wordpress at uberdose.com (uberdose)
Date: Tue Aug 28 13:59:14 2007
Subject: [wp-hackers] Getting up to speed with WP-hacking.
In-Reply-To: <65955b6b0708280630p44b18fe8y9ddad1fe98a173f5@mail.gmail.com>
References: <65955b6b0708280630p44b18fe8y9ddad1fe98a173f5@mail.gmail.com>
Message-ID: <4ba640480708280659x5b1f980cpfee43866bf55c3cb@mail.gmail.com>

On 8/28/07, Alex Polite <mylists@polite.se> wrote:
> So what's my best strategy for getting up to speed with Wordpress-hacking?

Reading the source :)

Seriously, this is the most up-to-date place for all your
documentation needs. While I found the codex very useful for
looking-up filters and hooks, most of the time I grep through the code
to find info, and insert die() or echo() statements to find out about
the order of events.

uberdose
From leonid at mamchenkov.net  Tue Aug 28 14:23:23 2007
From: leonid at mamchenkov.net (Leonid Mamchenkov)
Date: Tue Aug 28 14:23:31 2007
Subject: [wp-hackers] Getting up to speed with WP-hacking.
In-Reply-To: <65955b6b0708280630p44b18fe8y9ddad1fe98a173f5@mail.gmail.com>
References: <65955b6b0708280630p44b18fe8y9ddad1fe98a173f5@mail.gmail.com>
Message-ID: <b76f24970708280723q8d92112q2fac090031b7f3ce@mail.gmail.com>

Hi,

On 8/28/07, Alex Polite <mylists@polite.se> wrote:
> So what's my best strategy for getting up to speed with Wordpress-hacking?
>
>
> [1] http://rake.rubyforge.org/
> [2] http://codex.wordpress.org

[shameless self-promotion]
http://wpbits.wordpress.com
[/shamelss self-promotion]

:)

-- 
Leonid Mamchenkov
From mylists at polite.se  Tue Aug 28 14:43:53 2007
From: mylists at polite.se (Alex Polite)
Date: Tue Aug 28 14:43:57 2007
Subject: [wp-hackers] Getting up to speed with WP-hacking.
In-Reply-To: <4ba640480708280659x5b1f980cpfee43866bf55c3cb@mail.gmail.com>
References: <65955b6b0708280630p44b18fe8y9ddad1fe98a173f5@mail.gmail.com>
	<4ba640480708280659x5b1f980cpfee43866bf55c3cb@mail.gmail.com>
Message-ID: <65955b6b0708280743x769450bfw28a6c7646fa59988@mail.gmail.com>

2007/8/28, uberdose <wordpress@uberdose.com>:
> On 8/28/07, Alex Polite <mylists@polite.se> wrote:
> > So what's my best strategy for getting up to speed with Wordpress-hacking?
>
> Reading the source :)
>

I kind of feared that :)


alex

-- 
http://polite.se
From mylists at polite.se  Tue Aug 28 14:44:35 2007
From: mylists at polite.se (Alex Polite)
Date: Tue Aug 28 14:44:42 2007
Subject: [wp-hackers] Getting up to speed with WP-hacking.
In-Reply-To: <b76f24970708280723q8d92112q2fac090031b7f3ce@mail.gmail.com>
References: <65955b6b0708280630p44b18fe8y9ddad1fe98a173f5@mail.gmail.com>
	<b76f24970708280723q8d92112q2fac090031b7f3ce@mail.gmail.com>
Message-ID: <65955b6b0708280744t5c16919co92d082a1c9607da1@mail.gmail.com>

2007/8/28, Leonid Mamchenkov <leonid@mamchenkov.net>:

>
> [shameless self-promotion]
> http://wpbits.wordpress.com
> [/shamelss self-promotion]
>

Thanks. I'll work my way through it.

alex


-- 
http://polite.se
From jacobsantos at branson.com  Tue Aug 28 14:51:40 2007
From: jacobsantos at branson.com (jacobsantos@branson.com)
Date: Tue Aug 28 14:56:17 2007
Subject: [wp-hackers] Getting up to speed with WP-hacking.
In-Reply-To: <65955b6b0708280743x769450bfw28a6c7646fa59988@mail.gmail.com>
References: <65955b6b0708280630p44b18fe8y9ddad1fe98a173f5@mail.gmail.com>	<4ba640480708280659x5b1f980cpfee43866bf55c3cb@mail.gmail.com>
	<65955b6b0708280743x769450bfw28a6c7646fa59988@mail.gmail.com>
Message-ID: <46D4367C.2080603@branson.com>

Reading the source isn't that bad. You do have to use the function 
reference to find where each function is located at.

Jacob Santos

Alex Polite wrote:
> 2007/8/28, uberdose <wordpress@uberdose.com>:
>   
>> On 8/28/07, Alex Polite <mylists@polite.se> wrote:
>>     
>>> So what's my best strategy for getting up to speed with Wordpress-hacking?
>>>       
>> Reading the source :)
>>
>>     
>
> I kind of feared that :)
>
>
> alex
>
>   

From foolistbar at googlemail.com  Tue Aug 28 15:01:37 2007
From: foolistbar at googlemail.com (Geoffrey Sneddon)
Date: Tue Aug 28 15:01:52 2007
Subject: [wp-hackers] Fixing Bugs
In-Reply-To: <46D36EBB.90804@gmail.com>
References: <F384F5BF-C422-4B83-A3CF-287B98F2221E@googlemail.com>
	<46D36EBB.90804@gmail.com>
Message-ID: <3913EDC2-962A-45B6-85D6-6F4B2D117FBA@googlemail.com>


On 28 Aug 2007, at 01:39, Jeremy Visser wrote:

> Geoffrey Sneddon wrote:
>> The number in bugs in WP has grown steadily over several years,  
>> yet the
>> number of unfixed ones increasing quicker still. We need a release  
>> that
>> is stable. We need a release where everything _works_. Can we have  
>> one
>> release which includes _nothing_ but bug fixes. There are 409 open  
>> bugs
>> according to trac (and I expect there are others marked as
>> wontfix/invalid without reason). There are some massively annoying  
>> bugs
>> for users, not least things like being unable to use IRIs in  
>> sanitised
>> content (#4570, target 2.4).
>
> Shouldn't you maybe be looking at using the 2.0 branch?

I am using the 2.0 branch ? to me it still seems buggier than < 2  
releases were. 2.0 has some bugs that make it almost completely  
unusable for me, which despite Mark Jaquith telling me they'd be  
fixed, Ryan Boren contradicted him if not a week later. Not only are  
bugs being introduced at a quicker and quicker rate, but bugs are  
being regressed more and more often. A large majority of WP could be  
tested automatically, and badly needs to be. This has been suggested  
several times before, but nothing, to my knowledge, has ever really  
happened about it.


- Geoffrey Sneddon


From awgandrews at gmail.com  Tue Aug 28 15:01:44 2007
From: awgandrews at gmail.com (Alex Andrews)
Date: Tue Aug 28 15:01:53 2007
Subject: [wp-hackers] 2 Questions: $_REQUEST equivalent and using GET in
	mod_rewrite
Message-ID: <e9f3ce460708280801i36a7ab09m4debd4a03fbb9980@mail.gmail.com>

Hey all

I am developing a plugin for Wordpress for a Creative Commons etc
based record company (plugin will be released under GPL when done).
This is my first Wordpress plugin, so I need a bit of a helping hand.
Without much further ado, two questions.

1.
I have developed the plugin so far as an external PHP application,
albeit one that require(s) all the appropriate Wordpress includes. Now
I wish to intergrate it into Wordpress. At the moment, I use $_REQUEST
to parse user input and return things. Looking at the Codex, it seems
that Wordpress has a more advanced way of doing this that santises the
data. Can someone walk me through it?

2.
More importantly, I want to use mod_rewrite to map onto this plugin. I
know Wordpress can do this, but I am not sure how. Here is the schema
I imagine, artists.php being replaced by the correct wordpress plugin
hookup (some suggestion here might be helpful two)

http://domain.com/artists/ -> launches the plugin - akin to
http://domain.com/artists.php
http://domain.com/artists/artistname/ ->
http://domain.com/artists.php?artist_slug=artistname
http://domain.com/artists/artistname/bio ->
http://domain.com/artists.php?artist_slug=artistname&mode=bio

These are the basic types. How do I go about doing this?

Thanks very much indeed.

Regards

Alex
From jacobsantos at branson.com  Tue Aug 28 16:04:10 2007
From: jacobsantos at branson.com (jacobsantos@branson.com)
Date: Tue Aug 28 16:08:45 2007
Subject: [wp-hackers] Fixing Bugs
In-Reply-To: <3913EDC2-962A-45B6-85D6-6F4B2D117FBA@googlemail.com>
References: <F384F5BF-C422-4B83-A3CF-287B98F2221E@googlemail.com>	<46D36EBB.90804@gmail.com>
	<3913EDC2-962A-45B6-85D6-6F4B2D117FBA@googlemail.com>
Message-ID: <46D4477A.4010107@branson.com>

I would advise helping with the current documentation and unit 
testing/characterization testing/functional testing. I could use help 
and I'm sure the others doing it would like help also. It is happening, 
but it would go a lot quicker if more people started writing tests for 
the library.

Jacob Santos

Geoffrey Sneddon wrote:
>
> On 28 Aug 2007, at 01:39, Jeremy Visser wrote:
>
>> Geoffrey Sneddon wrote:
>>> The number in bugs in WP has grown steadily over several years, yet the
>>> number of unfixed ones increasing quicker still. We need a release that
>>> is stable. We need a release where everything _works_. Can we have one
>>> release which includes _nothing_ but bug fixes. There are 409 open bugs
>>> according to trac (and I expect there are others marked as
>>> wontfix/invalid without reason). There are some massively annoying bugs
>>> for users, not least things like being unable to use IRIs in sanitised
>>> content (#4570, target 2.4).
>>
>> Shouldn't you maybe be looking at using the 2.0 branch?
>
> I am using the 2.0 branch ? to me it still seems buggier than < 2 
> releases were. 2.0 has some bugs that make it almost completely 
> unusable for me, which despite Mark Jaquith telling me they'd be 
> fixed, Ryan Boren contradicted him if not a week later. Not only are 
> bugs being introduced at a quicker and quicker rate, but bugs are 
> being regressed more and more often. A large majority of WP could be 
> tested automatically, and badly needs to be. This has been suggested 
> several times before, but nothing, to my knowledge, has ever really 
> happened about it.
>
>
> - Geoffrey Sneddon
>
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
>
>

From ag.ml2007 at zirona.com  Tue Aug 28 16:43:14 2007
From: ag.ml2007 at zirona.com (Alex =?ISO-8859-1?Q?G=FCnsche?=)
Date: Tue Aug 28 16:43:21 2007
Subject: [wp-hackers] 2 Questions: $_REQUEST equivalent and using GET
	in mod_rewrite
In-Reply-To: <e9f3ce460708280801i36a7ab09m4debd4a03fbb9980@mail.gmail.com>
References: <e9f3ce460708280801i36a7ab09m4debd4a03fbb9980@mail.gmail.com>
Message-ID: <1188319394.5537.11.camel@localhost>

On Tue, 2007-08-28 at 16:01 +0100, Alex Andrews wrote:
> I have developed the plugin so far as an external PHP application,
> albeit one that require(s) all the appropriate Wordpress includes. Now
> I wish to intergrate it into Wordpress. At the moment, I use $_REQUEST
> to parse user input and return things. Looking at the Codex, it seems
> that Wordpress has a more advanced way of doing this that santises the
> data. Can someone walk me through it?

Absolutely. When you create a plugin, you will have to use the API hooks
and filters of WordPress. You also don't need to require() anything.
Very good documentation on using the API as well as lists of hooks and
filters are found at http://codex.wordpress.org/Plugin_API and the pages
linked there.

> More importantly, I want to use mod_rewrite to map onto this plugin. I
> know Wordpress can do this, but I am not sure how. Here is the schema
> I imagine, artists.php being replaced by the correct wordpress plugin
> hookup (some suggestion here might be helpful two)

One of my plugins uses the following:

function myRewrite($rules)
	{ $rules['foo'] = 'index.php?pagename=foo'; return $rules; }

add_filter('rewrite_rules_array', 'myRewrite');

When the plugin is activated, you must visit
wp-admin/options-permalinks.php (once is sufficient) to add your slug to
WP's ruleset.

Then, every request that calls /foo/* in this example, will be handled
by the plugin. However, this solution also requires to have a page with
the slug "foo". Maybe there's a better solution, but this one works for
me.

HTH

Regards,
Alex


-- 
Alex G?nsche, Zirona OpenSource-Consulting
Blogs: http://www.zirona.com/ | http://www.regularimpressions.net
PubKey for this address: http://www.zirona.com/misc/ag.ml2007.asc

From clwoodard at gmail.com  Tue Aug 28 16:52:44 2007
From: clwoodard at gmail.com (Curt Woodard)
Date: Tue Aug 28 16:52:49 2007
Subject: [wp-hackers] Re: Re: Sharing Users/authentication
Message-ID: <a3b809ae0708280952u43bce963i4f1065b7c15e14ea@mail.gmail.com>

OK, well, getting two copies of WordPress to work together was a
little tricky but I have successfully set up two test installations of
WordPress 2.2.2 and wrote a plugin that does this:

* 'Slaves' one copy of WordPress to a 'Master' copy.
    * Tie the Slave's $wpdb->users and $wpdb->usermeta tables to the Master's
    * Match the Slave's USER_COOKIE and PASS_COOKIE to the Master's

* The administrator need only modify 3 variables in the plugin:
$this_role, $my_master_db,
  and $my_master_prefix. $this_role tells WordPress if the copy is a
slave or a master and the
  other two are pretty self-explanatory.

* Promotes concurrent login between the two installations (due to the
cookie redefine).

* The plugin is meant to be installed and activated on both the slave
and the master copies
  of WordPress to get the concurrent login to work.

* With this plugin, you can slave any number of WordPress installs to
one user and
  usermeta table.

I've tested this and it works pretty well :)

Now, there are a few things to note:

* In wp-includes/user.php, there is a function that isn't referenced
anywhere: get_profile.
  This function looks at USER_COOKIE but may be deprecated.

* To make things work well, the usermeta table had to be shared as
well so that the admin
  of the Slave copy was also the admin of the Master copy. This is
also necessary due to
  how WP uses the usermeta table when updating profiles. Better to
have one copy of the
  user's settings than to have multiple copies.

* I might have to put in code that overrides the COOKIEPATH and COOKIE_DOMAIN as
  well. So that you can set up subdomain-free cookies.

You can download the plugin from http://www.lyonesse.info/WPP/ (a
simple, crude, yet effective page).

-Curt
From jacobsantos at branson.com  Tue Aug 28 17:09:02 2007
From: jacobsantos at branson.com (jacobsantos@branson.com)
Date: Tue Aug 28 17:13:35 2007
Subject: [wp-hackers] 2 Questions: $_REQUEST equivalent and using GET
	in	mod_rewrite
In-Reply-To: <e9f3ce460708280801i36a7ab09m4debd4a03fbb9980@mail.gmail.com>
References: <e9f3ce460708280801i36a7ab09m4debd4a03fbb9980@mail.gmail.com>
Message-ID: <46D456AE.9090402@branson.com>

1. Using $_REQUEST is like asking hackers to pwn your site. "Yes, I want 
you to hack me" Don't use it. The reason for WordPress using $_POST for 
form data and $_GET for url data is for the same reason register globals 
is terrible security risk. $_REQUEST is similar to using $_REQUEST and 
you don't know if it is coming from the Server (HTTP), form, or url.

You must know since you created the plugin, so find out and use the 
correct super global. If you kept this and released it GPL, the first 
thing I will do is convert it to the right super global.

2. Somewhat of a mystery. Along with wp-cron, this is complexity driven 
by lack of proper documentation.

Jacob Santos

Alex Andrews wrote:
> Hey all
>
> I am developing a plugin for Wordpress for a Creative Commons etc
> based record company (plugin will be released under GPL when done).
> This is my first Wordpress plugin, so I need a bit of a helping hand.
> Without much further ado, two questions.
>
> 1.
> I have developed the plugin so far as an external PHP application,
> albeit one that require(s) all the appropriate Wordpress includes. Now
> I wish to intergrate it into Wordpress. At the moment, I use $_REQUEST
> to parse user input and return things. Looking at the Codex, it seems
> that Wordpress has a more advanced way of doing this that santises the
> data. Can someone walk me through it?
>
> 2.
> More importantly, I want to use mod_rewrite to map onto this plugin. I
> know Wordpress can do this, but I am not sure how. Here is the schema
> I imagine, artists.php being replaced by the correct wordpress plugin
> hookup (some suggestion here might be helpful two)
>
> http://domain.com/artists/ -> launches the plugin - akin to
> http://domain.com/artists.php
> http://domain.com/artists/artistname/ ->
> http://domain.com/artists.php?artist_slug=artistname
> http://domain.com/artists/artistname/bio ->
> http://domain.com/artists.php?artist_slug=artistname&mode=bio
>
> These are the basic types. How do I go about doing this?
>
> Thanks very much indeed.
>
> Regards
>
> Alex
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
>
>
>   

From r at robm.me.uk  Tue Aug 28 17:24:31 2007
From: r at robm.me.uk (Rob Miller)
Date: Tue Aug 28 17:25:10 2007
Subject: [wp-hackers] 2 Questions: $_REQUEST equivalent and using GET
	in	mod_rewrite
In-Reply-To: <46D456AE.9090402@branson.com>
References: <e9f3ce460708280801i36a7ab09m4debd4a03fbb9980@mail.gmail.com>
	<46D456AE.9090402@branson.com>
Message-ID: <46D45A4F.3080003@robm.me.uk>

jacobsantos@branson.com wrote:
> 1. Using $_REQUEST is like asking hackers to pwn your site. "Yes, I 
> want you to hack me" Don't use it. The reason for WordPress using 
> $_POST for form data and $_GET for url data is for the same reason 
> register globals is terrible security risk. $_REQUEST is similar to 
> using $_REQUEST and you don't know if it is coming from the Server 
> (HTTP), form, or url.
>
> You must know since you created the plugin, so find out and use the 
> correct super global. If you kept this and released it GPL, the first 
> thing I will do is convert it to the right super global.
What on earth? So long as you handle the data appropriately it doesn't 
matter where it comes from. CSRF attacks, for example, are possible with 
both GET and POST; so are SQL injections; so are XSS attacks, etc.

Only using $_GET or only using $_POST will not make your scripts even 
slightly more secure.

-- 
Rob Miller
http://robm.me.uk/

From awgandrews at gmail.com  Tue Aug 28 17:01:28 2007
From: awgandrews at gmail.com (Alex Andrews)
Date: Tue Aug 28 17:25:31 2007
Subject: [wp-hackers] 2 Questions: $_REQUEST equivalent and using GET in
	mod_rewrite
In-Reply-To: <1188319394.5537.11.camel@localhost>
References: <e9f3ce460708280801i36a7ab09m4debd4a03fbb9980@mail.gmail.com>
	<1188319394.5537.11.camel@localhost>
Message-ID: <e9f3ce460708281001l1191b129r825cec1b8d0a0f7f@mail.gmail.com>

> > More importantly, I want to use mod_rewrite to map onto this plugin. I
> > know Wordpress can do this, but I am not sure how. Here is the schema
> > I imagine, artists.php being replaced by the correct wordpress plugin
> > hookup (some suggestion here might be helpful two)
>
> One of my plugins uses the following:
>
> function myRewrite($rules)
>         { $rules['foo'] = 'index.php?pagename=foo'; return $rules; }
>
> add_filter('rewrite_rules_array', 'myRewrite');
>
> When the plugin is activated, you must visit
> wp-admin/options-permalinks.php (once is sufficient) to add your slug to
> WP's ruleset.
>
> Then, every request that calls /foo/* in this example, will be handled
> by the plugin. However, this solution also requires to have a page with
> the slug "foo". Maybe there's a better solution, but this one works for
> me.

It appears that in the Codex there is a description. It seems the
latter example might suit my needs if adapted, but the problem is
still input. How can I get /artists/x/ to translate to
artists.php?id=x or whatever.

http://codex.wordpress.org/Function_Reference/WP_Rewrite#Example

Regards

Alex
From jacobsantos at branson.com  Tue Aug 28 17:30:27 2007
From: jacobsantos at branson.com (jacobsantos@branson.com)
Date: Tue Aug 28 17:35:13 2007
Subject: [wp-hackers] 2 Questions: $_REQUEST equivalent and using GET
	in	mod_rewrite
In-Reply-To: <46D45A4F.3080003@robm.me.uk>
References: <e9f3ce460708280801i36a7ab09m4debd4a03fbb9980@mail.gmail.com>	<46D456AE.9090402@branson.com>
	<46D45A4F.3080003@robm.me.uk>
Message-ID: <46D45BB3.10902@branson.com>

Rob Miller wrote:
> jacobsantos@branson.com wrote:
>> 1. Using $_REQUEST is like asking hackers to pwn your site. "Yes, I 
>> want you to hack me" Don't use it. The reason for WordPress using 
>> $_POST for form data and $_GET for url data is for the same reason 
>> register globals is terrible security risk. $_REQUEST is similar to 
>> using $_REQUEST and you don't know if it is coming from the Server 
>> (HTTP), form, or url.
>>
>> You must know since you created the plugin, so find out and use the 
>> correct super global. If you kept this and released it GPL, the first 
>> thing I will do is convert it to the right super global.
> What on earth? So long as you handle the data appropriately it doesn't 
> matter where it comes from. CSRF attacks, for example, are possible 
> with both GET and POST; so are SQL injections; so are XSS attacks, etc.
>
> Only using $_GET or only using $_POST will not make your scripts even 
> slightly more secure.
>
Yes, you still need to sanitize or you'll still be hackable. However, 
with $_GET and $_POST, you at least know where the information is coming 
from, which is safer than relying on $_REQUEST is coming from a form 
like you expect. Besides that, I would say it doesn't inform upon the 
intention of the developer of where he is seeking the input. Finally, it 
is bad coding practice because of the above.

Jacob Santos
From wp-hackers at striderweb.com  Tue Aug 28 17:06:49 2007
From: wp-hackers at striderweb.com (Stephen Rider)
Date: Tue Aug 28 17:42:09 2007
Subject: [wp-hackers] Re: Re: Sharing Users/authentication
In-Reply-To: <a3b809ae0708280952u43bce963i4f1065b7c15e14ea@mail.gmail.com>
References: <a3b809ae0708280952u43bce963i4f1065b7c15e14ea@mail.gmail.com>
Message-ID: <6CC100FB-3E6C-4F01-BACC-E3EA2ADFF73B@striderweb.com>

This is very cool.  I've been tinkering with this kind of thing  
myself, and ran up against the table-prefix problem.  A couple  
thoughts...

On Aug 28, 2007, at 11:52 AM, Curt Woodard wrote:

> * The administrator need only modify 3 variables in the plugin:
> $this_role, $my_master_db,
>   and $my_master_prefix. $this_role tells WordPress if the copy is  
> a slave or a master and the other two are pretty self-explanatory.

It seems you could automate this with a simple logic test.  If the  
table prefix of the table used is the same as the current install's  
prefix, then it is the master.  Otherwise it is a slave.

> You can download the plugin from http://www.lyonesse.info/WPP/ (a
> simple, crude, yet effective page).

I'm definitely testing this out.  I'll let you know if I come across  
any issues or ideas. :) Thanks!

Would you object if I took some of this and rolled it into a separate  
system I'm working on?
(This thing: <http://striderweb.com/nerdaphernalia/2006/10/hello- 
again-world/>)

Regards,
Stephen
From awgandrews at gmail.com  Tue Aug 28 17:55:01 2007
From: awgandrews at gmail.com (Alex Andrews)
Date: Tue Aug 28 17:56:01 2007
Subject: [wp-hackers] 2 Questions: $_REQUEST equivalent and using GET in
	mod_rewrite
In-Reply-To: <46D45BB3.10902@branson.com>
References: <e9f3ce460708280801i36a7ab09m4debd4a03fbb9980@mail.gmail.com>
	<46D456AE.9090402@branson.com> <46D45A4F.3080003@robm.me.uk>
	<46D45BB3.10902@branson.com>
Message-ID: <e9f3ce460708281055t1918c6b9qc4026df9be813aa8@mail.gmail.com>

On 28/08/07, jacobsantos@branson.com <jacobsantos@branson.com> wrote:
> Rob Miller wrote:
> > jacobsantos@branson.com wrote:
> >> 1. Using $_REQUEST is like asking hackers to pwn your site. "Yes, I
> >> want you to hack me" Don't use it. The reason for WordPress using
> >> $_POST for form data and $_GET for url data is for the same reason
> >> register globals is terrible security risk. $_REQUEST is similar to
> >> using $_REQUEST and you don't know if it is coming from the Server
> >> (HTTP), form, or url.
> >>
> >> You must know since you created the plugin, so find out and use the
> >> correct super global. If you kept this and released it GPL, the first
> >> thing I will do is convert it to the right super global.
> > What on earth? So long as you handle the data appropriately it doesn't
> > matter where it comes from. CSRF attacks, for example, are possible
> > with both GET and POST; so are SQL injections; so are XSS attacks, etc.
> >
> > Only using $_GET or only using $_POST will not make your scripts even
> > slightly more secure.
> >
> Yes, you still need to sanitize or you'll still be hackable. However,
> with $_GET and $_POST, you at least know where the information is coming
> from, which is safer than relying on $_REQUEST is coming from a form
> like you expect. Besides that, I would say it doesn't inform upon the
> intention of the developer of where he is seeking the input. Finally, it
> is bad coding practice because of the above.
>
> Jacob Santos
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

What WP filter does one run it through to make sure it is okay and
strip it? santize_title?

Alex
From jacobsantos at branson.com  Tue Aug 28 17:59:53 2007
From: jacobsantos at branson.com (jacobsantos@branson.com)
Date: Tue Aug 28 18:04:28 2007
Subject: [wp-hackers] 2 Questions: $_REQUEST equivalent and using GET
	in	mod_rewrite
In-Reply-To: <e9f3ce460708281055t1918c6b9qc4026df9be813aa8@mail.gmail.com>
References: <e9f3ce460708280801i36a7ab09m4debd4a03fbb9980@mail.gmail.com>	<46D456AE.9090402@branson.com>
	<46D45A4F.3080003@robm.me.uk>	<46D45BB3.10902@branson.com>
	<e9f3ce460708281055t1918c6b9qc4026df9be813aa8@mail.gmail.com>
Message-ID: <46D46299.7040207@branson.com>

That is up to the developer and requirements, depending on the what the 
variable is intended for and where it will be placed.

In my case, when I created a plugin, I either used the built-in WP 
filters or created my own. For images, I created my own.

Jacob Santos

Alex Andrews wrote:
>
> What WP filter does one run it through to make sure it is okay and
> strip it? santize_title?
>
> Alex
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
>
>
>   

From clwoodard at gmail.com  Tue Aug 28 18:14:46 2007
From: clwoodard at gmail.com (Curt Woodard)
Date: Tue Aug 28 18:15:01 2007
Subject: [wp-hackers] Re: Re: Re: Sharing Users/authentication
Message-ID: <a3b809ae0708281114k1a98de51h31a483a680cb8ae0@mail.gmail.com>

>This is very cool.  I've been tinkering with this kind of thing
>myself, and ran up against the table-prefix problem.  A couple
>thoughts...
>
>On Aug 28, 2007, at 11:52 AM, Curt Woodard wrote:
>
>> * The administrator need only modify 3 variables in the plugin:
>> $this_role, $my_master_db,
>>   and $my_master_prefix. $this_role tells WordPress if the copy is
>> a slave or a master and the other two are pretty self-explanatory.
>
>It seems you could automate this with a simple logic test.  If the
>table prefix of the table used is the same as the current install's
>prefix, then it is the master.  Otherwise it is a slave.

Well, here's the deal: tying the usermeta tables together as well
causes the info from the slave to disappear. So when it uses the
master tables, it doesn't have any of the settings for the users. Now,
I just copied over the <slave_prefix>user_level, and
<slave_prefix>capabilities of the admin user when you run the plugin.
That gives the "install admin" full admin rights on any and all copies
of WordPress that use this plugin.

>> You can download the plugin from http://www.lyonesse.info/WPP/ (a
>> simple, crude, yet effective page).
>
>I'm definitely testing this out.  I'll let you know if I come across
>any issues or ideas. :) Thanks!
>
>Would you object if I took some of this and rolled it into a separate
>system I'm working on?
>(This thing: <http://striderweb.com/nerdaphernalia/2006/10/hello-
>again-world/>)
>
>Regards,
>Stephen

Yeah, let me know what you think! :) I hope it works out for you.

I did find a bug, however, seems that when you register a user in the
'slave' as a subscriber, it doesn't save the info to the master's
usermeta... *ponder* looking into that.

-> WAIT, no, no real bug. This is correct. In the slave copy, my test
user is set to Subscriber. In the master copy, my test user is set to
nothing (no role) so it's working. You have to go into the master copy
and upgrade the test user so that you can have a different role. :)
KO. *whew* :)

If you want to use the plugin, go ahead. If you want to rip it apart
and paste it into something you're working on? Go ahead, just credit
where credit is due... that's all I ask ;)
From blogger at steffensenfamily.com  Tue Aug 28 18:24:33 2007
From: blogger at steffensenfamily.com (Kirk Steffensen)
Date: Tue Aug 28 18:24:40 2007
Subject: [wp-hackers] 2 Questions: $_REQUEST equivalent and using GET in
	mod_rewrite
In-Reply-To: <46D456AE.9090402@branson.com>
References: <e9f3ce460708280801i36a7ab09m4debd4a03fbb9980@mail.gmail.com>
	<46D456AE.9090402@branson.com>
Message-ID: <afee0d6f0708281124p29559075m26054956c491622e@mail.gmail.com>

On 8/28/07, jacobsantos@branson.com wrote:
>
> If you kept this and released it GPL, the first thing I will do is convert
> it to the right super global.


If you change $_REQUEST to one of $_POST or $_GET in my code, you'll break
it.

I use it for retrieving variables that I sometimes set with a POST via form
and sometimes set with a GET via URL.  That's why $_REQUEST is there, so
that you don't have to look at both $_POST and $_GET.  And it doesn't really
matter where it's coming from, because if it doesn't match the expected
values (because someone is trying to hack the server), it doesn't matter,
because none of the variables looked at with $_REQUEST can do anything other
than break the operation of the plugin since none of them are used for admin
functions.  All the admin is done via config files on the backend.  This
isn't true of all code, but to say that you should NEVER use $_REQUEST in a
plugin is silly.
From ag.ml2007 at zirona.com  Tue Aug 28 18:35:31 2007
From: ag.ml2007 at zirona.com (Alex =?ISO-8859-1?Q?G=FCnsche?=)
Date: Tue Aug 28 18:35:39 2007
Subject: [wp-hackers] 2 Questions: $_REQUEST equivalent and using GET
	in mod_rewrite
In-Reply-To: <e9f3ce460708281001l1191b129r825cec1b8d0a0f7f@mail.gmail.com>
References: <e9f3ce460708280801i36a7ab09m4debd4a03fbb9980@mail.gmail.com>
	<1188319394.5537.11.camel@localhost>
	<e9f3ce460708281001l1191b129r825cec1b8d0a0f7f@mail.gmail.com>
Message-ID: <1188326131.5537.24.camel@localhost>

On Tue, 2007-08-28 at 18:01 +0100, Alex Andrews wrote:
>  How can I get /artists/x/ to translate to artists.php?id=x or whatever.

I don't understand the problem. Do you want to say you have a file
artists.php and want it to handle $_GET['id']? In this case, simply let
your plugin process $_GET['id'] and require('artists.php') where
appropriate. Btw, I wouldn't copy files into WP's base folder, but
rather have it within the plugin's directory.

If that's not what you're looking for, please give us a showcase or more
details about your plans.

Regards,
Alex

-- 
Alex G?nsche, Zirona OpenSource-Consulting
Blogs: http://www.zirona.com/ | http://www.regularimpressions.net
PubKey for this address: http://www.zirona.com/misc/ag.ml2007.asc

From ag.ml2007 at zirona.com  Tue Aug 28 18:26:04 2007
From: ag.ml2007 at zirona.com (Alex =?ISO-8859-1?Q?G=FCnsche?=)
Date: Tue Aug 28 18:48:51 2007
Subject: [wp-hackers] 2 Questions: $_REQUEST equivalent and using GET
	in mod_rewrite
In-Reply-To: <46D456AE.9090402@branson.com>
References: <e9f3ce460708280801i36a7ab09m4debd4a03fbb9980@mail.gmail.com>
	<46D456AE.9090402@branson.com>
Message-ID: <1188325564.5537.16.camel@localhost>

On Tue, 2007-08-28 at 12:09 -0500, jacobsantos@branson.com wrote:
> 1. Using $_REQUEST is like asking hackers to pwn your site. "Yes, I want 
> you to hack me" Don't use it. The reason for WordPress using $_POST for 
> form data and $_GET for url data is for the same reason register globals 
> is terrible security risk. $_REQUEST is similar to using $_REQUEST and 
> you don't know if it is coming from the Server (HTTP), form, or url.

Sorry, but this is complete nonsense. $_REQUEST simply merges $_GET,
$_POST and $_COOKIE. http://de.php.net/reserved.variables

Regards,
Alex



-- 
Alex G?nsche, Zirona OpenSource-Consulting
Blogs: http://www.zirona.com/ | http://www.regularimpressions.net
PubKey for this address: http://www.zirona.com/misc/ag.ml2007.asc

From jacobsantos at branson.com  Tue Aug 28 18:45:11 2007
From: jacobsantos at branson.com (jacobsantos@branson.com)
Date: Tue Aug 28 18:49:50 2007
Subject: [wp-hackers] 2 Questions: $_REQUEST equivalent and using GET
	in	mod_rewrite
In-Reply-To: <afee0d6f0708281124p29559075m26054956c491622e@mail.gmail.com>
References: <e9f3ce460708280801i36a7ab09m4debd4a03fbb9980@mail.gmail.com>	<46D456AE.9090402@branson.com>
	<afee0d6f0708281124p29559075m26054956c491622e@mail.gmail.com>
Message-ID: <46D46D37.3000903@branson.com>

I concede that with your explanation you are doing things securely enough.

I would still evaluate $_REQUEST to register globals in the hands of 
people who don't know the danger. If it was me, I would test *both* 
$_POST and $_GET, instead of using $_REQUEST.

I will say $_REQUEST should never be used, from my coding experiences.

Jacob Santos


Kirk Steffensen wrote:
> On 8/28/07, jacobsantos@branson.com wrote:
>   
>> If you kept this and released it GPL, the first thing I will do is convert
>> it to the right super global.
>>     
>
>
> If you change $_REQUEST to one of $_POST or $_GET in my code, you'll break
> it.
>
> I use it for retrieving variables that I sometimes set with a POST via form
> and sometimes set with a GET via URL.  That's why $_REQUEST is there, so
> that you don't have to look at both $_POST and $_GET.  And it doesn't really
> matter where it's coming from, because if it doesn't match the expected
> values (because someone is trying to hack the server), it doesn't matter,
> because none of the variables looked at with $_REQUEST can do anything other
> than break the operation of the plugin since none of them are used for admin
> functions.  All the admin is done via config files on the backend.  This
> isn't true of all code, but to say that you should NEVER use $_REQUEST in a
> plugin is silly.
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
>
>
>   

From awgandrews at gmail.com  Tue Aug 28 18:56:16 2007
From: awgandrews at gmail.com (Alex Andrews)
Date: Tue Aug 28 18:56:21 2007
Subject: [wp-hackers] 2 Questions: $_REQUEST equivalent and using GET in
	mod_rewrite
In-Reply-To: <1188326131.5537.24.camel@localhost>
References: <e9f3ce460708280801i36a7ab09m4debd4a03fbb9980@mail.gmail.com>
	<1188319394.5537.11.camel@localhost>
	<e9f3ce460708281001l1191b129r825cec1b8d0a0f7f@mail.gmail.com>
	<1188326131.5537.24.camel@localhost>
Message-ID: <e9f3ce460708281156h273c0ec6ubf2da79809c27880@mail.gmail.com>

On 28/08/07, Alex G?nsche <ag.ml2007@zirona.com> wrote:
> On Tue, 2007-08-28 at 18:01 +0100, Alex Andrews wrote:
> >  How can I get /artists/x/ to translate to artists.php?id=x or whatever.
>
> I don't understand the problem. Do you want to say you have a file
> artists.php and want it to handle $_GET['id']? In this case, simply let
> your plugin process $_GET['id'] and require('artists.php') where
> appropriate. Btw, I wouldn't copy files into WP's base folder, but
> rather have it within the plugin's directory.

Thats not the problem - the problem is

1. How to santize the incoming data from $_GET. Or whereever.
2. How to work the mod_rewrite facilities (preferably from within
Wordpress) to pass /artist/a/ onto artists.php?artist_id=a .

Alex
From jacobsantos at branson.com  Tue Aug 28 18:58:23 2007
From: jacobsantos at branson.com (jacobsantos@branson.com)
Date: Tue Aug 28 19:02:56 2007
Subject: [wp-hackers] 2 Questions: $_REQUEST equivalent and using GET
	in	mod_rewrite
In-Reply-To: <e9f3ce460708281156h273c0ec6ubf2da79809c27880@mail.gmail.com>
References: <e9f3ce460708280801i36a7ab09m4debd4a03fbb9980@mail.gmail.com>	<1188319394.5537.11.camel@localhost>	<e9f3ce460708281001l1191b129r825cec1b8d0a0f7f@mail.gmail.com>	<1188326131.5537.24.camel@localhost>
	<e9f3ce460708281156h273c0ec6ubf2da79809c27880@mail.gmail.com>
Message-ID: <46D4704F.90706@branson.com>

2. Whoa, I think I have the answer to the second one. I looked through 
the code for the rewrite.php and this is possible. The answer is in there.

Jacob Santos

Alex Andrews wrote:
> On 28/08/07, Alex G?nsche <ag.ml2007@zirona.com> wrote:
>   
>> On Tue, 2007-08-28 at 18:01 +0100, Alex Andrews wrote:
>>     
>>>  How can I get /artists/x/ to translate to artists.php?id=x or whatever.
>>>       
>> I don't understand the problem. Do you want to say you have a file
>> artists.php and want it to handle $_GET['id']? In this case, simply let
>> your plugin process $_GET['id'] and require('artists.php') where
>> appropriate. Btw, I wouldn't copy files into WP's base folder, but
>> rather have it within the plugin's directory.
>>     
>
> Thats not the problem - the problem is
>
> 1. How to santize the incoming data from $_GET. Or whereever.
> 2. How to work the mod_rewrite facilities (preferably from within
> Wordpress) to pass /artist/a/ onto artists.php?artist_id=a .
>
> Alex
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
>
>
>   

From ag.ml2007 at zirona.com  Tue Aug 28 19:15:38 2007
From: ag.ml2007 at zirona.com (Alex =?ISO-8859-1?Q?G=FCnsche?=)
Date: Tue Aug 28 19:15:48 2007
Subject: [wp-hackers] 2 Questions: $_REQUEST equivalent and using GET
	in mod_rewrite
In-Reply-To: <e9f3ce460708281156h273c0ec6ubf2da79809c27880@mail.gmail.com>
References: <e9f3ce460708280801i36a7ab09m4debd4a03fbb9980@mail.gmail.com>
	<1188319394.5537.11.camel@localhost>
	<e9f3ce460708281001l1191b129r825cec1b8d0a0f7f@mail.gmail.com>
	<1188326131.5537.24.camel@localhost>
	<e9f3ce460708281156h273c0ec6ubf2da79809c27880@mail.gmail.com>
Message-ID: <1188328538.5537.33.camel@localhost>

On Tue, 2007-08-28 at 19:56 +0100, Alex Andrews wrote:
> 1. How to santize the incoming data from $_GET. Or whereever.

Depends on where you want to use them. If you want them in a DB query,
use $wpdb->escape(). If it's for usage as HTML attribute, use
attribute_escape(). There are more functions like this, as I said,
depends on the specific case, which one to use.

> 2. How to work the mod_rewrite facilities (preferably from within
> Wordpress) to pass /artist/a/ onto artists.php?artist_id=a .

What seems to be the problem?

<?php
	$artist_id = sanitize_foo($_GET['artist_id']);
	require($mypath.'artists.php');
?>

simply make sure that your plugin gets to handle /artists/a/ (as
described before). There's no need for further rewriting.

Alex


-- 
Alex G?nsche, Zirona OpenSource-Consulting
Blogs: http://www.zirona.com/ | http://www.regularimpressions.net
PubKey for this address: http://www.zirona.com/misc/ag.ml2007.asc

From jacobsantos at branson.com  Tue Aug 28 19:23:06 2007
From: jacobsantos at branson.com (jacobsantos@branson.com)
Date: Tue Aug 28 19:57:24 2007
Subject: [wp-hackers] 2 Questions: $_REQUEST equivalent and using GET
	in	mod_rewrite
In-Reply-To: <e9f3ce460708281156h273c0ec6ubf2da79809c27880@mail.gmail.com>
References: <e9f3ce460708280801i36a7ab09m4debd4a03fbb9980@mail.gmail.com>	<1188319394.5537.11.camel@localhost>	<e9f3ce460708281001l1191b129r825cec1b8d0a0f7f@mail.gmail.com>	<1188326131.5537.24.camel@localhost>
	<e9f3ce460708281156h273c0ec6ubf2da79809c27880@mail.gmail.com>
Message-ID: <46D4761A.3050408@branson.com>

2. add_rewrite_rule($regex, $redirect);

For some reason the third parameter won't work. Neither this function or 
the method in the class. Might be a bug.

Alex Andrews wrote:
> On 28/08/07, Alex G?nsche <ag.ml2007@zirona.com> wrote:
>   
>> On Tue, 2007-08-28 at 18:01 +0100, Alex Andrews wrote:
>>     
>>>  How can I get /artists/x/ to translate to artists.php?id=x or whatever.
>>>       
>> I don't understand the problem. Do you want to say you have a file
>> artists.php and want it to handle $_GET['id']? In this case, simply let
>> your plugin process $_GET['id'] and require('artists.php') where
>> appropriate. Btw, I wouldn't copy files into WP's base folder, but
>> rather have it within the plugin's directory.
>>     
>
> Thats not the problem - the problem is
>
> 1. How to santize the incoming data from $_GET. Or whereever.
> 2. How to work the mod_rewrite facilities (preferably from within
> Wordpress) to pass /artist/a/ onto artists.php?artist_id=a .
>
> Alex
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
>
>
>   

From jacobsantos at branson.com  Tue Aug 28 19:58:40 2007
From: jacobsantos at branson.com (jacobsantos@branson.com)
Date: Tue Aug 28 20:03:15 2007
Subject: [wp-hackers] 2 Questions: $_REQUEST equivalent and using GET
	in	mod_rewrite
In-Reply-To: <46D4761A.3050408@branson.com>
References: <e9f3ce460708280801i36a7ab09m4debd4a03fbb9980@mail.gmail.com>	<1188319394.5537.11.camel@localhost>	<e9f3ce460708281001l1191b129r825cec1b8d0a0f7f@mail.gmail.com>	<1188326131.5537.24.camel@localhost>	<e9f3ce460708281156h273c0ec6ubf2da79809c27880@mail.gmail.com>
	<46D4761A.3050408@branson.com>
Message-ID: <46D47E70.9010001@branson.com>

Correction: The third parameter will now work with latest subversion commit.

add_rewrite_rule($regex, $redirect, $after = 'bottom');


jacobsantos@branson.com wrote:
> 2. add_rewrite_rule($regex, $redirect);
>
> For some reason the third parameter won't work. Neither this function 
> or the method in the class. Might be a bug.
>
> Alex Andrews wrote:
>> On 28/08/07, Alex G?nsche <ag.ml2007@zirona.com> wrote:
>>  
>>> On Tue, 2007-08-28 at 18:01 +0100, Alex Andrews wrote:
>>>    
>>>>  How can I get /artists/x/ to translate to artists.php?id=x or 
>>>> whatever.
>>>>       
>>> I don't understand the problem. Do you want to say you have a file
>>> artists.php and want it to handle $_GET['id']? In this case, simply let
>>> your plugin process $_GET['id'] and require('artists.php') where
>>> appropriate. Btw, I wouldn't copy files into WP's base folder, but
>>> rather have it within the plugin's directory.
>>>     
>>
>> Thats not the problem - the problem is
>>
>> 1. How to santize the incoming data from $_GET. Or whereever.
>> 2. How to work the mod_rewrite facilities (preferably from within
>> Wordpress) to pass /artist/a/ onto artists.php?artist_id=a .
>>
>> Alex
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers@lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
>>
>>
>>   
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
>
>

From lloydomattic at gmail.com  Tue Aug 28 20:10:17 2007
From: lloydomattic at gmail.com (Lloyd Budd)
Date: Tue Aug 28 20:10:37 2007
Subject: [wp-hackers] Fixing Bugs
In-Reply-To: <3913EDC2-962A-45B6-85D6-6F4B2D117FBA@googlemail.com>
References: <F384F5BF-C422-4B83-A3CF-287B98F2221E@googlemail.com>
	<46D36EBB.90804@gmail.com>
	<3913EDC2-962A-45B6-85D6-6F4B2D117FBA@googlemail.com>
Message-ID: <70ebb7140708281310s68d72829ye5db1f8f7887879a@mail.gmail.com>

On 8/28/07, Geoffrey Sneddon <foolistbar@googlemail.com> wrote:
>
> I am using the 2.0 branch ? to me it still seems buggier than < 2
> releases were. 2.0 has some bugs that make it almost completely
> unusable for me, which despite Mark Jaquith telling me they'd be
> fixed, Ryan Boren contradicted him if not a week later. Not only are
> bugs being introduced at a quicker and quicker rate, but bugs are
> being regressed more and more often. A large majority of WP could be
> tested automatically, and badly needs to be. This has been suggested
> several times before, but nothing, to my knowledge, has ever really
> happened about it.

Woh now!

Without question you have contributed greatly to WordPress starting
and following up on important issues.

The part that catches me in your email is:
"This has been suggested several times before, but nothing, to my
knowledge, has ever really happened about it."

When I read I think instead of Mohandas Gandhi's saying "Be the change
that you want to see in the world."

Jacob Santos is an awesome example of this, recently joining the
project and doing a lot of interesting work in WordPress test
automation and other areas.

One of the biggest mistakes we could make is fixing bugs that aren't
worth fixing (now). A bug free product doesn't make it a great
product.

Another big mistake is not dealing with (the perception of) bugginess,
if it exists I don't feel that there is an undercurrent of that
perception, except as it relates to security.

The first gate is the severity/priority of a ticket and that should
reflect the impact on the experience, the impact for the customer --
whether that is a person using WordPress or a plugin developer.

A lot of the tickets don't do a great job of sharing the severity of
the issue  -- so it is harder for others to understand and care about
the ticket.

The tickets reported are often cryptic and it can be difficult to
understand the problems. Look at the comments in trac by otto42,
Robin, nazgul, markj, westi, jeremy, ryan and (who'd I miss?), they
spend a lot of time often just trying to understand the problems,
isolate the problem, and reproduce them.

(Robin's going to be greatly missed!
http://robinadr.com/2007/08/leaving_wordpress_behind)

Well written bug reports would go along way to us understanding the bugginess.

The next step is writing good patches and advocating the solutions.

Thanks,
-- 
Lloyd Budd | Digital Entomologist | | Skype:foolswisdom
WordPress.com | WordPress.org | Automattic.com


PS. I highly recommend picking up a copy of Lessons Learned in
Software Testing by Kaner, Bach, Pettichord.
From wp-hackers at striderweb.com  Tue Aug 28 20:11:37 2007
From: wp-hackers at striderweb.com (Stephen Rider)
Date: Tue Aug 28 20:11:48 2007
Subject: [wp-hackers] Sharing Users/authentication
In-Reply-To: <a3b809ae0708281114k1a98de51h31a483a680cb8ae0@mail.gmail.com>
References: <a3b809ae0708281114k1a98de51h31a483a680cb8ae0@mail.gmail.com>
Message-ID: <457809F5-266C-4211-8231-DD7F12C5ED37@striderweb.com>


On Aug 28, 2007, at 1:14 PM, Curt Woodard wrote:

>>> * The administrator need only modify 3 variables in the plugin:
>>> $this_role, $my_master_db,
>>>   and $my_master_prefix. $this_role tells WordPress if the copy is
>>> a slave or a master and the other two are pretty self-explanatory.
>>
>> It seems you could automate this with a simple logic test.  If the
>> table prefix of the table used is the same as the current install's
>> prefix, then it is the master.  Otherwise it is a slave.
>
> Well, here's the deal: tying the usermeta tables together as well
> causes the info from the slave to disappear. So when it uses the
> master tables, it doesn't have any of the settings for the users. Now,
> I just copied over the <slave_prefix>user_level, and
> <slave_prefix>capabilities of the admin user when you run the plugin.
> That gives the "install admin" full admin rights on any and all copies
> of WordPress that use this plugin.

It doesn't need any info from any table.

If the table prefix set in wp-config == $my_master_prefix : this is a  
Master.
If the table prefix set in wp-config != $my_master_prefix : this is a  
Slave.

Thus, $this_role doesn't need to be set by user.  Auto-detect! :)

Also -- it appears you hard-coded some variable data in the plugin.

Stephen

From mark.wordpress at txfx.net  Tue Aug 28 20:22:22 2007
From: mark.wordpress at txfx.net (Mark Jaquith)
Date: Tue Aug 28 20:23:09 2007
Subject: [wp-hackers] Sharing Users/authentication
In-Reply-To: <C70AAC98-E574-4F51-8025-8E1827E8BA33@striderweb.com>
References: <9b1b9dab0708241054g749e24c0md73235d986d24bfa@mail.gmail.com>	<46CF1E73.6000407@branson.com>
	<B9F84AB9-E5E4-4B3A-945E-C15C899285B5@striderweb.com>
	<46CF9A48.8000403@dragonu.net>
	<AB809068-D235-4F76-B15C-FD01DE5D7B7A@striderweb.com>
	<C70AAC98-E574-4F51-8025-8E1827E8BA33@striderweb.com>
Message-ID: <44E9BD21-222D-415D-87EF-6B3E44D194C5@txfx.net>

On Aug 25, 2007, at 12:20 PM, Stephen Rider wrote:

> The problem appears to be the "wp_capabilities" and "wp_user_level"  
> fields in the wp_usermeta table.  WordPress needs these field names  
> to match the active table prefix.

This was an intentional design decision, to allow users to have  
different permissions on different blogs.

Still, it might be nice to have a "unified permissions" mode whereby  
the slave installs use the master's permissions.

I've opened a ticket to that end:

	http://trac.wordpress.org/ticket/4846

--
Mark Jaquith
http://markjaquith.com/

Covered Web Services
http://coveredwebservices.com/

WordPress Ninja @ b5media Inc
http://b5media.com/


From wp-hackers at striderweb.com  Tue Aug 28 20:39:53 2007
From: wp-hackers at striderweb.com (Stephen Rider)
Date: Tue Aug 28 20:40:00 2007
Subject: [wp-hackers] Sharing Users/authentication
In-Reply-To: <44E9BD21-222D-415D-87EF-6B3E44D194C5@txfx.net>
References: <9b1b9dab0708241054g749e24c0md73235d986d24bfa@mail.gmail.com>	<46CF1E73.6000407@branson.com>
	<B9F84AB9-E5E4-4B3A-945E-C15C899285B5@striderweb.com>
	<46CF9A48.8000403@dragonu.net>
	<AB809068-D235-4F76-B15C-FD01DE5D7B7A@striderweb.com>
	<C70AAC98-E574-4F51-8025-8E1827E8BA33@striderweb.com>
	<44E9BD21-222D-415D-87EF-6B3E44D194C5@txfx.net>
Message-ID: <690CF91A-D6CE-44E9-9051-F91F8C47500E@striderweb.com>


On Aug 28, 2007, at 3:22 PM, Mark Jaquith wrote:

> On Aug 25, 2007, at 12:20 PM, Stephen Rider wrote:
>
>> The problem appears to be the "wp_capabilities" and  
>> "wp_user_level" fields in the wp_usermeta table.  WordPress needs  
>> these field names to match the active table prefix.
>
> This was an intentional design decision, to allow users to have  
> different permissions on different blogs.
>
> Still, it might be nice to have a "unified permissions" mode  
> whereby the slave installs use the master's permissions.
>
> I've opened a ticket to that end:
>
> 	http://trac.wordpress.org/ticket/4846

Jamie says:
> The capabilities are stored as
> {tableprefix}_{blogid}_capabilities, so it would be something like
> wp_1_capabilities.

Okay, so this is something that was implemented for WordPressMU, but  
it's 1) not fully implemented, as the {blogid} in her example is not  
present, and 2) it's not necessary for vanilla single-user WordPress.

I understand its usefulness for MU, but is there any reason for it to  
be here in regular WordPress?  Since there is a code difference here  
anyway (compared to MU), why not just remove this redundancy entirely?

That seems far simpler (and less bug-prone) than adding code to  
distinguish between two options -- one of which isn't used!  :)

Stephen
From speedboxer at gmail.com  Tue Aug 28 23:05:01 2007
From: speedboxer at gmail.com (Matt)
Date: Tue Aug 28 23:05:06 2007
Subject: [wp-hackers] Plugin Makes Top Bar in Admin Panel Go White
Message-ID: <b88434820708281605j4b7528a7wb1fc25273a2c6691@mail.gmail.com>

I made a very simple plugin so that I could get rid of the &raquo; and space
before the title in wp_title();. I used the following code:

function mgf_filter_wp_title($content) {
 $content = str_replace("&raquo; ", "", $content);

 return $content;

}

add_filter('wp_title', 'mgf_filter_wp_title');
When I activated the plugin, the bar at the top of the Admin pages that has
"Howdy, user. [Sign Out, My Profile]" turned white (the background colour of
it was white). When I deactivated the plugin, it went back to normal.

This only appears to happen in IE7, not Firefox.

Anybody know why this is happening?

-- 
Matt (speedboxer@gmail.com)
http://mattsblog.ca/ | http://livemp.net/
From speedboxer at gmail.com  Tue Aug 28 23:12:51 2007
From: speedboxer at gmail.com (Matt)
Date: Tue Aug 28 23:13:00 2007
Subject: [wp-hackers] Re: Plugin Makes Top Bar in Admin Panel Go White
In-Reply-To: <b88434820708281605j4b7528a7wb1fc25273a2c6691@mail.gmail.com>
References: <b88434820708281605j4b7528a7wb1fc25273a2c6691@mail.gmail.com>
Message-ID: <b88434820708281612u7b108c11ke792d44eee5b220c@mail.gmail.com>

Found the problem. I had saved the file with the encoding UTF-8, when I
saved it as ANSI, it was fine.

On 8/28/07, Matt <speedboxer@gmail.com> wrote:
>
> I made a very simple plugin so that I could get rid of the &raquo; and
> space before the title in wp_title();. I used the following code:
>
> function mgf_filter_wp_title($content) {
>  $content = str_replace("&raquo; ", "", $content);
>
>  return $content;
>
> }
>
> add_filter('wp_title', 'mgf_filter_wp_title');
> When I activated the plugin, the bar at the top of the Admin pages that
> has "Howdy, user. [Sign Out, My Profile]" turned white (the background
> colour of it was white). When I deactivated the plugin, it went back to
> normal.
>
> This only appears to happen in IE7, not Firefox.
>
> Anybody know why this is happening?
>
> --
> Matt (speedboxer@gmail.com)
> http://mattsblog.ca/ | http://livemp.net/
>



-- 
Matt (speedboxer@gmail.com)
http://mattsblog.ca/ | http://livemp.net/
From wordpress at tekartist.org  Tue Aug 28 23:42:57 2007
From: wordpress at tekartist.org (Stephane Daury)
Date: Tue Aug 28 23:43:08 2007
Subject: [wp-hackers] Fixing Bugs
In-Reply-To: <46D4477A.4010107@branson.com>
References: <F384F5BF-C422-4B83-A3CF-287B98F2221E@googlemail.com>	<46D36EBB.90804@gmail.com>
	<3913EDC2-962A-45B6-85D6-6F4B2D117FBA@googlemail.com>
	<46D4477A.4010107@branson.com>
Message-ID: <61368E76-8D21-423F-B5FF-D8ABA7B90055@tekartist.org>

Hey Jacob,

Can you point me/us to a URL I can read up on the progress and get  
involved with the testing bits?
I'm busy as hell, but I think its worth the effort, especially if  
there are already people driving such a project.

Stephane




On Aug 28, 2007, at 12:04, jacobsantos@branson.com wrote:

> I would advise helping with the current documentation and unit  
> testing/characterization testing/functional testing. I could use  
> help and I'm sure the others doing it would like help also. It is  
> happening, but it would go a lot quicker if more people started  
> writing tests for the library.
>
> Jacob Santos
>
> Geoffrey Sneddon wrote:
>>
>> On 28 Aug 2007, at 01:39, Jeremy Visser wrote:
>>
>>> Geoffrey Sneddon wrote:
>>>> The number in bugs in WP has grown steadily over several years,  
>>>> yet the
>>>> number of unfixed ones increasing quicker still. We need a  
>>>> release that
>>>> is stable. We need a release where everything _works_. Can we  
>>>> have one
>>>> release which includes _nothing_ but bug fixes. There are 409  
>>>> open bugs
>>>> according to trac (and I expect there are others marked as
>>>> wontfix/invalid without reason). There are some massively  
>>>> annoying bugs
>>>> for users, not least things like being unable to use IRIs in  
>>>> sanitised
>>>> content (#4570, target 2.4).
>>>
>>> Shouldn't you maybe be looking at using the 2.0 branch?
>>
>> I am using the 2.0 branch ? to me it still seems buggier than < 2  
>> releases were. 2.0 has some bugs that make it almost completely  
>> unusable for me, which despite Mark Jaquith telling me they'd be  
>> fixed, Ryan Boren contradicted him if not a week later. Not only  
>> are bugs being introduced at a quicker and quicker rate, but bugs  
>> are being regressed more and more often. A large majority of WP  
>> could be tested automatically, and badly needs to be. This has  
>> been suggested several times before, but nothing, to my knowledge,  
>> has ever really happened about it.
>>
>>
>> - Geoffrey Sneddon
>>
>>
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers@lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
>>
>>
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

From clwoodard at gmail.com  Tue Aug 28 23:44:44 2007
From: clwoodard at gmail.com (Curt Woodard)
Date: Tue Aug 28 23:44:50 2007
Subject: [wp-hackers] Sharing Users/authentication
Message-ID: <a3b809ae0708281644n5b790d47hb5a17ff4b63604fc@mail.gmail.com>

A new version of SM2WP is out, version 1.5 BETA. I've removed all the
hard-coded stuff and put in options and an option panel. Should be a
bit better now.

<b><u>Changelog:</u></b>
   * 2007-08-28 18:35:23:
      * Added an options panel for configuration
      * Removed hard-coded variables to make the script generic
      * Added options at the beginning that assume a master install.

   * 2007-08-28:
      * Wrote the plugin, tested the plugin, announced the plugin
      * Went to Disneyland...

The new file can be found at: http://www.lyonesse.info/WPP/

Let me know if this is better and what other features you might want
to see in it.
From jeremy.visser at gmail.com  Wed Aug 29 01:03:04 2007
From: jeremy.visser at gmail.com (Jeremy Visser)
Date: Wed Aug 29 01:03:14 2007
Subject: [wp-hackers] Fixing Bugs
In-Reply-To: <61368E76-8D21-423F-B5FF-D8ABA7B90055@tekartist.org>
References: <F384F5BF-C422-4B83-A3CF-287B98F2221E@googlemail.com>	<46D36EBB.90804@gmail.com>	<3913EDC2-962A-45B6-85D6-6F4B2D117FBA@googlemail.com>	<46D4477A.4010107@branson.com>
	<61368E76-8D21-423F-B5FF-D8ABA7B90055@tekartist.org>
Message-ID: <46D4C5C8.40006@gmail.com>

Stephane Daury wrote:
> Can you point me/us to a URL I can read up on the progress and get
> involved with the testing bits?

If you go to http://trac.wordpress.org/roadmap you can see the different
milestones we have active at the moment, along with the tickets
associated with those milestones.

If you go to this report:

	http://trac.wordpress.org/report/16

...that's a report of tickets that are marked as "needs-testing". You
may be of use there.

> I'm busy as hell, but I think its worth the effort, especially if there
> are already people driving such a project.

Don't let your contributions to WordPress get in the way of Real Life. :)
From wordpress at dd32.id.au  Wed Aug 29 01:06:14 2007
From: wordpress at dd32.id.au (DD32)
Date: Wed Aug 29 01:06:02 2007
Subject: [wp-hackers] 2 Questions: $_REQUEST equivalent and using GET in
	mod_rewrite
In-Reply-To: <e9f3ce460708281001l1191b129r825cec1b8d0a0f7f@mail.gmail.com>
References: <e9f3ce460708280801i36a7ab09m4debd4a03fbb9980@mail.gmail.com>
	<1188319394.5537.11.camel@localhost>
	<e9f3ce460708281001l1191b129r825cec1b8d0a0f7f@mail.gmail.com>
Message-ID: <op.txsqooeyk6w4mc@dd32.no-ip.com>

This seems to come up quite a bit, and its definately challenging for  
people when they first try to use it.
I've recycled some of my own code into a test plugin that shows how to use  
the Rewrite engine a bit better:

http://dd32.id.au/files/wordpress/test-rewrite.php

By just uploading and activating it, it allows this: (without touching  
anything else in WP, no pages defined etc)
http://dd32.id.au/artist/
http://dd32.id.au/artist/Freddy/
http://dd32.id.au/artist/a/

Query vars are Escaped strings though, So this:
http://dd32.id.au/artist/Oh'John/
Results in this:
Plugin for Artist: Oh\\\\\\\'John
(Why there are so many slashes i'm not sure)

while http://dd32.id.au/artist/Oh"John/
Would be: Plugin for Artist: Oh\"John

> How can I get /artists/x/ to translate to artists.php?id=x or whatever.
By the sounds of it, you've developed the standalone app not quite how  
you'd write a WP plugin.
My suggestion would be to modify the code i've linked to, and instead of  
die(), you'd do something like:


add_action('template_redirect','test_template');
function test_template($arg){
     global $wp_query;
     if( !isset($wp_query->query_vars['artist']) )
         return $arg;
     if( 'index' != $wp_query->query_vars['artist'])
         $_REQUEST['id'] = $wp_query->query_vars['artist'];
     require_once('artists.php');
     die(); //We dont want WordPress to execute after the scripts run
}

Theres probably a better hook than template_redirect, but i find it works  
well, its right before any output is started so i find its a good place to  
cut in.


I hope its of use to you and others.

Cheers,
D


On Wed, 29 Aug 2007 03:01:28 +1000, Alex Andrews <awgandrews@gmail.com>  
wrote:

>> > More importantly, I want to use mod_rewrite to map onto this plugin. I
>> > know Wordpress can do this, but I am not sure how. Here is the schema
>> > I imagine, artists.php being replaced by the correct wordpress plugin
>> > hookup (some suggestion here might be helpful two)
>>
>> One of my plugins uses the following:
>>
>> function myRewrite($rules)
>>         { $rules['foo'] = 'index.php?pagename=foo'; return $rules; }
>>
>> add_filter('rewrite_rules_array', 'myRewrite');
>>
>> When the plugin is activated, you must visit
>> wp-admin/options-permalinks.php (once is sufficient) to add your slug to
>> WP's ruleset.
>>
>> Then, every request that calls /foo/* in this example, will be handled
>> by the plugin. However, this solution also requires to have a page with
>> the slug "foo". Maybe there's a better solution, but this one works for
>> me.
>
> It appears that in the Codex there is a description. It seems the
> latter example might suit my needs if adapted, but the problem is
> still input. How can I get /artists/x/ to translate to
> artists.php?id=x or whatever.
>
> http://codex.wordpress.org/Function_Reference/WP_Rewrite#Example
>
> Regards
>
> Alex
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers



-- 
Using Opera's revolutionary e-mail client: http://www.opera.com/mail/
From wordpress at tekartist.org  Wed Aug 29 04:56:52 2007
From: wordpress at tekartist.org (Stephane Daury)
Date: Wed Aug 29 04:57:04 2007
Subject: [wp-hackers] Fixing Bugs
In-Reply-To: <46D4C5C8.40006@gmail.com>
References: <F384F5BF-C422-4B83-A3CF-287B98F2221E@googlemail.com>	<46D36EBB.90804@gmail.com>	<3913EDC2-962A-45B6-85D6-6F4B2D117FBA@googlemail.com>	<46D4477A.4010107@branson.com>
	<61368E76-8D21-423F-B5FF-D8ABA7B90055@tekartist.org>
	<46D4C5C8.40006@gmail.com>
Message-ID: <41FD6D77-C0CB-4882-934C-52DB794616E6@tekartist.org>


On Aug 28, 2007, at 21:03, Jeremy Visser wrote:

> Stephane Daury wrote:
>> Can you point me/us to a URL I can read up on the progress and get
>> involved with the testing bits?
>
> If you go to http://trac.wordpress.org/roadmap you can see the  
> different
> milestones we have active at the moment, along with the tickets
> associated with those milestones.
>
> If you go to this report:
>
> 	http://trac.wordpress.org/report/16

Perfect, thanks. I'll lurk around when my schedule allows.

I actually just finished setting a plugin in the common repo and  
mapped my own tickets through the convenient Trac RSS feeds, so it'll  
just be one more to add.

Got to get that plugin out the door first (1.0, tomorrow?).

One reason I'm interested in the testing stuff is that ultimately, I  
want to apply the same standards to my own WP plugins and potential  
themes.
Why reinvent the wheel, right? So I figure it makes more sense to  
kill two birds with one stone thrown by contributing to existing  
efforts in that realm.
Plus I'll probably learn a thing or two, which is never bad.


> ...that's a report of tickets that are marked as "needs-testing". You
> may be of use there.
>
>> I'm busy as hell, but I think its worth the effort, especially if  
>> there
>> are already people driving such a project.
>
> Don't let your contributions to WordPress get in the way of Real  
> Life. :)

Good point, but trust me, my three kids wouldn't let me.
It's kinda difficult to code with the constant "daaaaaaady?" in the  
background. ;)

--
Stephane


From awgandrews at gmail.com  Wed Aug 29 06:41:54 2007
From: awgandrews at gmail.com (Alex Andrews)
Date: Wed Aug 29 06:41:58 2007
Subject: [wp-hackers] 2 Questions: $_REQUEST equivalent and using GET in
	mod_rewrite
In-Reply-To: <op.txsqooeyk6w4mc@dd32.no-ip.com>
References: <e9f3ce460708280801i36a7ab09m4debd4a03fbb9980@mail.gmail.com>
	<1188319394.5537.11.camel@localhost>
	<e9f3ce460708281001l1191b129r825cec1b8d0a0f7f@mail.gmail.com>
	<op.txsqooeyk6w4mc@dd32.no-ip.com>
Message-ID: <e9f3ce460708282341x7091eb05qe68a287e42da628@mail.gmail.com>

Thanks very much, that is exactly what I am looking for.

Credit is going in the olde thanks file (to all but particularly to
D). I'd give you some free records if we weren't giving them away for
free already!

Alex

On 29/08/2007, DD32 <wordpress@dd32.id.au> wrote:
> This seems to come up quite a bit, and its definately challenging for
> people when they first try to use it.
> I've recycled some of my own code into a test plugin that shows how to use
> the Rewrite engine a bit better:
>
> http://dd32.id.au/files/wordpress/test-rewrite.php
>
> By just uploading and activating it, it allows this: (without touching
> anything else in WP, no pages defined etc)
> http://dd32.id.au/artist/
> http://dd32.id.au/artist/Freddy/
> http://dd32.id.au/artist/a/
>
> Query vars are Escaped strings though, So this:
> http://dd32.id.au/artist/Oh'John/
> Results in this:
> Plugin for Artist: Oh\\\\\\\'John
> (Why there are so many slashes i'm not sure)
>
> while http://dd32.id.au/artist/Oh"John/
> Would be: Plugin for Artist: Oh\"John
>
> > How can I get /artists/x/ to translate to artists.php?id=x or whatever.
> By the sounds of it, you've developed the standalone app not quite how
> you'd write a WP plugin.
> My suggestion would be to modify the code i've linked to, and instead of
> die(), you'd do something like:
>
>
> add_action('template_redirect','test_template');
> function test_template($arg){
>      global $wp_query;
>      if( !isset($wp_query->query_vars['artist']) )
>          return $arg;
>      if( 'index' != $wp_query->query_vars['artist'])
>          $_REQUEST['id'] = $wp_query->query_vars['artist'];
>      require_once('artists.php');
>      die(); //We dont want WordPress to execute after the scripts run
> }
>
> Theres probably a better hook than template_redirect, but i find it works
> well, its right before any output is started so i find its a good place to
> cut in.
>
>
> I hope its of use to you and others.
>
> Cheers,
> D
>
>
> On Wed, 29 Aug 2007 03:01:28 +1000, Alex Andrews <awgandrews@gmail.com>
> wrote:
>
> >> > More importantly, I want to use mod_rewrite to map onto this plugin. I
> >> > know Wordpress can do this, but I am not sure how. Here is the schema
> >> > I imagine, artists.php being replaced by the correct wordpress plugin
> >> > hookup (some suggestion here might be helpful two)
> >>
> >> One of my plugins uses the following:
> >>
> >> function myRewrite($rules)
> >>         { $rules['foo'] = 'index.php?pagename=foo'; return $rules; }
> >>
> >> add_filter('rewrite_rules_array', 'myRewrite');
> >>
> >> When the plugin is activated, you must visit
> >> wp-admin/options-permalinks.php (once is sufficient) to add your slug to
> >> WP's ruleset.
> >>
> >> Then, every request that calls /foo/* in this example, will be handled
> >> by the plugin. However, this solution also requires to have a page with
> >> the slug "foo". Maybe there's a better solution, but this one works for
> >> me.
> >
> > It appears that in the Codex there is a description. It seems the
> > latter example might suit my needs if adapted, but the problem is
> > still input. How can I get /artists/x/ to translate to
> > artists.php?id=x or whatever.
> >
> > http://codex.wordpress.org/Function_Reference/WP_Rewrite#Example
> >
> > Regards
> >
> > Alex
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers@lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
>
>
>
> --
> Using Opera's revolutionary e-mail client: http://www.opera.com/mail/
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
From mylists at polite.se  Wed Aug 29 08:15:35 2007
From: mylists at polite.se (Alex Polite)
Date: Wed Aug 29 08:15:39 2007
Subject: [wp-hackers] Page with only articles from category x.
Message-ID: <65955b6b0708290115m12f3d060ve516e85ba17946ce@mail.gmail.com>

I use K2.

I want all posts from a specific category collected on one page, with
a sticky post on top. And I want a link for that  page to be displayed
in the K2 menu just like any other page.

Google tells me I could use PHPExec or runPHP or some other plugin to
insert php code into a static page. But Google also tells me that
putting code into pages is to be avoided at great length.

So what are my other alternatives?

alex

-- 
http://polite.se
From viper at viper007bond.com  Wed Aug 29 08:56:53 2007
From: viper at viper007bond.com (Viper007Bond)
Date: Wed Aug 29 08:57:00 2007
Subject: [wp-hackers] Page with only articles from category x.
In-Reply-To: <65955b6b0708290115m12f3d060ve516e85ba17946ce@mail.gmail.com>
References: <65955b6b0708290115m12f3d060ve516e85ba17946ce@mail.gmail.com>
Message-ID: <8f93a7390708290156g3f729314y941d4dbb57a37d2e@mail.gmail.com>

If you need help modifying K2, this isn't the place for that. This is
however: http://getk2.com/forum/

But as for the actual WordPress related question, why use a Page? Why not
just use the category's archive listing? And to stick a post, there are some
various plugins to do that. Check the WP Codex.

On 8/29/07, Alex Polite <mylists@polite.se> wrote:
>
> I use K2.
>
> I want all posts from a specific category collected on one page, with
> a sticky post on top. And I want a link for that  page to be displayed
> in the K2 menu just like any other page.
>
> Google tells me I could use PHPExec or runPHP or some other plugin to
> insert php code into a static page. But Google also tells me that
> putting code into pages is to be avoided at great length.
>
> So what are my other alternatives?
>
> alex
>
> --
> http://polite.se
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>



-- 
Viper007Bond | http://www.viper007bond.com/
From mylists at polite.se  Wed Aug 29 09:15:43 2007
From: mylists at polite.se (Alex Polite)
Date: Wed Aug 29 09:15:47 2007
Subject: [wp-hackers] Page with only articles from category x.
In-Reply-To: <8f93a7390708290156g3f729314y941d4dbb57a37d2e@mail.gmail.com>
References: <65955b6b0708290115m12f3d060ve516e85ba17946ce@mail.gmail.com>
	<8f93a7390708290156g3f729314y941d4dbb57a37d2e@mail.gmail.com>
Message-ID: <65955b6b0708290215g2e3713b8rd8a034a3942803f6@mail.gmail.com>

2007/8/29, Viper007Bond <viper@viper007bond.com>:
> If you need help modifying K2, this isn't the place for that. This is
> however: http://getk2.com/forum/

I just really don't like forums :)

>
> But as for the actual WordPress related question, why use a Page? Why not
> just use the category's archive listing? And to stick a post, there are some
> various plugins to do that. Check the WP Codex.

But how do I get the link to a category listing to show up in the menu
alongside "About" and "Blog"?

alex

-- 
http://polite.se
From jeremy.visser at gmail.com  Wed Aug 29 09:32:40 2007
From: jeremy.visser at gmail.com (Jeremy Visser)
Date: Wed Aug 29 09:32:54 2007
Subject: [wp-hackers] 2 Questions: $_REQUEST equivalent and using GET
	in	mod_rewrite
In-Reply-To: <46D456AE.9090402@branson.com>
References: <e9f3ce460708280801i36a7ab09m4debd4a03fbb9980@mail.gmail.com>
	<46D456AE.9090402@branson.com>
Message-ID: <46D53D38.9090804@gmail.com>

jacobsantos@branson.com wrote:
> 1. Using $_REQUEST is like asking hackers to pwn your site. "Yes, I want
> you to hack me" Don't use it. The reason for WordPress using $_POST for
> form data and $_GET for url data is for the same reason register globals
> is terrible security risk. $_REQUEST is similar to using $_REQUEST and
> you don't know if it is coming from the Server (HTTP), form, or url.

Huh ?!

It is possible to inject malicious data in GET, POST, and COOKIEs, so,
say, only using $_POST will mean that rather than a cracker being able
to use GET to run the exploit, he will have to spend about 30 seconds
more of his time (remember: crackers have a lot of patience) creating a
simple HTML form that POSTs instead. Not any more secure.
From robin.adr at gmail.com  Wed Aug 29 10:05:42 2007
From: robin.adr at gmail.com (Robin Adrianse)
Date: Wed Aug 29 10:05:49 2007
Subject: [wp-hackers] Page with only articles from category x.
In-Reply-To: <65955b6b0708290215g2e3713b8rd8a034a3942803f6@mail.gmail.com>
References: <65955b6b0708290115m12f3d060ve516e85ba17946ce@mail.gmail.com>
	<8f93a7390708290156g3f729314y941d4dbb57a37d2e@mail.gmail.com>
	<65955b6b0708290215g2e3713b8rd8a034a3942803f6@mail.gmail.com>
Message-ID: <d135ca9c0708290305l414fe95k4d4ad697c5a3d3db@mail.gmail.com>

Hook into the wp_list_pages filter.

On 8/29/07, Alex Polite <mylists@polite.se> wrote:
> 2007/8/29, Viper007Bond <viper@viper007bond.com>:
> > If you need help modifying K2, this isn't the place for that. This is
> > however: http://getk2.com/forum/
>
> I just really don't like forums :)
>
> >
> > But as for the actual WordPress related question, why use a Page? Why not
> > just use the category's archive listing? And to stick a post, there are
> some
> > various plugins to do that. Check the WP Codex.
>
> But how do I get the link to a category listing to show up in the menu
> alongside "About" and "Blog"?
>
> alex
>
> --
> http://polite.se
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
From bghervan at adobe.com  Wed Aug 29 10:20:06 2007
From: bghervan at adobe.com (Bogdan Ghervan)
Date: Wed Aug 29 10:20:36 2007
Subject: [wp-hackers] Proposal for comment moderation support in XML-RPC API
Message-ID: <E16A295A0FCDCD4B96A02B0AF85769AD09A2AB@eurmail.eur.adobe.com>

Hello all,

 

I work at an application that can run basic blog actions making calls to
the WordPress' XML-RPC API. 

 

Now I want to be able to retrieve and approve comments directly from my
app, something that the API doesn't endorse. I have already started
writing the methods that can handle this type of operations and I need
to know how to submit them. Is it OK to commit the changes to the
repository?

 

I checked with the timeline of milestone 2.3 and I found out that the
feature freeze occurred on Aug 23. I will be ready to submit
modifications in a couple of days after I finish implementation and
conduct some tests of my own.  If the changes can't make it to 2.3, what
is the time they could get in a public release?

 

Should I go and submit my proposal as a feature by pushing a ticket into
trac?

 

Best regards,

Bogdan Ghervan

From wordpress at dd32.id.au  Wed Aug 29 10:33:53 2007
From: wordpress at dd32.id.au (DD32)
Date: Wed Aug 29 10:33:38 2007
Subject: [wp-hackers] Proposal for comment moderation support in XML-RPC
	API
In-Reply-To: <E16A295A0FCDCD4B96A02B0AF85769AD09A2AB@eurmail.eur.adobe.com>
References: <E16A295A0FCDCD4B96A02B0AF85769AD09A2AB@eurmail.eur.adobe.com>
Message-ID: <op.txtgyrnok6w4mc@dd32.no-ip.com>

On Wed, 29 Aug 2007 20:20:06 +1000, Bogdan Ghervan <bghervan@adobe.com>
wrote:
> Now I want to be able to retrieve and approve comments directly from my
> app, something that the API doesn't endorse. I have already started
> writing the methods that can handle this type of operations and I need
> to know how to submit them. Is it OK to commit the changes to the
> repository?

> Should I go and submit my proposal as a feature by pushing a ticket into
> trac?

All commits to WP go through a bit of a community review via Trac and then
get commited by a select few people into the core codebase.

Create a Trac Ticket with what you'd like to achieve, You can attach
Patches for the functionality to the Ticket as well.

I'm sure those who mainly deal with the RPC would be willing to look into
your enhancement ideas.

As for when they'd be available in a WordPress Release, I think new
enhancement like that would be slated for 2.4(Whenever thats due out --
Mid Jan?) rather than a 2.3.x "bugfix" release, But i might be wrong
there, I'm not fully sure of what the line is for when something is/isnt
put into .x releases.
-- 
Using Opera's revolutionary e-mail client: http://www.opera.com/mail/
From dragonwing at dragonu.net  Wed Aug 29 13:07:15 2007
From: dragonwing at dragonu.net (Jacob Santos)
Date: Wed Aug 29 13:07:26 2007
Subject: [wp-hackers] Fixing Bugs
In-Reply-To: <61368E76-8D21-423F-B5FF-D8ABA7B90055@tekartist.org>
References: <F384F5BF-C422-4B83-A3CF-287B98F2221E@googlemail.com>	<46D36EBB.90804@gmail.com>	<3913EDC2-962A-45B6-85D6-6F4B2D117FBA@googlemail.com>	<46D4477A.4010107@branson.com>
	<61368E76-8D21-423F-B5FF-D8ABA7B90055@tekartist.org>
Message-ID: <46D56F83.9070208@dragonu.net>

Well, the Subversion Repository that I set up at 
<http://svn.dragonu.net/WordPress/UnitTest>. The others are part of this 
list and you can get the information from them. The repository is public 
but requires a username and password for commit access. It isn't pretty, 
but I'm more worried about getting coverage of code and writing complete 
tests of code coverage. I suppose, if you wish to help, you can email me 
and we can discuss that.

There are also several bug tickets that has progress for documenting 
several wp-includes files.

Jacob Santos

Stephane Daury wrote:
> Hey Jacob,
>
> Can you point me/us to a URL I can read up on the progress and get 
> involved with the testing bits?
> I'm busy as hell, but I think its worth the effort, especially if 
> there are already people driving such a project.
>
> Stephane
>
>
>
>
> On Aug 28, 2007, at 12:04, jacobsantos@branson.com wrote:
>
>> I would advise helping with the current documentation and unit 
>> testing/characterization testing/functional testing. I could use help 
>> and I'm sure the others doing it would like help also. It is 
>> happening, but it would go a lot quicker if more people started 
>> writing tests for the library.
>>
>> Jacob Santos
>>
>> Geoffrey Sneddon wrote:
>>>
>>> On 28 Aug 2007, at 01:39, Jeremy Visser wrote:
>>>
>>>> Geoffrey Sneddon wrote:
>>>>> The number in bugs in WP has grown steadily over several years, 
>>>>> yet the
>>>>> number of unfixed ones increasing quicker still. We need a release 
>>>>> that
>>>>> is stable. We need a release where everything _works_. Can we have 
>>>>> one
>>>>> release which includes _nothing_ but bug fixes. There are 409 open 
>>>>> bugs
>>>>> according to trac (and I expect there are others marked as
>>>>> wontfix/invalid without reason). There are some massively annoying 
>>>>> bugs
>>>>> for users, not least things like being unable to use IRIs in 
>>>>> sanitised
>>>>> content (#4570, target 2.4).
>>>>
>>>> Shouldn't you maybe be looking at using the 2.0 branch?
>>>
>>> I am using the 2.0 branch ? to me it still seems buggier than < 2 
>>> releases were. 2.0 has some bugs that make it almost completely 
>>> unusable for me, which despite Mark Jaquith telling me they'd be 
>>> fixed, Ryan Boren contradicted him if not a week later. Not only are 
>>> bugs being introduced at a quicker and quicker rate, but bugs are 
>>> being regressed more and more often. A large majority of WP could be 
>>> tested automatically, and badly needs to be. This has been suggested 
>>> several times before, but nothing, to my knowledge, has ever really 
>>> happened about it.
>>>
>>>
>>> - Geoffrey Sneddon
>>>
>>>
>>> _______________________________________________
>>> wp-hackers mailing list
>>> wp-hackers@lists.automattic.com
>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>>
>>>
>>>
>>
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers@lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
From chris.hearn01 at ntlworld.com  Wed Aug 29 14:04:18 2007
From: chris.hearn01 at ntlworld.com (Chris)
Date: Wed Aug 29 14:04:32 2007
Subject: [wp-hackers] Page with only articles from category x.
In-Reply-To: <65955b6b0708290215g2e3713b8rd8a034a3942803f6@mail.gmail.com>
References: <65955b6b0708290115m12f3d060ve516e85ba17946ce@mail.gmail.com>	<8f93a7390708290156g3f729314y941d4dbb57a37d2e@mail.gmail.com>
	<65955b6b0708290215g2e3713b8rd8a034a3942803f6@mail.gmail.com>
Message-ID: <46D57CE2.2020105@ntlworld.com>

Alex,
I do exactly this in my custom theme for a club website.
Basically the menu shows pages, with categories linked to the pages, 
then I show the page as the sticky top part, and retrieve posts for that 
page which show underneath.
This has the advantage that the editors of my site can edit the posts, 
and pages if I permit.
You can see the effect at http://www.budworthsc.org.uk/
- I can give you further details of the wp template I use if you email 
me directly at the address below.
Cheers
Chris

    ********************************************************************** 
    Chris Hearn 
    *email:* chris.hearn01@ntlworld.com 
    ********************************************************************** 



Alex Polite wrote:
> 2007/8/29, Viper007Bond <viper@viper007bond.com>:
>   
>> If you need help modifying K2, this isn't the place for that. This is
>> however: http://getk2.com/forum/
>>     
>
> I just really don't like forums :)
>
>   
>> But as for the actual WordPress related question, why use a Page? Why not
>> just use the category's archive listing? And to stick a post, there are some
>> various plugins to do that. Check the WP Codex.
>>     
>
> But how do I get the link to a category listing to show up in the menu
> alongside "About" and "Blog"?
>
> alex
>
>   
From docwhat+list.wp.hackers at gerf.org  Wed Aug 29 14:24:53 2007
From: docwhat+list.wp.hackers at gerf.org (Christian =?iso-8859-1?Q?H=F6ltje?=)
Date: Wed Aug 29 14:25:01 2007
Subject: [wp-hackers] Re: Sharing Users/authentication
In-Reply-To: <690CF91A-D6CE-44E9-9051-F91F8C47500E@striderweb.com>
References: <9b1b9dab0708241054g749e24c0md73235d986d24bfa@mail.gmail.com>
	<46CF1E73.6000407@branson.com>
	<B9F84AB9-E5E4-4B3A-945E-C15C899285B5@striderweb.com>
	<46CF9A48.8000403@dragonu.net>
	<AB809068-D235-4F76-B15C-FD01DE5D7B7A@striderweb.com>
	<C70AAC98-E574-4F51-8025-8E1827E8BA33@striderweb.com>
	<44E9BD21-222D-415D-87EF-6B3E44D194C5@txfx.net>
	<690CF91A-D6CE-44E9-9051-F91F8C47500E@striderweb.com>
Message-ID: <20070829142453.GA3711@gerf.org>

* Stephen Rider (wp-hackers@striderweb.com) [070828 16:40]:
> 
> On Aug 28, 2007, at 3:22 PM, Mark Jaquith wrote:
> 
> >On Aug 25, 2007, at 12:20 PM, Stephen Rider wrote:
> >
> >>The problem appears to be the "wp_capabilities" and  
> >>"wp_user_level" fields in the wp_usermeta table.  WordPress needs  
> >>these field names to match the active table prefix.
> >
> >This was an intentional design decision, to allow users to have  
> >different permissions on different blogs.
> >
> >Still, it might be nice to have a "unified permissions" mode  
> >whereby the slave installs use the master's permissions.
> >
> >I've opened a ticket to that end:
> >
> >	http://trac.wordpress.org/ticket/4846
> 
> Jamie says:
> >The capabilities are stored as
> >{tableprefix}_{blogid}_capabilities, so it would be something like
> >wp_1_capabilities.
> 
> Okay, so this is something that was implemented for WordPressMU, but  
> it's 1) not fully implemented, as the {blogid} in her example is not  
> present, and 2) it's not necessary for vanilla single-user WordPress.
> 
> I understand its usefulness for MU, but is there any reason for it to  
> be here in regular WordPress?  Since there is a code difference here  
> anyway (compared to MU), why not just remove this redundancy entirely?
> 
> That seems far simpler (and less bug-prone) than adding code to  
> distinguish between two options -- one of which isn't used!  :)

Furthermore, you can include the blog 'prefix' in the table itself.
Just add a new column.  Creating new tables every time is silly and
not normalized db design.

Ciao!

-- 
With or without religion, you would have good people doing good things and evil people doing evil things. But for good people to do evil things, that takes religion.
       -- Steven Weinberg, quoted in The New York Times, April 20, 1999

The Doctor What: Guru to the Gods                http://docwhat.gerf.org/
docwhat *at* gerf *dot* org                                        KF6VNC
From otto at ottodestruct.com  Wed Aug 29 16:32:56 2007
From: otto at ottodestruct.com (Otto)
Date: Wed Aug 29 16:32:59 2007
Subject: [wp-hackers] protecting wp-content/plugins ?
In-Reply-To: <7d6d8bd0708231612p62815edau47f403ab26750ca2@mail.gmail.com>
References: <ae81acd10708160700s596e5d93w6086b76c45f73710@mail.gmail.com>
	<46C6E20E.5070702@freecharity.org.uk>
	<7d6d8bd0708180809y779fe291w3b555c3eb0bf59ba@mail.gmail.com>
	<E9EB9DB4-CE73-4421-8B60-178313006ADE@viveka.net.au>
	<161617690708211123t5101cc6er2b7a0e95489754ab@mail.gmail.com>
	<E2440484-D3DC-44EA-BE35-B28910E0EAE5@viveka.net.au>
	<161617690708221239l74d6fc1eqf5017eb8db66675a@mail.gmail.com>
	<7d6d8bd0708221730r17f0942dx7cdef047540c9c03@mail.gmail.com>
	<161617690708230823x7e566e7cucc74bf355f2855ff@mail.gmail.com>
	<7d6d8bd0708231612p62815edau47f403ab26750ca2@mail.gmail.com>
Message-ID: <161617690708290932of07d785r35d10f4649977cd@mail.gmail.com>

On 8/23/07, Tom Barta <tbarta@gmail.com> wrote:
> Sure it does.  If I have a PHP script that is vulnerable when executed
> directly, but then I move it out of the document root, it can no longer be
> executed directly (via HTTP requests) and therefore is no longer a real
> vulnerability (assuming it's secure as a library).

No, it doesn't. Any plugin that you can exploit directly can also be
exploited indirectly as well. Plugins are include'd into WordPress.
They even get globals. Examine wp-settings.php to understand how
plugins work.

> Obviously, you can't take scripts that are meant to be directly executed and
> remove them from the document root like this.  But if what someone in the
> thread said earlier is true (80-90% of plugins are pure library code), that
> means 80-90% of the plugins can be moved outside of the document root,
> thereby reducing the likelihood that a newly-discovered exploit is actually
> usable.

This sort of trickery does prevent you from exploiting it directly,
but not from exploiting it indirectly, through WordPress. So this
*does nothing to help* as far as preventing you from getting exploited
goes. It doesn't fix the exploit. It doesn't prevent the exploit. It
is, in fact, totally useless.

On 8/25/07, Omry Yadan <omry@yadan.net> wrote:
> the main argument against this is:
> attackers don't care, they just run all the existing exploits against
> random sites.
>
> you making the assumption that all attackers are script kiddies.

No, I'm telling you that exploiting a site involves making HTTP
requests. Scanning a site for exploits actually involves making HTTP
requests as well. So, why bother to scan at all? Simply try the
exploit. It's the same amount of overhead, there's no reason to *scan*
for anything.

> what about an real hacker (cracker, whatever)  that wants to screw a
> specific site?
> he will first try existing scripts, and when this fails he will start to
> really learn the site.

True, however knowledge of what plugins somebody is running doesn't
help him unless the plugins are exploitable.

Assume I have a site with an exploitable plugin. Assume I've taken
steps to hide the plugins from direct access like mentioned in this
thread.
a) Plugins often announce themselves by their actions. If you know
WordPress and themes pretty well, you can usually look at the source
to a site and tell several plugins that they are running. Then you can
look for exploits for those.
b) You can look for generic exploits for WordPress and plugins and try them all.

Eventually, one of these two is going to pay off. Finding an unknown
exploit in a plugin *is not trivial*. If the guy is good enough to do
that, he's probably good enough to not bother trying and to instead
try to hack the password or social engineer the hosting services.

Also, assuming you've disabled directory listing, he's going to have
to "scan" for plugins by name to know what plugins you're running, if
they're not obvious. Meaning that he'll have to know the names.
Meaning that he'll look for known vulnerabilities and see if you have
those. What else can he do? Download random plugins, find unknown
vulnerabilities in them, then check to see if you have them? Makes no
sense at all.

What I'm saying is that the having somebody know that you are running
some specific plugin doesn't put you at any sort of extra risk
whatsoever. Disable Directory Indexing to stop search engines from
seeing them, and then get on with life. Going to extreme amounts of
effort by adding PHP code to plugins, like in this thread, is useless.
Worse than useless, because it's false security: You think you're
safer when you're actually not.
From otto at ottodestruct.com  Wed Aug 29 16:36:18 2007
From: otto at ottodestruct.com (Otto)
Date: Wed Aug 29 16:36:23 2007
Subject: [wp-hackers] Page with only articles from category x.
In-Reply-To: <65955b6b0708290115m12f3d060ve516e85ba17946ce@mail.gmail.com>
References: <65955b6b0708290115m12f3d060ve516e85ba17946ce@mail.gmail.com>
Message-ID: <161617690708290936kcb1f624uae669793f1c17a89@mail.gmail.com>

On 8/29/07, Alex Polite <mylists@polite.se> wrote:
> I use K2.
>
> I want all posts from a specific category collected on one page, with
> a sticky post on top. And I want a link for that  page to be displayed
> in the K2 menu just like any other page.
>
> Google tells me I could use PHPExec or runPHP or some other plugin to
> insert php code into a static page. But Google also tells me that
> putting code into pages is to be avoided at great length.
>
> So what are my other alternatives?

Page Templates: http://codex.wordpress.org/Pages#Page_Templates

While these aren't necessarily the best use of them, IMO, if you want
to make a single Page that does PHP code, this is the best way.
PHPExec and runPHP and such should be avoided unless absolutely
necessary.
From hovenko at linpro.no  Wed Aug 29 17:02:07 2007
From: hovenko at linpro.no (Knut-Olav Hoven)
Date: Wed Aug 29 17:02:14 2007
Subject: [wp-hackers] protecting wp-content/plugins ?
In-Reply-To: <161617690708290932of07d785r35d10f4649977cd@mail.gmail.com>
References: <ae81acd10708160700s596e5d93w6086b76c45f73710@mail.gmail.com>
	<7d6d8bd0708231612p62815edau47f403ab26750ca2@mail.gmail.com>
	<161617690708290932of07d785r35d10f4649977cd@mail.gmail.com>
Message-ID: <200708291902.07776.hovenko@linpro.no>

On Wednesday 29 August 2007 18:32:56 Otto wrote:
> What I'm saying is that the having somebody know that you are running
> some specific plugin doesn't put you at any sort of extra risk
> whatsoever. Disable Directory Indexing to stop search engines from
> seeing them, and then get on with life. Going to extreme amounts of
> effort by adding PHP code to plugins, like in this thread, is useless.
> Worse than useless, because it's false security: You think you're
> safer when you're actually not.

From my point of view the biggest reason for not including empty index.php 
files everywhere is in fact all those empty files laying around; loose ends.

Therefore i suggest we remove the wp-content/index.php file too (not sure if 
it still exists in trunk though). We need that one as much (or as little) as 
an empty index.php file in wp-content/uploads/.


-- 
Knut-Olav Hoven
Systemutvikler               mob: +47 986 71 700
Linpro AS                    http://www.linpro.no/
From mylists at polite.se  Wed Aug 29 17:19:27 2007
From: mylists at polite.se (Alex Polite)
Date: Wed Aug 29 17:19:36 2007
Subject: [wp-hackers] Page with only articles from category x.
In-Reply-To: <161617690708290936kcb1f624uae669793f1c17a89@mail.gmail.com>
References: <65955b6b0708290115m12f3d060ve516e85ba17946ce@mail.gmail.com>
	<161617690708290936kcb1f624uae669793f1c17a89@mail.gmail.com>
Message-ID: <65955b6b0708291019k4dbadbah6e73cfc707e7feda@mail.gmail.com>

2007/8/29, Otto <otto@ottodestruct.com>:
> Page Templates: http://codex.wordpress.org/Pages#Page_Templates

OK. I'll read up on that.

>
> While these aren't necessarily the best use of them, IMO, if you want
> to make a single Page that does PHP code, this is the best way.

> PHPExec and runPHP and such should be avoided unless absolutely
> necessary.

For security reasons or?

alex


-- 
http://polite.se
From p at owind.com  Wed Aug 29 18:57:57 2007
From: p at owind.com (Paveo Chen)
Date: Wed Aug 29 18:58:12 2007
Subject: [wp-hackers] PHP-gettext replace
References: <65955b6b0708290115m12f3d060ve516e85ba17946ce@mail.gmail.com>,
	<161617690708290936kcb1f624uae669793f1c17a89@mail.gmail.com>,
	<65955b6b0708291019k4dbadbah6e73cfc707e7feda@mail.gmail.com>
Message-ID: <200708300257549370660@owind.com>

If my PHP support php gettext extension, can I replace WP's PHP-gettext with it?

The Bests,	
		 
Paveo Chen
http://www.owind.com/pub
2007-08-30

From awgandrews at gmail.com  Wed Aug 29 19:00:39 2007
From: awgandrews at gmail.com (Alex Andrews)
Date: Wed Aug 29 19:00:46 2007
Subject: [wp-hackers] 2 Questions: $_REQUEST equivalent and using GET in
	mod_rewrite
In-Reply-To: <op.txsqooeyk6w4mc@dd32.no-ip.com>
References: <e9f3ce460708280801i36a7ab09m4debd4a03fbb9980@mail.gmail.com>
	<1188319394.5537.11.camel@localhost>
	<e9f3ce460708281001l1191b129r825cec1b8d0a0f7f@mail.gmail.com>
	<op.txsqooeyk6w4mc@dd32.no-ip.com>
Message-ID: <e9f3ce460708291200w1d1e23f1pa20e32c0451bd72d@mail.gmail.com>

On 29/08/2007, DD32 <wordpress@dd32.id.au> wrote:
> > How can I get /artists/x/ to translate to artists.php?id=x or whatever.
> By the sounds of it, you've developed the standalone app not quite how
> you'd write a WP plugin.

Now I am cooking on gas. Decided to make a swish template loader to
intergate the previously existing script. But there is a further
mod_rewrite problem.

Here is the current function:

add_action('generate_rewrite_rules', 'ribcage_add_rewrite_rules');
function ribcage_add_rewrite_rules( $wp_rewrite ) {
	$new_rules = array(
		"(artists)/(.*)" => 'index.php?ribcage=1&artist_slug=' .
$wp_rewrite->preg_index(2),
		"(artists)" => 'index.php?ribcage=1&artist_index=1'
	);

	$wp_rewrite->rules = $wp_rewrite->rules + $new_rules;
}

Now this obviously passes like this
/artists/mrdave
And that works fine. But how about if one wants to pass more than one
variable. For example:
/artists/mrdave/bio
or
artist/mrdave/myrecord

where my record is the name of a record or whatever. Or whatever. I
presume this has something to do with preg_index();? Perhaps.

Thanks for your continued assistance.

Thanks again

Alex
From lists.automattic.com at callum-macdonald.com  Wed Aug 29 22:46:43 2007
From: lists.automattic.com at callum-macdonald.com (Callum Macdonald)
Date: Wed Aug 29 22:47:37 2007
Subject: [wp-hackers] Adding phpmailer options (smtp for example)
Message-ID: <46D5F753.70000@callum-macdonald.com>

G'day,

One of our sites had an issue today where it was dying with the error:
The e-mail could not be sent.
Possible reason: your host may have disabled the mail() function...

Investigating, I realise that phpmailer is bundled with WordPress and 
it's configured to use PHP's mail() function by default. That seems 
sensible, however, I think it would be useful to add some options to 
allow the user to configure it's use. For example, to send mail by SMTP 
and then specify a host (even a username/password).

Before I bash out some code and send a patch, I thought I'd ask for 
feedback. Can anyone see any flaws in this plan? Would the options be 
best implemented in the options database? Which admin screen would be 
most relevant? If the user specifies an invalid server, how will that 
affect the system? Is that more or less likely than mail() being disabled?

I think the current default is sensible, but options would be useful. If 
I don't hear anything in the next few days I'll write some code anyway 
and we can take it from there.

Cheers,


Callum.

From ryan at boren.nu  Wed Aug 29 23:28:45 2007
From: ryan at boren.nu (Ryan Boren)
Date: Wed Aug 29 23:28:50 2007
Subject: [wp-hackers] PHP-gettext replace
In-Reply-To: <200708300257549370660@owind.com>
References: <65955b6b0708290115m12f3d060ve516e85ba17946ce@mail.gmail.com>
	<161617690708290936kcb1f624uae669793f1c17a89@mail.gmail.com>
	<65955b6b0708291019k4dbadbah6e73cfc707e7feda@mail.gmail.com>
	<200708300257549370660@owind.com>
Message-ID: <c8f37c930708291628t8fb234cha0f0dc866118f74b@mail.gmail.com>

On 8/29/07, Paveo Chen <p@owind.com> wrote:
> If my PHP support php gettext extension, can I replace WP's PHP-gettext with it?

You would have to make changes in l10n.php.  We don't currently
support the gettext extension out of the box.
From wordpress at dd32.id.au  Thu Aug 30 01:20:17 2007
From: wordpress at dd32.id.au (DD32)
Date: Thu Aug 30 01:20:10 2007
Subject: [wp-hackers] 2 Questions: $_REQUEST equivalent and using GET in
	mod_rewrite
In-Reply-To: <e9f3ce460708291200w1d1e23f1pa20e32c0451bd72d@mail.gmail.com>
References: <e9f3ce460708280801i36a7ab09m4debd4a03fbb9980@mail.gmail.com>
	<1188319394.5537.11.camel@localhost>
	<e9f3ce460708281001l1191b129r825cec1b8d0a0f7f@mail.gmail.com>
	<op.txsqooeyk6w4mc@dd32.no-ip.com>
	<e9f3ce460708291200w1d1e23f1pa20e32c0451bd72d@mail.gmail.com>
Message-ID: <op.txulz3sck6w4mc@dd32.no-ip.com>

On Thu, 30 Aug 2007 05:00:39 +1000, Alex Andrews <awgandrews@gmail.com>
wrote:

> On 29/08/2007, DD32 <wordpress@dd32.id.au> wrote:
>> > How can I get /artists/x/ to translate to artists.php?id=x or  
>> whatever.
>> By the sounds of it, you've developed the standalone app not quite how
>> you'd write a WP plugin.
>
> Now I am cooking on gas. Decided to make a swish template loader to
> intergate the previously existing script. But there is a further
> mod_rewrite problem.
>
> Here is the current function:
>
> add_action('generate_rewrite_rules', 'ribcage_add_rewrite_rules');
> function ribcage_add_rewrite_rules( $wp_rewrite ) {
> 	$new_rules = array(
> 		"(artists)/(.*)" => 'index.php?ribcage=1&artist_slug=' .
> $wp_rewrite->preg_index(2),
> 		"(artists)" => 'index.php?ribcage=1&artist_index=1'
> 	);
>
> 	$wp_rewrite->rules = $wp_rewrite->rules + $new_rules;
> }
>
> Now this obviously passes like this
> /artists/mrdave
> And that works fine. But how about if one wants to pass more than one
> variable. For example:
> /artists/mrdave/bio
> or
> artist/mrdave/myrecord
>
> where my record is the name of a record or whatever. Or whatever. I
> presume this has something to do with preg_index();? Perhaps.

You'd use something like this for that:
   	$new_rules = array(
   		"(artists)/(.*)/(.*)" => 'index.php?ribcage=1&artist_slug=' .
$wp_rewrite->preg_index(2) . '&artist_page=' . $wp_rewrite->preg_index(3),
   		"(artists)/(.*)" => 'index.php?ribcage=1&artist_slug=' .
$wp_rewrite->preg_index(2),
   		"(artists)" => 'index.php?ribcage=1&artist_index=1'
   	);

You'd then also add the artist_page query var:
add_filter('query_vars', 'test_queryvars' );
function test_queryvars( $qvars ){
	$qvars[] = 'artist_slug';
	$qvars[] = 'artist_page';
	return $qvars;
}

and then finally, access them:
die("Plugin for Artist: " . $wp_query->query_vars['artist_slug'] . " page:
" . $wp_query->query_vars['artist_page']);



With the rewrite rules you just look at it as a Regular Expression(Know
Regular expressions at all?),
in the regular expression: "(artists)/(.*)/(.*)" you suround matches with
the () brackets,
Then in the replacement rule: 'index.php?ribcage=1&artist_slug=' .
$wp_rewrite->preg_index(2) . '&artist_page=' . $wp_rewrite->preg_index(3),

You build a string, but use ->preg_index(n) for the match you want, Eg,
the first is ->preg_index(1), the 2nd set of brackets will be
->preg_index(2), the 3rd, ->preg_index(2), right up to the number of
matches you have in your rule.
-- 
Using Opera's revolutionary e-mail client: http://www.opera.com/mail/
From jeremy.visser at gmail.com  Thu Aug 30 01:54:47 2007
From: jeremy.visser at gmail.com (Jeremy Visser)
Date: Thu Aug 30 01:54:57 2007
Subject: [wp-hackers] add_filter before or after function?
In-Reply-To: <op.txulz3sck6w4mc@dd32.no-ip.com>
References: <e9f3ce460708280801i36a7ab09m4debd4a03fbb9980@mail.gmail.com>	<1188319394.5537.11.camel@localhost>	<e9f3ce460708281001l1191b129r825cec1b8d0a0f7f@mail.gmail.com>	<op.txsqooeyk6w4mc@dd32.no-ip.com>	<e9f3ce460708291200w1d1e23f1pa20e32c0451bd72d@mail.gmail.com>
	<op.txulz3sck6w4mc@dd32.no-ip.com>
Message-ID: <46D62367.5070902@gmail.com>

DD32 wrote:
> add_filter('query_vars', 'test_queryvars' );
> function test_queryvars( $qvars ){
>     $qvars[] = 'artist_slug';
>     $qvars[] = 'artist_page';
>     return $qvars;
> }

I notice you add the add_filter() _before_ you declare the actual
function. Others do that too, while other add the add_filter() (or
add_action()) _after_ the function.

Which is best?

I tend to put it after the function because, well, if you put it before,
aren't you referencing a non-existant function? What if add_filter() one
day adds a check to see if the function_exists()? If you do add_filter()
first, then won't it break?

I'm not knowledgeable enough with PHP to really know which is right.
From yahgrp at poplarware.com  Thu Aug 30 02:03:53 2007
From: yahgrp at poplarware.com (Jennifer Hodgdon)
Date: Thu Aug 30 02:03:10 2007
Subject: [wp-hackers] add_filter before or after function?
In-Reply-To: <46D62367.5070902@gmail.com>
References: <e9f3ce460708280801i36a7ab09m4debd4a03fbb9980@mail.gmail.com>	<1188319394.5537.11.camel@localhost>	<e9f3ce460708281001l1191b129r825cec1b8d0a0f7f@mail.gmail.com>	<op.txsqooeyk6w4mc@dd32.no-ip.com>	<e9f3ce460708291200w1d1e23f1pa20e32c0451bd72d@mail.gmail.com>	<op.txulz3sck6w4mc@dd32.no-ip.com>
	<46D62367.5070902@gmail.com>
Message-ID: <46D62589.6020804@poplarware.com>

Jeremy Visser wrote:
> DD32 wrote:
>> add_filter('query_vars', 'test_queryvars' );
>> function test_queryvars( $qvars ){
>>     $qvars[] = 'artist_slug';
>>     $qvars[] = 'artist_page';
>>     return $qvars;
>> }
> 
> I notice you add the add_filter() _before_ you declare the actual
> function. Others do that too, while other add the add_filter() (or
> add_action()) _after_ the function.
> 
> Which is best?

Actually, it doesn't matter. When you call add_filter, you are only 
passing in the name of the function you want to use later for 
filtering. By the time WP calls the function to filter something, the 
function will be defined.

     --Jennifer

-- 
Jennifer Hodgdon

Poplar ProductivityWare * www.poplarware.com
Web Databases/Scripts * Modeling/Analysis/Palm OS Software

From speedboxer at gmail.com  Thu Aug 30 02:11:24 2007
From: speedboxer at gmail.com (Matt)
Date: Thu Aug 30 02:11:29 2007
Subject: [wp-hackers] add_filter before or after function?
In-Reply-To: <46D62589.6020804@poplarware.com>
References: <e9f3ce460708280801i36a7ab09m4debd4a03fbb9980@mail.gmail.com>
	<1188319394.5537.11.camel@localhost>
	<e9f3ce460708281001l1191b129r825cec1b8d0a0f7f@mail.gmail.com>
	<op.txsqooeyk6w4mc@dd32.no-ip.com>
	<e9f3ce460708291200w1d1e23f1pa20e32c0451bd72d@mail.gmail.com>
	<op.txulz3sck6w4mc@dd32.no-ip.com> <46D62367.5070902@gmail.com>
	<46D62589.6020804@poplarware.com>
Message-ID: <b88434820708291911g2d7b9147m439cf7134348b9a6@mail.gmail.com>

Also, can't functions be called no matter where they're defined in a file?

On 8/29/07, Jennifer Hodgdon <yahgrp@poplarware.com> wrote:
>
> Jeremy Visser wrote:
> > DD32 wrote:
> >> add_filter('query_vars', 'test_queryvars' );
> >> function test_queryvars( $qvars ){
> >>     $qvars[] = 'artist_slug';
> >>     $qvars[] = 'artist_page';
> >>     return $qvars;
> >> }
> >
> > I notice you add the add_filter() _before_ you declare the actual
> > function. Others do that too, while other add the add_filter() (or
> > add_action()) _after_ the function.
> >
> > Which is best?
>
> Actually, it doesn't matter. When you call add_filter, you are only
> passing in the name of the function you want to use later for
> filtering. By the time WP calls the function to filter something, the
> function will be defined.
>
>     --Jennifer
>
> --
> Jennifer Hodgdon
>
> Poplar ProductivityWare * www.poplarware.com
> Web Databases/Scripts * Modeling/Analysis/Palm OS Software
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>



-- 
Matt (speedboxer@gmail.com)
http://mattsblog.ca/ | http://livemp.net/
From wordpress at dd32.id.au  Thu Aug 30 02:17:30 2007
From: wordpress at dd32.id.au (DD32)
Date: Thu Aug 30 02:17:21 2007
Subject: [wp-hackers] add_filter before or after function?
In-Reply-To: <46D62367.5070902@gmail.com>
References: <e9f3ce460708280801i36a7ab09m4debd4a03fbb9980@mail.gmail.com>
	<1188319394.5537.11.camel@localhost>
	<e9f3ce460708281001l1191b129r825cec1b8d0a0f7f@mail.gmail.com>
	<op.txsqooeyk6w4mc@dd32.no-ip.com>
	<e9f3ce460708291200w1d1e23f1pa20e32c0451bd72d@mail.gmail.com>
	<op.txulz3sck6w4mc@dd32.no-ip.com> <46D62367.5070902@gmail.com>
Message-ID: <op.txuongahk6w4mc@dd32.no-ip.com>

On Thu, 30 Aug 2007 11:54:47 +1000, Jeremy Visser
<jeremy.visser@gmail.com> wrote:

> DD32 wrote:
>> add_filter('query_vars', 'test_queryvars' );
>> function test_queryvars( $qvars ){
>>     $qvars[] = 'artist_slug';
>>     $qvars[] = 'artist_page';
>>     return $qvars;
>> }
>
> I notice you add the add_filter() _before_ you declare the actual
> function. Others do that too, while other add the add_filter() (or
> add_action()) _after_ the function.
>
> Which is best?

I put it directly before the function so i know what the function is
hooked to, The only time i dont do that is if the hook is added within
another function.
But which one is better?
It all depends on your coding style i guess, I feel important things
should be at the start of the function(documentation/hooks/etc), Others
however, Seem to like writing the function, and then adding the hooks for
the function afterwards, Theres no "Best" way, both work, Just depends how
your mind thinks i guess.

> I tend to put it after the function because, well, if you put it before,
> aren't you referencing a non-existant function? What if add_filter() one
> day adds a check to see if the function_exists()? If you do add_filter()
> first, then won't it break?

Before PHP executes a document, it first parses the file, So it knows what
functions are declared within a PHP file, When you include a file, PHP
Parses the file, and then continues execution.
But add_filter only accepts a string of the function name anyway, So it
doesnt actually call the function until the apply_filters call is run.
Thats also why when you've got a fatal error in a PHP document PHP fails
as soon as the page with the error is loaded.

In certain other languages however, You cant do that, They parse the
document from top-down, executing commands as they go, if you reference a
function later in the file, it'll throw an error because the language
hasnt yet located that function.

PHP Spends quite a lot of time parsing the documents, Thats why programs
such as eAccellerator and the Zend applications are used, They cach the
parsed documents so they dont need to be read again, PHP simply loads the
pre-parsed documents from memory.



Bah! Sent this using the wrong email :), It'd be so nice if the list was  
to bounce messages.. But at the same time.. it'd generate too much  
traffic..
From MattPat at mattpat.net  Thu Aug 30 02:17:22 2007
From: MattPat at mattpat.net (Matt Patenaude)
Date: Thu Aug 30 02:21:07 2007
Subject: [wp-hackers] add_filter before or after function?
In-Reply-To: <b88434820708291911g2d7b9147m439cf7134348b9a6@mail.gmail.com>
References: <e9f3ce460708280801i36a7ab09m4debd4a03fbb9980@mail.gmail.com>
	<1188319394.5537.11.camel@localhost>
	<e9f3ce460708281001l1191b129r825cec1b8d0a0f7f@mail.gmail.com>
	<op.txsqooeyk6w4mc@dd32.no-ip.com>
	<e9f3ce460708291200w1d1e23f1pa20e32c0451bd72d@mail.gmail.com>
	<op.txulz3sck6w4mc@dd32.no-ip.com> <46D62367.5070902@gmail.com>
	<46D62589.6020804@poplarware.com>
	<b88434820708291911g2d7b9147m439cf7134348b9a6@mail.gmail.com>
Message-ID: <01E047BC-C3DA-4A8F-A600-5C9D6B17F65C@mattpat.net>

With the exception of conditionally defined functions, yup. :) It's a  
win-win situation.

-Matt

On Aug 29, 2007, at 10:11 PM, Matt wrote:

> Also, can't functions be called no matter where they're defined in  
> a file?
>
> On 8/29/07, Jennifer Hodgdon <yahgrp@poplarware.com> wrote:
>>
>> Jeremy Visser wrote:
>>> DD32 wrote:
>>>> add_filter('query_vars', 'test_queryvars' );
>>>> function test_queryvars( $qvars ){
>>>>     $qvars[] = 'artist_slug';
>>>>     $qvars[] = 'artist_page';
>>>>     return $qvars;
>>>> }
>>>
>>> I notice you add the add_filter() _before_ you declare the actual
>>> function. Others do that too, while other add the add_filter() (or
>>> add_action()) _after_ the function.
>>>
>>> Which is best?
>>
>> Actually, it doesn't matter. When you call add_filter, you are only
>> passing in the name of the function you want to use later for
>> filtering. By the time WP calls the function to filter something, the
>> function will be defined.
>>
>>     --Jennifer
>>
>> --
>> Jennifer Hodgdon
>>
>> Poplar ProductivityWare * www.poplarware.com
>> Web Databases/Scripts * Modeling/Analysis/Palm OS Software
>>
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers@lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
>
>
>
> -- 
> Matt (speedboxer@gmail.com)
> http://mattsblog.ca/ | http://livemp.net/
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

From hovercrafter at earthlink.net  Thu Aug 30 02:08:49 2007
From: hovercrafter at earthlink.net (Jamie Holly)
Date: Thu Aug 30 02:45:28 2007
Subject: [wp-hackers] add_filter before or after function?
In-Reply-To: <46D62367.5070902@gmail.com>
References: <e9f3ce460708280801i36a7ab09m4debd4a03fbb9980@mail.gmail.com>	<1188319394.5537.11.camel@localhost>	<e9f3ce460708281001l1191b129r825cec1b8d0a0f7f@mail.gmail.com>	<op.txsqooeyk6w4mc@dd32.no-ip.com>	<e9f3ce460708291200w1d1e23f1pa20e32c0451bd72d@mail.gmail.com>	<op.txulz3sck6w4mc@dd32.no-ip.com>
	<46D62367.5070902@gmail.com>
Message-ID: <07f301c7eaaa$b4773680$1d65a380$@net>

Since the function name is only getting stored in an array (or object - my
mind is shot right now), it doesn't really matter. I couldn't imagine adding
a function_exists check on add_filter, add_hook. That would be best done
when the function is actually called to prevent fatal errors. In 99% of the
situations, the add_filter and add_hook would only be adding a function
defined within that plugin, or possibly one of the core filters. 

Jamie Holly
http://www.intoxination.net
1.513.252.2919 | Skype:intoxination


>-----Original Message-----
>From: wp-hackers-bounces@lists.automattic.com [mailto:wp-hackers-
>bounces@lists.automattic.com] On Behalf Of Jeremy Visser
>Sent: Wednesday, August 29, 2007 9:55 PM
>To: wp-hackers@lists.automattic.com
>Subject: [wp-hackers] add_filter before or after function?
>
>DD32 wrote:
>> add_filter('query_vars', 'test_queryvars' );
>> function test_queryvars( $qvars ){
>>     $qvars[] = 'artist_slug';
>>     $qvars[] = 'artist_page';
>>     return $qvars;
>> }
>
>I notice you add the add_filter() _before_ you declare the actual
>function. Others do that too, while other add the add_filter() (or
>add_action()) _after_ the function.
>
>Which is best?
>
>I tend to put it after the function because, well, if you put it before,
>aren't you referencing a non-existant function? What if add_filter() one
>day adds a check to see if the function_exists()? If you do add_filter()
>first, then won't it break?
>
>I'm not knowledgeable enough with PHP to really know which is right.
>_______________________________________________
>wp-hackers mailing list
>wp-hackers@lists.automattic.com
>http://lists.automattic.com/mailman/listinfo/wp-hackers

From wordpress at tekartist.org  Thu Aug 30 03:01:32 2007
From: wordpress at tekartist.org (Stephane Daury)
Date: Thu Aug 30 03:01:43 2007
Subject: [wp-hackers] Fixing Bugs
In-Reply-To: <46D56F83.9070208@dragonu.net>
References: <F384F5BF-C422-4B83-A3CF-287B98F2221E@googlemail.com>	<46D36EBB.90804@gmail.com>	<3913EDC2-962A-45B6-85D6-6F4B2D117FBA@googlemail.com>	<46D4477A.4010107@branson.com>
	<61368E76-8D21-423F-B5FF-D8ABA7B90055@tekartist.org>
	<46D56F83.9070208@dragonu.net>
Message-ID: <279C3E1E-B870-4D73-9B5A-D8137A4050F8@tekartist.org>


Thanks Jacob.

Looking at it the code, I'd say you're well into it. Good work.
Added to my list of things to try when I'm done releasing a couple of  
WP and JS projects.

Gotta say your <http://svn.dragonu.net/WordPress/PHP5_2/>  sounds  
just as interesting. :)

Stephane



On Aug 29, 2007, at 9:07, Jacob Santos wrote:

> Well, the Subversion Repository that I set up at <http:// 
> svn.dragonu.net/WordPress/UnitTest>. The others are part of this  
> list and you can get the information from them. The repository is  
> public but requires a username and password for commit access. It  
> isn't pretty, but I'm more worried about getting coverage of code  
> and writing complete tests of code coverage. I suppose, if you wish  
> to help, you can email me and we can discuss that.
>
> There are also several bug tickets that has progress for  
> documenting several wp-includes files.
>
> Jacob Santos
>
> Stephane Daury wrote:
>> Hey Jacob,
>>
>> Can you point me/us to a URL I can read up on the progress and get  
>> involved with the testing bits?
>> I'm busy as hell, but I think its worth the effort, especially if  
>> there are already people driving such a project.
>>
>> Stephane
>>
>>
>>
>>
>> On Aug 28, 2007, at 12:04, jacobsantos@branson.com wrote:
>>
>>> I would advise helping with the current documentation and unit  
>>> testing/characterization testing/functional testing. I could use  
>>> help and I'm sure the others doing it would like help also. It is  
>>> happening, but it would go a lot quicker if more people started  
>>> writing tests for the library.
>>>
>>> Jacob Santos
>>>
>>> Geoffrey Sneddon wrote:
>>>>
>>>> On 28 Aug 2007, at 01:39, Jeremy Visser wrote:
>>>>
>>>>> Geoffrey Sneddon wrote:
>>>>>> The number in bugs in WP has grown steadily over several  
>>>>>> years, yet the
>>>>>> number of unfixed ones increasing quicker still. We need a  
>>>>>> release that
>>>>>> is stable. We need a release where everything _works_. Can we  
>>>>>> have one
>>>>>> release which includes _nothing_ but bug fixes. There are 409  
>>>>>> open bugs
>>>>>> according to trac (and I expect there are others marked as
>>>>>> wontfix/invalid without reason). There are some massively  
>>>>>> annoying bugs
>>>>>> for users, not least things like being unable to use IRIs in  
>>>>>> sanitised
>>>>>> content (#4570, target 2.4).
>>>>>
>>>>> Shouldn't you maybe be looking at using the 2.0 branch?
>>>>
>>>> I am using the 2.0 branch ? to me it still seems buggier than <  
>>>> 2 releases were. 2.0 has some bugs that make it almost  
>>>> completely unusable for me, which despite Mark Jaquith telling  
>>>> me they'd be fixed, Ryan Boren contradicted him if not a week  
>>>> later. Not only are bugs being introduced at a quicker and  
>>>> quicker rate, but bugs are being regressed more and more often.  
>>>> A large majority of WP could be tested automatically, and badly  
>>>> needs to be. This has been suggested several times before, but  
>>>> nothing, to my knowledge, has ever really happened about it.
>>>>
>>>>
>>>> - Geoffrey Sneddon
>>>>
>>>>
>>>> _______________________________________________
>>>> wp-hackers mailing list
>>>> wp-hackers@lists.automattic.com
>>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>>>
>>>>
>>>>
>>>
>>> _______________________________________________
>>> wp-hackers mailing list
>>> wp-hackers@lists.automattic.com
>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers@lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

From wordpress at tekartist.org  Thu Aug 30 03:12:10 2007
From: wordpress at tekartist.org (Stephane Daury)
Date: Thu Aug 30 03:12:18 2007
Subject: [wp-hackers] Page with only articles from category x.
In-Reply-To: <65955b6b0708291019k4dbadbah6e73cfc707e7feda@mail.gmail.com>
References: <65955b6b0708290115m12f3d060ve516e85ba17946ce@mail.gmail.com>
	<161617690708290936kcb1f624uae669793f1c17a89@mail.gmail.com>
	<65955b6b0708291019k4dbadbah6e73cfc707e7feda@mail.gmail.com>
Message-ID: <BE776A6E-FCD3-4ACB-872C-C2E18C25B61A@tekartist.org>


On Aug 29, 2007, at 13:19, Alex Polite wrote:

>> While these aren't necessarily the best use of them, IMO, if you want
>> to make a single Page that does PHP code, this is the best way.
>
>> PHPExec and runPHP and such should be avoided unless absolutely
>> necessary.
>
> For security reasons or?

Allowing PHP code in a page or post content (or any user-modifiable  
content) is begging for injection attacks, which is when someone  
finds a way to execute code on your server from the comfort of their  
web browser.

http://en.wikipedia.org/wiki/Code_injection

Never a good thing.

Imagine if I could pass the following command to your server?
<php echo file_get_contents('/etc/passwd').file_get_contents('/etc/ 
shadow'); ?>

Now I'd have access to your box withy the help of any widly available  
quick password cracker.
This is only compounded by the widespread use of non-SSL login by  
WordPress users.

Stephane
From wordpress at tekartist.org  Thu Aug 30 03:21:19 2007
From: wordpress at tekartist.org (Stephane Daury)
Date: Thu Aug 30 03:21:29 2007
Subject: [wp-hackers] Page with only articles from category x.
In-Reply-To: <BE776A6E-FCD3-4ACB-872C-C2E18C25B61A@tekartist.org>
References: <65955b6b0708290115m12f3d060ve516e85ba17946ce@mail.gmail.com>
	<161617690708290936kcb1f624uae669793f1c17a89@mail.gmail.com>
	<65955b6b0708291019k4dbadbah6e73cfc707e7feda@mail.gmail.com>
	<BE776A6E-FCD3-4ACB-872C-C2E18C25B61A@tekartist.org>
Message-ID: <A95A543F-F4E6-4555-9E09-4CD9D6849135@tekartist.org>


On Aug 29, 2007, at 23:12, Stephane Daury wrote:

>
> On Aug 29, 2007, at 13:19, Alex Polite wrote:
>
>>> While these aren't necessarily the best use of them, IMO, if you  
>>> want
>>> to make a single Page that does PHP code, this is the best way.
>>
>>> PHPExec and runPHP and such should be avoided unless absolutely
>>> necessary.
>>
>> For security reasons or?
>
> Allowing PHP code in a page or post content (or any user-modifiable  
> content) is begging for injection attacks, which is when someone  
> finds a way to execute code on your server from the comfort of  
> their web browser.
>
> http://en.wikipedia.org/wiki/Code_injection
>
> Never a good thing.
>
> Imagine if I could pass the following command to your server?
> <php echo file_get_contents('/etc/passwd').file_get_contents('/etc/ 
> shadow'); ?>
>
> Now I'd have access to your box withy the help of any widly  
> available quick password cracker.
> This is only compounded by the widespread use of non-SSL login by  
> WordPress users.

Though technically, all users are executing code when accessing  
WordPress.
I meant "when someone finds a way to execute **their own** code on  
your server".
:)

Stephane


From clwoodard at gmail.com  Thu Aug 30 03:25:11 2007
From: clwoodard at gmail.com (Curt Woodard)
Date: Thu Aug 30 03:25:17 2007
Subject: [wp-hackers] SM2WP v2.0 BETA Now Released.
Message-ID: <a3b809ae0708292025g35ff208bw9252dc3dfb9cb720@mail.gmail.com>

Thanks to everyone in this forum for the discussions you guys have :)
Got me thinking, then tinkering, and I think I've got my first stable
version of this plugin finished, not to mention my first really
published plugin. Also, thanks to Stephen for pushing me to look into
better ways of coding this nugget ;)

You can all see the changes in previous threads, but here's the
current change log and the link to SM2WP!

<b><u>Changelog:</u></b>
   * 2007-08-29 23:04:20:
      * Cleaned up the code quite a bit so that there are is only one variable
        declared outside of a funciton in the main script: $sm2wp_options
      * Cleaned up the options so that only two are now available (thanks to
        Stephen for this idea). SM2WP now checks to see if the current install
        of WP has a table prefix that matches that of the master copy. If it
        doesn't, then it's a slave copy, otherwise it is a master copy.
      * Cleaned up the option storage so that it is stored under one entry in
        the options table: sm2wp_options which is a serialized array.
      * Killed off the admin_transfer option. If the install is a slave, then it
        will either have entries in the master usermeta or it won't. If they do
        not, then SM2WP will create them, otherwise it will not.
      * There would be an issue when returning a slave back to master status:
        the user and pass cookies, which are now stored in the sm2wp_options
        array, would still point to the previous master. This has been fixed so
        that during the loading of the options, the correct cookies will be put
        back into the option array.
      * Since I'm now using the table prefix matching method to determine the
        master/slave role of the blog, I also removed all options dealing with
        the role, including the master/slave dropdown on the main option panel.
      * Tested the plugin again to see how stable it is, everything checked out
        fine. There was an issue with multiple copies of the usermeta from the
        slave appearing in the master table. This was fixed. The script should
        be relatively stable now, but test to be sure.
      * Added this readme file and the accompanying images to the plugin's zip.
      * Upgraded to version 2.0 BETA

http://www.lyonesse.info/WPP/

-Curt
From wordpress at tekartist.org  Thu Aug 30 04:01:29 2007
From: wordpress at tekartist.org (Stephane Daury)
Date: Thu Aug 30 04:01:38 2007
Subject: [wp-hackers] 2 Questions: $_REQUEST equivalent and using GET
	in	mod_rewrite
In-Reply-To: <46D53D38.9090804@gmail.com>
References: <e9f3ce460708280801i36a7ab09m4debd4a03fbb9980@mail.gmail.com>
	<46D456AE.9090402@branson.com> <46D53D38.9090804@gmail.com>
Message-ID: <DD06C7FD-7853-4230-9DF0-753B36FC2BA6@tekartist.org>


On Aug 29, 2007, at 5:32, Jeremy Visser wrote:

> jacobsantos@branson.com wrote:
>> 1. Using $_REQUEST is like asking hackers to pwn your site. "Yes,  
>> I want
>> you to hack me" Don't use it. The reason for WordPress using  
>> $_POST for
>> form data and $_GET for url data is for the same reason register  
>> globals
>> is terrible security risk. $_REQUEST is similar to using $_REQUEST  
>> and
>> you don't know if it is coming from the Server (HTTP), form, or url.
>
> Huh ?!
>
> It is possible to inject malicious data in GET, POST, and COOKIEs, so,
> say, only using $_POST will mean that rather than a cracker being able
> to use GET to run the exploit, he will have to spend about 30 seconds
> more of his time (remember: crackers have a lot of patience)  
> creating a
> simple HTML form that POSTs instead. Not any more secure.

I think Jacob's emphasis was on the fact that it's bad to lose track  
of where your data is coming from as a coder.

By using $_REQUEST, you give an attacker a chance to overwrite the  
content you expected by passing it twice through different sources.
That's one of the reasons why $_REQUEST does not includew the content  
of $_FILES since PHP 4.3.0.
See http://www.php.net/manual/en/ini.core.php#ini.variables-order

Stephane


From peter.westwood at ftwr.co.uk  Thu Aug 30 06:25:56 2007
From: peter.westwood at ftwr.co.uk (Peter Westwood)
Date: Thu Aug 30 06:28:17 2007
Subject: [wp-hackers] Adding phpmailer options (smtp for example)
In-Reply-To: <46D5F753.70000@callum-macdonald.com>
References: <46D5F753.70000@callum-macdonald.com>
Message-ID: <D69753B9-2FD3-4CB4-8E89-A5D3C24BC3B1@ftwr.co.uk>


On 29 Aug 2007, at 23:46, Callum Macdonald wrote:

> One of our sites had an issue today where it was dying with the error:
> The e-mail could not be sent.
> Possible reason: your host may have disabled the mail() function...
>
> Investigating, I realise that phpmailer is bundled with WordPress  
> and it's configured to use PHP's mail() function by default. That  
> seems sensible, however, I think it would be useful to add some  
> options to allow the user to configure it's use. For example, to  
> send mail by SMTP and then specify a host (even a username/password).
>
> Before I bash out some code and send a patch, I thought I'd ask for  
> feedback. Can anyone see any flaws in this plan? Would the options  
> be best implemented in the options database? Which admin screen  
> would be most relevant? If the user specifies an invalid server,  
> how will that affect the system? Is that more or less likely than  
> mail() being disabled?
>
> I think the current default is sensible, but options would be  
> useful. If I don't hear anything in the next few days I'll write  
> some code anyway and we can take it from there.

I don't think this kind of configuration is needed for 90% of users.   
Therefore it would be better as a plugin.
I would suggest you try and write a plugin to achieve what you require.
If you find you need extra actions/filters in WordPress in order to  
achieve the functionality within the plugin then let us know (tickets  
in trac) and I am sure they will be added.

Cheers

westi
-- 
Peter Westwood <peter.westwood@ftwr.co.uk>
Blog: http://blog.ftwr.co.uk/
WordPress Plugins: http://blog.ftwr.co.uk/wordpress/



From kimmo at global-wire.fi  Thu Aug 30 07:59:56 2007
From: kimmo at global-wire.fi (Kimmo Suominen)
Date: Thu Aug 30 08:00:07 2007
Subject: [wp-hackers] Adding phpmailer options (smtp for example)
In-Reply-To: <D69753B9-2FD3-4CB4-8E89-A5D3C24BC3B1@ftwr.co.uk>
References: <46D5F753.70000@callum-macdonald.com>
	<D69753B9-2FD3-4CB4-8E89-A5D3C24BC3B1@ftwr.co.uk>
Message-ID: <20070830075956.GF979@kimmo.suominen.com>

On 29 Aug 2007, at 23:46, Callum Macdonald wrote:

> Investigating, I realise that phpmailer is bundled with WordPress  
> and it's configured to use PHP's mail() function by default.

On Thu, Aug 30, 2007 at 07:25:56AM +0100, Peter Westwood wrote:

> I don't think this kind of configuration is needed for 90% of users.   
> Therefore it would be better as a plugin.

I agree that a plugin is the best approach.  You could try this one:

    http://www.coffee2code.com/archives/2004/06/28/plugin-wpphpmailer/

It's the top hit for me for this search query:

    http://www.google.com/search?q=wordpress+smtp

There seem to be other plugins as well.

I think all that is necessary is to replace the wp_mail() function
with one of your own.  It is already pluggable.

I've written one plugin to replace wp_mail() in order to get multibyte
characters encoded in the headers.  It looks like this plugin is now
obsolete, but it still works as an example for replacing wp_mail().

    http://kimmo.suominen.com/sw/mbmail/

Best regards,
+ Kimmo
-- 
<A HREF="http://kimmo.suominen.com/">Kimmo Suominen</A>

From omry at yadan.net  Thu Aug 30 08:20:47 2007
From: omry at yadan.net (Omry Yadan)
Date: Thu Aug 30 08:21:26 2007
Subject: [wp-hackers] Adding phpmailer options (smtp for example)
In-Reply-To: <20070830075956.GF979@kimmo.suominen.com>
References: <46D5F753.70000@callum-macdonald.com>	<D69753B9-2FD3-4CB4-8E89-A5D3C24BC3B1@ftwr.co.uk>
	<20070830075956.GF979@kimmo.suominen.com>
Message-ID: <46D67DDF.5010909@yadan.net>


> I agree that a plugin is the best approach.  You could try this one:
>
>     http://www.coffee2code.com/archives/2004/06/28/plugin-wpphpmailer/
>   
It's a bit old, and requires PHPMailer to be installed with the plugin.
I didn't try it, but I think it will not work with the latest wp.

I generally see quite a lot of users with email problems on the 
wordpress-hebrew google group.
many users don't get emails from the system after upgrading to 2.2.

personally I got a slightly annoying problem, where the subject line of 
the emails I get from my blog is chopped.

    Omry.
From jeremy.visser at gmail.com  Thu Aug 30 08:24:14 2007
From: jeremy.visser at gmail.com (Jeremy Visser)
Date: Thu Aug 30 08:24:26 2007
Subject: [wp-hackers] WordPress.org and WordPress.com integration
Message-ID: <46D67EAE.2080505@gmail.com>

After installing the Automattic Stats plugin a week or two ago, I was
very pleasantly surprised to see that on the top bar of every
WordPress.com blog, the dashboard and Write Post links for my .org blog
'jeremy.sunriseroad.net' also appeared there.

I see that there is some level of integration going on there. What I
would like to see in the future is the possibility of my blog being
aggregated on WP.com and the ability for it to be included in WP.com's
tag browser, and in the WP.com 'Hawt Post' sections.

Is this feasible?

One fear you may have is that WordPress.com is a community, and
aggregating all the other WordPress.org blogs may turn it into another
Technorati. However, I don't want to be left out of the action because
of my decision to self-host a .org blog, and not use a .com blog.
From hovenko at linpro.no  Thu Aug 30 11:21:32 2007
From: hovenko at linpro.no (Knut-Olav Hoven)
Date: Thu Aug 30 11:21:41 2007
Subject: [wp-hackers] Bug in get_categories when asking for category
	children?
Message-ID: <200708301321.33330.hovenko@linpro.no>

Hello.

When asking for categories that are child of another category (cat1) and to 
include empty categories I get different behaviour wether cat1 has children 
or not.


Take the following code:
## CODE ##
$cat_children	= get_categories(
	array(
		'child_of'	=> 1,
		'hide_empty'	=> false,
	);
);

print_r($cat_children);
## CODE END ##


Scenario 1:
I have the following categories:
1 - cat1 (no parent)
2 - cat2 (no parent)
3 - cat3 (parent:1)

In this case it prints out cat3.


Scenario 2:
I have the following categories:
1 - cat1 (no parent)
2 - cat2 (no parent)

In this case it prints out cat1 and cat2.


What I want/need is the function to return an empty list, simply because cat1 
doesn't have any children.


Running WordPress 2.2.2.



-- 
Knut-Olav Hoven
Systemutvikler               mob: +47 986 71 700
Linpro AS                    http://www.linpro.no/
From hovenko at linpro.no  Thu Aug 30 11:30:04 2007
From: hovenko at linpro.no (Knut-Olav Hoven)
Date: Thu Aug 30 11:31:12 2007
Subject: [wp-hackers] Bug in get_categories when asking for category
	children?
In-Reply-To: <200708301321.33330.hovenko@linpro.no>
References: <200708301321.33330.hovenko@linpro.no>
Message-ID: <200708301330.04175.hovenko@linpro.no>

Added a ticket.
I do not have a patch yet.

http://trac.wordpress.org/ticket/4870

On Thursday 30 August 2007 13:21:32 Knut-Olav Hoven wrote:
> When asking for categories that are child of another category (cat1) and to
> include empty categories I get different behaviour wether cat1 has children
> or not.
>
>
> Take the following code:
> ## CODE ##
> $cat_children???= get_categories(
> ????????array(
> ????????????????'child_of'??????=> 1,
> ????????????????'hide_empty'????=> false,
> ????????);
> );
>
> print_r($cat_children);
> ## CODE END ##
>
>
> Scenario 1:
> I have the following categories:
> 1 - cat1 (no parent)
> 2 - cat2 (no parent)
> 3 - cat3 (parent:1)
>
> In this case it prints out cat3.
>
>
> Scenario 2:
> I have the following categories:
> 1 - cat1 (no parent)
> 2 - cat2 (no parent)
>
> In this case it prints out cat1 and cat2.
>
>
> What I want/need is the function to return an empty list, simply because
> cat1 doesn't have any children.



-- 
Knut-Olav Hoven
Systemutvikler               mob: +47 986 71 700
Linpro AS                    http://www.linpro.no/
From lists.automattic.com at callum-macdonald.com  Thu Aug 30 11:57:56 2007
From: lists.automattic.com at callum-macdonald.com (Callum Macdonald)
Date: Thu Aug 30 11:58:05 2007
Subject: [wp-hackers] Adding phpmailer options (smtp for example)
In-Reply-To: <D69753B9-2FD3-4CB4-8E89-A5D3C24BC3B1@ftwr.co.uk>
References: <46D5F753.70000@callum-macdonald.com>
	<D69753B9-2FD3-4CB4-8E89-A5D3C24BC3B1@ftwr.co.uk>
Message-ID: <46D6B0C4.7090001@callum-macdonald.com>

G'day,

It would be possible to add it as a plugin. The change is only 2-4 lines 
of code though, you simply comment out one line and add another 2 (4 if 
you're using SMTP auth). I figured it would make sense to make it 
available to all users rather than offering it as an add on.

However, happy to go with the consensus. So far I count +2 for a plugin. 
Omry, do you have a view on it? Anyone else?

Cheers,


Callum.

Peter Westwood wrote:
>
> On 29 Aug 2007, at 23:46, Callum Macdonald wrote:
>
>> One of our sites had an issue today where it was dying with the error:
>> The e-mail could not be sent.
>> Possible reason: your host may have disabled the mail() function...
>>
>> Investigating, I realise that phpmailer is bundled with WordPress and 
>> it's configured to use PHP's mail() function by default. That seems 
>> sensible, however, I think it would be useful to add some options to 
>> allow the user to configure it's use. For example, to send mail by 
>> SMTP and then specify a host (even a username/password).
>>
>> Before I bash out some code and send a patch, I thought I'd ask for 
>> feedback. Can anyone see any flaws in this plan? Would the options be 
>> best implemented in the options database? Which admin screen would be 
>> most relevant? If the user specifies an invalid server, how will that 
>> affect the system? Is that more or less likely than mail() being 
>> disabled?
>>
>> I think the current default is sensible, but options would be useful. 
>> If I don't hear anything in the next few days I'll write some code 
>> anyway and we can take it from there.
>
> I don't think this kind of configuration is needed for 90% of users. 
> Therefore it would be better as a plugin.
> I would suggest you try and write a plugin to achieve what you require.
> If you find you need extra actions/filters in WordPress in order to 
> achieve the functionality within the plugin then let us know (tickets 
> in trac) and I am sure they will be added.
>
> Cheers
>
> westi

From wordpress at dd32.id.au  Thu Aug 30 12:04:09 2007
From: wordpress at dd32.id.au (DD32)
Date: Thu Aug 30 12:03:49 2007
Subject: [wp-hackers] Adding phpmailer options (smtp for example)
In-Reply-To: <46D6B0C4.7090001@callum-macdonald.com>
References: <46D5F753.70000@callum-macdonald.com>
	<D69753B9-2FD3-4CB4-8E89-A5D3C24BC3B1@ftwr.co.uk>
	<46D6B0C4.7090001@callum-macdonald.com>
Message-ID: <op.txvfs7dbk6w4mc@dd32.no-ip.com>

Being such a simple thing, I thought having it in core would be best, However, It does only affect a very small number of users, So maybe plugin would be better.
But should a user have to install a plugin simply to get mail working correctly because of the server configuration? Generally WP tends to try to accomodate the most users(Such as the Backwards compatibility to PHP 4.3).


On Thu, 30 Aug 2007 21:57:56 +1000, Callum Macdonald <lists.automattic.com@callum-macdonald.com> wrote:

> G'day,
>
> It would be possible to add it as a plugin. The change is only 2-4 lines
> of code though, you simply comment out one line and add another 2 (4 if
> you're using SMTP auth). I figured it would make sense to make it
> available to all users rather than offering it as an add on.
>
> However, happy to go with the consensus. So far I count +2 for a plugin.
> Omry, do you have a view on it? Anyone else?
>
> Cheers,
>
>
> Callum.
>
> Peter Westwood wrote:
>>
>> On 29 Aug 2007, at 23:46, Callum Macdonald wrote:
>>
>>> One of our sites had an issue today where it was dying with the error:
>>> The e-mail could not be sent.
>>> Possible reason: your host may have disabled the mail() function...
>>>
>>> Investigating, I realise that phpmailer is bundled with WordPress and
>>> it's configured to use PHP's mail() function by default. That seems
>>> sensible, however, I think it would be useful to add some options to
>>> allow the user to configure it's use. For example, to send mail by
>>> SMTP and then specify a host (even a username/password).
>>>
>>> Before I bash out some code and send a patch, I thought I'd ask for
>>> feedback. Can anyone see any flaws in this plan? Would the options be
>>> best implemented in the options database? Which admin screen would be
>>> most relevant? If the user specifies an invalid server, how will that
>>> affect the system? Is that more or less likely than mail() being
>>> disabled?
>>>
>>> I think the current default is sensible, but options would be useful.
>>> If I don't hear anything in the next few days I'll write some code
>>> anyway and we can take it from there.
>>
>> I don't think this kind of configuration is needed for 90% of users.
>> Therefore it would be better as a plugin.
>> I would suggest you try and write a plugin to achieve what you require.
>> If you find you need extra actions/filters in WordPress in order to
>> achieve the functionality within the plugin then let us know (tickets
>> in trac) and I am sure they will be added.
>>
>> Cheers
>>
>> westi
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>


From wordpress at dd32.id.au  Thu Aug 30 12:15:16 2007
From: wordpress at dd32.id.au (DD32)
Date: Thu Aug 30 12:14:55 2007
Subject: [wp-hackers] Adding phpmailer options (smtp for example)
In-Reply-To: <op.txvfs7dbk6w4mc@dd32.no-ip.com>
References: <46D5F753.70000@callum-macdonald.com>
	<D69753B9-2FD3-4CB4-8E89-A5D3C24BC3B1@ftwr.co.uk>
	<46D6B0C4.7090001@callum-macdonald.com>
	<op.txvfs7dbk6w4mc@dd32.no-ip.com>
Message-ID: <op.txvgbqv0k6w4mc@dd32.no-ip.com>

Maybe a simple check can be done..

if( null === @mail('','','') ){
echo "Mail() is disabled";
} else {
echo "Mail() is available";
}

If mail() is disabled due to a disabled functions, then it returns null,
Else, It'll return false because the parametres passed are invalid.
(At least on PHP 5.2.3)

Just a thought for if it goes into core or a plugin.

On Thu, 30 Aug 2007 22:04:09 +1000, DD32 <wordpress@dd32.id.au> wrote:

> Being such a simple thing, I thought having it in core would be best, However, It does only affect a very small number of users, So maybe plugin would be better.
> But should a user have to install a plugin simply to get mail working correctly because of the server configuration? Generally WP tends to try to accomodate the most users(Such as the Backwards compatibility to PHP 4.3).
>
>
> On Thu, 30 Aug 2007 21:57:56 +1000, Callum Macdonald <lists.automattic.com@callum-macdonald.com> wrote:
>
>> G'day,
>>
>> It would be possible to add it as a plugin. The change is only 2-4 lines
>> of code though, you simply comment out one line and add another 2 (4 if
>> you're using SMTP auth). I figured it would make sense to make it
>> available to all users rather than offering it as an add on.
>>
>> However, happy to go with the consensus. So far I count +2 for a plugin.
>> Omry, do you have a view on it? Anyone else?
>>
>> Cheers,
>>
>>
>> Callum.
>>
>> Peter Westwood wrote:
>>>
>>> On 29 Aug 2007, at 23:46, Callum Macdonald wrote:
>>>
>>>> One of our sites had an issue today where it was dying with the error:
>>>> The e-mail could not be sent.
>>>> Possible reason: your host may have disabled the mail() function...
>>>>
>>>> Investigating, I realise that phpmailer is bundled with WordPress and
>>>> it's configured to use PHP's mail() function by default. That seems
>>>> sensible, however, I think it would be useful to add some options to
>>>> allow the user to configure it's use. For example, to send mail by
>>>> SMTP and then specify a host (even a username/password).
>>>>
>>>> Before I bash out some code and send a patch, I thought I'd ask for
>>>> feedback. Can anyone see any flaws in this plan? Would the options be
>>>> best implemented in the options database? Which admin screen would be
>>>> most relevant? If the user specifies an invalid server, how will that
>>>> affect the system? Is that more or less likely than mail() being
>>>> disabled?
>>>>
>>>> I think the current default is sensible, but options would be useful.
>>>> If I don't hear anything in the next few days I'll write some code
>>>> anyway and we can take it from there.
>>>
>>> I don't think this kind of configuration is needed for 90% of users.
>>> Therefore it would be better as a plugin.
>>> I would suggest you try and write a plugin to achieve what you require.
>>> If you find you need extra actions/filters in WordPress in order to
>>> achieve the functionality within the plugin then let us know (tickets
>>> in trac) and I am sure they will be added.
>>>
>>> Cheers
>>>
>>> westi
>>
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers@lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
>
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
From morty at gmx.net  Thu Aug 30 12:18:01 2007
From: morty at gmx.net (Moritz 'morty' Struebe)
Date: Thu Aug 30 12:18:11 2007
Subject: [wp-hackers] Adding phpmailer options (smtp for example)
In-Reply-To: <op.txvfs7dbk6w4mc@dd32.no-ip.com>
References: <46D5F753.70000@callum-macdonald.com>	<D69753B9-2FD3-4CB4-8E89-A5D3C24BC3B1@ftwr.co.uk>	<46D6B0C4.7090001@callum-macdonald.com>
	<op.txvfs7dbk6w4mc@dd32.no-ip.com>
Message-ID: <46D6B579.7030706@gmx.net>

I'm much in favor of a Plugin. For one it shouldn't be to hard to write, 
overloading wp-mail() and because it's released much quicker (I'm really 
looking forward to this and thought about writing it my self, because I 
need it for my plugin). Once you have written the Plugin it should be 
little work to integrate it into the core.
If you need support just mail me. (I always appreciate when someone 
tests and gives me feedback on my code)
Cheers
Morty

DD32 wrote:
> Being such a simple thing, I thought having it in core would be best, However, It does only affect a very small number of users, So maybe plugin would be better.
> But should a user have to install a plugin simply to get mail working correctly because of the server configuration? Generally WP tends to try to accomodate the most users(Such as the Backwards compatibility to PHP 4.3).
>
>
> On Thu, 30 Aug 2007 21:57:56 +1000, Callum Macdonald <lists.automattic.com@callum-macdonald.com> wrote:
>
>   
>> G'day,
>>
>> It would be possible to add it as a plugin. The change is only 2-4 lines
>> of code though, you simply comment out one line and add another 2 (4 if
>> you're using SMTP auth). I figured it would make sense to make it
>> available to all users rather than offering it as an add on.
>>
>> However, happy to go with the consensus. So far I count +2 for a plugin.
>> Omry, do you have a view on it? Anyone else?
>>
>> Cheers,
>>
>>
>> Callum.
>>
>> Peter Westwood wrote:
>>     
>>> On 29 Aug 2007, at 23:46, Callum Macdonald wrote:
>>>
>>>       
>>>> One of our sites had an issue today where it was dying with the error:
>>>> The e-mail could not be sent.
>>>> Possible reason: your host may have disabled the mail() function...
>>>>
>>>> Investigating, I realise that phpmailer is bundled with WordPress and
>>>> it's configured to use PHP's mail() function by default. That seems
>>>> sensible, however, I think it would be useful to add some options to
>>>> allow the user to configure it's use. For example, to send mail by
>>>> SMTP and then specify a host (even a username/password).
>>>>
>>>> Before I bash out some code and send a patch, I thought I'd ask for
>>>> feedback. Can anyone see any flaws in this plan? Would the options be
>>>> best implemented in the options database? Which admin screen would be
>>>> most relevant? If the user specifies an invalid server, how will that
>>>> affect the system? Is that more or less likely than mail() being
>>>> disabled?
>>>>
>>>> I think the current default is sensible, but options would be useful.
>>>> If I don't hear anything in the next few days I'll write some code
>>>> anyway and we can take it from there.
>>>>         
>>> I don't think this kind of configuration is needed for 90% of users.
>>> Therefore it would be better as a plugin.
>>> I would suggest you try and write a plugin to achieve what you require.
>>> If you find you need extra actions/filters in WordPress in order to
>>> achieve the functionality within the plugin then let us know (tickets
>>> in trac) and I am sure they will be added.
>>>
>>> Cheers
>>>
>>> westi
>>>       
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers@lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
>>     
>
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
>   

From viper at viper007bond.com  Thu Aug 30 13:37:30 2007
From: viper at viper007bond.com (Viper007Bond)
Date: Thu Aug 30 13:37:37 2007
Subject: [wp-hackers] Templatedia, a new work in progress plugin
Message-ID: <8f93a7390708300637q5b5d2adeid17adefa40bd7dd5@mail.gmail.com>

I was bored the other day, in the mood to code, and surfing when it occurred
to me that Wikipedia / MediaWiki's template system would work well as a
template system for posts. For example, a box that says "download this
plugin" with a fancy icon and all that. You could simply do
{{downloadbox|file.zip}} and it'd put the box's HTML there along with the
right link.

So, partially as a coding challenge to myself but as well as to develop a
plugin I figured some people might get some use out of, I present you all my
new plugin: Templatedia

At 100 lines of code, it's a lot simpler than I expected it to be, but then
again it has no user interface yet and is still missing some advanced
template abilities that the original MediaWiki format has.

If you'd like to check out what I have so far, I've pastebin'ed it:
http://wp-hackers.pastebin.com/f3c38ad72

Be warned -- it may not the best way to go about doing this feature. I came
up with it from scratch and didn't use anything as a basis in terms of code.
I'm also really inexperienced when it comes to regex, so no laughing please.
:P

Feature suggestions and comments are welcome, especially at this early stage
when it's still easy to change things. ;)

-- 
Viper007Bond | http://www.viper007bond.com/
From wordpress at tekartist.org  Thu Aug 30 13:48:10 2007
From: wordpress at tekartist.org (Stephane Daury)
Date: Thu Aug 30 13:48:17 2007
Subject: [wp-hackers] WordPress.org and WordPress.com integration
In-Reply-To: <46D67EAE.2080505@gmail.com>
References: <46D67EAE.2080505@gmail.com>
Message-ID: <F1F52750-0919-4D05-8F11-C168DD84B5A4@tekartist.org>


While we're on the integration subject, would anyone happen to know  
if there is currently a project towards having integration between  
self-hosted blogs and wordpress.com/.org user accounts?

IE: Something like my upcoming wpDirAuth (LDAP/S) or the OpenID  
plugins that would let users with account on Wordpress.com/.org login  
to your self-hosted blog through an API handshake (could auto-create  
an account record locally, like other plugins do). When I say .org, I  
mean codex accounts, etc, not accounts from other self-hosted  
instances (allthough that's feasible too, but more complicated).

Although I understand the tech and security implications, I do think  
it'd be pretty cool.
The user base is obviously large enough to justify the effort (IMHO). :)

Stephane



On Aug 30, 2007, at 04:24, Jeremy Visser wrote:

> After installing the Automattic Stats plugin a week or two ago, I was
> very pleasantly surprised to see that on the top bar of every
> WordPress.com blog, the dashboard and Write Post links for my .org  
> blog
> 'jeremy.sunriseroad.net' also appeared there.
>
> I see that there is some level of integration going on there. What I
> would like to see in the future is the possibility of my blog being
> aggregated on WP.com and the ability for it to be included in WP.com's
> tag browser, and in the WP.com 'Hawt Post' sections.
>
> Is this feasible?
>
> One fear you may have is that WordPress.com is a community, and
> aggregating all the other WordPress.org blogs may turn it into another
> Technorati. However, I don't want to be left out of the action because
> of my decision to self-host a .org blog, and not use a .com blog.
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

From computerguru at neosmart.net  Thu Aug 30 13:59:25 2007
From: computerguru at neosmart.net (Computer Guru)
Date: Thu Aug 30 13:59:30 2007
Subject: [wp-hackers] Adding phpmailer options (smtp for example)
In-Reply-To: <46D6B579.7030706@gmx.net>
References: <46D5F753.70000@callum-macdonald.com>
	<D69753B9-2FD3-4CB4-8E89-A5D3C24BC3B1@ftwr.co.uk>
	<46D6B0C4.7090001@callum-macdonald.com>
	<op.txvfs7dbk6w4mc@dd32.no-ip.com> <46D6B579.7030706@gmx.net>
Message-ID: <4681c7d40708300659j2542ff43l9f3934d4e6056709@mail.gmail.com>

I've tried most of the SMTP plugins out there, and found this one to
suite my needs best:
http://www.cimatti.it/blog/2007/06/25/cimy-swift-smtp-for-wordpress/

It's built on the SWIFT SMTP library, which is some really great code.

It's reliable, fast, customizable, and hasn't given me any trouble.
Before I found this one, I had loads of trouble (and had to do a lot
of hacking) with other SMTP plugins.

Just my 2 cents...

-CG

On 8/30/07, Moritz 'morty' Struebe <morty@gmx.net> wrote:
> I'm much in favor of a Plugin. For one it shouldn't be to hard to write,
> overloading wp-mail() and because it's released much quicker (I'm really
> looking forward to this and thought about writing it my self, because I
> need it for my plugin). Once you have written the Plugin it should be
> little work to integrate it into the core.
> If you need support just mail me. (I always appreciate when someone
> tests and gives me feedback on my code)
> Cheers
> Morty
>
> DD32 wrote:
> > Being such a simple thing, I thought having it in core would be best, However, It does only affect a very small number of users, So maybe plugin would be better.
> > But should a user have to install a plugin simply to get mail working correctly because of the server configuration? Generally WP tends to try to accomodate the most users(Such as the Backwards compatibility to PHP 4.3).
> >
> >
> > On Thu, 30 Aug 2007 21:57:56 +1000, Callum Macdonald <lists.automattic.com@callum-macdonald.com> wrote:
> >
> >
> >> G'day,
> >>
> >> It would be possible to add it as a plugin. The change is only 2-4 lines
> >> of code though, you simply comment out one line and add another 2 (4 if
> >> you're using SMTP auth). I figured it would make sense to make it
> >> available to all users rather than offering it as an add on.
> >>
> >> However, happy to go with the consensus. So far I count +2 for a plugin.
> >> Omry, do you have a view on it? Anyone else?
> >>
> >> Cheers,
> >>
> >>
> >> Callum.
> >>
> >> Peter Westwood wrote:
> >>
> >>> On 29 Aug 2007, at 23:46, Callum Macdonald wrote:
> >>>
> >>>
> >>>> One of our sites had an issue today where it was dying with the error:
> >>>> The e-mail could not be sent.
> >>>> Possible reason: your host may have disabled the mail() function...
> >>>>
> >>>> Investigating, I realise that phpmailer is bundled with WordPress and
> >>>> it's configured to use PHP's mail() function by default. That seems
> >>>> sensible, however, I think it would be useful to add some options to
> >>>> allow the user to configure it's use. For example, to send mail by
> >>>> SMTP and then specify a host (even a username/password).
> >>>>
> >>>> Before I bash out some code and send a patch, I thought I'd ask for
> >>>> feedback. Can anyone see any flaws in this plan? Would the options be
> >>>> best implemented in the options database? Which admin screen would be
> >>>> most relevant? If the user specifies an invalid server, how will that
> >>>> affect the system? Is that more or less likely than mail() being
> >>>> disabled?
> >>>>
> >>>> I think the current default is sensible, but options would be useful.
> >>>> If I don't hear anything in the next few days I'll write some code
> >>>> anyway and we can take it from there.
> >>>>
> >>> I don't think this kind of configuration is needed for 90% of users.
> >>> Therefore it would be better as a plugin.
> >>> I would suggest you try and write a plugin to achieve what you require.
> >>> If you find you need extra actions/filters in WordPress in order to
> >>> achieve the functionality within the plugin then let us know (tickets
> >>> in trac) and I am sure they will be added.
> >>>
> >>> Cheers
> >>>
> >>> westi
> >>>
> >> _______________________________________________
> >> wp-hackers mailing list
> >> wp-hackers@lists.automattic.com
> >> http://lists.automattic.com/mailman/listinfo/wp-hackers
> >>
> >>
> >
> >
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers@lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> >
> >
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>


-- 
Computer Guru
Director,
NeoSmart Technologies
http://neosmart.net/blog/
From computerguru at neosmart.net  Thu Aug 30 14:02:06 2007
From: computerguru at neosmart.net (Computer Guru)
Date: Thu Aug 30 14:02:11 2007
Subject: [wp-hackers] Templatedia, a new work in progress plugin
In-Reply-To: <8f93a7390708300637q5b5d2adeid17adefa40bd7dd5@mail.gmail.com>
References: <8f93a7390708300637q5b5d2adeid17adefa40bd7dd5@mail.gmail.com>
Message-ID: <4681c7d40708300702r5e0730ear386154515fedae40@mail.gmail.com>

Nice idea, that's for sure :-)

Can "template elements" be used from within posts as well? Or only in
the theme php?

Wasn't there a plugin a while back for adding Smarty to WP? Anyone
know what happened to it?

On 8/30/07, Viper007Bond <viper@viper007bond.com> wrote:
> I was bored the other day, in the mood to code, and surfing when it occurred
> to me that Wikipedia / MediaWiki's template system would work well as a
> template system for posts. For example, a box that says "download this
> plugin" with a fancy icon and all that. You could simply do
> {{downloadbox|file.zip}} and it'd put the box's HTML there along with the
> right link.
>
> So, partially as a coding challenge to myself but as well as to develop a
> plugin I figured some people might get some use out of, I present you all my
> new plugin: Templatedia
>
> At 100 lines of code, it's a lot simpler than I expected it to be, but then
> again it has no user interface yet and is still missing some advanced
> template abilities that the original MediaWiki format has.
>
> If you'd like to check out what I have so far, I've pastebin'ed it:
> http://wp-hackers.pastebin.com/f3c38ad72
>
> Be warned -- it may not the best way to go about doing this feature. I came
> up with it from scratch and didn't use anything as a basis in terms of code.
> I'm also really inexperienced when it comes to regex, so no laughing please.
> :P
>
> Feature suggestions and comments are welcome, especially at this early stage
> when it's still easy to change things. ;)
>
> --
> Viper007Bond | http://www.viper007bond.com/
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>


-- 
Computer Guru
Director,
NeoSmart Technologies
http://neosmart.net/blog/
From lists.automattic.com at callum-macdonald.com  Thu Aug 30 14:03:09 2007
From: lists.automattic.com at callum-macdonald.com (Callum Macdonald)
Date: Thu Aug 30 14:03:38 2007
Subject: [wp-hackers] Adding phpmailer options (smtp for example)
In-Reply-To: <46D6B579.7030706@gmx.net>
References: <46D5F753.70000@callum-macdonald.com>	<D69753B9-2FD3-4CB4-8E89-A5D3C24BC3B1@ftwr.co.uk>	<46D6B0C4.7090001@callum-macdonald.com>	<op.txvfs7dbk6w4mc@dd32.no-ip.com>
	<46D6B579.7030706@gmx.net>
Message-ID: <46D6CE1D.6080601@callum-macdonald.com>

G'day,

Ok, I've whipped up a plugin. It's a copy of the original wp_mail() 
function but it adds SMTP by default (to localhost) and a couple of 
other config options. They're currently only configurable within the 
file itself, but if it's a popular plugin I'll be happy to add an 
Options page to make it easier to configure.

Any feedback would be much appreciated.
http://www.callum-macdonald.com/code/wp-mail-smtp/

Cheers,


Callum.

Moritz 'morty' Struebe wrote:
> I'm much in favor of a Plugin. For one it shouldn't be to hard to 
> write, overloading wp-mail() and because it's released much quicker 
> (I'm really looking forward to this and thought about writing it my 
> self, because I need it for my plugin). Once you have written the 
> Plugin it should be little work to integrate it into the core.
> If you need support just mail me. (I always appreciate when someone 
> tests and gives me feedback on my code)
> Cheers
> Morty
>
> DD32 wrote:
>> Being such a simple thing, I thought having it in core would be best, 
>> However, It does only affect a very small number of users, So maybe 
>> plugin would be better.
>> But should a user have to install a plugin simply to get mail working 
>> correctly because of the server configuration? Generally WP tends to 
>> try to accomodate the most users(Such as the Backwards compatibility 
>> to PHP 4.3).
>>
>>
>> On Thu, 30 Aug 2007 21:57:56 +1000, Callum Macdonald 
>> <lists.automattic.com@callum-macdonald.com> wrote:
>>
>>  
>>> G'day,
>>>
>>> It would be possible to add it as a plugin. The change is only 2-4 
>>> lines
>>> of code though, you simply comment out one line and add another 2 (4 if
>>> you're using SMTP auth). I figured it would make sense to make it
>>> available to all users rather than offering it as an add on.
>>>
>>> However, happy to go with the consensus. So far I count +2 for a 
>>> plugin.
>>> Omry, do you have a view on it? Anyone else?
>>>
>>> Cheers,
>>>
>>>
>>> Callum.
>>>
>>> Peter Westwood wrote:
>>>    
>>>> On 29 Aug 2007, at 23:46, Callum Macdonald wrote:
>>>>
>>>>      
>>>>> One of our sites had an issue today where it was dying with the 
>>>>> error:
>>>>> The e-mail could not be sent.
>>>>> Possible reason: your host may have disabled the mail() function...
>>>>>
>>>>> Investigating, I realise that phpmailer is bundled with WordPress and
>>>>> it's configured to use PHP's mail() function by default. That seems
>>>>> sensible, however, I think it would be useful to add some options to
>>>>> allow the user to configure it's use. For example, to send mail by
>>>>> SMTP and then specify a host (even a username/password).
>>>>>
>>>>> Before I bash out some code and send a patch, I thought I'd ask for
>>>>> feedback. Can anyone see any flaws in this plan? Would the options be
>>>>> best implemented in the options database? Which admin screen would be
>>>>> most relevant? If the user specifies an invalid server, how will that
>>>>> affect the system? Is that more or less likely than mail() being
>>>>> disabled?
>>>>>
>>>>> I think the current default is sensible, but options would be useful.
>>>>> If I don't hear anything in the next few days I'll write some code
>>>>> anyway and we can take it from there.
>>>>>         
>>>> I don't think this kind of configuration is needed for 90% of users.
>>>> Therefore it would be better as a plugin.
>>>> I would suggest you try and write a plugin to achieve what you 
>>>> require.
>>>> If you find you need extra actions/filters in WordPress in order to
>>>> achieve the functionality within the plugin then let us know (tickets
>>>> in trac) and I am sure they will be added.
>>>>
>>>> Cheers
>>>>
>>>> westi
>>>>       
>>> _______________________________________________
>>> wp-hackers mailing list
>>> wp-hackers@lists.automattic.com
>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>>
>>>     
>>
>>
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers@lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
>>   
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
>

From computerguru at neosmart.net  Thu Aug 30 14:04:44 2007
From: computerguru at neosmart.net (Computer Guru)
Date: Thu Aug 30 14:04:48 2007
Subject: [wp-hackers] WordPress.org and WordPress.com integration
In-Reply-To: <F1F52750-0919-4D05-8F11-C168DD84B5A4@tekartist.org>
References: <46D67EAE.2080505@gmail.com>
	<F1F52750-0919-4D05-8F11-C168DD84B5A4@tekartist.org>
Message-ID: <4681c7d40708300704x67812205n3af10d0dce7a0120@mail.gmail.com>

Going *really* off-topic here, but does anyone know of a good
*script*-based LDAP server?

I've been using various application-based LDAP servers on other
projects, but I'd love it if anyone could recommend a full-fledged
script+database-based LDAP server one could use. (basically for
cross-compatibility across different platforms, easy code hacking,
etc.)

Cheers,
CG

On 8/30/07, Stephane Daury <wordpress@tekartist.org> wrote:
>
> While we're on the integration subject, would anyone happen to know
> if there is currently a project towards having integration between
> self-hosted blogs and wordpress.com/.org user accounts?
>
> IE: Something like my upcoming wpDirAuth (LDAP/S) or the OpenID
> plugins that would let users with account on Wordpress.com/.org login
> to your self-hosted blog through an API handshake (could auto-create
> an account record locally, like other plugins do). When I say .org, I
> mean codex accounts, etc, not accounts from other self-hosted
> instances (allthough that's feasible too, but more complicated).
>
> Although I understand the tech and security implications, I do think
> it'd be pretty cool.
> The user base is obviously large enough to justify the effort (IMHO). :)
>
> Stephane
>
>
>
> On Aug 30, 2007, at 04:24, Jeremy Visser wrote:
>
> > After installing the Automattic Stats plugin a week or two ago, I was
> > very pleasantly surprised to see that on the top bar of every
> > WordPress.com blog, the dashboard and Write Post links for my .org
> > blog
> > 'jeremy.sunriseroad.net' also appeared there.
> >
> > I see that there is some level of integration going on there. What I
> > would like to see in the future is the possibility of my blog being
> > aggregated on WP.com and the ability for it to be included in WP.com's
> > tag browser, and in the WP.com 'Hawt Post' sections.
> >
> > Is this feasible?
> >
> > One fear you may have is that WordPress.com is a community, and
> > aggregating all the other WordPress.org blogs may turn it into another
> > Technorati. However, I don't want to be left out of the action because
> > of my decision to self-host a .org blog, and not use a .com blog.
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers@lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>


-- 
Computer Guru
Director,
NeoSmart Technologies
http://neosmart.net/blog/
From supporto at pixline.net  Thu Aug 30 14:23:39 2007
From: supporto at pixline.net (Pixline)
Date: Thu Aug 30 14:23:50 2007
Subject: [wp-hackers] Page with only articles from category x.
In-Reply-To: <65955b6b0708290115m12f3d060ve516e85ba17946ce@mail.gmail.com>
References: <65955b6b0708290115m12f3d060ve516e85ba17946ce@mail.gmail.com>
Message-ID: <A873FA87-51BE-4A9F-A8DC-7E94BEDC8476@pixline.net>

Alex Polite:

> I want all posts from a specific category collected on one page, with
> a sticky post on top. And I want a link for that  page to be displayed
> in the K2 menu just like any other page.

If you work on category or archive template instead of pages, and  
pages instead of posts, my Category Page plugin will help you :-)

http://wordpress.org/extend/plugins/page2cat/

It lets you connect a page to one or more category, and have a  
template function to show the page content insteand of "archive of  
category X". This, and some tweaking on your template files, will  
make what you need.

this can have two effects:
- you have link in the k2 menu as categories, as you already have,  
and pages, if you like.
- you have a page content in top instead of a post.

If this can't work for you, I'll happy to figure out a solution and  
include it in a next release.
(disclaimer: plugin can't actually work with 2.3 beta, we are still  
working on it.)

p.


Paolo / Pixline.net coder
--------------------------------------------
http://linkedin.com/in/paolotresso
http://pixline.net

From wantmoore at gmail.com  Thu Aug 30 14:26:11 2007
From: wantmoore at gmail.com (Justin Moore)
Date: Thu Aug 30 14:26:16 2007
Subject: [wp-hackers] Templatedia, a new work in progress plugin
In-Reply-To: <8f93a7390708300637q5b5d2adeid17adefa40bd7dd5@mail.gmail.com>
References: <8f93a7390708300637q5b5d2adeid17adefa40bd7dd5@mail.gmail.com>
Message-ID: <75835fe10708300726gc5e5595n33678cd64ee66a58@mail.gmail.com>

On 8/30/07, Viper007Bond <viper@viper007bond.com> wrote:
> I was bored the other day, in the mood to code, and surfing when it occurred
> to me that Wikipedia / MediaWiki's template system would work well as a
> template system for posts. For example, a box that says "download this
> plugin" with a fancy icon and all that. You could simply do
> {{downloadbox|file.zip}} and it'd put the box's HTML there along with the
> right link.

Just skimming the code since I don't have time to install and test
with it at the moment, but this looks like *exactly* the plugin I've
been dreaming of for several months, since the launch of my church's
website that I built around WP. We post sermons online and I often
find myself copying/pasting from the previous week's post and then
editing the date the the filenames for the mp3 and the DOC/PDF sermon
notes. This appears that it may simplify that process enough so that
the pastor can actually do it himself!

Will be keeping an eye on it for sure...

-- 
Justin Moore
aka wantmoore
---------------------------------------
www.wantmoore.com
From omry at yadan.net  Thu Aug 30 14:30:20 2007
From: omry at yadan.net (Omry Yadan)
Date: Thu Aug 30 14:32:20 2007
Subject: [wp-hackers] Adding phpmailer options (smtp for example)
In-Reply-To: <46D6B0C4.7090001@callum-macdonald.com>
References: <46D5F753.70000@callum-macdonald.com>	<D69753B9-2FD3-4CB4-8E89-A5D3C24BC3B1@ftwr.co.uk>
	<46D6B0C4.7090001@callum-macdonald.com>
Message-ID: <46D6D47C.8060201@yadan.net>

I think it should be in the core.

if email doesn't work for a user, his WordPress is next to useless (he 
wont get the initial email, and wont be able to request to change the 
password).

probably in a section named "Advanced email preferences", with a warning 
that the user should only change this if he has email problems.


Callum Macdonald wrote:

> G'day,
>
> It would be possible to add it as a plugin. The change is only 2-4 
> lines of code though, you simply comment out one line and add another 
> 2 (4 if you're using SMTP auth). I figured it would make sense to make 
> it available to all users rather than offering it as an add on.
>
> However, happy to go with the consensus. So far I count +2 for a 
> plugin. Omry, do you have a view on it? Anyone else?

From mark.wordpress at txfx.net  Thu Aug 30 14:52:29 2007
From: mark.wordpress at txfx.net (Mark Jaquith)
Date: Thu Aug 30 14:54:50 2007
Subject: [wp-hackers] WordPress.org and WordPress.com integration
In-Reply-To: <F1F52750-0919-4D05-8F11-C168DD84B5A4@tekartist.org>
References: <46D67EAE.2080505@gmail.com>
	<F1F52750-0919-4D05-8F11-C168DD84B5A4@tekartist.org>
Message-ID: <7C09ADFC-0F0D-41D7-9066-5743B8A1925F@txfx.net>

On Aug 30, 2007, at 9:48 AM, Stephane Daury wrote:

> While we're on the integration subject, would anyone happen to know  
> if there is currently a project towards having integration between  
> self-hosted blogs and wordpress.com/.org user accounts?

WP.com is an OpenID provider, so with an OpenID plugin for your  
privately hosted WordPress blog, you could log in using your WP.com- 
provided OpenID.

Personally I'd like to see WP.com become an OpenID *consumer* -- but  
that's a discussion for a different forum.

Regarding .org -- there is some sort of internal syncing going on so  
that user accounts are shared among various wp.org properties, but  
there's no OpenID that I'm aware of.

--
Mark Jaquith
http://markjaquith.com/

Covered Web Services
http://coveredwebservices.com/

WordPress Ninja @ b5media Inc
http://b5media.com/


From docwhat+list.wp.hackers at gerf.org  Thu Aug 30 14:56:08 2007
From: docwhat+list.wp.hackers at gerf.org (Christian =?iso-8859-1?Q?H=F6ltje?=)
Date: Thu Aug 30 14:56:13 2007
Subject: [wp-hackers] Re: protecting wp-content/plugins ?
In-Reply-To: <161617690708290932of07d785r35d10f4649977cd@mail.gmail.com>
References: <46C6E20E.5070702@freecharity.org.uk>
	<7d6d8bd0708180809y779fe291w3b555c3eb0bf59ba@mail.gmail.com>
	<E9EB9DB4-CE73-4421-8B60-178313006ADE@viveka.net.au>
	<161617690708211123t5101cc6er2b7a0e95489754ab@mail.gmail.com>
	<E2440484-D3DC-44EA-BE35-B28910E0EAE5@viveka.net.au>
	<161617690708221239l74d6fc1eqf5017eb8db66675a@mail.gmail.com>
	<7d6d8bd0708221730r17f0942dx7cdef047540c9c03@mail.gmail.com>
	<161617690708230823x7e566e7cucc74bf355f2855ff@mail.gmail.com>
	<7d6d8bd0708231612p62815edau47f403ab26750ca2@mail.gmail.com>
	<161617690708290932of07d785r35d10f4649977cd@mail.gmail.com>
Message-ID: <20070830145607.GA19127@gerf.org>

* Otto (otto@ottodestruct.com) [070829 12:33]:
> On 8/23/07, Tom Barta <tbarta@gmail.com> wrote:
> > Sure it does.  If I have a PHP script that is vulnerable when executed
> > directly, but then I move it out of the document root, it can no longer be
> > executed directly (via HTTP requests) and therefore is no longer a real
> > vulnerability (assuming it's secure as a library).
> 
> No, it doesn't. Any plugin that you can exploit directly can also be
> exploited indirectly as well. Plugins are include'd into WordPress.
> They even get globals. Examine wp-settings.php to understand how
> plugins work.

Well, unless the plugin isn't activated.  In which case it isn't
included into Wordpress (except when visiting the admin plugins page).
So there is a small advantage.

I think that it looks unprofessional to have the directory out in the
open.  I'm not sure if index.html/php vs. apache rewrite rules are
better, though.

Ciao!

-- 
Handy Latin Phrase #105
	Perscriptio in manibus tabellariorum est.
	(The check is in the mail)

The Doctor What: Ebullient                       http://docwhat.gerf.org/
docwhat *at* gerf *dot* org                                        KF6VNC
From ozh at planetozh.com  Thu Aug 30 15:03:34 2007
From: ozh at planetozh.com (Ozh)
Date: Thu Aug 30 15:04:37 2007
Subject: [wp-hackers] Adding phpmailer options (smtp for example)
Message-ID: <OF05374410.9222F053-ONC1257347.0051F2E4-C1257347.0052B9F2@notes.edfgdf.fr>

> I think it should be in the core.

> if email doesn't work for a user, his WordPress is next to useless (he 
> wont get the initial email, and wont be able to request to change the 
> password).

> probably in a section named "Advanced email preferences", with a warning 

> that the user should only change this if he has email problems.

I think the "next to useless" statement is true, however, how many users 
are concerned with email not working on their WP install? I'm not really 
into support forum, but from what I see in #wordpress, it concerns a very 
minority of people.

On the other hand, how many of the vast majority would get confused and 
maybe break their install after tweaking something they don't fully 
understand ?

A Codex page about email troubleshooting, and a link to the plugin if it 
appears to be helpful, seems more reasonable to me. I think core stuff 
should be added when they are useful for (close to) everyone, not fixing 
stuff for just an handful of users.

</my 4 cents>

Ozh
-- 
http://planetozh.com/
From lists.automattic.com at callum-macdonald.com  Thu Aug 30 14:46:34 2007
From: lists.automattic.com at callum-macdonald.com (Callum Macdonald)
Date: Thu Aug 30 15:15:27 2007
Subject: [wp-hackers] Adding phpmailer options (smtp for example)
In-Reply-To: <46D6D47C.8060201@yadan.net>
References: <46D5F753.70000@callum-macdonald.com>	<D69753B9-2FD3-4CB4-8E89-A5D3C24BC3B1@ftwr.co.uk>	<46D6B0C4.7090001@callum-macdonald.com>
	<46D6D47C.8060201@yadan.net>
Message-ID: <46D6D84A.8070204@callum-macdonald.com>

@Omry, I support that.

So I think that leaves us at:

For plugin: Peter, Kimmo, Morty
For core: Omry, Callum, DD32 (correct me if I misunderstood your mail)

Anyone else?

Cheers,


Callum.

Omry Yadan wrote:
> I think it should be in the core.
>
> if email doesn't work for a user, his WordPress is next to useless (he 
> wont get the initial email, and wont be able to request to change the 
> password).
>
> probably in a section named "Advanced email preferences", with a 
> warning that the user should only change this if he has email problems.
>
>
> Callum Macdonald wrote:
>
>> G'day,
>>
>> It would be possible to add it as a plugin. The change is only 2-4 
>> lines of code though, you simply comment out one line and add another 
>> 2 (4 if you're using SMTP auth). I figured it would make sense to 
>> make it available to all users rather than offering it as an add on.
>>
>> However, happy to go with the consensus. So far I count +2 for a 
>> plugin. Omry, do you have a view on it? Anyone else?
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
>

From otto at ottodestruct.com  Thu Aug 30 15:21:51 2007
From: otto at ottodestruct.com (Otto)
Date: Thu Aug 30 15:21:59 2007
Subject: [wp-hackers] protecting wp-content/plugins ?
In-Reply-To: <200708291902.07776.hovenko@linpro.no>
References: <ae81acd10708160700s596e5d93w6086b76c45f73710@mail.gmail.com>
	<7d6d8bd0708231612p62815edau47f403ab26750ca2@mail.gmail.com>
	<161617690708290932of07d785r35d10f4649977cd@mail.gmail.com>
	<200708291902.07776.hovenko@linpro.no>
Message-ID: <161617690708300821o74779f4aue3c05cde8f648d36@mail.gmail.com>

Meh. Six of one, half dozen of the other. The index.php (or better
yet, an index.html) file is simpler and almost foolproof. But simply
adding "Options -Indexes" to your root .htaccess file is faster and
has a lower server impact.


On 8/29/07, Knut-Olav Hoven <hovenko@linpro.no> wrote:
> On Wednesday 29 August 2007 18:32:56 Otto wrote:
> > What I'm saying is that the having somebody know that you are running
> > some specific plugin doesn't put you at any sort of extra risk
> > whatsoever. Disable Directory Indexing to stop search engines from
> > seeing them, and then get on with life. Going to extreme amounts of
> > effort by adding PHP code to plugins, like in this thread, is useless.
> > Worse than useless, because it's false security: You think you're
> > safer when you're actually not.
>
> From my point of view the biggest reason for not including empty index.php
> files everywhere is in fact all those empty files laying around; loose ends.
>
> Therefore i suggest we remove the wp-content/index.php file too (not sure if
> it still exists in trunk though). We need that one as much (or as little) as
> an empty index.php file in wp-content/uploads/.
>
>
> --
> Knut-Olav Hoven
> Systemutvikler               mob: +47 986 71 700
> Linpro AS                    http://www.linpro.no/
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
From morty at gmx.net  Thu Aug 30 15:27:18 2007
From: morty at gmx.net (Moritz 'morty' Struebe)
Date: Thu Aug 30 15:27:28 2007
Subject: [wp-hackers] Adding phpmailer options (smtp for example)
In-Reply-To: <46D6D84A.8070204@callum-macdonald.com>
References: <46D5F753.70000@callum-macdonald.com>	<D69753B9-2FD3-4CB4-8E89-A5D3C24BC3B1@ftwr.co.uk>	<46D6B0C4.7090001@callum-macdonald.com>	<46D6D47C.8060201@yadan.net>
	<46D6D84A.8070204@callum-macdonald.com>
Message-ID: <46D6E1D6.6080801@gmx.net>

Well, I'm for Plugin  and move to the core later. Or in other words: I'm 
for the core but I don't think it'll make it into the next release and 
I'd also love to have this soonish.
Further arguments:
wp_mail can be overloaded and therefore you just have to replace the the 
core-version.
Same with the GUI. If you keep in mind, that you want to integrate this 
in to the core, core integration should be doable in less then 1h. While 
writing and testing will take much longer. Testing and adjusting is much 
easier, too, as you just let people install the plugin and they don't 
have to check out from trunk. Once it's stable it can/should be moved to 
the core.
Cheers
Morty

Callum Macdonald wrote:
> @Omry, I support that.
>
> So I think that leaves us at:
>
> For plugin: Peter, Kimmo, Morty
> For core: Omry, Callum, DD32 (correct me if I misunderstood your mail)
>
> Anyone else?
>
> Cheers,
>
>
> Callum.
>
> Omry Yadan wrote:
>> I think it should be in the core.
>>
>> if email doesn't work for a user, his WordPress is next to useless 
>> (he wont get the initial email, and wont be able to request to change 
>> the password).
>>
>> probably in a section named "Advanced email preferences", with a 
>> warning that the user should only change this if he has email problems.
>>
>>
>> Callum Macdonald wrote:
>>
>>> G'day,
>>>
>>> It would be possible to add it as a plugin. The change is only 2-4 
>>> lines of code though, you simply comment out one line and add 
>>> another 2 (4 if you're using SMTP auth). I figured it would make 
>>> sense to make it available to all users rather than offering it as 
>>> an add on.
>>>
>>> However, happy to go with the consensus. So far I count +2 for a 
>>> plugin. Omry, do you have a view on it? Anyone else?
>>
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers@lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
>>
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From hovenko at linpro.no  Thu Aug 30 15:30:53 2007
From: hovenko at linpro.no (Knut-Olav Hoven)
Date: Thu Aug 30 15:30:58 2007
Subject: [wp-hackers] protecting wp-content/plugins ?
In-Reply-To: <161617690708300821o74779f4aue3c05cde8f648d36@mail.gmail.com>
References: <ae81acd10708160700s596e5d93w6086b76c45f73710@mail.gmail.com>
	<200708291902.07776.hovenko@linpro.no>
	<161617690708300821o74779f4aue3c05cde8f648d36@mail.gmail.com>
Message-ID: <200708301730.53432.hovenko@linpro.no>

How about changing the WordPress rewrite rules?
Will this break anything?


From:
                <IfModule mod_rewrite.c>
                        RewriteEngine On
                        RewriteBase /
                        RewriteCond %{REQUEST_FILENAME} !-f
                        RewriteCond %{REQUEST_FILENAME} !-d
                        RewriteRule . /index.php [L]
                </IfModule>


To:

                <IfModule mod_rewrite.c>
                        RewriteEngine On
                        RewriteBase /
                        RewriteCond %{REQUEST_FILENAME} !-f
                        RewriteRule . /index.php [L]
                </IfModule>



On Thursday 30 August 2007 17:21:51 Otto wrote:
> Meh. Six of one, half dozen of the other. The index.php (or better
> yet, an index.html) file is simpler and almost foolproof. But simply
> adding "Options -Indexes" to your root .htaccess file is faster and
> has a lower server impact.
>
> On 8/29/07, Knut-Olav Hoven <hovenko@linpro.no> wrote:
> > On Wednesday 29 August 2007 18:32:56 Otto wrote:
> > > What I'm saying is that the having somebody know that you are running
> > > some specific plugin doesn't put you at any sort of extra risk
> > > whatsoever. Disable Directory Indexing to stop search engines from
> > > seeing them, and then get on with life. Going to extreme amounts of
> > > effort by adding PHP code to plugins, like in this thread, is useless.
> > > Worse than useless, because it's false security: You think you're
> > > safer when you're actually not.
> >
> > From my point of view the biggest reason for not including empty
> > index.php files everywhere is in fact all those empty files laying
> > around; loose ends.
> >
> > Therefore i suggest we remove the wp-content/index.php file too (not sure
> > if it still exists in trunk though). We need that one as much (or as
> > little) as an empty index.php file in wp-content/uploads/.
> >
> >
> > --
> > Knut-Olav Hoven
> > Systemutvikler               mob: +47 986 71 700
> > Linpro AS                    http://www.linpro.no/
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers@lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers



-- 
Knut-Olav Hoven
Systemutvikler               mob: +47 986 71 700
Linpro AS                    http://www.linpro.no/
From wp-hackers at striderweb.com  Thu Aug 30 15:35:10 2007
From: wp-hackers at striderweb.com (Stephen Rider)
Date: Thu Aug 30 15:35:56 2007
Subject: [wp-hackers] Sharing Users/authentication
In-Reply-To: <a3b809ae0708292022q6906111dwedb413e1d7d82dea@mail.gmail.com>
References: <a3b809ae0708250521u5d472971j6c2b9b9c5d5163d3@mail.gmail.com>
	<9450A7DA-CCBD-4EAB-8F65-AD7C09AE0F1A@striderweb.com>
	<a3b809ae0708281530k73e397edq8c4adfd5b48cf857@mail.gmail.com>
	<a3b809ae0708281645j27530253m9f41a309b1f394eb@mail.gmail.com>
	<5464B782-D846-4629-9C5B-AB415A3BAADE@striderweb.com>
	<9A92A999-CEF0-4354-A878-8256724BBB63@striderweb.com>
	<a3b809ae0708291154q53d954e0u70a89c78f528d9fa@mail.gmail.com>
	<24C8AC8F-CCA7-4E49-A323-58C4486A6505@striderweb.com>
	<F9AA466F-FAB0-46DF-92F1-376BEF6F66D5@striderweb.com>
	<a3b809ae0708291329h555abcebxc3d56410f6ba5445@mail.gmail.com>
	<a3b809ae0708292022q6906111dwedb413e1d7d82dea@mail.gmail.com>
Message-ID: <2B88161F-FB0C-439F-A48B-BC31CB8B2276@striderweb.com>

> Hey, updated version. I fixed some issues and streamlined the code  
> a bit.

Cleared out all preferences and data from previous beta.

Preferences auto-set for prefix and database. Check
Switched to secondary blog.  _Not_ logged in.  Makes sense.
Logged into secondary blog.  Changed sm2wp prefix to primary.  Check.
Am logged in to both blogs. Check.
Logout/Login affects both blogs.  Check.
Added a user.  Check.
Checked user in other blog.  Awhuh?

Adding a user doesn't work.  The user gets added, but only with a  
meta data for the blog used to add the user.  Under the other blog  
he's listed as "No role for this blog".

On Aug 29, 2007, at 10:22 PM, Curt Woodard wrote:

> I'm still storing the plugin options under... options, but I
> think a better place would be a submenu off of the plugins page, don't
> you?

I would definitely not do that.  Either put it in the generic options  
location (Options menu) or a place specific to what it does (Users  
menu).

Personally, my Options menu is so cluttered with extra stuff that  
it's harder to find things.  If I were trying to set up how Users  
work, I would look under the Users menu.  :)

(Then there's Spam Karma, which extra-annoyingly adds its options  
under both "Options" and "Manage", but _not_ "Comments" where it  
would make sense!  Grrrr.....)


RE: The name thing.  Personally, I have no issue with slave/master,  
as it is informative AND is an established terminology with regards  
to technology (e.g. routers).  If you really want to get rid of it,  
you might go with "Primary" and "Secondary".  (or "lead"/"follow", or  
"jedi"/"padawan", or "president"/"vice president", or  
"greatbritaininthe1800s"/"india" or "duck"/"duckling", or  
"parent"/"child" -- ooh, "parent"/"child", that's a good one.)

The name of the plugin, on the other hand, is ambiguous.  Something  
simple like "Shared Users" would be better -- unless you come up with  
something snappy and distinctive, which _might_ be better.  Most  
plugins I see seem to be very simply named, which I like.  When  
looking at my list of installed plugins, I'm not trying to remember  
what "Bob's WowserPlug" does.  ;)

Regards,
Stephen
From jacobsantos at branson.com  Thu Aug 30 15:37:43 2007
From: jacobsantos at branson.com (jacobsantos@branson.com)
Date: Thu Aug 30 15:42:20 2007
Subject: [wp-hackers] protecting wp-content/plugins ?
In-Reply-To: <200708301730.53432.hovenko@linpro.no>
References: <ae81acd10708160700s596e5d93w6086b76c45f73710@mail.gmail.com>	<200708291902.07776.hovenko@linpro.no>	<161617690708300821o74779f4aue3c05cde8f648d36@mail.gmail.com>
	<200708301730.53432.hovenko@linpro.no>
Message-ID: <46D6E447.1030509@branson.com>

Yes.

Knut-Olav Hoven wrote:
> How about changing the WordPress rewrite rules?
> Will this break anything?
>
>
> From:
>                 <IfModule mod_rewrite.c>
>                         RewriteEngine On
>                         RewriteBase /
>                         RewriteCond %{REQUEST_FILENAME} !-f
>                         RewriteCond %{REQUEST_FILENAME} !-d
>                         RewriteRule . /index.php [L]
>                 </IfModule>
>
>
> To:
>
>                 <IfModule mod_rewrite.c>
>                         RewriteEngine On
>                         RewriteBase /
>                         RewriteCond %{REQUEST_FILENAME} !-f
>                         RewriteRule . /index.php [L]
>                 </IfModule>
>
>
>
> On Thursday 30 August 2007 17:21:51 Otto wrote:
>   
>> Meh. Six of one, half dozen of the other. The index.php (or better
>> yet, an index.html) file is simpler and almost foolproof. But simply
>> adding "Options -Indexes" to your root .htaccess file is faster and
>> has a lower server impact.
>>
>> On 8/29/07, Knut-Olav Hoven <hovenko@linpro.no> wrote:
>>     
>>> On Wednesday 29 August 2007 18:32:56 Otto wrote:
>>>       
>>>> What I'm saying is that the having somebody know that you are running
>>>> some specific plugin doesn't put you at any sort of extra risk
>>>> whatsoever. Disable Directory Indexing to stop search engines from
>>>> seeing them, and then get on with life. Going to extreme amounts of
>>>> effort by adding PHP code to plugins, like in this thread, is useless.
>>>> Worse than useless, because it's false security: You think you're
>>>> safer when you're actually not.
>>>>         
>>> From my point of view the biggest reason for not including empty
>>> index.php files everywhere is in fact all those empty files laying
>>> around; loose ends.
>>>
>>> Therefore i suggest we remove the wp-content/index.php file too (not sure
>>> if it still exists in trunk though). We need that one as much (or as
>>> little) as an empty index.php file in wp-content/uploads/.
>>>
>>>
>>> --
>>> Knut-Olav Hoven
>>> Systemutvikler               mob: +47 986 71 700
>>> Linpro AS                    http://www.linpro.no/
>>> _______________________________________________
>>> wp-hackers mailing list
>>> wp-hackers@lists.automattic.com
>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>>       
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers@lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>     
>
>
>
>   

From omry at yadan.net  Thu Aug 30 15:53:16 2007
From: omry at yadan.net (Omry Yadan)
Date: Thu Aug 30 15:54:01 2007
Subject: [wp-hackers] Adding phpmailer options (smtp for example)
In-Reply-To: <OF05374410.9222F053-ONC1257347.0051F2E4-C1257347.0052B9F2@notes.edfgdf.fr>
References: <OF05374410.9222F053-ONC1257347.0051F2E4-C1257347.0052B9F2@notes.edfgdf.fr>
Message-ID: <46D6E7EC.407@yadan.net>




Ozh wrote:

>> I think it should be in the core.
>>     
>> if email doesn't work for a user, his WordPress is next to useless (he 
>> wont get the initial email, and wont be able to request to change the 
>> password).
>>     
>
>   
>> probably in a section named "Advanced email preferences", with a warning 
>>     
>
>   
>> that the user should only change this if he has email problems.
>>     
>
> I think the "next to useless" statement is true, however, how many users 
> are concerned with email not working on their WP install? I'm not really 
> into support forum, but from what I see in #wordpress, it concerns a very 
> minority of people.
>   
I don't think the typical newbie wordpress user goes to the IRC for help.
IRC users are typically more prone to solve their own problems.

> On the other hand, how many of the vast majority would get confused and 
> maybe break their install after tweaking something they don't fully 
> understand ?
>   
That's why I said it should come with a warning.
> A Codex page about email troubleshooting, and a link to the plugin if it 
> appears to be helpful, seems more reasonable to me. I think core stuff 
> should be added when they are useful for (close to) everyone, not fixing 
> stuff for just an handful of users.
>   
I don't think it's a minor problem.
http://www.google.com/search?q=wordpress+email+problem&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla:en-US:official&client=firefox-a

From ozh at planetozh.com  Thu Aug 30 16:07:52 2007
From: ozh at planetozh.com (Ozh)
Date: Thu Aug 30 16:08:45 2007
Subject: [wp-hackers] Adding phpmailer options (smtp for example)
Message-ID: <OFE2626E36.C063EFE9-ONC1257347.005796F4-C1257347.00589CED@notes.edfgdf.fr>

> I don't think the typical newbie wordpress user goes to the IRC for 
help.
> IRC users are typically more prone to solve their own problems.

I think people in #wordpress wish it was the case :) People on IRC really 
do ask absolutely every kind of question, from advanced hacking topics to 
really really newbie stuff.

> I don't think it's a minor problem.
> http://www.google.com/search?q=wordpress+email+problem

Narrow your search with {wordpress "email problem"} (quotes) if you think 
google has some authority to guesstimate the severity of such a focused 
topic. I think something like 
<http://wordpress.org/search/email+not+sent?forums=1> would be a more 
legitimate way of doing so, but I'd even trust an active forum helper more 
than a search query to evaluate the spreading of the problem.

Ozh


From omry at yadan.net  Thu Aug 30 16:13:08 2007
From: omry at yadan.net (Omry Yadan)
Date: Thu Aug 30 16:13:52 2007
Subject: [wp-hackers] Adding phpmailer options (smtp for example)
In-Reply-To: <OFE2626E36.C063EFE9-ONC1257347.005796F4-C1257347.00589CED@notes.edfgdf.fr>
References: <OFE2626E36.C063EFE9-ONC1257347.005796F4-C1257347.00589CED@notes.edfgdf.fr>
Message-ID: <46D6EC94.7070107@yadan.net>


>> I don't think it's a minor problem.
>> http://www.google.com/search?q=wordpress+email+problem
>>     
>
> Narrow your search with {wordpress "email problem"} (quotes) if you think 
> google has some authority to guesstimate the severity of such a focused 
> topic. I think something like 
> <http://wordpress.org/search/email+not+sent?forums=1> would be a more 
> legitimate way of doing so, but I'd even trust an active forum helper more 
> than a search query to evaluate the spreading of the problem.
>
>   
My idea about the severity of the problem comes from lurking on a wp 
support mailing list.

From peter.westwood at ftwr.co.uk  Thu Aug 30 16:23:11 2007
From: peter.westwood at ftwr.co.uk (Peter Westwood)
Date: Thu Aug 30 16:23:17 2007
Subject: [wp-hackers] Adding phpmailer options (smtp for example)
In-Reply-To: <46D6CE1D.6080601@callum-macdonald.com>
References: <46D5F753.70000@callum-macdonald.com>	<D69753B9-2FD3-4CB4-8E89-A5D3C24BC3B1@ftwr.co.uk>	<46D6B0C4.7090001@callum-macdonald.com>	<op.txvfs7dbk6w4mc@dd32.no-ip.com>	<46D6B579.7030706@gmx.net>
	<46D6CE1D.6080601@callum-macdonald.com>
Message-ID: <46D6EEEF.7090806@ftwr.co.uk>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Callum Macdonald wrote:
> Ok, I've whipped up a plugin. It's a copy of the original wp_mail()
> function but it adds SMTP by default (to localhost) and a couple of
> other config options. They're currently only configurable within the
> file itself, but if it's a popular plugin I'll be happy to add an
> Options page to make it easier to configure.
> 
> Any feedback would be much appreciated.
> http://www.callum-macdonald.com/code/wp-mail-smtp/

Nice plugin.

But it misses on the simplicity of the task in hand.

This is actually all you need:

<?php
/*
 * Plugin Name: pjw-wp-mail-smtp
 * Version: 0.1
 * Plugin URI: http://blog.ftwr.co.uk/wordpress/
 * Description: Get PHPMailer to use smtp not mail()
 * Author: Peter Westwood
 * Author URI: http://blog.ftwr.co.uk/
 * */

add_action('phpmailer_init','pjw_phpmailer_init');

function pjw_phpmailer_init($php_mailer)
{
    $php_mailer->Mailer = 'smtp';
    $php_mailer->Host = 'localhost';
}
?>

The hook phpmailer_init is called just before ->Send in trunk and you
can just override the few parameters and not have to replace the whole
of wp_mail.

Hope this helps.

westi
- --
Peter Westwood
http://blog.ftwr.co.uk
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.2 (MingW32)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iD8DBQFG1u7vVPRdzag0AcURAsAbAJ9HV4dCyIuruiUe+btA1TlPTAPV4gCeIh7Q
UyRxCo3v2hAi+Pw7i/5hi7s=
=NjUf
-----END PGP SIGNATURE-----
From alex at buayacorp.com  Thu Aug 30 16:28:47 2007
From: alex at buayacorp.com (Alexander Concha)
Date: Thu Aug 30 16:28:51 2007
Subject: [wp-hackers] XMLRPC rework
Message-ID: <46D6F03F.6080909@buayacorp.com>

Hello Folks.

I think WP's XMLRPC server needs more attention because it has some
buggy methods and by default allows to gather useful information to
unprivileged users.

The following methods doesn't seem to work and because of security
implications, I suggest remove them -- although I'm not sure if they
were added for compatibility reasons.

- blogger_getTemplate
- blogger_setTemplate

OTOH, unprivileged users (aka anyone with a subscriber role) can
retrieve data which could be used for unknown purposes. Examples:

- mw_getRecentPosts will return posts including private fields like
post_password.
- wp_getAuthors will return the list of users with private data (email
and role).

Any comments?

Regards.

PS. Sorry for my bad English.
-- 
Alexander Concha
http://www.buayacorp.com/

No se puede cambiar el curso de la historia a base de cambiar los
retratos colgados en la pared
		-- Jawaharlal Nehru.
From yahgrp at poplarware.com  Thu Aug 30 16:52:43 2007
From: yahgrp at poplarware.com (Jennifer Hodgdon)
Date: Thu Aug 30 16:51:56 2007
Subject: [wp-hackers] Tag functionality questions
Message-ID: <46D6F5DB.6090302@poplarware.com>

I am testing the new tag functionality and trying to figure out how to 
work with tags in multilingual blogs.

But before I even get to figuring out a way to work with them 
multilingually, I have a few more basic questions about tag 
functionality in core WP 2.3:

1) It looks like there isn't any admin screen for managing tags -- 
e.g. editing slugs, editing misspellings, deleting tags, etc. Is that 
intentional? Or is it there and I missed something?

2) Is there any built-in functionality for tags besides (a) tagging a 
post on the edit screen and (b) a function to list the tags for a post 
in your Theme? I didn't see a tag cloud, for instance, and I think 
others have mentioned on this list that tags are not part of the RSS 
feed by default?

3) When I added a tag that matched an existing category slug exactly, 
it automatically used the same term for both. Is that intentional? I 
didn't like that behavior, among other things, because it capitalized 
the tag (I want my categories capitalized but I don't think it's 
standard to capitalize tags).

4) Given (I think) the limited (to the point of uselessness, from my 
point of view right now) functionality of the built-in tags in core WP 
2.3, which tag plugins is it supposed to be compatible with?

Thanks,
     Jennifer

-- 
Jennifer Hodgdon

Poplar ProductivityWare * www.poplarware.com
Web Databases/Scripts * Modeling/Analysis/Palm OS Software

From chris.hearn01 at ntlworld.com  Thu Aug 30 17:05:29 2007
From: chris.hearn01 at ntlworld.com (Chris)
Date: Thu Aug 30 17:05:39 2007
Subject: [wp-hackers] Page with only articles from category x.
In-Reply-To: <A873FA87-51BE-4A9F-A8DC-7E94BEDC8476@pixline.net>
References: <65955b6b0708290115m12f3d060ve516e85ba17946ce@mail.gmail.com>
	<A873FA87-51BE-4A9F-A8DC-7E94BEDC8476@pixline.net>
Message-ID: <46D6F8D9.7080801@ntlworld.com>

@paolo,
hi , i use your plugin, with a few tweaks - what is changing in 2.3 that 
it breaks the page2cat plugin - I think this will affect other parts of 
my site too, so a heads-up would be very hepful.
thanks,
chris

    ********************************************************************** 
    Chris Hearn 
    *Tel:* 01625 827589 
    *Mob:* 07768 725141 
    *email:* chris.hearn01@ntlworld.com 
    ********************************************************************** 
    The information transmitted is intended only for the person or entity 
    to which it is addressed and may contain confidential and/or privileged 
    material. Any review, retransmission, dissemination or other use of, 
    or taking of any action in reliance upon, this information by persons 
    or entities other than the intended recipient is prohibited. 
    If you received this in error, please contact the sender and delete the 
    material from any computer. 
    ********************************************************************** 



Pixline wrote:
> Alex Polite:
>
>> I want all posts from a specific category collected on one page, with
>> a sticky post on top. And I want a link for that  page to be displayed
>> in the K2 menu just like any other page.
>
> If you work on category or archive template instead of pages, and 
> pages instead of posts, my Category Page plugin will help you :-)
>
> http://wordpress.org/extend/plugins/page2cat/
>
> It lets you connect a page to one or more category, and have a 
> template function to show the page content insteand of "archive of 
> category X". This, and some tweaking on your template files, will make 
> what you need.
>
> this can have two effects:
> - you have link in the k2 menu as categories, as you already have, and 
> pages, if you like.
> - you have a page content in top instead of a post.
>
> If this can't work for you, I'll happy to figure out a solution and 
> include it in a next release.
> (disclaimer: plugin can't actually work with 2.3 beta, we are still 
> working on it.)
>
> p.
>
>
> Paolo / Pixline.net coder
> --------------------------------------------
> http://linkedin.com/in/paolotresso
> http://pixline.net
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
From lloydomattic at gmail.com  Thu Aug 30 17:35:01 2007
From: lloydomattic at gmail.com (Lloyd Budd)
Date: Thu Aug 30 17:35:09 2007
Subject: [wp-hackers] XMLRPC rework
In-Reply-To: <46D6F03F.6080909@buayacorp.com>
References: <46D6F03F.6080909@buayacorp.com>
Message-ID: <70ebb7140708301035r1a5fca66nf8db25f26d10c6fa@mail.gmail.com>

On 8/30/07, Alexander Concha <alex@buayacorp.com> wrote:
> Hello Folks.
>
> I think WP's XMLRPC server needs more attention because it has some
> buggy methods and by default allows to gather useful information to
> unprivileged users.

Hi Alex,

Although a very appropriate topic for this list, there is now a list
specifically for the topic: wp-xmlrpc@lists.automattic.com

>
> The following methods doesn't seem to work and because of security
> implications, I suggest remove them -- although I'm not sure if they
> were added for compatibility reasons.
>
> - blogger_getTemplate
> - blogger_setTemplate
>
> OTOH, unprivileged users (aka anyone with a subscriber role) can
> retrieve data which could be used for unknown purposes. Examples:
>
> - mw_getRecentPosts will return posts including private fields like
> post_password.
> - wp_getAuthors will return the list of users with private data (email
> and role).
>
> Any comments?
>
> Regards.
>
> PS. Sorry for my bad English.
> --
> Alexander Concha
> http://www.buayacorp.com/
From lloydomattic at gmail.com  Thu Aug 30 17:46:59 2007
From: lloydomattic at gmail.com (Lloyd Budd)
Date: Thu Aug 30 17:47:06 2007
Subject: [wp-hackers] Tag functionality questions
In-Reply-To: <46D6F5DB.6090302@poplarware.com>
References: <46D6F5DB.6090302@poplarware.com>
Message-ID: <70ebb7140708301046qfd511c4s57ba94be2fe2ae1f@mail.gmail.com>

On 8/30/07, Jennifer Hodgdon <yahgrp@poplarware.com> wrote:
> I am testing the new tag functionality and trying to figure out how to
> work with tags in multilingual blogs.
>
> But before I even get to figuring out a way to work with them
> multilingually, I have a few more basic questions about tag
> functionality in core WP 2.3:
>
> 1) It looks like there isn't any admin screen for managing tags --
> e.g. editing slugs, editing misspellings, deleting tags, etc. Is that
> intentional? Or is it there and I missed something?

It isn't there. I don't see any tickets related, so it seems like it
isn't in the works for 2.3 .


> 2) Is there any built-in functionality for tags besides (a) tagging a
> post on the edit screen and (b) a function to list the tags for a post
> in your Theme? I didn't see a tag cloud, for instance, and I think
> others have mentioned on this list that tags are not part of the RSS
> feed by default?

Getting it in the feeds has a high priority ticket.

A tag cloud has been floating around ;-) But I don't remember where it
is, so don't know if that will make it into 2.3


> 3) When I added a tag that matched an existing category slug exactly,
> it automatically used the same term for both. Is that intentional? I
> didn't like that behavior, among other things, because it capitalized
> the tag (I want my categories capitalized but I don't think it's
> standard to capitalize tags).

I think that is intentional, but I can see the capitalization being
bothersome for some.


> 4) Given (I think) the limited (to the point of uselessness, from my
> point of view right now) functionality of the built-in tags in core WP
> 2.3, which tag plugins is it supposed to be compatible with?

Need egg before chicken? At least one person in the bug hunt yesterday
was poking around specifically to create/update tagging plugins.


Cheers,
-- 
Lloyd Budd | Digital Entomologist | | Skype:foolswisdom
WordPress.com | WordPress.org | Automattic.com
From ionfish at gmail.com  Thu Aug 30 18:03:28 2007
From: ionfish at gmail.com (Benedict Eastaugh)
Date: Thu Aug 30 18:03:33 2007
Subject: [wp-hackers] Tag functionality questions
Message-ID: <fd3b80510708301103n3e9583f3r80354face73ad697@mail.gmail.com>

There's already a tag cloud function in 2.3, wp_tag_cloud.
From speedboxer at gmail.com  Thu Aug 30 18:11:21 2007
From: speedboxer at gmail.com (Matt)
Date: Thu Aug 30 18:11:25 2007
Subject: [wp-hackers] XMLRPC rework
In-Reply-To: <70ebb7140708301035r1a5fca66nf8db25f26d10c6fa@mail.gmail.com>
References: <46D6F03F.6080909@buayacorp.com>
	<70ebb7140708301035r1a5fca66nf8db25f26d10c6fa@mail.gmail.com>
Message-ID: <b88434820708301111s62a0b3dbp57821f63ab3071f9@mail.gmail.com>

On 8/30/07, Lloyd Budd <lloydomattic@gmail.com> wrote:
>
> Although a very appropriate topic for this list, there is now a list
> specifically for the topic: wp-xmlrpc@lists.automattic.com
>
Seems like there's a list for everything now...


-- 
Matt (speedboxer@gmail.com)
http://mattsblog.ca/ | http://livemp.net/
From emmensetech at gmail.com  Thu Aug 30 18:14:54 2007
From: emmensetech at gmail.com (=?utf-8?B?QWFyb24gQnJhemVsbA==?=)
Date: Thu Aug 30 18:15:49 2007
Subject: [wp-hackers] XMLRPC rework
In-Reply-To: <b88434820708301111s62a0b3dbp57821f63ab3071f9@mail.gmail.com>
References: <46D6F03F.6080909@buayacorp.com><70ebb7140708301035r1a5fca66nf8db25f26d10c6fa@mail.gmail.com><b88434820708301111s62a0b3dbp57821f63ab3071f9@mail.gmail.com>
Message-ID: <232290469-1188497738-cardhu_decombobulator_blackberry.rim.net-1390594842-@bxe110.bisx.prod.on.blackberry>

Are you subscribed to the wp-get_posts list? :)
(via Blackberry)
Aaron Brazell 
Director of Technology, b5media
"A Global New Media Company" 

web:: www.b5media.com, www.technosailor.com
phone:: 410-608-6620 
skype:: technosailor     

-----Original Message-----
From: Matt <speedboxer@gmail.com>

Date: Thu, 30 Aug 2007 11:11:21 
To:wp-hackers@lists.automattic.com
Subject: Re: [wp-hackers] XMLRPC rework


On 8/30/07, Lloyd Budd <lloydomattic@gmail.com> wrote:
>
> Although a very appropriate topic for this list, there is now a list
> specifically for the topic: wp-xmlrpc@lists.automattic.com
>
Seems like there's a list for everything now...


-- 
Matt (speedboxer@gmail.com)
http://mattsblog.ca/ | http://livemp.net/
_______________________________________________
wp-hackers mailing list
wp-hackers@lists.automattic.com
http://lists.automattic.com/mailman/listinfo/wp-hackers
From speedboxer at gmail.com  Thu Aug 30 18:20:48 2007
From: speedboxer at gmail.com (Matt)
Date: Thu Aug 30 18:20:55 2007
Subject: [wp-hackers] XMLRPC rework
In-Reply-To: <232290469-1188497738-cardhu_decombobulator_blackberry.rim.net-1390594842-@bxe110.bisx.prod.on.blackberry>
References: <46D6F03F.6080909@buayacorp.com>
	<70ebb7140708301035r1a5fca66nf8db25f26d10c6fa@mail.gmail.com>
	<b88434820708301111s62a0b3dbp57821f63ab3071f9@mail.gmail.com>
	<232290469-1188497738-cardhu_decombobulator_blackberry.rim.net-1390594842-@bxe110.bisx.prod.on.blackberry>
Message-ID: <b88434820708301120k13fe0a73o995f780ae7063f84@mail.gmail.com>

On 8/30/07, Aaron Brazell <emmensetech@gmail.com> wrote:
>
> Are you subscribed to the wp-get_posts list? :)
>
Aw, don't tell me I missed that list? ;)


-- 
Matt (speedboxer@gmail.com)
http://mattsblog.ca/ | http://livemp.net/
From supporto at pixline.net  Thu Aug 30 19:33:22 2007
From: supporto at pixline.net (Pixline)
Date: Thu Aug 30 19:33:39 2007
Subject: [wp-hackers] Page with only articles from category x.
In-Reply-To: <46D6F8D9.7080801@ntlworld.com>
References: <65955b6b0708290115m12f3d060ve516e85ba17946ce@mail.gmail.com>
	<A873FA87-51BE-4A9F-A8DC-7E94BEDC8476@pixline.net>
	<46D6F8D9.7080801@ntlworld.com>
Message-ID: <1254561D-453D-4910-A0C8-BAD5E0CFBCC4@pixline.net>

Chris:
> hi , i use your plugin, with a few tweaks - what is changing in 2.3  
> that it breaks the page2cat plugin - I think this will affect other  
> parts of my site too, so a heads-up would be very hepful.

I've noticed some subtle changes in 2.3 beta1 :-) I've committed  
today 0.4.3 that seems to be fully functional on the beta, at least  
for mine locally. If you like to test the plugin and suggest fix and  
improvements, I'll be happy to work on them.

Please refer at the plugin's forum for any kind of comment [1] . I'm  
having some trouble in dealing between comments, mails and  
mailinglists, and so on.. forum (I hope) will let informations flow  
better.

Seems that Category Page have some good karma, and I'm really happy  
about it.

Paolo

[1] http://talks.pixline.net/forum/category-page-plugin   ?  
obviously, it's bbpress ;-)








Paolo / Pixline.net coder
--------------------------------------------
http://linkedin.com/in/paolotresso
http://pixline.net

From chris.lott at gmail.com  Thu Aug 30 19:51:01 2007
From: chris.lott at gmail.com (Chris Lott)
Date: Thu Aug 30 19:51:08 2007
Subject: [wp-hackers] Sharing Users/authentication
In-Reply-To: <2B88161F-FB0C-439F-A48B-BC31CB8B2276@striderweb.com>
References: <a3b809ae0708250521u5d472971j6c2b9b9c5d5163d3@mail.gmail.com>
	<a3b809ae0708281645j27530253m9f41a309b1f394eb@mail.gmail.com>
	<5464B782-D846-4629-9C5B-AB415A3BAADE@striderweb.com>
	<9A92A999-CEF0-4354-A878-8256724BBB63@striderweb.com>
	<a3b809ae0708291154q53d954e0u70a89c78f528d9fa@mail.gmail.com>
	<24C8AC8F-CCA7-4E49-A323-58C4486A6505@striderweb.com>
	<F9AA466F-FAB0-46DF-92F1-376BEF6F66D5@striderweb.com>
	<a3b809ae0708291329h555abcebxc3d56410f6ba5445@mail.gmail.com>
	<a3b809ae0708292022q6906111dwedb413e1d7d82dea@mail.gmail.com>
	<2B88161F-FB0C-439F-A48B-BC31CB8B2276@striderweb.com>
Message-ID: <9b1b9dab0708301251q48761cebp5b244b0387f3c940@mail.gmail.com>

Stephen:

I'm trying this on a faculty blog and it worked fine on the first
blog... but on the second it gives this when I try to activate the
plugin:



WordPress database error: [Incorrect table name 'usermeta']
SELECT * FROM ``.usermeta WHERE user_id = '1' AND meta_key LIKE 'wp_%'

WordPress database error: [Incorrect table name 'usermeta']
INSERT INTO ``.usermeta (user_id, meta_key, meta_value) VALUES ('1',
'wp_capabilities', 'a:1:{s:13:"administrator";b:1;}')

WordPress database error: [Incorrect table name 'usermeta']
INSERT INTO ``.usermeta (user_id, meta_key, meta_value) VALUES ('1',
'wp_user_level', '10')

WordPress database error: [Incorrect table name 'usermeta']
INSERT INTO ``.usermeta (user_id, meta_key, meta_value) VALUES ('1',
'wp_autosave_draft_ids',
'a:19:{i:-1185495985;i:15;i:-1185931550;i:18;i:-1185932215;i:0;i:-1185933060;i:19;i:-1185992168;i:20;i:-1186000987;i:21;i:-1186001017;i:22;i:-1186100153;i:0;i:-1186433684;i:23;i:-1186438291;i:24;i:-1186532307;i:25;i:-1187633121;i:26;i:-1187717710;i:27;i:-1187729770;i:28;i:-1187820579;i:29;i:-1188254466;i:30;i:-1188329160;i:31;i:-1188336443;i:32;i:-1188446299;i:33;}')

WordPress database error: [Incorrect table name 'options']
SELECT option_value FROM ``.options WHERE option_name='siteurl'

WordPress database error: [Incorrect table name 'usermeta']
SELECT user_id FROM ``.usermeta WHERE meta_key LIKE 'wp_%'

WordPress database error: [Incorrect table name 'users']
SELECT ID FROM ``.users
From chris.lott at gmail.com  Thu Aug 30 21:01:54 2007
From: chris.lott at gmail.com (Chris Lott)
Date: Thu Aug 30 21:02:00 2007
Subject: [wp-hackers] Sharing Users/authentication
In-Reply-To: <9b1b9dab0708301251q48761cebp5b244b0387f3c940@mail.gmail.com>
References: <a3b809ae0708250521u5d472971j6c2b9b9c5d5163d3@mail.gmail.com>
	<5464B782-D846-4629-9C5B-AB415A3BAADE@striderweb.com>
	<9A92A999-CEF0-4354-A878-8256724BBB63@striderweb.com>
	<a3b809ae0708291154q53d954e0u70a89c78f528d9fa@mail.gmail.com>
	<24C8AC8F-CCA7-4E49-A323-58C4486A6505@striderweb.com>
	<F9AA466F-FAB0-46DF-92F1-376BEF6F66D5@striderweb.com>
	<a3b809ae0708291329h555abcebxc3d56410f6ba5445@mail.gmail.com>
	<a3b809ae0708292022q6906111dwedb413e1d7d82dea@mail.gmail.com>
	<2B88161F-FB0C-439F-A48B-BC31CB8B2276@striderweb.com>
	<9b1b9dab0708301251q48761cebp5b244b0387f3c940@mail.gmail.com>
Message-ID: <9b1b9dab0708301401p34d5f7a0o821c9f4ea4c3afa3@mail.gmail.com>

More info on the problem blog. When I install the plugin and activate
it, I receive the errors below. In the DB for that blog there are two
entries with an option_name of sm2wp_options.

The first has this value:
s:244:"a:4:{s:15:"sm2wp_master_db";s:14:"allenher_wrdp2";s:19:"sm2wp_master_prefix";s:3:"wp_";s:16:"sm2wp_USERCOOKIE";s:46:"wordpressuser_4260ef7ca4396b000b1537058c2340c2";s:16:"sm2wp_PASSCOOKIE";s:46:"wordpresspass_4260ef7ca4396b000b1537058c2340c2";}";

The second has this value:
s:162:"a:2:{s:16:"sm2wp_USERCOOKIE";s:46:"wordpressuser_d41d8cd98f00b204e9800998ecf8427e";s:16:"sm2wp_PASSCOOKIE";s:46:"wordpresspass_d41d8cd98f00b204e9800998ecf8427e";}";

c

On 8/30/07, Chris Lott <chris.lott@gmail.com> wrote:
> Stephen:
>
> I'm trying this on a faculty blog and it worked fine on the first
> blog... but on the second it gives this when I try to activate the
> plugin:
>
>
>
> WordPress database error: [Incorrect table name 'usermeta']
> SELECT * FROM ``.usermeta WHERE user_id = '1' AND meta_key LIKE 'wp_%'
>
> WordPress database error: [Incorrect table name 'usermeta']
> INSERT INTO ``.usermeta (user_id, meta_key, meta_value) VALUES ('1',
> 'wp_capabilities', 'a:1:{s:13:"administrator";b:1;}')
>
> WordPress database error: [Incorrect table name 'usermeta']
> INSERT INTO ``.usermeta (user_id, meta_key, meta_value) VALUES ('1',
> 'wp_user_level', '10')
>
> WordPress database error: [Incorrect table name 'usermeta']
> INSERT INTO ``.usermeta (user_id, meta_key, meta_value) VALUES ('1',
> 'wp_autosave_draft_ids',
> 'a:19:{i:-1185495985;i:15;i:-1185931550;i:18;i:-1185932215;i:0;i:-1185933060;i:19;i:-1185992168;i:20;i:-1186000987;i:21;i:-1186001017;i:22;i:-1186100153;i:0;i:-1186433684;i:23;i:-1186438291;i:24;i:-1186532307;i:25;i:-1187633121;i:26;i:-1187717710;i:27;i:-1187729770;i:28;i:-1187820579;i:29;i:-1188254466;i:30;i:-1188329160;i:31;i:-1188336443;i:32;i:-1188446299;i:33;}')
>
> WordPress database error: [Incorrect table name 'options']
> SELECT option_value FROM ``.options WHERE option_name='siteurl'
>
> WordPress database error: [Incorrect table name 'usermeta']
> SELECT user_id FROM ``.usermeta WHERE meta_key LIKE 'wp_%'
>
> WordPress database error: [Incorrect table name 'users']
> SELECT ID FROM ``.users
>


-- 
Chris Lott
From wp-hackers at striderweb.com  Thu Aug 30 21:17:39 2007
From: wp-hackers at striderweb.com (Stephen Rider)
Date: Thu Aug 30 21:17:47 2007
Subject: [wp-hackers] Sharing Users/authentication
In-Reply-To: <9b1b9dab0708301251q48761cebp5b244b0387f3c940@mail.gmail.com>
References: <a3b809ae0708250521u5d472971j6c2b9b9c5d5163d3@mail.gmail.com>
	<a3b809ae0708281645j27530253m9f41a309b1f394eb@mail.gmail.com>
	<5464B782-D846-4629-9C5B-AB415A3BAADE@striderweb.com>
	<9A92A999-CEF0-4354-A878-8256724BBB63@striderweb.com>
	<a3b809ae0708291154q53d954e0u70a89c78f528d9fa@mail.gmail.com>
	<24C8AC8F-CCA7-4E49-A323-58C4486A6505@striderweb.com>
	<F9AA466F-FAB0-46DF-92F1-376BEF6F66D5@striderweb.com>
	<a3b809ae0708291329h555abcebxc3d56410f6ba5445@mail.gmail.com>
	<a3b809ae0708292022q6906111dwedb413e1d7d82dea@mail.gmail.com>
	<2B88161F-FB0C-439F-A48B-BC31CB8B2276@striderweb.com>
	<9b1b9dab0708301251q48761cebp5b244b0387f3c940@mail.gmail.com>
Message-ID: <51429CDF-BABC-4397-9C1C-8EB927560385@striderweb.com>

Hi --

First off, This isn't my plugin, it's Curt Woodard's.  I've been  
helping with testing and making suggestions, though, so I'm pretty  
familiar with it.  :)

Questions:

Are the two blogs on the same or different database?

Same or different username/ password?


Somehow it seems that the writing of options isn't working  
correctly.  This may be a database problem of some sort.  I don't see  
any problems with the related code (yet).

When exactly do you get these errors?  immediately when you activate  
the plugin?  When you change the settings?

Stephen

On Aug 30, 2007, at 2:51 PM, Chris Lott wrote:

> Stephen:
>
> I'm trying this on a faculty blog and it worked fine on the first
> blog... but on the second it gives this when I try to activate the
> plugin:
>
> WordPress database error: [Incorrect table name 'usermeta']
> SELECT * FROM ``.usermeta WHERE user_id = '1' AND meta_key LIKE 'wp_%'
<snip>

From yahgrp at poplarware.com  Thu Aug 30 21:44:29 2007
From: yahgrp at poplarware.com (Jennifer Hodgdon)
Date: Thu Aug 30 21:43:46 2007
Subject: [wp-hackers] Tag functionality questions
In-Reply-To: <fd3b80510708301103n3e9583f3r80354face73ad697@mail.gmail.com>
References: <fd3b80510708301103n3e9583f3r80354face73ad697@mail.gmail.com>
Message-ID: <46D73A3D.7040206@poplarware.com>

Benedict Eastaugh wrote:
> There's already a tag cloud function in 2.3, wp_tag_cloud.

Thanks! I missed that function -- it was not in the "tags" section of 
category_template.php for some reason. If someone is going to put 
headers in the PHP files, they could be more careful about where they 
put functions.... :)
      --Jennifer

-- 
Jennifer Hodgdon

Poplar ProductivityWare * www.poplarware.com
Web Databases/Scripts * Modeling/Analysis/Palm OS Software

From chris.lott at gmail.com  Thu Aug 30 21:44:21 2007
From: chris.lott at gmail.com (Chris Lott)
Date: Thu Aug 30 21:44:25 2007
Subject: [wp-hackers] Sharing Users/authentication
In-Reply-To: <51429CDF-BABC-4397-9C1C-8EB927560385@striderweb.com>
References: <a3b809ae0708250521u5d472971j6c2b9b9c5d5163d3@mail.gmail.com>
	<9A92A999-CEF0-4354-A878-8256724BBB63@striderweb.com>
	<a3b809ae0708291154q53d954e0u70a89c78f528d9fa@mail.gmail.com>
	<24C8AC8F-CCA7-4E49-A323-58C4486A6505@striderweb.com>
	<F9AA466F-FAB0-46DF-92F1-376BEF6F66D5@striderweb.com>
	<a3b809ae0708291329h555abcebxc3d56410f6ba5445@mail.gmail.com>
	<a3b809ae0708292022q6906111dwedb413e1d7d82dea@mail.gmail.com>
	<2B88161F-FB0C-439F-A48B-BC31CB8B2276@striderweb.com>
	<9b1b9dab0708301251q48761cebp5b244b0387f3c940@mail.gmail.com>
	<51429CDF-BABC-4397-9C1C-8EB927560385@striderweb.com>
Message-ID: <9b1b9dab0708301444m30c0bee7ua270d5cb46ede7d6@mail.gmail.com>

So, I cleared everything out (de-activated plugin, deleted rows from
wp_options, copied fresh plugin files) and tried again and here is
what is happening... slightly different now.

Starting with two blogs without the plugin. I install the plugin on
the first (master) blog. Activate it. No errors. When I look at the
options it is showing the right database and prefix. Note: I can't
logout of that blog, though... when I try to sign out I just get
redirected to the same page in the control panel area I am on.

At this point I see only one entry in the wp_options table.

Go to second (slave) blog. Activate plugin. Go to options, put in
database name (it is a diff database) and prefix (which is the same).
No errors. I can sign out.

Back to master blog, still no errors, can;t sign out.

Back to slave blog, can't sign in with any usernames from the Master
blog (says invalid username), old sign-ins from the slave blog still
work.

In the master blog the wp_options line has this value:
s:244:"a:4:{s:15:"sm2wp_master_db";s:14:"allenher_wrdp2";s:19:"sm2wp_master_prefix";s:3:"wp_";s:16:"sm2wp_USERCOOKIE";s:46:"wordpressuser_4260ef7ca4396b000b1537058c2340c2";s:16:"sm2wp_PASSCOOKIE";s:46:"wordpresspass_4260ef7ca4396b000b1537058c2340c2";}";

The slave blog has this:
s:244:"a:4:{s:15:"sm2wp_master_db";s:14:"allenher_wrdp2";s:19:"sm2wp_master_prefix";s:3:"wp_";s:16:"sm2wp_USERCOOKIE";s:46:"wordpressuser_64b5d61f29f381587decc7258d071523";s:16:"sm2wp_PASSCOOKIE";s:46:"wordpresspass_64b5d61f29f381587decc7258d071523";}";

No errors showing, but nothing seems to be happening. It's mystifying.

c



On 8/30/07, Stephen Rider <wp-hackers@striderweb.com> wrote:
> Hi --
>
> First off, This isn't my plugin, it's Curt Woodard's.  I've been
> helping with testing and making suggestions, though, so I'm pretty
> familiar with it.  :)
>
> Questions:
>
> Are the two blogs on the same or different database?
>
> Same or different username/ password?
>
>
> Somehow it seems that the writing of options isn't working
> correctly.  This may be a database problem of some sort.  I don't see
> any problems with the related code (yet).
>
> When exactly do you get these errors?  immediately when you activate
> the plugin?  When you change the settings?
>
> Stephen
>
> On Aug 30, 2007, at 2:51 PM, Chris Lott wrote:
>
> > Stephen:
> >
> > I'm trying this on a faculty blog and it worked fine on the first
> > blog... but on the second it gives this when I try to activate the
> > plugin:
> >
> > WordPress database error: [Incorrect table name 'usermeta']
> > SELECT * FROM ``.usermeta WHERE user_id = '1' AND meta_key LIKE 'wp_%'
> <snip>
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>


-- 
Chris Lott
From awgandrews at gmail.com  Thu Aug 30 22:05:30 2007
From: awgandrews at gmail.com (Alex Andrews)
Date: Thu Aug 30 22:05:35 2007
Subject: [wp-hackers] Hacking Registration To Allow Users To Specify
	Passwords
Message-ID: <e9f3ce460708301505g42f9350fl372641f0cbe4633d@mail.gmail.com>

Hello again all.

What I would really like to do is slightly tweak the registration
process. Instead of receiving their password in an e-mail, as is
common to many sites, they will register their e-mail and give a
password, then have to "confirm" this e-mail as being live at some
point in, say, the next few hours.

Is this possible? Is this going to require a major re-write or are
there things to hook into?

Regards

Alex
From wp-hackers at striderweb.com  Thu Aug 30 22:17:41 2007
From: wp-hackers at striderweb.com (Stephen Rider)
Date: Thu Aug 30 22:17:46 2007
Subject: [wp-hackers] Sharing Users/authentication
In-Reply-To: <9b1b9dab0708301444m30c0bee7ua270d5cb46ede7d6@mail.gmail.com>
References: <a3b809ae0708250521u5d472971j6c2b9b9c5d5163d3@mail.gmail.com>
	<9A92A999-CEF0-4354-A878-8256724BBB63@striderweb.com>
	<a3b809ae0708291154q53d954e0u70a89c78f528d9fa@mail.gmail.com>
	<24C8AC8F-CCA7-4E49-A323-58C4486A6505@striderweb.com>
	<F9AA466F-FAB0-46DF-92F1-376BEF6F66D5@striderweb.com>
	<a3b809ae0708291329h555abcebxc3d56410f6ba5445@mail.gmail.com>
	<a3b809ae0708292022q6906111dwedb413e1d7d82dea@mail.gmail.com>
	<2B88161F-FB0C-439F-A48B-BC31CB8B2276@striderweb.com>
	<9b1b9dab0708301251q48761cebp5b244b0387f3c940@mail.gmail.com>
	<51429CDF-BABC-4397-9C1C-8EB927560385@striderweb.com>
	<9b1b9dab0708301444m30c0bee7ua270d5cb46ede7d6@mail.gmail.com>
Message-ID: <51CC9FF1-D4AE-41DC-979B-C8AD6C5E6B1F@striderweb.com>


On Aug 30, 2007, at 4:44 PM, Chris Lott wrote:

> So, I cleared everything out (de-activated plugin, deleted rows from
> wp_options, copied fresh plugin files) and tried again and here is
> what is happening... slightly different now.

Did you also clear the extra data out of the user_meta table?

> Starting with two blogs without the plugin. I install the plugin on
> the first (master) blog. Activate it. No errors. When I look at the
> options it is showing the right database and prefix.

So far so good.

> Note: I can't logout of that blog, though... when I try to sign out  
> I just get
> redirected to the same page in the control panel area I am on.

That suggests to me that you have some problem that is unrelated to  
this plugin.  Nothing I know of in this plugin should prevent you  
from logging out.

Deactivate the plugin in both blogs, and see if the logout problem is  
still there.

Actually, first just clear your cache and see what happens. :)

> At this point I see only one entry in the wp_options table.
>
> Go to second (slave) blog. Activate plugin. Go to options, put in
> database name (it is a diff database) and prefix (which is the same).
> No errors. I can sign out.

I suspected this might be the case.  I emailed the plugin author  
separately asking just this a few minutes ago.  Is the login/password  
the same or different on the two databases?

WAIT! I've got it!  The two have to have different prefixes.  Right  
now they both think they are the master blog.  This is a bug.

(Though I'm still quite sure the "can't logout" problem is something  
unrelated to this plugin.)

Hey Curt -- if you're reading this, my "auto detect Master/Slave"  
suggestion just hit a snag!  :0  Maybe test for both prefix _and_  
database name?

Stephen
From viper at viper007bond.com  Thu Aug 30 22:44:58 2007
From: viper at viper007bond.com (Viper007Bond)
Date: Thu Aug 30 22:45:14 2007
Subject: [wp-hackers] Templatedia, a new work in progress plugin
In-Reply-To: <4681c7d40708300702r5e0730ear386154515fedae40@mail.gmail.com>
References: <8f93a7390708300637q5b5d2adeid17adefa40bd7dd5@mail.gmail.com>
	<4681c7d40708300702r5e0730ear386154515fedae40@mail.gmail.com>
Message-ID: <8f93a7390708301544t39583e93t5b5a7844fc86e6b8@mail.gmail.com>

You can't use this in the actual theme files (use include() for that). This
is strictly for actual post/page content, hence the add_filter().

An example usage:

You have a bunch of plugins you've written and a page for each. You want to
have a color/styled box on each plugin's page that has a fancy icon, says
what the latest version is, and has a download link. Well, rather than
duplicating the HTML into each post, you use this plugin and make a
template, such as this (we'll call it "downloadbox"):

<div
style="background-color:yellow;width:300px;text-align:center;float:right;"><img
src="/foo/bar/file.png" alt="File" /><br /><br />Latest Version: <a href="
http://site.com/files/{{file}}">{{version|Download}}</a></div>

Then you would just put this into your post/page:

{{downloadbox|file=plugin.zip|version=1.2.6}}

or even this to just display "Download" for the link:

{{downloadbox|file=plugin.zip}}

Follow? :)

On 8/30/07, Computer Guru <computerguru@neosmart.net> wrote:
>
> Nice idea, that's for sure :-)
>
> Can "template elements" be used from within posts as well? Or only in
> the theme php?
>
> Wasn't there a plugin a while back for adding Smarty to WP? Anyone
> know what happened to it?
>
> On 8/30/07, Viper007Bond <viper@viper007bond.com> wrote:
> > I was bored the other day, in the mood to code, and surfing when it
> occurred
> > to me that Wikipedia / MediaWiki's template system would work well as a
> > template system for posts. For example, a box that says "download this
> > plugin" with a fancy icon and all that. You could simply do
> > {{downloadbox|file.zip}} and it'd put the box's HTML there along with
> the
> > right link.
> >
> > So, partially as a coding challenge to myself but as well as to develop
> a
> > plugin I figured some people might get some use out of, I present you
> all my
> > new plugin: Templatedia
> >
> > At 100 lines of code, it's a lot simpler than I expected it to be, but
> then
> > again it has no user interface yet and is still missing some advanced
> > template abilities that the original MediaWiki format has.
> >
> > If you'd like to check out what I have so far, I've pastebin'ed it:
> > http://wp-hackers.pastebin.com/f3c38ad72
> >
> > Be warned -- it may not the best way to go about doing this feature. I
> came
> > up with it from scratch and didn't use anything as a basis in terms of
> code.
> > I'm also really inexperienced when it comes to regex, so no laughing
> please.
> > :P
> >
> > Feature suggestions and comments are welcome, especially at this early
> stage
> > when it's still easy to change things. ;)
> >
> > --
> > Viper007Bond | http://www.viper007bond.com/
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers@lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> >
>
>
> --
> Computer Guru
> Director,
> NeoSmart Technologies
> http://neosmart.net/blog/
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>



-- 
Viper007Bond | http://www.viper007bond.com/
From viper at viper007bond.com  Thu Aug 30 22:53:06 2007
From: viper at viper007bond.com (Viper007Bond)
Date: Thu Aug 30 22:53:27 2007
Subject: [wp-hackers] Hacking Registration To Allow Users To Specify
	Passwords
In-Reply-To: <e9f3ce460708301505g42f9350fl372641f0cbe4633d@mail.gmail.com>
References: <e9f3ce460708301505g42f9350fl372641f0cbe4633d@mail.gmail.com>
Message-ID: <8f93a7390708301553r8e9dc71h4cf2e3c94ec21419@mail.gmail.com>

It'd be easy to change the form. I worked it over a few months ago and added
hooks galore to the thing. You should be able to pretty much anything with
it.

Example plugin:
http://files.viper007bond.com/wordpress/loginformexample.phps

Then it's just a matter of intercepting the field's submission (there's a
hook for that) and using it to create a new user account. However, it
doesn't there's any place to hook in and change the password to what the
user specified, either in wp-login.php (where the password is generated) or
in wp_insert_user() where the account is actually created.

I'll go make a ticket. :)

On 8/30/07, Alex Andrews <awgandrews@gmail.com> wrote:
>
> Hello again all.
>
> What I would really like to do is slightly tweak the registration
> process. Instead of receiving their password in an e-mail, as is
> common to many sites, they will register their e-mail and give a
> password, then have to "confirm" this e-mail as being live at some
> point in, say, the next few hours.
>
> Is this possible? Is this going to require a major re-write or are
> there things to hook into?
>
> Regards
>
> Alex
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>



-- 
Viper007Bond | http://www.viper007bond.com/
From viper at viper007bond.com  Thu Aug 30 22:58:06 2007
From: viper at viper007bond.com (Viper007Bond)
Date: Thu Aug 30 22:58:14 2007
Subject: [wp-hackers] Hacking Registration To Allow Users To Specify
	Passwords
In-Reply-To: <8f93a7390708301553r8e9dc71h4cf2e3c94ec21419@mail.gmail.com>
References: <e9f3ce460708301505g42f9350fl372641f0cbe4633d@mail.gmail.com>
	<8f93a7390708301553r8e9dc71h4cf2e3c94ec21419@mail.gmail.com>
Message-ID: <8f93a7390708301558o6adb3645oc61566c303a596e2@mail.gmail.com>

Actually, you could do it now by updating the user's account after it's been
created and changing the password to the one they entered. The only drawback
however is that they'd get an e-mail with their random password in it.

On 8/30/07, Viper007Bond <viper@viper007bond.com> wrote:
>
> It'd be easy to change the form. I worked it over a few months ago and
> added hooks galore to the thing. You should be able to pretty much anything
> with it.
>
> Example plugin:
> http://files.viper007bond.com/wordpress/loginformexample.phps
>
> Then it's just a matter of intercepting the field's submission (there's a
> hook for that) and using it to create a new user account. However, it
> doesn't there's any place to hook in and change the password to what the
> user specified, either in wp-login.php (where the password is generated)
> or in wp_insert_user() where the account is actually created.
>
> I'll go make a ticket. :)
>
> On 8/30/07, Alex Andrews <awgandrews@gmail.com> wrote:
> >
> > Hello again all.
> >
> > What I would really like to do is slightly tweak the registration
> > process. Instead of receiving their password in an e-mail, as is
> > common to many sites, they will register their e-mail and give a
> > password, then have to "confirm" this e-mail as being live at some
> > point in, say, the next few hours.
> >
> > Is this possible? Is this going to require a major re-write or are
> > there things to hook into?
> >
> > Regards
> >
> > Alex
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers@lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> >
>
>
>
> --
> Viper007Bond | http://www.viper007bond.com/




-- 
Viper007Bond | http://www.viper007bond.com/
From viper at viper007bond.com  Thu Aug 30 23:01:27 2007
From: viper at viper007bond.com (Viper007Bond)
Date: Thu Aug 30 23:02:23 2007
Subject: [wp-hackers] Hacking Registration To Allow Users To Specify
	Passwords
In-Reply-To: <8f93a7390708301558o6adb3645oc61566c303a596e2@mail.gmail.com>
References: <e9f3ce460708301505g42f9350fl372641f0cbe4633d@mail.gmail.com>
	<8f93a7390708301553r8e9dc71h4cf2e3c94ec21419@mail.gmail.com>
	<8f93a7390708301558o6adb3645oc61566c303a596e2@mail.gmail.com>
Message-ID: <8f93a7390708301601k160dd9eevce99834d52b70d3a@mail.gmail.com>

Ugh, sorry to triple post, but here's the ticket and a patch:
http://trac.wordpress.org/ticket/4879

On 8/30/07, Viper007Bond <viper@viper007bond.com> wrote:
>
> Actually, you could do it now by updating the user's account after it's
> been created and changing the password to the one they entered. The only
> drawback however is that they'd get an e-mail with their random password in
> it.
>
> On 8/30/07, Viper007Bond <viper@viper007bond.com> wrote:
> >
> > It'd be easy to change the form. I worked it over a few months ago and
> > added hooks galore to the thing. You should be able to pretty much anything
> > with it.
> >
> > Example plugin:
> > http://files.viper007bond.com/wordpress/loginformexample.phps
> >
> > Then it's just a matter of intercepting the field's submission (there's
> > a hook for that) and using it to create a new user account. However, it
> > doesn't there's any place to hook in and change the password to what the
> > user specified, either in wp-login.php (where the password is generated)
> > or in wp_insert_user() where the account is actually created.
> >
> > I'll go make a ticket. :)
> >
> > On 8/30/07, Alex Andrews <awgandrews@gmail.com> wrote:
> > >
> > > Hello again all.
> > >
> > > What I would really like to do is slightly tweak the registration
> > > process. Instead of receiving their password in an e-mail, as is
> > > common to many sites, they will register their e-mail and give a
> > > password, then have to "confirm" this e-mail as being live at some
> > > point in, say, the next few hours.
> > >
> > > Is this possible? Is this going to require a major re-write or are
> > > there things to hook into?
> > >
> > > Regards
> > >
> > > Alex
> > > _______________________________________________
> > > wp-hackers mailing list
> > > wp-hackers@lists.automattic.com
> > > http://lists.automattic.com/mailman/listinfo/wp-hackers
> > >
> >
> >
> >
> > --
> > Viper007Bond | http://www.viper007bond.com/
>
>
>
>
> --
> Viper007Bond | http://www.viper007bond.com/
>



-- 
Viper007Bond | http://www.viper007bond.com/
From clwoodard at gmail.com  Fri Aug 31 01:15:35 2007
From: clwoodard at gmail.com (Curt Woodard)
Date: Fri Aug 31 01:15:40 2007
Subject: [wp-hackers] Sharing Users/authentication
Message-ID: <a3b809ae0708301815nc701f01rff2b9f1d10b4eefe@mail.gmail.com>

>> So, I cleared everything out (de-activated plugin, deleted rows from
>> wp_options, copied fresh plugin files) and tried again and here is
>> what is happening... slightly different now.
>
>Did you also clear the extra data out of the user_meta table?
>
>> Starting with two blogs without the plugin. I install the plugin on
>> the first (master) blog. Activate it. No errors. When I look at the
>> options it is showing the right database and prefix.
>
>So far so good.
>
>> Note: I can't logout of that blog, though... when I try to sign out
>> I just get
>> redirected to the same page in the control panel area I am on.
>
>That suggests to me that you have some problem that is unrelated to
>this plugin.  Nothing I know of in this plugin should prevent you
>from logging out.
>
>Deactivate the plugin in both blogs, and see if the logout problem is
>still there.
>
>Actually, first just clear your cache and see what happens. :)

Actually, have a look at your cookies, let me know if they are being
deleted when you log out. This tells me that they aren't and there
might be an issue with wp_clear_cookie...

>> At this point I see only one entry in the wp_options table.
>>
>> Go to second (slave) blog. Activate plugin. Go to options, put in
>> database name (it is a diff database) and prefix (which is the same).
>> No errors. I can sign out.
>
>I suspected this might be the case.  I emailed the plugin author
>separately asking just this a few minutes ago.  Is the login/password
>the same or different on the two databases?
>
>WAIT! I've got it!  The two have to have different prefixes.  Right
>now they both think they are the master blog.  This is a bug.
>
>(Though I'm still quite sure the "can't logout" problem is something
>unrelated to this plugin.)
>
>Hey Curt -- if you're reading this, my "auto detect Master/Slave"
>suggestion just hit a snag!  :0  Maybe test for both prefix _and_
>database name?

This has been addressed in the new release (v2.6 BETA). I am testing
against both database name and against prefix. If both database and
prefix are the same then you are in the master copy, otherwise you're
in the slave copy. This is because you either have them in different
databases or the same database with different prefixes. Now, if you're
on different servers, that's a whole different can of worms :)

I also set up the plugin so that it will copy over the user_level as well.

Let me know if this one works! http://www.lyonesse.info/WPP/

Chris:
I'd seen your previous message but this one came in where you're using
the *almost* latest copy (since I'd added changes before you get this
message). It looked like you were having issues pointing to the proper
database since in the query you showed us had ''.<table> the '' was
empty and should have had a table name in it. The new version of the
plugin automatically uses the DB name and prefix of the copy it's run
on. You have to change it on the options panel now (Options>SM2WP).

Go ahead and remove all the sm2wp_options or other options that start
with sm2wp_ in the options table of both your databases and also make
sure the usermeta table for the master is cleared up.

Keep in mind that there may be issues if you have members in both
tables since user_ids and usernames could overlap and cause problems.
It's best to start with fresh copies if you can. If you can't, make
your master a brand-new install with only the admin account. Then turn
the copy with all the users into the slave and let the info copy over.

-Curt

-Curt
From wordpress at tekartist.org  Fri Aug 31 02:44:42 2007
From: wordpress at tekartist.org (Stephane Daury)
Date: Fri Aug 31 02:44:51 2007
Subject: [wp-hackers] WordPress.org and WordPress.com integration
In-Reply-To: <7C09ADFC-0F0D-41D7-9066-5743B8A1925F@txfx.net>
References: <46D67EAE.2080505@gmail.com>
	<F1F52750-0919-4D05-8F11-C168DD84B5A4@tekartist.org>
	<7C09ADFC-0F0D-41D7-9066-5743B8A1925F@txfx.net>
Message-ID: <2E210D3E-A781-476D-AAED-F6470D89B237@tekartist.org>


Big thanks Mark.
I don't think you could have provided a better answer to my question  
(zero sarcasm intended).

I had never setup an actual blog at wordpress.com (just an account  
for an api-key for my self-hosted instance), and I wasn't aware of  
the feature, since it only becomes available once you actually get a  
URL.

Reference for others: http://faq.wordpress.com/2007/03/06/what-is- 
openid/

Kick a**! I'm a big fan of open decentrailzed auth: OpenID, SAML,  
Yadis, Shibboleth, etc..

On another note, I agree with you on having wordpress.com (and  
the .org properties) having OpenID integration.
I'd even go as far as saying this should be a default feature in WP.
Again, I'm a fan and therefore biased, but it'd be yet another push  
for decentralized auth with such an authoritative figure as Wp (in  
its own realm).
I know AOL, Visa and the likes are providers, but I'm not sure if  
they made the move into being consumers as well (ironic).

Doing the same (provider/consumer) for my institution is a pet  
project of mine to be rolled into an upcoming directory rethink,  
which could mean 250,000+ new decentralized users.

Thanks again. :)


Stephane



On Aug 30, 2007, at 10:52, Mark Jaquith wrote:

> On Aug 30, 2007, at 9:48 AM, Stephane Daury wrote:
>
>> While we're on the integration subject, would anyone happen to  
>> know if there is currently a project towards having integration  
>> between self-hosted blogs and wordpress.com/.org user accounts?
>
> WP.com is an OpenID provider, so with an OpenID plugin for your  
> privately hosted WordPress blog, you could log in using your WP.com- 
> provided OpenID.
>
> Personally I'd like to see WP.com become an OpenID *consumer* --  
> but that's a discussion for a different forum.
>
> Regarding .org -- there is some sort of internal syncing going on  
> so that user accounts are shared among various wp.org properties,  
> but there's no OpenID that I'm aware of.
>
> --
> Mark Jaquith
> http://markjaquith.com/
>
> Covered Web Services
> http://coveredwebservices.com/
>
> WordPress Ninja @ b5media Inc
> http://b5media.com/
>
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

From wordpress at tekartist.org  Fri Aug 31 02:47:59 2007
From: wordpress at tekartist.org (Stephane Daury)
Date: Fri Aug 31 02:48:04 2007
Subject: [wp-hackers] WordPress.org and WordPress.com integration
In-Reply-To: <4681c7d40708300704x67812205n3af10d0dce7a0120@mail.gmail.com>
References: <46D67EAE.2080505@gmail.com>
	<F1F52750-0919-4D05-8F11-C168DD84B5A4@tekartist.org>
	<4681c7d40708300704x67812205n3af10d0dce7a0120@mail.gmail.com>
Message-ID: <25A4671F-7711-4300-A23E-5AEF37C99A4E@tekartist.org>


What's wrong with solutions like OpenLDAP?
http://www.openldap.org/

Have you looked into the Fedora Directory Server project?
http://directory.fedoraproject.org/

Stephane



On Aug 30, 2007, at 10:04, Computer Guru wrote:

> Going *really* off-topic here, but does anyone know of a good
> *script*-based LDAP server?
>
> I've been using various application-based LDAP servers on other
> projects, but I'd love it if anyone could recommend a full-fledged
> script+database-based LDAP server one could use. (basically for
> cross-compatibility across different platforms, easy code hacking,
> etc.)
>
> Cheers,
> CG

From wordpress at tekartist.org  Fri Aug 31 02:55:45 2007
From: wordpress at tekartist.org (Stephane Daury)
Date: Fri Aug 31 02:55:53 2007
Subject: [wp-hackers] Templatedia, a new work in progress plugin
In-Reply-To: <8f93a7390708301544t39583e93t5b5a7844fc86e6b8@mail.gmail.com>
References: <8f93a7390708300637q5b5d2adeid17adefa40bd7dd5@mail.gmail.com>
	<4681c7d40708300702r5e0730ear386154515fedae40@mail.gmail.com>
	<8f93a7390708301544t39583e93t5b5a7844fc86e6b8@mail.gmail.com>
Message-ID: <2F231F59-21A6-4F06-BE90-EC6233D1F435@tekartist.org>


That is cool (hadn't read the thread yet).

Stephane



On Aug 30, 2007, at 18:44, Viper007Bond wrote:

> You can't use this in the actual theme files (use include() for  
> that). This
> is strictly for actual post/page content, hence the add_filter().
>
> An example usage:
>
> You have a bunch of plugins you've written and a page for each. You  
> want to
> have a color/styled box on each plugin's page that has a fancy  
> icon, says
> what the latest version is, and has a download link. Well, rather than
> duplicating the HTML into each post, you use this plugin and make a
> template, such as this (we'll call it "downloadbox"):
>
> <div
> style="background-color:yellow;width:300px;text- 
> align:center;float:right;"><img
> src="/foo/bar/file.png" alt="File" /><br /><br />Latest Version: <a  
> href="
> http://site.com/files/{{file}}">{{version|Download}}</a></div>
>
> Then you would just put this into your post/page:
>
> {{downloadbox|file=plugin.zip|version=1.2.6}}
>
> or even this to just display "Download" for the link:
>
> {{downloadbox|file=plugin.zip}}
>
> Follow? :)
>
> On 8/30/07, Computer Guru <computerguru@neosmart.net> wrote:
>>
>> Nice idea, that's for sure :-)
>>
>> Can "template elements" be used from within posts as well? Or only in
>> the theme php?
>>
>> Wasn't there a plugin a while back for adding Smarty to WP? Anyone
>> know what happened to it?
>>
>> On 8/30/07, Viper007Bond <viper@viper007bond.com> wrote:
>>> I was bored the other day, in the mood to code, and surfing when it
>> occurred
>>> to me that Wikipedia / MediaWiki's template system would work  
>>> well as a
>>> template system for posts. For example, a box that says "download  
>>> this
>>> plugin" with a fancy icon and all that. You could simply do
>>> {{downloadbox|file.zip}} and it'd put the box's HTML there along  
>>> with
>> the
>>> right link.
>>>
>>> So, partially as a coding challenge to myself but as well as to  
>>> develop
>> a
>>> plugin I figured some people might get some use out of, I present  
>>> you
>> all my
>>> new plugin: Templatedia
>>>
>>> At 100 lines of code, it's a lot simpler than I expected it to  
>>> be, but
>> then
>>> again it has no user interface yet and is still missing some  
>>> advanced
>>> template abilities that the original MediaWiki format has.
>>>
>>> If you'd like to check out what I have so far, I've pastebin'ed it:
>>> http://wp-hackers.pastebin.com/f3c38ad72
>>>
>>> Be warned -- it may not the best way to go about doing this  
>>> feature. I
>> came
>>> up with it from scratch and didn't use anything as a basis in  
>>> terms of
>> code.
>>> I'm also really inexperienced when it comes to regex, so no laughing
>> please.
>>> :P
>>>
>>> Feature suggestions and comments are welcome, especially at this  
>>> early
>> stage
>>> when it's still easy to change things. ;)
>>>
>>> --
>>> Viper007Bond | http://www.viper007bond.com/
>>> _______________________________________________
>>> wp-hackers mailing list
>>> wp-hackers@lists.automattic.com
>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>>
>>
>>
>> --
>> Computer Guru
>> Director,
>> NeoSmart Technologies
>> http://neosmart.net/blog/
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers@lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
>
>
>
> -- 
> Viper007Bond | http://www.viper007bond.com/
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

From dragonwing at dragonu.net  Fri Aug 31 03:17:16 2007
From: dragonwing at dragonu.net (Jacob Santos)
Date: Fri Aug 31 03:17:33 2007
Subject: [wp-hackers] Adding wp-includes/class folder
Message-ID: <46D7883C.6070205@dragonu.net>

What debate could there be for adding a class folder to wp-includes? I 
know the current standard is to have 'class-whatever.php' file to 
wp-includes folder. This would allow for better convention and 
organization moving forward. I mean this for external developers.

One disadvantage is that developers would have to browse through 
multiple directories to find the current file. This setup is confusing 
to beginners and well everyone that isn't intimate to the code. Another 
disadvantage that using the PEAR convention you lose *perceived* 
*initial* Opcode Caching speed boost.

The advantages are

1. Easier to unit test, can remove classes from presentation files.
2. Also keep the class model separate from application logic.
3. Using the PEAR convention, you would be able to use __autoload() on 
PHP 5.
4. Easier to extend later (once the convention is established, any new 
classes can be applied).
5. Simplifies more root WordPress files.

I suggest keeping the functions where they are and just separating the 
classes into their own file, so you would have 1 class per file, instead 
of cramming as many classes as there in that feature in a single file. 
Using Dashes to represent folder paths, so wp_xmlrpc_server would be 
/wp-includes/class/wp/xmlrpc/server.php. Would also suggestion using 
Pascal naming convention for class names: WP_Xmlrpc_Server or ABSPATH . 
WPINC . '/class/WP/Xmlrpc/Server.php'.
From wordpress at tekartist.org  Fri Aug 31 04:10:54 2007
From: wordpress at tekartist.org (Stephane Daury)
Date: Fri Aug 31 04:11:09 2007
Subject: [wp-hackers] Adding wp-includes/class folder
In-Reply-To: <46D7883C.6070205@dragonu.net>
References: <46D7883C.6070205@dragonu.net>
Message-ID: <DE805D86-CD79-4074-A332-64B1E5726AB5@tekartist.org>


Not a debate, but an agreement on my side.

But can you develop on the loss of Opcode Caching?

Stephane



On Aug 30, 2007, at 23:17, Jacob Santos wrote:

> What debate could there be for adding a class folder to wp- 
> includes? I know the current standard is to have 'class- 
> whatever.php' file to wp-includes folder. This would allow for  
> better convention and organization moving forward. I mean this for  
> external developers.
>
> One disadvantage is that developers would have to browse through  
> multiple directories to find the current file. This setup is  
> confusing to beginners and well everyone that isn't intimate to the  
> code. Another disadvantage that using the PEAR convention you lose  
> *perceived* *initial* Opcode Caching speed boost.
>
> The advantages are
>
> 1. Easier to unit test, can remove classes from presentation files.
> 2. Also keep the class model separate from application logic.
> 3. Using the PEAR convention, you would be able to use __autoload()  
> on PHP 5.
> 4. Easier to extend later (once the convention is established, any  
> new classes can be applied).
> 5. Simplifies more root WordPress files.
>
> I suggest keeping the functions where they are and just separating  
> the classes into their own file, so you would have 1 class per  
> file, instead of cramming as many classes as there in that feature  
> in a single file. Using Dashes to represent folder paths, so  
> wp_xmlrpc_server would be /wp-includes/class/wp/xmlrpc/server.php.  
> Would also suggestion using Pascal naming convention for class  
> names: WP_Xmlrpc_Server or ABSPATH . WPINC . '/class/WP/Xmlrpc/ 
> Server.php'.
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

From spencerp1 at gmail.com  Fri Aug 31 05:19:35 2007
From: spencerp1 at gmail.com (spencerp)
Date: Fri Aug 31 05:19:43 2007
Subject: [wp-hackers] Tag functionality questions
In-Reply-To: <fd3b80510708301103n3e9583f3r80354face73ad697@mail.gmail.com>
References: <fd3b80510708301103n3e9583f3r80354face73ad697@mail.gmail.com>
Message-ID: <46D7A4E7.2000206@gmail.com>

Benedict Eastaugh wrote:
> There's already a tag cloud function in 2.3, wp_tag_cloud.

I'm not sure who gave me this, but here's what I had used before. I 
pretty much stopped using it, because no patch was added to ensure it's 
true full functionality for the tag_cloud in the core. Example, 
controlling how many tags will display and etc etc... I think someone 
created a patch, but I don't think it was committed. =/ And since I run 
my blogs on Trunk, using SVN / SSH on Dreamhost, I really hate the idea 
of "hacking files". :P

<?php if ( function_exists('wp_tag_cloud') ) : ?>
<li>
<h2>Popular Tags</h2>
<ul>
<?php wp_tag_cloud('smallest=8&largest=22'); ?>
</ul>
</li>
<?php endif; ?>

That's for displaying smaller and larger font sizes for the tags. Then 
there's this one too:
<?php wp_tag_cloud('smallest=8&largest=22&number=40&orderby=count'); ?>

Which is supposed to do the same thing, but also at the same time.. only 
display a select amount of tags in the tag cloud itself. Only problem 
is, the "tag display count" function isn't in the core yet, at least I 
don't think...? Someone gave a link before to a page on the codex about 
this before, but I can't find it now. Anyone care to explain the 
"How-To" for this tag_cloud functionality stuff? It's going to be one of 
the vital things that will need to be addressed, and I'd rather it be 
sooner then later... ;) :P

--
spencerp
http://spencerp.net
http://www.vindictivebastard.net




From awgandrews at gmail.com  Fri Aug 31 06:34:43 2007
From: awgandrews at gmail.com (Alex Andrews)
Date: Fri Aug 31 06:34:50 2007
Subject: [wp-hackers] Hacking Registration To Allow Users To Specify
	Passwords
In-Reply-To: <8f93a7390708301601k160dd9eevce99834d52b70d3a@mail.gmail.com>
References: <e9f3ce460708301505g42f9350fl372641f0cbe4633d@mail.gmail.com>
	<8f93a7390708301553r8e9dc71h4cf2e3c94ec21419@mail.gmail.com>
	<8f93a7390708301558o6adb3645oc61566c303a596e2@mail.gmail.com>
	<8f93a7390708301601k160dd9eevce99834d52b70d3a@mail.gmail.com>
Message-ID: <e9f3ce460708302334g4da5360te94d95e2d2ca1e00@mail.gmail.com>

Thanks for this. So basically I now use add_action to hook into
register_post, writing a function that sets the password to an
additional user field. How would I suppress the e-mail? Is this the
correct way to do it?

 Would the second thing I asked for (user clicks a link and confirms
the account) involve whacking another "switch" in wp-login.php to note
when a randomly generated string confirms the e-mail. This would need
to add another field to wp_users which would potentially hash up
future upgrades, no?

Is all of this in the latest wordpress or is it in the svn only?

Alex

On 31/08/2007, Viper007Bond <viper@viper007bond.com> wrote:
> Ugh, sorry to triple post, but here's the ticket and a patch:
> http://trac.wordpress.org/ticket/4879
>
>
> On 8/30/07, Viper007Bond <viper@viper007bond.com> wrote:
> >
> > Actually, you could do it now by updating the user's account after it's
> > been created and changing the password to the one they entered. The only
> > drawback however is that they'd get an e-mail with their random password in
> > it.
> >
> > On 8/30/07, Viper007Bond <viper@viper007bond.com> wrote:
> > >
> > > It'd be easy to change the form. I worked it over a few months ago and
> > > added hooks galore to the thing. You should be able to pretty much anything
> > > with it.
> > >
> > > Example plugin:
> > > http://files.viper007bond.com/wordpress/loginformexample.phps
> > >
> > > Then it's just a matter of intercepting the field's submission (there's
> > > a hook for that) and using it to create a new user account. However, it
> > > doesn't there's any place to hook in and change the password to what the
> > > user specified, either in wp-login.php (where the password is generated)
> > > or in wp_insert_user() where the account is actually created.
> > >
> > > I'll go make a ticket. :)
> > >
> > > On 8/30/07, Alex Andrews <awgandrews@gmail.com> wrote:
> > > >
> > > > Hello again all.
> > > >
> > > > What I would really like to do is slightly tweak the registration
> > > > process. Instead of receiving their password in an e-mail, as is
> > > > common to many sites, they will register their e-mail and give a
> > > > password, then have to "confirm" this e-mail as being live at some
> > > > point in, say, the next few hours.
> > > >
> > > > Is this possible? Is this going to require a major re-write or are
> > > > there things to hook into?
> > > >
> > > > Regards
> > > >
> > > > Alex
> > > > _______________________________________________
> > > > wp-hackers mailing list
> > > > wp-hackers@lists.automattic.com
> > > > http://lists.automattic.com/mailman/listinfo/wp-hackers
> > > >
> > >
> > >
> > >
> > > --
> > > Viper007Bond | http://www.viper007bond.com/
> >
> >
> >
> >
> > --
> > Viper007Bond | http://www.viper007bond.com/
> >
>
>
>
> --
> Viper007Bond | http://www.viper007bond.com/
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
From peter.westwood at ftwr.co.uk  Fri Aug 31 06:37:12 2007
From: peter.westwood at ftwr.co.uk (Peter Westwood)
Date: Fri Aug 31 06:37:16 2007
Subject: [wp-hackers] Adding wp-includes/class folder
In-Reply-To: <46D7883C.6070205@dragonu.net>
References: <46D7883C.6070205@dragonu.net>
Message-ID: <46D7B718.2010200@ftwr.co.uk>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Jacob Santos wrote:
> What debate could there be for adding a class folder to wp-includes? I
> know the current standard is to have 'class-whatever.php' file to
> wp-includes folder. This would allow for better convention and
> organization moving forward. I mean this for external developers.
> 

I had been thinking just this over the past few days too!
And I think it is a natural progression of the reorganisation of files
that has happened in the past.

It is a 2.4 item, and we will probably need to keep back-compat
class-x.php files in wp-includes for at least one version as we may
break some plugins.

> One disadvantage is that developers would have to browse through
> multiple directories to find the current file. This setup is confusing
> to beginners and well everyone that isn't intimate to the code. Another
> disadvantage that using the PEAR convention you lose *perceived*
> *initial* Opcode Caching speed boost.
> 
> The advantages are
> 
> 1. Easier to unit test, can remove classes from presentation files.
> 2. Also keep the class model separate from application logic.
> 3. Using the PEAR convention, you would be able to use __autoload() on
> PHP 5.

Ug. As a an OO developer usage of __autoload says lazy developer and
harder to debug code - I much prefer the explicit list on includes than
some magic. And the magic won't work on PHP4 which we support.

> 4. Easier to extend later (once the convention is established, any new
> classes can be applied).
> 5. Simplifies more root WordPress files.
> 
> I suggest keeping the functions where they are and just separating the
> classes into their own file, so you would have 1 class per file, instead
> of cramming as many classes as there in that feature in a single file.
> Using Dashes to represent folder paths, so wp_xmlrpc_server would be
> /wp-includes/class/wp/xmlrpc/server.php. Would also suggestion using
> Pascal naming convention for class names: WP_Xmlrpc_Server or ABSPATH .
> WPINC . '/class/WP/Xmlrpc/Server.php'.

I'm not sure a strict one class per file is needed.  For example I think
it is worth keeping all the Walker classes together.  But some others
should be split out into seperate files.

westi
- --
Peter Westwood
http://blog.ftwr.co.uk
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.2 (MingW32)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iD8DBQFG17cYVPRdzag0AcURArTLAJ0XL7LZJMgnGhgqyPLQ9VPH6NZLEACgqjoW
NFtjixSeeSBlkOZ6i+/UbHE=
=9dSg
-----END PGP SIGNATURE-----
From awgandrews at gmail.com  Fri Aug 31 06:43:33 2007
From: awgandrews at gmail.com (Alex Andrews)
Date: Fri Aug 31 06:43:40 2007
Subject: [wp-hackers] Hacking Registration To Allow Users To Specify
	Passwords
In-Reply-To: <e9f3ce460708302334g4da5360te94d95e2d2ca1e00@mail.gmail.com>
References: <e9f3ce460708301505g42f9350fl372641f0cbe4633d@mail.gmail.com>
	<8f93a7390708301553r8e9dc71h4cf2e3c94ec21419@mail.gmail.com>
	<8f93a7390708301558o6adb3645oc61566c303a596e2@mail.gmail.com>
	<8f93a7390708301601k160dd9eevce99834d52b70d3a@mail.gmail.com>
	<e9f3ce460708302334g4da5360te94d95e2d2ca1e00@mail.gmail.com>
Message-ID: <e9f3ce460708302343o66a1e6cqf9c7bcf9851d7c52@mail.gmail.com>

Worked out (this seems to be a double post infested thread!) the first
bit. I hook into pre_user_pass, ignoring the inputted password and
setting it to an additional field the user specifies.

Still leaves the second problemo. Thinking about it, I could just put
another $action bit in the case, without much problem. Or is there a
hook for this...

Alex

On 31/08/2007, Alex Andrews <awgandrews@gmail.com> wrote:
> Thanks for this. So basically I now use add_action to hook into
> register_post, writing a function that sets the password to an
> additional user field. How would I suppress the e-mail? Is this the
> correct way to do it?
>
>  Would the second thing I asked for (user clicks a link and confirms
> the account) involve whacking another "switch" in wp-login.php to note
> when a randomly generated string confirms the e-mail. This would need
> to add another field to wp_users which would potentially hash up
> future upgrades, no?
>
> Is all of this in the latest wordpress or is it in the svn only?
>
> Alex
>
> On 31/08/2007, Viper007Bond <viper@viper007bond.com> wrote:
> > Ugh, sorry to triple post, but here's the ticket and a patch:
> > http://trac.wordpress.org/ticket/4879
> >
> >
> > On 8/30/07, Viper007Bond <viper@viper007bond.com> wrote:
> > >
> > > Actually, you could do it now by updating the user's account after it's
> > > been created and changing the password to the one they entered. The only
> > > drawback however is that they'd get an e-mail with their random password in
> > > it.
> > >
> > > On 8/30/07, Viper007Bond <viper@viper007bond.com> wrote:
> > > >
> > > > It'd be easy to change the form. I worked it over a few months ago and
> > > > added hooks galore to the thing. You should be able to pretty much anything
> > > > with it.
> > > >
> > > > Example plugin:
> > > > http://files.viper007bond.com/wordpress/loginformexample.phps
> > > >
> > > > Then it's just a matter of intercepting the field's submission (there's
> > > > a hook for that) and using it to create a new user account. However, it
> > > > doesn't there's any place to hook in and change the password to what the
> > > > user specified, either in wp-login.php (where the password is generated)
> > > > or in wp_insert_user() where the account is actually created.
> > > >
> > > > I'll go make a ticket. :)
> > > >
> > > > On 8/30/07, Alex Andrews <awgandrews@gmail.com> wrote:
> > > > >
> > > > > Hello again all.
> > > > >
> > > > > What I would really like to do is slightly tweak the registration
> > > > > process. Instead of receiving their password in an e-mail, as is
> > > > > common to many sites, they will register their e-mail and give a
> > > > > password, then have to "confirm" this e-mail as being live at some
> > > > > point in, say, the next few hours.
> > > > >
> > > > > Is this possible? Is this going to require a major re-write or are
> > > > > there things to hook into?
> > > > >
> > > > > Regards
> > > > >
> > > > > Alex
> > > > > _______________________________________________
> > > > > wp-hackers mailing list
> > > > > wp-hackers@lists.automattic.com
> > > > > http://lists.automattic.com/mailman/listinfo/wp-hackers
> > > > >
> > > >
> > > >
> > > >
> > > > --
> > > > Viper007Bond | http://www.viper007bond.com/
> > >
> > >
> > >
> > >
> > > --
> > > Viper007Bond | http://www.viper007bond.com/
> > >
> >
> >
> >
> > --
> > Viper007Bond | http://www.viper007bond.com/
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers@lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> >
>
From wordpress at dd32.id.au  Fri Aug 31 06:59:19 2007
From: wordpress at dd32.id.au (DD32)
Date: Fri Aug 31 06:59:13 2007
Subject: [wp-hackers] Tag functionality questions
In-Reply-To: <46D7A4E7.2000206@gmail.com>
References: <fd3b80510708301103n3e9583f3r80354face73ad697@mail.gmail.com>
	<46D7A4E7.2000206@gmail.com>
Message-ID: <op.txwwc5iqk6w4mc@dd32.no-ip.com>

On Fri, 31 Aug 2007 15:19:35 +1000, spencerp <spencerp1@gmail.com> wrote:

> Which is supposed to do the same thing, but also at the same time.. only
> display a select amount of tags in the tag cloud itself. Only problem
> is, the "tag display count" function isn't in the core yet, at least I
> don't think...? Someone gave a link before to a page on the codex about
> this before, but I can't find it now. Anyone care to explain the
> "How-To" for this tag_cloud functionality stuff? It's going to be one of
> the vital things that will need to be addressed, and I'd rather it be
> sooner then later... ;) :P

http://trac.wordpress.org/ticket/4552
With my Patch maybe "limitmode" should be removed and it just work off the orderby statement.. But your right in saying that its likely a functionality that many people are going to want to use.
From abelcheung at gmail.com  Fri Aug 31 08:58:09 2007
From: abelcheung at gmail.com (Abel Cheung)
Date: Fri Aug 31 08:58:14 2007
Subject: [wp-hackers] WordPress.org and WordPress.com integration
In-Reply-To: <2E210D3E-A781-476D-AAED-F6470D89B237@tekartist.org>
References: <46D67EAE.2080505@gmail.com>
	<F1F52750-0919-4D05-8F11-C168DD84B5A4@tekartist.org>
	<7C09ADFC-0F0D-41D7-9066-5743B8A1925F@txfx.net>
	<2E210D3E-A781-476D-AAED-F6470D89B237@tekartist.org>
Message-ID: <df41a9470708310158vc2b646ds31bfcff11b7d1@mail.gmail.com>

On 8/31/07, Stephane Daury <wordpress@tekartist.org> wrote:
> I'd even go as far as saying this should be a default feature in WP.

FYI: http://trac.wordpress.org/ticket/3613

Abel
From leonid at mamchenkov.net  Fri Aug 31 09:44:08 2007
From: leonid at mamchenkov.net (Leonid Mamchenkov)
Date: Fri Aug 31 09:44:18 2007
Subject: [wp-hackers] Templatedia, a new work in progress plugin
In-Reply-To: <8f93a7390708300637q5b5d2adeid17adefa40bd7dd5@mail.gmail.com>
References: <8f93a7390708300637q5b5d2adeid17adefa40bd7dd5@mail.gmail.com>
Message-ID: <b76f24970708310244p66d4d7a2k356b98469ac4fa8d@mail.gmail.com>

Hi,

On 8/30/07, Viper007Bond <viper@viper007bond.com> wrote:
> Be warned -- it may not the best way to go about doing this feature. I came
> up with it from scratch and didn't use anything as a basis in terms of code.

Making a template and using something like Custom Write Panel plugin
is probably a better way to go about it.  But there is, of course,
more than one way to it. ;)

-- 
Leonid Mamchenkov
From viper at viper007bond.com  Fri Aug 31 11:00:30 2007
From: viper at viper007bond.com (Viper007Bond)
Date: Fri Aug 31 11:00:36 2007
Subject: [wp-hackers] Templatedia, a new work in progress plugin
In-Reply-To: <b76f24970708310244p66d4d7a2k356b98469ac4fa8d@mail.gmail.com>
References: <8f93a7390708300637q5b5d2adeid17adefa40bd7dd5@mail.gmail.com>
	<b76f24970708310244p66d4d7a2k356b98469ac4fa8d@mail.gmail.com>
Message-ID: <8f93a7390708310400y538e4f7fpe6d9d18b7d4bb287@mail.gmail.com>

Yeah, I have some other solutions in mind. :)

On 8/31/07, Leonid Mamchenkov <leonid@mamchenkov.net> wrote:
>
> Hi,
>
> On 8/30/07, Viper007Bond <viper@viper007bond.com> wrote:
> > Be warned -- it may not the best way to go about doing this feature. I
> came
> > up with it from scratch and didn't use anything as a basis in terms of
> code.
>
> Making a template and using something like Custom Write Panel plugin
> is probably a better way to go about it.  But there is, of course,
> more than one way to it. ;)
>
> --
> Leonid Mamchenkov
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>



-- 
Viper007Bond | http://www.viper007bond.com/
From turk at hotelblues.com  Fri Aug 31 11:44:02 2007
From: turk at hotelblues.com (Christopher Windsor)
Date: Fri Aug 31 11:44:09 2007
Subject: [wp-hackers] Asides Question
Message-ID: <9e25a6be0708310444y66f3ac3ey2192f6d9807d981d@mail.gmail.com>

I'm using Matt's Asides and want to know if it is possible to make it so any
posts to the asides category could be made to not count against my 7 posts a
page setting in the options?

I want to maintain my 7 posts a page setting and not have to worry about
filling my front page with 7 asides. I don't want to run the asides in the
sidebar. I like the idea of a quick little post for links.

So is this something that can be achieved either by a plugin or by hacking?

-- 
"I don't mind if you don't like my manners. I don't like them myself.
They're pretty bad. I grieve over them on long winter evenings."-Philip
Marlowe
From lists.automattic.com at callum-macdonald.com  Fri Aug 31 12:49:46 2007
From: lists.automattic.com at callum-macdonald.com (Callum Macdonald)
Date: Fri Aug 31 12:49:58 2007
Subject: [wp-hackers] Adding phpmailer options (smtp for example)
In-Reply-To: <46D6EEEF.7090806@ftwr.co.uk>
References: <46D5F753.70000@callum-macdonald.com>	<D69753B9-2FD3-4CB4-8E89-A5D3C24BC3B1@ftwr.co.uk>	<46D6B0C4.7090001@callum-macdonald.com>	<op.txvfs7dbk6w4mc@dd32.no-ip.com>	<46D6B579.7030706@gmx.net>	<46D6CE1D.6080601@callum-macdonald.com>
	<46D6EEEF.7090806@ftwr.co.uk>
Message-ID: <46D80E6A.2030002@callum-macdonald.com>

Hey westi,

I hadn't noticed the filter, but you're absolutely right, that would be 
called at the right point and would most likely work (I haven't tested 
it yet). I might well rework my plugin to use that approach. I'll 
probably do that when I add the option page.

Thanks for the feedback.

Cheers - Callum.

Peter Westwood wrote:
> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
>
> Callum Macdonald wrote:
>   
>> Ok, I've whipped up a plugin. It's a copy of the original wp_mail()
>> function but it adds SMTP by default (to localhost) and a couple of
>> other config options. They're currently only configurable within the
>> file itself, but if it's a popular plugin I'll be happy to add an
>> Options page to make it easier to configure.
>>
>> Any feedback would be much appreciated.
>> http://www.callum-macdonald.com/code/wp-mail-smtp/
>>     
>
> Nice plugin.
>
> But it misses on the simplicity of the task in hand.
>
> This is actually all you need:
>
> <?php
> /*
>  * Plugin Name: pjw-wp-mail-smtp
>  * Version: 0.1
>  * Plugin URI: http://blog.ftwr.co.uk/wordpress/
>  * Description: Get PHPMailer to use smtp not mail()
>  * Author: Peter Westwood
>  * Author URI: http://blog.ftwr.co.uk/
>  * */
>
> add_action('phpmailer_init','pjw_phpmailer_init');
>
> function pjw_phpmailer_init($php_mailer)
> {
>     $php_mailer->Mailer = 'smtp';
>     $php_mailer->Host = 'localhost';
> }
> ?>
>
> The hook phpmailer_init is called just before ->Send in trunk and you
> can just override the few parameters and not have to replace the whole
> of wp_mail.
>
> Hope this helps.
>
> westi
> - --
> Peter Westwood
> http://blog.ftwr.co.uk
> -----BEGIN PGP SIGNATURE-----
> Version: GnuPG v1.4.2 (MingW32)
> Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org
>
> iD8DBQFG1u7vVPRdzag0AcURAsAbAJ9HV4dCyIuruiUe+btA1TlPTAPV4gCeIh7Q
> UyRxCo3v2hAi+Pw7i/5hi7s=
> =NjUf
> -----END PGP SIGNATURE-----
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
>
>   

From dragonwing at dragonu.net  Fri Aug 31 12:58:19 2007
From: dragonwing at dragonu.net (Jacob Santos)
Date: Fri Aug 31 12:58:39 2007
Subject: [wp-hackers] Adding wp-includes/class folder
In-Reply-To: <DE805D86-CD79-4074-A332-64B1E5726AB5@tekartist.org>
References: <46D7883C.6070205@dragonu.net>
	<DE805D86-CD79-4074-A332-64B1E5726AB5@tekartist.org>
Message-ID: <46D8106B.5010503@dragonu.net>

I don't fully understand the concept myself, but supposedly, one 
advantage to keeping everything in one file is so that opcode caching 
would not need to check includes for dependency before caching.

The example given is that ClassA extends ClassB, but included like this.

include 'ClassA.php';
include 'ClassB.php';

When the PHP compiler gets to include 'ClassA.php' and passes it off to 
the opcode cache, the opcode cache doesn't know what to do with it, 
since it doesn't have ClassB.php. Until it has ClassB.php it can not 
opcode cache ClassA.

Although some say it is a little bit slower, the decrease is only once 
and once the two have been cached, the decrease will be gone 
(conjecture). Other problems occur with if statements when including. 
Developers of Opcode caching would recommend including everything that 
you need, like in C and C++ (Rasmus interview on Opcode caching).

Jacob Santos

Stephane Daury wrote:
>
> Not a debate, but an agreement on my side.
>
> But can you develop on the loss of Opcode Caching?
>
> Stephane
>
>
>
> On Aug 30, 2007, at 23:17, Jacob Santos wrote:
>
>> What debate could there be for adding a class folder to wp-includes? 
>> I know the current standard is to have 'class-whatever.php' file to 
>> wp-includes folder. This would allow for better convention and 
>> organization moving forward. I mean this for external developers.
>>
>> One disadvantage is that developers would have to browse through 
>> multiple directories to find the current file. This setup is 
>> confusing to beginners and well everyone that isn't intimate to the 
>> code. Another disadvantage that using the PEAR convention you lose 
>> *perceived* *initial* Opcode Caching speed boost.
>>
>> The advantages are
>>
>> 1. Easier to unit test, can remove classes from presentation files.
>> 2. Also keep the class model separate from application logic.
>> 3. Using the PEAR convention, you would be able to use __autoload() 
>> on PHP 5.
>> 4. Easier to extend later (once the convention is established, any 
>> new classes can be applied).
>> 5. Simplifies more root WordPress files.
>>
>> I suggest keeping the functions where they are and just separating 
>> the classes into their own file, so you would have 1 class per file, 
>> instead of cramming as many classes as there in that feature in a 
>> single file. Using Dashes to represent folder paths, so 
>> wp_xmlrpc_server would be /wp-includes/class/wp/xmlrpc/server.php. 
>> Would also suggestion using Pascal naming convention for class names: 
>> WP_Xmlrpc_Server or ABSPATH . WPINC . '/class/WP/Xmlrpc/Server.php'.
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers@lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
From dragonwing at dragonu.net  Fri Aug 31 13:08:27 2007
From: dragonwing at dragonu.net (Jacob Santos)
Date: Fri Aug 31 13:08:43 2007
Subject: [wp-hackers] Adding wp-includes/class folder
In-Reply-To: <46D7B718.2010200@ftwr.co.uk>
References: <46D7883C.6070205@dragonu.net> <46D7B718.2010200@ftwr.co.uk>
Message-ID: <46D812CB.80302@dragonu.net>

I have patches, or a set patches for XMLRPC split. I'm planning on 
making a enhancement bug report, if most people are on board.

I took a look at the Tree implementation and thought that it was very 
interesting. The push for PHP 5 advantage is a longer goal. Lazy? Yes, 
but there is a reason it exists, and I forgot what the reason is, but 
okay. I don't use it, but I would like too.

I suggestion a convention that either we have all classes split up or we 
don't. I think dependency classes are great candidates for splits, 
because it allows me to focus on including just the file that I need. If 
included at the top, people can know which classes you are using below 
(mostly, my patches still use bootstrap that include everything, in 
order of the dependency. wp-includes/class/IXR.php includes everything 
in the IXR class namespace.

Jacob Santos

Peter Westwood wrote:
> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
>
> Jacob Santos wrote:
>   
>> What debate could there be for adding a class folder to wp-includes? I
>> know the current standard is to have 'class-whatever.php' file to
>> wp-includes folder. This would allow for better convention and
>> organization moving forward. I mean this for external developers.
>>
>>     
>
> I had been thinking just this over the past few days too!
> And I think it is a natural progression of the reorganisation of files
> that has happened in the past.
>
> It is a 2.4 item, and we will probably need to keep back-compat
> class-x.php files in wp-includes for at least one version as we may
> break some plugins.
>
>   
>> One disadvantage is that developers would have to browse through
>> multiple directories to find the current file. This setup is confusing
>> to beginners and well everyone that isn't intimate to the code. Another
>> disadvantage that using the PEAR convention you lose *perceived*
>> *initial* Opcode Caching speed boost.
>>
>> The advantages are
>>
>> 1. Easier to unit test, can remove classes from presentation files.
>> 2. Also keep the class model separate from application logic.
>> 3. Using the PEAR convention, you would be able to use __autoload() on
>> PHP 5.
>>     
>
> Ug. As a an OO developer usage of __autoload says lazy developer and
> harder to debug code - I much prefer the explicit list on includes than
> some magic. And the magic won't work on PHP4 which we support.
>
>   
>> 4. Easier to extend later (once the convention is established, any new
>> classes can be applied).
>> 5. Simplifies more root WordPress files.
>>
>> I suggest keeping the functions where they are and just separating the
>> classes into their own file, so you would have 1 class per file, instead
>> of cramming as many classes as there in that feature in a single file.
>> Using Dashes to represent folder paths, so wp_xmlrpc_server would be
>> /wp-includes/class/wp/xmlrpc/server.php. Would also suggestion using
>> Pascal naming convention for class names: WP_Xmlrpc_Server or ABSPATH .
>> WPINC . '/class/WP/Xmlrpc/Server.php'.
>>     
>
> I'm not sure a strict one class per file is needed.  For example I think
> it is worth keeping all the Walker classes together.  But some others
> should be split out into seperate files.
>
> westi
> - --
> Peter Westwood
> http://blog.ftwr.co.uk
> -----BEGIN PGP SIGNATURE-----
> Version: GnuPG v1.4.2 (MingW32)
> Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org
>
> iD8DBQFG17cYVPRdzag0AcURArTLAJ0XL7LZJMgnGhgqyPLQ9VPH6NZLEACgqjoW
> NFtjixSeeSBlkOZ6i+/UbHE=
> =9dSg
> -----END PGP SIGNATURE-----
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>   
From peter.westwood at ftwr.co.uk  Fri Aug 31 13:08:32 2007
From: peter.westwood at ftwr.co.uk (Peter Westwood)
Date: Fri Aug 31 13:08:47 2007
Subject: [wp-hackers] Adding phpmailer options (smtp for example)
In-Reply-To: <46D80E6A.2030002@callum-macdonald.com>
References: <46D5F753.70000@callum-macdonald.com>	<D69753B9-2FD3-4CB4-8E89-A5D3C24BC3B1@ftwr.co.uk>	<46D6B0C4.7090001@callum-macdonald.com>	<op.txvfs7dbk6w4mc@dd32.no-ip.com>	<46D6B579.7030706@gmx.net>	<46D6CE1D.6080601@callum-macdonald.com>	<46D6EEEF.7090806@ftwr.co.uk>
	<46D80E6A.2030002@callum-macdonald.com>
Message-ID: <46D812D0.8030108@ftwr.co.uk>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Callum Macdonald wrote:
> I hadn't noticed the filter, but you're absolutely right, that would be
> called at the right point and would most likely work (I haven't tested
> it yet). I might well rework my plugin to use that approach. I'll
> probably do that when I add the option page.
> 

The example plugin worked fine in my localhost smtp tests with WordPress
trunk.

I look forward to seeing the simplified plugin with admin ui :-)

> Thanks for the feedback.

Thats ok.

Cheers

westi
- --
Peter Westwood
http://blog.ftwr.co.uk
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.2 (MingW32)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iD8DBQFG2BLQVPRdzag0AcURAml2AKDMwMbeLPMW0jQ4QUxcPFGJ36E3UACfeBO9
PILOAE/8OCf1571jfNnPHSc=
=OC7c
-----END PGP SIGNATURE-----
From peter.westwood at ftwr.co.uk  Fri Aug 31 13:13:41 2007
From: peter.westwood at ftwr.co.uk (Peter Westwood)
Date: Fri Aug 31 13:13:52 2007
Subject: [wp-hackers] Adding wp-includes/class folder
In-Reply-To: <46D812CB.80302@dragonu.net>
References: <46D7883C.6070205@dragonu.net> <46D7B718.2010200@ftwr.co.uk>
	<46D812CB.80302@dragonu.net>
Message-ID: <46D81405.4090306@ftwr.co.uk>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Jacob Santos wrote:
> I have patches, or a set patches for XMLRPC split. I'm planning on
> making a enhancement bug report, if most people are on board.
> 
> I took a look at the Tree implementation and thought that it was very
> interesting. The push for PHP 5 advantage is a longer goal. Lazy? Yes,
> but there is a reason it exists, and I forgot what the reason is, but
> okay. I don't use it, but I would like too.
> 
> I suggestion a convention that either we have all classes split up or we
> don't. I think dependency classes are great candidates for splits,
> because it allows me to focus on including just the file that I need. If
> included at the top, people can know which classes you are using below
> (mostly, my patches still use bootstrap that include everything, in
> order of the dependency. wp-includes/class/IXR.php includes everything
> in the IXR class namespace.
> 

For things like IXR / POP3 support / PHPMailer - splitting the classes
out is a really bad plan IMHO - they are external libraries that we
include and we need an easy way of diffing between our version (with
some patches) and the upstream version so as to make it easy to pull in
updates.

cheers

westi
- --
Peter Westwood
http://blog.ftwr.co.uk
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.2 (MingW32)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iD8DBQFG2BQFVPRdzag0AcURAiGNAKCQP7Jf5CnHGL8qysv1NjiHxmAOqgCgsBfm
rk06bSrF2f6hRlGl5YHGBjo=
=yP8m
-----END PGP SIGNATURE-----
From kimmo at global-wire.fi  Fri Aug 31 14:02:06 2007
From: kimmo at global-wire.fi (Kimmo Suominen)
Date: Fri Aug 31 14:02:19 2007
Subject: [wp-hackers] Adding wp-includes/class folder
In-Reply-To: <46D81405.4090306@ftwr.co.uk>
References: <46D7883C.6070205@dragonu.net> <46D7B718.2010200@ftwr.co.uk>
	<46D812CB.80302@dragonu.net> <46D81405.4090306@ftwr.co.uk>
Message-ID: <20070831140206.GB979@kimmo.suominen.com>

On Fri, Aug 31, 2007 at 02:13:41PM +0100, Peter Westwood wrote:
> 
> For things like IXR / POP3 support / PHPMailer - splitting the classes
> out is a really bad plan IMHO - they are external libraries that we
> include and we need an easy way of diffing between our version (with
> some patches) and the upstream version so as to make it easy to pull in
> updates.

Similarly renames and code shuffling between files easily creates
a lot of extra work, as svn isn't smart enough to merge changes
from changed files into the new file (let alone the new location
of a file fragment, e.g. when a function is moved to another file).

Such changes shouldn't be made lightly, in my very humble opinion.

Best regards,
+ Kimmo

P.S. Any svk gurus around willing to tell me what I'm doing wrong?
-- 
<A HREF="http://kimmo.suominen.com/">Kimmo Suominen</A>

From yahgrp at poplarware.com  Fri Aug 31 14:30:47 2007
From: yahgrp at poplarware.com (Jennifer Hodgdon)
Date: Fri Aug 31 14:30:00 2007
Subject: [wp-hackers] Asides Question
In-Reply-To: <9e25a6be0708310444y66f3ac3ey2192f6d9807d981d@mail.gmail.com>
References: <9e25a6be0708310444y66f3ac3ey2192f6d9807d981d@mail.gmail.com>
Message-ID: <46D82617.3040701@poplarware.com>

Christopher Windsor wrote:
> I'm using Matt's Asides and want to know if it is possible to make it so any
> posts to the asides category could be made to not count against my 7 posts a
> page setting in the options?
> 
> I want to maintain my 7 posts a page setting and not have to worry about
> filling my front page with 7 asides. I don't want to run the asides in the
> sidebar. I like the idea of a quick little post for links.
> 
> So is this something that can be achieved either by a plugin or by hacking?

Use a plugin. This article has a section on "category exclusion" that 
I think does exactly what you are looking for:

http://codex.wordpress.org/Custom_Queries

     --Jennifer

-- 
Jennifer Hodgdon

Poplar ProductivityWare * www.poplarware.com
Web Databases/Scripts * Modeling/Analysis/Palm OS Software

From wordpress at tekartist.org  Fri Aug 31 14:40:45 2007
From: wordpress at tekartist.org (Stephane Daury)
Date: Fri Aug 31 14:40:54 2007
Subject: [wp-hackers] Adding wp-includes/class folder
In-Reply-To: <20070831140206.GB979@kimmo.suominen.com>
References: <46D7883C.6070205@dragonu.net> <46D7B718.2010200@ftwr.co.uk>
	<46D812CB.80302@dragonu.net> <46D81405.4090306@ftwr.co.uk>
	<20070831140206.GB979@kimmo.suominen.com>
Message-ID: <2A8BA930-7A10-4F8B-B1AD-015870478E86@tekartist.org>


3rd party libs are always an issue in this kind of restructuration.

For this reason, I always make a habit of having all 3rd party  
dependencies in their own specific subtree so that there is a clear  
distinction and do not feel compelled to apply my convention to these  
pieces. Then I have a simple wrapper implementing/including the 3rd  
party software, which itself respects the convention.

A side advantage is that the wrapper allows me (very often) to switch  
the said 3rd party software to another provider when a better  
solution comes along or allow library choices when available (such as  
different caching mechanisms, locale support systems, etc).

I know it sounds heavy, but it pays off in flexibility in the long term.

Stephane



On Aug 31, 2007, at 10:02, Kimmo Suominen wrote:

> On Fri, Aug 31, 2007 at 02:13:41PM +0100, Peter Westwood wrote:
>>
>> For things like IXR / POP3 support / PHPMailer - splitting the  
>> classes
>> out is a really bad plan IMHO - they are external libraries that we
>> include and we need an easy way of diffing between our version (with
>> some patches) and the upstream version so as to make it easy to  
>> pull in
>> updates.
>
> Similarly renames and code shuffling between files easily creates
> a lot of extra work, as svn isn't smart enough to merge changes
> from changed files into the new file (let alone the new location
> of a file fragment, e.g. when a function is moved to another file).
>
> Such changes shouldn't be made lightly, in my very humble opinion.
>
> Best regards,
> + Kimmo
>
> P.S. Any svk gurus around willing to tell me what I'm doing wrong?
> -- 
> <A HREF="http://kimmo.suominen.com/">Kimmo Suominen</A>
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

From turk at hotelblues.com  Fri Aug 31 15:28:10 2007
From: turk at hotelblues.com (Christopher Windsor)
Date: Fri Aug 31 15:28:14 2007
Subject: [wp-hackers] Asides Question
Message-ID: <9e25a6be0708310828n731c7cefpb3df593b6599ec8@mail.gmail.com>

That looks close maybe. I'm not a coder. I only want to exclude the asides
category from the post count, not any page they appear on.

-- 
"I don't mind if you don't like my manners. I don't like them myself.
They're pretty bad. I grieve over them on long winter evenings."-Philip
Marlowe
From yahgrp at poplarware.com  Fri Aug 31 15:38:35 2007
From: yahgrp at poplarware.com (Jennifer Hodgdon)
Date: Fri Aug 31 15:37:49 2007
Subject: [wp-hackers] Asides Question
In-Reply-To: <9e25a6be0708310828n731c7cefpb3df593b6599ec8@mail.gmail.com>
References: <9e25a6be0708310828n731c7cefpb3df593b6599ec8@mail.gmail.com>
Message-ID: <46D835FB.3070800@poplarware.com>

Christopher Windsor wrote:
> That looks close maybe. I'm not a coder. I only want to exclude the asides
> category from the post count, not any page they appear on.

Ah, I misunderstood. That is a bit more difficult, actually.
     --Jennifer

-- 
Jennifer Hodgdon

Poplar ProductivityWare * www.poplarware.com
Web Databases/Scripts * Modeling/Analysis/Palm OS Software

From mark.wordpress at txfx.net  Fri Aug 31 16:10:53 2007
From: mark.wordpress at txfx.net (Mark Jaquith)
Date: Fri Aug 31 16:11:21 2007
Subject: [wp-hackers] WordPress.org and WordPress.com integration
In-Reply-To: <2E210D3E-A781-476D-AAED-F6470D89B237@tekartist.org>
References: <46D67EAE.2080505@gmail.com>
	<F1F52750-0919-4D05-8F11-C168DD84B5A4@tekartist.org>
	<7C09ADFC-0F0D-41D7-9066-5743B8A1925F@txfx.net>
	<2E210D3E-A781-476D-AAED-F6470D89B237@tekartist.org>
Message-ID: <7E486417-D540-44CF-AD68-8185853F9055@txfx.net>

On Aug 30, 2007, at 10:44 PM, Stephane Daury wrote:

> On another note, I agree with you on having wordpress.com (and  
> the .org properties) having OpenID integration.
> I'd even go as far as saying this should be a default feature in WP.

Maybe someday.  It's a pretty big development "investment," so we'd  
definitely want to be sure OpenID was here to stay.  In the meantime,  
there are plugins that do it pretty well!

--
Mark Jaquith
http://markjaquith.com/

Covered Web Services
http://coveredwebservices.com/

WordPress Ninja @ b5media Inc
http://b5media.com/


From jacobsantos at branson.com  Fri Aug 31 16:24:30 2007
From: jacobsantos at branson.com (jacobsantos@branson.com)
Date: Fri Aug 31 16:29:06 2007
Subject: [wp-hackers] Adding wp-includes/class folder
In-Reply-To: <2A8BA930-7A10-4F8B-B1AD-015870478E86@tekartist.org>
References: <46D7883C.6070205@dragonu.net>
	<46D7B718.2010200@ftwr.co.uk>	<46D812CB.80302@dragonu.net>
	<46D81405.4090306@ftwr.co.uk>	<20070831140206.GB979@kimmo.suominen.com>
	<2A8BA930-7A10-4F8B-B1AD-015870478E86@tekartist.org>
Message-ID: <46D840BE.2000006@branson.com>

Makes sense. When I submit the patch for XMLRPC, I'll update it to 
exclude the changes I made to IXR.

I think at this moment the least amount of restructuring as possible is 
needed. So while I also think the Factory model would be nice in several 
areas. If the devs would accept a simplified version, it would be easier 
to get on board with the more complex restructuring.

I think the Database Access Abstraction Layer is another good candidate 
for the factory model, even with it technically being an external 
library. However, this implies more work and I've yet to figure out a 
good way to think about a easy way to get around the differences of SQL.

Ideas

1. Have a object for each SQL platform supported with only SQL. I've 
decided against this.
2. Have functions that returns just the SQL for that API. Just as bad as 1.
3. XML? Eh.

Probably just keep it as it is for the SQL, but allow for the query 
layer to be updated.

Jacob Santos

Stephane Daury wrote:
>
> 3rd party libs are always an issue in this kind of restructuration.
>
> For this reason, I always make a habit of having all 3rd party 
> dependencies in their own specific subtree so that there is a clear 
> distinction and do not feel compelled to apply my convention to these 
> pieces. Then I have a simple wrapper implementing/including the 3rd 
> party software, which itself respects the convention.
>
> A side advantage is that the wrapper allows me (very often) to switch 
> the said 3rd party software to another provider when a better solution 
> comes along or allow library choices when available (such as different 
> caching mechanisms, locale support systems, etc).
>
> I know it sounds heavy, but it pays off in flexibility in the long term.
>
> Stephane
>
>
>
> On Aug 31, 2007, at 10:02, Kimmo Suominen wrote:
>
>> On Fri, Aug 31, 2007 at 02:13:41PM +0100, Peter Westwood wrote:
>>>
>>> For things like IXR / POP3 support / PHPMailer - splitting the classes
>>> out is a really bad plan IMHO - they are external libraries that we
>>> include and we need an easy way of diffing between our version (with
>>> some patches) and the upstream version so as to make it easy to pull in
>>> updates.
>>
>> Similarly renames and code shuffling between files easily creates
>> a lot of extra work, as svn isn't smart enough to merge changes
>> from changed files into the new file (let alone the new location
>> of a file fragment, e.g. when a function is moved to another file).
>>
>> Such changes shouldn't be made lightly, in my very humble opinion.
>>
>> Best regards,
>> + Kimmo
>>
>> P.S. Any svk gurus around willing to tell me what I'm doing wrong?
>> -- 
>> <A HREF="http://kimmo.suominen.com/">Kimmo Suominen</A>
>>
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers@lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
>
>

From wordpress at tekartist.org  Fri Aug 31 16:45:18 2007
From: wordpress at tekartist.org (Stephane Daury)
Date: Fri Aug 31 16:45:25 2007
Subject: [wp-hackers] WordPress.org and WordPress.com integration
In-Reply-To: <7E486417-D540-44CF-AD68-8185853F9055@txfx.net>
References: <46D67EAE.2080505@gmail.com>
	<F1F52750-0919-4D05-8F11-C168DD84B5A4@tekartist.org>
	<7C09ADFC-0F0D-41D7-9066-5743B8A1925F@txfx.net>
	<2E210D3E-A781-476D-AAED-F6470D89B237@tekartist.org>
	<7E486417-D540-44CF-AD68-8185853F9055@txfx.net>
Message-ID: <DEB21DB3-EC46-4BDA-BA7C-A20E2335F611@tekartist.org>




On Aug 31, 2007, at 12:10, Mark Jaquith wrote:

> On Aug 30, 2007, at 10:44 PM, Stephane Daury wrote:
>
>> On another note, I agree with you on having wordpress.com (and  
>> the .org properties) having OpenID integration.
>> I'd even go as far as saying this should be a default feature in WP.
>
> Maybe someday.  It's a pretty big development "investment," so we'd  
> definitely want to be sure OpenID was here to stay.  In the  
> meantime, there are plugins that do it pretty well!

Indeed.

I wish WP had gotten one of the OpenID bounties: http:// 
iwantmyopenid.org/node/41
:)

On the long term viability, I think one thing that will affect it is  
what comes down from the OpenID v.s SAML debate.

[quote src="cached copy of openid.net mailing list"]
   Why Not SAML?
     We'd like to use the parts of SAML (from the Liberty Alliance)
     that are appropriate, but the spec as a whole isn't an answer.
     Part of our OpenID requirements is that there's an AJAX version,
     which means the only type of RPC request we can do from the
     client to a remote host is a javascript or iframe'd request, and
     not everybody chooses to require SSL, which means the SAML
     bindings as-is won't work in that case, and we'll have to use our
     own JavaScript SAML wrapper at least in that case.
[/quote]

Stephane


From chris.lott at gmail.com  Fri Aug 31 18:30:32 2007
From: chris.lott at gmail.com (Chris Lott)
Date: Fri Aug 31 18:30:39 2007
Subject: [wp-hackers] Sharing Users/authentication
In-Reply-To: <51CC9FF1-D4AE-41DC-979B-C8AD6C5E6B1F@striderweb.com>
References: <a3b809ae0708250521u5d472971j6c2b9b9c5d5163d3@mail.gmail.com>
	<24C8AC8F-CCA7-4E49-A323-58C4486A6505@striderweb.com>
	<F9AA466F-FAB0-46DF-92F1-376BEF6F66D5@striderweb.com>
	<a3b809ae0708291329h555abcebxc3d56410f6ba5445@mail.gmail.com>
	<a3b809ae0708292022q6906111dwedb413e1d7d82dea@mail.gmail.com>
	<2B88161F-FB0C-439F-A48B-BC31CB8B2276@striderweb.com>
	<9b1b9dab0708301251q48761cebp5b244b0387f3c940@mail.gmail.com>
	<51429CDF-BABC-4397-9C1C-8EB927560385@striderweb.com>
	<9b1b9dab0708301444m30c0bee7ua270d5cb46ede7d6@mail.gmail.com>
	<51CC9FF1-D4AE-41DC-979B-C8AD6C5E6B1F@striderweb.com>
Message-ID: <9b1b9dab0708311130y1c1c9533ncf6bf65557d47bd6@mail.gmail.com>

The new version has resolved almost all of the problems... there was a
bit of a snafu because the slave blog is accessing the master blog
tables using the slave blog's credentials (mysql user), but once I
gave that user permission to access the master blog tables it seems
fine... BUT, the logout problem remains. In the master blog I can't
log out of the admin interface. I can from the slave blog control
panel though...

c

On 8/30/07, Stephen Rider <wp-hackers@striderweb.com> wrote:
>
> On Aug 30, 2007, at 4:44 PM, Chris Lott wrote:
>
> > So, I cleared everything out (de-activated plugin, deleted rows from
> > wp_options, copied fresh plugin files) and tried again and here is
> > what is happening... slightly different now.
>
> Did you also clear the extra data out of the user_meta table?
>
> > Starting with two blogs without the plugin. I install the plugin on
> > the first (master) blog. Activate it. No errors. When I look at the
> > options it is showing the right database and prefix.
>
> So far so good.
>
> > Note: I can't logout of that blog, though... when I try to sign out
> > I just get
> > redirected to the same page in the control panel area I am on.
>
> That suggests to me that you have some problem that is unrelated to
> this plugin.  Nothing I know of in this plugin should prevent you
> from logging out.
>
> Deactivate the plugin in both blogs, and see if the logout problem is
> still there.
>
> Actually, first just clear your cache and see what happens. :)
>
> > At this point I see only one entry in the wp_options table.
> >
> > Go to second (slave) blog. Activate plugin. Go to options, put in
> > database name (it is a diff database) and prefix (which is the same).
> > No errors. I can sign out.
>
> I suspected this might be the case.  I emailed the plugin author
> separately asking just this a few minutes ago.  Is the login/password
> the same or different on the two databases?
>
> WAIT! I've got it!  The two have to have different prefixes.  Right
> now they both think they are the master blog.  This is a bug.
>
> (Though I'm still quite sure the "can't logout" problem is something
> unrelated to this plugin.)
>
> Hey Curt -- if you're reading this, my "auto detect Master/Slave"
> suggestion just hit a snag!  :0  Maybe test for both prefix _and_
> database name?
>
> Stephen
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>


-- 
Chris Lott
From wordpress at tekartist.org  Fri Aug 31 18:35:03 2007
From: wordpress at tekartist.org (Stephane Daury)
Date: Fri Aug 31 18:35:15 2007
Subject: [wp-hackers] Adding wp-includes/class folder
In-Reply-To: <46D840BE.2000006@branson.com>
References: <46D7883C.6070205@dragonu.net>
	<46D7B718.2010200@ftwr.co.uk>	<46D812CB.80302@dragonu.net>
	<46D81405.4090306@ftwr.co.uk>	<20070831140206.GB979@kimmo.suominen.com>
	<2A8BA930-7A10-4F8B-B1AD-015870478E86@tekartist.org>
	<46D840BE.2000006@branson.com>
Message-ID: <21D728EF-5D92-42D4-98F0-783DE65C2B1D@tekartist.org>


re: db abstraction:

If coupled with a PHP5 (well, 5.1+) port effort, I'd recommend the  
built-in PDO (http://ca.php.net/pdo).
I'm down to the point where I even use it in environments where I  
only have to support a single RDBMS, for the "prepare" method and such.

In the backward compatibility context, I've always had very good  
experiences with ADOdb (http://adodb.sourceforge.net/) which is  
insanely flexible and powerful, and has the fantastic advantage of  
actually dealing with most of the SQL capabilities differences for  
you. It even has its own query caching engine, when not natively  
supported by the DB.
I've been using it for 5-6 years now (a lot before, less since PDO),  
and although it has lost steam when PDO came out (about a year or  
less), development picked up again and the latest version is from May  
2007.
I went the PEAR way in the past, but it's not always easy to install  
PEAR modules in some hosting plans, and the whole PEAR DB to MDB2  
switch only made things worse for me once or twice.

The largest OSS project I've ever released (netjuke) was "DB- 
independent". It ran on MySQL, PostgreSQL, SQLite, Sybase, MSSQL, and  
others (even Access).
What I learned from that project is that DB abstraction doesn't mean  
you have to support them all at once, and only tweaks are usually  
required to support a new DB.
One advantage of WP being so attentive to backward compatibility is  
that its SQL base has been kept away from advanced features (views,  
transactions, stored procedures, etc) which is usually where things  
get awry. Other features such as auto-incremented IDs (vs. sequences)  
are usually pretty widely supported by now.

Stephane



On Aug 31, 2007, at 12:24, jacobsantos@branson.com wrote:

> Makes sense. When I submit the patch for XMLRPC, I'll update it to  
> exclude the changes I made to IXR.
>
> I think at this moment the least amount of restructuring as  
> possible is needed. So while I also think the Factory model would  
> be nice in several areas. If the devs would accept a simplified  
> version, it would be easier to get on board with the more complex  
> restructuring.
>
> I think the Database Access Abstraction Layer is another good  
> candidate for the factory model, even with it technically being an  
> external library. However, this implies more work and I've yet to  
> figure out a good way to think about a easy way to get around the  
> differences of SQL.
>
> Ideas
>
> 1. Have a object for each SQL platform supported with only SQL.  
> I've decided against this.
> 2. Have functions that returns just the SQL for that API. Just as  
> bad as 1.
> 3. XML? Eh.
>
> Probably just keep it as it is for the SQL, but allow for the query  
> layer to be updated.
>
> Jacob Santos
>
> Stephane Daury wrote:
>>
>> 3rd party libs are always an issue in this kind of restructuration.
>>
>> For this reason, I always make a habit of having all 3rd party  
>> dependencies in their own specific subtree so that there is a  
>> clear distinction and do not feel compelled to apply my convention  
>> to these pieces. Then I have a simple wrapper implementing/ 
>> including the 3rd party software, which itself respects the  
>> convention.
>>
>> A side advantage is that the wrapper allows me (very often) to  
>> switch the said 3rd party software to another provider when a  
>> better solution comes along or allow library choices when  
>> available (such as different caching mechanisms, locale support  
>> systems, etc).
>>
>> I know it sounds heavy, but it pays off in flexibility in the long  
>> term.
>>
>> Stephane
>>
>>
>>
>> On Aug 31, 2007, at 10:02, Kimmo Suominen wrote:
>>
>>> On Fri, Aug 31, 2007 at 02:13:41PM +0100, Peter Westwood wrote:
>>>>
>>>> For things like IXR / POP3 support / PHPMailer - splitting the  
>>>> classes
>>>> out is a really bad plan IMHO - they are external libraries that we
>>>> include and we need an easy way of diffing between our version  
>>>> (with
>>>> some patches) and the upstream version so as to make it easy to  
>>>> pull in
>>>> updates.
>>>
>>> Similarly renames and code shuffling between files easily creates
>>> a lot of extra work, as svn isn't smart enough to merge changes
>>> from changed files into the new file (let alone the new location
>>> of a file fragment, e.g. when a function is moved to another file).
>>>
>>> Such changes shouldn't be made lightly, in my very humble opinion.
>>>
>>> Best regards,
>>> + Kimmo
>>>
>>> P.S. Any svk gurus around willing to tell me what I'm doing wrong?
>>> -- 
>>> <A HREF="http://kimmo.suominen.com/">Kimmo Suominen</A>
>>>
>>> _______________________________________________
>>> wp-hackers mailing list
>>> wp-hackers@lists.automattic.com
>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers@lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
>>
>>
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

From javier at aroche.org  Fri Aug 31 18:49:30 2007
From: javier at aroche.org (Javier Aroche)
Date: Fri Aug 31 18:49:35 2007
Subject: [wp-hackers] Templatedia, a new work in progress plugin
Message-ID: <W8603421764221421188586170@mail.mailsnare.net>


Very nice plugin!

That's one that we want to have in wordpress.com ;)

--Javier Aroche


From joseph at randomnetworks.com  Fri Aug 31 18:51:09 2007
From: joseph at randomnetworks.com (Joseph Scott)
Date: Fri Aug 31 18:52:11 2007
Subject: [wp-hackers] XMLRPC rework
In-Reply-To: <46D6F03F.6080909@buayacorp.com>
References: <46D6F03F.6080909@buayacorp.com>
Message-ID: <6CFF6945-BA15-49C8-A03C-DB3C2C9572DE@randomnetworks.com>


I'm cross posting this so that folks to the wp-xmlrpc list are aware  
of this.


On Aug 30, 2007, at 10:28 AM, Alexander Concha wrote:

> Hello Folks.
>
> I think WP's XMLRPC server needs more attention because it has some
> buggy methods and by default allows to gather useful information to
> unprivileged users.
>
> The following methods doesn't seem to work and because of security
> implications, I suggest remove them -- although I'm not sure if they
> were added for compatibility reasons.
>
> - blogger_getTemplate
> - blogger_setTemplate


I'm inclined to agree on removing these at this point.  From the  
looks of things these haven't worked for a long time, if ever.  Even  
if they were made to work it isn't clear what WordPress should do  
with them.

If we want to provide an interface for getting and updating templates  
we could always implement our own wp.getTemplate wp.setTemplate  
methods later.


> OTOH, unprivileged users (aka anyone with a subscriber role) can
> retrieve data which could be used for unknown purposes. Examples:
>
> - mw_getRecentPosts will return posts including private fields like
> post_password.
> - wp_getAuthors will return the list of users with private data (email
> and role).


We could tighten things up on these and other functions that can  
return sensitive data.

When returning post data I'd suggest limiting it to anyone that can  
edit the post (the post author and anyone with editor and  
administrator role).  This would make any of the methods that return  
post data do the same sort of checks that mw_editPost does.  Is there  
any reason why a user who can't edit a post should still be able to  
get the post data via XML-RPC?

For wp_getAuthors we could probably just trim it down to three  
fields: user_id, user_login and display_name.  I don't see any  
benefit derived from including the user_email and meta_value fields.   
On the other hand, is there a potential issue with having the ability  
to enumerate all of the usernames for a blog?  Perhaps this method  
should only work for people who can edit posts (contributer, author,  
edit and admin roles)?



--
Joseph Scott
http://joseph.randomnetworks.com/


From computerguru at neosmart.net  Fri Aug 31 19:58:39 2007
From: computerguru at neosmart.net (Computer Guru)
Date: Fri Aug 31 19:58:44 2007
Subject: [wp-hackers] WordPress.org and WordPress.com integration
In-Reply-To: <25A4671F-7711-4300-A23E-5AEF37C99A4E@tekartist.org>
References: <46D67EAE.2080505@gmail.com>
	<F1F52750-0919-4D05-8F11-C168DD84B5A4@tekartist.org>
	<4681c7d40708300704x67812205n3af10d0dce7a0120@mail.gmail.com>
	<25A4671F-7711-4300-A23E-5AEF37C99A4E@tekartist.org>
Message-ID: <4681c7d40708311258x2a1cbf03he280ab0b51d92adb@mail.gmail.com>

My biggest problem is that I'm looking to deploy the same script on
multiple servers - which use Windows, Linux, and OpenSolaris.

The FC7 LDAP project looks like a real winner - I'm thinking of
deploying it in a virtual machine on my servers....

Thanks.

On 8/31/07, Stephane Daury <wordpress@tekartist.org> wrote:
>
> What's wrong with solutions like OpenLDAP?
> http://www.openldap.org/
>
> Have you looked into the Fedora Directory Server project?
> http://directory.fedoraproject.org/
>
> Stephane
>
>
>
> On Aug 30, 2007, at 10:04, Computer Guru wrote:
>
> > Going *really* off-topic here, but does anyone know of a good
> > *script*-based LDAP server?
> >
> > I've been using various application-based LDAP servers on other
> > projects, but I'd love it if anyone could recommend a full-fledged
> > script+database-based LDAP server one could use. (basically for
> > cross-compatibility across different platforms, easy code hacking,
> > etc.)
> >
> > Cheers,
> > CG
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>


-- 
Computer Guru
Director,
NeoSmart Technologies
http://neosmart.net/blog/
From wp-hackers at striderweb.com  Fri Aug 31 21:01:03 2007
From: wp-hackers at striderweb.com (Stephen Rider)
Date: Fri Aug 31 21:01:13 2007
Subject: [wp-hackers] Setting default options for plugin
Message-ID: <E7DC7C16-728D-417F-A883-4FBA79111D3D@striderweb.com>

Is there an official or "best" method for setting default options for  
a plugin when it is first activated?  Currently I use something like  
this:

if (!get_option('my_plugin')){
     // set default options
     delete_option('my_plugin_options');
     add_option ( 'my_plugin_options',array( 'work_properly' =>  
true ) );
}

This is just "raw" inside the php file (not in a function) so it runs  
every time the PHP file is called.  Is there a better way of doing  
this or am I doing things right?

Stephen
From dan at dancoulter.com  Fri Aug 31 21:08:43 2007
From: dan at dancoulter.com (Dan Coulter)
Date: Fri Aug 31 21:08:47 2007
Subject: [wp-hackers] Setting default options for plugin
In-Reply-To: <E7DC7C16-728D-417F-A883-4FBA79111D3D@striderweb.com>
References: <E7DC7C16-728D-417F-A883-4FBA79111D3D@striderweb.com>
Message-ID: <5dc2163e0708311408m1191fd8oc10a5518f9d4b769@mail.gmail.com>

On 8/31/07, Stephen Rider <wp-hackers@striderweb.com> wrote:
> Is there an official or "best" method for setting default options for
> a plugin when it is first activated?

You can use the following code to call a function when your plugin is
first activated:

add_action('activate_plugindir/pluginfile.php', 'functionname');

There's more info here: http://codex.wordpress.org/Creating_Tables_with_Plugins

-- 
Dan Coulter
http://www.dancoulter.com/
http://www.phpflickr.com/
It is time - http://e-hobo.com/

Hey, I got nothing to do today but smile
-Simon and Garfunkel
From hovercrafter at earthlink.net  Fri Aug 31 21:13:28 2007
From: hovercrafter at earthlink.net (Jamie Holly)
Date: Fri Aug 31 21:13:32 2007
Subject: [wp-hackers] Setting default options for plugin
In-Reply-To: <E7DC7C16-728D-417F-A883-4FBA79111D3D@striderweb.com>
References: <E7DC7C16-728D-417F-A883-4FBA79111D3D@striderweb.com>
Message-ID: <006a01c7ec13$c6c7dff0$54579fd0$@net>

Do it via an activation hook. Say your plugin file is xyz.php then you add a
hook

Add_action('activate_xyz.php','function name here');

It also works with folders, so if it was xyz/xyz.php your hook would be:
Add_action('activate_xyz/xyz.php','function name here');

That way it isn't called every time the file is called, only on activation.

Jamie Holly
http://www.intoxination.net
1.513.252.2919 | Skype:intoxination


>-----Original Message-----
>From: wp-hackers-bounces@lists.automattic.com [mailto:wp-hackers-
>bounces@lists.automattic.com] On Behalf Of Stephen Rider
>Sent: Friday, August 31, 2007 5:01 PM
>To: wp-hackers@lists.automattic.com
>Subject: [wp-hackers] Setting default options for plugin
>
>Is there an official or "best" method for setting default options for
>a plugin when it is first activated?  Currently I use something like
>this:
>
>if (!get_option('my_plugin')){
>     // set default options
>     delete_option('my_plugin_options');
>     add_option ( 'my_plugin_options',array( 'work_properly' =>
>true ) );
>}
>
>This is just "raw" inside the php file (not in a function) so it runs
>every time the PHP file is called.  Is there a better way of doing
>this or am I doing things right?
>
>Stephen
>_______________________________________________
>wp-hackers mailing list
>wp-hackers@lists.automattic.com
>http://lists.automattic.com/mailman/listinfo/wp-hackers

From lists.automattic.com at callum-macdonald.com  Fri Aug 31 21:32:34 2007
From: lists.automattic.com at callum-macdonald.com (Callum Macdonald)
Date: Fri Aug 31 21:33:02 2007
Subject: [wp-hackers] Adding phpmailer options (smtp for example)
In-Reply-To: <46D812D0.8030108@ftwr.co.uk>
References: <46D5F753.70000@callum-macdonald.com>	<D69753B9-2FD3-4CB4-8E89-A5D3C24BC3B1@ftwr.co.uk>	<46D6B0C4.7090001@callum-macdonald.com>	<op.txvfs7dbk6w4mc@dd32.no-ip.com>	<46D6B579.7030706@gmx.net>	<46D6CE1D.6080601@callum-macdonald.com>	<46D6EEEF.7090806@ftwr.co.uk>	<46D80E6A.2030002@callum-macdonald.com>
	<46D812D0.8030108@ftwr.co.uk>
Message-ID: <46D888F2.9030706@callum-macdonald.com>

Ok, I've updated the plugin, using your simplified approach and added an 
options page (the bulk of the code). It's available here:
http://www.callum-macdonald.com/code/wp-mail-smtp/

All comments welcome.

Cheers - Callum.

Peter Westwood wrote:
> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
>
> Callum Macdonald wrote:
>   
>> I hadn't noticed the filter, but you're absolutely right, that would be
>> called at the right point and would most likely work (I haven't tested
>> it yet). I might well rework my plugin to use that approach. I'll
>> probably do that when I add the option page.
>>
>>     
>
> The example plugin worked fine in my localhost smtp tests with WordPress
> trunk.
>
> I look forward to seeing the simplified plugin with admin ui :-)
>
>   
>> Thanks for the feedback.
>>     
>
> Thats ok.
>
> Cheers
>
> westi
> - --
> Peter Westwood
> http://blog.ftwr.co.uk
> -----BEGIN PGP SIGNATURE-----
> Version: GnuPG v1.4.2 (MingW32)
> Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org
>
> iD8DBQFG2BLQVPRdzag0AcURAml2AKDMwMbeLPMW0jQ4QUxcPFGJ36E3UACfeBO9
> PILOAE/8OCf1571jfNnPHSc=
> =OC7c
> -----END PGP SIGNATURE-----
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
>
>   

From lists.automattic.com at callum-macdonald.com  Fri Aug 31 21:35:10 2007
From: lists.automattic.com at callum-macdonald.com (Callum Macdonald)
Date: Fri Aug 31 21:35:20 2007
Subject: [wp-hackers] Setting default options for plugin
In-Reply-To: <E7DC7C16-728D-417F-A883-4FBA79111D3D@striderweb.com>
References: <E7DC7C16-728D-417F-A883-4FBA79111D3D@striderweb.com>
Message-ID: <46D8898E.4030603@callum-macdonald.com>

Hey Stephen,

I think you want to use the activate_ action. See these pages for more info:
http://codex.wordpress.org/Plugin_API/Action_Reference
http://codex.wordpress.org/Creating_Tables_with_Plugins

I've just created a plugin which does exactly that which you're welcome 
to copy. See lines 21-46 and 165 for the relevant code. The plugin is 
available here:
http://www.callum-macdonald.com/code/wp-mail-smtp/

Cheers,


Callum.

Stephen Rider wrote:
> Is there an official or "best" method for setting default options for 
> a plugin when it is first activated? Currently I use something like this:
>
> if (!get_option('my_plugin')){
> // set default options
> delete_option('my_plugin_options');
> add_option ( 'my_plugin_options',array( 'work_properly' => true ) );
> }
>
> This is just "raw" inside the php file (not in a function) so it runs 
> every time the PHP file is called. Is there a better way of doing this 
> or am I doing things right?
>
> Stephen
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
>

From johnbillion+wp at gmail.com  Fri Aug 31 22:38:09 2007
From: johnbillion+wp at gmail.com (John Blackbourn)
Date: Fri Aug 31 22:38:15 2007
Subject: [wp-hackers] Setting default options for plugin
In-Reply-To: <46D8898E.4030603@callum-macdonald.com>
References: <E7DC7C16-728D-417F-A883-4FBA79111D3D@striderweb.com>
	<46D8898E.4030603@callum-macdonald.com>
Message-ID: <1fa535a70708311538s6221b390xda7fdab7176853b8@mail.gmail.com>

Stephen,

You should use the register_activation_hook function instead of
calling the activate_xxx action directly. Unfortunately this isn't a
well documented function.

Brief explanation here:
http://wphooks.flatearth.org/hooks/activate_plugin-filename/

John.

On 8/31/07, Callum Macdonald <lists.automattic.com@callum-macdonald.com> wrote:
> Hey Stephen,
>
> I think you want to use the activate_ action. See these pages for more info:
> http://codex.wordpress.org/Plugin_API/Action_Reference
> http://codex.wordpress.org/Creating_Tables_with_Plugins
>
> I've just created a plugin which does exactly that which you're welcome
> to copy. See lines 21-46 and 165 for the relevant code. The plugin is
> available here:
> http://www.callum-macdonald.com/code/wp-mail-smtp/
>
> Cheers,
>
>
> Callum.
>
> Stephen Rider wrote:
> > Is there an official or "best" method for setting default options for
> > a plugin when it is first activated? Currently I use something like this:
> >
> > if (!get_option('my_plugin')){
> > // set default options
> > delete_option('my_plugin_options');
> > add_option ( 'my_plugin_options',array( 'work_properly' => true ) );
> > }
> >
> > This is just "raw" inside the php file (not in a function) so it runs
> > every time the PHP file is called. Is there a better way of doing this
> > or am I doing things right?
> >
> > Stephen
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers@lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> >
> >
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
From wordpress at tekartist.org  Fri Aug 31 23:19:31 2007
From: wordpress at tekartist.org (Stephane Daury)
Date: Fri Aug 31 23:19:37 2007
Subject: [wp-hackers] WordPress.org and WordPress.com integration
In-Reply-To: <4681c7d40708311258x2a1cbf03he280ab0b51d92adb@mail.gmail.com>
References: <46D67EAE.2080505@gmail.com>
	<F1F52750-0919-4D05-8F11-C168DD84B5A4@tekartist.org>
	<4681c7d40708300704x67812205n3af10d0dce7a0120@mail.gmail.com>
	<25A4671F-7711-4300-A23E-5AEF37C99A4E@tekartist.org>
	<4681c7d40708311258x2a1cbf03he280ab0b51d92adb@mail.gmail.com>
Message-ID: <976C09E3-BA2D-4A7D-B96F-A3D68C751F67@tekartist.org>


In that case, you should also lok into the Apache Directory Server,  
which is Java (escaped me in the 1st msg).

http://directory.apache.org/apacheds/1.0/13-installing-and-starting- 
the-server.html

[quote]
We provide native installers for several platforms:

     * MacOS (jar)
     * Solaris SPARC (jar)
     * Solaris i386 (jar)
     * Windows (exe)
     * Debian package
     * RPM package
     * Linux (jar)
[/quote]

Stephane

On Aug 31, 2007, at 15:58, Computer Guru wrote:

> My biggest problem is that I'm looking to deploy the same script on
> multiple servers - which use Windows, Linux, and OpenSolaris.
>
> The FC7 LDAP project looks like a real winner - I'm thinking of
> deploying it in a virtual machine on my servers....
>
> Thanks.
>
> On 8/31/07, Stephane Daury <wordpress@tekartist.org> wrote:
>>
>> What's wrong with solutions like OpenLDAP?
>> http://www.openldap.org/
>>
>> Have you looked into the Fedora Directory Server project?
>> http://directory.fedoraproject.org/
>>
>> Stephane
From viper at viper007bond.com  Fri Aug 31 23:45:59 2007
From: viper at viper007bond.com (Viper007Bond)
Date: Fri Aug 31 23:46:08 2007
Subject: [wp-hackers] Setting default options for plugin
In-Reply-To: <1fa535a70708311538s6221b390xda7fdab7176853b8@mail.gmail.com>
References: <E7DC7C16-728D-417F-A883-4FBA79111D3D@striderweb.com>
	<46D8898E.4030603@callum-macdonald.com>
	<1fa535a70708311538s6221b390xda7fdab7176853b8@mail.gmail.com>
Message-ID: <8f93a7390708311645j227ce1cbn5e555e0f5b0d113d@mail.gmail.com>

Meh, I just write a checker for when I need the data (since I need to load
it anyway), something along these lines.

function loadsettings() {
$this->settings = get_option( 'my_plugin' );
if ( empty($this->settings) ) $this->settings = $this->defaultsettings;
}

Then whenever I need to load my settings, I call that function. If I don't
need any settings for this page load, the function never gets called. This
way, I know for sure that the options get loaded (I've had mixed results
with the on-load-plugin hooks).

And as for defaults, I never save them to the database (i.e. there's no
update_option() call in that function). I don't see the need, especially
since that way I can update the defaults in a future version and it'll
change the settings for all users who haven't customized their settings via
an admin form which uses update_option().

On 8/31/07, John Blackbourn <johnbillion+wp@gmail.com> wrote:
>
> Stephen,
>
> You should use the register_activation_hook function instead of
> calling the activate_xxx action directly. Unfortunately this isn't a
> well documented function.
>
> Brief explanation here:
> http://wphooks.flatearth.org/hooks/activate_plugin-filename/
>
> John.
>
> On 8/31/07, Callum Macdonald <lists.automattic.com@callum-macdonald.com>
> wrote:
> > Hey Stephen,
> >
> > I think you want to use the activate_ action. See these pages for more
> info:
> > http://codex.wordpress.org/Plugin_API/Action_Reference
> > http://codex.wordpress.org/Creating_Tables_with_Plugins
> >
> > I've just created a plugin which does exactly that which you're welcome
> > to copy. See lines 21-46 and 165 for the relevant code. The plugin is
> > available here:
> > http://www.callum-macdonald.com/code/wp-mail-smtp/
> >
> > Cheers,
> >
> >
> > Callum.
> >
> > Stephen Rider wrote:
> > > Is there an official or "best" method for setting default options for
> > > a plugin when it is first activated? Currently I use something like
> this:
> > >
> > > if (!get_option('my_plugin')){
> > > // set default options
> > > delete_option('my_plugin_options');
> > > add_option ( 'my_plugin_options',array( 'work_properly' => true ) );
> > > }
> > >
> > > This is just "raw" inside the php file (not in a function) so it runs
> > > every time the PHP file is called. Is there a better way of doing this
> > > or am I doing things right?
> > >
> > > Stephen
> > > _______________________________________________
> > > wp-hackers mailing list
> > > wp-hackers@lists.automattic.com
> > > http://lists.automattic.com/mailman/listinfo/wp-hackers
> > >
> > >
> >
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers@lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> >
> _______________________________________________
> wp-hackers mailing list
> wp-hackers@lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>



-- 
Viper007Bond | http://www.viper007bond.com/
From wordpress at dd32.id.au  Fri Aug 31 23:56:27 2007
From: wordpress at dd32.id.au (DD32)
Date: Fri Aug 31 23:56:14 2007
Subject: [wp-hackers] Setting default options for plugin
In-Reply-To: <8f93a7390708311645j227ce1cbn5e555e0f5b0d113d@mail.gmail.com>
References: <E7DC7C16-728D-417F-A883-4FBA79111D3D@striderweb.com>
	<46D8898E.4030603@callum-macdonald.com>
	<1fa535a70708311538s6221b390xda7fdab7176853b8@mail.gmail.com>
	<8f93a7390708311645j227ce1cbn5e555e0f5b0d113d@mail.gmail.com>
Message-ID: <op.txx7gde9k6w4mc@dd32.no-ip.com>

On Sat, 01 Sep 2007 09:45:59 +1000, Viper007Bond <viper@viper007bond.com> wrote:
> (I've had mixed results with the on-load-plugin hooks).

There were issues with it on windows pre 2.3/2.2.x:
http://trac.wordpress.org/ticket/3002
