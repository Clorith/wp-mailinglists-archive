From danielbachhuber at gmail.com  Sun Aug  1 00:27:39 2010
From: danielbachhuber at gmail.com (Daniel Bachhuber)
Date: Sat, 31 Jul 2010 20:27:39 -0400
Subject: [wp-hackers] Adding custom taxonomies as submenus to custom
	admin top-level menu
In-Reply-To: <127EB5FF-E3AD-4CD5-AD4D-C90B96A40A36@newclarity.net>
References: <281411A0-1D66-4991-9F82-FB6B205EAA4F@gmail.com>
	<127EB5FF-E3AD-4CD5-AD4D-C90B96A40A36@newclarity.net>
Message-ID: <EAC62067-7E94-457F-AB33-8684C14CD8F7@gmail.com>


> Is this what you are looking for?

It's really close. My understanding of add_submenu_page(), however, is  
that you have to call a function when you're hooking into a custom  
admin menu; it doesn't work with a file reference. Here's my sample  
code with doesn't seem functional:

	add_menu_page('My Plugin', 'My Plugin',
                         'edit_posts', 'my_plugin-settings',
                         array(&$this->settings, 'general_settings'));

         add_submenu_page('my_plugin-settings', 'Pitch Statuses',
                         'Pitch Statuses', 'my_plugin-pitch_statuses',
                         'edit-tags.php?taxonomy=pitch_status');

Does this make sense or am I missing something?

Thanks,

Daniel

>
>
> On Jul 31, 2010, at 5:04 PM, Daniel Bachhuber wrote:
>
>> Hey all,
>> I'm creating a plugin that uses three custom taxonomies  
>> ('pitch_status', 'user_type', and 'user_role'). The first is tied  
>> to posts and the second and third are tied to users. I'd like to  
>> use add_submenu_page to add the edit screens for each of these  
>> taxonomies to the custom menu for the plugin. Is this possible? I'd  
>> prefer not to reinvent the wheel and have to create my own edit  
>> views.
>>
>> Thanks much,
>>
>> Daniel
>>
>> --
>> Daniel Bachhuber
>> www.danielbachhuber.com
>> danielbachhuber at gmail.com
>> cell: +1 971 998 5407
>> aim/skype/twitter: danielbachhuber
>>
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

--
Daniel Bachhuber
www.danielbachhuber.com
danielbachhuber at gmail.com
cell: +1 971 998 5407
aim/skype/twitter: danielbachhuber


From danielbachhuber at gmail.com  Sun Aug  1 00:30:29 2010
From: danielbachhuber at gmail.com (Daniel Bachhuber)
Date: Sat, 31 Jul 2010 20:30:29 -0400
Subject: [wp-hackers] Adding custom taxonomies as submenus to custom
	admin top-level menu
In-Reply-To: <127EB5FF-E3AD-4CD5-AD4D-C90B96A40A36@newclarity.net>
References: <281411A0-1D66-4991-9F82-FB6B205EAA4F@gmail.com>
	<127EB5FF-E3AD-4CD5-AD4D-C90B96A40A36@newclarity.net>
Message-ID: <348A2080-7955-4790-A69B-1118324BF723@gmail.com>

Also related: I can access my taxonomies just fine if I hand-craft the  
URL (e.g. http://localhost:8888/wp-admin/edit-tags.php?taxonomy=user_role)

Thanks,

Daniel

On Jul 31, 2010, at 5:35 PM, Mike Schinkel wrote:

> Daniel:
>
> Is this what you are looking for?
>
> add_action('admin_menu', 'my_admin_menu');
> function my_admin_menu() {
> 	add_menu_page('My Plugin Menu','My Plugin Menu', 'manage_options',  
> 'admin.php?action=my_plugins_action');
> 	add_submenu_page('admin.php?action=my_plugins_action', 'Pitch  
> Statuses', 'Pitch Statuses', 'manage_options', 'edit-tags.php? 
> taxonomy=pitch_status');
> 	add_submenu_page('admin.php?action=my_plugins_action', 'User  
> Types', 'User Types', 'manage_options', 'edit-tags.php? 
> taxonomy=user_type');
> 	add_submenu_page('admin.php?action=my_plugins_action', 'User  
> Roles', 'User Roles', 'manage_options', 'edit-tags.php? 
> taxonomy=user_role');
> }
>
> Note, this assumes:
>
> 1.) You creates a custom post type for users that mirrors the user  
> (There is currently no way to create a taxonomy for a user),
> 2.) Your main plugin page is located in the admin at "admin.php? 
> action=my_plugins_action".
>
> -Mike
>
> On Jul 31, 2010, at 5:04 PM, Daniel Bachhuber wrote:
>
>> Hey all,
>> I'm creating a plugin that uses three custom taxonomies  
>> ('pitch_status', 'user_type', and 'user_role'). The first is tied  
>> to posts and the second and third are tied to users. I'd like to  
>> use add_submenu_page to add the edit screens for each of these  
>> taxonomies to the custom menu for the plugin. Is this possible? I'd  
>> prefer not to reinvent the wheel and have to create my own edit  
>> views.
>>
>> Thanks much,
>>
>> Daniel
>>
>> --
>> Daniel Bachhuber
>> www.danielbachhuber.com
>> danielbachhuber at gmail.com
>> cell: +1 971 998 5407
>> aim/skype/twitter: danielbachhuber
>>
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

--
Daniel Bachhuber
www.danielbachhuber.com
danielbachhuber at gmail.com
cell: +1 971 998 5407
aim/skype/twitter: danielbachhuber


From charles at cefm.ca  Sun Aug  1 00:43:49 2010
From: charles at cefm.ca (Charles Frees-Melvin)
Date: Sat, 31 Jul 2010 21:43:49 -0300
Subject: [wp-hackers] Adding custom taxonomies as submenus to custom
	admin top-level menu
In-Reply-To: <348A2080-7955-4790-A69B-1118324BF723@gmail.com>
References: <281411A0-1D66-4991-9F82-FB6B205EAA4F@gmail.com>
	<127EB5FF-E3AD-4CD5-AD4D-C90B96A40A36@newclarity.net>
	<348A2080-7955-4790-A69B-1118324BF723@gmail.com>
Message-ID: <9EEB9CEA-04AC-4B86-9B73-5026511E5BF4@cefm.ca>

The first perametre is the filename of the parent that you want it to be under e.g. uploads.php for Media

--
Charles E. Frees-Melvin
charles at cefm.ca
www.cefm.ca
506-640-1007

Sent from my iPhone 3G

On 2010-07-31, at 21:30, Daniel Bachhuber <danielbachhuber at gmail.com> wrote:

> Also related: I can access my taxonomies just fine if I hand-craft the URL (e.g. http://localhost:8888/wp-admin/edit-tags.php?taxonomy=user_role)
> 
> Thanks,
> 
> Daniel
> 
> On Jul 31, 2010, at 5:35 PM, Mike Schinkel wrote:
> 
>> Daniel:
>> 
>> Is this what you are looking for?
>> 
>> add_action('admin_menu', 'my_admin_menu');
>> function my_admin_menu() {
>>    add_menu_page('My Plugin Menu','My Plugin Menu', 'manage_options', 'admin.php?action=my_plugins_action');
>>    add_submenu_page('admin.php?action=my_plugins_action', 'Pitch Statuses', 'Pitch Statuses', 'manage_options', 'edit-tags.php?taxonomy=pitch_status');
>>    add_submenu_page('admin.php?action=my_plugins_action', 'User Types', 'User Types', 'manage_options', 'edit-tags.php?taxonomy=user_type');
>>    add_submenu_page('admin.php?action=my_plugins_action', 'User Roles', 'User Roles', 'manage_options', 'edit-tags.php?taxonomy=user_role');
>> }
>> 
>> Note, this assumes:
>> 
>> 1.) You creates a custom post type for users that mirrors the user (There is currently no way to create a taxonomy for a user),
>> 2.) Your main plugin page is located in the admin at "admin.php?action=my_plugins_action".
>> 
>> -Mike
>> 
>> On Jul 31, 2010, at 5:04 PM, Daniel Bachhuber wrote:
>> 
>>> Hey all,
>>> I'm creating a plugin that uses three custom taxonomies ('pitch_status', 'user_type', and 'user_role'). The first is tied to posts and the second and third are tied to users. I'd like to use add_submenu_page to add the edit screens for each of these taxonomies to the custom menu for the plugin. Is this possible? I'd prefer not to reinvent the wheel and have to create my own edit views.
>>> 
>>> Thanks much,
>>> 
>>> Daniel
>>> 
>>> --
>>> Daniel Bachhuber
>>> www.danielbachhuber.com
>>> danielbachhuber at gmail.com
>>> cell: +1 971 998 5407
>>> aim/skype/twitter: danielbachhuber
>>> 
>>> _______________________________________________
>>> wp-hackers mailing list
>>> wp-hackers at lists.automattic.com
>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>> 
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
> 
> --
> Daniel Bachhuber
> www.danielbachhuber.com
> danielbachhuber at gmail.com
> cell: +1 971 998 5407
> aim/skype/twitter: danielbachhuber
> 
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

From wordpress at dd32.id.au  Sun Aug  1 00:44:45 2010
From: wordpress at dd32.id.au (Dion Hulse (dd32))
Date: Sun, 01 Aug 2010 10:44:45 +1000
Subject: [wp-hackers] Custom taxonomies and admin menus
In-Reply-To: <32526067-0F3F-4E84-AA46-22AC397031D4@gmail.com>
References: <144231A0-2B3B-48C6-8727-9BEE7156AA5E@gmail.com>
	<E118293A-4ED8-474D-88CE-E3FB1B211FE9@newclarity.net>
	<F5C092FD-E485-4D21-84D7-2B458300EC0F@gmail.com>
	<0BC4B936-E192-43D1-9862-3477B3527C07@newclarity.net>
	<E1610753-E89A-4A8B-9380-8CF43E039D2D@gmail.com>
	<8BEA8134-619D-49DC-A051-9342FBDBDA12@newclarity.net>
	<7F7B49E9-EF4D-44CA-8257-8C2CC35BC768@gmail.com>
	<7A7CD5B7-EBCB-4A64-830F-828FBFECA571@newclarity.net>
	<32526067-0F3F-4E84-AA46-22AC397031D4@gmail.com>
Message-ID: <op.vgqhouf1spxmuu@ho.st>

On Sun, 01 Aug 2010 09:28:30 +1000, Joshua Sibelman  
<joshua.sibelman at gmail.com> wrote:

> Thanks for the help Mike.
>
> I managed to get them to show up by both changing them to the init()  
> hook, but also by changing their priority from 0 to 10, and invoking  
> this hook immediately after registering the post type.
>
> It's unclear to me *why* that solved the problem, but it did. I  
> appreciate the assistance.


My guess is that the Taxonomies were being registered before the Post  
type, In that case, the taxonomy wouldn't've been registered for that post  
type, as it simply didnt exist..

Dion Hulse / dd32
Contact:
  e: contact at dd32.id.au
  Web: http://dd32.id.au/

From danielbachhuber at gmail.com  Sun Aug  1 01:21:04 2010
From: danielbachhuber at gmail.com (Daniel Bachhuber)
Date: Sat, 31 Jul 2010 21:21:04 -0400
Subject: [wp-hackers] Adding custom taxonomies as submenus to custom
	admin top-level menu
In-Reply-To: <9EEB9CEA-04AC-4B86-9B73-5026511E5BF4@cefm.ca>
References: <281411A0-1D66-4991-9F82-FB6B205EAA4F@gmail.com>
	<127EB5FF-E3AD-4CD5-AD4D-C90B96A40A36@newclarity.net>
	<348A2080-7955-4790-A69B-1118324BF723@gmail.com>
	<9EEB9CEA-04AC-4B86-9B73-5026511E5BF4@cefm.ca>
Message-ID: <2BF0CD00-3521-41B6-9384-DC0DD8E85BE2@gmail.com>

Oh, right.

Here's what I ended up doing:

http://plugins.trac.wordpress.org/changeset/270119/assignment-desk

It's not ideal that the menu items don't show up under our custom menu  
but this is functional enough for the time being (especially because  
I'll need to do a bit more hacking to get taxonomies to work with  
Users).

Thanks for your help,

Daniel

On Jul 31, 2010, at 8:43 PM, Charles Frees-Melvin wrote:

> The first perametre is the filename of the parent that you want it  
> to be under e.g. uploads.php for Media
>
> --
> Charles E. Frees-Melvin
> charles at cefm.ca
> www.cefm.ca
> 506-640-1007
>
> Sent from my iPhone 3G
>
> On 2010-07-31, at 21:30, Daniel Bachhuber  
> <danielbachhuber at gmail.com> wrote:
>
>> Also related: I can access my taxonomies just fine if I hand-craft  
>> the URL (e.g. http://localhost:8888/wp-admin/edit-tags.php?taxonomy=user_role)
>>
>> Thanks,
>>
>> Daniel
>>
>> On Jul 31, 2010, at 5:35 PM, Mike Schinkel wrote:
>>
>>> Daniel:
>>>
>>> Is this what you are looking for?
>>>
>>> add_action('admin_menu', 'my_admin_menu');
>>> function my_admin_menu() {
>>>   add_menu_page('My Plugin Menu','My Plugin Menu',  
>>> 'manage_options', 'admin.php?action=my_plugins_action');
>>>   add_submenu_page('admin.php?action=my_plugins_action', 'Pitch  
>>> Statuses', 'Pitch Statuses', 'manage_options', 'edit-tags.php? 
>>> taxonomy=pitch_status');
>>>   add_submenu_page('admin.php?action=my_plugins_action', 'User  
>>> Types', 'User Types', 'manage_options', 'edit-tags.php? 
>>> taxonomy=user_type');
>>>   add_submenu_page('admin.php?action=my_plugins_action', 'User  
>>> Roles', 'User Roles', 'manage_options', 'edit-tags.php? 
>>> taxonomy=user_role');
>>> }
>>>
>>> Note, this assumes:
>>>
>>> 1.) You creates a custom post type for users that mirrors the user  
>>> (There is currently no way to create a taxonomy for a user),
>>> 2.) Your main plugin page is located in the admin at "admin.php? 
>>> action=my_plugins_action".
>>>
>>> -Mike
>>>
>>> On Jul 31, 2010, at 5:04 PM, Daniel Bachhuber wrote:
>>>
>>>> Hey all,
>>>> I'm creating a plugin that uses three custom taxonomies  
>>>> ('pitch_status', 'user_type', and 'user_role'). The first is tied  
>>>> to posts and the second and third are tied to users. I'd like to  
>>>> use add_submenu_page to add the edit screens for each of these  
>>>> taxonomies to the custom menu for the plugin. Is this possible?  
>>>> I'd prefer not to reinvent the wheel and have to create my own  
>>>> edit views.
>>>>
>>>> Thanks much,
>>>>
>>>> Daniel
>>>>
>>>> --
>>>> Daniel Bachhuber
>>>> www.danielbachhuber.com
>>>> danielbachhuber at gmail.com
>>>> cell: +1 971 998 5407
>>>> aim/skype/twitter: danielbachhuber
>>>>
>>>> _______________________________________________
>>>> wp-hackers mailing list
>>>> wp-hackers at lists.automattic.com
>>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>>
>>> _______________________________________________
>>> wp-hackers mailing list
>>> wp-hackers at lists.automattic.com
>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
>> --
>> Daniel Bachhuber
>> www.danielbachhuber.com
>> danielbachhuber at gmail.com
>> cell: +1 971 998 5407
>> aim/skype/twitter: danielbachhuber
>>
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

--
Daniel Bachhuber
www.danielbachhuber.com
danielbachhuber at gmail.com
cell: +1 971 998 5407
aim/skype/twitter: danielbachhuber


From mikeschinkel at newclarity.net  Sun Aug  1 01:48:58 2010
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Sat, 31 Jul 2010 21:48:58 -0400
Subject: [wp-hackers] Adding custom taxonomies as submenus to custom
	admin top-level menu
In-Reply-To: <2BF0CD00-3521-41B6-9384-DC0DD8E85BE2@gmail.com>
References: <281411A0-1D66-4991-9F82-FB6B205EAA4F@gmail.com>
	<127EB5FF-E3AD-4CD5-AD4D-C90B96A40A36@newclarity.net>
	<348A2080-7955-4790-A69B-1118324BF723@gmail.com>
	<9EEB9CEA-04AC-4B86-9B73-5026511E5BF4@cefm.ca>
	<2BF0CD00-3521-41B6-9384-DC0DD8E85BE2@gmail.com>
Message-ID: <5A1E1A7D-3229-4AB1-846E-10302B9F0B2F@newclarity.net>

On Jul 31, 2010, at 9:21 PM, Daniel Bachhuber wrote:
> Here's what I ended up doing:
> 
> http://plugins.trac.wordpress.org/changeset/270119/assignment-desk
> 
> It's not ideal that the menu items don't show up under our custom menu but this is functional enough for the time being (especially because I'll need to do a bit more hacking to get taxonomies to work with Users).
> 
> Thanks for your help,
> 

Daniel

Try this (integrated into your code, of course):

class AssignmentDesk {
	static function on_load() {
		add_action('admin_action_assignment-desk',array(__CLASS__, 'general_settings'));
		add_action('admin_menu', array(__CLASS__,'admin_menu'));
	}
	function general_settings() {
		echo 'Do your settings here';
	}
	static function admin_menu() {
		add_menu_page('Assignment Desk', 'Assignment Desk','manage_options','assignment-desk',array(__CLASS__, 'general_settings'));
		add_submenu_page('assignment-desk', 'Pitch Statuses', 'Pitch Statuses', 'manage_options', 'edit-tags.php?taxonomy=pitch_status');
		add_submenu_page('assignment-desk', 'User Types', 'User Types', 'manage_options', 'edit-tags.php?taxonomy=user_type');
		add_submenu_page('assignment-desk', 'User Roles', 'User Roles', 'manage_options', 'edit-tags.php?taxonomy=user_role');
	}
}
AssignmentDesk::on_load();

-Mike
P.S. I notice Assignment Desk the other day.  Planning to watch your progress, good luck!


From danielbachhuber at gmail.com  Sun Aug  1 02:07:53 2010
From: danielbachhuber at gmail.com (Daniel Bachhuber)
Date: Sat, 31 Jul 2010 22:07:53 -0400
Subject: [wp-hackers] Adding custom taxonomies as submenus to custom
	admin top-level menu
In-Reply-To: <5A1E1A7D-3229-4AB1-846E-10302B9F0B2F@newclarity.net>
References: <281411A0-1D66-4991-9F82-FB6B205EAA4F@gmail.com>
	<127EB5FF-E3AD-4CD5-AD4D-C90B96A40A36@newclarity.net>
	<348A2080-7955-4790-A69B-1118324BF723@gmail.com>
	<9EEB9CEA-04AC-4B86-9B73-5026511E5BF4@cefm.ca>
	<2BF0CD00-3521-41B6-9384-DC0DD8E85BE2@gmail.com>
	<5A1E1A7D-3229-4AB1-846E-10302B9F0B2F@newclarity.net>
Message-ID: <8E3F7F40-9455-4E16-95C5-3C1BDAFCAB07@gmail.com>

Awesome, that was exactly it:

http://plugins.trac.wordpress.org/changeset/270140/assignment-desk

I think I was initially sent off track because I forgot user  
permissions and then it went downhill from there.

Thanks again,

Daniel

On Jul 31, 2010, at 9:48 PM, Mike Schinkel wrote:

> On Jul 31, 2010, at 9:21 PM, Daniel Bachhuber wrote:
>> Here's what I ended up doing:
>>
>> http://plugins.trac.wordpress.org/changeset/270119/assignment-desk
>>
>> It's not ideal that the menu items don't show up under our custom  
>> menu but this is functional enough for the time being (especially  
>> because I'll need to do a bit more hacking to get taxonomies to  
>> work with Users).
>>
>> Thanks for your help,
>>
>
> Daniel
>
> Try this (integrated into your code, of course):
>
> class AssignmentDesk {
> 	static function on_load() {
> 		add_action('admin_action_assignment-desk',array(__CLASS__,  
> 'general_settings'));
> 		add_action('admin_menu', array(__CLASS__,'admin_menu'));
> 	}
> 	function general_settings() {
> 		echo 'Do your settings here';
> 	}
> 	static function admin_menu() {
> 		add_menu_page('Assignment Desk', 'Assignment  
> Desk','manage_options','assignment-desk',array(__CLASS__,  
> 'general_settings'));
> 		add_submenu_page('assignment-desk', 'Pitch Statuses', 'Pitch  
> Statuses', 'manage_options', 'edit-tags.php?taxonomy=pitch_status');
> 		add_submenu_page('assignment-desk', 'User Types', 'User Types',  
> 'manage_options', 'edit-tags.php?taxonomy=user_type');
> 		add_submenu_page('assignment-desk', 'User Roles', 'User Roles',  
> 'manage_options', 'edit-tags.php?taxonomy=user_role');
> 	}
> }
> AssignmentDesk::on_load();
>
> -Mike
> P.S. I notice Assignment Desk the other day.  Planning to watch your  
> progress, good luck!
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

--
Daniel Bachhuber
www.danielbachhuber.com
danielbachhuber at gmail.com
cell: +1 971 998 5407
aim/skype/twitter: danielbachhuber


From sbressler at gmail.com  Sun Aug  1 02:46:48 2010
From: sbressler at gmail.com (Scott Bressler)
Date: Sat, 31 Jul 2010 19:46:48 -0700
Subject: [wp-hackers] Customizing the view of custom taxonomies
Message-ID: <AANLkTik_cUCdkG6JXsG6yNAmdv4Jz1c7v+ei=GJhOW+8@mail.gmail.com>

How much can the view for adding and editing custom taxonomies be
customized? I want to customize the display to show a dropdown of datetime,
plaintext, location, or WP user, and serialize this information into the
description field for the term. Can this be done with the custom taxonomy
API and ability to customize its UI, or do I need to bake my own UI entirely
from scratch?

Thanks!

-Scott

From scribu at gmail.com  Sun Aug  1 03:11:07 2010
From: scribu at gmail.com (scribu)
Date: Sun, 1 Aug 2010 06:11:07 +0300
Subject: [wp-hackers] Customizing the view of custom taxonomies
In-Reply-To: <AANLkTik_cUCdkG6JXsG6yNAmdv4Jz1c7v+ei=GJhOW+8@mail.gmail.com>
References: <AANLkTik_cUCdkG6JXsG6yNAmdv4Jz1c7v+ei=GJhOW+8@mail.gmail.com>
Message-ID: <AANLkTimlZOgXkQIPADLcOtmNJywlJd5GImfxuEGD88QE@mail.gmail.com>

On Sun, Aug 1, 2010 at 5:46 AM, Scott Bressler <sbressler at gmail.com> wrote:

> How much can the view for adding and editing custom taxonomies be
> customized? I want to customize the display to show a dropdown of datetime,
> plaintext, location, or WP user, and serialize this information into the
> description field for the term. Can this be done with the custom taxonomy
> API and ability to customize its UI, or do I need to bake my own UI
> entirely
> from scratch?
>

You will have to make a new metabox for your custom taxonomy.

There are currently several great plugins that allow you to customize the UI
for custom fields.

A long term solution would be to take one of those plugins and adapt it to
work with custom taxonomies instead.


-- 
http://scribu.net

From joelfisher at gmail.com  Sun Aug  1 03:28:18 2010
From: joelfisher at gmail.com (Joel Fisher)
Date: Sat, 31 Jul 2010 23:28:18 -0400
Subject: [wp-hackers] Customizing the view of custom taxonomies
In-Reply-To: <AANLkTimlZOgXkQIPADLcOtmNJywlJd5GImfxuEGD88QE@mail.gmail.com>
References: <AANLkTik_cUCdkG6JXsG6yNAmdv4Jz1c7v+ei=GJhOW+8@mail.gmail.com>
	<AANLkTimlZOgXkQIPADLcOtmNJywlJd5GImfxuEGD88QE@mail.gmail.com>
Message-ID: <AANLkTinGST6=tK-9w8p7aym9ZLtTiB50KZVuTmdihtyM@mail.gmail.com>

Magic Fields is a good one to look into.


joel.fisher
www.flushinc.com

Linkedin: http://www.linkedin.com/in/jfisher
Follow: www.twitter.com/joelmoney




On Sat, Jul 31, 2010 at 11:11 PM, scribu <scribu at gmail.com> wrote:
> On Sun, Aug 1, 2010 at 5:46 AM, Scott Bressler <sbressler at gmail.com> wrote:
>
>> How much can the view for adding and editing custom taxonomies be
>> customized? I want to customize the display to show a dropdown of datetime,
>> plaintext, location, or WP user, and serialize this information into the
>> description field for the term. Can this be done with the custom taxonomy
>> API and ability to customize its UI, or do I need to bake my own UI
>> entirely
>> from scratch?
>>
>
> You will have to make a new metabox for your custom taxonomy.
>
> There are currently several great plugins that allow you to customize the UI
> for custom fields.
>
> A long term solution would be to take one of those plugins and adapt it to
> work with custom taxonomies instead.
>
>
> --
> http://scribu.net
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From r at schestowitz.com  Sun Aug  1 05:43:24 2010
From: r at schestowitz.com (Roy Schestowitz)
Date: Sun, 01 Aug 2010 06:43:24 +0100
Subject: [wp-hackers] WP-Hackers Stats for July 2010
Message-ID: <4C55097C.6020807@schestowitz.com>

  -  Times are Greenwich Mean Time (GMT) +0:00

  -  Statistics span a period of one month

  -  Subject line formatted consistently "WP-Hackers Stats for <MONTH>
<YEAR>"

  -  Killfile <subject contains "WP-Hackers Stats for "> if uninterested
____________________________________________________________


Stats for wp-hackers
~~~~~~~~~~~~~~~~~~~~
***** People who have written most messages:
+----+-----Author-----------------------------------+--Msg-+-Percent-+
|  1 | mikeschinkel newclarity.net                  |   94 | 11.11 % |
|  2 | wp andrewnacin.com                           |   51 |  6.03 % |
|  3 | otto ottodestruct.com                        |   33 |  3.90 % |
|  4 | m mullenweg.com                              |   24 |  2.84 % |
|  5 | Gavin.Pearce 3seven9.com                     |   24 |  2.84 % |
|  6 | scribu gmail.com                             |   21 |  2.48 % |
|  7 | jimmy.roy gmail.com                          |   20 |  2.36 % |
|  8 | KrisY tbs.uk.com                             |   18 |  2.13 % |
|  9 | lox.dev knc.nc                               |   17 |  2.01 % |
| 10 | ashishsainiashfame gmail.com                 |   17 |  2.01 % |
| 11 | peter.westwood ftwr.co.uk                    |   17 |  2.01 % |
| 12 | frank bueltge.de                             |   14 |  1.65 % |
| 13 | johnbillion+wp gmail.com                     |   14 |  1.65 % |
| 14 | mda blogwaffe.com                            |   13 |  1.54 % |
| 15 | mccormicky gmail.com                         |   12 |  1.42 % |
| 16 | eric eamann.com                              |   12 |  1.42 % |
| 17 | wp-hackers striderweb.com                    |   12 |  1.42 % |
| 18 | paul codehooligans.com                       |   11 |  1.30 % |
| 19 | cross thisismyurl.com                        |   11 |  1.30 % |
| 20 | bulk thecodecave.com                         |   10 |  1.18 % |
| 21 | 24-7 gmx.net                                 |   10 |  1.18 % |
| 22 | rbilesky gmail.com                           |   10 |  1.18 % |
| 23 | harry thedextrousweb.com                     |    9 |  1.06 % |
| 24 | jbloch olympianetworks.com                   |    8 |  0.95 % |
| 25 | mailapera gmail.com                          |    8 |  0.95 % |
+----+----------------------------------------------+------+---------+
|    | other                                        |  356 | 42.08 % |
+----+----------------------------------------------+------+---------+

***** Best authors, by total size of their messages (w/o quoting):
+----+-----Author-------------------------------------------+-KBytes-+
|  1 | mikeschinkel newclarity.net                          |   87.0 |
|  2 | frank bueltge.de                                     |   70.6 |
|  3 | eric eamann.com                                      |   64.9 |
|  4 | Gavin.Pearce 3seven9.com                             |   43.5 |
|  5 | wp andrewnacin.com                                   |   34.6 |
|  6 | KrisY tbs.uk.com                                     |   32.8 |
|  7 | wordpress santosj.name                               |   24.0 |
|  8 | otto ottodestruct.com                                |   22.6 |
|  9 | m mullenweg.com                                      |   18.2 |
| 10 | angelia 10sexyapples.com                             |   15.7 |
| 11 | lox.dev knc.nc                                       |   15.3 |
| 12 | scribu gmail.com                                     |   14.5 |
| 13 | harper.shelby parivedasolutions.com                  |   14.1 |
| 14 | jimmy.roy gmail.com                                  |   14.0 |
| 15 | peter.westwood ftwr.co.uk                            |   13.5 |
| 16 | wp-hackers striderweb.com                            |   12.9 |
| 17 | chip chipbennett.net                                 |   12.7 |
| 18 | mda blogwaffe.com                                    |   12.4 |
| 19 | abraoximenes yahoo.com                               |   12.0 |
| 20 | wordpress dd32.id.au                                 |   10.9 |
| 21 | paul codehooligans.com                               |   10.9 |
| 22 | ashishsainiashfame gmail.com                         |   10.0 |
| 23 | 24-7 gmx.net                                         |   10.0 |
| 24 | bulk thecodecave.com                                 |    9.9 |
| 25 | jer simianuprising.com                               |    9.6 |
+----+------------------------------------------------------+--------+

***** Best authors, by average size of their message (w/o quoting):
+----+-----Author--------------------------------------------+-bytes-+
|  1 | abraoximenes yahoo.com                                | 12315 |
|  2 | wordpress web-warlocks.net                            |  6930 |
|  3 | eric eamann.com                                       |  5541 |
|  4 | frank bueltge.de                                      |  5164 |
|  5 | jayminkapish inbox.com                                |  4715 |
|  6 | jpotkanski tribune.com                                |  3572 |
|  7 | aizat.faiz gmail.com                                  |  3106 |
|  8 | wordpress santosj.name                                |  3069 |
|  9 | carlroett gmail.com                                   |  2461 |
| 10 | bradw illiams.com                                     |  2414 |
| 11 | bernard.d.tremblay gmail.com                          |  2364 |
| 12 | dan phiffer.org                                       |  2317 |
| 13 | angelia 10sexyapples.com                              |  2293 |
| 14 | mmuro advance.ua.edu                                  |  2254 |
| 15 | listswphackers mist.org.uk                            |  2245 |
| 16 | deadowlsurvivor gmail.com                             |  2189 |
| 17 | harper.shelby parivedasolutions.com                   |  2061 |
| 18 | markjaquith gmail.com                                 |  1955 |
| 19 | umassthrower gmail.com                                |  1890 |
| 20 | KrisY tbs.uk.com                                      |  1863 |
| 21 | chip chipbennett.net                                  |  1856 |
| 22 | Gavin.Pearce 3seven9.com                              |  1855 |
| 23 | ash thinkinginvain.com                                |  1851 |
| 24 | kikizas gmail.com                                     |  1765 |
| 25 | jasperfrumau gmail.com                                |  1724 |
+----+-------------------------------------------------------+-------+

***** Table showing the most successful subjects:
+----+----Subject-----------------------------------+--Msg-+-Percent-+
|  1 | [wp-hackers] Putting the P in WordPress      |  149 | 17.61 % |
|  2 | [wp-hackers] Custom Post Types and pending i |   44 |  5.20 % |
|  3 | [wp-hackers] Custom Post Type in Admin,      |   35 |  4.14 % |
|  4 | [wp-hackers] Rename wp-admin problems        |   22 |  2.60 % |
|  5 | [wp-hackers] Partial admin capabilities      |   22 |  2.60 % |
|  6 | [wp-hackers] pre_get_posts problem           |   15 |  1.77 % |
|  7 | [wp-hackers] Home redirects to new page on W |   14 |  1.65 % |
|  8 | [wp-hackers] PHP 5.2 that WordPress 3.2 requ |   13 |  1.54 % |
|  9 | [wp-hackers] any way to clean after theme wh |   13 |  1.54 % |
| 10 | [wp-hackers] Best practices for plugin with  |   11 |  1.30 % |
| 11 | [wp-hackers] Controller Implementation       |   10 |  1.18 % |
| 12 | [wp-hackers] Removing WordPress Multisite da |   10 |  1.18 % |
| 13 | [wp-hackers] Accessing a plugins function fr |   10 |  1.18 % |
| 14 | [wp-hackers] Checking if a plugin exists     |   10 |  1.18 % |
| 15 | [wp-hackers] Skip Main Query                 |   10 |  1.18 % |
| 16 | [wp-hackers] Testing for PHP 5 before activa |    9 |  1.06 % |
| 17 | [wp-hackers] Best way to kick off actual wor |    9 |  1.06 % |
| 18 | [wp-hackers] How many plugins can a WP insta |    9 |  1.06 % |
| 19 | [wp-hackers] Select pages's associated menu  |    9 |  1.06 % |
| 20 | [wp-hackers] Clearing Feed Cache?            |    8 |  0.95 % |
| 21 | [wp-hackers] Adding field(s) before Title an |    8 |  0.95 % |
| 22 | [wp-hackers] DEBUG config and blocking notic |    8 |  0.95 % |
| 23 | [wp-hackers] Missed schedule - WP Bug        |    8 |  0.95 % |
| 24 | [wp-hackers] Memory spike in comments_templa |    8 |  0.95 % |
| 25 | [wp-hackers] Filtering Themes visible for a  |    8 |  0.95 % |
+----+----------------------------------------------+------+---------+
|    | other                                        |  374 | 44.21 % |
+----+----------------------------------------------+------+---------+

***** Most used email clients:
+----+----Mailer------------------------------------+--Msg-+-Percent-+
|  1 | Google Mail/Other                            |  475 | 56.15 % |
|  2 | Apple Mail (2.1081)                          |  161 | 19.03 % |
|  3 | Mozilla/5.x                                  |   98 | 11.58 % |
|  4 | Microsoft Office Outlook 12.0                |   25 |  2.96 % |
|  5 | Open-Xchange Mailer v6.14.0-Rev24            |   12 |  1.42 % |
|  6 | Zimbra 6.0.6_GA_2332.RHEL4 (MobileSync - App |   11 |  1.30 % |
|  7 | G2/1.0                                       |   10 |  1.18 % |
|  8 | iPhone Mail (8A293)                          |    8 |  0.95 % |
|  9 | Mutt                                         |    7 |  0.83 % |
| 10 | Opera Mail/10.70 (Win32)                     |    7 |  0.83 % |
| 11 | KMail                                        |    6 |  0.71 % |
| 12 | iPod Mail (8A293)                            |    4 |  0.47 % |
| 13 | Microsoft Windows Live Mail 14.0.8117.416    |    4 |  0.47 % |
| 14 | Thunderbird 2.0.0.24 (Windows/20100228)      |    3 |  0.35 % |
| 15 | Microsoft Outlook 14.0                       |    2 |  0.24 % |
| 16 | SquirrelMail/1.4.20                          |    2 |  0.24 % |
| 17 | Opera Mail/10.60 (Win32)                     |    2 |  0.24 % |
| 18 | iPhone Mail (8A306)                          |    2 |  0.24 % |
| 19 | Opera Mail/10.54 (Win32)                     |    1 |  0.12 % |
| 20 | Turnpike/6.07-M (<$nKGt$HzkI$0+Fx9vpNTXn8FVD |    1 |  0.12 % |
| 21 | YahooMailClassic/11.2.4 YahooMailWebService/ |    1 |  0.12 % |
| 22 | Microsoft Outlook Express 6.x                |    1 |  0.12 % |
| 23 | INBOX.COM                                    |    1 |  0.12 % |
| 24 | SquirrelMail/1.4.15                          |    1 |  0.12 % |
| 25 | Apple Mail (2.936)                           |    1 |  0.12 % |
+----+----------------------------------------------+------+---------+
|    | other                                        |    0 |  0.00 % |
+----+----------------------------------------------+------+---------+

***** Table of maximal quoting:
+----+-----Author------------------------------------------+-Percent-+
|  1 | jaredwilli gmail.com                                | 91.27 % |
|  2 | aaron xavisys.com                                   | 90.95 % |
|  3 | jayarjo gmail.com                                   | 90.15 % |
|  4 | charles cefm.ca                                     | 90.05 % |
|  5 | uehlein gmail.com                                   | 85.19 % |
|  6 | banago gmail.com                                    | 81.02 % |
|  7 | navjotjsingh gmail.com                              | 78.95 % |
|  8 | liste srpski.biz                                    | 78.09 % |
|  9 | jbloch olympianetworks.com                          | 77.47 % |
| 10 | jimmy.roy gmail.com                                 | 77.40 % |
| 11 | thenbrent gmail.com                                 | 76.12 % |
| 12 | andre pixelplexus.co.za                             | 75.69 % |
| 13 | mailapera gmail.com                                 | 75.29 % |
| 14 | aaron jorb.in                                       | 74.93 % |
| 15 | mitch studionashvegas.com                           | 74.49 % |
| 16 | william.canino googlemail.com                       | 74.43 % |
| 17 | mccormicky gmail.com                                | 74.00 % |
| 18 | joshua.sibelman gmail.com                           | 73.28 % |
| 19 | theodor_ramisch hotmail.com                         | 68.21 % |
| 20 | rbilesky gmail.com                                  | 67.58 % |
| 21 | dan phiffer.org                                     | 66.82 % |
| 22 | me piyushmishra.com                                 | 65.86 % |
| 23 | harry thedextrousweb.com                            | 65.45 % |
| 24 | zamoose gmail.com                                   | 64.40 % |
| 25 | mikeschinkel newclarity.net                         | 63.93 % |
+----+-----------------------------------------------------+---------+
|    | average                                             | 46.05 % |
+----+-----------------------------------------------------+---------+

***** Graph showing number of messages written during hours of day:

100% -------------------------------------#----------- - 69
 90% -----------------------#-------------#----------- msgs
 80% -----------------------#---#---------#-----------
 70% ---------------------#-#---#-----#-#-#-----------
 60% -------------------#-#-#-#-#-#-#-#-#-#-#---------
 50% -------------------#-#-#-#-#-#-#-#-#-#-#-#-#-----
 40% -#-----------------#-#-#-#-#-#-#-#-#-#-#-#-#---#-
 30% -#-#---------------#-#-#-#-#-#-#-#-#-#-#-#-#---#-
 20% -#-#---------#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-
 10% -#-#-#-#---#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-
      * * * * * * * * * * * * * * * * * * * * * * * *
hour  0         5           11          17          23


***** Graph showing number of messages written during days of month:

100% -----------#--------------------------------------------------- - 89
 90% -----------#--------------------------------------------------- msgs
 80% -----------#---------------------------------------------------
 70% -----------#---------------------------------------------------
 60% -----------#-#-------------------------------------#-----------
 50% -----------#-#---------#-----------------#---#-----#-----------
 40% ---------#-#-#---------#-----------------#---#-----#-----------
 30% ---------#-#-#---#-----#---------------#-#---#-----#-#-#-------
 20% -#-#-#---#-#-#-#-#-----#-#---#---------#-#---#---#-#-#-#---#-#-
 10% -#-#-#---#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#---#-#-#-#-#-#-#-#-#-
      * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
 day  1         6           12          18          24            31


***** Graph showing number of messages written during days of week:

100% -----#----------------------- - 169
 90% -#---#----------------------- msgs
 80% -#---#---#-------#-----------
 70% -#---#---#-------#-----------
 60% -#---#---#-------#-----------
 50% -#---#---#---#---#---#-------
 40% -#---#---#---#---#---#-------
 30% -#---#---#---#---#---#-------
 20% -#---#---#---#---#---#---#---
 10% -#---#---#---#---#---#---#---
      *   *   *   *   *   *   *
     Mon Tue Wed Thu Fri Sat Sun


***** Maximal quoting:
      Author     : mikeschinkel newclarity.net
      Subject    : [wp-hackers] wp-hackers Digest, Vol 66, Issue 101
      Date       : Mon, 26 Jul 2010 17:26:10 -0400
      Quote ratio: 97.31% / 15191 bytes

***** Longest message:
      Author     : jaredwilli gmail.com
      Subject    : [wp-hackers] wp-hackers Digest, Vol 66, Issue 87
      Date       : Fri, 23 Jul 2010 07:40:42 -0400
      Size       : 23794 bytes

***** Most successful subject:
      Subject    : [wp-hackers] Putting the P in WordPress
      No. of msgs: 149
      Total size : 303102 bytes

***** Final summary:
      Total number of messages:             846
      Total number of different authors:    151
      Total number of different subjects:   152
      Total size of messages (w/o headers): 1737194 bytes
      Average size of a message:            2053 bytes

***** Generated by MailListStat v1.3, (C) 2001-2003 <marki (at) nexin.sk>
***** See http://freshmeat.net/projects/mls for details...

DISCLAIMER: Stats automatically produced. Remember that stats are often
meaningless and deceiving.

From sbressler at gmail.com  Sun Aug  1 09:13:12 2010
From: sbressler at gmail.com (Scott Bressler)
Date: Sun, 1 Aug 2010 02:13:12 -0700
Subject: [wp-hackers] Customizing the view of custom taxonomies
In-Reply-To: <AANLkTinGST6=tK-9w8p7aym9ZLtTiB50KZVuTmdihtyM@mail.gmail.com>
References: <AANLkTik_cUCdkG6JXsG6yNAmdv4Jz1c7v+ei=GJhOW+8@mail.gmail.com>
	<AANLkTimlZOgXkQIPADLcOtmNJywlJd5GImfxuEGD88QE@mail.gmail.com>
	<AANLkTinGST6=tK-9w8p7aym9ZLtTiB50KZVuTmdihtyM@mail.gmail.com>
Message-ID: <AANLkTin9wziSL10WvTjU9Tks7=X+mgpJScwPp+r3Orme@mail.gmail.com>

Thanks for the responses. I know that I will need to create my own metabox
to display the terms that appear in a post on the post page. However, I also
need to customized way of editing the terms available in the taxonomy
itself. As I mentioned before, I need to only show a drop-down of choices
for the "type" of the term which I will then place (behind the scenes) into
the description field for the term. I also don't need to prompt for a slug.
And there are other customizations I will probably do, as well.

So what I'm asking is if it's possible to edit and customize the UI for a
custom taxonomy or should I be avoiding taxonomies altogether for this
plugin?

Thanks,
Scott

On Sat, Jul 31, 2010 at 8:28 PM, Joel Fisher <joelfisher at gmail.com> wrote:

> Magic Fields is a good one to look into.
>
>
> joel.fisher
> www.flushinc.com
>
> Linkedin: http://www.linkedin.com/in/jfisher
> Follow: www.twitter.com/joelmoney
>
>
>
>
> On Sat, Jul 31, 2010 at 11:11 PM, scribu <scribu at gmail.com> wrote:
> > On Sun, Aug 1, 2010 at 5:46 AM, Scott Bressler <sbressler at gmail.com>
> wrote:
> >
> >> How much can the view for adding and editing custom taxonomies be
> >> customized? I want to customize the display to show a dropdown of
> datetime,
> >> plaintext, location, or WP user, and serialize this information into the
> >> description field for the term. Can this be done with the custom
> taxonomy
> >> API and ability to customize its UI, or do I need to bake my own UI
> >> entirely
> >> from scratch?
> >>
> >
> > You will have to make a new metabox for your custom taxonomy.
> >
> > There are currently several great plugins that allow you to customize the
> UI
> > for custom fields.
> >
> > A long term solution would be to take one of those plugins and adapt it
> to
> > work with custom taxonomies instead.
> >
> >
> > --
> > http://scribu.net
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers at lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> >
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From mikeschinkel at newclarity.net  Sun Aug  1 09:26:12 2010
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Sun, 1 Aug 2010 05:26:12 -0400
Subject: [wp-hackers] Customizing the view of custom taxonomies
In-Reply-To: <AANLkTin9wziSL10WvTjU9Tks7=X+mgpJScwPp+r3Orme@mail.gmail.com>
References: <AANLkTik_cUCdkG6JXsG6yNAmdv4Jz1c7v+ei=GJhOW+8@mail.gmail.com>
	<AANLkTimlZOgXkQIPADLcOtmNJywlJd5GImfxuEGD88QE@mail.gmail.com>
	<AANLkTinGST6=tK-9w8p7aym9ZLtTiB50KZVuTmdihtyM@mail.gmail.com>
	<AANLkTin9wziSL10WvTjU9Tks7=X+mgpJScwPp+r3Orme@mail.gmail.com>
Message-ID: <DCA59451-6C27-46B8-80B6-3F2AE64DF5D2@newclarity.net>

On Aug 1, 2010, at 5:13 AM, Scott Bressler wrote:
> Thanks for the responses. I know that I will need to create my own metabox
> to display the terms that appear in a post on the post page. However, I also
> need to customized way of editing the terms available in the taxonomy
> itself. As I mentioned before, I need to only show a drop-down of choices
> for the "type" of the term which I will then place (behind the scenes) into
> the description field for the term. I also don't need to prompt for a slug.
> And there are other customizations I will probably do, as well.

Can you give some concrete use-case examples to help (at least me) better understand what you are trying to accomplish?  As is, it's still unclear to me.  

-Mike

From wp at andrewnacin.com  Sun Aug  1 09:31:39 2010
From: wp at andrewnacin.com (Andrew Nacin)
Date: Sun, 1 Aug 2010 05:31:39 -0400
Subject: [wp-hackers] Customizing the view of custom taxonomies
In-Reply-To: <AANLkTin9wziSL10WvTjU9Tks7=X+mgpJScwPp+r3Orme@mail.gmail.com>
References: <AANLkTik_cUCdkG6JXsG6yNAmdv4Jz1c7v+ei=GJhOW+8@mail.gmail.com> 
	<AANLkTimlZOgXkQIPADLcOtmNJywlJd5GImfxuEGD88QE@mail.gmail.com> 
	<AANLkTinGST6=tK-9w8p7aym9ZLtTiB50KZVuTmdihtyM@mail.gmail.com> 
	<AANLkTin9wziSL10WvTjU9Tks7=X+mgpJScwPp+r3Orme@mail.gmail.com>
Message-ID: <AANLkTinSEBVAEvwaAeWBkfsTc=nkC_kO89sGY1u7NV8e@mail.gmail.com>

On Sun, Aug 1, 2010 at 5:13 AM, Scott Bressler <sbressler at gmail.com> wrote:

> So what I'm asking is if it's possible to edit and customize the UI for a
> custom taxonomy or should I be avoiding taxonomies altogether for this
> plugin?
>

Absolutely utilize taxonomies if they work as a storage schema and the API
suits what you're doing. If the UI requires some tweaking, that's quite easy
to do; WordPress allows unlimited flexibility there. As you mentioned, you
can use your own meta box callback (and the handling of the posted data
server-side), but you can also disable, customize, or entirely replace
edit-tags.php, or really whatever else you need to do.

From sbressler at gmail.com  Sun Aug  1 09:39:12 2010
From: sbressler at gmail.com (Scott Bressler)
Date: Sun, 1 Aug 2010 02:39:12 -0700
Subject: [wp-hackers] Customizing the view of custom taxonomies
In-Reply-To: <DCA59451-6C27-46B8-80B6-3F2AE64DF5D2@newclarity.net>
References: <AANLkTik_cUCdkG6JXsG6yNAmdv4Jz1c7v+ei=GJhOW+8@mail.gmail.com>
	<AANLkTimlZOgXkQIPADLcOtmNJywlJd5GImfxuEGD88QE@mail.gmail.com>
	<AANLkTinGST6=tK-9w8p7aym9ZLtTiB50KZVuTmdihtyM@mail.gmail.com>
	<AANLkTin9wziSL10WvTjU9Tks7=X+mgpJScwPp+r3Orme@mail.gmail.com>
	<DCA59451-6C27-46B8-80B6-3F2AE64DF5D2@newclarity.net>
Message-ID: <AANLkTik5YoqmLo4ds1K9yDcdeZina7ddMjk8GJdPEW6G@mail.gmail.com>

I'm allowing users to attach their own custom metadata to posts, but this
metadata is restricted to the terms added to the taxonomy I'm registering.
For instance, a user can add a "due date" term to the taxonomy which is of
type "date." Then on the post edit page I will allow them to select a date
that will be saved I assume into postmeta. Separately, a user could add a
"copy editor" term to the taxonomy of type "user" (of the blog). On the post
edit page, a drop-down will be displayed allowing users to select which user
of the blog is the assigned copy editor of the post.

Does that make more sense now?

Thinking more about this, it seems that taxonomies and terms don't store
sufficient data, and I would still need to store information into postmeta.
Should I still be leveraging terms and taxonomies, or should I just
serialize the available metadata into a blog option field?

Thanks,
Scott

On Sun, Aug 1, 2010 at 2:26 AM, Mike Schinkel
<mikeschinkel at newclarity.net>wrote:

> On Aug 1, 2010, at 5:13 AM, Scott Bressler wrote:
> > Thanks for the responses. I know that I will need to create my own
> metabox
> > to display the terms that appear in a post on the post page. However, I
> also
> > need to customized way of editing the terms available in the taxonomy
> > itself. As I mentioned before, I need to only show a drop-down of choices
> > for the "type" of the term which I will then place (behind the scenes)
> into
> > the description field for the term. I also don't need to prompt for a
> slug.
> > And there are other customizations I will probably do, as well.
>
> Can you give some concrete use-case examples to help (at least me) better
> understand what you are trying to accomplish?  As is, it's still unclear to
> me.
>
> -Mike
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From mikeschinkel at newclarity.net  Sun Aug  1 09:50:05 2010
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Sun, 1 Aug 2010 05:50:05 -0400
Subject: [wp-hackers] Customizing the view of custom taxonomies
In-Reply-To: <AANLkTik5YoqmLo4ds1K9yDcdeZina7ddMjk8GJdPEW6G@mail.gmail.com>
References: <AANLkTik_cUCdkG6JXsG6yNAmdv4Jz1c7v+ei=GJhOW+8@mail.gmail.com>
	<AANLkTimlZOgXkQIPADLcOtmNJywlJd5GImfxuEGD88QE@mail.gmail.com>
	<AANLkTinGST6=tK-9w8p7aym9ZLtTiB50KZVuTmdihtyM@mail.gmail.com>
	<AANLkTin9wziSL10WvTjU9Tks7=X+mgpJScwPp+r3Orme@mail.gmail.com>
	<DCA59451-6C27-46B8-80B6-3F2AE64DF5D2@newclarity.net>
	<AANLkTik5YoqmLo4ds1K9yDcdeZina7ddMjk8GJdPEW6G@mail.gmail.com>
Message-ID: <34E8AF80-1E96-4AEF-B9C8-94CC29EC9F59@newclarity.net>

On Aug 1, 2010, at 5:39 AM, Scott Bressler wrote:
> I'm allowing users to attach their own custom metadata to posts, but this
> metadata is restricted to the terms added to the taxonomy I'm registering.
> For instance, a user can add a "due date" term to the taxonomy which is of
> type "date." Then on the post edit page I will allow them to select a date
> that will be saved I assume into postmeta. Separately, a user could add a
> "copy editor" term to the taxonomy of type "user" (of the blog). On the post
> edit page, a drop-down will be displayed allowing users to select which user
> of the blog is the assigned copy editor of the post.
> 
> Does that make more sense now?
> 
> Thinking more about this, it seems that taxonomies and terms don't store
> sufficient data, and I would still need to store information into postmeta.
> Should I still be leveraging terms and taxonomies, or should I just
> serialize the available metadata into a blog option field?

It sounds like you might want to use a non-hierarchical taxonomy which will behave like free-form tags to identify the available terms, and then use $wp_postmeta->meta_key and $wp_postmeta->meta_key to store the terms and their values on a per-post basis, right?  From a storage perspective that seems like a pretty workable solution based on your description.

However it's not yet obvious to me what an ideal UI would be; have you wireframed it/done a mockup? (Balsamiq works nice for that.) I think getting the UX design "right" may be harder than getting a plugin for WordPress to render it.  

-Mike

From sbressler at gmail.com  Sun Aug  1 09:57:33 2010
From: sbressler at gmail.com (Scott Bressler)
Date: Sun, 1 Aug 2010 02:57:33 -0700
Subject: [wp-hackers] Customizing the view of custom taxonomies
In-Reply-To: <34E8AF80-1E96-4AEF-B9C8-94CC29EC9F59@newclarity.net>
References: <AANLkTik_cUCdkG6JXsG6yNAmdv4Jz1c7v+ei=GJhOW+8@mail.gmail.com>
	<AANLkTimlZOgXkQIPADLcOtmNJywlJd5GImfxuEGD88QE@mail.gmail.com>
	<AANLkTinGST6=tK-9w8p7aym9ZLtTiB50KZVuTmdihtyM@mail.gmail.com>
	<AANLkTin9wziSL10WvTjU9Tks7=X+mgpJScwPp+r3Orme@mail.gmail.com>
	<DCA59451-6C27-46B8-80B6-3F2AE64DF5D2@newclarity.net>
	<AANLkTik5YoqmLo4ds1K9yDcdeZina7ddMjk8GJdPEW6G@mail.gmail.com>
	<34E8AF80-1E96-4AEF-B9C8-94CC29EC9F59@newclarity.net>
Message-ID: <AANLkTimRbNUOuNhQ_FyA2_Y020Bb1Z-GuOkp1G7aokKm@mail.gmail.com>

Haven't mocked it up yet - that would probably be a good idea. So basically
I would not be making any use of the wp_term_relationships table, right?

So now how do I edit the default taxonomy edit screen to show a drop-down
instead of (or in addition to) a description?

From mikeschinkel at newclarity.net  Sun Aug  1 10:25:23 2010
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Sun, 1 Aug 2010 06:25:23 -0400
Subject: [wp-hackers] Customizing the view of custom taxonomies
In-Reply-To: <AANLkTimRbNUOuNhQ_FyA2_Y020Bb1Z-GuOkp1G7aokKm@mail.gmail.com>
References: <AANLkTik_cUCdkG6JXsG6yNAmdv4Jz1c7v+ei=GJhOW+8@mail.gmail.com>
	<AANLkTimlZOgXkQIPADLcOtmNJywlJd5GImfxuEGD88QE@mail.gmail.com>
	<AANLkTinGST6=tK-9w8p7aym9ZLtTiB50KZVuTmdihtyM@mail.gmail.com>
	<AANLkTin9wziSL10WvTjU9Tks7=X+mgpJScwPp+r3Orme@mail.gmail.com>
	<DCA59451-6C27-46B8-80B6-3F2AE64DF5D2@newclarity.net>
	<AANLkTik5YoqmLo4ds1K9yDcdeZina7ddMjk8GJdPEW6G@mail.gmail.com>
	<34E8AF80-1E96-4AEF-B9C8-94CC29EC9F59@newclarity.net>
	<AANLkTimRbNUOuNhQ_FyA2_Y020Bb1Z-GuOkp1G7aokKm@mail.gmail.com>
Message-ID: <0E9294E8-C52A-4A92-AD12-D3E98F68CB99@newclarity.net>

On Aug 1, 2010, at 5:57 AM, Scott Bressler wrote:
> Haven't mocked it up yet - that would probably be a good idea. So basically
> I would not be making any use of the wp_term_relationships table, right?

Not unless there was benefit to maintaining redundant information (there might be, but if not it's easier to not have to synchronize it.)  

I try to this of WordPress' features as a toolkit, usually using them as typically used because they fit broad use-cases, but deviating for specialized use-cases. The good news is WordPress provides most of the basic tools you'll ever need. Plugin and core developers just keep building it ever higher.

> So now how do I edit the default taxonomy edit screen to show a drop-down
> instead of (or in addition to) a description?

I'm confused.  Wasn't the drop-down for within a metabox in a post edit screen?

-Mike

From thenbrent at gmail.com  Sun Aug  1 10:33:35 2010
From: thenbrent at gmail.com (Brent Shepherd)
Date: Sun, 1 Aug 2010 20:33:35 +1000
Subject: [wp-hackers] WP 3 Multisite List Blogs
In-Reply-To: <75142B22-ED21-46B8-811F-BE6BAA61F404@thisismyurl.com>
References: <75142B22-ED21-46B8-811F-BE6BAA61F404@thisismyurl.com>
Message-ID: <AANLkTi=i6ZRa-ZSPi+qFZmVDdzUNVr3NMs4Gwk8DNS7h@mail.gmail.com>

The obvious choice would be get_blog_list:
http://codex.wordpress.org/WPMU_Functions/get_blog_list

Though I see it's been deprecated in 3.0 with no alternative provided.



On Sat, Jul 31, 2010 at 11:48 PM, Christopher Ross <cross at thisismyurl.com>wrote:

> Hi all, is there a function to list the URL of all child blogs in a multi
> site?
>
> __
>
> Christopher Ross
>
> Toronto      1 (416) 840-5828
> Fredericton 1 (506) 474-2708
> New Orleans 1 (504) 322 3485
>
> http://christopherross.ca
> http://www.thisismyurl.com
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From peter.westwood at ftwr.co.uk  Sun Aug  1 11:08:24 2010
From: peter.westwood at ftwr.co.uk (Peter Westwood)
Date: Sun, 1 Aug 2010 12:08:24 +0100
Subject: [wp-hackers] WP 3 Multisite List Blogs
In-Reply-To: <AANLkTi=i6ZRa-ZSPi+qFZmVDdzUNVr3NMs4Gwk8DNS7h@mail.gmail.com>
References: <75142B22-ED21-46B8-811F-BE6BAA61F404@thisismyurl.com>
	<AANLkTi=i6ZRa-ZSPi+qFZmVDdzUNVr3NMs4Gwk8DNS7h@mail.gmail.com>
Message-ID: <5858DBF2-FA98-4E65-8483-DEFDB375CE0C@ftwr.co.uk>


On 1 Aug 2010, at 11:33, Brent Shepherd wrote:

> The obvious choice would be get_blog_list:
> http://codex.wordpress.org/WPMU_Functions/get_blog_list
> 
> Though I see it's been deprecated in 3.0 with no alternative provided.
> 

It was deprecated because the query is sucky on anything but a small install and you really don't want to do it on every page load where you want to display the list.

It is also not something that most sites want.

An idea solution would use a similar query to build the list and then make heavy use of caching with the result.

Depending on how often your list changes you might want it to cache for minutes or for the cache to be invalidated when someone adds/modifies a new site

Cheers
-- 
Peter Westwood
http://blog.ftwr.co.uk | http://westi.wordpress.com
C53C F8FC 8796 8508 88D6 C950 54F4 5DCD A834 01C5


From dennen at gmail.com  Sun Aug  1 11:35:30 2010
From: dennen at gmail.com (Bill Dennen)
Date: Sun, 1 Aug 2010 07:35:30 -0400
Subject: [wp-hackers] WP 3 Multisite List Blogs
In-Reply-To: <5858DBF2-FA98-4E65-8483-DEFDB375CE0C@ftwr.co.uk>
References: <75142B22-ED21-46B8-811F-BE6BAA61F404@thisismyurl.com>
	<AANLkTi=i6ZRa-ZSPi+qFZmVDdzUNVr3NMs4Gwk8DNS7h@mail.gmail.com>
	<5858DBF2-FA98-4E65-8483-DEFDB375CE0C@ftwr.co.uk>
Message-ID: <AANLkTi=1FpkkA2SMUWQZ97f-0Xos=k8G7ZwxWrCd0Bm+@mail.gmail.com>

> It was deprecated because the query is sucky on anything but a small install and you really don't want to do it on every page load where you want to display the list.

How big is a "small install?" 100 sites? 1000 sites?

It unfortunate that this function is deprecated. This - and
switch_to_blog - seem to be obvious function for a network install.

Most large sites would be using caching solutions already for other
reasons, so these functions might not be that great of a performance
hit on those sites.

-Bill

From jayarjo at gmail.com  Sun Aug  1 11:37:37 2010
From: jayarjo at gmail.com (Davit Barbakadze)
Date: Sun, 1 Aug 2010 15:37:37 +0400
Subject: [wp-hackers]  nav menus: theme locations vs. individual menus
Message-ID: <AANLkTimrgnznc=o4bC3tCysWNN8icRq99Zjr1cuJdmgh@mail.gmail.com>

Trying out this new feature finally. However there's something I don't
quite understand. What's the point of so called Theme Locations?
Initially I thought that I can create couple of theme locations, like
footer and header and then assign multiple individual menus to each
one. Now it looks like it is one to one assignment - one menu goes to
one theme location  (do I misinterpret something here?). But if it's
one to one then what's the point of having an extra level of
granularity?

-- 
Davit Barbakadze

From wp at andrewnacin.com  Sun Aug  1 11:53:06 2010
From: wp at andrewnacin.com (Andrew Nacin)
Date: Sun, 1 Aug 2010 07:53:06 -0400
Subject: [wp-hackers] nav menus: theme locations vs. individual menus
In-Reply-To: <AANLkTimrgnznc=o4bC3tCysWNN8icRq99Zjr1cuJdmgh@mail.gmail.com>
References: <AANLkTimrgnznc=o4bC3tCysWNN8icRq99Zjr1cuJdmgh@mail.gmail.com>
Message-ID: <AANLkTimUBf1CEPUG_w2u1X7gR0ud8uiLBXsws8C9NOvy@mail.gmail.com>

On Sun, Aug 1, 2010 at 7:37 AM, Davit Barbakadze <jayarjo at gmail.com> wrote:

> Trying out this new feature finally. However there's something I don't
> quite understand. What's the point of so called Theme Locations?
> Initially I thought that I can create couple of theme locations, like
> footer and header and then assign multiple individual menus to each
> one. Now it looks like it is one to one assignment - one menu goes to
> one theme location  (do I misinterpret something here?). But if it's
> one to one then what's the point of having an extra level of
> granularity?


It's not an extra level of granularity; it's a requirement for the
workflow. Say a theme has spots for two menus. And the user wants to create
three menus. Maybe one isn't used, or maybe it is used as a widget. Which
menu goes where? What if I wanted the same menu in both the header and
footer?

We realized this after a bit of testing and experimenting with how themes
were going to use menus. Thus, we forced themes to register menu locations.
Then the user can pair menus with the location. Each location can have zero
or one menus, though menus can be used over and over.

Related ticket would be -- http://core.trac.wordpress.org/ticket/13378. The
ticket's description further describes the problem, and you can see how our
solution was developed by reading through the comments and commits.

From jaredwilli at gmail.com  Sun Aug  1 13:32:07 2010
From: jaredwilli at gmail.com (Jared Williams)
Date: Sun, 1 Aug 2010 09:32:07 -0400
Subject: [wp-hackers] creating new menus
Message-ID: <AANLkTinXOLM73M=L2DT3fnMktP7sv_c6z9kg-N6-3Vwq@mail.gmail.com>

Thanks Mike, was not apparently the nav-menus source file i looked at
before.

I managed to create menus, register locations, ect. only thing that I
couldn't managed to get working was assigning the menu locations, if empty,
the proper menu I created.

Both my menu names and locations use the same names, so I tried all kinds of
stuff to get them to mesh, but I kept getting a warning/error because of
this,     return (!empty( $locations[ $location ] )); Something about
illegal offset on empty or isset.  Returning like this is new and strange to
me haha.

   // my menus & locations = Top', 'Header', 'Footer'
    if ( has_nav_menu( $location )) {
        $locations = get_nav_menu_locations();
        return (!empty( $locations[ $location ] ));
    }

Thanks again for your help.
Jared

On Sat, Jul 31, 2010 at 1:52 AM, <wp-hackers-request at lists.automattic.com>wrote:

> Send wp-hackers mailing list submissions to
>        wp-hackers at lists.automattic.com
>
> To subscribe or unsubscribe via the World Wide Web, visit
>        http://lists.automattic.com/mailman/listinfo/wp-hackers
> or, via email, send a message with subject or body 'help' to
>        wp-hackers-request at lists.automattic.com
>
> You can reach the person managing the list at
>        wp-hackers-owner at lists.automattic.com
>
> When replying, please edit your Subject line so it is more specific
> than "Re: Contents of wp-hackers digest..."
>
>
> Today's Topics:
>
>   1. Re: how can I use the create new menu function for        making a
>      default menu (Mike Schinkel)
>   2. Re: Skip Main Query (Mike Schinkel)
>   3. Re: Skip Main Query (Michael Pretty)
>   4. Re: Skip Main Query (Peter Westwood)
>   5. Re: how can I use the create new menu function for        making a
>      default menu (Davit Barbakadze)
>
>
> ----------------------------------------------------------------------
>
> Message: 1
> Date: Fri, 30 Jul 2010 20:44:34 -0400
> From: Mike Schinkel <mikeschinkel at newclarity.net>
> Subject: Re: [wp-hackers] how can I use the create new menu function
>        for     making a default menu
> To: wp-hackers at lists.automattic.com
> Message-ID: <C424EA67-B1DA-4B5A-A216-B93CB921AAF8 at newclarity.net>
> Content-Type: text/plain; charset=us-ascii
>
> Hi Jared:
>
> Do you mean these found in /wp-includes/nav-menu.php?
>
> Create Menu:
>        $menu_id = wp_create_nav_menu( $menu_name );
>
> Create Menu Items:
>        $menu = array(
>                'menu-item-object-id' => 0,
>                'menu-item-object' => '',
>                'menu-item-parent-id' => 0,
>                'menu-item-position' => 0,
>                'menu-item-type' => 'custom',
>                'menu-item-title' => '',
>                'menu-item-url' => '',
>                'menu-item-description' => '',
>                'menu-item-attr-title' => '',
>                'menu-item-target' => '',
>                'menu-item-classes' => '',
>                'menu-item-xfn' => '',
>                'menu-item-status' => '',
>        );
>        $menu_item_db_id = wp_update_nav_menu_item( $menu_id, 0, $menu);
>
> Update Menu Items:
>        wp_update_nav_menu_item( $menu_id, $menu_item_db_id, $menu);
>
> I've used them to create menus and menu items automatically.
>
> To understand the parameters create some menus in the admin and then take a
> look at the values created for different types of menu items in wp_postmeta.
>
> Hope this helps?
>
> -Mike
>
> On Jul 30, 2010, at 8:25 PM, Jared Williams wrote:
>
> > Hi,
> > I know the menu system needs lots of work still, but I was wondering if
> > anyone knows of a way to make use of whatever function(s) the 'Create
> Menu'
> > does when you make a new custom named menu in the dashboard to make a
> > pre-made menu to go along with a registered menu location etc. This would
> be
> > nice so that when a theme were installed that has registered menus in it,
> > the menu name you specify in the code would be created upon installing,
> and
> > deleted when uninstalling a theme.
> >
> > I've searched for some kind of solution to this, and have studied the
> code
> > in nav-menus.php and other files with 3.0 source code. This is just about
> > the only thing I am unable to figure out with 3.0, at least that I have
> > tried to do so far.
> > I figured here is probably the best place to ask such a question.
> >
> > Thanks,
> >
> > Jared Williams
> > New2WP.com
> >
> >
> > On Fri, Jul 30, 2010 at 11:33 AM,
> > <wp-hackers-request at lists.automattic.com>wrote:
> >
> >> Send wp-hackers mailing list submissions to
> >>       wp-hackers at lists.automattic.com
> >>
> >> To subscribe or unsubscribe via the World Wide Web, visit
> >>       http://lists.automattic.com/mailman/listinfo/wp-hackers
> >> or, via email, send a message with subject or body 'help' to
> >>       wp-hackers-request at lists.automattic.com
> >>
> >> You can reach the person managing the list at
> >>       wp-hackers-owner at lists.automattic.com
> >>
> >> When replying, please edit your Subject line so it is more specific
> >> than "Re: Contents of wp-hackers digest..."
> >>
> >>
> >> Today's Topics:
> >>
> >>  1. Re: any way to clean after theme when it gets deleted?
> >>     (Davit Barbakadze)
> >>  2. Re: any way to clean after theme when it gets deleted?
> >>     (Ashish Saini)
> >>  3. Re: any way to clean after theme when it gets deleted?
> >>     (Andrew Nacin)
> >>  4. Re: any way to clean after theme when it gets deleted?
> >>     (Ashish Saini)
> >>  5. Re: any way to clean after theme when it gets deleted?
> >>     (Davit Barbakadze)
> >>  6. Re: any way to clean after theme when it gets deleted?
> >>     (Andrew Nacin)
> >>  7. switch_to_blog in WP3 (Bill Dennen)
> >>  8. Re: any way to clean after theme when it gets deleted?
> >>     (esmi at quirm dot net)
> >>
> >>
> >> ----------------------------------------------------------------------
> >>
> >> Message: 1
> >> Date: Fri, 30 Jul 2010 17:17:51 +0400
> >> From: Davit Barbakadze <jayarjo at gmail.com>
> >> Subject: Re: [wp-hackers] any way to clean after theme when it gets
> >>       deleted?
> >> To: wp-hackers at lists.automattic.com
> >> Message-ID:
> >>       <AANLkTikhpSNdc-VtaLnOU2py=b+90tFjpCFLZeW+ecS6 at mail.gmail.com<b%2B90tFjpCFLZeW%2BecS6 at mail.gmail.com>
> <b%2B90tFjpCFLZeW%2BecS6 at mail.gmail.com<b%252B90tFjpCFLZeW%252BecS6 at mail.gmail.com>
> >
> >>>
> >> Content-Type: text/plain; charset=ISO-8859-1
> >>
> >> It's not about switching (activate/deactivate), but deleting. It would
> >> be pretty logical to remove all the stuff that theme has created on
> >> activation.
> >>
> >> On Fri, Jul 30, 2010 at 3:45 PM, Ashish Saini
> >> <ashishsainiashfame at gmail.com> wrote:
> >>> Hi Davit,
> >>>
> >>> I think a better option would be to provide uninstall function as
> leaving
> >>> the options in the database makes sense as the user may switch back and
> >> so
> >>> it will save the pain of configuring it.
> >>>
> >>> Thanks & Regards
> >>> Ashish Saini aka Ashfame
> >>> (Deserve Before You Desire)
> >>> Homepage : http://www.ashfame.com | Blog : http://blog.ashfame.com |
> >> Twitter
> >>> : http://twitter.com/ashfame
> >>>
> >>>
> >>> On Fri, Jul 30, 2010 at 4:44 PM, <diana.j.wiadji at hotmail.com> wrote:
> >>>
> >>>> $
> >>>> ------Original Message------
> >>>> From: Davit Barbakadze
> >>>> Sender: wp-hackers-bounces at lists.automattic.com
> >>>> To: wp-hackers at lists.automattic.com
> >>>> ReplyTo: wp-hackers at lists.automattic.com
> >>>> Subject: [wp-hackers] ?any way to clean after theme when it gets
> >> deleted?
> >>>> Sent: Jul 30, 2010 18:02
> >>>>
> >>>> I think everyone uses options and maybe even tables in their themes
> >>>> nowadays. Is there any way coder can clean up after theme - delete
> >>>> options, remove tables - when it get's uninstalled. Something similar
> >>>> to what we have for plugins?
> >>>>
> >>>> --
> >>>> Davit Barbakadze
> >>>> _______________________________________________
> >>>> wp-hackers mailing list
> >>>> wp-hackers at lists.automattic.com
> >>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
> >>>>
> >>>>
> >>>>
> >>>> Sent from my BlackBerry? smartphone on 3
> >>>> _______________________________________________
> >>>> wp-hackers mailing list
> >>>> wp-hackers at lists.automattic.com
> >>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
> >>>>
> >>> _______________________________________________
> >>> wp-hackers mailing list
> >>> wp-hackers at lists.automattic.com
> >>> http://lists.automattic.com/mailman/listinfo/wp-hackers
> >>>
> >>
> >>
> >>
> >> --
> >> Davit Barbakadze
> >>
> >>
> >> ------------------------------
> >>
> >> Message: 2
> >> Date: Fri, 30 Jul 2010 18:55:18 +0530
> >> From: Ashish Saini <ashishsainiashfame at gmail.com>
> >> Subject: Re: [wp-hackers] any way to clean after theme when it gets
> >>       deleted?
> >> To: wp-hackers at lists.automattic.com
> >> Message-ID:
> >>       <AANLkTikU0qcxQMMVgRwTrNOEHjXoUO_o0r44C+=_96Z+ at mail.gmail.com<96Z%2B at mail.gmail.com>
> <96Z%2B at mail.gmail.com <96Z%252B at mail.gmail.com>>
> >>>
> >> Content-Type: text/plain; charset=ISO-8859-1
> >>
> >> You didn't get my point. I said you should provide an uninstaller
> function
> >> that wipes out data and it shouldn't be automated upon deactivation.
> >>
> >> I would hate a theme which will ask for options to be configured again
> when
> >> I just switch back to another theme and now I want the previous theme
> back.
> >>
> >> Thanks & Regards
> >> Ashish Saini aka Ashfame
> >> (Deserve Before You Desire)
> >> Homepage : http://www.ashfame.com | Blog : http://blog.ashfame.com |
> >> Twitter
> >> : http://twitter.com/ashfame
> >>
> >>
> >> On Fri, Jul 30, 2010 at 6:47 PM, Davit Barbakadze <jayarjo at gmail.com>
> >> wrote:
> >>
> >>> It's not about switching (activate/deactivate), but deleting. It would
> >>> be pretty logical to remove all the stuff that theme has created on
> >>> activation.
> >>>
> >>> On Fri, Jul 30, 2010 at 3:45 PM, Ashish Saini
> >>> <ashishsainiashfame at gmail.com> wrote:
> >>>> Hi Davit,
> >>>>
> >>>> I think a better option would be to provide uninstall function as
> >> leaving
> >>>> the options in the database makes sense as the user may switch back
> and
> >>> so
> >>>> it will save the pain of configuring it.
> >>>>
> >>>> Thanks & Regards
> >>>> Ashish Saini aka Ashfame
> >>>> (Deserve Before You Desire)
> >>>> Homepage : http://www.ashfame.com | Blog : http://blog.ashfame.com |
> >>> Twitter
> >>>> : http://twitter.com/ashfame
> >>>>
> >>>>
> >>>> On Fri, Jul 30, 2010 at 4:44 PM, <diana.j.wiadji at hotmail.com> wrote:
> >>>>
> >>>>> $
> >>>>> ------Original Message------
> >>>>> From: Davit Barbakadze
> >>>>> Sender: wp-hackers-bounces at lists.automattic.com
> >>>>> To: wp-hackers at lists.automattic.com
> >>>>> ReplyTo: wp-hackers at lists.automattic.com
> >>>>> Subject: [wp-hackers]  any way to clean after theme when it gets
> >>> deleted?
> >>>>> Sent: Jul 30, 2010 18:02
> >>>>>
> >>>>> I think everyone uses options and maybe even tables in their themes
> >>>>> nowadays. Is there any way coder can clean up after theme - delete
> >>>>> options, remove tables - when it get's uninstalled. Something similar
> >>>>> to what we have for plugins?
> >>>>>
> >>>>> --
> >>>>> Davit Barbakadze
> >>>>> _______________________________________________
> >>>>> wp-hackers mailing list
> >>>>> wp-hackers at lists.automattic.com
> >>>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
> >>>>>
> >>>>>
> >>>>>
> >>>>> Sent from my BlackBerry? smartphone on 3
> >>>>> _______________________________________________
> >>>>> wp-hackers mailing list
> >>>>> wp-hackers at lists.automattic.com
> >>>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
> >>>>>
> >>>> _______________________________________________
> >>>> wp-hackers mailing list
> >>>> wp-hackers at lists.automattic.com
> >>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
> >>>>
> >>>
> >>>
> >>>
> >>> --
> >>> Davit Barbakadze
> >>> _______________________________________________
> >>> wp-hackers mailing list
> >>> wp-hackers at lists.automattic.com
> >>> http://lists.automattic.com/mailman/listinfo/wp-hackers
> >>>
> >>
> >>
> >> ------------------------------
> >>
> >> Message: 3
> >> Date: Fri, 30 Jul 2010 09:45:12 -0400
> >> From: Andrew Nacin <wp at andrewnacin.com>
> >> Subject: Re: [wp-hackers] any way to clean after theme when it gets
> >>       deleted?
> >> To: wp-hackers at lists.automattic.com
> >> Message-ID:
> >>       <AANLkTi=ua3FWx5UJnGs9TpxYbqk_dN_GhW_bxbas01ON at mail.gmail.com>
> >> Content-Type: text/plain; charset=ISO-8859-1
> >>
> >> On Fri, Jul 30, 2010 at 9:25 AM, Ashish Saini
> >> <ashishsainiashfame at gmail.com>wrote:
> >>
> >>> You didn't get my point. I said you should provide an uninstaller
> >> function
> >>> that wipes out data and it shouldn't be automated upon deactivation.
> >>>
> >>
> >> Not sure you got his point -- I believe Davit is referring to the
> >> implementation of an uninstall hook for themes. He's pretty clear he'd
> want
> >> that triggered on deletion, not deactivation. Basically, how it works
> for
> >> plugins.
> >>
> >> I think implementing themes uninstall hooks would be a logical future
> step.
> >> We could start by removing items created using the theme_mod functions,
> >> which I don't think most themes use, but we use it for storing metadata
> for
> >> custom backgrounds and headers.
> >>
> >>
> >> ------------------------------
> >>
> >> Message: 4
> >> Date: Fri, 30 Jul 2010 19:48:22 +0530
> >> From: Ashish Saini <ashishsainiashfame at gmail.com>
> >> Subject: Re: [wp-hackers] any way to clean after theme when it gets
> >>       deleted?
> >> To: wp-hackers at lists.automattic.com
> >> Message-ID:
> >>       <AANLkTim7MQR2P6yOUa0j1TiPfWiaXDrVXfJM94Xovm-v at mail.gmail.com>
> >> Content-Type: text/plain; charset=ISO-8859-1
> >>
> >> Andrew, I knew that. I just replied back with a possible solution for
> his
> >> case.
> >>
> >> Thanks & Regards
> >> Ashish Saini aka Ashfame
> >> (Deserve Before You Desire)
> >> Homepage : http://www.ashfame.com | Blog : http://blog.ashfame.com |
> >> Twitter
> >> : http://twitter.com/ashfame
> >>
> >>
> >> On Fri, Jul 30, 2010 at 7:15 PM, Andrew Nacin <wp at andrewnacin.com>
> wrote:
> >>
> >>> On Fri, Jul 30, 2010 at 9:25 AM, Ashish Saini
> >>> <ashishsainiashfame at gmail.com>wrote:
> >>>
> >>>> You didn't get my point. I said you should provide an uninstaller
> >>> function
> >>>> that wipes out data and it shouldn't be automated upon deactivation.
> >>>>
> >>>
> >>> Not sure you got his point -- I believe Davit is referring to the
> >>> implementation of an uninstall hook for themes. He's pretty clear he'd
> >> want
> >>> that triggered on deletion, not deactivation. Basically, how it works
> for
> >>> plugins.
> >>>
> >>> I think implementing themes uninstall hooks would be a logical future
> >> step.
> >>> We could start by removing items created using the theme_mod functions,
> >>> which I don't think most themes use, but we use it for storing metadata
> >> for
> >>> custom backgrounds and headers.
> >>> _______________________________________________
> >>> wp-hackers mailing list
> >>> wp-hackers at lists.automattic.com
> >>> http://lists.automattic.com/mailman/listinfo/wp-hackers
> >>>
> >>
> >>
> >> ------------------------------
> >>
> >> Message: 5
> >> Date: Fri, 30 Jul 2010 18:32:12 +0400
> >> From: Davit Barbakadze <jayarjo at gmail.com>
> >> Subject: Re: [wp-hackers] any way to clean after theme when it gets
> >>       deleted?
> >> To: wp-hackers at lists.automattic.com
> >> Message-ID:
> >>       <AANLkTi=KdyyghUgN0-U46rkDThdGaYGmR1SH8c5F+w09 at mail.gmail.com<KdyyghUgN0-U46rkDThdGaYGmR1SH8c5F%2Bw09 at mail.gmail.com>
> <KdyyghUgN0-U46rkDThdGaYGmR1SH8c5F%2Bw09 at mail.gmail.com<KdyyghUgN0-U46rkDThdGaYGmR1SH8c5F%252Bw09 at mail.gmail.com>
> >
> >>>
> >> Content-Type: text/plain; charset=ISO-8859-1
> >>
> >> theme_mod functions? what do they do?
> >>
> >> On Fri, Jul 30, 2010 at 5:45 PM, Andrew Nacin <wp at andrewnacin.com>
> wrote:
> >>> On Fri, Jul 30, 2010 at 9:25 AM, Ashish Saini
> >>> <ashishsainiashfame at gmail.com>wrote:
> >>>
> >>>> You didn't get my point. I said you should provide an uninstaller
> >> function
> >>>> that wipes out data and it shouldn't be automated upon deactivation.
> >>>>
> >>>
> >>> Not sure you got his point -- I believe Davit is referring to the
> >>> implementation of an uninstall hook for themes. He's pretty clear he'd
> >> want
> >>> that triggered on deletion, not deactivation. Basically, how it works
> for
> >>> plugins.
> >>>
> >>> I think implementing themes uninstall hooks would be a logical future
> >> step.
> >>> We could start by removing items created using the theme_mod functions,
> >>> which I don't think most themes use, but we use it for storing metadata
> >> for
> >>> custom backgrounds and headers.
> >>> _______________________________________________
> >>> wp-hackers mailing list
> >>> wp-hackers at lists.automattic.com
> >>> http://lists.automattic.com/mailman/listinfo/wp-hackers
> >>>
> >>
> >>
> >>
> >> --
> >> Davit Barbakadze
> >>
> >>
> >> ------------------------------
> >>
> >> Message: 6
> >> Date: Fri, 30 Jul 2010 10:38:48 -0400
> >> From: Andrew Nacin <wp at andrewnacin.com>
> >> Subject: Re: [wp-hackers] any way to clean after theme when it gets
> >>       deleted?
> >> To: wp-hackers at lists.automattic.com
> >> Message-ID:
> >>       <AANLkTinDDOQTQyaZdnmazoiGn6HSGXVW9eLkffXm0HZw at mail.gmail.com>
> >> Content-Type: text/plain; charset=ISO-8859-1
> >>
> >> On Fri, Jul 30, 2010 at 10:32 AM, Davit Barbakadze <jayarjo at gmail.com
> >>> wrote:
> >>
> >>> theme_mod functions? what do they do?
> >>
> >>
> >> Rudimentary options storage for themes. Each theme's mods are stored in
> a
> >> single DB option row in the form of mod_{$theme}.
> >>
> >> Locations in core:
> >> ./wp-includes/theme.php:1270:function get_theme_mod($name, $default =
> >> false)
> >> {
> >> ./wp-includes/theme.php:1289:function set_theme_mod($name, $value) {
> >> ./wp-includes/theme.php:1311:function remove_theme_mod( $name ) {
> >> ./wp-includes/theme.php:1333:function remove_theme_mods() {
> >>
> >> Codex pages:
> >> http://codex.wordpress.org/Function_Reference/get_theme_mod
> >> http://codex.wordpress.org/Function_Reference/set_theme_mod
> >> http://codex.wordpress.org/Function_Reference/remove_theme_mod
> >> http://codex.wordpress.org/Function_Reference/remove_theme_mods
> >>
> >>
> >> ------------------------------
> >>
> >> Message: 7
> >> Date: Fri, 30 Jul 2010 11:29:11 -0400
> >> From: Bill Dennen <dennen at gmail.com>
> >> Subject: [wp-hackers] switch_to_blog in WP3
> >> To: wp-hackers at lists.automattic.com
> >> Message-ID:
> >>       <AANLkTimgcjBN35jVm7+Q_9CsGcuJJdhL9E-vjWTCLfe3 at mail.gmail.com<AANLkTimgcjBN35jVm7%2BQ_9CsGcuJJdhL9E-vjWTCLfe3 at mail.gmail.com>
> <AANLkTimgcjBN35jVm7%2BQ_9CsGcuJJdhL9E-vjWTCLfe3 at mail.gmail.com<AANLkTimgcjBN35jVm7%252BQ_9CsGcuJJdhL9E-vjWTCLfe3 at mail.gmail.com>
> >
> >>>
> >> Content-Type: text/plain; charset=ISO-8859-1
> >>
> >> Hi,
> >>
> >> I wrote a plugin that allows one blog to pull posts in from another
> >> blog via shortcode. I call it get-news. The syntax of the shortcode is
> >> something like this:
> >>
> >> [get-news site_name="news" numberposts="10" show_dates="0"]
> >>
> >> In short, what this code does is switch to the blog located at /news/
> >> and grab the 10 most recent posts and display them on the current
> >> blog. There are other options, as well - like pulling posts by
> >> category or tags, showing thumbnails, etc.
> >>
> >> My code uses switch_to_blog to do this. I've read that this function
> >> has a heavy performance hit. But, we've been using it with WP Super
> >> Cache and it has worked well for us in WPMU 2.9.2. Plus, at this
> >> point, my plugin is not meant for distribution -- it's used only on
> >> the site I manage. (That could change...)
> >>
> >> Now, my code is broken in WP3.x. Permalinks are incorrect and
> >> thumbnails do not work properly.
> >>
> >> I believe it's this bug, which is now listed as a "wontfix":
> >>
> >> http://core.trac.wordpress.org/ticket/12040
> >>
> >> In the bug report, there is mention that this bug could be 'fixed' via
> >> a plugin via the switch_blog hook.
> >>
> >> I'm looking for alternate suggestions for ways to do this. At this
> >> point, this bug is holding us back from going with WP3, which we'd
> >> like to do for many reasons!
> >>
> >> One option I toyed with initially was using RSS feeds, but I could not
> >> get the thumbnails over that way.
> >>
> >> Looking forward to any suggestions.
> >>
> >> Thanks-
> >> Bill
> >>
> >>
> >> ------------------------------
> >>
> >> Message: 8
> >> Date: Fri, 30 Jul 2010 16:33:08 +0100
> >> From: esmi at quirm dot net <esmi at quirm.net>
> >> Subject: Re: [wp-hackers] any way to clean after theme when it gets
> >>       deleted?
> >> To: wp-hackers at lists.automattic.com
> >> Message-ID: <4C52F0B4.4030908 at quirm.net>
> >> Content-Type: text/plain; charset=ISO-8859-1; format=flowed
> >>
> >> on 30/07/2010 15:38 Andrew Nacin said the following:
> >>> On Fri, Jul 30, 2010 at 10:32 AM, Davit Barbakadze <jayarjo at gmail.com
> >>> wrote:
> >>
> >>>> theme_mod functions? what do they do?
> >>
> >>> Rudimentary options storage for themes. Each theme's mods are stored in
> a
> >>> single DB option row in the form of mod_{$theme}.
> >>
> >> <snip>
> >>
> >> It's the multiple single rows in the db that I'm not keen on. Most of
> >> the time, I've been using a single row in the options table to store a
> >> serialized array. Each theme then has a manual "reset" option which
> >> removes all stored theme options but, thus far, I haven't found a way to
> >> trigger the reset on theme deletion.
> >>
> >> Mel / esmi
> >> --
> >> WordPress theme developer
> >> http://quirm.net
> >> http://blackwidows.co.uk
> >>
> >>
> >> ------------------------------
> >>
> >> _______________________________________________
> >> wp-hackers mailing list
> >> wp-hackers at lists.automattic.com
> >> http://lists.automattic.com/mailman/listinfo/wp-hackers
> >>
> >>
> >> End of wp-hackers Digest, Vol 66, Issue 120
> >> *******************************************
> >>
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers at lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
>
>
>
> ------------------------------
>
> Message: 2
> Date: Fri, 30 Jul 2010 20:54:24 -0400
> From: Mike Schinkel <mikeschinkel at newclarity.net>
> Subject: Re: [wp-hackers] Skip Main Query
> To: wp-hackers at lists.automattic.com
> Message-ID: <54BF7226-2AC0-4510-BF1F-9F4DAB606A73 at newclarity.net>
> Content-Type: text/plain;       charset=us-ascii
>
> On Jul 30, 2010, at 6:54 PM, Theodor Ramisch wrote:
> > \No I've noticed that WordPress still queries the posts from the start
> page. Is there a way to avoid that? Since I don't need the posts, I don't
> want to make that query.
>
> Nope.  I asked about this a while back here on the list and also I think on
> trac but nobody else seemed interested in making it an option so I dropped
> it.  Still, for a high traffic site it would make a lot of sense...
>
> -Mike
>
> ------------------------------
>
> Message: 3
> Date: Fri, 30 Jul 2010 21:31:08 -0400
> From: Michael Pretty <mpretty at voceconnect.com>
> Subject: Re: [wp-hackers] Skip Main Query
> To: wp-hackers at lists.automattic.com
> Message-ID: <4C537CDC.7050100 at voceconnect.com>
> Content-Type: text/plain; charset=ISO-8859-1; format=flowed
>
> If you don't need anything from the initial query, is there a reason you
> don't just take over earlier, like 'init'?  Most everything should be
> loaded at that point.
>
> Michael Pretty
> prettyboymp
>
> On 7/30/10 6:54 PM, Theodor Ramisch wrote:
> > Hi,
> >
> > I'm writing a plugin which should display data from its own tables in
> XML. It does not rely on any posts.
> >
> > To reach my plugin, I've added query_vars, the rewrite rules and listen
> on template_redirect for the parameters.
> >
> > No I've noticed that WordPress still queries the posts from the start
> page. Is there a way to avoid that? Since I don't need the posts, I don't
> want to make that query.
> >
> > Bypassing WP completely using mod_rewrite rules is not an option, since I
> need to have access to the database, permissions and so on.
> >
> > Thanks,
> >
> >    Theodor
> >
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers at lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> >
>
>
>
> ------------------------------
>
> Message: 4
> Date: Sat, 31 Jul 2010 06:09:26 +0100
> From: Peter Westwood <peter.westwood at ftwr.co.uk>
> Subject: Re: [wp-hackers] Skip Main Query
> To: "wp-hackers at lists.automattic.com"
>        <wp-hackers at lists.automattic.com>
> Message-ID: <589DBEBE-AB8D-44A6-B567-F57E30058762 at ftwr.co.uk>
> Content-Type: text/plain;       charset=us-ascii
>
> On 31 Jul 2010, at 02:31, Michael Pretty <mpretty at voceconnect.com> wrote:
>
> > If you don't need anything from the initial query, is there a reason you
> don't just take over earlier, like 'init'?  Most everything should be loaded
> at that point.
> >
> > Michael Pretty
> > prettyboymp
> >
> > On 7/30/10 6:54 PM, Theodor Ramisch wrote:
> >> Hi,
> >>
> >> I'm writing a plugin which should display data from its own tables in
> XML. It does not rely on any posts.
> >>
> >> To reach my plugin, I've added query_vars, the rewrite rules and listen
> on template_redirect for the parameters.
> >>
> >> No I've noticed that WordPress still queries the posts from the start
> page. Is there a way to avoid that? Since I don't need the posts, I don't
> want to make that query.
> >>
> >> Bypassing WP completely using mod_rewrite rules is not an option, since
> I need to have access to the database, permissions and so on.
> >>
> >>
>
> There is a tick for a hook to allow For this as it would be nice fir
> buddypress too I'll have a look for it later today when I'm in trac
>
> --
> Peter Westwood
> http://peter.westwood.name
>
>
>
> ------------------------------
>
> Message: 5
> Date: Sat, 31 Jul 2010 09:51:28 +0400
> From: Davit Barbakadze <jayarjo at gmail.com>
> Subject: Re: [wp-hackers] how can I use the create new menu function
>        for     making a default menu
> To: wp-hackers at lists.automattic.com
> Message-ID:
>        <AANLkTimbhcjdqp8MWzyrO8X-gXZb_2Ax0y=JWL-a9tAA at mail.gmail.com>
> Content-Type: text/plain; charset=ISO-8859-1
>
> Great example, thanks! I will be using these too.
>
> On Sat, Jul 31, 2010 at 4:44 AM, Mike Schinkel
> <mikeschinkel at newclarity.net> wrote:
> > Hi Jared:
> >
> > Do you mean these found in /wp-includes/nav-menu.php?
> >
> > Create Menu:
> > ? ? ? ?$menu_id = wp_create_nav_menu( $menu_name );
> >
> > Create Menu Items:
> > ? ? ? ?$menu = array(
> > ? ? ? ? ? ? ? ?'menu-item-object-id' => 0,
> > ? ? ? ? ? ? ? ?'menu-item-object' => '',
> > ? ? ? ? ? ? ? ?'menu-item-parent-id' => 0,
> > ? ? ? ? ? ? ? ?'menu-item-position' => 0,
> > ? ? ? ? ? ? ? ?'menu-item-type' => 'custom',
> > ? ? ? ? ? ? ? ?'menu-item-title' => '',
> > ? ? ? ? ? ? ? ?'menu-item-url' => '',
> > ? ? ? ? ? ? ? ?'menu-item-description' => '',
> > ? ? ? ? ? ? ? ?'menu-item-attr-title' => '',
> > ? ? ? ? ? ? ? ?'menu-item-target' => '',
> > ? ? ? ? ? ? ? ?'menu-item-classes' => '',
> > ? ? ? ? ? ? ? ?'menu-item-xfn' => '',
> > ? ? ? ? ? ? ? ?'menu-item-status' => '',
> > ? ? ? ?);
> > ? ? ? ?$menu_item_db_id = wp_update_nav_menu_item( $menu_id, 0, $menu);
> >
> > Update Menu Items:
> > ? ? ? ?wp_update_nav_menu_item( $menu_id, $menu_item_db_id, $menu);
> >
> > I've used them to create menus and menu items automatically.
> >
> > To understand the parameters create some menus in the admin and then take
> a look at the values created for different types of menu items in
> wp_postmeta.
> >
> > Hope this helps?
> >
> > -Mike
> >
> > On Jul 30, 2010, at 8:25 PM, Jared Williams wrote:
> >
> >> Hi,
> >> I know the menu system needs lots of work still, but I was wondering if
> >> anyone knows of a way to make use of whatever function(s) the 'Create
> Menu'
> >> does when you make a new custom named menu in the dashboard to make a
> >> pre-made menu to go along with a registered menu location etc. This
> would be
> >> nice so that when a theme were installed that has registered menus in
> it,
> >> the menu name you specify in the code would be created upon installing,
> and
> >> deleted when uninstalling a theme.
> >>
> >> I've searched for some kind of solution to this, and have studied the
> code
> >> in nav-menus.php and other files with 3.0 source code. This is just
> about
> >> the only thing I am unable to figure out with 3.0, at least that I have
> >> tried to do so far.
> >> I figured here is probably the best place to ask such a question.
> >>
> >> Thanks,
> >>
> >> Jared Williams
> >> New2WP.com
> >>
> >>
> >> On Fri, Jul 30, 2010 at 11:33 AM,
> >> <wp-hackers-request at lists.automattic.com>wrote:
> >>
> >>> Send wp-hackers mailing list submissions to
> >>> ? ? ? wp-hackers at lists.automattic.com
> >>>
> >>> To subscribe or unsubscribe via the World Wide Web, visit
> >>> ? ? ? http://lists.automattic.com/mailman/listinfo/wp-hackers
> >>> or, via email, send a message with subject or body 'help' to
> >>> ? ? ? wp-hackers-request at lists.automattic.com
> >>>
> >>> You can reach the person managing the list at
> >>> ? ? ? wp-hackers-owner at lists.automattic.com
> >>>
> >>> When replying, please edit your Subject line so it is more specific
> >>> than "Re: Contents of wp-hackers digest..."
> >>>
> >>>
> >>> Today's Topics:
> >>>
> >>> ?1. Re: any way to clean after theme when it gets deleted?
> >>> ? ? (Davit Barbakadze)
> >>> ?2. Re: any way to clean after theme when it gets deleted?
> >>> ? ? (Ashish Saini)
> >>> ?3. Re: any way to clean after theme when it gets deleted?
> >>> ? ? (Andrew Nacin)
> >>> ?4. Re: any way to clean after theme when it gets deleted?
> >>> ? ? (Ashish Saini)
> >>> ?5. Re: any way to clean after theme when it gets deleted?
> >>> ? ? (Davit Barbakadze)
> >>> ?6. Re: any way to clean after theme when it gets deleted?
> >>> ? ? (Andrew Nacin)
> >>> ?7. switch_to_blog in WP3 (Bill Dennen)
> >>> ?8. Re: any way to clean after theme when it gets deleted?
> >>> ? ? (esmi at quirm dot net)
> >>>
> >>>
> >>> ----------------------------------------------------------------------
> >>>
> >>> Message: 1
> >>> Date: Fri, 30 Jul 2010 17:17:51 +0400
> >>> From: Davit Barbakadze <jayarjo at gmail.com>
> >>> Subject: Re: [wp-hackers] any way to clean after theme when it gets
> >>> ? ? ? deleted?
> >>> To: wp-hackers at lists.automattic.com
> >>> Message-ID:
> >>> ? ? ? <AANLkTikhpSNdc-VtaLnOU2py=b+90tFjpCFLZeW+ecS6 at mail.gmail.com<b%2B90tFjpCFLZeW%2BecS6 at mail.gmail.com>
> <b%2B90tFjpCFLZeW%2BecS6 at mail.gmail.com<b%252B90tFjpCFLZeW%252BecS6 at mail.gmail.com>
> >
> >>>>
> >>> Content-Type: text/plain; charset=ISO-8859-1
> >>>
> >>> It's not about switching (activate/deactivate), but deleting. It would
> >>> be pretty logical to remove all the stuff that theme has created on
> >>> activation.
> >>>
> >>> On Fri, Jul 30, 2010 at 3:45 PM, Ashish Saini
> >>> <ashishsainiashfame at gmail.com> wrote:
> >>>> Hi Davit,
> >>>>
> >>>> I think a better option would be to provide uninstall function as
> leaving
> >>>> the options in the database makes sense as the user may switch back
> and
> >>> so
> >>>> it will save the pain of configuring it.
> >>>>
> >>>> Thanks & Regards
> >>>> Ashish Saini aka Ashfame
> >>>> (Deserve Before You Desire)
> >>>> Homepage : http://www.ashfame.com | Blog : http://blog.ashfame.com |
> >>> Twitter
> >>>> : http://twitter.com/ashfame
> >>>>
> >>>>
> >>>> On Fri, Jul 30, 2010 at 4:44 PM, <diana.j.wiadji at hotmail.com> wrote:
> >>>>
> >>>>> $
> >>>>> ------Original Message------
> >>>>> From: Davit Barbakadze
> >>>>> Sender: wp-hackers-bounces at lists.automattic.com
> >>>>> To: wp-hackers at lists.automattic.com
> >>>>> ReplyTo: wp-hackers at lists.automattic.com
> >>>>> Subject: [wp-hackers] ?any way to clean after theme when it gets
> >>> deleted?
> >>>>> Sent: Jul 30, 2010 18:02
> >>>>>
> >>>>> I think everyone uses options and maybe even tables in their themes
> >>>>> nowadays. Is there any way coder can clean up after theme - delete
> >>>>> options, remove tables - when it get's uninstalled. Something similar
> >>>>> to what we have for plugins?
> >>>>>
> >>>>> --
> >>>>> Davit Barbakadze
> >>>>> _______________________________________________
> >>>>> wp-hackers mailing list
> >>>>> wp-hackers at lists.automattic.com
> >>>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
> >>>>>
> >>>>>
> >>>>>
> >>>>> Sent from my BlackBerry? smartphone on 3
> >>>>> _______________________________________________
> >>>>> wp-hackers mailing list
> >>>>> wp-hackers at lists.automattic.com
> >>>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
> >>>>>
> >>>> _______________________________________________
> >>>> wp-hackers mailing list
> >>>> wp-hackers at lists.automattic.com
> >>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
> >>>>
> >>>
> >>>
> >>>
> >>> --
> >>> Davit Barbakadze
> >>>
> >>>
> >>> ------------------------------
> >>>
> >>> Message: 2
> >>> Date: Fri, 30 Jul 2010 18:55:18 +0530
> >>> From: Ashish Saini <ashishsainiashfame at gmail.com>
> >>> Subject: Re: [wp-hackers] any way to clean after theme when it gets
> >>> ? ? ? deleted?
> >>> To: wp-hackers at lists.automattic.com
> >>> Message-ID:
> >>> ? ? ? <AANLkTikU0qcxQMMVgRwTrNOEHjXoUO_o0r44C+=_96Z+ at mail.gmail.com<96Z%2B at mail.gmail.com>
> <96Z%2B at mail.gmail.com <96Z%252B at mail.gmail.com>>
> >>>>
> >>> Content-Type: text/plain; charset=ISO-8859-1
> >>>
> >>> You didn't get my point. I said you should provide an uninstaller
> function
> >>> that wipes out data and it shouldn't be automated upon deactivation.
> >>>
> >>> I would hate a theme which will ask for options to be configured again
> when
> >>> I just switch back to another theme and now I want the previous theme
> back.
> >>>
> >>> Thanks & Regards
> >>> Ashish Saini aka Ashfame
> >>> (Deserve Before You Desire)
> >>> Homepage : http://www.ashfame.com | Blog : http://blog.ashfame.com |
> >>> Twitter
> >>> : http://twitter.com/ashfame
> >>>
> >>>
> >>> On Fri, Jul 30, 2010 at 6:47 PM, Davit Barbakadze <jayarjo at gmail.com>
> >>> wrote:
> >>>
> >>>> It's not about switching (activate/deactivate), but deleting. It would
> >>>> be pretty logical to remove all the stuff that theme has created on
> >>>> activation.
> >>>>
> >>>> On Fri, Jul 30, 2010 at 3:45 PM, Ashish Saini
> >>>> <ashishsainiashfame at gmail.com> wrote:
> >>>>> Hi Davit,
> >>>>>
> >>>>> I think a better option would be to provide uninstall function as
> >>> leaving
> >>>>> the options in the database makes sense as the user may switch back
> and
> >>>> so
> >>>>> it will save the pain of configuring it.
> >>>>>
> >>>>> Thanks & Regards
> >>>>> Ashish Saini aka Ashfame
> >>>>> (Deserve Before You Desire)
> >>>>> Homepage : http://www.ashfame.com | Blog : http://blog.ashfame.com |
> >>>> Twitter
> >>>>> : http://twitter.com/ashfame
> >>>>>
> >>>>>
> >>>>> On Fri, Jul 30, 2010 at 4:44 PM, <diana.j.wiadji at hotmail.com> wrote:
> >>>>>
> >>>>>> $
> >>>>>> ------Original Message------
> >>>>>> From: Davit Barbakadze
> >>>>>> Sender: wp-hackers-bounces at lists.automattic.com
> >>>>>> To: wp-hackers at lists.automattic.com
> >>>>>> ReplyTo: wp-hackers at lists.automattic.com
> >>>>>> Subject: [wp-hackers] ?any way to clean after theme when it gets
> >>>> deleted?
> >>>>>> Sent: Jul 30, 2010 18:02
> >>>>>>
> >>>>>> I think everyone uses options and maybe even tables in their themes
> >>>>>> nowadays. Is there any way coder can clean up after theme - delete
> >>>>>> options, remove tables - when it get's uninstalled. Something
> similar
> >>>>>> to what we have for plugins?
> >>>>>>
> >>>>>> --
> >>>>>> Davit Barbakadze
> >>>>>> _______________________________________________
> >>>>>> wp-hackers mailing list
> >>>>>> wp-hackers at lists.automattic.com
> >>>>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>> Sent from my BlackBerry? smartphone on 3
> >>>>>> _______________________________________________
> >>>>>> wp-hackers mailing list
> >>>>>> wp-hackers at lists.automattic.com
> >>>>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
> >>>>>>
> >>>>> _______________________________________________
> >>>>> wp-hackers mailing list
> >>>>> wp-hackers at lists.automattic.com
> >>>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
> >>>>>
> >>>>
> >>>>
> >>>>
> >>>> --
> >>>> Davit Barbakadze
> >>>> _______________________________________________
> >>>> wp-hackers mailing list
> >>>> wp-hackers at lists.automattic.com
> >>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
> >>>>
> >>>
> >>>
> >>> ------------------------------
> >>>
> >>> Message: 3
> >>> Date: Fri, 30 Jul 2010 09:45:12 -0400
> >>> From: Andrew Nacin <wp at andrewnacin.com>
> >>> Subject: Re: [wp-hackers] any way to clean after theme when it gets
> >>> ? ? ? deleted?
> >>> To: wp-hackers at lists.automattic.com
> >>> Message-ID:
> >>> ? ? ? <AANLkTi=ua3FWx5UJnGs9TpxYbqk_dN_GhW_bxbas01ON at mail.gmail.com>
> >>> Content-Type: text/plain; charset=ISO-8859-1
> >>>
> >>> On Fri, Jul 30, 2010 at 9:25 AM, Ashish Saini
> >>> <ashishsainiashfame at gmail.com>wrote:
> >>>
> >>>> You didn't get my point. I said you should provide an uninstaller
> >>> function
> >>>> that wipes out data and it shouldn't be automated upon deactivation.
> >>>>
> >>>
> >>> Not sure you got his point -- I believe Davit is referring to the
> >>> implementation of an uninstall hook for themes. He's pretty clear he'd
> want
> >>> that triggered on deletion, not deactivation. Basically, how it works
> for
> >>> plugins.
> >>>
> >>> I think implementing themes uninstall hooks would be a logical future
> step.
> >>> We could start by removing items created using the theme_mod functions,
> >>> which I don't think most themes use, but we use it for storing metadata
> for
> >>> custom backgrounds and headers.
> >>>
> >>>
> >>> ------------------------------
> >>>
> >>> Message: 4
> >>> Date: Fri, 30 Jul 2010 19:48:22 +0530
> >>> From: Ashish Saini <ashishsainiashfame at gmail.com>
> >>> Subject: Re: [wp-hackers] any way to clean after theme when it gets
> >>> ? ? ? deleted?
> >>> To: wp-hackers at lists.automattic.com
> >>> Message-ID:
> >>> ? ? ? <AANLkTim7MQR2P6yOUa0j1TiPfWiaXDrVXfJM94Xovm-v at mail.gmail.com>
> >>> Content-Type: text/plain; charset=ISO-8859-1
> >>>
> >>> Andrew, I knew that. I just replied back with a possible solution for
> his
> >>> case.
> >>>
> >>> Thanks & Regards
> >>> Ashish Saini aka Ashfame
> >>> (Deserve Before You Desire)
> >>> Homepage : http://www.ashfame.com | Blog : http://blog.ashfame.com |
> >>> Twitter
> >>> : http://twitter.com/ashfame
> >>>
> >>>
> >>> On Fri, Jul 30, 2010 at 7:15 PM, Andrew Nacin <wp at andrewnacin.com>
> wrote:
> >>>
> >>>> On Fri, Jul 30, 2010 at 9:25 AM, Ashish Saini
> >>>> <ashishsainiashfame at gmail.com>wrote:
> >>>>
> >>>>> You didn't get my point. I said you should provide an uninstaller
> >>>> function
> >>>>> that wipes out data and it shouldn't be automated upon deactivation.
> >>>>>
> >>>>
> >>>> Not sure you got his point -- I believe Davit is referring to the
> >>>> implementation of an uninstall hook for themes. He's pretty clear he'd
> >>> want
> >>>> that triggered on deletion, not deactivation. Basically, how it works
> for
> >>>> plugins.
> >>>>
> >>>> I think implementing themes uninstall hooks would be a logical future
> >>> step.
> >>>> We could start by removing items created using the theme_mod
> functions,
> >>>> which I don't think most themes use, but we use it for storing
> metadata
> >>> for
> >>>> custom backgrounds and headers.
> >>>> _______________________________________________
> >>>> wp-hackers mailing list
> >>>> wp-hackers at lists.automattic.com
> >>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
> >>>>
> >>>
> >>>
> >>> ------------------------------
> >>>
> >>> Message: 5
> >>> Date: Fri, 30 Jul 2010 18:32:12 +0400
> >>> From: Davit Barbakadze <jayarjo at gmail.com>
> >>> Subject: Re: [wp-hackers] any way to clean after theme when it gets
> >>> ? ? ? deleted?
> >>> To: wp-hackers at lists.automattic.com
> >>> Message-ID:
> >>> ? ? ? <AANLkTi=KdyyghUgN0-U46rkDThdGaYGmR1SH8c5F+w09 at mail.gmail.com<KdyyghUgN0-U46rkDThdGaYGmR1SH8c5F%2Bw09 at mail.gmail.com>
> <KdyyghUgN0-U46rkDThdGaYGmR1SH8c5F%2Bw09 at mail.gmail.com<KdyyghUgN0-U46rkDThdGaYGmR1SH8c5F%252Bw09 at mail.gmail.com>
> >
> >>>>
> >>> Content-Type: text/plain; charset=ISO-8859-1
> >>>
> >>> theme_mod functions? what do they do?
> >>>
> >>> On Fri, Jul 30, 2010 at 5:45 PM, Andrew Nacin <wp at andrewnacin.com>
> wrote:
> >>>> On Fri, Jul 30, 2010 at 9:25 AM, Ashish Saini
> >>>> <ashishsainiashfame at gmail.com>wrote:
> >>>>
> >>>>> You didn't get my point. I said you should provide an uninstaller
> >>> function
> >>>>> that wipes out data and it shouldn't be automated upon deactivation.
> >>>>>
> >>>>
> >>>> Not sure you got his point -- I believe Davit is referring to the
> >>>> implementation of an uninstall hook for themes. He's pretty clear he'd
> >>> want
> >>>> that triggered on deletion, not deactivation. Basically, how it works
> for
> >>>> plugins.
> >>>>
> >>>> I think implementing themes uninstall hooks would be a logical future
> >>> step.
> >>>> We could start by removing items created using the theme_mod
> functions,
> >>>> which I don't think most themes use, but we use it for storing
> metadata
> >>> for
> >>>> custom backgrounds and headers.
> >>>> _______________________________________________
> >>>> wp-hackers mailing list
> >>>> wp-hackers at lists.automattic.com
> >>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
> >>>>
> >>>
> >>>
> >>>
> >>> --
> >>> Davit Barbakadze
> >>>
> >>>
> >>> ------------------------------
> >>>
> >>> Message: 6
> >>> Date: Fri, 30 Jul 2010 10:38:48 -0400
> >>> From: Andrew Nacin <wp at andrewnacin.com>
> >>> Subject: Re: [wp-hackers] any way to clean after theme when it gets
> >>> ? ? ? deleted?
> >>> To: wp-hackers at lists.automattic.com
> >>> Message-ID:
> >>> ? ? ? <AANLkTinDDOQTQyaZdnmazoiGn6HSGXVW9eLkffXm0HZw at mail.gmail.com>
> >>> Content-Type: text/plain; charset=ISO-8859-1
> >>>
> >>> On Fri, Jul 30, 2010 at 10:32 AM, Davit Barbakadze <jayarjo at gmail.com
> >>>> wrote:
> >>>
> >>>> theme_mod functions? what do they do?
> >>>
> >>>
> >>> Rudimentary options storage for themes. Each theme's mods are stored in
> a
> >>> single DB option row in the form of mod_{$theme}.
> >>>
> >>> Locations in core:
> >>> ./wp-includes/theme.php:1270:function get_theme_mod($name, $default =
> >>> false)
> >>> {
> >>> ./wp-includes/theme.php:1289:function set_theme_mod($name, $value) {
> >>> ./wp-includes/theme.php:1311:function remove_theme_mod( $name ) {
> >>> ./wp-includes/theme.php:1333:function remove_theme_mods() {
> >>>
> >>> Codex pages:
> >>> http://codex.wordpress.org/Function_Reference/get_theme_mod
> >>> http://codex.wordpress.org/Function_Reference/set_theme_mod
> >>> http://codex.wordpress.org/Function_Reference/remove_theme_mod
> >>> http://codex.wordpress.org/Function_Reference/remove_theme_mods
> >>>
> >>>
> >>> ------------------------------
> >>>
> >>> Message: 7
> >>> Date: Fri, 30 Jul 2010 11:29:11 -0400
> >>> From: Bill Dennen <dennen at gmail.com>
> >>> Subject: [wp-hackers] switch_to_blog in WP3
> >>> To: wp-hackers at lists.automattic.com
> >>> Message-ID:
> >>> ? ? ? <AANLkTimgcjBN35jVm7+Q_9CsGcuJJdhL9E-vjWTCLfe3 at mail.gmail.com<AANLkTimgcjBN35jVm7%2BQ_9CsGcuJJdhL9E-vjWTCLfe3 at mail.gmail.com>
> <AANLkTimgcjBN35jVm7%2BQ_9CsGcuJJdhL9E-vjWTCLfe3 at mail.gmail.com<AANLkTimgcjBN35jVm7%252BQ_9CsGcuJJdhL9E-vjWTCLfe3 at mail.gmail.com>
> >
> >>>>
> >>> Content-Type: text/plain; charset=ISO-8859-1
> >>>
> >>> Hi,
> >>>
> >>> I wrote a plugin that allows one blog to pull posts in from another
> >>> blog via shortcode. I call it get-news. The syntax of the shortcode is
> >>> something like this:
> >>>
> >>> [get-news site_name="news" numberposts="10" show_dates="0"]
> >>>
> >>> In short, what this code does is switch to the blog located at /news/
> >>> and grab the 10 most recent posts and display them on the current
> >>> blog. There are other options, as well - like pulling posts by
> >>> category or tags, showing thumbnails, etc.
> >>>
> >>> My code uses switch_to_blog to do this. I've read that this function
> >>> has a heavy performance hit. But, we've been using it with WP Super
> >>> Cache and it has worked well for us in WPMU 2.9.2. Plus, at this
> >>> point, my plugin is not meant for distribution -- it's used only on
> >>> the site I manage. (That could change...)
> >>>
> >>> Now, my code is broken in WP3.x. Permalinks are incorrect and
> >>> thumbnails do not work properly.
> >>>
> >>> I believe it's this bug, which is now listed as a "wontfix":
> >>>
> >>> http://core.trac.wordpress.org/ticket/12040
> >>>
> >>> In the bug report, there is mention that this bug could be 'fixed' via
> >>> a plugin via the switch_blog hook.
> >>>
> >>> I'm looking for alternate suggestions for ways to do this. At this
> >>> point, this bug is holding us back from going with WP3, which we'd
> >>> like to do for many reasons!
> >>>
> >>> One option I toyed with initially was using RSS feeds, but I could not
> >>> get the thumbnails over that way.
> >>>
> >>> Looking forward to any suggestions.
> >>>
> >>> Thanks-
> >>> Bill
> >>>
> >>>
> >>> ------------------------------
> >>>
> >>> Message: 8
> >>> Date: Fri, 30 Jul 2010 16:33:08 +0100
> >>> From: esmi at quirm dot net <esmi at quirm.net>
> >>> Subject: Re: [wp-hackers] any way to clean after theme when it gets
> >>> ? ? ? deleted?
> >>> To: wp-hackers at lists.automattic.com
> >>> Message-ID: <4C52F0B4.4030908 at quirm.net>
> >>> Content-Type: text/plain; charset=ISO-8859-1; format=flowed
> >>>
> >>> on 30/07/2010 15:38 Andrew Nacin said the following:
> >>>> On Fri, Jul 30, 2010 at 10:32 AM, Davit Barbakadze <jayarjo at gmail.com
> >>>> wrote:
> >>>
> >>>>> theme_mod functions? what do they do?
> >>>
> >>>> Rudimentary options storage for themes. Each theme's mods are stored
> in a
> >>>> single DB option row in the form of mod_{$theme}.
> >>>
> >>> <snip>
> >>>
> >>> It's the multiple single rows in the db that I'm not keen on. Most of
> >>> the time, I've been using a single row in the options table to store a
> >>> serialized array. Each theme then has a manual "reset" option which
> >>> removes all stored theme options but, thus far, I haven't found a way
> to
> >>> trigger the reset on theme deletion.
> >>>
> >>> Mel / esmi
> >>> --
> >>> WordPress theme developer
> >>> http://quirm.net
> >>> http://blackwidows.co.uk
> >>>
> >>>
> >>> ------------------------------
> >>>
> >>> _______________________________________________
> >>> wp-hackers mailing list
> >>> wp-hackers at lists.automattic.com
> >>> http://lists.automattic.com/mailman/listinfo/wp-hackers
> >>>
> >>>
> >>> End of wp-hackers Digest, Vol 66, Issue 120
> >>> *******************************************
> >>>
> >> _______________________________________________
> >> wp-hackers mailing list
> >> wp-hackers at lists.automattic.com
> >> http://lists.automattic.com/mailman/listinfo/wp-hackers
> >
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers at lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> >
>
>
>
> --
> Davit Barbakadze
>
>
> ------------------------------
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
>
> End of wp-hackers Digest, Vol 66, Issue 122
> *******************************************
>



-- 
Thank you,

Jared Williams
Web/Graphic Designer
Tweeaks.com  |  New2WP.com

From jayarjo at gmail.com  Sun Aug  1 14:19:33 2010
From: jayarjo at gmail.com (Davit Barbakadze)
Date: Sun, 1 Aug 2010 18:19:33 +0400
Subject: [wp-hackers] nav menus: theme locations vs. individual menus
In-Reply-To: <AANLkTimUBf1CEPUG_w2u1X7gR0ud8uiLBXsws8C9NOvy@mail.gmail.com>
References: <AANLkTimrgnznc=o4bC3tCysWNN8icRq99Zjr1cuJdmgh@mail.gmail.com> 
	<AANLkTimUBf1CEPUG_w2u1X7gR0ud8uiLBXsws8C9NOvy@mail.gmail.com>
Message-ID: <AANLkTinV8dVv+CwUEsjRaqVh_Jsetevbz_B_pb7qhtha@mail.gmail.com>

Thanks Andrew, it's a bit clearer now. So basically menus are just
like posts, they do not depend on themes or anything and theme
locations are like points (slots) to which menus are attached for
every particular theme, right?

Although there's still something misleading there, not quite sure
what, maybe it's naming for the functions. For example
register_nav_menus() function and it's codex page here:
http://codex.wordpress.org/Function_Reference/register_nav_menus, they
both kinda tell you that you are registering (creating) a menu, but in
fact you are not. In fact it has nothing to do with menus. You are
just registering a theme location, a slot for a menu, that probably
has yet to be created. Maybe it should be like
register_nav_menu_locations() or something.

On Sun, Aug 1, 2010 at 3:53 PM, Andrew Nacin <wp at andrewnacin.com> wrote:
> On Sun, Aug 1, 2010 at 7:37 AM, Davit Barbakadze <jayarjo at gmail.com> wrote:
>
>> Trying out this new feature finally. However there's something I don't
>> quite understand. What's the point of so called Theme Locations?
>> Initially I thought that I can create couple of theme locations, like
>> footer and header and then assign multiple individual menus to each
>> one. Now it looks like it is one to one assignment - one menu goes to
>> one theme location ?(do I misinterpret something here?). But if it's
>> one to one then what's the point of having an extra level of
>> granularity?
>
>
> It's not an extra level of granularity; it's a requirement for the
> workflow. Say a theme has spots for two menus. And the user wants to create
> three menus. Maybe one isn't used, or maybe it is used as a widget. Which
> menu goes where? What if I wanted the same menu in both the header and
> footer?
>
> We realized this after a bit of testing and experimenting with how themes
> were going to use menus. Thus, we forced themes to register menu locations.
> Then the user can pair menus with the location. Each location can have zero
> or one menus, though menus can be used over and over.
>
> Related ticket would be -- http://core.trac.wordpress.org/ticket/13378. The
> ticket's description further describes the problem, and you can see how our
> solution was developed by reading through the comments and commits.
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>



-- 
Davit Barbakadze

From otto at ottodestruct.com  Sun Aug  1 14:21:15 2010
From: otto at ottodestruct.com (Otto)
Date: Sun, 1 Aug 2010 09:21:15 -0500
Subject: [wp-hackers] WP 3 Multisite List Blogs
In-Reply-To: <5858DBF2-FA98-4E65-8483-DEFDB375CE0C@ftwr.co.uk>
References: <75142B22-ED21-46B8-811F-BE6BAA61F404@thisismyurl.com> 
	<AANLkTi=i6ZRa-ZSPi+qFZmVDdzUNVr3NMs4Gwk8DNS7h@mail.gmail.com> 
	<5858DBF2-FA98-4E65-8483-DEFDB375CE0C@ftwr.co.uk>
Message-ID: <AANLkTimhCv0s8-xVedMA0NgwG+_ufNJWAjdMZ0YatxQb@mail.gmail.com>

You know, get_blog_list doesn't look like it'd be so bad if you turned
off the postcount queries.

-Otto



On Sun, Aug 1, 2010 at 6:08 AM, Peter Westwood
<peter.westwood at ftwr.co.uk> wrote:
>
> On 1 Aug 2010, at 11:33, Brent Shepherd wrote:
>
>> The obvious choice would be get_blog_list:
>> http://codex.wordpress.org/WPMU_Functions/get_blog_list
>>
>> Though I see it's been deprecated in 3.0 with no alternative provided.
>>
>
> It was deprecated because the query is sucky on anything but a small install and you really don't want to do it on every page load where you want to display the list.
>
> It is also not something that most sites want.
>
> An idea solution would use a similar query to build the list and then make heavy use of caching with the result.
>
> Depending on how often your list changes you might want it to cache for minutes or for the cache to be invalidated when someone adds/modifies a new site
>
> Cheers
> --
> Peter Westwood
> http://blog.ftwr.co.uk | http://westi.wordpress.com
> C53C F8FC 8796 8508 88D6 C950 54F4 5DCD A834 01C5
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From cross at thisismyurl.com  Sun Aug  1 15:07:22 2010
From: cross at thisismyurl.com (Christopher Ross)
Date: Sun, 1 Aug 2010 12:07:22 -0300
Subject: [wp-hackers] WP 3 Multisite List Blogs
In-Reply-To: <AANLkTimhCv0s8-xVedMA0NgwG+_ufNJWAjdMZ0YatxQb@mail.gmail.com>
References: <75142B22-ED21-46B8-811F-BE6BAA61F404@thisismyurl.com>
	<AANLkTi=i6ZRa-ZSPi+qFZmVDdzUNVr3NMs4Gwk8DNS7h@mail.gmail.com>
	<5858DBF2-FA98-4E65-8483-DEFDB375CE0C@ftwr.co.uk>
	<AANLkTimhCv0s8-xVedMA0NgwG+_ufNJWAjdMZ0YatxQb@mail.gmail.com>
Message-ID: <BAAF0B77-5791-436E-855F-863FB29776CA@thisismyurl.com>

I'd agree with you Otto, while it's not a function I'd like to call on every page it doesn't seem to be that heavy a call.

After I was pointed to it, I did some light modifications and added it to my functions file. Here's the results:

function cr_get_blog_list( $start = 0, $num = 10) {
	global $wpdb;
	$blogs = $wpdb->get_results( $wpdb->prepare("SELECT blog_id, domain, path FROM $wpdb->blogs WHERE site_id = %d AND public = '1' AND archived = '0' AND mature = '0' AND spam = '0' AND deleted = '0' ORDER BY registered DESC", $wpdb->siteid), ARRAY_A );

	foreach ( (array) $blogs as $details ) {$blog_list[ $details['blog_id'] ] = $details;}
	unset( $blogs );
	$blogs = $blog_list;

	if ( false == is_array( $blogs ) )
		return array();
	if ( $num == 'all' )
		return array_slice( $blogs, $start, count( $blogs ) );
	else
		return array_slice( $blogs, $start, $num );
}




On 2010-08-01, at 11:21 AM, Otto wrote:

> You know, get_blog_list doesn't look like it'd be so bad if you turned
> off the postcount queries.
> 
> -Otto


__

Christopher Ross

Toronto      1 (416) 840-5828
Fredericton 1 (506) 474-2708
New Orleans 1 (504) 322 3485

http://christopherross.ca
http://www.thisismyurl.com


From scribu at gmail.com  Sun Aug  1 15:57:21 2010
From: scribu at gmail.com (scribu)
Date: Sun, 1 Aug 2010 18:57:21 +0300
Subject: [wp-hackers] load javascript only for specific custom post_type
	add/edit pages..?
In-Reply-To: <AANLkTike9sSwqODC+X0C6prtqikRTamgKqqJiZO5zT9M@mail.gmail.com>
References: <AANLkTike9sSwqODC+X0C6prtqikRTamgKqqJiZO5zT9M@mail.gmail.com>
Message-ID: <AANLkTilYvVcJA8OXmJL-FAIGMI4f1DiGk9EIfSsrFjpv@mail.gmail.com>

See this thread: http://old.nabble.com/$pagenow-in-WP-3.0---td27403624.html

-- 
http://scribu.net

From wp at andrewnacin.com  Sun Aug  1 15:58:41 2010
From: wp at andrewnacin.com (Andrew Nacin)
Date: Sun, 1 Aug 2010 11:58:41 -0400
Subject: [wp-hackers] WP 3 Multisite List Blogs
In-Reply-To: <BAAF0B77-5791-436E-855F-863FB29776CA@thisismyurl.com>
References: <75142B22-ED21-46B8-811F-BE6BAA61F404@thisismyurl.com> 
	<AANLkTi=i6ZRa-ZSPi+qFZmVDdzUNVr3NMs4Gwk8DNS7h@mail.gmail.com> 
	<5858DBF2-FA98-4E65-8483-DEFDB375CE0C@ftwr.co.uk>
	<AANLkTimhCv0s8-xVedMA0NgwG+_ufNJWAjdMZ0YatxQb@mail.gmail.com> 
	<BAAF0B77-5791-436E-855F-863FB29776CA@thisismyurl.com>
Message-ID: <AANLkTin5ZUeSL_Vvy6ong_U_V=tox9tgFNa8m6Ssbfar@mail.gmail.com>

On Sun, Aug 1, 2010 at 11:07 AM, Christopher Ross <cross at thisismyurl.com>wrote:

> I'd agree with you Otto, while it's not a function I'd like to call on
> every page it doesn't seem to be that heavy a call.
>

If someone wants to come up with a replacement function that avoids the post
counts and caches the results, then you're welcome to submit it to Trac.

The latest example would run a query on every page load -- nay, function
call -- on a table that can get very large (and isn't indexed well for this
query). If you're going to have a $num argument, that should be a LIMIT, to
prevent you from querying 70,000 rows then chopping off 69,990.

Personally, I think this is best solved on a per-installation level, which
is often the case when considering how to implement scalable functions and
features in multisite.

From scribu at gmail.com  Sun Aug  1 16:01:20 2010
From: scribu at gmail.com (scribu)
Date: Sun, 1 Aug 2010 19:01:20 +0300
Subject: [wp-hackers] nav menus: theme locations vs. individual menus
In-Reply-To: <AANLkTinV8dVv+CwUEsjRaqVh_Jsetevbz_B_pb7qhtha@mail.gmail.com>
References: <AANLkTimrgnznc=o4bC3tCysWNN8icRq99Zjr1cuJdmgh@mail.gmail.com>
	<AANLkTimUBf1CEPUG_w2u1X7gR0ud8uiLBXsws8C9NOvy@mail.gmail.com>
	<AANLkTinV8dVv+CwUEsjRaqVh_Jsetevbz_B_pb7qhtha@mail.gmail.com>
Message-ID: <AANLkTim43VH9Yizqzp1ngadOdytpXxOAR_nZnWxHQN4U@mail.gmail.com>

On Sun, Aug 1, 2010 at 5:19 PM, Davit Barbakadze <jayarjo at gmail.com> wrote:

> Thanks Andrew, it's a bit clearer now. So basically menus are just
> like posts, they do not depend on themes or anything and theme
> locations are like points (slots) to which menus are attached for
> every particular theme, right?
>

I think a more useful analogy would be sidebars and widgets:

menu location - sidebar
menu - individual widget

The difference is that a menu location can only contain one menu.


-- 
http://scribu.net

From sbressler at gmail.com  Sun Aug  1 18:30:57 2010
From: sbressler at gmail.com (Scott Bressler)
Date: Sun, 1 Aug 2010 11:30:57 -0700
Subject: [wp-hackers] Customizing the view of custom taxonomies
In-Reply-To: <0E9294E8-C52A-4A92-AD12-D3E98F68CB99@newclarity.net>
References: <AANLkTik_cUCdkG6JXsG6yNAmdv4Jz1c7v+ei=GJhOW+8@mail.gmail.com>
	<AANLkTimlZOgXkQIPADLcOtmNJywlJd5GImfxuEGD88QE@mail.gmail.com>
	<AANLkTinGST6=tK-9w8p7aym9ZLtTiB50KZVuTmdihtyM@mail.gmail.com>
	<AANLkTin9wziSL10WvTjU9Tks7=X+mgpJScwPp+r3Orme@mail.gmail.com>
	<DCA59451-6C27-46B8-80B6-3F2AE64DF5D2@newclarity.net>
	<AANLkTik5YoqmLo4ds1K9yDcdeZina7ddMjk8GJdPEW6G@mail.gmail.com>
	<34E8AF80-1E96-4AEF-B9C8-94CC29EC9F59@newclarity.net>
	<AANLkTimRbNUOuNhQ_FyA2_Y020Bb1Z-GuOkp1G7aokKm@mail.gmail.com>
	<0E9294E8-C52A-4A92-AD12-D3E98F68CB99@newclarity.net>
Message-ID: <AANLkTikXrH0pJV_fpnCbAd=eLyxAHH+mJ_xXwLtLqBnV@mail.gmail.com>

The drop-down is indeed for editing the available terms themselves. When one
adds a "copy editor" term to the taxonomy, they will pick that this is of
type "user." Then, there will of course also be a drop-down in the metabox
itself for choosing a user. If one were to make a "due date" term, they
would choose "date" as the type when editing the taxonomy. Then in the
metabox there would be a date selector.

So can I customize the view of editing the taxonomy like this?

From mikeschinkel at newclarity.net  Sun Aug  1 20:15:38 2010
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Sun, 1 Aug 2010 16:15:38 -0400
Subject: [wp-hackers] nav menus: theme locations vs. individual menus
In-Reply-To: <AANLkTinV8dVv+CwUEsjRaqVh_Jsetevbz_B_pb7qhtha@mail.gmail.com>
References: <AANLkTimrgnznc=o4bC3tCysWNN8icRq99Zjr1cuJdmgh@mail.gmail.com>
	<AANLkTimUBf1CEPUG_w2u1X7gR0ud8uiLBXsws8C9NOvy@mail.gmail.com>
	<AANLkTinV8dVv+CwUEsjRaqVh_Jsetevbz_B_pb7qhtha@mail.gmail.com>
Message-ID: <30C23B36-AE83-4A45-8874-E6BD92A09146@newclarity.net>

On Aug 1, 2010, at 10:19 AM, Davit Barbakadze wrote:
> Although there's still something misleading there, not quite sure
> what, maybe it's naming for the functions. For example
> register_nav_menus() function and it's codex page here:
> http://codex.wordpress.org/Function_Reference/register_nav_menus, they
> both kinda tell you that you are registering (creating) a menu, but in
> fact you are not. In fact it has nothing to do with menus. You are
> just registering a theme location, a slot for a menu, that probably
> has yet to be created. Maybe it should be like
> register_nav_menu_locations() or something.

+1 for that.

-Mike

From mikeschinkel at newclarity.net  Sun Aug  1 21:27:39 2010
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Sun, 1 Aug 2010 17:27:39 -0400
Subject: [wp-hackers] Customizing the view of custom taxonomies
In-Reply-To: <AANLkTimRbNUOuNhQ_FyA2_Y020Bb1Z-GuOkp1G7aokKm@mail.gmail.com>
References: <AANLkTik_cUCdkG6JXsG6yNAmdv4Jz1c7v+ei=GJhOW+8@mail.gmail.com>
	<AANLkTimlZOgXkQIPADLcOtmNJywlJd5GImfxuEGD88QE@mail.gmail.com>
	<AANLkTinGST6=tK-9w8p7aym9ZLtTiB50KZVuTmdihtyM@mail.gmail.com>
	<AANLkTin9wziSL10WvTjU9Tks7=X+mgpJScwPp+r3Orme@mail.gmail.com>
	<DCA59451-6C27-46B8-80B6-3F2AE64DF5D2@newclarity.net>
	<AANLkTik5YoqmLo4ds1K9yDcdeZina7ddMjk8GJdPEW6G@mail.gmail.com>
	<34E8AF80-1E96-4AEF-B9C8-94CC29EC9F59@newclarity.net>
	<AANLkTimRbNUOuNhQ_FyA2_Y020Bb1Z-GuOkp1G7aokKm@mail.gmail.com>
Message-ID: <53CCF23B-A152-4AE8-A2D0-ACEE6EAD4107@newclarity.net>

Scott:

Is this what you are looking for?

http://gist.github.com/503778

Note that it's easy to add fields at the end but to add them elsewhere you've have to write a lot of tricky code to use output buffers with multiple hooks and then potentially fragile code to parse the HTML to insert your own fields.

Let me know if I understood correctly.

-Mike


On Aug 1, 2010, at 12:30 PM, Scott Bressler wrote:

> The drop-down is indeed for editing the available terms themselves. When one
> adds a "copy editor" term to the taxonomy, they will pick that this is of
> type "user." Then, there will of course also be a drop-down in the metabox
> itself for choosing a user. If one were to make a "due date" term, they
> would choose "date" as the type when editing the taxonomy. Then in the
> metabox there would be a date selector.
> 
> So can I customize the view of editing the taxonomy like this?
> 
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers


From mikeschinkel at newclarity.net  Sun Aug  1 21:40:42 2010
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Sun, 1 Aug 2010 17:40:42 -0400
Subject: [wp-hackers] creating new menus
In-Reply-To: <AANLkTinXOLM73M=L2DT3fnMktP7sv_c6z9kg-N6-3Vwq@mail.gmail.com>
References: <AANLkTinXOLM73M=L2DT3fnMktP7sv_c6z9kg-N6-3Vwq@mail.gmail.com>
Message-ID: <5C74ED7A-1517-4E0C-BA77-175013D45E48@newclarity.net>

Jared:

Menu locations are stored as "theme mods."  There is a function to retrieve locations but not to set them although you can create that function yourself:

$locations = get_nav_menu_locations();

function set_nav_menu_locations($locations) {
	set_theme_mod('nav_menu_locations' , $locations);
}

Does this help?

-Mike

On Aug 1, 2010, at 9:32 AM, Jared Williams wrote:

> Thanks Mike, was not apparently the nav-menus source file i looked at
> before.
> 
> I managed to create menus, register locations, ect. only thing that I
> couldn't managed to get working was assigning the menu locations, if empty,
> the proper menu I created.
> 
> Both my menu names and locations use the same names, so I tried all kinds of
> stuff to get them to mesh, but I kept getting a warning/error because of
> this,     return (!empty( $locations[ $location ] )); Something about
> illegal offset on empty or isset.  Returning like this is new and strange to
> me haha.
> 
>   // my menus & locations = Top', 'Header', 'Footer'
>    if ( has_nav_menu( $location )) {
>        $locations = get_nav_menu_locations();
>        return (!empty( $locations[ $location ] ));
>    }
> 
> Thanks again for your help.
> Jared
> 
> On Sat, Jul 31, 2010 at 1:52 AM, <wp-hackers-request at lists.automattic.com>wrote:
> 
>> Send wp-hackers mailing list submissions to
>>       wp-hackers at lists.automattic.com
>> 
>> To subscribe or unsubscribe via the World Wide Web, visit
>>       http://lists.automattic.com/mailman/listinfo/wp-hackers
>> or, via email, send a message with subject or body 'help' to
>>       wp-hackers-request at lists.automattic.com
>> 
>> You can reach the person managing the list at
>>       wp-hackers-owner at lists.automattic.com
>> 
>> When replying, please edit your Subject line so it is more specific
>> than "Re: Contents of wp-hackers digest..."
>> 
>> 
>> Today's Topics:
>> 
>>  1. Re: how can I use the create new menu function for        making a
>>     default menu (Mike Schinkel)
>>  2. Re: Skip Main Query (Mike Schinkel)
>>  3. Re: Skip Main Query (Michael Pretty)
>>  4. Re: Skip Main Query (Peter Westwood)
>>  5. Re: how can I use the create new menu function for        making a
>>     default menu (Davit Barbakadze)
>> 
>> 
>> ----------------------------------------------------------------------
>> 
>> Message: 1
>> Date: Fri, 30 Jul 2010 20:44:34 -0400
>> From: Mike Schinkel <mikeschinkel at newclarity.net>
>> Subject: Re: [wp-hackers] how can I use the create new menu function
>>       for     making a default menu
>> To: wp-hackers at lists.automattic.com
>> Message-ID: <C424EA67-B1DA-4B5A-A216-B93CB921AAF8 at newclarity.net>
>> Content-Type: text/plain; charset=us-ascii
>> 
>> Hi Jared:
>> 
>> Do you mean these found in /wp-includes/nav-menu.php?
>> 
>> Create Menu:
>>       $menu_id = wp_create_nav_menu( $menu_name );
>> 
>> Create Menu Items:
>>       $menu = array(
>>               'menu-item-object-id' => 0,
>>               'menu-item-object' => '',
>>               'menu-item-parent-id' => 0,
>>               'menu-item-position' => 0,
>>               'menu-item-type' => 'custom',
>>               'menu-item-title' => '',
>>               'menu-item-url' => '',
>>               'menu-item-description' => '',
>>               'menu-item-attr-title' => '',
>>               'menu-item-target' => '',
>>               'menu-item-classes' => '',
>>               'menu-item-xfn' => '',
>>               'menu-item-status' => '',
>>       );
>>       $menu_item_db_id = wp_update_nav_menu_item( $menu_id, 0, $menu);
>> 
>> Update Menu Items:
>>       wp_update_nav_menu_item( $menu_id, $menu_item_db_id, $menu);
>> 
>> I've used them to create menus and menu items automatically.
>> 
>> To understand the parameters create some menus in the admin and then take a
>> look at the values created for different types of menu items in wp_postmeta.
>> 
>> Hope this helps?
>> 
>> -Mike
>> 
>> On Jul 30, 2010, at 8:25 PM, Jared Williams wrote:
>> 
>>> Hi,
>>> I know the menu system needs lots of work still, but I was wondering if
>>> anyone knows of a way to make use of whatever function(s) the 'Create
>> Menu'
>>> does when you make a new custom named menu in the dashboard to make a
>>> pre-made menu to go along with a registered menu location etc. This would
>> be
>>> nice so that when a theme were installed that has registered menus in it,
>>> the menu name you specify in the code would be created upon installing,
>> and
>>> deleted when uninstalling a theme.
>>> 
>>> I've searched for some kind of solution to this, and have studied the
>> code
>>> in nav-menus.php and other files with 3.0 source code. This is just about
>>> the only thing I am unable to figure out with 3.0, at least that I have
>>> tried to do so far.
>>> I figured here is probably the best place to ask such a question.
>>> 
>>> Thanks,
>>> 
>>> Jared Williams
>>> New2WP.com
>>> 
>>> 
>>> On Fri, Jul 30, 2010 at 11:33 AM,
>>> <wp-hackers-request at lists.automattic.com>wrote:
>>> 
>>>> Send wp-hackers mailing list submissions to
>>>>      wp-hackers at lists.automattic.com
>>>> 
>>>> To subscribe or unsubscribe via the World Wide Web, visit
>>>>      http://lists.automattic.com/mailman/listinfo/wp-hackers
>>>> or, via email, send a message with subject or body 'help' to
>>>>      wp-hackers-request at lists.automattic.com
>>>> 
>>>> You can reach the person managing the list at
>>>>      wp-hackers-owner at lists.automattic.com
>>>> 
>>>> When replying, please edit your Subject line so it is more specific
>>>> than "Re: Contents of wp-hackers digest..."
>>>> 
>>>> 
>>>> Today's Topics:
>>>> 
>>>> 1. Re: any way to clean after theme when it gets deleted?
>>>>    (Davit Barbakadze)
>>>> 2. Re: any way to clean after theme when it gets deleted?
>>>>    (Ashish Saini)
>>>> 3. Re: any way to clean after theme when it gets deleted?
>>>>    (Andrew Nacin)
>>>> 4. Re: any way to clean after theme when it gets deleted?
>>>>    (Ashish Saini)
>>>> 5. Re: any way to clean after theme when it gets deleted?
>>>>    (Davit Barbakadze)
>>>> 6. Re: any way to clean after theme when it gets deleted?
>>>>    (Andrew Nacin)
>>>> 7. switch_to_blog in WP3 (Bill Dennen)
>>>> 8. Re: any way to clean after theme when it gets deleted?
>>>>    (esmi at quirm dot net)
>>>> 
>>>> 
>>>> ----------------------------------------------------------------------
>>>> 
>>>> Message: 1
>>>> Date: Fri, 30 Jul 2010 17:17:51 +0400
>>>> From: Davit Barbakadze <jayarjo at gmail.com>
>>>> Subject: Re: [wp-hackers] any way to clean after theme when it gets
>>>>      deleted?
>>>> To: wp-hackers at lists.automattic.com
>>>> Message-ID:
>>>>      <AANLkTikhpSNdc-VtaLnOU2py=b+90tFjpCFLZeW+ecS6 at mail.gmail.com<b%2B90tFjpCFLZeW%2BecS6 at mail.gmail.com>
>> <b%2B90tFjpCFLZeW%2BecS6 at mail.gmail.com<b%252B90tFjpCFLZeW%252BecS6 at mail.gmail.com>
>>> 
>>>>> 
>>>> Content-Type: text/plain; charset=ISO-8859-1
>>>> 
>>>> It's not about switching (activate/deactivate), but deleting. It would
>>>> be pretty logical to remove all the stuff that theme has created on
>>>> activation.
>>>> 
>>>> On Fri, Jul 30, 2010 at 3:45 PM, Ashish Saini
>>>> <ashishsainiashfame at gmail.com> wrote:
>>>>> Hi Davit,
>>>>> 
>>>>> I think a better option would be to provide uninstall function as
>> leaving
>>>>> the options in the database makes sense as the user may switch back and
>>>> so
>>>>> it will save the pain of configuring it.
>>>>> 
>>>>> Thanks & Regards
>>>>> Ashish Saini aka Ashfame
>>>>> (Deserve Before You Desire)
>>>>> Homepage : http://www.ashfame.com | Blog : http://blog.ashfame.com |
>>>> Twitter
>>>>> : http://twitter.com/ashfame
>>>>> 
>>>>> 
>>>>> On Fri, Jul 30, 2010 at 4:44 PM, <diana.j.wiadji at hotmail.com> wrote:
>>>>> 
>>>>>> $
>>>>>> ------Original Message------
>>>>>> From: Davit Barbakadze
>>>>>> Sender: wp-hackers-bounces at lists.automattic.com
>>>>>> To: wp-hackers at lists.automattic.com
>>>>>> ReplyTo: wp-hackers at lists.automattic.com
>>>>>> Subject: [wp-hackers] ?any way to clean after theme when it gets
>>>> deleted?
>>>>>> Sent: Jul 30, 2010 18:02
>>>>>> 
>>>>>> I think everyone uses options and maybe even tables in their themes
>>>>>> nowadays. Is there any way coder can clean up after theme - delete
>>>>>> options, remove tables - when it get's uninstalled. Something similar
>>>>>> to what we have for plugins?
>>>>>> 
>>>>>> --
>>>>>> Davit Barbakadze
>>>>>> _______________________________________________
>>>>>> wp-hackers mailing list
>>>>>> wp-hackers at lists.automattic.com
>>>>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>>>>> 
>>>>>> 
>>>>>> 
>>>>>> Sent from my BlackBerry? smartphone on 3
>>>>>> _______________________________________________
>>>>>> wp-hackers mailing list
>>>>>> wp-hackers at lists.automattic.com
>>>>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>>>>> 
>>>>> _______________________________________________
>>>>> wp-hackers mailing list
>>>>> wp-hackers at lists.automattic.com
>>>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>>>> 
>>>> 
>>>> 
>>>> 
>>>> --
>>>> Davit Barbakadze
>>>> 
>>>> 
>>>> ------------------------------
>>>> 
>>>> Message: 2
>>>> Date: Fri, 30 Jul 2010 18:55:18 +0530
>>>> From: Ashish Saini <ashishsainiashfame at gmail.com>
>>>> Subject: Re: [wp-hackers] any way to clean after theme when it gets
>>>>      deleted?
>>>> To: wp-hackers at lists.automattic.com
>>>> Message-ID:
>>>>      <AANLkTikU0qcxQMMVgRwTrNOEHjXoUO_o0r44C+=_96Z+ at mail.gmail.com<96Z%2B at mail.gmail.com>
>> <96Z%2B at mail.gmail.com <96Z%252B at mail.gmail.com>>
>>>>> 
>>>> Content-Type: text/plain; charset=ISO-8859-1
>>>> 
>>>> You didn't get my point. I said you should provide an uninstaller
>> function
>>>> that wipes out data and it shouldn't be automated upon deactivation.
>>>> 
>>>> I would hate a theme which will ask for options to be configured again
>> when
>>>> I just switch back to another theme and now I want the previous theme
>> back.
>>>> 
>>>> Thanks & Regards
>>>> Ashish Saini aka Ashfame
>>>> (Deserve Before You Desire)
>>>> Homepage : http://www.ashfame.com | Blog : http://blog.ashfame.com |
>>>> Twitter
>>>> : http://twitter.com/ashfame
>>>> 
>>>> 
>>>> On Fri, Jul 30, 2010 at 6:47 PM, Davit Barbakadze <jayarjo at gmail.com>
>>>> wrote:
>>>> 
>>>>> It's not about switching (activate/deactivate), but deleting. It would
>>>>> be pretty logical to remove all the stuff that theme has created on
>>>>> activation.
>>>>> 
>>>>> On Fri, Jul 30, 2010 at 3:45 PM, Ashish Saini
>>>>> <ashishsainiashfame at gmail.com> wrote:
>>>>>> Hi Davit,
>>>>>> 
>>>>>> I think a better option would be to provide uninstall function as
>>>> leaving
>>>>>> the options in the database makes sense as the user may switch back
>> and
>>>>> so
>>>>>> it will save the pain of configuring it.
>>>>>> 
>>>>>> Thanks & Regards
>>>>>> Ashish Saini aka Ashfame
>>>>>> (Deserve Before You Desire)
>>>>>> Homepage : http://www.ashfame.com | Blog : http://blog.ashfame.com |
>>>>> Twitter
>>>>>> : http://twitter.com/ashfame
>>>>>> 
>>>>>> 
>>>>>> On Fri, Jul 30, 2010 at 4:44 PM, <diana.j.wiadji at hotmail.com> wrote:
>>>>>> 
>>>>>>> $
>>>>>>> ------Original Message------
>>>>>>> From: Davit Barbakadze
>>>>>>> Sender: wp-hackers-bounces at lists.automattic.com
>>>>>>> To: wp-hackers at lists.automattic.com
>>>>>>> ReplyTo: wp-hackers at lists.automattic.com
>>>>>>> Subject: [wp-hackers]  any way to clean after theme when it gets
>>>>> deleted?
>>>>>>> Sent: Jul 30, 2010 18:02
>>>>>>> 
>>>>>>> I think everyone uses options and maybe even tables in their themes
>>>>>>> nowadays. Is there any way coder can clean up after theme - delete
>>>>>>> options, remove tables - when it get's uninstalled. Something similar
>>>>>>> to what we have for plugins?
>>>>>>> 
>>>>>>> --
>>>>>>> Davit Barbakadze
>>>>>>> _______________________________________________
>>>>>>> wp-hackers mailing list
>>>>>>> wp-hackers at lists.automattic.com
>>>>>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>>>>>> 
>>>>>>> 
>>>>>>> 
>>>>>>> Sent from my BlackBerry? smartphone on 3
>>>>>>> _______________________________________________
>>>>>>> wp-hackers mailing list
>>>>>>> wp-hackers at lists.automattic.com
>>>>>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>>>>>> 
>>>>>> _______________________________________________
>>>>>> wp-hackers mailing list
>>>>>> wp-hackers at lists.automattic.com
>>>>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>>>>> 
>>>>> 
>>>>> 
>>>>> 
>>>>> --
>>>>> Davit Barbakadze
>>>>> _______________________________________________
>>>>> wp-hackers mailing list
>>>>> wp-hackers at lists.automattic.com
>>>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>>>> 
>>>> 
>>>> 
>>>> ------------------------------
>>>> 
>>>> Message: 3
>>>> Date: Fri, 30 Jul 2010 09:45:12 -0400
>>>> From: Andrew Nacin <wp at andrewnacin.com>
>>>> Subject: Re: [wp-hackers] any way to clean after theme when it gets
>>>>      deleted?
>>>> To: wp-hackers at lists.automattic.com
>>>> Message-ID:
>>>>      <AANLkTi=ua3FWx5UJnGs9TpxYbqk_dN_GhW_bxbas01ON at mail.gmail.com>
>>>> Content-Type: text/plain; charset=ISO-8859-1
>>>> 
>>>> On Fri, Jul 30, 2010 at 9:25 AM, Ashish Saini
>>>> <ashishsainiashfame at gmail.com>wrote:
>>>> 
>>>>> You didn't get my point. I said you should provide an uninstaller
>>>> function
>>>>> that wipes out data and it shouldn't be automated upon deactivation.
>>>>> 
>>>> 
>>>> Not sure you got his point -- I believe Davit is referring to the
>>>> implementation of an uninstall hook for themes. He's pretty clear he'd
>> want
>>>> that triggered on deletion, not deactivation. Basically, how it works
>> for
>>>> plugins.
>>>> 
>>>> I think implementing themes uninstall hooks would be a logical future
>> step.
>>>> We could start by removing items created using the theme_mod functions,
>>>> which I don't think most themes use, but we use it for storing metadata
>> for
>>>> custom backgrounds and headers.
>>>> 
>>>> 
>>>> ------------------------------
>>>> 
>>>> Message: 4
>>>> Date: Fri, 30 Jul 2010 19:48:22 +0530
>>>> From: Ashish Saini <ashishsainiashfame at gmail.com>
>>>> Subject: Re: [wp-hackers] any way to clean after theme when it gets
>>>>      deleted?
>>>> To: wp-hackers at lists.automattic.com
>>>> Message-ID:
>>>>      <AANLkTim7MQR2P6yOUa0j1TiPfWiaXDrVXfJM94Xovm-v at mail.gmail.com>
>>>> Content-Type: text/plain; charset=ISO-8859-1
>>>> 
>>>> Andrew, I knew that. I just replied back with a possible solution for
>> his
>>>> case.
>>>> 
>>>> Thanks & Regards
>>>> Ashish Saini aka Ashfame
>>>> (Deserve Before You Desire)
>>>> Homepage : http://www.ashfame.com | Blog : http://blog.ashfame.com |
>>>> Twitter
>>>> : http://twitter.com/ashfame
>>>> 
>>>> 
>>>> On Fri, Jul 30, 2010 at 7:15 PM, Andrew Nacin <wp at andrewnacin.com>
>> wrote:
>>>> 
>>>>> On Fri, Jul 30, 2010 at 9:25 AM, Ashish Saini
>>>>> <ashishsainiashfame at gmail.com>wrote:
>>>>> 
>>>>>> You didn't get my point. I said you should provide an uninstaller
>>>>> function
>>>>>> that wipes out data and it shouldn't be automated upon deactivation.
>>>>>> 
>>>>> 
>>>>> Not sure you got his point -- I believe Davit is referring to the
>>>>> implementation of an uninstall hook for themes. He's pretty clear he'd
>>>> want
>>>>> that triggered on deletion, not deactivation. Basically, how it works
>> for
>>>>> plugins.
>>>>> 
>>>>> I think implementing themes uninstall hooks would be a logical future
>>>> step.
>>>>> We could start by removing items created using the theme_mod functions,
>>>>> which I don't think most themes use, but we use it for storing metadata
>>>> for
>>>>> custom backgrounds and headers.
>>>>> _______________________________________________
>>>>> wp-hackers mailing list
>>>>> wp-hackers at lists.automattic.com
>>>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>>>> 
>>>> 
>>>> 
>>>> ------------------------------
>>>> 
>>>> Message: 5
>>>> Date: Fri, 30 Jul 2010 18:32:12 +0400
>>>> From: Davit Barbakadze <jayarjo at gmail.com>
>>>> Subject: Re: [wp-hackers] any way to clean after theme when it gets
>>>>      deleted?
>>>> To: wp-hackers at lists.automattic.com
>>>> Message-ID:
>>>>      <AANLkTi=KdyyghUgN0-U46rkDThdGaYGmR1SH8c5F+w09 at mail.gmail.com<KdyyghUgN0-U46rkDThdGaYGmR1SH8c5F%2Bw09 at mail.gmail.com>
>> <KdyyghUgN0-U46rkDThdGaYGmR1SH8c5F%2Bw09 at mail.gmail.com<KdyyghUgN0-U46rkDThdGaYGmR1SH8c5F%252Bw09 at mail.gmail.com>
>>> 
>>>>> 
>>>> Content-Type: text/plain; charset=ISO-8859-1
>>>> 
>>>> theme_mod functions? what do they do?
>>>> 
>>>> On Fri, Jul 30, 2010 at 5:45 PM, Andrew Nacin <wp at andrewnacin.com>
>> wrote:
>>>>> On Fri, Jul 30, 2010 at 9:25 AM, Ashish Saini
>>>>> <ashishsainiashfame at gmail.com>wrote:
>>>>> 
>>>>>> You didn't get my point. I said you should provide an uninstaller
>>>> function
>>>>>> that wipes out data and it shouldn't be automated upon deactivation.
>>>>>> 
>>>>> 
>>>>> Not sure you got his point -- I believe Davit is referring to the
>>>>> implementation of an uninstall hook for themes. He's pretty clear he'd
>>>> want
>>>>> that triggered on deletion, not deactivation. Basically, how it works
>> for
>>>>> plugins.
>>>>> 
>>>>> I think implementing themes uninstall hooks would be a logical future
>>>> step.
>>>>> We could start by removing items created using the theme_mod functions,
>>>>> which I don't think most themes use, but we use it for storing metadata
>>>> for
>>>>> custom backgrounds and headers.
>>>>> _______________________________________________
>>>>> wp-hackers mailing list
>>>>> wp-hackers at lists.automattic.com
>>>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>>>> 
>>>> 
>>>> 
>>>> 
>>>> --
>>>> Davit Barbakadze
>>>> 
>>>> 
>>>> ------------------------------
>>>> 
>>>> Message: 6
>>>> Date: Fri, 30 Jul 2010 10:38:48 -0400
>>>> From: Andrew Nacin <wp at andrewnacin.com>
>>>> Subject: Re: [wp-hackers] any way to clean after theme when it gets
>>>>      deleted?
>>>> To: wp-hackers at lists.automattic.com
>>>> Message-ID:
>>>>      <AANLkTinDDOQTQyaZdnmazoiGn6HSGXVW9eLkffXm0HZw at mail.gmail.com>
>>>> Content-Type: text/plain; charset=ISO-8859-1
>>>> 
>>>> On Fri, Jul 30, 2010 at 10:32 AM, Davit Barbakadze <jayarjo at gmail.com
>>>>> wrote:
>>>> 
>>>>> theme_mod functions? what do they do?
>>>> 
>>>> 
>>>> Rudimentary options storage for themes. Each theme's mods are stored in
>> a
>>>> single DB option row in the form of mod_{$theme}.
>>>> 
>>>> Locations in core:
>>>> ./wp-includes/theme.php:1270:function get_theme_mod($name, $default =
>>>> false)
>>>> {
>>>> ./wp-includes/theme.php:1289:function set_theme_mod($name, $value) {
>>>> ./wp-includes/theme.php:1311:function remove_theme_mod( $name ) {
>>>> ./wp-includes/theme.php:1333:function remove_theme_mods() {
>>>> 
>>>> Codex pages:
>>>> http://codex.wordpress.org/Function_Reference/get_theme_mod
>>>> http://codex.wordpress.org/Function_Reference/set_theme_mod
>>>> http://codex.wordpress.org/Function_Reference/remove_theme_mod
>>>> http://codex.wordpress.org/Function_Reference/remove_theme_mods
>>>> 
>>>> 
>>>> ------------------------------
>>>> 
>>>> Message: 7
>>>> Date: Fri, 30 Jul 2010 11:29:11 -0400
>>>> From: Bill Dennen <dennen at gmail.com>
>>>> Subject: [wp-hackers] switch_to_blog in WP3
>>>> To: wp-hackers at lists.automattic.com
>>>> Message-ID:
>>>>      <AANLkTimgcjBN35jVm7+Q_9CsGcuJJdhL9E-vjWTCLfe3 at mail.gmail.com<AANLkTimgcjBN35jVm7%2BQ_9CsGcuJJdhL9E-vjWTCLfe3 at mail.gmail.com>
>> <AANLkTimgcjBN35jVm7%2BQ_9CsGcuJJdhL9E-vjWTCLfe3 at mail.gmail.com<AANLkTimgcjBN35jVm7%252BQ_9CsGcuJJdhL9E-vjWTCLfe3 at mail.gmail.com>
>>> 
>>>>> 
>>>> Content-Type: text/plain; charset=ISO-8859-1
>>>> 
>>>> Hi,
>>>> 
>>>> I wrote a plugin that allows one blog to pull posts in from another
>>>> blog via shortcode. I call it get-news. The syntax of the shortcode is
>>>> something like this:
>>>> 
>>>> [get-news site_name="news" numberposts="10" show_dates="0"]
>>>> 
>>>> In short, what this code does is switch to the blog located at /news/
>>>> and grab the 10 most recent posts and display them on the current
>>>> blog. There are other options, as well - like pulling posts by
>>>> category or tags, showing thumbnails, etc.
>>>> 
>>>> My code uses switch_to_blog to do this. I've read that this function
>>>> has a heavy performance hit. But, we've been using it with WP Super
>>>> Cache and it has worked well for us in WPMU 2.9.2. Plus, at this
>>>> point, my plugin is not meant for distribution -- it's used only on
>>>> the site I manage. (That could change...)
>>>> 
>>>> Now, my code is broken in WP3.x. Permalinks are incorrect and
>>>> thumbnails do not work properly.
>>>> 
>>>> I believe it's this bug, which is now listed as a "wontfix":
>>>> 
>>>> http://core.trac.wordpress.org/ticket/12040
>>>> 
>>>> In the bug report, there is mention that this bug could be 'fixed' via
>>>> a plugin via the switch_blog hook.
>>>> 
>>>> I'm looking for alternate suggestions for ways to do this. At this
>>>> point, this bug is holding us back from going with WP3, which we'd
>>>> like to do for many reasons!
>>>> 
>>>> One option I toyed with initially was using RSS feeds, but I could not
>>>> get the thumbnails over that way.
>>>> 
>>>> Looking forward to any suggestions.
>>>> 
>>>> Thanks-
>>>> Bill
>>>> 
>>>> 
>>>> ------------------------------
>>>> 
>>>> Message: 8
>>>> Date: Fri, 30 Jul 2010 16:33:08 +0100
>>>> From: esmi at quirm dot net <esmi at quirm.net>
>>>> Subject: Re: [wp-hackers] any way to clean after theme when it gets
>>>>      deleted?
>>>> To: wp-hackers at lists.automattic.com
>>>> Message-ID: <4C52F0B4.4030908 at quirm.net>
>>>> Content-Type: text/plain; charset=ISO-8859-1; format=flowed
>>>> 
>>>> on 30/07/2010 15:38 Andrew Nacin said the following:
>>>>> On Fri, Jul 30, 2010 at 10:32 AM, Davit Barbakadze <jayarjo at gmail.com
>>>>> wrote:
>>>> 
>>>>>> theme_mod functions? what do they do?
>>>> 
>>>>> Rudimentary options storage for themes. Each theme's mods are stored in
>> a
>>>>> single DB option row in the form of mod_{$theme}.
>>>> 
>>>> <snip>
>>>> 
>>>> It's the multiple single rows in the db that I'm not keen on. Most of
>>>> the time, I've been using a single row in the options table to store a
>>>> serialized array. Each theme then has a manual "reset" option which
>>>> removes all stored theme options but, thus far, I haven't found a way to
>>>> trigger the reset on theme deletion.
>>>> 
>>>> Mel / esmi
>>>> --
>>>> WordPress theme developer
>>>> http://quirm.net
>>>> http://blackwidows.co.uk
>>>> 
>>>> 
>>>> ------------------------------
>>>> 
>>>> _______________________________________________
>>>> wp-hackers mailing list
>>>> wp-hackers at lists.automattic.com
>>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>>> 
>>>> 
>>>> End of wp-hackers Digest, Vol 66, Issue 120
>>>> *******************************************
>>>> 
>>> _______________________________________________
>>> wp-hackers mailing list
>>> wp-hackers at lists.automattic.com
>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>> 
>> 
>> 
>> ------------------------------
>> 
>> Message: 2
>> Date: Fri, 30 Jul 2010 20:54:24 -0400
>> From: Mike Schinkel <mikeschinkel at newclarity.net>
>> Subject: Re: [wp-hackers] Skip Main Query
>> To: wp-hackers at lists.automattic.com
>> Message-ID: <54BF7226-2AC0-4510-BF1F-9F4DAB606A73 at newclarity.net>
>> Content-Type: text/plain;       charset=us-ascii
>> 
>> On Jul 30, 2010, at 6:54 PM, Theodor Ramisch wrote:
>>> \No I've noticed that WordPress still queries the posts from the start
>> page. Is there a way to avoid that? Since I don't need the posts, I don't
>> want to make that query.
>> 
>> Nope.  I asked about this a while back here on the list and also I think on
>> trac but nobody else seemed interested in making it an option so I dropped
>> it.  Still, for a high traffic site it would make a lot of sense...
>> 
>> -Mike
>> 
>> ------------------------------
>> 
>> Message: 3
>> Date: Fri, 30 Jul 2010 21:31:08 -0400
>> From: Michael Pretty <mpretty at voceconnect.com>
>> Subject: Re: [wp-hackers] Skip Main Query
>> To: wp-hackers at lists.automattic.com
>> Message-ID: <4C537CDC.7050100 at voceconnect.com>
>> Content-Type: text/plain; charset=ISO-8859-1; format=flowed
>> 
>> If you don't need anything from the initial query, is there a reason you
>> don't just take over earlier, like 'init'?  Most everything should be
>> loaded at that point.
>> 
>> Michael Pretty
>> prettyboymp
>> 
>> On 7/30/10 6:54 PM, Theodor Ramisch wrote:
>>> Hi,
>>> 
>>> I'm writing a plugin which should display data from its own tables in
>> XML. It does not rely on any posts.
>>> 
>>> To reach my plugin, I've added query_vars, the rewrite rules and listen
>> on template_redirect for the parameters.
>>> 
>>> No I've noticed that WordPress still queries the posts from the start
>> page. Is there a way to avoid that? Since I don't need the posts, I don't
>> want to make that query.
>>> 
>>> Bypassing WP completely using mod_rewrite rules is not an option, since I
>> need to have access to the database, permissions and so on.
>>> 
>>> Thanks,
>>> 
>>>   Theodor
>>> 
>>> _______________________________________________
>>> wp-hackers mailing list
>>> wp-hackers at lists.automattic.com
>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>> 
>> 
>> 
>> 
>> ------------------------------
>> 
>> Message: 4
>> Date: Sat, 31 Jul 2010 06:09:26 +0100
>> From: Peter Westwood <peter.westwood at ftwr.co.uk>
>> Subject: Re: [wp-hackers] Skip Main Query
>> To: "wp-hackers at lists.automattic.com"
>>       <wp-hackers at lists.automattic.com>
>> Message-ID: <589DBEBE-AB8D-44A6-B567-F57E30058762 at ftwr.co.uk>
>> Content-Type: text/plain;       charset=us-ascii
>> 
>> On 31 Jul 2010, at 02:31, Michael Pretty <mpretty at voceconnect.com> wrote:
>> 
>>> If you don't need anything from the initial query, is there a reason you
>> don't just take over earlier, like 'init'?  Most everything should be loaded
>> at that point.
>>> 
>>> Michael Pretty
>>> prettyboymp
>>> 
>>> On 7/30/10 6:54 PM, Theodor Ramisch wrote:
>>>> Hi,
>>>> 
>>>> I'm writing a plugin which should display data from its own tables in
>> XML. It does not rely on any posts.
>>>> 
>>>> To reach my plugin, I've added query_vars, the rewrite rules and listen
>> on template_redirect for the parameters.
>>>> 
>>>> No I've noticed that WordPress still queries the posts from the start
>> page. Is there a way to avoid that? Since I don't need the posts, I don't
>> want to make that query.
>>>> 
>>>> Bypassing WP completely using mod_rewrite rules is not an option, since
>> I need to have access to the database, permissions and so on.
>>>> 
>>>> 
>> 
>> There is a tick for a hook to allow For this as it would be nice fir
>> buddypress too I'll have a look for it later today when I'm in trac
>> 
>> --
>> Peter Westwood
>> http://peter.westwood.name
>> 
>> 
>> 
>> ------------------------------
>> 
>> Message: 5
>> Date: Sat, 31 Jul 2010 09:51:28 +0400
>> From: Davit Barbakadze <jayarjo at gmail.com>
>> Subject: Re: [wp-hackers] how can I use the create new menu function
>>       for     making a default menu
>> To: wp-hackers at lists.automattic.com
>> Message-ID:
>>       <AANLkTimbhcjdqp8MWzyrO8X-gXZb_2Ax0y=JWL-a9tAA at mail.gmail.com>
>> Content-Type: text/plain; charset=ISO-8859-1
>> 
>> Great example, thanks! I will be using these too.
>> 
>> On Sat, Jul 31, 2010 at 4:44 AM, Mike Schinkel
>> <mikeschinkel at newclarity.net> wrote:
>>> Hi Jared:
>>> 
>>> Do you mean these found in /wp-includes/nav-menu.php?
>>> 
>>> Create Menu:
>>> ? ? ? ?$menu_id = wp_create_nav_menu( $menu_name );
>>> 
>>> Create Menu Items:
>>> ? ? ? ?$menu = array(
>>> ? ? ? ? ? ? ? ?'menu-item-object-id' => 0,
>>> ? ? ? ? ? ? ? ?'menu-item-object' => '',
>>> ? ? ? ? ? ? ? ?'menu-item-parent-id' => 0,
>>> ? ? ? ? ? ? ? ?'menu-item-position' => 0,
>>> ? ? ? ? ? ? ? ?'menu-item-type' => 'custom',
>>> ? ? ? ? ? ? ? ?'menu-item-title' => '',
>>> ? ? ? ? ? ? ? ?'menu-item-url' => '',
>>> ? ? ? ? ? ? ? ?'menu-item-description' => '',
>>> ? ? ? ? ? ? ? ?'menu-item-attr-title' => '',
>>> ? ? ? ? ? ? ? ?'menu-item-target' => '',
>>> ? ? ? ? ? ? ? ?'menu-item-classes' => '',
>>> ? ? ? ? ? ? ? ?'menu-item-xfn' => '',
>>> ? ? ? ? ? ? ? ?'menu-item-status' => '',
>>> ? ? ? ?);
>>> ? ? ? ?$menu_item_db_id = wp_update_nav_menu_item( $menu_id, 0, $menu);
>>> 
>>> Update Menu Items:
>>> ? ? ? ?wp_update_nav_menu_item( $menu_id, $menu_item_db_id, $menu);
>>> 
>>> I've used them to create menus and menu items automatically.
>>> 
>>> To understand the parameters create some menus in the admin and then take
>> a look at the values created for different types of menu items in
>> wp_postmeta.
>>> 
>>> Hope this helps?
>>> 
>>> -Mike
>>> 
>>> On Jul 30, 2010, at 8:25 PM, Jared Williams wrote:
>>> 
>>>> Hi,
>>>> I know the menu system needs lots of work still, but I was wondering if
>>>> anyone knows of a way to make use of whatever function(s) the 'Create
>> Menu'
>>>> does when you make a new custom named menu in the dashboard to make a
>>>> pre-made menu to go along with a registered menu location etc. This
>> would be
>>>> nice so that when a theme were installed that has registered menus in
>> it,
>>>> the menu name you specify in the code would be created upon installing,
>> and
>>>> deleted when uninstalling a theme.
>>>> 
>>>> I've searched for some kind of solution to this, and have studied the
>> code
>>>> in nav-menus.php and other files with 3.0 source code. This is just
>> about
>>>> the only thing I am unable to figure out with 3.0, at least that I have
>>>> tried to do so far.
>>>> I figured here is probably the best place to ask such a question.
>>>> 
>>>> Thanks,
>>>> 
>>>> Jared Williams
>>>> New2WP.com
>>>> 
>>>> 
>>>> On Fri, Jul 30, 2010 at 11:33 AM,
>>>> <wp-hackers-request at lists.automattic.com>wrote:
>>>> 
>>>>> Send wp-hackers mailing list submissions to
>>>>> ? ? ? wp-hackers at lists.automattic.com
>>>>> 
>>>>> To subscribe or unsubscribe via the World Wide Web, visit
>>>>> ? ? ? http://lists.automattic.com/mailman/listinfo/wp-hackers
>>>>> or, via email, send a message with subject or body 'help' to
>>>>> ? ? ? wp-hackers-request at lists.automattic.com
>>>>> 
>>>>> You can reach the person managing the list at
>>>>> ? ? ? wp-hackers-owner at lists.automattic.com
>>>>> 
>>>>> When replying, please edit your Subject line so it is more specific
>>>>> than "Re: Contents of wp-hackers digest..."
>>>>> 
>>>>> 
>>>>> Today's Topics:
>>>>> 
>>>>> ?1. Re: any way to clean after theme when it gets deleted?
>>>>> ? ? (Davit Barbakadze)
>>>>> ?2. Re: any way to clean after theme when it gets deleted?
>>>>> ? ? (Ashish Saini)
>>>>> ?3. Re: any way to clean after theme when it gets deleted?
>>>>> ? ? (Andrew Nacin)
>>>>> ?4. Re: any way to clean after theme when it gets deleted?
>>>>> ? ? (Ashish Saini)
>>>>> ?5. Re: any way to clean after theme when it gets deleted?
>>>>> ? ? (Davit Barbakadze)
>>>>> ?6. Re: any way to clean after theme when it gets deleted?
>>>>> ? ? (Andrew Nacin)
>>>>> ?7. switch_to_blog in WP3 (Bill Dennen)
>>>>> ?8. Re: any way to clean after theme when it gets deleted?
>>>>> ? ? (esmi at quirm dot net)
>>>>> 
>>>>> 
>>>>> ----------------------------------------------------------------------
>>>>> 
>>>>> Message: 1
>>>>> Date: Fri, 30 Jul 2010 17:17:51 +0400
>>>>> From: Davit Barbakadze <jayarjo at gmail.com>
>>>>> Subject: Re: [wp-hackers] any way to clean after theme when it gets
>>>>> ? ? ? deleted?
>>>>> To: wp-hackers at lists.automattic.com
>>>>> Message-ID:
>>>>> ? ? ? <AANLkTikhpSNdc-VtaLnOU2py=b+90tFjpCFLZeW+ecS6 at mail.gmail.com<b%2B90tFjpCFLZeW%2BecS6 at mail.gmail.com>
>> <b%2B90tFjpCFLZeW%2BecS6 at mail.gmail.com<b%252B90tFjpCFLZeW%252BecS6 at mail.gmail.com>
>>> 
>>>>>> 
>>>>> Content-Type: text/plain; charset=ISO-8859-1
>>>>> 
>>>>> It's not about switching (activate/deactivate), but deleting. It would
>>>>> be pretty logical to remove all the stuff that theme has created on
>>>>> activation.
>>>>> 
>>>>> On Fri, Jul 30, 2010 at 3:45 PM, Ashish Saini
>>>>> <ashishsainiashfame at gmail.com> wrote:
>>>>>> Hi Davit,
>>>>>> 
>>>>>> I think a better option would be to provide uninstall function as
>> leaving
>>>>>> the options in the database makes sense as the user may switch back
>> and
>>>>> so
>>>>>> it will save the pain of configuring it.
>>>>>> 
>>>>>> Thanks & Regards
>>>>>> Ashish Saini aka Ashfame
>>>>>> (Deserve Before You Desire)
>>>>>> Homepage : http://www.ashfame.com | Blog : http://blog.ashfame.com |
>>>>> Twitter
>>>>>> : http://twitter.com/ashfame
>>>>>> 
>>>>>> 
>>>>>> On Fri, Jul 30, 2010 at 4:44 PM, <diana.j.wiadji at hotmail.com> wrote:
>>>>>> 
>>>>>>> $
>>>>>>> ------Original Message------
>>>>>>> From: Davit Barbakadze
>>>>>>> Sender: wp-hackers-bounces at lists.automattic.com
>>>>>>> To: wp-hackers at lists.automattic.com
>>>>>>> ReplyTo: wp-hackers at lists.automattic.com
>>>>>>> Subject: [wp-hackers] ?any way to clean after theme when it gets
>>>>> deleted?
>>>>>>> Sent: Jul 30, 2010 18:02
>>>>>>> 
>>>>>>> I think everyone uses options and maybe even tables in their themes
>>>>>>> nowadays. Is there any way coder can clean up after theme - delete
>>>>>>> options, remove tables - when it get's uninstalled. Something similar
>>>>>>> to what we have for plugins?
>>>>>>> 
>>>>>>> --
>>>>>>> Davit Barbakadze
>>>>>>> _______________________________________________
>>>>>>> wp-hackers mailing list
>>>>>>> wp-hackers at lists.automattic.com
>>>>>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>>>>>> 
>>>>>>> 
>>>>>>> 
>>>>>>> Sent from my BlackBerry? smartphone on 3
>>>>>>> _______________________________________________
>>>>>>> wp-hackers mailing list
>>>>>>> wp-hackers at lists.automattic.com
>>>>>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>>>>>> 
>>>>>> _______________________________________________
>>>>>> wp-hackers mailing list
>>>>>> wp-hackers at lists.automattic.com
>>>>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>>>>> 
>>>>> 
>>>>> 
>>>>> 
>>>>> --
>>>>> Davit Barbakadze
>>>>> 
>>>>> 
>>>>> ------------------------------
>>>>> 
>>>>> Message: 2
>>>>> Date: Fri, 30 Jul 2010 18:55:18 +0530
>>>>> From: Ashish Saini <ashishsainiashfame at gmail.com>
>>>>> Subject: Re: [wp-hackers] any way to clean after theme when it gets
>>>>> ? ? ? deleted?
>>>>> To: wp-hackers at lists.automattic.com
>>>>> Message-ID:
>>>>> ? ? ? <AANLkTikU0qcxQMMVgRwTrNOEHjXoUO_o0r44C+=_96Z+ at mail.gmail.com<96Z%2B at mail.gmail.com>
>> <96Z%2B at mail.gmail.com <96Z%252B at mail.gmail.com>>
>>>>>> 
>>>>> Content-Type: text/plain; charset=ISO-8859-1
>>>>> 
>>>>> You didn't get my point. I said you should provide an uninstaller
>> function
>>>>> that wipes out data and it shouldn't be automated upon deactivation.
>>>>> 
>>>>> I would hate a theme which will ask for options to be configured again
>> when
>>>>> I just switch back to another theme and now I want the previous theme
>> back.
>>>>> 
>>>>> Thanks & Regards
>>>>> Ashish Saini aka Ashfame
>>>>> (Deserve Before You Desire)
>>>>> Homepage : http://www.ashfame.com | Blog : http://blog.ashfame.com |
>>>>> Twitter
>>>>> : http://twitter.com/ashfame
>>>>> 
>>>>> 
>>>>> On Fri, Jul 30, 2010 at 6:47 PM, Davit Barbakadze <jayarjo at gmail.com>
>>>>> wrote:
>>>>> 
>>>>>> It's not about switching (activate/deactivate), but deleting. It would
>>>>>> be pretty logical to remove all the stuff that theme has created on
>>>>>> activation.
>>>>>> 
>>>>>> On Fri, Jul 30, 2010 at 3:45 PM, Ashish Saini
>>>>>> <ashishsainiashfame at gmail.com> wrote:
>>>>>>> Hi Davit,
>>>>>>> 
>>>>>>> I think a better option would be to provide uninstall function as
>>>>> leaving
>>>>>>> the options in the database makes sense as the user may switch back
>> and
>>>>>> so
>>>>>>> it will save the pain of configuring it.
>>>>>>> 
>>>>>>> Thanks & Regards
>>>>>>> Ashish Saini aka Ashfame
>>>>>>> (Deserve Before You Desire)
>>>>>>> Homepage : http://www.ashfame.com | Blog : http://blog.ashfame.com |
>>>>>> Twitter
>>>>>>> : http://twitter.com/ashfame
>>>>>>> 
>>>>>>> 
>>>>>>> On Fri, Jul 30, 2010 at 4:44 PM, <diana.j.wiadji at hotmail.com> wrote:
>>>>>>> 
>>>>>>>> $
>>>>>>>> ------Original Message------
>>>>>>>> From: Davit Barbakadze
>>>>>>>> Sender: wp-hackers-bounces at lists.automattic.com
>>>>>>>> To: wp-hackers at lists.automattic.com
>>>>>>>> ReplyTo: wp-hackers at lists.automattic.com
>>>>>>>> Subject: [wp-hackers] ?any way to clean after theme when it gets
>>>>>> deleted?
>>>>>>>> Sent: Jul 30, 2010 18:02
>>>>>>>> 
>>>>>>>> I think everyone uses options and maybe even tables in their themes
>>>>>>>> nowadays. Is there any way coder can clean up after theme - delete
>>>>>>>> options, remove tables - when it get's uninstalled. Something
>> similar
>>>>>>>> to what we have for plugins?
>>>>>>>> 
>>>>>>>> --
>>>>>>>> Davit Barbakadze
>>>>>>>> _______________________________________________
>>>>>>>> wp-hackers mailing list
>>>>>>>> wp-hackers at lists.automattic.com
>>>>>>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>>>>>>> 
>>>>>>>> 
>>>>>>>> 
>>>>>>>> Sent from my BlackBerry? smartphone on 3
>>>>>>>> _______________________________________________
>>>>>>>> wp-hackers mailing list
>>>>>>>> wp-hackers at lists.automattic.com
>>>>>>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>>>>>>> 
>>>>>>> _______________________________________________
>>>>>>> wp-hackers mailing list
>>>>>>> wp-hackers at lists.automattic.com
>>>>>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>>>>>> 
>>>>>> 
>>>>>> 
>>>>>> 
>>>>>> --
>>>>>> Davit Barbakadze
>>>>>> _______________________________________________
>>>>>> wp-hackers mailing list
>>>>>> wp-hackers at lists.automattic.com
>>>>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>>>>> 
>>>>> 
>>>>> 
>>>>> ------------------------------
>>>>> 
>>>>> Message: 3
>>>>> Date: Fri, 30 Jul 2010 09:45:12 -0400
>>>>> From: Andrew Nacin <wp at andrewnacin.com>
>>>>> Subject: Re: [wp-hackers] any way to clean after theme when it gets
>>>>> ? ? ? deleted?
>>>>> To: wp-hackers at lists.automattic.com
>>>>> Message-ID:
>>>>> ? ? ? <AANLkTi=ua3FWx5UJnGs9TpxYbqk_dN_GhW_bxbas01ON at mail.gmail.com>
>>>>> Content-Type: text/plain; charset=ISO-8859-1
>>>>> 
>>>>> On Fri, Jul 30, 2010 at 9:25 AM, Ashish Saini
>>>>> <ashishsainiashfame at gmail.com>wrote:
>>>>> 
>>>>>> You didn't get my point. I said you should provide an uninstaller
>>>>> function
>>>>>> that wipes out data and it shouldn't be automated upon deactivation.
>>>>>> 
>>>>> 
>>>>> Not sure you got his point -- I believe Davit is referring to the
>>>>> implementation of an uninstall hook for themes. He's pretty clear he'd
>> want
>>>>> that triggered on deletion, not deactivation. Basically, how it works
>> for
>>>>> plugins.
>>>>> 
>>>>> I think implementing themes uninstall hooks would be a logical future
>> step.
>>>>> We could start by removing items created using the theme_mod functions,
>>>>> which I don't think most themes use, but we use it for storing metadata
>> for
>>>>> custom backgrounds and headers.
>>>>> 
>>>>> 
>>>>> ------------------------------
>>>>> 
>>>>> Message: 4
>>>>> Date: Fri, 30 Jul 2010 19:48:22 +0530
>>>>> From: Ashish Saini <ashishsainiashfame at gmail.com>
>>>>> Subject: Re: [wp-hackers] any way to clean after theme when it gets
>>>>> ? ? ? deleted?
>>>>> To: wp-hackers at lists.automattic.com
>>>>> Message-ID:
>>>>> ? ? ? <AANLkTim7MQR2P6yOUa0j1TiPfWiaXDrVXfJM94Xovm-v at mail.gmail.com>
>>>>> Content-Type: text/plain; charset=ISO-8859-1
>>>>> 
>>>>> Andrew, I knew that. I just replied back with a possible solution for
>> his
>>>>> case.
>>>>> 
>>>>> Thanks & Regards
>>>>> Ashish Saini aka Ashfame
>>>>> (Deserve Before You Desire)
>>>>> Homepage : http://www.ashfame.com | Blog : http://blog.ashfame.com |
>>>>> Twitter
>>>>> : http://twitter.com/ashfame
>>>>> 
>>>>> 
>>>>> On Fri, Jul 30, 2010 at 7:15 PM, Andrew Nacin <wp at andrewnacin.com>
>> wrote:
>>>>> 
>>>>>> On Fri, Jul 30, 2010 at 9:25 AM, Ashish Saini
>>>>>> <ashishsainiashfame at gmail.com>wrote:
>>>>>> 
>>>>>>> You didn't get my point. I said you should provide an uninstaller
>>>>>> function
>>>>>>> that wipes out data and it shouldn't be automated upon deactivation.
>>>>>>> 
>>>>>> 
>>>>>> Not sure you got his point -- I believe Davit is referring to the
>>>>>> implementation of an uninstall hook for themes. He's pretty clear he'd
>>>>> want
>>>>>> that triggered on deletion, not deactivation. Basically, how it works
>> for
>>>>>> plugins.
>>>>>> 
>>>>>> I think implementing themes uninstall hooks would be a logical future
>>>>> step.
>>>>>> We could start by removing items created using the theme_mod
>> functions,
>>>>>> which I don't think most themes use, but we use it for storing
>> metadata
>>>>> for
>>>>>> custom backgrounds and headers.
>>>>>> _______________________________________________
>>>>>> wp-hackers mailing list
>>>>>> wp-hackers at lists.automattic.com
>>>>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>>>>> 
>>>>> 
>>>>> 
>>>>> ------------------------------
>>>>> 
>>>>> Message: 5
>>>>> Date: Fri, 30 Jul 2010 18:32:12 +0400
>>>>> From: Davit Barbakadze <jayarjo at gmail.com>
>>>>> Subject: Re: [wp-hackers] any way to clean after theme when it gets
>>>>> ? ? ? deleted?
>>>>> To: wp-hackers at lists.automattic.com
>>>>> Message-ID:
>>>>> ? ? ? <AANLkTi=KdyyghUgN0-U46rkDThdGaYGmR1SH8c5F+w09 at mail.gmail.com<KdyyghUgN0-U46rkDThdGaYGmR1SH8c5F%2Bw09 at mail.gmail.com>
>> <KdyyghUgN0-U46rkDThdGaYGmR1SH8c5F%2Bw09 at mail.gmail.com<KdyyghUgN0-U46rkDThdGaYGmR1SH8c5F%252Bw09 at mail.gmail.com>
>>> 
>>>>>> 
>>>>> Content-Type: text/plain; charset=ISO-8859-1
>>>>> 
>>>>> theme_mod functions? what do they do?
>>>>> 
>>>>> On Fri, Jul 30, 2010 at 5:45 PM, Andrew Nacin <wp at andrewnacin.com>
>> wrote:
>>>>>> On Fri, Jul 30, 2010 at 9:25 AM, Ashish Saini
>>>>>> <ashishsainiashfame at gmail.com>wrote:
>>>>>> 
>>>>>>> You didn't get my point. I said you should provide an uninstaller
>>>>> function
>>>>>>> that wipes out data and it shouldn't be automated upon deactivation.
>>>>>>> 
>>>>>> 
>>>>>> Not sure you got his point -- I believe Davit is referring to the
>>>>>> implementation of an uninstall hook for themes. He's pretty clear he'd
>>>>> want
>>>>>> that triggered on deletion, not deactivation. Basically, how it works
>> for
>>>>>> plugins.
>>>>>> 
>>>>>> I think implementing themes uninstall hooks would be a logical future
>>>>> step.
>>>>>> We could start by removing items created using the theme_mod
>> functions,
>>>>>> which I don't think most themes use, but we use it for storing
>> metadata
>>>>> for
>>>>>> custom backgrounds and headers.
>>>>>> _______________________________________________
>>>>>> wp-hackers mailing list
>>>>>> wp-hackers at lists.automattic.com
>>>>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>>>>> 
>>>>> 
>>>>> 
>>>>> 
>>>>> --
>>>>> Davit Barbakadze
>>>>> 
>>>>> 
>>>>> ------------------------------
>>>>> 
>>>>> Message: 6
>>>>> Date: Fri, 30 Jul 2010 10:38:48 -0400
>>>>> From: Andrew Nacin <wp at andrewnacin.com>
>>>>> Subject: Re: [wp-hackers] any way to clean after theme when it gets
>>>>> ? ? ? deleted?
>>>>> To: wp-hackers at lists.automattic.com
>>>>> Message-ID:
>>>>> ? ? ? <AANLkTinDDOQTQyaZdnmazoiGn6HSGXVW9eLkffXm0HZw at mail.gmail.com>
>>>>> Content-Type: text/plain; charset=ISO-8859-1
>>>>> 
>>>>> On Fri, Jul 30, 2010 at 10:32 AM, Davit Barbakadze <jayarjo at gmail.com
>>>>>> wrote:
>>>>> 
>>>>>> theme_mod functions? what do they do?
>>>>> 
>>>>> 
>>>>> Rudimentary options storage for themes. Each theme's mods are stored in
>> a
>>>>> single DB option row in the form of mod_{$theme}.
>>>>> 
>>>>> Locations in core:
>>>>> ./wp-includes/theme.php:1270:function get_theme_mod($name, $default =
>>>>> false)
>>>>> {
>>>>> ./wp-includes/theme.php:1289:function set_theme_mod($name, $value) {
>>>>> ./wp-includes/theme.php:1311:function remove_theme_mod( $name ) {
>>>>> ./wp-includes/theme.php:1333:function remove_theme_mods() {
>>>>> 
>>>>> Codex pages:
>>>>> http://codex.wordpress.org/Function_Reference/get_theme_mod
>>>>> http://codex.wordpress.org/Function_Reference/set_theme_mod
>>>>> http://codex.wordpress.org/Function_Reference/remove_theme_mod
>>>>> http://codex.wordpress.org/Function_Reference/remove_theme_mods
>>>>> 
>>>>> 
>>>>> ------------------------------
>>>>> 
>>>>> Message: 7
>>>>> Date: Fri, 30 Jul 2010 11:29:11 -0400
>>>>> From: Bill Dennen <dennen at gmail.com>
>>>>> Subject: [wp-hackers] switch_to_blog in WP3
>>>>> To: wp-hackers at lists.automattic.com
>>>>> Message-ID:
>>>>> ? ? ? <AANLkTimgcjBN35jVm7+Q_9CsGcuJJdhL9E-vjWTCLfe3 at mail.gmail.com<AANLkTimgcjBN35jVm7%2BQ_9CsGcuJJdhL9E-vjWTCLfe3 at mail.gmail.com>
>> <AANLkTimgcjBN35jVm7%2BQ_9CsGcuJJdhL9E-vjWTCLfe3 at mail.gmail.com<AANLkTimgcjBN35jVm7%252BQ_9CsGcuJJdhL9E-vjWTCLfe3 at mail.gmail.com>
>>> 
>>>>>> 
>>>>> Content-Type: text/plain; charset=ISO-8859-1
>>>>> 
>>>>> Hi,
>>>>> 
>>>>> I wrote a plugin that allows one blog to pull posts in from another
>>>>> blog via shortcode. I call it get-news. The syntax of the shortcode is
>>>>> something like this:
>>>>> 
>>>>> [get-news site_name="news" numberposts="10" show_dates="0"]
>>>>> 
>>>>> In short, what this code does is switch to the blog located at /news/
>>>>> and grab the 10 most recent posts and display them on the current
>>>>> blog. There are other options, as well - like pulling posts by
>>>>> category or tags, showing thumbnails, etc.
>>>>> 
>>>>> My code uses switch_to_blog to do this. I've read that this function
>>>>> has a heavy performance hit. But, we've been using it with WP Super
>>>>> Cache and it has worked well for us in WPMU 2.9.2. Plus, at this
>>>>> point, my plugin is not meant for distribution -- it's used only on
>>>>> the site I manage. (That could change...)
>>>>> 
>>>>> Now, my code is broken in WP3.x. Permalinks are incorrect and
>>>>> thumbnails do not work properly.
>>>>> 
>>>>> I believe it's this bug, which is now listed as a "wontfix":
>>>>> 
>>>>> http://core.trac.wordpress.org/ticket/12040
>>>>> 
>>>>> In the bug report, there is mention that this bug could be 'fixed' via
>>>>> a plugin via the switch_blog hook.
>>>>> 
>>>>> I'm looking for alternate suggestions for ways to do this. At this
>>>>> point, this bug is holding us back from going with WP3, which we'd
>>>>> like to do for many reasons!
>>>>> 
>>>>> One option I toyed with initially was using RSS feeds, but I could not
>>>>> get the thumbnails over that way.
>>>>> 
>>>>> Looking forward to any suggestions.
>>>>> 
>>>>> Thanks-
>>>>> Bill
>>>>> 
>>>>> 
>>>>> ------------------------------
>>>>> 
>>>>> Message: 8
>>>>> Date: Fri, 30 Jul 2010 16:33:08 +0100
>>>>> From: esmi at quirm dot net <esmi at quirm.net>
>>>>> Subject: Re: [wp-hackers] any way to clean after theme when it gets
>>>>> ? ? ? deleted?
>>>>> To: wp-hackers at lists.automattic.com
>>>>> Message-ID: <4C52F0B4.4030908 at quirm.net>
>>>>> Content-Type: text/plain; charset=ISO-8859-1; format=flowed
>>>>> 
>>>>> on 30/07/2010 15:38 Andrew Nacin said the following:
>>>>>> On Fri, Jul 30, 2010 at 10:32 AM, Davit Barbakadze <jayarjo at gmail.com
>>>>>> wrote:
>>>>> 
>>>>>>> theme_mod functions? what do they do?
>>>>> 
>>>>>> Rudimentary options storage for themes. Each theme's mods are stored
>> in a
>>>>>> single DB option row in the form of mod_{$theme}.
>>>>> 
>>>>> <snip>
>>>>> 
>>>>> It's the multiple single rows in the db that I'm not keen on. Most of
>>>>> the time, I've been using a single row in the options table to store a
>>>>> serialized array. Each theme then has a manual "reset" option which
>>>>> removes all stored theme options but, thus far, I haven't found a way
>> to
>>>>> trigger the reset on theme deletion.
>>>>> 
>>>>> Mel / esmi
>>>>> --
>>>>> WordPress theme developer
>>>>> http://quirm.net
>>>>> http://blackwidows.co.uk
>>>>> 
>>>>> 
>>>>> ------------------------------
>>>>> 
>>>>> _______________________________________________
>>>>> wp-hackers mailing list
>>>>> wp-hackers at lists.automattic.com
>>>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>>>> 
>>>>> 
>>>>> End of wp-hackers Digest, Vol 66, Issue 120
>>>>> *******************************************
>>>>> 
>>>> _______________________________________________
>>>> wp-hackers mailing list
>>>> wp-hackers at lists.automattic.com
>>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>> 
>>> _______________________________________________
>>> wp-hackers mailing list
>>> wp-hackers at lists.automattic.com
>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>> 
>> 
>> 
>> 
>> --
>> Davit Barbakadze
>> 
>> 
>> ------------------------------
>> 
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>> 
>> 
>> End of wp-hackers Digest, Vol 66, Issue 122
>> *******************************************
>> 
> 
> 
> 
> -- 
> Thank you,
> 
> Jared Williams
> Web/Graphic Designer
> Tweeaks.com  |  New2WP.com
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers


From mikeschinkel at newclarity.net  Sun Aug  1 23:13:00 2010
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Sun, 1 Aug 2010 19:13:00 -0400
Subject: [wp-hackers] pre_get_posts problem
In-Reply-To: <AANLkTikTL-q76TTdddbE=wqbVvsD=MbiTda_GagatiY+@mail.gmail.com>
References: <AANLkTikTL-q76TTdddbE=wqbVvsD=MbiTda_GagatiY+@mail.gmail.com>
Message-ID: <BA63B8DC-E51D-4F3A-8F0A-30ACB1B7F6C7@newclarity.net>

On Jul 31, 2010, at 2:42 AM, Angelia Baladon wrote:

> Hi all,
> Well, I'm still at it trying to figure out what to do to get my custom post
> types in the loop for my author.php file. Ironically, I think I'm beginning
> to understand why everyone is using the pre_get_posts solution ... ? I got
> this bit from Andrew ... thanks Andrew! but, unfortunately, I tested it and
> it didn't return any results. Does anyone else have anything to add that
> might help here? There are literally hundreds of sites out there
> recommending the pre_get_posts solution to this, so, it anyone can help sort
> this out, I'll be sure to go viral with the answer ... if only *sigh*. It's
> over my head, so, all I can do is keep begging ;-)
> 
> Here's the code from Andrew:
> 
> <code>
> function my_request_cpt_author( $query_vars ) {
>   if ( is_author() )
>      $query_vars['post_type'] = array( 'post', 'my_post_type' );
>   return $query_vars;
> }
> add_filter( 'request', 'my_request_cpt_author' );
> </code>

Both the problem you are having and with that solution are several fold.  First you are testing for is_author() which returns true if you are on an author page however it will return true for the query of nav_menu_items as well.  So you have to ensure you are not running an author query and not an nav_menu_item query.

Also the "request" hook is the one I thought of first too, but it is fired before the $query->is_author property has been set so it won't return true inside a request hook even if you are on an author page.

So you need to use the right hook (one that works is "parse_query") and you need to figure out if you are running an author query, not that you are just on an author page.  You can do that by checking for isset($query->query['author_name']).  Of course if something else sets "author_name" for another query on the author page this will fail, but you can cross that bridge when you come to it.

I know you also wanted to have it work for the search page so do the same with the "s" arg, i.e. test isset($q['s']).  Same caveats here too; if someone sets the "s" query_var in the other query on the search page you'll get unexpected results.

Try this and let me know if it solves your problem:

add_filter( 'parse_query', 'my_parse_query' );
function my_parse_query( $query ) {
	$q = $query->query;
	$is_menu = (isset($q['post_type']) && $q['post_type']=='nav_menu_item');
	if (!$is_menu && ((is_author() && isset($q['author_name']) || (is_search() && isset($q['s']))))) {
		$query->query_vars['post_type'] = array( 'post', 'nav_menu_item', 'lesson', 'howto', 'workshop', 'attachment' );
	}
}


-Mike

From jayarjo at gmail.com  Mon Aug  2 15:18:46 2010
From: jayarjo at gmail.com (Davit Barbakadze)
Date: Mon, 2 Aug 2010 19:18:46 +0400
Subject: [wp-hackers] nav menus: theme locations vs. individual menus
In-Reply-To: <30C23B36-AE83-4A45-8874-E6BD92A09146@newclarity.net>
References: <AANLkTimrgnznc=o4bC3tCysWNN8icRq99Zjr1cuJdmgh@mail.gmail.com> 
	<AANLkTimUBf1CEPUG_w2u1X7gR0ud8uiLBXsws8C9NOvy@mail.gmail.com> 
	<AANLkTinV8dVv+CwUEsjRaqVh_Jsetevbz_B_pb7qhtha@mail.gmail.com> 
	<30C23B36-AE83-4A45-8874-E6BD92A09146@newclarity.net>
Message-ID: <AANLkTikdRkAWqj-vxnw7eDL=64Ak0Bfx1hzSOekX0QXk@mail.gmail.com>

Another thing I realized was not quite clear when I opened menu
management interface for the first time, was that
theme_location-to-nav_menu association meta box. It looked a bit out
of place. It could move to menu panel. Like user creates a menu,
populates it with items and then assigns it directly to a particular
theme location. There could be a dropdown list of theme locations
directly on menu panel, in addition to that a bit irrational combined
theme_location-to-menus meta box on the sidebar. No?

It's just that it's not exactly intuitive the way it works now. I
don't think users will undestand what it does without asking
questions.

On Mon, Aug 2, 2010 at 12:15 AM, Mike Schinkel
<mikeschinkel at newclarity.net> wrote:
> On Aug 1, 2010, at 10:19 AM, Davit Barbakadze wrote:
>> Although there's still something misleading there, not quite sure
>> what, maybe it's naming for the functions. For example
>> register_nav_menus() function and it's codex page here:
>> http://codex.wordpress.org/Function_Reference/register_nav_menus, they
>> both kinda tell you that you are registering (creating) a menu, but in
>> fact you are not. In fact it has nothing to do with menus. You are
>> just registering a theme location, a slot for a menu, that probably
>> has yet to be created. Maybe it should be like
>> register_nav_menu_locations() or something.
>
> +1 for that.
>
> -Mike
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>



-- 
Davit Barbakadze

From jer at simianuprising.com  Mon Aug  2 18:33:29 2010
From: jer at simianuprising.com (Jeremy Clarke)
Date: Mon, 2 Aug 2010 14:33:29 -0400
Subject: [wp-hackers] Customizing the view of custom taxonomies
In-Reply-To: <AANLkTikXrH0pJV_fpnCbAd=eLyxAHH+mJ_xXwLtLqBnV@mail.gmail.com>
References: <AANLkTik_cUCdkG6JXsG6yNAmdv4Jz1c7v+ei=GJhOW+8@mail.gmail.com>
	<AANLkTimlZOgXkQIPADLcOtmNJywlJd5GImfxuEGD88QE@mail.gmail.com>
	<AANLkTinGST6=tK-9w8p7aym9ZLtTiB50KZVuTmdihtyM@mail.gmail.com>
	<AANLkTin9wziSL10WvTjU9Tks7=X+mgpJScwPp+r3Orme@mail.gmail.com>
	<DCA59451-6C27-46B8-80B6-3F2AE64DF5D2@newclarity.net>
	<AANLkTik5YoqmLo4ds1K9yDcdeZina7ddMjk8GJdPEW6G@mail.gmail.com>
	<34E8AF80-1E96-4AEF-B9C8-94CC29EC9F59@newclarity.net>
	<AANLkTimRbNUOuNhQ_FyA2_Y020Bb1Z-GuOkp1G7aokKm@mail.gmail.com>
	<0E9294E8-C52A-4A92-AD12-D3E98F68CB99@newclarity.net>
	<AANLkTikXrH0pJV_fpnCbAd=eLyxAHH+mJ_xXwLtLqBnV@mail.gmail.com>
Message-ID: <AANLkTikZJ3xuOhUt3tNhf4-4=F385+hEZ_JdPPV4yHwb@mail.gmail.com>

On Sun, Aug 1, 2010 at 2:30 PM, Scott Bressler <sbressler at gmail.com> wrote:

> The drop-down is indeed for editing the available terms themselves. When
> one
> adds a "copy editor" term to the taxonomy, they will pick that this is of
> type "user." Then, there will of course also be a drop-down in the metabox
> itself for choosing a user. If one were to make a "due date" term, they
> would choose "date" as the type when editing the taxonomy. Then in the
> metabox there would be a date selector.
>

I think your needs require different solutions for each feature, and you are
probably over-estimating the value of taxonomies to solve them.

Your user-related setting about copy editor needs so much special stuff that
it should probably not use taxonomies. Try doing it with custom fields, I
don't think it will be harder than using taxonomies.

Your due date stuff also does not seem like it needs to be taxonomy-based.
Have you looked around at the existing editorial workflow plugins? I think
there are some that solve these problems already.

http://wordpress.org/extend/plugins/search.php?q=editorial


-- 
Jeremy Clarke | http://jeremyclarke.org
Code and Design | http://globalvoicesonline.org

From angelia at 10sexyapples.com  Mon Aug  2 19:33:09 2010
From: angelia at 10sexyapples.com (Angelia Baladon)
Date: Mon, 2 Aug 2010 12:33:09 -0700
Subject: [wp-hackers] pre_get_posts problem
Message-ID: <AANLkTi=h9WidSt9tNibw3LJwQYNNY+sPEWE8zXSP7+Pj@mail.gmail.com>

Oh happy day ( oh happy day ) ... Oh happy da-ay!

Mike, that code worked ( once I removed nav_menu_item from the array ...
which I'm sure is what you intended )

add_filter( 'parse_query', 'my_parse_query' );
function my_parse_query( $query ) {
       $q = $query->query;
       $is_menu = (isset($q['post_type']) &&
$q['post_type']=='nav_menu_item');
       if (!$is_menu && ((is_author() && isset($q['author_name']) ||
(is_search() && isset($q['s']))))) {
               $query->query_vars['post_type'] = array( 'post', 'lesson',
'howto', 'workshop', 'attachment' );
       }
}

And although I don't have a deep enough understanding of all of the internal
functions yet myself, I do understand completely what is happening here, so
I will be able to prevent anything setting something that would interfere.

Thanks so much for working this out Mike!!! Breathing much easier today~

Angie

From cross at thisismyurl.com  Mon Aug  2 20:41:30 2010
From: cross at thisismyurl.com (Christopher Ross)
Date: Mon, 2 Aug 2010 17:41:30 -0300
Subject: [wp-hackers] Can you execute JS when adding a Widget?
Message-ID: <F5DA5D40-FB32-4744-AB52-64AEA6AE1EF5@thisismyurl.com>

I have a Widget with multiple options that I want to show/hide depending on user settings.

it's working great except that when I add the Widget I can't seem to force the initial settings. Is there a way to execute JavaScript when a Widget is added?

c.

__

Christopher Ross

Toronto      1 (416) 840-5828
Fredericton 1 (506) 474-2708
New Orleans 1 (504) 322 3485

http://christopherross.ca
http://www.thisismyurl.com


From mikeschinkel at newclarity.net  Mon Aug  2 22:17:49 2010
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Mon, 2 Aug 2010 18:17:49 -0400
Subject: [wp-hackers] pre_get_posts problem
In-Reply-To: <AANLkTi=h9WidSt9tNibw3LJwQYNNY+sPEWE8zXSP7+Pj@mail.gmail.com>
References: <AANLkTi=h9WidSt9tNibw3LJwQYNNY+sPEWE8zXSP7+Pj@mail.gmail.com>
Message-ID: <B1934913-EBCE-4CFF-AA16-83EF782A6426@newclarity.net>

On Aug 2, 2010, at 3:33 PM, Angelia Baladon wrote:
> Oh happy day ( oh happy day ) ... Oh happy da-ay!
> 
> Mike, that code worked ( once I removed nav_menu_item from the array ...
> which I'm sure is what you intended )

Yes, correct.  I was testing with my post types and just copied yours at the end. 

> And although I don't have a deep enough understanding of all of the internal
> functions yet myself, I do understand completely what is happening here, so
> I will be able to prevent anything setting something that would interfere.
> 
> Thanks so much for working this out Mike!!! Breathing much easier today~


Good to hear, and you are welcome.  I know how frustrating it can be to need something done but to be stymied by all efforts to achieve it.  Glad I could help.

-Mike



From lox.dev at knc.nc  Mon Aug  2 22:27:21 2010
From: lox.dev at knc.nc (Lox)
Date: Tue, 3 Aug 2010 09:27:21 +1100
Subject: [wp-hackers] Best practice: custom registration form
Message-ID: <AANLkTinpqj-dUb5BmyiJ1Mnpgbdy_6ocx=myOGVqVOXK@mail.gmail.com>

Hello

For a special project I need the registration form to be on a page of
the web site and not on its own page as it is by default.

First I need a way for my plug-in to show the registration for at a
specific existing page. How can I handle that ?

- Using a short-code ? ( like [registration_form] )

- Using a page template ? But can a plug-in provide a page template to
show in the page template drop-down when editing a page?

Basically I do not want to replace the whole "target" page but rather
append the registration form to the its content.

Regards.

-- 
Lox
lox.dev at knc.nc

From mikeschinkel at newclarity.net  Tue Aug  3 00:16:51 2010
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Mon, 2 Aug 2010 20:16:51 -0400
Subject: [wp-hackers] Time for a wp_post_relationships table?
Message-ID: <10320216-AFB8-4063-A2C0-ED3B5DCBFC12@newclarity.net>

Hi all,

Is it time to discuss a wp_post_relationships table?   Michael Pretty made some rather insightful remarks[1] on the topic last week and I've been bumping into the same:

On Jul 26, 2010, at 10:30 PM, Michael Pretty wrote: 
> We have a couple more projects lined up where we need a many to many relationship between objects and have decided that for us the best option is to bite the bullet and create a new table.  Its something we usually leave as a last resort, but at this point, that seems like the best option because of the issues you mentioned.  I haven't yet worked out all the details of how it is going to work other than a table that stores parent_id, child_id and relationship_type, with lots of caching.  At this point it just seems like it is going to be the only way to provide the many to many relationship that is both stable and provides decent performance.

So I submitted a "straw-man proposal"[2] as a ticket on trac[3].  

If you are interested in discussing it, PLEASE let's do it on the trac ticket[3].

-Mike

[1] http://lists.automattic.com/pipermail/wp-hackers/2010-July/033510.html
[2] http://en.wikipedia.org/wiki/Straw_man_proposal
[3] http://core.trac.wordpress.org/ticket/14513


From thenbrent at gmail.com  Tue Aug  3 01:08:50 2010
From: thenbrent at gmail.com (Brent Shepherd)
Date: Tue, 3 Aug 2010 11:08:50 +1000
Subject: [wp-hackers] Best practice: custom registration form
In-Reply-To: <AANLkTinpqj-dUb5BmyiJ1Mnpgbdy_6ocx=myOGVqVOXK@mail.gmail.com>
References: <AANLkTinpqj-dUb5BmyiJ1Mnpgbdy_6ocx=myOGVqVOXK@mail.gmail.com>
Message-ID: <AANLkTinzPn2Ng_eA1iAMgvSAFJJ+kw+mgkd1Dd+dAYCF@mail.gmail.com>

Hi Lox,

Checkout two existing plugins for examples:
http://wordpress.org/extend/plugins/theme-my-login/
http://wordpress.org/extend/plugins/ajax-login/

The first creates it's own page while the second uses short codes & widgets.
Theme my login provides reigstration functionality on the login page.

Brent


On Tue, Aug 3, 2010 at 8:27 AM, Lox <lox.dev at knc.nc> wrote:

> Hello
>
> For a special project I need the registration form to be on a page of
> the web site and not on its own page as it is by default.
>
> First I need a way for my plug-in to show the registration for at a
> specific existing page. How can I handle that ?
>
> - Using a short-code ? ( like [registration_form] )
>
> - Using a page template ? But can a plug-in provide a page template to
> show in the page template drop-down when editing a page?
>
> Basically I do not want to replace the whole "target" page but rather
> append the registration form to the its content.
>
> Regards.
>
> --
> Lox
> lox.dev at knc.nc
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From otto at ottodestruct.com  Tue Aug  3 01:22:09 2010
From: otto at ottodestruct.com (Otto)
Date: Mon, 2 Aug 2010 20:22:09 -0500
Subject: [wp-hackers] Time for a wp_post_relationships table?
In-Reply-To: <10320216-AFB8-4063-A2C0-ED3B5DCBFC12@newclarity.net>
References: <10320216-AFB8-4063-A2C0-ED3B5DCBFC12@newclarity.net>
Message-ID: <AANLkTi=kgvq2TGQmBmB8gdtUUA-mEsLMqaTt5KjybVdT@mail.gmail.com>

This seems like something you could just use meta tables for. Not sure
why this needs a whole other table.

-Otto



On Mon, Aug 2, 2010 at 7:16 PM, Mike Schinkel
<mikeschinkel at newclarity.net> wrote:
> Hi all,
>
> Is it time to discuss a wp_post_relationships table? ? Michael Pretty made some rather insightful remarks[1] on the topic last week and I've been bumping into the same:
>
> On Jul 26, 2010, at 10:30 PM, Michael Pretty wrote:
>> We have a couple more projects lined up where we need a many to many relationship between objects and have decided that for us the best option is to bite the bullet and create a new table. ?Its something we usually leave as a last resort, but at this point, that seems like the best option because of the issues you mentioned. ?I haven't yet worked out all the details of how it is going to work other than a table that stores parent_id, child_id and relationship_type, with lots of caching. ?At this point it just seems like it is going to be the only way to provide the many to many relationship that is both stable and provides decent performance.
>
> So I submitted a "straw-man proposal"[2] as a ticket on trac[3].
>
> If you are interested in discussing it, PLEASE let's do it on the trac ticket[3].
>
> -Mike
>
> [1] http://lists.automattic.com/pipermail/wp-hackers/2010-July/033510.html
> [2] http://en.wikipedia.org/wiki/Straw_man_proposal
> [3] http://core.trac.wordpress.org/ticket/14513
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From mikeschinkel at newclarity.net  Tue Aug  3 01:29:57 2010
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Mon, 2 Aug 2010 21:29:57 -0400
Subject: [wp-hackers] Time for a wp_post_relationships table?
In-Reply-To: <AANLkTi=kgvq2TGQmBmB8gdtUUA-mEsLMqaTt5KjybVdT@mail.gmail.com>
References: <10320216-AFB8-4063-A2C0-ED3B5DCBFC12@newclarity.net>
	<AANLkTi=kgvq2TGQmBmB8gdtUUA-mEsLMqaTt5KjybVdT@mail.gmail.com>
Message-ID: <E8389048-ABB0-474B-9223-AB8EC2C8FBE2@newclarity.net>

On Aug 2, 2010, at 9:22 PM, Otto wrote:
> 
> This seems like something you could just use meta tables for. Not sure
> why this needs a whole other table.


Discuss on trac? 

http://core.trac.wordpress.org/ticket/14513

(or is it better to discuss here. I'm guess I'm not sure.)

-Mike


From johnbillion+wp at gmail.com  Tue Aug  3 02:07:21 2010
From: johnbillion+wp at gmail.com (John Blackbourn)
Date: Tue, 3 Aug 2010 03:07:21 +0100
Subject: [wp-hackers] Time for a wp_post_relationships table?
In-Reply-To: <10320216-AFB8-4063-A2C0-ED3B5DCBFC12@newclarity.net>
References: <10320216-AFB8-4063-A2C0-ED3B5DCBFC12@newclarity.net>
Message-ID: <AANLkTikWu9dHLpubhj4EgHRogw_CdaGa5majKYTzuaqm@mail.gmail.com>

On Tue, Aug 3, 2010 at 1:16 AM, Mike Schinkel
<mikeschinkel at newclarity.net> wrote:
> [1] http://lists.automattic.com/pipermail/wp-hackers/2010-July/033510.html

This link doesn't provide much information about why we need a posts
relationship table. Are there some other more relevant posts in that
thread with details?

From mikeschinkel at newclarity.net  Tue Aug  3 02:39:13 2010
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Mon, 2 Aug 2010 22:39:13 -0400
Subject: [wp-hackers] Time for a wp_post_relationships table?
In-Reply-To: <AANLkTikWu9dHLpubhj4EgHRogw_CdaGa5majKYTzuaqm@mail.gmail.com>
References: <10320216-AFB8-4063-A2C0-ED3B5DCBFC12@newclarity.net>
	<AANLkTikWu9dHLpubhj4EgHRogw_CdaGa5majKYTzuaqm@mail.gmail.com>
Message-ID: <FA38AE65-7B98-4633-8BB0-7DA6F8CAAF5A@newclarity.net>

On Aug 2, 2010, at 9:22 PM, Otto wrote:
> This seems like something you could just use meta tables for. Not sure
> why this needs a whole other table.

On Aug 2, 2010, at 10:07 PM, John Blackbourn wrote:
> On Tue, Aug 3, 2010 at 1:16 AM, Mike Schinkel
> <mikeschinkel at newclarity.net> wrote:
>> [1] http://lists.automattic.com/pipermail/wp-hackers/2010-July/033510.html
> 
> This link doesn't provide much information about why we need a posts
> relationship table. Are there some other more relevant posts in that
> thread with details?

Okay, I guess asking to discuss on trac was a fail.  Live and learn.

I'm not sure exactly why Michael Pretty decided he'll use a custom table in the future but I'll give you the reasons why I'm starting to think it makes sense, starting with *least* important to most  (Michael, if you are listening please do let us know!)

1.) Post-to-post relationships are a special pattern that has extremely broad applicability across many use-cases.  Having a special purpose functionality to handle common use-cases makes sense much like why foreach() exists in PHP even though for() would have addressed every use-case where foreach() is used. Same here, we could use other alternatives but post-to-post relationships are so fundamental why delegate that use-case to generic functionality?

2.) If we delegate this to a case of "just use post meta" then we'll find different plugins will implement relationships different, i.e. using different meta_keys and thus won't interoperate.

3.) With the inclusion of a wp_post_relationships table we'll lay the groundwork for being able to add functions to core like but not limited to get_related_posts($post_id) as well as admin UI functionality to interact with related posts. We'll also lay groundwork for plugins to interoperate.

4.) Using taxonomy mirrored posts means ensuring nothing accidentally changes one of them without changing the other.  With plugins that can add/update/delete posts or taxonomy terms independently, especially via direct SQL, it gets very hard to ensure they don't get out of sync.

5.) Using postmeta to store post-to-post relationships means storing foreign keys in non-indexed longtext meta_value field or embedded in the meta_key field. That's not too bad if you are looking up via post_id but it's awful if you have a large database with an even larger number of relationships and you need to do a select or worse join to the post->ID that is stored in meta_value.  It's absolutely not scalable and while #1 thru #4 are all debatable I'm pretty sure everyone can understand how this is unworkable for sites that may need to scale one day? 

While I think we could come up with arguments to add many other tables too I'm not sure we could find another pattern that would be as relevant as a table that allows relating posts since posts are the core of the entire system.

Thoughts?

-Mike
P.S. Or course I've learned anytime I make an absolute statement like #5 on this list I'm certain to get people to contradict me, so bring it on! :)






From otto at ottodestruct.com  Tue Aug  3 04:34:16 2010
From: otto at ottodestruct.com (Otto)
Date: Mon, 2 Aug 2010 23:34:16 -0500
Subject: [wp-hackers] Time for a wp_post_relationships table?
In-Reply-To: <FA38AE65-7B98-4633-8BB0-7DA6F8CAAF5A@newclarity.net>
References: <10320216-AFB8-4063-A2C0-ED3B5DCBFC12@newclarity.net> 
	<AANLkTikWu9dHLpubhj4EgHRogw_CdaGa5majKYTzuaqm@mail.gmail.com> 
	<FA38AE65-7B98-4633-8BB0-7DA6F8CAAF5A@newclarity.net>
Message-ID: <AANLkTik_9ryy76WfF3U7R=jQzgN5vBOGJSt5afURGFCo@mail.gmail.com>

On Mon, Aug 2, 2010 at 9:39 PM, Mike Schinkel
<mikeschinkel at newclarity.net> wrote:
> Okay, I guess asking to discuss on trac was a fail. ?Live and learn.

Trac comments is better for discussion of patches and code and such.
Not for ideas.

However, I'll play devil's advocate.

> 1.) Post-to-post relationships are a special pattern that has extremely broad applicability across many use-cases. ?Having a special purpose functionality to handle common use-cases makes sense much like why foreach() exists in PHP even though for() would have addressed every use-case where foreach() is used. Same here, we could use other alternatives but post-to-post relationships are so fundamental why delegate that use-case to generic functionality?

There is no use case in core that requires post-to-post relationships
in this way. Even if comments become a post type, it's a many-to-one
relationship that can easily use the post_parent field. For special
plugin cases, they should devise their own methods for doing what they
want. Hell, they will anyway.

> 2.) If we delegate this to a case of "just use post meta" then we'll find different plugins will implement relationships different, i.e. using different meta_keys and thus won't interoperate.

They won't interoperate anyway. The proposed table doesn't specify
what the given relationships *mean*. What does it mean if I have a
bunch of posts related to other posts and to taxonomies? No idea. It's
just a big table of numbers, you can interpret it any way you choose.

> 3.) With the inclusion of a wp_post_relationships table we'll lay the groundwork for being able to add functions to core like but not limited to get_related_posts($post_id) as well as admin UI functionality to interact with related posts. We'll also lay groundwork for plugins to interoperate.

Generally we don't put things in core just so plugins can use them.
There needs to be some kind of core use of this table. Making a table
that will be empty unless you use a specific plugin is silly.

If plugins want to interoperate, they can do that now by having plugin
developers talk to one another.

> 4.) Using taxonomy mirrored posts means ensuring nothing accidentally changes one of them without changing the other. ?With plugins that can add/update/delete posts or taxonomy terms independently, especially via direct SQL, it gets very hard to ensure they don't get out of sync.

I don't see how taxonomy has anything to do with post-to-post
relationships, but then I also admit that I don't understand any
significant use for the the table as proposed. A fuller and more
complete explanation would be preferred. The links you gave were light
on detail.

> 5.) Using postmeta to store post-to-post relationships means storing foreign keys in non-indexed longtext meta_value field or embedded in the meta_key field. That's not too bad if you are looking up via post_id but it's awful if you have a large database with an even larger number of relationships and you need to do a select or worse join to the post->ID that is stored in meta_value. ?It's absolutely not scalable and while #1 thru #4 are all debatable I'm pretty sure everyone can understand how this is unworkable for sites that may need to scale one day?

Post meta could be used for the majority of cases, and I don't see
that there's any scaling issues whatsoever there. The meta_value
doesn't need to be indexed to join on it, when you're using the
meta_key as a selection mechanism. How many post relationships can a
post have? 1000 to 1000? What would be the point?

What *is* the point, anyway? What does this table *mean*? What data
does it hold? Speaking abstract is fine, but I don't see the use for
the data itself, because I see no use cases here at all. What is a
specific use case that I can point to and say "this is why we need
this"?

-Otto

From lox.dev at knc.nc  Tue Aug  3 06:14:42 2010
From: lox.dev at knc.nc (Lox)
Date: Tue, 3 Aug 2010 17:14:42 +1100
Subject: [wp-hackers] Best practice: custom registration form
In-Reply-To: <AANLkTinzPn2Ng_eA1iAMgvSAFJJ+kw+mgkd1Dd+dAYCF@mail.gmail.com>
References: <AANLkTinpqj-dUb5BmyiJ1Mnpgbdy_6ocx=myOGVqVOXK@mail.gmail.com> 
	<AANLkTinzPn2Ng_eA1iAMgvSAFJJ+kw+mgkd1Dd+dAYCF@mail.gmail.com>
Message-ID: <AANLkTi=NbiGEihSY0a2ve7v92WyPdVhTRtuscjXDZCd_@mail.gmail.com>

2010/8/3 Brent Shepherd <thenbrent at gmail.com>:
> Checkout two existing plug-ins for examples:
> http://wordpress.org/extend/plugins/theme-my-login/
> http://wordpress.org/extend/plugins/ajax-login/
>
> The first creates it's own page while the second uses short codes & widgets.
> Theme my login provides registration functionality on the login page.

Thanks but I do not like "own page" method because I loose track of
the original page where I want the registration form to stand. I do
not like the short-code approach either because it will search for it
in every page whereas it will appear on one page only.

I am planning to use the "the_content" hook but it may be an ugly
approach, because, I need to "include" the registration form and
'the_content" hook needs its value to be returned and not echoed.

Still investigating....

-- 
Lox
lox.dev at knc.nc

From lox.dev at knc.nc  Tue Aug  3 06:18:55 2010
From: lox.dev at knc.nc (Lox)
Date: Tue, 3 Aug 2010 17:18:55 +1100
Subject: [wp-hackers] Custom post type, rewrite and permalink structure
Message-ID: <AANLkTimfnnCVKiCCA=8PEVKiCMw=8+0yTy=smMvkR4Kg@mail.gmail.com>

Hello,

Here is my permalink structure: /blog/%category%/%postname%/

I created a custom post_type called "Jobs". So wordpress, by itself,
makes the "jobs" posts stand here: /blog/jobs whereas I want them to
stand in /jobs. So, I set the post_type's rewrite arg to "jobs" but WP
still appends the permalink structure. How can I avoid that ?

Regards.

-- 
Lox
lox.dev at knc.nc

From mda at blogwaffe.com  Tue Aug  3 06:21:05 2010
From: mda at blogwaffe.com (Michael D Adams)
Date: Mon, 2 Aug 2010 23:21:05 -0700
Subject: [wp-hackers] Can you execute JS when adding a Widget?
In-Reply-To: <F5DA5D40-FB32-4744-AB52-64AEA6AE1EF5@thisismyurl.com>
References: <F5DA5D40-FB32-4744-AB52-64AEA6AE1EF5@thisismyurl.com>
Message-ID: <AANLkTi=6W0MEuob0wckip806KUT4foAoeTieG_gY42Qh@mail.gmail.com>

On Mon, Aug 2, 2010 at 1:41 PM, Christopher Ross <cross at thisismyurl.com> wrote:
> Is there a way to execute JavaScript when a Widget is added?

You can try taking over the wpWidgets.save function.  The function's
call signature when adding a new widget looks a little fragile, but
this seems to work.

I tested it with the core calendar widget by replacing the 'my_widget'
id_base in the JS below with 'calendar'.


/*
Plugin Name: JS Callback for My Widget
*/

function my_widget_add_js_callback() {
?>
<script type="text/javascript">
/* <![CDATA[ */
jQuery( function($) {
var origSave = wpWidgets.save;
wpWidgets.save = function( widget, del, animate, order ) {
        if (
                // It's one of my widgets
                'my_widget' == widget.find( 'input[name=id_base]' ).val()
        &&
                // This seems to be the signature of a just added widget
                !del && !animate && order
        ) {
                alert( 'Widget Added!' );
                // Do something
        }
        origSave.call( wpWidgets, widget, del, animate, order );
}
} );
/* ]]> */
</script>
<?php
}

add_action( 'admin_head-widgets.php', 'my_widget_add_js_callback' );

From thenbrent at gmail.com  Tue Aug  3 06:56:13 2010
From: thenbrent at gmail.com (Brent Shepherd)
Date: Tue, 3 Aug 2010 16:56:13 +1000
Subject: [wp-hackers] Custom post type, rewrite and permalink structure
In-Reply-To: <AANLkTimfnnCVKiCCA=8PEVKiCMw=8+0yTy=smMvkR4Kg@mail.gmail.com>
References: <AANLkTimfnnCVKiCCA=8PEVKiCMw=8+0yTy=smMvkR4Kg@mail.gmail.com>
Message-ID: <AANLkTikYgOE_qR120h0m26vcf4XbLRry_5_3OXcjruvS@mail.gmail.com>

The register post type function accepts a rewrite argument:
http://codex.wordpress.org/Function_Reference/register_post_type#Arguments

As far as I know, setting 'with_front' in that rewrite array to false will
avoid prepending '/blog' to your urls.




On Tue, Aug 3, 2010 at 4:18 PM, Lox <lox.dev at knc.nc> wrote:

> Hello,
>
> Here is my permalink structure: /blog/%category%/%postname%/
>
> I created a custom post_type called "Jobs". So wordpress, by itself,
> makes the "jobs" posts stand here: /blog/jobs whereas I want them to
> stand in /jobs. So, I set the post_type's rewrite arg to "jobs" but WP
> still appends the permalink structure. How can I avoid that ?
>
> Regards.
>
> --
> Lox
> lox.dev at knc.nc
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From shacker at birdhouse.org  Tue Aug  3 07:56:49 2010
From: shacker at birdhouse.org (Scot Hacker)
Date: Tue, 3 Aug 2010 00:56:49 -0700
Subject: [wp-hackers] Getting list of plugins from shell script
Message-ID: <5FA913D0-B741-4114-90C5-449D12961D3A@birdhouse.org>

Kind of obscure, but wondering if anyone has a script or command that can be used to derive a list of active plugins from the shell (not from PHP). I have this so far:

# Get list of active plugins from db
raw_plugins_sql="SELECT option_value FROM $dbname.wp_options WHERE option_name = 'active_plugins';"
echo $raw_plugins_sql
mysql -u root -e "$raw_plugins_sql" -p$root_db_pass $dbname

But the output is really messy and I can't seem to get any further with it (this  is part of a script where I'm trying to get a per-site listing of  active plugins used on each site on a server). Maybe need an awk expert here :)

Thanks,
Scot


From mikeschinkel at newclarity.net  Tue Aug  3 08:05:25 2010
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Tue, 3 Aug 2010 04:05:25 -0400
Subject: [wp-hackers] Time for a wp_post_relationships table?
In-Reply-To: <AANLkTik_9ryy76WfF3U7R=jQzgN5vBOGJSt5afURGFCo@mail.gmail.com>
References: <10320216-AFB8-4063-A2C0-ED3B5DCBFC12@newclarity.net>
	<AANLkTikWu9dHLpubhj4EgHRogw_CdaGa5majKYTzuaqm@mail.gmail.com>
	<FA38AE65-7B98-4633-8BB0-7DA6F8CAAF5A@newclarity.net>
	<AANLkTik_9ryy76WfF3U7R=jQzgN5vBOGJSt5afURGFCo@mail.gmail.com>
Message-ID: <F34C274D-9D82-4312-9727-F0E29FC6A96A@newclarity.net>

On Aug 3, 2010, at 12:34 AM, Otto wrote:
> However, I'll play devil's advocate.

I expect no less from you, though I have come to appreciate it. :)

In the same vein I'll respond. I currently see value but am open to having my opinion changed. So it's not a "fight to the death" on the topic but to have an honest debate. 

>> 1.) Post-to-post relationships are a special pattern that has extremely broad applicability across many use-cases.  Having a special purpose functionality to handle common use-cases makes sense much like why foreach() exists in PHP even though for() would have addressed every use-case where foreach() is used. Same here, we could use other alternatives but post-to-post relationships are so fundamental why delegate that use-case to generic functionality?
> 
> There is no use case in core that requires post-to-post relationships
> in this way.

Not yet, anyway though I could easily see one being added at some point in the future such as a related posts selection metabox that could be triggered by adding something like "related-posts-{$post_type}" in the "supports" section of register_post_type().  This would be helpful for every single site I've worked on since 3.0 was in beta (and before, even.)

> Even if comments become a post type, it's a many-to-one
> relationship that can easily use the post_parent field.

Yes, post_parent works well for one-to-many, but can't handle many-to-many.  It also can't handle it when a post can be on the many end of one-to-many but related to more than one post type (see examples below.)

> For special plugin cases, they should devise their own methods for
> doing what they want. Hell, they will anyway.

Why would we want to devise their own methods rather than use a standard approach built into core?  (It's an honest question.)

>> 2.) If we delegate this to a case of "just use post meta" then we'll find different plugins will implement relationships different, i.e. using different meta_keys and thus won't interoperate.
> 
> They won't interoperate anyway. The proposed table doesn't specify
> what the given relationships *mean*. What does it mean if I have a
> bunch of posts related to other posts and to taxonomies? No idea. It's
> just a big table of numbers, you can interpret it any way you choose.

You are getting too use-case specific; they don't need to specify what the relationships mean only that they are related. Plugins can add the "meaning" layer but WordPress should probably offer the core relationship support.

There are many generic functionalities that would have value.  For example, you could have a plugin that managed related posts in a grid editor and a use case for that would be actors in a movie and the grid would let the user add/edit actors for the movie and add annotate the name of their character from the movie.  Then another plugin could provide a "related posts" widget which could be used to display the actors on the movie page and the movies on the actor page.  With a standardized table like this those plugins could (and often would) be developed separately and unaware of the other.  Without such a table the only way to get those functionalities would be if one plugin author developed it all, if the two collaborated, or if one built on the other; all of which are much less likey scenarios.

>> 3.) With the inclusion of a wp_post_relationships table we'll lay the groundwork for being able to add functions to core like but not limited to get_related_posts($post_id) as well as admin UI functionality to interact with related posts. We'll also lay groundwork for plugins to interoperate.
> 
> Generally we don't put things in core just so plugins can use them.
> There needs to be some kind of core use of this table. Making a table
> that will be empty unless you use a specific plugin is silly.

> 
> If plugins want to interoperate, they can do that now by having plugin
> developers talk to one another.

Well, I don't think it is silly but our opinion differ.  Taken in a vacuum, that's like saying that if electric appliance vendors want their appliances to work they can collaborate with homebuilders to make sure that the homes are built with their proprietary connector of powering the appliances.  Fortunately for us that need not be the case because the industry had the forethought to standardize plugs and outlets (at least within the US, can't speak for everywhere else.) 

Or another analogy would be to say "If the browser vendor wants to interoperate with the web server, they can talk to one another."  If they had used the above logic, where would the web be now?

I think maybe I simply value standardization as a stepping stone for greater things and you don't (right?) and that difference in how we value standardization colors any discussion we have related to it. 

> I don't see how taxonomy has anything to do with post-to-post
> relationships, but then I also admit that I don't understand any
> significant use for the the table as proposed. A fuller and more
> complete explanation would be preferred. The links you gave were light
> on detail.

Michael Pretty implemented taxonomy mirrored posts in a project and mentioned it on the list.  I then asked for some help implementing from anyone who had done so (Michael didn't offer help but then I didn't directly ask him and he was under no obligation to help anyway.) So I implemented a taxonomy-mirrored posts plugin asked a question about it on the list to which Michael replied that he had come to the conclusion that it caused two many problems and that he was next going to use a custom table even though typically he would never add a new table.

The use-cases for post-to-post are probably not very apparent when using WordPress only as a blog but become much more apparent when one starts using it as a CMS with lots of different data types.  I'll give you numerous examples where I've needed it in the past several months (#1 thru #3 are actual projects I've worked on, #4 & #5 are hypothetical):

1.) A law firm website has attorneys, practice areas, articles, case studies, and events/presentations.  Each attorney is in one or more practice areas.  Each article and each case study can be attached to one or more attorneys and relevant to one or more practice areas.  Each event/presentation can have one or more attorneys presenting and can be represented one one or more practice areas' calendars.

2.) A conference website can have sessions, sponsors, presenters, time slots and rooms. A session can have one or more presenters and be presented in one or more time slots and one room per time slot ,and a presenter can represent a sponsor or not.

3.) A website listing restaurant menus can have restaurants, locations, menus. A restaurant can have one or more locations and one or more menus (breakfast, lunch, dinner, catering, etc.) A menu can apply to all locations for a restaurant or only a specific location.  

4.) A movie website could have movies and person-roles where a person-role could be an actor, producer, cinematographer, casting, film editing, costumer, set designer, composer, etc.

5.) A hospital website has doctors and departments.  Each department can have multiple doctors and each doctor can work in multiple departments.

6.) A radio station website could have stations and disc jockey's where a station could have multiple disc jockeys and each disc jockey could appear on multiple stations (given how radio works these days.)

I could actually give you many other examples if you need it; there is an example for almost every business that could potentially use WordPress for it's website (vs. just it's blog.) 

>> 5.) Using postmeta to store post-to-post relationships means storing foreign keys in non-indexed longtext meta_value field or embedded in the meta_key field. That's not too bad if you are looking up via post_id but it's awful if you have a large database with an even larger number of relationships and you need to do a select or worse join to the post->ID that is stored in meta_value.  It's absolutely not scalable and while #1 thru #4 are all debatable I'm pretty sure everyone can understand how this is unworkable for sites that may need to scale one day?
> 
> Post meta could be used for the majority of cases, and I don't see
> that there's any scaling issues whatsoever there. The meta_value
> doesn't need to be indexed to join on it, when you're using the
> meta_key as a selection mechanism. How many post relationships can a
> post have? 1000 to 1000? What would be the point?

It's not the number of post relationships that a *specific* post has, it's the *total* number of records with the matching meta_key in the wp_postmeta table.  Let's assume an IMDB.COM clone with only 1,000 movies listed (According to Google by searching "inurl:www.imdb.com/title/" IMDB.com has a jaw dropping 73,500,000 movies. Really, there are that many movies?  Wow.)  

1000 is trivial, but I didn't want to say 10,000+ because I didn't want you to argue with the number.   

So we add a postmeta field to relate post_id to the movie's post->ID, meta_key='actor', and meta_value relates to actor's post->ID.  Now let's assume that each post has 10 post_meta fields for "actor" on average. So that's 10,000 postmeta records.  Want a list of actors for a movie?    Here's the SQL:

$sql = $wpdb->prepare("
SELECT
	actor.post_title AS actor
FROM
	wp_posts actor 
	INNER JOIN wp_postmeta movie_actor ON actor.ID=movie_actor.meta_value AND movie_actor.meta_key='actor'
WHERE
	movie_actor.post_id=$d", $actor_id);

MySQL EXPLAIN gives us the following. Not too bad; we have to do a 10,000 record scan but at least it is on an 8 byte key:

*************************** 1. row ***************************
id           : 1
select_type  : SIMPLE
table        : movie_actor
type         : ref
possible_keys: post_id,meta_key
key          : post_id
key_len      : 8
ref          : const
rows         : 10,000
Extra        : Using where
*************************** 2. row ***************************
id           : 1
select_type  : SIMPLE
table        : actor
type         : eq_ref
possible_keys: PRIMARY
key          : PRIMARY
key_len      : 8
ref          : movie_actor.meta_value
rows         : 1
Extra        : Using where
2 rows in set 

OTOH, want a list of movies for an actor? Here's the query (almost the same):

$sql = $wpdb->prepare("
SELECT
	movie.post_title AS movie
FROM
	wp_posts movie 
	INNER JOIN wp_postmeta movie_actor ON movie.ID=movie_actor.post_id AND movie_actor.meta_key='actor'
WHERE
	movie_actor.meta_value=$d", $movie_id);

And here's the MySQL EXPLAIN.   10,000 records scanning a 768 byte key (and "Using where.")  YEOWCH!

*************************** 1. row ***************************
id           : 1
select_type  : SIMPLE
table        : movie_actor
type         : ref
possible_keys: post_id,meta_key
key          : meta_key
key_len      : 768
ref          : const
rows         : 10,000
Extra        : Using where
*************************** 2. row ***************************
id           : 1
select_type  : SIMPLE
table        : movie
type         : eq_ref
possible_keys: PRIMARY
key          : PRIMARY
key_len      : 8
ref          : movie_actor.post_id
rows         : 1
Extra        : 
2 rows in set 

Now what if we have 10,000 movies and 25 postmeta fields per movie?  Now we are talking abut scanning 768 byte fields for 250,000 records for *each* query like the latter one. 

To make matters worse, what if we now need to do a join?  What if we want a query that shows which actors have worked with other actors?  Now we have to do a table scan during a join.

But what if we had the second query using the proposed wp_post_relationships table:

SELECT
	movie.post_title AS movie
FROM
	wp_posts movie 
	INNER JOIN wp_post_relationships movie_actor ON movie.ID=movie_actor.parent_id
WHERE
	movie_actor.post_id=22

And MySQL EXPLAIN tells us we match one row with one row and no "Using where." This is about as good of MySQL performance as you can get.  For even moderate sized data sets this will be orders of magnitude faster than scanning a 768 byte key using where.  So we are talking about sites that will start slowing down significantly with almost trivial number of posts.

*************************** 1. row ***************************
id           : 1
select_type  : SIMPLE
table        : movie_actor
type         : ref
possible_keys: PRIMARY,post_id
key          : post_id
key_len      : 8
ref          : const
rows         : 1
Extra        : 
*************************** 2. row ***************************
id           : 1
select_type  : SIMPLE
table        : movie
type         : eq_ref
possible_keys: PRIMARY
key          : PRIMARY
key_len      : 8
ref          : wp30.movie_actor.parent_id
rows         : 1
Extra        : 
2 rows in set (0.02 sec)

Still think that is "no issue whatsoever?"  

If yes, here's some good reading: 

-- http://www.slideshare.net/techdude/how-to-kill-mysql-performance
-- http://joinfu.com/presentations/understanding_query_execution.pdf
-- http://www.devshed.com/c/a/MySQL/MySQL-Optimization-part-1/2/

> What *is* the point, anyway? What does this table *mean*? What data
> does it hold? Speaking abstract is fine, but I don't see the use for
> the data itself, because I see no use cases here at all. What is a
> specific use case that I can point to and say "this is why we need
> this"?

In a word if it's all about blogging only, most of this is unimportant.  

However, once CMS requirements are added into the mix it becomes important.  Examples #1 thru #6 above are specifics, not abstracts.  Not all of sites #1 thru #6 will need to scale but some of them will and especially #3 and #4.  

And all of them would benefit from standardized post-to-post relationships whether you appreciate the value of such or not. :)

-Mike

From mikeschinkel at newclarity.net  Tue Aug  3 08:38:14 2010
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Tue, 3 Aug 2010 04:38:14 -0400
Subject: [wp-hackers] Getting list of plugins from shell script
In-Reply-To: <5FA913D0-B741-4114-90C5-449D12961D3A@birdhouse.org>
References: <5FA913D0-B741-4114-90C5-449D12961D3A@birdhouse.org>
Message-ID: <71E40136-188B-4977-99F2-78149BA727CA@newclarity.net>

Scot:

Why don't you call a PHP script from the shell?  Problem is that option is serialized and you'll find it easiest to get PHP to unserialize it for you.

Here's a shell script that will do for you:  http://gist.github.com/506055

-Mike



On Aug 3, 2010, at 3:56 AM, Scot Hacker wrote:

> Kind of obscure, but wondering if anyone has a script or command that can be used to derive a list of active plugins from the shell (not from PHP). I have this so far:
> 
> # Get list of active plugins from db
> raw_plugins_sql="SELECT option_value FROM $dbname.wp_options WHERE option_name = 'active_plugins';"
> echo $raw_plugins_sql
> mysql -u root -e "$raw_plugins_sql" -p$root_db_pass $dbname
> 
> But the output is really messy and I can't seem to get any further with it (this  is part of a script where I'm trying to get a per-site listing of  active plugins used on each site on a server). Maybe need an awk expert here :)
> 
> Thanks,
> Scot
> 
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers


From harish.mlists at gmail.com  Tue Aug  3 09:28:42 2010
From: harish.mlists at gmail.com (Harish Narayanan)
Date: Tue, 03 Aug 2010 14:58:42 +0530
Subject: [wp-hackers] Getting list of plugins from shell script
In-Reply-To: <5FA913D0-B741-4114-90C5-449D12961D3A@birdhouse.org>
References: <5FA913D0-B741-4114-90C5-449D12961D3A@birdhouse.org>
Message-ID: <4C57E14A.4040408@gmail.com>

On 8/3/10 1:26 PM, Scot Hacker wrote:
> Kind of obscure, but wondering if anyone has a script or command that can be used to derive a list of active plugins from the shell (not from PHP). I have this so far:
> 
> # Get list of active plugins from db
> raw_plugins_sql="SELECT option_value FROM $dbname.wp_options WHERE option_name = 'active_plugins';"
> echo $raw_plugins_sql
> mysql -u root -e "$raw_plugins_sql" -p$root_db_pass $dbname
> 
> But the output is really messy and I can't seem to get any further with it (this  is part of a script where I'm trying to get a per-site listing of  active plugins used on each site on a server). Maybe need an awk expert here :)

This was a fun exercise, and the bash script works on the two sites that
I tried it in.

export retrieve_active_plugins="SELECT option_value FROM wp_options
WHERE option_name = 'active_plugins';"

mysql -u uname -e "$retrieve_active_plugins" -h hostname -p dbname \
| grep '{' \
| sed -e 's/i:[0-9]\+;s:[0-9]\+:"/\n/g' \
| egrep -v 'a:[0-9]+' \
| sed -e 's/";//g' \
| sed -e 's/\}//g'

I've broken this up into multiple lines (at each '\') to make it a
little easier to read, but it should be in one line. Another fun
exercise to figure out what each line does!

Harish

Harish

From christian at buro2.se  Tue Aug  3 11:56:38 2010
From: christian at buro2.se (Christian Gundersson)
Date: Tue, 3 Aug 2010 13:56:38 +0200
Subject: [wp-hackers] Function to get posts by meta
Message-ID: <AANLkTik+v-NJskgD7oQEJ4d2CVYapeEfb1Je+1vryxj1@mail.gmail.com>

Hi,

I'm writing a plugin for a client using custom post types and ran across a
situation where I wanted to retrieve post data from posts that shared the
same meta data (key and value). I didn't find anything in Wordpress core or
by searching so I wrote a function for it myself and I'm wondering if it
would be of any interest to anyone else.

The function, as said, takes a meta key and a meta value as argument and
then performs a search for posts that has that exact match. The return value
is an array with the post data.

The code is viewable on github: http://gist.github.com/506224

I have two questions on this though.

1) Have I done the function properly? (I'm fairly new so I'd like some tips
and hints to improve my coding skills on Wordpress)

2) Would this be of any interest for inclusion in Wordpress? And if not, why
not?

Thanks!

Regards,
//Christian, B?ro 2

From louy08 at gmail.com  Tue Aug  3 12:06:09 2010
From: louy08 at gmail.com (Louy Alakkad)
Date: Tue, 3 Aug 2010 15:06:09 +0300
Subject: [wp-hackers] Function to get posts by meta
In-Reply-To: <AANLkTik+v-NJskgD7oQEJ4d2CVYapeEfb1Je+1vryxj1@mail.gmail.com>
References: <AANLkTik+v-NJskgD7oQEJ4d2CVYapeEfb1Je+1vryxj1@mail.gmail.com>
Message-ID: <AANLkTik61XumQBZTCYn_6=vg95gN7o5Q9WOYjH_JytJJ@mail.gmail.com>

Hello,

Well, when i need to do the same, I'm modifying the main query with the
'posts_where' filter, just like how it's done in
http://codex.wordpress.org/Custom_Queries
Thanks for the sharing anyway ;)

Cheers.

On Tue, Aug 3, 2010 at 2:56 PM, Christian Gundersson <christian at buro2.se>wrote:

> Hi,
>
> I'm writing a plugin for a client using custom post types and ran across a
> situation where I wanted to retrieve post data from posts that shared the
> same meta data (key and value). I didn't find anything in Wordpress core or
> by searching so I wrote a function for it myself and I'm wondering if it
> would be of any interest to anyone else.
>
> The function, as said, takes a meta key and a meta value as argument and
> then performs a search for posts that has that exact match. The return
> value
> is an array with the post data.
>
> The code is viewable on github: http://gist.github.com/506224
>
> I have two questions on this though.
>
> 1) Have I done the function properly? (I'm fairly new so I'd like some tips
> and hints to improve my coding skills on Wordpress)
>
> 2) Would this be of any interest for inclusion in Wordpress? And if not,
> why
> not?
>
> Thanks!
>
> Regards,
> //Christian, B?ro 2
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>



-- 
Louy
http://louyblog.wordpress.com/

From dennen at gmail.com  Tue Aug  3 12:08:04 2010
From: dennen at gmail.com (Bill Dennen)
Date: Tue, 3 Aug 2010 08:08:04 -0400
Subject: [wp-hackers] Function to get posts by meta
In-Reply-To: <AANLkTik+v-NJskgD7oQEJ4d2CVYapeEfb1Je+1vryxj1@mail.gmail.com>
References: <AANLkTik+v-NJskgD7oQEJ4d2CVYapeEfb1Je+1vryxj1@mail.gmail.com>
Message-ID: <AANLkTi=HpzHM_xD-OqbosxSTq1FMsy_hY0q9ffzKmwnq@mail.gmail.com>

Christian,

Could you use this?

http://codex.wordpress.org/Template_Tags/get_posts

$post_type
(string) (optional) The type of post to show. Available options are:
post - Default
page
attachment
any - all post types
Default: post

$meta_key and $meta_value
(string) (optional) Only show posts that contain a meta (custom) field
with this key and value. Both parameters must be defined, or neither
will work.

On Tue, Aug 3, 2010 at 7:56 AM, Christian Gundersson <christian at buro2.se> wrote:
> Hi,
>
> I'm writing a plugin for a client using custom post types and ran across a
> situation where I wanted to retrieve post data from posts that shared the
> same meta data (key and value). I didn't find anything in Wordpress core or
> by searching so I wrote a function for it myself and I'm wondering if it
> would be of any interest to anyone else.
>
> The function, as said, takes a meta key and a meta value as argument and
> then performs a search for posts that has that exact match. The return value
> is an array with the post data.
>
> The code is viewable on github: http://gist.github.com/506224
>
> I have two questions on this though.
>
> 1) Have I done the function properly? (I'm fairly new so I'd like some tips
> and hints to improve my coding skills on Wordpress)
>
> 2) Would this be of any interest for inclusion in Wordpress? And if not, why
> not?
>
> Thanks!
>
> Regards,
> //Christian, B?ro 2
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From dennen at gmail.com  Tue Aug  3 12:14:32 2010
From: dennen at gmail.com (Bill Dennen)
Date: Tue, 3 Aug 2010 08:14:32 -0400
Subject: [wp-hackers] Function to get posts by meta
In-Reply-To: <AANLkTi=HpzHM_xD-OqbosxSTq1FMsy_hY0q9ffzKmwnq@mail.gmail.com>
References: <AANLkTik+v-NJskgD7oQEJ4d2CVYapeEfb1Je+1vryxj1@mail.gmail.com>
	<AANLkTi=HpzHM_xD-OqbosxSTq1FMsy_hY0q9ffzKmwnq@mail.gmail.com>
Message-ID: <AANLkTikVUM21=sXSYr=NG+FK1cyZbchcKOksRoF46STh@mail.gmail.com>

Or this, which lets you specify a custom post type:

http://codex.wordpress.org/Function_Reference/query_posts

-Bill

On Tue, Aug 3, 2010 at 8:08 AM, Bill Dennen <dennen at gmail.com> wrote:
> Christian,
>
> Could you use this?
>
> http://codex.wordpress.org/Template_Tags/get_posts
>
> $post_type
> (string) (optional) The type of post to show. Available options are:
> post - Default
> page
> attachment
> any - all post types
> Default: post
>
> $meta_key and $meta_value
> (string) (optional) Only show posts that contain a meta (custom) field
> with this key and value. Both parameters must be defined, or neither
> will work.
>
> On Tue, Aug 3, 2010 at 7:56 AM, Christian Gundersson <christian at buro2.se> wrote:
>> Hi,
>>
>> I'm writing a plugin for a client using custom post types and ran across a
>> situation where I wanted to retrieve post data from posts that shared the
>> same meta data (key and value). I didn't find anything in Wordpress core or
>> by searching so I wrote a function for it myself and I'm wondering if it
>> would be of any interest to anyone else.
>>
>> The function, as said, takes a meta key and a meta value as argument and
>> then performs a search for posts that has that exact match. The return value
>> is an array with the post data.
>>
>> The code is viewable on github: http://gist.github.com/506224
>>
>> I have two questions on this though.
>>
>> 1) Have I done the function properly? (I'm fairly new so I'd like some tips
>> and hints to improve my coding skills on Wordpress)
>>
>> 2) Would this be of any interest for inclusion in Wordpress? And if not, why
>> not?
>>
>> Thanks!
>>
>> Regards,
>> //Christian, B?ro 2
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
>

From jer at simianuprising.com  Tue Aug  3 13:04:11 2010
From: jer at simianuprising.com (Jeremy Clarke)
Date: Tue, 3 Aug 2010 09:04:11 -0400
Subject: [wp-hackers] Best practice: custom registration form
In-Reply-To: <AANLkTi=NbiGEihSY0a2ve7v92WyPdVhTRtuscjXDZCd_@mail.gmail.com>
References: <AANLkTinpqj-dUb5BmyiJ1Mnpgbdy_6ocx=myOGVqVOXK@mail.gmail.com>
	<AANLkTinzPn2Ng_eA1iAMgvSAFJJ+kw+mgkd1Dd+dAYCF@mail.gmail.com>
	<AANLkTi=NbiGEihSY0a2ve7v92WyPdVhTRtuscjXDZCd_@mail.gmail.com>
Message-ID: <AANLkTi=x4vQV8vcG0PhBC+KkOOpKZr=e0WNm5BTHCJ6P@mail.gmail.com>

On Tuesday, August 3, 2010, Lox <lox.dev at knc.nc> wrote:
>
> I do not like the short-code approach either because it will search for it
> in every page whereas it will appear on one page

Trying to avoid short codes entirely is asking for headaches when you
are using wp. They are the most common solution to many problems and
are popular because they are easy to create and use. If you are having
scaling issues you need to work on them separately, banning short
codes is not an efficient use of time.

Jeremy Clarke | http://jeremyclarke.org

-- 
Jeremy Clarke
Code and Design | globalvoicesonline.org

From christian at buro2.se  Tue Aug  3 13:05:53 2010
From: christian at buro2.se (Christian Gundersson)
Date: Tue, 3 Aug 2010 15:05:53 +0200
Subject: [wp-hackers] Function to get posts by meta
In-Reply-To: <AANLkTikVUM21=sXSYr=NG+FK1cyZbchcKOksRoF46STh@mail.gmail.com>
References: <AANLkTik+v-NJskgD7oQEJ4d2CVYapeEfb1Je+1vryxj1@mail.gmail.com>
	<AANLkTi=HpzHM_xD-OqbosxSTq1FMsy_hY0q9ffzKmwnq@mail.gmail.com>
	<AANLkTikVUM21=sXSYr=NG+FK1cyZbchcKOksRoF46STh@mail.gmail.com>
Message-ID: <AANLkTime3cZij8QjLKQtyAuM0mYQ6=yWnt8NgcyvK49c@mail.gmail.com>

Hi,

thanks for the hints. Using the get_posts route gives me nothing in return
however, so perhaps I'm using it wrong. This is what I did

$posts = get_posts ( "meta_key=producer&meta_value=" . $producer_id );

$posts turns out as an array that is empty. Have I misinterpreted the use of
the function? The line sits inside a loop.

Louy, I checked your link and will study it more in detail later, but it
seems like a cumbersome approach for something quite simple. It'll probably
make more sense when I get the time to read it properly :)

Thanks again though!

//Christian, B?ro 2







2010/8/3 Bill Dennen <dennen at gmail.com>

> Or this, which lets you specify a custom post type:
>
> http://codex.wordpress.org/Function_Reference/query_posts
>
> -Bill
>
> On Tue, Aug 3, 2010 at 8:08 AM, Bill Dennen <dennen at gmail.com> wrote:
> > Christian,
> >
> > Could you use this?
> >
> > http://codex.wordpress.org/Template_Tags/get_posts
> >
> > $post_type
> > (string) (optional) The type of post to show. Available options are:
> > post - Default
> > page
> > attachment
> > any - all post types
> > Default: post
> >
> > $meta_key and $meta_value
> > (string) (optional) Only show posts that contain a meta (custom) field
> > with this key and value. Both parameters must be defined, or neither
> > will work.
> >
> > On Tue, Aug 3, 2010 at 7:56 AM, Christian Gundersson <christian at buro2.se>
> wrote:
> >> Hi,
> >>
> >> I'm writing a plugin for a client using custom post types and ran across
> a
> >> situation where I wanted to retrieve post data from posts that shared
> the
> >> same meta data (key and value). I didn't find anything in Wordpress core
> or
> >> by searching so I wrote a function for it myself and I'm wondering if it
> >> would be of any interest to anyone else.
> >>
> >> The function, as said, takes a meta key and a meta value as argument and
> >> then performs a search for posts that has that exact match. The return
> value
> >> is an array with the post data.
> >>
> >> The code is viewable on github: http://gist.github.com/506224
> >>
> >> I have two questions on this though.
> >>
> >> 1) Have I done the function properly? (I'm fairly new so I'd like some
> tips
> >> and hints to improve my coding skills on Wordpress)
> >>
> >> 2) Would this be of any interest for inclusion in Wordpress? And if not,
> why
> >> not?
> >>
> >> Thanks!
> >>
> >> Regards,
> >> //Christian, B?ro 2
> >> _______________________________________________
> >> wp-hackers mailing list
> >> wp-hackers at lists.automattic.com
> >> http://lists.automattic.com/mailman/listinfo/wp-hackers
> >>
> >
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From dennen at gmail.com  Tue Aug  3 13:11:45 2010
From: dennen at gmail.com (Bill Dennen)
Date: Tue, 3 Aug 2010 09:11:45 -0400
Subject: [wp-hackers] Function to get posts by meta
In-Reply-To: <AANLkTime3cZij8QjLKQtyAuM0mYQ6=yWnt8NgcyvK49c@mail.gmail.com>
References: <AANLkTik+v-NJskgD7oQEJ4d2CVYapeEfb1Je+1vryxj1@mail.gmail.com>
	<AANLkTi=HpzHM_xD-OqbosxSTq1FMsy_hY0q9ffzKmwnq@mail.gmail.com>
	<AANLkTikVUM21=sXSYr=NG+FK1cyZbchcKOksRoF46STh@mail.gmail.com>
	<AANLkTime3cZij8QjLKQtyAuM0mYQ6=yWnt8NgcyvK49c@mail.gmail.com>
Message-ID: <AANLkTi=YR8HNM1ArBcQenLC7z3-cjGCkgLyyvSTZvpP6@mail.gmail.com>

Try adding:

post_type=any

By default, it  pulls post_type=post

-Bill

On Tue, Aug 3, 2010 at 9:05 AM, Christian Gundersson <christian at buro2.se> wrote:
> Hi,
>
> thanks for the hints. Using the get_posts route gives me nothing in return
> however, so perhaps I'm using it wrong. This is what I did
>
> $posts = get_posts ( "meta_key=producer&meta_value=" . $producer_id );
>
> $posts turns out as an array that is empty. Have I misinterpreted the use of
> the function? The line sits inside a loop.
>
> Louy, I checked your link and will study it more in detail later, but it
> seems like a cumbersome approach for something quite simple. It'll probably
> make more sense when I get the time to read it properly :)
>
> Thanks again though!
>
> //Christian, B?ro 2
>
>
>
>
>
>
>
> 2010/8/3 Bill Dennen <dennen at gmail.com>
>
>> Or this, which lets you specify a custom post type:
>>
>> http://codex.wordpress.org/Function_Reference/query_posts
>>
>> -Bill
>>
>> On Tue, Aug 3, 2010 at 8:08 AM, Bill Dennen <dennen at gmail.com> wrote:
>> > Christian,
>> >
>> > Could you use this?
>> >
>> > http://codex.wordpress.org/Template_Tags/get_posts
>> >
>> > $post_type
>> > (string) (optional) The type of post to show. Available options are:
>> > post - Default
>> > page
>> > attachment
>> > any - all post types
>> > Default: post
>> >
>> > $meta_key and $meta_value
>> > (string) (optional) Only show posts that contain a meta (custom) field
>> > with this key and value. Both parameters must be defined, or neither
>> > will work.
>> >
>> > On Tue, Aug 3, 2010 at 7:56 AM, Christian Gundersson <christian at buro2.se>
>> wrote:
>> >> Hi,
>> >>
>> >> I'm writing a plugin for a client using custom post types and ran across
>> a
>> >> situation where I wanted to retrieve post data from posts that shared
>> the
>> >> same meta data (key and value). I didn't find anything in Wordpress core
>> or
>> >> by searching so I wrote a function for it myself and I'm wondering if it
>> >> would be of any interest to anyone else.
>> >>
>> >> The function, as said, takes a meta key and a meta value as argument and
>> >> then performs a search for posts that has that exact match. The return
>> value
>> >> is an array with the post data.
>> >>
>> >> The code is viewable on github: http://gist.github.com/506224
>> >>
>> >> I have two questions on this though.
>> >>
>> >> 1) Have I done the function properly? (I'm fairly new so I'd like some
>> tips
>> >> and hints to improve my coding skills on Wordpress)
>> >>
>> >> 2) Would this be of any interest for inclusion in Wordpress? And if not,
>> why
>> >> not?
>> >>
>> >> Thanks!
>> >>
>> >> Regards,
>> >> //Christian, B?ro 2
>> >> _______________________________________________
>> >> wp-hackers mailing list
>> >> wp-hackers at lists.automattic.com
>> >> http://lists.automattic.com/mailman/listinfo/wp-hackers
>> >>
>> >
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From christian at buro2.se  Tue Aug  3 13:17:56 2010
From: christian at buro2.se (Christian Gundersson)
Date: Tue, 3 Aug 2010 15:17:56 +0200
Subject: [wp-hackers] Function to get posts by meta
In-Reply-To: <AANLkTi=YR8HNM1ArBcQenLC7z3-cjGCkgLyyvSTZvpP6@mail.gmail.com>
References: <AANLkTik+v-NJskgD7oQEJ4d2CVYapeEfb1Je+1vryxj1@mail.gmail.com>
	<AANLkTi=HpzHM_xD-OqbosxSTq1FMsy_hY0q9ffzKmwnq@mail.gmail.com>
	<AANLkTikVUM21=sXSYr=NG+FK1cyZbchcKOksRoF46STh@mail.gmail.com>
	<AANLkTime3cZij8QjLKQtyAuM0mYQ6=yWnt8NgcyvK49c@mail.gmail.com>
	<AANLkTi=YR8HNM1ArBcQenLC7z3-cjGCkgLyyvSTZvpP6@mail.gmail.com>
Message-ID: <AANLkTimA8LiMYTuZiF_gNVVxHdBS1ZqXiR6gEwXS=2jm@mail.gmail.com>

I seriously need to learn how to read properly. Sorry!..

Works as intended now :)

//Christian

2010/8/3 Bill Dennen <dennen at gmail.com>

> Try adding:
>
> post_type=any
>
> By default, it  pulls post_type=post
>
> -Bill
>
> On Tue, Aug 3, 2010 at 9:05 AM, Christian Gundersson <christian at buro2.se>
> wrote:
> > Hi,
> >
> > thanks for the hints. Using the get_posts route gives me nothing in
> return
> > however, so perhaps I'm using it wrong. This is what I did
> >
> > $posts = get_posts ( "meta_key=producer&meta_value=" . $producer_id );
> >
> > $posts turns out as an array that is empty. Have I misinterpreted the use
> of
> > the function? The line sits inside a loop.
> >
> > Louy, I checked your link and will study it more in detail later, but it
> > seems like a cumbersome approach for something quite simple. It'll
> probably
> > make more sense when I get the time to read it properly :)
> >
> > Thanks again though!
> >
> > //Christian, B?ro 2
> >
> >
> >
> >
> >
> >
> >
> > 2010/8/3 Bill Dennen <dennen at gmail.com>
> >
> >> Or this, which lets you specify a custom post type:
> >>
> >> http://codex.wordpress.org/Function_Reference/query_posts
> >>
> >> -Bill
> >>
> >> On Tue, Aug 3, 2010 at 8:08 AM, Bill Dennen <dennen at gmail.com> wrote:
> >> > Christian,
> >> >
> >> > Could you use this?
> >> >
> >> > http://codex.wordpress.org/Template_Tags/get_posts
> >> >
> >> > $post_type
> >> > (string) (optional) The type of post to show. Available options are:
> >> > post - Default
> >> > page
> >> > attachment
> >> > any - all post types
> >> > Default: post
> >> >
> >> > $meta_key and $meta_value
> >> > (string) (optional) Only show posts that contain a meta (custom) field
> >> > with this key and value. Both parameters must be defined, or neither
> >> > will work.
> >> >
> >> > On Tue, Aug 3, 2010 at 7:56 AM, Christian Gundersson <
> christian at buro2.se>
> >> wrote:
> >> >> Hi,
> >> >>
> >> >> I'm writing a plugin for a client using custom post types and ran
> across
> >> a
> >> >> situation where I wanted to retrieve post data from posts that shared
> >> the
> >> >> same meta data (key and value). I didn't find anything in Wordpress
> core
> >> or
> >> >> by searching so I wrote a function for it myself and I'm wondering if
> it
> >> >> would be of any interest to anyone else.
> >> >>
> >> >> The function, as said, takes a meta key and a meta value as argument
> and
> >> >> then performs a search for posts that has that exact match. The
> return
> >> value
> >> >> is an array with the post data.
> >> >>
> >> >> The code is viewable on github: http://gist.github.com/506224
> >> >>
> >> >> I have two questions on this though.
> >> >>
> >> >> 1) Have I done the function properly? (I'm fairly new so I'd like
> some
> >> tips
> >> >> and hints to improve my coding skills on Wordpress)
> >> >>
> >> >> 2) Would this be of any interest for inclusion in Wordpress? And if
> not,
> >> why
> >> >> not?
> >> >>
> >> >> Thanks!
> >> >>
> >> >> Regards,
> >> >> //Christian, B?ro 2
> >> >> _______________________________________________
> >> >> wp-hackers mailing list
> >> >> wp-hackers at lists.automattic.com
> >> >> http://lists.automattic.com/mailman/listinfo/wp-hackers
> >> >>
> >> >
> >> _______________________________________________
> >> wp-hackers mailing list
> >> wp-hackers at lists.automattic.com
> >> http://lists.automattic.com/mailman/listinfo/wp-hackers
> >>
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers at lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> >
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From mailapera at gmail.com  Tue Aug  3 13:17:40 2010
From: mailapera at gmail.com (mailapera)
Date: Tue, 3 Aug 2010 15:17:40 +0200
Subject: [wp-hackers] Conditional statement inside custom query
Message-ID: <AANLkTinArHbfTCdPniLV-aK1s-fOGZSiM0cORSzp-hxO@mail.gmail.com>

I am trying to call a custom field into a custom query array, however the
custom field itself must be filtered by a conditional statement to output
the correct value. Here the code

<?php if ($related_query->have_posts())
:
    $postsArray = array();
    while ($related_query->have_posts()) : $related_query->the_post();
        $gal = get_post_meta($post->ID, 'metakey1', true);
        $gal = apply_filters('the_content', $gal );
        $fruit = get_post_meta($post->ID, 'metakey2', true);

        if ($fruit=="1") {
        Apples
        } elseif($fruit=="2") {
        Cherries
        }

        $postsArray[] = '<div
style="display:block;float:left;margin-left:10px;"><a
href="'.get_permalink().'" rel="bookmark" id="inline"><span
id="relimg">'.$gal.'</span></a><br /><span
style="font-size:70%;">'.get_the_title().'<br />'.get_post_meta($post->ID,
'type', true).'<br />'.$fruit.'</span></div><!-- ('.get_the_score().')-->';
    endwhile;

echo implode(' '."\n",$postsArray); // print out a list of the related
items, separated by commas
else:?>


I have no ide what the correct syntax is, or if this can even be done.
Thanks for any help

From johnbillion+wp at gmail.com  Tue Aug  3 13:29:53 2010
From: johnbillion+wp at gmail.com (John Blackbourn)
Date: Tue, 3 Aug 2010 14:29:53 +0100
Subject: [wp-hackers] Conditional statement inside custom query
In-Reply-To: <AANLkTinArHbfTCdPniLV-aK1s-fOGZSiM0cORSzp-hxO@mail.gmail.com>
References: <AANLkTinArHbfTCdPniLV-aK1s-fOGZSiM0cORSzp-hxO@mail.gmail.com>
Message-ID: <AANLkTi=3TkKYxfjzW6y-fJ51Hs03FNPxKOF16Tg3kP5A@mail.gmail.com>

This isn't intrinsically a WordPress query but here's the answer
anyway. Just replace the value of $fruit with the corresponding fruit
name which will then be used in your resulting array.

if ($fruit=="1") {
       $fruit='Apples';
       } elseif($fruit=="2") {
       $fruit='Cherries';
       }

From frank at bueltge.de  Tue Aug  3 13:39:32 2010
From: frank at bueltge.de (Frank Bueltge)
Date: Tue, 3 Aug 2010 15:39:32 +0200
Subject: [wp-hackers] Best practice: custom registration form
In-Reply-To: <AANLkTi=x4vQV8vcG0PhBC+KkOOpKZr=e0WNm5BTHCJ6P@mail.gmail.com>
References: <AANLkTinpqj-dUb5BmyiJ1Mnpgbdy_6ocx=myOGVqVOXK@mail.gmail.com>
	<AANLkTinzPn2Ng_eA1iAMgvSAFJJ+kw+mgkd1Dd+dAYCF@mail.gmail.com>
	<AANLkTi=NbiGEihSY0a2ve7v92WyPdVhTRtuscjXDZCd_@mail.gmail.com>
	<AANLkTi=x4vQV8vcG0PhBC+KkOOpKZr=e0WNm5BTHCJ6P@mail.gmail.com>
Message-ID: <AANLkTinQojtDJsw__bpjVr0f3bpPvv3HCzHNQU7Kn8wg@mail.gmail.com>

WP has fuctions for this job, see on wp_login_form
Is easy-contact to use without plugins, you can also use wp_rewrite for
Customer rewrite

... short, sorry write Frommermann mobile

Am 03.08.2010 15:04 schrieb "Jeremy Clarke" <jer at simianuprising.com>:

On Tuesday, August 3, 2010, Lox <lox.dev at knc.nc> wrote:
>
> I do not like the short-code approach ei...
Trying to avoid short codes entirely is asking for headaches when you
are using wp. They are the most common solution to many problems and
are popular because they are easy to create and use. If you are having
scaling issues you need to work on them separately, banning short
codes is not an efficient use of time.

Jeremy Clarke | http://jeremyclarke.org

--
Jeremy Clarke
Code and Design | globalvoicesonline.org

_______________________________________________
wp-hackers mailing list
wp-hackers at lists.automattic....

From casey.bisson at gmail.com  Tue Aug  3 14:06:18 2010
From: casey.bisson at gmail.com (Casey Bisson)
Date: Tue, 3 Aug 2010 10:06:18 -0400
Subject: [wp-hackers] Time for a wp_post_relationships table?
In-Reply-To: <F34C274D-9D82-4312-9727-F0E29FC6A96A@newclarity.net>
References: <10320216-AFB8-4063-A2C0-ED3B5DCBFC12@newclarity.net>
	<AANLkTikWu9dHLpubhj4EgHRogw_CdaGa5majKYTzuaqm@mail.gmail.com>
	<FA38AE65-7B98-4633-8BB0-7DA6F8CAAF5A@newclarity.net>
	<AANLkTik_9ryy76WfF3U7R=jQzgN5vBOGJSt5afURGFCo@mail.gmail.com>
	<F34C274D-9D82-4312-9727-F0E29FC6A96A@newclarity.net>
Message-ID: <AANLkTinwK2AemuPw2CRpa0og3dStGgMUSJywEcHfgzya@mail.gmail.com>

Mike,

I'm actually a bit sympathetic to your question, but many of the
relationships you describe are taxonomy-style relationships. I think what
you're really looking for is how to durably attach a post (of any type) to a
specific term/taxonomy pair. Perhaps an extra field for post_id in the
term_taxonomy table is what you need?

Some WP themes and sites have used the category/taxonomy description field
very well. I see Michael Pretty's scenario to be an extension of that (more
sophisticated, but not an entirely different animal). I can imagine that we
could enable many uses of WP by moving that description field into a new
post type and replacing the that field in the table with a post_id number
that links them.

--Casey

On Tue, Aug 3, 2010 at 4:05 AM, Mike Schinkel
<mikeschinkel at newclarity.net>wrote:

The use-cases for post-to-post are probably not very apparent when using
> WordPress only as a blog but become much more apparent when one starts using
> it as a CMS with lots of different data types.  I'll give you numerous
> examples where I've needed it in the past several months (#1 thru #3 are
> actual projects I've worked on, #4 & #5 are hypothetical):
>
> 1.) A law firm website has attorneys, practice areas, articles, case
> studies, and events/presentations.  Each attorney is in one or more practice
> areas.  Each article and each case study can be attached to one or more
> attorneys and relevant to one or more practice areas.  Each
> event/presentation can have one or more attorneys presenting and can be
> represented one one or more practice areas' calendars.
>
> 2.) A conference website can have sessions, sponsors, presenters, time
> slots and rooms. A session can have one or more presenters and be presented
> in one or more time slots and one room per time slot ,and a presenter can
> represent a sponsor or not.
>
> 3.) A website listing restaurant menus can have restaurants, locations,
> menus. A restaurant can have one or more locations and one or more menus
> (breakfast, lunch, dinner, catering, etc.) A menu can apply to all locations
> for a restaurant or only a specific location.
>
> 4.) A movie website could have movies and person-roles where a person-role
> could be an actor, producer, cinematographer, casting, film editing,
> costumer, set designer, composer, etc.
>
> 5.) A hospital website has doctors and departments.  Each department can
> have multiple doctors and each doctor can work in multiple departments.
>
> 6.) A radio station website could have stations and disc jockey's where a
> station could have multiple disc jockeys and each disc jockey could appear
> on multiple stations (given how radio works these days.)
>
> I could actually give you many other examples if you need it; there is an
> example for almost every business that could potentially use WordPress for
> it's website (vs. just it's blog.)

From gregg at fatheaddesign.com  Tue Aug  3 14:12:16 2010
From: gregg at fatheaddesign.com (Gregg F. Tomlinson)
Date: Tue, 3 Aug 2010 09:12:16 -0500
Subject: [wp-hackers] Question about auto-detecting
Message-ID: <8388C26D-69EA-4694-BDF0-45AAEE902BCD@fatheaddesign.com>

Hello:

Been lurking on this list for quite a while, never submitted a  
question until now & hopefully you folks can help.

I have a project in production right now where I am building a bunch  
of mobile-only websites on top of WP which will all be managed thru  
the same backend. These sites are all for the same client, hence the  
"one backend, multiple sites" approach. When I started building this  
project I was using WP Mu, but will most likely move this into WP 3 's  
multi-site function.

Here's the catch: These sites are all "mobile only" because the client  
has existing Flash sites that they still want their desktop users to  
see, and have the mobile users get auto-rerouted to the WP sites.

  My initial thought (and mode for buildout) was to run all the sites  
as subdomains under the same URL, ie:

mobile1.mobiledomain.com

mobile2.mobiledomain.com

etc.

The flash sites all have independent URL's, so I would need to throw  
in some browser sniffing code (either in .htaccess or PHP) on these  
main URL's to redirect the sites to their mobile counterparts, so the  
sites would route like this:

flashsite1.com  ==>>  mobileusers go to mobile1.mobiledomain.com

flashsite2.com  ==>>  mobileusers go to mobile2.mobiledomain.com

However, now I'm wondering if this is possible, since the freestanding  
Flash sites will all be on independent URL's, and the WP sites will be  
on subdomains.

Does anyone know of any way of doing browser detection like this, or  
would I be better off running the mobile versions in a subdomain on  
the same URL, ie:

www.flashsite1.com  ==>>  mobileusers go to mobile.flashsite1.com  
(same URL, same webhost, just different dir in which the site is stored)

www.flashsite2.com  ==>>  mobileusers go to mobile.flashsite2.com  
(same URL, same webhost, just different dir in which the site is stored)

Drawback to this methodology is that I would have multiple WP installs  
for the client to manage here.

Thoughts? I appreciate your help on this, I looked around in the codex  
but couldn't find anything that dealt with this particular issue since  
it's pretty unique.

Thanks in advance!

--g

::::  ::::  ::::

Gregg Tomlinson
Principal

fathead design, inc.
1329 W. Loyola Ave.
Suite G2
Chicago, Illinois  60626

p: 773.338.1313
f: 773.338.1340

http://www.fatheaddesign.com

** please consider the environment before you print this e-mail **





From mailapera at gmail.com  Tue Aug  3 14:30:05 2010
From: mailapera at gmail.com (mailapera)
Date: Tue, 3 Aug 2010 16:30:05 +0200
Subject: [wp-hackers] Conditional statement inside custom query
In-Reply-To: <AANLkTi=3TkKYxfjzW6y-fJ51Hs03FNPxKOF16Tg3kP5A@mail.gmail.com>
References: <AANLkTinArHbfTCdPniLV-aK1s-fOGZSiM0cORSzp-hxO@mail.gmail.com> 
	<AANLkTi=3TkKYxfjzW6y-fJ51Hs03FNPxKOF16Tg3kP5A@mail.gmail.com>
Message-ID: <AANLkTinHpuO6+qpbse-D5uRs=PEaeWZ9SL-Rz_zRJ0Fb@mail.gmail.com>

Thank you, I knew it was a small syntax mistake. Thanks again.

On Tue, Aug 3, 2010 at 3:29 PM, John Blackbourn
<johnbillion+wp at gmail.com<johnbillion%2Bwp at gmail.com>
> wrote:

> This isn't intrinsically a WordPress query but here's the answer
> anyway. Just replace the value of $fruit with the corresponding fruit
> name which will then be used in your resulting array.
>
> if ($fruit=="1") {
>       $fruit='Apples';
>       } elseif($fruit=="2") {
>       $fruit='Cherries';
>       }
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From otto at ottodestruct.com  Tue Aug  3 15:37:02 2010
From: otto at ottodestruct.com (Otto)
Date: Tue, 3 Aug 2010 10:37:02 -0500
Subject: [wp-hackers] Time for a wp_post_relationships table?
In-Reply-To: <F34C274D-9D82-4312-9727-F0E29FC6A96A@newclarity.net>
References: <10320216-AFB8-4063-A2C0-ED3B5DCBFC12@newclarity.net> 
	<AANLkTikWu9dHLpubhj4EgHRogw_CdaGa5majKYTzuaqm@mail.gmail.com> 
	<FA38AE65-7B98-4633-8BB0-7DA6F8CAAF5A@newclarity.net>
	<AANLkTik_9ryy76WfF3U7R=jQzgN5vBOGJSt5afURGFCo@mail.gmail.com> 
	<F34C274D-9D82-4312-9727-F0E29FC6A96A@newclarity.net>
Message-ID: <AANLkTikVdaRRBVv1YL2-OU1NFbEbprURjoA5-FR0oqR9@mail.gmail.com>

On Tue, Aug 3, 2010 at 3:05 AM, Mike Schinkel
<mikeschinkel at newclarity.net> wrote:
> Why would we want to devise their own methods rather than use a standard approach built into core? ?(It's an honest question.)

Two reasons.
1. Competition breeds better solutions.
2. The generic case is not a good fit for all use cases.

> You are getting too use-case specific; they don't need to specify what the relationships mean only that they are related. Plugins can add the "meaning" layer but WordPress should probably offer the core relationship support.

The relationships have to be meaningful for there to be
interoperability between differing implementations.

> I think maybe I simply value standardization as a stepping stone for greater things and you don't (right?) and that difference in how we value standardization colors any discussion we have related to it.

I think standardization is a good thing, but the standard must be
well-defined and have a well-defined purpose for it to be useful. This
particular case just seems very vague and hand-wavy to me.

> The use-cases for post-to-post are probably not very apparent when using WordPress only as a blog but become much more apparent when one starts using it as a CMS with lots of different data types. ?I'll give you numerous examples where I've needed it in the past several months (#1 thru #3 are actual projects I've worked on, #4 & #5 are hypothetical):
>
> 1.) A law firm website has attorneys, practice areas, articles, case studies, and events/presentations. ?Each attorney is in one or more practice areas. ?Each article and each case study can be attached to one or more attorneys and relevant to one or more practice areas. ?Each event/presentation can have one or more attorneys presenting and can be represented one one or more practice areas' calendars.
>
> 2.) A conference website can have sessions, sponsors, presenters, time slots and rooms. A session can have one or more presenters and be presented in one or more time slots and one room per time slot ,and a presenter can represent a sponsor or not.
>
> 3.) A website listing restaurant menus can have restaurants, locations, menus. A restaurant can have one or more locations and one or more menus (breakfast, lunch, dinner, catering, etc.) A menu can apply to all locations for a restaurant or only a specific location.
>
> 4.) A movie website could have movies and person-roles where a person-role could be an actor, producer, cinematographer, casting, film editing, costumer, set designer, composer, etc.
>
> 5.) A hospital website has doctors and departments. ?Each department can have multiple doctors and each doctor can work in multiple departments.
>
> 6.) A radio station website could have stations and disc jockey's where a station could have multiple disc jockeys and each disc jockey could appear on multiple stations (given how radio works these days.)

I don't see how any of these relate to a table which relates posts to
taxonomies (and to each other). Posts get related to terms inside
taxonomies, not to taxonomies themselves.

The cases above seem like you want to be able to relate terms in one
taxonomy to terms in another taxonomy, not to relate posts to whole
taxonomies. IN which case I'd say your initial definitions for what
constitutes a post vs. a term are wrong. If you do want to make
something where a "thing" has both a post and a term for that thing,
then you should do it with a custom post type and tie the term from
the taxonomy to it. Let's consider a simple case of photo management.

Photos are posts (attachments in our specific case, but let's just say
"photos"). They have people in them. Every person is a term in the
"people" taxonomy.
But people have other information about them too. So we make a
"people" custom post type to hold them. Maybe a bio, avatar, etc. To
associate the person to the taxonomy, we simply give that post of them
in "people" the term in the "people" taxonomy, thus relating the two.
So now, if I'm looking at a photo, I can see a list of the people in
the photo by looking at the terms in the people taxonomy. Click on one
of those and I can see all the posts associated with that person. Only
one of those posts is of the "people" type, and that's the one that
gives more information about that person.

My point is that posts should connect to terms, and relate to other
posts by virtue of having the same terms in a taxonomy, even across
post-type  boundaries. This is a much more flexible way of connecting
posts to other posts based on specific shared characteristics.

For your lawyer example (first one):
Post types: attorney, article, case study, event.
Taxonomies: attorney, practice area.

Any of those post types can have terms attached to it from both
taxonomies. There's a specific restriction (in your plugin code) to
only allow one attorney post type per attorney term and only one
attorney term in each attorney post type.

The way you seem to want to do it is to have a whole taxonomy for each
attorney (I think), which is difficult and makes little sense to me. A
taxonomy is general, a person is specific.

> It's not the number of post relationships that a *specific* post has, it's the *total* number of records with the matching meta_key in the wp_postmeta table.

Actually, it is. The postmeta table is indexed by post_id too. If
you're searching through postmeta, you should always be tying to a
specific post.

You are correct that postmeta is a crap way of relating posts to one
another. But that is exactly what taxonomies and terms were designed
to do. I think that because you're defining things as a term instead
of a post type (or vice-versa), I think you're ending up with a
distorted view of what the necessary queries should be.

In your movie example, a movie would be a post type. So would an
actor. These would hold info about them. But they'd both also be
taxonomies (movie and actor). How would the two different items be
related? Term_relationships. A Movie post type would have actors
assigned to it as terms related to it. And it'd have one term from the
movies taxonomy related to it as well. An actor would be reversed,
he's in a bunch of movies (and so is tagged with all those movie
terms), and he's an actor (and so has his actor term tagged to him
too).

This particular case involves no postmeta, because it's using terms
the way they were meant to be used. Terms are there to relate
different posts together in a way that has meaning (by virtue of them
all being in a specific taxonomy). And this meaningful relationship
can be done via many different ways, including many to many.

-Otto

From otto at ottodestruct.com  Tue Aug  3 16:16:34 2010
From: otto at ottodestruct.com (Otto)
Date: Tue, 3 Aug 2010 11:16:34 -0500
Subject: [wp-hackers] Time for a wp_post_relationships table?
In-Reply-To: <F34C274D-9D82-4312-9727-F0E29FC6A96A@newclarity.net>
References: <10320216-AFB8-4063-A2C0-ED3B5DCBFC12@newclarity.net> 
	<AANLkTikWu9dHLpubhj4EgHRogw_CdaGa5majKYTzuaqm@mail.gmail.com> 
	<FA38AE65-7B98-4633-8BB0-7DA6F8CAAF5A@newclarity.net>
	<AANLkTik_9ryy76WfF3U7R=jQzgN5vBOGJSt5afURGFCo@mail.gmail.com> 
	<F34C274D-9D82-4312-9727-F0E29FC6A96A@newclarity.net>
Message-ID: <AANLkTi=bQy1NHV---zy82paZcpAMcGGVcDbXJ-5PEfcT@mail.gmail.com>

On Tue, Aug 3, 2010 at 3:05 AM, Mike Schinkel
<mikeschinkel at newclarity.net> wrote:
> 4.) A movie website could have movies and person-roles where a person-role could be an actor, producer, cinematographer, casting, film editing, costumer, set designer, composer, etc.

I think I'm starting to see what you're talking about here, and why
you need the table the way you want it.

In your design for this one, for example, movies and persons would
both be a custom post type. The person post would then be associated
directly to the movie post and you'd create a "role" taxonomy with
types of relationships to associate the two together in a meaningful
way.

The problem is that I don't think this is the right way to do it. It
seems to me that this is over-generalizing. Instead of "role" being a
taxonomy and having things like "actor" be terms in it, I think using
"actor" as a taxonomy is a better way to go.

Consider your setup. If I wanted to display a list of credits for a
movie, I have to go pull all the related posts for that movie and
possibly parse them to determine names and such. It's a select into
the posts table based on the join, followed by a lot of code to do
parsing.

But if each role is a taxonomy itself, then the taxonomy name and
terms both have displayable versions that I can use directly. It's no
worse than displaying tags. And if I do want to drill deeper, I can
get related posts by virtue of them sharing terms, and use custom post
types to determine what each type of post is.

I don't think it's necessarily crazy to allow a "thing" to be both a
post type *and* a taxonomy as well. Managing your restrictions on a
per-post basis is simpler than having to select a large number of
posts and then filter through them in different ways for simple tasks.
Keeping the correct terms associated with the correct custom-posts is
not difficult if you abstract out the creation of the posts. For
example, when I make a new actor post, I'd automatically make the
proper term for that actor and auto-tag the post for him accordingly.
The plugin can do this. And then I simply don't give any way to remove
that term from the actor. The taxonomy can be completely managed
behind the scenes, the user doesn't have to manually manage it.

-Otto

From dan at sproutventure.com  Tue Aug  3 16:19:24 2010
From: dan at sproutventure.com (Daniel Cameron)
Date: Tue, 3 Aug 2010 09:19:24 -0700
Subject: [wp-hackers] Time for a wp_post_relationships table?
In-Reply-To: <AANLkTikVdaRRBVv1YL2-OU1NFbEbprURjoA5-FR0oqR9@mail.gmail.com>
References: <10320216-AFB8-4063-A2C0-ED3B5DCBFC12@newclarity.net> 
	<AANLkTikWu9dHLpubhj4EgHRogw_CdaGa5majKYTzuaqm@mail.gmail.com> 
	<FA38AE65-7B98-4633-8BB0-7DA6F8CAAF5A@newclarity.net>
	<AANLkTik_9ryy76WfF3U7R=jQzgN5vBOGJSt5afURGFCo@mail.gmail.com> 
	<F34C274D-9D82-4312-9727-F0E29FC6A96A@newclarity.net>
	<AANLkTikVdaRRBVv1YL2-OU1NFbEbprURjoA5-FR0oqR9@mail.gmail.com>
Message-ID: <AANLkTin1nE4T0Zrr-k1Ca+aOaLxsJRrcPFq0B4vHaPxM@mail.gmail.com>

> My point is that posts should connect to terms, and relate to other
> posts by virtue of having the same terms in a taxonomy, even across
> post-type  boundaries. This is a much more flexible way of connecting
> posts to other posts based on specific shared characteristics.
>

We've approached one of latest projects with this exact method and I'm glad
we did because a post-meta option was a possible option.

We have about 10 post-types and a single taxonomy called 'nexus' that allows
us to connect any of our posts with each other. The purpose for the
connections is to build a custom menu of affiliated/associated posts. Also,
since we're using simple post titles for terms I've built a function that
uses wp_set_object_terms to automatically create the first affiliation on
publish.

If you want to know more I'm willing to share but it seems as though this
conversation is already heading in the right direction ( IMO ).

[ I invested too much time reading this thread to not comment a +1 :) ]

From jer at simianuprising.com  Tue Aug  3 16:27:45 2010
From: jer at simianuprising.com (Jeremy Clarke)
Date: Tue, 3 Aug 2010 12:27:45 -0400
Subject: [wp-hackers] Time for a wp_post_relationships table?
In-Reply-To: <AANLkTikVdaRRBVv1YL2-OU1NFbEbprURjoA5-FR0oqR9@mail.gmail.com>
References: <10320216-AFB8-4063-A2C0-ED3B5DCBFC12@newclarity.net>
	<AANLkTikWu9dHLpubhj4EgHRogw_CdaGa5majKYTzuaqm@mail.gmail.com>
	<FA38AE65-7B98-4633-8BB0-7DA6F8CAAF5A@newclarity.net>
	<AANLkTik_9ryy76WfF3U7R=jQzgN5vBOGJSt5afURGFCo@mail.gmail.com>
	<F34C274D-9D82-4312-9727-F0E29FC6A96A@newclarity.net>
	<AANLkTikVdaRRBVv1YL2-OU1NFbEbprURjoA5-FR0oqR9@mail.gmail.com>
Message-ID: <AANLkTinDHsk3+DprCAN7nh7di3e6+wXPGwc1xDTx1F9D@mail.gmail.com>

FWIW, I think a built-in system for associating metadata to taxonomy terms
would solve/simplify a LOT of these scenarios, and make it easier to use the
taxonomy system as intended without getting involved in post-on-post
relationships.

If actors/attorneys/people, in their term format, could have more than one
data field associated to them then you don't need the special single
page-type post about them to exist, you can just depend on the term listing
to show that content at the top with the related posts listed below. E.g.
Brad Pitt is a term in the actors taxonomy and the term has his bio, photo
etc. as meta fields. You then just use the get_category_link() style url to
link to his page, where you show all the info as it if was a post at the
top, along with other posts/post_types listed below.

This would make it a lot easier to have one core post type, in this case
movies, and let the relationships happen with the detailed and
metadata-powered taxonomy terms. This wouldn't solve the whole problem when
you have multiple post types and taxonomies that all have to be related
together,  but those scenarios will be a nightmare no matter what we do.

Of course, if done properly this would make terms feel a lot more like
posts, but why would that be such a bad thing? They already have a screen to
edit them like posts do, that screen just sucks right now.

Things that would make this a reality (mostly doable via. plugin right now,
but would be much more likely to be used if standardized):

   - Visual editor and other enhancements in term editing screen.
   - Standard means of associating meta to terms (term_meta table)
   - Easy API for defining default custom fields to show up in term editing
   UI (also needed for posts!)

IMHO this is a much more obvious need than post-to-post relationships and
most large cms-y sites could think of ways that term_meta would be useful.
It's an obvious need that also happens to solve a lot of the simpler class
of problem Mike is frustrated with.

-- 
Jeremy Clarke
Code and Design | globalvoicesonline.org

From wphackers at jakemgold.myfastmail.com  Tue Aug  3 16:35:36 2010
From: wphackers at jakemgold.myfastmail.com (Jake Goldman)
Date: Tue, 03 Aug 2010 12:35:36 -0400
Subject: [wp-hackers] Time for a wp_post_relationships table?
In-Reply-To: <AANLkTinDHsk3+DprCAN7nh7di3e6+wXPGwc1xDTx1F9D@mail.gmail.com>
References: <10320216-AFB8-4063-A2C0-ED3B5DCBFC12@newclarity.net>	<AANLkTikWu9dHLpubhj4EgHRogw_CdaGa5majKYTzuaqm@mail.gmail.com>	<FA38AE65-7B98-4633-8BB0-7DA6F8CAAF5A@newclarity.net>	<AANLkTik_9ryy76WfF3U7R=jQzgN5vBOGJSt5afURGFCo@mail.gmail.com>	<F34C274D-9D82-4312-9727-F0E29FC6A96A@newclarity.net>	<AANLkTikVdaRRBVv1YL2-OU1NFbEbprURjoA5-FR0oqR9@mail.gmail.com>
	<AANLkTinDHsk3+DprCAN7nh7di3e6+wXPGwc1xDTx1F9D@mail.gmail.com>
Message-ID: <4C584558.7080906@jakemgold.myfastmail.com>

  Funny you should mention this.

I just released a plug-in that adds full, post-like meta data 
functionality to taxonomy terms. I'd needed this in several projects 
recently, and finally decided I should just package it up as an 
independent plug-in.

I pinged Mark and Andrew about incorporating it in core, and didn't 
receive any response.

http://wordpress.org/extend/plugins/simple-term-meta/

But I would be happy to write a patch once work on 3.1 resumes in 
earnest to add this to core.

Jake


On 8/3/2010 12:27 PM, Jeremy Clarke wrote:
> FWIW, I think a built-in system for associating metadata to taxonomy terms
> would solve/simplify a LOT of these scenarios, and make it easier to use the
> taxonomy system as intended without getting involved in post-on-post
> relationships.
>
> If actors/attorneys/people, in their term format, could have more than one
> data field associated to them then you don't need the special single
> page-type post about them to exist, you can just depend on the term listing
> to show that content at the top with the related posts listed below. E.g.
> Brad Pitt is a term in the actors taxonomy and the term has his bio, photo
> etc. as meta fields. You then just use the get_category_link() style url to
> link to his page, where you show all the info as it if was a post at the
> top, along with other posts/post_types listed below.
>
> This would make it a lot easier to have one core post type, in this case
> movies, and let the relationships happen with the detailed and
> metadata-powered taxonomy terms. This wouldn't solve the whole problem when
> you have multiple post types and taxonomies that all have to be related
> together,  but those scenarios will be a nightmare no matter what we do.
>
> Of course, if done properly this would make terms feel a lot more like
> posts, but why would that be such a bad thing? They already have a screen to
> edit them like posts do, that screen just sucks right now.
>
> Things that would make this a reality (mostly doable via. plugin right now,
> but would be much more likely to be used if standardized):
>
>     - Visual editor and other enhancements in term editing screen.
>     - Standard means of associating meta to terms (term_meta table)
>     - Easy API for defining default custom fields to show up in term editing
>     UI (also needed for posts!)
>
> IMHO this is a much more obvious need than post-to-post relationships and
> most large cms-y sites could think of ways that term_meta would be useful.
> It's an obvious need that also happens to solve a lot of the simpler class
> of problem Mike is frustrated with.
>

From wphackers at jakemgold.myfastmail.com  Tue Aug  3 16:42:14 2010
From: wphackers at jakemgold.myfastmail.com (Jake Goldman)
Date: Tue, 03 Aug 2010 12:42:14 -0400
Subject: [wp-hackers] Sticky posts and Posts Per Page
Message-ID: <4C5846E6.9040808@jakemgold.myfastmail.com>

  Anyone know of an "elegant" solution for getting sticky posts to count 
toward the posts per page limit?

The use case here is a /very /formatted 3x3 grid output for posts. The 
client wants to be able to use sticky posts to feature his best work, 
but it can't break the 3x3 grid. Out of the box, sticky posts get added 
on top of the posts per page count.

Keep in mind that there are dozens of posts already - so paging is 
important. I can't simply count up the sticky posts and subtract from 
posts per page (setting a new posts_per_page) without breaking paging.

Using count of stickies - posts_per_page for page 1 and then using an 
offset on subsequent pages would work if I could have a negative offset 
(which it seems I can't). It gets even more complicated if the there are 
more sticky posts than there are post blocks on the first page (9), but 
I can impose rules to limit the site to a maximum of 9 sticky posts.

I have a few hack-ish ideas, but I thought I'd pose the question first 
in case anyone has dealt with this limitation before.

Jake

From ehitter at gmail.com  Tue Aug  3 17:00:56 2010
From: ehitter at gmail.com (Erick Hitter)
Date: Tue, 3 Aug 2010 13:00:56 -0400
Subject: [wp-hackers] Sticky posts and Posts Per Page
In-Reply-To: <4C5846E6.9040808@jakemgold.myfastmail.com>
References: <4C5846E6.9040808@jakemgold.myfastmail.com>
Message-ID: <AANLkTinEZ53q-RtOUfB2jAMoLGUM+f_CX+_yfiKGe27p@mail.gmail.com>

Jake,

What if you used the count of sticky posts to adjust the limit specified in
the SQL query through the *post_limits* filter? Based on the number of
sticky posts and the page currently displayed, you should be able to reduce
the posts returned by the original query proportionally. So, if there are
two sticky posts, the original query would be reduced to return one post.
Then, when *get_posts* reaches the stickies part of its process, it would
place the two sticky posts ahead of the one post the original query
returned. This should work because if *get_posts* doesn't find the sticky
posts in the results of the original query, it prepends them to the original
result.

Erick

On Tue, Aug 3, 2010 at 12:42, Jake Goldman <
wphackers at jakemgold.myfastmail.com> wrote:

>  Anyone know of an "elegant" solution for getting sticky posts to count
> toward the posts per page limit?
>
> The use case here is a /very /formatted 3x3 grid output for posts. The
> client wants to be able to use sticky posts to feature his best work, but it
> can't break the 3x3 grid. Out of the box, sticky posts get added on top of
> the posts per page count.
>
> Keep in mind that there are dozens of posts already - so paging is
> important. I can't simply count up the sticky posts and subtract from posts
> per page (setting a new posts_per_page) without breaking paging.
>
> Using count of stickies - posts_per_page for page 1 and then using an
> offset on subsequent pages would work if I could have a negative offset
> (which it seems I can't). It gets even more complicated if the there are
> more sticky posts than there are post blocks on the first page (9), but I
> can impose rules to limit the site to a maximum of 9 sticky posts.
>
> I have a few hack-ish ideas, but I thought I'd pose the question first in
> case anyone has dealt with this limitation before.
>
> Jake
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From scribu at gmail.com  Tue Aug  3 17:29:04 2010
From: scribu at gmail.com (scribu)
Date: Tue, 3 Aug 2010 20:29:04 +0300
Subject: [wp-hackers] Question about auto-detecting
In-Reply-To: <8388C26D-69EA-4694-BDF0-45AAEE902BCD@fatheaddesign.com>
References: <8388C26D-69EA-4694-BDF0-45AAEE902BCD@fatheaddesign.com>
Message-ID: <AANLkTinHhQu54vC1LMl5PG8hUsWaqejHuS1pXyYzwmGz@mail.gmail.com>

On Tue, Aug 3, 2010 at 5:12 PM, Gregg F. Tomlinson
<gregg at fatheaddesign.com>wrote:

> Does anyone know of any way of doing browser detection like this
>

The WP Super-Cache plugin does this using .htaccess so it's possible. You
should check it out.


-- 
http://scribu.net

From scribu at gmail.com  Tue Aug  3 17:39:56 2010
From: scribu at gmail.com (scribu)
Date: Tue, 3 Aug 2010 20:39:56 +0300
Subject: [wp-hackers] Time for a wp_post_relationships table?
In-Reply-To: <4C584558.7080906@jakemgold.myfastmail.com>
References: <10320216-AFB8-4063-A2C0-ED3B5DCBFC12@newclarity.net>
	<AANLkTikWu9dHLpubhj4EgHRogw_CdaGa5majKYTzuaqm@mail.gmail.com>
	<FA38AE65-7B98-4633-8BB0-7DA6F8CAAF5A@newclarity.net>
	<AANLkTik_9ryy76WfF3U7R=jQzgN5vBOGJSt5afURGFCo@mail.gmail.com>
	<F34C274D-9D82-4312-9727-F0E29FC6A96A@newclarity.net>
	<AANLkTikVdaRRBVv1YL2-OU1NFbEbprURjoA5-FR0oqR9@mail.gmail.com>
	<AANLkTinDHsk3+DprCAN7nh7di3e6+wXPGwc1xDTx1F9D@mail.gmail.com>
	<4C584558.7080906@jakemgold.myfastmail.com>
Message-ID: <AANLkTim2fAbcgKdAiw8FfhyF14UtnAhN2_mPTY1IeeKI@mail.gmail.com>

On Tue, Aug 3, 2010 at 7:35 PM, Jake Goldman <
wphackers at jakemgold.myfastmail.com> wrote:

> I just released a plug-in that adds full, post-like meta data functionality
> to taxonomy terms. I'd needed this in several projects recently, and finally
> decided I should just package it up as an independent plug-in.
>

It seems you're not the only one. There seem to be 3 plugins that do the
same thing ATM:

http://wordpress.org/extend/plugins/simple-term-meta/
http://wordpress.org/extend/plugins/taxonomy-metadata/
http://wordpress.org/extend/plugins/meta-for-taxonomies/


-- 
http://scribu.net

From otto at ottodestruct.com  Tue Aug  3 17:41:17 2010
From: otto at ottodestruct.com (Otto)
Date: Tue, 3 Aug 2010 12:41:17 -0500
Subject: [wp-hackers] Question about auto-detecting
In-Reply-To: <8388C26D-69EA-4694-BDF0-45AAEE902BCD@fatheaddesign.com>
References: <8388C26D-69EA-4694-BDF0-45AAEE902BCD@fatheaddesign.com>
Message-ID: <AANLkTin8epHHvdmG8Prfqt6oRZ25_WgHkeT=WCg_w53B@mail.gmail.com>

On Tue, Aug 3, 2010 at 9:12 AM, Gregg F. Tomlinson
<gregg at fatheaddesign.com> wrote:
> www.flashsite1.com ?==>> ?mobileusers go to mobile.flashsite1.com (same URL,
> same webhost, just different dir in which the site is stored)
>
> www.flashsite2.com ?==>> ?mobileusers go to mobile.flashsite2.com (same URL,
> same webhost, just different dir in which the site is stored)
>
> Drawback to this methodology is that I would have multiple WP installs for
> the client to manage here.

Doesn't have to be separate installs.
http://ottopress.com/2010/wordpress-3-0-multisite-domain-mapping-tutorial/

-Otto

From peter at oncefuture.com  Tue Aug  3 17:55:29 2010
From: peter at oncefuture.com (Peter Adams)
Date: Tue, 3 Aug 2010 10:55:29 -0700
Subject: [wp-hackers] Single Action hook for _new_ posts of any type?
In-Reply-To: <p2p4cc4de141005061348ide4d56cfm6f10963e01d012@mail.gmail.com>
References: <C8BC2F81-5910-47D1-9D5C-CCFBA82EF515@oncefuture.com>
	<p2p4cc4de141005061348ide4d56cfm6f10963e01d012@mail.gmail.com>
Message-ID: <DBEBE87A-8E2E-4C31-B0E8-EB25322C2FE3@oncefuture.com>

Picking this back up...

This hook seems to get fired during auto-saves. Is there a way to detect auto-saves when a post's status is transitioned?

Looking for a way to tease out true post "edits".

-P-

On May 6, 2010, at 1:48 PM, Andrew Nacin wrote:

> wp_transition_post_status().
> 
> On Thu, May 6, 2010 at 4:41 PM, Peter Adams <peter at oncefuture.com> wrote:
> 
>> Folks -
>> 
>> I'm looking to get two hooks to fire when:
>> 
>> A) a user creates a _new_ post of any type
>> B) when a user edits a post of any type
>> 
>> Found that "edit_post" is perfect for case B but that the "save_post" and
>> "wp_insert_post" hooks are problematic for A because they also fire when
>> "edit_post"  fires (as they should).
>> 
>> I was going to turn to a variable hook like "publish_post" but  since the
>> hook name uses $post->post_type in the construction of the name I would have
>> to setup hook ahead of time or all different post types - which isn't going
>> to work for posts with custom types that i don't know about.
>> 
>> So my question is...
>> 
>> is there a single hook like "edit_post" that is fired ONLY when a new post
>> of any type is created and passes the post object as or an id as a param so
>> i can get at post's type?
>> 
>> Thanks,
>> 
>> -P-
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers


From shacker at birdhouse.org  Tue Aug  3 18:05:03 2010
From: shacker at birdhouse.org (Scot Hacker)
Date: Tue, 3 Aug 2010 11:05:03 -0700
Subject: [wp-hackers] Getting list of plugins from shell script
In-Reply-To: <mailman.15.1280836802.13575.wp-hackers@lists.automattic.com>
References: <mailman.15.1280836802.13575.wp-hackers@lists.automattic.com>
Message-ID: <204F8674-1289-4430-9587-37A4FE6AA99B@birdhouse.org>


On Aug 3, 2010, at 5:00 AM, wp-hackers-request at lists.automattic.com  
wrote:

> Message: 3
> Date: Tue, 3 Aug 2010 04:38:14 -0400
> From: Mike Schinkel <mikeschinkel at newclarity.net>
>
> Scot:
>
> Why don't you call a PHP script from the shell?  Problem is that  
> option is serialized and you'll find it easiest to get PHP to  
> unserialize it for you.
>
> Here's a shell script that will do for you:  http://gist.github.com/506055
>

Nice! I know I said in my OP that I was looking for a shell, not a PHP  
solution. Thanks Harish Narayan and Mike for the shell solutions they  
sent off-list -- really creative (if somewhat hairy). But the fact  
that this data is serialized in a single field, and being able to use  
PHP's unserialize() function to get at it, makes for a much cleaner  
solution. So I'm doing that - popping out to a copy of the script above.

Thanks all,
Scot



From sbruner at slipfire.com  Tue Aug  3 18:08:58 2010
From: sbruner at slipfire.com (Steve Bruner [SlipFire])
Date: Tue, 3 Aug 2010 14:08:58 -0400
Subject: [wp-hackers] Time for a wp_post_relationships table?
Message-ID: <AANLkTinTj_D2rTNYbHpNoGZMLo-Ww=vHdar3h8VU6V2e@mail.gmail.com>

In RoloPress, we added the relationship between Companies and Contacts
through custom taxonomies, and it worked great.   You can check it out the
demo here:http://demo.rolopress.com/  Or download it here:
http://rolopress.com/

Steve

From lox.dev at knc.nc  Tue Aug  3 18:13:46 2010
From: lox.dev at knc.nc (Lox)
Date: Wed, 4 Aug 2010 05:13:46 +1100
Subject: [wp-hackers] Best practice: custom registration form
In-Reply-To: <AANLkTinQojtDJsw__bpjVr0f3bpPvv3HCzHNQU7Kn8wg@mail.gmail.com>
References: <AANLkTinpqj-dUb5BmyiJ1Mnpgbdy_6ocx=myOGVqVOXK@mail.gmail.com> 
	<AANLkTinzPn2Ng_eA1iAMgvSAFJJ+kw+mgkd1Dd+dAYCF@mail.gmail.com> 
	<AANLkTi=NbiGEihSY0a2ve7v92WyPdVhTRtuscjXDZCd_@mail.gmail.com> 
	<AANLkTi=x4vQV8vcG0PhBC+KkOOpKZr=e0WNm5BTHCJ6P@mail.gmail.com> 
	<AANLkTinQojtDJsw__bpjVr0f3bpPvv3HCzHNQU7Kn8wg@mail.gmail.com>
Message-ID: <AANLkTimd3AL36hjRP9ao6-gjYdJsEqgsWxqbBNavM82-@mail.gmail.com>

2010/8/4 Frank Bueltge <frank at bueltge.de>:
> WP has fuctions for this job, see on wp_login_form

Mmmh well I can't find any wp_login_form.php but a wp_login.php that I
am currently duplicating to be available from the frontend, integrated
into a choosen page.

> Is easy-contact to use without plugins, you can also use wp_rewrite for
> Customer rewrite

wp_rewrite will take over the whole target page whereas I want to use
it so the WP admins can set/edit the title and a descriptive text for
the registration page and also link to it from the new nav_menu
system.

>
> On Tuesday, August 3, 2010, Lox <lox.dev at knc.nc> wrote:
>>
>> I do not like the short-code approach ei...
> Trying to avoid short codes entirely is asking for headaches when you
> are using wp. They are the most common solution to many problems and
> are popular because they are easy to create and use. If you are having
> scaling issues you need to work on them separately, banning short
> codes is not an efficient use of time

I never talked about banning short-codes and I make extensive use of
them in my project.

But it is a waste of ressources to set a shortcode that will be used
only ONCE in a website of over 300 pages....

>

So I decided to use the do_action('registration_form') approach. It is
added manually for now but it will override the target page template
with its own when finished.

Now i face the problem (that I will have faced using shortcodes) that
I can't set any header, either for setting cookies or for
redirecting...

-- 
Lox
lox.dev at knc.nc

From lox.dev at knc.nc  Tue Aug  3 18:41:04 2010
From: lox.dev at knc.nc (Lox)
Date: Wed, 4 Aug 2010 05:41:04 +1100
Subject: [wp-hackers] Time for a wp_post_relationships table?
In-Reply-To: <AANLkTinTj_D2rTNYbHpNoGZMLo-Ww=vHdar3h8VU6V2e@mail.gmail.com>
References: <AANLkTinTj_D2rTNYbHpNoGZMLo-Ww=vHdar3h8VU6V2e@mail.gmail.com>
Message-ID: <AANLkTimCKuSvwV05CH2eRgLxds7_Dtiz672Wk_gDsmP+@mail.gmail.com>

Mike,

I'll point to that plugin that implements a post2post feature (from
trac) : http://wordpress.org/extend/plugins/posts-to-posts/

I know it uses a "post meta" approach but you could create such a
plug-in that creates your needed table and functions to use it... Then
any plug-in dev that need that approach can just install your plug-in
and benefit from it.

Otto, mirroring custom posts to taxonomies can be a bad ass, I mean,
creating needs to be handled, as well as modification and deletion. So
the question is: can't wordpress provides helpers for custom post
mirroring to a taxonomy? Like adding a "mirror_taxonomy_id" parameter
to custom post_type....

My two cents.

-- 
Lox
lox.dev at knc.nc

From otto at ottodestruct.com  Tue Aug  3 18:36:53 2010
From: otto at ottodestruct.com (Otto)
Date: Tue, 3 Aug 2010 13:36:53 -0500
Subject: [wp-hackers] Single Action hook for _new_ posts of any type?
In-Reply-To: <DBEBE87A-8E2E-4C31-B0E8-EB25322C2FE3@oncefuture.com>
References: <C8BC2F81-5910-47D1-9D5C-CCFBA82EF515@oncefuture.com> 
	<p2p4cc4de141005061348ide4d56cfm6f10963e01d012@mail.gmail.com> 
	<DBEBE87A-8E2E-4C31-B0E8-EB25322C2FE3@oncefuture.com>
Message-ID: <AANLkTinrU=-5rqg+VxrhiyziMxDOC_=zKgK1gQpNCkTF@mail.gmail.com>

On Tue, Aug 3, 2010 at 12:55 PM, Peter Adams <peter at oncefuture.com> wrote:
> Picking this back up...
>
> This hook seems to get fired during auto-saves. Is there a way to detect auto-saves when a post's status is transitioned?
>
> Looking for a way to tease out true post "edits".

The transition_post_status hook gets fired a lot. But you can compare
the old and new post status to know what's going on.

add_action( 'transition_post_status', 'whatever', 10, 3 );
function whatever( $new, $old, $post ) {
// compare $new and $old and act accordingly
}

Basically, when $new is publish and $old is anything else, then you
know a post is getting published for the first time. Or whatever your
own criteria are. You can also examine $post to check for other
things, like post_type or something. If it doesn't fit your criteria,
just return without doing anything.

-Otto

From otto at ottodestruct.com  Tue Aug  3 19:03:39 2010
From: otto at ottodestruct.com (Otto)
Date: Tue, 3 Aug 2010 14:03:39 -0500
Subject: [wp-hackers] Time for a wp_post_relationships table?
In-Reply-To: <AANLkTimCKuSvwV05CH2eRgLxds7_Dtiz672Wk_gDsmP+@mail.gmail.com>
References: <AANLkTinTj_D2rTNYbHpNoGZMLo-Ww=vHdar3h8VU6V2e@mail.gmail.com> 
	<AANLkTimCKuSvwV05CH2eRgLxds7_Dtiz672Wk_gDsmP+@mail.gmail.com>
Message-ID: <AANLkTincGqUOMF-zBmEqYyW0EGbxpa5hRs4tVa7BgYTY@mail.gmail.com>

On Tue, Aug 3, 2010 at 1:41 PM, Lox <lox.dev at knc.nc> wrote:
> Otto, mirroring custom posts to taxonomies can be a bad ass, I mean,
> creating needs to be handled, as well as modification and deletion. So
> the question is: can't wordpress provides helpers for custom post
> mirroring to a taxonomy? Like adding a "mirror_taxonomy_id" parameter
> to custom post_type....

But what exactly are you mirroring? The title of the post? Some of the
content? A custom field? Posts are not taxonomies, which is why this
has to be left up to the specific implementation. How you define your
terms based on your post content is really your choice, sort of thing.

It's not really all that hard to do, you simply add the term to the
post with wp_set_object_terms when the post is published, and perhaps
modify it when the post is edited (delete will be handled
automatically, as when a post goes away, so does it's relationship
with its terms). You can probably use transistion_post_status to
handle both of those.

-Otto

From lox.dev at knc.nc  Tue Aug  3 19:38:09 2010
From: lox.dev at knc.nc (Lox)
Date: Wed, 4 Aug 2010 06:38:09 +1100
Subject: [wp-hackers] Time for a wp_post_relationships table?
In-Reply-To: <AANLkTincGqUOMF-zBmEqYyW0EGbxpa5hRs4tVa7BgYTY@mail.gmail.com>
References: <AANLkTinTj_D2rTNYbHpNoGZMLo-Ww=vHdar3h8VU6V2e@mail.gmail.com> 
	<AANLkTimCKuSvwV05CH2eRgLxds7_Dtiz672Wk_gDsmP+@mail.gmail.com> 
	<AANLkTincGqUOMF-zBmEqYyW0EGbxpa5hRs4tVa7BgYTY@mail.gmail.com>
Message-ID: <AANLkTi=WEQ=Hs6fYLcm_c-1k27=gawuRQ8xJGCQ-Yp94@mail.gmail.com>

2010/8/4 Otto <otto at ottodestruct.com>:
> But what exactly are you mirroring? The title of the post? Some of the
> content? A custom field?

Eg: I have my movies and actors custom post_types. To make the
relation I _mirrors_ actors (title + short description) to a custom
taxonomy actors_tax and then apply the right tax term(s) to each
movie.

> Posts are not taxonomies, which is why this
> has to be left up to the specific implementation. How you define your
> terms based on your post content is really your choice, sort of thing.
>
> It's not really all that hard to do, you simply add the term to the
> post with wp_set_object_terms when the post is published, and perhaps
> modify it when the post is edited (delete will be handled
> automatically, as when a post goes away, so does it's relationship
> with its terms). You can probably use transistion_post_status to
> handle both of those.

It is not a hard but it is a tedious task. Well it is what it seemed
to me, a new WP developer.

Since WP 3.0 I had to use custom post_type and I needed relations
between them three times. Why? Because taxonomies are too basic: no
HTML description, no thumbnail, no ordering. How? Using post meta
because I didn't have the time to mess up writing a taxonomy mirroring
system.

I am totally sure that many developers will need such post2post
relations too. So I think adding a mirrored_tax_id to custom post
types and have WP handle the mirroring is a neat feature I'll use a
lot, and I am sure others will too.

Anyway you are pointing to some interesting feature/functions I wasn't
aware of. Let me ask you about them in a separate thread.

Regards

-- 
Lox
lox.dev at knc.nc

From wordpress at web-warlocks.net  Tue Aug  3 19:41:23 2010
From: wordpress at web-warlocks.net (The WordPress Web Warlock)
Date: Tue, 03 Aug 2010 21:41:23 +0200
Subject: [wp-hackers] Taxonomy Mirrored Posts Best Practice?
In-Reply-To: <4C4E44DA.6050003@voceconnect.com>
References: <A221F4FA-A08C-407F-B781-607E0D616F68@newclarity.net>
	<4C4E44DA.6050003@voceconnect.com>
Message-ID: <4C5870E3.5040303@web-warlocks.net>

En/na Michael Pretty ha escrit:
> We have a couple more projects lined up where we need a many to many 
> relationship between objects and have decided that for us the best 
> option is to bite the bullet and create a new table. (...) I haven't 
> yet worked out all the details of how it is going to work other than a 
> table that stores parent_id, child_id and relationship_type, with lots 
> of caching. At this point it just seems like it is going to be the 
> only way to provide the many to many relationship that is both stable 
> and provides decent performance.
Hello,

If I didn't misunderstand, this resembles a feature I've developed and 
under progress/improvement/completion; I called those "description 
posts". It's just a name, it doesn't imply any specific custom post type.

A description post links to its term template ?not the single.php for 
the post itself?, and are mostly used as extended term descriptions. 
They may be listed in regular term templates, along "regular" posts, and 
you can have more than a description post per term (so, for instance, 
different authors can give a definition for a term).

Instead of storing what in a graph would be the link, that is, the 
relationship itself, I'm using and storing one or both possible 
directions of that relationship (in separate places/tables), from which 
the relationship itself can be built if needed. I'll elaborate further.

I needed access from both ways. I would need quick access *from the post 
side*, to know which term(s) the post pointed to, to f.i. get the link; 
as I told, they were meant to link to a term. And I'd need, too, good 
access from the *term side*; as I said, I was using them as term 
descriptions, so there should be an easy way to retrieve the description 
posts in the template (I use a wrapper for get_posts). I had no visible 
need, though, for "the relationship itself" (the relationship regardless 
of the point of origin, so to speak), so I priorized the "exits" of each 
"origin point" above the relationship data, which could be built from 
both origin points.

So, on the one hand, there is a special meta box for the postmeta. There 
are several different (non-unique) keys, for the different taxonomies. 
There is _query_cat , _query_post_tag, _query_{taxonomy-slug}, &c, 
mimicking the args for WP_Query... In practice, all those posts point 
just to one category, though, because I don't use taxonomies, but a 
custom replacement. And, though only a value is used, this meta box and 
keys may have other uses; that's why they're non-unique. When updated, 
the meta box save function does not only update (or delete) the 
postmeta, but also the data in the other table, unless it's post_type 
Page (I'll explain why later). I use it with a function that returns a 
single array of term_id and taxonomy, scanning the relevant postmeta 
keys in a given order. With a bit more of code, I think it'd be able to 
return many arrays of term_id and taxonomy (say, just a $single flag?), 
and filter the order of the keys; I haven't had need for that yet, but I 
have some theorical use cases: for instance, a partly-predefined search 
results Page template (which also would be a good use case for multiple 
values per key; say, you're pre-querying some "content categories" with 
category__and, like "all movie reviews written in English": "movie 
reviews" and "written in English" would be the categories).

On the other hand, the direction/relationship *from the term* is also 
stored in another table, a termmeta table, with the same typical 
meta-table structure (it maps to term_id, not to term_taxonomy_id). I 
was using it already for a lot of things, had all the API for it already 
written, and it behaves much like wp_options (loads once and caches a 
lot of data). So I suppose you could store this "term side" in 
{wp_}options... after all, the term hierarchy is stored there (to 
mention an example of "termmeta" stored in wp_options). As in the meta 
box, when the term is updated with the edit form, the postmeta is 
updated, too. (Right now, though, it only allows for deletion, so 
updates have to be made from the post side. As I told, it's still under 
improvement :) ).

In any of the save functions (hooked to save_post or edit_term_meta) you 
can do whatever filters and actions you might need (like adding the 
termmeta when a new postmeta is added, &c). Also, it's quite possible 
that this technique requiers no additional queries, for all the data is 
previously cached somehow (by postmeta and options or, in my case, 
termmeta tables). You're dealing (mostly) with core data (term_id and 
post_id, not some, say, "custom_relationship_id"), so it's easy to 
integrate that with the API, namely, get_posts where post__in is 
termmeta for $term_id, and get_term_link for the according postmeta of 
$post_id. Or query_posts( array( 'category__and' => get_post_meta( 
$post->ID, '_query_cat' , true ) ) );. Etc.

I'd suggest you that, since you're already adding a table, make it 
wp_termmeta and have it available for other term-related uses. For 
instance, if you're using custom post types as "a regular post with 
added custom fields", is better IMHO to make the custom fields 
term-based, not post-type based, because a post can belong to several 
terms, but can only be of a single post type. (These "custom fields by 
term" are obviously "termmeta" data. And a darnly useful one, I might 
add, "piling up" all the custom fields for all the terms). Also, that 
support and APIs you make (say, get_term_meta, get_post_as_term_link...) 
will be available for future projects ?harder to do with the 
often-too-specific post-type-specific code.

I have included this feature in a termmeta plugin (which does the other 
things I said I was already doing), not yet released, but you can check 
it out at my domain; all posts in wordpress/descriptions are like that 
(WordPress/Contents/Descriptions, if you're browsing from the menu at 
the right; for search and SEO vs. navigation/browsing purposes, the 
paths/permalinks aren't the same as the category structure, which has 
lots of indexs: see below about linking terms to Pages). In other 
(localhost) sites, there is more than a single "description" category, 
there are "descriptions of X"; most possibly I'll break down the 
"description" category in my domain, and have "function reference", 
"plugin reference" & so. If you're interested in the code, drop me a 
mail or just ask here.

There's still more to it (tangentially related, at least).

I have category.php doubling also as a Page template; another of the 
termmeta features is to link a term to a Page, and if it's linked, the 
get_term_link function returns ?via hook? the permalink to that Page, 
not the "default" permalink to the term. Obviously, the Page must "know" 
somehow which term is supposed to show, and it uses the same meta fields 
and meta boxes that the "description posts" use. But this relationship 
is one-way only ?so, in my approach, one-way-only relationships are not 
a bug, but a feature.

So, you can have actually a somewhat complicated-to-make-it-easy 
relationships path: The "description post" links to a term, which "is" 
actually a Page (representing that term and using the term template), 
which in turn includes the description posts (because they're the 
extended description for that term), besides the actual Page content. 
So, both posts of both post types (post and Page) represent somehow the 
same term, but in different ways. That is, the *direction* of the 
relationship is strongly relevant, and this is really a big conceptual 
difference with your approach as I understood it: it looked to me like 
your relationships would be always two-way, and the direction depended 
on the point where you were retrieving the relationship from: if you're 
looking at the A-B relationship from A, the direction would be 
necessarily "to B" and vice versa. I'm doing it the opposite way: after 
checking the "exit paths" from A, and getting B as exit path, the 
relationship is bidirectional if B also points to A, one-way if otherwise.

Variations of this behavior are supposed to be implemented via the 
different hooks (get_term_meta, update_term_meta, some in the meta 
boxes, &c). So, quite in the good ol' WordPress style, add the 
additional data as wp_{whatever}meta, do it some way, and allow lots of 
hooks and filters to override it and do it differently :).


From patrik.bona at mrhead.sk  Tue Aug  3 19:51:08 2010
From: patrik.bona at mrhead.sk (=?ISO-8859-1?Q?Patrik_B=F3na?=)
Date: Tue, 03 Aug 2010 21:51:08 +0200
Subject: [wp-hackers] Best practice: custom registration form
In-Reply-To: <AANLkTimd3AL36hjRP9ao6-gjYdJsEqgsWxqbBNavM82-@mail.gmail.com>
References: <AANLkTinpqj-dUb5BmyiJ1Mnpgbdy_6ocx=myOGVqVOXK@mail.gmail.com>
	<AANLkTinzPn2Ng_eA1iAMgvSAFJJ+kw+mgkd1Dd+dAYCF@mail.gmail.com>
	<AANLkTi=NbiGEihSY0a2ve7v92WyPdVhTRtuscjXDZCd_@mail.gmail.com>
	<AANLkTi=x4vQV8vcG0PhBC+KkOOpKZr=e0WNm5BTHCJ6P@mail.gmail.com>
	<AANLkTinQojtDJsw__bpjVr0f3bpPvv3HCzHNQU7Kn8wg@mail.gmail.com>
	<AANLkTimd3AL36hjRP9ao6-gjYdJsEqgsWxqbBNavM82-@mail.gmail.com>
Message-ID: <4C58732C.4000302@mrhead.sk>

I've created custom registration form for one website.

I've used custom page template for doing this (together with my form 
system). Execution of form is first thing in template, so i can do 
redirection, or set cookies...

If you are creating it just for yourself and not for some plugin which 
should be for everybody then i think that best solution is to use custom 
page template.

I've created a lot of forms this way and for me it is best approach.

Patrik

On 08/03/2010 08:13 PM, Lox wrote:
> 2010/8/4 Frank Bueltge<frank at bueltge.de>:
>    
>> WP has fuctions for this job, see on wp_login_form
>>      
> Mmmh well I can't find any wp_login_form.php but a wp_login.php that I
> am currently duplicating to be available from the frontend, integrated
> into a choosen page.
>
>    
>> Is easy-contact to use without plugins, you can also use wp_rewrite for
>> Customer rewrite
>>      
> wp_rewrite will take over the whole target page whereas I want to use
> it so the WP admins can set/edit the title and a descriptive text for
> the registration page and also link to it from the new nav_menu
> system.
>
>    
>> On Tuesday, August 3, 2010, Lox<lox.dev at knc.nc>  wrote:
>>      
>>> I do not like the short-code approach ei...
>>>        
>> Trying to avoid short codes entirely is asking for headaches when you
>> are using wp. They are the most common solution to many problems and
>> are popular because they are easy to create and use. If you are having
>> scaling issues you need to work on them separately, banning short
>> codes is not an efficient use of time
>>      
> I never talked about banning short-codes and I make extensive use of
> them in my project.
>
> But it is a waste of ressources to set a shortcode that will be used
> only ONCE in a website of over 300 pages....
>
>    
>>      
> So I decided to use the do_action('registration_form') approach. It is
> added manually for now but it will override the target page template
> with its own when finished.
>
> Now i face the problem (that I will have faced using shortcodes) that
> I can't set any header, either for setting cookies or for
> redirecting...
>
>    


From lox.dev at knc.nc  Tue Aug  3 19:58:36 2010
From: lox.dev at knc.nc (Lox)
Date: Wed, 4 Aug 2010 06:58:36 +1100
Subject: [wp-hackers] Mirroring a custom_post to a custom_taxonomy for
	post2post relation [was: Time for a wp_post_relationships table?]
Message-ID: <AANLkTikV6tw3oERfmMDa+OcGSJ3FZ4z6bbsN79e4tiw7@mail.gmail.com>

Otto,

Taking the following case:

- two custom post types (movies and actors) and a custom taxonomy actors.

- the actors taxonomy should contains all actors created through the
actors custom post type admin ui, not more, not less.

- then, actors term can be applied to any movie. This gives the
ability to retrieve all movies where an actor plays in, or, all actors
of a specific movie.

2010/8/4 Otto <otto at ottodestruct.com>:
> It's not really all that hard to do, you simply add the term to the
> post with wp_set_object_terms when the post is published, and perhaps
> modify it when the post is edited

Taking an actor creation. When the actor get created (save_post hook)
I apply a term in actor taxonomy with the actor post title as the
term, using wp_set_object_terms ?

When it is a post update, I need to update the taxonomy using wp_update_term ?

So basically, I add an action 'save_post' where I check:
- if post type is actor
- if it is a post update or a post creation
- act accordingly

Is that it?

> (delete will be handled
> automatically, as when a post goes away, so does it's relationship
> with its terms).

Not automatically: if an actor get deleted, the related term in actors
taxonomy could also have been applied to one or more movies, and thus
won't be deleted

> You can probably use transistion_post_status to
> handle both of those.

transistion_post_status ? Is that an action hook? If so it is undocumented...

-- 
Lox
lox.dev at knc.nc

From lox.dev at knc.nc  Tue Aug  3 20:03:35 2010
From: lox.dev at knc.nc (Lox)
Date: Wed, 4 Aug 2010 07:03:35 +1100
Subject: [wp-hackers] Best practice: custom registration form
In-Reply-To: <4C58732C.4000302@mrhead.sk>
References: <AANLkTinpqj-dUb5BmyiJ1Mnpgbdy_6ocx=myOGVqVOXK@mail.gmail.com> 
	<AANLkTinzPn2Ng_eA1iAMgvSAFJJ+kw+mgkd1Dd+dAYCF@mail.gmail.com> 
	<AANLkTi=NbiGEihSY0a2ve7v92WyPdVhTRtuscjXDZCd_@mail.gmail.com> 
	<AANLkTi=x4vQV8vcG0PhBC+KkOOpKZr=e0WNm5BTHCJ6P@mail.gmail.com> 
	<AANLkTinQojtDJsw__bpjVr0f3bpPvv3HCzHNQU7Kn8wg@mail.gmail.com> 
	<AANLkTimd3AL36hjRP9ao6-gjYdJsEqgsWxqbBNavM82-@mail.gmail.com> 
	<4C58732C.4000302@mrhead.sk>
Message-ID: <AANLkTinZcoie7hYDWXOO2CBzzGU_JUHbneMe+H3==XmR@mail.gmail.com>

2010/8/4 Patrik B?na <patrik.bona at mrhead.sk>:
> I've created custom registration form for one website.
>
> I've used custom page template for doing this (together with my form
> system). Execution of form is first thing in template, so i can do
> redirection, or set cookies...
>
> If you are creating it just for yourself and not for some plugin which
> should be for everybody then i think that best solution is to use custom
> page template.
>
> I've created a lot of forms this way and for me it is best approach.

This what I end up using: a custom page template with a
do_action('register_form').

But when the template is called, the headers are already sent, so I
wonder how you can send headers there (like wp_redirect does), even at
the very beginning of the template ..

Regards

-- 
Lox
lox.dev at knc.nc

From scribu at gmail.com  Tue Aug  3 20:14:06 2010
From: scribu at gmail.com (scribu)
Date: Tue, 3 Aug 2010 23:14:06 +0300
Subject: [wp-hackers] Time for a wp_post_relationships table?
In-Reply-To: <AANLkTi=WEQ=Hs6fYLcm_c-1k27=gawuRQ8xJGCQ-Yp94@mail.gmail.com>
References: <AANLkTinTj_D2rTNYbHpNoGZMLo-Ww=vHdar3h8VU6V2e@mail.gmail.com>
	<AANLkTimCKuSvwV05CH2eRgLxds7_Dtiz672Wk_gDsmP+@mail.gmail.com>
	<AANLkTincGqUOMF-zBmEqYyW0EGbxpa5hRs4tVa7BgYTY@mail.gmail.com>
	<AANLkTi=WEQ=Hs6fYLcm_c-1k27=gawuRQ8xJGCQ-Yp94@mail.gmail.com>
Message-ID: <AANLkTik6JkjpjkEQvI2nAn4JQqSMjFfqPDi56xAxW4mQ@mail.gmail.com>

I think I'm going to make my Posts 2 Posts plugin use a glue taxonomy, as
described by Daniel Cameron and Otto.

It should prevent the scaling issues described by Mike Schinkel.


On Tue, Aug 3, 2010 at 10:38 PM, Lox <lox.dev at knc.nc> wrote:

> 2010/8/4 Otto <otto at ottodestruct.com>:
> > But what exactly are you mirroring? The title of the post? Some of the
> > content? A custom field?
>
> Eg: I have my movies and actors custom post_types. To make the
> relation I _mirrors_ actors (title + short description) to a custom
> taxonomy actors_tax and then apply the right tax term(s) to each
> movie.
>

With the approach I'm envisioning, the only thing mirrored will be the post
id.


-- 
http://scribu.net

From glenn at glennansley.com  Tue Aug  3 20:21:09 2010
From: glenn at glennansley.com (Glenn Ansley)
Date: Tue, 3 Aug 2010 16:21:09 -0400
Subject: [wp-hackers] Best practice: custom registration form
In-Reply-To: <AANLkTinZcoie7hYDWXOO2CBzzGU_JUHbneMe+H3==XmR@mail.gmail.com>
References: <AANLkTinpqj-dUb5BmyiJ1Mnpgbdy_6ocx=myOGVqVOXK@mail.gmail.com>
	<AANLkTinzPn2Ng_eA1iAMgvSAFJJ+kw+mgkd1Dd+dAYCF@mail.gmail.com>
	<AANLkTi=NbiGEihSY0a2ve7v92WyPdVhTRtuscjXDZCd_@mail.gmail.com>
	<AANLkTi=x4vQV8vcG0PhBC+KkOOpKZr=e0WNm5BTHCJ6P@mail.gmail.com>
	<AANLkTinQojtDJsw__bpjVr0f3bpPvv3HCzHNQU7Kn8wg@mail.gmail.com>
	<AANLkTimd3AL36hjRP9ao6-gjYdJsEqgsWxqbBNavM82-@mail.gmail.com>
	<4C58732C.4000302@mrhead.sk>
	<AANLkTinZcoie7hYDWXOO2CBzzGU_JUHbneMe+H3==XmR@mail.gmail.com>
Message-ID: <AANLkTik5saKcpkBeYAti6m4nAKt9QkjNK4bgSVNG11Ou@mail.gmail.com>

You already have post_content in the wp_query object at the
template_redirect hook.
Parse the wp_query object for your shortcode and do what's needed at
that point (before headers are sent).

Glenn Ansley
http://twitter.com/glennansley
http://profiles.wordpress.org/blepoxp

On Tue, Aug 3, 2010 at 4:03 PM, Lox <lox.dev at knc.nc> wrote:
> 2010/8/4 Patrik B?na <patrik.bona at mrhead.sk>:
>> I've created custom registration form for one website.
>>
>> I've used custom page template for doing this (together with my form
>> system). Execution of form is first thing in template, so i can do
>> redirection, or set cookies...
>>
>> If you are creating it just for yourself and not for some plugin which
>> should be for everybody then i think that best solution is to use custom
>> page template.
>>
>> I've created a lot of forms this way and for me it is best approach.
>
> This what I end up using: a custom page template with a
> do_action('register_form').
>
> But when the template is called, the headers are already sent, so I
> wonder how you can send headers there (like wp_redirect does), even at
> the very beginning of the template ..
>
> Regards
>
> --
> Lox
> lox.dev at knc.nc
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From lox.dev at knc.nc  Tue Aug  3 20:23:31 2010
From: lox.dev at knc.nc (Lox)
Date: Wed, 4 Aug 2010 07:23:31 +1100
Subject: [wp-hackers] Time for a wp_post_relationships table?
In-Reply-To: <AANLkTik6JkjpjkEQvI2nAn4JQqSMjFfqPDi56xAxW4mQ@mail.gmail.com>
References: <AANLkTinTj_D2rTNYbHpNoGZMLo-Ww=vHdar3h8VU6V2e@mail.gmail.com> 
	<AANLkTimCKuSvwV05CH2eRgLxds7_Dtiz672Wk_gDsmP+@mail.gmail.com> 
	<AANLkTincGqUOMF-zBmEqYyW0EGbxpa5hRs4tVa7BgYTY@mail.gmail.com> 
	<AANLkTi=WEQ=Hs6fYLcm_c-1k27=gawuRQ8xJGCQ-Yp94@mail.gmail.com> 
	<AANLkTik6JkjpjkEQvI2nAn4JQqSMjFfqPDi56xAxW4mQ@mail.gmail.com>
Message-ID: <AANLkTimsrQe27oy9c7zXaVJuSQXCf2xW9XWZ+kiF-4YD@mail.gmail.com>

2010/8/4 scribu <scribu at gmail.com>:
>> Eg: I have my movies and actors custom post_types. To make the
>> relation I _mirrors_ actors (title + short description) to a custom
>> taxonomy actors_tax and then apply the right tax term(s) to each
>> movie.
>>
>
> With the approach I'm envisioning, the only thing mirrored will be the post
> id.

Well having the post title mirrored is a must have. This allows ,for
example, to select and display a movie actors list _without_ querying
for the actor post... Saving database queries when possible is good.

-- 
Lox
lox.dev at knc.nc

From patrik.bona at mrhead.sk  Tue Aug  3 20:27:13 2010
From: patrik.bona at mrhead.sk (=?ISO-8859-1?Q?Patrik_B=F3na?=)
Date: Tue, 03 Aug 2010 22:27:13 +0200
Subject: [wp-hackers] Best practice: custom registration form
In-Reply-To: <AANLkTinZcoie7hYDWXOO2CBzzGU_JUHbneMe+H3==XmR@mail.gmail.com>
References: <AANLkTinpqj-dUb5BmyiJ1Mnpgbdy_6ocx=myOGVqVOXK@mail.gmail.com>
	<AANLkTinzPn2Ng_eA1iAMgvSAFJJ+kw+mgkd1Dd+dAYCF@mail.gmail.com>
	<AANLkTi=NbiGEihSY0a2ve7v92WyPdVhTRtuscjXDZCd_@mail.gmail.com>
	<AANLkTi=x4vQV8vcG0PhBC+KkOOpKZr=e0WNm5BTHCJ6P@mail.gmail.com>
	<AANLkTinQojtDJsw__bpjVr0f3bpPvv3HCzHNQU7Kn8wg@mail.gmail.com>
	<AANLkTimd3AL36hjRP9ao6-gjYdJsEqgsWxqbBNavM82-@mail.gmail.com>
	<4C58732C.4000302@mrhead.sk>
	<AANLkTinZcoie7hYDWXOO2CBzzGU_JUHbneMe+H3==XmR@mail.gmail.com>
Message-ID: <4C587BA1.3000602@mrhead.sk>

I don't use wordpress registration form. I use my own form instead, so i 
can do whatever i want.

I've decided to do it this way:
- because customer wanted it
- i can better handle validation of required fields stored in meta data
- i can do whatever i want during registration process ;)

Patrik

On 08/03/2010 10:03 PM, Lox wrote:
> This what I end up using: a custom page template with a
> do_action('register_form').
>
> But when the template is called, the headers are already sent, so I
> wonder how you can send headers there (like wp_redirect does), even at
> the very beginning of the template ..
>
> Regards
>    


From dvmorris at gmail.com  Tue Aug  3 20:32:02 2010
From: dvmorris at gmail.com (David Morris)
Date: Tue, 3 Aug 2010 15:32:02 -0500
Subject: [wp-hackers] admin-ajax.php widget settings form issue
Message-ID: <AANLkTik0NL7vbnxk=dLQm_4aD0xmTSGZCFOjwtR9C_RK@mail.gmail.com>

I'm not sure this is technically a bug or not, but I had a huge issue with
some custom widgets causing all widget settings dialogs to disappear today.

Basically, I wrote three custom widgets, and any time two of them were
activated at the same time, and I dropped any widget onto a sidebar, the
settings form would show up and then immediately disappear. If I deactivated
one of the two custom widgets, the widget settings dialogs would work just
fine.

After a bunch of digging, I found some code in widgets.dev.js, in the save()
function, where it does a $.post request to admin-ajax.php that was causing
the div contents to be cleared out. The callback function for the post
request to admin-ajax.php was receiving some extra whitespace in the
response, and it caused the widget settings form to get cleared out:

$.post( ajaxurl, data, function(r){

...

$('.ajax-feedback').css('visibility', 'hidden');
if ( r && r.length > 2 ) {
        $('div.widget-content', widget).html(r);
        wpWidgets.appendTitle(widget);
        wpWidgets.fixLabels(widget);
}
...
});

It turned out that I just had a few line breaks after my closing php tags in
each of my three custom widgets, and removing them fixed the issue. That
explained why it worked fine when only one of the widgets was activated.
Each widget didn't have enough extra line breaks to break that javascript
callback function, but two of them together did.

It seems that rather than depending on the length of the admin-ajax.php
response, it ought to depend on some kind of message or code. Just my two
cents...

Thanks,

Dave Morris

From scribu at gmail.com  Tue Aug  3 20:49:13 2010
From: scribu at gmail.com (scribu)
Date: Tue, 3 Aug 2010 23:49:13 +0300
Subject: [wp-hackers] Time for a wp_post_relationships table?
In-Reply-To: <AANLkTimsrQe27oy9c7zXaVJuSQXCf2xW9XWZ+kiF-4YD@mail.gmail.com>
References: <AANLkTinTj_D2rTNYbHpNoGZMLo-Ww=vHdar3h8VU6V2e@mail.gmail.com>
	<AANLkTimCKuSvwV05CH2eRgLxds7_Dtiz672Wk_gDsmP+@mail.gmail.com>
	<AANLkTincGqUOMF-zBmEqYyW0EGbxpa5hRs4tVa7BgYTY@mail.gmail.com>
	<AANLkTi=WEQ=Hs6fYLcm_c-1k27=gawuRQ8xJGCQ-Yp94@mail.gmail.com>
	<AANLkTik6JkjpjkEQvI2nAn4JQqSMjFfqPDi56xAxW4mQ@mail.gmail.com>
	<AANLkTimsrQe27oy9c7zXaVJuSQXCf2xW9XWZ+kiF-4YD@mail.gmail.com>
Message-ID: <AANLkTikBMBVNcY3gyWYM-T4pLqw1jCe9uoQ9yJ8n1UeD@mail.gmail.com>

On Tue, Aug 3, 2010 at 11:23 PM, Lox <lox.dev at knc.nc> wrote:

> Well having the post title mirrored is a must have. This allows ,for
> example, to select and display a movie actors list _without_ querying
> for the actor post... Saving database queries when possible is good.
>

In this case, we're talking only about one extra query (you get all the
posts in one go), which I don't think is worth saving, considering the
effort required.


-- 
http://scribu.net

From otto at ottodestruct.com  Tue Aug  3 20:53:53 2010
From: otto at ottodestruct.com (Otto)
Date: Tue, 3 Aug 2010 15:53:53 -0500
Subject: [wp-hackers] Time for a wp_post_relationships table?
In-Reply-To: <AANLkTi=WEQ=Hs6fYLcm_c-1k27=gawuRQ8xJGCQ-Yp94@mail.gmail.com>
References: <AANLkTinTj_D2rTNYbHpNoGZMLo-Ww=vHdar3h8VU6V2e@mail.gmail.com> 
	<AANLkTimCKuSvwV05CH2eRgLxds7_Dtiz672Wk_gDsmP+@mail.gmail.com> 
	<AANLkTincGqUOMF-zBmEqYyW0EGbxpa5hRs4tVa7BgYTY@mail.gmail.com> 
	<AANLkTi=WEQ=Hs6fYLcm_c-1k27=gawuRQ8xJGCQ-Yp94@mail.gmail.com>
Message-ID: <AANLkTikX6tUKBjeze-yKB1qLsw93iq4LOEovgrwWKjDW@mail.gmail.com>

On Tue, Aug 3, 2010 at 2:38 PM, Lox <lox.dev at knc.nc> wrote:
> 2010/8/4 Otto <otto at ottodestruct.com>:
> Eg: I have my movies and actors custom post_types. To make the
> relation I _mirrors_ actors (title + short description) to a custom
> taxonomy actors_tax and then apply the right tax term(s) to each
> movie.

I'd just use the post_name (aka the slug) as the term instead.
post_name is at least unique.

> Since WP 3.0 I had to use custom post_type and I needed relations
> between them three times. Why? Because taxonomies are too basic: no
> HTML description, no thumbnail, no ordering. How? Using post meta
> because I didn't have the time to mess up writing a taxonomy mirroring
> system.

Yeah, but that's the point. Taxonomies are not data themselves,
they're really just relationships between your data (which is your
custom posts). The term takes a text format, but it can be anything.

Think of it like tags. A tag can be any text, but the only value in
them is the relationship that the tag defines between different posts
that share that tag.

So all you really need is your term to be minimally descriptive and unique.

-Otto

From otto at ottodestruct.com  Tue Aug  3 21:03:29 2010
From: otto at ottodestruct.com (Otto)
Date: Tue, 3 Aug 2010 16:03:29 -0500
Subject: [wp-hackers] Mirroring a custom_post to a custom_taxonomy for
	post2post relation [was: Time for a wp_post_relationships table?]
In-Reply-To: <AANLkTikV6tw3oERfmMDa+OcGSJ3FZ4z6bbsN79e4tiw7@mail.gmail.com>
References: <AANLkTikV6tw3oERfmMDa+OcGSJ3FZ4z6bbsN79e4tiw7@mail.gmail.com>
Message-ID: <AANLkTikwj8-4kiRODOq5hSbQyL+WfRVWz2J8yc6J+_Yi@mail.gmail.com>

On Tue, Aug 3, 2010 at 2:58 PM, Lox <lox.dev at knc.nc> wrote:
> Otto,
>
> Taking the following case:
>
> - two custom post types (movies and actors) and a custom taxonomy actors.
>
> - the actors taxonomy should contains all actors created through the
> actors custom post type admin ui, not more, not less.
>
> - then, actors term can be applied to any movie. This gives the
> ability to retrieve all movies where an actor plays in, or, all actors
> of a specific movie.

I'd also create another "mirrored" taxonomy for movies too, to do it
in reverse.

> 2010/8/4 Otto <otto at ottodestruct.com>:
> Taking an actor creation. When the actor get created (save_post hook)
> I apply a term in actor taxonomy with the actor post title as the
> term, using wp_set_object_terms ?

I'd use the transition_post_status hook instead, but basically, yes.

> When it is a post update, I need to update the taxonomy using wp_update_term ?

Yes, if the information in the post changes enough to warrant it.
Remember that posts are tied to terms only by ID. When you update a
term, that update applies to everything referring to that term. So if
the term is the Actor's name, then you'd take the old name and change
it.

> So basically, I add an action 'save_post' where I check:
> - if post type is actor
> - if it is a post update or a post creation
> - act accordingly
>
> Is that it?

Yes, but again, transition_post_status might be a better place. You
could do it with save_post too, I guess. Haven't looked closely at it.

> Not automatically: if an actor get deleted, the related term in actors
> taxonomy could also have been applied to one or more movies, and thus
> won't be deleted

True, but you might not want to delete the term entirely out of all
posts. Perhaps you're going to recreate the actor's post and still
want the term to exist, so it can still be tied to all his movies.

> transistion_post_status ? Is that an action hook? If so it is undocumented...

Look at the wp_transition_post_status() function. This is called
whenever a post is inserted or updated or published or whatever. It's
very handy.

-Otto

From lox.dev at knc.nc  Tue Aug  3 21:47:00 2010
From: lox.dev at knc.nc (Lox)
Date: Wed, 4 Aug 2010 08:47:00 +1100
Subject: [wp-hackers] Mirroring a custom_post to a custom_taxonomy for
	post2post relation [was: Time for a wp_post_relationships table?]
In-Reply-To: <AANLkTikwj8-4kiRODOq5hSbQyL+WfRVWz2J8yc6J+_Yi@mail.gmail.com>
References: <AANLkTikV6tw3oERfmMDa+OcGSJ3FZ4z6bbsN79e4tiw7@mail.gmail.com> 
	<AANLkTikwj8-4kiRODOq5hSbQyL+WfRVWz2J8yc6J+_Yi@mail.gmail.com>
Message-ID: <AANLkTinz0UF3ZAAJ5Fex1a9KATXVZ8tVjY7FXhzDdNNj@mail.gmail.com>

2010/8/4 Otto <otto at ottodestruct.com>:
> On Tue, Aug 3, 2010 at 2:58 PM, Lox <lox.dev at knc.nc> wrote:
>> Otto,
>>
>> Taking the following case:
>>
>> - two custom post types (movies and actors) and a custom taxonomy actors.
>>
>> - the actors taxonomy should contains all actors created through the
>> actors custom post type admin ui, not more, not less.
>>
>> - then, actors term can be applied to any movie. This gives the
>> ability to retrieve all movies where an actor plays in, or, all actors
>> of a specific movie.
>
> I'd also create another "mirrored" taxonomy for movies too, to do it
> in reverse.

We'll do with a single taxonomy to simplify, if you don't mind.

>> Not automatically: if an actor get deleted, the related term in actors
>> taxonomy could also have been applied to one or more movies, and thus
>> won't be deleted
>
> True, but you might not want to delete the term entirely out of all
> posts. Perhaps you're going to recreate the actor's post and still
> want the term to exist, so it can still be tied to all his movies.

The actor post type acts like a description of the corresponding actor
term. So if the it is deleted, the term should too.

>> transistion_post_status ? Is that an action hook? If so it is undocumented...
>
> Look at the wp_transition_post_status() function. This is called
> whenever a post is inserted or updated or published or whatever. It's
> very handy.

It is, thank for pointing me at it.

I have made a proof 1of concept of the 'mirroring' system
(http://gist.github.com/507200), but I fail at updating the term name
when the post name changes. How can I know if it a post post_name has
changed in transition_post_status hook?

Regards

-- 
Lox
lox.dev at knc.nc

From angelia at 10sexyapples.com  Tue Aug  3 22:26:30 2010
From: angelia at 10sexyapples.com (Angelia Baladon)
Date: Tue, 3 Aug 2010 15:26:30 -0700
Subject: [wp-hackers] pre_get_posts problem
Message-ID: <AANLkTik1CttHZHzUtS3iE5r74dHe0J44P8DDdn9ByWTU@mail.gmail.com>

I see that Justin Tadlock has updated his post regarding the use of
pre_get_posts and the code is now:

add_filter( 'pre_get_posts', 'customtype_get_posts' );

function customtype_get_posts( $query ) {

    if ( is_author() && false == $query->query_vars['suppress_filters'] )
        $query->set( 'post_type', array( 'post', 'howto', 'lesson' ,
'attachment' ) );

    return $query;
}

I tested this and it appears to work for my use case where the previous code
failed, but, I'm still weary, with all the discussion of how wrong the
pre_get_posts approach is, on whether to use it.

Mike submitted this approach ... thanks again Mike ... but, of course, as
noted by Mike, it has a few limitations.

add_filter( 'parse_query', 'my_parse_query' );
function my_parse_query( $query ) {
       $q = $query->query;
       $is_menu = (isset($q['post_type']) &&
$q['post_type']=='nav_menu_item');
       if (!$is_menu && ((is_author() && isset($q['author_name'])))) {
               $query->query_vars['post_type'] = array( 'post', 'lesson',
'howto', 'attachment' );
       }
}

I'm assuming that another variation of Mike's version, minus the
limitations, would be the most appropriate, but, would like to try to really
get to the bottom of discovering the "holy grail" for getting custom post
types inserted into specific loops.

Does anyone have any feedback regarding this new version of using
pre_get_posts, and where it might fail or cause problems in other areas?

Trying to keep this topic alive until said time arrives~

From peter at oncefuture.com  Tue Aug  3 22:28:35 2010
From: peter at oncefuture.com (Peter Adams)
Date: Tue, 3 Aug 2010 15:28:35 -0700
Subject: [wp-hackers] Single Action hook for _new_ posts of any type?
In-Reply-To: <AANLkTinrU=-5rqg+VxrhiyziMxDOC_=zKgK1gQpNCkTF@mail.gmail.com>
References: <C8BC2F81-5910-47D1-9D5C-CCFBA82EF515@oncefuture.com>
	<p2p4cc4de141005061348ide4d56cfm6f10963e01d012@mail.gmail.com>
	<DBEBE87A-8E2E-4C31-B0E8-EB25322C2FE3@oncefuture.com>
	<AANLkTinrU=-5rqg+VxrhiyziMxDOC_=zKgK1gQpNCkTF@mail.gmail.com>
Message-ID: <6A99FEE3-6D1E-4E68-BA0D-96D924C687C4@oncefuture.com>

right. thanks. 
But how do you tell if it's an auto-save that is firing the hook? 
Seems like this hook shouldn't get called on an auto-save but it does from what i can tell...

-P-

On Aug 3, 2010, at 11:36 AM, Otto wrote:

> On Tue, Aug 3, 2010 at 12:55 PM, Peter Adams <peter at oncefuture.com> wrote:
>> Picking this back up...
>> 
>> This hook seems to get fired during auto-saves. Is there a way to detect auto-saves when a post's status is transitioned?
>> 
>> Looking for a way to tease out true post "edits".
> 
> The transition_post_status hook gets fired a lot. But you can compare
> the old and new post status to know what's going on.
> 
> add_action( 'transition_post_status', 'whatever', 10, 3 );
> function whatever( $new, $old, $post ) {
> // compare $new and $old and act accordingly
> }
> 
> Basically, when $new is publish and $old is anything else, then you
> know a post is getting published for the first time. Or whatever your
> own criteria are. You can also examine $post to check for other
> things, like post_type or something. If it doesn't fit your criteria,
> just return without doing anything.
> 
> -Otto
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers


From mikeschinkel at newclarity.net  Tue Aug  3 22:42:24 2010
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Tue, 3 Aug 2010 18:42:24 -0400
Subject: [wp-hackers] Time for a wp_post_relationships table?
In-Reply-To: <AANLkTi=bQy1NHV---zy82paZcpAMcGGVcDbXJ-5PEfcT@mail.gmail.com>
References: <10320216-AFB8-4063-A2C0-ED3B5DCBFC12@newclarity.net>
	<AANLkTikWu9dHLpubhj4EgHRogw_CdaGa5majKYTzuaqm@mail.gmail.com>
	<FA38AE65-7B98-4633-8BB0-7DA6F8CAAF5A@newclarity.net>
	<AANLkTik_9ryy76WfF3U7R=jQzgN5vBOGJSt5afURGFCo@mail.gmail.com>
	<F34C274D-9D82-4312-9727-F0E29FC6A96A@newclarity.net>
	<AANLkTi=bQy1NHV---zy82paZcpAMcGGVcDbXJ-5PEfcT@mail.gmail.com>
Message-ID: <76B112EA-2581-4E04-AB99-37A4E85D17A2@newclarity.net>

Hi all, 

This is a really long response to everyone's post since last night rather than me sending 10 replies to the list.

On Aug 3, 2010, at 10:06 AM, Casey Bisson wrote:
> I'm actually a bit sympathetic to your question, but many of the
> relationships you describe are taxonomy-style relationships.

Thanks for responding.  Can you explain why you think they are taxonomy-style relationships?  I looked at using taxonomy to start with but at least for most of these example I've not been able to get get functionality need from taxonomy terms that I get from post types. Taxonomies appear to me to be "true/false" flags that relate to the post, not independent entities in their own right such as the attorney+practice area and such as the movie+actor examples.  Can you explain how you'd be able to implement these merely with taxonomy relationships?

> I think what you're really looking for is how to durably attach a post
> (of any type) to a specific term/taxonomy pair. 

Maybe, but I currently don't see how that would work for the functionality.  Maybe you could provide SQL for proof-of-concept?

> Perhaps an extra field for post_id in the term_taxonomy table is what you need?

At first blush that could potentially work (although it feels like it's overloading the taxonomy system in ways that would cause more problems that it would solve.)

Still, here is a "proof-of-concept" query based on what I think you mean showing how to relate movie to actor based on taxonomy term 'role' 

SELECT
	movies.post_title AS movie,
	actors.post_title AS actor,
	roles.name AS role
FROM
	wp_posts actors
	INNER JOIN wp_term_relationships actor_movie ON actors.ID = actor_movie.object_id
	INNER JOIN wp_term_taxonomy movie_actor ON movie_actor.term_taxonomy_id = actor_movie.term_taxonomy_id
	INNER JOIN wp_terms roles ON roles.term_id = movie_actor.term_id
	INNER JOIN wp_posts movies ON movies.ID = movie_actor.post_id
WHERE
	movie_actor.taxonomy = 'role'

Is this what you meant?

Unfortunately the problem with this approach is that term_id+term_taxonomy_id is a primary key so you can only join to one post per role, effectively killing this idea unless we were to make that index non-unique but I think it is unique for a reason and changing it could cause unintended consequences.

I think thought, "Okay, maybe we could add a "post_id" to wp_term_relationships?"  Which would use this SQL as proof-of-concept:

EXPLAIN SELECT
	movies.post_title AS movie,
	actors.post_title AS actor,
	roles.name AS role
FROM
	wp_posts actors
	INNER JOIN wp_term_relationships actor_movie ON actors.ID = actor_movie.object_id
	INNER JOIN wp_term_taxonomy movie_actor ON movie_actor.term_taxonomy_id = actor_movie.term_taxonomy_id
	INNER JOIN wp_posts movies ON movies.ID = actor_movie.post_id
	INNER JOIN wp_terms roles ON roles.term_id = movie_actor.term_id
WHERE
	movie_actor.taxonomy = 'role'

Unfortunately, that TOO has a blocking unique key, this time object_id+term_taxomony_id.  And that too I fear would be a bad idea to make non-unique (but maybe I'm too cautious?)

Of the two, ignoring the unique key problem, the latter would make more sense to me.


> Some WP themes and sites have used the category/taxonomy description field
> very well.

I did exactly that on my conference website example.  I implemented "Rooms" and "Time Slots" as taxonomy terms and stored metadata in the description. But it was a hack and not scalable in complexity, and really felt like it as I worked with it.

> I see Michael Pretty's scenario to be an extension of that (more
> sophisticated, but not an entirely different animal).

I sure wish Michael would weight in because I think only he can really explain his circumstances.

> I can imagine that we could enable many uses of WP by moving that 
> description field into a new post type and replacing the that field in the
> table with a post_id number that links them.

That's an interesting idea but I think it would be blocked by the unique key requirement.

On Aug 3, 2010, at 11:37 AM, Otto wrote:
> On Tue, Aug 3, 2010 at 3:05 AM, Mike Schinkel
> <mikeschinkel at newclarity.net> wrote:
>> Why would we want to devise their own methods rather than use a standard approach built into core?  (It's an honest question.)
> 
> Two reasons.
> 1. Competition breeds better solutions.

Moderation in all things.   Competition is good until a definite pattern emerges and then it's better to collaborate on a standard so that competitors can compete at a higher level.  Throughout history there has been competitive chaos as competition improves the breed and then fundamental patterns emerge, standards are created, and chaos begins again at the next level.  But without those lower level standards being established, chaos simple continues. I proposed this idea because I sensed that the post-to-post requirement is an emerging need which is validated by many people commenting to the affirmative on this post albeit with all kind of different solutions.

> 2. The generic case is not a good fit for all use cases.

On point #2, you are wrong. :)

Seriously, you've not identified a use-case that it's not good for.  And since it's such a fundamental pattern in relational database it's hard for it to not apply. 

>> You are getting too use-case specific; they don't need to specify what the relationships mean only that they are related. Plugins can add the "meaning" layer but WordPress should probably offer the core relationship support.
> 
> The relationships have to be meaningful for there to be
> interoperability between differing implementations.

Taxonomies and terms have no meaning yet they are interoperable.  I simple see that as a basely assertion.

>> I think maybe I simply value standardization as a stepping stone for greater things and you don't (right?) and that difference in how we value standardization colors any discussion we have related to it.
> 
> I think standardization is a good thing, but the standard must be
> well-defined and have a well-defined purpose for it to be useful. This
> particular case just seems very vague and hand-wavy to me.

Honestly I think it is vague to you because you (probably) don't work with CMS use-cases.  In a blogging world it is vague and hand-wavy.  For CMS requirements it is extremely concrete; every site i'm working on needs it.

> I don't see how any of these relate to a table which relates posts to
> taxonomies (and to each other). Posts get related to terms inside
> taxonomies, not to taxonomies themselves.

Huh?  You must misunderstand the request.  It's not posts to taxonomies, it's posts to posts with taxonomy as a classifier.  The default case is no classification because most use cases only have a simple relationship.   For example, an attorney is associated with a practice area.  A movie is associate with an actor.   A doctor with a hospital department.  A restaurant with a location.  And in all cases there is significant information for each entity that makes custom post types the most 

BTW, when people say it should be custom taxonomy instead of custom post type I think it's because they view custom post types in a different manner.  I see lots of people who are creating custom post types that are just different types of posts instead of fundamentally different entities.  An attorney is not a type of practice area or vice versa.  A movie is not a type of actor of vice versa.   A doctor  is not a type of hospital department or vice versa.  A restaurant is not a type of  location of vice versa.  But I've seen people write about custom post types like "review", "opinion", "news", "case-study" etc. and they are all really just documents, aka most could be implemented as "posts" with different taxonomy terms. So I think that colors how people view usage of custom post types and custom taxonomies.

> The cases above seem like you want to be able to relate terms in one
> taxonomy to terms in another taxonomy, not to relate posts to whole
> taxonomies. IN which case I'd say your initial definitions for what
> constitutes a post vs. a term are wrong. If you do want to make
> something where a "thing" has both a post and a term for that thing,
> then you should do it with a custom post type and tie the term from
> the taxonomy to it. Let's consider a simple case of photo management.

Again, I don't want to relate taxonomies, I want to relate posts.  Let's use a simpler example for which all my points would still apply.  See, not taxonomies:

CREATE TABLE wp_post_relationships (
  post_id bigint(20) unsigned NOT NULL,
  related_post_id bigint(20) unsigned NOT NULL,
  PRIMARY KEY (parent_id,post_id),
  KEY post_id (post_id)
) ENGINE=MyISAM DEFAULT CHARSET=utf8;

> Photos are posts (attachments in our specific case, but let's just say
> "photos"). They have people in them. Every person is a term in the
> "people" taxonomy.
> But people have other information about them too. So we make a
> "people" custom post type to hold them. Maybe a bio, avatar, etc. To
> associate the person to the taxonomy, we simply give that post of them
> in "people" the term in the "people" taxonomy, thus relating the two.
> So now, if I'm looking at a photo, I can see a list of the people in
> the photo by looking at the terms in the people taxonomy. Click on one
> of those and I can see all the posts associated with that person. Only
> one of those posts is of the "people" type, and that's the one that
> gives more information about that person.

Ignoring that I think you misunderstand the fundamental aspect of the suggestion, what I think you suggest ends up requiring a significant amount of complexity, at least four table joined where one table would do.

> My point is that posts should connect to terms, and relate to other
> posts by virtue of having the same terms in a taxonomy, even across
> post-type  boundaries. This is a much more flexible way of connecting
> posts to other posts based on specific shared characteristics.

This is exactly what I implemented, and what I've found to be problematic trying to maintain synchronization between all the records.

Take a look at this thread (which generated very little response, btw):

http://lists.automattic.com/pipermail/wp-hackers/2010-July/033507.html

> For your lawyer example (first one):
> Post types: attorney, article, case study, event.
> Taxonomies: attorney, practice area.

> 
> Any of those post types can have terms attached to it from both
> taxonomies. There's a specific restriction (in your plugin code) to
> only allow one attorney post type per attorney term and only one
> attorney term in each attorney post type.


That's exactly what I have implemented.  Exactly.  And it is causing problems with corrupted data because there are so many cases where they can get out of sync.  Not to mention the three extra table joins required.
> 
> The way you seem to want to do it is to have a whole taxonomy for each
> attorney (I think), which is difficult and makes little sense to me.

Nope. You misunderstood. I currently have one term record of taxonomy "attorney" for every post record of post type "attorney."  And it is problematic.  

Note I wouldn't have even brought it up if it had not been for Michael Pretty proactively asserting the same after he implemented much the same as I had just implemented.  But after working with it for a little while I can see where it will cause problems just like he said it does.  Hence my proposal.

> Actually, it is. The postmeta table is indexed by post_id too. If
> you're searching through postmeta, you should always be tying to a
> specific post.

Except for when you are not.  I guess it's possible to maintain parallel postmeta such as this but I really hope you are not proposing trying to keep those in sync too:

post_id -- meta_key -- meta_value
123       -- actor         -- 456
456       -- movie       -- 123

Ugh.

> You are correct that postmeta is a crap way of relating posts to one
> another. But that is exactly what taxonomies and terms were designed
> to do. I think that because you're defining things as a term instead
> of a post type (or vice-versa), I think you're ending up with a
> distorted view of what the necessary queries should be.

I appreciate that taxonomy may have been designed for that but (currently at least) it's not working very well for it.  Honestly I think you misunderstand the use-cases. 

> In your movie example, a movie would be a post type. So would an
> actor. These would hold info about them. But they'd both also be
> taxonomies (movie and actor). How would the two different items be
> related? Term_relationships. A Movie post type would have actors
> assigned to it as terms related to it. And it'd have one term from the
> movies taxonomy related to it as well. An actor would be reversed,
> he's in a bunch of movies (and so is tagged with all those movie
> terms), and he's an actor (and so has his actor term tagged to him
> too).

Yes, I have a plugin implemented for that (which I've used for Attorneys and Practice Areas.)  It's problematic to maintain the synchronization between the two and not extremely scalable because of the larger number of joins and the type of joins, size of keys, etc. query analyzer output, etc.

On Aug 3, 2010, at 12:16 PM, Otto wrote:
> On Tue, Aug 3, 2010 at 3:05 AM, Mike Schinkel
> <mikeschinkel at newclarity.net> wrote:
>> 4.) A movie website could have movies and person-roles where a person-role could be an actor, producer, cinematographer, casting, film editing, costumer, set designer, composer, etc.
> 
> I think I'm starting to see what you're talking about here, and why
> you need the table the way you want it.
> 
> In your design for this one, for example, movies and persons would
> both be a custom post type. The person post would then be associated
> directly to the movie post and you'd create a "role" taxonomy with
> types of relationships to associate the two together in a meaningful
> way.
> 
> The problem is that I don't think this is the right way to do it. It
> seems to me that this is over-generalizing. Instead of "role" being a
> taxonomy and having things like "actor" be terms in it, I think using
> "actor" as a taxonomy is a better way to go.

So you are proposing a different taxonomy for each of: actor, producer, cinematographer, casting agent, production designer, set designer, film editor, art director, costume designer, etc.?  Seems like they'd make so much more sense as a single taxonomy "role" with multiple terms (and yes, I used the post type of "actor" when I should have said "person" but then I would have needed to explain even more.)

> Consider your setup. If I wanted to display a list of credits for a
> movie, I have to go pull all the related posts for that movie and
> possibly parse them to determine names and such. It's a select into
> the posts table based on the join, followed by a lot of code to do
> parsing.

And that's difficult because...?

> But if each role is a taxonomy itself, then the taxonomy name and
> terms both have displayable versions that I can use directly. It's no
> worse than displaying tags. And if I do want to drill deeper, I can
> get related posts by virtue of them sharing terms, and use custom post
> types to determine what each type of post is.

The only reason you can do that now is because there is code implemented in core to allow that.  But with this proposal it presumes that functional code would be added to allow a developer/themer to do the same but much more simply than with the taxonomy system.

> I don't think it's necessarily crazy to allow a "thing" to be both a
> post type *and* a taxonomy as well.

It's not at all crazy.  That was my first reaction and what I implemented.  However, I've found it problematic as did Michael Pretty and after working with it all the benefits I perceived that I would get from mirroring taxonomy posts are really not all that valuable.  Turns out it's not that hard to add post metaboxes to select from a list of related posts and it's not hard to retrieve related posts for post display.

> Managing your restrictions on a per-post basis
> is simpler than having to select a large number of posts 
> and then filter through them in different ways for simple tasks.

I don't know what that means nor how any of that relates to the problem at hand.

> Keeping the correct terms associated with the correct custom-posts is
> not difficult if you abstract out the creation of the posts. For
> example, when I make a new actor post, I'd automatically make the
> proper term for that actor and auto-tag the post for him accordingly.
> The plugin can do this. And then I simply don't give any way to remove
> that term from the actor. The taxonomy can be completely managed
> behind the scenes, the user doesn't have to manually manage it.


I already do that.  But I'm running into too many cases where duplicates are attempting to be created and fail because of duplicates or deleted terms. I'm also concerned that Michael, who works on some big systems, has said it was unworkable and I don't want to have to deal with a situation where I get a lot of sites deployed and clients are constantly running into data corruption scenarios because they've added a plugin that breaks the fragile bonds. And lastly I'm concerned about performance for large sites.

Worst case I'll probably live with this scenario as I loathe to add a non-standard table.  But I expect others will eventually bump into the problems I've been having and will finally address the issue, albeit later than sooner. Sometime it really hurts to be an early adopter.

On Aug 3, 2010, at 12:19 PM, Daniel Cameron wrote:
> We have about 10 post-types and a single taxonomy called 'nexus' that allows
> us to connect any of our posts with each other. The purpose for the
> connections is to build a custom menu of affiliated/associated posts. Also,
> since we're using simple post titles for terms I've built a function that
> uses wp_set_object_terms to automatically create the first affiliation on
> publish.

Mind sharing what your custom post types are?

On Aug 3, 2010, at 12:27 PM, Jeremy Clarke wrote:
> FWIW, I think a built-in system for associating metadata to taxonomy terms
> would solve/simplify a LOT of these scenarios, and make it easier to use the
> taxonomy system as intended without getting involved in post-on-post
> relationships.

Take a look at my comments about the limits of the taxonomy system above because of unique keys.  Do let me know if you see something I'm missing.

> If actors/attorneys/people, in their term format, could have more than one
> data field associated to them then you don't need the special single
> page-type post about them to exist, you can just depend on the term listing
> to show that content at the top with the related posts listed below. E.g.
> Brad Pitt is a term in the actors taxonomy and the term has his bio, photo
> etc. as meta fields. You then just use the get_category_link() style url to
> link to his page, where you show all the info as it if was a post at the
> top, along with other posts/post_types listed below.

In all main cases (attorney, practice area, restaurant, location, etc.) I have at least 5 custom fields now and probably more later. *Other* than relating the posts the custom post types work *extremely* well for the use-cases.

> This would make it a lot easier to have one core post type, in this case
> movies, and let the relationships happen with the detailed and
> metadata-powered taxonomy terms. This wouldn't solve the whole problem when
> you have multiple post types and taxonomies that all have to be related
> together,  but those scenarios will be a nightmare no matter what we do.

I don't agree.  Actors are independent entities which has a lot of information associated with them; have them be a taxonomy term with essentially a binary "related/not-related" just doesn't meet the needs of any system that's more than trivial.

Or maybe I'm missing something?

BTW, I don't think many of those scenarios would be a nightmare with a wp_post_relationships table.

> Of course, if done properly this would make terms feel a lot more like
> posts, but why would that be such a bad thing? They already have a screen to
> edit them like posts do, that screen just sucks right now.
> 
> Things that would make this a reality (mostly doable via. plugin right now,
> but would be much more likely to be used if standardized):
> 
>   - Visual editor and other enhancements in term editing screen.
>   - Standard means of associating meta to terms (term_meta table)
>   - Easy API for defining default custom fields to show up in term editing
>   UI (also needed for posts!)

Actually, a while back I argued that we deprecate wp_term_taxonomy and replace it with a wp_posts->post_type=="term_taxonomy" but nobody seemed interested at the time. ;-)

> IMHO this is a much more obvious need than post-to-post relationships and
> most large cms-y sites could think of ways that term_meta would be useful.
> It's an obvious need that also happens to solve a lot of the simpler class
> of problem Mike is frustrated with.


I think each person's "obvious need" relates to the problems they are recently trying to solve.  I also see benefit to what you propose in addition to a wp_post_relationships table, but not instead of. 

BTW, I'm not frustrated.  If people don't agree I'll just lament the lost opportunity for interoperability and having no one build on a standard post-to-post structure  but I'll go about my own business and just implement what I need.

On Aug 3, 2010, at 1:39 PM, scribu wrote:
> On Tue, Aug 3, 2010 at 7:35 PM, Jake Goldman <
> wphackers at jakemgold.myfastmail.com> wrote:
> 
>> I just released a plug-in that adds full, post-like meta data functionality
>> to taxonomy terms. I'd needed this in several projects recently, and finally
>> decided I should just package it up as an independent plug-in.
>> 
> 
> It seems you're not the only one. There seem to be 3 plugins that do the
> same thing ATM:
> 
> http://wordpress.org/extend/plugins/simple-term-meta/
> http://wordpress.org/extend/plugins/taxonomy-metadata/
> http://wordpress.org/extend/plugins/meta-for-taxonomies/

Now there's an example of 1.) there being a solid need and 2.) divergently incompatible solutions.  Take a look at the three different implementations!

CREATE TABLE wp_termmeta (
	meta_id bigint(20) unsigned NOT NULL AUTO_INCREMENT,
	term_id bigint(20) unsigned NOT NULL DEFAULT '0',
	meta_key varchar(255) DEFAULT NULL,
	meta_value longtext,
	PRIMARY KEY (meta_id),
	KEY term_id (term_id),
	KEY meta_key (meta_key)	  
);		
CREATE TABLE wp_taxonomymeta (
	meta_id bigint(20) unsigned NOT NULL auto_increment,
	taxonomy_id bigint(20) unsigned NOT NULL default '0',
	meta_key varchar(255) default NULL,
	meta_value longtext,
	PRIMARY KEY  (meta_id),
	KEY taxonomy_id (taxonomy_id),
	KEY meta_key (meta_key)
); 
CREATE TABLE wp_term_taxonomy_meta (
	meta_id int(20) NOT NULL auto_increment,
	term_taxonomy_id INT( 20 ) NOT NULL ,
	meta_key VARCHAR( 255 ) NOT NULL ,
	meta_value LONGTEXT NOT NULL,
	PRIMARY KEY  (meta_id),
	KEY term_taxonomy_id (term_taxonomy_id),
	KEY meta_key (meta_key)
);

What's amazing it they are all similar plugins but the all implemented the new tables using different table names, field names, etc.  Here's an example where it would also make sense (in my mind) to address taxonomy meta so that other plugins could build on it (or better, replace wp_term_taxonomy with wp_posts->post_type=="term_taxonomy" ;-)

On Aug 3, 2010, at 2:08 PM, Steve Bruner [SlipFire] wrote:
> In RoloPress, we added the relationship between Companies and Contacts
> through custom taxonomies, and it worked great.   You can check it out the
> demo here:http://demo.rolopress.com/  Or download it here:
> http://rolopress.com/

I just scanned through rolopress-core looking for add_action() and add_filter() and didn't see any use of any filters you would need to do this on wp_insert_post() or wp_update_post().  I also scanned for "taxonomy" and also didn't see any code that did that. Finally I scanned for "postmeta" and only found it in 3 places, places where you are doing querying.

Can point me to where in the RoloPress code where you actually maintain synchronization?  Or are you requiring the end user to maintain synchronization?

On Aug 3, 2010, at 2:41 PM, Lox wrote:
> I'll point to that plugin that implements a post2post feature (from
> trac) : http://wordpress.org/extend/plugins/posts-to-posts/
> 
> I know it uses a "post meta" approach but you could create such a
> plug-in that creates your needed table and functions to use it... Then
> any plug-in dev that need that approach can just install your plug-in
> and benefit from it.

Thanks.  FYI, I've already created the plugin to mirror taxonomies.  I was instead proposing this because I think it would be valuable for the WordPress community and not just my specific needs.

> Otto, mirroring custom posts to taxonomies can be a bad ass, I mean,
> creating needs to be handled, as well as modification and deletion. So
> the question is: can't wordpress provides helpers for custom post
> mirroring to a taxonomy? Like adding a "mirror_taxonomy_id" parameter
> to custom post_type....

Lox, I have the code for that (actually it uses  "_mirrored_term_id" in wp_postmeta.)  Evidently many others have similar code too.  I wonder, however, if anyone else's code it actually more robust than mine of if they've just not come across the potential issues with it yet?

On Aug 3, 2010, at 4:14 PM, scribu wrote:
> I think I'm going to make my Posts 2 Posts plugin use a glue taxonomy, as
> described by Daniel Cameron and Otto.
> 
> It should prevent the scaling issues described by Mike Schinkel.
> 
> With the approach I'm envisioning, the only thing mirrored will be the post
> id.

Can you show some proof-of-concept SQL so I can see what you are intending?  Show queries for 1.) actors in a given movie, and 2.) movies that the actor acted in, please? 

Thanks in advance.

-Mike

From mikeschinkel at newclarity.net  Tue Aug  3 22:54:54 2010
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Tue, 3 Aug 2010 18:54:54 -0400
Subject: [wp-hackers] pre_get_posts problem
In-Reply-To: <AANLkTik1CttHZHzUtS3iE5r74dHe0J44P8DDdn9ByWTU@mail.gmail.com>
References: <AANLkTik1CttHZHzUtS3iE5r74dHe0J44P8DDdn9ByWTU@mail.gmail.com>
Message-ID: <F7926550-50BE-47BE-AFFE-2E1DC9F3D5DE@newclarity.net>

On Aug 3, 2010, at 6:26 PM, Angelia Baladon wrote:
> I see that Justin Tadlock has updated his post regarding the use of
> pre_get_posts and the code is now:
> 
> add_filter( 'pre_get_posts', 'customtype_get_posts' );
> function customtype_get_posts( $query ) {
>    if ( is_author() && false == $query->query_vars['suppress_filters'] )
>        $query->set( 'post_type', array( 'post', 'howto', 'lesson' ,'attachment' ) );
>    return $query;
> }

Why that works is that the nav_menu_items query suppresses filters.  Unfortunately it will still be global for the author page so if, for example you had a widget that displayed only "lessons" in the sidebar the above would cause your widget to display posts, howtos, lessons and attachments in its widget.

Ah the downside of global scoping...

-Mike


From lox.dev at knc.nc  Tue Aug  3 23:12:28 2010
From: lox.dev at knc.nc (Lox)
Date: Wed, 4 Aug 2010 10:12:28 +1100
Subject: [wp-hackers] Time for a wp_post_relationships table?
In-Reply-To: <76B112EA-2581-4E04-AB99-37A4E85D17A2@newclarity.net>
References: <10320216-AFB8-4063-A2C0-ED3B5DCBFC12@newclarity.net> 
	<AANLkTikWu9dHLpubhj4EgHRogw_CdaGa5majKYTzuaqm@mail.gmail.com> 
	<FA38AE65-7B98-4633-8BB0-7DA6F8CAAF5A@newclarity.net>
	<AANLkTik_9ryy76WfF3U7R=jQzgN5vBOGJSt5afURGFCo@mail.gmail.com> 
	<F34C274D-9D82-4312-9727-F0E29FC6A96A@newclarity.net>
	<AANLkTi=bQy1NHV---zy82paZcpAMcGGVcDbXJ-5PEfcT@mail.gmail.com> 
	<76B112EA-2581-4E04-AB99-37A4E85D17A2@newclarity.net>
Message-ID: <AANLkTi=QkX4irwhJkHr5Rp=TC5h7rqgUoNCy24KKZ-Dd@mail.gmail.com>

2010/8/4 Mike Schinkel <mikeschinkel at newclarity.net>:
> Lox, I have the code for that (actually it uses ?"_mirrored_term_id" in wp_postmeta.) ?Evidently many others have similar code too. ?I wonder, however, if anyone else's code it actually more robust than mine of if they've just not come across the potential issues with it yet?

I am interested in it.

-- 
Lox
lox.dev at knc.nc

From mikeschinkel at newclarity.net  Tue Aug  3 23:22:35 2010
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Tue, 3 Aug 2010 19:22:35 -0400
Subject: [wp-hackers] Time for a wp_post_relationships table?
In-Reply-To: <AANLkTi=QkX4irwhJkHr5Rp=TC5h7rqgUoNCy24KKZ-Dd@mail.gmail.com>
References: <10320216-AFB8-4063-A2C0-ED3B5DCBFC12@newclarity.net>
	<AANLkTikWu9dHLpubhj4EgHRogw_CdaGa5majKYTzuaqm@mail.gmail.com>
	<FA38AE65-7B98-4633-8BB0-7DA6F8CAAF5A@newclarity.net>
	<AANLkTik_9ryy76WfF3U7R=jQzgN5vBOGJSt5afURGFCo@mail.gmail.com>
	<F34C274D-9D82-4312-9727-F0E29FC6A96A@newclarity.net>
	<AANLkTi=bQy1NHV---zy82paZcpAMcGGVcDbXJ-5PEfcT@mail.gmail.com>
	<76B112EA-2581-4E04-AB99-37A4E85D17A2@newclarity.net>
	<AANLkTi=QkX4irwhJkHr5Rp=TC5h7rqgUoNCy24KKZ-Dd@mail.gmail.com>
Message-ID: <839BA6F3-B1BF-43F2-BD1E-BD0B7830DC05@newclarity.net>

On Aug 3, 2010, at 7:12 PM, Lox wrote:
> 2010/8/4 Mike Schinkel <mikeschinkel at newclarity.net>:
>> Lox, I have the code for that (actually it uses  "_mirrored_term_id" in wp_postmeta.)  Evidently many others have similar code too.  I wonder, however, if anyone else's code it actually more robust than mine of if they've just not come across the potential issues with it yet?
> 
> I am interested in it.


Here ya go:  http://gist.github.com/507345

It's still very much alpha and I would love anyone to test it that likes and to give me feedback so I can improve it.

-Mike

P.S. I plan to release it as a plugin so if anyone wants to release their own plugin I'd ask you do me the courtesy of not starting from my code.  Of course if anyone wants to help me get it fully fleshed out I'd be happy to list you/them as a distributor.


From dan at sproutventure.com  Tue Aug  3 23:49:16 2010
From: dan at sproutventure.com (Daniel Cameron)
Date: Tue, 3 Aug 2010 16:49:16 -0700
Subject: [wp-hackers] Best practice: custom registration form
In-Reply-To: <AANLkTinZcoie7hYDWXOO2CBzzGU_JUHbneMe+H3==XmR@mail.gmail.com>
References: <AANLkTinpqj-dUb5BmyiJ1Mnpgbdy_6ocx=myOGVqVOXK@mail.gmail.com> 
	<AANLkTinzPn2Ng_eA1iAMgvSAFJJ+kw+mgkd1Dd+dAYCF@mail.gmail.com> 
	<AANLkTi=NbiGEihSY0a2ve7v92WyPdVhTRtuscjXDZCd_@mail.gmail.com> 
	<AANLkTi=x4vQV8vcG0PhBC+KkOOpKZr=e0WNm5BTHCJ6P@mail.gmail.com> 
	<AANLkTinQojtDJsw__bpjVr0f3bpPvv3HCzHNQU7Kn8wg@mail.gmail.com> 
	<AANLkTimd3AL36hjRP9ao6-gjYdJsEqgsWxqbBNavM82-@mail.gmail.com> 
	<4C58732C.4000302@mrhead.sk>
	<AANLkTinZcoie7hYDWXOO2CBzzGU_JUHbneMe+H3==XmR@mail.gmail.com>
Message-ID: <AANLkTik4TA_82waFYCmqqms3nyrLsLmV_gYAoWMGM9yA@mail.gmail.com>

> This what I end up using: a custom page template with a
> do_action('register_form').
>
> But when the template is called, the headers are already sent, so I
> wonder how you can send headers there (like wp_redirect does), even at
> the very beginning of the template ..
>

I'm building my own template ( basically using the core wp-login template
with a bunch of customizations ). This is how I'm doing a redirect, then I'm
using some additional functions to call the correct template(s).

public function redirectAwayFromLoginPage() {
global $pagenow;
 if( 'wp-login.php' == $pagenow ) {
$action = '?action=' . $_GET['action'];
 wp_redirect( site_url( $this->acount_login_url . $action ) );
}

 if ( $_GET['redirect_to'] == site_url('/wp-login.php') ) {
wp_redirect( site_url( $this->acount_login_url . '?action=register' ) );
 exit();
}

}
                add_action( 'init', array( $this,
'redirectAwayFromLoginPage' ) );


Something that I've seen people forget to do is filter the existing wp-core
functions that build urls to login/reg/password/logout. i.e.

                // Replace WP Login URIs
add_filter( 'logout_url', array( &$this, 'sv_string_replace_link' ) );
 add_filter( 'login_url', array( $this, 'sv_string_replace_link' ) );
add_filter( 'lostpassword_url', array( $this, 'sv_string_replace_link' ) );
 add_filter( 'register', array( $this, 'sv_string_replace_link' ) );

From scribu at gmail.com  Wed Aug  4 00:03:27 2010
From: scribu at gmail.com (scribu)
Date: Wed, 4 Aug 2010 03:03:27 +0300
Subject: [wp-hackers] Time for a wp_post_relationships table?
In-Reply-To: <76B112EA-2581-4E04-AB99-37A4E85D17A2@newclarity.net>
References: <10320216-AFB8-4063-A2C0-ED3B5DCBFC12@newclarity.net>
	<AANLkTikWu9dHLpubhj4EgHRogw_CdaGa5majKYTzuaqm@mail.gmail.com>
	<FA38AE65-7B98-4633-8BB0-7DA6F8CAAF5A@newclarity.net>
	<AANLkTik_9ryy76WfF3U7R=jQzgN5vBOGJSt5afURGFCo@mail.gmail.com>
	<F34C274D-9D82-4312-9727-F0E29FC6A96A@newclarity.net>
	<AANLkTi=bQy1NHV---zy82paZcpAMcGGVcDbXJ-5PEfcT@mail.gmail.com>
	<76B112EA-2581-4E04-AB99-37A4E85D17A2@newclarity.net>
Message-ID: <AANLkTikyvKP5bUym+Eu9VTZyJdBxmzEjcPzKihKJM_XY@mail.gmail.com>

On Wed, Aug 4, 2010 at 1:42 AM, Mike Schinkel
<mikeschinkel at newclarity.net>wrote:

> Can you show some proof-of-concept SQL so I can see what you are intending?
>  Show queries for 1.) actors in a given movie, and 2.) movies that the actor
> acted in, please?
>

I think one of the reasons you're getting hung up on this is that you're
trying to do it all in one giant query, instead of using the available APIs.

Here's how I'm going to do it in my plugin:
__________

// Given a post id, get a list of connected posts, either *to*, or
*from*that post
function get_connected( $post_id, $direction ) {
        if ( 'to' == $direction )
            return get_objects_in_term( self::to_term( $post_id ), 'p2p' );
        else
            return wp_get_object_terms( $post_id, 'p2p', 'fields=names' ) )
);
}

// Get all connected posts to a movie
$connected_ids = get_connected( $movie_id, 'to' );

// Next, get only the actors
$posts = get_posts( array( 'post_type' => 'actor', 'post__in' =>
$connected_ids ) );
__________

It's a little bit out of context ( 'p2p' is the name of the glue taxonomy ),
but I hope you get the idea.


-- 
http://scribu.net

From lox.dev at knc.nc  Wed Aug  4 00:16:13 2010
From: lox.dev at knc.nc (Lox)
Date: Wed, 4 Aug 2010 11:16:13 +1100
Subject: [wp-hackers] Mirroring a custom_post to a custom_taxonomy for
	post2post relation [was: Time for a wp_post_relationships table?]
In-Reply-To: <AANLkTinz0UF3ZAAJ5Fex1a9KATXVZ8tVjY7FXhzDdNNj@mail.gmail.com>
References: <AANLkTikV6tw3oERfmMDa+OcGSJ3FZ4z6bbsN79e4tiw7@mail.gmail.com> 
	<AANLkTikwj8-4kiRODOq5hSbQyL+WfRVWz2J8yc6J+_Yi@mail.gmail.com> 
	<AANLkTinz0UF3ZAAJ5Fex1a9KATXVZ8tVjY7FXhzDdNNj@mail.gmail.com>
Message-ID: <AANLkTimLoqCJ6woRh6T7tQe3RCogWv-5KNUuUZsSvu7h@mail.gmail.com>

2010/8/4 Lox <lox.dev at knc.nc>:
> I have made a proof 1of concept of the 'mirroring' system
> (http://gist.github.com/507200), but I fail at updating the term name
> when the post name changes. How can I know if it a post post_name has
> changed in transition_post_status hook?

Here it is improved. The hook to use id definitely post_updated.

http://gist.github.com/507429

-- 
Lox
lox.dev at knc.nc

From johnbillion+wp at gmail.com  Wed Aug  4 01:05:35 2010
From: johnbillion+wp at gmail.com (John Blackbourn)
Date: Wed, 4 Aug 2010 02:05:35 +0100
Subject: [wp-hackers] Single Action hook for _new_ posts of any type?
In-Reply-To: <6A99FEE3-6D1E-4E68-BA0D-96D924C687C4@oncefuture.com>
References: <C8BC2F81-5910-47D1-9D5C-CCFBA82EF515@oncefuture.com>
	<p2p4cc4de141005061348ide4d56cfm6f10963e01d012@mail.gmail.com>
	<DBEBE87A-8E2E-4C31-B0E8-EB25322C2FE3@oncefuture.com>
	<AANLkTinrU=-5rqg+VxrhiyziMxDOC_=zKgK1gQpNCkTF@mail.gmail.com>
	<6A99FEE3-6D1E-4E68-BA0D-96D924C687C4@oncefuture.com>
Message-ID: <AANLkTindXqLGaHLwiTu4B=me9OXx9u1dF9J2i=SVec02@mail.gmail.com>

On Tue, Aug 3, 2010 at 11:28 PM, Peter Adams <peter at oncefuture.com> wrote:
> right. thanks.
> But how do you tell if it's an auto-save that is firing the hook?
> Seems like this hook shouldn't get called on an auto-save but it does from what i can tell...

There are two helper functions available for just this -
wp_is_post_autosave($post_id) and wp_is_post_revision($post_id).

John

From mpretty at voceconnect.com  Wed Aug  4 01:43:14 2010
From: mpretty at voceconnect.com (Michael Pretty)
Date: Tue, 03 Aug 2010 21:43:14 -0400
Subject: [wp-hackers] Time for a wp_post_relationships table?
In-Reply-To: <AANLkTikyvKP5bUym+Eu9VTZyJdBxmzEjcPzKihKJM_XY@mail.gmail.com>
References: <10320216-AFB8-4063-A2C0-ED3B5DCBFC12@newclarity.net>	<AANLkTikWu9dHLpubhj4EgHRogw_CdaGa5majKYTzuaqm@mail.gmail.com>	<FA38AE65-7B98-4633-8BB0-7DA6F8CAAF5A@newclarity.net>	<AANLkTik_9ryy76WfF3U7R=jQzgN5vBOGJSt5afURGFCo@mail.gmail.com>	<F34C274D-9D82-4312-9727-F0E29FC6A96A@newclarity.net>	<AANLkTi=bQy1NHV---zy82paZcpAMcGGVcDbXJ-5PEfcT@mail.gmail.com>	<76B112EA-2581-4E04-AB99-37A4E85D17A2@newclarity.net>
	<AANLkTikyvKP5bUym+Eu9VTZyJdBxmzEjcPzKihKJM_XY@mail.gmail.com>
Message-ID: <4C58C5B2.1090602@voceconnect.com>

Here is my take on the post relationships table.

The first project I had to create a many to many relationship between 
objects on was for a radio station back in WP 2.8.  The radio station 
had posts and shows as post types.  For the most part, a post would only 
be related one show, but there were times where a post could be linked 
to multiple, so that they needed to show up in that show's loop.  We 
solved this by the way that was suggested, creating a custom taxonomy 
for shows and pairing a term for each show post created.  On our staging 
server, it worked flawlessly.  Then we started letting the client use it 
on the live site.  Once the client started using the site, we started 
running into issues.

-You can have more than one post with the same title, but you can only 
have 1 term of a single title...clients will create multiple of the same 
object, don't ask why.
-If you renamed a post, you may not always successfully be able to 
rename the term if there is a conflict.
-Because of the way term names span multitple taxonomies, you may not 
always  be able to have the name be exactly as the client wants due to 
conflicts.

Because of these stability issues, I believe that a many to many posts 
table is the best solution.  That said, I don't think it should be 
something added to core, at least not yet.  I don't think this is a 
feature most users are knocking on the door to get and I'd rather see it 
get implemented in a few plugins that go through hundreds of different 
use cases before pulling the best solution into core.

From dan at sproutventure.com  Wed Aug  4 08:01:22 2010
From: dan at sproutventure.com (Daniel Cameron)
Date: Wed, 4 Aug 2010 01:01:22 -0700
Subject: [wp-hackers] add_user_meta vs. add_post_meta handling w/
	add_metadata
Message-ID: <AANLkTi=tGZB9UzGND_x_O6+_TZcmcSc-y=KMNMwE9qHz@mail.gmail.com>

I need some help trying to figure out why I can add unique metadata to a
post all day with add_post_meta, having it be serialized automatically but I
can't do the same with add_user_meta.

Example:

add_user_meta($this->memberID, '_transactions', $this->transactionID );
add_post_meta($this->postID, '_transactions', $this->transactionID );

Both function run through the add_metadata function ( AFAIK ) the same.

I'm definitely missing something here.

Thanks in advance.

From KrisY at tbs.uk.com  Wed Aug  4 08:08:22 2010
From: KrisY at tbs.uk.com (Kris Young)
Date: Wed, 4 Aug 2010 09:08:22 +0100
Subject: [wp-hackers]  Let's discuss custom post types and taxonomies.
In-Reply-To: <F34C274D-9D82-4312-9727-F0E29FC6A96A@newclarity.net>
References: <10320216-AFB8-4063-A2C0-ED3B5DCBFC12@newclarity.net><AANLkTikWu9dHLpubhj4EgHRogw_CdaGa5majKYTzuaqm@mail.gmail.com><FA38AE65-7B98-4633-8BB0-7DA6F8CAAF5A@newclarity.net><AANLkTik_9ryy76WfF3U7R=jQzgN5vBOGJSt5afURGFCo@mail.gmail.com>
	<F34C274D-9D82-4312-9727-F0E29FC6A96A@newclarity.net>
Message-ID: <CD47955B7E065D48AB5CF226C2ED75C02E3205@tbs-sbs01.TBS.local>

I've finished working on this as part of a project, and I would like to
give my feedback for others to discuss.

I saw this brand new module as potentially ground-breaking - a feature
that would turn general opinion on WordPress away from 'blogging
platform' to 'full-blown CMS'. It gives you scope to do virtually
anything with this software, from a mini-portfolio to a major corporate
website (I know, I've done both). You aren't limited with the
opportunities within this either, whether your portal concerns real
estate, shopping, music or television. Perhaps with a little SSL
integration and a strong server configuration, you can create your own
Amazon.

However, this defining invention in the WordPress package isn't good
enough. Firstly, it's buried deep in the code where only one of two
types of people can freely access it. If you're not an advanced PHP
developer, then you need to be equally as good at copy-pasting from the
few decent tutorials around on this subject or being adept at searching
for plugins. If you're one of those that needs to learn by doing, these
last two options aren't really worth trying. In addition, the
information the Codex gave... didn't seem to even work.

I imagined this whole process to be a lot like Brad Williams' plugin -
an option tucked away in the Settings panel that creates new top-level
nav items for each post type / taxonomy. Free cataloguing of these
items, but with the additional intuitiveness (that nobody has done yet)
added by widgets that easily display the results on any page or sidebar
you want. Would it be unreasonable to ask for something like this as an
addition to the next gold release of WP?

The problem was explaining how to use this feature to idiots like
myself. This was not easy to use at all, and it should be. What are
everyone elses' opinions?

Kris

From jimmy.roy at gmail.com  Wed Aug  4 08:12:36 2010
From: jimmy.roy at gmail.com (Jimmy Roy)
Date: Wed, 4 Aug 2010 16:12:36 +0800
Subject: [wp-hackers] Let's discuss custom post types and taxonomies.
In-Reply-To: <CD47955B7E065D48AB5CF226C2ED75C02E3205@tbs-sbs01.TBS.local>
References: <10320216-AFB8-4063-A2C0-ED3B5DCBFC12@newclarity.net>
	<AANLkTikWu9dHLpubhj4EgHRogw_CdaGa5majKYTzuaqm@mail.gmail.com>
	<FA38AE65-7B98-4633-8BB0-7DA6F8CAAF5A@newclarity.net>
	<AANLkTik_9ryy76WfF3U7R=jQzgN5vBOGJSt5afURGFCo@mail.gmail.com>
	<F34C274D-9D82-4312-9727-F0E29FC6A96A@newclarity.net>
	<CD47955B7E065D48AB5CF226C2ED75C02E3205@tbs-sbs01.TBS.local>
Message-ID: <AANLkTin8Bz1-xjZ+gt5TmVQc1AOxR7t_VMAyAyDmfAB6@mail.gmail.com>

hi Kris,
good idea to talk about this topic, i'm working on custom post type and
custom taxonomies for a personal project and yes if u don't know anything
about php it can take time to undestand all.
you talk about decent tutorials, do u've some links ?

Jimmy


2010/8/4 Kris Young <KrisY at tbs.uk.com>

> I've finished working on this as part of a project, and I would like to
> give my feedback for others to discuss.
>
> I saw this brand new module as potentially ground-breaking - a feature
> that would turn general opinion on WordPress away from 'blogging
> platform' to 'full-blown CMS'. It gives you scope to do virtually
> anything with this software, from a mini-portfolio to a major corporate
> website (I know, I've done both). You aren't limited with the
> opportunities within this either, whether your portal concerns real
> estate, shopping, music or television. Perhaps with a little SSL
> integration and a strong server configuration, you can create your own
> Amazon.
>
> However, this defining invention in the WordPress package isn't good
> enough. Firstly, it's buried deep in the code where only one of two
> types of people can freely access it. If you're not an advanced PHP
> developer, then you need to be equally as good at copy-pasting from the
> few decent tutorials around on this subject or being adept at searching
> for plugins. If you're one of those that needs to learn by doing, these
> last two options aren't really worth trying. In addition, the
> information the Codex gave... didn't seem to even work.
>
> I imagined this whole process to be a lot like Brad Williams' plugin -
> an option tucked away in the Settings panel that creates new top-level
> nav items for each post type / taxonomy. Free cataloguing of these
> items, but with the additional intuitiveness (that nobody has done yet)
> added by widgets that easily display the results on any page or sidebar
> you want. Would it be unreasonable to ask for something like this as an
> addition to the next gold release of WP?
>
> The problem was explaining how to use this feature to idiots like
> myself. This was not easy to use at all, and it should be. What are
> everyone elses' opinions?
>
> Kris
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From frank at bueltge.de  Wed Aug  4 08:13:54 2010
From: frank at bueltge.de (Frank Bueltge)
Date: Wed, 4 Aug 2010 10:13:54 +0200
Subject: [wp-hackers] Best practice: custom registration form
In-Reply-To: <AANLkTik4TA_82waFYCmqqms3nyrLsLmV_gYAoWMGM9yA@mail.gmail.com>
References: <AANLkTinpqj-dUb5BmyiJ1Mnpgbdy_6ocx=myOGVqVOXK@mail.gmail.com> 
	<AANLkTinzPn2Ng_eA1iAMgvSAFJJ+kw+mgkd1Dd+dAYCF@mail.gmail.com> 
	<AANLkTi=NbiGEihSY0a2ve7v92WyPdVhTRtuscjXDZCd_@mail.gmail.com> 
	<AANLkTi=x4vQV8vcG0PhBC+KkOOpKZr=e0WNm5BTHCJ6P@mail.gmail.com> 
	<AANLkTinQojtDJsw__bpjVr0f3bpPvv3HCzHNQU7Kn8wg@mail.gmail.com> 
	<AANLkTimd3AL36hjRP9ao6-gjYdJsEqgsWxqbBNavM82-@mail.gmail.com> 
	<4C58732C.4000302@mrhead.sk>
	<AANLkTinZcoie7hYDWXOO2CBzzGU_JUHbneMe+H3==XmR@mail.gmail.com> 
	<AANLkTik4TA_82waFYCmqqms3nyrLsLmV_gYAoWMGM9yA@mail.gmail.com>
Message-ID: <AANLkTi=PxQnTWf9uZp4md6GJNq58iyR8f873-CfCR-Xs@mail.gmail.com>

wp_login_form(array(
    'echo' => true,
    'redirect' => site_url($_SERVER['REQUEST_URI']),

    'form_id' => 'loginform',
    'label_username' => __('Username'),

    'label_password' => __('Password'),
    'label_remember' => __('Remember Me'),

    'label_log_in' => __('Log In'),
    'id_username' => 'user_login',

    'id_password' => 'user_pass',
    'id_remember' => 'rememberme',

    'id_submit' => 'wp-submit',
    'remember' => true,
    'value_username' => ,

    'value_remember' => false
));

This function is new with WP3.0 and its exactly for the login  via WP. I
inlcude this in my page-template and ready.
small example:

global $user_login;

if (is_user_logged_in()) {
    echo __( 'Hello, ' FB_BASIS_TEXTDOMAIN ), $user_login, '. <a
href="', wp_logout_url(), '" title="' . __( 'Logout',
FB_BASIS_TEXTDOMAIN ) . '">' . __( 'Logout', FB_BASIS_TEXTDOMAIN ) .
'</a>';

} else {
    wp_login_form();
}


Codey: http://codex.wordpress.org/Template_Tags/wp_login_form

And a tutorial from my, but only in german language:
http://bueltge.de/wordpress-login-formular/976/

Use also the code, this is multilanguage ;)


On Wed, Aug 4, 2010 at 1:49 AM, Daniel Cameron <dan at sproutventure.com>wrote:

> > This what I end up using: a custom page template with a
> > do_action('register_form').
> >
> > But when the template is called, the headers are already sent, so I
> > wonder how you can send headers there (like wp_redirect does), even at
> > the very beginning of the template ..
> >
>
> I'm building my own template ( basically using the core wp-login template
> with a bunch of customizations ). This is how I'm doing a redirect, then
> I'm
> using some additional functions to call the correct template(s).
>
> public function redirectAwayFromLoginPage() {
> global $pagenow;
>  if( 'wp-login.php' == $pagenow ) {
> $action = '?action=' . $_GET['action'];
>  wp_redirect( site_url( $this->acount_login_url . $action ) );
> }
>
>  if ( $_GET['redirect_to'] == site_url('/wp-login.php') ) {
> wp_redirect( site_url( $this->acount_login_url . '?action=register' ) );
>  exit();
> }
>
> }
>                add_action( 'init', array( $this,
> 'redirectAwayFromLoginPage' ) );
>
>
> Something that I've seen people forget to do is filter the existing wp-core
> functions that build urls to login/reg/password/logout. i.e.
>
>                // Replace WP Login URIs
> add_filter( 'logout_url', array( &$this, 'sv_string_replace_link' ) );
>  add_filter( 'login_url', array( $this, 'sv_string_replace_link' ) );
> add_filter( 'lostpassword_url', array( $this, 'sv_string_replace_link' ) );
>  add_filter( 'register', array( $this, 'sv_string_replace_link' ) );
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From KrisY at tbs.uk.com  Wed Aug  4 08:15:46 2010
From: KrisY at tbs.uk.com (Kris Young)
Date: Wed, 4 Aug 2010 09:15:46 +0100
Subject: [wp-hackers] Let's discuss custom post types and taxonomies.
In-Reply-To: <AANLkTin8Bz1-xjZ+gt5TmVQc1AOxR7t_VMAyAyDmfAB6@mail.gmail.com>
References: <10320216-AFB8-4063-A2C0-ED3B5DCBFC12@newclarity.net><AANLkTikWu9dHLpubhj4EgHRogw_CdaGa5majKYTzuaqm@mail.gmail.com><FA38AE65-7B98-4633-8BB0-7DA6F8CAAF5A@newclarity.net><AANLkTik_9ryy76WfF3U7R=jQzgN5vBOGJSt5afURGFCo@mail.gmail.com><F34C274D-9D82-4312-9727-F0E29FC6A96A@newclarity.net><CD47955B7E065D48AB5CF226C2ED75C02E3205@tbs-sbs01.TBS.local>
	<AANLkTin8Bz1-xjZ+gt5TmVQc1AOxR7t_VMAyAyDmfAB6@mail.gmail.com>
Message-ID: <CD47955B7E065D48AB5CF226C2ED75C02E3206@tbs-sbs01.TBS.local>

Hi there Jimmy,

The only one that came close to making sense was this one:

http://net.tutsplus.com/tutorials/wordpress/rock-solid-wordpress-3-0-the
mes-using-custom-post-types/

Kris

-----Original Message-----
From: wp-hackers-bounces at lists.automattic.com
[mailto:wp-hackers-bounces at lists.automattic.com] On Behalf Of Jimmy Roy
Sent: 04 August 2010 09:13
To: wp-hackers at lists.automattic.com
Subject: Re: [wp-hackers] Let's discuss custom post types and
taxonomies.

hi Kris,
good idea to talk about this topic, i'm working on custom post type and
custom taxonomies for a personal project and yes if u don't know
anything
about php it can take time to undestand all.
you talk about decent tutorials, do u've some links ?

Jimmy


From jimmy.roy at gmail.com  Wed Aug  4 08:25:31 2010
From: jimmy.roy at gmail.com (Jimmy Roy)
Date: Wed, 4 Aug 2010 16:25:31 +0800
Subject: [wp-hackers] Let's discuss custom post types and taxonomies.
In-Reply-To: <CD47955B7E065D48AB5CF226C2ED75C02E3206@tbs-sbs01.TBS.local>
References: <10320216-AFB8-4063-A2C0-ED3B5DCBFC12@newclarity.net>
	<AANLkTikWu9dHLpubhj4EgHRogw_CdaGa5majKYTzuaqm@mail.gmail.com>
	<FA38AE65-7B98-4633-8BB0-7DA6F8CAAF5A@newclarity.net>
	<AANLkTik_9ryy76WfF3U7R=jQzgN5vBOGJSt5afURGFCo@mail.gmail.com>
	<F34C274D-9D82-4312-9727-F0E29FC6A96A@newclarity.net>
	<CD47955B7E065D48AB5CF226C2ED75C02E3205@tbs-sbs01.TBS.local>
	<AANLkTin8Bz1-xjZ+gt5TmVQc1AOxR7t_VMAyAyDmfAB6@mail.gmail.com>
	<CD47955B7E065D48AB5CF226C2ED75C02E3206@tbs-sbs01.TBS.local>
Message-ID: <AANLkTi=XxGDT9MmnY2_FamgzYMNti74p0XcUEe0Zxema@mail.gmail.com>

also on net.tuts:
http://net.tutsplus.com/tutorials/wordpress/introducing-wordpress-3-custom-taxonomies/

and:
http://justintadlock.com/archives/2010/04/29/custom-post-types-in-wordpress?utm_source=feedburner&utm_medium=feed&utm_campaign=Feed:+JustinTadlock+(Justin+Tadlock)

http://new2wp.com/pro/wordpress-custom-post-types-and-taxonomies-done-right/

Jimmy


2010/8/4 Kris Young <KrisY at tbs.uk.com>

> Hi there Jimmy,
>
> The only one that came close to making sense was this one:
>
> http://net.tutsplus.com/tutorials/wordpress/rock-solid-wordpress-3-0-the
> mes-using-custom-post-types/
>
> Kris
>
> -----Original Message-----
> From: wp-hackers-bounces at lists.automattic.com
> [mailto:wp-hackers-bounces at lists.automattic.com] On Behalf Of Jimmy Roy
> Sent: 04 August 2010 09:13
> To: wp-hackers at lists.automattic.com
> Subject: Re: [wp-hackers] Let's discuss custom post types and
> taxonomies.
>
> hi Kris,
> good idea to talk about this topic, i'm working on custom post type and
> custom taxonomies for a personal project and yes if u don't know
> anything
> about php it can take time to undestand all.
> you talk about decent tutorials, do u've some links ?
>
> Jimmy
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From shikakaa at gmail.com  Wed Aug  4 13:44:37 2010
From: shikakaa at gmail.com (Andras Stracz)
Date: Wed, 4 Aug 2010 15:44:37 +0200
Subject: [wp-hackers] max performance tuning in wp
Message-ID: <AANLkTino2Jt3x++htELEk3O2CFf5mCw7y03+W5744QaR@mail.gmail.com>

Hi

Sorry for the wall of text. There's tldr at the bottom!

I'm working a WP 2.9 installation that has 600 posts, 200 pages, 1000
attachments, 1200 posts in a custom post type, 150 categories and about 200
- 200 in 2 custom taxonomies. There are about a dozen plugins installed but
they are generally for shortcodes. The server running this installation is
fairly powerful / vastly oversized, we use less than 1% of the CPU on
average and other resources are also plentiful. Most visitors are logged in.
The html code is optimized (minimized, concatenated, gzipped, cached
properly, etc).

The issue we ran into is that WP got slow over the previous few months, and
by now each pageload takes about 500ms. WP Tuner confirmed the total DB time
for the avg 50 queries on each page no more than 15ms and a couple of XDebug
profiles confirmed the problem is with WP core itself. Since a lot of
plugins add functionality for shortcodes and most users are logged in,
traditional caching plugins are just about useless for me. XCache's op code
cache and object cache help only about 20% (stored in memory only so it
basically acts as tmpfs as well).

So far there were 2 major wins:

parse_request for instance runs a 10000+ foreach loop based on the
get_option('rewrite_rules') field, which was 1.5MB. The sad part is that
most of the items in this array were for features we don't use, like feeds,
comment feeds, standalone attachment pages, trackback urls, paged comments -
most of which is explicitly turned off in WP so it's a nice bug that the
rewrite rules still exist for them. This was easy to fix using an earlier
thread here on WP hackers.

Using the persistent cache of XCache, I've also added fragment caching,
based on the transient API's guide on the wiki, by surrounding expensive
blocks with the code below. It is fairly successful, most pages now load
under 110ms and with proper wp_cache_flush() calls, there are no downsides
I'm aware of.

if (false === ($code = wp_cache_get('top-menu','menus') ) ) {
ob_start();
//html code and whatever generates it
$code = ob_get_contents();
ob_end_clean();
wp_cache_set('top-menu', $code, 'menus', 7200);
}
echo $code;

The problem is the first 40ms of this avg 110ms is already spent before
loading functions.php and 65ms before it gets to any output in get_header();
I'm looking for tips and tricks that I can try to get rid of as much of this
as possible.

TLDR; how can I continue improving performance? I have a hard time figuring
it what are the key slownesses before the theme folder's function.php is
included.

Thanks!

Andras Stracz

PS: if anyone's interested, I have before and after dumps from xdebug,
viewable with cachegrind-like software. 655kb zip: http://bit.ly/c615E7

From otto at ottodestruct.com  Wed Aug  4 13:45:50 2010
From: otto at ottodestruct.com (Otto)
Date: Wed, 4 Aug 2010 08:45:50 -0500
Subject: [wp-hackers] Time for a wp_post_relationships table?
In-Reply-To: <4C58C5B2.1090602@voceconnect.com>
References: <10320216-AFB8-4063-A2C0-ED3B5DCBFC12@newclarity.net> 
	<AANLkTikWu9dHLpubhj4EgHRogw_CdaGa5majKYTzuaqm@mail.gmail.com> 
	<FA38AE65-7B98-4633-8BB0-7DA6F8CAAF5A@newclarity.net>
	<AANLkTik_9ryy76WfF3U7R=jQzgN5vBOGJSt5afURGFCo@mail.gmail.com> 
	<F34C274D-9D82-4312-9727-F0E29FC6A96A@newclarity.net>
	<AANLkTi=bQy1NHV---zy82paZcpAMcGGVcDbXJ-5PEfcT@mail.gmail.com> 
	<76B112EA-2581-4E04-AB99-37A4E85D17A2@newclarity.net>
	<AANLkTikyvKP5bUym+Eu9VTZyJdBxmzEjcPzKihKJM_XY@mail.gmail.com> 
	<4C58C5B2.1090602@voceconnect.com>
Message-ID: <AANLkTimDcCvk99pe5nbEUhrQ8U48hRBdJaKbsREmTWwW@mail.gmail.com>

On Tue, Aug 3, 2010 at 8:43 PM, Michael Pretty <mpretty at voceconnect.com> wrote:
> -You can have more than one post with the same title, but you can only have
> 1 term of a single title...clients will create multiple of the same object,
> don't ask why.

You shouldn't be using the title as your term, specifically because
it's not unique.

Basically, this is an already solved problem. The post_name is unique,
and if you're "mirroring", then that should be your new "slug" in the
terms table. The term_name can be anything, and you can make it the
title if you like, but the slug is what has to be unique.

> -If you renamed a post, you may not always successfully be able to rename
> the term if there is a conflict.
> -Because of the way term names span multitple taxonomies, you may not always
> ?be able to have the name be exactly as the client wants due to conflicts.

No, multiple terms can have the same names. The unique key is on the
slug. You can always change the name of the term to anything you
please.

-Otto

From otto at ottodestruct.com  Wed Aug  4 13:49:26 2010
From: otto at ottodestruct.com (Otto)
Date: Wed, 4 Aug 2010 08:49:26 -0500
Subject: [wp-hackers] Time for a wp_post_relationships table?
In-Reply-To: <AANLkTimDcCvk99pe5nbEUhrQ8U48hRBdJaKbsREmTWwW@mail.gmail.com>
References: <10320216-AFB8-4063-A2C0-ED3B5DCBFC12@newclarity.net> 
	<AANLkTikWu9dHLpubhj4EgHRogw_CdaGa5majKYTzuaqm@mail.gmail.com> 
	<FA38AE65-7B98-4633-8BB0-7DA6F8CAAF5A@newclarity.net>
	<AANLkTik_9ryy76WfF3U7R=jQzgN5vBOGJSt5afURGFCo@mail.gmail.com> 
	<F34C274D-9D82-4312-9727-F0E29FC6A96A@newclarity.net>
	<AANLkTi=bQy1NHV---zy82paZcpAMcGGVcDbXJ-5PEfcT@mail.gmail.com> 
	<76B112EA-2581-4E04-AB99-37A4E85D17A2@newclarity.net>
	<AANLkTikyvKP5bUym+Eu9VTZyJdBxmzEjcPzKihKJM_XY@mail.gmail.com> 
	<4C58C5B2.1090602@voceconnect.com>
	<AANLkTimDcCvk99pe5nbEUhrQ8U48hRBdJaKbsREmTWwW@mail.gmail.com>
Message-ID: <AANLkTinzd2mLXOka-f4USBNNyX+w6VjXCrBBxyu-zaq3@mail.gmail.com>

BTW, to manually set the slug on a term to something, use
wp_insert_term and 'slug'=>'whatever' in the args array. If you let it
get auto-created from just the name, then you can't guarantee what the
slug is.

-Otto



On Wed, Aug 4, 2010 at 8:45 AM, Otto <otto at ottodestruct.com> wrote:
> On Tue, Aug 3, 2010 at 8:43 PM, Michael Pretty <mpretty at voceconnect.com> wrote:
>> -You can have more than one post with the same title, but you can only have
>> 1 term of a single title...clients will create multiple of the same object,
>> don't ask why.
>
> You shouldn't be using the title as your term, specifically because
> it's not unique.
>
> Basically, this is an already solved problem. The post_name is unique,
> and if you're "mirroring", then that should be your new "slug" in the
> terms table. The term_name can be anything, and you can make it the
> title if you like, but the slug is what has to be unique.
>
>> -If you renamed a post, you may not always successfully be able to rename
>> the term if there is a conflict.
>> -Because of the way term names span multitple taxonomies, you may not always
>> ?be able to have the name be exactly as the client wants due to conflicts.
>
> No, multiple terms can have the same names. The unique key is on the
> slug. You can always change the name of the term to anything you
> please.
>
> -Otto
>

From scribu at gmail.com  Wed Aug  4 13:50:28 2010
From: scribu at gmail.com (scribu)
Date: Wed, 4 Aug 2010 16:50:28 +0300
Subject: [wp-hackers] Time for a wp_post_relationships table?
In-Reply-To: <AANLkTimDcCvk99pe5nbEUhrQ8U48hRBdJaKbsREmTWwW@mail.gmail.com>
References: <10320216-AFB8-4063-A2C0-ED3B5DCBFC12@newclarity.net>
	<AANLkTikWu9dHLpubhj4EgHRogw_CdaGa5majKYTzuaqm@mail.gmail.com>
	<FA38AE65-7B98-4633-8BB0-7DA6F8CAAF5A@newclarity.net>
	<AANLkTik_9ryy76WfF3U7R=jQzgN5vBOGJSt5afURGFCo@mail.gmail.com>
	<F34C274D-9D82-4312-9727-F0E29FC6A96A@newclarity.net>
	<AANLkTi=bQy1NHV---zy82paZcpAMcGGVcDbXJ-5PEfcT@mail.gmail.com>
	<76B112EA-2581-4E04-AB99-37A4E85D17A2@newclarity.net>
	<AANLkTikyvKP5bUym+Eu9VTZyJdBxmzEjcPzKihKJM_XY@mail.gmail.com>
	<4C58C5B2.1090602@voceconnect.com>
	<AANLkTimDcCvk99pe5nbEUhrQ8U48hRBdJaKbsREmTWwW@mail.gmail.com>
Message-ID: <AANLkTilslraZatNDMaYYJ99l0HXal1W2oiDmF_c5PUfA@mail.gmail.com>

Alright, I've finished modifying my plugin to use a taxonomy to store the
connections.

Instead of using post_name or post_title as the term name, I just use the
post id. It makes things a lot simpler:

http://plugins.trac.wordpress.org/browser/posts-to-posts/trunk/core.php?rev=271640


-- 
http://scribu.net

From otto at ottodestruct.com  Wed Aug  4 14:20:31 2010
From: otto at ottodestruct.com (Otto)
Date: Wed, 4 Aug 2010 09:20:31 -0500
Subject: [wp-hackers] max performance tuning in wp
In-Reply-To: <AANLkTino2Jt3x++htELEk3O2CFf5mCw7y03+W5744QaR@mail.gmail.com>
References: <AANLkTino2Jt3x++htELEk3O2CFf5mCw7y03+W5744QaR@mail.gmail.com>
Message-ID: <AANLkTimThVoSZFJLuqryHjg3dz9gnDrJ_XGESLO3n5qt@mail.gmail.com>

On Wed, Aug 4, 2010 at 8:44 AM, Andras Stracz <shikakaa at gmail.com> wrote:
> parse_request for instance runs a 10000+ foreach loop based on the
> get_option('rewrite_rules') field, which was 1.5MB.

You're probably using a bad permalink string.

See this: http://ottopress.com/2010/category-in-permalinks-considered-harmful/

-Otto

From shikakaa at gmail.com  Wed Aug  4 14:26:41 2010
From: shikakaa at gmail.com (Andras Stracz)
Date: Wed, 4 Aug 2010 16:26:41 +0200
Subject: [wp-hackers] max performance tuning in wp
In-Reply-To: <AANLkTimThVoSZFJLuqryHjg3dz9gnDrJ_XGESLO3n5qt@mail.gmail.com>
References: <AANLkTino2Jt3x++htELEk3O2CFf5mCw7y03+W5744QaR@mail.gmail.com> 
	<AANLkTimThVoSZFJLuqryHjg3dz9gnDrJ_XGESLO3n5qt@mail.gmail.com>
Message-ID: <AANLkTikV4-tk1LOUD-WBsYkTA30u_0GMxOCrv=C3AF7s@mail.gmail.com>

Indeed, that was the cause for some of them. The permalink structure is
/%category%/%postname%/ but that is not something we want to change. Now the
array is 600 long, so it's not a performance issue anymore. I just used
add_filter('post_rewrite_rules', 'filter_rewrite_crap'); where unneeded
array items are unset. parse_request's total cost went from 100ms to 2ms.

Andras Stracz

On Wed, Aug 4, 2010 at 16:20, Otto <otto at ottodestruct.com> wrote:

> On Wed, Aug 4, 2010 at 8:44 AM, Andras Stracz <shikakaa at gmail.com> wrote:
> > parse_request for instance runs a 10000+ foreach loop based on the
> > get_option('rewrite_rules') field, which was 1.5MB.
>
> You're probably using a bad permalink string.
>
> See this:
> http://ottopress.com/2010/category-in-permalinks-considered-harmful/
>
> -Otto
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From devin at tayloegray.com  Wed Aug  4 15:29:52 2010
From: devin at tayloegray.com (Devin Dixon)
Date: Wed, 4 Aug 2010 11:29:52 -0400
Subject: [wp-hackers] Custom Post Type Main Page
Message-ID: <AANLkTikqiWrwGcOh1u5yVd7a4uB47-RxbMW47BRLkk9D@mail.gmail.com>

Hey,

I am creating a custom post type for videos. The post type looks
something like this:

register_post_type('videos', array(
		'label' => __('Videos'),
		'singular_label' => __('Video'),
		'public' => true,
		'show_ui' => true, // UI in admin panel
		'_builtin' => false, // It's a custom post type, not built in!
		'_edit_link' => 'post.php?post=%d',
		'capability_type' => 'post',
		'hierarchical' => false,
		'rewrite' => array("slug" => "video-library", 'with_front' =>
false), // Permalinks format
		'supports' => array('title','author', 'editor' , 'thumbnail' ,
'excerpt' , 'page-attributes' )
	));


So the permalink looks like: http://mydomain.com/video-library/video1
. My question is how do I get http://mydomain.com/video-library/ as a
main page to list all the videos that have been posted?

From dan at sproutventure.com  Wed Aug  4 15:55:21 2010
From: dan at sproutventure.com (Daniel Cameron)
Date: Wed, 4 Aug 2010 08:55:21 -0700
Subject: [wp-hackers] Custom Post Type Main Page
In-Reply-To: <AANLkTikqiWrwGcOh1u5yVd7a4uB47-RxbMW47BRLkk9D@mail.gmail.com>
References: <AANLkTikqiWrwGcOh1u5yVd7a4uB47-RxbMW47BRLkk9D@mail.gmail.com>
Message-ID: <AANLkTi=5rqKvKdOO2DWRhKUvE1tE4tc=3pr1RYPwqfzT@mail.gmail.com>

I'm using something very similar to this...

function template_include( $template )
{
    if ( get_query_var('post_type') == 'videos )
    {
        if ( is_single() ) {
$template = locate_template( ...
        }
 else { // loop
$template = locate_template( ...
        }
     return $template;
    }
}
add_filter( 'template_include', array($this, 'template_include') );

On Wed, Aug 4, 2010 at 8:29 AM, Devin Dixon <devin at tayloegray.com> wrote:

> Hey,
>
> I am creating a custom post type for videos. The post type looks
> something like this:
>
> register_post_type('videos', array(
>                'label' => __('Videos'),
>                'singular_label' => __('Video'),
>                'public' => true,
>                'show_ui' => true, // UI in admin panel
>                '_builtin' => false, // It's a custom post type, not built
> in!
>                '_edit_link' => 'post.php?post=%d',
>                'capability_type' => 'post',
>                'hierarchical' => false,
>                'rewrite' => array("slug" => "video-library", 'with_front'
> =>
> false), // Permalinks format
>                'supports' => array('title','author', 'editor' , 'thumbnail'
> ,
> 'excerpt' , 'page-attributes' )
>        ));
>
>
> So the permalink looks like: http://mydomain.com/video-library/video1
> . My question is how do I get http://mydomain.com/video-library/ as a
> main page to list all the videos that have been posted?
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>



-- 
Dan Cameron
Solution Engineer @sproutventure
http://sproutventure.com
Phone: (805) 288-2232
GTalk: dan at sproutventure.com

From scribu at gmail.com  Wed Aug  4 16:05:27 2010
From: scribu at gmail.com (scribu)
Date: Wed, 4 Aug 2010 19:05:27 +0300
Subject: [wp-hackers] Custom Post Type Main Page
In-Reply-To: <AANLkTikqiWrwGcOh1u5yVd7a4uB47-RxbMW47BRLkk9D@mail.gmail.com>
References: <AANLkTikqiWrwGcOh1u5yVd7a4uB47-RxbMW47BRLkk9D@mail.gmail.com>
Message-ID: <AANLkTik_3yMVznH4jgfvnZZuYeWlLAYRMqtIrA5rsen4@mail.gmail.com>

On Wed, Aug 4, 2010 at 6:29 PM, Devin Dixon <devin at tayloegray.com> wrote:

> So the permalink looks like: http://mydomain.com/video-library/video1
> . My question is how do I get http://mydomain.com/video-library/ as a
> main page to list all the videos that have been posted?
>

This is something that needs to be implemented:

http://core.trac.wordpress.org/ticket/13818


-- 
http://scribu.net

From dangayle at gmail.com  Wed Aug  4 16:06:48 2010
From: dangayle at gmail.com (Dan Gayle)
Date: Wed, 4 Aug 2010 09:06:48 -0700
Subject: [wp-hackers] Passing class methods by reference
Message-ID: <AANLkTikMArVOoivjt=O6e6Q_Ep_x23zD0wVW_ZiKJkNq@mail.gmail.com>

I see some plugins that have a callback to a class method by reference like so:

array( &$this, 'function_name' ));

The codex says "if the function is a member of a class within the
plugin it should be referenced as array( $this, 'function_name' )"

I assume that passing a reference is an attempt to save memory, but in
PHP 5 aren't objects automatically passed by reference? What is the
benefit, if any, of this style of callback?

From scribu at gmail.com  Wed Aug  4 16:10:12 2010
From: scribu at gmail.com (scribu)
Date: Wed, 4 Aug 2010 19:10:12 +0300
Subject: [wp-hackers] Passing class methods by reference
In-Reply-To: <AANLkTikMArVOoivjt=O6e6Q_Ep_x23zD0wVW_ZiKJkNq@mail.gmail.com>
References: <AANLkTikMArVOoivjt=O6e6Q_Ep_x23zD0wVW_ZiKJkNq@mail.gmail.com>
Message-ID: <AANLkTimBm9NpivTt8Gni6CxZS7jb56Q9nAE6bbzPanf2@mail.gmail.com>

On Wed, Aug 4, 2010 at 7:06 PM, Dan Gayle <dangayle at gmail.com> wrote:

> I assume that passing a reference is an attempt to save memory, but in
> PHP 5 aren't objects automatically passed by reference? What is the
> benefit, if any, of this style of callback?
>

There is no benefit. It's just for PHP4 compatibility.


-- 
http://scribu.net

From KrisY at tbs.uk.com  Wed Aug  4 16:23:34 2010
From: KrisY at tbs.uk.com (Kris Young)
Date: Wed, 4 Aug 2010 17:23:34 +0100
Subject: [wp-hackers] Let's discuss custom post types and taxonomies.
In-Reply-To: <AANLkTi=XxGDT9MmnY2_FamgzYMNti74p0XcUEe0Zxema@mail.gmail.com>
References: <10320216-AFB8-4063-A2C0-ED3B5DCBFC12@newclarity.net><AANLkTikWu9dHLpubhj4EgHRogw_CdaGa5majKYTzuaqm@mail.gmail.com><FA38AE65-7B98-4633-8BB0-7DA6F8CAAF5A@newclarity.net><AANLkTik_9ryy76WfF3U7R=jQzgN5vBOGJSt5afURGFCo@mail.gmail.com><F34C274D-9D82-4312-9727-F0E29FC6A96A@newclarity.net><CD47955B7E065D48AB5CF226C2ED75C02E3205@tbs-sbs01.TBS.local><AANLkTin8Bz1-xjZ+gt5TmVQc1AOxR7t_VMAyAyDmfAB6@mail.gmail.com><CD47955B7E065D48AB5CF226C2ED75C02E3206@tbs-sbs01.TBS.local>
	<AANLkTi=XxGDT9MmnY2_FamgzYMNti74p0XcUEe0Zxema@mail.gmail.com>
Message-ID: <CD47955B7E065D48AB5CF226C2ED75C02E3220@tbs-sbs01.TBS.local>

Definitely, some good stuff there Jimmy.

There's also a good tutorial on it on kovshenin.com.

Anyone else with opinions?

-----Original Message-----
From: wp-hackers-bounces at lists.automattic.com
[mailto:wp-hackers-bounces at lists.automattic.com] On Behalf Of Jimmy Roy
Sent: 04 August 2010 09:26
To: wp-hackers at lists.automattic.com
Subject: Re: [wp-hackers] Let's discuss custom post types and
taxonomies.

also on net.tuts:
http://net.tutsplus.com/tutorials/wordpress/introducing-wordpress-3-cust
om-taxonomies/

and:
http://justintadlock.com/archives/2010/04/29/custom-post-types-in-wordpr
ess?utm_source=feedburner&utm_medium=feed&utm_campaign=Feed:+JustinTadlo
ck+(Justin+Tadlock)

http://new2wp.com/pro/wordpress-custom-post-types-and-taxonomies-done-ri
ght/

Jimmy


From scribu at gmail.com  Wed Aug  4 16:27:27 2010
From: scribu at gmail.com (scribu)
Date: Wed, 4 Aug 2010 19:27:27 +0300
Subject: [wp-hackers] Let's discuss custom post types and taxonomies.
In-Reply-To: <CD47955B7E065D48AB5CF226C2ED75C02E3205@tbs-sbs01.TBS.local>
References: <10320216-AFB8-4063-A2C0-ED3B5DCBFC12@newclarity.net>
	<AANLkTikWu9dHLpubhj4EgHRogw_CdaGa5majKYTzuaqm@mail.gmail.com>
	<FA38AE65-7B98-4633-8BB0-7DA6F8CAAF5A@newclarity.net>
	<AANLkTik_9ryy76WfF3U7R=jQzgN5vBOGJSt5afURGFCo@mail.gmail.com>
	<F34C274D-9D82-4312-9727-F0E29FC6A96A@newclarity.net>
	<CD47955B7E065D48AB5CF226C2ED75C02E3205@tbs-sbs01.TBS.local>
Message-ID: <AANLkTil2Q4-cVfd-QnBIyYbteqTXxrcfAPUmUOxQmp4v@mail.gmail.com>

On Wed, Aug 4, 2010 at 11:08 AM, Kris Young <KrisY at tbs.uk.com> wrote:

> However, this defining invention in the WordPress package isn't good
> enough. Firstly, it's buried deep in the code where only one of two
> types of people can freely access it. If you're not an advanced PHP
> developer, then you need to be equally as good at copy-pasting from the
> few decent tutorials around on this subject or being adept at searching
> for plugins. If you're one of those that needs to learn by doing, these
> last two options aren't really worth trying. In addition, the
> information the Codex gave... didn't seem to even work.
>

Instead of complaining that it's not good enough, why don't you help out by
submitting patches, correcting the information in the Codex etc. ?

If you want something to happen faster in an open source project, like
WordPress, your best bet is to get your own hands dirty.

-- 
http://scribu.net

From KrisY at tbs.uk.com  Wed Aug  4 16:36:38 2010
From: KrisY at tbs.uk.com (Kris Young)
Date: Wed, 4 Aug 2010 17:36:38 +0100
Subject: [wp-hackers] Let's discuss custom post types and taxonomies.
In-Reply-To: <AANLkTil2Q4-cVfd-QnBIyYbteqTXxrcfAPUmUOxQmp4v@mail.gmail.com>
References: <10320216-AFB8-4063-A2C0-ED3B5DCBFC12@newclarity.net><AANLkTikWu9dHLpubhj4EgHRogw_CdaGa5majKYTzuaqm@mail.gmail.com><FA38AE65-7B98-4633-8BB0-7DA6F8CAAF5A@newclarity.net><AANLkTik_9ryy76WfF3U7R=jQzgN5vBOGJSt5afURGFCo@mail.gmail.com><F34C274D-9D82-4312-9727-F0E29FC6A96A@newclarity.net><CD47955B7E065D48AB5CF226C2ED75C02E3205@tbs-sbs01.TBS.local>
	<AANLkTil2Q4-cVfd-QnBIyYbteqTXxrcfAPUmUOxQmp4v@mail.gmail.com>
Message-ID: <CD47955B7E065D48AB5CF226C2ED75C02E3221@tbs-sbs01.TBS.local>

Sorry if it seemed as if I was complaining - that wasn't the intention.
I was looking for opinions 

Correcting the information in the Codex would be easy if I actually knew
what it was supposed to say. This is a vicious circle - I don't know how
it works so I can't find the right explanation for how it works.

If that makes sense of course...

-----Original Message-----
From: wp-hackers-bounces at lists.automattic.com
[mailto:wp-hackers-bounces at lists.automattic.com] On Behalf Of scribu
Sent: 04 August 2010 17:27
To: wp-hackers at lists.automattic.com
Subject: Re: [wp-hackers] Let's discuss custom post types and
taxonomies.

On Wed, Aug 4, 2010 at 11:08 AM, Kris Young <KrisY at tbs.uk.com> wrote:

> However, this defining invention in the WordPress package isn't good
> enough. Firstly, it's buried deep in the code where only one of two
> types of people can freely access it. If you're not an advanced PHP
> developer, then you need to be equally as good at copy-pasting from
the
> few decent tutorials around on this subject or being adept at
searching
> for plugins. If you're one of those that needs to learn by doing,
these
> last two options aren't really worth trying. In addition, the
> information the Codex gave... didn't seem to even work.
>

Instead of complaining that it's not good enough, why don't you help out
by
submitting patches, correcting the information in the Codex etc. ?

If you want something to happen faster in an open source project, like
WordPress, your best bet is to get your own hands dirty.

-- 
http://scribu.net
_______________________________________________
wp-hackers mailing list
wp-hackers at lists.automattic.com
http://lists.automattic.com/mailman/listinfo/wp-hackers

From shacker at birdhouse.org  Wed Aug  4 16:51:55 2010
From: shacker at birdhouse.org (Scot Hacker)
Date: Wed, 4 Aug 2010 09:51:55 -0700
Subject: [wp-hackers] Getting list of plugins from shell script
In-Reply-To: <mailman.13678.1280864509.1338.wp-hackers@lists.automattic.com>
References: <mailman.13678.1280864509.1338.wp-hackers@lists.automattic.com>
Message-ID: <07749462-6E42-4E4B-A3EF-448283854DC7@birdhouse.org>

> Date: Tue, 3 Aug 2010 11:05:03 -0700
> From: Scot Hacker <shacker at birdhouse.org>
> Subject: Re: [wp-hackers] Getting list of plugins from shell script
> 
> Nice! I know I said in my OP that I was looking for a shell, not a PHP  
> solution. Thanks Harish Narayan and Mike for the shell solutions they  
> sent off-list -- really creative (if somewhat hairy). But the fact  
> that this data is serialized in a single field, and being able to use  
> PHP's unserialize() function to get at it, makes for a much cleaner  
> solution. So I'm doing that - popping out to a copy of the script above.
> 

For anyone who might find it useful, I've made some changes to wp-create.sh and wp-mass-upgrade.sh, added a new wp-find-plugins.sh, and bundled them all together in a new kit: WordPress Mass Management Tools:

http://birdhouse.org/software/2010/08/wordpress-mass-management/

Thanks and best,
Scot




From scribu at gmail.com  Wed Aug  4 16:53:58 2010
From: scribu at gmail.com (scribu)
Date: Wed, 4 Aug 2010 19:53:58 +0300
Subject: [wp-hackers] Let's discuss custom post types and taxonomies.
In-Reply-To: <CD47955B7E065D48AB5CF226C2ED75C02E3221@tbs-sbs01.TBS.local>
References: <10320216-AFB8-4063-A2C0-ED3B5DCBFC12@newclarity.net>
	<AANLkTikWu9dHLpubhj4EgHRogw_CdaGa5majKYTzuaqm@mail.gmail.com>
	<FA38AE65-7B98-4633-8BB0-7DA6F8CAAF5A@newclarity.net>
	<AANLkTik_9ryy76WfF3U7R=jQzgN5vBOGJSt5afURGFCo@mail.gmail.com>
	<F34C274D-9D82-4312-9727-F0E29FC6A96A@newclarity.net>
	<CD47955B7E065D48AB5CF226C2ED75C02E3205@tbs-sbs01.TBS.local>
	<AANLkTil2Q4-cVfd-QnBIyYbteqTXxrcfAPUmUOxQmp4v@mail.gmail.com>
	<CD47955B7E065D48AB5CF226C2ED75C02E3221@tbs-sbs01.TBS.local>
Message-ID: <AANLkTinLEhGreDSj2bvn7sOuVWb-7_G5Z0WG7l2ysBr3@mail.gmail.com>

On Wed, Aug 4, 2010 at 7:36 PM, Kris Young <KrisY at tbs.uk.com> wrote:
>
> Correcting the information in the Codex would be easy if I actually knew
> what it was supposed to say. This is a vicious circle - I don't know how
> it works so I can't find the right explanation for how it works.
>

Well, there already are several good tutorials out there. Two off the top of
my head:

http://justintadlock.com/archives/2010/06/10/a-refresher-on-custom-taxonomies

http://justintadlock.com/archives/2010/04/29/custom-post-types-in-wordpress

You should be able to extract enough valuable information from there to make
corrections and improvements to the Codex.


-- 
http://scribu.net

From johnbillion+wp at gmail.com  Wed Aug  4 17:15:00 2010
From: johnbillion+wp at gmail.com (John Blackbourn)
Date: Wed, 4 Aug 2010 18:15:00 +0100
Subject: [wp-hackers] Let's discuss custom post types and taxonomies.
In-Reply-To: <AANLkTil2Q4-cVfd-QnBIyYbteqTXxrcfAPUmUOxQmp4v@mail.gmail.com>
References: <10320216-AFB8-4063-A2C0-ED3B5DCBFC12@newclarity.net>
	<AANLkTikWu9dHLpubhj4EgHRogw_CdaGa5majKYTzuaqm@mail.gmail.com>
	<FA38AE65-7B98-4633-8BB0-7DA6F8CAAF5A@newclarity.net>
	<AANLkTik_9ryy76WfF3U7R=jQzgN5vBOGJSt5afURGFCo@mail.gmail.com>
	<F34C274D-9D82-4312-9727-F0E29FC6A96A@newclarity.net>
	<CD47955B7E065D48AB5CF226C2ED75C02E3205@tbs-sbs01.TBS.local>
	<AANLkTil2Q4-cVfd-QnBIyYbteqTXxrcfAPUmUOxQmp4v@mail.gmail.com>
Message-ID: <AANLkTi=Y-CJ2+vV5-1zmcyGvQsqKWuvZKn4yYp+L69ti@mail.gmail.com>

On Wed, Aug 4, 2010 at 5:27 PM, scribu <scribu at gmail.com> wrote:
> Instead of complaining that it's not good enough, why don't you help out by
> submitting patches, correcting the information in the Codex etc. ?

Kris isn't complaining, he's garnering discussion (hence the thread
title). There's really no need for a response like this.


Kris, your observations are correct. There are a couple of issues at hand:

1. Custom post types are relatively new (especially their powerful
additions in 3.0) and therefore things like documentation in the Codex
haven't yet been updated. As Scribu pointed out, there are some great
tutorials on the subject (Justin Tadlock's being particularly good
examples) so it really needs the best and most relevant information
from these tutorials, and those with knowledge about custom post
types, to add this information to the Codex.

2. Custom post types are really simple to implement (using
register_post_type()) but of course there's much more to it than that.
You need a reasonable working knowledge of WordPress in order to
actually do something with your post types, and what you do with them
(and therefore what else you need to know about WordPress) is
dependent entirely on what your custom post type is and what it's
going to do. As you pointed out "It gives you scope to do virtually
anything with this software" so there's not really one single place to
start when explaining how to create a powerful custom post type
implementation. The more complex your custom post type is the more
you'll probably need to know about WordPress in order to achieve it.
It's never going to be *really* easy (although we'd all love to make
it as easy as possible).

So really, it all comes back to documentation. The bane of open source
software development. There is some effort to improve documentation in
the current improvements being made to the wordpress.org website, but
I'm not sure of the scope. I think we're also hoping to do a bit of a
documentation drive at some point (it was brought up on the wp-docs
mailing list anyway) but again I'm not sure of the scope.

John

From KrisY at tbs.uk.com  Wed Aug  4 18:17:44 2010
From: KrisY at tbs.uk.com (Kris Young)
Date: Wed, 4 Aug 2010 19:17:44 +0100
Subject: [wp-hackers] Let's discuss custom post types and taxonomies.
References: <10320216-AFB8-4063-A2C0-ED3B5DCBFC12@newclarity.net><AANLkTikWu9dHLpubhj4EgHRogw_CdaGa5majKYTzuaqm@mail.gmail.com><FA38AE65-7B98-4633-8BB0-7DA6F8CAAF5A@newclarity.net><AANLkTik_9ryy76WfF3U7R=jQzgN5vBOGJSt5afURGFCo@mail.gmail.com><F34C274D-9D82-4312-9727-F0E29FC6A96A@newclarity.net><CD47955B7E065D48AB5CF226C2ED75C02E3205@tbs-sbs01.TBS.local><AANLkTil2Q4-cVfd-QnBIyYbteqTXxrcfAPUmUOxQmp4v@mail.gmail.com>
	<AANLkTi=Y-CJ2+vV5-1zmcyGvQsqKWuvZKn4yYp+L69ti@mail.gmail.com>
Message-ID: <CD47955B7E065D48AB5CF226C2ED75C02BA2A0@tbs-sbs01.TBS.local>

Hi there John,

1) Indeed. I'd rather all posters were able to approach this level-headedly rather than jumping to conclusions as to my intentions with this post (without the opportunity to read the tonality or emotion behind it). I'd rather be discussing than arguing, otherwise I'd probably find myself posting under a different email address than one which holds me accountable to anything I say. I'd be grateful if you could bear these two things in mind scribu, and offer something constructive or skip the thread altogether.

2) It's a question of confidence I think. I don't know much about this feature despite implementing it successfully on two projects, as I copy-pasted from tutorials (to avoid complications in the face of a strict deadline). I don't think I'm comfortable right now with sharing my limited (and fragmented) knowledge on this subject with other people. It's like Chinese Whispers - it will only get worse, and I'll confuse more people than just myself.

3) It just seems a shame. It's a potentially brilliant feature (nobody can really dispute that) but it's locked away in the code. The main problems I had with this were at various unrelated points, namely in the difference between taxonomies and categories within custom post types (so terminology I guess) and the displaying of all my shiny new data. The final opinion on this is until I decide to look at it again in the future, and it's a firm opinion that this feature could be better. I actually do think that documentation would help someone in a similar position to myself - I will actually try and write something and run it by some people before I post it.

Thanks again John,

Kris

-----Original Message-----
From: wp-hackers-bounces at lists.automattic.com on behalf of John Blackbourn
Sent: Wed 04/08/2010 18:15
To: wp-hackers at lists.automattic.com
Subject: Re: [wp-hackers] Let's discuss custom post types and taxonomies.
 
On Wed, Aug 4, 2010 at 5:27 PM, scribu <scribu at gmail.com> wrote:
> Instead of complaining that it's not good enough, why don't you help out by
> submitting patches, correcting the information in the Codex etc. ?

Kris isn't complaining, he's garnering discussion (hence the thread
title). There's really no need for a response like this.


Kris, your observations are correct. There are a couple of issues at hand:

1. Custom post types are relatively new (especially their powerful
additions in 3.0) and therefore things like documentation in the Codex
haven't yet been updated. As Scribu pointed out, there are some great
tutorials on the subject (Justin Tadlock's being particularly good
examples) so it really needs the best and most relevant information
from these tutorials, and those with knowledge about custom post
types, to add this information to the Codex.

2. Custom post types are really simple to implement (using
register_post_type()) but of course there's much more to it than that.
You need a reasonable working knowledge of WordPress in order to
actually do something with your post types, and what you do with them
(and therefore what else you need to know about WordPress) is
dependent entirely on what your custom post type is and what it's
going to do. As you pointed out "It gives you scope to do virtually
anything with this software" so there's not really one single place to
start when explaining how to create a powerful custom post type
implementation. The more complex your custom post type is the more
you'll probably need to know about WordPress in order to achieve it.
It's never going to be *really* easy (although we'd all love to make
it as easy as possible).

So really, it all comes back to documentation. The bane of open source
software development. There is some effort to improve documentation in
the current improvements being made to the wordpress.org website, but
I'm not sure of the scope. I think we're also hoping to do a bit of a
documentation drive at some point (it was brought up on the wp-docs
mailing list anyway) but again I'm not sure of the scope.

John
_______________________________________________
wp-hackers mailing list
wp-hackers at lists.automattic.com
http://lists.automattic.com/mailman/listinfo/wp-hackers


From lists.automattic.com at callum-macdonald.com  Wed Aug  4 18:22:29 2010
From: lists.automattic.com at callum-macdonald.com (Callum Macdonald)
Date: Wed, 04 Aug 2010 12:22:29 -0600
Subject: [wp-hackers] Let's create a WordPress hosting cooperative
Message-ID: <1280946149.2332.1365.camel@lupo>

Holamigos,

This list is filled with brilliant people hosting WordPress sites.
Keeping sites up to date, secure, backed up, and so on. Let's come
together and share some of that work to make all our lives easier, much
like co-created free software makes our lives easier.

Here's the 30 second version:

Let's form a group of co-cooperators who communally host WordPress
sites. We charge for customer sites and we split any extra expense
between the member sites. We start small, a couple of servers maybe. As
time goes one, we might expand our operations to provide a distributed,
load balanced, highly available hosting cluster, who knows.

To start with, instead of updating 10 or 20 sites every time WordPress
or a plugin is updated, update 50 or 100 every so often with a set of
automated shell tools.

If you're interested, I invite you to join the discussion here:
http://www.callum-macdonald.com/?p=2189

Love and light - Callum.



From otto at ottodestruct.com  Wed Aug  4 19:04:52 2010
From: otto at ottodestruct.com (Otto)
Date: Wed, 4 Aug 2010 14:04:52 -0500
Subject: [wp-hackers] Let's discuss custom post types and taxonomies.
In-Reply-To: <CD47955B7E065D48AB5CF226C2ED75C02BA2A0@tbs-sbs01.TBS.local>
References: <10320216-AFB8-4063-A2C0-ED3B5DCBFC12@newclarity.net> 
	<AANLkTikWu9dHLpubhj4EgHRogw_CdaGa5majKYTzuaqm@mail.gmail.com> 
	<FA38AE65-7B98-4633-8BB0-7DA6F8CAAF5A@newclarity.net>
	<AANLkTik_9ryy76WfF3U7R=jQzgN5vBOGJSt5afURGFCo@mail.gmail.com> 
	<F34C274D-9D82-4312-9727-F0E29FC6A96A@newclarity.net>
	<CD47955B7E065D48AB5CF226C2ED75C02E3205@tbs-sbs01.TBS.local> 
	<AANLkTil2Q4-cVfd-QnBIyYbteqTXxrcfAPUmUOxQmp4v@mail.gmail.com> 
	<AANLkTi=Y-CJ2+vV5-1zmcyGvQsqKWuvZKn4yYp+L69ti@mail.gmail.com> 
	<CD47955B7E065D48AB5CF226C2ED75C02BA2A0@tbs-sbs01.TBS.local>
Message-ID: <AANLkTik1vxJsDqx91K0o7AxBWHHD2AdAW0xw_6YNunyt@mail.gmail.com>

On Wed, Aug 4, 2010 at 1:17 PM, Kris Young <KrisY at tbs.uk.com> wrote:
> 3) It just seems a shame. It's a potentially brilliant feature (nobody can really dispute that) but it's locked away in the code. The main problems I had with this were at various unrelated points, namely in the difference between taxonomies and categories within custom post types (so terminology I guess) and the displaying of all my shiny new data. The final opinion on this is until I decide to look at it again in the future, and it's a firm opinion that this feature could be better. I actually do think that documentation would help someone in a similar position to myself - I will actually try and write something and run it by some people before I post it.

I see this a lot. For a lot of open source programmers, the code *is*
the documentation. When I go to answer a question about a subject I
know nothing about (the best way to learn, IMO), I frequently go
straight to the code. I rarely read tutorials, and I almost never use
the codex. The tutorials I write tend to be my own notes from reading
the code and figuring out something, cleaned up and prettified.

My advice for how to become a ninja level programmer is two-fold:
1. Learn to read code like other people read english.
2. Every once in a while, tackle a support problem you know nothing
about, and do it without referring to documentation of any sort.

Works for me.

-Otto

From mikeschinkel at newclarity.net  Wed Aug  4 19:08:34 2010
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Wed, 4 Aug 2010 15:08:34 -0400
Subject: [wp-hackers] Time for a wp_post_relationships table?
In-Reply-To: <AANLkTikyvKP5bUym+Eu9VTZyJdBxmzEjcPzKihKJM_XY@mail.gmail.com>
References: <10320216-AFB8-4063-A2C0-ED3B5DCBFC12@newclarity.net>
	<AANLkTikWu9dHLpubhj4EgHRogw_CdaGa5majKYTzuaqm@mail.gmail.com>
	<FA38AE65-7B98-4633-8BB0-7DA6F8CAAF5A@newclarity.net>
	<AANLkTik_9ryy76WfF3U7R=jQzgN5vBOGJSt5afURGFCo@mail.gmail.com>
	<F34C274D-9D82-4312-9727-F0E29FC6A96A@newclarity.net>
	<AANLkTi=bQy1NHV---zy82paZcpAMcGGVcDbXJ-5PEfcT@mail.gmail.com>
	<76B112EA-2581-4E04-AB99-37A4E85D17A2@newclarity.net>
	<AANLkTikyvKP5bUym+Eu9VTZyJdBxmzEjcPzKihKJM_XY@mail.gmail.com>
Message-ID: <FDAA8C3C-7B4C-4545-AFB3-7A03DA9F04D4@newclarity.net>

On Aug 3, 2010, at 8:03 PM, scribu wrote:
> I think one of the reasons you're getting hung up on this is that you're
> trying to do it all in one giant query, instead of using the available APIs.

That's not at all the case, but I can see how you might think that.  My preference is to use the WordPress APIs whenever even remotely practical. I provided the SQL as proof-of-concept and to show exactly what I was proposing as opposed to discussing things in abstract and then have people (including me) misunderstand each other.

> Here's how I'm going to do it in my plugin:
> __________
> 
> // Given a post id, get a list of connected posts, either *to*, or
> *from*that post
> function get_connected( $post_id, $direction ) {
>        if ( 'to' == $direction )
>            return get_objects_in_term( self::to_term( $post_id ), 'p2p' );
>        else
>            return wp_get_object_terms( $post_id, 'p2p', 'fields=names' ) )
> );
> }
> 
> // Get all connected posts to a movie
> $connected_ids = get_connected( $movie_id, 'to' );
> 
> // Next, get only the actors
> $posts = get_posts( array( 'post_type' => 'actor', 'post__in' =>
> $connected_ids ) );
> __________
> 
> It's a little bit out of context ( 'p2p' is the name of the glue taxonomy ),
> but I hope you get the idea.

When I see that type of code like above, it saddens me.  That potentially runs two queries (assuming no cache hit) when it could run easily one. WordPress is starting to add more MySQL queries per page load and query drain performance; better not to propagate them it possible. And if the number of "connected records" is large, it could generate a huge query being sent to MySQL not the least of which if it has to loop through all the records once to build the array of connected ids and a second time loop through all the post records yet again, this time to collect up the posts. Things like that add up.

A more performant way to do that would be to use a posts_join and posts_where hook to add a "related_to" and/or "related_from" arguments that appends the correct join and where clauses reducing to a single query what should be a single query.  Better yet would be to add wp_post_relationships to WordPress core and add those parameters into query() itself.

-Mike




From mikeschinkel at newclarity.net  Wed Aug  4 19:19:16 2010
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Wed, 4 Aug 2010 15:19:16 -0400
Subject: [wp-hackers] Getting list of plugins from shell script
In-Reply-To: <07749462-6E42-4E4B-A3EF-448283854DC7@birdhouse.org>
References: <mailman.13678.1280864509.1338.wp-hackers@lists.automattic.com>
	<07749462-6E42-4E4B-A3EF-448283854DC7@birdhouse.org>
Message-ID: <82CDCBAA-BDA7-4AF8-918F-453FF1120C2F@newclarity.net>

Very cool!

On Aug 4, 2010, at 12:51 PM, Scot Hacker wrote:

>> Date: Tue, 3 Aug 2010 11:05:03 -0700
>> From: Scot Hacker <shacker at birdhouse.org>
>> Subject: Re: [wp-hackers] Getting list of plugins from shell script
>> 
>> Nice! I know I said in my OP that I was looking for a shell, not a PHP  
>> solution. Thanks Harish Narayan and Mike for the shell solutions they  
>> sent off-list -- really creative (if somewhat hairy). But the fact  
>> that this data is serialized in a single field, and being able to use  
>> PHP's unserialize() function to get at it, makes for a much cleaner  
>> solution. So I'm doing that - popping out to a copy of the script above.
>> 
> 
> For anyone who might find it useful, I've made some changes to wp-create.sh and wp-mass-upgrade.sh, added a new wp-find-plugins.sh, and bundled them all together in a new kit: WordPress Mass Management Tools:
> 
> http://birdhouse.org/software/2010/08/wordpress-mass-management/
> 
> Thanks and best,
> Scot
> 
> 
> 
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers


From aaron at jorb.in  Wed Aug  4 19:30:59 2010
From: aaron at jorb.in (Aaron Jorbin)
Date: Wed, 4 Aug 2010 15:30:59 -0400
Subject: [wp-hackers] Let's discuss custom post types and taxonomies.
In-Reply-To: <AANLkTik1vxJsDqx91K0o7AxBWHHD2AdAW0xw_6YNunyt@mail.gmail.com>
References: <10320216-AFB8-4063-A2C0-ED3B5DCBFC12@newclarity.net> 
	<AANLkTikWu9dHLpubhj4EgHRogw_CdaGa5majKYTzuaqm@mail.gmail.com> 
	<FA38AE65-7B98-4633-8BB0-7DA6F8CAAF5A@newclarity.net>
	<AANLkTik_9ryy76WfF3U7R=jQzgN5vBOGJSt5afURGFCo@mail.gmail.com> 
	<F34C274D-9D82-4312-9727-F0E29FC6A96A@newclarity.net>
	<CD47955B7E065D48AB5CF226C2ED75C02E3205@tbs-sbs01.TBS.local> 
	<AANLkTil2Q4-cVfd-QnBIyYbteqTXxrcfAPUmUOxQmp4v@mail.gmail.com> 
	<AANLkTi=Y-CJ2+vV5-1zmcyGvQsqKWuvZKn4yYp+L69ti@mail.gmail.com> 
	<CD47955B7E065D48AB5CF226C2ED75C02BA2A0@tbs-sbs01.TBS.local> 
	<AANLkTik1vxJsDqx91K0o7AxBWHHD2AdAW0xw_6YNunyt@mail.gmail.com>
Message-ID: <AANLkTin3EEHLau1aWAeS4qfjvfGmdtM+E1-jqL+9ps8h@mail.gmail.com>

On Wed, Aug 4, 2010 at 3:04 PM, Otto <otto at ottodestruct.com> wrote:
>
> I see this a lot. For a lot of open source programmers, the code *is*
> the documentation. When I go to answer a question about a subject I
> know nothing about (the best way to learn, IMO), I frequently go
> straight to the code. I rarely read tutorials, and I almost never use
> the codex. The tutorials I write tend to be my own notes from reading
> the code and figuring out something, cleaned up and prettified.
>
> My advice for how to become a ninja level programmer is two-fold:
> 1. Learn to read code like other people read english.
> 2. Every once in a while, tackle a support problem you know nothing
> about, and do it without referring to documentation of any sort.
>
> Works for me.
>
> -Otto


I agree with Otto on this one.   The only better way to understand the code
then reading it, is writing it.  And even that's not always the case.

I truth, after you have read the code and grocked it, please update the
codex, and if appropriate submit a patch to update the inline documentation.

-Aaron

http://aaron.jorb.in
twitter: twitter.com/aaronjorbin

From otto at ottodestruct.com  Wed Aug  4 19:32:16 2010
From: otto at ottodestruct.com (Otto)
Date: Wed, 4 Aug 2010 14:32:16 -0500
Subject: [wp-hackers] Time for a wp_post_relationships table?
In-Reply-To: <FDAA8C3C-7B4C-4545-AFB3-7A03DA9F04D4@newclarity.net>
References: <10320216-AFB8-4063-A2C0-ED3B5DCBFC12@newclarity.net> 
	<AANLkTikWu9dHLpubhj4EgHRogw_CdaGa5majKYTzuaqm@mail.gmail.com> 
	<FA38AE65-7B98-4633-8BB0-7DA6F8CAAF5A@newclarity.net>
	<AANLkTik_9ryy76WfF3U7R=jQzgN5vBOGJSt5afURGFCo@mail.gmail.com> 
	<F34C274D-9D82-4312-9727-F0E29FC6A96A@newclarity.net>
	<AANLkTi=bQy1NHV---zy82paZcpAMcGGVcDbXJ-5PEfcT@mail.gmail.com> 
	<76B112EA-2581-4E04-AB99-37A4E85D17A2@newclarity.net>
	<AANLkTikyvKP5bUym+Eu9VTZyJdBxmzEjcPzKihKJM_XY@mail.gmail.com> 
	<FDAA8C3C-7B4C-4545-AFB3-7A03DA9F04D4@newclarity.net>
Message-ID: <AANLkTi=bmwmu949nKf5zGpaf38gnRzJNBz88d=SB7_Mw@mail.gmail.com>

On Wed, Aug 4, 2010 at 2:08 PM, Mike Schinkel
<mikeschinkel at newclarity.net> wrote:
> When I see that type of code like above, it saddens me. ?That potentially runs two queries (assuming no cache hit) when it could run easily one. WordPress is starting to add more MySQL queries per page load and query drain performance; better not to propagate them it possible. And if the number of "connected records" is large, it could generate a huge query being sent to MySQL not the least of which if it has to loop through all the records once to build the array of connected ids and a second time loop through all the post records yet again, this time to collect up the posts. Things like that add up.
>
> A more performant way to do that would be to use a posts_join and posts_where hook to add a "related_to" and/or "related_from" arguments that appends the correct join and where clauses reducing to a single query what should be a single query. ?Better yet would be to add wp_post_relationships to WordPress core and add those parameters into query() itself.

Ugh. No, man. Complex queries are the death of WP sites. Consider that
in most of the webhosting in this world, database servers are shared
amongst many websites. So you want to rely on the database as little
as possible.

Two simpler queries are often preferable to one query which adds load
to the database server. Why? Because the DB server is generally your
major bottleneck. Loading any sort of work onto it with JOINs and the
like causes you nothing but trouble in the long run.

Note, I'm not commenting on the specific code, just making a general
observation. If I can do two or three queries with no joins, it's
usually a heck of a lot faster than one complicated query with two or
three joins. Less queries is not always better.

-Otto

From jane at automattic.com  Wed Aug  4 19:47:52 2010
From: jane at automattic.com (Jane Wells)
Date: Wed, 04 Aug 2010 15:47:52 -0400
Subject: [wp-hackers] Time for a wp_post_relationships table?
In-Reply-To: <AANLkTi=bmwmu949nKf5zGpaf38gnRzJNBz88d=SB7_Mw@mail.gmail.com>
References: <10320216-AFB8-4063-A2C0-ED3B5DCBFC12@newclarity.net>
	<AANLkTikWu9dHLpubhj4EgHRogw_CdaGa5majKYTzuaqm@mail.gmail.com>
	<FA38AE65-7B98-4633-8BB0-7DA6F8CAAF5A@newclarity.net>	<AANLkTik_9ryy76WfF3U7R=jQzgN5vBOGJSt5afURGFCo@mail.gmail.com>
	<F34C274D-9D82-4312-9727-F0E29FC6A96A@newclarity.net>	<AANLkTi=bQy1NHV---zy82paZcpAMcGGVcDbXJ-5PEfcT@mail.gmail.com>
	<76B112EA-2581-4E04-AB99-37A4E85D17A2@newclarity.net>	<AANLkTikyvKP5bUym+Eu9VTZyJdBxmzEjcPzKihKJM_XY@mail.gmail.com>
	<FDAA8C3C-7B4C-4545-AFB3-7A03DA9F04D4@newclarity.net>
	<AANLkTi=bmwmu949nKf5zGpaf38gnRzJNBz88d=SB7_Mw@mail.gmail.com>
Message-ID: <4C59C3E8.7000206@automattic.com>

>
> On Wed, Aug 4, 2010 at 2:08 PM, Mike Schinkel wrote: When I see that type of code like above, it saddens me.
>    
> On 8/4/10 3:32 PM, Otto wrote: Ugh. No, man.
>    
I cannot wait to see you two duke it out at WordCamp Savannah in two 
weeks. :)
Jane


From mikeschinkel at newclarity.net  Wed Aug  4 19:57:23 2010
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Wed, 4 Aug 2010 15:57:23 -0400
Subject: [wp-hackers] Time for a wp_post_relationships table?
In-Reply-To: <AANLkTi=bmwmu949nKf5zGpaf38gnRzJNBz88d=SB7_Mw@mail.gmail.com>
References: <10320216-AFB8-4063-A2C0-ED3B5DCBFC12@newclarity.net>
	<AANLkTikWu9dHLpubhj4EgHRogw_CdaGa5majKYTzuaqm@mail.gmail.com>
	<FA38AE65-7B98-4633-8BB0-7DA6F8CAAF5A@newclarity.net>
	<AANLkTik_9ryy76WfF3U7R=jQzgN5vBOGJSt5afURGFCo@mail.gmail.com>
	<F34C274D-9D82-4312-9727-F0E29FC6A96A@newclarity.net>
	<AANLkTi=bQy1NHV---zy82paZcpAMcGGVcDbXJ-5PEfcT@mail.gmail.com>
	<76B112EA-2581-4E04-AB99-37A4E85D17A2@newclarity.net>
	<AANLkTikyvKP5bUym+Eu9VTZyJdBxmzEjcPzKihKJM_XY@mail.gmail.com>
	<FDAA8C3C-7B4C-4545-AFB3-7A03DA9F04D4@newclarity.net>
	<AANLkTi=bmwmu949nKf5zGpaf38gnRzJNBz88d=SB7_Mw@mail.gmail.com>
Message-ID: <576CD0EA-2BC4-4590-A933-FFCF7E2A1AD4@newclarity.net>

On Aug 4, 2010, at 3:32 PM, Otto wrote:
> On Wed, Aug 4, 2010 at 2:08 PM, Mike Schinkel <mikeschinkel at newclarity.net> wrote:
>> A more performant way to do that would be to use a posts_join and posts_where hook to add a "related_to" and/or "related_from" arguments that appends the correct join and where clauses reducing to a single query what should be a single query.  Better yet would be to add wp_post_relationships to WordPress core and add those parameters into query() itself.
> 
> Ugh. No, man. Complex queries are the death of WP sites. Consider that
> in most of the webhosting in this world, database servers are shared
> amongst many websites. So you want to rely on the database as little
> as possible.
> 
> Two simpler queries are often preferable to one query which adds load
> to the database server. Why? Because the DB server is generally your
> major bottleneck. Loading any sort of work onto it with JOINs and the
> like causes you nothing but trouble in the long run.
> 
> Note, I'm not commenting on the specific code, just making a general
> observation. If I can do two or three queries with no joins, it's
> usually a heck of a lot faster than one complicated query with two or
> three joins. Less queries is not always better.


On the surface that goes against everything I've learned about databases and SQL in both developing and professional instruction over 20+ years but I'm not going to summarily dismiss it out of hand.  Can you provide any benchmarks or commentary from people at MySQL to show this to be true other and not just opinion?  Any other evidence?

That said, if it is true then you'd really want to avoid using the taxonomy system to link posts (because it requires 3 to 4 table joins) and instead prefer the proposed wp_post_relationships table I proposed (because it would require only 1 to 2 table joins), right?

-Mike


From otto at ottodestruct.com  Wed Aug  4 20:59:56 2010
From: otto at ottodestruct.com (Otto)
Date: Wed, 4 Aug 2010 15:59:56 -0500
Subject: [wp-hackers] Time for a wp_post_relationships table?
In-Reply-To: <576CD0EA-2BC4-4590-A933-FFCF7E2A1AD4@newclarity.net>
References: <10320216-AFB8-4063-A2C0-ED3B5DCBFC12@newclarity.net> 
	<AANLkTikWu9dHLpubhj4EgHRogw_CdaGa5majKYTzuaqm@mail.gmail.com> 
	<FA38AE65-7B98-4633-8BB0-7DA6F8CAAF5A@newclarity.net>
	<AANLkTik_9ryy76WfF3U7R=jQzgN5vBOGJSt5afURGFCo@mail.gmail.com> 
	<F34C274D-9D82-4312-9727-F0E29FC6A96A@newclarity.net>
	<AANLkTi=bQy1NHV---zy82paZcpAMcGGVcDbXJ-5PEfcT@mail.gmail.com> 
	<76B112EA-2581-4E04-AB99-37A4E85D17A2@newclarity.net>
	<AANLkTikyvKP5bUym+Eu9VTZyJdBxmzEjcPzKihKJM_XY@mail.gmail.com> 
	<FDAA8C3C-7B4C-4545-AFB3-7A03DA9F04D4@newclarity.net>
	<AANLkTi=bmwmu949nKf5zGpaf38gnRzJNBz88d=SB7_Mw@mail.gmail.com> 
	<576CD0EA-2BC4-4590-A933-FFCF7E2A1AD4@newclarity.net>
Message-ID: <AANLkTim4hNxaugzxUggb4MnTe5+vvFF9h5N319=QO-TJ@mail.gmail.com>

On Wed, Aug 4, 2010 at 2:57 PM, Mike Schinkel
<mikeschinkel at newclarity.net> wrote:
> On the surface that goes against everything I've learned about databases and SQL in both developing and professional instruction over 20+ years but I'm not going to summarily dismiss it out of hand.

You're right, it does fly in the face of conventional thinking.
Context is what matters here.

In a conventional networked database application, you're looking at a
multi-user environment with a lot of people doing things
simultaneously. DB servers can scale pretty well in that respect, but
generally they are limited in some manner on the other end. Only a few
types of applications probably access the database, the queries are
all relatively similar, etc, etc. DBs are designed to support that
specific type of load very well (query caching and other tricks are
commonplace), and thus they can handle lots of extra processing on the
back end. In DB design of this sort, you're generally encouraged to
use complex queries, because your bottleneck isn't the processing
power of the DB server, the bottleneck is often the data transfer
itself, as you're sending data down the wire to all the applications
accessing it. So getting exactly what you want is a good thing.

When it comes to web applications though, the game changes a bit. Now
you're looking at a whole other magnitude of simultaneous users. And
those users (web applications) are all sorts of different things,
executing a larger variety of queries and getting all sorts of
different types of data. Plus, in a lot of hosting environments, one
DB server may be supporting hundreds or thousands of websites. It's a
heavy load to carry. On the other hand, these websites are usually
connected directly to the DB with a fat network connection, so the
data transfer rate isn't an issue. All the DB data transfer is local
to the webservers, which then serve it off to the web browsers.

The point being here that your processing power on the websites is a
whole lot greater than your processing power on the DB server serving
all those sites. So forcing the DB server to do your work for you is a
losing game. Why have a dozen webservers sitting idle, waiting in line
for the DB to do all this extra work? Better to get the data and
offload it over that fat pipe to the webservers, where they can the
majority of your processing.

This sort of a scenario is also the starting point for the whole NoSQL
movement, where traditional relational database design is being
ditched for a different storage system entirely. Usually ones based on
storing key/value pairs. BigTable, Cassandra, even memcached take this
approach.

Web apps are fundamentally different enough from traditional database
applications that you have to factor that in as well when designing
them.

> Can you provide any benchmarks or commentary from people at MySQL to show this to be true other and not just opinion? ?Any other evidence?

Not off the top of my head, but look into the whole NoSQL thing and
you'll find a lot of commentary along these lines.

> That said, if it is true then you'd really want to avoid using the taxonomy system to link posts (because it requires 3 to 4 table joins) and instead prefer the proposed wp_post_relationships table I proposed (because it would require only 1 to 2 table joins), right?

It depends on the specifics of what you're trying to do. In the
examples we've discussed, I don't think it's absolutely necessary to
have a way to connect post to other posts directly. All of these I've
looked at look more like you'd be selecting terms from posts and then
getting posts based on that. One, maybe two joins only, since you
start out by selecting a term, not by selecting a post and finding a
new post from it..

-Otto

From lox.dev at knc.nc  Wed Aug  4 22:07:43 2010
From: lox.dev at knc.nc (Lox)
Date: Thu, 5 Aug 2010 09:07:43 +1100
Subject: [wp-hackers] Best practice: custom registration form
In-Reply-To: <AANLkTi=PxQnTWf9uZp4md6GJNq58iyR8f873-CfCR-Xs@mail.gmail.com>
References: <AANLkTinpqj-dUb5BmyiJ1Mnpgbdy_6ocx=myOGVqVOXK@mail.gmail.com> 
	<AANLkTinzPn2Ng_eA1iAMgvSAFJJ+kw+mgkd1Dd+dAYCF@mail.gmail.com> 
	<AANLkTi=NbiGEihSY0a2ve7v92WyPdVhTRtuscjXDZCd_@mail.gmail.com> 
	<AANLkTi=x4vQV8vcG0PhBC+KkOOpKZr=e0WNm5BTHCJ6P@mail.gmail.com> 
	<AANLkTinQojtDJsw__bpjVr0f3bpPvv3HCzHNQU7Kn8wg@mail.gmail.com> 
	<AANLkTimd3AL36hjRP9ao6-gjYdJsEqgsWxqbBNavM82-@mail.gmail.com> 
	<4C58732C.4000302@mrhead.sk>
	<AANLkTinZcoie7hYDWXOO2CBzzGU_JUHbneMe+H3==XmR@mail.gmail.com> 
	<AANLkTik4TA_82waFYCmqqms3nyrLsLmV_gYAoWMGM9yA@mail.gmail.com> 
	<AANLkTi=PxQnTWf9uZp4md6GJNq58iyR8f873-CfCR-Xs@mail.gmail.com>
Message-ID: <AANLkTikZ6odC5gVANwuBdZnd3CJ0GJmGm4A-7=BvTwTr@mail.gmail.com>

2010/8/4 Frank Bueltge <frank at bueltge.de>:
> wp_login_form();

Nice find thanks. But the generated form get submitted to wp-login.php ...

-- 
Lox
lox.dev at knc.nc

From otto at ottodestruct.com  Wed Aug  4 22:31:39 2010
From: otto at ottodestruct.com (Otto)
Date: Wed, 4 Aug 2010 17:31:39 -0500
Subject: [wp-hackers] Best practice: custom registration form
In-Reply-To: <AANLkTikZ6odC5gVANwuBdZnd3CJ0GJmGm4A-7=BvTwTr@mail.gmail.com>
References: <AANLkTinpqj-dUb5BmyiJ1Mnpgbdy_6ocx=myOGVqVOXK@mail.gmail.com> 
	<AANLkTinzPn2Ng_eA1iAMgvSAFJJ+kw+mgkd1Dd+dAYCF@mail.gmail.com> 
	<AANLkTi=NbiGEihSY0a2ve7v92WyPdVhTRtuscjXDZCd_@mail.gmail.com> 
	<AANLkTi=x4vQV8vcG0PhBC+KkOOpKZr=e0WNm5BTHCJ6P@mail.gmail.com> 
	<AANLkTinQojtDJsw__bpjVr0f3bpPvv3HCzHNQU7Kn8wg@mail.gmail.com> 
	<AANLkTimd3AL36hjRP9ao6-gjYdJsEqgsWxqbBNavM82-@mail.gmail.com> 
	<4C58732C.4000302@mrhead.sk>
	<AANLkTinZcoie7hYDWXOO2CBzzGU_JUHbneMe+H3==XmR@mail.gmail.com> 
	<AANLkTik4TA_82waFYCmqqms3nyrLsLmV_gYAoWMGM9yA@mail.gmail.com> 
	<AANLkTi=PxQnTWf9uZp4md6GJNq58iyR8f873-CfCR-Xs@mail.gmail.com> 
	<AANLkTikZ6odC5gVANwuBdZnd3CJ0GJmGm4A-7=BvTwTr@mail.gmail.com>
Message-ID: <AANLkTiks+eySGkCjggY6D3t-dvV3dnqot0hkrys-0zFs@mail.gmail.com>

On Wed, Aug 4, 2010 at 5:07 PM, Lox <lox.dev at knc.nc> wrote:
> 2010/8/4 Frank Bueltge <frank at bueltge.de>:
>> wp_login_form();
>
> Nice find thanks. But the generated form get submitted to wp-login.php ...

Well, it kinda has to. All the logic for creating users and logged
them in and such always passes through wp-login.php.

Still, you can put the redirect option on there and wp-login will
redirect them to anywhere you like after it does its thing.

-Otto

From mailapera at gmail.com  Wed Aug  4 22:51:28 2010
From: mailapera at gmail.com (mailapera)
Date: Thu, 5 Aug 2010 00:51:28 +0200
Subject: [wp-hackers] Let's create a WordPress hosting cooperative
In-Reply-To: <1280946149.2332.1365.camel@lupo>
References: <1280946149.2332.1365.camel@lupo>
Message-ID: <AANLkTi=9FEnVth1Kf9ihjYfXrba-z9ccv4-BTS5e_RKG@mail.gmail.com>

It's an amazing idea! Wish I had any hosting space at all to provide.
Currently my overly expensive hosting sucks and my memory outages have just
gone wild. Some real WP knowledge people would really help.



On Wed, Aug 4, 2010 at 8:22 PM, Callum Macdonald <lists.automattic.com@
callum-macdonald.com> wrote:

> Holamigos,
>
> This list is filled with brilliant people hosting WordPress sites.
> Keeping sites up to date, secure, backed up, and so on. Let's come
> together and share some of that work to make all our lives easier, much
> like co-created free software makes our lives easier.
>
> Here's the 30 second version:
>
> Let's form a group of co-cooperators who communally host WordPress
> sites. We charge for customer sites and we split any extra expense
> between the member sites. We start small, a couple of servers maybe. As
> time goes one, we might expand our operations to provide a distributed,
> load balanced, highly available hosting cluster, who knows.
>
> To start with, instead of updating 10 or 20 sites every time WordPress
> or a plugin is updated, update 50 or 100 every so often with a set of
> automated shell tools.
>
> If you're interested, I invite you to join the discussion here:
> http://www.callum-macdonald.com/?p=2189
>
> Love and light - Callum.
>
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From john at ikailo.com  Thu Aug  5 03:20:09 2010
From: john at ikailo.com (John Sessford)
Date: Wed, 4 Aug 2010 23:20:09 -0400
Subject: [wp-hackers] Prevent Writing to .htaccess
Message-ID: <AANLkTik6X84nJpKwxVxZXUx0GeBTw8jL9xaOWRqR5tk2@mail.gmail.com>

Hi,

I've encountered a road-block with .htaccess / Rewrite Rules. Hoping someone
here can assist.

Two issues:

1. .htaccess is flushed whenever '/wp-admin/options-permalink.php' is
loaded. It strikes me as strange that this would execute prior to action
from the user.

2. I require a method to prevent .htaccess from being flushed even when
"Save Changes" is clicked. I don't see a viable hook anywhere that can
control whether or not to write .htaccess. In my case the Rewrite Rules
should still be written to the database though. Making .htaccess read-only
is one method, but one can't always rely on users to do this.

Thoughts?

Thanks in advance,
John Sessford

From eric at eamann.com  Thu Aug  5 03:45:20 2010
From: eric at eamann.com (Eric Mann)
Date: Wed, 4 Aug 2010 20:45:20 -0700
Subject: [wp-hackers] Prevent Writing to .htaccess
In-Reply-To: <AANLkTik6X84nJpKwxVxZXUx0GeBTw8jL9xaOWRqR5tk2@mail.gmail.com>
References: <AANLkTik6X84nJpKwxVxZXUx0GeBTw8jL9xaOWRqR5tk2@mail.gmail.com>
Message-ID: <006701cb3450$a1fb9a80$e5f2cf80$@com>

One possibility (a very hacky possibility) would be to spoof the return
value of got_mod_rewrite().  This function is used as a Boolean flag before
the .htaccess file is written.  If it's True (if Apache has mod_rewrite
enabled) then the .htaccess file is written.  If it's False, then it's not.

The beauty is that there's a filter applied in the function.  So this filter
would basically disable .htaccess from being overwritten.

function disable_flush($got_rewrite) {
	return false;
}
add_filter('got_rewrite', 'disable_flush');

Though since I haven't poked around too deeply into this, I'm not sure if
this will impact anything else (i.e. actual permalink behavior) ... so I
make no guarantees :-)

~Eric

-----Original Message-----
From: wp-hackers-bounces at lists.automattic.com
[mailto:wp-hackers-bounces at lists.automattic.com] On Behalf Of John Sessford
Sent: Wednesday, August 04, 2010 8:20 PM
To: wp-hackers at lists.automattic.com
Subject: [wp-hackers] Prevent Writing to .htaccess

Hi,

I've encountered a road-block with .htaccess / Rewrite Rules. Hoping someone
here can assist.

Two issues:

1. .htaccess is flushed whenever '/wp-admin/options-permalink.php' is
loaded. It strikes me as strange that this would execute prior to action
from the user.

2. I require a method to prevent .htaccess from being flushed even when
"Save Changes" is clicked. I don't see a viable hook anywhere that can
control whether or not to write .htaccess. In my case the Rewrite Rules
should still be written to the database though. Making .htaccess read-only
is one method, but one can't always rely on users to do this.

Thoughts?

Thanks in advance,
John Sessford
_______________________________________________
wp-hackers mailing list
wp-hackers at lists.automattic.com
http://lists.automattic.com/mailman/listinfo/wp-hackers


From otto at ottodestruct.com  Thu Aug  5 04:41:23 2010
From: otto at ottodestruct.com (Otto)
Date: Wed, 4 Aug 2010 23:41:23 -0500
Subject: [wp-hackers] Prevent Writing to .htaccess
In-Reply-To: <006701cb3450$a1fb9a80$e5f2cf80$@com>
References: <AANLkTik6X84nJpKwxVxZXUx0GeBTw8jL9xaOWRqR5tk2@mail.gmail.com> 
	<006701cb3450$a1fb9a80$e5f2cf80$@com>
Message-ID: <AANLkTikyPy9ZVTneJSDLii2qv-Dg5scmpGvT=KUUoNTX@mail.gmail.com>

No, that'll cause the index.php prefix to be added on an Apache server.

Short version is that you can't do it. Not with the current code. You
could include some code to try to change the permissions to make
htaccess not writable, but that's it.

If you have custom rules that are getting messed with, just put them
outside the #BEGIN and #END markers. Those won't get altered.

-Otto



On Wed, Aug 4, 2010 at 10:45 PM, Eric Mann <eric at eamann.com> wrote:
> One possibility (a very hacky possibility) would be to spoof the return
> value of got_mod_rewrite(). ?This function is used as a Boolean flag before
> the .htaccess file is written. ?If it's True (if Apache has mod_rewrite
> enabled) then the .htaccess file is written. ?If it's False, then it's not.
>
> The beauty is that there's a filter applied in the function. ?So this filter
> would basically disable .htaccess from being overwritten.
>
> function disable_flush($got_rewrite) {
> ? ? ? ?return false;
> }
> add_filter('got_rewrite', 'disable_flush');
>
> Though since I haven't poked around too deeply into this, I'm not sure if
> this will impact anything else (i.e. actual permalink behavior) ... so I
> make no guarantees :-)
>
> ~Eric
>
> -----Original Message-----
> From: wp-hackers-bounces at lists.automattic.com
> [mailto:wp-hackers-bounces at lists.automattic.com] On Behalf Of John Sessford
> Sent: Wednesday, August 04, 2010 8:20 PM
> To: wp-hackers at lists.automattic.com
> Subject: [wp-hackers] Prevent Writing to .htaccess
>
> Hi,
>
> I've encountered a road-block with .htaccess / Rewrite Rules. Hoping someone
> here can assist.
>
> Two issues:
>
> 1. .htaccess is flushed whenever '/wp-admin/options-permalink.php' is
> loaded. It strikes me as strange that this would execute prior to action
> from the user.
>
> 2. I require a method to prevent .htaccess from being flushed even when
> "Save Changes" is clicked. I don't see a viable hook anywhere that can
> control whether or not to write .htaccess. In my case the Rewrite Rules
> should still be written to the database though. Making .htaccess read-only
> is one method, but one can't always rely on users to do this.
>
> Thoughts?
>
> Thanks in advance,
> John Sessford
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From sbressler at gmail.com  Thu Aug  5 06:35:14 2010
From: sbressler at gmail.com (Scott Bressler)
Date: Wed, 4 Aug 2010 23:35:14 -0700
Subject: [wp-hackers] get_categories() question
Message-ID: <AANLkTikiiHfqf75sph89DBs6=O5Y1hoObHv6BuFRX4p8@mail.gmail.com>

This should be really easy, but I can't figure it out. I'm trying to use
get_categories to list all the top-level categories of a blog.
wp_list_categories, which calls get_categories, allows for a 'depth'
parameter, and it functions as expected. However, get_categories seemingly
doesn't allow for this same parameter. Is there a way to use get_categories
to only get the top-level categories? What about if I wanted to get the
top-level terms of any taxonomy?

Thanks,
Scott

From sbressler at gmail.com  Thu Aug  5 06:51:27 2010
From: sbressler at gmail.com (Scott Bressler)
Date: Wed, 4 Aug 2010 23:51:27 -0700
Subject: [wp-hackers] get_categories() question
In-Reply-To: <AANLkTikiiHfqf75sph89DBs6=O5Y1hoObHv6BuFRX4p8@mail.gmail.com>
References: <AANLkTikiiHfqf75sph89DBs6=O5Y1hoObHv6BuFRX4p8@mail.gmail.com>
Message-ID: <AANLkTimM+wj3VTu7NNwQ10ECMwJHdGdS3WmO7Hsp5dax@mail.gmail.com>

Would happily use this, but was wondering if there was a built-in function I
could use rather than writing my own SQL.

http://wordpress.org/support/topic/list-of-top-levelroot-categories

On Wed, Aug 4, 2010 at 11:35 PM, Scott Bressler <sbressler at gmail.com> wrote:

> This should be really easy, but I can't figure it out. I'm trying to use
> get_categories to list all the top-level categories of a blog.
> wp_list_categories, which calls get_categories, allows for a 'depth'
> parameter, and it functions as expected. However, get_categories seemingly
> doesn't allow for this same parameter. Is there a way to use get_categories
> to only get the top-level categories? What about if I wanted to get the
> top-level terms of any taxonomy?
>
> Thanks,
> Scott
>

From mda at blogwaffe.com  Thu Aug  5 08:33:51 2010
From: mda at blogwaffe.com (Michael D Adams)
Date: Thu, 5 Aug 2010 01:33:51 -0700
Subject: [wp-hackers] get_categories() question
In-Reply-To: <AANLkTikiiHfqf75sph89DBs6=O5Y1hoObHv6BuFRX4p8@mail.gmail.com>
References: <AANLkTikiiHfqf75sph89DBs6=O5Y1hoObHv6BuFRX4p8@mail.gmail.com>
Message-ID: <AANLkTi=V08VyYNUJL4w8btifkSJNuM6RzbpoGgcx1ssi@mail.gmail.com>

On Wed, Aug 4, 2010 at 11:35 PM, Scott Bressler <sbressler at gmail.com> wrote:
> This should be really easy, but I can't figure it out. I'm trying to use
> get_categories to list all the top-level categories of a blog.
> wp_list_categories, which calls get_categories, allows for a 'depth'
> parameter, and it functions as expected. However, get_categories seemingly
> doesn't allow for this same parameter. Is there a way to use get_categories
> to only get the top-level categories? What about if I wanted to get the
> top-level terms of any taxonomy?

$root_categories = get_categories( array(
	'parent' => 0,
) );

$root_my_tax = get_terms( 'my_tax', array(
	'parent' => 0,
) );

I responded to the thread you linked:
http://wordpress.org/support/topic/list-of-top-levelroot-categories?replies=4#post-1630536

From john at ikailo.com  Thu Aug  5 12:05:29 2010
From: john at ikailo.com (John Sessford)
Date: Thu, 5 Aug 2010 12:05:29 +0000
Subject: [wp-hackers] Prevent Writing to .htaccess
Message-ID: <1970036297-1281009904-cardhu_decombobulator_blackberry.rim.net-1766284952-@bda519.bisx.prod.on.blackberry>

>One possibility (a very hacky possibility) would be to spoof the return value of got_mod_rewrite(). 

This has potential. Wp_redirect does a similar thing.  Not as hacky as some of the other stuff I've had to do. :)

>Short version is that you can't do it. Not with the current code.
 
Time for a patch maybe?

Anyone have an explanation why the flush executes on the /options-permalink.php page load?

John Sessford

From wordpress at santosj.name  Thu Aug  5 13:21:43 2010
From: wordpress at santosj.name (Jacob Santos)
Date: Thu, 05 Aug 2010 08:21:43 -0500
Subject: [wp-hackers] Passing class methods by reference
In-Reply-To: <AANLkTikMArVOoivjt=O6e6Q_Ep_x23zD0wVW_ZiKJkNq@mail.gmail.com>
References: <AANLkTikMArVOoivjt=O6e6Q_Ep_x23zD0wVW_ZiKJkNq@mail.gmail.com>
Message-ID: <4C5ABAE7.30501@santosj.name>

Actually for plugins, it is better to always reference when passing an 
object in an array. Classes aren't passed automatically by reference as 
in to the area of memory, but reference to the handle (Sara Golomen has 
a really good article or was it the Release Master of PHP5.2?).

Therefore, you can still change the object in $this without changing the 
original, whereas &$this will. When using objects in plugins in 
WordPress, the object should always be referenced explicitly in order to 
assure that it can be removed in the future.

Jacob Santos

On 8/4/2010 11:06 AM, Dan Gayle wrote:
> I see some plugins that have a callback to a class method by reference like so:
>
> array(&$this, 'function_name' ));
>
> The codex says "if the function is a member of a class within the
> plugin it should be referenced as array( $this, 'function_name' )"
>
> I assume that passing a reference is an attempt to save memory, but in
> PHP 5 aren't objects automatically passed by reference? What is the
> benefit, if any, of this style of callback?
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>    


From eric at eamann.com  Thu Aug  5 14:26:01 2010
From: eric at eamann.com (Eric Mann)
Date: Thu, 5 Aug 2010 07:26:01 -0700 (PDT)
Subject: [wp-hackers] Prevent Writing to .htaccess
In-Reply-To: <1970036297-1281009904-cardhu_decombobulator_blackberry.rim.net-1766284952-@bda519.bisx.prod.on.blackberry>
References: <1970036297-1281009904-cardhu_decombobulator_blackberry.rim.net-1766284952-@bda519.bisx.prod.on.blackberry>
Message-ID: <961938296.167861.1281018361353.JavaMail.open-xchange@oxusltgw09.schlund.de>

I agree, time for a patch.
?
My recommendation would be to remove the direct function call that flushes the
rules and instead use something like do_action('flush_rules'); ?Then re-add the
function call with add_action(). ?This way, we can remove the function call when
needed (i.e. in your case).

On August 5, 2010 at 12:05 PM John Sessford <john at ikailo.com> wrote:

> >One possibility (a very hacky possibility) would be to spoof the return value
> >of got_mod_rewrite().
>
> This has potential. Wp_redirect does a similar thing.? Not as hacky as some of
> the other stuff I've had to do. :)
>
> >Short version is that you can't do it. Not with the current code.
>?
> Time for a patch maybe?
>
> Anyone have an explanation why the flush executes on the
> /options-permalink.php page load?
>
> John Sessford
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

From rbilesky at gmail.com  Thu Aug  5 14:31:12 2010
From: rbilesky at gmail.com (Ryan Bilesky)
Date: Thu, 5 Aug 2010 07:31:12 -0700
Subject: [wp-hackers] Prevent Writing to .htaccess
In-Reply-To: <961938296.167861.1281018361353.JavaMail.open-xchange@oxusltgw09.schlund.de>
References: <1970036297-1281009904-cardhu_decombobulator_blackberry.rim.net-1766284952-@bda519.bisx.prod.on.blackberry>
	<961938296.167861.1281018361353.JavaMail.open-xchange@oxusltgw09.schlund.de>
Message-ID: <AANLkTikEfS79oV9GJr__N_PROoAOZhXB6z=BXpWesdQz@mail.gmail.com>

Forgive me if I am being nieve since I am still al little new to wordpress
but why can't WP have a way to set custom .htaccess rules and when WP
flushes .htaccess and readds WP rules it could readd your custom rules too.
Or make it so that you can block off a section of .htaccess using specific
comments to tell WP don't modify this section of .htaccess.

On Thu, Aug 5, 2010 at 7:26 AM, Eric Mann <eric at eamann.com> wrote:

> I agree, time for a patch.
>
> My recommendation would be to remove the direct function call that flushes
> the
> rules and instead use something like do_action('flush_rules');  Then re-add
> the
> function call with add_action().  This way, we can remove the function call
> when
> needed (i.e. in your case).
>
> On August 5, 2010 at 12:05 PM John Sessford <john at ikailo.com> wrote:
>
> > >One possibility (a very hacky possibility) would be to spoof the return
> value
> > >of got_mod_rewrite().
> >
> > This has potential. Wp_redirect does a similar thing.  Not as hacky as
> some of
> > the other stuff I've had to do. :)
> >
> > >Short version is that you can't do it. Not with the current code.
> >
> > Time for a patch maybe?
> >
> > Anyone have an explanation why the flush executes on the
> > /options-permalink.php page load?
> >
> > John Sessford
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers at lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From chip at chipbennett.net  Thu Aug  5 14:36:03 2010
From: chip at chipbennett.net (Chip Bennett)
Date: Thu, 5 Aug 2010 09:36:03 -0500
Subject: [wp-hackers] Prevent Writing to .htaccess
In-Reply-To: <AANLkTikEfS79oV9GJr__N_PROoAOZhXB6z=BXpWesdQz@mail.gmail.com>
References: <1970036297-1281009904-cardhu_decombobulator_blackberry.rim.net-1766284952-@bda519.bisx.prod.on.blackberry>
	<961938296.167861.1281018361353.JavaMail.open-xchange@oxusltgw09.schlund.de>
	<AANLkTikEfS79oV9GJr__N_PROoAOZhXB6z=BXpWesdQz@mail.gmail.com>
Message-ID: <AANLkTi=rxgOZ99OipJTz-aKASrV-k6z8vC1NnZhC5x2e@mail.gmail.com>

On Thu, Aug 5, 2010 at 9:31 AM, Ryan Bilesky <rbilesky at gmail.com> wrote:

> Forgive me if I am being nieve since I am still al little new to wordpress
> but why can't WP have a way to set custom .htaccess rules and when WP
> flushes .htaccess and readds WP rules it could readd your custom rules too.
> Or make it so that you can block off a section of .htaccess using specific
> comments to tell WP don't modify this section of .htaccess.


Isn't that exactly what WordPress does? It only ever touches whatever is
between the "# BEGIN WordPress" and "# END WordPress" comment tags.

I've got quite a bit of other content in my .htaccess file, that never gets
touched by WordPress, whether or not I ever update my Permalink settings.

From dangayle at gmail.com  Thu Aug  5 16:32:53 2010
From: dangayle at gmail.com (Dan Gayle)
Date: Thu, 5 Aug 2010 09:32:53 -0700
Subject: [wp-hackers] Passing class methods by reference
In-Reply-To: <4C5ABAE7.30501@santosj.name>
References: <AANLkTikMArVOoivjt=O6e6Q_Ep_x23zD0wVW_ZiKJkNq@mail.gmail.com>
	<4C5ABAE7.30501@santosj.name>
Message-ID: <AANLkTi=PhXxp3r1RgeXw17QnL+f0FfOaWchB7RqHfer3@mail.gmail.com>

On Thu, Aug 5, 2010 at 6:21 AM, Jacob Santos <wordpress at santosj.name> wrote:
> Sara Golomen has a really good article

I searched for what you were referring to (ha ha! a pun!) and found this:

http://blog.golemon.com/2007/01/youre-being-lied-to.html

From otto at ottodestruct.com  Thu Aug  5 16:36:02 2010
From: otto at ottodestruct.com (Otto)
Date: Thu, 5 Aug 2010 11:36:02 -0500
Subject: [wp-hackers] Prevent Writing to .htaccess
In-Reply-To: <AANLkTikEfS79oV9GJr__N_PROoAOZhXB6z=BXpWesdQz@mail.gmail.com>
References: <1970036297-1281009904-cardhu_decombobulator_blackberry.rim.net-1766284952-@bda519.bisx.prod.on.blackberry>
	<961938296.167861.1281018361353.JavaMail.open-xchange@oxusltgw09.schlund.de>
	<AANLkTikEfS79oV9GJr__N_PROoAOZhXB6z=BXpWesdQz@mail.gmail.com>
Message-ID: <AANLkTimYx1P0qkeh85Po0sQ08Hz6+_XvkP+LQpR4hArE@mail.gmail.com>

On Thu, Aug 5, 2010 at 9:31 AM, Ryan Bilesky <rbilesky at gmail.com> wrote:
> Forgive me if I am being nieve since I am still al little new to wordpress
> but why can't WP have a way to set custom .htaccess rules and when WP
> flushes .htaccess and readds WP rules it could readd your custom rules too.

Oh, you can certainly do that. WP Super-Cache does it.

The mod_rewrite_rules filter is the most obvious choice to do this.
You can modify the rules it puts into the htaccess file all you like
with that.

-Otto

From chris at c3mdigital.com  Thu Aug  5 16:48:58 2010
From: chris at c3mdigital.com (Chris Olbekson)
Date: Thu, 5 Aug 2010 11:48:58 -0500
Subject: [wp-hackers] Examples of plugins that use the transient API
Message-ID: <AANLkTiny1hcWrR3sR62Z8sVZNEF+iPJRBnK9S9o3QVn0@mail.gmail.com>

Hello All,
I will be speaking at WordCamp Houston this weekend on performance and I
would like to show some examples of plugins and or themes that
make efficient use of the Transient API.  If anyone could point some out to
me I would greatly appreciate it.  I am going to be demonstrating how
Memcached improves performance by storing transient data in ram.

--Chris Olbekson

 [image: WordPress Support Profile]
<http://wordpress.org/support/profile/3629249>

<http://wordpress.org/support/profile/3629249>

[image: C3MDigital.com] <http://c3mdigital.com>

From otto at ottodestruct.com  Thu Aug  5 16:56:49 2010
From: otto at ottodestruct.com (Otto)
Date: Thu, 5 Aug 2010 11:56:49 -0500
Subject: [wp-hackers] Examples of plugins that use the transient API
In-Reply-To: <AANLkTiny1hcWrR3sR62Z8sVZNEF+iPJRBnK9S9o3QVn0@mail.gmail.com>
References: <AANLkTiny1hcWrR3sR62Z8sVZNEF+iPJRBnK9S9o3QVn0@mail.gmail.com>
Message-ID: <AANLkTimRvfT_UjgUWV5Hfhz_nuDgph85hKqxbg-E0Nef@mail.gmail.com>

The fetch_feed code in core uses the transient API for caching,
eventually. It uses SimplePie to retrieve feeds, but hooks the
SimplePie requests in with the WP_Feed_Cache object. WP_Feed_Cache is
an extended SimplePie_Cache class that uses the
WP_Feed_Cache_Transient to store the data. WP_Feed_Cache_Transient,
naturally, uses transients.

So anything that displays a feed (all the feeds on the dashboard, for
instance) use transients. Cache time on them defaults to 12 hours.

-Otto



On Thu, Aug 5, 2010 at 11:48 AM, Chris Olbekson <chris at c3mdigital.com> wrote:
> Hello All,
> I will be speaking at WordCamp Houston this weekend on performance and I
> would like to show some examples of plugins and or themes that
> make efficient use of the Transient API. ?If anyone could point some out to
> me I would greatly appreciate it. ?I am going to be demonstrating how
> Memcached improves performance by storing transient data in ram.
>
> --Chris Olbekson
>
> ?[image: WordPress Support Profile]
> <http://wordpress.org/support/profile/3629249>
>
> <http://wordpress.org/support/profile/3629249>
>
> [image: C3MDigital.com] <http://c3mdigital.com>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From otto at ottodestruct.com  Thu Aug  5 17:05:04 2010
From: otto at ottodestruct.com (Otto)
Date: Thu, 5 Aug 2010 12:05:04 -0500
Subject: [wp-hackers] Examples of plugins that use the transient API
In-Reply-To: <AANLkTiny1hcWrR3sR62Z8sVZNEF+iPJRBnK9S9o3QVn0@mail.gmail.com>
References: <AANLkTiny1hcWrR3sR62Z8sVZNEF+iPJRBnK9S9o3QVn0@mail.gmail.com>
Message-ID: <AANLkTimwzyrBT-LDzNmRjPCBYZLW_KKyx9wgVpHd2P2X@mail.gmail.com>

Or, if you really just want a plugin, I use transients in Simple
Twitter Connect.

STC is a complicated plugin, but the simplest example is in the STC -
Followers Widget. Basically, it displays a list of my followers on
twitter along with their pictures and so forth. I have it displaying
12 random followers on my sidebar at ottopress.com.

To do that, the plugin has to make a request to
http://api.twitter.com/1/followers/ids . This returns a rather large
list of up to 5000 followers, which I store in a transient because the
request is annoyingly large and I don't want to upset Twitter by
requesting it all the time. The cache is timed for 24 hours.

Anyway, it then takes those 5000 followers, randomizes them, grabs 100
of them, and does a request for their more detailed information from
Twitter using http://api.twitter.com/1/users/lookup (which allows up
to 100 users per request on this case). That information is then
cached in a transient as well. Eventually, 12 random of them are
selected and their info displayed in the box. These 12 randoms are
changed every page load, but since that information is cached, it's
only two requests to Twitter's servers, max, every 24 hours.

-Otto


On Thu, Aug 5, 2010 at 11:48 AM, Chris Olbekson <chris at c3mdigital.com> wrote:
> Hello All,
> I will be speaking at WordCamp Houston this weekend on performance and I
> would like to show some examples of plugins and or themes that
> make efficient use of the Transient API. ?If anyone could point some out to
> me I would greatly appreciate it. ?I am going to be demonstrating how
> Memcached improves performance by storing transient data in ram.
>
> --Chris Olbekson
>
> ?[image: WordPress Support Profile]
> <http://wordpress.org/support/profile/3629249>
>
> <http://wordpress.org/support/profile/3629249>
>
> [image: C3MDigital.com] <http://c3mdigital.com>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From mikeschinkel at newclarity.net  Thu Aug  5 17:27:00 2010
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Thu, 5 Aug 2010 13:27:00 -0400
Subject: [wp-hackers] Examples of plugins that use the transient API
In-Reply-To: <AANLkTiny1hcWrR3sR62Z8sVZNEF+iPJRBnK9S9o3QVn0@mail.gmail.com>
References: <AANLkTiny1hcWrR3sR62Z8sVZNEF+iPJRBnK9S9o3QVn0@mail.gmail.com>
Message-ID: <ECEBC44D-1C59-4480-B70B-C34BFA145BD2@newclarity.net>

On Aug 5, 2010, at 12:48 PM, Chris Olbekson wrote:
> I will be speaking at WordCamp Houston this weekend on performance and I
> would like to show some examples of plugins and or themes that
> make efficient use of the Transient API.  If anyone could point some out to
> me I would greatly appreciate it.  I am going to be demonstrating how
> Memcached improves performance by storing transient data in ram.

Hey Chris:

Talk to Andrew Gray.  He has spoken on and written about Transient API:

http://wordcampraleigh.com/speakers/speaker-spotlight-andrew-gray/

-Mike


From andrew at graymerica.com  Thu Aug  5 17:36:39 2010
From: andrew at graymerica.com (Andrew Gray)
Date: Thu, 5 Aug 2010 13:36:39 -0400
Subject: [wp-hackers]  Examples of plugins that use the transient
Message-ID: <E02BE5C8-0621-40BB-991C-6196807FFEAA@graymerica.com>

Chris,

Feel free to email me off this and I can give you my slide deck and code samples if you like.

I did not address memcache, but focused on caching sidebar items with transient API.  My point is Transient helps without memcache by taking a complicated query and turning it into a simple lookup.

You can download my samples here :  http://tinyurl.com/wordcamprdu

Hope this helps,

Andrew


> Hello All,
> I will be speaking at WordCamp Houston this weekend on performance and I
> would like to show some examples of plugins and or themes that
> make efficient use of the Transient API.  If anyone could point some out to
> me I would greatly appreciate it.  I am going to be demonstrating how
> Memcached improves performance by storing transient data in ram.

From dangayle at gmail.com  Thu Aug  5 17:44:47 2010
From: dangayle at gmail.com (Dan Gayle)
Date: Thu, 5 Aug 2010 10:44:47 -0700
Subject: [wp-hackers] Removing empty values from serialized array
Message-ID: <AANLkTimfex7bhWDOCPftbpRzdU2EW-_pC_ZYFJgDU6te@mail.gmail.com>

I have an options setting page that uses the register_setting() and
settings_fields() functions to store my data in a serialized array,
following the example set by Ozh here:
http://planetozh.com/blog/2009/05/handling-plugins-options-in-wordpress-28-with-register_setting/

When this field is unchecked, the key/value pair in the ozh_sample
array is completely removed:
<input name="pms_options[option1]" type="checkbox" value="1" <?php if
(isset($options['option1'])) checked('1', $options['option1']); ?> />

When this field is left blank, however, the value is blank, but the key remains:
<input type="text" name="pms_options[affiliateID]" value="<?php echo
(isset($options['affiliateID']) ) ? $options['affiliateID'] : NULL ;
?>

So my question is twofold: why does the checkbox go away completely,
and how can I get an empty options array key to go away? I've tried
unsetting it, setting it to NULL, everything I can think of. How can
you get rid of an empty value from a serialized array?

From mda at blogwaffe.com  Thu Aug  5 17:44:47 2010
From: mda at blogwaffe.com (Michael D Adams)
Date: Thu, 5 Aug 2010 10:44:47 -0700
Subject: [wp-hackers] Examples of plugins that use the transient API
In-Reply-To: <AANLkTiny1hcWrR3sR62Z8sVZNEF+iPJRBnK9S9o3QVn0@mail.gmail.com>
References: <AANLkTiny1hcWrR3sR62Z8sVZNEF+iPJRBnK9S9o3QVn0@mail.gmail.com>
Message-ID: <AANLkTinu431aucQGjZwi3Cqit3FmyDQ05_sz+Ab_XUHb@mail.gmail.com>

On Thu, Aug 5, 2010 at 9:48 AM, Chris Olbekson <chris at c3mdigital.com> wrote:
> Hello All,
> I will be speaking at WordCamp Houston this weekend on performance and I
> would like to show some examples of plugins and or themes that
> make efficient use of the Transient API. ?If anyone could point some out to
> me I would greatly appreciate it. ?I am going to be demonstrating how
> Memcached improves performance by storing transient data in ram.

Nice responses from others on the list.  Mine was going to be much less useful:

http://www.google.com/search?q=get_transient+site:http://plugins.svn.wordpress.org/

:)
Mike

From mikeschinkel at newclarity.net  Thu Aug  5 17:52:19 2010
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Thu, 5 Aug 2010 13:52:19 -0400
Subject: [wp-hackers] Passing class methods by reference
In-Reply-To: <4C5ABAE7.30501@santosj.name>
References: <AANLkTikMArVOoivjt=O6e6Q_Ep_x23zD0wVW_ZiKJkNq@mail.gmail.com>
	<4C5ABAE7.30501@santosj.name>
Message-ID: <65E5AB70-EC4F-413E-8A28-253CCC805477@newclarity.net>

On Aug 5, 2010, at 9:21 AM, Jacob Santos wrote:
> Therefore, you can still change the object in $this without changing the original, whereas &$this will. When using objects in plugins in WordPress, the object should always be referenced explicitly in order to assure that it can be removed in the future.

Jacob, I was actually trying to figure out how to remove a filter that was added using an array instance method just the other day and was stumped.  Mine sharing how it's done?  

Thanks in advance.

-Mike

From mikeschinkel at newclarity.net  Thu Aug  5 17:56:35 2010
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Thu, 5 Aug 2010 13:56:35 -0400
Subject: [wp-hackers] Examples of plugins that use the transient API
In-Reply-To: <AANLkTinu431aucQGjZwi3Cqit3FmyDQ05_sz+Ab_XUHb@mail.gmail.com>
References: <AANLkTiny1hcWrR3sR62Z8sVZNEF+iPJRBnK9S9o3QVn0@mail.gmail.com>
	<AANLkTinu431aucQGjZwi3Cqit3FmyDQ05_sz+Ab_XUHb@mail.gmail.com>
Message-ID: <B395C930-CD6C-4508-80E6-48A3394116B4@newclarity.net>

On Aug 5, 2010, at 1:44 PM, Michael D Adams wrote:
> Nice responses from others on the list.  Mine was going to be much less useful:
> 
> http://www.google.com/search?q=get_transient+site:http://plugins.svn.wordpress.org/

NICE!  I've needed that countless times but googling for it just never occurred to me. Doh!

Thanks.

-Mike

From otto at ottodestruct.com  Thu Aug  5 18:10:33 2010
From: otto at ottodestruct.com (Otto)
Date: Thu, 5 Aug 2010 13:10:33 -0500
Subject: [wp-hackers] Removing empty values from serialized array
In-Reply-To: <AANLkTimfex7bhWDOCPftbpRzdU2EW-_pC_ZYFJgDU6te@mail.gmail.com>
References: <AANLkTimfex7bhWDOCPftbpRzdU2EW-_pC_ZYFJgDU6te@mail.gmail.com>
Message-ID: <AANLkTikjaijJJsQR0=ggBucKPu36TwuJkbvs1MNS1JJs@mail.gmail.com>

Your data validation function needs to be smarter.

Your validation function basically looks like this:

function validate($input) {
.. do some stuff to validate $input ..
? ? return $input;
}

This is actually wrong and somewhat unsafe. The $input is untrusted
data. What should be returned is *trusted* data. What if I was to
forge a new input of options[bad-thing] = 'malicious' and to send that
to your form? Your validation function isn't validating the
"bad-thing" option, so it passed right through, unchecked.

Instead, you should do this:
function validate($input) {
   $output = array();
.. do some stuff to validate $input, but copy the validated values
into $output..
? ? return $output;
}

In this way, *only* the values you are checking make it through the function.

Then, all you have to do for a blank value is to not put it into the
$output array at all.

-Otto



On Thu, Aug 5, 2010 at 12:44 PM, Dan Gayle <dangayle at gmail.com> wrote:
> I have an options setting page that uses the register_setting() and
> settings_fields() functions to store my data in a serialized array,
> following the example set by Ozh here:
> http://planetozh.com/blog/2009/05/handling-plugins-options-in-wordpress-28-with-register_setting/
>
> When this field is unchecked, the key/value pair in the ozh_sample
> array is completely removed:
> <input name="pms_options[option1]" type="checkbox" value="1" <?php if
> (isset($options['option1'])) checked('1', $options['option1']); ?> />
>
> When this field is left blank, however, the value is blank, but the key remains:
> <input type="text" name="pms_options[affiliateID]" value="<?php echo
> (isset($options['affiliateID']) ) ? $options['affiliateID'] : NULL ;
> ?>
>
> So my question is twofold: why does the checkbox go away completely,
> and how can I get an empty options array key to go away? I've tried
> unsetting it, setting it to NULL, everything I can think of. How can
> you get rid of an empty value from a serialized array?
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From wp at andrewnacin.com  Thu Aug  5 18:14:00 2010
From: wp at andrewnacin.com (Andrew Nacin)
Date: Thu, 5 Aug 2010 14:14:00 -0400
Subject: [wp-hackers] Removing empty values from serialized array
In-Reply-To: <AANLkTimfex7bhWDOCPftbpRzdU2EW-_pC_ZYFJgDU6te@mail.gmail.com>
References: <AANLkTimfex7bhWDOCPftbpRzdU2EW-_pC_ZYFJgDU6te@mail.gmail.com>
Message-ID: <AANLkTint--sa_p5VbEMpf2uNhJXaHW0XA4CJP_n6+M74@mail.gmail.com>

On Thu, Aug 5, 2010 at 1:44 PM, Dan Gayle <dangayle at gmail.com> wrote:

> I have an options setting page that uses the register_setting() and
> settings_fields() functions to store my data in a serialized array,
> following the example set by Ozh here:
>
> http://planetozh.com/blog/2009/05/handling-plugins-options-in-wordpress-28-with-register_setting/
>
> When this field is unchecked, the key/value pair in the ozh_sample
> array is completely removed:
> <input name="pms_options[option1]" type="checkbox" value="1" <?php if
> (isset($options['option1'])) checked('1', $options['option1']); ?> />
>
> When this field is left blank, however, the value is blank, but the key
> remains:
> <input type="text" name="pms_options[affiliateID]" value="<?php echo
> (isset($options['affiliateID']) ) ? $options['affiliateID'] : NULL ;
> ?>
>
> So my question is twofold: why does the checkbox go away completely,
> and how can I get an empty options array key to go away? I've tried
> unsetting it, setting it to NULL, everything I can think of. How can
> you get rid of an empty value from a serialized array?


In addition to Otto's excellent advice for using $input and $output, here's
some additional background:

Checkboxes only send data if they are checked. The simplest way to handle
this normally is to use empty() -- $checkbox_value = !empty(
$_POST['checkbox_field'] );. If you ever need to remove keys with empty
values from an array, simply pass the array through array_filter() without a
callback.

That said, use the $input/$output technique. It's definitely the appropriate
way to leverage a sanitization callback.

Nacin

From scribu at gmail.com  Thu Aug  5 18:16:02 2010
From: scribu at gmail.com (scribu)
Date: Thu, 5 Aug 2010 21:16:02 +0300
Subject: [wp-hackers] Passing class methods by reference
In-Reply-To: <65E5AB70-EC4F-413E-8A28-253CCC805477@newclarity.net>
References: <AANLkTikMArVOoivjt=O6e6Q_Ep_x23zD0wVW_ZiKJkNq@mail.gmail.com>
	<4C5ABAE7.30501@santosj.name>
	<65E5AB70-EC4F-413E-8A28-253CCC805477@newclarity.net>
Message-ID: <AANLkTikAK49oJ1A-HpBvILKv26HibzszUm2xvE0IVRO9@mail.gmail.com>

On Thu, Aug 5, 2010 at 8:52 PM, Mike Schinkel
<mikeschinkel at newclarity.net>wrote:

> Jacob, I was actually trying to figure out how to remove a filter that was
> added using an array instance method just the other day and was stumped.
>  Mine sharing how it's done?
>

Might want to read this:

http://stackoverflow.com/questions/1261764/wordpress-need-help-with-remove-action/1268992#1268992


-- 
http://scribu.net

From wp at andrewnacin.com  Thu Aug  5 18:21:00 2010
From: wp at andrewnacin.com (Andrew Nacin)
Date: Thu, 5 Aug 2010 14:21:00 -0400
Subject: [wp-hackers] Passing class methods by reference
In-Reply-To: <65E5AB70-EC4F-413E-8A28-253CCC805477@newclarity.net>
References: <AANLkTikMArVOoivjt=O6e6Q_Ep_x23zD0wVW_ZiKJkNq@mail.gmail.com> 
	<4C5ABAE7.30501@santosj.name>
	<65E5AB70-EC4F-413E-8A28-253CCC805477@newclarity.net>
Message-ID: <AANLkTikPLzWiqP=k0iyHxV6inWdh3B_RJVV5_esNMcw=@mail.gmail.com>

On Thu, Aug 5, 2010 at 1:52 PM, Mike Schinkel
<mikeschinkel at newclarity.net>wrote:

> Jacob, I was actually trying to figure out how to remove a filter that was
> added using an array instance method just the other day and was stumped.
>  Mine sharing how it's done?
>

class my_class {
   function __construct() {
     add_action( 'init', array( &$this, 'init' ) );
   }
   function init() {}
}
$my_class_instance = new my_class;
remove_action( 'init', array( $my_class_instance, 'init' ) );

This is generally why I always assign instantiations to a variable in my
plugins (versus simply calling `new myclass;`), that way I'm playing nice
with others and allowing another plugin to modify the callbacks I attach. I
believe I mention this as good practice in <
http://www.andrewnacin.com/2010/05/11/in-wordpress-prefix-everything/>.

We included similar code in Twenty Ten, removing the default CSS for the
Recent Comments widget:
<
http://core.trac.wordpress.org/browser/tags/3.0.1/wp-content/themes/twentyten/functions.php#L421
>

From chris at c3mdigital.com  Thu Aug  5 18:30:15 2010
From: chris at c3mdigital.com (Chris Olbekson)
Date: Thu, 5 Aug 2010 13:30:15 -0500
Subject: [wp-hackers] Examples of plugins that use the transient API
Message-ID: <AANLkTim+YSQa-O29G-uQNBzVrJ9owz2r1rnW9ob4P1jH@mail.gmail.com>

>
> Or, if you really just want a plugin, I use transients in Simple
> Twitter Connect.
>

Thanks Otto, STC is a perfect example.

From mikeschinkel at newclarity.net  Thu Aug  5 18:51:46 2010
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Thu, 5 Aug 2010 14:51:46 -0400
Subject: [wp-hackers] Passing class methods by reference
In-Reply-To: <AANLkTikPLzWiqP=k0iyHxV6inWdh3B_RJVV5_esNMcw=@mail.gmail.com>
References: <AANLkTikMArVOoivjt=O6e6Q_Ep_x23zD0wVW_ZiKJkNq@mail.gmail.com>
	<4C5ABAE7.30501@santosj.name>
	<65E5AB70-EC4F-413E-8A28-253CCC805477@newclarity.net>
	<AANLkTikPLzWiqP=k0iyHxV6inWdh3B_RJVV5_esNMcw=@mail.gmail.com>
Message-ID: <EAE48CFB-506E-4E96-81CF-94329BF98AD3@newclarity.net>

On Aug 5, 2010, at 2:16 PM, scribu wrote:
> Might want to read this:
> 
> http://stackoverflow.com/questions/1261764/wordpress-need-help-with-remove-action/1268992#1268992

Thanks!  I see you answered it (and I just voted it up.)  Good job. :)

> This is generally why I always assign instantiations to a variable in my
> plugins (versus simply calling `new myclass;`), that way I'm playing nice
> with others and allowing another plugin to modify the callbacks I attach. I
> believe I mention this as good practice in <
> http://www.andrewnacin.com/2010/05/11/in-wordpress-prefix-everything/>.


Thanks.  So if a plugin did not create an instance then it's pretty much not possible to remove the hooks they add, correct?

Okay, so here comes another question tangentially related question.  I see a lot of people using classes for plugins and initializing them as plugins but try as I might I can't see the benefit of doing that over using static class methods. So in your example I would have written it as:

class my_class {
  static function on_load() {
    add_action( 'init', array( __CLASS__, 'init' ) );
  }
  static function init() {}
}
my_class::on_load();

remove_action( 'init', array( 'my_class', 'init' ) );

The reason I chose this design pattern over using class instances include:

1.) it only adds one global symbol, i.e. only the class name and not a global variable too.
2.) There's no benefit to using instances (that I've identified) when the methods are used for hooks; we only need a "singleton."
3.) Using this pattern the plugin user can easily remove filters without me having (to remember to) define a variable in the global namespace.

So, the questions are:

1.) Am I missing something here why it might be preferable to use an instance rather than a class?
2.) If I'm not missing something why have we not promoted the pattern above rather than the instance equivalent (other than it just not occurring to people?)

Thanks.

-Mike


From mda at blogwaffe.com  Thu Aug  5 18:57:05 2010
From: mda at blogwaffe.com (Michael D Adams)
Date: Thu, 5 Aug 2010 11:57:05 -0700
Subject: [wp-hackers] Passing class methods by reference
In-Reply-To: <AANLkTikPLzWiqP=k0iyHxV6inWdh3B_RJVV5_esNMcw=@mail.gmail.com>
References: <AANLkTikMArVOoivjt=O6e6Q_Ep_x23zD0wVW_ZiKJkNq@mail.gmail.com> 
	<4C5ABAE7.30501@santosj.name>
	<65E5AB70-EC4F-413E-8A28-253CCC805477@newclarity.net> 
	<AANLkTikPLzWiqP=k0iyHxV6inWdh3B_RJVV5_esNMcw=@mail.gmail.com>
Message-ID: <AANLkTi=-Stop2MyZX_Ka9fiHJwtTZvutYgLy5ZWXb7uh@mail.gmail.com>

On Thu, Aug 5, 2010 at 11:21 AM, Andrew Nacin <wp at andrewnacin.com> wrote:
> class my_class {
> ? function __construct() {
> ? ? add_action( 'init', array( &$this, 'init' ) );
> ? }
> ? function init() {}
> }
> $my_class_instance = new my_class;
> remove_action( 'init', array( $my_class_instance, 'init' ) );
>
> This is generally why I always assign instantiations to a variable in my
> plugins (versus simply calling `new myclass;`), that way I'm playing nice
> with others and allowing another plugin to modify the callbacks I attach.

Off topic: I have an irrational hatred of globals.  I'm on a twelve
step program and everything.

What I usually do is offer to plugins some static method on my classes
to accomplish the same thing.  In a case like this where you're using
my_class as a singleton, it's pretty straightforward.

require 'wp-load.php';

class My_Class { // Nacin should ucwords() his classes :)
        static $instance;
        static function &instance() {
                // You could use a static variable here instead
                if ( !self::$instance )
                        new My_Class;
                return self::$instance;
        }

        function __construct() {
                self::$instance =& $this;
                add_action( 'shutdown', array( &$this, 'hola' ) );
        }

        function hola() {
                die( "Hola.  If you see this, this example is broken.\n" );
        }
}

My_Class::instance();

function adios() {
        remove_action( 'shutdown', array( My_Class::instance(), 'hola' ) );
}

adios();


Static class methods are slow, though.

From dangayle at gmail.com  Thu Aug  5 19:04:29 2010
From: dangayle at gmail.com (Dan Gayle)
Date: Thu, 5 Aug 2010 12:04:29 -0700
Subject: [wp-hackers] Removing empty values from serialized array
In-Reply-To: <AANLkTint--sa_p5VbEMpf2uNhJXaHW0XA4CJP_n6+M74@mail.gmail.com>
References: <AANLkTimfex7bhWDOCPftbpRzdU2EW-_pC_ZYFJgDU6te@mail.gmail.com>
	<AANLkTint--sa_p5VbEMpf2uNhJXaHW0XA4CJP_n6+M74@mail.gmail.com>
Message-ID: <AANLkTinga7+Ahn24=+s7mZjTCHoN3YTfba-6Q-Kwnt7y@mail.gmail.com>

On Thu, Aug 5, 2010 at 11:14 AM, Andrew Nacin <wp at andrewnacin.com> wrote:

> In addition to Otto's excellent advice for using $input and $output, here's
> some additional background:
>
> Checkboxes only send data if they are checked. The simplest way to handle
> this normally is to use empty() -- $checkbox_value = !empty(
> $_POST['checkbox_field'] );. If you ever need to remove keys with empty
> values from an array, simply pass the array through array_filter() without a
> callback.

Here's my resultant validation callback, and it works perfectly. I
suppose the foreach could have been in a callback on the array_filter
function, but this is just as easy. Thanks for your help!

function pms_options_validate($options) {
    $allowed = array('option1','affiliateID');
    foreach ($options as $key => $value):
        if (in_array($key,$allowed)) $options[$key] = $value;
    endforeach;
    $options['option1'] = (isset($options['option1']) &&
($options['option1'] == 1)) ? $options['option1'] : NULL;
    $options['affiliateID'] = (isset($options['affiliateID']) ) ?
(int) $options['affiliateID'] : NULL;
    return array_filter($options);
}

From mikeschinkel at newclarity.net  Thu Aug  5 19:22:17 2010
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Thu, 5 Aug 2010 15:22:17 -0400
Subject: [wp-hackers] Removing empty values from serialized array
In-Reply-To: <AANLkTint--sa_p5VbEMpf2uNhJXaHW0XA4CJP_n6+M74@mail.gmail.com>
References: <AANLkTimfex7bhWDOCPftbpRzdU2EW-_pC_ZYFJgDU6te@mail.gmail.com>
	<AANLkTint--sa_p5VbEMpf2uNhJXaHW0XA4CJP_n6+M74@mail.gmail.com>
Message-ID: <86B7BC13-AC30-4BBA-9C19-47A3FEF8A226@newclarity.net>

On Aug 5, 2010, at 2:14 PM, Andrew Nacin wrote:
> Checkboxes only send data if they are checked. The simplest way to handle
> this normally is to use empty() -- $checkbox_value = !empty(
> $_POST['checkbox_field'] );.

Shouldn't you be including an isset() too?

> If you ever need to remove keys with empty
> values from an array, simply pass the array through array_filter() without a
> callback.

Good tip.

-Mike


From matt at mattjacob.com  Thu Aug  5 20:58:31 2010
From: matt at mattjacob.com (Matt Jacob)
Date: Thu, 05 Aug 2010 13:58:31 -0700
Subject: [wp-hackers] Removing empty values from serialized array
In-Reply-To: <86B7BC13-AC30-4BBA-9C19-47A3FEF8A226@newclarity.net>
References: <AANLkTimfex7bhWDOCPftbpRzdU2EW-_pC_ZYFJgDU6te@mail.gmail.com>	<AANLkTint--sa_p5VbEMpf2uNhJXaHW0XA4CJP_n6+M74@mail.gmail.com>
	<86B7BC13-AC30-4BBA-9C19-47A3FEF8A226@newclarity.net>
Message-ID: <4C5B25F7.6040601@mattjacob.com>

On 8/5/10 12:22 PM, Mike Schinkel wrote:
> Shouldn't you be including an isset() too?

No. empty() is all-inclusive. It checks for NULL and other things that 
could reasonably evaluate to "nothing" in the wonderful world of PHP. 
(Note the hint of sarcasm from this Java developer.)

Matt

From chris at c3mdigital.com  Thu Aug  5 21:06:35 2010
From: chris at c3mdigital.com (Chris Olbekson)
Date: Thu, 5 Aug 2010 16:06:35 -0500
Subject: [wp-hackers] Examples of plugins that use the transient API
Message-ID: <AANLkTim_ZG8EpBrXb-6d2-oKorUOZTAGRQy3iB=sfqa0@mail.gmail.com>

Nice responses from others on the list.  Mine was going to be much less
useful:

>
>
> http://www.google.com/search?q=get_transient+site:http://plugins.svn.wordpress.org/
>
> :)
> Mike
>

 Mike,
That is a very nice search, never occurred to me either.  I just ran it on
the theme repository and only got a handful of results:
http://www.google.com/search?q=get_transient+site:http://themes.svn.wordpress.org/<http://www.google.com/search?q=get_transient+site:http://plugins.svn.wordpress.org/>
Looks like not many theme authors are taking advantage of the transient api.

Andrew,
Sending email now.

From piemanek at gmail.com  Thu Aug  5 21:29:49 2010
From: piemanek at gmail.com (Simon Blackbourn)
Date: Thu, 5 Aug 2010 22:29:49 +0100
Subject: [wp-hackers] How to avoid multiple calls to wp_get_object_terms
Message-ID: <AANLkTinjx1TxOnQMsG4coPbZKe6v9gboqwsFiCiYCXBa@mail.gmail.com>

Hi

I've got a custom taxonomy (resource_types) associated with a custom post
type (resource), and in my loop I'm using wp_get_object_terms to list the
taxonomies each post is in:

    $types = wp_get_object_terms( $post->ID, 'resource_types' );

However, this causes a complex database query for every post in the loop:

    SELECT t.*, tt.*
    FROM aaa_terms AS t
    INNER JOIN aaa_term_taxonomy AS tt
    ON tt.term_id = t.term_id
    INNER JOIN aaa_term_relationships AS tr
    ON tr.term_taxonomy_id = tt.term_taxonomy_id
    WHERE tt.taxonomy IN ('resource_types')
    AND tr.object_id IN (*POSTIDHERE*)
    ORDER BY t.name ASC

I can see that WordPress executes a query earlier before the loop that is
getting all this information anyway:

    SELECT t.*, tt.*, tr.object_id
    FROM aaa_terms AS t
    INNER JOIN aaa_term_taxonomy AS tt
    ON tt.term_id = t.term_id
    INNER JOIN aaa_term_relationships AS tr
    ON tr.term_taxonomy_id = tt.term_taxonomy_id
    WHERE tt.taxonomy IN ('resource_tags', 'resource_types')
    AND tr.object_id IN (387, 249, 288, 279, 232, 253, 341, 228, 301, 395)
    ORDER BY t.name ASC

What I can't figure out is if there is any way to avoid calling
wp_get_object_terms on every post (maybe accessing the data from this
earlier query somehow)?

Thanks
Simon

From wordpress at santosj.name  Thu Aug  5 23:27:57 2010
From: wordpress at santosj.name (Jacob Santos)
Date: Thu, 05 Aug 2010 18:27:57 -0500
Subject: [wp-hackers] Passing class methods by reference
In-Reply-To: <AANLkTi=-Stop2MyZX_Ka9fiHJwtTZvutYgLy5ZWXb7uh@mail.gmail.com>
References: <AANLkTikMArVOoivjt=O6e6Q_Ep_x23zD0wVW_ZiKJkNq@mail.gmail.com>
	<4C5ABAE7.30501@santosj.name>	<65E5AB70-EC4F-413E-8A28-253CCC805477@newclarity.net>
	<AANLkTikPLzWiqP=k0iyHxV6inWdh3B_RJVV5_esNMcw=@mail.gmail.com>
	<AANLkTi=-Stop2MyZX_Ka9fiHJwtTZvutYgLy5ZWXb7uh@mail.gmail.com>
Message-ID: <4C5B48FD.5080800@santosj.name>

The suggestion was always to use static methods to reduce the overhead 
and prevent bugs such as what the WordPress developers keep trying to 
fix. The problem is also that we require the reference to the original 
object, in order to properly set and look at the filter_id assign to the 
object. The entire bit of code was first added during the WordPress 2.3 
cycle, to show how long the problem has been evolving. The problem was 
added in 2.2 when optimizations to the filter system broken all classes.

Much of the problem is that it relies heavily on the competence of the 
plugin developers in setting the reference to the object and in the 
ability to pull back the reference to that object.

Part of the problem also, is that you need a reference to the original 
object. If some plugin programmer does array(&$this, 'method'); then you 
need to access the object by finding and using the global that the 
plugin programmer used to call the constructor.

Say for instance someone did this:

function _my_plugin_init() {
     $my_class = new My_Class(); // Constructor sets hooks.
}

_my_plugin_init();

You would never have access to the original object instance as once the 
local scope goes away, access to $my_class will no longer be available. 
However, since the reference to $my_class will still be referenced by 
the plugin API, it will keep the plugin working. This leaves you without 
the ability to remove the plugin filter. With the fixes to the filter id 
system, it is impossible to recreate the object to remove the object.

If the plugin is a global, which unfortunately is the best case Michael, 
you should be able to do: remove_action('init', array(&$my_class, 
'method'));


On 8/5/2010 1:57 PM, Michael D Adams wrote:
> On Thu, Aug 5, 2010 at 11:21 AM, Andrew Nacin<wp at andrewnacin.com>  wrote:
>    
>> class my_class {
>>    function __construct() {
>>      add_action( 'init', array(&$this, 'init' ) );
>>    }
>>    function init() {}
>> }
>> $my_class_instance = new my_class;
>> remove_action( 'init', array( $my_class_instance, 'init' ) );
>>
>> This is generally why I always assign instantiations to a variable in my
>> plugins (versus simply calling `new myclass;`), that way I'm playing nice
>> with others and allowing another plugin to modify the callbacks I attach.
>>      
> Off topic: I have an irrational hatred of globals.  I'm on a twelve
> step program and everything.
>
> What I usually do is offer to plugins some static method on my classes
> to accomplish the same thing.  In a case like this where you're using
> my_class as a singleton, it's pretty straightforward.
>
> require 'wp-load.php';
>
> class My_Class { // Nacin should ucwords() his classes :)
>          static $instance;
>          static function&instance() {
>                  // You could use a static variable here instead
>                  if ( !self::$instance )
>                          new My_Class;
>                  return self::$instance;
>          }
>
>          function __construct() {
>                  self::$instance =&  $this;
>                  add_action( 'shutdown', array(&$this, 'hola' ) );
>          }
>
>          function hola() {
>                  die( "Hola.  If you see this, this example is broken.\n" );
>          }
> }
>
> My_Class::instance();
>
> function adios() {
>          remove_action( 'shutdown', array( My_Class::instance(), 'hola' ) );
> }
>
> adios();
>
>
> Static class methods are slow, though.
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>    


From wordpress at santosj.name  Thu Aug  5 23:50:38 2010
From: wordpress at santosj.name (Jacob Santos)
Date: Thu, 05 Aug 2010 18:50:38 -0500
Subject: [wp-hackers] Passing class methods by reference
In-Reply-To: <EAE48CFB-506E-4E96-81CF-94329BF98AD3@newclarity.net>
References: <AANLkTikMArVOoivjt=O6e6Q_Ep_x23zD0wVW_ZiKJkNq@mail.gmail.com>	<4C5ABAE7.30501@santosj.name>	<65E5AB70-EC4F-413E-8A28-253CCC805477@newclarity.net>	<AANLkTikPLzWiqP=k0iyHxV6inWdh3B_RJVV5_esNMcw=@mail.gmail.com>
	<EAE48CFB-506E-4E96-81CF-94329BF98AD3@newclarity.net>
Message-ID: <4C5B4E4E.9020002@santosj.name>

On 8/5/2010 1:51 PM, Mike Schinkel wrote:
> Thanks. So if a plugin did not create an instance then it's pretty 
> much not possible to remove the hooks they add, correct?

The simple answer: Yes. The real answer is that it makes it extremely 
difficult. You would have to manually go into the $wp_filter global and 
remove the instance and really any instance that matches that class name 
to be sure, which might be what you wanted to do anyway.

> Okay, so here comes another question tangentially related question.  I see a lot of people using classes for plugins and initializing them as plugins but try as I might I can't see the benefit of doing that over using static class methods.
>    

I have stated in the past that using array(&$this, 'method') was really 
bad, for performance, reference, and possible bugs it causes. However, 
many people swear by initializing plugins as it allows them to have 
multiple classes with different data assigned to them for them to 
reference. As for this reasoning, very rarely is it done first of all, 
and secondly, if that was the case, then best practices would dictate 
using a separate class and referencing that instead. The real reason is 
that it is easy and programmers are too lazy and, or ignorant of PHP and 
static methods to properly use them in a plugin.


> 1.) it only adds one global symbol, i.e. only the class name and not a global variable too.
>    

This is second only to functions in terms of speed as well.

> 2.) There's no benefit to using instances (that I've identified) when the methods are used for hooks; we only need a "singleton."
>    

Well, not a Singleton as technically you can do:

$first = new my_class();
$second = new my_class();

Not that it would do anything, but the Singleton pattern would prevent 
you from creating two instances of the same class.

> 3.) Using this pattern the plugin user can easily remove filters without me having (to remember to) define a variable in the global namespace.
>    

It would also prevent the majority of bugs that people would cringe over 
tracking down and attempting to fix.

> So, the questions are:
>
> 1.) Am I missing something here why it might be preferable to use an instance rather than a class?
>    

The reason it is preferable is that it is prettier to not use static 
methods. This preference depends on what you think about object purity. 
If you don't care, then either way is fine. It is possible to use the 
static method way in both PHP4 and PHP5, except that you can't define 
that a method is static and thus may be used as part of the object 
instance in PHP4. PHP5 will also throw eggs at you for not using static 
in the function definition.

> 2.) If I'm not missing something why have we not promoted the pattern above rather than the instance equivalent (other than it just not occurring to people?)
>    

I have promoted it since 2.3, but what do I know? Truthfully, it is not, 
nor should it ever be part of WordPress doctrine to tell plugin 
programmers how they should develop their plugins, unless it involves 
security, which this does not. It is an annoyance and nothing more.

Getting people to follow the pattern requires respected plugin 
programmers in the community to start using the pattern. The rest will 
follow as they pick it up.

I think for the longest time, people were following the terrible pattern 
found in the Automattic Widgets, where they were placing two functions 
in a single function to encapsulate the functions. It wasn't until I and 
a bug proved what I stated originally that it was a bad idea. Beginner 
programmers are adorable, are they not? They follow what the witness 
from developers who are popular and if those developers aren't the best 
and use practices not the best, then it is no wonder others follow a 
similar pattern.

If this email sounds harsh, it is because it is meant to be. Programmers 
(myself included) think that their code is great and rationalizes their 
code based on reasons that justify why their code is that way. Given the 
nature of coding, that if it solves a problem, then who cares how 
terrible. It is reasonable to assume that this problem will continue for 
a number of years. Until of course, the SPL function can be used and 
everyone can sleep soundly knowing that they'll be able to remove 
plugins that at least keep a global instance.

Jacob Santos

From dangayle at gmail.com  Fri Aug  6 00:13:52 2010
From: dangayle at gmail.com (Dan Gayle)
Date: Thu, 5 Aug 2010 17:13:52 -0700
Subject: [wp-hackers] Passing class methods by reference
In-Reply-To: <4C5B4E4E.9020002@santosj.name>
References: <AANLkTikMArVOoivjt=O6e6Q_Ep_x23zD0wVW_ZiKJkNq@mail.gmail.com>
	<4C5ABAE7.30501@santosj.name>
	<65E5AB70-EC4F-413E-8A28-253CCC805477@newclarity.net>
	<AANLkTikPLzWiqP=k0iyHxV6inWdh3B_RJVV5_esNMcw=@mail.gmail.com>
	<EAE48CFB-506E-4E96-81CF-94329BF98AD3@newclarity.net>
	<4C5B4E4E.9020002@santosj.name>
Message-ID: <AANLkTimfmOS2ERhjudG7A7nDLSayabve1VBKHAkpM0Ys@mail.gmail.com>

I hate to be a bugger, and I don't want to slow down an interesting
discussion, but I want to make sure that the answer to my main
question is that we should pass references to an instantiated object
method rather than pass simply pass the class method.

array(&$this, 'method') == good

array($this, 'method') == bad

Did I get that right?

From wordpress at santosj.name  Fri Aug  6 00:49:55 2010
From: wordpress at santosj.name (Jacob Santos)
Date: Thu, 5 Aug 2010 19:49:55 -0500
Subject: [wp-hackers] Passing class methods by reference
In-Reply-To: <AANLkTimfmOS2ERhjudG7A7nDLSayabve1VBKHAkpM0Ys@mail.gmail.com>
References: <AANLkTikMArVOoivjt=O6e6Q_Ep_x23zD0wVW_ZiKJkNq@mail.gmail.com>
	<4C5ABAE7.30501@santosj.name>
	<65E5AB70-EC4F-413E-8A28-253CCC805477@newclarity.net>
	<AANLkTikPLzWiqP=k0iyHxV6inWdh3B_RJVV5_esNMcw=@mail.gmail.com>
	<EAE48CFB-506E-4E96-81CF-94329BF98AD3@newclarity.net>
	<4C5B4E4E.9020002@santosj.name>
	<AANLkTimfmOS2ERhjudG7A7nDLSayabve1VBKHAkpM0Ys@mail.gmail.com>
Message-ID: <AANLkTimZsUvVVwoYB4GweXU5G-+-2gMbH6L+is8JjsUO@mail.gmail.com>

Yes.

On Thu, Aug 5, 2010 at 7:13 PM, Dan Gayle <dangayle at gmail.com> wrote:

> I hate to be a bugger, and I don't want to slow down an interesting
> discussion, but I want to make sure that the answer to my main
> question is that we should pass references to an instantiated object
> method rather than pass simply pass the class method.
>
> array(&$this, 'method') == good
>
> array($this, 'method') == bad
>
> Did I get that right?
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From erik.froese at gmail.com  Fri Aug  6 00:58:19 2010
From: erik.froese at gmail.com (Erik Froese)
Date: Thu, 5 Aug 2010 20:58:19 -0400
Subject: [wp-hackers] Showing unpublished posts to the public (best
	practices request)
Message-ID: <AANLkTim4Mkra4ew+qJLWDYaRPi4DkB9qB+5TqKNta6qU@mail.gmail.com>

Hey everyone,

This is my first time posting to wp-hackers. I've been on the list for
a very short time so I apologize if my terminology/etiquette is not
inline with the list. I've searched the archives for an answer but
came up empty handed.

I'm working on the Assignment Desk plugin with Daniel Bachhuber from
the Edit-Flow project. The goal of the AD plugin is to bring the
community into the virtual newsroom (aka Wordpress) and encourage
community participation and contribution. To that end we're using the
Edit-Flow plugin on WP 2.9.2 We cannot use 3.x since we're writing
this in conjunction of a commercial entity that hasn't yet scheduled
that upgrade (and probably won't for a good long while).

We're using Edit-Flow's custom post status functionality to mark story
ideas as pitches (Edit-Flow's custom status are stored in a term
taxonomy). Pitches are  unpublished posts that have yet to be assigned
to a user. We'd like to present a subset of these pitches to the
public so they can vote on them as well as volunteer to write them.

What's the best way to create these public page views? We were
thinking of hijacking a category to display them somehow. I've spent
most of my short WP plugin development time int he backend so I'm not
too savvy about manipulating the Loop and the public views.

Thanks for your help in advance,
Erik Froese

From =?UTF-8?B?wrXHjsyczI3Mo8WfzrnMpdGPzLLMo8yjzKXigKLEguKEk86yzKPMo8ylx47MnMyNzKPihJPOsA==?=  Fri Aug  6 01:12:31 2010
From: =?UTF-8?B?wrXHjsyczI3Mo8WfzrnMpdGPzLLMo8yjzKXigKLEguKEk86yzKPMo8ylx47MnMyNzKPihJPOsA==?= (=?UTF-8?B?wrXHjsyczI3Mo8WfzrnMpdGPzLLMo8yjzKXigKLEguKEk86yzKPMo8ylx47MnMyNzKPihJPOsA==?=)
Date: Fri, 6 Aug 2010 09:12:31 +0800
Subject: [wp-hackers] hi. y--k
Message-ID: <AANLkTinq6F7Qy5NgzgLyf+rZgV+=VQZbK1P08oqEUbwu@mail.gmail.com>

Hi,,
I find a good website, I would like to introduce it to you?It will
give you big surprise:excellent products,high quality? competitive
price. If you are free, please visit it:  www.frisec.org       . have
a nice day!  t--^

From mikeschinkel at newclarity.net  Fri Aug  6 01:52:32 2010
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Thu, 5 Aug 2010 21:52:32 -0400
Subject: [wp-hackers] Showing unpublished posts to the public (best
	practices request)
In-Reply-To: <AANLkTim4Mkra4ew+qJLWDYaRPi4DkB9qB+5TqKNta6qU@mail.gmail.com>
References: <AANLkTim4Mkra4ew+qJLWDYaRPi4DkB9qB+5TqKNta6qU@mail.gmail.com>
Message-ID: <23C6D26E-9573-45A7-AC37-A488F35B9D62@newclarity.net>

On Aug 5, 2010, at 8:58 PM, Erik Froese wrote:
> I'm working on the Assignment Desk plugin with Daniel Bachhuber from
> the Edit-Flow project. The goal of the AD plugin is to bring the
> community into the virtual newsroom (aka Wordpress) and encourage
> community participation and contribution. To that end we're using the
> Edit-Flow plugin on WP 2.9.2 We cannot use 3.x since we're writing
> this in conjunction of a commercial entity that hasn't yet scheduled
> that upgrade (and probably won't for a good long while).

When I heard about AD I was really excited.  Now to hear that it'll not be coded for WP3.0 is very depressing.  I know I'm not answering your question (I don't know a good answer nor I would) but if all possible I would lobby for them to upgrade as a critical path. Otherwise you'll probably be doing many things sub-optimally and you'll create legacy issues you would prefer not to create.  

I know that's probably not realistic but JMTCW.

-Mike



From erik.froese at gmail.com  Fri Aug  6 02:02:53 2010
From: erik.froese at gmail.com (Erik Froese)
Date: Thu, 5 Aug 2010 22:02:53 -0400
Subject: [wp-hackers] Showing unpublished posts to the public (best
	practices request)
In-Reply-To: <23C6D26E-9573-45A7-AC37-A488F35B9D62@newclarity.net>
References: <AANLkTim4Mkra4ew+qJLWDYaRPi4DkB9qB+5TqKNta6qU@mail.gmail.com>
	<23C6D26E-9573-45A7-AC37-A488F35B9D62@newclarity.net>
Message-ID: <AANLkTi=fhSLn-1Y3RGC=iyXmqQe6UEd1YV_rgeDb4d=h@mail.gmail.com>

We're with you Mike. We're doing all of our work with the 3.0 upgrade
in mind. The big guys upstairs are not going to let us slip 3.0 by
them just yet.

Right now we're focusing on getting all of the functionality to
include we want working. Once they're happy with it we'll probably
update it for 3.0 and only do bugfixes on a version for 2.9.2.

Erik

On Thu, Aug 5, 2010 at 9:52 PM, Mike Schinkel
<mikeschinkel at newclarity.net> wrote:
> On Aug 5, 2010, at 8:58 PM, Erik Froese wrote:
>> I'm working on the Assignment Desk plugin with Daniel Bachhuber from
>> the Edit-Flow project. The goal of the AD plugin is to bring the
>> community into the virtual newsroom (aka Wordpress) and encourage
>> community participation and contribution. To that end we're using the
>> Edit-Flow plugin on WP 2.9.2 We cannot use 3.x since we're writing
>> this in conjunction of a commercial entity that hasn't yet scheduled
>> that upgrade (and probably won't for a good long while).
>
> When I heard about AD I was really excited. ?Now to hear that it'll not be coded for WP3.0 is very depressing. ?I know I'm not answering your question (I don't know a good answer nor I would) but if all possible I would lobby for them to upgrade as a critical path. Otherwise you'll probably be doing many things sub-optimally and you'll create legacy issues you would prefer not to create.
>
> I know that's probably not realistic but JMTCW.
>
> -Mike
>
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From wp at andrewnacin.com  Fri Aug  6 02:05:24 2010
From: wp at andrewnacin.com (Andrew Nacin)
Date: Thu, 5 Aug 2010 22:05:24 -0400
Subject: [wp-hackers] Showing unpublished posts to the public (best
	practices request)
In-Reply-To: <AANLkTi=fhSLn-1Y3RGC=iyXmqQe6UEd1YV_rgeDb4d=h@mail.gmail.com>
References: <AANLkTim4Mkra4ew+qJLWDYaRPi4DkB9qB+5TqKNta6qU@mail.gmail.com> 
	<23C6D26E-9573-45A7-AC37-A488F35B9D62@newclarity.net>
	<AANLkTi=fhSLn-1Y3RGC=iyXmqQe6UEd1YV_rgeDb4d=h@mail.gmail.com>
Message-ID: <AANLkTimuVHEv0T=tGGFTiVnwrWzRC-=TjbHESoWydu8j@mail.gmail.com>

On Thu, Aug 5, 2010 at 10:02 PM, Erik Froese <erik.froese at gmail.com> wrote:

> We're with you Mike. We're doing all of our work with the 3.0 upgrade
> in mind. The big guys upstairs are not going to let us slip 3.0 by
> them just yet.
>
> Right now we're focusing on getting all of the functionality to
> include we want working. Once they're happy with it we'll probably
> update it for 3.0 and only do bugfixes on a version for 2.9.2.


Very simply, there will be features you simply can't code in 2.9.2.

I would work in reverse -- code for 3.0 and beyond, while gracefully
degrading to 2.9.2.

From mikeschinkel at newclarity.net  Fri Aug  6 03:33:37 2010
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Thu, 5 Aug 2010 23:33:37 -0400
Subject: [wp-hackers] How to avoid multiple calls to wp_get_object_terms
In-Reply-To: <AANLkTinjx1TxOnQMsG4coPbZKe6v9gboqwsFiCiYCXBa@mail.gmail.com>
References: <AANLkTinjx1TxOnQMsG4coPbZKe6v9gboqwsFiCiYCXBa@mail.gmail.com>
Message-ID: <966DB4B7-4C13-4C45-A6A7-B85CFEC79224@newclarity.net>

Can you past the code somewhere (gist, pastebin, etc.) so we can see what you are doing?

-Mike

On Aug 5, 2010, at 5:29 PM, Simon Blackbourn wrote:

> Hi
> 
> I've got a custom taxonomy (resource_types) associated with a custom post
> type (resource), and in my loop I'm using wp_get_object_terms to list the
> taxonomies each post is in:
> 
>    $types = wp_get_object_terms( $post->ID, 'resource_types' );
> 
> However, this causes a complex database query for every post in the loop:
> 
>    SELECT t.*, tt.*
>    FROM aaa_terms AS t
>    INNER JOIN aaa_term_taxonomy AS tt
>    ON tt.term_id = t.term_id
>    INNER JOIN aaa_term_relationships AS tr
>    ON tr.term_taxonomy_id = tt.term_taxonomy_id
>    WHERE tt.taxonomy IN ('resource_types')
>    AND tr.object_id IN (*POSTIDHERE*)
>    ORDER BY t.name ASC
> 
> I can see that WordPress executes a query earlier before the loop that is
> getting all this information anyway:
> 
>    SELECT t.*, tt.*, tr.object_id
>    FROM aaa_terms AS t
>    INNER JOIN aaa_term_taxonomy AS tt
>    ON tt.term_id = t.term_id
>    INNER JOIN aaa_term_relationships AS tr
>    ON tr.term_taxonomy_id = tt.term_taxonomy_id
>    WHERE tt.taxonomy IN ('resource_tags', 'resource_types')
>    AND tr.object_id IN (387, 249, 288, 279, 232, 253, 341, 228, 301, 395)
>    ORDER BY t.name ASC
> 
> What I can't figure out is if there is any way to avoid calling
> wp_get_object_terms on every post (maybe accessing the data from this
> earlier query somehow)?
> 
> Thanks
> Simon
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers


From scribu at gmail.com  Fri Aug  6 10:43:29 2010
From: scribu at gmail.com (scribu)
Date: Fri, 6 Aug 2010 13:43:29 +0300
Subject: [wp-hackers] How to avoid multiple calls to wp_get_object_terms
In-Reply-To: <966DB4B7-4C13-4C45-A6A7-B85CFEC79224@newclarity.net>
References: <AANLkTinjx1TxOnQMsG4coPbZKe6v9gboqwsFiCiYCXBa@mail.gmail.com>
	<966DB4B7-4C13-4C45-A6A7-B85CFEC79224@newclarity.net>
Message-ID: <AANLkTil2qXhrO8X9R7lYPU3IeAW7Kgcf95Y6U00bvPP_@mail.gmail.com>

You should use get_the_terms() instead, which checks the cache first.

-- 
http://scribu.net

From piemanek at gmail.com  Fri Aug  6 12:54:33 2010
From: piemanek at gmail.com (Simon Blackbourn)
Date: Fri, 6 Aug 2010 13:54:33 +0100
Subject: [wp-hackers] How to avoid multiple calls to wp_get_object_terms
In-Reply-To: <AANLkTil2qXhrO8X9R7lYPU3IeAW7Kgcf95Y6U00bvPP_@mail.gmail.com>
References: <AANLkTinjx1TxOnQMsG4coPbZKe6v9gboqwsFiCiYCXBa@mail.gmail.com>
	<966DB4B7-4C13-4C45-A6A7-B85CFEC79224@newclarity.net>
	<AANLkTil2qXhrO8X9R7lYPU3IeAW7Kgcf95Y6U00bvPP_@mail.gmail.com>
Message-ID: <AANLkTimYdL3HjZivOEHK3y_-Qc9aFRCZxTCX7suGWahw@mail.gmail.com>

> You should use get_the_terms() instead, which checks the cache first.
>
>
Easy when you know how! Thanks very much Scribu, it works perfectly.

From jimmy.roy at gmail.com  Fri Aug  6 14:10:33 2010
From: jimmy.roy at gmail.com (Jimmy Roy)
Date: Fri, 6 Aug 2010 22:10:33 +0800
Subject: [wp-hackers] wp3.0.1 - admin bug after import category
Message-ID: <AANLkTinMh1kLabae35k8nbi0+pk3L6sNVi_-+PQfNANE@mail.gmail.com>

hi all,
I just import all my data from a wp2.7.1 to a fresh installation of
wp3.01.1, everthing is fine except something strange in the category admin,
the child category are not display, but they are imported, when I add a new
post I can see all categories (parent + child), he bug is only in the
category page, any idea ?

another strange behaviour in category page: there are 2 pages but the second
page is empty.

I join some screenshot to explain.

Jimmy

From john at ikailo.com  Fri Aug  6 14:52:09 2010
From: john at ikailo.com (John Sessford)
Date: Fri, 6 Aug 2010 10:52:09 -0400
Subject: [wp-hackers] Allowing multiple plugins to hook into db.php
Message-ID: <AANLkTin-9Qoyz7R9WjU5aPqrwFXQ=vOcEciH=bg2i6yv@mail.gmail.com>

Just wanted to float this by the Hackers before putting any major effort
into it.

Db.php has an inherent issue, which is that only one plugin using the db.php
can be loaded at any given time.  The problem is that since a some of these
plugins have unique and/or different functions, it is hard to have them work
together without manually modifying db.php. Installing a new db plugin can
overwrite the existing db.php file, rendering existing plugins partialy
de-activated.

In an optimal situation, one plugin could create a new $wpdb class for
back-end-load sharing or for a database other than MySql. A separate caching
plugin could extend a $wpdb class to improve performance, while still
another could check the database and do some work prior to creating the
table vars.

The way I see it is two functions: add_db_hook($filename, $priority) and
remove_db_hook($filename). These functions would marshal the filenames into
an array stored in a text file such as "db_list.php", while "db.php" would
get the list and load each file sequentially.

This would allow more flexibility for users as to which db plugins they can
use and would promote better compatibility between these plugins. Plugin
authors will also have more control over their db.php code since they can
leave the file in their own plugin directory, resulting in only one copy of
the file and ensuring it is updated when the plugin is updated.

Thoughts?

John Sessford

From wordpress at santosj.name  Fri Aug  6 14:59:41 2010
From: wordpress at santosj.name (Jacob Santos)
Date: Fri, 6 Aug 2010 09:59:41 -0500
Subject: [wp-hackers] Allowing multiple plugins to hook into db.php
In-Reply-To: <AANLkTin-9Qoyz7R9WjU5aPqrwFXQ=vOcEciH=bg2i6yv@mail.gmail.com>
References: <AANLkTin-9Qoyz7R9WjU5aPqrwFXQ=vOcEciH=bg2i6yv@mail.gmail.com>
Message-ID: <AANLkTikXrQRPUVV7_zVC3M3CtTN2bD4fCCb1-R=yvXVZ@mail.gmail.com>

I once floated around the idea of an adapter model instead of replacing or
extending wpdb directly. If the idea is simply to add additional functions,
then implementing a call and including a class plugin model would make sense
as well.

The problem with my idea is that I don't believe the core devs would be up
for such a drastic refactoring of wpdb class.

Your idea might work, but the ticket one will not.

Jacob Santos

On Fri, Aug 6, 2010 at 9:52 AM, John Sessford <john at ikailo.com> wrote:

> Just wanted to float this by the Hackers before putting any major effort
> into it.
>
> Db.php has an inherent issue, which is that only one plugin using the
> db.php
> can be loaded at any given time.  The problem is that since a some of these
> plugins have unique and/or different functions, it is hard to have them
> work
> together without manually modifying db.php. Installing a new db plugin can
> overwrite the existing db.php file, rendering existing plugins partialy
> de-activated.
>
> In an optimal situation, one plugin could create a new $wpdb class for
> back-end-load sharing or for a database other than MySql. A separate
> caching
> plugin could extend a $wpdb class to improve performance, while still
> another could check the database and do some work prior to creating the
> table vars.
>
> The way I see it is two functions: add_db_hook($filename, $priority) and
> remove_db_hook($filename). These functions would marshal the filenames into
> an array stored in a text file such as "db_list.php", while "db.php" would
> get the list and load each file sequentially.
>
> This would allow more flexibility for users as to which db plugins they can
> use and would promote better compatibility between these plugins. Plugin
> authors will also have more control over their db.php code since they can
> leave the file in their own plugin directory, resulting in only one copy of
> the file and ensuring it is updated when the plugin is updated.
>
> Thoughts?
>
> John Sessford
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From devin at tayloegray.com  Fri Aug  6 18:24:03 2010
From: devin at tayloegray.com (Devin Dixon)
Date: Fri, 6 Aug 2010 14:24:03 -0400
Subject: [wp-hackers] Page Tags
Message-ID: <AANLkTikdtHOvfMreFzjNNvrL+QCmEqHbsZZy9=ibWCW6@mail.gmail.com>

Hey,

I have pages in Wordpress 3.01 and those pages have tags associated
with it. Now when I go to pull the tags out, it comes up empty. But I
can get the tags from custom post types, regular post, etc.


					
$posttags = get_the_tags(get_the_ID());
if ($posttags) {
echo 'Not Empty';
foreach($posttags as $tag) {
echo $tag->name . ' ';
}
}

Does anyone have any idea how to get the tags from pages and can those
tags be used to get other pages in a WP_Query?

From jason at blueluna.com  Fri Aug  6 20:10:36 2010
From: jason at blueluna.com (Jason LeVan)
Date: Fri, 6 Aug 2010 16:10:36 -0400
Subject: [wp-hackers] Page Tags
In-Reply-To: <AANLkTikdtHOvfMreFzjNNvrL+QCmEqHbsZZy9=ibWCW6@mail.gmail.com>
References: <AANLkTikdtHOvfMreFzjNNvrL+QCmEqHbsZZy9=ibWCW6@mail.gmail.com>
Message-ID: <AANLkTin-MMFVWFeeC4q3=QP9uQ1vhgJaQU9LFguUPRLa@mail.gmail.com>

Well, first off I suppose, how are you assigning tags to your pages? Pages
by default do not make use of tags or categories:
http://codex.wordpress.org/Pages#Pages_in_a_Nutshell

If you need to assign tags to pages, would it be more appropriate to use a
custom post type? Or perhaps to use the parent/child relationship inherent
in pages? It sounds like you need to display "related" pages, would it
perhaps make sense to display sibling pages?


On Fri, Aug 6, 2010 at 2:24 PM, Devin Dixon <devin at tayloegray.com> wrote:

> Hey,
>
> I have pages in Wordpress 3.01 and those pages have tags associated
> with it. Now when I go to pull the tags out, it comes up empty. But I
> can get the tags from custom post types, regular post, etc.
>
>
>
> $posttags = get_the_tags(get_the_ID());
> if ($posttags) {
> echo 'Not Empty';
> foreach($posttags as $tag) {
> echo $tag->name . ' ';
> }
> }
>
> Does anyone have any idea how to get the tags from pages and can those
> tags be used to get other pages in a WP_Query?
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>



-- 
???????
jason levan
BlueLuna

617.938.3944 x709
www.blueluna.com

From mikeschinkel at newclarity.net  Fri Aug  6 21:16:01 2010
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Fri, 6 Aug 2010 17:16:01 -0400
Subject: [wp-hackers] Passing class methods by reference
In-Reply-To: <AANLkTi=-Stop2MyZX_Ka9fiHJwtTZvutYgLy5ZWXb7uh@mail.gmail.com>
References: <AANLkTikMArVOoivjt=O6e6Q_Ep_x23zD0wVW_ZiKJkNq@mail.gmail.com>
	<4C5ABAE7.30501@santosj.name>
	<65E5AB70-EC4F-413E-8A28-253CCC805477@newclarity.net>
	<AANLkTikPLzWiqP=k0iyHxV6inWdh3B_RJVV5_esNMcw=@mail.gmail.com>
	<AANLkTi=-Stop2MyZX_Ka9fiHJwtTZvutYgLy5ZWXb7uh@mail.gmail.com>
Message-ID: <71644CA2-CB3B-44D3-B2B5-100DBAA2D1BD@newclarity.net>

On Aug 5, 2010, at 2:57 PM, Michael D Adams wrote:
> Static class methods are slow, though.

Hmm.    I was curious about this so decided to ask on StackOverflow and it doesn't seem to be the consensus. Maybe they are missing something?

	http://stackoverflow.com/questions/3418582/performance-of-singleton-class-instance-method-vs-static-class-method-in-php/

-Mike


From mda at blogwaffe.com  Fri Aug  6 21:20:21 2010
From: mda at blogwaffe.com (Michael D Adams)
Date: Fri, 6 Aug 2010 14:20:21 -0700
Subject: [wp-hackers] Passing class methods by reference
In-Reply-To: <71644CA2-CB3B-44D3-B2B5-100DBAA2D1BD@newclarity.net>
References: <AANLkTikMArVOoivjt=O6e6Q_Ep_x23zD0wVW_ZiKJkNq@mail.gmail.com> 
	<4C5ABAE7.30501@santosj.name>
	<65E5AB70-EC4F-413E-8A28-253CCC805477@newclarity.net> 
	<AANLkTikPLzWiqP=k0iyHxV6inWdh3B_RJVV5_esNMcw=@mail.gmail.com> 
	<AANLkTi=-Stop2MyZX_Ka9fiHJwtTZvutYgLy5ZWXb7uh@mail.gmail.com> 
	<71644CA2-CB3B-44D3-B2B5-100DBAA2D1BD@newclarity.net>
Message-ID: <AANLkTikRUZZnTO85t=t=o3msyFtxXwhOfbZ=W+oVifgH@mail.gmail.com>

On Fri, Aug 6, 2010 at 2:16 PM, Mike Schinkel
<mikeschinkel at newclarity.net> wrote:
> On Aug 5, 2010, at 2:57 PM, Michael D Adams wrote:
>> Static class methods are slow, though.
>
> Hmm. ? ?I was curious about this so decided to ask on StackOverflow and it doesn't seem to be the consensus. Maybe they are missing something?
>
> ? ? ? ?http://stackoverflow.com/questions/3418582/performance-of-singleton-class-instance-method-vs-static-class-method-in-php/

Sorry - I meant compared to straight functions.  The context (in my head) was

$object_i_can_use = My_Class::instance();
vs.
$object_i_can_use() = my_class_instance();

Where the former stores the as a static property or variable, and the
later accesses a previously created global.

I didn't actually benchmark that specific scenario, though, so I
probably shouldn't even have mentioned it :)

From mikeschinkel at newclarity.net  Fri Aug  6 21:25:55 2010
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Fri, 6 Aug 2010 17:25:55 -0400
Subject: [wp-hackers] Passing class methods by reference
In-Reply-To: <AANLkTikRUZZnTO85t=t=o3msyFtxXwhOfbZ=W+oVifgH@mail.gmail.com>
References: <AANLkTikMArVOoivjt=O6e6Q_Ep_x23zD0wVW_ZiKJkNq@mail.gmail.com>
	<4C5ABAE7.30501@santosj.name>
	<65E5AB70-EC4F-413E-8A28-253CCC805477@newclarity.net>
	<AANLkTikPLzWiqP=k0iyHxV6inWdh3B_RJVV5_esNMcw=@mail.gmail.com>
	<AANLkTi=-Stop2MyZX_Ka9fiHJwtTZvutYgLy5ZWXb7uh@mail.gmail.com>
	<71644CA2-CB3B-44D3-B2B5-100DBAA2D1BD@newclarity.net>
	<AANLkTikRUZZnTO85t=t=o3msyFtxXwhOfbZ=W+oVifgH@mail.gmail.com>
Message-ID: <2A9C0192-F78D-4B7A-BDA4-5B07ED0B0F08@newclarity.net>

On Aug 6, 2010, at 5:20 PM, Michael D Adams wrote:
> Sorry - I meant compared to straight functions.  The context (in my head) was
> 
> $object_i_can_use = My_Class::instance();
> vs.
> $object_i_can_use() = my_class_instance();
> 
> Where the former stores the as a static property or variable, and the
> later accesses a previously created global.
> 
> I didn't actually benchmark that specific scenario, though, so I
> probably shouldn't even have mentioned it :)

I guess the important question is, is the performance different significant enough to matter in the context of WordPress plugins?  IOW, just how much slower for a larger WordPress installation?  I dunno...

-Mike


From mda at blogwaffe.com  Fri Aug  6 21:29:24 2010
From: mda at blogwaffe.com (Michael D Adams)
Date: Fri, 6 Aug 2010 14:29:24 -0700
Subject: [wp-hackers] Passing class methods by reference
In-Reply-To: <2A9C0192-F78D-4B7A-BDA4-5B07ED0B0F08@newclarity.net>
References: <AANLkTikMArVOoivjt=O6e6Q_Ep_x23zD0wVW_ZiKJkNq@mail.gmail.com> 
	<4C5ABAE7.30501@santosj.name>
	<65E5AB70-EC4F-413E-8A28-253CCC805477@newclarity.net> 
	<AANLkTikPLzWiqP=k0iyHxV6inWdh3B_RJVV5_esNMcw=@mail.gmail.com> 
	<AANLkTi=-Stop2MyZX_Ka9fiHJwtTZvutYgLy5ZWXb7uh@mail.gmail.com> 
	<71644CA2-CB3B-44D3-B2B5-100DBAA2D1BD@newclarity.net>
	<AANLkTikRUZZnTO85t=t=o3msyFtxXwhOfbZ=W+oVifgH@mail.gmail.com> 
	<2A9C0192-F78D-4B7A-BDA4-5B07ED0B0F08@newclarity.net>
Message-ID: <AANLkTik3dSwQhp+OFKaaE67vMpO4++rrT79hp=9LvFV1@mail.gmail.com>

On Fri, Aug 6, 2010 at 2:25 PM, Mike Schinkel
<mikeschinkel at newclarity.net> wrote:
> On Aug 6, 2010, at 5:20 PM, Michael D Adams wrote:
>> Sorry - I meant compared to straight functions. ?The context (in my head) was
>>
>> $object_i_can_use = My_Class::instance();
>> vs.
>> $object_i_can_use() = my_class_instance();
>>
>> Where the former stores the as a static property or variable, and the
>> later accesses a previously created global.
>>
>> I didn't actually benchmark that specific scenario, though, so I
>> probably shouldn't even have mentioned it :)
>
> I guess the important question is, is the performance different significant enough to matter in the context of WordPress plugins?

I doubt it. (But there I go again saying things without benchmarking them.)

From scott at skcdev.com  Sat Aug  7 03:11:04 2010
From: scott at skcdev.com (Scott Kingsley Clark)
Date: Fri, 06 Aug 2010 22:11:04 -0500
Subject: [wp-hackers] register_activation_hook is acting funny
Message-ID: <4C5CCEC8.3010506@skcdev.com>

Maybe it's my code, or maybe something else is going on. I'm thinking 
something else is going on. Let me explain how my activation function 
works (code located in the plugin):

register_activation_hook(__FILE__,'my_activate');
function my_activate()
{
     $myfile_contents = file_get_contents(dirname(__FILE__).'/myfile.txt');
     update_option('my_option',$myfile_contents);
}

Now, first of all, if I remove that file_get_contents() and put the 
string directly into the $myfile_contents variable, all is well.

However, the second that file_get_contents() is added, I get a massive 
dump on my face:

Plugin could not be activated because it triggered a fatal error.

Fatal error: Cannot redeclare my_menu() (previously declared in 
/home/path/to/my/site/wp-content/plugins/my-plugin/my-plugin.php:16) in 
/home/path/to/my/site/wp-content/plugins/my-plugin/my-plugin.php on line 26

This is weird, as the activation is happening, it seems to some how be 
tripping the activation when it gets another file (whether using include 
or file_get_contents) and includes my plugin TWICE (or it seems to 
apparently from the error), so pretty stumped on this one.

Has anyone experienced an issue like this before?


Best Regards,

Scott Kingsley Clark
Developer / Consultant
SKC Development, LLC

------------------------------------
E-mail: scott at skcdev.com
Website: http://skcdev.com/
Phone: 214.233.4048
Fax: 214.260.1426

AIM / Yahoo / Skype: sc0ttkclark
Google Talk: sc0ttkclark at gmail.com
------------------------------------



From peter.westwood at ftwr.co.uk  Sat Aug  7 06:40:44 2010
From: peter.westwood at ftwr.co.uk (Peter Westwood)
Date: Sat, 7 Aug 2010 07:40:44 +0100
Subject: [wp-hackers] Allowing multiple plugins to hook into db.php
In-Reply-To: <AANLkTin-9Qoyz7R9WjU5aPqrwFXQ=vOcEciH=bg2i6yv@mail.gmail.com>
References: <AANLkTin-9Qoyz7R9WjU5aPqrwFXQ=vOcEciH=bg2i6yv@mail.gmail.com>
Message-ID: <0876D786-304A-4B52-A464-8419ADE928FF@ftwr.co.uk>


On 6 Aug 2010, at 15:52, John Sessford wrote:

> Just wanted to float this by the Hackers before putting any major effort
> into it.
> 
> Db.php has an inherent issue, which is that only one plugin using the db.php
> can be loaded at any given time.  The problem is that since a some of these
> plugins have unique and/or different functions, it is hard to have them work
> together without manually modifying db.php. Installing a new db plugin can
> overwrite the existing db.php file, rendering existing plugins partialy
> de-activated.
> 
> In an optimal situation, one plugin could create a new $wpdb class for
> back-end-load sharing or for a database other than MySql. A separate caching
> plugin could extend a $wpdb class to improve performance, while still
> another could check the database and do some work prior to creating the
> table vars.
> 
> The way I see it is two functions: add_db_hook($filename, $priority) and
> remove_db_hook($filename). These functions would marshal the filenames into
> an array stored in a text file such as "db_list.php", while "db.php" would
> get the list and load each file sequentially.
> 
> This would allow more flexibility for users as to which db plugins they can
> use and would promote better compatibility between these plugins. Plugin
> authors will also have more control over their db.php code since they can
> leave the file in their own plugin directory, resulting in only one copy of
> the file and ensuring it is updated when the plugin is updated.

I'm not sure how this would fly and how often it is really needed.

The way we currently implement this the single db.php (and single advanced-cache.php) are pulled in earlier than any plugin could configure anything with any of these hook functions you suggest.

If you want all these db plugins to interact they are likely going to have to have specific code in them to perform that interaction and I don't think this is something we need in core at the moment.

Cheers
-- 
Peter Westwood
http://blog.ftwr.co.uk | http://westi.wordpress.com
C53C F8FC 8796 8508 88D6 C950 54F4 5DCD A834 01C5


From banago at gmail.com  Sat Aug  7 10:32:53 2010
From: banago at gmail.com (Baki Goxhaj)
Date: Sat, 7 Aug 2010 12:32:53 +0200
Subject: [wp-hackers] Separate Comments of Custom Post Type
Message-ID: <AANLkTim0CBorJvjav84gi6fNq09+51ur2SWE83tk6aHM@mail.gmail.com>

Hi Fellow Hackers,

I'm trying to have a custom post type that will have comments, but I want
those comments to be separate form default comments and accessed through
another menu item. Is that possible? if yes, is there something I can look
at?

Kindly,

Baki Goxhaj
www.wplancer.com | www.banago.info | www.lintuts.com

From scribu at gmail.com  Sat Aug  7 12:37:49 2010
From: scribu at gmail.com (scribu)
Date: Sat, 7 Aug 2010 15:37:49 +0300
Subject: [wp-hackers] register_activation_hook is acting funny
In-Reply-To: <4C5CCEC8.3010506@skcdev.com>
References: <4C5CCEC8.3010506@skcdev.com>
Message-ID: <AANLkTinb4arcUYDP04eTDrw-NMuMPv9SFJgc20GHTKjh@mail.gmail.com>

On Sat, Aug 7, 2010 at 6:11 AM, Scott Kingsley Clark <scott at skcdev.com>wrote:

> Plugin could not be activated because it triggered a fatal error.
>
> Fatal error: Cannot redeclare my_menu() (previously declared in
> /home/path/to/my/site/wp-content/plugins/my-plugin/my-plugin.php:16) in
> /home/path/to/my/site/wp-content/plugins/my-plugin/my-plugin.php on line 26
>
> This is weird, as the activation is happening, it seems to some how be
> tripping the activation when it gets another file (whether using include or
> file_get_contents) and includes my plugin TWICE (or it seems to apparently
> from the error), so pretty stumped on this one.
>
> Has anyone experienced an issue like this before?
>

Yes, I got that kind of error several times and it was always caused by my
code. The problem is that I could never quite figure out what I was doing
wrong. Just trial and error.


-- 
http://scribu.net

From alexkoti at gmail.com  Sat Aug  7 14:39:56 2010
From: alexkoti at gmail.com (Alex Koti)
Date: Sat, 7 Aug 2010 11:39:56 -0300
Subject: [wp-hackers] Page Tags
In-Reply-To: <AANLkTin-MMFVWFeeC4q3=QP9uQ1vhgJaQU9LFguUPRLa@mail.gmail.com>
References: <AANLkTikdtHOvfMreFzjNNvrL+QCmEqHbsZZy9=ibWCW6@mail.gmail.com>
	<AANLkTin-MMFVWFeeC4q3=QP9uQ1vhgJaQU9LFguUPRLa@mail.gmail.com>
Message-ID: <AANLkTikJUMwfjxG8Hm2wqysXBj7VCa9aWkHwnSFx_sib@mail.gmail.com>

Hi,

> But I can get the tags from custom post types, regular post, etc.
echo get_the_term_list( $post->ID, 'post_tag', 'Not Empty', ', ', '.' );


> Well, first off I suppose, how are you assigning tags to your pages?

function register_page_tags(){
? ? ?register_taxonomy_for_object_type( 'post_tag', 'page' );
}
add_action('init', 'register_page_tags');



Alex Koti


2010/8/6 Jason LeVan <jason at blueluna.com>
>
> Well, first off I suppose, how are you assigning tags to your pages? Pages
> by default do not make use of tags or categories:
> http://codex.wordpress.org/Pages#Pages_in_a_Nutshell
>
> If you need to assign tags to pages, would it be more appropriate to use a
> custom post type? Or perhaps to use the parent/child relationship inherent
> in pages? It sounds like you need to display "related" pages, would it
> perhaps make sense to display sibling pages?
>
>
> On Fri, Aug 6, 2010 at 2:24 PM, Devin Dixon <devin at tayloegray.com> wrote:
>
> > Hey,
> >
> > I have pages in Wordpress 3.01 and those pages have tags associated
> > with it. Now when I go to pull the tags out, it comes up empty. But I
> > can get the tags from custom post types, regular post, etc.
> >
> >
> >
> > $posttags = get_the_tags(get_the_ID());
> > if ($posttags) {
> > echo 'Not Empty';
> > foreach($posttags as $tag) {
> > echo $tag->name . ' ';
> > }
> > }
> >
> > Does anyone have any idea how to get the tags from pages and can those
> > tags be used to get other pages in a WP_Query?
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers at lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> >
>
>
>
> --
> ???????
> jason levan
> BlueLuna
>
> 617.938.3944 x709
> www.blueluna.com
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

From wp-hackers at nicolaskuttler.de  Sat Aug  7 15:41:54 2010
From: wp-hackers at nicolaskuttler.de (Nicolas Kuttler)
Date: Sat, 7 Aug 2010 17:41:54 +0200
Subject: [wp-hackers] register_activation_hook is acting funny
In-Reply-To: <AANLkTinb4arcUYDP04eTDrw-NMuMPv9SFJgc20GHTKjh@mail.gmail.com>
References: <4C5CCEC8.3010506@skcdev.com>
	<AANLkTinb4arcUYDP04eTDrw-NMuMPv9SFJgc20GHTKjh@mail.gmail.com>
Message-ID: <20100807154154.GO25853@nicolaskuttler.de>

On Sat, Aug 07, 2010 at 03:37:49PM +0300, scribu wrote:
> On Sat, Aug 7, 2010 at 6:11 AM, Scott Kingsley Clark <scott at skcdev.com>wrote:
> 
> > Fatal error: Cannot redeclare my_menu() (previously declared in
> > /home/path/to/my/site/wp-content/plugins/my-plugin/my-plugin.php:16) in
> > /home/path/to/my/site/wp-content/plugins/my-plugin/my-plugin.php on line 26
> 
> Yes, I got that kind of error several times and it was always caused by my
> code. The problem is that I could never quite figure out what I was doing
> wrong. Just trial and error.

The only time I've seen this happen was while using an opcode cacher.

Nicolas

--
Nicolas Kuttler
wp at nkuttler.de

http://www.nkuttler.de
http://www.nicolaskuttler.de (deutsch)

From banago at gmail.com  Sat Aug  7 17:13:27 2010
From: banago at gmail.com (Baki Goxhaj)
Date: Sat, 7 Aug 2010 19:13:27 +0200
Subject: [wp-hackers] Separate Comments of Custom Post Type
In-Reply-To: <AANLkTim0CBorJvjav84gi6fNq09+51ur2SWE83tk6aHM@mail.gmail.com>
References: <AANLkTim0CBorJvjav84gi6fNq09+51ur2SWE83tk6aHM@mail.gmail.com>
Message-ID: <AANLkTimjirvUkDBHTJ9mSCFLd1Tz07XA3oqpfPyL2QgA@mail.gmail.com>

No ideas?

Kindly,

Baki Goxhaj
www.wplancer.com | www.banago.info | www.lintuts.com


On 7 August 2010 12:32, Baki Goxhaj <banago at gmail.com> wrote:

> Hi Fellow Hackers,
>
> I'm trying to have a custom post type that will have comments, but I want
> those comments to be separate form default comments and accessed through
> another menu item. Is that possible? if yes, is there something I can look
> at?
>
> Kindly,
>
> Baki Goxhaj
> www.wplancer.com | www.banago.info | www.lintuts.com
>

From paul at codehooligans.com  Sat Aug  7 18:30:09 2010
From: paul at codehooligans.com (Paul)
Date: Sat, 7 Aug 2010 14:30:09 -0400
Subject: [wp-hackers] Separate Comments of Custom Post Type
In-Reply-To: <AANLkTimjirvUkDBHTJ9mSCFLd1Tz07XA3oqpfPyL2QgA@mail.gmail.com>
References: <AANLkTim0CBorJvjav84gi6fNq09+51ur2SWE83tk6aHM@mail.gmail.com>
	<AANLkTimjirvUkDBHTJ9mSCFLd1Tz07XA3oqpfPyL2QgA@mail.gmail.com>
Message-ID: <B0B9F73A-84EE-44C0-9DB4-5056307B9E8C@codehooligans.com>

The following is just my opinion on a solution and may not be considered the best method at the time for adding your own comments menu option. I'm using a plane vanilla WP 3.0.1 setup. I have a custom post type 'products' registered. 

From what I can see this is easy or hard depending on your level of coding ability. 

Let's start with the first task. I'm going to use a project I'm currently working on as an example. In my project I've created a new post type 'product'. This is a simple eCommerce site. When you register a post type WP provides the default shell left nav section on wp-admin. This is the normal list products and add new products options. In order to add a new menu item to your custom post type section you need to hook into the 'admin_menu' action like the following

add_action( 'admin_menu', array(&$this,'add_product_subnav'));
function add_product_subnav()
{
	add_submenu_page( 'edit.php?post_type=product', 'Comments', 'Comments', 'manage_options', 
			'product_comments_menu', array(&$this, 'product_comments_menu') );		
}

function product_comments_menu()
{
	// Add code here to display the comments for your post type. 
}

Note the first argument of the add_submenu_page function. This post_type must match your new registered post type. For the add action I added this to the very bottom of my init function just after the call to register_post_type().

So at this point you have a new nav item on your post type menu. The nav item when clicked will call 'product_comments_menu function'. Here is where things get sort of ugly. As far as I can tell there is no easy way to filter the comments by post_type. For example I would expect there to be some method to filter the WHERE clause of the comments query. Nothing. Take a look at the /wp-admin/edit-comments.php code. you will basically want to copy most of this code into your version of 'product_comments_menu' function. 

In edit-comments.php around line 274 you will see the call to '_wp_get_comment_list'. This is where the list of comments is pulled in. I would add a foreach loop just after this and remove any items not matching your post type. Since the comment item structure contains the post_type value this should be pretty simple. Something like:

foreach($_comments as $idx => $comment)
{
	if ($comment=>post_type != "YOUR POST TYPE")
		unset($comments[$idx];
}

After the foreach $_comments should be just your post type comments. Again copy from the edit-comments.php code lines 386-411 to display the table. This should get your started though have not gone as far as editing a comment to see if things work correctly. 

Good luck. 

P-





> On 7 August 2010 12:32, Baki Goxhaj <banago at gmail.com> wrote:
> 
>> Hi Fellow Hackers,
>> 
>> I'm trying to have a custom post type that will have comments, but I want
>> those comments to be separate form default comments and accessed through
>> another menu item. Is that possible? if yes, is there something I can look
>> at?
>> 
>> Kindly,
>> 
>> Baki Goxhaj
>> www.wplancer.com | www.banago.info | www.lintuts.com
>> 
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers


From charles at cefm.ca  Sat Aug  7 18:54:08 2010
From: charles at cefm.ca (Charles Frees-Melvin)
Date: Sat, 7 Aug 2010 15:54:08 -0300
Subject: [wp-hackers] Separate Comments of Custom Post Type
In-Reply-To: <B0B9F73A-84EE-44C0-9DB4-5056307B9E8C@codehooligans.com>
References: <AANLkTim0CBorJvjav84gi6fNq09+51ur2SWE83tk6aHM@mail.gmail.com>
	<AANLkTimjirvUkDBHTJ9mSCFLd1Tz07XA3oqpfPyL2QgA@mail.gmail.com>
	<B0B9F73A-84EE-44C0-9DB4-5056307B9E8C@codehooligans.com>
Message-ID: <148B6068-7166-48AD-9DA8-D0DDA7D73257@cefm.ca>

Speaking off the top of my head not looking at the code, but with posts you can assign a post_status. With comments there are approved, moderation, trash and spam comment statuses. What if you were to create a post_type_approved and _moderation etc. Wordpress in theory would make editing pages for you that you can hook into for you.

--
Charles E. Frees-Melvin
charles at cefm.ca
www.cefm.ca
506-640-1007

Sent from my iPhone 3G

On 2010-08-07, at 15:30, Paul <paul at codehooligans.com> wrote:

> The following is just my opinion on a solution and may not be considered the best method at the time for adding your own comments menu option. I'm using a plane vanilla WP 3.0.1 setup. I have a custom post type 'products' registered. 
> 
> From what I can see this is easy or hard depending on your level of coding ability. 
> 
> Let's start with the first task. I'm going to use a project I'm currently working on as an example. In my project I've created a new post type 'product'. This is a simple eCommerce site. When you register a post type WP provides the default shell left nav section on wp-admin. This is the normal list products and add new products options. In order to add a new menu item to your custom post type section you need to hook into the 'admin_menu' action like the following
> 
> add_action( 'admin_menu', array(&$this,'add_product_subnav'));
> function add_product_subnav()
> {
>    add_submenu_page( 'edit.php?post_type=product', 'Comments', 'Comments', 'manage_options', 
>            'product_comments_menu', array(&$this, 'product_comments_menu') );        
> }
> 
> function product_comments_menu()
> {
>    // Add code here to display the comments for your post type. 
> }
> 
> Note the first argument of the add_submenu_page function. This post_type must match your new registered post type. For the add action I added this to the very bottom of my init function just after the call to register_post_type().
> 
> So at this point you have a new nav item on your post type menu. The nav item when clicked will call 'product_comments_menu function'. Here is where things get sort of ugly. As far as I can tell there is no easy way to filter the comments by post_type. For example I would expect there to be some method to filter the WHERE clause of the comments query. Nothing. Take a look at the /wp-admin/edit-comments.php code. you will basically want to copy most of this code into your version of 'product_comments_menu' function. 
> 
> In edit-comments.php around line 274 you will see the call to '_wp_get_comment_list'. This is where the list of comments is pulled in. I would add a foreach loop just after this and remove any items not matching your post type. Since the comment item structure contains the post_type value this should be pretty simple. Something like:
> 
> foreach($_comments as $idx => $comment)
> {
>    if ($comment=>post_type != "YOUR POST TYPE")
>        unset($comments[$idx];
> }
> 
> After the foreach $_comments should be just your post type comments. Again copy from the edit-comments.php code lines 386-411 to display the table. This should get your started though have not gone as far as editing a comment to see if things work correctly. 
> 
> Good luck. 
> 
> P-
> 
> 
> 
> 
> 
>> On 7 August 2010 12:32, Baki Goxhaj <banago at gmail.com> wrote:
>> 
>>> Hi Fellow Hackers,
>>> 
>>> I'm trying to have a custom post type that will have comments, but I want
>>> those comments to be separate form default comments and accessed through
>>> another menu item. Is that possible? if yes, is there something I can look
>>> at?
>>> 
>>> Kindly,
>>> 
>>> Baki Goxhaj
>>> www.wplancer.com | www.banago.info | www.lintuts.com
>>> 
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
> 
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

From mikeschinkel at newclarity.net  Sat Aug  7 19:40:14 2010
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Sat, 7 Aug 2010 15:40:14 -0400
Subject: [wp-hackers] Separate Comments of Custom Post Type
In-Reply-To: <B0B9F73A-84EE-44C0-9DB4-5056307B9E8C@codehooligans.com>
References: <AANLkTim0CBorJvjav84gi6fNq09+51ur2SWE83tk6aHM@mail.gmail.com>
	<AANLkTimjirvUkDBHTJ9mSCFLd1Tz07XA3oqpfPyL2QgA@mail.gmail.com>
	<B0B9F73A-84EE-44C0-9DB4-5056307B9E8C@codehooligans.com>
Message-ID: <33F55162-9BE6-4918-AAB7-F706988BB8F5@newclarity.net>

On Aug 7, 2010, at 2:30 PM, Paul wrote:
> So at this point you have a new nav item on your post type menu. The nav item when clicked will call 'product_comments_menu function'. Here is where things get sort of ugly. As far as I can tell there is no easy way to filter the comments by post_type. For example I would expect there to be some method to filter the WHERE clause of the comments query. Nothing. Take a look at the /wp-admin/edit-comments.php code. you will basically want to copy most of this code into your version of 'product_comments_menu' function. 

Actually, the following works (and the code below is packaged as a plugin here: http://gist.github.com/513084):

add_action('query', 'hook_to_filter_comment_admin_by_post_type');
function hook_to_filter_comment_admin_by_post_type($sql) {
	global $pagenow;
	if ($pagenow=='edit-comments.php' &&
			!empty($_GET['post_type']) && 
			post_type_exists($_GET['post_type']) &&
			preg_match('#^SELECT \* FROM wp_comments c#',$sql)) {
		$sql = str_replace(' WHERE '," WHERE p.post_type='{$_GET['post_type']}' AND ",$sql);
	}
	return $sql;
}

Of course modifying the $sql works in most cases but occasionally it conflicts with another hook so while using the above in the short term he could create a trac ticket to lobby for adding post_type filtering into edit-comments.php or at the very least ask for a filter on the return value of _wp_get_comment_list().

With the above hook Baki can simply pass the "post_type" on the edit-comments.php when setting up his admin menu as you described instead of creating a "product_comments_menu" function like so:

http://example.com/wp-admin/edit-comments.php?post_type=movie

Here's the hook to add a "Comments" menu option to each post type's admin menu:

add_action('admin_menu', 'hook_to_add_comment_admin_menu_option_for_each_post_type');
function hook_to_add_comment_admin_menu_option_for_each_post_type() {
	$post_types = apply_filters('comment_admin_menu_post_types',get_post_types(array('public'=>true,'show_ui'=>true)));
	foreach($post_types as $post_type) {
		if ($post_type!='post') // Don't do for Posts, they already gota one! 
			add_submenu_page("edit.php?post_type={$post_type}",__('Comments'),__('Comments'),'moderate_comments',"edit-comments.php?post_type={$post_type}" );
	}
}

Note that it adds it's own filter "comment_admin_menu_post_types" so that someone using this can control via the hook in their own theme's function which post types get admin menus for Comments.  So if the two post_types you want comments for are "Movie" and "Actor" then this stored in the theme's functions.php file would cause only the menus for those post types to get a Comment option:

add_action('comment_admin_menu_post_types', 'my_comment_admin_menu_post_types');
function my_comment_admin_menu_post_types($post_types) {
	return array('movie','actor');
}

Again, here it is as a plugin:

http://gist.github.com/513084

Hope this helps. 


-Mike


From paul at codehooligans.com  Sat Aug  7 20:12:01 2010
From: paul at codehooligans.com (Paul)
Date: Sat, 7 Aug 2010 16:12:01 -0400
Subject: [wp-hackers] Separate Comments of Custom Post Type
In-Reply-To: <33F55162-9BE6-4918-AAB7-F706988BB8F5@newclarity.net>
References: <AANLkTim0CBorJvjav84gi6fNq09+51ur2SWE83tk6aHM@mail.gmail.com>
	<AANLkTimjirvUkDBHTJ9mSCFLd1Tz07XA3oqpfPyL2QgA@mail.gmail.com>
	<B0B9F73A-84EE-44C0-9DB4-5056307B9E8C@codehooligans.com>
	<33F55162-9BE6-4918-AAB7-F706988BB8F5@newclarity.net>
Message-ID: <17ED1724-1CE4-41D8-BEEB-143B731E6213@codehooligans.com>

Freakin Awesome Mike!

P-

On Aug 7, 2010, at 3:40 PM, Mike Schinkel wrote:

> On Aug 7, 2010, at 2:30 PM, Paul wrote:
>> So at this point you have a new nav item on your post type menu. The nav item when clicked will call 'product_comments_menu function'. Here is where things get sort of ugly. As far as I can tell there is no easy way to filter the comments by post_type. For example I would expect there to be some method to filter the WHERE clause of the comments query. Nothing. Take a look at the /wp-admin/edit-comments.php code. you will basically want to copy most of this code into your version of 'product_comments_menu' function. 
> 
> Actually, the following works (and the code below is packaged as a plugin here: http://gist.github.com/513084):
> 
> add_action('query', 'hook_to_filter_comment_admin_by_post_type');
> function hook_to_filter_comment_admin_by_post_type($sql) {
> 	global $pagenow;
> 	if ($pagenow=='edit-comments.php' &&
> 			!empty($_GET['post_type']) && 
> 			post_type_exists($_GET['post_type']) &&
> 			preg_match('#^SELECT \* FROM wp_comments c#',$sql)) {
> 		$sql = str_replace(' WHERE '," WHERE p.post_type='{$_GET['post_type']}' AND ",$sql);
> 	}
> 	return $sql;
> }
> 
> Of course modifying the $sql works in most cases but occasionally it conflicts with another hook so while using the above in the short term he could create a trac ticket to lobby for adding post_type filtering into edit-comments.php or at the very least ask for a filter on the return value of _wp_get_comment_list().
> 
> With the above hook Baki can simply pass the "post_type" on the edit-comments.php when setting up his admin menu as you described instead of creating a "product_comments_menu" function like so:
> 
> http://example.com/wp-admin/edit-comments.php?post_type=movie
> 
> Here's the hook to add a "Comments" menu option to each post type's admin menu:
> 
> add_action('admin_menu', 'hook_to_add_comment_admin_menu_option_for_each_post_type');
> function hook_to_add_comment_admin_menu_option_for_each_post_type() {
> 	$post_types = apply_filters('comment_admin_menu_post_types',get_post_types(array('public'=>true,'show_ui'=>true)));
> 	foreach($post_types as $post_type) {
> 		if ($post_type!='post') // Don't do for Posts, they already gota one! 
> 			add_submenu_page("edit.php?post_type={$post_type}",__('Comments'),__('Comments'),'moderate_comments',"edit-comments.php?post_type={$post_type}" );
> 	}
> }
> 
> Note that it adds it's own filter "comment_admin_menu_post_types" so that someone using this can control via the hook in their own theme's function which post types get admin menus for Comments.  So if the two post_types you want comments for are "Movie" and "Actor" then this stored in the theme's functions.php file would cause only the menus for those post types to get a Comment option:
> 
> add_action('comment_admin_menu_post_types', 'my_comment_admin_menu_post_types');
> function my_comment_admin_menu_post_types($post_types) {
> 	return array('movie','actor');
> }
> 
> Again, here it is as a plugin:
> 
> http://gist.github.com/513084
> 
> Hope this helps. 
> 
> 
> -Mike
> 
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers


From deadowlsurvivor at gmail.com  Sat Aug  7 23:17:58 2010
From: deadowlsurvivor at gmail.com (Jacob Beauregard)
Date: Sat, 7 Aug 2010 19:17:58 -0400
Subject: [wp-hackers] Categories as Post Types
Message-ID: <AANLkTin1XDj2AjP03yP0GYZYyg+qOpp6Up6REA=caz6D@mail.gmail.com>

One of the things that surprised me when I started fooling around with
my own first Wordpress installation is that categories didn't take
custom fields. In my opinion, it would be useful for categories to be
a post type.

My use case: There is a post type of "Program" at a university.
Programs have courses. There is also a post type "Course," which is
categorized in a "Program" taxonomy. There is (practically) a
one-to-one correlation between the Program post type and the Program
taxonomy categories. It would be useful to have the "Program"
categories be their own post type (able to set custom fields, etc).

From wordpress at santosj.name  Sat Aug  7 23:25:57 2010
From: wordpress at santosj.name (Jacob Santos)
Date: Sat, 7 Aug 2010 18:25:57 -0500
Subject: [wp-hackers] Passing class methods by reference
In-Reply-To: <AANLkTik3dSwQhp+OFKaaE67vMpO4++rrT79hp=9LvFV1@mail.gmail.com>
References: <AANLkTikMArVOoivjt=O6e6Q_Ep_x23zD0wVW_ZiKJkNq@mail.gmail.com>
	<4C5ABAE7.30501@santosj.name>
	<65E5AB70-EC4F-413E-8A28-253CCC805477@newclarity.net>
	<AANLkTikPLzWiqP=k0iyHxV6inWdh3B_RJVV5_esNMcw=@mail.gmail.com>
	<AANLkTi=-Stop2MyZX_Ka9fiHJwtTZvutYgLy5ZWXb7uh@mail.gmail.com>
	<71644CA2-CB3B-44D3-B2B5-100DBAA2D1BD@newclarity.net>
	<AANLkTikRUZZnTO85t=t=o3msyFtxXwhOfbZ=W+oVifgH@mail.gmail.com>
	<2A9C0192-F78D-4B7A-BDA4-5B07ED0B0F08@newclarity.net>
	<AANLkTik3dSwQhp+OFKaaE67vMpO4++rrT79hp=9LvFV1@mail.gmail.com>
Message-ID: <AANLkTik9-K4+Hr5PMD6SHR21k3afNgSUH4eCm02t337X@mail.gmail.com>

I think the point is that both static method and functions are faster than
dynamic referencing of the method.

In truth, the benchmarks I've seen is not worth using one over the other
based on performance alone. Now I'm not quite sure what the issue is,
accessing variables is different from the overhead incurred with creating
the local scope of the method and function. That overhead is close enough to
not even matter.

There is a benchmark online between accessing globals, static class
properties, class properties, class constants, $this, self, etc. It might be
a look. However, 5.3 might have changed the speed somewhat. From what I can
remember, globals would be quickest, since $GLOBAL is a straight lookup
stored in the PHP space. Accessing any class requires accessing the class
memory space which will incur a bit of overhead.


On Fri, Aug 6, 2010 at 4:29 PM, Michael D Adams <mda at blogwaffe.com> wrote:

> On Fri, Aug 6, 2010 at 2:25 PM, Mike Schinkel
> <mikeschinkel at newclarity.net> wrote:
> > On Aug 6, 2010, at 5:20 PM, Michael D Adams wrote:
> >> Sorry - I meant compared to straight functions.  The context (in my
> head) was
> >>
> >> $object_i_can_use = My_Class::instance();
> >> vs.
> >> $object_i_can_use() = my_class_instance();
> >>
> >> Where the former stores the as a static property or variable, and the
> >> later accesses a previously created global.
> >>
> >> I didn't actually benchmark that specific scenario, though, so I
> >> probably shouldn't even have mentioned it :)
> >
> > I guess the important question is, is the performance different
> significant enough to matter in the context of WordPress plugins?
>
> I doubt it. (But there I go again saying things without benchmarking them.)
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From scribu at gmail.com  Sat Aug  7 23:41:46 2010
From: scribu at gmail.com (scribu)
Date: Sun, 8 Aug 2010 02:41:46 +0300
Subject: [wp-hackers] Categories as Post Types
In-Reply-To: <AANLkTin1XDj2AjP03yP0GYZYyg+qOpp6Up6REA=caz6D@mail.gmail.com>
References: <AANLkTin1XDj2AjP03yP0GYZYyg+qOpp6Up6REA=caz6D@mail.gmail.com>
Message-ID: <AANLkTimjCA=K7OAYAzUoXbcxA_isQkT2F1oq9PZ-p9_p@mail.gmail.com>

Try one of the plugins that provide this:

http://wordpress.org/extend/plugins/simple-term-meta/
http://wordpress.org/extend/plugins/taxonomy-metadata/
http://wordpress.org/extend/plugins/meta-for-taxonomies/


-- 
http://scribu.net

From mikeschinkel at newclarity.net  Sun Aug  8 03:19:17 2010
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Sat, 7 Aug 2010 23:19:17 -0400
Subject: [wp-hackers] Categories as Post Types
In-Reply-To: <AANLkTin1XDj2AjP03yP0GYZYyg+qOpp6Up6REA=caz6D@mail.gmail.com>
References: <AANLkTin1XDj2AjP03yP0GYZYyg+qOpp6Up6REA=caz6D@mail.gmail.com>
Message-ID: <8A1E0867-96C6-4EF1-9230-54CFF73267BD@newclarity.net>

On Aug 7, 2010, at 7:17 PM, Jacob Beauregard wrote:
> One of the things that surprised me when I started fooling around with
> my own first Wordpress installation is that categories didn't take
> custom fields. In my opinion, it would be useful for categories to be
> a post type.


Yep, agreed.  Made the same suggestion in April[1] and May[2].

-Mike

[1] http://lists.automattic.com/pipermail/wp-hackers/2010-April/031593.html
[2] http://lists.automattic.com/pipermail/wp-hackers/2010-May/032232.html


From mikel at mahunneysfarm.com  Sun Aug  8 03:26:41 2010
From: mikel at mahunneysfarm.com (Mikel)
Date: Sun, 8 Aug 2010 13:26:41 +1000
Subject: [wp-hackers] Using the_widget() to get a specific instance of a
	multi-instance widget
Message-ID: <A6868A32-6A24-4667-9676-904C101F7777@mahunneysfarm.com>

Hi,


Trying to use the_widget() to access a specific instance of a multi-instance widget and failing miserably.

Have tried by title and fiddling with variations on array(number=> x) for the $instance parameter but 
multiple sidebars is the only way I can get this running successfully with the WP Text Widget.

Any help with this would be appreciated.


Many thanks in advance,


Mikel

From likethegoddess at gmail.com  Sun Aug  8 03:33:13 2010
From: likethegoddess at gmail.com (Diana Thompson)
Date: Sat, 7 Aug 2010 20:33:13 -0700
Subject: [wp-hackers] Removing WordPress Multisite data
Message-ID: <AANLkTimOnuGUBniO+BG1JBDDj=Y+WL=ipi9MKGojtMm-@mail.gmail.com>

In trying to fully remove a Multisite Network, I found this thread
http://www.listware.net/201007/wordpress-hackers/67557-wp-hackers-removing-wordpress-multisite-data.html

I dropped the six tables indicated in Andrew Nacin's response, the seventh
not present in my install. Although this removed the Network (thanks,
Andrew), WP still knows there previously was a Network and will allow only a
sub-domain Multisite. The web host used doesn't allow wildcard subdomains,
so I'll need to keep sub-directory structure.

On wp-admin/network.php under Network Details:

Sub-domain Install: Because your install is not new, the sites in your
WordPress network must use sub-domains. *The main site in a sub-directory
install will need to use a modified permalink structure, potentially
breaking existing links.*

Any ideas?

Diana

-- 
Diana Thompson
like the goddess design
www.likethegoddess.com

From navjotjsingh at gmail.com  Sun Aug  8 03:37:01 2010
From: navjotjsingh at gmail.com (Navjot Singh)
Date: Sun, 8 Aug 2010 09:07:01 +0530
Subject: [wp-hackers] Removing WordPress Multisite data
In-Reply-To: <AANLkTimOnuGUBniO+BG1JBDDj=Y+WL=ipi9MKGojtMm-@mail.gmail.com>
References: <AANLkTimOnuGUBniO+BG1JBDDj=Y+WL=ipi9MKGojtMm-@mail.gmail.com>
Message-ID: <AANLkTim1_uicvttoWXOCsduATzk0CZaDoJpVzPx6zD02@mail.gmail.com>

Check this post
http://blog.ashfame.com/2010/07/remove-wordpress-multisite-data/ for the
method to remove MultiSite Data completely.

Regards
Navjot Singh

On Sun, Aug 8, 2010 at 9:03 AM, Diana Thompson <likethegoddess at gmail.com>wrote:

> In trying to fully remove a Multisite Network, I found this thread
>
> http://www.listware.net/201007/wordpress-hackers/67557-wp-hackers-removing-wordpress-multisite-data.html
>
> I dropped the six tables indicated in Andrew Nacin's response, the seventh
> not present in my install. Although this removed the Network (thanks,
> Andrew), WP still knows there previously was a Network and will allow only
> a
> sub-domain Multisite. The web host used doesn't allow wildcard subdomains,
> so I'll need to keep sub-directory structure.
>
> On wp-admin/network.php under Network Details:
>
> Sub-domain Install: Because your install is not new, the sites in your
> WordPress network must use sub-domains. *The main site in a sub-directory
> install will need to use a modified permalink structure, potentially
> breaking existing links.*
>
> Any ideas?
>
> Diana
>
> --
> Diana Thompson
> like the goddess design
> www.likethegoddess.com
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From banago at gmail.com  Sun Aug  8 10:10:17 2010
From: banago at gmail.com (Baki Goxhaj)
Date: Sun, 8 Aug 2010 12:10:17 +0200
Subject: [wp-hackers] Separate Comments of Custom Post Type
In-Reply-To: <17ED1724-1CE4-41D8-BEEB-143B731E6213@codehooligans.com>
References: <AANLkTim0CBorJvjav84gi6fNq09+51ur2SWE83tk6aHM@mail.gmail.com>
	<AANLkTimjirvUkDBHTJ9mSCFLd1Tz07XA3oqpfPyL2QgA@mail.gmail.com>
	<B0B9F73A-84EE-44C0-9DB4-5056307B9E8C@codehooligans.com>
	<33F55162-9BE6-4918-AAB7-F706988BB8F5@newclarity.net>
	<17ED1724-1CE4-41D8-BEEB-143B731E6213@codehooligans.com>
Message-ID: <AANLkTi=L7gQTszOe7MO29__P4G2n66-4gBfowfajJzrr@mail.gmail.com>

Paul thanks very much indeed - I'm going to try that now.

Kindly,

Baki Goxhaj
www.wplancer.com | www.banago.info | www.lintuts.com


On 7 August 2010 22:12, Paul <paul at codehooligans.com> wrote:

> Freakin Awesome Mike!
>
> P-
>
> On Aug 7, 2010, at 3:40 PM, Mike Schinkel wrote:
>
> > On Aug 7, 2010, at 2:30 PM, Paul wrote:
> >> So at this point you have a new nav item on your post type menu. The nav
> item when clicked will call 'product_comments_menu function'. Here is where
> things get sort of ugly. As far as I can tell there is no easy way to filter
> the comments by post_type. For example I would expect there to be some
> method to filter the WHERE clause of the comments query. Nothing. Take a
> look at the /wp-admin/edit-comments.php code. you will basically want to
> copy most of this code into your version of 'product_comments_menu'
> function.
> >
> > Actually, the following works (and the code below is packaged as a plugin
> here: http://gist.github.com/513084):
> >
> > add_action('query', 'hook_to_filter_comment_admin_by_post_type');
> > function hook_to_filter_comment_admin_by_post_type($sql) {
> >       global $pagenow;
> >       if ($pagenow=='edit-comments.php' &&
> >                       !empty($_GET['post_type']) &&
> >                       post_type_exists($_GET['post_type']) &&
> >                       preg_match('#^SELECT \* FROM wp_comments c#',$sql))
> {
> >               $sql = str_replace(' WHERE '," WHERE
> p.post_type='{$_GET['post_type']}' AND ",$sql);
> >       }
> >       return $sql;
> > }
> >
> > Of course modifying the $sql works in most cases but occasionally it
> conflicts with another hook so while using the above in the short term he
> could create a trac ticket to lobby for adding post_type filtering into
> edit-comments.php or at the very least ask for a filter on the return value
> of _wp_get_comment_list().
> >
> > With the above hook Baki can simply pass the "post_type" on the
> edit-comments.php when setting up his admin menu as you described instead of
> creating a "product_comments_menu" function like so:
> >
> > http://example.com/wp-admin/edit-comments.php?post_type=movie
> >
> > Here's the hook to add a "Comments" menu option to each post type's admin
> menu:
> >
> > add_action('admin_menu',
> 'hook_to_add_comment_admin_menu_option_for_each_post_type');
> > function hook_to_add_comment_admin_menu_option_for_each_post_type() {
> >       $post_types =
> apply_filters('comment_admin_menu_post_types',get_post_types(array('public'=>true,'show_ui'=>true)));
> >       foreach($post_types as $post_type) {
> >               if ($post_type!='post') // Don't do for Posts, they already
> gota one!
> >
> add_submenu_page("edit.php?post_type={$post_type}",__('Comments'),__('Comments'),'moderate_comments',"edit-comments.php?post_type={$post_type}"
> );
> >       }
> > }
> >
> > Note that it adds it's own filter "comment_admin_menu_post_types" so that
> someone using this can control via the hook in their own theme's function
> which post types get admin menus for Comments.  So if the two post_types you
> want comments for are "Movie" and "Actor" then this stored in the theme's
> functions.php file would cause only the menus for those post types to get a
> Comment option:
> >
> > add_action('comment_admin_menu_post_types',
> 'my_comment_admin_menu_post_types');
> > function my_comment_admin_menu_post_types($post_types) {
> >       return array('movie','actor');
> > }
> >
> > Again, here it is as a plugin:
> >
> > http://gist.github.com/513084
> >
> > Hope this helps.
> >
> >
> > -Mike
> >
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers at lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From banago at gmail.com  Sun Aug  8 10:10:37 2010
From: banago at gmail.com (Baki Goxhaj)
Date: Sun, 8 Aug 2010 12:10:37 +0200
Subject: [wp-hackers] Separate Comments of Custom Post Type
In-Reply-To: <AANLkTi=L7gQTszOe7MO29__P4G2n66-4gBfowfajJzrr@mail.gmail.com>
References: <AANLkTim0CBorJvjav84gi6fNq09+51ur2SWE83tk6aHM@mail.gmail.com>
	<AANLkTimjirvUkDBHTJ9mSCFLd1Tz07XA3oqpfPyL2QgA@mail.gmail.com>
	<B0B9F73A-84EE-44C0-9DB4-5056307B9E8C@codehooligans.com>
	<33F55162-9BE6-4918-AAB7-F706988BB8F5@newclarity.net>
	<17ED1724-1CE4-41D8-BEEB-143B731E6213@codehooligans.com>
	<AANLkTi=L7gQTszOe7MO29__P4G2n66-4gBfowfajJzrr@mail.gmail.com>
Message-ID: <AANLkTikLa+dvEpUd2ZCQye2ocgTy9jKJJB4Rp7F6oqzf@mail.gmail.com>

I mean Thanks Mike :)

Kindly,

Baki Goxhaj
www.wplancer.com | www.banago.info | www.lintuts.com


On 8 August 2010 12:10, Baki Goxhaj <banago at gmail.com> wrote:

> Paul thanks very much indeed - I'm going to try that now.
>
>
> Kindly,
>
> Baki Goxhaj
> www.wplancer.com | www.banago.info | www.lintuts.com
>
>
> On 7 August 2010 22:12, Paul <paul at codehooligans.com> wrote:
>
>> Freakin Awesome Mike!
>>
>> P-
>>
>> On Aug 7, 2010, at 3:40 PM, Mike Schinkel wrote:
>>
>> > On Aug 7, 2010, at 2:30 PM, Paul wrote:
>> >> So at this point you have a new nav item on your post type menu. The
>> nav item when clicked will call 'product_comments_menu function'. Here is
>> where things get sort of ugly. As far as I can tell there is no easy way to
>> filter the comments by post_type. For example I would expect there to be
>> some method to filter the WHERE clause of the comments query. Nothing. Take
>> a look at the /wp-admin/edit-comments.php code. you will basically want to
>> copy most of this code into your version of 'product_comments_menu'
>> function.
>> >
>> > Actually, the following works (and the code below is packaged as a
>> plugin here: http://gist.github.com/513084):
>> >
>> > add_action('query', 'hook_to_filter_comment_admin_by_post_type');
>> > function hook_to_filter_comment_admin_by_post_type($sql) {
>> >       global $pagenow;
>> >       if ($pagenow=='edit-comments.php' &&
>> >                       !empty($_GET['post_type']) &&
>> >                       post_type_exists($_GET['post_type']) &&
>> >                       preg_match('#^SELECT \* FROM wp_comments
>> c#',$sql)) {
>> >               $sql = str_replace(' WHERE '," WHERE
>> p.post_type='{$_GET['post_type']}' AND ",$sql);
>> >       }
>> >       return $sql;
>> > }
>> >
>> > Of course modifying the $sql works in most cases but occasionally it
>> conflicts with another hook so while using the above in the short term he
>> could create a trac ticket to lobby for adding post_type filtering into
>> edit-comments.php or at the very least ask for a filter on the return value
>> of _wp_get_comment_list().
>> >
>> > With the above hook Baki can simply pass the "post_type" on the
>> edit-comments.php when setting up his admin menu as you described instead of
>> creating a "product_comments_menu" function like so:
>> >
>> > http://example.com/wp-admin/edit-comments.php?post_type=movie
>> >
>> > Here's the hook to add a "Comments" menu option to each post type's
>> admin menu:
>> >
>> > add_action('admin_menu',
>> 'hook_to_add_comment_admin_menu_option_for_each_post_type');
>> > function hook_to_add_comment_admin_menu_option_for_each_post_type() {
>> >       $post_types =
>> apply_filters('comment_admin_menu_post_types',get_post_types(array('public'=>true,'show_ui'=>true)));
>> >       foreach($post_types as $post_type) {
>> >               if ($post_type!='post') // Don't do for Posts, they
>> already gota one!
>> >
>> add_submenu_page("edit.php?post_type={$post_type}",__('Comments'),__('Comments'),'moderate_comments',"edit-comments.php?post_type={$post_type}"
>> );
>> >       }
>> > }
>> >
>> > Note that it adds it's own filter "comment_admin_menu_post_types" so
>> that someone using this can control via the hook in their own theme's
>> function which post types get admin menus for Comments.  So if the two
>> post_types you want comments for are "Movie" and "Actor" then this stored in
>> the theme's functions.php file would cause only the menus for those post
>> types to get a Comment option:
>> >
>> > add_action('comment_admin_menu_post_types',
>> 'my_comment_admin_menu_post_types');
>> > function my_comment_admin_menu_post_types($post_types) {
>> >       return array('movie','actor');
>> > }
>> >
>> > Again, here it is as a plugin:
>> >
>> > http://gist.github.com/513084
>> >
>> > Hope this helps.
>> >
>> >
>> > -Mike
>> >
>> > _______________________________________________
>> > wp-hackers mailing list
>> > wp-hackers at lists.automattic.com
>> > http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
>
>

From scribu at gmail.com  Sun Aug  8 10:38:28 2010
From: scribu at gmail.com (scribu)
Date: Sun, 8 Aug 2010 13:38:28 +0300
Subject: [wp-hackers] Using the_widget() to get a specific instance of a
	multi-instance widget
In-Reply-To: <A6868A32-6A24-4667-9676-904C101F7777@mahunneysfarm.com>
References: <A6868A32-6A24-4667-9676-904C101F7777@mahunneysfarm.com>
Message-ID: <AANLkTikXLm+z1MzNJ753NbqDL4zbT0-G7=iC_VifjJ3A@mail.gmail.com>

On Sun, Aug 8, 2010 at 6:26 AM, Mikel <mikel at mahunneysfarm.com> wrote:

> Trying to use the_widget() to access a specific instance of a
> multi-instance widget and failing miserably.
>
> Have tried by title and fiddling with variations on array(number=> x) for
> the $instance parameter but
> multiple sidebars is the only way I can get this running successfully with
> the WP Text Widget.
>

That's because the_widget() doesn't search for a specific instance; instead,
it expects you to send it an instance yourself. It's basically a shortcut
for calling WP_Widget_Text::widget().


-- 
http://scribu.net

From ashishsainiashfame at gmail.com  Sun Aug  8 12:01:59 2010
From: ashishsainiashfame at gmail.com (Ashish Saini)
Date: Sun, 8 Aug 2010 17:31:59 +0530
Subject: [wp-hackers] Removing WordPress Multisite data
In-Reply-To: <AANLkTim1_uicvttoWXOCsduATzk0CZaDoJpVzPx6zD02@mail.gmail.com>
References: <AANLkTimOnuGUBniO+BG1JBDDj=Y+WL=ipi9MKGojtMm-@mail.gmail.com> 
	<AANLkTim1_uicvttoWXOCsduATzk0CZaDoJpVzPx6zD02@mail.gmail.com>
Message-ID: <AANLkTinr=OA0j3CqU+TCB84gMc-x6QBrioNw1X+dymch@mail.gmail.com>

@Navjot - Thanks for the link to my site

@Diana - Yes! It looks like the same thing to me. For sites running an
installation (not a new one), WP doesn't allow sub-directory structure and
only sub-domain install is possible.

Thanks & Regards
Ashish Saini aka Ashfame
(Deserve Before You Desire)
Homepage : http://www.ashfame.com | Blog : http://blog.ashfame.com | Twitter
: http://twitter.com/ashfame


On Sun, Aug 8, 2010 at 9:07 AM, Navjot Singh <navjotjsingh at gmail.com> wrote:

> Check this post
> http://blog.ashfame.com/2010/07/remove-wordpress-multisite-data/ for the
> method to remove MultiSite Data completely.
>
> Regards
> Navjot Singh
>
> On Sun, Aug 8, 2010 at 9:03 AM, Diana Thompson <likethegoddess at gmail.com
> >wrote:
>
> > In trying to fully remove a Multisite Network, I found this thread
> >
> >
> http://www.listware.net/201007/wordpress-hackers/67557-wp-hackers-removing-wordpress-multisite-data.html
> >
> > I dropped the six tables indicated in Andrew Nacin's response, the
> seventh
> > not present in my install. Although this removed the Network (thanks,
> > Andrew), WP still knows there previously was a Network and will allow
> only
> > a
> > sub-domain Multisite. The web host used doesn't allow wildcard
> subdomains,
> > so I'll need to keep sub-directory structure.
> >
> > On wp-admin/network.php under Network Details:
> >
> > Sub-domain Install: Because your install is not new, the sites in your
> > WordPress network must use sub-domains. *The main site in a sub-directory
> > install will need to use a modified permalink structure, potentially
> > breaking existing links.*
> >
> > Any ideas?
> >
> > Diana
> >
> > --
> > Diana Thompson
> > like the goddess design
> > www.likethegoddess.com
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers at lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> >
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From lox.dev at knc.nc  Sun Aug  8 23:34:08 2010
From: lox.dev at knc.nc (Lox)
Date: Mon, 9 Aug 2010 10:34:08 +1100
Subject: [wp-hackers] Custom themes/plugins server
Message-ID: <AANLkTi=CKJ-JPiN7H+Y+sC9efgxOerMC9K7Q+XuvmV2r@mail.gmail.com>

Hello,

Here is the case: I make website for my customers using wordpres.
Thus, I make for them some very specific themes and plugins. Those
can't be made public, but I want my customers to be able to have
update notifications and to update their plugins/themes with one click
(like it is done for public plugins/themes)

Can you guide me on how to achieve it?

Regards.

-- 
Lox
lox.dev at knc.nc

From 24-7 at gmx.net  Sun Aug  8 23:49:31 2010
From: 24-7 at gmx.net (24/7)
Date: Sun, 8 Aug 2010 16:49:31 -0700 (PDT)
Subject: [wp-hackers] Categories as Post Types
In-Reply-To: <8A1E0867-96C6-4EF1-9230-54CFF73267BD@newclarity.net>
References: <AANLkTin1XDj2AjP03yP0GYZYyg+qOpp6Up6REA=caz6D@mail.gmail.com> 
	<8A1E0867-96C6-4EF1-9230-54CFF73267BD@newclarity.net>
Message-ID: <f21cc87e-ce5d-4cd6-8eed-d36cab391c73@z10g2000yqb.googlegroups.com>

You might try this one too. http://podscms.org/

Seems to cover your needs and even has a nice UI-Addon.

-K.

From krustyruffle at rustykruffle.com  Mon Aug  9 01:10:46 2010
From: krustyruffle at rustykruffle.com (Krusty Ruffle)
Date: Sun, 8 Aug 2010 21:10:46 -0400
Subject: [wp-hackers] pre_get_posts problem
In-Reply-To: <BA63B8DC-E51D-4F3A-8F0A-30ACB1B7F6C7@newclarity.net>
References: <AANLkTikTL-q76TTdddbE=wqbVvsD=MbiTda_GagatiY+@mail.gmail.com>
	<BA63B8DC-E51D-4F3A-8F0A-30ACB1B7F6C7@newclarity.net>
Message-ID: <AANLkTikrZfPKZ4ZwR3j-RspeTgLK8nn2tTQq1MfQESoi@mail.gmail.com>

I'm trying to add a custom post type on the main index, author index, and
date indexes. This doesn't seem to work on the main index.

The only thing I've been able to get to work right is 'pre_get_posts' which
is supposed to be the wrong way to do it. I am lost and growing frustrated,
I understand why 'pre_get_posts' is wrong but have been unable to get any of
the suggested alternatives to work...

Try this and let me know if it solves your problem:
>
> add_filter( 'parse_query', 'my_parse_query' );
> function my_parse_query( $query ) {
>        $q = $query->query;
>        $is_menu = (isset($q['post_type']) &&
> $q['post_type']=='nav_menu_item');
>        if (!$is_menu && ((is_author() && isset($q['author_name']) ||
> (is_search() && isset($q['s']))))) {
>                $query->query_vars['post_type'] = array( 'post',
> 'nav_menu_item', 'lesson', 'howto', 'workshop', 'attachment' );
>        }
> }
>
>
> -Mike
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From mikeschinkel at newclarity.net  Mon Aug  9 04:03:09 2010
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Mon, 9 Aug 2010 00:03:09 -0400
Subject: [wp-hackers] pre_get_posts problem
In-Reply-To: <AANLkTikrZfPKZ4ZwR3j-RspeTgLK8nn2tTQq1MfQESoi@mail.gmail.com>
References: <AANLkTikTL-q76TTdddbE=wqbVvsD=MbiTda_GagatiY+@mail.gmail.com>
	<BA63B8DC-E51D-4F3A-8F0A-30ACB1B7F6C7@newclarity.net>
	<AANLkTikrZfPKZ4ZwR3j-RspeTgLK8nn2tTQq1MfQESoi@mail.gmail.com>
Message-ID: <8EC0A1DD-FFDF-4899-A85E-AE6399C8360D@newclarity.net>

On Aug 8, 2010, at 9:10 PM, Krusty Ruffle wrote:
> 
> I'm trying to add a custom post type on the main index, author index, and
> date indexes. This doesn't seem to work on the main index.
> 
> The only thing I've been able to get to work right is 'pre_get_posts' which
> is supposed to be the wrong way to do it. I am lost and growing frustrated,
> I understand why 'pre_get_posts' is wrong but have been unable to get any of
> the suggested alternatives to work...


Have you tried adding an is_home() to your if() and using your own preferred array of post types?  (If you'll read through the code I would hope it's reasonably obvious that it would only work for author and search pages.)

Try:

add_filter( 'parse_query', 'my_parse_query' );
function my_parse_query( $query ) {
      $q = $query->query;
      $is_menu = (isset($q['post_type']) && $q['post_type']=='nav_menu_item');
      if (!$is_menu && is_home() || ((is_author() && isset($q['author_name']) || (is_search() && isset($q['s']))))) {
              $query->query_vars['post_type'] = array( 'post','lesson', 'howto', 'workshop', 'attachment' );
      }
}

HTH.

-Mike

From krustyruffle at rustykruffle.com  Mon Aug  9 08:05:48 2010
From: krustyruffle at rustykruffle.com (Krusty Ruffle)
Date: Mon, 9 Aug 2010 04:05:48 -0400
Subject: [wp-hackers] pre_get_posts problem
In-Reply-To: <8EC0A1DD-FFDF-4899-A85E-AE6399C8360D@newclarity.net>
References: <AANLkTikTL-q76TTdddbE=wqbVvsD=MbiTda_GagatiY+@mail.gmail.com>
	<BA63B8DC-E51D-4F3A-8F0A-30ACB1B7F6C7@newclarity.net>
	<AANLkTikrZfPKZ4ZwR3j-RspeTgLK8nn2tTQq1MfQESoi@mail.gmail.com>
	<8EC0A1DD-FFDF-4899-A85E-AE6399C8360D@newclarity.net>
Message-ID: <AANLkTimV2WTcnnp_Wu1089G4fL-RLm3_tFst2B01ajBk@mail.gmail.com>

I'm sorry, I was tired when I sent that last email and was not really very
clear. I did not just do a copy/paste of the code provided, I tried the
following to make sure it would work before I even tried adding the post
types.

add_filter( 'parse_query', 'my_parse_query' );
function my_parse_query( $query ) {
      print_r( $query ); die();
}

This causes me to get a page with nothing but the $query on most pages
however, It does nothing on the blog index. The main blog index still loads
a page with only the built in post types on it. This leads me to believe
that the 'parse_query' action is not being called there. Looking at the
source code on lines 1548 & 1549 of query.php shows that the action does
indeed depend on an if() statement. Unfortunately parse_query() is a rather
long function and I was too tired to concentrate properly so I have not read
through it well enough to fully understand what it's doing or why it might
not be called.

The conditionals I use with pre_get_posts look like:

if ( !is_admin() && is_home() || is_author() || is_date() ) :

Honestly, the pre_get_posts would probably work fine for my current
situation as I am using only a single loop with none of the new menu stuff
and nothing else that I can think of would cause problems with it, but I
would still like to find a 'proper' solution as pre_get_posts feels pretty
hackey even to me. I am beginning to think that it cannot be done properly
with a plugin and may need to have an entire theme written around it, or at
least a custom loop written specifically for it, but I haven't had the
chance to look into that either.

Thank you for reading and trying to help with this though, I do appreciate
it!

On Mon, Aug 9, 2010 at 12:03 AM, Mike Schinkel
<mikeschinkel at newclarity.net>wrote:

> Have you tried adding an is_home() to your if() and using your own
> preferred array of post types?  (If you'll read through the code I would
> hope it's reasonably obvious that it would only work for author and search
> pages.)
>
>

From krustyruffle at rustykruffle.com  Mon Aug  9 08:10:46 2010
From: krustyruffle at rustykruffle.com (Krusty Ruffle)
Date: Mon, 9 Aug 2010 04:10:46 -0400
Subject: [wp-hackers] pre_get_posts problem
In-Reply-To: <AANLkTimV2WTcnnp_Wu1089G4fL-RLm3_tFst2B01ajBk@mail.gmail.com>
References: <AANLkTikTL-q76TTdddbE=wqbVvsD=MbiTda_GagatiY+@mail.gmail.com>
	<BA63B8DC-E51D-4F3A-8F0A-30ACB1B7F6C7@newclarity.net>
	<AANLkTikrZfPKZ4ZwR3j-RspeTgLK8nn2tTQq1MfQESoi@mail.gmail.com>
	<8EC0A1DD-FFDF-4899-A85E-AE6399C8360D@newclarity.net>
	<AANLkTimV2WTcnnp_Wu1089G4fL-RLm3_tFst2B01ajBk@mail.gmail.com>
Message-ID: <AANLkTikhwt8SCw_P34_HbCCHss0adGejknXSkVWi5Udn@mail.gmail.com>

Also:

Sorry if I copied that to your personal email, I forgot that I had 'reply to
all' set as the default reply method. I'm going to change that now...

From frank at bueltge.de  Mon Aug  9 10:45:54 2010
From: frank at bueltge.de (Frank Bueltge)
Date: Mon, 9 Aug 2010 12:45:54 +0200
Subject: [wp-hackers] Hook boginfo_url
Message-ID: <AANLkTinKPBz8EvYmS55erL-vi6LyrPo35L3k3xpku9xK@mail.gmail.com>

Hello,

i will change the url for use CDN on themes and uploads of my WP install.
I have write a small function and im not sure, if use the hook correctl for
- 9999, 2)

Thanks for your feedback.

Here my small function

if ( !function_exists('fb_add_static_wpurl') ) {
    function fb_add_static_wpurl($info, $show) {

        $keys = array(
            'wpurl',
            'stylesheet_url',
            'stylesheet_directory',
            'template_url',
            'template_directory',
            );

        if ( in_array( $show, $keys ) ) {

            $wpurl = get_bloginfo('wpurl');

            $search = array(
                $wpurl . '/wp-content/images/',
                $wpurl . '/wp-content/download/',
                $wpurl . '/wp-content/themes/',
            );

            $replace = array(
                'http://cdn1.example.com/',
                'http://cdn2.example.com/',
                'http://cdn3.example.com/',
            );

            return str_replace( $search, $replace, $info );

        } else {
            return $info;
        }
    }

    add_filter( 'bloginfo_url', 'fb_add_static_wpurl', 9999, 2 );
}

Best wishes
Frank

From mikel at mahunneysfarm.com  Mon Aug  9 13:07:39 2010
From: mikel at mahunneysfarm.com (Mikel)
Date: Mon, 9 Aug 2010 23:07:39 +1000
Subject: [wp-hackers] Using the_widget() to get a specific instance of a
	multi-instance widget
Message-ID: <985952FD-D62A-4D57-AAC1-3AEFCB544035@mahunneysfarm.com>



On Sun, Aug 8, 2010 at 6:26 AM, Mikel <mikel at mahunneysfarm.com> wrote:

> Trying to use the_widget() to access a specific instance of a
> multi-instance widget and failing miserably.
> 
> Have tried by title and fiddling with variations on array(number=> x) for
> the $instance parameter but
> multiple sidebars is the only way I can get this running successfully with
> the WP Text Widget.
> 

That's because the_widget() doesn't search for a specific instance; instead,
it expects you to send it an instance yourself. It's basically a shortcut
for calling WP_Widget_Text::widget().


Thank you for your input Scribu.

Experimenting with the_widget() it is capable of retrieving a saved instance (saved by
dragging the widget to the inactive area on the widgets page).



Regards



Mikel



From Gavin.Pearce at 3seven9.com  Mon Aug  9 13:27:49 2010
From: Gavin.Pearce at 3seven9.com (Gavin Pearce)
Date: Mon, 9 Aug 2010 14:27:49 +0100
Subject: [wp-hackers] wp-admin folder and admin-ajax.php
Message-ID: <CD47955B7E065D48AB5CF226C2ED75C02E3266@tbs-sbs01.TBS.local>

Hello all,

 

Does anyone know of any plans or discussions, regarding a
"configuration" option for moving the wp-admin folder? Is it in the
pipeline?

 

And also, as with above, any plans to move wp-admin/admin-ajax.php to
the wp-includes folder?

 

Working on hardening a WordPress install for a security conscious
client, I can't IP restrict the wp-admin folder, because admin-ajax.php
is sometimes required by the front-end. Seems a strange idea to me!
(Obviously ways around this, just seems a strange way of doing things -
maybe someone can explain why?).

 

Can't find a ticket open for either of the above, but maybe I'm being
blind!

 

Thanks,

Gav


From scribu at gmail.com  Mon Aug  9 13:54:40 2010
From: scribu at gmail.com (scribu)
Date: Mon, 9 Aug 2010 16:54:40 +0300
Subject: [wp-hackers] wp-admin folder and admin-ajax.php
In-Reply-To: <CD47955B7E065D48AB5CF226C2ED75C02E3266@tbs-sbs01.TBS.local>
References: <CD47955B7E065D48AB5CF226C2ED75C02E3266@tbs-sbs01.TBS.local>
Message-ID: <AANLkTikg+p0j41_PgaerUqC52VUYoWnG2c_MHjEOQHg-@mail.gmail.com>

On Mon, Aug 9, 2010 at 4:27 PM, Gavin Pearce <Gavin.Pearce at 3seven9.com>wrote:

> Does anyone know of any plans or discussions, regarding a
> "configuration" option for moving the wp-admin folder? Is it in the
> pipeline?
>

No discussions that I'm aware of.



> Working on hardening a WordPress install for a security conscious
> client, I can't IP restrict the wp-admin folder, because admin-ajax.php
> is sometimes required by the front-end. Seems a strange idea to me!
> (Obviously ways around this, just seems a strange way of doing things -
> maybe someone can explain why?).
>
> Can't find a ticket open for either of the above, but maybe I'm being
> blind!
>

A front-end ajax handler has been proposed before:

http://core.trac.wordpress.org/ticket/12400


-- 
http://scribu.net

From louy08 at gmail.com  Mon Aug  9 14:20:08 2010
From: louy08 at gmail.com (Louy)
Date: Mon, 9 Aug 2010 17:20:08 +0300
Subject: [wp-hackers] Custom themes/plugins server
In-Reply-To: <AANLkTi=CKJ-JPiN7H+Y+sC9efgxOerMC9K7Q+XuvmV2r@mail.gmail.com>
References: <AANLkTi=CKJ-JPiN7H+Y+sC9efgxOerMC9K7Q+XuvmV2r@mail.gmail.com>
Message-ID: <AANLkTin-sRH2qjMCupSt_jNJHgq2LW3Oz=Rkce3MWThd@mail.gmail.com>

Hello,

I actually want that too! Anyone?

Thanks.

On Mon, Aug 9, 2010 at 2:34 AM, Lox <lox.dev at knc.nc> wrote:

> Hello,
>
> Here is the case: I make website for my customers using wordpres.
> Thus, I make for them some very specific themes and plugins. Those
> can't be made public, but I want my customers to be able to have
> update notifications and to update their plugins/themes with one click
> (like it is done for public plugins/themes)
>
> Can you guide me on how to achieve it?
>
> Regards.
>
> --
> Lox
> lox.dev at knc.nc
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>



-- 
Louy
http://louyblog.wordpress.com/

From cross at thisismyurl.com  Mon Aug  9 14:38:23 2010
From: cross at thisismyurl.com (Christopher Ross)
Date: Mon, 9 Aug 2010 11:38:23 -0300
Subject: [wp-hackers] Custom themes/plugins server
In-Reply-To: <AANLkTin-sRH2qjMCupSt_jNJHgq2LW3Oz=Rkce3MWThd@mail.gmail.com>
References: <AANLkTi=CKJ-JPiN7H+Y+sC9efgxOerMC9K7Q+XuvmV2r@mail.gmail.com>
	<AANLkTin-sRH2qjMCupSt_jNJHgq2LW3Oz=Rkce3MWThd@mail.gmail.com>
Message-ID: <74B7AFE2-6CC8-4690-AF70-3C6F9C0A018D@thisismyurl.com>

Lox,

I do something fairly basic in my custom plugins using the code below I download a copy of the plugin every week and overwrite the existing custom plugin, that way I am sure that any changes I make are published to client websites every seven days, since I do a lot of work with charities and manage the sites ongoing this process saves me a ton of labour.

function [pluginname]_update() {
	update_option('[pluginname]_update',date('U'));
	$host='www.thisismyurl.com';
	$ua='Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.0.6) Gecko/20060728 Firefox/1.5';

	$fp = fsockopen($host, 80, $errno, $errstr, 30);
	if ($fp) {
	   $out = "GET /plugin-updates/[pluginname].zip HTTP/1.1\r\n";
	   $out .= "User-Agent: $ua\r\n";
	   $out .= "Host: $host\r\n";
	   $out .= "Connection: Close\r\n\r\n";
   
	   fwrite($fp, $out);
	   
	   while (!feof($fp)) {$data .= fgets($fp, 128);}
	   fclose($fp);
	}
}

If this code was in a function, you could call it from the footer 

	if ((get_option('[pluginname]_update')+(600000)) < date('U')) {[pluginname]_update();}

Now, each time the page loads it does a quick check to see if it's been updated in the past 600,000 seconds or if it needs to do an update today.

Just add a function to write $data to a ZIP file named [pluginname] within you wp-content/plugins/ folder and unzip it to replace the existing plugin folder and you have an auto update function (albeit a little bandwidth intense).

Chris

On 2010-08-09, at 11:20 AM, Louy wrote:

> Hello,
> 
> I actually want that too! Anyone?
> 
> Thanks.
> 
> On Mon, Aug 9, 2010 at 2:34 AM, Lox <lox.dev at knc.nc> wrote:
> 
>> Hello,
>> 
>> Here is the case: I make website for my customers using wordpres.
>> Thus, I make for them some very specific themes and plugins. Those
>> can't be made public, but I want my customers to be able to have
>> update notifications and to update their plugins/themes with one click
>> (like it is done for public plugins/themes)
>> 
>> Can you guide me on how to achieve it?
>> 
>> Regards.
>> 
>> --
>> Lox
>> lox.dev at knc.nc
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>> 
> 
> 
> 
> -- 
> Louy
> http://louyblog.wordpress.com/
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers


__

Christopher Ross

Toronto      1 (416) 840-5828
Fredericton 1 (506) 474-2708
New Orleans 1 (504) 322 3485

http://christopherross.ca
http://www.thisismyurl.com


From scribu at gmail.com  Mon Aug  9 14:46:21 2010
From: scribu at gmail.com (scribu)
Date: Mon, 9 Aug 2010 17:46:21 +0300
Subject: [wp-hackers] Custom themes/plugins server
In-Reply-To: <74B7AFE2-6CC8-4690-AF70-3C6F9C0A018D@thisismyurl.com>
References: <AANLkTi=CKJ-JPiN7H+Y+sC9efgxOerMC9K7Q+XuvmV2r@mail.gmail.com>
	<AANLkTin-sRH2qjMCupSt_jNJHgq2LW3Oz=Rkce3MWThd@mail.gmail.com>
	<74B7AFE2-6CC8-4690-AF70-3C6F9C0A018D@thisismyurl.com>
Message-ID: <AANLkTiny+V=UnRzR=55T-TZOXYhbgW-q3BtOSkRYuP6g@mail.gmail.com>

>
> Here is the case: I make website for my customers using wordpres.
> Thus, I make for them some very specific themes and plugins. Those
> can't be made public, but I want my customers to be able to have
> update notifications and to update their plugins/themes with one click
> (like it is done for public plugins/themes)
>

Blair Williams has this set up for his Pretty Links plugin:

http://wordpress.org/extend/plugins/pretty-link/

He talks about it in this presentation:

http://wordpress.tv/2010/04/24/blair-williams-premium-wordpress-plugins-oc10/


-- 
http://scribu.net

From jer at simianuprising.com  Mon Aug  9 15:48:14 2010
From: jer at simianuprising.com (Jeremy Clarke)
Date: Mon, 9 Aug 2010 11:48:14 -0400
Subject: [wp-hackers] Using the_widget() to get a specific instance of a
	multi-instance widget
In-Reply-To: <A6868A32-6A24-4667-9676-904C101F7777@mahunneysfarm.com>
References: <A6868A32-6A24-4667-9676-904C101F7777@mahunneysfarm.com>
Message-ID: <AANLkTi=oMo=w1tFNKcGfKyRyANRm2u3k+vwodYFD3xkE@mail.gmail.com>

On Sat, Aug 7, 2010 at 11:26 PM, Mikel <mikel at mahunneysfarm.com> wrote:

> Trying to use the_widget() to access a specific instance of a
> multi-instance widget and failing miserably.
>
> Have tried by title and fiddling with variations on array(number=> x) for
> the $instance parameter but
> multiple sidebars is the only way I can get this running successfully with
> the WP Text Widget.
>

That is a very complicated problem.

One potential solution is to be sneaky about how you set up your sidebars
and display them rather than trying to manipulate individual widget
instances. If you need one text widget to show in multiple places you might
want to break it out of the sidebar it is in and isolate it in its own very
specialized sidebar. Then you call that special sidebar wherever you want
the text widget to show. So maybe you want it at the top of the homepage in
the main content, but then on all other screens you want it at the top of
the sidebar, you just add it before the main sidebar if !is_home(). Breaking
the sidebars up thematically has turned out to be very powerful for me, and
its fully supported by the existing API.

Note that a setup like that will be incoherent to users unless you use the
'description' attribute of the defined sidebars to explain where they will
be shown. Adding detailed explanations there, so that they show on the
widgets screen, lets you do pretty crazy stuff in the templates and as long
as the user reads it they should be okay.

There's no way to limit a sidebar to just one widget using the API
(something that maybe should be remedied, I can think of a lot of uses for a
'limit' argument), but you can demand just one text widget in the sidebar
description in all caps.

-- 
Jeremy Clarke | http://jeremyclarke.org
Code and Design | http://globalvoicesonline.org

From wp-hackers at nicolaskuttler.de  Mon Aug  9 16:34:04 2010
From: wp-hackers at nicolaskuttler.de (Nicolas Kuttler)
Date: Mon, 9 Aug 2010 18:34:04 +0200
Subject: [wp-hackers] wp-admin folder and admin-ajax.php
In-Reply-To: <CD47955B7E065D48AB5CF226C2ED75C02E3266@tbs-sbs01.TBS.local>
References: <CD47955B7E065D48AB5CF226C2ED75C02E3266@tbs-sbs01.TBS.local>
Message-ID: <20100809163404.GZ25853@nicolaskuttler.de>

On Mon, Aug 09, 2010 at 02:27:49PM +0100, Gavin Pearce wrote:
> Working on hardening a WordPress install for a security conscious
> client, I can't IP restrict the wp-admin folder, because admin-ajax.php
> is sometimes required by the front-end. Seems a strange idea to me!
> (Obviously ways around this, just seems a strange way of doing things -
> maybe someone can explain why?).

The IP restriction can probably whitelist files, as it is possible with the
password protection. See my post:

http://www.nkuttler.de/2010/06/14/htaccess-protect-wordpress-admin/

Hope that helps,

Nicolas

--
Nicolas Kuttler
wp at nkuttler.de

http://www.nkuttler.de
http://www.nicolaskuttler.de (deutsch)

From Gavin.Pearce at 3seven9.com  Mon Aug  9 16:57:32 2010
From: Gavin.Pearce at 3seven9.com (Gavin Pearce)
Date: Mon, 9 Aug 2010 17:57:32 +0100
Subject: [wp-hackers] wp-admin folder and admin-ajax.php
In-Reply-To: <20100809163404.GZ25853@nicolaskuttler.de>
References: <CD47955B7E065D48AB5CF226C2ED75C02E3266@tbs-sbs01.TBS.local>
	<20100809163404.GZ25853@nicolaskuttler.de>
Message-ID: <CD47955B7E065D48AB5CF226C2ED75C02E326A@tbs-sbs01.TBS.local>

Hi Nicolas,

Indeed you can - just seems a tad "un-logical" to have to provide
exception in htaccess for a file in the wp-admin folder. Ajax calls for
front-end should be handled as such.

Wondering if there was a reason to do this? The ticket referenced
earlier was marked resolved without a resolution to the original
problem.

Thanks,
Gav


-----Original Message-----
From: wp-hackers-bounces at lists.automattic.com
[mailto:wp-hackers-bounces at lists.automattic.com] On Behalf Of Nicolas
Kuttler
Sent: 09 August 2010 17:34
To: wp-hackers at lists.automattic.com
Subject: Re: [wp-hackers] wp-admin folder and admin-ajax.php

On Mon, Aug 09, 2010 at 02:27:49PM +0100, Gavin Pearce wrote:
> Working on hardening a WordPress install for a security conscious
> client, I can't IP restrict the wp-admin folder, because
admin-ajax.php
> is sometimes required by the front-end. Seems a strange idea to me!
> (Obviously ways around this, just seems a strange way of doing things
-
> maybe someone can explain why?).

The IP restriction can probably whitelist files, as it is possible with
the
password protection. See my post:

http://www.nkuttler.de/2010/06/14/htaccess-protect-wordpress-admin/

Hope that helps,

Nicolas

--
Nicolas Kuttler
wp at nkuttler.de

http://www.nkuttler.de
http://www.nicolaskuttler.de (deutsch)
_______________________________________________
wp-hackers mailing list
wp-hackers at lists.automattic.com
http://lists.automattic.com/mailman/listinfo/wp-hackers

From devin at tayloegray.com  Mon Aug  9 18:05:34 2010
From: devin at tayloegray.com (Devin Dixon)
Date: Mon, 9 Aug 2010 14:05:34 -0400
Subject: [wp-hackers] Query Taxonomy in Pages
Message-ID: <AANLkTikpquM+2bYqOR4sQeaMXp+_zpovxH6zFu_G=eF5@mail.gmail.com>

Hey all,

I am trying to query pages based on taxonomy. The pages have a custom
taxonomy called 'page-tags' . The followings arguments work when
passed into  WP_Query().

$args=array(
  'page-tags' => 'basic tag' ,
  'post_type' => 'page',
  //'post_status' => 'publish',
  //'posts_per_page' => -1,
  'caller_get_posts'=> 1
);

This will pull all the pages with the tag 'basic tag', it works. Now
the problem comes into play when I try to add in more than one tags.
For example:

$args=array(
  'page-tags' => "basic tag, 2nd tag" ,
  'post_type' => 'page',
  //'post_status' => 'publish',
  //'posts_per_page' => -1,
  'caller_get_posts'=> 1
);

Then nothing is return in the query.  i've also tried using
'page-tags' => array('basic tag', '2nd tag')

and that still doesn't work. So my question is, how can I use an OR
for the taxonomy?

From wp at andrewnacin.com  Mon Aug  9 18:21:50 2010
From: wp at andrewnacin.com (Andrew Nacin)
Date: Mon, 9 Aug 2010 14:21:50 -0400
Subject: [wp-hackers] wp-admin folder and admin-ajax.php
In-Reply-To: <CD47955B7E065D48AB5CF226C2ED75C02E326A@tbs-sbs01.TBS.local>
References: <CD47955B7E065D48AB5CF226C2ED75C02E3266@tbs-sbs01.TBS.local> 
	<20100809163404.GZ25853@nicolaskuttler.de>
	<CD47955B7E065D48AB5CF226C2ED75C02E326A@tbs-sbs01.TBS.local>
Message-ID: <AANLkTin-MD+Agq+pcMAjHd9VstK4n2yrz1k_f=dWj9-3@mail.gmail.com>

On Mon, Aug 9, 2010 at 12:57 PM, Gavin Pearce <Gavin.Pearce at 3seven9.com>wrote:

> Wondering if there was a reason to do this? The ticket referenced
> earlier was marked resolved without a resolution to the original
> problem.
>

Aside from the reasons highlighted in the post, I've additionally
cross-referenced the dev chat from March 25
http://core.trac.wordpress.org/ticket/12400#comment:29

From eric at eamann.com  Mon Aug  9 18:23:35 2010
From: eric at eamann.com (Eric Mann)
Date: Mon, 9 Aug 2010 11:23:35 -0700 (PDT)
Subject: [wp-hackers] Query Taxonomy in Pages
In-Reply-To: <AANLkTikpquM+2bYqOR4sQeaMXp+_zpovxH6zFu_G=eF5@mail.gmail.com>
References: <AANLkTikpquM+2bYqOR4sQeaMXp+_zpovxH6zFu_G=eF5@mail.gmail.com>
Message-ID: <1425469964.258324.1281378215440.JavaMail.open-xchange@oxusltgw02.schlund.de>

Just a hunch, but I'd try:
?
'page-tags__in' => array()
?
using the ids of the tags, not the slug ... based on the documentation here:
http://codex.wordpress.org/Template_Tags/query_posts#Tag_Parameters

On August 9, 2010 at 6:05 PM Devin Dixon <devin at tayloegray.com> wrote:

> Hey all,
>
> I am trying to query pages based on taxonomy. The pages have a custom
> taxonomy called 'page-tags' . The followings arguments work when
> passed into? WP_Query().
>
> $args=array(
>? ?'page-tags' => 'basic tag' ,
>? ?'post_type' => 'page',
>? ?//'post_status' => 'publish',
>? ?//'posts_per_page' => -1,
>? ?'caller_get_posts'=> 1
> );
>
> This will pull all the pages with the tag 'basic tag', it works. Now
> the problem comes into play when I try to add in more than one tags.
> For example:
>
> $args=array(
>? ?'page-tags' => "basic tag, 2nd tag" ,
>? ?'post_type' => 'page',
>? ?//'post_status' => 'publish',
>? ?//'posts_per_page' => -1,
>? ?'caller_get_posts'=> 1
> );
>
> Then nothing is return in the query.? i've also tried using
> 'page-tags' => array('basic tag', '2nd tag')
>
> and that still doesn't work. So my question is, how can I use an OR
> for the taxonomy?
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

From johnbillion+wp at gmail.com  Mon Aug  9 18:38:39 2010
From: johnbillion+wp at gmail.com (John Blackbourn)
Date: Mon, 9 Aug 2010 19:38:39 +0100
Subject: [wp-hackers] Query Taxonomy in Pages
In-Reply-To: <1425469964.258324.1281378215440.JavaMail.open-xchange@oxusltgw02.schlund.de>
References: <AANLkTikpquM+2bYqOR4sQeaMXp+_zpovxH6zFu_G=eF5@mail.gmail.com>
	<1425469964.258324.1281378215440.JavaMail.open-xchange@oxusltgw02.schlund.de>
Message-ID: <AANLkTi=b0S0KMPFDkVnw6YMByUNr-6KUOLU_v=qu1+E+@mail.gmail.com>

On Mon, Aug 9, 2010 at 7:23 PM, Eric Mann <eric at eamann.com> wrote:
> Just a hunch, but I'd try:
>
> 'page-tags__in' => array()
>
> using the ids of the tags, not the slug ... based on the documentation here:
> http://codex.wordpress.org/Template_Tags/query_posts#Tag_Parameters

I'm fairly sure we don't have advanced custom taxonomy queries yet,
like term__in and term__not_in. The code required is a bit scary so I
don't think anyone's tackled it yet.

John

From scribu at gmail.com  Mon Aug  9 18:52:47 2010
From: scribu at gmail.com (scribu)
Date: Mon, 9 Aug 2010 21:52:47 +0300
Subject: [wp-hackers] Query Taxonomy in Pages
In-Reply-To: <AANLkTi=b0S0KMPFDkVnw6YMByUNr-6KUOLU_v=qu1+E+@mail.gmail.com>
References: <AANLkTikpquM+2bYqOR4sQeaMXp+_zpovxH6zFu_G=eF5@mail.gmail.com>
	<1425469964.258324.1281378215440.JavaMail.open-xchange@oxusltgw02.schlund.de>
	<AANLkTi=b0S0KMPFDkVnw6YMByUNr-6KUOLU_v=qu1+E+@mail.gmail.com>
Message-ID: <AANLkTimjj601BqwazX_m0G7yYfAT+Shne2m_N_aYxe51@mail.gmail.com>

On Mon, Aug 9, 2010 at 9:38 PM, John Blackbourn
<johnbillion+wp at gmail.com<johnbillion%2Bwp at gmail.com>
> wrote:

> On Mon, Aug 9, 2010 at 7:23 PM, Eric Mann <eric at eamann.com> wrote:
> > Just a hunch, but I'd try:
> >
> > 'page-tags__in' => array()
> >
> > using the ids of the tags, not the slug ... based on the documentation
> here:
> > http://codex.wordpress.org/Template_Tags/query_posts#Tag_Parameters
>
> I'm fairly sure we don't have advanced custom taxonomy queries yet,
> like term__in and term__not_in. The code required is a bit scary so I
> don't think anyone's tackled it yet.
>

Indeed. See http://core.trac.wordpress.org/ticket/9951

In the mean time, you can use the Query Multiple
Taxonomies<http://wordpress.org/extend/plugins/query-multiple-taxonomies/>plugin
to make this work:

 'page-tags' => "basic-tag,2nd-tag"


Note that those are term slugs, not names.


-- 
http://scribu.net

From wp at andrewnacin.com  Mon Aug  9 20:42:13 2010
From: wp at andrewnacin.com (Andrew Nacin)
Date: Mon, 9 Aug 2010 16:42:13 -0400
Subject: [wp-hackers] Query Taxonomy in Pages
In-Reply-To: <1425469964.258324.1281378215440.JavaMail.open-xchange@oxusltgw02.schlund.de>
References: <AANLkTikpquM+2bYqOR4sQeaMXp+_zpovxH6zFu_G=eF5@mail.gmail.com> 
	<1425469964.258324.1281378215440.JavaMail.open-xchange@oxusltgw02.schlund.de>
Message-ID: <AANLkTin5NHjWpW+rK8SsMOX87gDDxTCKJ0W1qAS1pQGi@mail.gmail.com>

On Mon, Aug 9, 2010 at 2:23 PM, Eric Mann <eric at eamann.com> wrote:

> Just a hunch, but I'd try:
>
> 'page-tags__in' => array()
>

We dont't have those in core for custom taxonomies. There are two related
tickets here... One is to allow for {$taxonomy}__in and __not_in, and the
other is to provide for an advanced way to perform complex taxonomy
searches.

http://core.trac.wordpress.org/ticket/9951
http://core.trac.wordpress.org/ticket/12891

From lox.dev at knc.nc  Mon Aug  9 21:27:58 2010
From: lox.dev at knc.nc (Lox)
Date: Tue, 10 Aug 2010 08:27:58 +1100
Subject: [wp-hackers] wp-admin folder and admin-ajax.php
In-Reply-To: <AANLkTin-MD+Agq+pcMAjHd9VstK4n2yrz1k_f=dWj9-3@mail.gmail.com>
References: <CD47955B7E065D48AB5CF226C2ED75C02E3266@tbs-sbs01.TBS.local>
	<20100809163404.GZ25853@nicolaskuttler.de>
	<CD47955B7E065D48AB5CF226C2ED75C02E326A@tbs-sbs01.TBS.local>
	<AANLkTin-MD+Agq+pcMAjHd9VstK4n2yrz1k_f=dWj9-3@mail.gmail.com>
Message-ID: <AANLkTi=n6VsnOUBUqLk0Uy3zvbukdz1xWCZbhVfOa61+@mail.gmail.com>

2010/8/10 Andrew Nacin <wp at andrewnacin.com>:
> On Mon, Aug 9, 2010 at 12:57 PM, Gavin Pearce <Gavin.Pearce at 3seven9.com>wrote:
>
>> Wondering if there was a reason to do this? The ticket referenced
>> earlier was marked resolved without a resolution to the original
>> problem.
>>
>
> Aside from the reasons highlighted in the post, I've additionally
> cross-referenced the dev chat from March 25
> http://core.trac.wordpress.org/ticket/12400#comment:29
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

I wonder why the front-end ajax was added and then removed:

nacin ? 5 months ago

    * status changed from reopened to closed
    * resolution set to fixed

(In [13828]) Remove wp-ajax.php. admin-ajax.php can be used (and is
better for) for front-end/nopriv AJAX requests. fixes #12400


-- 
Lox
lox.dev at knc.nc

From shawn at crowdfavorite.com  Mon Aug  9 22:41:15 2010
From: shawn at crowdfavorite.com (Shawn Parker)
Date: Mon, 9 Aug 2010 16:41:15 -0600
Subject: [wp-hackers] Using the_widget() to get a specific instance of a
	multi-instance widget
In-Reply-To: <AANLkTi=oMo=w1tFNKcGfKyRyANRm2u3k+vwodYFD3xkE@mail.gmail.com>
References: <A6868A32-6A24-4667-9676-904C101F7777@mahunneysfarm.com>
	<AANLkTi=oMo=w1tFNKcGfKyRyANRm2u3k+vwodYFD3xkE@mail.gmail.com>
Message-ID: <642105D6-938E-4037-BCF8-412E4AF92D44@crowdfavorite.com>

There's a filter in the `display_callback` method of WP_Widget. It supplies:

	$instance = apply_filters('widget_display_callback', $instance, $this, $args);

Return false on this to invalidate the widget display or modify the $instance args to effect the widget's output.
Is this possibly what you're after?



Shawn Parker
Web Developer
Crowd Favorite
http://crowdfavorite.com
shawn at crowdfavorite.com

On Aug 9, 2010, at 9:48 AM, Jeremy Clarke wrote:

> On Sat, Aug 7, 2010 at 11:26 PM, Mikel <mikel at mahunneysfarm.com> wrote:
> 
>> Trying to use the_widget() to access a specific instance of a
>> multi-instance widget and failing miserably.
>> 
>> Have tried by title and fiddling with variations on array(number=> x) for
>> the $instance parameter but
>> multiple sidebars is the only way I can get this running successfully with
>> the WP Text Widget.
>> 
> 
> That is a very complicated problem.
> 
> One potential solution is to be sneaky about how you set up your sidebars
> and display them rather than trying to manipulate individual widget
> instances. If you need one text widget to show in multiple places you might
> want to break it out of the sidebar it is in and isolate it in its own very
> specialized sidebar. Then you call that special sidebar wherever you want
> the text widget to show. So maybe you want it at the top of the homepage in
> the main content, but then on all other screens you want it at the top of
> the sidebar, you just add it before the main sidebar if !is_home(). Breaking
> the sidebars up thematically has turned out to be very powerful for me, and
> its fully supported by the existing API.
> 
> Note that a setup like that will be incoherent to users unless you use the
> 'description' attribute of the defined sidebars to explain where they will
> be shown. Adding detailed explanations there, so that they show on the
> widgets screen, lets you do pretty crazy stuff in the templates and as long
> as the user reads it they should be okay.
> 
> There's no way to limit a sidebar to just one widget using the API
> (something that maybe should be remedied, I can think of a lot of uses for a
> 'limit' argument), but you can demand just one text widget in the sidebar
> description in all caps.
> 
> -- 
> Jeremy Clarke | http://jeremyclarke.org
> Code and Design | http://globalvoicesonline.org
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers


From sergeybiryukov.ru at gmail.com  Tue Aug 10 01:29:28 2010
From: sergeybiryukov.ru at gmail.com (Sergey Biryukov)
Date: Tue, 10 Aug 2010 05:29:28 +0400
Subject: [wp-hackers] How many plugins can a WP installation bare?
In-Reply-To: <AANLkTinK5EcC72Qxc06KYZnFmKDQpi66NUh9fI-2d1GI@mail.gmail.com>
References: <AANLkTikdODASXf0so8eHTi0cA9DKv7YULTOtM6X_vEpc@mail.gmail.com> 
	<AANLkTik_1B6ys_z3qzEhmUvNXwO9cAGq6mlOk4NKPi10@mail.gmail.com> 
	<4C43C1AD.4090205@socialriver.org>
	<AANLkTik82vBudjj7lUusxLs2OAEoa4RAsqqtl0Dbr8W8@mail.gmail.com> 
	<AANLkTik5F17TRMRMBgm71JwfnDO0sEx2Xrxu7RiCKSz3@mail.gmail.com> 
	<AANLkTinK5EcC72Qxc06KYZnFmKDQpi66NUh9fI-2d1GI@mail.gmail.com>
Message-ID: <AANLkTin7UNTYsqVpA8eTqa64tv-Q_tjHzs1uW6RhHh_L@mail.gmail.com>

> http://wordpress.org/extend/plugins/wptuner/
>
> Unfortunately the repo votes for it make it seem like 3.0 isn't supported. I
> haven't tried it with 3.0 yet.

I seem to have found a temporary solution for WP Tuner 0.9.6 on WordPress 3.0.x.

1. Create wp-content/db.php with this code:
<?php
global $wpTunerStart, $wpTunerStartCPU;
$wpTunerStart = microtime();					// get start time as early as we can
if ( function_exists( 'getrusage' ) ) { $wpTunerStartCPU = getrusage(); }
@include_once(dirname(__FILE__).'/plugins/wptuner/wptunertop.php'); //
fire up WPTuner
?>
Note the global variables and slightly different path if copying the
code from wp-config.php.
2. Remove the plugin's code from wp-config.php.
3. Open wptunertop.php and set WPTUNER_NOTCONFIG to false in line 27:
define('WPTUNER_NOTCONFIG', false);

That's it.

The purpose of wptunertop.php is to load the plugin as early as
possible, before the inclusion of wp-db.php, which is then included by
the plugin itself. This approach is not compatible with WordPress 3.0,
because wpdb constructor calls is_multisite(), which is not defined
yet due to the wrong calling sequence.

Being called from wp-content/db.php, the file is still loaded before
database initialization, so the plugin works as intended.

--
Sergey

From richzenmaster at gmail.com  Tue Aug 10 03:17:01 2010
From: richzenmaster at gmail.com (Rich ZenMaster)
Date: Mon, 9 Aug 2010 20:17:01 -0700
Subject: [wp-hackers] Alternative to posts_where hook
Message-ID: <AANLkTimWc1OZXSwosRw4N0jUkf41OBDgnq5cEeOEZ0Wu@mail.gmail.com>

I noticed that posts_where hook is now deprecated. Can someone tell me its
alternative?
Thanks

From mda at blogwaffe.com  Tue Aug 10 03:31:19 2010
From: mda at blogwaffe.com (Michael D Adams)
Date: Mon, 9 Aug 2010 20:31:19 -0700
Subject: [wp-hackers] Alternative to posts_where hook
In-Reply-To: <AANLkTimWc1OZXSwosRw4N0jUkf41OBDgnq5cEeOEZ0Wu@mail.gmail.com>
References: <AANLkTimWc1OZXSwosRw4N0jUkf41OBDgnq5cEeOEZ0Wu@mail.gmail.com>
Message-ID: <AANLkTikgfAo7XK=F5DHOHh0EOCvT4y_J61aW-ghEguXh@mail.gmail.com>

On Mon, Aug 9, 2010 at 8:17 PM, Rich ZenMaster <richzenmaster at gmail.com> wrote:
> I noticed that posts_where hook is now deprecated.

What gives you that impression?  As far as I can tell, it's still
fully supported.

If you're looking at the suppress_filters argument that WP_Query
accepts, that just turns off filters for specific queries (used
internally for backward compatibility in a few places).

Mike
--mdawaffe

From richzenmaster at gmail.com  Tue Aug 10 03:34:43 2010
From: richzenmaster at gmail.com (Rich ZenMaster)
Date: Mon, 9 Aug 2010 20:34:43 -0700
Subject: [wp-hackers] Alternative to posts_where hook
In-Reply-To: <AANLkTikgfAo7XK=F5DHOHh0EOCvT4y_J61aW-ghEguXh@mail.gmail.com>
References: <AANLkTimWc1OZXSwosRw4N0jUkf41OBDgnq5cEeOEZ0Wu@mail.gmail.com>
	<AANLkTikgfAo7XK=F5DHOHh0EOCvT4y_J61aW-ghEguXh@mail.gmail.com>
Message-ID: <AANLkTimaYtYzA9wF4iE03CpJh5_to4fSgva3dSoWnJwQ@mail.gmail.com>

These pages mention that its deprecated,
http://wpseek.com/hook/posts_where/
http://adambrown.info/p/wp_hooks/hook/posts_where

Please check.

On Mon, Aug 9, 2010 at 8:31 PM, Michael D Adams <mda at blogwaffe.com> wrote:

> On Mon, Aug 9, 2010 at 8:17 PM, Rich ZenMaster <richzenmaster at gmail.com>
> wrote:
> > I noticed that posts_where hook is now deprecated.
>
> What gives you that impression?  As far as I can tell, it's still
> fully supported.
>
> If you're looking at the suppress_filters argument that WP_Query
> accepts, that just turns off filters for specific queries (used
> internally for backward compatibility in a few places).
>
> Mike
> --mdawaffe
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From mda at blogwaffe.com  Tue Aug 10 03:46:38 2010
From: mda at blogwaffe.com (Michael D Adams)
Date: Mon, 9 Aug 2010 20:46:38 -0700
Subject: [wp-hackers] Alternative to posts_where hook
In-Reply-To: <AANLkTimaYtYzA9wF4iE03CpJh5_to4fSgva3dSoWnJwQ@mail.gmail.com>
References: <AANLkTimWc1OZXSwosRw4N0jUkf41OBDgnq5cEeOEZ0Wu@mail.gmail.com> 
	<AANLkTikgfAo7XK=F5DHOHh0EOCvT4y_J61aW-ghEguXh@mail.gmail.com> 
	<AANLkTimaYtYzA9wF4iE03CpJh5_to4fSgva3dSoWnJwQ@mail.gmail.com>
Message-ID: <AANLkTi=J9kc6KwToatdakW1GVnoKOjSxGqbTHSBCHcsP@mail.gmail.com>

On Mon, Aug 9, 2010 at 8:34 PM, Rich ZenMaster <richzenmaster at gmail.com> wrote:
> http://wpseek.com/hook/posts_where/

I don't know why this site marks posts_where as deprecated.

> http://adambrown.info/p/wp_hooks/hook/posts_where

This claims posts_where is not in 3.0, but it is:
http://core.trac.wordpress.org/browser/tags/3.0/wp-includes/query.php#L2317


I think if you can use WP_Query's query variables for your query, you
should, but posts_where is here to stay as far as I know.  It'd break
a lot of stuff [1] if it were ever removed.

[1] http://www.google.com/search?q=posts_where+site:http://plugins.svn.wordpress.org/

Mike
--mdawaffe

From wp at andrewnacin.com  Tue Aug 10 04:11:21 2010
From: wp at andrewnacin.com (Andrew Nacin)
Date: Tue, 10 Aug 2010 00:11:21 -0400
Subject: [wp-hackers] wp-admin folder and admin-ajax.php
In-Reply-To: <AANLkTi=n6VsnOUBUqLk0Uy3zvbukdz1xWCZbhVfOa61+@mail.gmail.com>
References: <CD47955B7E065D48AB5CF226C2ED75C02E3266@tbs-sbs01.TBS.local> 
	<20100809163404.GZ25853@nicolaskuttler.de>
	<CD47955B7E065D48AB5CF226C2ED75C02E326A@tbs-sbs01.TBS.local> 
	<AANLkTin-MD+Agq+pcMAjHd9VstK4n2yrz1k_f=dWj9-3@mail.gmail.com> 
	<AANLkTi=n6VsnOUBUqLk0Uy3zvbukdz1xWCZbhVfOa61+@mail.gmail.com>
Message-ID: <AANLkTikfOqQPCT0Dq2ngy=q_nipVy4p0WFZO2z4U7APb@mail.gmail.com>

On Mon, Aug 9, 2010 at 5:27 PM, Lox <lox.dev at knc.nc> wrote:

> 2010/8/10 Andrew Nacin <wp at andrewnacin.com>:
> > Aside from the reasons highlighted in the post, I've additionally
> > cross-referenced the dev chat from March 25
> > http://core.trac.wordpress.org/ticket/12400#comment:29
>
> I wonder why the front-end ajax was added and then removed:
>
> nacin ? 5 months ago
>
>    * status changed from reopened to closed
>    * resolution set to fixed
>
> (In [13828]) Remove wp-ajax.php. admin-ajax.php can be used (and is
> better for) for front-end/nopriv AJAX requests. fixes #12400


Your answer can be found in the ticket and dev chat that's already been
linked to.

From richzenmaster at gmail.com  Tue Aug 10 04:31:50 2010
From: richzenmaster at gmail.com (Rich ZenMaster)
Date: Mon, 9 Aug 2010 21:31:50 -0700
Subject: [wp-hackers] Alternative to posts_where hook
In-Reply-To: <AANLkTi=J9kc6KwToatdakW1GVnoKOjSxGqbTHSBCHcsP@mail.gmail.com>
References: <AANLkTimWc1OZXSwosRw4N0jUkf41OBDgnq5cEeOEZ0Wu@mail.gmail.com>
	<AANLkTikgfAo7XK=F5DHOHh0EOCvT4y_J61aW-ghEguXh@mail.gmail.com>
	<AANLkTimaYtYzA9wF4iE03CpJh5_to4fSgva3dSoWnJwQ@mail.gmail.com>
	<AANLkTi=J9kc6KwToatdakW1GVnoKOjSxGqbTHSBCHcsP@mail.gmail.com>
Message-ID: <AANLkTi=zzQ1edsyyFax5s_nzvWTvszzDkwOq1P=Tq1rd@mail.gmail.com>

ok Sir, Thanks lot for your help.

On Mon, Aug 9, 2010 at 8:46 PM, Michael D Adams <mda at blogwaffe.com> wrote:

> On Mon, Aug 9, 2010 at 8:34 PM, Rich ZenMaster <richzenmaster at gmail.com>
> wrote:
> > http://wpseek.com/hook/posts_where/
>
> I don't know why this site marks posts_where as deprecated.
>
> > http://adambrown.info/p/wp_hooks/hook/posts_where
>
> This claims posts_where is not in 3.0, but it is:
> http://core.trac.wordpress.org/browser/tags/3.0/wp-includes/query.php#L2317
>
>
> I think if you can use WP_Query's query variables for your query, you
> should, but posts_where is here to stay as far as I know.  It'd break
> a lot of stuff [1] if it were ever removed.
>
> [1]
> http://www.google.com/search?q=posts_where+site:http://plugins.svn.wordpress.org/
>
> Mike
> --mdawaffe
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From bulk at thecodecave.com  Tue Aug 10 05:34:21 2010
From: bulk at thecodecave.com (Brian Layman)
Date: Tue, 10 Aug 2010 01:34:21 -0400
Subject: [wp-hackers] Alternative to posts_where hook
In-Reply-To: <AANLkTi=zzQ1edsyyFax5s_nzvWTvszzDkwOq1P=Tq1rd@mail.gmail.com>
References: <AANLkTimWc1OZXSwosRw4N0jUkf41OBDgnq5cEeOEZ0Wu@mail.gmail.com>	<AANLkTikgfAo7XK=F5DHOHh0EOCvT4y_J61aW-ghEguXh@mail.gmail.com>	<AANLkTimaYtYzA9wF4iE03CpJh5_to4fSgva3dSoWnJwQ@mail.gmail.com>	<AANLkTi=J9kc6KwToatdakW1GVnoKOjSxGqbTHSBCHcsP@mail.gmail.com>
	<AANLkTi=zzQ1edsyyFax5s_nzvWTvszzDkwOq1P=Tq1rd@mail.gmail.com>
Message-ID: <001301cb384d$af3deee0$0db9cca0$@com>


> On Mon, Aug 9, 2010 at 8:34 PM, Rich ZenMaster <richzenmaster at gmail.com>
> wrote:
> > http://wpseek.com/hook/posts_where/
> I don't know why this site marks posts_where as deprecated.
> > http://adambrown.info/p/wp_hooks/hook/posts_where
> This claims posts_where is not in 3.0, but it is

Adam's site is automated to look for exact code but in 3.0 there were subtle
changes that do not affect the behavior but do break his auto-documenting
site.

In this example it is a change to use apply_filters_ref_array:

OLD-
$where = apply_filters('posts_where', $where);

NEW-
$where = apply_filters_ref_array('posts_where', array( $where, &$this ) );
______________________________________________
Brian Layman
eHermits, Inc.
TheCodeCave.com?/?eHermitsInc.com?/?twitter.com/BrianLayman /
facebook.com/eHermit




From richzenmaster at gmail.com  Tue Aug 10 05:37:27 2010
From: richzenmaster at gmail.com (Rich ZenMaster)
Date: Mon, 9 Aug 2010 22:37:27 -0700
Subject: [wp-hackers] Alternative to posts_where hook
In-Reply-To: <001301cb384d$af3deee0$0db9cca0$@com>
References: <AANLkTimWc1OZXSwosRw4N0jUkf41OBDgnq5cEeOEZ0Wu@mail.gmail.com>
	<AANLkTikgfAo7XK=F5DHOHh0EOCvT4y_J61aW-ghEguXh@mail.gmail.com>
	<AANLkTimaYtYzA9wF4iE03CpJh5_to4fSgva3dSoWnJwQ@mail.gmail.com>
	<AANLkTi=J9kc6KwToatdakW1GVnoKOjSxGqbTHSBCHcsP@mail.gmail.com>
	<AANLkTi=zzQ1edsyyFax5s_nzvWTvszzDkwOq1P=Tq1rd@mail.gmail.com>
	<001301cb384d$af3deee0$0db9cca0$@com>
Message-ID: <AANLkTi=6BG-LOo3U2RYRoWH1tsGtbrrYj6qgnM48SeMr@mail.gmail.com>

This is not good for beginners like me as I depends on these sites for the
information (whenever the official docs don't have it). Is reading the WP
code the only way to learn?

On Mon, Aug 9, 2010 at 10:34 PM, Brian Layman <bulk at thecodecave.com> wrote:

>
> > On Mon, Aug 9, 2010 at 8:34 PM, Rich ZenMaster <richzenmaster at gmail.com>
> > wrote:
> > > http://wpseek.com/hook/posts_where/
> > I don't know why this site marks posts_where as deprecated.
> > > http://adambrown.info/p/wp_hooks/hook/posts_where
> > This claims posts_where is not in 3.0, but it is
>
> Adam's site is automated to look for exact code but in 3.0 there were
> subtle
> changes that do not affect the behavior but do break his auto-documenting
> site.
>
> In this example it is a change to use apply_filters_ref_array:
>
> OLD-
> $where = apply_filters('posts_where', $where);
>
> NEW-
> $where = apply_filters_ref_array('posts_where', array( $where, &$this ) );
> ______________________________________________
> Brian Layman
> eHermits, Inc.
> TheCodeCave.com / eHermitsInc.com / twitter.com/BrianLayman /
> facebook.com/eHermit
>
>
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From Gavin.Pearce at 3seven9.com  Tue Aug 10 08:31:55 2010
From: Gavin.Pearce at 3seven9.com (Gavin Pearce)
Date: Tue, 10 Aug 2010 09:31:55 +0100
Subject: [wp-hackers] wp-admin folder and admin-ajax.php
In-Reply-To: <AANLkTikfOqQPCT0Dq2ngy=q_nipVy4p0WFZO2z4U7APb@mail.gmail.com>
References: <CD47955B7E065D48AB5CF226C2ED75C02E3266@tbs-sbs01.TBS.local>
	<20100809163404.GZ25853@nicolaskuttler.de><CD47955B7E065D48AB5CF226C2ED75C02E326A@tbs-sbs01.TBS.local>
	<AANLkTin-MD+Agq+pcMAjHd9VstK4n2yrz1k_f=dWj9-3@mail.gmail.com>
	<AANLkTi=n6VsnOUBUqLk0Uy3zvbukdz1xWCZbhVfOa61+@mail.gmail.com>
	<AANLkTikfOqQPCT0Dq2ngy=q_nipVy4p0WFZO2z4U7APb@mail.gmail.com>
Message-ID: <CD47955B7E065D48AB5CF226C2ED75C02E3270@tbs-sbs01.TBS.local>

Hi Andrew,

As per my email - that doesn't really address the issue, or suggest why
the ticket was closed. The resolution in the ticket states:

"admin-ajax.php can be used (and is better for) for front-end/nopriv
AJAX requests".

I understand it "can" be used - but in what way is it "better"?

Being the only file within wp-admin that is required sometimes by the
front-end, just because "it works", doesn't seem a valid reason?

In the ticket, just before removing the file, TobaisBG raises some good
points that seem to have been missed. If a site has htaccess restriction
on the wp-admin area, as suggested in various places in the CODEX (and
not altogether a bad idea), this will break any plugins that rely on
AJAX. You can't expect plugin developers to ask people to modify their
htaccess files to get their plugin to work... Let's not even begin on
SSL ...

Thanks,
Gavin

-----Original Message-----
From: wp-hackers-bounces at lists.automattic.com
[mailto:wp-hackers-bounces at lists.automattic.com] On Behalf Of Andrew
Nacin
Sent: 10 August 2010 05:11
To: wp-hackers at lists.automattic.com
Subject: Re: [wp-hackers] wp-admin folder and admin-ajax.php

On Mon, Aug 9, 2010 at 5:27 PM, Lox <lox.dev at knc.nc> wrote:

> 2010/8/10 Andrew Nacin <wp at andrewnacin.com>:
> > Aside from the reasons highlighted in the post, I've additionally
> > cross-referenced the dev chat from March 25
> > http://core.trac.wordpress.org/ticket/12400#comment:29
>
> I wonder why the front-end ajax was added and then removed:
>
> nacin - 5 months ago
>
>    * status changed from reopened to closed
>    * resolution set to fixed
>
> (In [13828]) Remove wp-ajax.php. admin-ajax.php can be used (and is
> better for) for front-end/nopriv AJAX requests. fixes #12400


Your answer can be found in the ticket and dev chat that's already been
linked to.
_______________________________________________
wp-hackers mailing list
wp-hackers at lists.automattic.com
http://lists.automattic.com/mailman/listinfo/wp-hackers

From KrisY at tbs.uk.com  Tue Aug 10 09:19:01 2010
From: KrisY at tbs.uk.com (Kris Young)
Date: Tue, 10 Aug 2010 10:19:01 +0100
Subject: [wp-hackers] wp-admin folder and admin-ajax.php
In-Reply-To: <AANLkTikfOqQPCT0Dq2ngy=q_nipVy4p0WFZO2z4U7APb@mail.gmail.com>
References: <CD47955B7E065D48AB5CF226C2ED75C02E3266@tbs-sbs01.TBS.local>
	<20100809163404.GZ25853@nicolaskuttler.de><CD47955B7E065D48AB5CF226C2ED75C02E326A@tbs-sbs01.TBS.local>
	<AANLkTin-MD+Agq+pcMAjHd9VstK4n2yrz1k_f=dWj9-3@mail.gmail.com>
	<AANLkTi=n6VsnOUBUqLk0Uy3zvbukdz1xWCZbhVfOa61+@mail.gmail.com>
	<AANLkTikfOqQPCT0Dq2ngy=q_nipVy4p0WFZO2z4U7APb@mail.gmail.com>
Message-ID: <CD47955B7E065D48AB5CF226C2ED75C02E3276@tbs-sbs01.TBS.local>

Agreed with Gavin. The ticket (and its 'resolution') actually doesn't
help at all.

Any alternatives?

-----Original Message-----
From: wp-hackers-bounces at lists.automattic.com
[mailto:wp-hackers-bounces at lists.automattic.com] On Behalf Of Andrew
Nacin
Sent: 10 August 2010 05:11
To: wp-hackers at lists.automattic.com
Subject: Re: [wp-hackers] wp-admin folder and admin-ajax.php

On Mon, Aug 9, 2010 at 5:27 PM, Lox <lox.dev at knc.nc> wrote:

> 2010/8/10 Andrew Nacin <wp at andrewnacin.com>:
> > Aside from the reasons highlighted in the post, I've additionally
> > cross-referenced the dev chat from March 25
> > http://core.trac.wordpress.org/ticket/12400#comment:29
>
> I wonder why the front-end ajax was added and then removed:
>
> nacin - 5 months ago
>
>    * status changed from reopened to closed
>    * resolution set to fixed
>
> (In [13828]) Remove wp-ajax.php. admin-ajax.php can be used (and is
> better for) for front-end/nopriv AJAX requests. fixes #12400


Your answer can be found in the ticket and dev chat that's already been
linked to.
_______________________________________________
wp-hackers mailing list
wp-hackers at lists.automattic.com
http://lists.automattic.com/mailman/listinfo/wp-hackers

From scribu at gmail.com  Tue Aug 10 11:11:29 2010
From: scribu at gmail.com (scribu)
Date: Tue, 10 Aug 2010 14:11:29 +0300
Subject: [wp-hackers] Alternative to posts_where hook
In-Reply-To: <AANLkTi=6BG-LOo3U2RYRoWH1tsGtbrrYj6qgnM48SeMr@mail.gmail.com>
References: <AANLkTimWc1OZXSwosRw4N0jUkf41OBDgnq5cEeOEZ0Wu@mail.gmail.com>
	<AANLkTikgfAo7XK=F5DHOHh0EOCvT4y_J61aW-ghEguXh@mail.gmail.com>
	<AANLkTimaYtYzA9wF4iE03CpJh5_to4fSgva3dSoWnJwQ@mail.gmail.com>
	<AANLkTi=J9kc6KwToatdakW1GVnoKOjSxGqbTHSBCHcsP@mail.gmail.com>
	<AANLkTi=zzQ1edsyyFax5s_nzvWTvszzDkwOq1P=Tq1rd@mail.gmail.com>
	<001301cb384d$af3deee0$0db9cca0$@com>
	<AANLkTi=6BG-LOo3U2RYRoWH1tsGtbrrYj6qgnM48SeMr@mail.gmail.com>
Message-ID: <AANLkTimQmfEe4S6V=Vqh9m9As2ETzs7JxGZUGm66kH0X@mail.gmail.com>

On Tue, Aug 10, 2010 at 8:37 AM, Rich ZenMaster <richzenmaster at gmail.com>wrote:

> This is not good for beginners like me as I depends on these sites for the
> information (whenever the official docs don't have it). Is reading the WP
> code the only way to learn?
>

It will always have the most up-to-date information. There's no way around
that.


-- 
http://scribu.net

From 24-7 at gmx.net  Tue Aug 10 12:01:27 2010
From: 24-7 at gmx.net (24/7)
Date: Tue, 10 Aug 2010 05:01:27 -0700 (PDT)
Subject: [wp-hackers] Alternative to posts_where hook
In-Reply-To: <AANLkTimQmfEe4S6V=Vqh9m9As2ETzs7JxGZUGm66kH0X@mail.gmail.com>
References: <AANLkTimWc1OZXSwosRw4N0jUkf41OBDgnq5cEeOEZ0Wu@mail.gmail.com> 
	<AANLkTikgfAo7XK=F5DHOHh0EOCvT4y_J61aW-ghEguXh@mail.gmail.com> 
	<AANLkTimaYtYzA9wF4iE03CpJh5_to4fSgva3dSoWnJwQ@mail.gmail.com> 
	<AANLkTi=J9kc6KwToatdakW1GVnoKOjSxGqbTHSBCHcsP@mail.gmail.com> 
	<AANLkTi=zzQ1edsyyFax5s_nzvWTvszzDkwOq1P=Tq1rd@mail.gmail.com> 
	<001301cb384d$af3deee0$0db9cca0$@com>
	<AANLkTi=6BG-LOo3U2RYRoWH1tsGtbrrYj6qgnM48SeMr@mail.gmail.com> 
	<AANLkTimQmfEe4S6V=Vqh9m9As2ETzs7JxGZUGm66kH0X@mail.gmail.com>
Message-ID: <d532f33e-5fa8-4733-8bfa-3bd8319056d9@e15g2000yqo.googlegroups.com>

@Rich: There are some other good references too: If you google for
"php xref wordpress 3.0" you will get here: http://phpxref.com/xref/wordpress/nav.html?index.html
That let's you search in a "function reference" or in whole files.
Then you can see for yourself.

From mikeschinkel at newclarity.net  Tue Aug 10 12:51:16 2010
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Tue, 10 Aug 2010 08:51:16 -0400
Subject: [wp-hackers] Query Taxonomy in Pages
In-Reply-To: <AANLkTikpquM+2bYqOR4sQeaMXp+_zpovxH6zFu_G=eF5@mail.gmail.com>
References: <AANLkTikpquM+2bYqOR4sQeaMXp+_zpovxH6zFu_G=eF5@mail.gmail.com>
Message-ID: <B15BA5A3-DD36-4B75-8B0F-0DC2E78F8B20@newclarity.net>

Devin,

I believe this can handle your "OR" of page tags:

add_filter('posts_where','my_posts_where',10,2 );
function my_posts_where( $sql_where,$query ) {
	global $wpdb;
	if (!empty($query->query['page-tags'])) {
		$page_tags = explode(',',$query->query['page-tags']);
		$slug_templates = implode(',',array_fill(0,count($page_tags),'%s'));
		$add_where = <<<SQL
AND {$wpdb->posts}.ID IN (SELECT tr.object_id
FROM {$wpdb->term_relationships} tr INNER JOIN {$wpdb->term_taxonomy} tt ON tr.term_taxonomy_id = tt.term_taxonomy_id
INNER JOIN wp_terms t ON t.term_id = tt.term_id WHERE t.slug IN ($slug_templates))
SQL;
		$add_where = $wpdb->prepare($add_where,$page_tags);
	}
	return "$sql_where $add_where ";
}


On Aug 9, 2010, at 2:05 PM, Devin Dixon wrote:

> Hey all,
> 
> I am trying to query pages based on taxonomy. The pages have a custom
> taxonomy called 'page-tags' . The followings arguments work when
> passed into  WP_Query().
> 
> $args=array(
>  'page-tags' => 'basic tag' ,
>  'post_type' => 'page',
>  //'post_status' => 'publish',
>  //'posts_per_page' => -1,
>  'caller_get_posts'=> 1
> );
> 
> This will pull all the pages with the tag 'basic tag', it works. Now
> the problem comes into play when I try to add in more than one tags.
> For example:
> 
> $args=array(
>  'page-tags' => "basic tag, 2nd tag" ,
>  'post_type' => 'page',
>  //'post_status' => 'publish',
>  //'posts_per_page' => -1,
>  'caller_get_posts'=> 1
> );
> 
> Then nothing is return in the query.  i've also tried using
> 'page-tags' => array('basic tag', '2nd tag')
> 
> and that still doesn't work. So my question is, how can I use an OR
> for the taxonomy?
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers


From mikeschinkel at newclarity.net  Tue Aug 10 13:02:28 2010
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Tue, 10 Aug 2010 09:02:28 -0400
Subject: [wp-hackers] pre_get_posts problem
In-Reply-To: <AANLkTimV2WTcnnp_Wu1089G4fL-RLm3_tFst2B01ajBk@mail.gmail.com>
References: <AANLkTikTL-q76TTdddbE=wqbVvsD=MbiTda_GagatiY+@mail.gmail.com>
	<BA63B8DC-E51D-4F3A-8F0A-30ACB1B7F6C7@newclarity.net>
	<AANLkTikrZfPKZ4ZwR3j-RspeTgLK8nn2tTQq1MfQESoi@mail.gmail.com>
	<8EC0A1DD-FFDF-4899-A85E-AE6399C8360D@newclarity.net>
	<AANLkTimV2WTcnnp_Wu1089G4fL-RLm3_tFst2B01ajBk@mail.gmail.com>
Message-ID: <E89B7A27-090E-4896-8CDE-C93FE489D0D3@newclarity.net>

On Aug 9, 2010, at 4:05 AM, Krusty Ruffle wrote:
> I'm sorry, I was tired when I sent that last email and was not really very
> clear. I did not just do a copy/paste of the code provided, I tried the
> following to make sure it would work before I even tried adding the post
> types.
> 
> add_filter( 'parse_query', 'my_parse_query' );
> function my_parse_query( $query ) {
>      print_r( $query ); die();
> }
> 
> This causes me to get a page with nothing but the $query on most pages
> however, It does nothing on the blog index.

You've got something else going on in your system with other plugins or something. You'll have to track that does first.  Try disabling other plugins.

> The main blog index still loads a page with only the built in post types on it.
> This leads me to believe that the 'parse_query' action is not being called there.

It sounds like it is being called but $query contains nothing it seems.  Try this to see if "We're Here" shows up.

add_filter( 'parse_query', 'my_parse_query' );
function my_parse_query( $query ) {
     echo "We're Here!";
     print_r( $query ); die();
}

> Looking at the
> source code on lines 1548 & 1549 of query.php shows that the action does
> indeed depend on an if() statement. Unfortunately parse_query() is a rather
> long function and I was too tired to concentrate properly so I have not read
> through it well enough to fully understand what it's doing or why it might
> not be called.

Want to figure it out without having to "mentally execute" the code?  Get an IDE w/debugger (I use PhpStorm+XDEBUG.)

-Mike

From lox.dev at knc.nc  Tue Aug 10 21:50:42 2010
From: lox.dev at knc.nc (Lox)
Date: Wed, 11 Aug 2010 08:50:42 +1100
Subject: [wp-hackers] Best practice: custom registration form
In-Reply-To: <AANLkTiks+eySGkCjggY6D3t-dvV3dnqot0hkrys-0zFs@mail.gmail.com>
References: <AANLkTinpqj-dUb5BmyiJ1Mnpgbdy_6ocx=myOGVqVOXK@mail.gmail.com>
	<AANLkTinzPn2Ng_eA1iAMgvSAFJJ+kw+mgkd1Dd+dAYCF@mail.gmail.com>
	<AANLkTi=NbiGEihSY0a2ve7v92WyPdVhTRtuscjXDZCd_@mail.gmail.com>
	<AANLkTi=x4vQV8vcG0PhBC+KkOOpKZr=e0WNm5BTHCJ6P@mail.gmail.com>
	<AANLkTinQojtDJsw__bpjVr0f3bpPvv3HCzHNQU7Kn8wg@mail.gmail.com>
	<AANLkTimd3AL36hjRP9ao6-gjYdJsEqgsWxqbBNavM82-@mail.gmail.com>
	<4C58732C.4000302@mrhead.sk>
	<AANLkTinZcoie7hYDWXOO2CBzzGU_JUHbneMe+H3==XmR@mail.gmail.com>
	<AANLkTik4TA_82waFYCmqqms3nyrLsLmV_gYAoWMGM9yA@mail.gmail.com>
	<AANLkTi=PxQnTWf9uZp4md6GJNq58iyR8f873-CfCR-Xs@mail.gmail.com>
	<AANLkTikZ6odC5gVANwuBdZnd3CJ0GJmGm4A-7=BvTwTr@mail.gmail.com>
	<AANLkTiks+eySGkCjggY6D3t-dvV3dnqot0hkrys-0zFs@mail.gmail.com>
Message-ID: <AANLkTikMHV50m5FfYgejxVbqTLB88-Mygc8Es7ZDf6ZX@mail.gmail.com>

2010/8/5 Otto <otto at ottodestruct.com>:
> Well, it kinda has to. All the logic for creating users and logged
> them in and such always passes through wp-login.php.
>
> Still, you can put the redirect option on there and wp-login will
> redirect them to anywhere you like after it does its thing.

Hi,

As my customer wanted AJAX I couldn't use that function and had to
duplicate wp-login.php. (wordpress definitly needs a better, more
flexible login/registration implementation)

One thing I do not understand in wp-login.php, is the $interim_login
var usage. What is it for ?
(http://paste2.org/p/945736 line 248)

Regards

-- 
Lox
lox.dev at knc.nc

From otto at ottodestruct.com  Tue Aug 10 22:32:21 2010
From: otto at ottodestruct.com (Otto)
Date: Tue, 10 Aug 2010 17:32:21 -0500
Subject: [wp-hackers] Best practice: custom registration form
In-Reply-To: <AANLkTikMHV50m5FfYgejxVbqTLB88-Mygc8Es7ZDf6ZX@mail.gmail.com>
References: <AANLkTinpqj-dUb5BmyiJ1Mnpgbdy_6ocx=myOGVqVOXK@mail.gmail.com> 
	<AANLkTinzPn2Ng_eA1iAMgvSAFJJ+kw+mgkd1Dd+dAYCF@mail.gmail.com> 
	<AANLkTi=NbiGEihSY0a2ve7v92WyPdVhTRtuscjXDZCd_@mail.gmail.com> 
	<AANLkTi=x4vQV8vcG0PhBC+KkOOpKZr=e0WNm5BTHCJ6P@mail.gmail.com> 
	<AANLkTinQojtDJsw__bpjVr0f3bpPvv3HCzHNQU7Kn8wg@mail.gmail.com> 
	<AANLkTimd3AL36hjRP9ao6-gjYdJsEqgsWxqbBNavM82-@mail.gmail.com> 
	<4C58732C.4000302@mrhead.sk>
	<AANLkTinZcoie7hYDWXOO2CBzzGU_JUHbneMe+H3==XmR@mail.gmail.com> 
	<AANLkTik4TA_82waFYCmqqms3nyrLsLmV_gYAoWMGM9yA@mail.gmail.com> 
	<AANLkTi=PxQnTWf9uZp4md6GJNq58iyR8f873-CfCR-Xs@mail.gmail.com> 
	<AANLkTikZ6odC5gVANwuBdZnd3CJ0GJmGm4A-7=BvTwTr@mail.gmail.com> 
	<AANLkTiks+eySGkCjggY6D3t-dvV3dnqot0hkrys-0zFs@mail.gmail.com> 
	<AANLkTikMHV50m5FfYgejxVbqTLB88-Mygc8Es7ZDf6ZX@mail.gmail.com>
Message-ID: <AANLkTikPRnmyYp85OoXukSpU7gFPBJFqOvGvALG0nwkm@mail.gmail.com>

On Tue, Aug 10, 2010 at 4:50 PM, Lox <lox.dev at knc.nc> wrote:
> As my customer wanted AJAX I couldn't use that function and had to
> duplicate wp-login.php. (wordpress definitly needs a better, more
> flexible login/registration implementation)

I don't see why using AJAX or not would make any difference. You can
send a POST to the wp-login.php from wherever you like. It'll return
cookies and such to the browser and then the redirect can be set to
make it redirect to your own code.

-Otto

From lox.dev at knc.nc  Tue Aug 10 22:46:48 2010
From: lox.dev at knc.nc (Lox)
Date: Wed, 11 Aug 2010 09:46:48 +1100
Subject: [wp-hackers] Best practice: custom registration form
In-Reply-To: <AANLkTikPRnmyYp85OoXukSpU7gFPBJFqOvGvALG0nwkm@mail.gmail.com>
References: <AANLkTinpqj-dUb5BmyiJ1Mnpgbdy_6ocx=myOGVqVOXK@mail.gmail.com>
	<AANLkTinzPn2Ng_eA1iAMgvSAFJJ+kw+mgkd1Dd+dAYCF@mail.gmail.com>
	<AANLkTi=NbiGEihSY0a2ve7v92WyPdVhTRtuscjXDZCd_@mail.gmail.com>
	<AANLkTi=x4vQV8vcG0PhBC+KkOOpKZr=e0WNm5BTHCJ6P@mail.gmail.com>
	<AANLkTinQojtDJsw__bpjVr0f3bpPvv3HCzHNQU7Kn8wg@mail.gmail.com>
	<AANLkTimd3AL36hjRP9ao6-gjYdJsEqgsWxqbBNavM82-@mail.gmail.com>
	<4C58732C.4000302@mrhead.sk>
	<AANLkTinZcoie7hYDWXOO2CBzzGU_JUHbneMe+H3==XmR@mail.gmail.com>
	<AANLkTik4TA_82waFYCmqqms3nyrLsLmV_gYAoWMGM9yA@mail.gmail.com>
	<AANLkTi=PxQnTWf9uZp4md6GJNq58iyR8f873-CfCR-Xs@mail.gmail.com>
	<AANLkTikZ6odC5gVANwuBdZnd3CJ0GJmGm4A-7=BvTwTr@mail.gmail.com>
	<AANLkTiks+eySGkCjggY6D3t-dvV3dnqot0hkrys-0zFs@mail.gmail.com>
	<AANLkTikMHV50m5FfYgejxVbqTLB88-Mygc8Es7ZDf6ZX@mail.gmail.com>
	<AANLkTikPRnmyYp85OoXukSpU7gFPBJFqOvGvALG0nwkm@mail.gmail.com>
Message-ID: <AANLkTi=2tSvBxgLkOZqp1=pLrxh33pjZebZ-bSbFXGe9@mail.gmail.com>

2010/8/11 Otto <otto at ottodestruct.com>:
> I don't see why using AJAX or not would make any difference. You can
> send a POST to the wp-login.php from wherever you like. It'll return
> cookies and such to the browser and then the redirect can be set to
> make it redirect to your own code.

If I send a POST to wp-login.php using AJAX, I get an html page in
response to my request, whereas I just need a valid/invalid flag, an
array of errors (if any) and a redirect_to var (if redirect is
needed).

-- 
Lox
lox.dev at knc.nc

From lox.dev at knc.nc  Tue Aug 10 22:49:06 2010
From: lox.dev at knc.nc (Lox)
Date: Wed, 11 Aug 2010 09:49:06 +1100
Subject: [wp-hackers] Best practice: custom registration form
In-Reply-To: <AANLkTi=2tSvBxgLkOZqp1=pLrxh33pjZebZ-bSbFXGe9@mail.gmail.com>
References: <AANLkTinpqj-dUb5BmyiJ1Mnpgbdy_6ocx=myOGVqVOXK@mail.gmail.com> 
	<AANLkTinzPn2Ng_eA1iAMgvSAFJJ+kw+mgkd1Dd+dAYCF@mail.gmail.com> 
	<AANLkTi=NbiGEihSY0a2ve7v92WyPdVhTRtuscjXDZCd_@mail.gmail.com> 
	<AANLkTi=x4vQV8vcG0PhBC+KkOOpKZr=e0WNm5BTHCJ6P@mail.gmail.com> 
	<AANLkTinQojtDJsw__bpjVr0f3bpPvv3HCzHNQU7Kn8wg@mail.gmail.com> 
	<AANLkTimd3AL36hjRP9ao6-gjYdJsEqgsWxqbBNavM82-@mail.gmail.com> 
	<4C58732C.4000302@mrhead.sk>
	<AANLkTinZcoie7hYDWXOO2CBzzGU_JUHbneMe+H3==XmR@mail.gmail.com> 
	<AANLkTik4TA_82waFYCmqqms3nyrLsLmV_gYAoWMGM9yA@mail.gmail.com> 
	<AANLkTi=PxQnTWf9uZp4md6GJNq58iyR8f873-CfCR-Xs@mail.gmail.com> 
	<AANLkTikZ6odC5gVANwuBdZnd3CJ0GJmGm4A-7=BvTwTr@mail.gmail.com> 
	<AANLkTiks+eySGkCjggY6D3t-dvV3dnqot0hkrys-0zFs@mail.gmail.com> 
	<AANLkTikMHV50m5FfYgejxVbqTLB88-Mygc8Es7ZDf6ZX@mail.gmail.com> 
	<AANLkTikPRnmyYp85OoXukSpU7gFPBJFqOvGvALG0nwkm@mail.gmail.com> 
	<AANLkTi=2tSvBxgLkOZqp1=pLrxh33pjZebZ-bSbFXGe9@mail.gmail.com>
Message-ID: <AANLkTimqaL38ZZXEHTZ8EB+fNpU_QxrgM3nhBrghf2Fs@mail.gmail.com>

2010/8/11 Lox <lox.dev at knc.nc>:
> If I send a POST to wp-login.php using AJAX, I get an html page in
> response to my request, whereas I just need a valid/invalid flag, an
> array of errors (if any) and a redirect_to var (if redirect is
> needed).

And the "message".


-- 
Lox
lox.dev at knc.nc

From lox.dev at knc.nc  Tue Aug 10 23:34:38 2010
From: lox.dev at knc.nc (Lox)
Date: Wed, 11 Aug 2010 10:34:38 +1100
Subject: [wp-hackers] Best practice: access plugins php files
Message-ID: <AANLkTi=bnW=PG8FwKdBD0fJzSu8oU9inTc7Pi0ykdYJV@mail.gmail.com>

Hello,

This is a simple question but I want to be sure about it.

I have a plug in called myplugin, inside it I have an ajax.php file to
submit ajax requests.

Should I call it directly like this:
/wp-content/plugins/myplugin/ajax.php or is there a preferred way ?

Regards

-- 
Lox
lox.dev at knc.nc

From scribu at gmail.com  Tue Aug 10 23:49:06 2010
From: scribu at gmail.com (scribu)
Date: Wed, 11 Aug 2010 02:49:06 +0300
Subject: [wp-hackers] Best practice: access plugins php files
In-Reply-To: <AANLkTi=bnW=PG8FwKdBD0fJzSu8oU9inTc7Pi0ykdYJV@mail.gmail.com>
References: <AANLkTi=bnW=PG8FwKdBD0fJzSu8oU9inTc7Pi0ykdYJV@mail.gmail.com>
Message-ID: <AANLkTin4rJ5Bjz+xysDu74cc03Xw3YruOtDNyG-KtF7m@mail.gmail.com>

On Wed, Aug 11, 2010 at 2:34 AM, Lox <lox.dev at knc.nc> wrote:

> Should I call it directly like this:
> /wp-content/plugins/myplugin/ajax.php or is there a preferred way ?
>

The recommended way is to use the ajax hooks in wp-admin/admin-ajax.php


-- 
http://scribu.net

From aaron at jorb.in  Tue Aug 10 23:55:54 2010
From: aaron at jorb.in (Aaron Jorbin)
Date: Tue, 10 Aug 2010 19:55:54 -0400
Subject: [wp-hackers] Best practice: access plugins php files
In-Reply-To: <AANLkTin4rJ5Bjz+xysDu74cc03Xw3YruOtDNyG-KtF7m@mail.gmail.com>
References: <AANLkTi=bnW=PG8FwKdBD0fJzSu8oU9inTc7Pi0ykdYJV@mail.gmail.com>
	<AANLkTin4rJ5Bjz+xysDu74cc03Xw3YruOtDNyG-KtF7m@mail.gmail.com>
Message-ID: <AANLkTinCcRPi28AJx6sScrEFwqQfQDwK39D1tMcFTM2Z@mail.gmail.com>

On Wed, Aug 11, 2010 at 2:34 AM, Lox <lox.dev at knc.nc> wrote:

> Should I call it directly like this:
> /wp-content/plugins/myplugin/ajax.php or is there a preferred way ?
>

It's documented in the codex.  http://codex.wordpress.org/AJAX_in_Plugins .
 Don't access the files directly, use the hooks available specifically for
this.

-Aaron

http://aaron.jorb.in
twitter: twitter.com/aaronjorbin

From lox.dev at knc.nc  Wed Aug 11 00:02:59 2010
From: lox.dev at knc.nc (Lox)
Date: Wed, 11 Aug 2010 11:02:59 +1100
Subject: [wp-hackers] Best practice: access plugins php files
In-Reply-To: <AANLkTin4rJ5Bjz+xysDu74cc03Xw3YruOtDNyG-KtF7m@mail.gmail.com>
References: <AANLkTi=bnW=PG8FwKdBD0fJzSu8oU9inTc7Pi0ykdYJV@mail.gmail.com> 
	<AANLkTin4rJ5Bjz+xysDu74cc03Xw3YruOtDNyG-KtF7m@mail.gmail.com>
Message-ID: <AANLkTimuNtnGC15G8pCkweJ670Pf_vVDQ4DTYGkZrWh2@mail.gmail.com>

2010/8/11 scribu <scribu at gmail.com>:
> The recommended way is to use the ajax hooks in wp-admin/admin-ajax.php

I know that for AJAX, thks. Maybe it was not the best example...

So, I have a help.php in my plug-in dir witch get called by thickbox
as an iframe. This file provides help for form fields: example,
help.php?field=password. So basically, it does not need any wordpress
thing.

Should I access it like this:
wp-content/plugins/myplugin/help.php?field=password ?

-- 
Lox
lox.dev at knc.nc

From johnbillion+wp at gmail.com  Wed Aug 11 01:11:54 2010
From: johnbillion+wp at gmail.com (John Blackbourn)
Date: Wed, 11 Aug 2010 02:11:54 +0100
Subject: [wp-hackers] Best practice: access plugins php files
In-Reply-To: <AANLkTimuNtnGC15G8pCkweJ670Pf_vVDQ4DTYGkZrWh2@mail.gmail.com>
References: <AANLkTi=bnW=PG8FwKdBD0fJzSu8oU9inTc7Pi0ykdYJV@mail.gmail.com>
	<AANLkTin4rJ5Bjz+xysDu74cc03Xw3YruOtDNyG-KtF7m@mail.gmail.com>
	<AANLkTimuNtnGC15G8pCkweJ670Pf_vVDQ4DTYGkZrWh2@mail.gmail.com>
Message-ID: <AANLkTik5btyr5er5B7vtnbwP6WJxdb6Ne-s6zAX3+rZT@mail.gmail.com>

On Wed, Aug 11, 2010 at 1:02 AM, Lox <lox.dev at knc.nc> wrote:
> Should I access it like this:
> wp-content/plugins/myplugin/help.php?field=password ?

No you shouldn't use this because it's possible that a user's plugins
are not stored in wp-content/plugins (see
http://codex.wordpress.org/Determining_Plugin_and_Content_Directories).

I personally use the following to get the location of my plugin:

$plugin_dir = WP_PLUGIN_URL . '/' . basename( dirname( __FILE__ ) );

Then your file would be at:

$plugin_dir . '/help.php?field=password';

but there is a function called plugin_dir_url() which should give you
the same thing. You need to pass it __FILE__ as a parameter. I don't
personally use this because I'm stuck in my old ways and but I assume
it correctly does what I've just told you it does. Sure someone will
correct me if not.

John

From aaron at jorb.in  Wed Aug 11 01:36:02 2010
From: aaron at jorb.in (Aaron Jorbin)
Date: Tue, 10 Aug 2010 21:36:02 -0400
Subject: [wp-hackers] Best practice: access plugins php files
In-Reply-To: <AANLkTimuNtnGC15G8pCkweJ670Pf_vVDQ4DTYGkZrWh2@mail.gmail.com>
References: <AANLkTi=bnW=PG8FwKdBD0fJzSu8oU9inTc7Pi0ykdYJV@mail.gmail.com> 
	<AANLkTin4rJ5Bjz+xysDu74cc03Xw3YruOtDNyG-KtF7m@mail.gmail.com> 
	<AANLkTimuNtnGC15G8pCkweJ670Pf_vVDQ4DTYGkZrWh2@mail.gmail.com>
Message-ID: <AANLkTik-_ACHdi=k7mxS54aL=uKoTjmDZDvrozf+HhmV@mail.gmail.com>

On Tue, Aug 10, 2010 at 8:02 PM, Lox <lox.dev at knc.nc> wrote:

> So, I have a help.php in my plug-in dir witch get called by thickbox
> as an iframe. This file provides help for form fields: example,
> help.php?field=password. So basically, it does not need any wordpress
> thing.
>

Why not stay consistent with the rest of the WordPress experience and use
add_contextual_help ?

http://phpxref.ftwr.co.uk/wordpress/wp-admin/includes/template.php.source.html#l3670

http://aaron.jorb.in
twitter: twitter.com/aaronjorbin


On Tue, Aug 10, 2010 at 8:02 PM, Lox <lox.dev at knc.nc> wrote:

> 2010/8/11 scribu <scribu at gmail.com>:
> > The recommended way is to use the ajax hooks in wp-admin/admin-ajax.php
>
> I know that for AJAX, thks. Maybe it was not the best example...
>
> So, I have a help.php in my plug-in dir witch get called by thickbox
> as an iframe. This file provides help for form fields: example,
> help.php?field=password. So basically, it does not need any wordpress
> thing.
>
> Should I access it like this:
> wp-content/plugins/myplugin/help.php?field=password ?
>
> --
> Lox
> lox.dev at knc.nc
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From likethegoddess at gmail.com  Wed Aug 11 02:19:14 2010
From: likethegoddess at gmail.com (Diana Thompson)
Date: Tue, 10 Aug 2010 19:19:14 -0700
Subject: [wp-hackers] Forcing Multisite to use sub-directories (was:
	Removing WordPress Multisite data)
Message-ID: <AANLkTikwqvPruUZ6HVPN+L39gU_EmecEM_90UbFqLqpH@mail.gmail.com>

Thanks, Navjot, for the link. I'd missed the fields in the users table.

I've managed to un-stick my installation though, as Ashish mentioned, I'm
stuck with sub-domains which my host doesn't allow.

I found a technique to force a multisite install to use sub-directories at
http://journalxtra.com/2010/07/how-to-force-multi-site-to-use-subdirectories/?
To summarize, it calls for changing the multisite setting in wp-config.php
to define( 'SUBDOMAIN_INSTALL', false ); and the .htaccess file to:

# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index.php$ - [L]

# uploaded files
RewriteRule ^([_0-9a-zA-Z-]+/)?files/(.+)  wp-includes/ms-files.php?file=$2
[L]

# add a trailing slash to /wp-admin
RewriteRule ^([_0-9a-zA-Z-]+/)?wp-admin$ $1wp-admin/ [R=301,L]

RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]
RewriteRule  ^([_0-9a-zA-Z-]+/)?(wp-(content|admin|includes).*) $2 [L]
RewriteRule  ^([_0-9a-zA-Z-]+/)?(.*.php)$ $2 [L]
RewriteRule . index.php [L]
</IfModule>
# END WordPress

Has anyone tried this technique or have another recommendation?

Diana

-- 
like the goddess design
www.likethegoddess.com

From lox.dev at knc.nc  Wed Aug 11 02:57:41 2010
From: lox.dev at knc.nc (Lox)
Date: Wed, 11 Aug 2010 13:57:41 +1100
Subject: [wp-hackers] Best practice: access plugins php files
In-Reply-To: <AANLkTik-_ACHdi=k7mxS54aL=uKoTjmDZDvrozf+HhmV@mail.gmail.com>
References: <AANLkTi=bnW=PG8FwKdBD0fJzSu8oU9inTc7Pi0ykdYJV@mail.gmail.com> 
	<AANLkTin4rJ5Bjz+xysDu74cc03Xw3YruOtDNyG-KtF7m@mail.gmail.com> 
	<AANLkTimuNtnGC15G8pCkweJ670Pf_vVDQ4DTYGkZrWh2@mail.gmail.com> 
	<AANLkTik-_ACHdi=k7mxS54aL=uKoTjmDZDvrozf+HhmV@mail.gmail.com>
Message-ID: <AANLkTinr1xtF7o5oVGJHMdPNpE=aQk6PwFM+RBj_rreF@mail.gmail.com>

2010/8/11 John Blackbourn <johnbillion+wp at gmail.com>:
> I personally use the following to get the location of my plugin:
>
> $plugin_dir = WP_PLUGIN_URL . '/' . basename( dirname( __FILE__ ) );
>
> Then your file would be at:
>
> $plugin_dir . '/help.php?field=password';

I know how to get the url to my plugins, thks.

So it seems the best practice is to access plug-ins scripts directly
when needed. I was just wondering if there was a sort of wrapper to
achieve it. Seems there is not. Thanks.

2010/8/11 Aaron Jorbin <aaron at jorb.in>:
> Why not stay consistent with the rest of the WordPress experience and use
> add_contextual_help ?
>
> http://phpxref.ftwr.co.uk/wordpress/wp-admin/includes/template.php.source.html#l3670

Because the help system I talk about is located in the front-end ....
And, come on, it is just an example ...

-- 
Lox
lox.dev at knc.nc

From goldenapplesdesign at gmail.com  Wed Aug 11 04:38:16 2010
From: goldenapplesdesign at gmail.com (Nathaniel Taintor)
Date: Wed, 11 Aug 2010 00:38:16 -0400
Subject: [wp-hackers] How to mark a hacked file to skip update checks
Message-ID: <AANLkTikeM476QQt6DeMOjSf7udT=kS6nt9XKSNfs0hN9@mail.gmail.com>

Hi all... I've got a fairly basic question about best practices in hacking
plugins or themes. (Yeah, I know its best not to do it at all, but sometimes
budget or time makes it necessary... )

My question is: what is the best way of marking a hacked plugin to keep it
from checking for updates? Especially with the way the one-click updates
work, I would really hate for a client to forget that I told them
specifically not to update particular plugins and wipe out features that I
worked hard to add in.

I looked around and saw this blog post of Paul's talking about hooking into
'transient_update_plugins' to hide the update nag from specific plugins,
which is a pretty neat trick:

http://www.codehooligans.com/2009/08/30/disable-wordpress-plugins-update-indicator-for-inactive-plugins/

But I would think it would make sense if there was an easier way to do it:
say, a simple tag that could be added to the header to disable update
checks. Is there anything like that out there?

Than
goldenapplesdesign.com

From curtis at curtismchale.ca  Wed Aug 11 04:55:31 2010
From: curtis at curtismchale.ca (Curtis McHale)
Date: Tue, 10 Aug 2010 21:55:31 -0700
Subject: [wp-hackers] How to mark a hacked file to skip update checks
In-Reply-To: <AANLkTikeM476QQt6DeMOjSf7udT=kS6nt9XKSNfs0hN9@mail.gmail.com>
References: <AANLkTikeM476QQt6DeMOjSf7udT=kS6nt9XKSNfs0hN9@mail.gmail.com>
Message-ID: <4C622D43.4090502@curtismchale.ca>

I'm not sure if it's the recommended way but I move plugins that I've 
had to hack to my functions file. They don't show up in the plugin menu 
any longer so don't seem to get update notification, at least not that 
I've noticed. This also means that my clients can't deactivate it by 
accident.

Nathaniel Taintor wrote:
> Hi all... I've got a fairly basic question about best practices in hacking
> plugins or themes. (Yeah, I know its best not to do it at all, but sometimes
> budget or time makes it necessary... )
>
> My question is: what is the best way of marking a hacked plugin to keep it
> from checking for updates? Especially with the way the one-click updates
> work, I would really hate for a client to forget that I told them
> specifically not to update particular plugins and wipe out features that I
> worked hard to add in.
>
> I looked around and saw this blog post of Paul's talking about hooking into
> 'transient_update_plugins' to hide the update nag from specific plugins,
> which is a pretty neat trick:
>
> http://www.codehooligans.com/2009/08/30/disable-wordpress-plugins-update-indicator-for-inactive-plugins/
>
> But I would think it would make sense if there was an easier way to do it:
> say, a simple tag that could be added to the header to disable update
> checks. Is there anything like that out there?
>
> Than
> goldenapplesdesign.com
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>    

-- 
Curtis McHale

604.751.3482
http://curtismchale.ca
http://twitter.com/curtismchale
http://ca.linkedin.com/in/curtismchale


From lox.dev at knc.nc  Wed Aug 11 05:17:27 2010
From: lox.dev at knc.nc (Lox)
Date: Wed, 11 Aug 2010 16:17:27 +1100
Subject: [wp-hackers] How to mark a hacked file to skip update checks
In-Reply-To: <AANLkTikeM476QQt6DeMOjSf7udT=kS6nt9XKSNfs0hN9@mail.gmail.com>
References: <AANLkTikeM476QQt6DeMOjSf7udT=kS6nt9XKSNfs0hN9@mail.gmail.com>
Message-ID: <AANLkTim9zSN4Q15az7c8b0cSeYO-RW_kR7Yys4jOQJPq@mail.gmail.com>

2010/8/11 Nathaniel Taintor <goldenapplesdesign at gmail.com>:
> I looked around and saw this blog post of Paul's talking about hooking into
> 'transient_update_plugins' to hide the update nag from specific plugins,
> which is a pretty neat trick:
>
> http://www.codehooligans.com/2009/08/30/disable-wordpress-plugins-update-indicator-for-inactive-plugins/

As you said it is a neat trick. As far as I know there is no build in
way to achieve it.

-- 
Lox
lox.dev at knc.nc

From johnbillion+wp at gmail.com  Wed Aug 11 05:24:38 2010
From: johnbillion+wp at gmail.com (John Blackbourn)
Date: Wed, 11 Aug 2010 06:24:38 +0100
Subject: [wp-hackers] How to mark a hacked file to skip update checks
In-Reply-To: <AANLkTim9zSN4Q15az7c8b0cSeYO-RW_kR7Yys4jOQJPq@mail.gmail.com>
References: <AANLkTikeM476QQt6DeMOjSf7udT=kS6nt9XKSNfs0hN9@mail.gmail.com>
	<AANLkTim9zSN4Q15az7c8b0cSeYO-RW_kR7Yys4jOQJPq@mail.gmail.com>
Message-ID: <AANLkTin_KWOyZoLvvVxqv9mnV-aQ1Qu7XNkqTtHfxurN@mail.gmail.com>

Easier: Set the version number in the plugin (or theme) to 99999.

On Wed, Aug 11, 2010 at 6:17 AM, Lox <lox.dev at knc.nc> wrote:
> 2010/8/11 Nathaniel Taintor <goldenapplesdesign at gmail.com>:
>> I looked around and saw this blog post of Paul's talking about hooking into
>> 'transient_update_plugins' to hide the update nag from specific plugins,
>> which is a pretty neat trick:
>>
>> http://www.codehooligans.com/2009/08/30/disable-wordpress-plugins-update-indicator-for-inactive-plugins/
>
> As you said it is a neat trick. As far as I know there is no build in
> way to achieve it.
>
> --
> Lox
> lox.dev at knc.nc
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From lox.dev at knc.nc  Wed Aug 11 05:27:05 2010
From: lox.dev at knc.nc (Lox)
Date: Wed, 11 Aug 2010 16:27:05 +1100
Subject: [wp-hackers] Changing user role, bug ?
Message-ID: <AANLkTimcyokfYQPG_DFXKgUqi-EV_G41NCW7z5hdZ7ft@mail.gmail.com>

Hello,

In a custom registration form I made, the email adress of subscribers needs
to be validated. So when one subscribes, it is added to a custom role called
'inactive'. Right after subscribing, the subscriber receives an email
containing an activation link (with a key and the user_login in the query
string)

After checking the key and the user_login, I need to change the user role to
'subscriber', so I do:

<?php
$user = new WP_User($user->ID);
$user->set_role( 'subscriber ');
?>

After one activates and looking to my users in wp-admin, this user has no
role! The 'inactive' role has been removed, but it seems the 'subscriber'
role hasn't been added.

   - User object before set_role() :http://paste2.org/p/946080
   - User object after set_role() : http://paste2.org/p/946081

*Note:* I did also tried $user->remove_role('inactive') and then
$user->add_role('subscriober') with the same problem: 'inactive' gets
removed but 'subscriber' is not added.

Regards.

-- 
Lox
lox.dev at knc.nc

From lox.dev at knc.nc  Wed Aug 11 06:10:12 2010
From: lox.dev at knc.nc (Lox)
Date: Wed, 11 Aug 2010 17:10:12 +1100
Subject: [wp-hackers] Changing user role, bug ?
In-Reply-To: <AANLkTimcyokfYQPG_DFXKgUqi-EV_G41NCW7z5hdZ7ft@mail.gmail.com>
References: <AANLkTimcyokfYQPG_DFXKgUqi-EV_G41NCW7z5hdZ7ft@mail.gmail.com>
Message-ID: <AANLkTinjehVVENcpvJi+_62RPADFfB9DJcD8+KyfxpT6@mail.gmail.com>

2010/8/11 Lox <lox.dev at knc.nc>

> $user->set_role( 'subscriber ');
>

Forget it, it was a type.... Sorry.

-- 
Lox
lox.dev at knc.nc

From krustyruffle at rustykruffle.com  Wed Aug 11 08:08:25 2010
From: krustyruffle at rustykruffle.com (Krusty Ruffle)
Date: Wed, 11 Aug 2010 04:08:25 -0400
Subject: [wp-hackers] pre_get_posts problem
In-Reply-To: <E89B7A27-090E-4896-8CDE-C93FE489D0D3@newclarity.net>
References: <AANLkTikTL-q76TTdddbE=wqbVvsD=MbiTda_GagatiY+@mail.gmail.com>
	<BA63B8DC-E51D-4F3A-8F0A-30ACB1B7F6C7@newclarity.net>
	<AANLkTikrZfPKZ4ZwR3j-RspeTgLK8nn2tTQq1MfQESoi@mail.gmail.com>
	<8EC0A1DD-FFDF-4899-A85E-AE6399C8360D@newclarity.net>
	<AANLkTimV2WTcnnp_Wu1089G4fL-RLm3_tFst2B01ajBk@mail.gmail.com>
	<E89B7A27-090E-4896-8CDE-C93FE489D0D3@newclarity.net>
Message-ID: <AANLkTimjHZE5O8hr6iwjhJPWmD9xqMvqMtFd=CiKBe9K@mail.gmail.com>

> > This causes me to get a page with nothing but the $query on most pages
> > however, It does nothing on the blog index.
>
> You've got something else going on in your system with other plugins or
> something. You'll have to track that does first.  Try disabling other
> plugins.
>
> > The main blog index still loads a page with only the built in post types
> on it.
> > This leads me to believe that the 'parse_query' action is not being
> called there.
>
> It sounds like it is being called but $query contains nothing it seems.
>  Try this to see if "We're Here" shows up.
>

If this were the case wouldn't the die() cause it to print a blank page and
not a normal page of posts?


>
> add_filter( 'parse_query', 'my_parse_query' );
> function my_parse_query( $query ) {
>      echo "We're Here!";
>     print_r( $query ); die();
> }
>

After disabling all plugins, including the one for the post type actually,
then switching to the Twenty Ten theme and placing the code in the
functions.php file this still did nothing on the main index.

After doing a bunch of looking around through WordPress files it seems that
'parse_query' filter is indeed not called on the index page. I think I may
have figured out how I can use the 'request' filter though... I'll send an
email to the list tomorow to see if anyone can verify that it's right or
wrong or what kind of issues it may have.

Thanks again for your help!

From peter.westwood at ftwr.co.uk  Wed Aug 11 08:53:24 2010
From: peter.westwood at ftwr.co.uk (Peter Westwood)
Date: Wed, 11 Aug 2010 09:53:24 +0100
Subject: [wp-hackers] wp-admin folder and admin-ajax.php
In-Reply-To: <AANLkTikg+p0j41_PgaerUqC52VUYoWnG2c_MHjEOQHg-@mail.gmail.com>
References: <CD47955B7E065D48AB5CF226C2ED75C02E3266@tbs-sbs01.TBS.local>
	<AANLkTikg+p0j41_PgaerUqC52VUYoWnG2c_MHjEOQHg-@mail.gmail.com>
Message-ID: <A49D9910-A81F-4F24-B7AA-20E47C1B7134@ftwr.co.uk>


On 9 Aug 2010, at 14:54, scribu wrote:

> On Mon, Aug 9, 2010 at 4:27 PM, Gavin Pearce <Gavin.Pearce at 3seven9.com>wrote:
> 
>> Does anyone know of any plans or discussions, regarding a
>> "configuration" option for moving the wp-admin folder? Is it in the
>> pipeline?
>> 
> 
> No discussions that I'm aware of.
> 

Highly unlikely.

> 
> 
>> Working on hardening a WordPress install for a security conscious
>> client, I can't IP restrict the wp-admin folder, because admin-ajax.php
>> is sometimes required by the front-end. Seems a strange idea to me!
>> (Obviously ways around this, just seems a strange way of doing things -
>> maybe someone can explain why?).
>> 
>> Can't find a ticket open for either of the above, but maybe I'm being
>> blind!
>> 
> 
> A front-end ajax handler has been proposed before:
> 
> http://core.trac.wordpress.org/ticket/12400
> 


We toyed for a very short time with a front end ajax handler and the problem is that for significantly important security reasons we send different cookies for front end page views than we do for admin ones.

Basically on the front end we have a cookie to say that you are logged in but that doesn't actually authorise you to perform any actions and for the admin we have the authorisation cookie.

This makes it much easier to ensure that a site is well protected against XSS issues allowing people to steal your cookies.

If you have a plugin that is using admin-ajax for something which doesn't require authentication then it should likely be rewritten to not require access to admin-ajax otherwise you want it to use it for the improved security.

Cheers

westi
-- 
Peter Westwood
http://blog.ftwr.co.uk | http://westi.wordpress.com
C53C F8FC 8796 8508 88D6 C950 54F4 5DCD A834 01C5


From peter.westwood at ftwr.co.uk  Wed Aug 11 09:07:09 2010
From: peter.westwood at ftwr.co.uk (Peter Westwood)
Date: Wed, 11 Aug 2010 10:07:09 +0100
Subject: [wp-hackers] Best practice: access plugins php files
In-Reply-To: <AANLkTinr1xtF7o5oVGJHMdPNpE=aQk6PwFM+RBj_rreF@mail.gmail.com>
References: <AANLkTi=bnW=PG8FwKdBD0fJzSu8oU9inTc7Pi0ykdYJV@mail.gmail.com>
	<AANLkTin4rJ5Bjz+xysDu74cc03Xw3YruOtDNyG-KtF7m@mail.gmail.com>
	<AANLkTimuNtnGC15G8pCkweJ670Pf_vVDQ4DTYGkZrWh2@mail.gmail.com>
	<AANLkTik-_ACHdi=k7mxS54aL=uKoTjmDZDvrozf+HhmV@mail.gmail.com>
	<AANLkTinr1xtF7o5oVGJHMdPNpE=aQk6PwFM+RBj_rreF@mail.gmail.com>
Message-ID: <425D0794-888C-4043-90ED-20327CE3B510@ftwr.co.uk>


On 11 Aug 2010, at 03:57, Lox wrote:

> 2010/8/11 John Blackbourn <johnbillion+wp at gmail.com>:
>> I personally use the following to get the location of my plugin:
>> 
>> $plugin_dir = WP_PLUGIN_URL . '/' . basename( dirname( __FILE__ ) );
>> 
>> Then your file would be at:
>> 
>> $plugin_dir . '/help.php?field=password';
> 
> I know how to get the url to my plugins, thks.
> 
> So it seems the best practice is to access plug-ins scripts directly
> when needed. I was just wondering if there was a sort of wrapper to
> achieve it. Seems there is not. Thanks.


Best practise for this is to access the file directly if you don't need any WordPress functionality.

You should use plugins_url() to get the url to a file.

plugins_url( __FILE__, 'help.php?field=password');

This way you are covered for custom wp-content locations, https and other things that might change in future

westi
-- 
Peter Westwood
http://blog.ftwr.co.uk | http://westi.wordpress.com
C53C F8FC 8796 8508 88D6 C950 54F4 5DCD A834 01C5


From Gavin.Pearce at 3seven9.com  Wed Aug 11 09:14:44 2010
From: Gavin.Pearce at 3seven9.com (Gavin Pearce)
Date: Wed, 11 Aug 2010 10:14:44 +0100
Subject: [wp-hackers] wp-admin folder and admin-ajax.php
In-Reply-To: <A49D9910-A81F-4F24-B7AA-20E47C1B7134@ftwr.co.uk>
References: <CD47955B7E065D48AB5CF226C2ED75C02E3266@tbs-sbs01.TBS.local><AANLkTikg+p0j41_PgaerUqC52VUYoWnG2c_MHjEOQHg-@mail.gmail.com>
	<A49D9910-A81F-4F24-B7AA-20E47C1B7134@ftwr.co.uk>
Message-ID: <CD47955B7E065D48AB5CF226C2ED75C02E32AD@tbs-sbs01.TBS.local>

Thanks Westi!

Out of interest then, and in that case - how would you personally best
handle non-auth, front-end, AJAX (and then having access to the various
WP instances/classes/DB) without hooking into the WordPress AJAX
function at admin-ajax.php?

All the main guides seem to point towards using admin-ajax ...

http://www.wphardcore.com/2010/5-tips-for-using-ajax-in-wordpress/
http://www.1stwebdesigner.com/wordpress/implement-ajax-wordpress-themes/

Cheers,
Gav

-----Original Message-----
From: wp-hackers-bounces at lists.automattic.com
[mailto:wp-hackers-bounces at lists.automattic.com] On Behalf Of Peter
Westwood
Sent: 11 August 2010 09:53
To: wp-hackers at lists.automattic.com
Subject: Re: [wp-hackers] wp-admin folder and admin-ajax.php


On 9 Aug 2010, at 14:54, scribu wrote:

> On Mon, Aug 9, 2010 at 4:27 PM, Gavin Pearce
<Gavin.Pearce at 3seven9.com>wrote:
> 
>> Does anyone know of any plans or discussions, regarding a
>> "configuration" option for moving the wp-admin folder? Is it in the
>> pipeline?
>> 
> 
> No discussions that I'm aware of.
> 

Highly unlikely.

> 
> 
>> Working on hardening a WordPress install for a security conscious
>> client, I can't IP restrict the wp-admin folder, because
admin-ajax.php
>> is sometimes required by the front-end. Seems a strange idea to me!
>> (Obviously ways around this, just seems a strange way of doing things
-
>> maybe someone can explain why?).
>> 
>> Can't find a ticket open for either of the above, but maybe I'm being
>> blind!
>> 
> 
> A front-end ajax handler has been proposed before:
> 
> http://core.trac.wordpress.org/ticket/12400
> 


We toyed for a very short time with a front end ajax handler and the
problem is that for significantly important security reasons we send
different cookies for front end page views than we do for admin ones.

Basically on the front end we have a cookie to say that you are logged
in but that doesn't actually authorise you to perform any actions and
for the admin we have the authorisation cookie.

This makes it much easier to ensure that a site is well protected
against XSS issues allowing people to steal your cookies.

If you have a plugin that is using admin-ajax for something which
doesn't require authentication then it should likely be rewritten to not
require access to admin-ajax otherwise you want it to use it for the
improved security.

Cheers

westi
-- 
Peter Westwood
http://blog.ftwr.co.uk | http://westi.wordpress.com
C53C F8FC 8796 8508 88D6 C950 54F4 5DCD A834 01C5

_______________________________________________
wp-hackers mailing list
wp-hackers at lists.automattic.com
http://lists.automattic.com/mailman/listinfo/wp-hackers

From ben at thewhiteroom.net  Wed Aug 11 09:19:10 2010
From: ben at thewhiteroom.net (Ben Huson)
Date: Wed, 11 Aug 2010 10:19:10 +0100
Subject: [wp-hackers] wp-admin folder and admin-ajax.php
In-Reply-To: <A49D9910-A81F-4F24-B7AA-20E47C1B7134@ftwr.co.uk>
References: <CD47955B7E065D48AB5CF226C2ED75C02E3266@tbs-sbs01.TBS.local>
	<AANLkTikg+p0j41_PgaerUqC52VUYoWnG2c_MHjEOQHg-@mail.gmail.com>
	<A49D9910-A81F-4F24-B7AA-20E47C1B7134@ftwr.co.uk>
Message-ID: <AANLkTik-VigVo_fQ7Q1W_ZB1hB2-POGmD9_sNp38235m@mail.gmail.com>

Thanks Westi,

I'm also interested in some AJAX tips, I found lots of talk about how
WordPress wasn't going to implement a front end ajax handler for
'security reasons' but no real insight into what those reasons were,
so thank you for clarifying that.

So if it is necessary to use front end AJAX that doesn't require
authentication, for example to return a post query or something, we
should write our own handler for that - a bit like the long switch
statement in admin-ajax.php.

I like the way that admin-ajax.php makes use of the do_action(
'wp_ajax_' . $_GET['action'] ) hook. It would be nice to implement
something like this for front end AJAX calls but are there any
security implications with this (presuming that you have validated
that $_GET['action'] is a safe string)

- Ben



On 11 August 2010 09:53, Peter Westwood <peter.westwood at ftwr.co.uk> wrote:
>
> On 9 Aug 2010, at 14:54, scribu wrote:
>
>> On Mon, Aug 9, 2010 at 4:27 PM, Gavin Pearce <Gavin.Pearce at 3seven9.com>wrote:
>>
>>> Does anyone know of any plans or discussions, regarding a
>>> "configuration" option for moving the wp-admin folder? Is it in the
>>> pipeline?
>>>
>>
>> No discussions that I'm aware of.
>>
>
> Highly unlikely.
>
>>
>>
>>> Working on hardening a WordPress install for a security conscious
>>> client, I can't IP restrict the wp-admin folder, because admin-ajax.php
>>> is sometimes required by the front-end. Seems a strange idea to me!
>>> (Obviously ways around this, just seems a strange way of doing things -
>>> maybe someone can explain why?).
>>>
>>> Can't find a ticket open for either of the above, but maybe I'm being
>>> blind!
>>>
>>
>> A front-end ajax handler has been proposed before:
>>
>> http://core.trac.wordpress.org/ticket/12400
>>
>
>
> We toyed for a very short time with a front end ajax handler and the problem is that for significantly important security reasons we send different cookies for front end page views than we do for admin ones.
>
> Basically on the front end we have a cookie to say that you are logged in but that doesn't actually authorise you to perform any actions and for the admin we have the authorisation cookie.
>
> This makes it much easier to ensure that a site is well protected against XSS issues allowing people to steal your cookies.
>
> If you have a plugin that is using admin-ajax for something which doesn't require authentication then it should likely be rewritten to not require access to admin-ajax otherwise you want it to use it for the improved security.
>
> Cheers
>
> westi
> --
> Peter Westwood
> http://blog.ftwr.co.uk | http://westi.wordpress.com
> C53C F8FC 8796 8508 88D6 C950 54F4 5DCD A834 01C5
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From lists at robv.de  Wed Aug 11 09:20:22 2010
From: lists at robv.de (rovo89)
Date: Wed, 11 Aug 2010 11:20:22 +0200
Subject: [wp-hackers] How to mark a hacked file to skip update checks
In-Reply-To: <AANLkTin_KWOyZoLvvVxqv9mnV-aQ1Qu7XNkqTtHfxurN@mail.gmail.com>
References: <AANLkTikeM476QQt6DeMOjSf7udT=kS6nt9XKSNfs0hN9@mail.gmail.com>	<AANLkTim9zSN4Q15az7c8b0cSeYO-RW_kR7Yys4jOQJPq@mail.gmail.com>
	<AANLkTin_KWOyZoLvvVxqv9mnV-aQ1Qu7XNkqTtHfxurN@mail.gmail.com>
Message-ID: <4C626B56.9020805@robv.de>

Mark Jaquith explained how to exclude a plugin/theme from update checks:

http://markjaquith.wordpress.com/2009/12/14/excluding-your-plugin-or-theme-from-update-checks/

There doesn't seem to be a simple "Update: No" flag though.

From lox.dev at knc.nc  Wed Aug 11 09:25:48 2010
From: lox.dev at knc.nc (Lox)
Date: Wed, 11 Aug 2010 20:25:48 +1100
Subject: [wp-hackers] wp-admin folder and admin-ajax.php
In-Reply-To: <A49D9910-A81F-4F24-B7AA-20E47C1B7134@ftwr.co.uk>
References: <CD47955B7E065D48AB5CF226C2ED75C02E3266@tbs-sbs01.TBS.local>
	<AANLkTikg+p0j41_PgaerUqC52VUYoWnG2c_MHjEOQHg-@mail.gmail.com>
	<A49D9910-A81F-4F24-B7AA-20E47C1B7134@ftwr.co.uk>
Message-ID: <AANLkTinbMmBZSjNLfMd0cVurN6+bh6Hdh8YJiTk+kh_u@mail.gmail.com>

2010/8/11 Peter Westwood <peter.westwood at ftwr.co.uk>

> If you have a plugin that is using admin-ajax for something which doesn't
> require authentication then it should likely be rewritten to not require
> access to admin-ajax otherwise you want it to use it for the improved
> security.
>

I use ajax-admin.php for a login form (so user is not yet authenticated),
and it works nicely.
Isn't it "best practice" ? What are the security issue of doing so ?

Regards

-- 
Lox
lox.dev at knc.nc

From ben at thewhiteroom.net  Wed Aug 11 09:47:19 2010
From: ben at thewhiteroom.net (Ben Huson)
Date: Wed, 11 Aug 2010 10:47:19 +0100
Subject: [wp-hackers] wp-admin folder and admin-ajax.php
In-Reply-To: <AANLkTinbMmBZSjNLfMd0cVurN6+bh6Hdh8YJiTk+kh_u@mail.gmail.com>
References: <CD47955B7E065D48AB5CF226C2ED75C02E3266@tbs-sbs01.TBS.local>
	<AANLkTikg+p0j41_PgaerUqC52VUYoWnG2c_MHjEOQHg-@mail.gmail.com>
	<A49D9910-A81F-4F24-B7AA-20E47C1B7134@ftwr.co.uk>
	<AANLkTinbMmBZSjNLfMd0cVurN6+bh6Hdh8YJiTk+kh_u@mail.gmail.com>
Message-ID: <AANLkTi=jE7vYCDoi20XeCQtO1z4WkCeFEjD1h_Ji3Ti-@mail.gmail.com>

Lox,

The difficulty is if a user has their wp-admin folder protected with
htacess (either IP restricted or password protected as an extra level
of security), then the AJAX requests won't work unless a user is
authenticated.

- Ben

On 11 August 2010 10:25, Lox <lox.dev at knc.nc> wrote:
> 2010/8/11 Peter Westwood <peter.westwood at ftwr.co.uk>
>
>> If you have a plugin that is using admin-ajax for something which doesn't
>> require authentication then it should likely be rewritten to not require
>> access to admin-ajax otherwise you want it to use it for the improved
>> security.
>>
>
> I use ajax-admin.php for a login form (so user is not yet authenticated),
> and it works nicely.
> Isn't it "best practice" ? What are the security issue of doing so ?
>
> Regards
>
> --
> Lox
> lox.dev at knc.nc
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From frank at bueltge.de  Wed Aug 11 10:11:49 2010
From: frank at bueltge.de (Frank Bueltge)
Date: Wed, 11 Aug 2010 12:11:49 +0200
Subject: [wp-hackers] Hook boginfo_url
In-Reply-To: <AANLkTinKPBz8EvYmS55erL-vi6LyrPo35L3k3xpku9xK@mail.gmail.com>
References: <AANLkTinKPBz8EvYmS55erL-vi6LyrPo35L3k3xpku9xK@mail.gmail.com>
Message-ID: <AANLkTimiZROQDe+dN5vT5691e3oKV3r919kG435NOYV8@mail.gmail.com>

The function dont work for stylesheet_directory - maybe an idea - Many
thanks.

On Mon, Aug 9, 2010 at 12:45 PM, Frank Bueltge <frank at bueltge.de> wrote:

> Hello,
>
> i will change the url for use CDN on themes and uploads of my WP install.
> I have write a small function and im not sure, if use the hook correctl
> for  - 9999, 2)
>
> Thanks for your feedback.
>
> Here my small function
>
> if ( !function_exists('fb_add_static_wpurl') ) {
>     function fb_add_static_wpurl($info, $show) {
>
>         $keys = array(
>             'wpurl',
>             'stylesheet_url',
>             'stylesheet_directory',
>             'template_url',
>             'template_directory',
>             );
>
>         if ( in_array( $show, $keys ) ) {
>
>             $wpurl = get_bloginfo('wpurl');
>
>             $search = array(
>                 $wpurl . '/wp-content/images/',
>                 $wpurl . '/wp-content/download/',
>                 $wpurl . '/wp-content/themes/',
>             );
>
>             $replace = array(
>                 'http://cdn1.example.com/',
>                 'http://cdn2.example.com/',
>                 'http://cdn3.example.com/',
>             );
>
>             return str_replace( $search, $replace, $info );
>
>         } else {
>             return $info;
>         }
>     }
>
>     add_filter( 'bloginfo_url', 'fb_add_static_wpurl', 9999, 2 );
> }
>
> Best wishes
> Frank
>

From peter.westwood at ftwr.co.uk  Wed Aug 11 10:49:17 2010
From: peter.westwood at ftwr.co.uk (Peter Westwood)
Date: Wed, 11 Aug 2010 11:49:17 +0100
Subject: [wp-hackers] wp-admin folder and admin-ajax.php
In-Reply-To: <CD47955B7E065D48AB5CF226C2ED75C02E32AD@tbs-sbs01.TBS.local>
References: <CD47955B7E065D48AB5CF226C2ED75C02E3266@tbs-sbs01.TBS.local><AANLkTikg+p0j41_PgaerUqC52VUYoWnG2c_MHjEOQHg-@mail.gmail.com>
	<A49D9910-A81F-4F24-B7AA-20E47C1B7134@ftwr.co.uk>
	<CD47955B7E065D48AB5CF226C2ED75C02E32AD@tbs-sbs01.TBS.local>
Message-ID: <F2F4C529-9EB8-4AC1-9A4C-A15638E76456@ftwr.co.uk>


On 11 Aug 2010, at 10:14, Gavin Pearce wrote:

> Thanks Westi!
> 
> Out of interest then, and in that case - how would you personally best
> handle non-auth, front-end, AJAX (and then having access to the various
> WP instances/classes/DB) without hooking into the WordPress AJAX
> function at admin-ajax.php?
> 
> All the main guides seem to point towards using admin-ajax ...
> 

Sorry I missed this out my response earlier.

For unauthenticated actions use a no_priv action hook.

Line 46 of admin-ajax.php

do_action( 'wp_ajax_nopriv_' . $_REQUEST['action'] );

westi
-- 
Peter Westwood
http://blog.ftwr.co.uk | http://westi.wordpress.com
C53C F8FC 8796 8508 88D6 C950 54F4 5DCD A834 01C5


From Gavin.Pearce at 3seven9.com  Wed Aug 11 11:18:50 2010
From: Gavin.Pearce at 3seven9.com (Gavin Pearce)
Date: Wed, 11 Aug 2010 12:18:50 +0100
Subject: [wp-hackers] wp-admin folder and admin-ajax.php
In-Reply-To: <F2F4C529-9EB8-4AC1-9A4C-A15638E76456@ftwr.co.uk>
References: <CD47955B7E065D48AB5CF226C2ED75C02E3266@tbs-sbs01.TBS.local><AANLkTikg+p0j41_PgaerUqC52VUYoWnG2c_MHjEOQHg-@mail.gmail.com><A49D9910-A81F-4F24-B7AA-20E47C1B7134@ftwr.co.uk><CD47955B7E065D48AB5CF226C2ED75C02E32AD@tbs-sbs01.TBS.local>
	<F2F4C529-9EB8-4AC1-9A4C-A15638E76456@ftwr.co.uk>
Message-ID: <CD47955B7E065D48AB5CF226C2ED75C02E32B1@tbs-sbs01.TBS.local>

Hi Westi,

That would still mean pointing to wp-admin/admin-ajax.php though I believe?

Which goes back to the issue of being able to secure the wp-admin folder. Some users, as suggested in the codex, will secure the entire wp-admin folder via IP or htaccess password protection, which would break any front-end AJAX hooking into this.

As a plugin developer, automatic installations would obviously fail in this use-case. 

Cheers,
Gav

-----Original Message-----
From: wp-hackers-bounces at lists.automattic.com [mailto:wp-hackers-bounces at lists.automattic.com] On Behalf Of Peter Westwood
Sent: 11 August 2010 11:49
To: wp-hackers at lists.automattic.com
Subject: Re: [wp-hackers] wp-admin folder and admin-ajax.php


On 11 Aug 2010, at 10:14, Gavin Pearce wrote:

> Thanks Westi!
> 
> Out of interest then, and in that case - how would you personally best
> handle non-auth, front-end, AJAX (and then having access to the various
> WP instances/classes/DB) without hooking into the WordPress AJAX
> function at admin-ajax.php?
> 
> All the main guides seem to point towards using admin-ajax ...
> 

Sorry I missed this out my response earlier.

For unauthenticated actions use a no_priv action hook.

Line 46 of admin-ajax.php

do_action( 'wp_ajax_nopriv_' . $_REQUEST['action'] );

westi
-- 
Peter Westwood
http://blog.ftwr.co.uk | http://westi.wordpress.com
C53C F8FC 8796 8508 88D6 C950 54F4 5DCD A834 01C5

_______________________________________________
wp-hackers mailing list
wp-hackers at lists.automattic.com
http://lists.automattic.com/mailman/listinfo/wp-hackers

From paul at codehooligans.com  Wed Aug 11 11:48:42 2010
From: paul at codehooligans.com (Paul)
Date: Wed, 11 Aug 2010 07:48:42 -0400
Subject: [wp-hackers] wp-admin folder and admin-ajax.php
In-Reply-To: <CD47955B7E065D48AB5CF226C2ED75C02E32B1@tbs-sbs01.TBS.local>
References: <CD47955B7E065D48AB5CF226C2ED75C02E3266@tbs-sbs01.TBS.local><AANLkTikg+p0j41_PgaerUqC52VUYoWnG2c_MHjEOQHg-@mail.gmail.com><A49D9910-A81F-4F24-B7AA-20E47C1B7134@ftwr.co.uk><CD47955B7E065D48AB5CF226C2ED75C02E32AD@tbs-sbs01.TBS.local>
	<F2F4C529-9EB8-4AC1-9A4C-A15638E76456@ftwr.co.uk>
	<CD47955B7E065D48AB5CF226C2ED75C02E32B1@tbs-sbs01.TBS.local>
Message-ID: <C464AFB2-5D28-404F-B56F-7B7F5B99586C@codehooligans.com>

For simple front-end AJAX needs which do not require authenticated access I don't use the admin-ajax.php hook.

Instead I just capture the action via my plugin's init function. Something like 

function init()
{
	// Normal init code here
	// blah blah blah

	// Handle front-end AJAX requests. 
	if (isset($_REQUEST['property_display_ajax_action']))
	{
		// Process my AJAX here!
		exit();		// Terminate the request
	}
}

You can still use the same code for your JS/AJAX as suggested on http://codex.wordpress.org/AJAX_in_Plugins
But with one issue. Since this is front-end the 'ajaxurl' is not set. So on your themes wp_footer(); action add it yourself. Mine just calls the front-end site url.

function property_wp_footer()
{
	?>
	<script type="text/javascript" >
		var ajaxurl = '<?php echo home_url( '/' );  ?>';
	</script>
	<?php
}
 




On Aug 11, 2010, at 7:18 AM, Gavin Pearce wrote:

> Hi Westi,
> 
> That would still mean pointing to wp-admin/admin-ajax.php though I believe?
> 
> Which goes back to the issue of being able to secure the wp-admin folder. Some users, as suggested in the codex, will secure the entire wp-admin folder via IP or htaccess password protection, which would break any front-end AJAX hooking into this.
> 
> As a plugin developer, automatic installations would obviously fail in this use-case. 
> 
> Cheers,
> Gav
> 
> -----Original Message-----
> From: wp-hackers-bounces at lists.automattic.com [mailto:wp-hackers-bounces at lists.automattic.com] On Behalf Of Peter Westwood
> Sent: 11 August 2010 11:49
> To: wp-hackers at lists.automattic.com
> Subject: Re: [wp-hackers] wp-admin folder and admin-ajax.php
> 
> 
> On 11 Aug 2010, at 10:14, Gavin Pearce wrote:
> 
>> Thanks Westi!
>> 
>> Out of interest then, and in that case - how would you personally best
>> handle non-auth, front-end, AJAX (and then having access to the various
>> WP instances/classes/DB) without hooking into the WordPress AJAX
>> function at admin-ajax.php?
>> 
>> All the main guides seem to point towards using admin-ajax ...
>> 
> 
> Sorry I missed this out my response earlier.
> 
> For unauthenticated actions use a no_priv action hook.
> 
> Line 46 of admin-ajax.php
> 
> do_action( 'wp_ajax_nopriv_' . $_REQUEST['action'] );
> 
> westi
> -- 
> Peter Westwood
> http://blog.ftwr.co.uk | http://westi.wordpress.com
> C53C F8FC 8796 8508 88D6 C950 54F4 5DCD A834 01C5
> 
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers


From paul at codehooligans.com  Wed Aug 11 11:57:39 2010
From: paul at codehooligans.com (Paul)
Date: Wed, 11 Aug 2010 07:57:39 -0400
Subject: [wp-hackers] How to mark a hacked file to skip update checks
In-Reply-To: <AANLkTim9zSN4Q15az7c8b0cSeYO-RW_kR7Yys4jOQJPq@mail.gmail.com>
References: <AANLkTikeM476QQt6DeMOjSf7udT=kS6nt9XKSNfs0hN9@mail.gmail.com>
	<AANLkTim9zSN4Q15az7c8b0cSeYO-RW_kR7Yys4jOQJPq@mail.gmail.com>
Message-ID: <E1FE26D4-36A6-4265-AEC3-44CB0EF6888D@codehooligans.com>

Well, to be clear on the intent of my blog post. At the time (not sure if this is still the case) WP would report updated needed for all plugins both active and inactive. This for whatever reason bugged my clients and me. So I wrote this to hide the update nag for inactive plugins. This was not for preventing any single plugin from being updated. Though that might be a nice upcoming feature. 

P-




On Aug 11, 2010, at 1:17 AM, Lox wrote:

> 2010/8/11 Nathaniel Taintor <goldenapplesdesign at gmail.com>:
>> I looked around and saw this blog post of Paul's talking about hooking into
>> 'transient_update_plugins' to hide the update nag from specific plugins,
>> which is a pretty neat trick:
>> 
>> http://www.codehooligans.com/2009/08/30/disable-wordpress-plugins-update-indicator-for-inactive-plugins/
> 
> As you said it is a neat trick. As far as I know there is no build in
> way to achieve it.
> 
> -- 
> Lox
> lox.dev at knc.nc
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers


From obviocity at gmail.com  Wed Aug 11 14:18:11 2010
From: obviocity at gmail.com (Amit Ashckenazi)
Date: Wed, 11 Aug 2010 11:18:11 -0300
Subject: [wp-hackers] visually sort ordering "custom post types" for end
	users
Message-ID: <AANLkTikEmthrDH0kRtErBBnj0w_qCC5EPhKt9X3VyZLA@mail.gmail.com>

Hi All,

Now with those custom post types and other ?bits of content? that
don?t necessarily need to be organized by chronologically by date, for
example: the client has a 100 T-Shirts as custom post type "SHIRT" and
he wants to set their appearance order.

what approach you suggest taking for letting the editor/admin of the
site SORT their order?

Thanks.
Amit

From mikeschinkel at newclarity.net  Wed Aug 11 14:44:57 2010
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Wed, 11 Aug 2010 10:44:57 -0400
Subject: [wp-hackers] visually sort ordering "custom post types" for end
	users
In-Reply-To: <AANLkTikEmthrDH0kRtErBBnj0w_qCC5EPhKt9X3VyZLA@mail.gmail.com>
References: <AANLkTikEmthrDH0kRtErBBnj0w_qCC5EPhKt9X3VyZLA@mail.gmail.com>
Message-ID: <09BECDB4-1116-44D5-9B7D-6692478BCE4C@newclarity.net>

On Aug 11, 2010, at 10:18 AM, Amit Ashckenazi wrote:
> Now with those custom post types and other ?bits of content? that
> don?t necessarily need to be organized by chronologically by date, for
> example: the client has a 100 T-Shirts as custom post type "SHIRT" and
> he wants to set their appearance order.
> 
> what approach you suggest taking for letting the editor/admin of the
> site SORT their order?

Hi Amit:

Use custom fields and sort by their meta_values.  These should help:

http://codex.wordpress.org/Function_Reference/query_posts#Custom_Field_Parameters
http://codex.wordpress.org/Function_Reference/query_posts#Orderby_Parameters

-Mike



From piemanek at gmail.com  Wed Aug 11 15:06:48 2010
From: piemanek at gmail.com (Simon Blackbourn)
Date: Wed, 11 Aug 2010 16:06:48 +0100
Subject: [wp-hackers] visually sort ordering "custom post types" for end
	users
In-Reply-To: <09BECDB4-1116-44D5-9B7D-6692478BCE4C@newclarity.net>
References: <AANLkTikEmthrDH0kRtErBBnj0w_qCC5EPhKt9X3VyZLA@mail.gmail.com>
	<09BECDB4-1116-44D5-9B7D-6692478BCE4C@newclarity.net>
Message-ID: <AANLkTi=-_LGVBC_pNKSAbpar-sPAvh7Hvu4eJer5CxK6@mail.gmail.com>

I use the existing menu_order column in the posts table to save creating yet
another meta field.

By default, this column is used for sorting pages but not posts, but if you
hook into the posts_orderby filter you can sort on this column for your
custom post type. Something like this should do the trick (might need
adjusting a bit for your case):

add_filter( 'posts_orderby', 'my_orderby' );

function my_orderby( $sql ) {

    global $wpdb, $wp_query;

    if( !is_search() && !is_single() && !is_admin() && 'shirt' ==
$wp_query->query_vars['post_type'] ) {
        return $wpdb->prefix . "menu_order ASC";
    }

    return $sql;

}

For a really nice drag n drop admin interface, you can edit the My Page
Order plugin (http://wordpress.org/extend/plugins/my-page-order/) to add a
new admin page for sorting your post type. I've done this for posts in the
past, shouldn't be too much work to do it for a custom post type.

Cheers
Simon

From otto at ottodestruct.com  Wed Aug 11 15:36:38 2010
From: otto at ottodestruct.com (Otto)
Date: Wed, 11 Aug 2010 10:36:38 -0500
Subject: [wp-hackers] wp-admin folder and admin-ajax.php
In-Reply-To: <C464AFB2-5D28-404F-B56F-7B7F5B99586C@codehooligans.com>
References: <CD47955B7E065D48AB5CF226C2ED75C02E3266@tbs-sbs01.TBS.local> 
	<AANLkTikg+p0j41_PgaerUqC52VUYoWnG2c_MHjEOQHg-@mail.gmail.com> 
	<A49D9910-A81F-4F24-B7AA-20E47C1B7134@ftwr.co.uk>
	<CD47955B7E065D48AB5CF226C2ED75C02E32AD@tbs-sbs01.TBS.local> 
	<F2F4C529-9EB8-4AC1-9A4C-A15638E76456@ftwr.co.uk>
	<CD47955B7E065D48AB5CF226C2ED75C02E32B1@tbs-sbs01.TBS.local> 
	<C464AFB2-5D28-404F-B56F-7B7F5B99586C@codehooligans.com>
Message-ID: <AANLkTi=ffEmM39oRozA-3wYZ0zenV8ij863ugjWahVBC@mail.gmail.com>

This is the same basic approach I use.

However, setting the ajaxurl to the home url isn't required, really.
If you're capturing via init, then any URL on the site works, since
init always triggers. So I tend to just use the current page URL.
Simpler.

-Otto



On Wed, Aug 11, 2010 at 6:48 AM, Paul <paul at codehooligans.com> wrote:
> For simple front-end AJAX needs which do not require authenticated access I don't use the admin-ajax.php hook.
>
> Instead I just capture the action via my plugin's init function. Something like
>
> function init()
> {
> ? ? ? ?// Normal init code here
> ? ? ? ?// blah blah blah
>
> ? ? ? ?// Handle front-end AJAX requests.
> ? ? ? ?if (isset($_REQUEST['property_display_ajax_action']))
> ? ? ? ?{
> ? ? ? ? ? ? ? ?// Process my AJAX here!
> ? ? ? ? ? ? ? ?exit(); ? ? ? ? // Terminate the request
> ? ? ? ?}
> }
>
> You can still use the same code for your JS/AJAX as suggested on http://codex.wordpress.org/AJAX_in_Plugins
> But with one issue. Since this is front-end the 'ajaxurl' is not set. So on your themes wp_footer(); action add it yourself. Mine just calls the front-end site url.
>
> function property_wp_footer()
> {
> ? ? ? ??>
> ? ? ? ?<script type="text/javascript" >
> ? ? ? ? ? ? ? ?var ajaxurl = '<?php echo home_url( '/' ); ??>';
> ? ? ? ?</script>
> ? ? ? ?<?php
> }
>
>
>
>
>
> On Aug 11, 2010, at 7:18 AM, Gavin Pearce wrote:
>
>> Hi Westi,
>>
>> That would still mean pointing to wp-admin/admin-ajax.php though I believe?
>>
>> Which goes back to the issue of being able to secure the wp-admin folder. Some users, as suggested in the codex, will secure the entire wp-admin folder via IP or htaccess password protection, which would break any front-end AJAX hooking into this.
>>
>> As a plugin developer, automatic installations would obviously fail in this use-case.
>>
>> Cheers,
>> Gav
>>
>> -----Original Message-----
>> From: wp-hackers-bounces at lists.automattic.com [mailto:wp-hackers-bounces at lists.automattic.com] On Behalf Of Peter Westwood
>> Sent: 11 August 2010 11:49
>> To: wp-hackers at lists.automattic.com
>> Subject: Re: [wp-hackers] wp-admin folder and admin-ajax.php
>>
>>
>> On 11 Aug 2010, at 10:14, Gavin Pearce wrote:
>>
>>> Thanks Westi!
>>>
>>> Out of interest then, and in that case - how would you personally best
>>> handle non-auth, front-end, AJAX (and then having access to the various
>>> WP instances/classes/DB) without hooking into the WordPress AJAX
>>> function at admin-ajax.php?
>>>
>>> All the main guides seem to point towards using admin-ajax ...
>>>
>>
>> Sorry I missed this out my response earlier.
>>
>> For unauthenticated actions use a no_priv action hook.
>>
>> Line 46 of admin-ajax.php
>>
>> do_action( 'wp_ajax_nopriv_' . $_REQUEST['action'] );
>>
>> westi
>> --
>> Peter Westwood
>> http://blog.ftwr.co.uk | http://westi.wordpress.com
>> C53C F8FC 8796 8508 88D6 C950 54F4 5DCD A834 01C5
>>
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From otto at ottodestruct.com  Wed Aug 11 15:48:56 2010
From: otto at ottodestruct.com (Otto)
Date: Wed, 11 Aug 2010 10:48:56 -0500
Subject: [wp-hackers] Best practice: custom registration form
In-Reply-To: <AANLkTi=2tSvBxgLkOZqp1=pLrxh33pjZebZ-bSbFXGe9@mail.gmail.com>
References: <AANLkTinpqj-dUb5BmyiJ1Mnpgbdy_6ocx=myOGVqVOXK@mail.gmail.com> 
	<AANLkTinzPn2Ng_eA1iAMgvSAFJJ+kw+mgkd1Dd+dAYCF@mail.gmail.com> 
	<AANLkTi=NbiGEihSY0a2ve7v92WyPdVhTRtuscjXDZCd_@mail.gmail.com> 
	<AANLkTi=x4vQV8vcG0PhBC+KkOOpKZr=e0WNm5BTHCJ6P@mail.gmail.com> 
	<AANLkTinQojtDJsw__bpjVr0f3bpPvv3HCzHNQU7Kn8wg@mail.gmail.com> 
	<AANLkTimd3AL36hjRP9ao6-gjYdJsEqgsWxqbBNavM82-@mail.gmail.com> 
	<4C58732C.4000302@mrhead.sk>
	<AANLkTinZcoie7hYDWXOO2CBzzGU_JUHbneMe+H3==XmR@mail.gmail.com> 
	<AANLkTik4TA_82waFYCmqqms3nyrLsLmV_gYAoWMGM9yA@mail.gmail.com> 
	<AANLkTi=PxQnTWf9uZp4md6GJNq58iyR8f873-CfCR-Xs@mail.gmail.com> 
	<AANLkTikZ6odC5gVANwuBdZnd3CJ0GJmGm4A-7=BvTwTr@mail.gmail.com> 
	<AANLkTiks+eySGkCjggY6D3t-dvV3dnqot0hkrys-0zFs@mail.gmail.com> 
	<AANLkTikMHV50m5FfYgejxVbqTLB88-Mygc8Es7ZDf6ZX@mail.gmail.com> 
	<AANLkTikPRnmyYp85OoXukSpU7gFPBJFqOvGvALG0nwkm@mail.gmail.com> 
	<AANLkTi=2tSvBxgLkOZqp1=pLrxh33pjZebZ-bSbFXGe9@mail.gmail.com>
Message-ID: <AANLkTim_KWgBy_cSh4R1OvP5R+vu-=JNDikwK4axwGKo@mail.gmail.com>

On Tue, Aug 10, 2010 at 5:46 PM, Lox <lox.dev at knc.nc> wrote:
> If I send a POST to wp-login.php using AJAX, I get an html page in
> response to my request, whereas I just need a valid/invalid flag, an
> array of errors (if any) and a redirect_to var (if redirect is
> needed).

Still not quite following.

If you're doing a login, then you send the log, pwd, and the
redirect_to parameters. What you'll get back on success is a redirect
to your redirect_to page, not HTML.

If you need to intercept that on the back end to check for something
and/or return a different response, then you can use the
login_redirect filter, which gets the redirect_to value as the first
parameter, and the resulting $user object as the second parameter. To
check for a login failure at that point, you'd check for
is_wp_error($user) and if it's true, you can output your error stuff
and then exit() cleanly. No HTML response of any sort then, as far as
I can see.

BTW, since you asked, interim_login is used when a users session
cookies expire. This almost never happens.

-Otto

From otto at ottodestruct.com  Wed Aug 11 15:52:05 2010
From: otto at ottodestruct.com (Otto)
Date: Wed, 11 Aug 2010 10:52:05 -0500
Subject: [wp-hackers] Hook boginfo_url
In-Reply-To: <AANLkTimiZROQDe+dN5vT5691e3oKV3r919kG435NOYV8@mail.gmail.com>
References: <AANLkTinKPBz8EvYmS55erL-vi6LyrPo35L3k3xpku9xK@mail.gmail.com> 
	<AANLkTimiZROQDe+dN5vT5691e3oKV3r919kG435NOYV8@mail.gmail.com>
Message-ID: <AANLkTikWs6Op+5dH52prryhRVQmQs_vNnTDwNtLTiSGK@mail.gmail.com>

Instead of hooking to bloginfo, try using these filters instead:


add_filter ( 'stylesheet_uri', 'whatever' );
add_filter ( 'template_directory_uri', 'whatever' );
add_filter ( 'stylesheet_directory_uri', 'whatever' );

And so on.. Not everything uses bloginfo to get those values.

-Otto



On Wed, Aug 11, 2010 at 5:11 AM, Frank Bueltge <frank at bueltge.de> wrote:
> The function dont work for stylesheet_directory - maybe an idea - Many
> thanks.
>
> On Mon, Aug 9, 2010 at 12:45 PM, Frank Bueltge <frank at bueltge.de> wrote:
>
>> Hello,
>>
>> i will change the url for use CDN on themes and uploads of my WP install.
>> I have write a small function and im not sure, if use the hook correctl
>> for ?- 9999, 2)
>>
>> Thanks for your feedback.
>>
>> Here my small function
>>
>> if ( !function_exists('fb_add_static_wpurl') ) {
>> ? ? function fb_add_static_wpurl($info, $show) {
>>
>> ? ? ? ? $keys = array(
>> ? ? ? ? ? ? 'wpurl',
>> ? ? ? ? ? ? 'stylesheet_url',
>> ? ? ? ? ? ? 'stylesheet_directory',
>> ? ? ? ? ? ? 'template_url',
>> ? ? ? ? ? ? 'template_directory',
>> ? ? ? ? ? ? );
>>
>> ? ? ? ? if ( in_array( $show, $keys ) ) {
>>
>> ? ? ? ? ? ? $wpurl = get_bloginfo('wpurl');
>>
>> ? ? ? ? ? ? $search = array(
>> ? ? ? ? ? ? ? ? $wpurl . '/wp-content/images/',
>> ? ? ? ? ? ? ? ? $wpurl . '/wp-content/download/',
>> ? ? ? ? ? ? ? ? $wpurl . '/wp-content/themes/',
>> ? ? ? ? ? ? );
>>
>> ? ? ? ? ? ? $replace = array(
>> ? ? ? ? ? ? ? ? 'http://cdn1.example.com/',
>> ? ? ? ? ? ? ? ? 'http://cdn2.example.com/',
>> ? ? ? ? ? ? ? ? 'http://cdn3.example.com/',
>> ? ? ? ? ? ? );
>>
>> ? ? ? ? ? ? return str_replace( $search, $replace, $info );
>>
>> ? ? ? ? } else {
>> ? ? ? ? ? ? return $info;
>> ? ? ? ? }
>> ? ? }
>>
>> ? ? add_filter( 'bloginfo_url', 'fb_add_static_wpurl', 9999, 2 );
>> }
>>
>> Best wishes
>> Frank
>>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From frank at bueltge.de  Wed Aug 11 16:17:09 2010
From: frank at bueltge.de (Frank Bueltge)
Date: Wed, 11 Aug 2010 18:17:09 +0200
Subject: [wp-hackers] Hook boginfo_url
In-Reply-To: <AANLkTikWs6Op+5dH52prryhRVQmQs_vNnTDwNtLTiSGK@mail.gmail.com>
References: <AANLkTinKPBz8EvYmS55erL-vi6LyrPo35L3k3xpku9xK@mail.gmail.com> 
	<AANLkTimiZROQDe+dN5vT5691e3oKV3r919kG435NOYV8@mail.gmail.com> 
	<AANLkTikWs6Op+5dH52prryhRVQmQs_vNnTDwNtLTiSGK@mail.gmail.com>
Message-ID: <AANLkTimVZ+jGfyA5S9N_8zOCGcNed45ARSs7fEA5ydwO@mail.gmail.com>

Thanks Otto, i have not found this hooks. Works fine.


On Wed, Aug 11, 2010 at 5:52 PM, Otto <otto at ottodestruct.com> wrote:

> Instead of hooking to bloginfo, try using these filters instead:
>
>
> add_filter ( 'stylesheet_uri', 'whatever' );
> add_filter ( 'template_directory_uri', 'whatever' );
> add_filter ( 'stylesheet_directory_uri', 'whatever' );
>
> And so on.. Not everything uses bloginfo to get those values.
>
> -Otto
>
>
>
> On Wed, Aug 11, 2010 at 5:11 AM, Frank Bueltge <frank at bueltge.de> wrote:
> > The function dont work for stylesheet_directory - maybe an idea - Many
> > thanks.
> >
> > On Mon, Aug 9, 2010 at 12:45 PM, Frank Bueltge <frank at bueltge.de> wrote:
> >
> >> Hello,
> >>
> >> i will change the url for use CDN on themes and uploads of my WP
> install.
> >> I have write a small function and im not sure, if use the hook correctl
> >> for  - 9999, 2)
> >>
> >> Thanks for your feedback.
> >>
> >> Here my small function
> >>
> >> if ( !function_exists('fb_add_static_wpurl') ) {
> >>     function fb_add_static_wpurl($info, $show) {
> >>
> >>         $keys = array(
> >>             'wpurl',
> >>             'stylesheet_url',
> >>             'stylesheet_directory',
> >>             'template_url',
> >>             'template_directory',
> >>             );
> >>
> >>         if ( in_array( $show, $keys ) ) {
> >>
> >>             $wpurl = get_bloginfo('wpurl');
> >>
> >>             $search = array(
> >>                 $wpurl . '/wp-content/images/',
> >>                 $wpurl . '/wp-content/download/',
> >>                 $wpurl . '/wp-content/themes/',
> >>             );
> >>
> >>             $replace = array(
> >>                 'http://cdn1.example.com/',
> >>                 'http://cdn2.example.com/',
> >>                 'http://cdn3.example.com/',
> >>             );
> >>
> >>             return str_replace( $search, $replace, $info );
> >>
> >>         } else {
> >>             return $info;
> >>         }
> >>     }
> >>
> >>     add_filter( 'bloginfo_url', 'fb_add_static_wpurl', 9999, 2 );
> >> }
> >>
> >> Best wishes
> >> Frank
> >>
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers at lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> >
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From devin at tayloegray.com  Wed Aug 11 16:40:28 2010
From: devin at tayloegray.com (Devin Dixon)
Date: Wed, 11 Aug 2010 12:40:28 -0400
Subject: [wp-hackers] Pagination for Static Pages
Message-ID: <AANLkTi=pjxrEEhiVU1EkyO5kWq1UuHtdZxeDLERpLb0T@mail.gmail.com>

Hey all,

I am having a slight issues using pagination with static pages that
have custom templates. Currently my code looks something like this:

$paged = (get_query_var('paged')) ? get_query_var('paged') : 1;
$wp_query = new WP_Query( array( 'post_type' => 'success_stories',
'posts_per_page' => 10, 'paged'=>$paged,  ) );

//Run through the Loop, spit out info

<div class="navigation">
   <p>Work Please</p>
	<div class="alignleft"><?php next_posts_link('Previous entries') ?></div>
	<div class="alignright"><?php previous_posts_link('Next entries') ?></div>
</div>

The problem is, the subsequent pages all become Error 404 for some
reason. I've looked online and this times to be a bug. Does anyone
have any solutions?

Thanks!

From lox.dev at knc.nc  Wed Aug 11 16:43:39 2010
From: lox.dev at knc.nc (Lox)
Date: Thu, 12 Aug 2010 03:43:39 +1100
Subject: [wp-hackers] Best practice: custom registration form
In-Reply-To: <AANLkTim_KWgBy_cSh4R1OvP5R+vu-=JNDikwK4axwGKo@mail.gmail.com>
References: <AANLkTinpqj-dUb5BmyiJ1Mnpgbdy_6ocx=myOGVqVOXK@mail.gmail.com>
	<AANLkTinzPn2Ng_eA1iAMgvSAFJJ+kw+mgkd1Dd+dAYCF@mail.gmail.com>
	<AANLkTi=NbiGEihSY0a2ve7v92WyPdVhTRtuscjXDZCd_@mail.gmail.com>
	<AANLkTi=x4vQV8vcG0PhBC+KkOOpKZr=e0WNm5BTHCJ6P@mail.gmail.com>
	<AANLkTinQojtDJsw__bpjVr0f3bpPvv3HCzHNQU7Kn8wg@mail.gmail.com>
	<AANLkTimd3AL36hjRP9ao6-gjYdJsEqgsWxqbBNavM82-@mail.gmail.com>
	<4C58732C.4000302@mrhead.sk>
	<AANLkTinZcoie7hYDWXOO2CBzzGU_JUHbneMe+H3==XmR@mail.gmail.com>
	<AANLkTik4TA_82waFYCmqqms3nyrLsLmV_gYAoWMGM9yA@mail.gmail.com>
	<AANLkTi=PxQnTWf9uZp4md6GJNq58iyR8f873-CfCR-Xs@mail.gmail.com>
	<AANLkTikZ6odC5gVANwuBdZnd3CJ0GJmGm4A-7=BvTwTr@mail.gmail.com>
	<AANLkTiks+eySGkCjggY6D3t-dvV3dnqot0hkrys-0zFs@mail.gmail.com>
	<AANLkTikMHV50m5FfYgejxVbqTLB88-Mygc8Es7ZDf6ZX@mail.gmail.com>
	<AANLkTikPRnmyYp85OoXukSpU7gFPBJFqOvGvALG0nwkm@mail.gmail.com>
	<AANLkTi=2tSvBxgLkOZqp1=pLrxh33pjZebZ-bSbFXGe9@mail.gmail.com>
	<AANLkTim_KWgBy_cSh4R1OvP5R+vu-=JNDikwK4axwGKo@mail.gmail.com>
Message-ID: <AANLkTimnna4iooaxgnWDfRtdkaaCMgTB8jZS48qkXhJ2@mail.gmail.com>

2010/8/12 Otto <otto at ottodestruct.com>

> If you need to intercept that on the back end to check for something
> and/or return a different response, then you can use the
> login_redirect filter, which gets the redirect_to value as the first
> parameter, and the resulting $user object as the second parameter. To
> check for a login failure at that point, you'd check for
> is_wp_error($user) and if it's true, you can output your error stuff
> and then exit() cleanly. No HTML response of any sort then, as far as
> I can see.
>
> BTW, since you asked, interim_login is used when a users session
> cookies expire. This almost never happens.
>

Thanks Otto, it is a nice trick. Unfortunately I have already duplicated the
whole wp-login.php to my plugin with AJAX... Also I had to change the
user_login field label. But in next project I'll take you approach.

I also had a look to registration_redirect filter witch unfortunately does
not get errors ... But i may be able to use the registration_errors filter.
(Also a wp_registration_form function is "missing")

Concerning password reset, I do not see any filter to catch errors...

I think the whole login/registration system in wordpress should be more
flexible.

-- 
Lox
lox.dev at knc.nc

From Gavin.Pearce at 3seven9.com  Wed Aug 11 16:44:05 2010
From: Gavin.Pearce at 3seven9.com (Gavin Pearce)
Date: Wed, 11 Aug 2010 17:44:05 +0100
Subject: [wp-hackers] wp-admin folder and admin-ajax.php
In-Reply-To: <AANLkTi=ffEmM39oRozA-3wYZ0zenV8ij863ugjWahVBC@mail.gmail.com>
References: <CD47955B7E065D48AB5CF226C2ED75C02E3266@tbs-sbs01.TBS.local>
	<AANLkTikg+p0j41_PgaerUqC52VUYoWnG2c_MHjEOQHg-@mail.gmail.com>
	<A49D9910-A81F-4F24-B7AA-20E47C1B7134@ftwr.co.uk><CD47955B7E065D48AB5CF226C2ED75C02E32AD@tbs-sbs01.TBS.local>
	<F2F4C529-9EB8-4AC1-9A4C-A15638E76456@ftwr.co.uk><CD47955B7E065D48AB5CF226C2ED75C02E32B1@tbs-sbs01.TBS.local>
	<C464AFB2-5D28-404F-B56F-7B7F5B99586C@codehooligans.com>
	<AANLkTi=ffEmM39oRozA-3wYZ0zenV8ij863ugjWahVBC@mail.gmail.com>
Message-ID: <CD47955B7E065D48AB5CF226C2ED75C02E32C4@tbs-sbs01.TBS.local>

Hi guys,

Nice idea ... but what if you start having more than one AJAX request?

Or from a plugin developers point of view - I can't just "exit;" on AJAX request from my plugin, as there may still be more AJAX requests to run....

Thanks,
Gav

-----Original Message-----
From: wp-hackers-bounces at lists.automattic.com [mailto:wp-hackers-bounces at lists.automattic.com] On Behalf Of Otto
Sent: 11 August 2010 16:37
To: wp-hackers at lists.automattic.com
Subject: Re: [wp-hackers] wp-admin folder and admin-ajax.php

This is the same basic approach I use.

However, setting the ajaxurl to the home url isn't required, really.
If you're capturing via init, then any URL on the site works, since
init always triggers. So I tend to just use the current page URL.
Simpler.

-Otto



On Wed, Aug 11, 2010 at 6:48 AM, Paul <paul at codehooligans.com> wrote:
> For simple front-end AJAX needs which do not require authenticated access I don't use the admin-ajax.php hook.
>
> Instead I just capture the action via my plugin's init function. Something like
>
> function init()
> {
> ? ? ? ?// Normal init code here
> ? ? ? ?// blah blah blah
>
> ? ? ? ?// Handle front-end AJAX requests.
> ? ? ? ?if (isset($_REQUEST['property_display_ajax_action']))
> ? ? ? ?{
> ? ? ? ? ? ? ? ?// Process my AJAX here!
> ? ? ? ? ? ? ? ?exit(); ? ? ? ? // Terminate the request
> ? ? ? ?}
> }
>
> You can still use the same code for your JS/AJAX as suggested on http://codex.wordpress.org/AJAX_in_Plugins
> But with one issue. Since this is front-end the 'ajaxurl' is not set. So on your themes wp_footer(); action add it yourself. Mine just calls the front-end site url.
>
> function property_wp_footer()
> {
> ? ? ? ??>
> ? ? ? ?<script type="text/javascript" >
> ? ? ? ? ? ? ? ?var ajaxurl = '<?php echo home_url( '/' ); ??>';
> ? ? ? ?</script>
> ? ? ? ?<?php
> }
>
>
>
>
>
> On Aug 11, 2010, at 7:18 AM, Gavin Pearce wrote:
>
>> Hi Westi,
>>
>> That would still mean pointing to wp-admin/admin-ajax.php though I believe?
>>
>> Which goes back to the issue of being able to secure the wp-admin folder. Some users, as suggested in the codex, will secure the entire wp-admin folder via IP or htaccess password protection, which would break any front-end AJAX hooking into this.
>>
>> As a plugin developer, automatic installations would obviously fail in this use-case.
>>
>> Cheers,
>> Gav
>>
>> -----Original Message-----
>> From: wp-hackers-bounces at lists.automattic.com [mailto:wp-hackers-bounces at lists.automattic.com] On Behalf Of Peter Westwood
>> Sent: 11 August 2010 11:49
>> To: wp-hackers at lists.automattic.com
>> Subject: Re: [wp-hackers] wp-admin folder and admin-ajax.php
>>
>>
>> On 11 Aug 2010, at 10:14, Gavin Pearce wrote:
>>
>>> Thanks Westi!
>>>
>>> Out of interest then, and in that case - how would you personally best
>>> handle non-auth, front-end, AJAX (and then having access to the various
>>> WP instances/classes/DB) without hooking into the WordPress AJAX
>>> function at admin-ajax.php?
>>>
>>> All the main guides seem to point towards using admin-ajax ...
>>>
>>
>> Sorry I missed this out my response earlier.
>>
>> For unauthenticated actions use a no_priv action hook.
>>
>> Line 46 of admin-ajax.php
>>
>> do_action( 'wp_ajax_nopriv_' . $_REQUEST['action'] );
>>
>> westi
>> --
>> Peter Westwood
>> http://blog.ftwr.co.uk | http://westi.wordpress.com
>> C53C F8FC 8796 8508 88D6 C950 54F4 5DCD A834 01C5
>>
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
_______________________________________________
wp-hackers mailing list
wp-hackers at lists.automattic.com
http://lists.automattic.com/mailman/listinfo/wp-hackers

From mikeschinkel at newclarity.net  Wed Aug 11 17:04:30 2010
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Wed, 11 Aug 2010 13:04:30 -0400
Subject: [wp-hackers] visually sort ordering "custom post types" for end
	users
In-Reply-To: <AANLkTi=-_LGVBC_pNKSAbpar-sPAvh7Hvu4eJer5CxK6@mail.gmail.com>
References: <AANLkTikEmthrDH0kRtErBBnj0w_qCC5EPhKt9X3VyZLA@mail.gmail.com>
	<09BECDB4-1116-44D5-9B7D-6692478BCE4C@newclarity.net>
	<AANLkTi=-_LGVBC_pNKSAbpar-sPAvh7Hvu4eJer5CxK6@mail.gmail.com>
Message-ID: <1AE8AB8F-A9F6-446D-B49C-556D44F62C33@newclarity.net>

On Aug 11, 2010, at 11:06 AM, Simon Blackbourn wrote:
> I use the existing menu_order column in the posts table to save creating yet
> another meta field.
> 
> By default, this column is used for sorting pages but not posts, but if you
> hook into the posts_orderby filter you can sort on this column for your
> custom post type. Something like this should do the trick (might need
> adjusting a bit for your case):
> 
> add_filter( 'posts_orderby', 'my_orderby' );
> function my_orderby( $sql ) {
>     global $wpdb, $wp_query;
>     if( !is_search() && !is_single() && !is_admin() && 'shirt' ==$wp_query->query_vars['post_type'] ) {
>        return $wpdb->prefix . "menu_order ASC";
>    }
>     return $sql;
> }

Yes, that is another great option! (assuming the client only needs one sort order.)

-Mike

From aaron at jorb.in  Wed Aug 11 17:08:07 2010
From: aaron at jorb.in (Aaron Jorbin)
Date: Wed, 11 Aug 2010 13:08:07 -0400
Subject: [wp-hackers] visually sort ordering "custom post types" for end
	users
In-Reply-To: <09BECDB4-1116-44D5-9B7D-6692478BCE4C@newclarity.net>
References: <AANLkTikEmthrDH0kRtErBBnj0w_qCC5EPhKt9X3VyZLA@mail.gmail.com> 
	<09BECDB4-1116-44D5-9B7D-6692478BCE4C@newclarity.net>
Message-ID: <AANLkTik3g6nocNtb_YJQQ59N7Gcne17g6JsGriNNVm3u@mail.gmail.com>

>
> On Aug 11, 2010, at 10:18 AM, Amit Ashckenazi wrote:
> > Now with those custom post types and other ?bits of content? that
> > don?t necessarily need to be organized by chronologically by date, for
> > example: the client has a 100 T-Shirts as custom post type "SHIRT" and
> > he wants to set their appearance order.
> >
> > what approach you suggest taking for letting the editor/admin of the
> > site SORT their order?
>
>
If they require more of a gui and the ability to drag/drop, You might want
to think about using a menu.

http://aaron.jorb.in
twitter: twitter.com/aaronjorbin

From otto at ottodestruct.com  Wed Aug 11 17:26:55 2010
From: otto at ottodestruct.com (Otto)
Date: Wed, 11 Aug 2010 12:26:55 -0500
Subject: [wp-hackers] wp-admin folder and admin-ajax.php
In-Reply-To: <CD47955B7E065D48AB5CF226C2ED75C02E32C4@tbs-sbs01.TBS.local>
References: <CD47955B7E065D48AB5CF226C2ED75C02E3266@tbs-sbs01.TBS.local> 
	<AANLkTikg+p0j41_PgaerUqC52VUYoWnG2c_MHjEOQHg-@mail.gmail.com> 
	<A49D9910-A81F-4F24-B7AA-20E47C1B7134@ftwr.co.uk>
	<CD47955B7E065D48AB5CF226C2ED75C02E32AD@tbs-sbs01.TBS.local> 
	<F2F4C529-9EB8-4AC1-9A4C-A15638E76456@ftwr.co.uk>
	<CD47955B7E065D48AB5CF226C2ED75C02E32B1@tbs-sbs01.TBS.local> 
	<C464AFB2-5D28-404F-B56F-7B7F5B99586C@codehooligans.com>
	<AANLkTi=ffEmM39oRozA-3wYZ0zenV8ij863ugjWahVBC@mail.gmail.com> 
	<CD47955B7E065D48AB5CF226C2ED75C02E32C4@tbs-sbs01.TBS.local>
Message-ID: <AANLkTik0cWzzvaP=MNXb7HrBCtBEnHvdg14xY=NN=o3h@mail.gmail.com>

Use a parameter to determine which request you're processing.
action=request1 or whatever.

And you can just exit, as each request is a separate call. You're not
running more than one request at a time.

-Otto



On Wed, Aug 11, 2010 at 11:44 AM, Gavin Pearce <Gavin.Pearce at 3seven9.com> wrote:
> Hi guys,
>
> Nice idea ... but what if you start having more than one AJAX request?
>
> Or from a plugin developers point of view - I can't just "exit;" on AJAX request from my plugin, as there may still be more AJAX requests to run....
>
> Thanks,
> Gav
>
> -----Original Message-----
> From: wp-hackers-bounces at lists.automattic.com [mailto:wp-hackers-bounces at lists.automattic.com] On Behalf Of Otto
> Sent: 11 August 2010 16:37
> To: wp-hackers at lists.automattic.com
> Subject: Re: [wp-hackers] wp-admin folder and admin-ajax.php
>
> This is the same basic approach I use.
>
> However, setting the ajaxurl to the home url isn't required, really.
> If you're capturing via init, then any URL on the site works, since
> init always triggers. So I tend to just use the current page URL.
> Simpler.
>
> -Otto
>
>
>
> On Wed, Aug 11, 2010 at 6:48 AM, Paul <paul at codehooligans.com> wrote:
>> For simple front-end AJAX needs which do not require authenticated access I don't use the admin-ajax.php hook.
>>
>> Instead I just capture the action via my plugin's init function. Something like
>>
>> function init()
>> {
>> ? ? ? ?// Normal init code here
>> ? ? ? ?// blah blah blah
>>
>> ? ? ? ?// Handle front-end AJAX requests.
>> ? ? ? ?if (isset($_REQUEST['property_display_ajax_action']))
>> ? ? ? ?{
>> ? ? ? ? ? ? ? ?// Process my AJAX here!
>> ? ? ? ? ? ? ? ?exit(); ? ? ? ? // Terminate the request
>> ? ? ? ?}
>> }
>>
>> You can still use the same code for your JS/AJAX as suggested on http://codex.wordpress.org/AJAX_in_Plugins
>> But with one issue. Since this is front-end the 'ajaxurl' is not set. So on your themes wp_footer(); action add it yourself. Mine just calls the front-end site url.
>>
>> function property_wp_footer()
>> {
>> ? ? ? ??>
>> ? ? ? ?<script type="text/javascript" >
>> ? ? ? ? ? ? ? ?var ajaxurl = '<?php echo home_url( '/' ); ??>';
>> ? ? ? ?</script>
>> ? ? ? ?<?php
>> }
>>
>>
>>
>>
>>
>> On Aug 11, 2010, at 7:18 AM, Gavin Pearce wrote:
>>
>>> Hi Westi,
>>>
>>> That would still mean pointing to wp-admin/admin-ajax.php though I believe?
>>>
>>> Which goes back to the issue of being able to secure the wp-admin folder. Some users, as suggested in the codex, will secure the entire wp-admin folder via IP or htaccess password protection, which would break any front-end AJAX hooking into this.
>>>
>>> As a plugin developer, automatic installations would obviously fail in this use-case.
>>>
>>> Cheers,
>>> Gav
>>>
>>> -----Original Message-----
>>> From: wp-hackers-bounces at lists.automattic.com [mailto:wp-hackers-bounces at lists.automattic.com] On Behalf Of Peter Westwood
>>> Sent: 11 August 2010 11:49
>>> To: wp-hackers at lists.automattic.com
>>> Subject: Re: [wp-hackers] wp-admin folder and admin-ajax.php
>>>
>>>
>>> On 11 Aug 2010, at 10:14, Gavin Pearce wrote:
>>>
>>>> Thanks Westi!
>>>>
>>>> Out of interest then, and in that case - how would you personally best
>>>> handle non-auth, front-end, AJAX (and then having access to the various
>>>> WP instances/classes/DB) without hooking into the WordPress AJAX
>>>> function at admin-ajax.php?
>>>>
>>>> All the main guides seem to point towards using admin-ajax ...
>>>>
>>>
>>> Sorry I missed this out my response earlier.
>>>
>>> For unauthenticated actions use a no_priv action hook.
>>>
>>> Line 46 of admin-ajax.php
>>>
>>> do_action( 'wp_ajax_nopriv_' . $_REQUEST['action'] );
>>>
>>> westi
>>> --
>>> Peter Westwood
>>> http://blog.ftwr.co.uk | http://westi.wordpress.com
>>> C53C F8FC 8796 8508 88D6 C950 54F4 5DCD A834 01C5
>>>
>>> _______________________________________________
>>> wp-hackers mailing list
>>> wp-hackers at lists.automattic.com
>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>> _______________________________________________
>>> wp-hackers mailing list
>>> wp-hackers at lists.automattic.com
>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From Gavin.Pearce at 3seven9.com  Wed Aug 11 17:28:37 2010
From: Gavin.Pearce at 3seven9.com (Gavin Pearce)
Date: Wed, 11 Aug 2010 18:28:37 +0100
Subject: [wp-hackers] wp-admin folder and admin-ajax.php
In-Reply-To: <AANLkTik0cWzzvaP=MNXb7HrBCtBEnHvdg14xY=NN=o3h@mail.gmail.com>
References: <CD47955B7E065D48AB5CF226C2ED75C02E3266@tbs-sbs01.TBS.local>
	<AANLkTikg+p0j41_PgaerUqC52VUYoWnG2c_MHjEOQHg-@mail.gmail.com>
	<A49D9910-A81F-4F24-B7AA-20E47C1B7134@ftwr.co.uk><CD47955B7E065D48AB5CF226C2ED75C02E32AD@tbs-sbs01.TBS.local>
	<F2F4C529-9EB8-4AC1-9A4C-A15638E76456@ftwr.co.uk><CD47955B7E065D48AB5CF226C2ED75C02E32B1@tbs-sbs01.TBS.local>
	<C464AFB2-5D28-404F-B56F-7B7F5B99586C@codehooligans.com><AANLkTi=ffEmM39oRozA-3wYZ0zenV8ij863ugjWahVBC@mail.gmail.com>
	<CD47955B7E065D48AB5CF226C2ED75C02E32C4@tbs-sbs01.TBS.local>
	<AANLkTik0cWzzvaP=MNXb7HrBCtBEnHvdg14xY=NN=o3h@mail.gmail.com>
Message-ID: <CD47955B7E065D48AB5CF226C2ED75C02E32C6@tbs-sbs01.TBS.local>

> You're not running more than one request at a time.

Good point. ;)

Thanks Otto.


-----Original Message-----
From: wp-hackers-bounces at lists.automattic.com [mailto:wp-hackers-bounces at lists.automattic.com] On Behalf Of Otto
Sent: 11 August 2010 18:27
To: wp-hackers at lists.automattic.com
Subject: Re: [wp-hackers] wp-admin folder and admin-ajax.php

Use a parameter to determine which request you're processing.
action=request1 or whatever.

And you can just exit, as each request is a separate call. You're not
running more than one request at a time.

-Otto



On Wed, Aug 11, 2010 at 11:44 AM, Gavin Pearce <Gavin.Pearce at 3seven9.com> wrote:
> Hi guys,
>
> Nice idea ... but what if you start having more than one AJAX request?
>
> Or from a plugin developers point of view - I can't just "exit;" on AJAX request from my plugin, as there may still be more AJAX requests to run....
>
> Thanks,
> Gav
>
> -----Original Message-----
> From: wp-hackers-bounces at lists.automattic.com [mailto:wp-hackers-bounces at lists.automattic.com] On Behalf Of Otto
> Sent: 11 August 2010 16:37
> To: wp-hackers at lists.automattic.com
> Subject: Re: [wp-hackers] wp-admin folder and admin-ajax.php
>
> This is the same basic approach I use.
>
> However, setting the ajaxurl to the home url isn't required, really.
> If you're capturing via init, then any URL on the site works, since
> init always triggers. So I tend to just use the current page URL.
> Simpler.
>
> -Otto
>
>
>
> On Wed, Aug 11, 2010 at 6:48 AM, Paul <paul at codehooligans.com> wrote:
>> For simple front-end AJAX needs which do not require authenticated access I don't use the admin-ajax.php hook.
>>
>> Instead I just capture the action via my plugin's init function. Something like
>>
>> function init()
>> {
>> ? ? ? ?// Normal init code here
>> ? ? ? ?// blah blah blah
>>
>> ? ? ? ?// Handle front-end AJAX requests.
>> ? ? ? ?if (isset($_REQUEST['property_display_ajax_action']))
>> ? ? ? ?{
>> ? ? ? ? ? ? ? ?// Process my AJAX here!
>> ? ? ? ? ? ? ? ?exit(); ? ? ? ? // Terminate the request
>> ? ? ? ?}
>> }
>>
>> You can still use the same code for your JS/AJAX as suggested on http://codex.wordpress.org/AJAX_in_Plugins
>> But with one issue. Since this is front-end the 'ajaxurl' is not set. So on your themes wp_footer(); action add it yourself. Mine just calls the front-end site url.
>>
>> function property_wp_footer()
>> {
>> ? ? ? ??>
>> ? ? ? ?<script type="text/javascript" >
>> ? ? ? ? ? ? ? ?var ajaxurl = '<?php echo home_url( '/' ); ??>';
>> ? ? ? ?</script>
>> ? ? ? ?<?php
>> }
>>
>>
>>
>>
>>
>> On Aug 11, 2010, at 7:18 AM, Gavin Pearce wrote:
>>
>>> Hi Westi,
>>>
>>> That would still mean pointing to wp-admin/admin-ajax.php though I believe?
>>>
>>> Which goes back to the issue of being able to secure the wp-admin folder. Some users, as suggested in the codex, will secure the entire wp-admin folder via IP or htaccess password protection, which would break any front-end AJAX hooking into this.
>>>
>>> As a plugin developer, automatic installations would obviously fail in this use-case.
>>>
>>> Cheers,
>>> Gav
>>>
>>> -----Original Message-----
>>> From: wp-hackers-bounces at lists.automattic.com [mailto:wp-hackers-bounces at lists.automattic.com] On Behalf Of Peter Westwood
>>> Sent: 11 August 2010 11:49
>>> To: wp-hackers at lists.automattic.com
>>> Subject: Re: [wp-hackers] wp-admin folder and admin-ajax.php
>>>
>>>
>>> On 11 Aug 2010, at 10:14, Gavin Pearce wrote:
>>>
>>>> Thanks Westi!
>>>>
>>>> Out of interest then, and in that case - how would you personally best
>>>> handle non-auth, front-end, AJAX (and then having access to the various
>>>> WP instances/classes/DB) without hooking into the WordPress AJAX
>>>> function at admin-ajax.php?
>>>>
>>>> All the main guides seem to point towards using admin-ajax ...
>>>>
>>>
>>> Sorry I missed this out my response earlier.
>>>
>>> For unauthenticated actions use a no_priv action hook.
>>>
>>> Line 46 of admin-ajax.php
>>>
>>> do_action( 'wp_ajax_nopriv_' . $_REQUEST['action'] );
>>>
>>> westi
>>> --
>>> Peter Westwood
>>> http://blog.ftwr.co.uk | http://westi.wordpress.com
>>> C53C F8FC 8796 8508 88D6 C950 54F4 5DCD A834 01C5
>>>
>>> _______________________________________________
>>> wp-hackers mailing list
>>> wp-hackers at lists.automattic.com
>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>> _______________________________________________
>>> wp-hackers mailing list
>>> wp-hackers at lists.automattic.com
>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
_______________________________________________
wp-hackers mailing list
wp-hackers at lists.automattic.com
http://lists.automattic.com/mailman/listinfo/wp-hackers

From obviocity at gmail.com  Wed Aug 11 17:54:56 2010
From: obviocity at gmail.com (Amit Ashckenazi)
Date: Wed, 11 Aug 2010 14:54:56 -0300
Subject: [wp-hackers] visually sort ordering "custom post types" for
	end	 users
In-Reply-To: <mailman.15374.1281547729.1338.wp-hackers@lists.automattic.com>
References: <mailman.15374.1281547729.1338.wp-hackers@lists.automattic.com>
Message-ID: <A6265A7B-9E25-45C5-92DF-99C1D6BC7B86@gmail.com>

Mike, Simon and Aaron: thanks!

I like Aaron's idea best (when investigating it I saw that the menu items are actually custom post types themselves), I just ask myself is there a way to bring this "menus" page under pages/post/custom-type so the user wouldn't be to confused, also: can a menu take an infinite number of entries, wouldn't that be a bit of a bloat to create an extra menu item per post?

thanks again!
Amit

On Aug 11, 2010, at 2:28 PM, wp-hackers-request at lists.automattic.com wrote:

> Message: 4
> Date: Wed, 11 Aug 2010 13:08:07 -0400
> From: Aaron Jorbin <aaron at jorb.in>
> Subject: Re: [wp-hackers] visually sort ordering "custom post types"
> 	for end	users
> To: wp-hackers at lists.automattic.com
> Message-ID:
> 	<AANLkTik3g6nocNtb_YJQQ59N7Gcne17g6JsGriNNVm3u at mail.gmail.com>
> Content-Type: text/plain; charset=windows-1252
> 
>> 
>> On Aug 11, 2010, at 10:18 AM, Amit Ashckenazi wrote:
>>> Now with those custom post types and other ?bits of content? that
>>> don?t necessarily need to be organized by chronologically by date, for
>>> example: the client has a 100 T-Shirts as custom post type "SHIRT" and
>>> he wants to set their appearance order.
>>> 
>>> what approach you suggest taking for letting the editor/admin of the
>>> site SORT their order?
>> 
>> 
> If they require more of a gui and the ability to drag/drop, You might want
> to think about using a menu.
> 
> http://aaron.jorb.in
> twitter: twitter.com/aaronjorbin


From krustyruffle at rustykruffle.com  Wed Aug 11 18:11:20 2010
From: krustyruffle at rustykruffle.com (Krusty Ruffle)
Date: Wed, 11 Aug 2010 14:11:20 -0400
Subject: [wp-hackers] 'request' filter for adding custom post types to blog
	indexes
Message-ID: <AANLkTinnTo7OC9M7r0nYHZWxNL3g6wsE5pC9LoTSGi++@mail.gmail.com>

I'm wanting to add a custom post type to the main blog index, the author
index and the date indexes. Can anybody tell me if this will cause problems
or if there is a better way to do it?

add_filter ( 'request', 'my_request' ) ;
function my_request ( $request ) {
     // Check for proper indexes. An empty $request means we are on the main
blog index.
     if ( empty ( $request ) || isset ( $request['author_name'] ) || isset (
$request['year'] ) )
          $request['post_type'] = array ( 'post', 'my_post_type' ) ; //
Modify the $request
     return $request ;
}

From scribu at gmail.com  Wed Aug 11 18:16:42 2010
From: scribu at gmail.com (scribu)
Date: Wed, 11 Aug 2010 21:16:42 +0300
Subject: [wp-hackers] 'request' filter for adding custom post types to
	blog indexes
In-Reply-To: <AANLkTinnTo7OC9M7r0nYHZWxNL3g6wsE5pC9LoTSGi++@mail.gmail.com>
References: <AANLkTinnTo7OC9M7r0nYHZWxNL3g6wsE5pC9LoTSGi++@mail.gmail.com>
Message-ID: <AANLkTikj-2WCzV3_9K1Z20V0tX09UotoaqwvbR5vL6tG@mail.gmail.com>

That looks just about right. You might also want to check if post_type was
not already set.

-- 
http://scribu.net

From krustyruffle at rustykruffle.com  Wed Aug 11 18:36:21 2010
From: krustyruffle at rustykruffle.com (Krusty Ruffle)
Date: Wed, 11 Aug 2010 14:36:21 -0400
Subject: [wp-hackers] 'request' filter for adding custom post types to
 blog indexes
In-Reply-To: <AANLkTikj-2WCzV3_9K1Z20V0tX09UotoaqwvbR5vL6tG@mail.gmail.com>
References: <AANLkTinnTo7OC9M7r0nYHZWxNL3g6wsE5pC9LoTSGi++@mail.gmail.com>
	<AANLkTikj-2WCzV3_9K1Z20V0tX09UotoaqwvbR5vL6tG@mail.gmail.com>
Message-ID: <AANLkTikbuiBqzN3WQaGV78LrZRTdA0Vu+cRQzSABqCfz@mail.gmail.com>

On Wed, Aug 11, 2010 at 2:16 PM, scribu <scribu at gmail.com> wrote:

> That looks just about right. You might also want to check if post_type was
> not already set.
>

So maybe like:

add_filter ( 'request', 'my_request' ) ;
function my_request ( $request ) {
     // Check for proper indexes. An empty $request means we are on the main
blog index.
     if ( empty ( $request ) || isset ( $request['author_name'] ) || isset (
$request['year'] ) ) :
          if ( isset ( $request['post_type'] ) :
                $request['post_type][] = 'my_post_type' ;
          else:
                $request['post_type'] = array ( 'post', 'my_post_type' ) ;
          endif;
     endif;
     return $request ;
}

Or would it be better to do something like:

add_filter ( 'request', 'my_request' ) ;
function my_request ( $request ) {
     // Check for proper indexes. An empty $request means we are on the main
blog index.
     if ( empty ( $request ) || isset ( $request['author_name'] ) || isset (
$request['year'] ) ) :
          $request['post_type'][] = 'post' ;
          $request['post_type'][] = 'my_post_type' ;
     endif;
     return array_unique ( $request ) ;
}

From ravi-lists at g8o.net  Wed Aug 11 19:02:42 2010
From: ravi-lists at g8o.net ( ravi )
Date: Wed, 11 Aug 2010 15:02:42 -0400
Subject: [wp-hackers] Reacting to options (theme options) in Javascript
Message-ID: <C6DC2FCD-EF2C-4130-8D80-C710F100FD59@g8o.net>


Howdy all,

I have a preference setting in my theme options. If it is checked on, then some jQuery stuff needs to be activated. The jQuery stuff sits in a .js file in my theme. Thus far, I have been throwing this sort of Javascript code, that has to be executed on the basis of a back-end option, in a separate PHP file with wrapper PHP code that checks for the relevant option(s).

I am wondering if anyone has a cleverer way of achieving the same thing?

Cheers,

	?ravi




From scribu at gmail.com  Wed Aug 11 19:29:36 2010
From: scribu at gmail.com (scribu)
Date: Wed, 11 Aug 2010 22:29:36 +0300
Subject: [wp-hackers] 'request' filter for adding custom post types to
	blog indexes
In-Reply-To: <AANLkTikbuiBqzN3WQaGV78LrZRTdA0Vu+cRQzSABqCfz@mail.gmail.com>
References: <AANLkTinnTo7OC9M7r0nYHZWxNL3g6wsE5pC9LoTSGi++@mail.gmail.com>
	<AANLkTikj-2WCzV3_9K1Z20V0tX09UotoaqwvbR5vL6tG@mail.gmail.com>
	<AANLkTikbuiBqzN3WQaGV78LrZRTdA0Vu+cRQzSABqCfz@mail.gmail.com>
Message-ID: <AANLkTinQG6hyBiM84Mfx44h9WpRP7qOQ5_PkjWOoB_mo@mail.gmail.com>

Something like this:

         if ( isset ( $request['post_type'] ) :
               $request['post_type'] = (array) $request['post_type'];
               $request['post_type][] = 'my_post_type' ;
         else:
                $request['post_type'] = array ( 'post', 'my_post_type' ) ;
          endif;

It really depends on what else you're doing. Best is to try it out, with
lots of testing.


-- 
http://scribu.net

From otto at ottodestruct.com  Wed Aug 11 19:37:35 2010
From: otto at ottodestruct.com (Otto)
Date: Wed, 11 Aug 2010 14:37:35 -0500
Subject: [wp-hackers] Reacting to options (theme options) in Javascript
In-Reply-To: <C6DC2FCD-EF2C-4130-8D80-C710F100FD59@g8o.net>
References: <C6DC2FCD-EF2C-4130-8D80-C710F100FD59@g8o.net>
Message-ID: <AANLkTimKX88kNMSGrXvkoXNc1o3KOQAvRh7_GmXvqD-2@mail.gmail.com>

Just enqueue the JS or not based on the option. You can do this in
your functions.php file in the theme.

function themename_js() {
  if (get_option('whatever') == 'something) {
    wp_enqueue_script('yourscript','whatever',...);
  }
}
add_action('wp_print_scripts','themename_js');

Then your script gets added to the page or not added to the page based
on your option.

-Otto



On Wed, Aug 11, 2010 at 2:02 PM, [ ravi ] <ravi-lists at g8o.net> wrote:
>
> Howdy all,
>
> I have a preference setting in my theme options. If it is checked on, then some jQuery stuff needs to be activated. The jQuery stuff sits in a .js file in my theme. Thus far, I have been throwing this sort of Javascript code, that has to be executed on the basis of a back-end option, in a separate PHP file with wrapper PHP code that checks for the relevant option(s).
>
> I am wondering if anyone has a cleverer way of achieving the same thing?
>
> Cheers,
>
> ? ? ? ??ravi
>
>
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From eric at eamann.com  Wed Aug 11 19:40:00 2010
From: eric at eamann.com (Eric Mann)
Date: Wed, 11 Aug 2010 12:40:00 -0700 (PDT)
Subject: [wp-hackers] Reacting to options (theme options) in Javascript
In-Reply-To: <C6DC2FCD-EF2C-4130-8D80-C710F100FD59@g8o.net>
References: <C6DC2FCD-EF2C-4130-8D80-C710F100FD59@g8o.net>
Message-ID: <1904408633.311865.1281555600601.JavaMail.open-xchange@oxusltgw09.schlund.de>

I try to keep my PHP and JS as separate as possible. ?When there needs to be any
integration, I set up a PHP function that echos the JS options I need access to
and hook it to wp_head.
?
So something like:
?
function returnJS() {
echo '<script type="text/javascript>';
echo "var myWordPressOptions = { 'option1' : 'value', 'option2' : 'value' };";
echo '</script>';
}
add_action('wp_head', 'returnJS');
?
Then you have access to all of your server-side WordPress goodness and can parse
the options as necessary before pushing them to the browser. ?One of the options
you set can be a flag to your JS to activate your jQuery code ... or it could
even be a singleton function to do the same thing, it's up to you.
?
But this keeps your PHP files almost JS-free, and you can still enqueue your JS
libraries as usual.
?
On August 11, 2010 at 7:02 PM "[ ravi ]" <ravi-lists at g8o.net> wrote:

>
> Howdy all,
>
> I have a preference setting in my theme options. If it is checked on, then
> some jQuery stuff needs to be activated. The jQuery stuff sits in a .js file
> in my theme. Thus far, I have been throwing this sort of Javascript code, that
> has to be executed on the basis of a back-end option, in a separate PHP file
> with wrapper PHP code that checks for the relevant option(s).
>
> I am wondering if anyone has a cleverer way of achieving the same thing?
>
> Cheers,
>
>? ? ? ? ??ravi
>
>
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

From otto at ottodestruct.com  Wed Aug 11 20:18:11 2010
From: otto at ottodestruct.com (Otto)
Date: Wed, 11 Aug 2010 15:18:11 -0500
Subject: [wp-hackers] Reacting to options (theme options) in Javascript
In-Reply-To: <1904408633.311865.1281555600601.JavaMail.open-xchange@oxusltgw09.schlund.de>
References: <C6DC2FCD-EF2C-4130-8D80-C710F100FD59@g8o.net> 
	<1904408633.311865.1281555600601.JavaMail.open-xchange@oxusltgw09.schlund.de>
Message-ID: <AANLkTinj9k=HwDzZfQM3qdtnpUHiy5KeHZZOgMWK8OpJ@mail.gmail.com>

Best way to do that is using wp_localize_script.

Example:

wp_enqueue_script('my_script', /path/to/my/script.js', array('jquery'), etc...);

wp_localize_script( 'my_script', 'MySettings', array(
	  	'setting' => 123,
                'foo' => "bar"
		));

Basically, that array is the parameters I want to pass to the script.
You can form it any way you like, it's just a PHP array. What will
happen before the script gets added to the head is that an inline
script containing those settings will be added first. So that the
script will have access to your settings.

-Otto


On Wed, Aug 11, 2010 at 2:40 PM, Eric Mann <eric at eamann.com> wrote:
> I try to keep my PHP and JS as separate as possible. ?When there needs to be any
> integration, I set up a PHP function that echos the JS options I need access to
> and hook it to wp_head.
>
> So something like:
>
> function returnJS() {
> echo '<script type="text/javascript>';
> echo "var myWordPressOptions = { 'option1' : 'value', 'option2' : 'value' };";
> echo '</script>';
> }
> add_action('wp_head', 'returnJS');
>
> Then you have access to all of your server-side WordPress goodness and can parse
> the options as necessary before pushing them to the browser. ?One of the options
> you set can be a flag to your JS to activate your jQuery code ... or it could
> even be a singleton function to do the same thing, it's up to you.
>
> But this keeps your PHP files almost JS-free, and you can still enqueue your JS
> libraries as usual.
>
> On August 11, 2010 at 7:02 PM "[ ravi ]" <ravi-lists at g8o.net> wrote:
>
>>
>> Howdy all,
>>
>> I have a preference setting in my theme options. If it is checked on, then
>> some jQuery stuff needs to be activated. The jQuery stuff sits in a .js file
>> in my theme. Thus far, I have been throwing this sort of Javascript code, that
>> has to be executed on the basis of a back-end option, in a separate PHP file
>> with wrapper PHP code that checks for the relevant option(s).
>>
>> I am wondering if anyone has a cleverer way of achieving the same thing?
>>
>> Cheers,
>>
>>? ? ? ? ??ravi
>>
>>
>>
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From otto at ottodestruct.com  Wed Aug 11 20:20:22 2010
From: otto at ottodestruct.com (Otto)
Date: Wed, 11 Aug 2010 15:20:22 -0500
Subject: [wp-hackers] Reacting to options (theme options) in Javascript
In-Reply-To: <AANLkTinj9k=HwDzZfQM3qdtnpUHiy5KeHZZOgMWK8OpJ@mail.gmail.com>
References: <C6DC2FCD-EF2C-4130-8D80-C710F100FD59@g8o.net> 
	<1904408633.311865.1281555600601.JavaMail.open-xchange@oxusltgw09.schlund.de>
	<AANLkTinj9k=HwDzZfQM3qdtnpUHiy5KeHZZOgMWK8OpJ@mail.gmail.com>
Message-ID: <AANLkTik4x_i0eg4Obs7=On2TASHnaadTZXgAwQ6U36gg@mail.gmail.com>

Almost forgot to explain the object part...

The "MySettings" is the name of the JS object you want to get the
settings. This allows you to keep your settings separated between
different scripts.

In the example below, the settings would be accessible to scripts via
MySettings.settings or MySettings.foo .

-Otto



On Wed, Aug 11, 2010 at 3:18 PM, Otto <otto at ottodestruct.com> wrote:
> Best way to do that is using wp_localize_script.
>
> Example:
>
> wp_enqueue_script('my_script', /path/to/my/script.js', array('jquery'), etc...);
>
> wp_localize_script( 'my_script', 'MySettings', array(
> ? ? ? ? ? ? ? ?'setting' => 123,
> ? ? ? ? ? ? ? ?'foo' => "bar"
> ? ? ? ? ? ? ? ?));
>
> Basically, that array is the parameters I want to pass to the script.
> You can form it any way you like, it's just a PHP array. What will
> happen before the script gets added to the head is that an inline
> script containing those settings will be added first. So that the
> script will have access to your settings.
>
> -Otto

From angelia at 10sexyapples.com  Wed Aug 11 21:03:31 2010
From: angelia at 10sexyapples.com (Angelia Baladon)
Date: Wed, 11 Aug 2010 14:03:31 -0700
Subject: [wp-hackers] 'request' filter for adding custom post types to blog
	indexes
Message-ID: <AANLkTimzB2MsgCmwpWBPEpP5OB0rk6b_d7B5rs4+Cj=9@mail.gmail.com>

Krusty - if this tests successful for you, can you report back here on it? I
have been trying for weeks now to get a best practices/working example of
how to add custom post types in this way ( just the author and year for me
though ) and haven't been successful. Check the pre_get_posts problem topic
if you're interested in what hasn't worked to date~ ... Perhaps I wasn't
asking the right way? I'm going to test this out as well and will also
report back on it. If this tests out, it sure will be nice to finally put
this to rest~

From krustyruffle at rustykruffle.com  Wed Aug 11 21:55:19 2010
From: krustyruffle at rustykruffle.com (Krusty Ruffle)
Date: Wed, 11 Aug 2010 17:55:19 -0400
Subject: [wp-hackers] 'request' filter for adding custom post types to
	blog indexes
In-Reply-To: <AANLkTinQG6hyBiM84Mfx44h9WpRP7qOQ5_PkjWOoB_mo@mail.gmail.com>
References: <AANLkTinnTo7OC9M7r0nYHZWxNL3g6wsE5pC9LoTSGi++@mail.gmail.com>
	<AANLkTikj-2WCzV3_9K1Z20V0tX09UotoaqwvbR5vL6tG@mail.gmail.com>
	<AANLkTikbuiBqzN3WQaGV78LrZRTdA0Vu+cRQzSABqCfz@mail.gmail.com>
	<AANLkTinQG6hyBiM84Mfx44h9WpRP7qOQ5_PkjWOoB_mo@mail.gmail.com>
Message-ID: <AANLkTinSQETxZ+cUZr-_HYsMHsR+jyXsz4KXzYU4Oz5L@mail.gmail.com>

Thank you for the advice, it is greatly appreciated! I now feel that I have
at least a small grip on what I'm doing here and have something to play
around with for a couple days! :^)

On Wed, Aug 11, 2010 at 3:29 PM, scribu <scribu at gmail.com> wrote:

> Something like this:
>
>         if ( isset ( $request['post_type'] ) :
>                $request['post_type'] = (array) $request['post_type'];
>                $request['post_type][] = 'my_post_type' ;
>         else:
>                $request['post_type'] = array ( 'post', 'my_post_type' ) ;
>          endif;
>
> It really depends on what else you're doing. Best is to try it out, with
> lots of testing.
>
>
> --
> http://scribu.net
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From krustyruffle at rustykruffle.com  Wed Aug 11 22:33:24 2010
From: krustyruffle at rustykruffle.com (Krusty Ruffle)
Date: Wed, 11 Aug 2010 18:33:24 -0400
Subject: [wp-hackers] 'request' filter for adding custom post types to
 blog indexes
In-Reply-To: <AANLkTimzB2MsgCmwpWBPEpP5OB0rk6b_d7B5rs4+Cj=9@mail.gmail.com>
References: <AANLkTimzB2MsgCmwpWBPEpP5OB0rk6b_d7B5rs4+Cj=9@mail.gmail.com>
Message-ID: <AANLkTi=EdgQehsGjPPtfDQbygOdMgZHkSE=W+4LTxArg@mail.gmail.com>

After minimal testing it seems to be working pretty good. I have not tested
it with multiple loops, widgets that list posts or mare than one custom post
type yet though.

The request filter seem to pass a different array for every possible page so
I'm thinking that a creative person could do some really interesting things
things with it, especially if they were to test values instead of just
element existence. I'm hoping to get some more testing done on this and try
to get it documented somewhere but I've got a few things eating up my time
for a couple of days so I'm not sure about that, but I will post about any
problems I run into while testing it out.

On Wed, Aug 11, 2010 at 5:03 PM, Angelia Baladon
<angelia at 10sexyapples.com>wrote:

> Krusty - if this tests successful for you, can you report back here on it?
> I
> have been trying for weeks now to get a best practices/working example of
> how to add custom post types in this way ( just the author and year for me
> though ) and haven't been successful. Check the pre_get_posts problem topic
> if you're interested in what hasn't worked to date~ ... Perhaps I wasn't
> asking the right way? I'm going to test this out as well and will also
> report back on it. If this tests out, it sure will be nice to finally put
> this to rest~
>

I have followed that topic, as well as just about everything that has to do
with custom post types. I'm beginning to believe that WordPress will finally
be able to do everything I've been trying to do for the last couple of years
and maybe I'll finally start doing something with all those websites I've
been paying for!

From krustyruffle at rustykruffle.com  Thu Aug 12 00:34:32 2010
From: krustyruffle at rustykruffle.com (Krusty Ruffle)
Date: Wed, 11 Aug 2010 20:34:32 -0400
Subject: [wp-hackers] 'request' filter for adding custom post types to
	blog indexes
In-Reply-To: <AANLkTi=EdgQehsGjPPtfDQbygOdMgZHkSE=W+4LTxArg@mail.gmail.com>
References: <AANLkTimzB2MsgCmwpWBPEpP5OB0rk6b_d7B5rs4+Cj=9@mail.gmail.com>
	<AANLkTi=EdgQehsGjPPtfDQbygOdMgZHkSE=W+4LTxArg@mail.gmail.com>
Message-ID: <AANLkTikN8WvsoFktz=23R2cpLCfqXiOo0QuF-Wa2Tkti@mail.gmail.com>

Okay, I've tested some widgets with this, It DOES show comments that are
made on custom post type posts in the recent comments widget, it DOES NOT
add custom post types to the counts in the Archives widget, it DOES NOT show
custom posts in the recent posts widget.

On Wed, Aug 11, 2010 at 6:33 PM, Krusty Ruffle <
krustyruffle at rustykruffle.com> wrote:

> After minimal testing it seems to be working pretty good. I have not tested
> it with multiple loops, widgets that list posts or mare than one custom post
> type yet though.
>

From m.websoft at gmail.com  Thu Aug 12 09:54:28 2010
From: m.websoft at gmail.com (mohammad aghanabi)
Date: Thu, 12 Aug 2010 14:24:28 +0430
Subject: [wp-hackers] Excluding a category posts from feed and a little
	question
Message-ID: <AANLkTik_1N11TtbU-7RYt+Qvu6O2mcX+-Kq89XSubAz0@mail.gmail.com>

hi;
i recently used this short code in functions.php to exclude a category posts
( id=20 ) from being shown in wordpress feed.
<?php
function my_cat_exclude($query) {
    if ($query->is_feed) {
        $query->set('cat','-20');
    }
    return $query;
}
add_filter('pre_get_posts','my_cat_exclude');
?>
but the problem is, this function interrupts other wordpress categories
feeds and they won't show their posts. ( just displaying the main
url feed content )

- for example this feed content : http://www.mysite.com/?feed=rss2&cat=21
is like this content : http://www.websoftdownload.com/?feed=rss2
by using that function and also the plugins that i tested were the same.

SOS !

From chrisbratlien at gmail.com  Thu Aug 12 12:35:38 2010
From: chrisbratlien at gmail.com (Christopher Bratlien)
Date: Thu, 12 Aug 2010 07:35:38 -0500
Subject: [wp-hackers] Excluding a category posts from feed and a little
	question
In-Reply-To: <AANLkTik_1N11TtbU-7RYt+Qvu6O2mcX+-Kq89XSubAz0@mail.gmail.com>
References: <AANLkTik_1N11TtbU-7RYt+Qvu6O2mcX+-Kq89XSubAz0@mail.gmail.com>
Message-ID: <AANLkTikyWqz=8GSaKU=FuGanbna9W8j56m5ozGrdrqBe@mail.gmail.com>

When I visit feed://www.websoftdownload.com/?feed=rss2&cat=21 the feed
contains a different set of posts than if I visit feed://
www.websoftdownload.com/?feed=rss2&cat=20 or feed://
www.websoftdownload.com/?feed=rss2

Did you already find a solution to your problem?

Your code seems valid to me. I've used a similar method to exclude posts
from RSS feeds before.

On Thu, Aug 12, 2010 at 4:54 AM, mohammad aghanabi <m.websoft at gmail.com>wrote:

> hi;
> i recently used this short code in functions.php to exclude a category
> posts
> ( id=20 ) from being shown in wordpress feed.
> <?php
> function my_cat_exclude($query) {
>    if ($query->is_feed) {
>        $query->set('cat','-20');
>    }
>    return $query;
> }
> add_filter('pre_get_posts','my_cat_exclude');
> ?>
> but the problem is, this function interrupts other wordpress categories
> feeds and they won't show their posts. ( just displaying the main
> url feed content )
>
> - for example this feed content : http://www.mysite.com/?feed=rss2&cat=21
> is like this content : http://www.websoftdownload.com/?feed=rss2
> by using that function and also the plugins that i tested were the same.
>
> SOS !
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From m.websoft at gmail.com  Thu Aug 12 12:38:34 2010
From: m.websoft at gmail.com (mohammad aghanabi)
Date: Thu, 12 Aug 2010 17:08:34 +0430
Subject: [wp-hackers] Excluding a category posts from feed and a little
	question
In-Reply-To: <AANLkTikyWqz=8GSaKU=FuGanbna9W8j56m5ozGrdrqBe@mail.gmail.com>
References: <AANLkTik_1N11TtbU-7RYt+Qvu6O2mcX+-Kq89XSubAz0@mail.gmail.com>
	<AANLkTikyWqz=8GSaKU=FuGanbna9W8j56m5ozGrdrqBe@mail.gmail.com>
Message-ID: <AANLkTinvF6jZwwR5nm+TPXeXL7gkSLd62nd=HFSX7Ghc@mail.gmail.com>

i didn't used my url as an example, because i did it and i found that it has
a problem
and restored first settings.

but it has problem already when u do it.

On Thu, Aug 12, 2010 at 5:05 PM, Christopher Bratlien <
chrisbratlien at gmail.com> wrote:

> When I visit feed://www.websoftdownload.com/?feed=rss2&cat=21 the feed
> contains a different set of posts than if I visit feed://
> www.websoftdownload.com/?feed=rss2&cat=20 or feed://
> www.websoftdownload.com/?feed=rss2
>
> Did you already find a solution to your problem?
>
> Your code seems valid to me. I've used a similar method to exclude posts
> from RSS feeds before.
>
> On Thu, Aug 12, 2010 at 4:54 AM, mohammad aghanabi <m.websoft at gmail.com
> >wrote:
>
> > hi;
> > i recently used this short code in functions.php to exclude a category
> > posts
> > ( id=20 ) from being shown in wordpress feed.
> > <?php
> > function my_cat_exclude($query) {
> >    if ($query->is_feed) {
> >        $query->set('cat','-20');
> >    }
> >    return $query;
> > }
> > add_filter('pre_get_posts','my_cat_exclude');
> > ?>
> > but the problem is, this function interrupts other wordpress categories
> > feeds and they won't show their posts. ( just displaying the main
> > url feed content )
> >
> > - for example this feed content :
> http://www.mysite.com/?feed=rss2&cat=21
> > is like this content : http://www.websoftdownload.com/?feed=rss2
> > by using that function and also the plugins that i tested were the same.
> >
> > SOS !
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers at lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> >
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>



-- 
??? ????? ??? ?? ?????? ? ?? ??? ?? ?? ??? ????? ?? ??? ??? ?? ?? ?? ????? ?
?????? ?? ??????? ?? ?????

From louy08 at gmail.com  Thu Aug 12 17:17:49 2010
From: louy08 at gmail.com (Louy)
Date: Thu, 12 Aug 2010 20:17:49 +0300
Subject: [wp-hackers] wp_get_current_commenter
Message-ID: <AANLkTikgO4ESa-Yjq1cdPo0BLa+A6hEU3aRqxs+Ti0aK@mail.gmail.com>

Hello all :)

I'm having some kinda problem and i need help :/
I'm trying to change the commenter data, the default ones in the comment
form while the user isn't logged in, i've seen that the data returns from
calling the function "*wp_get_current_commenter*" which is called by
comment_form() in
http://svn.automattic.com/wordpress/trunk/wp-includes/comment-template.php

what i noticed is that there's no way to change these data, check the file
http://svn.automattic.com/wordpress/trunk/wp-includes/comment.php

I think that *wp_get_current_commenter *should be hooked into an action
called *wp_get_current_commenter* so i'm able to edit those data! is there
anyway that i've missed!??
Please help by checking that. Thanks :)


Best.

-- 
Louy
http://louyblog.wordpress.com/

From rbilesky at gmail.com  Thu Aug 12 18:02:13 2010
From: rbilesky at gmail.com (Ryan Bilesky)
Date: Thu, 12 Aug 2010 11:02:13 -0700
Subject: [wp-hackers] wp_get_current_commenter
In-Reply-To: <AANLkTikgO4ESa-Yjq1cdPo0BLa+A6hEU3aRqxs+Ti0aK@mail.gmail.com>
References: <AANLkTikgO4ESa-Yjq1cdPo0BLa+A6hEU3aRqxs+Ti0aK@mail.gmail.com>
Message-ID: <AANLkTi=UKzEqDyWnB98TMMsukOjFdtrGzXRHqLZhCbDe@mail.gmail.com>

Have you looked at the comment filters?  If I am understanding what you are
trying to do correctly using a filter should work.

On Thu, Aug 12, 2010 at 10:17 AM, Louy <louy08 at gmail.com> wrote:

> Hello all :)
>
> I'm having some kinda problem and i need help :/
> I'm trying to change the commenter data, the default ones in the comment
> form while the user isn't logged in, i've seen that the data returns from
> calling the function "*wp_get_current_commenter*" which is called by
> comment_form() in
> http://svn.automattic.com/wordpress/trunk/wp-includes/comment-template.php
>
> what i noticed is that there's no way to change these data, check the file
> http://svn.automattic.com/wordpress/trunk/wp-includes/comment.php
>
> I think that *wp_get_current_commenter *should be hooked into an action
> called *wp_get_current_commenter* so i'm able to edit those data! is there
> anyway that i've missed!??
> Please help by checking that. Thanks :)
>
>
> Best.
>
> --
> Louy
> http://louyblog.wordpress.com/
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From louy08 at gmail.com  Thu Aug 12 18:13:16 2010
From: louy08 at gmail.com (Louy)
Date: Thu, 12 Aug 2010 21:13:16 +0300
Subject: [wp-hackers] wp_get_current_commenter
In-Reply-To: <AANLkTi=UKzEqDyWnB98TMMsukOjFdtrGzXRHqLZhCbDe@mail.gmail.com>
References: <AANLkTikgO4ESa-Yjq1cdPo0BLa+A6hEU3aRqxs+Ti0aK@mail.gmail.com>
	<AANLkTi=UKzEqDyWnB98TMMsukOjFdtrGzXRHqLZhCbDe@mail.gmail.com>
Message-ID: <AANLkTin1G9FOXF3MaLHfjt58fi4pS23JKYr49pFNeqV=@mail.gmail.com>

hmmm, i looked through every available filter, it isn't there!

i think this could be fixed with changing 1 line of code only!

in
http://svn.automattic.com/wordpress/trunk/wp-includes/comment-template.php

	/**
> 	 * Comment author information fetched from the comment cookies.
> 	 *
>
> 	 * @uses wp_get_current_commenter()
> 	 */
> 	$commenter = wp_get_current_commenter();
>
> should be changed to:

> 	/**
> 	 * Comment author information fetched from the comment cookies.
> 	 *
> 	 * @uses wp_get_current_commenter()
> 	 */
> 	$commenter = apply_filters('wp_get_current_commenter', wp_get_current_commenter());
>
>
That's the missing filter... yet any alternatives?


On Thu, Aug 12, 2010 at 9:02 PM, Ryan Bilesky <rbilesky at gmail.com> wrote:

> Have you looked at the comment filters?  If I am understanding what you are
> trying to do correctly using a filter should work.
>
> On Thu, Aug 12, 2010 at 10:17 AM, Louy <louy08 at gmail.com> wrote:
>
> > Hello all :)
> >
> > I'm having some kinda problem and i need help :/
> > I'm trying to change the commenter data, the default ones in the comment
> > form while the user isn't logged in, i've seen that the data returns from
> > calling the function "*wp_get_current_commenter*" which is called by
> > comment_form() in
> >
> http://svn.automattic.com/wordpress/trunk/wp-includes/comment-template.php
> >
> > what i noticed is that there's no way to change these data, check the
> file
> > http://svn.automattic.com/wordpress/trunk/wp-includes/comment.php
> >
> > I think that *wp_get_current_commenter *should be hooked into an action
> > called *wp_get_current_commenter* so i'm able to edit those data! is
> there
> > anyway that i've missed!??
> > Please help by checking that. Thanks :)
> >
> >
> > Best.
> >
> > --
> > Louy
> > http://louyblog.wordpress.com/
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers at lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> >
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>



-- 
Louy
http://louyblog.wordpress.com/

From otto at ottodestruct.com  Thu Aug 12 18:17:27 2010
From: otto at ottodestruct.com (Otto)
Date: Thu, 12 Aug 2010 13:17:27 -0500
Subject: [wp-hackers] wp_get_current_commenter
In-Reply-To: <AANLkTin1G9FOXF3MaLHfjt58fi4pS23JKYr49pFNeqV=@mail.gmail.com>
References: <AANLkTikgO4ESa-Yjq1cdPo0BLa+A6hEU3aRqxs+Ti0aK@mail.gmail.com>
	<AANLkTi=UKzEqDyWnB98TMMsukOjFdtrGzXRHqLZhCbDe@mail.gmail.com>
	<AANLkTin1G9FOXF3MaLHfjt58fi4pS23JKYr49pFNeqV=@mail.gmail.com>
Message-ID: <AANLkTim1_RHSWTmiR8rs+cD8T-jfEe+zrgjpr6xhuDM-@mail.gmail.com>

On Thu, Aug 12, 2010 at 1:13 PM, Louy <louy08 at gmail.com> wrote:
> hmmm, i looked through every available filter, it isn't there!
> ...
> That's the missing filter... yet any alternatives?

Use the comment_form_default_fields filter. You'll have to make the
whole field item (label and input and everything), but this will give
you control over that part of it.

-Otto

From louy08 at gmail.com  Thu Aug 12 18:25:58 2010
From: louy08 at gmail.com (Louy)
Date: Thu, 12 Aug 2010 21:25:58 +0300
Subject: [wp-hackers] wp_get_current_commenter
In-Reply-To: <AANLkTim1_RHSWTmiR8rs+cD8T-jfEe+zrgjpr6xhuDM-@mail.gmail.com>
References: <AANLkTikgO4ESa-Yjq1cdPo0BLa+A6hEU3aRqxs+Ti0aK@mail.gmail.com>
	<AANLkTi=UKzEqDyWnB98TMMsukOjFdtrGzXRHqLZhCbDe@mail.gmail.com>
	<AANLkTin1G9FOXF3MaLHfjt58fi4pS23JKYr49pFNeqV=@mail.gmail.com>
	<AANLkTim1_RHSWTmiR8rs+cD8T-jfEe+zrgjpr6xhuDM-@mail.gmail.com>
Message-ID: <AANLkTi=kxHpoWF_CLb3RQ6QGRXJZL+ZW+bDrj5_m5bp2@mail.gmail.com>

yea i know :) i'm just thinking... what if the theme needs to edit this
html, it'd call the wp_get_current_commenter function and use it's own data!
so i think there should be a better solution... maybe applying the filter to
the returned value of the function "wp_get_current_commenter()" so it'd be:

/**
>  * Get current commenter's name, email, and URL.
>  *
>  * Expects cookies content to already be sanitized. User of this function might
>
>  * wish to recheck the returned array for validity.
>  *
>  * @see sanitize_comment_cookies() Use to sanitize cookies
>  *
>  * @since 2.0.4
>  *
>  * @return array Comment author, email, url respectively.
>  */
>
> function wp_get_current_commenter() {
> 	// Cookies should already be sanitized.
>
> 	$comment_author = '';
> 	if ( isset($_COOKIE['comment_author_'.COOKIEHASH]) )
> 		$comment_author = $_COOKIE['comment_author_'.COOKIEHASH];
>
> 	$comment_author_email = '';
> 	if ( isset($_COOKIE['comment_author_email_'.COOKIEHASH]) )
> 		$comment_author_email = $_COOKIE['comment_author_email_'.COOKIEHASH];
>
> 	$comment_author_url = '';
>
> 	if ( isset($_COOKIE['comment_author_url_'.COOKIEHASH]) )
> 		$comment_author_url = $_COOKIE['comment_author_url_'.COOKIEHASH];
>
> 	return apply_filters('wp_get_current_commenter', compact('comment_author', 'comment_author_email', 'comment_author_url'));
>
> }
>
>  That's the best logical solution don't you think ;)

On Thu, Aug 12, 2010 at 9:17 PM, Otto <otto at ottodestruct.com> wrote:

> On Thu, Aug 12, 2010 at 1:13 PM, Louy <louy08 at gmail.com> wrote:
> > hmmm, i looked through every available filter, it isn't there!
> > ...
> > That's the missing filter... yet any alternatives?
>
> Use the comment_form_default_fields filter. You'll have to make the
> whole field item (label and input and everything), but this will give
> you control over that part of it.
>
> -Otto
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>



-- 
Louy
http://louyblog.wordpress.com/

From louy08 at gmail.com  Thu Aug 12 19:18:25 2010
From: louy08 at gmail.com (Louy)
Date: Thu, 12 Aug 2010 22:18:25 +0300
Subject: [wp-hackers] wp_get_current_commenter
In-Reply-To: <AANLkTi=kxHpoWF_CLb3RQ6QGRXJZL+ZW+bDrj5_m5bp2@mail.gmail.com>
References: <AANLkTikgO4ESa-Yjq1cdPo0BLa+A6hEU3aRqxs+Ti0aK@mail.gmail.com>
	<AANLkTi=UKzEqDyWnB98TMMsukOjFdtrGzXRHqLZhCbDe@mail.gmail.com>
	<AANLkTin1G9FOXF3MaLHfjt58fi4pS23JKYr49pFNeqV=@mail.gmail.com>
	<AANLkTim1_RHSWTmiR8rs+cD8T-jfEe+zrgjpr6xhuDM-@mail.gmail.com>
	<AANLkTi=kxHpoWF_CLb3RQ6QGRXJZL+ZW+bDrj5_m5bp2@mail.gmail.com>
Message-ID: <AANLkTimdPYqJR_AsuOqhBgqnzrdgk6kL8+K21jAg5uSM@mail.gmail.com>

can someone help me, i want to open a ticket with this but I'm a newbie!
anyone (:

On Thu, Aug 12, 2010 at 9:25 PM, Louy <louy08 at gmail.com> wrote:

> yea i know :) i'm just thinking... what if the theme needs to edit this
> html, it'd call the wp_get_current_commenter function and use it's own data!
> so i think there should be a better solution... maybe applying the filter to
> the returned value of the function "wp_get_current_commenter()" so it'd be:
>
> /**
>>  * Get current commenter's name, email, and URL.
>>  *
>>  * Expects cookies content to already be sanitized. User of this function might
>>
>>
>>  * wish to recheck the returned array for validity.
>>  *
>>  * @see sanitize_comment_cookies() Use to sanitize cookies
>>  *
>>  * @since 2.0.4
>>  *
>>  * @return array Comment author, email, url respectively.
>>  */
>>
>>
>> function wp_get_current_commenter() {
>> 	// Cookies should already be sanitized.
>>
>> 	$comment_author = '';
>> 	if ( isset($_COOKIE['comment_author_'.COOKIEHASH]) )
>> 		$comment_author = $_COOKIE['comment_author_'.COOKIEHASH];
>>
>>
>> 	$comment_author_email = '';
>> 	if ( isset($_COOKIE['comment_author_email_'.COOKIEHASH]) )
>> 		$comment_author_email = $_COOKIE['comment_author_email_'.COOKIEHASH];
>>
>> 	$comment_author_url = '';
>>
>>
>> 	if ( isset($_COOKIE['comment_author_url_'.COOKIEHASH]) )
>> 		$comment_author_url = $_COOKIE['comment_author_url_'.COOKIEHASH];
>>
>> 	return apply_filters('wp_get_current_commenter', compact('comment_author', 'comment_author_email', 'comment_author_url'));
>>
>>
>> }
>>
>>  That's the best logical solution don't you think ;)
>
> On Thu, Aug 12, 2010 at 9:17 PM, Otto <otto at ottodestruct.com> wrote:
>
>> On Thu, Aug 12, 2010 at 1:13 PM, Louy <louy08 at gmail.com> wrote:
>> > hmmm, i looked through every available filter, it isn't there!
>> > ...
>> > That's the missing filter... yet any alternatives?
>>
>> Use the comment_form_default_fields filter. You'll have to make the
>> whole field item (label and input and everything), but this will give
>> you control over that part of it.
>>
>> -Otto
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
>
>
>
> --
> Louy
> http://louyblog.wordpress.com/
>
>


-- 
Louy
http://louyblog.wordpress.com/

From otto at ottodestruct.com  Thu Aug 12 19:37:35 2010
From: otto at ottodestruct.com (Otto)
Date: Thu, 12 Aug 2010 14:37:35 -0500
Subject: [wp-hackers] wp_get_current_commenter
In-Reply-To: <AANLkTi=kxHpoWF_CLb3RQ6QGRXJZL+ZW+bDrj5_m5bp2@mail.gmail.com>
References: <AANLkTikgO4ESa-Yjq1cdPo0BLa+A6hEU3aRqxs+Ti0aK@mail.gmail.com>
	<AANLkTi=UKzEqDyWnB98TMMsukOjFdtrGzXRHqLZhCbDe@mail.gmail.com>
	<AANLkTin1G9FOXF3MaLHfjt58fi4pS23JKYr49pFNeqV=@mail.gmail.com>
	<AANLkTim1_RHSWTmiR8rs+cD8T-jfEe+zrgjpr6xhuDM-@mail.gmail.com>
	<AANLkTi=kxHpoWF_CLb3RQ6QGRXJZL+ZW+bDrj5_m5bp2@mail.gmail.com>
Message-ID: <AANLkTikaUUt+05sxvVq8TFwUKJNp77FE+ux4kFJAJVHd@mail.gmail.com>

I didn't even consider looking at the wp_get_current_commenter function.

Why don't you just set those COOKIE globals yourself? That way you can
control what it returns.

-Otto



On Thu, Aug 12, 2010 at 1:25 PM, Louy <louy08 at gmail.com> wrote:
> yea i know :) i'm just thinking... what if the theme needs to edit this
> html, it'd call the wp_get_current_commenter function and use it's own data!
> so i think there should be a better solution... maybe applying the filter to
> the returned value of the function "wp_get_current_commenter()" so it'd be:
>
> /**
>> ?* Get current commenter's name, email, and URL.
>> ?*
>> ?* Expects cookies content to already be sanitized. User of this function might
>>
>> ?* wish to recheck the returned array for validity.
>> ?*
>> ?* @see sanitize_comment_cookies() Use to sanitize cookies
>> ?*
>> ?* @since 2.0.4
>> ?*
>> ?* @return array Comment author, email, url respectively.
>> ?*/
>>
>> function wp_get_current_commenter() {
>> ? ? ? // Cookies should already be sanitized.
>>
>> ? ? ? $comment_author = '';
>> ? ? ? if ( isset($_COOKIE['comment_author_'.COOKIEHASH]) )
>> ? ? ? ? ? ? ? $comment_author = $_COOKIE['comment_author_'.COOKIEHASH];
>>
>> ? ? ? $comment_author_email = '';
>> ? ? ? if ( isset($_COOKIE['comment_author_email_'.COOKIEHASH]) )
>> ? ? ? ? ? ? ? $comment_author_email = $_COOKIE['comment_author_email_'.COOKIEHASH];
>>
>> ? ? ? $comment_author_url = '';
>>
>> ? ? ? if ( isset($_COOKIE['comment_author_url_'.COOKIEHASH]) )
>> ? ? ? ? ? ? ? $comment_author_url = $_COOKIE['comment_author_url_'.COOKIEHASH];
>>
>> ? ? ? return apply_filters('wp_get_current_commenter', compact('comment_author', 'comment_author_email', 'comment_author_url'));
>>
>> }
>>
>> ?That's the best logical solution don't you think ;)
>
> On Thu, Aug 12, 2010 at 9:17 PM, Otto <otto at ottodestruct.com> wrote:
>
>> On Thu, Aug 12, 2010 at 1:13 PM, Louy <louy08 at gmail.com> wrote:
>> > hmmm, i looked through every available filter, it isn't there!
>> > ...
>> > That's the missing filter... yet any alternatives?
>>
>> Use the comment_form_default_fields filter. You'll have to make the
>> whole field item (label and input and everything), but this will give
>> you control over that part of it.
>>
>> -Otto
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
>
>
>
> --
> Louy
> http://louyblog.wordpress.com/
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From louy08 at gmail.com  Thu Aug 12 21:02:24 2010
From: louy08 at gmail.com (Louy)
Date: Fri, 13 Aug 2010 00:02:24 +0300
Subject: [wp-hackers] wp_get_current_commenter
In-Reply-To: <AANLkTikaUUt+05sxvVq8TFwUKJNp77FE+ux4kFJAJVHd@mail.gmail.com>
References: <AANLkTikgO4ESa-Yjq1cdPo0BLa+A6hEU3aRqxs+Ti0aK@mail.gmail.com>
	<AANLkTi=UKzEqDyWnB98TMMsukOjFdtrGzXRHqLZhCbDe@mail.gmail.com>
	<AANLkTin1G9FOXF3MaLHfjt58fi4pS23JKYr49pFNeqV=@mail.gmail.com>
	<AANLkTim1_RHSWTmiR8rs+cD8T-jfEe+zrgjpr6xhuDM-@mail.gmail.com>
	<AANLkTi=kxHpoWF_CLb3RQ6QGRXJZL+ZW+bDrj5_m5bp2@mail.gmail.com>
	<AANLkTikaUUt+05sxvVq8TFwUKJNp77FE+ux4kFJAJVHd@mail.gmail.com>
Message-ID: <AANLkTim1J-xfHt+J7kMGDAX4gW4gmQv6Woepp9gn32_M@mail.gmail.com>

It really sucks to know that you don't have the full control to do what ever
you want to do the way you want to do it!
anyway i can wait 6 days and use the alternative methods, i want to change
the cookies names so guess i'll go for the first one! editing the default
fields HTML!

Thanks Otto, Mike and Ryan ;)

On Thu, Aug 12, 2010 at 10:37 PM, Otto <otto at ottodestruct.com> wrote:

> I didn't even consider looking at the wp_get_current_commenter function.
>
> Why don't you just set those COOKIE globals yourself? That way you can
> control what it returns.
>
> -Otto
>
>
>
> On Thu, Aug 12, 2010 at 1:25 PM, Louy <louy08 at gmail.com> wrote:
> > yea i know :) i'm just thinking... what if the theme needs to edit this
> > html, it'd call the wp_get_current_commenter function and use it's own
> data!
> > so i think there should be a better solution... maybe applying the filter
> to
> > the returned value of the function "wp_get_current_commenter()" so it'd
> be:
> >
> > /**
> >>  * Get current commenter's name, email, and URL.
> >>  *
> >>  * Expects cookies content to already be sanitized. User of this
> function might
> >>
> >>  * wish to recheck the returned array for validity.
> >>  *
> >>  * @see sanitize_comment_cookies() Use to sanitize cookies
> >>  *
> >>  * @since 2.0.4
> >>  *
> >>  * @return array Comment author, email, url respectively.
> >>  */
> >>
> >> function wp_get_current_commenter() {
> >>       // Cookies should already be sanitized.
> >>
> >>       $comment_author = '';
> >>       if ( isset($_COOKIE['comment_author_'.COOKIEHASH]) )
> >>               $comment_author = $_COOKIE['comment_author_'.COOKIEHASH];
> >>
> >>       $comment_author_email = '';
> >>       if ( isset($_COOKIE['comment_author_email_'.COOKIEHASH]) )
> >>               $comment_author_email =
> $_COOKIE['comment_author_email_'.COOKIEHASH];
> >>
> >>       $comment_author_url = '';
> >>
> >>       if ( isset($_COOKIE['comment_author_url_'.COOKIEHASH]) )
> >>               $comment_author_url =
> $_COOKIE['comment_author_url_'.COOKIEHASH];
> >>
> >>       return apply_filters('wp_get_current_commenter',
> compact('comment_author', 'comment_author_email', 'comment_author_url'));
> >>
> >> }
> >>
> >>  That's the best logical solution don't you think ;)
> >
> > On Thu, Aug 12, 2010 at 9:17 PM, Otto <otto at ottodestruct.com> wrote:
> >
> >> On Thu, Aug 12, 2010 at 1:13 PM, Louy <louy08 at gmail.com> wrote:
> >> > hmmm, i looked through every available filter, it isn't there!
> >> > ...
> >> > That's the missing filter... yet any alternatives?
> >>
> >> Use the comment_form_default_fields filter. You'll have to make the
> >> whole field item (label and input and everything), but this will give
> >> you control over that part of it.
> >>
> >> -Otto
> >> _______________________________________________
> >> wp-hackers mailing list
> >> wp-hackers at lists.automattic.com
> >> http://lists.automattic.com/mailman/listinfo/wp-hackers
> >>
> >
> >
> >
> > --
> > Louy
> > http://louyblog.wordpress.com/
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers at lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> >
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>



-- 
Louy
http://louyblog.wordpress.com/

From angelia at 10sexyapples.com  Fri Aug 13 05:12:19 2010
From: angelia at 10sexyapples.com (Angelia Baladon)
Date: Thu, 12 Aug 2010 22:12:19 -0700
Subject: [wp-hackers] 'request' filter for adding custom post types to blog
	indexes
Message-ID: <AANLkTin6Ak2WTAbiFDh2_TH=9iSpvsJCr-rNXEvbOgDr@mail.gmail.com>

Thanks for all the feedback Krusty, and sorry for taking so long to respond
... tough day yesterday.

I gave it a whirl just a bit ago, and for me, same result as I was getting
with two other attempts ... illegal offset in post.php.

I'm going nuts with this, let me tell ya. I wonder what I am doing different
than you that I am getting an illegal offset error with this, and you
aren't.

I'm totally baffled.

I'm going to test it on fresh twenty ten and see what the results are.

I'll report back~

From angelia at 10sexyapples.com  Fri Aug 13 05:25:59 2010
From: angelia at 10sexyapples.com (Angelia Baladon)
Date: Thu, 12 Aug 2010 22:25:59 -0700
Subject: [wp-hackers] 'request' filter for adding custom post types to blog
	indexes
Message-ID: <AANLkTinJfoYumQg26Gv890wRf65vPTiRtVGfedRrVm4Y@mail.gmail.com>

Just tested on a totally fresh twenty-ten theme, only includes were my
custom post type and taxonomy registrations and this code. Illegal offset
right on home page~
I wonder if something in my registrations is what is causing me to get the
error and you not? I'm going to do some more testing~

From negatif.negatif at gmail.com  Fri Aug 13 07:56:15 2010
From: negatif.negatif at gmail.com (bo)
Date: Fri, 13 Aug 2010 10:56:15 +0300
Subject: [wp-hackers] is there a way to filter what plugins show up in
	plugins.php page?
Message-ID: <AANLkTimHN96oevQ-YMEufQBe0vHfNtKt5b=qSvJ_B2+K@mail.gmail.com>

hello all,

I'm wondering if there's a way to filter which plugins show up in
plugins.php page?
any help pointing to docs or info in this direction appreciated .

From KrisY at tbs.uk.com  Fri Aug 13 08:02:42 2010
From: KrisY at tbs.uk.com (Kris Young)
Date: Fri, 13 Aug 2010 09:02:42 +0100
Subject: [wp-hackers] 'request' filter for adding custom post types to
	blogindexes
In-Reply-To: <AANLkTinJfoYumQg26Gv890wRf65vPTiRtVGfedRrVm4Y@mail.gmail.com>
References: <AANLkTinJfoYumQg26Gv890wRf65vPTiRtVGfedRrVm4Y@mail.gmail.com>
Message-ID: <CD47955B7E065D48AB5CF226C2ED75C02E32F4@tbs-sbs01.TBS.local>

Just been looking around for the problem you're having, Angela. At first
impression, it looks like it's not your code.

http://wordpress.org/support/topic/warning-illegal-offset-type-in-isset-
or-empty

It appears to be a bug within WordPress itself. Anyone else wants to
confirm this?

-----Original Message-----
From: wp-hackers-bounces at lists.automattic.com
[mailto:wp-hackers-bounces at lists.automattic.com] On Behalf Of Angelia
Baladon
Sent: 13 August 2010 06:26
To: wp-hackers at lists.automattic.com
Subject: [wp-hackers] 'request' filter for adding custom post types to
blogindexes

Just tested on a totally fresh twenty-ten theme, only includes were my
custom post type and taxonomy registrations and this code. Illegal
offset
right on home page~
I wonder if something in my registrations is what is causing me to get
the
error and you not? I'm going to do some more testing~
_______________________________________________
wp-hackers mailing list
wp-hackers at lists.automattic.com
http://lists.automattic.com/mailman/listinfo/wp-hackers

From rbilesky at gmail.com  Fri Aug 13 08:03:28 2010
From: rbilesky at gmail.com (Ryan Bilesky)
Date: Fri, 13 Aug 2010 01:03:28 -0700
Subject: [wp-hackers] is there a way to filter what plugins show up in
 plugins.php page?
In-Reply-To: <AANLkTimHN96oevQ-YMEufQBe0vHfNtKt5b=qSvJ_B2+K@mail.gmail.com>
References: <AANLkTimHN96oevQ-YMEufQBe0vHfNtKt5b=qSvJ_B2+K@mail.gmail.com>
Message-ID: <AANLkTinRSz_Ukg+bWL5gNoA3Ap7Reqq1CLLVkyRLUUAQ@mail.gmail.com>

I could be wrong but I don't belive so.  I used to use a plugin called
Plugin Commander on a multisite install (back when it was a seperate project
called MU) and to customize what was shown on the plugins menu, I had to
disable the plugins menu and it made its own plugins menu.  Now things could
have changed since then though, but not afaik.

On Fri, Aug 13, 2010 at 12:56 AM, bo <negatif.negatif at gmail.com> wrote:

> hello all,
>
> I'm wondering if there's a way to filter which plugins show up in
> plugins.php page?
> any help pointing to docs or info in this direction appreciated .
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From mikeschinkel at newclarity.net  Fri Aug 13 09:12:01 2010
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Fri, 13 Aug 2010 05:12:01 -0400
Subject: [wp-hackers] is there a way to filter what plugins show up in
	plugins.php page?
In-Reply-To: <AANLkTinRSz_Ukg+bWL5gNoA3Ap7Reqq1CLLVkyRLUUAQ@mail.gmail.com>
References: <AANLkTimHN96oevQ-YMEufQBe0vHfNtKt5b=qSvJ_B2+K@mail.gmail.com>
	<AANLkTinRSz_Ukg+bWL5gNoA3Ap7Reqq1CLLVkyRLUUAQ@mail.gmail.com>
Message-ID: <A459FE1B-B40C-4950-9673-8E519608D1C0@newclarity.net>

On Fri, Aug 13, 2010 at 12:56 AM, bo <negatif.negatif at gmail.com> wrote:
> I'm wondering if there's a way to filter which plugins show up in
> plugins.php page?
> any help pointing to docs or info in this direction appreciated .


Take a look at the "all_plugins" and "show_advanced_plugins" filters around lines ~378 to ~390 of /wp-admin/plugins.php. 

-Mike


From compatiblesamuel at gmail.com  Fri Aug 13 11:27:46 2010
From: compatiblesamuel at gmail.com (samuel compatible)
Date: Fri, 13 Aug 2010 03:27:46 -0800
Subject: [wp-hackers] Best practice: access plugins php files
In-Reply-To: <AANLkTi=bnW=PG8FwKdBD0fJzSu8oU9inTc7Pi0ykdYJV@mail.gmail.com>
References: <AANLkTi=bnW=PG8FwKdBD0fJzSu8oU9inTc7Pi0ykdYJV@mail.gmail.com>
Message-ID: <AANLkTi=i7hQMqjiz8qPTgBAgj2FrW_G8Eo+RL1NwDaKc@mail.gmail.com>

O nly make sure that you dont miss the italics..ok you ve to know that  ajax
fans from ajax would be filling it and they need to see the name of thei
club.ok

On Tue, Aug 10, 2010 at 3:34 PM, Lox <lox.dev at knc.nc> wrote:

> Hello,
>
> This is a simple question but I want to be sure about it.
>
> I have a plug in called myplugin, inside it I have an ajax.php file to
> submit ajax requests.
>
> Should I call it directly like this:
> /wp-content/plugins/myplugin/ajax.php or is there a preferred way ?
>
> Regards
>
> --
> Lox
> lox.dev at knc.nc
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From krustyruffle at rustykruffle.com  Fri Aug 13 12:20:14 2010
From: krustyruffle at rustykruffle.com (Krusty Ruffle)
Date: Fri, 13 Aug 2010 08:20:14 -0400
Subject: [wp-hackers] 'request' filter for adding custom post types to
 blog indexes
In-Reply-To: <AANLkTinJfoYumQg26Gv890wRf65vPTiRtVGfedRrVm4Y@mail.gmail.com>
References: <AANLkTinJfoYumQg26Gv890wRf65vPTiRtVGfedRrVm4Y@mail.gmail.com>
Message-ID: <AANLkTimsn5RiutuCs9b9J=na7USN6E4J3kg1Ois=50Nb@mail.gmail.com>

If you want to mail me a .zip file of what your doing, or post a link to
your code, I can give it a run on my setup and take a look to see what we
are doing different.

On Fri, Aug 13, 2010 at 1:25 AM, Angelia Baladon
<angelia at 10sexyapples.com>wrote:

> Just tested on a totally fresh twenty-ten theme, only includes were my
> custom post type and taxonomy registrations and this code. Illegal offset
> right on home page~
> I wonder if something in my registrations is what is causing me to get the
> error and you not? I'm going to do some more testing~
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From angelia at 10sexyapples.com  Fri Aug 13 20:11:22 2010
From: angelia at 10sexyapples.com (Angelia Baladon)
Date: Fri, 13 Aug 2010 13:11:22 -0700
Subject: [wp-hackers] 'request' filter for adding custom post types to blog
	indexes
Message-ID: <AANLkTi=hG=jEfjd27Md7PtXg7Ws9H=n5B8hXH9vh3ynf@mail.gmail.com>

Ahhh. Well, that is good ... and bad ... to know. I'm going to reference
this on the other topic with pre_get_posts as well. If confirmed, it seems
that ticket over on trac should be reopened? It's relieving to know that I'm
not entirely crazy or inept, but, this seems like a real bugger huh? Thank
you for getting this info up!

From angelia at 10sexyapples.com  Fri Aug 13 20:14:44 2010
From: angelia at 10sexyapples.com (Angelia Baladon)
Date: Fri, 13 Aug 2010 13:14:44 -0700
Subject: [wp-hackers] pre_get_posts problem
Message-ID: <AANLkTi=FE1Y4J6YW67Lmqnifm9FwUczvFVTkst4xZUEW@mail.gmail.com>

FYI, for anyone watching this topic ... things are progressing in relation
to this on another topic ... check out 'request' filter for adding custom
post types to blog
indexes<http://lists.automattic.com/pipermail/wp-hackers/2010-August/033952.html>for
more updated information.

From angelia at 10sexyapples.com  Fri Aug 13 23:57:09 2010
From: angelia at 10sexyapples.com (Angelia Baladon)
Date: Fri, 13 Aug 2010 16:57:09 -0700
Subject: [wp-hackers] 'request' filter for adding custom post types to
	blogindexes
Message-ID: <AANLkTi=OQBFD40m8Sz4irvBeQmpE0Mq-NN37SNDpJHgu@mail.gmail.com>

@Krustyruffle - I just sent the relevant files ~

From ravi-lists at g8o.net  Sat Aug 14 02:33:05 2010
From: ravi-lists at g8o.net ( ravi )
Date: Fri, 13 Aug 2010 22:33:05 -0400
Subject: [wp-hackers] Reacting to options (theme options) in Javascript
In-Reply-To: <AANLkTinj9k=HwDzZfQM3qdtnpUHiy5KeHZZOgMWK8OpJ@mail.gmail.com>
References: <C6DC2FCD-EF2C-4130-8D80-C710F100FD59@g8o.net>
	<1904408633.311865.1281555600601.JavaMail.open-xchange@oxusltgw09.schlund.de>
	<AANLkTinj9k=HwDzZfQM3qdtnpUHiy5KeHZZOgMWK8OpJ@mail.gmail.com>
Message-ID: <4BA711AD-FE71-4A7A-98BC-B504E7D1D504@g8o.net>

On Aug 11, 2010, at 4:18 PM, Otto wrote:
> Best way to do that is using wp_localize_script.
> 
> Example:
> 
> wp_enqueue_script('my_script', /path/to/my/script.js', array('jquery'), etc...);
> 
> wp_localize_script( 'my_script', 'MySettings', array(
> 	  	'setting' => 123,
>                'foo' => "bar"
> 		));
> 

Brilliant, this is what I need. Thank you for the responses, fellas. Otto, I was sort of doing the PHP check and include JS script thing, except I was doing it the ugly way without using wp_enqueue_script() and with many small JS script files each to handle one JS dependent option.

	?ravi


> Basically, that array is the parameters I want to pass to the script.
> You can form it any way you like, it's just a PHP array. What will
> happen before the script gets added to the head is that an inline
> script containing those settings will be added first. So that the
> script will have access to your settings.
> 
> -Otto
> 
> 
> On Wed, Aug 11, 2010 at 2:40 PM, Eric Mann <eric at eamann.com> wrote:
>> I try to keep my PHP and JS as separate as possible.  When there needs to be any
>> integration, I set up a PHP function that echos the JS options I need access to
>> and hook it to wp_head.
>> 
>> So something like:
>> 
>> function returnJS() {
>> echo '<script type="text/javascript>';
>> echo "var myWordPressOptions = { 'option1' : 'value', 'option2' : 'value' };";
>> echo '</script>';
>> }
>> add_action('wp_head', 'returnJS');
>> 
>> Then you have access to all of your server-side WordPress goodness and can parse
>> the options as necessary before pushing them to the browser.  One of the options
>> you set can be a flag to your JS to activate your jQuery code ... or it could
>> even be a singleton function to do the same thing, it's up to you.
>> 
>> But this keeps your PHP files almost JS-free, and you can still enqueue your JS
>> libraries as usual.
>> 
>> On August 11, 2010 at 7:02 PM "[ ravi ]" <ravi-lists at g8o.net> wrote:
>> 
>>> 
>>> Howdy all,
>>> 
>>> I have a preference setting in my theme options. If it is checked on, then
>>> some jQuery stuff needs to be activated. The jQuery stuff sits in a .js file
>>> in my theme. Thus far, I have been throwing this sort of Javascript code, that
>>> has to be executed on the basis of a back-end option, in a separate PHP file
>>> with wrapper PHP code that checks for the relevant option(s).
>>> 
>>> I am wondering if anyone has a cleverer way of achieving the same thing?
>>> 
>>> Cheers,
>>> 
>>>          ?ravi
>>> 
>>> 
>>> 
>>> _______________________________________________
>>> wp-hackers mailing list
>>> wp-hackers at lists.automattic.com
>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>> 
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers


From fidler.brian at gmail.com  Sat Aug 14 03:57:03 2010
From: fidler.brian at gmail.com (Brian Fidler)
Date: Fri, 13 Aug 2010 20:57:03 -0700
Subject: [wp-hackers] query_posts orderby not working properly
Message-ID: <AANLkTim3-J=F8C+WSLdLnk63p_N2_-rCTY=hoXk=fHhs@mail.gmail.com>

I'm having a problem getting a query to order properly. This is what I
currently have:
query_posts('cat='.$category->cat_ID.'&posts_per_page=-1&orderby='.
$post->post_title . '&order=DESC');

I've also tried:
query_posts('cat='.$category->cat_ID.'&posts_per_page=-1&orderby=title&order=DESC');

Any idea what I could be missing?

thanks
brian

From wphackers at jakemgold.myfastmail.com  Sat Aug 14 04:22:44 2010
From: wphackers at jakemgold.myfastmail.com (Jake Goldman)
Date: Sat, 14 Aug 2010 00:22:44 -0400
Subject: [wp-hackers] query_posts orderby not working properly
In-Reply-To: <AANLkTim3-J=F8C+WSLdLnk63p_N2_-rCTY=hoXk=fHhs@mail.gmail.com>
References: <AANLkTim3-J=F8C+WSLdLnk63p_N2_-rCTY=hoXk=fHhs@mail.gmail.com>
Message-ID: <4C661A14.1040408@jakemgold.myfastmail.com>

  Valid options  for orderby and order:

http://codex.wordpress.org/Function_Reference/query_posts#Orderby_Parameters

Your first example certainly shouldn't work.  You can't order by a 
specific post's title. I'm not sure why the second example isn't working 
for you, but I can attest to the fact that it /does/ work.

What order does it give you?

Jake

On 8/13/2010 11:57 PM, Brian Fidler wrote:
> I'm having a problem getting a query to order properly. This is what I
> currently have:
> query_posts('cat='.$category->cat_ID.'&posts_per_page=-1&orderby='.
> $post->post_title . '&order=DESC');
>
> I've also tried:
> query_posts('cat='.$category->cat_ID.'&posts_per_page=-1&orderby=title&order=DESC');
>
> Any idea what I could be missing?
>
> thanks
> brian
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

From fidler.brian at gmail.com  Sat Aug 14 06:58:59 2010
From: fidler.brian at gmail.com (Brian Fidler)
Date: Fri, 13 Aug 2010 23:58:59 -0700
Subject: [wp-hackers] query_posts orderby not working properly
In-Reply-To: <4C661A14.1040408@jakemgold.myfastmail.com>
References: <AANLkTim3-J=F8C+WSLdLnk63p_N2_-rCTY=hoXk=fHhs@mail.gmail.com>
	<4C661A14.1040408@jakemgold.myfastmail.com>
Message-ID: <AANLkTimHjrx2vruHd7yTTDf7g0_wXfYK3t3FUks2g5q2@mail.gmail.com>

it gives me DESC order regardless of whether I choose ASC or DESC. I
actually need ASC order.



On Fri, Aug 13, 2010 at 9:22 PM, Jake Goldman <
wphackers at jakemgold.myfastmail.com> wrote:

>  Valid options  for orderby and order:
>
>
> http://codex.wordpress.org/Function_Reference/query_posts#Orderby_Parameters
>
> Your first example certainly shouldn't work.  You can't order by a specific
> post's title. I'm not sure why the second example isn't working for you, but
> I can attest to the fact that it /does/ work.
>
> What order does it give you?
>
> Jake
>
>
> On 8/13/2010 11:57 PM, Brian Fidler wrote:
>
>> I'm having a problem getting a query to order properly. This is what I
>> currently have:
>> query_posts('cat='.$category->cat_ID.'&posts_per_page=-1&orderby='.
>> $post->post_title . '&order=DESC');
>>
>> I've also tried:
>>
>> query_posts('cat='.$category->cat_ID.'&posts_per_page=-1&orderby=title&order=DESC');
>>
>> Any idea what I could be missing?
>>
>> thanks
>> brian
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From mikeschinkel at newclarity.net  Sat Aug 14 07:27:12 2010
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Sat, 14 Aug 2010 03:27:12 -0400
Subject: [wp-hackers] query_posts orderby not working properly
In-Reply-To: <AANLkTimHjrx2vruHd7yTTDf7g0_wXfYK3t3FUks2g5q2@mail.gmail.com>
References: <AANLkTim3-J=F8C+WSLdLnk63p_N2_-rCTY=hoXk=fHhs@mail.gmail.com>
	<4C661A14.1040408@jakemgold.myfastmail.com>
	<AANLkTimHjrx2vruHd7yTTDf7g0_wXfYK3t3FUks2g5q2@mail.gmail.com>
Message-ID: <98849CE8-3A35-442E-B519-2CA4468AEEC2@newclarity.net>

Brian,

You've got a plugin or a theme hook that's causing the problem (either that or you've got sticky posts that are confusing you.)

I ran this query with v3.0.1:

	query_posts('cat=1&posts_per_page=-1&orderby=title&order=ASC');

And on line 2416 of /wp-includes/query.php $this->request contained the following SQL (I pretty formatted it to make it easier to read):

SELECT
	wp_posts.*
FROM
	wp_posts
	INNER JOIN wp_term_relationships ON wp_posts.ID = wp_term_relationships.object_id
	INNER JOIN wp_term_taxonomy ON wp_term_relationships.term_taxonomy_id = wp_term_taxonomy.term_taxonomy_id
WHERE
	1 = 1
	AND wp_term_taxonomy.taxonomy = 'category'
	AND wp_term_taxonomy.term_id IN('1')
	AND wp_posts.post_type = 'post'
	AND wp_posts.post_status = 'publish'
GROUP BY
	wp_posts.ID
ORDER BY
	wp_posts.post_title ASC

If sticky posts are the problem this should solve it:

	query_posts('cat=1&posts_per_page=-1&orderby=title&order=ASC&caller_get_posts=1');

Otherwise try disabling all plugins and switch to a default theme to see if it fixes it.  If so, start enabling things until you figure out which is causing the problem.

Hope this helps.

-Mike

On Aug 14, 2010, at 2:58 AM, Brian Fidler wrote:

> it gives me DESC order regardless of whether I choose ASC or DESC. I
> actually need ASC order.
> 
> 
> 
> On Fri, Aug 13, 2010 at 9:22 PM, Jake Goldman <
> wphackers at jakemgold.myfastmail.com> wrote:
> 
>> Valid options  for orderby and order:
>> 
>> 
>> http://codex.wordpress.org/Function_Reference/query_posts#Orderby_Parameters
>> 
>> Your first example certainly shouldn't work.  You can't order by a specific
>> post's title. I'm not sure why the second example isn't working for you, but
>> I can attest to the fact that it /does/ work.
>> 
>> What order does it give you?
>> 
>> Jake
>> 
>> 
>> On 8/13/2010 11:57 PM, Brian Fidler wrote:
>> 
>>> I'm having a problem getting a query to order properly. This is what I
>>> currently have:
>>> query_posts('cat='.$category->cat_ID.'&posts_per_page=-1&orderby='.
>>> $post->post_title . '&order=DESC');
>>> 
>>> I've also tried:
>>> 
>>> query_posts('cat='.$category->cat_ID.'&posts_per_page=-1&orderby=title&order=DESC');
>>> 
>>> Any idea what I could be missing?
>>> 
>>> thanks
>>> brian
>>> _______________________________________________
>>> wp-hackers mailing list
>>> wp-hackers at lists.automattic.com
>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>> 
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>> 
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers


From fidler.brian at gmail.com  Sat Aug 14 07:48:58 2010
From: fidler.brian at gmail.com (Brian Fidler)
Date: Sat, 14 Aug 2010 00:48:58 -0700
Subject: [wp-hackers] query_posts orderby not working properly
In-Reply-To: <98849CE8-3A35-442E-B519-2CA4468AEEC2@newclarity.net>
References: <AANLkTim3-J=F8C+WSLdLnk63p_N2_-rCTY=hoXk=fHhs@mail.gmail.com>
	<4C661A14.1040408@jakemgold.myfastmail.com>
	<AANLkTimHjrx2vruHd7yTTDf7g0_wXfYK3t3FUks2g5q2@mail.gmail.com>
	<98849CE8-3A35-442E-B519-2CA4468AEEC2@newclarity.net>
Message-ID: <AANLkTi=c_sdUb=BsdYtFXGyxcOK4FFQz5-7ZM=9G3t7B@mail.gmail.com>

ah, you're right. I had a plugin titled 'reorder' (lol, imagine that!) that
apparently was overriding any ordering I put in my queries.

thanks for your help, sorry for the goose chase.

brian


On Sat, Aug 14, 2010 at 12:27 AM, Mike Schinkel <mikeschinkel at newclarity.net
> wrote:

> Brian,
>
> You've got a plugin or a theme hook that's causing the problem (either that
> or you've got sticky posts that are confusing you.)
>
> I ran this query with v3.0.1:
>
>        query_posts('cat=1&posts_per_page=-1&orderby=title&order=ASC');
>
> And on line 2416 of /wp-includes/query.php $this->request contained the
> following SQL (I pretty formatted it to make it easier to read):
>
> SELECT
>        wp_posts.*
> FROM
>        wp_posts
>        INNER JOIN wp_term_relationships ON wp_posts.ID =
> wp_term_relationships.object_id
>        INNER JOIN wp_term_taxonomy ON
> wp_term_relationships.term_taxonomy_id = wp_term_taxonomy.term_taxonomy_id
> WHERE
>        1 = 1
>        AND wp_term_taxonomy.taxonomy = 'category'
>        AND wp_term_taxonomy.term_id IN('1')
>        AND wp_posts.post_type = 'post'
>        AND wp_posts.post_status = 'publish'
> GROUP BY
>        wp_posts.ID
> ORDER BY
>        wp_posts.post_title ASC
>
> If sticky posts are the problem this should solve it:
>
>
>  query_posts('cat=1&posts_per_page=-1&orderby=title&order=ASC&caller_get_posts=1');
>
> Otherwise try disabling all plugins and switch to a default theme to see if
> it fixes it.  If so, start enabling things until you figure out which is
> causing the problem.
>
> Hope this helps.
>
> -Mike
>
> On Aug 14, 2010, at 2:58 AM, Brian Fidler wrote:
>
> > it gives me DESC order regardless of whether I choose ASC or DESC. I
> > actually need ASC order.
> >
> >
> >
> > On Fri, Aug 13, 2010 at 9:22 PM, Jake Goldman <
> > wphackers at jakemgold.myfastmail.com> wrote:
> >
> >> Valid options  for orderby and order:
> >>
> >>
> >>
> http://codex.wordpress.org/Function_Reference/query_posts#Orderby_Parameters
> >>
> >> Your first example certainly shouldn't work.  You can't order by a
> specific
> >> post's title. I'm not sure why the second example isn't working for you,
> but
> >> I can attest to the fact that it /does/ work.
> >>
> >> What order does it give you?
> >>
> >> Jake
> >>
> >>
> >> On 8/13/2010 11:57 PM, Brian Fidler wrote:
> >>
> >>> I'm having a problem getting a query to order properly. This is what I
> >>> currently have:
> >>> query_posts('cat='.$category->cat_ID.'&posts_per_page=-1&orderby='.
> >>> $post->post_title . '&order=DESC');
> >>>
> >>> I've also tried:
> >>>
> >>>
> query_posts('cat='.$category->cat_ID.'&posts_per_page=-1&orderby=title&order=DESC');
> >>>
> >>> Any idea what I could be missing?
> >>>
> >>> thanks
> >>> brian
> >>> _______________________________________________
> >>> wp-hackers mailing list
> >>> wp-hackers at lists.automattic.com
> >>> http://lists.automattic.com/mailman/listinfo/wp-hackers
> >>>
> >> _______________________________________________
> >> wp-hackers mailing list
> >> wp-hackers at lists.automattic.com
> >> http://lists.automattic.com/mailman/listinfo/wp-hackers
> >>
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers at lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From mikeschinkel at newclarity.net  Sat Aug 14 08:11:49 2010
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Sat, 14 Aug 2010 04:11:49 -0400
Subject: [wp-hackers] query_posts orderby not working properly
In-Reply-To: <AANLkTi=c_sdUb=BsdYtFXGyxcOK4FFQz5-7ZM=9G3t7B@mail.gmail.com>
References: <AANLkTim3-J=F8C+WSLdLnk63p_N2_-rCTY=hoXk=fHhs@mail.gmail.com>
	<4C661A14.1040408@jakemgold.myfastmail.com>
	<AANLkTimHjrx2vruHd7yTTDf7g0_wXfYK3t3FUks2g5q2@mail.gmail.com>
	<98849CE8-3A35-442E-B519-2CA4468AEEC2@newclarity.net>
	<AANLkTi=c_sdUb=BsdYtFXGyxcOK4FFQz5-7ZM=9G3t7B@mail.gmail.com>
Message-ID: <C1CAE58F-B9E2-4682-A907-7E8B5AB39886@newclarity.net>

On Aug 14, 2010, at 3:48 AM, Brian Fidler wrote:
> ah, you're right. I had a plugin titled 'reorder' (lol, imagine that!) that
> apparently was overriding any ordering I put in my queries.
> thanks for your help, sorry for the goose chase.

Conflicts between plugins are far too common because of the global nature of many of them.  

Glad I could help.

-Mike


From jer at simianuprising.com  Sat Aug 14 22:34:56 2010
From: jer at simianuprising.com (Jeremy Clarke)
Date: Sat, 14 Aug 2010 18:34:56 -0400
Subject: [wp-hackers] is there a way to filter what plugins show up in
 plugins.php page?
In-Reply-To: <A459FE1B-B40C-4950-9673-8E519608D1C0@newclarity.net>
References: <AANLkTimHN96oevQ-YMEufQBe0vHfNtKt5b=qSvJ_B2+K@mail.gmail.com>
	<AANLkTinRSz_Ukg+bWL5gNoA3Ap7Reqq1CLLVkyRLUUAQ@mail.gmail.com>
	<A459FE1B-B40C-4950-9673-8E519608D1C0@newclarity.net>
Message-ID: <AANLkTi=t9tgz271AiZ-Bqbou_0dKMbGoWMQXK=-be7+5@mail.gmail.com>

A potential solution to your problem is to use the /mu-plugins/ directory.
Any plugins placed in that directory are automatically activated on the
blog(s) and do not appear in the plugins screen. Obviously the always-on
part might not be ideal for you, but it will likely solve whatever your
situation is.

Anyone know if there is a more-appriately-named directory in 3.0? This blog
post claims that /wp-content/mu-plugins/ still works :
http://wpmu.org/daily-tip-wordpress-3-0-and-the-mu-plugins-folder/

-- 
Jeremy Clarke
Organizer | http://wordcampmontreal.org | Aug 28-29 2010
Code and Design | globalvoicesonline.org

From aaron at jorb.in  Sat Aug 14 22:49:44 2010
From: aaron at jorb.in (Aaron Jorbin)
Date: Sat, 14 Aug 2010 18:49:44 -0400
Subject: [wp-hackers] is there a way to filter what plugins show up in
 plugins.php page?
In-Reply-To: <AANLkTi=t9tgz271AiZ-Bqbou_0dKMbGoWMQXK=-be7+5@mail.gmail.com>
References: <AANLkTimHN96oevQ-YMEufQBe0vHfNtKt5b=qSvJ_B2+K@mail.gmail.com>
	<AANLkTinRSz_Ukg+bWL5gNoA3Ap7Reqq1CLLVkyRLUUAQ@mail.gmail.com>
	<A459FE1B-B40C-4950-9673-8E519608D1C0@newclarity.net>
	<AANLkTi=t9tgz271AiZ-Bqbou_0dKMbGoWMQXK=-be7+5@mail.gmail.com>
Message-ID: <AANLkTikyb5O4wsWj-YhB6M=9tEojquK+p4xB-8NwjCKk@mail.gmail.com>

On Sat, Aug 14, 2010 at 6:34 PM, Jeremy Clarke <jer at simianuprising.com>
 wrote:

> A potential solution to your problem is to use the /mu-plugins/ directory.
> Any plugins placed in that directory are automatically activated on the
> blog(s) and do not appear in the plugins screen. Obviously the always-on
> part might not be ideal for you, but it will likely solve whatever your
> situation is.
>
> Anyone know if there is a more-appriately-named directory in 3.0? This blog
> post claims that /wp-content/mu-plugins/ still works :
> http://wpmu.org/daily-tip-wordpress-3-0-and-the-mu-plugins-folder/


MU plugins do show up on the plugin screen, but not in the main plugin
section , they are under Must Use.  I would be opposed to changing the name
of the directory as I think M(ust) U(use) is a accurate term for them.



http://aaron.jorb.in
twitter: twitter.com/aaronjorbin

From otto at ottodestruct.com  Sat Aug 14 23:54:55 2010
From: otto at ottodestruct.com (Otto)
Date: Sat, 14 Aug 2010 18:54:55 -0500
Subject: [wp-hackers] is there a way to filter what plugins show up in
 plugins.php page?
In-Reply-To: <AANLkTikyb5O4wsWj-YhB6M=9tEojquK+p4xB-8NwjCKk@mail.gmail.com>
References: <AANLkTimHN96oevQ-YMEufQBe0vHfNtKt5b=qSvJ_B2+K@mail.gmail.com>
	<AANLkTinRSz_Ukg+bWL5gNoA3Ap7Reqq1CLLVkyRLUUAQ@mail.gmail.com>
	<A459FE1B-B40C-4950-9673-8E519608D1C0@newclarity.net>
	<AANLkTi=t9tgz271AiZ-Bqbou_0dKMbGoWMQXK=-be7+5@mail.gmail.com>
	<AANLkTikyb5O4wsWj-YhB6M=9tEojquK+p4xB-8NwjCKk@mail.gmail.com>
Message-ID: <AANLkTikBSBruNrngTVF-3PPrYUXtUYbG6w6dMfBG4aVS@mail.gmail.com>

Nothing like a good backronym.

-Otto



On Sat, Aug 14, 2010 at 5:49 PM, Aaron Jorbin <aaron at jorb.in> wrote:
> On Sat, Aug 14, 2010 at 6:34 PM, Jeremy Clarke <jer at simianuprising.com>
> ?wrote:
>
>> A potential solution to your problem is to use the /mu-plugins/ directory.
>> Any plugins placed in that directory are automatically activated on the
>> blog(s) and do not appear in the plugins screen. Obviously the always-on
>> part might not be ideal for you, but it will likely solve whatever your
>> situation is.
>>
>> Anyone know if there is a more-appriately-named directory in 3.0? This blog
>> post claims that /wp-content/mu-plugins/ still works :
>> http://wpmu.org/daily-tip-wordpress-3-0-and-the-mu-plugins-folder/
>
>
> MU plugins do show up on the plugin screen, but not in the main plugin
> section , they are under Must Use. ?I would be opposed to changing the name
> of the directory as I think M(ust) U(use) is a accurate term for them.
>
>
>
> http://aaron.jorb.in
> twitter: twitter.com/aaronjorbin
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From elfin at elfden.co.uk  Sun Aug 15 21:15:35 2010
From: elfin at elfden.co.uk (Rich Pedley)
Date: Sun, 15 Aug 2010 22:15:35 +0100
Subject: [wp-hackers] Twenty Ten theme issue?
Message-ID: <4C6858F7.1070107@elfden.co.uk>

Hi,

following on from this thread:
http://wordpress.org/support/topic/image-not-resizing-in-wysiwyg

It looks like in the default TwentyTen CSS there is this portion:
#content img {
	margin: 0;
	height: auto;
	max-width: 640px;
	width: auto;
}

That width:auto (at least in Firefox, causes the image to display at 
the size it was inserted, rather than the correct resized size that is 
actually in the img tag.

Can others confirm? and is it a bug of that theme?

Rich


From kenzaraque at gmail.com  Sun Aug 15 21:48:58 2010
From: kenzaraque at gmail.com (Ken Zaraque)
Date: Sun, 15 Aug 2010 14:48:58 -0700
Subject: [wp-hackers] multiple databases vs different database prefixes
Message-ID: <2DCF84D4-97F6-4719-98FE-BBA7232D0F59@gmail.com>

Hello to All, 

I will be creating numerous WP sites - roughly 300+.  I will not be using the multisite feature. These are 300+ separate WP installations.

Question: Is it better to create each site with it's own database, or should all 300+ sites be in one database but each site having different table prefixes? 

My concern is scaling.  I am concerned that running all 300+ sites in one database would slow down performance vs having separate databases. Although, having all tables be in one database is very convenient if I ever need to share information between sites.

Maybe I can use a combination of both?  

What are your thoughts? 

Thanks, 

Ken

From mikeschinkel at newclarity.net  Sun Aug 15 22:24:54 2010
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Sun, 15 Aug 2010 18:24:54 -0400
Subject: [wp-hackers] multiple databases vs different database prefixes
In-Reply-To: <2DCF84D4-97F6-4719-98FE-BBA7232D0F59@gmail.com>
References: <2DCF84D4-97F6-4719-98FE-BBA7232D0F59@gmail.com>
Message-ID: <94046722-07EA-450F-8C12-CC88FF89AA44@newclarity.net>

Ken,

Not sure if my advice on the subject would be relevant (I've never done anything that large) but you might be interested in talking to these guys who are offering a service for managing lots of WordPress installs:

http://www.wpremote.com/

-Mike

On Aug 15, 2010, at 5:48 PM, Ken Zaraque wrote:

> Hello to All, 
> 
> I will be creating numerous WP sites - roughly 300+.  I will not be using the multisite feature. These are 300+ separate WP installations.
> 
> Question: Is it better to create each site with it's own database, or should all 300+ sites be in one database but each site having different table prefixes? 
> 
> My concern is scaling.  I am concerned that running all 300+ sites in one database would slow down performance vs having separate databases. Although, having all tables be in one database is very convenient if I ever need to share information between sites.
> 
> Maybe I can use a combination of both?  
> 
> What are your thoughts? 
> 
> Thanks, 
> 
> Ken
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers


From paul at codehooligans.com  Sun Aug 15 22:56:34 2010
From: paul at codehooligans.com (Paul)
Date: Sun, 15 Aug 2010 18:56:34 -0400
Subject: [wp-hackers] multiple databases vs different database prefixes
In-Reply-To: <94046722-07EA-450F-8C12-CC88FF89AA44@newclarity.net>
References: <2DCF84D4-97F6-4719-98FE-BBA7232D0F59@gmail.com>
	<94046722-07EA-450F-8C12-CC88FF89AA44@newclarity.net>
Message-ID: <44AFC5B3-6BEF-4F94-85D2-D76CDBA497CC@codehooligans.com>

Ken,

I thought I read somewhere that wordpress.com uses the same basic multisite engine and database setup as you mentioned. Other than having redundant and beefier hardware I thing the architecture scales pretty well. 

P-


On Aug 15, 2010, at 6:24 PM, Mike Schinkel wrote:

> Ken,
> 
> Not sure if my advice on the subject would be relevant (I've never done anything that large) but you might be interested in talking to these guys who are offering a service for managing lots of WordPress installs:
> 
> http://www.wpremote.com/
> 
> -Mike
> 
> On Aug 15, 2010, at 5:48 PM, Ken Zaraque wrote:
> 
>> Hello to All, 
>> 
>> I will be creating numerous WP sites - roughly 300+.  I will not be using the multisite feature. These are 300+ separate WP installations.
>> 
>> Question: Is it better to create each site with it's own database, or should all 300+ sites be in one database but each site having different table prefixes? 
>> 
>> My concern is scaling.  I am concerned that running all 300+ sites in one database would slow down performance vs having separate databases. Although, having all tables be in one database is very convenient if I ever need to share information between sites.
>> 
>> Maybe I can use a combination of both?  
>> 
>> What are your thoughts? 
>> 
>> Thanks, 
>> 
>> Ken
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
> 
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers


From mikeschinkel at newclarity.net  Sun Aug 15 23:11:46 2010
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Sun, 15 Aug 2010 19:11:46 -0400
Subject: [wp-hackers] multiple databases vs different database prefixes
In-Reply-To: <44AFC5B3-6BEF-4F94-85D2-D76CDBA497CC@codehooligans.com>
References: <2DCF84D4-97F6-4719-98FE-BBA7232D0F59@gmail.com>
	<94046722-07EA-450F-8C12-CC88FF89AA44@newclarity.net>
	<44AFC5B3-6BEF-4F94-85D2-D76CDBA497CC@codehooligans.com>
Message-ID: <369C10CD-E2F8-4414-9880-D8FA3AE9E9D3@newclarity.net>

Ken,

> I will not be using the multisite feature. These are 300+ separate WP installations.
> 
> Question: Is it better to create each site with it's own database, or should all 300+ sites be in one database but each site having different table prefixes? 
> 
> My concern is scaling.  I am concerned that running all 300+ sites in one database would slow down performance vs having separate databases. Although, having all tables be in one database is very convenient if I ever need to share information between sites.


After Paul's response I re-read the original email.

The fact is the multisite creates multiple databases with different table prefixes for each site.  And with the addition of HyperDB[1] you should be able to use multiple databases if and when you need to all with one WordPress multisite installation that will make managing all the sites much easier.  And if you find that having them all on one server is too much then you can create multiple instances of WordPress multisite installations, i.e. 3 servers with 100 sites each.

If you are really concerned about about this you might also want to talk to WP Engine[2] about hosting as they seem to be focused on hosting that requires performance and scalability.

-Mike
[1] http://codex.wordpress.org/HyperDB
[2] http://wpengine.com/


From scribu at gmail.com  Sun Aug 15 23:24:06 2010
From: scribu at gmail.com (scribu)
Date: Mon, 16 Aug 2010 02:24:06 +0300
Subject: [wp-hackers] multiple databases vs different database prefixes
In-Reply-To: <369C10CD-E2F8-4414-9880-D8FA3AE9E9D3@newclarity.net>
References: <2DCF84D4-97F6-4719-98FE-BBA7232D0F59@gmail.com>
	<94046722-07EA-450F-8C12-CC88FF89AA44@newclarity.net>
	<44AFC5B3-6BEF-4F94-85D2-D76CDBA497CC@codehooligans.com>
	<369C10CD-E2F8-4414-9880-D8FA3AE9E9D3@newclarity.net>
Message-ID: <AANLkTikg5KmAikuxthxvJBRpsG+ucdqwVunt47JLAumA@mail.gmail.com>

On Mon, Aug 16, 2010 at 2:11 AM, Mike Schinkel
<mikeschinkel at newclarity.net>wrote:

> The fact is the multisite creates multiple databases with different table
> prefixes for each site.  And with the addition of HyperDB[1] you should be
> able to use multiple databases if and when you need to all with one
> WordPress multisite installation that will make managing all the sites much
> easier.
>

To be exact, by default, MS creates tables with different prefixes in a
single database.

With HyperDB you can have separate DBs and even several DB servers on a
single MS instance.

-- 
http://scribu.net

From mikeschinkel at newclarity.net  Sun Aug 15 23:26:17 2010
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Sun, 15 Aug 2010 19:26:17 -0400
Subject: [wp-hackers] multiple databases vs different database prefixes
In-Reply-To: <AANLkTikg5KmAikuxthxvJBRpsG+ucdqwVunt47JLAumA@mail.gmail.com>
References: <2DCF84D4-97F6-4719-98FE-BBA7232D0F59@gmail.com>
	<94046722-07EA-450F-8C12-CC88FF89AA44@newclarity.net>
	<44AFC5B3-6BEF-4F94-85D2-D76CDBA497CC@codehooligans.com>
	<369C10CD-E2F8-4414-9880-D8FA3AE9E9D3@newclarity.net>
	<AANLkTikg5KmAikuxthxvJBRpsG+ucdqwVunt47JLAumA@mail.gmail.com>
Message-ID: <3629332B-70D5-4391-B035-2CCDA00A17F0@newclarity.net>

On Aug 15, 2010, at 7:24 PM, scribu wrote:
> On Mon, Aug 16, 2010 at 2:11 AM, Mike Schinkel <mikeschinkel at newclarity.net>wrote:
>> The fact is the multisite creates multiple databases with different table
>> prefixes for each site.  And with the addition of HyperDB[1] you should be
>> able to use multiple databases if and when you need to all with one
>> WordPress multisite installation that will make managing all the sites much
>> easier.
> 
> To be exact, by default, MS creates tables with different prefixes in a
> single database.

Yes, typo on my part, thanks for correcting.

-Mike


From otto at ottodestruct.com  Sun Aug 15 23:28:31 2010
From: otto at ottodestruct.com (Otto)
Date: Sun, 15 Aug 2010 18:28:31 -0500
Subject: [wp-hackers] Twenty Ten theme issue?
In-Reply-To: <4C6858F7.1070107@elfden.co.uk>
References: <4C6858F7.1070107@elfden.co.uk>
Message-ID: <AANLkTikAV9+cLSyD=NTy-gg38BcyvgbG_RVusKnRsNXd@mail.gmail.com>

No, it sounds like a WordPress bug. Resizing should not be done via
the image width and height tags, ever.

The width and height should always be set to the actual width and
height of the image. These are tags describing the image itself; they
are not presentational.

CSS always takes precedence over the HTML attributes for this sort of
thing. If you want it resized inline like that, then the code should
be adding inline styles to override the stylesheet, not screwing
around with the img width and height tags.

-Otto



On Sun, Aug 15, 2010 at 4:15 PM, Rich Pedley <elfin at elfden.co.uk> wrote:
> Hi,
>
> following on from this thread:
> http://wordpress.org/support/topic/image-not-resizing-in-wysiwyg
>
> It looks like in the default TwentyTen CSS there is this portion:
> #content img {
> ? ? ? ?margin: 0;
> ? ? ? ?height: auto;
> ? ? ? ?max-width: 640px;
> ? ? ? ?width: auto;
> }
>
> That width:auto (at least in Firefox, causes the image to display at the
> size it was inserted, rather than the correct resized size that is actually
> in the img tag.
>
> Can others confirm? and is it a bug of that theme?
>
> Rich
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From ryanfitzer at gmail.com  Mon Aug 16 01:16:27 2010
From: ryanfitzer at gmail.com (Ryan Fitzer)
Date: Sun, 15 Aug 2010 18:16:27 -0700
Subject: [wp-hackers] wp_insert_user
Message-ID: <AANLkTin7eHw2=cu2y4cJFgh3oDnu1L++XOLUVCNOVKW0@mail.gmail.com>

I'm looking for any help on wp_insert_user in 3.0.1. I'm simply trying to
insert (not update) a new user. The function always returns 0 with no insert
taking place.

Looking through the source shows that the returned ID comes from
the $wpdb->insert_id on line 202 of /wp-includes/registration.php but I'm
not understanding why it's always 0. I get no errors either.

Example code:

$newUserData = array (
    [ID] => '',
    [user_pass] => wp_generate_password(),
    [user_login] => ryan,
    [user_nicename] => ryan,
    [user_url] => '',
    [user_email] => ryan at ryan.com,
    [display_name] => Ryan,
    [nickname] => ryan,
    [first_name] => ryan,
    [user_registered] => 2006-10-16 08:54:47,
    [role] => Administrator
);

$newUserId = wp_insert_user( $newUserData );

Thanks for any help.

From glenn at glennansley.com  Mon Aug 16 01:28:35 2010
From: glenn at glennansley.com (Glenn Ansley)
Date: Sun, 15 Aug 2010 21:28:35 -0400
Subject: [wp-hackers] wp_insert_user
In-Reply-To: <AANLkTin7eHw2=cu2y4cJFgh3oDnu1L++XOLUVCNOVKW0@mail.gmail.com>
References: <AANLkTin7eHw2=cu2y4cJFgh3oDnu1L++XOLUVCNOVKW0@mail.gmail.com>
Message-ID: <AANLkTinRFc22AoF742DvGgKO9kie=qpsCBg-cHvLZZkt@mail.gmail.com>

Hi Ryan,
Make sure that
1) You're code is an actual array - maybe you're psuedo code was for the email.
2) You attach it to a hook called after the wp_generate_password and
wp_insert_user functions are working.

For my quick test, the following worked:

function ft_insert_user(){
	$newUserData = array (
	   'ID' => '',
	   'user_pass' => wp_generate_password(),
	   'user_login' => 'ryan',
	   'user_nicename' => 'ryan',
	   'user_url' => '',
	   'user_email' => 'ryan at ryan.com',
	   'display_name' => 'Ryan',
	   'nickname' => 'ryan',
	   'first_name' => 'ryan',
	   'user_registered' => '2006-10-16 08:54:47',
	   'role' => 'Administrator'
	);
	
	$newUserId = wp_insert_user( $newUserData );
}
add_action( 'admin_init', 'ft_insert_user' );

On Sun, Aug 15, 2010 at 9:16 PM, Ryan Fitzer <ryanfitzer at gmail.com> wrote:
> I'm looking for any help on wp_insert_user in 3.0.1. I'm simply trying to
> insert (not update) a new user. The function always returns 0 with no insert
> taking place.
>
> Looking through the source shows that the returned ID comes from
> the $wpdb->insert_id on line 202 of /wp-includes/registration.php but I'm
> not understanding why it's always 0. I get no errors either.
>
> Example code:
>
> $newUserData = array (
> ? ?[ID] => '',
> ? ?[user_pass] => wp_generate_password(),
> ? ?[user_login] => ryan,
> ? ?[user_nicename] => ryan,
> ? ?[user_url] => '',
> ? ?[user_email] => ryan at ryan.com,
> ? ?[display_name] => Ryan,
> ? ?[nickname] => ryan,
> ? ?[first_name] => ryan,
> ? ?[user_registered] => 2006-10-16 08:54:47,
> ? ?[role] => Administrator
> );
>
> $newUserId = wp_insert_user( $newUserData );
>
> Thanks for any help.
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From ryanfitzer at gmail.com  Mon Aug 16 01:50:15 2010
From: ryanfitzer at gmail.com (Ryan Fitzer)
Date: Sun, 15 Aug 2010 18:50:15 -0700
Subject: [wp-hackers] wp_insert_user
Message-ID: <AANLkTi=zF5jSpwZ8GKotZmq+qc3wURQ0ZMd_myZ2hY67@mail.gmail.com>

Thanks Glen. Yes, this was just pseudo code, is_array returns true.
I'm also working out of the root folder and activating the script by
loading it the browser. I'm including the necessary files and running
a function_exists to make sure I have access to wp_insert_user.

It looks as if the culprit is?mysql_insert_id. It's return values are stated as:

"The ID generated for an AUTO_INCREMENT column by the previous query
on success, 0 if the previous query does not generate an
AUTO_INCREMENT value, or FALSE if no MySQL connection was
established."

No idea why the query would "not generate an AUTO_INCREMENT value".

From kenzaraque at gmail.com  Mon Aug 16 04:04:43 2010
From: kenzaraque at gmail.com (Ken Zaraque)
Date: Sun, 15 Aug 2010 21:04:43 -0700
Subject: [wp-hackers] multiple databases vs different database prefixes
In-Reply-To: <3629332B-70D5-4391-B035-2CCDA00A17F0@newclarity.net>
References: <2DCF84D4-97F6-4719-98FE-BBA7232D0F59@gmail.com>
	<94046722-07EA-450F-8C12-CC88FF89AA44@newclarity.net>
	<44AFC5B3-6BEF-4F94-85D2-D76CDBA497CC@codehooligans.com>
	<369C10CD-E2F8-4414-9880-D8FA3AE9E9D3@newclarity.net>
	<AANLkTikg5KmAikuxthxvJBRpsG+ucdqwVunt47JLAumA@mail.gmail.com>
	<3629332B-70D5-4391-B035-2CCDA00A17F0@newclarity.net>
Message-ID: <6EB0D08A-30BE-4484-BEC0-0D39D6344385@gmail.com>

Thank you for all the responses. 

What I am hearing is "a single database instance with different prefixes per site" is a good way to go... A good example of how well it scales is  wordpress.com . Am I right?

To those who recommended hosting sites: currently the client needs the sites to be hosted internally.  If that changes, I will definitely look into the links you recommended. 

Thanks again.


- Ken


On Aug 15, 2010, at 4:26 PM, Mike Schinkel wrote:

> On Aug 15, 2010, at 7:24 PM, scribu wrote:
>> On Mon, Aug 16, 2010 at 2:11 AM, Mike Schinkel <mikeschinkel at newclarity.net>wrote:
>>> The fact is the multisite creates multiple databases with different table
>>> prefixes for each site.  And with the addition of HyperDB[1] you should be
>>> able to use multiple databases if and when you need to all with one
>>> WordPress multisite installation that will make managing all the sites much
>>> easier.
>> 
>> To be exact, by default, MS creates tables with different prefixes in a
>> single database.
> 
> Yes, typo on my part, thanks for correcting.
> 
> -Mike
> 
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers


From ryan at pixopoint.com  Mon Aug 16 07:07:50 2010
From: ryan at pixopoint.com (Ryan Hellyer)
Date: Mon, 16 Aug 2010 19:07:50 +1200
Subject: [wp-hackers] Twenty Ten theme issue?
Message-ID: <AANLkTikxCq9JSGa5VpQNWi4u0KJzowBcJkXEBa___v5-@mail.gmail.com>

> Date: Sun, 15 Aug 2010 18:28:31 -0500
> From: Otto <otto at ottodestruct.com>
>
> No, it sounds like a WordPress bug. Resizing should not be done via
> the image width and height tags, ever.

This is true, but the theme should not be forcibly over-riding the
HTML like that either, particularly since WordPress actually has
functionality in the back-end for actually changing those dimensions
without even touching the code.

From otto at ottodestruct.com  Mon Aug 16 07:27:09 2010
From: otto at ottodestruct.com (Otto)
Date: Mon, 16 Aug 2010 02:27:09 -0500
Subject: [wp-hackers] Twenty Ten theme issue?
In-Reply-To: <AANLkTikxCq9JSGa5VpQNWi4u0KJzowBcJkXEBa___v5-@mail.gmail.com>
References: <AANLkTikxCq9JSGa5VpQNWi4u0KJzowBcJkXEBa___v5-@mail.gmail.com>
Message-ID: <AANLkTimo8-KivPMFJkUL_msfi57fer9-w8BVGWW_0rNW@mail.gmail.com>

On Mon, Aug 16, 2010 at 2:07 AM, Ryan Hellyer <ryan at pixopoint.com> wrote:
>> No, it sounds like a WordPress bug. Resizing should not be done via
>> the image width and height tags, ever.
>
> This is true, but the theme should not be forcibly over-riding the
> HTML like that either, particularly since WordPress actually has
> functionality in the back-end for actually changing those dimensions
> without even touching the code.

Well, my point is that if WP was doing the right thing here and using
inline styles, then it wouldn't matter what the theme did. Inline
styles always win.

The main purpose of a theme's stylesheet is pretty much to "override"
the HTML. Stylesheets control the presentation, after all. In this
case, the height and width of "auto" is merely expressing the default
settings, and normally it'd be the correct way to do it.

Short term fix: remove those.
Long term fix: Change WP to not use width and height attributes for
resizing, but to use inline styles instead.

-Otto

From elfin at elfden.co.uk  Mon Aug 16 10:33:19 2010
From: elfin at elfden.co.uk (Rich Pedley)
Date: Mon, 16 Aug 2010 11:33:19 +0100
Subject: [wp-hackers] Twenty Ten theme issue?
In-Reply-To: <AANLkTimo8-KivPMFJkUL_msfi57fer9-w8BVGWW_0rNW@mail.gmail.com>
References: <AANLkTikxCq9JSGa5VpQNWi4u0KJzowBcJkXEBa___v5-@mail.gmail.com>
	<AANLkTimo8-KivPMFJkUL_msfi57fer9-w8BVGWW_0rNW@mail.gmail.com>
Message-ID: <4C6913EF.4000804@elfden.co.uk>

On 16/08/2010 08:27, Otto wrote:
> On Mon, Aug 16, 2010 at 2:07 AM, Ryan Hellyer<ryan at pixopoint.com>
> wrote:
>>> No, it sounds like a WordPress bug. Resizing should not be done
>>> via the image width and height tags, ever.
>>
>> This is true, but the theme should not be forcibly over-riding
>> the HTML like that either, particularly since WordPress actually
>> has functionality in the back-end for actually changing those
>> dimensions without even touching the code.
>
> Well, my point is that if WP was doing the right thing here and
> using inline styles, then it wouldn't matter what the theme did.
> Inline styles always win.
>
> The main purpose of a theme's stylesheet is pretty much to
> "override" the HTML. Stylesheets control the presentation, after
> all. In this case, the height and width of "auto" is merely
> expressing the default settings, and normally it'd be the correct
> way to do it.

But there is also a case for the width and height attributes on the 
img (isn't it still recommended?).

I can recall seeing people resizing full size images into thumbnail 
size (shudder) as a way of (cough) pre loading the images for when 
they are viewed fullsize.

I don't know if you class TimyMCE as fully part of WordPress (the 
visual editor is still using that isn't it?) but I'm guessing the sort 
of behaviour it does with regard to images and resizing is common 
across many so called WYSIWYG editors.

Rich

From banago at gmail.com  Mon Aug 16 10:42:52 2010
From: banago at gmail.com (Baki Goxhaj)
Date: Mon, 16 Aug 2010 12:42:52 +0200
Subject: [wp-hackers] Two different comments templates
Message-ID: <AANLkTikw+fG312_Lh53pzyHeMiiZX7_Eq4Cbtd6Tij27@mail.gmail.com>

I'm building a content type on WP that requires slightly different comments
template.

I tired to duplicate comments.php and require it, but it seems not to work.
Is there a way to have two different comments templates in WP?

Kindly,

Baki Goxhaj
www.wplancer.com | www.banago.info | www.lintuts.com

From scribu at gmail.com  Mon Aug 16 11:29:22 2010
From: scribu at gmail.com (scribu)
Date: Mon, 16 Aug 2010 14:29:22 +0300
Subject: [wp-hackers] Two different comments templates
In-Reply-To: <AANLkTikw+fG312_Lh53pzyHeMiiZX7_Eq4Cbtd6Tij27@mail.gmail.com>
References: <AANLkTikw+fG312_Lh53pzyHeMiiZX7_Eq4Cbtd6Tij27@mail.gmail.com>
Message-ID: <AANLkTi=3-6XMiky2WBHGYMxcaC4c_KD04P=1rOGZ_f0P@mail.gmail.com>

On Mon, Aug 16, 2010 at 1:42 PM, Baki Goxhaj <banago at gmail.com> wrote:

> I'm building a content type on WP that requires slightly different comments
> template.
>
> I tired to duplicate comments.php and require it, but it seems not to work.
> Is there a way to have two different comments templates in WP?
>

Sure:

single.php:
comments_template(); // loads comments.php

 single-your-post-type.php:
comments_template('/different-comments.php');

-- 
http://scribu.net

From banago at gmail.com  Mon Aug 16 11:39:11 2010
From: banago at gmail.com (Baki Goxhaj)
Date: Mon, 16 Aug 2010 04:39:11 -0700
Subject: [wp-hackers] Two different comments templates
In-Reply-To: <AANLkTi=3-6XMiky2WBHGYMxcaC4c_KD04P=1rOGZ_f0P@mail.gmail.com>
References: <AANLkTikw+fG312_Lh53pzyHeMiiZX7_Eq4Cbtd6Tij27@mail.gmail.com>
	<AANLkTi=3-6XMiky2WBHGYMxcaC4c_KD04P=1rOGZ_f0P@mail.gmail.com>
Message-ID: <AANLkTi=-VAzDvM75YPsN_V25RRCh1vkS=4reEs2VU=N8@mail.gmail.com>

Thanks very much Scribu.

Kindly,

Baki Goxhaj
www.wplancer.com | www.banago.info | www.lintuts.com


On 16 August 2010 04:29, scribu <scribu at gmail.com> wrote:

> On Mon, Aug 16, 2010 at 1:42 PM, Baki Goxhaj <banago at gmail.com> wrote:
>
> > I'm building a content type on WP that requires slightly different
> comments
> > template.
> >
> > I tired to duplicate comments.php and require it, but it seems not to
> work.
> > Is there a way to have two different comments templates in WP?
> >
>
> Sure:
>
> single.php:
> comments_template(); // loads comments.php
>
>  single-your-post-type.php:
> comments_template('/different-comments.php');
>
> --
> http://scribu.net
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From ryan at pixopoint.com  Mon Aug 16 12:13:47 2010
From: ryan at pixopoint.com (Ryan Hellyer)
Date: Tue, 17 Aug 2010 00:13:47 +1200
Subject: [wp-hackers] wp-hackers Digest, Vol 67, Issue 54
In-Reply-To: <mailman.17.1281960003.20941.wp-hackers@lists.automattic.com>
References: <mailman.17.1281960003.20941.wp-hackers@lists.automattic.com>
Message-ID: <AANLkTinE9HcFtgx0p2AbtNE0UryZbyXcW5O+mXJAiLGB@mail.gmail.com>

> From: Otto <otto at ottodestruct.com>
>
> Well, my point is that if WP was doing the right thing here and using
> inline styles, then it wouldn't matter what the theme did. Inline
> styles always win.

Huh? WordPress does use inline styles. It adds them to the IMG tag as
it should do. The theme is over-riding that which it shouldn't be
doing.

> Stylesheets control the presentation, after all. In this
> case, the height and width of "auto" is merely expressing the default
> settings, and normally it'd be the correct way to do it.

No it isn't. The correct height and width is what is specified on the
IMG tags. The CSS is over-riding that and applying auto, which is the
width of the image itself.


> From: Rich Pedley <elfin at elfden.co.uk>
>
> But there is also a case for the width and height attributes on the
> img (isn't it still recommended?).

Yes, width and height attributes should always be applied to the IMG
tag. This is necessary so that the browser knows what dimensions to
give the image if the HTML is rendered before the images. This is a
particular problem with browsers which render the page before the CSS
or images have loaded (ie: Opera). If you don't specify them, things
can start flying around the page as the images are loaded which can be
quite disconcerting - and really annoying when it causes the page
content to move upwards as the page is loading (happens a lot on long
pages with lots of images scattered down the page).

From piemanek at gmail.com  Mon Aug 16 14:59:00 2010
From: piemanek at gmail.com (Simon Blackbourn)
Date: Mon, 16 Aug 2010 15:59:00 +0100
Subject: [wp-hackers] get_posts and custom post types
Message-ID: <AANLkTimpXDSFWDE4xYzn_c_k-H=S7dmjEPJTGq24bx+=@mail.gmail.com>

I'm currently using get_posts on several sites to retrieve custom post
types.

But I've just noticed that in the parameters section of the Codex page for
get_posts [1], a big bunch of text has been struck through and replaced with
this new message:

*get_posts() only works with posts of the post_type "post". It will produce
unexpected results when used to retrieve custom post types or pages.*

I have not personally noticed any problems, so can anyone expand on what
issues may arise?

Thanks
Simon

[1]
http://codex.wordpress.org/Template_Tags/get_posts#Parameters:_WordPress_2.6.2B

From otto at ottodestruct.com  Mon Aug 16 15:23:51 2010
From: otto at ottodestruct.com (Otto)
Date: Mon, 16 Aug 2010 10:23:51 -0500
Subject: [wp-hackers] Twenty Ten theme issue?
In-Reply-To: <4C6913EF.4000804@elfden.co.uk>
References: <AANLkTikxCq9JSGa5VpQNWi4u0KJzowBcJkXEBa___v5-@mail.gmail.com>
	<AANLkTimo8-KivPMFJkUL_msfi57fer9-w8BVGWW_0rNW@mail.gmail.com>
	<4C6913EF.4000804@elfden.co.uk>
Message-ID: <AANLkTinC0TpVsu633=JSHRoP2ja_AUKQfo3mjqLJiLJt@mail.gmail.com>

On Mon, Aug 16, 2010 at 5:33 AM, Rich Pedley <elfin at elfden.co.uk> wrote:
> But there is also a case for the width and height attributes on the img
> (isn't it still recommended?).

It's recommended to have them in order to give browsers a hint as to
their size for layout, but it's still wrong to use them for resizing.

Yes, yes, lots of people use it that way. Still wrong because CSS
takes precedence over those attributes. We should fix WP to do the
right thing here, I'd say. Should be simple enough to do, really.

-Otto

From compatiblesamuel at gmail.com  Mon Aug 16 15:24:46 2010
From: compatiblesamuel at gmail.com (samuel compatible)
Date: Mon, 16 Aug 2010 07:24:46 -0800
Subject: [wp-hackers] multiple databases vs different database prefixes
In-Reply-To: <2DCF84D4-97F6-4719-98FE-BBA7232D0F59@gmail.com>
References: <2DCF84D4-97F6-4719-98FE-BBA7232D0F59@gmail.com>
Message-ID: <AANLkTinmWRDE6JQEzO0tAi1m_3yQrEb4ziKLzJvM-JCp@mail.gmail.com>

On 8/15/10, Ken Zaraque <kenzaraque at gmail.com> wrote:
I will love you to create each sepreatly..ok


 Hello to All,
>
> I will be creating numerous WP sites - roughly 300+.  I will not be using
> the multisite feature. These are 300+ separate WP installations.
>
> Question: Is it better to create each site with it's own database, or should
> all 300+ sites be in one database but each site having different table
> prefixes?
>
> My concern is scaling.  I am concerned that running all 300+ sites in one
> database would slow down performance vs having separate databases. Although,
> having all tables be in one database is very convenient if I ever need to
> share information between sites.
>
> Maybe I can use a combination of both?
>
> What are your thoughts?
>
> Thanks,
>
> Ken
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From otto at ottodestruct.com  Mon Aug 16 15:27:51 2010
From: otto at ottodestruct.com (Otto)
Date: Mon, 16 Aug 2010 10:27:51 -0500
Subject: [wp-hackers] wp-hackers Digest, Vol 67, Issue 54
In-Reply-To: <AANLkTinE9HcFtgx0p2AbtNE0UryZbyXcW5O+mXJAiLGB@mail.gmail.com>
References: <mailman.17.1281960003.20941.wp-hackers@lists.automattic.com>
	<AANLkTinE9HcFtgx0p2AbtNE0UryZbyXcW5O+mXJAiLGB@mail.gmail.com>
Message-ID: <AANLkTi=5oQFEvKEr6Zr8mdRR9sAR4ZsKUC9y96AYjPEb@mail.gmail.com>

On Mon, Aug 16, 2010 at 7:13 AM, Ryan Hellyer <ryan at pixopoint.com> wrote:
>> Well, my point is that if WP was doing the right thing here and using
>> inline styles, then it wouldn't matter what the theme did. Inline
>> styles always win.
>
> Huh? WordPress does use inline styles. It adds them to the IMG tag as
> it should do. The theme is over-riding that which it shouldn't be
> doing.

WordPress isn't using "inline styles", it's using HTML attributes.
These are two different things.

>> Stylesheets control the presentation, after all. In this
>> case, the height and width of "auto" is merely expressing the default
>> settings, and normally it'd be the correct way to do it.
>
> No it isn't. The correct height and width is what is specified on the
> IMG tags. The CSS is over-riding that and applying auto, which is the
> width of the image itself.

The theme *cannot* override inline styles, unless it's using
!important (it's not). However, any CSS will override HTML attributes,
which are notably not styles.

Basically, what I'm saying is that the resize code should produce this:

<img src="whatever" width="123" height="123" style="width:123px;
height:123px" />

Right now it's not producing that "style" parameter. If it was, then
the width and height declarations in the theme wouldn't make any
difference at all.

-Otto

From adriaan at wewillraakyou.com  Mon Aug 16 15:42:38 2010
From: adriaan at wewillraakyou.com (Adriaan Pelzer)
Date: Mon, 16 Aug 2010 16:42:38 +0100
Subject: [wp-hackers] Amount of estimated developer-hours in Wordpress?
Message-ID: <AANLkTinOTyZFYzhDTubdJH3sYs9C45hc6XSOWBo-2+cg@mail.gmail.com>

Hi,

Does anyone know the estimated amount of developer hours in Wordpress
(latest release, no themes or plugins).
I want to use this in an argument of platform-based vs bespoke.

Adriaan Pelzer
RAAK Ltd
http://www.wewillraakyou.com
+4478 7978 1743

From otto at ottodestruct.com  Mon Aug 16 15:47:29 2010
From: otto at ottodestruct.com (Otto)
Date: Mon, 16 Aug 2010 10:47:29 -0500
Subject: [wp-hackers] Amount of estimated developer-hours in Wordpress?
In-Reply-To: <AANLkTinOTyZFYzhDTubdJH3sYs9C45hc6XSOWBo-2+cg@mail.gmail.com>
References: <AANLkTinOTyZFYzhDTubdJH3sYs9C45hc6XSOWBo-2+cg@mail.gmail.com>
Message-ID: <AANLkTingBbfeqzC=gvC4bpuCrt8Sfku_9wGrjFB3jC2_@mail.gmail.com>

On Mon, Aug 16, 2010 at 10:42 AM, Adriaan Pelzer
<adriaan at wewillraakyou.com> wrote:
> Hi,
>
> Does anyone know the estimated amount of developer hours in Wordpress
> (latest release, no themes or plugins).
> I want to use this in an argument of platform-based vs bespoke.

A whole friggin' lot. ;)

But then, it's not like they keep timecards or something.

-Otto

From aaron at jorb.in  Mon Aug 16 15:54:02 2010
From: aaron at jorb.in (Aaron Jorbin)
Date: Mon, 16 Aug 2010 11:54:02 -0400
Subject: [wp-hackers] Amount of estimated developer-hours in Wordpress?
In-Reply-To: <AANLkTinOTyZFYzhDTubdJH3sYs9C45hc6XSOWBo-2+cg@mail.gmail.com>
References: <AANLkTinOTyZFYzhDTubdJH3sYs9C45hc6XSOWBo-2+cg@mail.gmail.com>
Message-ID: <AANLkTi=0qojqUe0kZQZQ=Caiz91nRDiz0EmGvAkjV2CW@mail.gmail.com>

On Mon, Aug 16, 2010 at 11:42 AM, Adriaan Pelzer
<adriaan at wewillraakyou.com> wrote:
> Hi,
>
> Does anyone know the estimated amount of developer hours in Wordpress
> (latest release, no themes or plugins).
> I want to use this in an argument of platform-based vs bespoke.

alot


http://aaron.jorb.in
twitter: twitter.com/aaronjorbin

From adriaan at wewillraakyou.com  Mon Aug 16 16:04:10 2010
From: adriaan at wewillraakyou.com (Adriaan Pelzer)
Date: Mon, 16 Aug 2010 17:04:10 +0100
Subject: [wp-hackers] Amount of estimated developer-hours in Wordpress?
In-Reply-To: <AANLkTi=0qojqUe0kZQZQ=Caiz91nRDiz0EmGvAkjV2CW@mail.gmail.com>
References: <AANLkTinOTyZFYzhDTubdJH3sYs9C45hc6XSOWBo-2+cg@mail.gmail.com>
	<AANLkTi=0qojqUe0kZQZQ=Caiz91nRDiz0EmGvAkjV2CW@mail.gmail.com>
Message-ID: <AANLkTikkXcUghWgfk1QQCTPkqQRcz90wzUAn0Y0=JhZD@mail.gmail.com>

Hehe - a lot times a lot, I think. Or is it to the power of ...

I've been breaking my head to come up with a way to calculate a ballpark
estimate.

Adriaan Pelzer
RAAK Ltd
http://www.wewillraakyou.com
+4478 7978 1743



On Mon, Aug 16, 2010 at 4:54 PM, Aaron Jorbin <aaron at jorb.in> wrote:

> On Mon, Aug 16, 2010 at 11:42 AM, Adriaan Pelzer
> <adriaan at wewillraakyou.com> wrote:
> > Hi,
> >
> > Does anyone know the estimated amount of developer hours in Wordpress
> > (latest release, no themes or plugins).
> > I want to use this in an argument of platform-based vs bespoke.
>
> alot
>
>
> http://aaron.jorb.in
> twitter: twitter.com/aaronjorbin
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From dvmorris at gmail.com  Mon Aug 16 16:06:53 2010
From: dvmorris at gmail.com (David Morris)
Date: Mon, 16 Aug 2010 11:06:53 -0500
Subject: [wp-hackers] wp-atom2.php
Message-ID: <AANLkTi=QULK6h=Hk4q5WxK3saJJ1ahhR8BSXByToxJtN@mail.gmail.com>

A file called wp-atom2.php ended up in my wordpress source folder on a
development VM the other day, and I'm not sure how it got there. Does anyone
know what may have caused this file to be created? I'm using a variety of
different plugins, so I'm guessing one of them did it. It's a development
VM, so I don't think it was a result of something getting hacked.

The only reference to wp-atom2.php on google is a post about WordPress
security from a year ago:
http://www.davidedicillo.com/developing/how-to-secure-your-wordpress-blog/ but
it doesn't explain where the file came from.

Thanks for your help,

-- 
Dave Morris
http://dave.showviz.net/
http://3dcamphouston.com/

From otto at ottodestruct.com  Mon Aug 16 16:07:37 2010
From: otto at ottodestruct.com (Otto)
Date: Mon, 16 Aug 2010 11:07:37 -0500
Subject: [wp-hackers] Amount of estimated developer-hours in Wordpress?
In-Reply-To: <AANLkTikkXcUghWgfk1QQCTPkqQRcz90wzUAn0Y0=JhZD@mail.gmail.com>
References: <AANLkTinOTyZFYzhDTubdJH3sYs9C45hc6XSOWBo-2+cg@mail.gmail.com>
	<AANLkTi=0qojqUe0kZQZQ=Caiz91nRDiz0EmGvAkjV2CW@mail.gmail.com>
	<AANLkTikkXcUghWgfk1QQCTPkqQRcz90wzUAn0Y0=JhZD@mail.gmail.com>
Message-ID: <AANLkTi=GQrskGDvaP6=zU_uaJhpPT728sXDJxFuJT6dr@mail.gmail.com>

On Mon, Aug 16, 2010 at 11:04 AM, Adriaan Pelzer
<adriaan at wewillraakyou.com> wrote:
> Hehe - a lot times a lot, I think. Or is it to the power of ...
>
> I've been breaking my head to come up with a way to calculate a ballpark
> estimate.

The only thing I could think of would be to go through every trac
ticket and create an educated guess for it, then add them up. Then
probably multiply by 4 or so.

-Otto

From scribu at gmail.com  Mon Aug 16 16:17:07 2010
From: scribu at gmail.com (scribu)
Date: Mon, 16 Aug 2010 19:17:07 +0300
Subject: [wp-hackers] get_posts and custom post types
In-Reply-To: <AANLkTimpXDSFWDE4xYzn_c_k-H=S7dmjEPJTGq24bx+=@mail.gmail.com>
References: <AANLkTimpXDSFWDE4xYzn_c_k-H=S7dmjEPJTGq24bx+=@mail.gmail.com>
Message-ID: <AANLkTimyW5P8s6NYP-pTPe2pmL568Ft02iqNtHQnjheg@mail.gmail.com>

On Mon, Aug 16, 2010 at 5:59 PM, Simon Blackbourn <piemanek at gmail.com>wrote:

> I'm currently using get_posts on several sites to retrieve custom post
> types.
>
> But I've just noticed that in the parameters section of the Codex page for
> get_posts [1], a big bunch of text has been struck through and replaced
> with
> this new message:
>
> *get_posts() only works with posts of the post_type "post". It will produce
> unexpected results when used to retrieve custom post types or pages.*
>
> I have not personally noticed any problems, so can anyone expand on what
> issues may arise?
>

When noticing things like this, you should look at who made the change. My
guess is it was an unexperienced user who had trouble:

http://codex.wordpress.org/index.php?title=Template_Tags%2Fget_posts&diff=91997&oldid=86154


-- 
http://scribu.net

From dvmorris at gmail.com  Mon Aug 16 16:17:44 2010
From: dvmorris at gmail.com (David Morris)
Date: Mon, 16 Aug 2010 11:17:44 -0500
Subject: [wp-hackers] wp-atom2.php
In-Reply-To: <AANLkTi=QULK6h=Hk4q5WxK3saJJ1ahhR8BSXByToxJtN@mail.gmail.com>
References: <AANLkTi=QULK6h=Hk4q5WxK3saJJ1ahhR8BSXByToxJtN@mail.gmail.com>
Message-ID: <AANLkTi=4Mg1qYt_pTKA1t_9g=v+wEQjjdfZrQ8CoAmHc@mail.gmail.com>

I forgot to mention that this file does not exist in any tag or branch
in?http://svn.automattic.com/wordpress going all the way back to 1.5,
and it contains the following text:

<?php
/**
?* Redirects to the Atom feed
?* This file is deprecated and only exists for backwards compatibility
?*
?* @package WordPress
?*/

require( './wp-load.php' );
wp_redirect( get_bloginfo( 'atom_url' ), 301 );
?>

From chris at clwill.com  Mon Aug 16 16:21:31 2010
From: chris at clwill.com (Chris Williams)
Date: Mon, 16 Aug 2010 12:21:31 -0400
Subject: [wp-hackers] Amount of estimated developer-hours in Wordpress?
In-Reply-To: <AANLkTinOTyZFYzhDTubdJH3sYs9C45hc6XSOWBo-2+cg@mail.gmail.com>
Message-ID: <C88EB39B.61B71%chris@clwill.com>

In the classic "Mythical Man Month" Brooks estimated 10 lines of code per developer per day.  That's clearly wildly dependent on the project, but may be a good place to start.  Just count lines, call each one an hour and go from there.


________________________________
From: Adriaan Pelzer <adriaan at wewillraakyou.com>
Subject: [wp-hackers] Amount of estimated developer-hours in Wordpress?

Hi,

Does anyone know the estimated amount of developer hours in Wordpress
(latest release, no themes or plugins).
I want to use this in an argument of platform-based vs bespoke.

Adriaan Pelzer
RAAK Ltd
http://www.wewillraakyou.com
+4478 7978 1743

From paul at codehooligans.com  Mon Aug 16 16:28:05 2010
From: paul at codehooligans.com (Paul)
Date: Mon, 16 Aug 2010 12:28:05 -0400
Subject: [wp-hackers] Amount of estimated developer-hours in Wordpress?
In-Reply-To: <C88EB39B.61B71%chris@clwill.com>
References: <C88EB39B.61B71%chris@clwill.com>
Message-ID: <0DA72D1D-9D2F-4EF4-86B6-A244EB530E1E@codehooligans.com>

I want that job where I only need to write 10 lines or code per day. 


On Aug 16, 2010, at 12:21 PM, Chris Williams wrote:

> In the classic "Mythical Man Month" Brooks estimated 10 lines of code per developer per day.  That's clearly wildly dependent on the project, but may be a good place to start.  Just count lines, call each one an hour and go from there.
> 
> 
> ________________________________
> From: Adriaan Pelzer <adriaan at wewillraakyou.com>
> Subject: [wp-hackers] Amount of estimated developer-hours in Wordpress?
> 
> Hi,
> 
> Does anyone know the estimated amount of developer hours in Wordpress
> (latest release, no themes or plugins).
> I want to use this in an argument of platform-based vs bespoke.
> 
> Adriaan Pelzer
> RAAK Ltd
> http://www.wewillraakyou.com
> +4478 7978 1743
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers


From curtis at curtismchale.ca  Mon Aug 16 16:28:40 2010
From: curtis at curtismchale.ca (Curtis McHale)
Date: Mon, 16 Aug 2010 09:28:40 -0700
Subject: [wp-hackers] get_posts and custom post types
In-Reply-To: <AANLkTimyW5P8s6NYP-pTPe2pmL568Ft02iqNtHQnjheg@mail.gmail.com>
References: <AANLkTimpXDSFWDE4xYzn_c_k-H=S7dmjEPJTGq24bx+=@mail.gmail.com>
	<AANLkTimyW5P8s6NYP-pTPe2pmL568Ft02iqNtHQnjheg@mail.gmail.com>
Message-ID: <4C696738.1040209@curtismchale.ca>

I haven't had any trouble in any of the 3 projects I'm currently working 
on dealing with custom post types (nor the two already live).

scribu wrote:
> On Mon, Aug 16, 2010 at 5:59 PM, Simon Blackbourn<piemanek at gmail.com>wrote:
>
>> I'm currently using get_posts on several sites to retrieve custom post
>> types.
>>
>> But I've just noticed that in the parameters section of the Codex page for
>> get_posts [1], a big bunch of text has been struck through and replaced
>> with
>> this new message:
>>
>> *get_posts() only works with posts of the post_type "post". It will produce
>> unexpected results when used to retrieve custom post types or pages.*
>>
>> I have not personally noticed any problems, so can anyone expand on what
>> issues may arise?
>>
>
> When noticing things like this, you should look at who made the change. My
> guess is it was an unexperienced user who had trouble:
>
> http://codex.wordpress.org/index.php?title=Template_Tags%2Fget_posts&diff=91997&oldid=86154
>
>

-- 
Curtis McHale

604.751.3482
http://curtismchale.ca
http://twitter.com/curtismchale
http://ca.linkedin.com/in/curtismchale


From otto at ottodestruct.com  Mon Aug 16 16:45:38 2010
From: otto at ottodestruct.com (Otto)
Date: Mon, 16 Aug 2010 11:45:38 -0500
Subject: [wp-hackers] wp-atom2.php
In-Reply-To: <AANLkTi=4Mg1qYt_pTKA1t_9g=v+wEQjjdfZrQ8CoAmHc@mail.gmail.com>
References: <AANLkTi=QULK6h=Hk4q5WxK3saJJ1ahhR8BSXByToxJtN@mail.gmail.com>
	<AANLkTi=4Mg1qYt_pTKA1t_9g=v+wEQjjdfZrQ8CoAmHc@mail.gmail.com>
Message-ID: <AANLkTikbXPyE1DKDo_=xD6YR6uKc0TuAXvQ1_P-z_FCQ@mail.gmail.com>

That's a renamed wp-atom.php file.

-Otto



On Mon, Aug 16, 2010 at 11:17 AM, David Morris <dvmorris at gmail.com> wrote:
> I forgot to mention that this file does not exist in any tag or branch
> in?http://svn.automattic.com/wordpress going all the way back to 1.5,
> and it contains the following text:
>
> <?php
> /**
> ?* Redirects to the Atom feed
> ?* This file is deprecated and only exists for backwards compatibility
> ?*
> ?* @package WordPress
> ?*/
>
> require( './wp-load.php' );
> wp_redirect( get_bloginfo( 'atom_url' ), 301 );
> ?>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From otto at ottodestruct.com  Mon Aug 16 16:47:20 2010
From: otto at ottodestruct.com (Otto)
Date: Mon, 16 Aug 2010 11:47:20 -0500
Subject: [wp-hackers] Amount of estimated developer-hours in Wordpress?
In-Reply-To: <0DA72D1D-9D2F-4EF4-86B6-A244EB530E1E@codehooligans.com>
References: <C88EB39B.61B71%chris@clwill.com>
	<0DA72D1D-9D2F-4EF4-86B6-A244EB530E1E@codehooligans.com>
Message-ID: <AANLkTinneXFeh185qc3BO7xD4zGhRqkeAVqNkvZ3-eg=@mail.gmail.com>

You can only get that job if you write every line of code right on the
very first try. :)

-Otto

On Mon, Aug 16, 2010 at 11:28 AM, Paul <paul at codehooligans.com> wrote:
> I want that job where I only need to write 10 lines or code per day.
>
>
> On Aug 16, 2010, at 12:21 PM, Chris Williams wrote:
>
>> In the classic "Mythical Man Month" Brooks estimated 10 lines of code per developer per day. ?That's clearly wildly dependent on the project, but may be a good place to start. ?Just count lines, call each one an hour and go from there.
>>
>>
>> ________________________________
>> From: Adriaan Pelzer <adriaan at wewillraakyou.com>
>> Subject: [wp-hackers] Amount of estimated developer-hours in Wordpress?
>>
>> Hi,
>>
>> Does anyone know the estimated amount of developer hours in Wordpress
>> (latest release, no themes or plugins).
>> I want to use this in an argument of platform-based vs bespoke.
>>
>> Adriaan Pelzer
>> RAAK Ltd
>> http://www.wewillraakyou.com
>> +4478 7978 1743
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From adriaan at wewillraakyou.com  Mon Aug 16 17:09:11 2010
From: adriaan at wewillraakyou.com (Adriaan Pelzer)
Date: Mon, 16 Aug 2010 18:09:11 +0100
Subject: [wp-hackers] Amount of estimated developer-hours in Wordpress?
In-Reply-To: <C88EB39B.61B71%chris@clwill.com>
References: <AANLkTinOTyZFYzhDTubdJH3sYs9C45hc6XSOWBo-2+cg@mail.gmail.com>
	<C88EB39B.61B71%chris@clwill.com>
Message-ID: <AANLkTikXs5BRfjRPc_nA_zyJR=st-CGdB1tE-vL4Akrn@mail.gmail.com>

Ah - thanks. This is quite doable, and relatively accurate, I think.
Accurate enough for a very rough argument!

Thanks a lot ...


Adriaan Pelzer
RAAK Ltd
http://www.wewillraakyou.com
+4478 7978 1743



On Mon, Aug 16, 2010 at 5:21 PM, Chris Williams <chris at clwill.com> wrote:

> In the classic "Mythical Man Month" Brooks estimated 10 lines of code per
> developer per day.  That's clearly wildly dependent on the project, but may
> be a good place to start.  Just count lines, call each one an hour and go
> from there.
>
>
> ________________________________
> From: Adriaan Pelzer <adriaan at wewillraakyou.com>
> Subject: [wp-hackers] Amount of estimated developer-hours in Wordpress?
>
> Hi,
>
> Does anyone know the estimated amount of developer hours in Wordpress
> (latest release, no themes or plugins).
> I want to use this in an argument of platform-based vs bespoke.
>
> Adriaan Pelzer
> RAAK Ltd
> http://www.wewillraakyou.com
> +4478 7978 1743
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From adriaan at wewillraakyou.com  Mon Aug 16 17:12:17 2010
From: adriaan at wewillraakyou.com (Adriaan Pelzer)
Date: Mon, 16 Aug 2010 18:12:17 +0100
Subject: [wp-hackers] get_posts and custom post types
In-Reply-To: <4C696738.1040209@curtismchale.ca>
References: <AANLkTimpXDSFWDE4xYzn_c_k-H=S7dmjEPJTGq24bx+=@mail.gmail.com>
	<AANLkTimyW5P8s6NYP-pTPe2pmL568Ft02iqNtHQnjheg@mail.gmail.com>
	<4C696738.1040209@curtismchale.ca>
Message-ID: <AANLkTikHOHN3MhW_iTpk8Or3dCtjgMeAzXnkTcuwaB-a@mail.gmail.com>

I've built many sites with severely customized templates where I used
get_posts to retrieve pages. No problem yet. Just remember to set
"numberposts=-1" if you want all the pages, but this holds for posts too.

Adriaan Pelzer
RAAK Ltd
http://www.wewillraakyou.com
+4478 7978 1743



On Mon, Aug 16, 2010 at 5:28 PM, Curtis McHale <curtis at curtismchale.ca>wrote:

> I haven't had any trouble in any of the 3 projects I'm currently working on
> dealing with custom post types (nor the two already live).
>
>
> scribu wrote:
>
>> On Mon, Aug 16, 2010 at 5:59 PM, Simon Blackbourn<piemanek at gmail.com
>> >wrote:
>>
>>  I'm currently using get_posts on several sites to retrieve custom post
>>> types.
>>>
>>> But I've just noticed that in the parameters section of the Codex page
>>> for
>>> get_posts [1], a big bunch of text has been struck through and replaced
>>> with
>>> this new message:
>>>
>>> *get_posts() only works with posts of the post_type "post". It will
>>> produce
>>> unexpected results when used to retrieve custom post types or pages.*
>>>
>>> I have not personally noticed any problems, so can anyone expand on what
>>> issues may arise?
>>>
>>>
>> When noticing things like this, you should look at who made the change. My
>> guess is it was an unexperienced user who had trouble:
>>
>>
>> http://codex.wordpress.org/index.php?title=Template_Tags%2Fget_posts&diff=91997&oldid=86154
>>
>>
>>
> --
> Curtis McHale
>
> 604.751.3482
> http://curtismchale.ca
> http://twitter.com/curtismchale
> http://ca.linkedin.com/in/curtismchale
>
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From peter.westwood at ftwr.co.uk  Mon Aug 16 17:17:59 2010
From: peter.westwood at ftwr.co.uk (Peter Westwood)
Date: Mon, 16 Aug 2010 18:17:59 +0100
Subject: [wp-hackers] Amount of estimated developer-hours in Wordpress?
In-Reply-To: <AANLkTinOTyZFYzhDTubdJH3sYs9C45hc6XSOWBo-2+cg@mail.gmail.com>
References: <AANLkTinOTyZFYzhDTubdJH3sYs9C45hc6XSOWBo-2+cg@mail.gmail.com>
Message-ID: <F9FC92F6-7D7B-496E-8096-BCD035D63829@ftwr.co.uk>


On 16 Aug 2010, at 16:42, Adriaan Pelzer wrote:

> Hi,
> 
> Does anyone know the estimated amount of developer hours in Wordpress
> (latest release, no themes or plugins).
> I want to use this in an argument of platform-based vs bespoke.
> 

According to the way Ohloh have implemented the standard COCOMO model (which is all about trying to work this out) it is ...

34 Person Years!

http://www.ohloh.net/p/wordpress

westi
-- 
Peter Westwood
http://blog.ftwr.co.uk | http://westi.wordpress.com
C53C F8FC 8796 8508 88D6 C950 54F4 5DCD A834 01C5


From jer at simianuprising.com  Mon Aug 16 18:05:11 2010
From: jer at simianuprising.com (Jeremy Clarke)
Date: Mon, 16 Aug 2010 14:05:11 -0400
Subject: [wp-hackers] multiple databases vs different database prefixes
In-Reply-To: <6EB0D08A-30BE-4484-BEC0-0D39D6344385@gmail.com>
References: <2DCF84D4-97F6-4719-98FE-BBA7232D0F59@gmail.com>
	<94046722-07EA-450F-8C12-CC88FF89AA44@newclarity.net>
	<44AFC5B3-6BEF-4F94-85D2-D76CDBA497CC@codehooligans.com>
	<369C10CD-E2F8-4414-9880-D8FA3AE9E9D3@newclarity.net>
	<AANLkTikg5KmAikuxthxvJBRpsG+ucdqwVunt47JLAumA@mail.gmail.com>
	<3629332B-70D5-4391-B035-2CCDA00A17F0@newclarity.net>
	<6EB0D08A-30BE-4484-BEC0-0D39D6344385@gmail.com>
Message-ID: <AANLkTi=1dEL-a3juui9COqEd_W6M+zy5NrrTzHfqWHjy@mail.gmail.com>

On Mon, Aug 16, 2010 at 12:04 AM, Ken Zaraque <kenzaraque at gmail.com> wrote:

>
> What I am hearing is "a single database instance with different prefixes
> per site" is a good way to go... A good example of how well it scales is
> wordpress.com . Am I right?
>

The fundamental question is whether you're better off with "one db, lots of
tables" or "lots of dbs with a few tables each".

AFAIK the answer there is that there isn't much of a difference. Assuming
all the sites will run on the same machine the effect will be largely the
same.

In my experience with MySQL the big problems arise within a given table. If
you have one table receiving too much traffic (esp. if its mixed
reads/writes) then you get lockups and issues. If all your sites share one
table, watch out for that one. But as long as the traffic is coming to
different tables MySQL doesn't seem to care if they are in the same database
or not, it sees one table-connection as one connection regardless of the db.

The real difference is in the backup/export etc. situation that you end up
with. For example stuff like PHPMyAdmin is likely to choke on your giant DB,
but if you ever need to backup all sites at once it will be a LOT easier if
they are all in one database.

P.S. With regard to your original question, wherein you are absolutely
required to have 300 sites and not use MS: I have to call into question the
decision-making that resulted in those requirements. Whatever you are doing,
you are likely doing it wrong if that is your solution.

-- 
Jeremy Clarke | http://jeremyclarke.org
Code and Design | http://globalvoicesonline.org

From chip at chipbennett.net  Mon Aug 16 18:18:09 2010
From: chip at chipbennett.net (Chip Bennett)
Date: Mon, 16 Aug 2010 13:18:09 -0500
Subject: [wp-hackers] Twenty Ten theme issue?
In-Reply-To: <AANLkTinC0TpVsu633=JSHRoP2ja_AUKQfo3mjqLJiLJt@mail.gmail.com>
References: <AANLkTikxCq9JSGa5VpQNWi4u0KJzowBcJkXEBa___v5-@mail.gmail.com>
	<AANLkTimo8-KivPMFJkUL_msfi57fer9-w8BVGWW_0rNW@mail.gmail.com>
	<4C6913EF.4000804@elfden.co.uk>
	<AANLkTinC0TpVsu633=JSHRoP2ja_AUKQfo3mjqLJiLJt@mail.gmail.com>
Message-ID: <AANLkTi=4GRkWyeBP_d81Y-W708UYCXSTc1BNH+wtBc1=@mail.gmail.com>

Wouldn't the correct long-term solution be to have WP perform *actual*
resizing of images, such that each image had Original, Thumbnail, Small,
Medium, and Large instances (a la Flickr)?

Chip

On Mon, Aug 16, 2010 at 10:23 AM, Otto <otto at ottodestruct.com> wrote:

> On Mon, Aug 16, 2010 at 5:33 AM, Rich Pedley <elfin at elfden.co.uk> wrote:
> > But there is also a case for the width and height attributes on the img
> > (isn't it still recommended?).
>
> It's recommended to have them in order to give browsers a hint as to
> their size for layout, but it's still wrong to use them for resizing.
>
> Yes, yes, lots of people use it that way. Still wrong because CSS
> takes precedence over those attributes. We should fix WP to do the
> right thing here, I'd say. Should be simple enough to do, really.
>
> -Otto
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From rbilesky at gmail.com  Mon Aug 16 18:19:30 2010
From: rbilesky at gmail.com (Ryan Bilesky)
Date: Mon, 16 Aug 2010 11:19:30 -0700
Subject: [wp-hackers] multiple databases vs different database prefixes
In-Reply-To: <AANLkTi=1dEL-a3juui9COqEd_W6M+zy5NrrTzHfqWHjy@mail.gmail.com>
References: <2DCF84D4-97F6-4719-98FE-BBA7232D0F59@gmail.com>
	<94046722-07EA-450F-8C12-CC88FF89AA44@newclarity.net>
	<44AFC5B3-6BEF-4F94-85D2-D76CDBA497CC@codehooligans.com>
	<369C10CD-E2F8-4414-9880-D8FA3AE9E9D3@newclarity.net>
	<AANLkTikg5KmAikuxthxvJBRpsG+ucdqwVunt47JLAumA@mail.gmail.com>
	<3629332B-70D5-4391-B035-2CCDA00A17F0@newclarity.net>
	<6EB0D08A-30BE-4484-BEC0-0D39D6344385@gmail.com>
	<AANLkTi=1dEL-a3juui9COqEd_W6M+zy5NrrTzHfqWHjy@mail.gmail.com>
Message-ID: <AANLkTi=5Jmg+POYu=QFuYzfV9Y=zu-qq3fMT1qN=TCLt@mail.gmail.com>

I have to agree with Jeremy on this. Heck I'm having a hard time just
figuring out what one person/company could need 300 diffrent sites for.
Maybe a large company liek Microsoft might need hundreds of sites for
diffrnet things.  But I agree if you are going to have alot of sites why not
use multisite.

Back on topic, if you do an internet search there are many forums and other
sites that talk about using one large db versus several small dbs.  The
consesus I am seeming to find is that one large database is easier to
maintain but several smaller dbs work well if each site for instance would
need a seperate backup regimine, or if you want to split the databases
accross multipule servers.

Oh and a random but perhaps appropriate quote I found during this search:
"Put all your eggs in one basket. And then, watch that basket!" -Mark Twain

I think ultimatley it comes down to needs, idk that any one solution is
beter than the other.  Each has  its own advantages and its abot what works
best for your situation.  Such as do you want to split over multipule
servers, do you want to easily share data between sites.

On Mon, Aug 16, 2010 at 11:05 AM, Jeremy Clarke <jer at simianuprising.com>wrote:

>
> P.S. With regard to your original question, wherein you are absolutely
> required to have 300 sites and not use MS: I have to call into question the
> decision-making that resulted in those requirements. Whatever you are
> doing,
> you are likely doing it wrong if that is your solution.
>
> --
> Jeremy Clarke | http://jeremyclarke.org
> Code and Design | http://globalvoicesonline.org
>  _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From piemanek at gmail.com  Mon Aug 16 18:19:49 2010
From: piemanek at gmail.com (Simon Blackbourn)
Date: Mon, 16 Aug 2010 19:19:49 +0100
Subject: [wp-hackers] get_posts and custom post types
In-Reply-To: <AANLkTikHOHN3MhW_iTpk8Or3dCtjgMeAzXnkTcuwaB-a@mail.gmail.com>
References: <AANLkTimpXDSFWDE4xYzn_c_k-H=S7dmjEPJTGq24bx+=@mail.gmail.com>
	<AANLkTimyW5P8s6NYP-pTPe2pmL568Ft02iqNtHQnjheg@mail.gmail.com>
	<4C696738.1040209@curtismchale.ca>
	<AANLkTikHOHN3MhW_iTpk8Or3dCtjgMeAzXnkTcuwaB-a@mail.gmail.com>
Message-ID: <AANLkTikFhMF2DfD3-Pa20z+s-_4ix=nALkMEY4Z95Dve@mail.gmail.com>

I've built many sites with severely customized templates where I used
> get_posts to retrieve pages. No problem yet. Just remember to set
> "numberposts=-1" if you want all the pages, but this holds for posts too.
>
>
> I haven't had any trouble in any of the 3 projects I'm currently working
> on
> > dealing with custom post types (nor the two already live).
> >
> >
>

>>  I'm currently using get_posts on several sites to retrieve custom post
> >>> types.
> >>>
>


I've used it many times too for all sorts of post types and pages, I was
just confused by that edit to the Codex and thought maybe a bug had been
discovered.

Scribu has now re-edited the Codex so it's back to normal again.

Cheers
Simon

From dvmorris at gmail.com  Mon Aug 16 18:55:42 2010
From: dvmorris at gmail.com (David Morris)
Date: Mon, 16 Aug 2010 13:55:42 -0500
Subject: [wp-hackers] wp-atom2.php
In-Reply-To: <AANLkTikbXPyE1DKDo_=xD6YR6uKc0TuAXvQ1_P-z_FCQ@mail.gmail.com>
References: <AANLkTi=QULK6h=Hk4q5WxK3saJJ1ahhR8BSXByToxJtN@mail.gmail.com>
	<AANLkTi=4Mg1qYt_pTKA1t_9g=v+wEQjjdfZrQ8CoAmHc@mail.gmail.com>
	<AANLkTikbXPyE1DKDo_=xD6YR6uKc0TuAXvQ1_P-z_FCQ@mail.gmail.com>
Message-ID: <AANLkTikdMfMQ40orhE=jh+XxfBf2mqbW90B9zKgqXWWV@mail.gmail.com>

What might have caused it to be renamed?

From cross at thisismyurl.com  Mon Aug 16 19:03:57 2010
From: cross at thisismyurl.com (Christopher Ross)
Date: Mon, 16 Aug 2010 16:03:57 -0300
Subject: [wp-hackers] Amount of estimated developer-hours in Wordpress?
In-Reply-To: <AANLkTinOTyZFYzhDTubdJH3sYs9C45hc6XSOWBo-2+cg@mail.gmail.com>
References: <AANLkTinOTyZFYzhDTubdJH3sYs9C45hc6XSOWBo-2+cg@mail.gmail.com>
Message-ID: <927737DD-50B3-4456-A993-B20460AE14DD@thisismyurl.com>

Here's the number ?

Average lines of code per day (per developer) - 10 *

Average cost of developer (Can) - $45,250 **
Average cost of dev/day (Can) - $181
Average cost per line of code (Can) - $18.10

Lines of Code in WordPress - 136,347 ***

Development days for WordPress = 13,635
Development cost for WordPress = $2,467,935

* http://stackoverflow.com/questions/2894099/10-lines-of-code-per-day-is-the-global-average-true
** http://www.payscale.com/research/CA/Job=PHP_Developer/Salary
*** http://www.ohloh.net/p/wordpress/analyses/latest




On 2010-08-16, at 12:42 PM, Adriaan Pelzer wrote:

> Hi,
> 
> Does anyone know the estimated amount of developer hours in Wordpress
> (latest release, no themes or plugins).
> I want to use this in an argument of platform-based vs bespoke.
> 
> Adriaan Pelzer
> RAAK Ltd
> http://www.wewillraakyou.com
> +4478 7978 1743
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers


__

Christopher Ross

Toronto      1 (416) 840-5828
Fredericton 1 (506) 474-2708
New Orleans 1 (504) 322 3485

http://christopherross.ca
http://www.thisismyurl.com


From wordpress at cefm.ca  Mon Aug 16 19:41:08 2010
From: wordpress at cefm.ca (Charles Frees-Melvin)
Date: Mon, 16 Aug 2010 16:41:08 -0300
Subject: [wp-hackers] Amount of estimated developer-hours in Wordpress?
In-Reply-To: <927737DD-50B3-4456-A993-B20460AE14DD@thisismyurl.com>
References: <AANLkTinOTyZFYzhDTubdJH3sYs9C45hc6XSOWBo-2+cg@mail.gmail.com>
	<927737DD-50B3-4456-A993-B20460AE14DD@thisismyurl.com>
Message-ID: <23286AE0-70CE-4F33-A569-F9C424BE00C4@cefm.ca>

Your sum negates the lines of code that used to be in wp. Also the number of lines of code that were in revisions of patches that formed the final patch. I
--
Charles E. Frees-Melvin

Sent from my Rogers iPhone 3G

On 2010-08-16, at 16:03, Christopher Ross <cross at thisismyurl.com> wrote:

> Here's the number ?
> 
> Average lines of code per day (per developer) - 10 *
> 
> Average cost of developer (Can) - $45,250 **
> Average cost of dev/day (Can) - $181
> Average cost per line of code (Can) - $18.10
> 
> Lines of Code in WordPress - 136,347 ***
> 
> Development days for WordPress = 13,635
> Development cost for WordPress = $2,467,935
> 
> * http://stackoverflow.com/questions/2894099/10-lines-of-code-per-day-is-the-global-average-true
> ** http://www.payscale.com/research/CA/Job=PHP_Developer/Salary
> *** http://www.ohloh.net/p/wordpress/analyses/latest
> 
> 
> 
> 
> On 2010-08-16, at 12:42 PM, Adriaan Pelzer wrote:
> 
>> Hi,
>> 
>> Does anyone know the estimated amount of developer hours in Wordpress
>> (latest release, no themes or plugins).
>> I want to use this in an argument of platform-based vs bespoke.
>> 
>> Adriaan Pelzer
>> RAAK Ltd
>> http://www.wewillraakyou.com
>> +4478 7978 1743
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
> 
> 
> __
> 
> Christopher Ross
> 
> Toronto      1 (416) 840-5828
> Fredericton 1 (506) 474-2708
> New Orleans 1 (504) 322 3485
> 
> http://christopherross.ca
> http://www.thisismyurl.com
> 
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

From arlenbee at gmail.com  Mon Aug 16 19:46:37 2010
From: arlenbee at gmail.com (Arlen Beiler)
Date: Mon, 16 Aug 2010 15:46:37 -0400
Subject: [wp-hackers] Amount of estimated developer-hours in Wordpress?
In-Reply-To: <23286AE0-70CE-4F33-A569-F9C424BE00C4@cefm.ca>
References: <AANLkTinOTyZFYzhDTubdJH3sYs9C45hc6XSOWBo-2+cg@mail.gmail.com>
	<927737DD-50B3-4456-A993-B20460AE14DD@thisismyurl.com>
	<23286AE0-70CE-4F33-A569-F9C424BE00C4@cefm.ca>
Message-ID: <AANLkTi=KMcCrJZGRE66=KOOe4reJsb2R236sxUSN=ZJe@mail.gmail.com>

34 Person years means it would take 34 people one year or one person
34 years to do that. Correct?

On Mon, Aug 16, 2010 at 3:41 PM, Charles Frees-Melvin <wordpress at cefm.ca> wrote:
> Your sum negates the lines of code that used to be in wp. Also the number of lines of code that were in revisions of patches that formed the final patch. I
> --
> Charles E. Frees-Melvin
>
> Sent from my Rogers iPhone 3G
>
> On 2010-08-16, at 16:03, Christopher Ross <cross at thisismyurl.com> wrote:
>
>> Here's the number ?
>>
>> Average lines of code per day (per developer) - 10 *
>>
>> Average cost of developer (Can) - $45,250 **
>> Average cost of dev/day (Can) - $181
>> Average cost per line of code (Can) - $18.10
>>
>> Lines of Code in WordPress - 136,347 ***
>>
>> Development days for WordPress = 13,635
>> Development cost for WordPress = $2,467,935
>>
>> * http://stackoverflow.com/questions/2894099/10-lines-of-code-per-day-is-the-global-average-true
>> ** http://www.payscale.com/research/CA/Job=PHP_Developer/Salary
>> *** http://www.ohloh.net/p/wordpress/analyses/latest
>>
>>
>>
>>
>> On 2010-08-16, at 12:42 PM, Adriaan Pelzer wrote:
>>
>>> Hi,
>>>
>>> Does anyone know the estimated amount of developer hours in Wordpress
>>> (latest release, no themes or plugins).
>>> I want to use this in an argument of platform-based vs bespoke.
>>>
>>> Adriaan Pelzer
>>> RAAK Ltd
>>> http://www.wewillraakyou.com
>>> +4478 7978 1743
>>> _______________________________________________
>>> wp-hackers mailing list
>>> wp-hackers at lists.automattic.com
>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
>>
>> __
>>
>> Christopher Ross
>>
>> Toronto ? ? ?1 (416) 840-5828
>> Fredericton 1 (506) 474-2708
>> New Orleans 1 (504) 322 3485
>>
>> http://christopherross.ca
>> http://www.thisismyurl.com
>>
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From goldenapplesdesign at gmail.com  Mon Aug 16 20:02:11 2010
From: goldenapplesdesign at gmail.com (Nathaniel Taintor)
Date: Mon, 16 Aug 2010 16:02:11 -0400
Subject: [wp-hackers] Twenty Ten theme issue?
Message-ID: <AANLkTinf_7LU1s8j08SLsPfm2tNuago55AHE+nyYkrPX@mail.gmail.com>

WP does perform actual resizing of images... check your uploads folder, for
most images uploaded, there are three or four resized images saved...
'thumbnail', "small", "medium", "large", and "original" by default, although
you can add more image sizes through theme or plugin functions.

I've often added custom image sizes through my functions.php like this:

add_image_size('new-custom-size', 400,9999); // resize to 400px wide, for
example...

and then specified the size in my style:

img.size-new-custom-size { width: 400px; }

thinking it would give me slightly quicker page rendering.

Are you saying that's not correct? The only issue I can see is if the
original uploaded image was smaller than that size, but in that case - from
what I understand, the custom size isn't created in the first place and that
class won't be used.

Best,
Than


From: Chip Bennett <chip at chipbennett.net>
> Subject: Re: [wp-hackers] Twenty Ten theme issue?
>
> Wouldn't the correct long-term solution be to have WP perform *actual*
> resizing of images, such that each image had Original, Thumbnail, Small,
> Medium, and Large instances (a la Flickr)?
>
> Chip
>
> On Mon, Aug 16, 2010 at 10:23 AM, Otto <otto at ottodestruct.com> wrote:
>
> > On Mon, Aug 16, 2010 at 5:33 AM, Rich Pedley <elfin at elfden.co.uk> wrote:
> > > But there is also a case for the width and height attributes on the img
> > > (isn't it still recommended?).
> >
> > It's recommended to have them in order to give browsers a hint as to
> > their size for layout, but it's still wrong to use them for resizing.
> >
> > Yes, yes, lots of people use it that way. Still wrong because CSS
> > takes precedence over those attributes. We should fix WP to do the
> > right thing here, I'd say. Should be simple enough to do, really.
> >
> > -Otto
> >
>

From cross at thisismyurl.com  Mon Aug 16 20:02:48 2010
From: cross at thisismyurl.com (Christopher Ross)
Date: Mon, 16 Aug 2010 17:02:48 -0300
Subject: [wp-hackers] Amount of estimated developer-hours in Wordpress?
In-Reply-To: <23286AE0-70CE-4F33-A569-F9C424BE00C4@cefm.ca>
References: <AANLkTinOTyZFYzhDTubdJH3sYs9C45hc6XSOWBo-2+cg@mail.gmail.com>
	<927737DD-50B3-4456-A993-B20460AE14DD@thisismyurl.com>
	<23286AE0-70CE-4F33-A569-F9C424BE00C4@cefm.ca>
Message-ID: <7DC9EA2F-2A9D-4D77-9A19-6A3D1C9037E2@thisismyurl.com>

Yes, the $2.4 million represents the total value of WordPress across all versions. I think we read the original request differently as I thought he meant the total value of the final release, excluding plugins etc.


On 2010-08-16, at 4:41 PM, Charles Frees-Melvin wrote:

> Your sum negates the lines of code that used to be in wp. Also the number of lines of code that were in revisions of patches that formed the final patch. I
> --
> Charles E. Frees-Melvin
> 
> Sent from my Rogers iPhone 3G
> 
> On 2010-08-16, at 16:03, Christopher Ross <cross at thisismyurl.com> wrote:
> 
>> Here's the number ?
>> 
>> Average lines of code per day (per developer) - 10 *
>> 
>> Average cost of developer (Can) - $45,250 **
>> Average cost of dev/day (Can) - $181
>> Average cost per line of code (Can) - $18.10
>> 
>> Lines of Code in WordPress - 136,347 ***
>> 
>> Development days for WordPress = 13,635
>> Development cost for WordPress = $2,467,935
>> 
>> * http://stackoverflow.com/questions/2894099/10-lines-of-code-per-day-is-the-global-average-true
>> ** http://www.payscale.com/research/CA/Job=PHP_Developer/Salary
>> *** http://www.ohloh.net/p/wordpress/analyses/latest
>> 
>> 
>> 
>> 
>> On 2010-08-16, at 12:42 PM, Adriaan Pelzer wrote:
>> 
>>> Hi,
>>> 
>>> Does anyone know the estimated amount of developer hours in Wordpress
>>> (latest release, no themes or plugins).
>>> I want to use this in an argument of platform-based vs bespoke.
>>> 
>>> Adriaan Pelzer
>>> RAAK Ltd
>>> http://www.wewillraakyou.com
>>> +4478 7978 1743
>>> _______________________________________________
>>> wp-hackers mailing list
>>> wp-hackers at lists.automattic.com
>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>> 
>> 
>> __
>> 
>> Christopher Ross
>> 
>> Toronto      1 (416) 840-5828
>> Fredericton 1 (506) 474-2708
>> New Orleans 1 (504) 322 3485
>> 
>> http://christopherross.ca
>> http://www.thisismyurl.com
>> 
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers


__

Christopher Ross

Toronto      1 (416) 840-5828
Fredericton 1 (506) 474-2708
New Orleans 1 (504) 322 3485

http://christopherross.ca
http://www.thisismyurl.com


From bulk at thecodecave.com  Mon Aug 16 23:34:39 2010
From: bulk at thecodecave.com (Brian Layman)
Date: Mon, 16 Aug 2010 19:34:39 -0400
Subject: [wp-hackers] wp-atom2.php
In-Reply-To: <AANLkTikdMfMQ40orhE=jh+XxfBf2mqbW90B9zKgqXWWV@mail.gmail.com>
References: <AANLkTi=QULK6h=Hk4q5WxK3saJJ1ahhR8BSXByToxJtN@mail.gmail.com>	<AANLkTi=4Mg1qYt_pTKA1t_9g=v+wEQjjdfZrQ8CoAmHc@mail.gmail.com>	<AANLkTikbXPyE1DKDo_=xD6YR6uKc0TuAXvQ1_P-z_FCQ@mail.gmail.com>
	<AANLkTikdMfMQ40orhE=jh+XxfBf2mqbW90B9zKgqXWWV@mail.gmail.com>
Message-ID: <006201cb3d9b$98b82020$ca286060$@com>

The other question is, what is in your wp-atom.php file...

______________________________________________
Brian Layman
eHermits, Inc.

-----Original Message-----
From: wp-hackers-bounces at lists.automattic.com
[mailto:wp-hackers-bounces at lists.automattic.com] On Behalf Of David Morris
Sent: Monday, August 16, 2010 2:56 PM
To: wp-hackers at lists.automattic.com
Subject: Re: [wp-hackers] wp-atom2.php

What might have caused it to be renamed?
_______________________________________________
wp-hackers mailing list
wp-hackers at lists.automattic.com
http://lists.automattic.com/mailman/listinfo/wp-hackers


From wordpress at santosj.name  Mon Aug 16 23:45:06 2010
From: wordpress at santosj.name (Jacob Santos)
Date: Mon, 16 Aug 2010 18:45:06 -0500
Subject: [wp-hackers] Amount of estimated developer-hours in Wordpress?
In-Reply-To: <AANLkTi=KMcCrJZGRE66=KOOe4reJsb2R236sxUSN=ZJe@mail.gmail.com>
References: <AANLkTinOTyZFYzhDTubdJH3sYs9C45hc6XSOWBo-2+cg@mail.gmail.com>
	<927737DD-50B3-4456-A993-B20460AE14DD@thisismyurl.com>
	<23286AE0-70CE-4F33-A569-F9C424BE00C4@cefm.ca>
	<AANLkTi=KMcCrJZGRE66=KOOe4reJsb2R236sxUSN=ZJe@mail.gmail.com>
Message-ID: <AANLkTimLEOg4Bja5VHgMXfXrGxWV_u4Gqr3-9_FZ+ALF@mail.gmail.com>

Actually, given the feature set, any sane developer would instead build off
an existing framework decreasing the amount of time it would take to a
fraction. Many of the lines of code are helper functions, which aren't
required and thus lowers the required amount of code needed to recreate
WordPress.

However, if one was going to simply recreate WordPress, they'd be better off
writting a CMS with blogging capabilities.

Jacob Santos



On Mon, Aug 16, 2010 at 2:46 PM, Arlen Beiler <arlenbee at gmail.com> wrote:

> 34 Person years means it would take 34 people one year or one person
> 34 years to do that. Correct?
>
> On Mon, Aug 16, 2010 at 3:41 PM, Charles Frees-Melvin <wordpress at cefm.ca>
> wrote:
> > Your sum negates the lines of code that used to be in wp. Also the number
> of lines of code that were in revisions of patches that formed the final
> patch. I
> > --
> > Charles E. Frees-Melvin
> >
> > Sent from my Rogers iPhone 3G
> >
> > On 2010-08-16, at 16:03, Christopher Ross <cross at thisismyurl.com> wrote:
> >
> >> Here's the number ?
> >>
> >> Average lines of code per day (per developer) - 10 *
> >>
> >> Average cost of developer (Can) - $45,250 **
> >> Average cost of dev/day (Can) - $181
> >> Average cost per line of code (Can) - $18.10
> >>
> >> Lines of Code in WordPress - 136,347 ***
> >>
> >> Development days for WordPress = 13,635
> >> Development cost for WordPress = $2,467,935
> >>
> >> *
> http://stackoverflow.com/questions/2894099/10-lines-of-code-per-day-is-the-global-average-true
> >> ** http://www.payscale.com/research/CA/Job=PHP_Developer/Salary
> >> *** http://www.ohloh.net/p/wordpress/analyses/latest
> >>
> >>
> >>
> >>
> >> On 2010-08-16, at 12:42 PM, Adriaan Pelzer wrote:
> >>
> >>> Hi,
> >>>
> >>> Does anyone know the estimated amount of developer hours in Wordpress
> >>> (latest release, no themes or plugins).
> >>> I want to use this in an argument of platform-based vs bespoke.
> >>>
> >>> Adriaan Pelzer
> >>> RAAK Ltd
> >>> http://www.wewillraakyou.com
> >>> +4478 7978 1743
> >>> _______________________________________________
> >>> wp-hackers mailing list
> >>> wp-hackers at lists.automattic.com
> >>> http://lists.automattic.com/mailman/listinfo/wp-hackers
> >>
> >>
> >> __
> >>
> >> Christopher Ross
> >>
> >> Toronto      1 (416) 840-5828
> >> Fredericton 1 (506) 474-2708
> >> New Orleans 1 (504) 322 3485
> >>
> >> http://christopherross.ca
> >> http://www.thisismyurl.com
> >>
> >> _______________________________________________
> >> wp-hackers mailing list
> >> wp-hackers at lists.automattic.com
> >> http://lists.automattic.com/mailman/listinfo/wp-hackers
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers at lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> >
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From dvmorris at gmail.com  Tue Aug 17 00:44:22 2010
From: dvmorris at gmail.com (David Morris)
Date: Mon, 16 Aug 2010 19:44:22 -0500
Subject: [wp-hackers] wp-atom2.php
In-Reply-To: <006201cb3d9b$98b82020$ca286060$@com>
References: <AANLkTi=QULK6h=Hk4q5WxK3saJJ1ahhR8BSXByToxJtN@mail.gmail.com>
	<AANLkTi=4Mg1qYt_pTKA1t_9g=v+wEQjjdfZrQ8CoAmHc@mail.gmail.com>
	<AANLkTikbXPyE1DKDo_=xD6YR6uKc0TuAXvQ1_P-z_FCQ@mail.gmail.com>
	<AANLkTikdMfMQ40orhE=jh+XxfBf2mqbW90B9zKgqXWWV@mail.gmail.com>
	<006201cb3d9b$98b82020$ca286060$@com>
Message-ID: <AANLkTiktuoYvxa2gBHiqaxzQd6qb-KwmYyT82moWx13j@mail.gmail.com>

I did a diff on them and they are identical.

From ryan at pixopoint.com  Tue Aug 17 02:09:58 2010
From: ryan at pixopoint.com (Ryan Hellyer)
Date: Tue, 17 Aug 2010 14:09:58 +1200
Subject: [wp-hackers] TwentyTen Theme issue
Message-ID: <AANLkTi=uHjkVMK1en9zVpUQ3mO=+8UiK27vu_YVASs0w@mail.gmail.com>

> Yes, yes, lots of people use it that way. Still wrong because CSS
> takes precedence over those attributes. We should fix WP to do the
> right thing here, I'd say. Should be simple enough to do, really.
>
> -Otto

Thanks Otto.

I should have thought this through more before posting. What you wrote
was correct, I just misunderstood and hadn't realised the benefits of
adding height:auto (hat tip to Ian Stewart for pointing me in the
right direction).

Adding height:auto in the CSS should allow the images to resize
proportionately when a max-width is used. This breaks when the image
is a different size to that specified in the HTML unfortunately. So if
you have a giant over-sized image displayed via Twenty Ten, it will
resize correctly rather than becoming distorted. The width:auto is a
hack for IE apparently.

There are disadvantages to this obviously, as it means that the IMG
tag widths and heights are effectively ignored, however if the admin
panel was setup to resize the image files rather than just the IMG tag
widths and heights then the problem would be solved for those who are
most likely to be confused by the situation and not able to solve it
themselves (ie: non-coders who aren't editing their own HTML via the
code editor).

Ian Stewart said he is looking into this and there will be a diff.
submitted for 3.1 to help alleviate these problems.

cheers,
Ryan

From chip at chipbennett.net  Tue Aug 17 02:15:45 2010
From: chip at chipbennett.net (Chip Bennett)
Date: Mon, 16 Aug 2010 21:15:45 -0500
Subject: [wp-hackers] Twenty Ten theme issue?
In-Reply-To: <AANLkTinf_7LU1s8j08SLsPfm2tNuago55AHE+nyYkrPX@mail.gmail.com>
References: <AANLkTinf_7LU1s8j08SLsPfm2tNuago55AHE+nyYkrPX@mail.gmail.com>
Message-ID: <AANLkTinks2L2L8V_rDCKZ9t6-zoQWZVJn2cNUZyC0JqT@mail.gmail.com>

Well, that's what I always *assumed* that WordPress did (actual resizing) -
but then this thread made me doubt that assumption.

If actual resized images exist, why on earth would WordPress then be
performing additional, rendered resizing via IMG attributes? (Perhaps when
the advanced-option resizing is performed for an inserted image?)

Chip

On Mon, Aug 16, 2010 at 3:02 PM, Nathaniel Taintor <
goldenapplesdesign at gmail.com> wrote:

> WP does perform actual resizing of images... check your uploads folder, for
> most images uploaded, there are three or four resized images saved...
> 'thumbnail', "small", "medium", "large", and "original" by default,
> although
> you can add more image sizes through theme or plugin functions.
>
> I've often added custom image sizes through my functions.php like this:
>
> add_image_size('new-custom-size', 400,9999); // resize to 400px wide, for
> example...
>
> and then specified the size in my style:
>
> img.size-new-custom-size { width: 400px; }
>
> thinking it would give me slightly quicker page rendering.
>
> Are you saying that's not correct? The only issue I can see is if the
> original uploaded image was smaller than that size, but in that case - from
> what I understand, the custom size isn't created in the first place and
> that
> class won't be used.
>
> Best,
> Than
>
>
> From: Chip Bennett <chip at chipbennett.net>
> > Subject: Re: [wp-hackers] Twenty Ten theme issue?
> >
> > Wouldn't the correct long-term solution be to have WP perform *actual*
> > resizing of images, such that each image had Original, Thumbnail, Small,
> > Medium, and Large instances (a la Flickr)?
> >
> > Chip
> >
> > On Mon, Aug 16, 2010 at 10:23 AM, Otto <otto at ottodestruct.com> wrote:
> >
> > > On Mon, Aug 16, 2010 at 5:33 AM, Rich Pedley <elfin at elfden.co.uk>
> wrote:
> > > > But there is also a case for the width and height attributes on the
> img
> > > > (isn't it still recommended?).
> > >
> > > It's recommended to have them in order to give browsers a hint as to
> > > their size for layout, but it's still wrong to use them for resizing.
> > >
> > > Yes, yes, lots of people use it that way. Still wrong because CSS
> > > takes precedence over those attributes. We should fix WP to do the
> > > right thing here, I'd say. Should be simple enough to do, really.
> > >
> > > -Otto
> > >
> >
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From otto at ottodestruct.com  Tue Aug 17 02:49:37 2010
From: otto at ottodestruct.com (Otto)
Date: Mon, 16 Aug 2010 21:49:37 -0500
Subject: [wp-hackers] wp-atom2.php
In-Reply-To: <AANLkTiktuoYvxa2gBHiqaxzQd6qb-KwmYyT82moWx13j@mail.gmail.com>
References: <AANLkTi=QULK6h=Hk4q5WxK3saJJ1ahhR8BSXByToxJtN@mail.gmail.com>
	<AANLkTi=4Mg1qYt_pTKA1t_9g=v+wEQjjdfZrQ8CoAmHc@mail.gmail.com>
	<AANLkTikbXPyE1DKDo_=xD6YR6uKc0TuAXvQ1_P-z_FCQ@mail.gmail.com>
	<AANLkTikdMfMQ40orhE=jh+XxfBf2mqbW90B9zKgqXWWV@mail.gmail.com>
	<006201cb3d9b$98b82020$ca286060$@com>
	<AANLkTiktuoYvxa2gBHiqaxzQd6qb-KwmYyT82moWx13j@mail.gmail.com>
Message-ID: <AANLkTim4y-BAcFpvOSvkiMMqWpFBGGtW-esmWBOtB-bX@mail.gmail.com>

Maybe you accidentally made a copy once. Happens to me every once in a while.

Just delete it and move on with your life. Beer is nice. Women are better. ;-)

-Otto



On Mon, Aug 16, 2010 at 7:44 PM, David Morris <dvmorris at gmail.com> wrote:
> I did a diff on them and they are identical.
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From ryan at pixopoint.com  Tue Aug 17 03:53:46 2010
From: ryan at pixopoint.com (Ryan Hellyer)
Date: Tue, 17 Aug 2010 15:53:46 +1200
Subject: [wp-hackers] wp-hackers Digest, Vol 67, Issue 58
In-Reply-To: <mailman.16527.1282013409.1338.wp-hackers@lists.automattic.com>
References: <mailman.16527.1282013409.1338.wp-hackers@lists.automattic.com>
Message-ID: <AANLkTimPwT3UEEm5d-J1G5NQepoj4b-ramjp9t6oWdD-@mail.gmail.com>

> From: Chip Bennett <chip at chipbennett.net
> Subject: Re: [wp-hackers] Twenty Ten theme issue?
>
> If actual resized images exist, why on earth would WordPress then be
> performing additional, rendered resizing via IMG attributes? (Perhaps when
> the advanced-option resizing is performed for an inserted image?)

Yes. That is (I assume) where the confusion comes from in that
WordPress does not physically resize the images when using the
advanced-option resizer. I thought you also used to be able to resize
them via dragging the edge in the wysiwyg editor, but I noticed on
testing that it doesn't work like that anymore (which is a good thing
IMO as users could make a real mess of things by uploading a super
huge image and dragging the corners of it to force it to fit).

Users editing the width and height tags via the code editor will still
run into problems even if the images are physically resized, but I'm
not sure there is a solution to that problem, or at least not one
which won't create even more bugs by fixing it.

This is a squirrely problem and one I'd never even thought of before.
There's probably a whole can of worms to be opened with fluid width
sites and this sort of behaviour too.


cheers,
Ryan






On Tue, Aug 17, 2010 at 2:50 PM,
<wp-hackers-request at lists.automattic.com> wrote:
> Send wp-hackers mailing list submissions to
> ? ? ? ?wp-hackers at lists.automattic.com
>
> To subscribe or unsubscribe via the World Wide Web, visit
> ? ? ? ?http://lists.automattic.com/mailman/listinfo/wp-hackers
> or, via email, send a message with subject or body 'help' to
> ? ? ? ?wp-hackers-request at lists.automattic.com
>
> You can reach the person managing the list at
> ? ? ? ?wp-hackers-owner at lists.automattic.com
>
> When replying, please edit your Subject line so it is more specific
> than "Re: Contents of wp-hackers digest..."
>
>
> Today's Topics:
>
> ? 1. Re: Twenty Ten theme issue? (Nathaniel Taintor)
> ? 2. Re: Amount of estimated developer-hours in Wordpress?
> ? ? ?(Christopher Ross)
> ? 3. Re: wp-atom2.php (Brian Layman)
> ? 4. Re: Amount of estimated developer-hours in Wordpress?
> ? ? ?(Jacob Santos)
> ? 5. Re: wp-atom2.php (David Morris)
> ? 6. Re: TwentyTen Theme issue (Ryan Hellyer)
> ? 7. Re: Twenty Ten theme issue? (Chip Bennett)
> ? 8. Re: wp-atom2.php (Otto)
>
>
> ----------------------------------------------------------------------
>
> Message: 1
> Date: Mon, 16 Aug 2010 16:02:11 -0400
> From: Nathaniel Taintor <goldenapplesdesign at gmail.com>
> Subject: Re: [wp-hackers] Twenty Ten theme issue?
> To: wp-hackers at lists.automattic.com
> Message-ID:
> ? ? ? ?<AANLkTinf_7LU1s8j08SLsPfm2tNuago55AHE+nyYkrPX at mail.gmail.com>
> Content-Type: text/plain; charset=ISO-8859-1
>
> WP does perform actual resizing of images... check your uploads folder, for
> most images uploaded, there are three or four resized images saved...
> 'thumbnail', "small", "medium", "large", and "original" by default, although
> you can add more image sizes through theme or plugin functions.
>
> I've often added custom image sizes through my functions.php like this:
>
> add_image_size('new-custom-size', 400,9999); // resize to 400px wide, for
> example...
>
> and then specified the size in my style:
>
> img.size-new-custom-size { width: 400px; }
>
> thinking it would give me slightly quicker page rendering.
>
> Are you saying that's not correct? The only issue I can see is if the
> original uploaded image was smaller than that size, but in that case - from
> what I understand, the custom size isn't created in the first place and that
> class won't be used.
>
> Best,
> Than
>
>
> From: Chip Bennett <chip at chipbennett.net>
>> Subject: Re: [wp-hackers] Twenty Ten theme issue?
>>
>> Wouldn't the correct long-term solution be to have WP perform *actual*
>> resizing of images, such that each image had Original, Thumbnail, Small,
>> Medium, and Large instances (a la Flickr)?
>>
>> Chip
>>
>> On Mon, Aug 16, 2010 at 10:23 AM, Otto <otto at ottodestruct.com> wrote:
>>
>> > On Mon, Aug 16, 2010 at 5:33 AM, Rich Pedley <elfin at elfden.co.uk> wrote:
>> > > But there is also a case for the width and height attributes on the img
>> > > (isn't it still recommended?).
>> >
>> > It's recommended to have them in order to give browsers a hint as to
>> > their size for layout, but it's still wrong to use them for resizing.
>> >
>> > Yes, yes, lots of people use it that way. Still wrong because CSS
>> > takes precedence over those attributes. We should fix WP to do the
>> > right thing here, I'd say. Should be simple enough to do, really.
>> >
>> > -Otto
>> >
>>
>
>
> ------------------------------
>
> Message: 2
> Date: Mon, 16 Aug 2010 17:02:48 -0300
> From: Christopher Ross <cross at thisismyurl.com>
> Subject: Re: [wp-hackers] Amount of estimated developer-hours in
> ? ? ? ?Wordpress?
> To: wp-hackers at lists.automattic.com
> Message-ID: <7DC9EA2F-2A9D-4D77-9A19-6A3D1C9037E2 at thisismyurl.com>
> Content-Type: text/plain; charset=windows-1252
>
> Yes, the $2.4 million represents the total value of WordPress across all versions. I think we read the original request differently as I thought he meant the total value of the final release, excluding plugins etc.
>
>
> On 2010-08-16, at 4:41 PM, Charles Frees-Melvin wrote:
>
>> Your sum negates the lines of code that used to be in wp. Also the number of lines of code that were in revisions of patches that formed the final patch. I
>> --
>> Charles E. Frees-Melvin
>>
>> Sent from my Rogers iPhone 3G
>>
>> On 2010-08-16, at 16:03, Christopher Ross <cross at thisismyurl.com> wrote:
>>
>>> Here's the number ?
>>>
>>> Average lines of code per day (per developer) - 10 *
>>>
>>> Average cost of developer (Can) - $45,250 **
>>> Average cost of dev/day (Can) - $181
>>> Average cost per line of code (Can) - $18.10
>>>
>>> Lines of Code in WordPress - 136,347 ***
>>>
>>> Development days for WordPress = 13,635
>>> Development cost for WordPress = $2,467,935
>>>
>>> * http://stackoverflow.com/questions/2894099/10-lines-of-code-per-day-is-the-global-average-true
>>> ** http://www.payscale.com/research/CA/Job=PHP_Developer/Salary
>>> *** http://www.ohloh.net/p/wordpress/analyses/latest
>>>
>>>
>>>
>>>
>>> On 2010-08-16, at 12:42 PM, Adriaan Pelzer wrote:
>>>
>>>> Hi,
>>>>
>>>> Does anyone know the estimated amount of developer hours in Wordpress
>>>> (latest release, no themes or plugins).
>>>> I want to use this in an argument of platform-based vs bespoke.
>>>>
>>>> Adriaan Pelzer
>>>> RAAK Ltd
>>>> http://www.wewillraakyou.com
>>>> +4478 7978 1743
>>>> _______________________________________________
>>>> wp-hackers mailing list
>>>> wp-hackers at lists.automattic.com
>>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>>
>>>
>>> __
>>>
>>> Christopher Ross
>>>
>>> Toronto ? ? ?1 (416) 840-5828
>>> Fredericton 1 (506) 474-2708
>>> New Orleans 1 (504) 322 3485
>>>
>>> http://christopherross.ca
>>> http://www.thisismyurl.com
>>>
>>> _______________________________________________
>>> wp-hackers mailing list
>>> wp-hackers at lists.automattic.com
>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
>
> __
>
> Christopher Ross
>
> Toronto ? ? ?1 (416) 840-5828
> Fredericton 1 (506) 474-2708
> New Orleans 1 (504) 322 3485
>
> http://christopherross.ca
> http://www.thisismyurl.com
>
>
>
> ------------------------------
>
> Message: 3
> Date: Mon, 16 Aug 2010 19:34:39 -0400
> From: "Brian Layman" <bulk at thecodecave.com>
> Subject: Re: [wp-hackers] wp-atom2.php
> To: <wp-hackers at lists.automattic.com>
> Message-ID: <006201cb3d9b$98b82020$ca286060$@com>
> Content-Type: text/plain; ? ? ? charset="us-ascii"
>
> The other question is, what is in your wp-atom.php file...
>
> ______________________________________________
> Brian Layman
> eHermits, Inc.
>
> -----Original Message-----
> From: wp-hackers-bounces at lists.automattic.com
> [mailto:wp-hackers-bounces at lists.automattic.com] On Behalf Of David Morris
> Sent: Monday, August 16, 2010 2:56 PM
> To: wp-hackers at lists.automattic.com
> Subject: Re: [wp-hackers] wp-atom2.php
>
> What might have caused it to be renamed?
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
>
>
> ------------------------------
>
> Message: 4
> Date: Mon, 16 Aug 2010 18:45:06 -0500
> From: Jacob Santos <wordpress at santosj.name>
> Subject: Re: [wp-hackers] Amount of estimated developer-hours in
> ? ? ? ?Wordpress?
> To: wp-hackers at lists.automattic.com
> Message-ID:
> ? ? ? ?<AANLkTimLEOg4Bja5VHgMXfXrGxWV_u4Gqr3-9_FZ+ALF at mail.gmail.com>
> Content-Type: text/plain; charset=windows-1252
>
> Actually, given the feature set, any sane developer would instead build off
> an existing framework decreasing the amount of time it would take to a
> fraction. Many of the lines of code are helper functions, which aren't
> required and thus lowers the required amount of code needed to recreate
> WordPress.
>
> However, if one was going to simply recreate WordPress, they'd be better off
> writting a CMS with blogging capabilities.
>
> Jacob Santos
>
>
>
> On Mon, Aug 16, 2010 at 2:46 PM, Arlen Beiler <arlenbee at gmail.com> wrote:
>
>> 34 Person years means it would take 34 people one year or one person
>> 34 years to do that. Correct?
>>
>> On Mon, Aug 16, 2010 at 3:41 PM, Charles Frees-Melvin <wordpress at cefm.ca>
>> wrote:
>> > Your sum negates the lines of code that used to be in wp. Also the number
>> of lines of code that were in revisions of patches that formed the final
>> patch. I
>> > --
>> > Charles E. Frees-Melvin
>> >
>> > Sent from my Rogers iPhone 3G
>> >
>> > On 2010-08-16, at 16:03, Christopher Ross <cross at thisismyurl.com> wrote:
>> >
>> >> Here's the number ?
>> >>
>> >> Average lines of code per day (per developer) - 10 *
>> >>
>> >> Average cost of developer (Can) - $45,250 **
>> >> Average cost of dev/day (Can) - $181
>> >> Average cost per line of code (Can) - $18.10
>> >>
>> >> Lines of Code in WordPress - 136,347 ***
>> >>
>> >> Development days for WordPress = 13,635
>> >> Development cost for WordPress = $2,467,935
>> >>
>> >> *
>> http://stackoverflow.com/questions/2894099/10-lines-of-code-per-day-is-the-global-average-true
>> >> ** http://www.payscale.com/research/CA/Job=PHP_Developer/Salary
>> >> *** http://www.ohloh.net/p/wordpress/analyses/latest
>> >>
>> >>
>> >>
>> >>
>> >> On 2010-08-16, at 12:42 PM, Adriaan Pelzer wrote:
>> >>
>> >>> Hi,
>> >>>
>> >>> Does anyone know the estimated amount of developer hours in Wordpress
>> >>> (latest release, no themes or plugins).
>> >>> I want to use this in an argument of platform-based vs bespoke.
>> >>>
>> >>> Adriaan Pelzer
>> >>> RAAK Ltd
>> >>> http://www.wewillraakyou.com
>> >>> +4478 7978 1743
>> >>> _______________________________________________
>> >>> wp-hackers mailing list
>> >>> wp-hackers at lists.automattic.com
>> >>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>> >>
>> >>
>> >> __
>> >>
>> >> Christopher Ross
>> >>
>> >> Toronto ? ? ?1 (416) 840-5828
>> >> Fredericton 1 (506) 474-2708
>> >> New Orleans 1 (504) 322 3485
>> >>
>> >> http://christopherross.ca
>> >> http://www.thisismyurl.com
>> >>
>> >> _______________________________________________
>> >> wp-hackers mailing list
>> >> wp-hackers at lists.automattic.com
>> >> http://lists.automattic.com/mailman/listinfo/wp-hackers
>> > _______________________________________________
>> > wp-hackers mailing list
>> > wp-hackers at lists.automattic.com
>> > http://lists.automattic.com/mailman/listinfo/wp-hackers
>> >
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
>
>
> ------------------------------
>
> Message: 5
> Date: Mon, 16 Aug 2010 19:44:22 -0500
> From: David Morris <dvmorris at gmail.com>
> Subject: Re: [wp-hackers] wp-atom2.php
> To: wp-hackers at lists.automattic.com
> Message-ID:
> ? ? ? ?<AANLkTiktuoYvxa2gBHiqaxzQd6qb-KwmYyT82moWx13j at mail.gmail.com>
> Content-Type: text/plain; charset=ISO-8859-1
>
> I did a diff on them and they are identical.
>
>
> ------------------------------
>
> Message: 6
> Date: Tue, 17 Aug 2010 14:09:58 +1200
> From: Ryan Hellyer <ryan at pixopoint.com>
> Subject: Re: [wp-hackers] TwentyTen Theme issue
> To: wp-hackers at lists.automattic.com
> Message-ID:
> ? ? ? ?<AANLkTi=uHjkVMK1en9zVpUQ3mO=+8UiK27vu_YVASs0w at mail.gmail.com>
> Content-Type: text/plain; charset=ISO-8859-1
>
>> Yes, yes, lots of people use it that way. Still wrong because CSS
>> takes precedence over those attributes. We should fix WP to do the
>> right thing here, I'd say. Should be simple enough to do, really.
>>
>> -Otto
>
> Thanks Otto.
>
> I should have thought this through more before posting. What you wrote
> was correct, I just misunderstood and hadn't realised the benefits of
> adding height:auto (hat tip to Ian Stewart for pointing me in the
> right direction).
>
> Adding height:auto in the CSS should allow the images to resize
> proportionately when a max-width is used. This breaks when the image
> is a different size to that specified in the HTML unfortunately. So if
> you have a giant over-sized image displayed via Twenty Ten, it will
> resize correctly rather than becoming distorted. The width:auto is a
> hack for IE apparently.
>
> There are disadvantages to this obviously, as it means that the IMG
> tag widths and heights are effectively ignored, however if the admin
> panel was setup to resize the image files rather than just the IMG tag
> widths and heights then the problem would be solved for those who are
> most likely to be confused by the situation and not able to solve it
> themselves (ie: non-coders who aren't editing their own HTML via the
> code editor).
>
> Ian Stewart said he is looking into this and there will be a diff.
> submitted for 3.1 to help alleviate these problems.
>
> cheers,
> Ryan
>
>
> ------------------------------
>
> Message: 7
> Date: Mon, 16 Aug 2010 21:15:45 -0500
> From: Chip Bennett <chip at chipbennett.net>
> Subject: Re: [wp-hackers] Twenty Ten theme issue?
> To: wp-hackers at lists.automattic.com
> Message-ID:
> ? ? ? ?<AANLkTinks2L2L8V_rDCKZ9t6-zoQWZVJn2cNUZyC0JqT at mail.gmail.com>
> Content-Type: text/plain; charset=ISO-8859-1
>
> Well, that's what I always *assumed* that WordPress did (actual resizing) -
> but then this thread made me doubt that assumption.
>
> If actual resized images exist, why on earth would WordPress then be
> performing additional, rendered resizing via IMG attributes? (Perhaps when
> the advanced-option resizing is performed for an inserted image?)
>
> Chip
>
> On Mon, Aug 16, 2010 at 3:02 PM, Nathaniel Taintor <
> goldenapplesdesign at gmail.com> wrote:
>
>> WP does perform actual resizing of images... check your uploads folder, for
>> most images uploaded, there are three or four resized images saved...
>> 'thumbnail', "small", "medium", "large", and "original" by default,
>> although
>> you can add more image sizes through theme or plugin functions.
>>
>> I've often added custom image sizes through my functions.php like this:
>>
>> add_image_size('new-custom-size', 400,9999); // resize to 400px wide, for
>> example...
>>
>> and then specified the size in my style:
>>
>> img.size-new-custom-size { width: 400px; }
>>
>> thinking it would give me slightly quicker page rendering.
>>
>> Are you saying that's not correct? The only issue I can see is if the
>> original uploaded image was smaller than that size, but in that case - from
>> what I understand, the custom size isn't created in the first place and
>> that
>> class won't be used.
>>
>> Best,
>> Than
>>
>>
>> From: Chip Bennett <chip at chipbennett.net>
>> > Subject: Re: [wp-hackers] Twenty Ten theme issue?
>> >
>> > Wouldn't the correct long-term solution be to have WP perform *actual*
>> > resizing of images, such that each image had Original, Thumbnail, Small,
>> > Medium, and Large instances (a la Flickr)?
>> >
>> > Chip
>> >
>> > On Mon, Aug 16, 2010 at 10:23 AM, Otto <otto at ottodestruct.com> wrote:
>> >
>> > > On Mon, Aug 16, 2010 at 5:33 AM, Rich Pedley <elfin at elfden.co.uk>
>> wrote:
>> > > > But there is also a case for the width and height attributes on the
>> img
>> > > > (isn't it still recommended?).
>> > >
>> > > It's recommended to have them in order to give browsers a hint as to
>> > > their size for layout, but it's still wrong to use them for resizing.
>> > >
>> > > Yes, yes, lots of people use it that way. Still wrong because CSS
>> > > takes precedence over those attributes. We should fix WP to do the
>> > > right thing here, I'd say. Should be simple enough to do, really.
>> > >
>> > > -Otto
>> > >
>> >
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
>
>
> ------------------------------
>
> Message: 8
> Date: Mon, 16 Aug 2010 21:49:37 -0500
> From: Otto <otto at ottodestruct.com>
> Subject: Re: [wp-hackers] wp-atom2.php
> To: wp-hackers at lists.automattic.com
> Message-ID:
> ? ? ? ?<AANLkTim4y-BAcFpvOSvkiMMqWpFBGGtW-esmWBOtB-bX at mail.gmail.com>
> Content-Type: text/plain; charset=ISO-8859-1
>
> Maybe you accidentally made a copy once. Happens to me every once in a while.
>
> Just delete it and move on with your life. Beer is nice. Women are better. ;-)
>
> -Otto
>
>
>
> On Mon, Aug 16, 2010 at 7:44 PM, David Morris <dvmorris at gmail.com> wrote:
>> I did a diff on them and they are identical.
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
>
>
> ------------------------------
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
>
> End of wp-hackers Digest, Vol 67, Issue 58
> ******************************************
>



-- 
Ryan Hellyer
Email: ryan at pixopoint.com
Website: http://pixopoint.com/
Skype: ryanhellyer
Phone: +64 21 297-2698
Address:
Center for Innovation
87 St David St
Dunedin
New Zealand

From dvmorris at gmail.com  Tue Aug 17 04:25:10 2010
From: dvmorris at gmail.com (David Morris)
Date: Mon, 16 Aug 2010 23:25:10 -0500
Subject: [wp-hackers] wp-atom2.php
In-Reply-To: <AANLkTim4y-BAcFpvOSvkiMMqWpFBGGtW-esmWBOtB-bX@mail.gmail.com>
References: <AANLkTi=QULK6h=Hk4q5WxK3saJJ1ahhR8BSXByToxJtN@mail.gmail.com>
	<AANLkTi=4Mg1qYt_pTKA1t_9g=v+wEQjjdfZrQ8CoAmHc@mail.gmail.com>
	<AANLkTikbXPyE1DKDo_=xD6YR6uKc0TuAXvQ1_P-z_FCQ@mail.gmail.com>
	<AANLkTikdMfMQ40orhE=jh+XxfBf2mqbW90B9zKgqXWWV@mail.gmail.com>
	<006201cb3d9b$98b82020$ca286060$@com>
	<AANLkTiktuoYvxa2gBHiqaxzQd6qb-KwmYyT82moWx13j@mail.gmail.com>
	<AANLkTim4y-BAcFpvOSvkiMMqWpFBGGtW-esmWBOtB-bX@mail.gmail.com>
Message-ID: <AANLkTi=iQnhLopyRv=vUUHsfv_dhLRzaPqfzC7v8_kxn@mail.gmail.com>

Haha, will do. Thanks for your help,

Dave

From nanobar at gmail.com  Tue Aug 17 05:05:00 2010
From: nanobar at gmail.com (Lance Willett)
Date: Tue, 17 Aug 2010 00:05:00 -0500
Subject: [wp-hackers] Twenty Ten theme issue?
In-Reply-To: <AANLkTimo8-KivPMFJkUL_msfi57fer9-w8BVGWW_0rNW@mail.gmail.com>
References: <AANLkTikxCq9JSGa5VpQNWi4u0KJzowBcJkXEBa___v5-@mail.gmail.com>
	<AANLkTimo8-KivPMFJkUL_msfi57fer9-w8BVGWW_0rNW@mail.gmail.com>
Message-ID: <AANLkTiktinh3wQ5r00dee8kHzBKqD_K=X7wNi5XwooLi@mail.gmail.com>

> Well, my point is that if WP was doing the right thing here and using
> inline styles, then it wouldn't matter what the theme did. Inline
> styles always win.
>
> The main purpose of a theme's stylesheet is pretty much to "override"
> the HTML. Stylesheets control the presentation, after all. In this
> case, the height and width of "auto" is merely expressing the default
> settings, and normally it'd be the correct way to do it.

> Short term fix: remove those.
> Long term fix: Change WP to not use width and height attributes for
> resizing, but to use inline styles instead.

Glad this was brought up -- it's been on my mind a lot lately.

I agree that we should remove the CSS values and fix how WordPress
handles image sizes that are larger than the content_width value. As
we've seen with this Twenty Ten image CSS issue, it's impossible to
correctly style every possible case. Fixing one case will break
another.

I don't think inline styles aren't necessarily the answer, though. I'm
thinking more of a post_content filter.

We're not talking about all images, though, right? Only full-size
images? The CSS rules for Twenty Ten in question control any image
uploaded via the Media form and inserted into the post by targeting
only those CSS selectors (size-full, size-large, etc). But, we could
decide to only touch full-size images since they are usually the ones
that cause layout problems.

We deal with this quite a bit on WordPress.com because our customers
tend to switch themes a lot. They may have uploaded images with a
wider theme, and now have a narrower one. Or vice versa. Instead of
forcing the images to fit with CSS, they should fit just right in the
HTML source.

So, what about a post_content filter that does the resize before
output? This would take the burden off of theme CSS for making sure
images posted in the past will still fit in a new content area.

The filter would do two things:
1. Scale down the full-size images in the post if they are wider than
content_width.
2. Scale up image full-size images if they are smaller than the
content_width and if the image can could support it. That is, scale up
to the maximum size of the original image.

Here's how it could work:
1. Check for full-size images in post_content. If none, exit.
2. Get width of each image (from query string or width attribute) and
compare to content_width value.
3. If image width is smaller than content_width, check the original
size and scale it up if possible.
4. If bigger, change query string and attributes based on the
content_width value to scale the image down (use WP's built in
functions for this since they can calculate the new width and height
-- I think it's wp_constrain_dimensions).
5. Replace the values for the images that need to be changed, and
return the post content to continue to output.

This doesn't change any data, it just filters before output so that
the final HTML rendered to the page has images that are all either
exactly the right width, or smaller. With this in place, an over-sized
image would never occur as long as the theme defines content_width
correctly.

> Yes, yes, lots of people use it that way. Still wrong because CSS
> takes precedence over those attributes. We should fix WP to do the
> right thing here, I'd say. Should be simple enough to do, really.

I think most people doing the HTML attribute hack to resize images are
making them smaller -- not bigger, so they'd not be affected by this
unless they are doing it to full-size images.

From peter.westwood at ftwr.co.uk  Tue Aug 17 07:39:37 2010
From: peter.westwood at ftwr.co.uk (Peter Westwood)
Date: Tue, 17 Aug 2010 08:39:37 +0100
Subject: [wp-hackers] Amount of estimated developer-hours in Wordpress?
In-Reply-To: <AANLkTi=KMcCrJZGRE66=KOOe4reJsb2R236sxUSN=ZJe@mail.gmail.com>
References: <AANLkTinOTyZFYzhDTubdJH3sYs9C45hc6XSOWBo-2+cg@mail.gmail.com>
	<927737DD-50B3-4456-A993-B20460AE14DD@thisismyurl.com>
	<23286AE0-70CE-4F33-A569-F9C424BE00C4@cefm.ca>
	<AANLkTi=KMcCrJZGRE66=KOOe4reJsb2R236sxUSN=ZJe@mail.gmail.com>
Message-ID: <915E9C1C-4EB4-455E-8306-312FFE5C0234@ftwr.co.uk>


On 16 Aug 2010, at 20:46, Arlen Beiler wrote:

> 34 Person years means it would take 34 people one year or one person
> 34 years to do that. Correct?
> 

Niether.

Brooks's Law would negate the idea that 34 people could reproduce from scratch in a year

Its also likely that one person would reproduce in less than 34 years.

Cheers
-- 
Peter Westwood
http://blog.ftwr.co.uk | http://westi.wordpress.com
C53C F8FC 8796 8508 88D6 C950 54F4 5DCD A834 01C5


From adriaan at wewillraakyou.com  Tue Aug 17 08:39:55 2010
From: adriaan at wewillraakyou.com (Adriaan Pelzer)
Date: Tue, 17 Aug 2010 09:39:55 +0100
Subject: [wp-hackers] Amount of estimated developer-hours in Wordpress?
In-Reply-To: <AANLkTimLEOg4Bja5VHgMXfXrGxWV_u4Gqr3-9_FZ+ALF@mail.gmail.com>
References: <AANLkTinOTyZFYzhDTubdJH3sYs9C45hc6XSOWBo-2+cg@mail.gmail.com>
	<927737DD-50B3-4456-A993-B20460AE14DD@thisismyurl.com>
	<23286AE0-70CE-4F33-A569-F9C424BE00C4@cefm.ca>
	<AANLkTi=KMcCrJZGRE66=KOOe4reJsb2R236sxUSN=ZJe@mail.gmail.com>
	<AANLkTimLEOg4Bja5VHgMXfXrGxWV_u4Gqr3-9_FZ+ALF@mail.gmail.com>
Message-ID: <AANLkTin=KeG8sjj82mYEumPnwvr+-LUHapATaPpht2A2@mail.gmail.com>

Some clients require something to be built bespoke, because they shy away
from GPL, or they have some ridiculous "security by obscurity"
specification. In these cases, they often expect something with the same
robustness and usability as, for instance, Wordpress, but they think a $100
000, or sometimes even less, would cut it, and they want it in three months.

It's handy to then have these estimates ready when quoting to try and swing
them to the "right" side.

Adriaan Pelzer
RAAK Ltd
http://www.wewillraakyou.com
+4478 7978 1743



On Tue, Aug 17, 2010 at 12:45 AM, Jacob Santos <wordpress at santosj.name>wrote:

> Actually, given the feature set, any sane developer would instead build off
> an existing framework decreasing the amount of time it would take to a
> fraction. Many of the lines of code are helper functions, which aren't
> required and thus lowers the required amount of code needed to recreate
> WordPress.
>
> However, if one was going to simply recreate WordPress, they'd be better
> off
> writting a CMS with blogging capabilities.
>
> Jacob Santos
>
>
>
> On Mon, Aug 16, 2010 at 2:46 PM, Arlen Beiler <arlenbee at gmail.com> wrote:
>
> > 34 Person years means it would take 34 people one year or one person
> > 34 years to do that. Correct?
> >
> > On Mon, Aug 16, 2010 at 3:41 PM, Charles Frees-Melvin <wordpress at cefm.ca
> >
> > wrote:
> > > Your sum negates the lines of code that used to be in wp. Also the
> number
> > of lines of code that were in revisions of patches that formed the final
> > patch. I
> > > --
> > > Charles E. Frees-Melvin
> > >
> > > Sent from my Rogers iPhone 3G
> > >
> > > On 2010-08-16, at 16:03, Christopher Ross <cross at thisismyurl.com>
> wrote:
> > >
> > >> Here's the number ?
> > >>
> > >> Average lines of code per day (per developer) - 10 *
> > >>
> > >> Average cost of developer (Can) - $45,250 **
> > >> Average cost of dev/day (Can) - $181
> > >> Average cost per line of code (Can) - $18.10
> > >>
> > >> Lines of Code in WordPress - 136,347 ***
> > >>
> > >> Development days for WordPress = 13,635
> > >> Development cost for WordPress = $2,467,935
> > >>
> > >> *
> >
> http://stackoverflow.com/questions/2894099/10-lines-of-code-per-day-is-the-global-average-true
> > >> ** http://www.payscale.com/research/CA/Job=PHP_Developer/Salary
> > >> *** http://www.ohloh.net/p/wordpress/analyses/latest
> > >>
> > >>
> > >>
> > >>
> > >> On 2010-08-16, at 12:42 PM, Adriaan Pelzer wrote:
> > >>
> > >>> Hi,
> > >>>
> > >>> Does anyone know the estimated amount of developer hours in Wordpress
> > >>> (latest release, no themes or plugins).
> > >>> I want to use this in an argument of platform-based vs bespoke.
> > >>>
> > >>> Adriaan Pelzer
> > >>> RAAK Ltd
> > >>> http://www.wewillraakyou.com
> > >>> +4478 7978 1743
> > >>> _______________________________________________
> > >>> wp-hackers mailing list
> > >>> wp-hackers at lists.automattic.com
> > >>> http://lists.automattic.com/mailman/listinfo/wp-hackers
> > >>
> > >>
> > >> __
> > >>
> > >> Christopher Ross
> > >>
> > >> Toronto      1 (416) 840-5828
> > >> Fredericton 1 (506) 474-2708
> > >> New Orleans 1 (504) 322 3485
> > >>
> > >> http://christopherross.ca
> > >> http://www.thisismyurl.com
> > >>
> > >> _______________________________________________
> > >> wp-hackers mailing list
> > >> wp-hackers at lists.automattic.com
> > >> http://lists.automattic.com/mailman/listinfo/wp-hackers
> > > _______________________________________________
> > > wp-hackers mailing list
> > > wp-hackers at lists.automattic.com
> > > http://lists.automattic.com/mailman/listinfo/wp-hackers
> > >
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers at lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> >
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From lox.dev at knc.nc  Tue Aug 17 11:13:17 2010
From: lox.dev at knc.nc (Lox)
Date: Tue, 17 Aug 2010 22:13:17 +1100
Subject: [wp-hackers] Import gives me duplicates
Message-ID: <AANLkTi=v+pWyeniCsK7zYDshUKbYHjA+AnYOOFErkwsu@mail.gmail.com>

Hello,

I have made an import over and import using Wordpress import/export. Now, I
have at least a lot of duplicated post metas. Is that a normal behavior ?

I have found this command to clean it up, is it ok ?:

ALTER IGNORE TABLE  `wp_postmeta` ADD UNIQUE INDEX(`post_id`,`meta_key`)

What else could have been duplicated ?

-- 
Lox
lox.dev at knc.nc

From otto at ottodestruct.com  Tue Aug 17 13:04:56 2010
From: otto at ottodestruct.com (Otto)
Date: Tue, 17 Aug 2010 08:04:56 -0500
Subject: [wp-hackers] Twenty Ten theme issue?
In-Reply-To: <AANLkTiktinh3wQ5r00dee8kHzBKqD_K=X7wNi5XwooLi@mail.gmail.com>
References: <AANLkTikxCq9JSGa5VpQNWi4u0KJzowBcJkXEBa___v5-@mail.gmail.com>
	<AANLkTimo8-KivPMFJkUL_msfi57fer9-w8BVGWW_0rNW@mail.gmail.com>
	<AANLkTiktinh3wQ5r00dee8kHzBKqD_K=X7wNi5XwooLi@mail.gmail.com>
Message-ID: <AANLkTim8a_8Cof9xZ1A8Ff3DdDm98Yqwmc4a+_WMh79d@mail.gmail.com>

On Tue, Aug 17, 2010 at 12:05 AM, Lance Willett <nanobar at gmail.com> wrote:
> We're not talking about all images, though, right? Only full-size
> images?

No, that's not what we're talking about at all.

We're talking about images that have been resized using the in-post resizer.

-Otto

From KrisY at tbs.uk.com  Tue Aug 17 15:23:51 2010
From: KrisY at tbs.uk.com (Kris Young)
Date: Tue, 17 Aug 2010 16:23:51 +0100
Subject: [wp-hackers] Twenty Ten theme issue?
In-Reply-To: <AANLkTim8a_8Cof9xZ1A8Ff3DdDm98Yqwmc4a+_WMh79d@mail.gmail.com>
References: <AANLkTikxCq9JSGa5VpQNWi4u0KJzowBcJkXEBa___v5-@mail.gmail.com><AANLkTimo8-KivPMFJkUL_msfi57fer9-w8BVGWW_0rNW@mail.gmail.com><AANLkTiktinh3wQ5r00dee8kHzBKqD_K=X7wNi5XwooLi@mail.gmail.com>
	<AANLkTim8a_8Cof9xZ1A8Ff3DdDm98Yqwmc4a+_WMh79d@mail.gmail.com>
Message-ID: <CD47955B7E065D48AB5CF226C2ED75C02E3386@tbs-sbs01.TBS.local>

Yep, resizing the image at browser level is probably not the best idea.
The page still loads the full-size image, so it's going to hurt your
pagesizes.

I won't namedrop, but there's a forum I frequent that only allows the
posting of thumbnails. The developers of that site have found a way to
then automatically display a link to the image below. This is uniform
across the site, and seems a pretty good idea. Worth a thought?

Kris

From otto at ottodestruct.com  Tue Aug 17 15:43:14 2010
From: otto at ottodestruct.com (Otto)
Date: Tue, 17 Aug 2010 10:43:14 -0500
Subject: [wp-hackers] Twenty Ten theme issue?
In-Reply-To: <CD47955B7E065D48AB5CF226C2ED75C02E3386@tbs-sbs01.TBS.local>
References: <AANLkTikxCq9JSGa5VpQNWi4u0KJzowBcJkXEBa___v5-@mail.gmail.com>
	<AANLkTimo8-KivPMFJkUL_msfi57fer9-w8BVGWW_0rNW@mail.gmail.com>
	<AANLkTiktinh3wQ5r00dee8kHzBKqD_K=X7wNi5XwooLi@mail.gmail.com>
	<AANLkTim8a_8Cof9xZ1A8Ff3DdDm98Yqwmc4a+_WMh79d@mail.gmail.com>
	<CD47955B7E065D48AB5CF226C2ED75C02E3386@tbs-sbs01.TBS.local>
Message-ID: <AANLkTi=oZRj60TfCEB4jopf0xV05ZBNFOR++GBRT4Xr0@mail.gmail.com>

Actually, WordPress does this pretty effectively.

For the main resizing, it creates the several different sizes of
images on upload.

When you insert the image, it uses the content-width setting in the
theme to put an upper limit on the width of the image inserted. This
is to keep the image from overrunning your page's content area. When
it's choosing an image in this manner, it picks the image closest in
size without being smaller. So yes, in browser resizing is used, but
it's picking the closest match.

In-browser resizing isn't all that bad anymore, actually. Modern
browsers don't suck at resizing like Netscape used to, and while you
can come up with a system to generate the image on the fly and serve
it up, this is a lot of work in terms of CPU time on your server. Time
that is probably not necessary for you to bother with. It's a
diminishing returns problem. You can use caching techniques as well,
but then you're just using lots of disk space.

On the whole, WP is doing it right. The only problem is the use of the
width and height attributes to attempt to do browser resizing.
Hopefully this is an easy fix.



BTW, if anybody is interested, I've seen implementations of on-the-fly
resizing for WP and it's actually really trivially easy to do. You can
make a PHP program that will take an input filename and load/resize
it, then save the file out into a cache directory, and return it to
the browser. This takes like 20 lines of PHP code, tops. You can use
an .htaccess rule to redirect all, say, JPG requests there like this:

RewriteCond %{DOCUMENT_ROOT}/%{REQUEST_URI} !-f
RewriteRule ^(.*).jpg$    /resize.php?file=$1 [L]

This gives you free automatic caching, because you can have your
caching directory be the directory where you normally store uploaded
images, and the first condition there will only redirect to the
resizer if the file isn't found. Now, note that WordPress stores
filenames like image-100x300.jpg and make your code do the same thing.

Making WordPress use this resizing instead of the internal closest
match scheme turns out to be pretty easy too. The image_downsize
filter lets you intercept calls to image_downsize, which is called
when WordPress is trying to find the closest match. If you then have
it return the filename with the image dimensions in it, then that will
get used in the call, making it redirect to your image resize code as
above, and voila, on-the-fly resizing of images, with caching.

-Otto

From elfin at elfden.co.uk  Tue Aug 17 15:54:19 2010
From: elfin at elfden.co.uk (Rich Pedley)
Date: Tue, 17 Aug 2010 16:54:19 +0100
Subject: [wp-hackers] Twenty Ten theme issue?
In-Reply-To: <AANLkTi=oZRj60TfCEB4jopf0xV05ZBNFOR++GBRT4Xr0@mail.gmail.com>
References: <AANLkTikxCq9JSGa5VpQNWi4u0KJzowBcJkXEBa___v5-@mail.gmail.com>	<AANLkTimo8-KivPMFJkUL_msfi57fer9-w8BVGWW_0rNW@mail.gmail.com>	<AANLkTiktinh3wQ5r00dee8kHzBKqD_K=X7wNi5XwooLi@mail.gmail.com>	<AANLkTim8a_8Cof9xZ1A8Ff3DdDm98Yqwmc4a+_WMh79d@mail.gmail.com>	<CD47955B7E065D48AB5CF226C2ED75C02E3386@tbs-sbs01.TBS.local>
	<AANLkTi=oZRj60TfCEB4jopf0xV05ZBNFOR++GBRT4Xr0@mail.gmail.com>
Message-ID: <4C6AB0AB.5050301@elfden.co.uk>

On 17/08/2010 16:43, Otto wrote:
> Actually, WordPress does this pretty effectively.
>
[snip]

(I actually like that suggestion).

but not everyone will have the infinite space that all these extra 
stored image might take up.

Maybe the resizing feature should be coupled with what you suggest, 
but be turned off by default. The user(admin only?) would then have to 
enable it and be made aware of the implications.

hmm that is sounding more like plugin territory.

Rich


From bulk at thecodecave.com  Tue Aug 17 16:48:35 2010
From: bulk at thecodecave.com (Brian Layman)
Date: Tue, 17 Aug 2010 12:48:35 -0400
Subject: [wp-hackers] Amount of estimated developer-hours in Wordpress?
In-Reply-To: <915E9C1C-4EB4-455E-8306-312FFE5C0234@ftwr.co.uk>
References: <AANLkTinOTyZFYzhDTubdJH3sYs9C45hc6XSOWBo-2+cg@mail.gmail.com>	<927737DD-50B3-4456-A993-B20460AE14DD@thisismyurl.com>	<23286AE0-70CE-4F33-A569-F9C424BE00C4@cefm.ca>	<AANLkTi=KMcCrJZGRE66=KOOe4reJsb2R236sxUSN=ZJe@mail.gmail.com>
	<915E9C1C-4EB4-455E-8306-312FFE5C0234@ftwr.co.uk>
Message-ID: <003401cb3e2c$0933bd60$1b9b3820$@com>

>On 16 Aug 2010, at 20:46, Arlen Beiler wrote:

>> 34 Person years means it would take 34 people one year or one person
>> 34 years to do that. Correct?
> Niether.
>
> Brooks's Law would negate the idea that 34 people could reproduce from
scratch in a year
>
> Its also likely that one person would reproduce in less than 34 years.

Actually, I think at least two people would have to involved in that
particular project...
______________________________________________
Brian Layman
eHermits, Inc.
TheCodeCave.com?/?eHermitsInc.com?/?twitter.com/BrianLayman /
facebook.com/eHermit


From nanobar at gmail.com  Tue Aug 17 16:49:48 2010
From: nanobar at gmail.com (Lance Willett)
Date: Tue, 17 Aug 2010 11:49:48 -0500
Subject: [wp-hackers] Twenty Ten theme issue?
In-Reply-To: <AANLkTim8a_8Cof9xZ1A8Ff3DdDm98Yqwmc4a+_WMh79d@mail.gmail.com>
References: <AANLkTikxCq9JSGa5VpQNWi4u0KJzowBcJkXEBa___v5-@mail.gmail.com>
	<AANLkTimo8-KivPMFJkUL_msfi57fer9-w8BVGWW_0rNW@mail.gmail.com>
	<AANLkTiktinh3wQ5r00dee8kHzBKqD_K=X7wNi5XwooLi@mail.gmail.com>
	<AANLkTim8a_8Cof9xZ1A8Ff3DdDm98Yqwmc4a+_WMh79d@mail.gmail.com>
Message-ID: <AANLkTi=LsbiDd=+50BYKwwNXniSnQpd71dMJFSy7fYKe@mail.gmail.com>

>> We're not talking about all images, though, right? Only full-size
>> images?
>
> No, that's not what we're talking about at all.
>
> We're talking about images that have been resized using the in-post resizer.

Got it, I apologize for the long tangent, then. :)

We'll be implementing something like an image size filter on WP.com
soon so we can remove the CSS rules for max-width, and auto- height
and width except for in true fluid-width themes.

From dan at jallits.com  Tue Aug 17 16:56:47 2010
From: dan at jallits.com (Mr. Daniel Craig Jallits)
Date: Tue, 17 Aug 2010 11:56:47 -0500
Subject: [wp-hackers] Amount of estimated developer-hours in Wordpress?
In-Reply-To: <003401cb3e2c$0933bd60$1b9b3820$@com>
References: <AANLkTinOTyZFYzhDTubdJH3sYs9C45hc6XSOWBo-2+cg@mail.gmail.com>
	<927737DD-50B3-4456-A993-B20460AE14DD@thisismyurl.com>
	<23286AE0-70CE-4F33-A569-F9C424BE00C4@cefm.ca>
	<AANLkTi=KMcCrJZGRE66=KOOe4reJsb2R236sxUSN=ZJe@mail.gmail.com>
	<915E9C1C-4EB4-455E-8306-312FFE5C0234@ftwr.co.uk>
	<003401cb3e2c$0933bd60$1b9b3820$@com>
Message-ID: <8DF98FAB-FFCF-433B-82B2-77A7BD1C331E@jallits.com>

Out of curiosity... Does the 10 lines of code/day account for planning time?

Sent from my iPhone

On Aug 17, 2010, at 11:48 AM, "Brian Layman" <bulk at thecodecave.com> wrote:

>> On 16 Aug 2010, at 20:46, Arlen Beiler wrote:
> 
>>> 34 Person years means it would take 34 people one year or one person 34 years to do that. 
>> 
>> 

From anca at anca.tv  Tue Aug 17 17:05:33 2010
From: anca at anca.tv (Anca Mosoiu)
Date: Tue, 17 Aug 2010 10:05:33 -0700
Subject: [wp-hackers] Amount of estimated developer-hours in WordPress
Message-ID: <976AF87D-B2FC-4B8D-B906-75DFDC782195@anca.tv>

This was a pretty neat calculation, and I enjoyed checking out the referenced articles (especially the 10 lines of code one).

But...

$2.4 million seems pretty low for a commercially-developed CMS, especially one as full-featured as WordPress is.

The cost calculation doesn't include any scoping or design time, which also needs to be factored into product costs.   It doesn't include the cost for project management or all those other things that go into the 10 lines of code a day metric.  Or any overhead cost.

Also your developer costs seem low if you are looking to hire "elite" programmers - who make a lot more than $42K/year Canadian, as far as I can tell from sampling my own and my friends' programmer salaries.

Nor does it include marketing costs, which would be incurred if you wanted to design a product that's as widely-used as WordPress is.

If you are a big company trying to develop a CMS because you don't trust ones that were not created in-house, your costs will go up even more as your team is pulled hither and yon by management, support efforts for ongoing systems, structural reorganizations, and hatred from the users, who will have to change whatever inefficient system they were using before for one that's buggy and won't work right for at least 2-3 years.

Cheers,

Anca.

-=-=-=-=-=-
Anca Mosoiu
anca at anca.tv





From adriaan at wewillraakyou.com  Tue Aug 17 17:36:07 2010
From: adriaan at wewillraakyou.com (Adriaan Pelzer)
Date: Tue, 17 Aug 2010 18:36:07 +0100
Subject: [wp-hackers] Amount of estimated developer-hours in WordPress
In-Reply-To: <976AF87D-B2FC-4B8D-B906-75DFDC782195@anca.tv>
References: <976AF87D-B2FC-4B8D-B906-75DFDC782195@anca.tv>
Message-ID: <AANLkTinQfUokYtWANgiH+SYJ9OBM1HUO2X+xnLwtA0C-@mail.gmail.com>

The case just gets stronger and stronger for platform as opposed to bespoke!

We haven't even started touching upon the subject of documentation, plugins,
themes ... this point is well proven, I think.

Adriaan Pelzer
RAAK Ltd
http://www.wewillraakyou.com
+4478 7978 1743



On Tue, Aug 17, 2010 at 6:05 PM, Anca Mosoiu <anca at anca.tv> wrote:

> This was a pretty neat calculation, and I enjoyed checking out the
> referenced articles (especially the 10 lines of code one).
>
> But...
>
> $2.4 million seems pretty low for a commercially-developed CMS, especially
> one as full-featured as WordPress is.
>
> The cost calculation doesn't include any scoping or design time, which also
> needs to be factored into product costs.   It doesn't include the cost for
> project management or all those other things that go into the 10 lines of
> code a day metric.  Or any overhead cost.
>
> Also your developer costs seem low if you are looking to hire "elite"
> programmers - who make a lot more than $42K/year Canadian, as far as I can
> tell from sampling my own and my friends' programmer salaries.
>
> Nor does it include marketing costs, which would be incurred if you wanted
> to design a product that's as widely-used as WordPress is.
>
> If you are a big company trying to develop a CMS because you don't trust
> ones that were not created in-house, your costs will go up even more as your
> team is pulled hither and yon by management, support efforts for ongoing
> systems, structural reorganizations, and hatred from the users, who will
> have to change whatever inefficient system they were using before for one
> that's buggy and won't work right for at least 2-3 years.
>
> Cheers,
>
> Anca.
>
> -=-=-=-=-=-
> Anca Mosoiu
> anca at anca.tv
>
>
>
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From chris at clwill.com  Tue Aug 17 18:27:31 2010
From: chris at clwill.com (Chris Williams)
Date: Tue, 17 Aug 2010 14:27:31 -0400
Subject: [wp-hackers] Amount of estimated developer-hours in Wordpress?
In-Reply-To: <8DF98FAB-FFCF-433B-82B2-77A7BD1C331E@jallits.com>
Message-ID: <C89022A3.12569%chris@clwill.com>

Every developer on the planet should read The Mythical Man-Month by Fredrick Brooks.  It's not a huge book, and is still in print.  It chronicles the development of the IBM 360 back in the 60s and is a great read about developing code, and the perils of just throwing people or money at a problem.  Yes, the 10 lines of code per day included planning, debugging, revisions, etc.  It was essentially the end product divided by the number of person/days invested.

________________________________
From: "Mr. Daniel Craig Jallits" <dan at jallits.com>
Reply-To: <wp-hackers at lists.automattic.com>
Date: Tue, 17 Aug 2010 12:56:47 -0400
To: <wp-hackers at lists.automattic.com>
Subject: Re: [wp-hackers] Amount of estimated developer-hours in Wordpress?

Out of curiosity... Does the 10 lines of code/day account for planning time?

From mikeschinkel at newclarity.net  Tue Aug 17 18:50:24 2010
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Tue, 17 Aug 2010 14:50:24 -0400
Subject: [wp-hackers] Amount of estimated developer-hours in WordPress
In-Reply-To: <AANLkTinQfUokYtWANgiH+SYJ9OBM1HUO2X+xnLwtA0C-@mail.gmail.com>
References: <976AF87D-B2FC-4B8D-B906-75DFDC782195@anca.tv>
	<AANLkTinQfUokYtWANgiH+SYJ9OBM1HUO2X+xnLwtA0C-@mail.gmail.com>
Message-ID: <5FE1A80B-420C-4A92-BBE2-4CE4CB93FF04@newclarity.net>

On Aug 17, 2010, at 1:36 PM, Adriaan Pelzer wrote:
> The case just gets stronger and stronger for platform as opposed to bespoke!
> 
> We haven't even started touching upon the subject of documentation, plugins,
> themes ... this point is well proven, I think.
> 
> Adriaan Pelzer
> RAAK Ltd
> http://www.wewillraakyou.com
> +4478 7978 1743


Often the decision is completely emotional, based on existing bias, hearsay and what their friend or developer likes.  But then you already knew that...

-Mike

From mailapera at gmail.com  Tue Aug 17 19:20:27 2010
From: mailapera at gmail.com (mailapera)
Date: Tue, 17 Aug 2010 21:20:27 +0200
Subject: [wp-hackers] Gather custom field value of preferred posts
Message-ID: <AANLkTikE-Pob-m74e3QPHEy=aWzic1AMj4o4kfkyQkfj@mail.gmail.com>

Hi,
I am in dire straits trying to gather the meta value of users' favorite
posts. To gather the posts per cookie session I am using the
wp-favorite-posts plugin.
Or do you think there is a plugin to do this already? I searched quite a lot
to no avail.
Thanks

From dougal at gunters.org  Tue Aug 17 19:26:10 2010
From: dougal at gunters.org (Dougal Campbell)
Date: Tue, 17 Aug 2010 15:26:10 -0400
Subject: [wp-hackers] Amount of estimated developer-hours in Wordpress?
In-Reply-To: <AANLkTi=KMcCrJZGRE66=KOOe4reJsb2R236sxUSN=ZJe@mail.gmail.com>
References: <AANLkTinOTyZFYzhDTubdJH3sYs9C45hc6XSOWBo-2+cg@mail.gmail.com>	<927737DD-50B3-4456-A993-B20460AE14DD@thisismyurl.com>	<23286AE0-70CE-4F33-A569-F9C424BE00C4@cefm.ca>
	<AANLkTi=KMcCrJZGRE66=KOOe4reJsb2R236sxUSN=ZJe@mail.gmail.com>
Message-ID: <4C6AE252.90302@gunters.org>

  On Aug 16 2010 3:46 PM, Arlen Beiler wrote:
> 34 Person years means it would take 34 people one year or one person
> 34 years to do that. Correct?

I used to have a wise manager who was fond of pointing out that just 
because 1 woman can have a baby in 9 months, it doesn't mean that 9 
women can have a baby in 1 month. (he also liked to observe that, "when 
the only tool you have is a chainsaw, every problem looks like a zombie.")

As the size of a development team goes up, efficiency often goes down. 
Or more concisely, development productivity does not (typically) scale 
linearly. This is part of the reason that small-team methodologies have 
been pretty popular for a while. That's not to say that a large team 
can't get things done. But often the best way to manage large teams is 
to first plan things out meticulously, then break into smaller teams to 
tackle orthogonal parts of the project.

-- 
Dougal Campbell <dougal at gunters.org>
http://dougal.gunters.org/
http://twitter.com/dougal
http://twitual.com/

From piemanek at gmail.com  Tue Aug 17 20:13:26 2010
From: piemanek at gmail.com (Simon Blackbourn)
Date: Tue, 17 Aug 2010 21:13:26 +0100
Subject: [wp-hackers] Amount of estimated developer-hours in Wordpress?
In-Reply-To: <AANLkTi=KMcCrJZGRE66=KOOe4reJsb2R236sxUSN=ZJe@mail.gmail.com>
References: <AANLkTinOTyZFYzhDTubdJH3sYs9C45hc6XSOWBo-2+cg@mail.gmail.com>
	<927737DD-50B3-4456-A993-B20460AE14DD@thisismyurl.com>
	<23286AE0-70CE-4F33-A569-F9C424BE00C4@cefm.ca>
	<AANLkTi=KMcCrJZGRE66=KOOe4reJsb2R236sxUSN=ZJe@mail.gmail.com>
Message-ID: <AANLkTinYnRBQ8oUuf1YfmvhmitqDHAxhKheDRbnRFQvi@mail.gmail.com>

> 34 Person years means it would take 34 people one year or one person
> 34 years to do that. Correct?
>
>
if i was that one person, my motivation would begin to affect my
productivity well before the 34 years was up, thus increasing the number of
years required, which would decrease my productivity even further, thereby
meaning it would take an infinite number of years to complete the project.

brooks's law on the other hand states that "adding manpower to a late
software project makes it later".

therefore whichever route you take the project will never be finished.

just thought i'd warn you :-)

From mikeschinkel at newclarity.net  Tue Aug 17 20:29:10 2010
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Tue, 17 Aug 2010 16:29:10 -0400
Subject: [wp-hackers] Amount of estimated developer-hours in Wordpress?
In-Reply-To: <4C6AE252.90302@gunters.org>
References: <AANLkTinOTyZFYzhDTubdJH3sYs9C45hc6XSOWBo-2+cg@mail.gmail.com>	<927737DD-50B3-4456-A993-B20460AE14DD@thisismyurl.com>	<23286AE0-70CE-4F33-A569-F9C424BE00C4@cefm.ca>
	<AANLkTi=KMcCrJZGRE66=KOOe4reJsb2R236sxUSN=ZJe@mail.gmail.com>
	<4C6AE252.90302@gunters.org>
Message-ID: <A556CF3A-6ABE-407F-9556-FEC1720744AE@newclarity.net>

On Aug 17, 2010, at 3:26 PM, Dougal Campbell wrote:
> On Aug 16 2010 3:46 PM, Arlen Beiler wrote:
>> 34 Person years means it would take 34 people one year or one person
>> 34 years to do that. Correct?
> 
> I used to have a wise manager who was fond of pointing out that just because 1 woman can have a baby in 9 months, it doesn't mean that 9 women can have a baby in 1 month. (he also liked to observe that, "when the only tool you have is a chainsaw, every problem looks like a zombie.")
> 
> As the size of a development team goes up, efficiency often goes down. Or more concisely, development productivity does not (typically) scale linearly. This is part of the reason that small-team methodologies have been pretty popular for a while. That's not to say that a large team can't get things done. But often the best way to manage large teams is to first plan things out meticulously, then break into smaller teams to tackle orthogonal parts of the project.

You are (he was) just quoting "The Mythical Man Month"...  :-)

-Mike


From mailapera at gmail.com  Wed Aug 18 01:42:16 2010
From: mailapera at gmail.com (mailapera)
Date: Wed, 18 Aug 2010 03:42:16 +0200
Subject: [wp-hackers] Get meta value with foreach
Message-ID: <AANLkTim7VfUJnC9ngYgubMdU83zaYbD=N0yFq6E7+3n3@mail.gmail.com>

I get this function to get a custom meta value for each post called by the
function, but for some reason the only output is the word "array" for each
post instance.

foreach ($my_posts as $post_id) {
            $p = get_post_meta($post_id, 'email', false);
            echo "$p";
        }

I don't get it

From paul at codehooligans.com  Wed Aug 18 01:46:19 2010
From: paul at codehooligans.com (Paul)
Date: Tue, 17 Aug 2010 21:46:19 -0400
Subject: [wp-hackers] Get meta value with foreach
In-Reply-To: <AANLkTim7VfUJnC9ngYgubMdU83zaYbD=N0yFq6E7+3n3@mail.gmail.com>
References: <AANLkTim7VfUJnC9ngYgubMdU83zaYbD=N0yFq6E7+3n3@mail.gmail.com>
Message-ID: <24170A7C-C882-4825-A4AD-DFE714A24D08@codehooligans.com>

Have you checked your parameters against the Codex? 

http://codex.wordpress.org/Function_Reference/get_post_meta

(boolean) (optional) If set to true then the function will return a single result, as a string. If false, or not set, then the function returns an array of the custom fields. This is not intuitive. For example, if you fetch a serialized array with this method you want $single to be true to actually get an unserialized array back. If you pass in false, or leave it out, you will have an array of one, and the value at index 0 will be the serialized string.
Default: false
You are passing false for the third parameter. Maybe you should be passing true to return a non-array.

P-


On Aug 17, 2010, at 9:42 PM, mailapera wrote:

> I get this function to get a custom meta value for each post called by the
> function, but for some reason the only output is the word "array" for each
> post instance.
> 
> foreach ($my_posts as $post_id) {
>            $p = get_post_meta($post_id, 'email', false);
>            echo "$p";
>        }
> 
> I don't get it
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers


From jmiloj at gmail.com  Wed Aug 18 01:47:42 2010
From: jmiloj at gmail.com (Jerry Johnson)
Date: Tue, 17 Aug 2010 21:47:42 -0400
Subject: [wp-hackers] Get meta value with foreach
In-Reply-To: <AANLkTim7VfUJnC9ngYgubMdU83zaYbD=N0yFq6E7+3n3@mail.gmail.com>
References: <AANLkTim7VfUJnC9ngYgubMdU83zaYbD=N0yFq6E7+3n3@mail.gmail.com>
Message-ID: <AANLkTikbzb=6H0T_GxYpqPsEKW=0u2NjHKeUb+-u=AqE@mail.gmail.com>

the 3rd parameter in your call, the false, tells the get_post_meta function
to return as many email metafields as it can find for that given post.

it returns these potential multiple values as an array.

if you only want to get one value, change the false to true.

if you want to handle the potential for multiple values, you will need to
treat $p as an array.

http://codex.wordpress.org/Function_Reference/get_post_meta

hth
Jerry Milo Johnson

On Tue, Aug 17, 2010 at 9:42 PM, mailapera <mailapera at gmail.com> wrote:

> I get this function to get a custom meta value for each post called by the
> function, but for some reason the only output is the word "array" for each
> post instance.
>
> foreach ($my_posts as $post_id) {
>            $p = get_post_meta($post_id, 'email', false);
>            echo "$p";
>        }
>
> I don't get it
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From mailapera at gmail.com  Wed Aug 18 01:54:27 2010
From: mailapera at gmail.com (mailapera)
Date: Wed, 18 Aug 2010 03:54:27 +0200
Subject: [wp-hackers] Get meta value with foreach
In-Reply-To: <AANLkTikbzb=6H0T_GxYpqPsEKW=0u2NjHKeUb+-u=AqE@mail.gmail.com>
References: <AANLkTim7VfUJnC9ngYgubMdU83zaYbD=N0yFq6E7+3n3@mail.gmail.com>
	<AANLkTikbzb=6H0T_GxYpqPsEKW=0u2NjHKeUb+-u=AqE@mail.gmail.com>
Message-ID: <AANLkTimcK0ryh-=+RPhu7T06JXf1h4XLKpruj2H6vH9X@mail.gmail.com>

I can't believe it! I am an ass! I have been struggling over this for hours
and I was just overlooking that bit.
Thank you both Jerry and Paul


On Wed, Aug 18, 2010 at 3:47 AM, Jerry Johnson <jmiloj at gmail.com> wrote:

> the 3rd parameter in your call, the false, tells the get_post_meta function
> to return as many email metafields as it can find for that given post.
>
> it returns these potential multiple values as an array.
>
> if you only want to get one value, change the false to true.
>
> if you want to handle the potential for multiple values, you will need to
> treat $p as an array.
>
> http://codex.wordpress.org/Function_Reference/get_post_meta
>
> hth
> Jerry Milo Johnson
>
> On Tue, Aug 17, 2010 at 9:42 PM, mailapera <mailapera at gmail.com> wrote:
>
> > I get this function to get a custom meta value for each post called by
> the
> > function, but for some reason the only output is the word "array" for
> each
> > post instance.
> >
> > foreach ($my_posts as $post_id) {
> >            $p = get_post_meta($post_id, 'email', false);
> >            echo "$p";
> >        }
> >
> > I don't get it
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers at lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> >
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From mailapera at gmail.com  Wed Aug 18 01:54:27 2010
From: mailapera at gmail.com (mailapera)
Date: Wed, 18 Aug 2010 03:54:27 +0200
Subject: [wp-hackers] Get meta value with foreach
In-Reply-To: <AANLkTikbzb=6H0T_GxYpqPsEKW=0u2NjHKeUb+-u=AqE@mail.gmail.com>
References: <AANLkTim7VfUJnC9ngYgubMdU83zaYbD=N0yFq6E7+3n3@mail.gmail.com>
	<AANLkTikbzb=6H0T_GxYpqPsEKW=0u2NjHKeUb+-u=AqE@mail.gmail.com>
Message-ID: <AANLkTimcK0ryh-=+RPhu7T06JXf1h4XLKpruj2H6vH9X@mail.gmail.com>

I can't believe it! I am an ass! I have been struggling over this for hours
and I was just overlooking that bit.
Thank you both Jerry and Paul


On Wed, Aug 18, 2010 at 3:47 AM, Jerry Johnson <jmiloj at gmail.com> wrote:

> the 3rd parameter in your call, the false, tells the get_post_meta function
> to return as many email metafields as it can find for that given post.
>
> it returns these potential multiple values as an array.
>
> if you only want to get one value, change the false to true.
>
> if you want to handle the potential for multiple values, you will need to
> treat $p as an array.
>
> http://codex.wordpress.org/Function_Reference/get_post_meta
>
> hth
> Jerry Milo Johnson
>
> On Tue, Aug 17, 2010 at 9:42 PM, mailapera <mailapera at gmail.com> wrote:
>
> > I get this function to get a custom meta value for each post called by
> the
> > function, but for some reason the only output is the word "array" for
> each
> > post instance.
> >
> > foreach ($my_posts as $post_id) {
> >            $p = get_post_meta($post_id, 'email', false);
> >            echo "$p";
> >        }
> >
> > I don't get it
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers at lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> >
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From sansbacon at gmail.com  Wed Aug 18 02:51:22 2010
From: sansbacon at gmail.com (sansbacon)
Date: Tue, 17 Aug 2010 19:51:22 -0700 (PDT)
Subject: [wp-hackers] hide custom admin menu entries
Message-ID: <c74be6fd-2b52-49b2-8e7e-3d8327354d38@j8g2000yqd.googlegroups.com>

I am using the following code to hide a number of the admin menu items
from non-administrative users:

global $submenu, $menu;
$menuToHide = array(10, 15, 25, 59, 60, 65, 70, 75, 80);
foreach($menuToHide as $item) {
   unset($menu[$item]);
}

How do I get the index in $menu for third-party plugin menu entries,
in my case, Easy Post Types added a menu that I dont' want most users
to see.

Thanks!

Eric

From lox.dev at knc.nc  Wed Aug 18 03:34:48 2010
From: lox.dev at knc.nc (Lox)
Date: Wed, 18 Aug 2010 14:34:48 +1100
Subject: [wp-hackers] Custom search, how ?
Message-ID: <AANLkTim=ufNe3=bT_AgNEapuZXS7hh4_HtRi=9syTVn8@mail.gmail.com>

Hello,

Since a couple of months, I have learned a lot about Wordpress dev, but it
seems I missed something....

I have to make a search engine for a custom post_type. I use a short-code so
the search engine can appear in any page.

The search engine short-code outputs a form, and an empty div (intended for
results). So when I submit my form, my short-code catches it like this:

if(isset($_GET['fs'])) {

    $results = $this->search();

}

Because it is like it and can't be done differently, I have to use a custom
database table with a lot of additional informations concerning the
post_type, the join can be done using a custom meta field.

I am currently trying to do like so:

$args = array ('post_type' => 'formation', 'fs'=>'1',
'custom_field_in_custom_table" = 'value');
$posts = get_posts($args);

Then to add a join I use the posts_join filter witch doesn't seems to being
called at all.

How am I supposed to do that the wordpress way?

-- 
Lox
lox.dev at knc.nc

From mda at blogwaffe.com  Wed Aug 18 03:44:00 2010
From: mda at blogwaffe.com (Michael D Adams)
Date: Tue, 17 Aug 2010 20:44:00 -0700
Subject: [wp-hackers] Custom search, how ?
In-Reply-To: <AANLkTim=ufNe3=bT_AgNEapuZXS7hh4_HtRi=9syTVn8@mail.gmail.com>
References: <AANLkTim=ufNe3=bT_AgNEapuZXS7hh4_HtRi=9syTVn8@mail.gmail.com>
Message-ID: <AANLkTikwLszAc0NxEByURf+x0V4WvodtcQ8BXo30A5dD@mail.gmail.com>

On Tue, Aug 17, 2010 at 8:34 PM, Lox <lox.dev at knc.nc> wrote:
> I am currently trying to do like so:
>
> $args = array ('post_type' => 'formation', 'fs'=>'1',
> 'custom_field_in_custom_table" = 'value');
> $posts = get_posts($args);
>
> Then to add a join I use the posts_join filter witch doesn't seems to being
> called at all.

get_posts() doesn't use the posts_join filter by default (for backward
compatibility).

You can make it use posts_join by setting suppress_filters => false in
your $args.

Or you could use the WP_Query class directly.

Mike
--mdawaffe

From lox.dev at knc.nc  Wed Aug 18 04:45:54 2010
From: lox.dev at knc.nc (Lox)
Date: Wed, 18 Aug 2010 15:45:54 +1100
Subject: [wp-hackers] Custom search, how ?
In-Reply-To: <AANLkTikwLszAc0NxEByURf+x0V4WvodtcQ8BXo30A5dD@mail.gmail.com>
References: <AANLkTim=ufNe3=bT_AgNEapuZXS7hh4_HtRi=9syTVn8@mail.gmail.com>
	<AANLkTikwLszAc0NxEByURf+x0V4WvodtcQ8BXo30A5dD@mail.gmail.com>
Message-ID: <AANLkTimnxK-Vx=+oknzYr=v8bo7o5rCmfxRF1iiavkvZ@mail.gmail.com>

2010/8/18 Michael D Adams <mda at blogwaffe.com>

>
> Or you could use the WP_Query class directly.
>

Hi Mike,

Thanks figured it myself. It works with WP_Query, I call it with a custom
query var that I can check for in posts_join (is the way to do?)

How can I JOIN with a custom table ON a custom meta field ?

-- 
Lox
lox.dev at knc.nc

From frank at bueltge.de  Wed Aug 18 05:32:48 2010
From: frank at bueltge.de (Frank Bueltge)
Date: Wed, 18 Aug 2010 07:32:48 +0200
Subject: [wp-hackers] hide custom admin menu entries
In-Reply-To: <c74be6fd-2b52-49b2-8e7e-3d8327354d38@j8g2000yqd.googlegroups.com>
References: <c74be6fd-2b52-49b2-8e7e-3d8327354d38@j8g2000yqd.googlegroups.com>
Message-ID: <AANLkTikHkPU8Z+RGrHJCwndT=oen=Perj2rX=VXHAzyz@mail.gmail.com>

Maybe see the plugin Adminimize

Am 18.08.2010 04:51 schrieb "sansbacon" <sansbacon at gmail.com>:

I am using the following code to hide a number of the admin menu items
from non-administrative users:

global $submenu, $menu;
$menuToHide = array(10, 15, 25, 59, 60, 65, 70, 75, 80);
foreach($menuToHide as $item) {
  unset($menu[$item]);
}

How do I get the index in $menu for third-party plugin menu entries,
in my case, Easy Post Types added a menu that I dont' want most users
to see.

Thanks!

Eric
_______________________________________________
wp-hackers mailing list
wp-hackers at lists.automattic.com
http://lists.automattic.com/mailman/listinfo/wp-hackers

From mikeschinkel at newclarity.net  Wed Aug 18 05:59:38 2010
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Wed, 18 Aug 2010 01:59:38 -0400
Subject: [wp-hackers] hide custom admin menu entries
In-Reply-To: <c74be6fd-2b52-49b2-8e7e-3d8327354d38@j8g2000yqd.googlegroups.com>
References: <c74be6fd-2b52-49b2-8e7e-3d8327354d38@j8g2000yqd.googlegroups.com>
Message-ID: <67FD6962-2BDF-45D6-B29B-7C11BD829F5F@newclarity.net>

On Aug 17, 2010, at 10:51 PM, sansbacon wrote:
> I am using the following code to hide a number of the admin menu items
> from non-administrative users:
> 
> global $submenu, $menu;
> $menuToHide = array(10, 15, 25, 59, 60, 65, 70, 75, 80);
> foreach($menuToHide as $item) {
>   unset($menu[$item]);
> }
> 
> How do I get the index in $menu for third-party plugin menu entries,
> in my case, Easy Post Types added a menu that I dont' want most users
> to see.

Loop thru $GLOBALS['menu'] and look for it?  (But I'm sure the answer you need isn't that easy...)

-Mike

From frank at bueltge.de  Wed Aug 18 07:03:45 2010
From: frank at bueltge.de (Frank Bueltge)
Date: Wed, 18 Aug 2010 09:03:45 +0200
Subject: [wp-hackers] hide custom admin menu entries
In-Reply-To: <67FD6962-2BDF-45D6-B29B-7C11BD829F5F@newclarity.net>
References: <c74be6fd-2b52-49b2-8e7e-3d8327354d38@j8g2000yqd.googlegroups.com>
	<67FD6962-2BDF-45D6-B29B-7C11BD829F5F@newclarity.net>
Message-ID: <AANLkTikhMi9QhgV+UFJ7T1GShV8egBdPhwB6Pf8rPi0J@mail.gmail.com>

WP have 3 vars for the different menus. The Plugin Adminimize list this and
let you hide areas and menu-entries for different user-roles.

On Wed, Aug 18, 2010 at 7:59 AM, Mike Schinkel
<mikeschinkel at newclarity.net>wrote:

> On Aug 17, 2010, at 10:51 PM, sansbacon wrote:
> > I am using the following code to hide a number of the admin menu items
> > from non-administrative users:
> >
> > global $submenu, $menu;
> > $menuToHide = array(10, 15, 25, 59, 60, 65, 70, 75, 80);
> > foreach($menuToHide as $item) {
> >   unset($menu[$item]);
> > }
> >
> > How do I get the index in $menu for third-party plugin menu entries,
> > in my case, Easy Post Types added a menu that I dont' want most users
> > to see.
>
> Loop thru $GLOBALS['menu'] and look for it?  (But I'm sure the answer you
> need isn't that easy...)
>
> -Mike
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From adam at littlefyr.com  Wed Aug 18 07:29:51 2010
From: adam at littlefyr.com (Adam van den Hoven)
Date: Wed, 18 Aug 2010 00:29:51 -0700
Subject: [wp-hackers] Simplifying media-upload.php reuse in custom metaboxes
Message-ID: <AANLkTimJ6kjGf2YRPB4KZLqXiPfrkf-CZseqkMEEfgLi@mail.gmail.com>

Hey guys,

I've been hacking around trying to get the media library to work well with
custom meta boxes. Specifically, I want to pass modify the form fields that
show up for the media items to only provide the size selectors and to only
allow sending the URL for the chosen size to a piece of javascript that will
update the meta box accordingly.

To this end, I've made the following change in wp-admin/includes/media.php

1302,1303d1301
<   $form_fields = apply_filters('media_upload_media_item_form_fields',
$form_fields);
<

I'm terrible at picking good names but basically I want a filter that lets
me manipulate the field items for each before it gets written out. I can
then add arbitrary parameters to the query string and get it to do what I
want.

Initially I tried defining get_media_item in my functions.php but PHP
complained about redefining the function (I'm not a PHP guy), so I modified
the core function. Clearly not going to survive the next incremental update.


Is there a more robust way to make this change or do I need to submit this
as a patch?

Thanks!
Adam

From m.websoft at gmail.com  Wed Aug 18 07:58:58 2010
From: m.websoft at gmail.com (mohammad aghanabi)
Date: Wed, 18 Aug 2010 12:28:58 +0430
Subject: [wp-hackers] if it is main page !
Message-ID: <AANLkTinEh7xh4Q6CZ-Z6sWh=gO9u26vSDT7SttK5qKXi@mail.gmail.com>

hi,
I'm going to show a particular section of sidebar just in main page,
i know there is is_home function but it's not my goal and this will go
to show that part in every other pages of wordpress too.

i wanna know if there is a function to do such a thing.
thanks in advance

From wp at andrewnacin.com  Wed Aug 18 08:04:46 2010
From: wp at andrewnacin.com (Andrew Nacin)
Date: Wed, 18 Aug 2010 04:04:46 -0400
Subject: [wp-hackers] Simplifying media-upload.php reuse in custom
	metaboxes
In-Reply-To: <AANLkTimJ6kjGf2YRPB4KZLqXiPfrkf-CZseqkMEEfgLi@mail.gmail.com>
References: <AANLkTimJ6kjGf2YRPB4KZLqXiPfrkf-CZseqkMEEfgLi@mail.gmail.com>
Message-ID: <AANLkTimhZLNpw35x4vazMeWMMuPX33HbytDVaNjcKOdK@mail.gmail.com>

On Wed, Aug 18, 2010 at 3:29 AM, Adam van den Hoven <adam at littlefyr.com>wrote:

> Hey guys,
>
> I've been hacking around trying to get the media library to work well with
> custom meta boxes. Specifically, I want to pass modify the form fields that
> show up for the media items to only provide the size selectors and to only
> allow sending the URL for the chosen size to a piece of javascript that
> will
> update the meta box accordingly.
>
> To this end, I've made the following change in wp-admin/includes/media.php
>
> 1302,1303d1301
> <   $form_fields = apply_filters('media_upload_media_item_form_fields',
> $form_fields);
> <
>
> I'm terrible at picking good names but basically I want a filter that lets
> me manipulate the field items for each before it gets written out. I can
> then add arbitrary parameters to the query string and get it to do what I
> want.
>
> Initially I tried defining get_media_item in my functions.php but PHP
> complained about redefining the function (I'm not a PHP guy), so I modified
> the core function. Clearly not going to survive the next incremental
> update.
>
>
> Is there a more robust way to make this change or do I need to submit this
> as a patch?
>

In get_media_item(), $form_fields gets set like this:

$form_fields = get_attachment_fields_to_edit( $post, $errors );

In get_attachment_fields_to_edit(), you'll see a filter designed to
modify/add fields.

From prodevstudio at gmail.com  Wed Aug 18 10:14:55 2010
From: prodevstudio at gmail.com (ProDevStudio)
Date: Wed, 18 Aug 2010 11:14:55 +0100
Subject: [wp-hackers] Amount of estimated developer-hours in Wordpress?
In-Reply-To: <A556CF3A-6ABE-407F-9556-FEC1720744AE@newclarity.net>
References: <AANLkTinOTyZFYzhDTubdJH3sYs9C45hc6XSOWBo-2+cg@mail.gmail.com>
	<927737DD-50B3-4456-A993-B20460AE14DD@thisismyurl.com>
	<23286AE0-70CE-4F33-A569-F9C424BE00C4@cefm.ca>
	<AANLkTi=KMcCrJZGRE66=KOOe4reJsb2R236sxUSN=ZJe@mail.gmail.com>
	<4C6AE252.90302@gunters.org>
	<A556CF3A-6ABE-407F-9556-FEC1720744AE@newclarity.net>
Message-ID: <AANLkTi=O3og+G+uvOsjFtuW_t_fGBijyqbyGK+KW0x6N@mail.gmail.com>

Hi All,

I thought I'd point out some data regarding this is already available.

Did you know ohloh.net tracking WordPress development and it is estimated to
take 34 person years at a cost of $1,873,419 ($55000/year).

See: Cocomo widget under -- https://www.ohloh.net/p/wordpress/widgets


Kind Regards,
Azizur Rahman

----
Do you need cost-effective web hosting solution and Domain name try
http://prodevstudio.com

Missed the last Friday Khutbah, try catchup a Khutbah on-line now at
http://fridaykhutbah.com


On Tue, Aug 17, 2010 at 9:29 PM, Mike Schinkel
<mikeschinkel at newclarity.net>wrote:

> On Aug 17, 2010, at 3:26 PM, Dougal Campbell wrote:
> > On Aug 16 2010 3:46 PM, Arlen Beiler wrote:
> >> 34 Person years means it would take 34 people one year or one person
> >> 34 years to do that. Correct?
> >
> > I used to have a wise manager who was fond of pointing out that just
> because 1 woman can have a baby in 9 months, it doesn't mean that 9 women
> can have a baby in 1 month. (he also liked to observe that, "when the only
> tool you have is a chainsaw, every problem looks like a zombie.")
> >
> > As the size of a development team goes up, efficiency often goes down. Or
> more concisely, development productivity does not (typically) scale
> linearly. This is part of the reason that small-team methodologies have been
> pretty popular for a while. That's not to say that a large team can't get
> things done. But often the best way to manage large teams is to first plan
> things out meticulously, then break into smaller teams to tackle orthogonal
> parts of the project.
>
> You are (he was) just quoting "The Mythical Man Month"...  :-)
>
> -Mike
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From scribu at gmail.com  Wed Aug 18 12:06:50 2010
From: scribu at gmail.com (scribu)
Date: Wed, 18 Aug 2010 15:06:50 +0300
Subject: [wp-hackers] Custom search, how ?
In-Reply-To: <AANLkTimnxK-Vx=+oknzYr=v8bo7o5rCmfxRF1iiavkvZ@mail.gmail.com>
References: <AANLkTim=ufNe3=bT_AgNEapuZXS7hh4_HtRi=9syTVn8@mail.gmail.com>
	<AANLkTikwLszAc0NxEByURf+x0V4WvodtcQ8BXo30A5dD@mail.gmail.com>
	<AANLkTimnxK-Vx=+oknzYr=v8bo7o5rCmfxRF1iiavkvZ@mail.gmail.com>
Message-ID: <AANLkTikfJmo374G+EN1ye0pnncu1TnhbTNiEaKGdUCU=@mail.gmail.com>

On Wed, Aug 18, 2010 at 7:45 AM, Lox <lox.dev at knc.nc> wrote:

> How can I JOIN with a custom table ON a custom meta field ?
>

You should join using the post ID directly.


-- 
http://scribu.net

From scribu at gmail.com  Wed Aug 18 12:08:01 2010
From: scribu at gmail.com (scribu)
Date: Wed, 18 Aug 2010 15:08:01 +0300
Subject: [wp-hackers] if it is main page !
In-Reply-To: <AANLkTinEh7xh4Q6CZ-Z6sWh=gO9u26vSDT7SttK5qKXi@mail.gmail.com>
References: <AANLkTinEh7xh4Q6CZ-Z6sWh=gO9u26vSDT7SttK5qKXi@mail.gmail.com>
Message-ID: <AANLkTi==Rnmb1fOYR97cFd2fhT4n3poqcOdhF5+ioCd5@mail.gmail.com>

On Wed, Aug 18, 2010 at 10:58 AM, mohammad aghanabi <m.websoft at gmail.com>wrote:

> hi,
> I'm going to show a particular section of sidebar just in main page,
> i know there is is_home function but it's not my goal and this will go
> to show that part in every other pages of wordpress too.
>
> i wanna know if there is a function to do such a thing.
> thanks in advance
>

is_front_page()

Next time: http://codex.wordpress.org/Conditional_Tags


-- 
http://scribu.net

From m.websoft at gmail.com  Wed Aug 18 12:10:26 2010
From: m.websoft at gmail.com (mohammad aghanabi)
Date: Wed, 18 Aug 2010 16:40:26 +0430
Subject: [wp-hackers] if it is main page !
In-Reply-To: <AANLkTi==Rnmb1fOYR97cFd2fhT4n3poqcOdhF5+ioCd5@mail.gmail.com>
References: <AANLkTinEh7xh4Q6CZ-Z6sWh=gO9u26vSDT7SttK5qKXi@mail.gmail.com>
	<AANLkTi==Rnmb1fOYR97cFd2fhT4n3poqcOdhF5+ioCd5@mail.gmail.com>
Message-ID: <AANLkTinJRG4OSLwHW68qfZH-eGOCyQ9vAcaOOttPsYZr@mail.gmail.com>

is_front_page() does the same thing as is_home will do.
i read that webpage ENTIRELY.

so another help is needed. :)

thanks for ur reply



On Wed, Aug 18, 2010 at 4:38 PM, scribu <scribu at gmail.com> wrote:

> On Wed, Aug 18, 2010 at 10:58 AM, mohammad aghanabi <m.websoft at gmail.com
> >wrote:
>
> > hi,
> > I'm going to show a particular section of sidebar just in main page,
> > i know there is is_home function but it's not my goal and this will go
> > to show that part in every other pages of wordpress too.
> >
> > i wanna know if there is a function to do such a thing.
> > thanks in advance
> >
>
> is_front_page()
>
> Next time: http://codex.wordpress.org/Conditional_Tags
>
>
> --
> http://scribu.net
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>



-- 
??? ????? ??? ?? ?????? ? ?? ??? ?? ?? ??? ????? ?? ??? ??? ?? ?? ?? ????? ?
?????? ?? ??????? ?? ?????

From lox.dev at knc.nc  Wed Aug 18 12:19:09 2010
From: lox.dev at knc.nc (Lox)
Date: Wed, 18 Aug 2010 23:19:09 +1100
Subject: [wp-hackers] Custom search, how ?
In-Reply-To: <AANLkTimnxK-Vx=+oknzYr=v8bo7o5rCmfxRF1iiavkvZ@mail.gmail.com>
References: <AANLkTim=ufNe3=bT_AgNEapuZXS7hh4_HtRi=9syTVn8@mail.gmail.com>
	<AANLkTikwLszAc0NxEByURf+x0V4WvodtcQ8BXo30A5dD@mail.gmail.com>
	<AANLkTimnxK-Vx=+oknzYr=v8bo7o5rCmfxRF1iiavkvZ@mail.gmail.com>
Message-ID: <AANLkTik7i66-GN=DA=G7AhfTkGNdfmpcJjXWyoM6Wnhi@mail.gmail.com>

>
> You should join using the post ID directly.
>

I can't actually because, the separated table is "read only" for me. It is a
separated excel database regularly dumped into mysql.

2010/8/18 Lox <lox.dev at knc.nc>

>
> Thanks figured it myself. It works with WP_Query, I call it with a custom
> query var that I can check for in posts_join (is the way to do?)
>
> How can I JOIN with a custom table ON a custom meta field ?


I have found the thing and I have done some progress:

I have a custom post-type "training" and a custom table "wp_training_infos".
For each training post type, I have a drop down box to select the matching
record in the "wp_training_infos" table. (I have no other way to link them
other than manually).
So each post_type object (like the one returned by get_post() ) is now
extended with the matching data from wp_training_infos. (I use posts_join
and posts_where when post_type matches "training")

Doing so, it is ok, I can do:

$wp_query('post_type=training&field_from_wp_training_info=value)
>

Witch is nice. But, now, I need to select training posts for an other meta,
withc would be:

$wp_query('post_type=training&field_from_wp_training_info=value&meta_key=my_meta&meta_value=the_value)


Witch fails because I already use a meta to join with my custom table.....

(1) here is my code http://paste2.org/p/954990

-- 
Lox
lox.dev at knc.nc

From Gavin.Pearce at 3seven9.com  Wed Aug 18 12:34:35 2010
From: Gavin.Pearce at 3seven9.com (Gavin Pearce)
Date: Wed, 18 Aug 2010 13:34:35 +0100
Subject: [wp-hackers] if it is main page !
In-Reply-To: <AANLkTinJRG4OSLwHW68qfZH-eGOCyQ9vAcaOOttPsYZr@mail.gmail.com>
References: <AANLkTinEh7xh4Q6CZ-Z6sWh=gO9u26vSDT7SttK5qKXi@mail.gmail.com><AANLkTi==Rnmb1fOYR97cFd2fhT4n3poqcOdhF5+ioCd5@mail.gmail.com>
	<AANLkTinJRG4OSLwHW68qfZH-eGOCyQ9vAcaOOttPsYZr@mail.gmail.com>
Message-ID: <CD47955B7E065D48AB5CF226C2ED75C02E339D@tbs-sbs01.TBS.local>

Hi,

No it doesn't, and no you didn't.   ;)

From the Codex:

is_home() - 
When the main blog page is being displayed. This is the page which is showing the time based blog content of your site, so if you've set a static Page for the Front Page (see below), then this will only be true on the Page which you set as the "Posts page" in Administration > Settings > Reading.

is_front_page()
When it is the front of the site displayed, whether it is posts or a Page. Returns true when the main blog page is being displayed and the 'Settings > Reading ->Front page displays' is set to "Your latest posts", or when 'Settings > Reading ->Front page displays' is set to "A static page" and the "Front Page" value is the current Page being displayed. Note: this tag was added at Version 2.5.

The key bit being "this will only be true on the Page which you set as the "Posts page" in Administration > Settings > Reading."

In simple language - is_home is the main POSTS page (if it isn't the homepage) | is_front_page is the front page / home page.

Like scribu said, for next time: http://codex.wordpress.org/Conditional_Tags      

Gav


-----Original Message-----
From: wp-hackers-bounces at lists.automattic.com [mailto:wp-hackers-bounces at lists.automattic.com] On Behalf Of mohammad aghanabi
Sent: 18 August 2010 13:10
To: wp-hackers at lists.automattic.com
Subject: Re: [wp-hackers] if it is main page !

is_front_page() does the same thing as is_home will do.
i read that webpage ENTIRELY.

so another help is needed. :)

thanks for ur reply



On Wed, Aug 18, 2010 at 4:38 PM, scribu <scribu at gmail.com> wrote:

> On Wed, Aug 18, 2010 at 10:58 AM, mohammad aghanabi <m.websoft at gmail.com
> >wrote:
>
> > hi,
> > I'm going to show a particular section of sidebar just in main page,
> > i know there is is_home function but it's not my goal and this will go
> > to show that part in every other pages of wordpress too.
> >
> > i wanna know if there is a function to do such a thing.
> > thanks in advance
> >
>
> is_front_page()
>
> Next time: http://codex.wordpress.org/Conditional_Tags
>
>
> --
> http://scribu.net
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>



-- 
??? ????? ??? ?? ?????? ? ?? ??? ?? ?? ??? ????? ?? ??? ??? ?? ?? ?? ????? ?
?????? ?? ??????? ?? ?????
_______________________________________________
wp-hackers mailing list
wp-hackers at lists.automattic.com
http://lists.automattic.com/mailman/listinfo/wp-hackers

From m.websoft at gmail.com  Wed Aug 18 12:38:42 2010
From: m.websoft at gmail.com (mohammad aghanabi)
Date: Wed, 18 Aug 2010 17:08:42 +0430
Subject: [wp-hackers] if it is main page !
In-Reply-To: <CD47955B7E065D48AB5CF226C2ED75C02E339D@tbs-sbs01.TBS.local>
References: <AANLkTinEh7xh4Q6CZ-Z6sWh=gO9u26vSDT7SttK5qKXi@mail.gmail.com>
	<AANLkTi==Rnmb1fOYR97cFd2fhT4n3poqcOdhF5+ioCd5@mail.gmail.com>
	<AANLkTinJRG4OSLwHW68qfZH-eGOCyQ9vAcaOOttPsYZr@mail.gmail.com>
	<CD47955B7E065D48AB5CF226C2ED75C02E339D@tbs-sbs01.TBS.local>
Message-ID: <AANLkTi==Prw5TvKu312QAP9-bGpaXZjO=z9BYDcVtwbP@mail.gmail.com>

No, see
is_home() works great but it will do the same job on others paginated posts.
e.g. ?paged=2 + ?paged=3 and ....
but i want to just display it in ?paged=1
i mean is_home() && the page number that is 1.
i just want to show my text in a page that it's index alone.

thanks

On Wed, Aug 18, 2010 at 5:04 PM, Gavin Pearce <Gavin.Pearce at 3seven9.com>wrote:

> Hi,
>
> No it doesn't, and no you didn't.   ;)
>
> From the Codex:
>
> is_home() -
> When the main blog page is being displayed. This is the page which is
> showing the time based blog content of your site, so if you've set a static
> Page for the Front Page (see below), then this will only be true on the Page
> which you set as the "Posts page" in Administration > Settings > Reading.
>
> is_front_page()
> When it is the front of the site displayed, whether it is posts or a Page.
> Returns true when the main blog page is being displayed and the 'Settings >
> Reading ->Front page displays' is set to "Your latest posts", or when
> 'Settings > Reading ->Front page displays' is set to "A static page" and the
> "Front Page" value is the current Page being displayed. Note: this tag was
> added at Version 2.5.
>
> The key bit being "this will only be true on the Page which you set as the
> "Posts page" in Administration > Settings > Reading."
>
> In simple language - is_home is the main POSTS page (if it isn't the
> homepage) | is_front_page is the front page / home page.
>
> Like scribu said, for next time:
> http://codex.wordpress.org/Conditional_Tags
>
> Gav
>
>
> -----Original Message-----
> From: wp-hackers-bounces at lists.automattic.com [mailto:
> wp-hackers-bounces at lists.automattic.com] On Behalf Of mohammad aghanabi
> Sent: 18 August 2010 13:10
> To: wp-hackers at lists.automattic.com
> Subject: Re: [wp-hackers] if it is main page !
>
> is_front_page() does the same thing as is_home will do.
> i read that webpage ENTIRELY.
>
> so another help is needed. :)
>
> thanks for ur reply
>
>
>
> On Wed, Aug 18, 2010 at 4:38 PM, scribu <scribu at gmail.com> wrote:
>
> > On Wed, Aug 18, 2010 at 10:58 AM, mohammad aghanabi <m.websoft at gmail.com
> > >wrote:
> >
> > > hi,
> > > I'm going to show a particular section of sidebar just in main page,
> > > i know there is is_home function but it's not my goal and this will go
> > > to show that part in every other pages of wordpress too.
> > >
> > > i wanna know if there is a function to do such a thing.
> > > thanks in advance
> > >
> >
> > is_front_page()
> >
> > Next time: http://codex.wordpress.org/Conditional_Tags
> >
> >
> > --
> > http://scribu.net
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers at lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> >
>
>
>
> --
> ??? ????? ??? ?? ?????? ? ?? ??? ?? ?? ??? ????? ?? ??? ??? ?? ?? ?? ?????
> ?
> ?????? ?? ??????? ?? ?????
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>



-- 
??? ????? ??? ?? ?????? ? ?? ??? ?? ?? ??? ????? ?? ??? ??? ?? ?? ?? ????? ?
?????? ?? ??????? ?? ?????

From Gavin.Pearce at 3seven9.com  Wed Aug 18 12:39:20 2010
From: Gavin.Pearce at 3seven9.com (Gavin Pearce)
Date: Wed, 18 Aug 2010 13:39:20 +0100
Subject: [wp-hackers] if it is main page !
In-Reply-To: <CD47955B7E065D48AB5CF226C2ED75C02E339D@tbs-sbs01.TBS.local>
References: <AANLkTinEh7xh4Q6CZ-Z6sWh=gO9u26vSDT7SttK5qKXi@mail.gmail.com><AANLkTi==Rnmb1fOYR97cFd2fhT4n3poqcOdhF5+ioCd5@mail.gmail.com><AANLkTinJRG4OSLwHW68qfZH-eGOCyQ9vAcaOOttPsYZr@mail.gmail.com>
	<CD47955B7E065D48AB5CF226C2ED75C02E339D@tbs-sbs01.TBS.local>
Message-ID: <CD47955B7E065D48AB5CF226C2ED75C02E339E@tbs-sbs01.TBS.local>

And just to prove their not the same - in the code:

is_front_page():
http://phpxref.com/xref/wordpress/wp-includes/query.php.source.html#l344

is_home():
http://phpxref.com/xref/wordpress/wp-includes/query.php.source.html#l363

Gav


-----Original Message-----
From: wp-hackers-bounces at lists.automattic.com [mailto:wp-hackers-bounces at lists.automattic.com] On Behalf Of Gavin Pearce
Sent: 18 August 2010 13:35
To: wp-hackers at lists.automattic.com
Subject: Re: [wp-hackers] if it is main page !

Hi,

No it doesn't, and no you didn't.   ;)

From the Codex:

is_home() - 
When the main blog page is being displayed. This is the page which is showing the time based blog content of your site, so if you've set a static Page for the Front Page (see below), then this will only be true on the Page which you set as the "Posts page" in Administration > Settings > Reading.

is_front_page()
When it is the front of the site displayed, whether it is posts or a Page. Returns true when the main blog page is being displayed and the 'Settings > Reading ->Front page displays' is set to "Your latest posts", or when 'Settings > Reading ->Front page displays' is set to "A static page" and the "Front Page" value is the current Page being displayed. Note: this tag was added at Version 2.5.

The key bit being "this will only be true on the Page which you set as the "Posts page" in Administration > Settings > Reading."

In simple language - is_home is the main POSTS page (if it isn't the homepage) | is_front_page is the front page / home page.

Like scribu said, for next time: http://codex.wordpress.org/Conditional_Tags      

Gav


-----Original Message-----
From: wp-hackers-bounces at lists.automattic.com [mailto:wp-hackers-bounces at lists.automattic.com] On Behalf Of mohammad aghanabi
Sent: 18 August 2010 13:10
To: wp-hackers at lists.automattic.com
Subject: Re: [wp-hackers] if it is main page !

is_front_page() does the same thing as is_home will do.
i read that webpage ENTIRELY.

so another help is needed. :)

thanks for ur reply



On Wed, Aug 18, 2010 at 4:38 PM, scribu <scribu at gmail.com> wrote:

> On Wed, Aug 18, 2010 at 10:58 AM, mohammad aghanabi <m.websoft at gmail.com
> >wrote:
>
> > hi,
> > I'm going to show a particular section of sidebar just in main page,
> > i know there is is_home function but it's not my goal and this will go
> > to show that part in every other pages of wordpress too.
> >
> > i wanna know if there is a function to do such a thing.
> > thanks in advance
> >
>
> is_front_page()
>
> Next time: http://codex.wordpress.org/Conditional_Tags
>
>
> --
> http://scribu.net
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>



-- 
??? ????? ??? ?? ?????? ? ?? ??? ?? ?? ??? ????? ?? ??? ??? ?? ?? ?? ????? ?
?????? ?? ??????? ?? ?????
_______________________________________________
wp-hackers mailing list
wp-hackers at lists.automattic.com
http://lists.automattic.com/mailman/listinfo/wp-hackers
_______________________________________________
wp-hackers mailing list
wp-hackers at lists.automattic.com
http://lists.automattic.com/mailman/listinfo/wp-hackers

From ftrudeau at prospek.ca  Wed Aug 18 12:38:50 2010
From: ftrudeau at prospek.ca (=?ISO-8859-1?Q?Fr=E9d=E9ric_Trudeau?=)
Date: Wed, 18 Aug 2010 08:38:50 -0400
Subject: [wp-hackers] Custom search, how ?
In-Reply-To: <AANLkTik7i66-GN=DA=G7AhfTkGNdfmpcJjXWyoM6Wnhi@mail.gmail.com>
References: <AANLkTim=ufNe3=bT_AgNEapuZXS7hh4_HtRi=9syTVn8@mail.gmail.com>	<AANLkTikwLszAc0NxEByURf+x0V4WvodtcQ8BXo30A5dD@mail.gmail.com>	<AANLkTimnxK-Vx=+oknzYr=v8bo7o5rCmfxRF1iiavkvZ@mail.gmail.com>
	<AANLkTik7i66-GN=DA=G7AhfTkGNdfmpcJjXWyoM6Wnhi@mail.gmail.com>
Message-ID: <4C6BD45A.4060200@prospek.ca>


Use the class $wpdb, and build the query yourself.
See http://codex.wordpress.org/Function_Reference/wpdb_Class

--
.     .     .     .     .     .     .     .     . .     . .     . 
.     . .     .
.     .     .     .     .     .     .     .     . .     . .     . 
.     . .     .

*Fr?d?ric Trudeau**
Prospek | Strat?gie d'affaires internet*
Directeur technique
ftrudeau at prospek.ca <mailto:christian at prospek.ca>
+1 514 931-4000 #236*
prospek.ca <http://prospek.ca/>*

.     .     .     .     .     .     .     .     . .     . .     . 
.     . .     .
.     .     .     .     .     .     .     .     . .     . .     . 
.     . .     .

On 2010-08-18 08:19, Lox wrote:
>> You should join using the post ID directly.
>>
> I can't actually because, the separated table is "read only" for me. It is a
> separated excel database regularly dumped into mysql.
>
> 2010/8/18 Lox<lox.dev at knc.nc>
>
>> Thanks figured it myself. It works with WP_Query, I call it with a custom
>> query var that I can check for in posts_join (is the way to do?)
>>
>> How can I JOIN with a custom table ON a custom meta field ?
>
> I have found the thing and I have done some progress:
>
> I have a custom post-type "training" and a custom table "wp_training_infos".
> For each training post type, I have a drop down box to select the matching
> record in the "wp_training_infos" table. (I have no other way to link them
> other than manually).
> So each post_type object (like the one returned by get_post() ) is now
> extended with the matching data from wp_training_infos. (I use posts_join
> and posts_where when post_type matches "training")
>
> Doing so, it is ok, I can do:
>
> $wp_query('post_type=training&field_from_wp_training_info=value)
> Witch is nice. But, now, I need to select training posts for an other meta,
> withc would be:
>
> $wp_query('post_type=training&field_from_wp_training_info=value&meta_key=my_meta&meta_value=the_value)
>
>
> Witch fails because I already use a meta to join with my custom table.....
>
> (1) here is my code http://paste2.org/p/954990
>


From scribu at gmail.com  Wed Aug 18 12:45:45 2010
From: scribu at gmail.com (scribu)
Date: Wed, 18 Aug 2010 15:45:45 +0300
Subject: [wp-hackers] Custom search, how ?
In-Reply-To: <AANLkTik7i66-GN=DA=G7AhfTkGNdfmpcJjXWyoM6Wnhi@mail.gmail.com>
References: <AANLkTim=ufNe3=bT_AgNEapuZXS7hh4_HtRi=9syTVn8@mail.gmail.com>
	<AANLkTikwLszAc0NxEByURf+x0V4WvodtcQ8BXo30A5dD@mail.gmail.com>
	<AANLkTimnxK-Vx=+oknzYr=v8bo7o5rCmfxRF1iiavkvZ@mail.gmail.com>
	<AANLkTik7i66-GN=DA=G7AhfTkGNdfmpcJjXWyoM6Wnhi@mail.gmail.com>
Message-ID: <AANLkTimpoKm+cgvPisJvy8XuW2QQ3e9zScdiHxQNDXXA@mail.gmail.com>

On Wed, Aug 18, 2010 at 3:19 PM, Lox <lox.dev at knc.nc> wrote:

> Doing so, it is ok, I can do:
>
> $wp_query('post_type=training&field_from_wp_training_info=value)
> >
>
> Witch is nice. But, now, I need to select training posts for an other meta,
> withc would be:
>
>
> $wp_query('post_type=training&field_from_wp_training_info=value&meta_key=my_meta&meta_value=the_value)
>
>
> Witch fails because I already use a meta to join with my custom table.....
>

You can give my new plugin a try, which allows multiple custom fields to be
queried:

http://wordpress.org/extend/plugins/query-custom-fields/


-- 
http://scribu.net

From m.websoft at gmail.com  Wed Aug 18 12:50:31 2010
From: m.websoft at gmail.com (mohammad aghanabi)
Date: Wed, 18 Aug 2010 17:20:31 +0430
Subject: [wp-hackers] if it is main page !
In-Reply-To: <CD47955B7E065D48AB5CF226C2ED75C02E339E@tbs-sbs01.TBS.local>
References: <AANLkTinEh7xh4Q6CZ-Z6sWh=gO9u26vSDT7SttK5qKXi@mail.gmail.com>
	<AANLkTi==Rnmb1fOYR97cFd2fhT4n3poqcOdhF5+ioCd5@mail.gmail.com>
	<AANLkTinJRG4OSLwHW68qfZH-eGOCyQ9vAcaOOttPsYZr@mail.gmail.com>
	<CD47955B7E065D48AB5CF226C2ED75C02E339D@tbs-sbs01.TBS.local>
	<CD47955B7E065D48AB5CF226C2ED75C02E339E@tbs-sbs01.TBS.local>
Message-ID: <AANLkTi=tc=hqfz8DaA1Hhng014o2am53uu1F9x-VMm69@mail.gmail.com>

eventually i found the answer :
<?php
$page = (get_query_var('paged')) ? get_query_var('paged') : 1;
if (is_home() && $page==1) {
.
.
.

this will do what i wanted, Thanks ANYHOW.

On Wed, Aug 18, 2010 at 5:09 PM, Gavin Pearce <Gavin.Pearce at 3seven9.com>wrote:

> And just to prove their not the same - in the code:
>
> is_front_page():
> http://phpxref.com/xref/wordpress/wp-includes/query.php.source.html#l344
>
> is_home():
> http://phpxref.com/xref/wordpress/wp-includes/query.php.source.html#l363
>
> Gav
>
>
> -----Original Message-----
> From: wp-hackers-bounces at lists.automattic.com [mailto:
> wp-hackers-bounces at lists.automattic.com] On Behalf Of Gavin Pearce
> Sent: 18 August 2010 13:35
> To: wp-hackers at lists.automattic.com
> Subject: Re: [wp-hackers] if it is main page !
>
> Hi,
>
> No it doesn't, and no you didn't.   ;)
>
> From the Codex:
>
> is_home() -
> When the main blog page is being displayed. This is the page which is
> showing the time based blog content of your site, so if you've set a static
> Page for the Front Page (see below), then this will only be true on the Page
> which you set as the "Posts page" in Administration > Settings > Reading.
>
> is_front_page()
> When it is the front of the site displayed, whether it is posts or a Page.
> Returns true when the main blog page is being displayed and the 'Settings >
> Reading ->Front page displays' is set to "Your latest posts", or when
> 'Settings > Reading ->Front page displays' is set to "A static page" and the
> "Front Page" value is the current Page being displayed. Note: this tag was
> added at Version 2.5.
>
> The key bit being "this will only be true on the Page which you set as the
> "Posts page" in Administration > Settings > Reading."
>
> In simple language - is_home is the main POSTS page (if it isn't the
> homepage) | is_front_page is the front page / home page.
>
> Like scribu said, for next time:
> http://codex.wordpress.org/Conditional_Tags
>
> Gav
>
>
> -----Original Message-----
> From: wp-hackers-bounces at lists.automattic.com [mailto:
> wp-hackers-bounces at lists.automattic.com] On Behalf Of mohammad aghanabi
> Sent: 18 August 2010 13:10
> To: wp-hackers at lists.automattic.com
> Subject: Re: [wp-hackers] if it is main page !
>
> is_front_page() does the same thing as is_home will do.
> i read that webpage ENTIRELY.
>
> so another help is needed. :)
>
> thanks for ur reply
>
>
>
> On Wed, Aug 18, 2010 at 4:38 PM, scribu <scribu at gmail.com> wrote:
>
> > On Wed, Aug 18, 2010 at 10:58 AM, mohammad aghanabi <m.websoft at gmail.com
> > >wrote:
> >
> > > hi,
> > > I'm going to show a particular section of sidebar just in main page,
> > > i know there is is_home function but it's not my goal and this will go
> > > to show that part in every other pages of wordpress too.
> > >
> > > i wanna know if there is a function to do such a thing.
> > > thanks in advance
> > >
> >
> > is_front_page()
> >
> > Next time: http://codex.wordpress.org/Conditional_Tags
> >
> >
> > --
> > http://scribu.net
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers at lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> >
>
>
>
> --
> ??? ????? ??? ?? ?????? ? ?? ??? ?? ?? ??? ????? ?? ??? ??? ?? ?? ?? ?????
> ?
> ?????? ?? ??????? ?? ?????
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>



-- 
??? ????? ??? ?? ?????? ? ?? ??? ?? ?? ??? ????? ?? ??? ??? ?? ?? ?? ????? ?
?????? ?? ??????? ?? ?????

From Gavin.Pearce at 3seven9.com  Wed Aug 18 12:50:22 2010
From: Gavin.Pearce at 3seven9.com (Gavin Pearce)
Date: Wed, 18 Aug 2010 13:50:22 +0100
Subject: [wp-hackers] if it is main page !
In-Reply-To: <AANLkTi==Prw5TvKu312QAP9-bGpaXZjO=z9BYDcVtwbP@mail.gmail.com>
References: <AANLkTinEh7xh4Q6CZ-Z6sWh=gO9u26vSDT7SttK5qKXi@mail.gmail.com><AANLkTi==Rnmb1fOYR97cFd2fhT4n3poqcOdhF5+ioCd5@mail.gmail.com><AANLkTinJRG4OSLwHW68qfZH-eGOCyQ9vAcaOOttPsYZr@mail.gmail.com><CD47955B7E065D48AB5CF226C2ED75C02E339D@tbs-sbs01.TBS.local>
	<AANLkTi==Prw5TvKu312QAP9-bGpaXZjO=z9BYDcVtwbP@mail.gmail.com>
Message-ID: <CD47955B7E065D48AB5CF226C2ED75C02E339F@tbs-sbs01.TBS.local>

Oh OK -  you didn't explain that part. How about something like this?

$paged = get_query_var('paged');
if ( (is_front_page) && ($paged <= 1) )  :
   //page 1 stuff here
endif;

Gav


-----Original Message-----
From: wp-hackers-bounces at lists.automattic.com [mailto:wp-hackers-bounces at lists.automattic.com] On Behalf Of mohammad aghanabi
Sent: 18 August 2010 13:39
To: wp-hackers at lists.automattic.com
Subject: Re: [wp-hackers] if it is main page !

No, see
is_home() works great but it will do the same job on others paginated posts.
e.g. ?paged=2 + ?paged=3 and ....
but i want to just display it in ?paged=1
i mean is_home() && the page number that is 1.
i just want to show my text in a page that it's index alone.

thanks

On Wed, Aug 18, 2010 at 5:04 PM, Gavin Pearce <Gavin.Pearce at 3seven9.com>wrote:

> Hi,
>
> No it doesn't, and no you didn't.   ;)
>
> From the Codex:
>
> is_home() -
> When the main blog page is being displayed. This is the page which is
> showing the time based blog content of your site, so if you've set a static
> Page for the Front Page (see below), then this will only be true on the Page
> which you set as the "Posts page" in Administration > Settings > Reading.
>
> is_front_page()
> When it is the front of the site displayed, whether it is posts or a Page.
> Returns true when the main blog page is being displayed and the 'Settings >
> Reading ->Front page displays' is set to "Your latest posts", or when
> 'Settings > Reading ->Front page displays' is set to "A static page" and the
> "Front Page" value is the current Page being displayed. Note: this tag was
> added at Version 2.5.
>
> The key bit being "this will only be true on the Page which you set as the
> "Posts page" in Administration > Settings > Reading."
>
> In simple language - is_home is the main POSTS page (if it isn't the
> homepage) | is_front_page is the front page / home page.
>
> Like scribu said, for next time:
> http://codex.wordpress.org/Conditional_Tags
>
> Gav
>
>
> -----Original Message-----
> From: wp-hackers-bounces at lists.automattic.com [mailto:
> wp-hackers-bounces at lists.automattic.com] On Behalf Of mohammad aghanabi
> Sent: 18 August 2010 13:10
> To: wp-hackers at lists.automattic.com
> Subject: Re: [wp-hackers] if it is main page !
>
> is_front_page() does the same thing as is_home will do.
> i read that webpage ENTIRELY.
>
> so another help is needed. :)
>
> thanks for ur reply
>
>
>
> On Wed, Aug 18, 2010 at 4:38 PM, scribu <scribu at gmail.com> wrote:
>
> > On Wed, Aug 18, 2010 at 10:58 AM, mohammad aghanabi <m.websoft at gmail.com
> > >wrote:
> >
> > > hi,
> > > I'm going to show a particular section of sidebar just in main page,
> > > i know there is is_home function but it's not my goal and this will go
> > > to show that part in every other pages of wordpress too.
> > >
> > > i wanna know if there is a function to do such a thing.
> > > thanks in advance
> > >
> >
> > is_front_page()
> >
> > Next time: http://codex.wordpress.org/Conditional_Tags
> >
> >
> > --
> > http://scribu.net
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers at lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> >
>
>
>
> --
> ??? ????? ??? ?? ?????? ? ?? ??? ?? ?? ??? ????? ?? ??? ??? ?? ?? ?? ?????
> ?
> ?????? ?? ??????? ?? ?????
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>



-- 
??? ????? ??? ?? ?????? ? ?? ??? ?? ?? ??? ????? ?? ??? ??? ?? ?? ?? ????? ?
?????? ?? ??????? ?? ?????
_______________________________________________
wp-hackers mailing list
wp-hackers at lists.automattic.com
http://lists.automattic.com/mailman/listinfo/wp-hackers

From adriaan at wewillraakyou.com  Wed Aug 18 12:54:27 2010
From: adriaan at wewillraakyou.com (Adriaan Pelzer)
Date: Wed, 18 Aug 2010 13:54:27 +0100
Subject: [wp-hackers] if it is main page !
In-Reply-To: <CD47955B7E065D48AB5CF226C2ED75C02E339E@tbs-sbs01.TBS.local>
References: <AANLkTinEh7xh4Q6CZ-Z6sWh=gO9u26vSDT7SttK5qKXi@mail.gmail.com>
	<AANLkTi==Rnmb1fOYR97cFd2fhT4n3poqcOdhF5+ioCd5@mail.gmail.com>
	<AANLkTinJRG4OSLwHW68qfZH-eGOCyQ9vAcaOOttPsYZr@mail.gmail.com>
	<CD47955B7E065D48AB5CF226C2ED75C02E339D@tbs-sbs01.TBS.local>
	<CD47955B7E065D48AB5CF226C2ED75C02E339E@tbs-sbs01.TBS.local>
Message-ID: <AANLkTimDTs1MiunuzHWfeAK3kXgcUp69vpU=TP3QU0Ef@mail.gmail.com>

The function get_template() returns the template name.
Maybe it's possible to differentiate based on the template name?


Adriaan Pelzer
RAAK Ltd
http://www.wewillraakyou.com
+4478 7978 1743



On Wed, Aug 18, 2010 at 1:39 PM, Gavin Pearce <Gavin.Pearce at 3seven9.com>wrote:

> And just to prove their not the same - in the code:
>
> is_front_page():
> http://phpxref.com/xref/wordpress/wp-includes/query.php.source.html#l344
>
> is_home():
> http://phpxref.com/xref/wordpress/wp-includes/query.php.source.html#l363
>
> Gav
>
>
> -----Original Message-----
> From: wp-hackers-bounces at lists.automattic.com [mailto:
> wp-hackers-bounces at lists.automattic.com] On Behalf Of Gavin Pearce
> Sent: 18 August 2010 13:35
> To: wp-hackers at lists.automattic.com
> Subject: Re: [wp-hackers] if it is main page !
>
> Hi,
>
> No it doesn't, and no you didn't.   ;)
>
> From the Codex:
>
> is_home() -
> When the main blog page is being displayed. This is the page which is
> showing the time based blog content of your site, so if you've set a static
> Page for the Front Page (see below), then this will only be true on the Page
> which you set as the "Posts page" in Administration > Settings > Reading.
>
> is_front_page()
> When it is the front of the site displayed, whether it is posts or a Page.
> Returns true when the main blog page is being displayed and the 'Settings >
> Reading ->Front page displays' is set to "Your latest posts", or when
> 'Settings > Reading ->Front page displays' is set to "A static page" and the
> "Front Page" value is the current Page being displayed. Note: this tag was
> added at Version 2.5.
>
> The key bit being "this will only be true on the Page which you set as the
> "Posts page" in Administration > Settings > Reading."
>
> In simple language - is_home is the main POSTS page (if it isn't the
> homepage) | is_front_page is the front page / home page.
>
> Like scribu said, for next time:
> http://codex.wordpress.org/Conditional_Tags
>
> Gav
>
>
> -----Original Message-----
> From: wp-hackers-bounces at lists.automattic.com [mailto:
> wp-hackers-bounces at lists.automattic.com] On Behalf Of mohammad aghanabi
> Sent: 18 August 2010 13:10
> To: wp-hackers at lists.automattic.com
> Subject: Re: [wp-hackers] if it is main page !
>
> is_front_page() does the same thing as is_home will do.
> i read that webpage ENTIRELY.
>
> so another help is needed. :)
>
> thanks for ur reply
>
>
>
> On Wed, Aug 18, 2010 at 4:38 PM, scribu <scribu at gmail.com> wrote:
>
> > On Wed, Aug 18, 2010 at 10:58 AM, mohammad aghanabi <m.websoft at gmail.com
> > >wrote:
> >
> > > hi,
> > > I'm going to show a particular section of sidebar just in main page,
> > > i know there is is_home function but it's not my goal and this will go
> > > to show that part in every other pages of wordpress too.
> > >
> > > i wanna know if there is a function to do such a thing.
> > > thanks in advance
> > >
> >
> > is_front_page()
> >
> > Next time: http://codex.wordpress.org/Conditional_Tags
> >
> >
> > --
> > http://scribu.net
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers at lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> >
>
>
>
> --
> ??? ????? ??? ?? ?????? ? ?? ??? ?? ?? ??? ????? ?? ??? ??? ?? ?? ?? ?????
> ?
> ?????? ?? ??????? ?? ?????
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From Gavin.Pearce at 3seven9.com  Wed Aug 18 12:55:54 2010
From: Gavin.Pearce at 3seven9.com (Gavin Pearce)
Date: Wed, 18 Aug 2010 13:55:54 +0100
Subject: [wp-hackers] if it is main page !
In-Reply-To: <AANLkTi=tc=hqfz8DaA1Hhng014o2am53uu1F9x-VMm69@mail.gmail.com>
References: <AANLkTinEh7xh4Q6CZ-Z6sWh=gO9u26vSDT7SttK5qKXi@mail.gmail.com><AANLkTi==Rnmb1fOYR97cFd2fhT4n3poqcOdhF5+ioCd5@mail.gmail.com><AANLkTinJRG4OSLwHW68qfZH-eGOCyQ9vAcaOOttPsYZr@mail.gmail.com><CD47955B7E065D48AB5CF226C2ED75C02E339D@tbs-sbs01.TBS.local><CD47955B7E065D48AB5CF226C2ED75C02E339E@tbs-sbs01.TBS.local>
	<AANLkTi=tc=hqfz8DaA1Hhng014o2am53uu1F9x-VMm69@mail.gmail.com>
Message-ID: <CD47955B7E065D48AB5CF226C2ED75C02E33A0@tbs-sbs01.TBS.local>

> Thanks ANYHOW

You're welcome. If you had explained your problem in more detail at the start, then we may have been able to help you in our first responses.

The more detail you put into your question, the more detail you'll get in your replies. ;)

Gav

-----Original Message-----
From: wp-hackers-bounces at lists.automattic.com [mailto:wp-hackers-bounces at lists.automattic.com] On Behalf Of mohammad aghanabi
Sent: 18 August 2010 13:51
To: wp-hackers at lists.automattic.com
Subject: Re: [wp-hackers] if it is main page !

eventually i found the answer :
<?php
$page = (get_query_var('paged')) ? get_query_var('paged') : 1;
if (is_home() && $page==1) {
.
.
.

this will do what i wanted, Thanks ANYHOW.

On Wed, Aug 18, 2010 at 5:09 PM, Gavin Pearce <Gavin.Pearce at 3seven9.com>wrote:

> And just to prove their not the same - in the code:
>
> is_front_page():
> http://phpxref.com/xref/wordpress/wp-includes/query.php.source.html#l344
>
> is_home():
> http://phpxref.com/xref/wordpress/wp-includes/query.php.source.html#l363
>
> Gav
>
>
> -----Original Message-----
> From: wp-hackers-bounces at lists.automattic.com [mailto:
> wp-hackers-bounces at lists.automattic.com] On Behalf Of Gavin Pearce
> Sent: 18 August 2010 13:35
> To: wp-hackers at lists.automattic.com
> Subject: Re: [wp-hackers] if it is main page !
>
> Hi,
>
> No it doesn't, and no you didn't.   ;)
>
> From the Codex:
>
> is_home() -
> When the main blog page is being displayed. This is the page which is
> showing the time based blog content of your site, so if you've set a static
> Page for the Front Page (see below), then this will only be true on the Page
> which you set as the "Posts page" in Administration > Settings > Reading.
>
> is_front_page()
> When it is the front of the site displayed, whether it is posts or a Page.
> Returns true when the main blog page is being displayed and the 'Settings >
> Reading ->Front page displays' is set to "Your latest posts", or when
> 'Settings > Reading ->Front page displays' is set to "A static page" and the
> "Front Page" value is the current Page being displayed. Note: this tag was
> added at Version 2.5.
>
> The key bit being "this will only be true on the Page which you set as the
> "Posts page" in Administration > Settings > Reading."
>
> In simple language - is_home is the main POSTS page (if it isn't the
> homepage) | is_front_page is the front page / home page.
>
> Like scribu said, for next time:
> http://codex.wordpress.org/Conditional_Tags
>
> Gav
>
>
> -----Original Message-----
> From: wp-hackers-bounces at lists.automattic.com [mailto:
> wp-hackers-bounces at lists.automattic.com] On Behalf Of mohammad aghanabi
> Sent: 18 August 2010 13:10
> To: wp-hackers at lists.automattic.com
> Subject: Re: [wp-hackers] if it is main page !
>
> is_front_page() does the same thing as is_home will do.
> i read that webpage ENTIRELY.
>
> so another help is needed. :)
>
> thanks for ur reply
>
>
>
> On Wed, Aug 18, 2010 at 4:38 PM, scribu <scribu at gmail.com> wrote:
>
> > On Wed, Aug 18, 2010 at 10:58 AM, mohammad aghanabi <m.websoft at gmail.com
> > >wrote:
> >
> > > hi,
> > > I'm going to show a particular section of sidebar just in main page,
> > > i know there is is_home function but it's not my goal and this will go
> > > to show that part in every other pages of wordpress too.
> > >
> > > i wanna know if there is a function to do such a thing.
> > > thanks in advance
> > >
> >
> > is_front_page()
> >
> > Next time: http://codex.wordpress.org/Conditional_Tags
> >
> >
> > --
> > http://scribu.net
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers at lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> >
>
>
>
> --
> ??? ????? ??? ?? ?????? ? ?? ??? ?? ?? ??? ????? ?? ??? ??? ?? ?? ?? ?????
> ?
> ?????? ?? ??????? ?? ?????
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>



-- 
??? ????? ??? ?? ?????? ? ?? ??? ?? ?? ??? ????? ?? ??? ??? ?? ?? ?? ????? ?
?????? ?? ??????? ?? ?????
_______________________________________________
wp-hackers mailing list
wp-hackers at lists.automattic.com
http://lists.automattic.com/mailman/listinfo/wp-hackers

From m.websoft at gmail.com  Wed Aug 18 12:57:20 2010
From: m.websoft at gmail.com (mohammad aghanabi)
Date: Wed, 18 Aug 2010 17:27:20 +0430
Subject: [wp-hackers] if it is main page !
In-Reply-To: <CD47955B7E065D48AB5CF226C2ED75C02E33A0@tbs-sbs01.TBS.local>
References: <AANLkTinEh7xh4Q6CZ-Z6sWh=gO9u26vSDT7SttK5qKXi@mail.gmail.com>
	<AANLkTi==Rnmb1fOYR97cFd2fhT4n3poqcOdhF5+ioCd5@mail.gmail.com>
	<AANLkTinJRG4OSLwHW68qfZH-eGOCyQ9vAcaOOttPsYZr@mail.gmail.com>
	<CD47955B7E065D48AB5CF226C2ED75C02E339D@tbs-sbs01.TBS.local>
	<CD47955B7E065D48AB5CF226C2ED75C02E339E@tbs-sbs01.TBS.local>
	<AANLkTi=tc=hqfz8DaA1Hhng014o2am53uu1F9x-VMm69@mail.gmail.com>
	<CD47955B7E065D48AB5CF226C2ED75C02E33A0@tbs-sbs01.TBS.local>
Message-ID: <AANLkTi=h9HTyU0KLKt7Lrj+hLw4rxpN5119p9K+3+1st@mail.gmail.com>

i explained to some extend . :)

On Wed, Aug 18, 2010 at 5:25 PM, Gavin Pearce <Gavin.Pearce at 3seven9.com>wrote:

> > Thanks ANYHOW
>
> You're welcome. If you had explained your problem in more detail at the
> start, then we may have been able to help you in our first responses.
>
> The more detail you put into your question, the more detail you'll get in
> your replies. ;)
>
> Gav
>
> -----Original Message-----
> From: wp-hackers-bounces at lists.automattic.com [mailto:
> wp-hackers-bounces at lists.automattic.com] On Behalf Of mohammad aghanabi
> Sent: 18 August 2010 13:51
> To: wp-hackers at lists.automattic.com
> Subject: Re: [wp-hackers] if it is main page !
>
> eventually i found the answer :
> <?php
> $page = (get_query_var('paged')) ? get_query_var('paged') : 1;
> if (is_home() && $page==1) {
> .
> .
> .
>
> this will do what i wanted, Thanks ANYHOW.
>
> On Wed, Aug 18, 2010 at 5:09 PM, Gavin Pearce <Gavin.Pearce at 3seven9.com
> >wrote:
>
> > And just to prove their not the same - in the code:
> >
> > is_front_page():
> > http://phpxref.com/xref/wordpress/wp-includes/query.php.source.html#l344
> >
> > is_home():
> > http://phpxref.com/xref/wordpress/wp-includes/query.php.source.html#l363
> >
> > Gav
> >
> >
> > -----Original Message-----
> > From: wp-hackers-bounces at lists.automattic.com [mailto:
> > wp-hackers-bounces at lists.automattic.com] On Behalf Of Gavin Pearce
> > Sent: 18 August 2010 13:35
> > To: wp-hackers at lists.automattic.com
> > Subject: Re: [wp-hackers] if it is main page !
> >
> > Hi,
> >
> > No it doesn't, and no you didn't.   ;)
> >
> > From the Codex:
> >
> > is_home() -
> > When the main blog page is being displayed. This is the page which is
> > showing the time based blog content of your site, so if you've set a
> static
> > Page for the Front Page (see below), then this will only be true on the
> Page
> > which you set as the "Posts page" in Administration > Settings > Reading.
> >
> > is_front_page()
> > When it is the front of the site displayed, whether it is posts or a
> Page.
> > Returns true when the main blog page is being displayed and the 'Settings
> >
> > Reading ->Front page displays' is set to "Your latest posts", or when
> > 'Settings > Reading ->Front page displays' is set to "A static page" and
> the
> > "Front Page" value is the current Page being displayed. Note: this tag
> was
> > added at Version 2.5.
> >
> > The key bit being "this will only be true on the Page which you set as
> the
> > "Posts page" in Administration > Settings > Reading."
> >
> > In simple language - is_home is the main POSTS page (if it isn't the
> > homepage) | is_front_page is the front page / home page.
> >
> > Like scribu said, for next time:
> > http://codex.wordpress.org/Conditional_Tags
> >
> > Gav
> >
> >
> > -----Original Message-----
> > From: wp-hackers-bounces at lists.automattic.com [mailto:
> > wp-hackers-bounces at lists.automattic.com] On Behalf Of mohammad aghanabi
> > Sent: 18 August 2010 13:10
> > To: wp-hackers at lists.automattic.com
> > Subject: Re: [wp-hackers] if it is main page !
> >
> > is_front_page() does the same thing as is_home will do.
> > i read that webpage ENTIRELY.
> >
> > so another help is needed. :)
> >
> > thanks for ur reply
> >
> >
> >
> > On Wed, Aug 18, 2010 at 4:38 PM, scribu <scribu at gmail.com> wrote:
> >
> > > On Wed, Aug 18, 2010 at 10:58 AM, mohammad aghanabi <
> m.websoft at gmail.com
> > > >wrote:
> > >
> > > > hi,
> > > > I'm going to show a particular section of sidebar just in main page,
> > > > i know there is is_home function but it's not my goal and this will
> go
> > > > to show that part in every other pages of wordpress too.
> > > >
> > > > i wanna know if there is a function to do such a thing.
> > > > thanks in advance
> > > >
> > >
> > > is_front_page()
> > >
> > > Next time: http://codex.wordpress.org/Conditional_Tags
> > >
> > >
> > > --
> > > http://scribu.net
> > > _______________________________________________
> > > wp-hackers mailing list
> > > wp-hackers at lists.automattic.com
> > > http://lists.automattic.com/mailman/listinfo/wp-hackers
> > >
> >
> >
> >
> > --
> > ??? ????? ??? ?? ?????? ? ?? ??? ?? ?? ??? ????? ?? ??? ??? ?? ?? ??
> ?????
> > ?
> > ?????? ?? ??????? ?? ?????
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers at lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers at lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers at lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> >
>
>
>
> --
> ??? ????? ??? ?? ?????? ? ?? ??? ?? ?? ??? ????? ?? ??? ??? ?? ?? ?? ?????
> ?
> ?????? ?? ??????? ?? ?????
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From scribu at gmail.com  Wed Aug 18 13:25:03 2010
From: scribu at gmail.com (scribu)
Date: Wed, 18 Aug 2010 16:25:03 +0300
Subject: [wp-hackers] if it is main page !
In-Reply-To: <AANLkTi=h9HTyU0KLKt7Lrj+hLw4rxpN5119p9K+3+1st@mail.gmail.com>
References: <AANLkTinEh7xh4Q6CZ-Z6sWh=gO9u26vSDT7SttK5qKXi@mail.gmail.com>
	<AANLkTi==Rnmb1fOYR97cFd2fhT4n3poqcOdhF5+ioCd5@mail.gmail.com>
	<AANLkTinJRG4OSLwHW68qfZH-eGOCyQ9vAcaOOttPsYZr@mail.gmail.com>
	<CD47955B7E065D48AB5CF226C2ED75C02E339D@tbs-sbs01.TBS.local>
	<CD47955B7E065D48AB5CF226C2ED75C02E339E@tbs-sbs01.TBS.local>
	<AANLkTi=tc=hqfz8DaA1Hhng014o2am53uu1F9x-VMm69@mail.gmail.com>
	<CD47955B7E065D48AB5CF226C2ED75C02E33A0@tbs-sbs01.TBS.local>
	<AANLkTi=h9HTyU0KLKt7Lrj+hLw4rxpN5119p9K+3+1st@mail.gmail.com>
Message-ID: <AANLkTi=zwh1oy6wZbgxbEZYn5yNj1LPkMujkQsUihfYX@mail.gmail.com>

Actually, there's a conditional tag for that too:

is_paged()

So, yeah, read the Codex :P

-- 
http://scribu.net

From scribu at gmail.com  Wed Aug 18 13:27:03 2010
From: scribu at gmail.com (scribu)
Date: Wed, 18 Aug 2010 16:27:03 +0300
Subject: [wp-hackers] if it is main page !
In-Reply-To: <AANLkTi=zwh1oy6wZbgxbEZYn5yNj1LPkMujkQsUihfYX@mail.gmail.com>
References: <AANLkTinEh7xh4Q6CZ-Z6sWh=gO9u26vSDT7SttK5qKXi@mail.gmail.com>
	<AANLkTi==Rnmb1fOYR97cFd2fhT4n3poqcOdhF5+ioCd5@mail.gmail.com>
	<AANLkTinJRG4OSLwHW68qfZH-eGOCyQ9vAcaOOttPsYZr@mail.gmail.com>
	<CD47955B7E065D48AB5CF226C2ED75C02E339D@tbs-sbs01.TBS.local>
	<CD47955B7E065D48AB5CF226C2ED75C02E339E@tbs-sbs01.TBS.local>
	<AANLkTi=tc=hqfz8DaA1Hhng014o2am53uu1F9x-VMm69@mail.gmail.com>
	<CD47955B7E065D48AB5CF226C2ED75C02E33A0@tbs-sbs01.TBS.local>
	<AANLkTi=h9HTyU0KLKt7Lrj+hLw4rxpN5119p9K+3+1st@mail.gmail.com>
	<AANLkTi=zwh1oy6wZbgxbEZYn5yNj1LPkMujkQsUihfYX@mail.gmail.com>
Message-ID: <AANLkTi=PD=ZAeUUMmoqc+J5QL5Ky9zfGdbygYjUrHpr-@mail.gmail.com>

On Wed, Aug 18, 2010 at 4:25 PM, scribu <scribu at gmail.com> wrote:

> Actually, there's a conditional tag for that too:
>
> is_paged()
>
> So, yeah, read the Codex :P
>

Your check would become:

if ( is_home() && !is_paged() )


-- 
http://scribu.net

From m.websoft at gmail.com  Wed Aug 18 13:29:29 2010
From: m.websoft at gmail.com (mohammad aghanabi)
Date: Wed, 18 Aug 2010 17:59:29 +0430
Subject: [wp-hackers] if it is main page !
In-Reply-To: <AANLkTi=PD=ZAeUUMmoqc+J5QL5Ky9zfGdbygYjUrHpr-@mail.gmail.com>
References: <AANLkTinEh7xh4Q6CZ-Z6sWh=gO9u26vSDT7SttK5qKXi@mail.gmail.com>
	<AANLkTi==Rnmb1fOYR97cFd2fhT4n3poqcOdhF5+ioCd5@mail.gmail.com>
	<AANLkTinJRG4OSLwHW68qfZH-eGOCyQ9vAcaOOttPsYZr@mail.gmail.com>
	<CD47955B7E065D48AB5CF226C2ED75C02E339D@tbs-sbs01.TBS.local>
	<CD47955B7E065D48AB5CF226C2ED75C02E339E@tbs-sbs01.TBS.local>
	<AANLkTi=tc=hqfz8DaA1Hhng014o2am53uu1F9x-VMm69@mail.gmail.com>
	<CD47955B7E065D48AB5CF226C2ED75C02E33A0@tbs-sbs01.TBS.local>
	<AANLkTi=h9HTyU0KLKt7Lrj+hLw4rxpN5119p9K+3+1st@mail.gmail.com>
	<AANLkTi=zwh1oy6wZbgxbEZYn5yNj1LPkMujkQsUihfYX@mail.gmail.com>
	<AANLkTi=PD=ZAeUUMmoqc+J5QL5Ky9zfGdbygYjUrHpr-@mail.gmail.com>
Message-ID: <AANLkTimScdX1oz0WdQqH2cqw9madGqoRdi+A9HFYiyvi@mail.gmail.com>

how to define if it's first page ?
codex just said it's existed.

On Wed, Aug 18, 2010 at 5:57 PM, scribu <scribu at gmail.com> wrote:

> On Wed, Aug 18, 2010 at 4:25 PM, scribu <scribu at gmail.com> wrote:
>
> > Actually, there's a conditional tag for that too:
> >
> > is_paged()
> >
> > So, yeah, read the Codex :P
> >
>
> Your check would become:
>
> if ( is_home() && !is_paged() )
>
>
> --
> http://scribu.net
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>



-- 
??? ????? ??? ?? ?????? ? ?? ??? ?? ?? ??? ????? ?? ??? ??? ?? ?? ?? ????? ?
?????? ?? ??????? ?? ?????

From m.websoft at gmail.com  Wed Aug 18 13:30:37 2010
From: m.websoft at gmail.com (mohammad aghanabi)
Date: Wed, 18 Aug 2010 18:00:37 +0430
Subject: [wp-hackers] if it is main page !
In-Reply-To: <AANLkTimScdX1oz0WdQqH2cqw9madGqoRdi+A9HFYiyvi@mail.gmail.com>
References: <AANLkTinEh7xh4Q6CZ-Z6sWh=gO9u26vSDT7SttK5qKXi@mail.gmail.com>
	<AANLkTi==Rnmb1fOYR97cFd2fhT4n3poqcOdhF5+ioCd5@mail.gmail.com>
	<AANLkTinJRG4OSLwHW68qfZH-eGOCyQ9vAcaOOttPsYZr@mail.gmail.com>
	<CD47955B7E065D48AB5CF226C2ED75C02E339D@tbs-sbs01.TBS.local>
	<CD47955B7E065D48AB5CF226C2ED75C02E339E@tbs-sbs01.TBS.local>
	<AANLkTi=tc=hqfz8DaA1Hhng014o2am53uu1F9x-VMm69@mail.gmail.com>
	<CD47955B7E065D48AB5CF226C2ED75C02E33A0@tbs-sbs01.TBS.local>
	<AANLkTi=h9HTyU0KLKt7Lrj+hLw4rxpN5119p9K+3+1st@mail.gmail.com>
	<AANLkTi=zwh1oy6wZbgxbEZYn5yNj1LPkMujkQsUihfYX@mail.gmail.com>
	<AANLkTi=PD=ZAeUUMmoqc+J5QL5Ky9zfGdbygYjUrHpr-@mail.gmail.com>
	<AANLkTimScdX1oz0WdQqH2cqw9madGqoRdi+A9HFYiyvi@mail.gmail.com>
Message-ID: <AANLkTimu4PD4y8GHadr7zxSiXsb-mescnjnRU1L90Seo@mail.gmail.com>

oh yes i mistaken .

On Wed, Aug 18, 2010 at 5:59 PM, mohammad aghanabi <m.websoft at gmail.com>wrote:

> how to define if it's first page ?
> codex just said it's existed.
>
>
> On Wed, Aug 18, 2010 at 5:57 PM, scribu <scribu at gmail.com> wrote:
>
>> On Wed, Aug 18, 2010 at 4:25 PM, scribu <scribu at gmail.com> wrote:
>>
>> > Actually, there's a conditional tag for that too:
>> >
>> > is_paged()
>> >
>> > So, yeah, read the Codex :P
>> >
>>
>> Your check would become:
>>
>> if ( is_home() && !is_paged() )
>>
>>
>> --
>> http://scribu.net
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
>
>
>
> --
> ??? ????? ??? ?? ?????? ? ?? ??? ?? ?? ??? ????? ?? ??? ??? ?? ?? ?? ?????
> ? ?????? ?? ??????? ?? ?????
>



-- 
??? ????? ??? ?? ?????? ? ?? ??? ?? ?? ??? ????? ?? ??? ??? ?? ?? ?? ????? ?
?????? ?? ??????? ?? ?????

From lox.dev at knc.nc  Wed Aug 18 16:21:59 2010
From: lox.dev at knc.nc (Lox)
Date: Thu, 19 Aug 2010 03:21:59 +1100
Subject: [wp-hackers] Wp_Query and wildcards
Message-ID: <AANLkTi=UMwN_txQ-VKrC4FEdh+Gfi3EpFn38Gu3ka4wV@mail.gmail.com>

Hello,

I alter a wp_query where using posts_where. I need to use the wildcard
caracter, like so:

$where .= " AND field LIKE '%" . esc_sql($query_vars['dip']) ."%'";
>

But it seems wp_quey deletes the wildcard caracter... How can I solve that?
-- 
Lox
lox.dev at knc.nc111

From m.websoft at gmail.com  Wed Aug 18 19:15:32 2010
From: m.websoft at gmail.com (mohammad aghanabi)
Date: Wed, 18 Aug 2010 23:45:32 +0430
Subject: [wp-hackers] check if a shortcode is existed.
Message-ID: <AANLkTin2gffsRZ6+O6WY7Sz2F9Dq4C16rBCZjSKyq4-B@mail.gmail.com>

hello;
is there anyway to check if a shortcode is existed ?

thanks

From aaron at jorb.in  Wed Aug 18 19:20:41 2010
From: aaron at jorb.in (Aaron Jorbin)
Date: Wed, 18 Aug 2010 15:20:41 -0400
Subject: [wp-hackers] check if a shortcode is existed.
In-Reply-To: <AANLkTin2gffsRZ6+O6WY7Sz2F9Dq4C16rBCZjSKyq4-B@mail.gmail.com>
References: <AANLkTin2gffsRZ6+O6WY7Sz2F9Dq4C16rBCZjSKyq4-B@mail.gmail.com>
Message-ID: <AANLkTi=Rn1CRPf6MSFrH81hFkGpLbBxOi6j2jUK5+Om4@mail.gmail.com>

The global $shortcode_tags is an associative array with the structure

$shortcode_tags[tag] = function



http://aaron.jorb.in
twitter: twitter.com/aaronjorbin



On Wed, Aug 18, 2010 at 3:15 PM, mohammad aghanabi <m.websoft at gmail.com> wrote:
> hello;
> is there anyway to check if a shortcode is existed ?
>
> thanks
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From m.websoft at gmail.com  Wed Aug 18 19:27:15 2010
From: m.websoft at gmail.com (mohammad aghanabi)
Date: Wed, 18 Aug 2010 23:57:15 +0430
Subject: [wp-hackers] check if a shortcode is existed.
In-Reply-To: <AANLkTi=Rn1CRPf6MSFrH81hFkGpLbBxOi6j2jUK5+Om4@mail.gmail.com>
References: <AANLkTin2gffsRZ6+O6WY7Sz2F9Dq4C16rBCZjSKyq4-B@mail.gmail.com>
	<AANLkTi=Rn1CRPf6MSFrH81hFkGpLbBxOi6j2jUK5+Om4@mail.gmail.com>
Message-ID: <AANLkTi=ZowLC+oSgMbKZ6pVECW_PCVLmYDvNbBcfBchb@mail.gmail.com>

is sth like this true ?

if (function_exists('expire_shortcode')) {
echo ".do_shortcode('[expire]').";
echo "nice to meet u";
echo ".do_shortcode('[/expire]').";
} else {
echo "hi";
}

On Wed, Aug 18, 2010 at 11:50 PM, Aaron Jorbin <aaron at jorb.in> wrote:

> The global $shortcode_tags is an associative array with the structure
>
> $shortcode_tags[tag] = function
>
>
>
> http://aaron.jorb.in
> twitter: twitter.com/aaronjorbin
>
>
>
> On Wed, Aug 18, 2010 at 3:15 PM, mohammad aghanabi <m.websoft at gmail.com>
> wrote:
> > hello;
> > is there anyway to check if a shortcode is existed ?
> >
> > thanks
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers at lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> >
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>



-- 
??? ????? ??? ?? ?????? ? ?? ??? ?? ?? ??? ????? ?? ??? ??? ?? ?? ?? ????? ?
?????? ?? ??????? ?? ?????

From johnbillion+wp at gmail.com  Wed Aug 18 19:48:37 2010
From: johnbillion+wp at gmail.com (John Blackbourn)
Date: Wed, 18 Aug 2010 20:48:37 +0100
Subject: [wp-hackers] Wp_Query and wildcards
In-Reply-To: <AANLkTi=UMwN_txQ-VKrC4FEdh+Gfi3EpFn38Gu3ka4wV@mail.gmail.com>
References: <AANLkTi=UMwN_txQ-VKrC4FEdh+Gfi3EpFn38Gu3ka4wV@mail.gmail.com>
Message-ID: <AANLkTimzKtcDzDzOkHkNAjLhnX6PQSAC2Q+VTFJh6_Rj@mail.gmail.com>

Off the top of my head, you need to escape percent signs with another
percent sign: %%.

John

On Wed, Aug 18, 2010 at 5:21 PM, Lox <lox.dev at knc.nc> wrote:
> Hello,
>
> I alter a wp_query where using posts_where. I need to use the wildcard
> caracter, like so:
>
> $where .= " AND field LIKE '%" . esc_sql($query_vars['dip']) ."%'";
>>
>
> But it seems wp_quey deletes the wildcard caracter... How can I solve that?
> --
> Lox
> lox.dev at knc.nc111
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From ashishsainiashfame at gmail.com  Wed Aug 18 20:27:27 2010
From: ashishsainiashfame at gmail.com (Ashish Saini)
Date: Thu, 19 Aug 2010 01:57:27 +0530
Subject: [wp-hackers] Cookie
Message-ID: <AANLkTi=bQU1D1mVG+YwOsYQYzKT0hmFONQtcZWt5c4o2@mail.gmail.com>

Hey everyone!

What causes the "are you sure you want to logout?" message to appear while
logging out.

I am trying to achieve deep integration between WordPress and bbPress. The
WordPress is at *domain.com/wordpress* but the site URL is *domain.com* and
bbPress is at *domain.com/forums*.

So I added the following two lines on config file of both (*wp-config.php *&
* bb-config.php**)* :

define('COOKIEPATH', '/');
define('ADMIN_COOKIE_PATH', '/');

Things are working fine so far but WordPress is not playing nice with
Cookies. WordPress executes alone. bbPress executes by loading WordPress and
itself both.

When I login and logout from a single side (Either WordPress or bbPress), it
works perfectly fine.
But If I login from bbPress and attempt to logout from WordPress side, I am
logged out of bbPress but WordPress displays "are you sure you want to
logout?" message. When clicked on the logout link from there, we land on the
login screen but if an attempt to wp-admin (dashboard) is made, we are
logged in again.

A complete logout requires a relogin and logout from bbPress side.

Both the WordPress logout URLS have nonces attached to them.

Any ideas what could be messing around?

Thanks & Regards
Ashish Saini aka Ashfame
(Deserve Before You Desire)
Homepage : http://www.ashfame.com | Blog : http://blog.ashfame.com | Twitter
: http://twitter.com/ashfame

From wp at andrewnacin.com  Wed Aug 18 20:35:07 2010
From: wp at andrewnacin.com (Andrew Nacin)
Date: Wed, 18 Aug 2010 16:35:07 -0400
Subject: [wp-hackers] Cookie
In-Reply-To: <AANLkTi=bQU1D1mVG+YwOsYQYzKT0hmFONQtcZWt5c4o2@mail.gmail.com>
References: <AANLkTi=bQU1D1mVG+YwOsYQYzKT0hmFONQtcZWt5c4o2@mail.gmail.com>
Message-ID: <AANLkTimLN9UUZhyHCLNrb0c1gdGmt_Zm8vvpHx-uLFJF@mail.gmail.com>

On Wed, Aug 18, 2010 at 4:27 PM, Ashish Saini
<ashishsainiashfame at gmail.com>wrote:

> Hey everyone!
>
> What causes the "are you sure you want to logout?" message to appear while
> logging out.
> ...
> Both the WordPress logout URLS have nonces attached to them.
>

The nonce is invalid, for whatever reason. I would try the bbPress support
forums, they can probably give you better guidance on how to integrate the
two applications.

From ashishsainiashfame at gmail.com  Wed Aug 18 21:10:45 2010
From: ashishsainiashfame at gmail.com (Ashish Saini)
Date: Thu, 19 Aug 2010 02:40:45 +0530
Subject: [wp-hackers] Cookie
In-Reply-To: <AANLkTimLN9UUZhyHCLNrb0c1gdGmt_Zm8vvpHx-uLFJF@mail.gmail.com>
References: <AANLkTi=bQU1D1mVG+YwOsYQYzKT0hmFONQtcZWt5c4o2@mail.gmail.com>
	<AANLkTimLN9UUZhyHCLNrb0c1gdGmt_Zm8vvpHx-uLFJF@mail.gmail.com>
Message-ID: <AANLkTikauM1Aoc0XTwiRHh-win=_40g_q+WM-7JCV03t@mail.gmail.com>

There isn't much activity over there and deep integration is not officially
supported.

I actually posted it on this mailing list so as to have suggestions on
WordPress side only.
How about I just hook up with logout function and delete the cookie, that
should make the user logout pretty well. Any downsides of that?

Thanks & Regards
Ashish Saini aka Ashfame
(Deserve Before You Desire)
Homepage : http://www.ashfame.com | Blog : http://blog.ashfame.com | Twitter
: http://twitter.com/ashfame


On Thu, Aug 19, 2010 at 2:05 AM, Andrew Nacin <wp at andrewnacin.com> wrote:

> On Wed, Aug 18, 2010 at 4:27 PM, Ashish Saini
> <ashishsainiashfame at gmail.com>wrote:
>
> > Hey everyone!
> >
> > What causes the "are you sure you want to logout?" message to appear
> while
> > logging out.
> > ...
> > Both the WordPress logout URLS have nonces attached to them.
> >
>
> The nonce is invalid, for whatever reason. I would try the bbPress support
> forums, they can probably give you better guidance on how to integrate the
> two applications.
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From elfin at elfden.co.uk  Wed Aug 18 21:20:11 2010
From: elfin at elfden.co.uk (Rich Pedley)
Date: Wed, 18 Aug 2010 22:20:11 +0100
Subject: [wp-hackers] Cookie
In-Reply-To: <AANLkTikauM1Aoc0XTwiRHh-win=_40g_q+WM-7JCV03t@mail.gmail.com>
References: <AANLkTi=bQU1D1mVG+YwOsYQYzKT0hmFONQtcZWt5c4o2@mail.gmail.com>	<AANLkTimLN9UUZhyHCLNrb0c1gdGmt_Zm8vvpHx-uLFJF@mail.gmail.com>
	<AANLkTikauM1Aoc0XTwiRHh-win=_40g_q+WM-7JCV03t@mail.gmail.com>
Message-ID: <4C6C4E8B.3030802@elfden.co.uk>

On 18/08/2010 22:10, Ashish Saini wrote:
> There isn't much activity over there and deep integration is not officially
> supported.

Actually queries over there are answered fairly quickly. You are 
likely to find more people on those forums that have had experience of 
integrating bbPress and WordPress than you will on this list (IMO).

Rich

From ashishsainiashfame at gmail.com  Wed Aug 18 21:25:30 2010
From: ashishsainiashfame at gmail.com (Ashish Saini)
Date: Thu, 19 Aug 2010 02:55:30 +0530
Subject: [wp-hackers] Cookie
In-Reply-To: <4C6C4E8B.3030802@elfden.co.uk>
References: <AANLkTi=bQU1D1mVG+YwOsYQYzKT0hmFONQtcZWt5c4o2@mail.gmail.com>
	<AANLkTimLN9UUZhyHCLNrb0c1gdGmt_Zm8vvpHx-uLFJF@mail.gmail.com>
	<AANLkTikauM1Aoc0XTwiRHh-win=_40g_q+WM-7JCV03t@mail.gmail.com>
	<4C6C4E8B.3030802@elfden.co.uk>
Message-ID: <AANLkTi=vfF2U3SBdghHCpikrUiT1xuM+FyoHWFymt+R9@mail.gmail.com>

You didn't recognize me Rich, I go by the name of
Ashfame<http://bbpress.org/forums/profile/ashfame>there and I do keep
track of topics going on there. Any question over basic
stuff is likely to end up in solitude at bbPress forums.

Thanks & Regards
Ashish Saini aka Ashfame
(Deserve Before You Desire)
Homepage : http://www.ashfame.com | Blog : http://blog.ashfame.com | Twitter
: http://twitter.com/ashfame


On Thu, Aug 19, 2010 at 2:50 AM, Rich Pedley <elfin at elfden.co.uk> wrote:

> On 18/08/2010 22:10, Ashish Saini wrote:
>
>> There isn't much activity over there and deep integration is not
>> officially
>> supported.
>>
>
> Actually queries over there are answered fairly quickly. You are likely to
> find more people on those forums that have had experience of integrating
> bbPress and WordPress than you will on this list (IMO).
>
> Rich
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From elfin at elfden.co.uk  Wed Aug 18 21:50:15 2010
From: elfin at elfden.co.uk (Rich Pedley)
Date: Wed, 18 Aug 2010 22:50:15 +0100
Subject: [wp-hackers] Cookie
In-Reply-To: <AANLkTi=vfF2U3SBdghHCpikrUiT1xuM+FyoHWFymt+R9@mail.gmail.com>
References: <AANLkTi=bQU1D1mVG+YwOsYQYzKT0hmFONQtcZWt5c4o2@mail.gmail.com>	<AANLkTimLN9UUZhyHCLNrb0c1gdGmt_Zm8vvpHx-uLFJF@mail.gmail.com>	<AANLkTikauM1Aoc0XTwiRHh-win=_40g_q+WM-7JCV03t@mail.gmail.com>	<4C6C4E8B.3030802@elfden.co.uk>
	<AANLkTi=vfF2U3SBdghHCpikrUiT1xuM+FyoHWFymt+R9@mail.gmail.com>
Message-ID: <4C6C5597.3070304@elfden.co.uk>

On 18/08/2010 22:25, Ashish Saini wrote:
> You didn't recognize me Rich, I go by the name of
> Ashfame<http://bbpress.org/forums/profile/ashfame>there and I do keep
> track of topics going on there. Any question over basic
> stuff is likely to end up in solitude at bbPress forums.

ahh fair comment then.

For others on this list Ashish is a regular on the bbPress forums, 
which says a lot when he has to ask here about things!

Rich

From heiko.rabe at code-styling.de  Wed Aug 18 22:02:41 2010
From: heiko.rabe at code-styling.de (Heiko Rabe)
Date: Thu, 19 Aug 2010 00:02:41 +0200
Subject: [wp-hackers] Cookie
In-Reply-To: <4C6C5597.3070304@elfden.co.uk>
References: <AANLkTi=bQU1D1mVG+YwOsYQYzKT0hmFONQtcZWt5c4o2@mail.gmail.com>	<AANLkTimLN9UUZhyHCLNrb0c1gdGmt_Zm8vvpHx-uLFJF@mail.gmail.com>	<AANLkTikauM1Aoc0XTwiRHh-win=_40g_q+WM-7JCV03t@mail.gmail.com>	<4C6C4E8B.3030802@elfden.co.uk>	<AANLkTi=vfF2U3SBdghHCpikrUiT1xuM+FyoHWFymt+R9@mail.gmail.com>
	<4C6C5597.3070304@elfden.co.uk>
Message-ID: <000001cb3f21$145ef830$3d1ce890$@rabe@code-styling.de>

I think, they are all busy, because bbPress is about to be changed into a
regular WordPress plugin.
It should not be longer shipped as part of BuddyPress but will integrate
smoothly with WP and BuddyPress if detected.
Can be found at announcements and discussion threads or here:
http://wordpress.org/extend/plugins/bbpress/

Just my 5 Cent.

codestyling
(www.code-styling.de)

-----Urspr?ngliche Nachricht-----
Von: wp-hackers-bounces at lists.automattic.com
[mailto:wp-hackers-bounces at lists.automattic.com] Im Auftrag von Rich Pedley
Gesendet: Mittwoch, 18. August 2010 23:50
An: wp-hackers at lists.automattic.com
Betreff: Re: [wp-hackers] Cookie

On 18/08/2010 22:25, Ashish Saini wrote:
> You didn't recognize me Rich, I go by the name of
> Ashfame<http://bbpress.org/forums/profile/ashfame>there and I do keep
> track of topics going on there. Any question over basic
> stuff is likely to end up in solitude at bbPress forums.

ahh fair comment then.

For others on this list Ashish is a regular on the bbPress forums, 
which says a lot when he has to ask here about things!

Rich
_______________________________________________
wp-hackers mailing list
wp-hackers at lists.automattic.com
http://lists.automattic.com/mailman/listinfo/wp-hackers


From ashishsainiashfame at gmail.com  Wed Aug 18 22:11:57 2010
From: ashishsainiashfame at gmail.com (Ashish Saini)
Date: Thu, 19 Aug 2010 03:41:57 +0530
Subject: [wp-hackers] Cookie
In-Reply-To: <-4622038365937940004@unknownmsgid>
References: <AANLkTi=bQU1D1mVG+YwOsYQYzKT0hmFONQtcZWt5c4o2@mail.gmail.com>
	<AANLkTimLN9UUZhyHCLNrb0c1gdGmt_Zm8vvpHx-uLFJF@mail.gmail.com>
	<AANLkTikauM1Aoc0XTwiRHh-win=_40g_q+WM-7JCV03t@mail.gmail.com>
	<4C6C4E8B.3030802@elfden.co.uk>
	<AANLkTi=vfF2U3SBdghHCpikrUiT1xuM+FyoHWFymt+R9@mail.gmail.com>
	<4C6C5597.3070304@elfden.co.uk> <-4622038365937940004@unknownmsgid>
Message-ID: <AANLkTimJ8vwhs8THNcT+5PQCVey2g5zL_dawYRUTZNo5@mail.gmail.com>

@Rich Thanks :)
@ Helko
Yes! Some are waiting for the plugin and some are working on fork ;-)

Thanks & Regards
Ashish Saini aka Ashfame
(Deserve Before You Desire)
Homepage : http://www.ashfame.com | Blog : http://blog.ashfame.com | Twitter
: http://twitter.com/ashfame


On Thu, Aug 19, 2010 at 3:32 AM, Heiko Rabe <heiko.rabe at code-styling.de>wrote:

> I think, they are all busy, because bbPress is about to be changed into a
> regular WordPress plugin.
> It should not be longer shipped as part of BuddyPress but will integrate
> smoothly with WP and BuddyPress if detected.
> Can be found at announcements and discussion threads or here:
> http://wordpress.org/extend/plugins/bbpress/
>
> Just my 5 Cent.
>
> codestyling
> (www.code-styling.de)
>
> -----Urspr?ngliche Nachricht-----
> Von: wp-hackers-bounces at lists.automattic.com
> [mailto:wp-hackers-bounces at lists.automattic.com] Im Auftrag von Rich
> Pedley
> Gesendet: Mittwoch, 18. August 2010 23:50
> An: wp-hackers at lists.automattic.com
> Betreff: Re: [wp-hackers] Cookie
>
> On 18/08/2010 22:25, Ashish Saini wrote:
> > You didn't recognize me Rich, I go by the name of
> > Ashfame<http://bbpress.org/forums/profile/ashfame>there and I do keep
> > track of topics going on there. Any question over basic
> > stuff is likely to end up in solitude at bbPress forums.
>
> ahh fair comment then.
>
> For others on this list Ashish is a regular on the bbPress forums,
> which says a lot when he has to ask here about things!
>
> Rich
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From kenzaraque at gmail.com  Thu Aug 19 02:16:13 2010
From: kenzaraque at gmail.com (Ken Zaraque)
Date: Wed, 18 Aug 2010 19:16:13 -0700
Subject: [wp-hackers] multiple databases vs different database prefixes
In-Reply-To: <AANLkTi=5Jmg+POYu=QFuYzfV9Y=zu-qq3fMT1qN=TCLt@mail.gmail.com>
References: <2DCF84D4-97F6-4719-98FE-BBA7232D0F59@gmail.com>
	<94046722-07EA-450F-8C12-CC88FF89AA44@newclarity.net>
	<44AFC5B3-6BEF-4F94-85D2-D76CDBA497CC@codehooligans.com>
	<369C10CD-E2F8-4414-9880-D8FA3AE9E9D3@newclarity.net>
	<AANLkTikg5KmAikuxthxvJBRpsG+ucdqwVunt47JLAumA@mail.gmail.com>
	<3629332B-70D5-4391-B035-2CCDA00A17F0@newclarity.net>
	<6EB0D08A-30BE-4484-BEC0-0D39D6344385@gmail.com>
	<AANLkTi=1dEL-a3juui9COqEd_W6M+zy5NrrTzHfqWHjy@mail.gmail.com>
	<AANLkTi=5Jmg+POYu=QFuYzfV9Y=zu-qq3fMT1qN=TCLt@mail.gmail.com>
Message-ID: <060AC882-9957-4E43-A5AC-C6461E62FCCF@gmail.com>



Thank you all again for the responses. 

I too have concerns about backup & restore regimes.  that's why i'm leaning towards multiple small DBs.  It just seems safer. Each of these sites will need to be backed up separately, and a situation may arise where on a few of the sites needs to be restored to a previous version.  

I suppose if I use a large DB, I could always backup/restore a subset of the tables.

@Ryan - I like the quote by Mark Twain. That's why I'm cautious about using WP version 3.0's multisite feature.  It puts everything in one basket.  All the sites even share a common base code ( If I'm not mistaken ).  You mentioned you found articles on large vs small DBs. Can you send me a couple of links? I can't seem to find anything of great value. I might be searching with the wrong keywords.


@Jeremy - regarding PHPAdmi:  You bring up a good point with PHPAdmin choking on a large DB.  
@Jeremy - regarding backups/export: I don't see how having multiple DBs would be much of a pain during backups compared to one large DB. I would have thought that it's a simple script that goes through all the databases and does a msqldump. Am I missing something important? 




I appreciate all the advice guys.




On Aug 16, 2010, at 11:19 AM, Ryan Bilesky wrote:

> I have to agree with Jeremy on this. Heck I'm having a hard time just
> figuring out what one person/company could need 300 diffrent sites for.
> Maybe a large company liek Microsoft might need hundreds of sites for
> diffrnet things.  But I agree if you are going to have alot of sites why not
> use multisite.
> 
> Back on topic, if you do an internet search there are many forums and other
> sites that talk about using one large db versus several small dbs.  The
> consesus I am seeming to find is that one large database is easier to
> maintain but several smaller dbs work well if each site for instance would
> need a seperate backup regimine, or if you want to split the databases
> accross multipule servers.
> 
> Oh and a random but perhaps appropriate quote I found during this search:
> "Put all your eggs in one basket. And then, watch that basket!" -Mark Twain
> 
> I think ultimatley it comes down to needs, idk that any one solution is
> beter than the other.  Each has  its own advantages and its abot what works
> best for your situation.  Such as do you want to split over multipule
> servers, do you want to easily share data between sites.
> 
> On Mon, Aug 16, 2010 at 11:05 AM, Jeremy Clarke <jer at simianuprising.com>wrote:
> 
>> 
>> P.S. With regard to your original question, wherein you are absolutely
>> required to have 300 sites and not use MS: I have to call into question the
>> decision-making that resulted in those requirements. Whatever you are
>> doing,
>> you are likely doing it wrong if that is your solution.
>> 
>> --
>> Jeremy Clarke | http://jeremyclarke.org
>> Code and Design | http://globalvoicesonline.org
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>> 
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers


From curtis at curtismchale.ca  Thu Aug 19 02:22:30 2010
From: curtis at curtismchale.ca (Curtis McHale)
Date: Wed, 18 Aug 2010 19:22:30 -0700
Subject: [wp-hackers] multiple databases vs different database prefixes
In-Reply-To: <060AC882-9957-4E43-A5AC-C6461E62FCCF@gmail.com>
References: <2DCF84D4-97F6-4719-98FE-BBA7232D0F59@gmail.com>	<94046722-07EA-450F-8C12-CC88FF89AA44@newclarity.net>	<44AFC5B3-6BEF-4F94-85D2-D76CDBA497CC@codehooligans.com>	<369C10CD-E2F8-4414-9880-D8FA3AE9E9D3@newclarity.net>	<AANLkTikg5KmAikuxthxvJBRpsG+ucdqwVunt47JLAumA@mail.gmail.com>	<3629332B-70D5-4391-B035-2CCDA00A17F0@newclarity.net>	<6EB0D08A-30BE-4484-BEC0-0D39D6344385@gmail.com>	<AANLkTi=1dEL-a3juui9COqEd_W6M+zy5NrrTzHfqWHjy@mail.gmail.com>	<AANLkTi=5Jmg+POYu=QFuYzfV9Y=zu-qq3fMT1qN=TCLt@mail.gmail.com>
	<060AC882-9957-4E43-A5AC-C6461E62FCCF@gmail.com>
Message-ID: <4C6C9566.3060304@curtismchale.ca>

If you're concerned about backups look at VautlPress. It's invite only 
but I got my invite in a week or two. If you went that route the better 
option would be one DB since you could probably back it up off one 
install. Course you'd have to look at how VaultPress determines 
different 'site' backups.

Ken Zaraque wrote:
> Thank you all again for the responses.
>
> I too have concerns about backup&  restore regimes.  that's why i'm leaning towards multiple small DBs.  It just seems safer. Each of these sites will need to be backed up separately, and a situation may arise where on a few of the sites needs to be restored to a previous version.
>
> I suppose if I use a large DB, I could always backup/restore a subset of the tables.
>
> @Ryan - I like the quote by Mark Twain. That's why I'm cautious about using WP version 3.0's multisite feature.  It puts everything in one basket.  All the sites even share a common base code ( If I'm not mistaken ).  You mentioned you found articles on large vs small DBs. Can you send me a couple of links? I can't seem to find anything of great value. I might be searching with the wrong keywords.
>
>
> @Jeremy - regarding PHPAdmi:  You bring up a good point with PHPAdmin choking on a large DB.
> @Jeremy - regarding backups/export: I don't see how having multiple DBs would be much of a pain during backups compared to one large DB. I would have thought that it's a simple script that goes through all the databases and does a msqldump. Am I missing something important?
>
>
>
>
> I appreciate all the advice guys.
>
>
>
>
> On Aug 16, 2010, at 11:19 AM, Ryan Bilesky wrote:
>
>> I have to agree with Jeremy on this. Heck I'm having a hard time just
>> figuring out what one person/company could need 300 diffrent sites for.
>> Maybe a large company liek Microsoft might need hundreds of sites for
>> diffrnet things.  But I agree if you are going to have alot of sites why not
>> use multisite.
>>
>> Back on topic, if you do an internet search there are many forums and other
>> sites that talk about using one large db versus several small dbs.  The
>> consesus I am seeming to find is that one large database is easier to
>> maintain but several smaller dbs work well if each site for instance would
>> need a seperate backup regimine, or if you want to split the databases
>> accross multipule servers.
>>
>> Oh and a random but perhaps appropriate quote I found during this search:
>> "Put all your eggs in one basket. And then, watch that basket!" -Mark Twain
>>
>> I think ultimatley it comes down to needs, idk that any one solution is
>> beter than the other.  Each has  its own advantages and its abot what works
>> best for your situation.  Such as do you want to split over multipule
>> servers, do you want to easily share data between sites.
>>
>> On Mon, Aug 16, 2010 at 11:05 AM, Jeremy Clarke<jer at simianuprising.com>wrote:
>>
>>> P.S. With regard to your original question, wherein you are absolutely
>>> required to have 300 sites and not use MS: I have to call into question the
>>> decision-making that resulted in those requirements. Whatever you are
>>> doing,
>>> you are likely doing it wrong if that is your solution.
>>>
>>> --
>>> Jeremy Clarke | http://jeremyclarke.org
>>> Code and Design | http://globalvoicesonline.org
>>> _______________________________________________
>>> wp-hackers mailing list
>>> wp-hackers at lists.automattic.com
>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>>
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

-- 
Curtis McHale

604.751.3482
http://curtismchale.ca
http://twitter.com/curtismchale
http://ca.linkedin.com/in/curtismchale


From list at expost.org  Thu Aug 19 15:12:30 2010
From: list at expost.org (Raj)
Date: Thu, 19 Aug 2010 20:42:30 +0530
Subject: [wp-hackers] How To Get Completely Processed Body Of Blog Posts?
Message-ID: <000301cb3fb0$f3ac7230$db055690$@org>

 

Hi all, 

 

I have a plugin that uses the body of blog posts to deliver e-mails. Often
times the plugin users would use shortcodes [caption][/caption] etc.  I am
sure there are many plugins which define some shot codes too. How do I get
the body of a post after all the shortcode replacements and other processing
by other plugins have been performed?

 

Warm Regards,

Rajasekharan


From scribu at gmail.com  Thu Aug 19 15:19:42 2010
From: scribu at gmail.com (scribu)
Date: Thu, 19 Aug 2010 18:19:42 +0300
Subject: [wp-hackers] How To Get Completely Processed Body Of Blog Posts?
In-Reply-To: <000301cb3fb0$f3ac7230$db055690$@org>
References: <000301cb3fb0$f3ac7230$db055690$@org>
Message-ID: <AANLkTim7poz1wGMaP9as26YGrxQzJjpsN2sZbH13G+mo@mail.gmail.com>

On Thu, Aug 19, 2010 at 6:12 PM, Raj <list at expost.org> wrote:

> I have a plugin that uses the body of blog posts to deliver e-mails. Often
> times the plugin users would use shortcodes [caption][/caption] etc.  I am
> sure there are many plugins which define some shot codes too. How do I get
> the body of a post after all the shortcode replacements and other
> processing
> by other plugins have been performed?
>

global $post;
$post = get_post( 'some id' );
setup_postdata($post);

$processed = apply_filters('the_content', $post->post_content);

wp_reset_postdata();


-- 
http://scribu.net

From goldenapplesdesign at gmail.com  Thu Aug 19 15:24:59 2010
From: goldenapplesdesign at gmail.com (Nathaniel Taintor)
Date: Thu, 19 Aug 2010 11:24:59 -0400
Subject: [wp-hackers] Sorting queries by values in custom array?
Message-ID: <AANLkTik+-1189C_TGu7eTZKSEFcjfC+D9gSz48jwfkPc@mail.gmail.com>

Hi all,

I'm working on a project that's basically a craigslist clone. Visitors
choose their city on first visiting the site, which is stored in a cookie.
On browsing the site, they see posts from their own city first, then from
other cities, sorted by proximity.

I have 'City' set up as a custom post type, with custom fields for latitude
and longitude. This post type is mirrored in a custom taxonomy, kind of the
same way Mike S. was talking about recently on the list. My problem is in
figuring out an efficient way of generating the queries to show posts. As it
is now, my "find nearby cities" looks like this:

function sort_nearest_cities() {
    global $wpdb;
    $thiscity = $wpdb->get_var("SELECT id FROM wp_posts WHERE
post_title='".BCD_CITY."'"); // BCD_CITY is the value of the cookie
    $thislat = get_post_meta($thiscity,'lat',true);
    $thislon = get_post_meta($thiscity,'lon',true);
    $othercities = $wpdb->get_results("SELECT `ID`,`post_title` FROM
`wp_posts` WHERE `post_type`='city'",ARRAY_A);
    $othercities_sorted = array();
    foreach ($othercities as $othercity) {
        if ($othercity['post_title'] != BCD_CITY) {
            $otherlat=get_post_meta($othercity['ID'],'lat',true);
            $otherlon=get_post_meta($othercity['ID'],'lon',true);
            $othercities_sorted[$othercity['post_title']] = (int) sqrt(
pow((69.1*($otherlat-$thislat)),2) +
pow((69.1*($otherlon-$thislon)*cos($thislat/57.3)),2) ) ;
        }
    }
    asort ($othercities_sorted);
    return array_keys($othercities_sorted);
}

and then I loop through each of the results returned with a get_posts query
for each. It works, but its a stupid brute-force approach that won't scale
well at all.

What I'd like to do, given an array of nearby cities sorted, is somehow pass
that to the get_posts query as a sort order field. But I'm drawing a
complete blank. Is there a smart way of doing this? Maybe hooking into
posts_where or posts_join?

Sorry if this is outside the scope of this list.

Thanks,
Than

From mikeschinkel at newclarity.net  Thu Aug 19 15:35:24 2010
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Thu, 19 Aug 2010 10:35:24 -0500 (CDT)
Subject: [wp-hackers] Sorting queries by values in custom array?
In-Reply-To: <AANLkTik+-1189C_TGu7eTZKSEFcjfC+D9gSz48jwfkPc@mail.gmail.com>
References: <AANLkTik+-1189C_TGu7eTZKSEFcjfC+D9gSz48jwfkPc@mail.gmail.com>
Message-ID: <44769D28-3391-4CEC-A818-8A61C0E3C836@newclarity.net>

I was working on almost this exact problem yesterday. 

How many total cities do you have?

-Mike

Sent from my iPad

On Aug 19, 2010, at 11:25 AM, Nathaniel Taintor <goldenapplesdesign at gmail.com> wrote:

> Hi all,
> 
> I'm working on a project that's basically a craigslist clone. Visitors
> choose their city on first visiting the site, which is stored in a cookie.
> On browsing the site, they see posts from their own city first, then from
> other cities, sorted by proximity.
> 
> I have 'City' set up as a custom post type, with custom fields for latitude
> and longitude. This post type is mirrored in a custom taxonomy, kind of the
> same way Mike S. was talking about recently on the list. My problem is in
> figuring out an efficient way of generating the queries to show posts. As it
> is now, my "find nearby cities" looks like this:
> 
> function sort_nearest_cities() {
>    global $wpdb;
>    $thiscity = $wpdb->get_var("SELECT id FROM wp_posts WHERE
> post_title='".BCD_CITY."'"); // BCD_CITY is the value of the cookie
>    $thislat = get_post_meta($thiscity,'lat',true);
>    $thislon = get_post_meta($thiscity,'lon',true);
>    $othercities = $wpdb->get_results("SELECT `ID`,`post_title` FROM
> `wp_posts` WHERE `post_type`='city'",ARRAY_A);
>    $othercities_sorted = array();
>    foreach ($othercities as $othercity) {
>        if ($othercity['post_title'] != BCD_CITY) {
>            $otherlat=get_post_meta($othercity['ID'],'lat',true);
>            $otherlon=get_post_meta($othercity['ID'],'lon',true);
>            $othercities_sorted[$othercity['post_title']] = (int) sqrt(
> pow((69.1*($otherlat-$thislat)),2) +
> pow((69.1*($otherlon-$thislon)*cos($thislat/57.3)),2) ) ;
>        }
>    }
>    asort ($othercities_sorted);
>    return array_keys($othercities_sorted);
> }
> 
> and then I loop through each of the results returned with a get_posts query
> for each. It works, but its a stupid brute-force approach that won't scale
> well at all.
> 
> What I'd like to do, given an array of nearby cities sorted, is somehow pass
> that to the get_posts query as a sort order field. But I'm drawing a
> complete blank. Is there a smart way of doing this? Maybe hooking into
> posts_where or posts_join?
> 
> Sorry if this is outside the scope of this list.
> 
> Thanks,
> Than
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

From wordpress at santosj.name  Thu Aug 19 16:21:48 2010
From: wordpress at santosj.name (Jacob Santos)
Date: Thu, 19 Aug 2010 11:21:48 -0500
Subject: [wp-hackers] multiple databases vs different database prefixes
In-Reply-To: <060AC882-9957-4E43-A5AC-C6461E62FCCF@gmail.com>
References: <2DCF84D4-97F6-4719-98FE-BBA7232D0F59@gmail.com>
	<94046722-07EA-450F-8C12-CC88FF89AA44@newclarity.net>
	<44AFC5B3-6BEF-4F94-85D2-D76CDBA497CC@codehooligans.com>
	<369C10CD-E2F8-4414-9880-D8FA3AE9E9D3@newclarity.net>
	<AANLkTikg5KmAikuxthxvJBRpsG+ucdqwVunt47JLAumA@mail.gmail.com>
	<3629332B-70D5-4391-B035-2CCDA00A17F0@newclarity.net>
	<6EB0D08A-30BE-4484-BEC0-0D39D6344385@gmail.com>
	<AANLkTi=1dEL-a3juui9COqEd_W6M+zy5NrrTzHfqWHjy@mail.gmail.com>
	<AANLkTi=5Jmg+POYu=QFuYzfV9Y=zu-qq3fMT1qN=TCLt@mail.gmail.com>
	<060AC882-9957-4E43-A5AC-C6461E62FCCF@gmail.com>
Message-ID: <AANLkTi=+QT_GazK306RzNcwUem1j2_WjyoGUg0jrc-Yw@mail.gmail.com>

On Wed, Aug 18, 2010 at 9:16 PM, Ken Zaraque <kenzaraque at gmail.com> wrote:
>
> @Ryan -That's why I'm cautious about using WP version 3.0's multisite
> feature.  It puts everything in one basket.  All the sites even share a
> common base code ( If I'm not mistaken ).


The answer to your question is that whether it is better to manually upgrade
(or automatically upgrade 300 separate WordPress installs) or upgrade one
single instance of WordPress. Sure it shares the same code, but that just
means you only need to upgrade one place.

Of course, it is also possible to have only one location for WordPress and
then just reference that for each 300 sites. Like a poor mans Multi-site. I
will recommend, after having done that for 4 sites, that you don't do it
that way. Managing was a nightmare. I can't imagine having to deal with that
with 300.

Multi-site also gives tools for a single upgrade and managing all sites
within one wp-admin, instead of 300.

Jacob Santos

From goldenapplesdesign at gmail.com  Thu Aug 19 16:27:07 2010
From: goldenapplesdesign at gmail.com (Nathaniel Taintor)
Date: Thu, 19 Aug 2010 12:27:07 -0400
Subject: [wp-hackers] Sorting queries by values in custom array?
In-Reply-To: <44769D28-3391-4CEC-A818-8A61C0E3C836@newclarity.net>
References: <AANLkTik+-1189C_TGu7eTZKSEFcjfC+D9gSz48jwfkPc@mail.gmail.com>
	<44769D28-3391-4CEC-A818-8A61C0E3C836@newclarity.net>
Message-ID: <AANLkTi=T8NsYFf-DdCTox5b5E1wj76m87QkzfHvubrYQ@mail.gmail.com>

I'm working with about 40 cities to start, in two categories... 30 US and 10
international, which get processed differently (i.e. someone searching in
Tokyo doesn't need to see San Franciso as a "nearby city", just because it
may be the closest geographically.

The sorting cities function performs ok, and I can cache the results of that
function so it doesn't get run every page load. The big slowdown is running
20-30 get_posts queries on every index page. And it makes it very difficult
and slow to page the results. I've been trying to come up with a hack to
return these results in a single query that can be paged.

Thanks.



On Thu, Aug 19, 2010 at 11:35 AM, Mike Schinkel <mikeschinkel at newclarity.net
> wrote:

> I was working on almost this exact problem yesterday.
>
> How many total cities do you have?
>
> -Mike
>
>

From Brian at TheCodeCave.com  Thu Aug 19 16:53:23 2010
From: Brian at TheCodeCave.com (Brian Layman)
Date: Thu, 19 Aug 2010 12:53:23 -0400
Subject: [wp-hackers] multiple databases vs different database prefixes
In-Reply-To: <AANLkTi=+QT_GazK306RzNcwUem1j2_WjyoGUg0jrc-Yw@mail.gmail.com>
References: <2DCF84D4-97F6-4719-98FE-BBA7232D0F59@gmail.com>	<94046722-07EA-450F-8C12-CC88FF89AA44@newclarity.net>	<44AFC5B3-6BEF-4F94-85D2-D76CDBA497CC@codehooligans.com>	<369C10CD-E2F8-4414-9880-D8FA3AE9E9D3@newclarity.net>	<AANLkTikg5KmAikuxthxvJBRpsG+ucdqwVunt47JLAumA@mail.gmail.com>	<3629332B-70D5-4391-B035-2CCDA00A17F0@newclarity.net>	<6EB0D08A-30BE-4484-BEC0-0D39D6344385@gmail.com>	<AANLkTi=1dEL-a3juui9COqEd_W6M+zy5NrrTzHfqWHjy@mail.gmail.com>	<AANLkTi=5Jmg+POYu=QFuYzfV9Y=zu-qq3fMT1qN=TCLt@mail.gmail.com>	<060AC882-9957-4E43-A5AC-C6461E62FCCF@gmail.com>
	<AANLkTi=+QT_GazK306RzNcwUem1j2_WjyoGUg0jrc-Yw@mail.gmail.com>
Message-ID: <00f301cb3fbf$0d7f96c0$287ec440$@com>

I agree with Jacob. With the old school b5media, we'd done it both ways.
While running separate installations of WordPress, we'd peaked at around 317
live blogs.  What that does is create a nightmare for file handling on your
servers. Let's guess at WordPress having 800 files when looking at themes
and plugins combined.  Running separate WP instances, that's roughly 800 *
300 = 240,000 different files the server has to deal with and hopefully
cache rather than load off of the hard drives.  Compare that with a
multi-site install - 800 files total.  Obviously from a file perspective, a
singe directory is easier to deal with. We'd even experimented using
soft-links to serve the same files and get around this before WPMU had
matured.   Also of consideration is what will happen when you update to a
newer version of wordpress.  NSF will take lots of resources when it tries
to sync up all of the changes across all of the servers.

The database faces similar issues. Creating a single database with 11 * 300
= 3300 tables can cause its own set of headaches as a "show tables" in a
random plugin causes your whole site to pause.  Mike & Scribu nailed it.
HyperDB will become your close personal friend.

Not using MS means you can have each blog admin/author be truly in charge of
their site and opens up configurations options blocked by the nature of MS
and eliminates some security concerns as well.  I imagine that came into
play in your decision.

Backups regimes are easy enough. You'll want to create a table of installs
etc you can run off of. That way you'll know all the install directories and
database names. And then you can just iterate them. I have my own scripts
you could modify for this purpose if you like.

lol you're making me all nostalgic now...
______________________________________________
Brian Layman
eHermits, Inc.
TheCodeCave.com?/?eHermitsInc.com?/?twitter.com/BrianLayman /
facebook.com/eHermit



From chrisbratlien at gmail.com  Thu Aug 19 17:09:58 2010
From: chrisbratlien at gmail.com (Christopher Bratlien)
Date: Thu, 19 Aug 2010 12:09:58 -0500
Subject: [wp-hackers] multiple databases vs different database prefixes
In-Reply-To: <00f301cb3fbf$0d7f96c0$287ec440$@com>
References: <2DCF84D4-97F6-4719-98FE-BBA7232D0F59@gmail.com>
	<94046722-07EA-450F-8C12-CC88FF89AA44@newclarity.net>
	<44AFC5B3-6BEF-4F94-85D2-D76CDBA497CC@codehooligans.com>
	<369C10CD-E2F8-4414-9880-D8FA3AE9E9D3@newclarity.net>
	<AANLkTikg5KmAikuxthxvJBRpsG+ucdqwVunt47JLAumA@mail.gmail.com>
	<3629332B-70D5-4391-B035-2CCDA00A17F0@newclarity.net>
	<6EB0D08A-30BE-4484-BEC0-0D39D6344385@gmail.com>
	<AANLkTi=1dEL-a3juui9COqEd_W6M+zy5NrrTzHfqWHjy@mail.gmail.com>
	<AANLkTi=5Jmg+POYu=QFuYzfV9Y=zu-qq3fMT1qN=TCLt@mail.gmail.com>
	<060AC882-9957-4E43-A5AC-C6461E62FCCF@gmail.com>
	<AANLkTi=+QT_GazK306RzNcwUem1j2_WjyoGUg0jrc-Yw@mail.gmail.com>
	<00f301cb3fbf$0d7f96c0$287ec440$@com>
Message-ID: <AANLkTi=98F8hnRt-oUxK3CZUsgMafCDz4kG96LbqhmVT@mail.gmail.com>


From lox.dev at knc.nc  Thu Aug 19 17:27:23 2010
From: lox.dev at knc.nc (Lox)
Date: Fri, 20 Aug 2010 04:27:23 +1100
Subject: [wp-hackers] Wp_Query and wildcards
In-Reply-To: <AANLkTimzKtcDzDzOkHkNAjLhnX6PQSAC2Q+VTFJh6_Rj@mail.gmail.com>
References: <AANLkTi=UMwN_txQ-VKrC4FEdh+Gfi3EpFn38Gu3ka4wV@mail.gmail.com>
	<AANLkTimzKtcDzDzOkHkNAjLhnX6PQSAC2Q+VTFJh6_Rj@mail.gmail.com>
Message-ID: <AANLkTimDs8aAHP82+_jaJHkRZ2r2s00iP8gBYnOKakDr@mail.gmail.com>

2010/8/19 John Blackbourn <johnbillion+wp at gmail.com<johnbillion%2Bwp at gmail.com>
>

> Off the top of my head, you need to escape percent signs with another
> percent sign: %%.
>

Nope it was my mistake. It works.

-- 
Lox
lox.dev at knc.nc

From lox.dev at knc.nc  Thu Aug 19 17:34:36 2010
From: lox.dev at knc.nc (Lox)
Date: Fri, 20 Aug 2010 04:34:36 +1100
Subject: [wp-hackers] Get_post and Wp_Query
Message-ID: <AANLkTikypW2FKuJrJnXSL8yanbiNEdWqHt-94vxfz4g8@mail.gmail.com>

Hello,

I extend a custom post_type with data from a custom table using posts_where,
posts_join etc.

To detect whether I have to extend the queried post, I use the WP_Query:

function posts_fields ($fields, WP_Query $wp_query) {

        if($wp_query->query_vars['post_type'] == 'my_post_type' ) {

So, if I call WP_Query with a post_type='my_post_type' it is ok. But if I
call get_post() function, post_type query vars is not passed to the query
and thus my post_type doesn't get extended with data from my custom table.

Any workaround to have get_post extend my postype ?

Regards

-- 
Lox
lox.dev at knc.nc

From otto at ottodestruct.com  Thu Aug 19 18:01:53 2010
From: otto at ottodestruct.com (Otto)
Date: Thu, 19 Aug 2010 13:01:53 -0500
Subject: [wp-hackers] How To Get Completely Processed Body Of Blog Posts?
In-Reply-To: <AANLkTim7poz1wGMaP9as26YGrxQzJjpsN2sZbH13G+mo@mail.gmail.com>
References: <000301cb3fb0$f3ac7230$db055690$@org>
	<AANLkTim7poz1wGMaP9as26YGrxQzJjpsN2sZbH13G+mo@mail.gmail.com>
Message-ID: <AANLkTi=rSD0d6Lksf_XFQ8qTbaPK3UBrbPjPeeDz_nDV@mail.gmail.com>

You can skip the setup_postdata(), the global, the reset...

$mypost = get_post(whatever);
$content = apply_filters('the_content', $mypost->post_content);

Note: Badly made plugins that use shortcodes for inappropriate things
will complain at you about doing this. I've seen cases where
processing the_content filter will a) Add items to a cart in a
shopping plugin, b) make a site do heavy processing because it's doing
too much database work for the shortcode, c) make duplicate posts on
twitter/facebook/other...

Basically, many plugin authors don't know that shortcodes shouldn't do
heavy lifting or that they can be called more than once on a page,
etc. So expect issues whenever you use the_content filter in this way.
However, that's their problem, not yours.

-Otto



On Thu, Aug 19, 2010 at 10:19 AM, scribu <scribu at gmail.com> wrote:
> On Thu, Aug 19, 2010 at 6:12 PM, Raj <list at expost.org> wrote:
>
>> I have a plugin that uses the body of blog posts to deliver e-mails. Often
>> times the plugin users would use shortcodes [caption][/caption] etc. ?I am
>> sure there are many plugins which define some shot codes too. How do I get
>> the body of a post after all the shortcode replacements and other
>> processing
>> by other plugins have been performed?
>>
>
> global $post;
> $post = get_post( 'some id' );
> setup_postdata($post);
>
> $processed = apply_filters('the_content', $post->post_content);
>
> wp_reset_postdata();
>
>
> --
> http://scribu.net
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From elfin at elfden.co.uk  Thu Aug 19 18:36:33 2010
From: elfin at elfden.co.uk (Rich Pedley)
Date: Thu, 19 Aug 2010 19:36:33 +0100
Subject: [wp-hackers] How To Get Completely Processed Body Of Blog Posts?
In-Reply-To: <AANLkTi=rSD0d6Lksf_XFQ8qTbaPK3UBrbPjPeeDz_nDV@mail.gmail.com>
References: <000301cb3fb0$f3ac7230$db055690$@org>	<AANLkTim7poz1wGMaP9as26YGrxQzJjpsN2sZbH13G+mo@mail.gmail.com>
	<AANLkTi=rSD0d6Lksf_XFQ8qTbaPK3UBrbPjPeeDz_nDV@mail.gmail.com>
Message-ID: <4C6D79B1.5010702@elfden.co.uk>

On 19/08/2010 19:01, Otto wrote:
> You can skip the setup_postdata(), the global, the reset...
>
> $mypost = get_post(whatever);
> $content = apply_filters('the_content', $mypost->post_content);
>
> Note: Badly made plugins that use shortcodes for inappropriate things
> will complain at you about doing this. I've seen cases where
> processing the_content filter will a) Add items to a cart in a
> shopping plugin,

:P

I fixed it!

well ok I still have a few more things to fix on that side, but I did 
fix that bit specifically!

Rich

From otto at ottodestruct.com  Thu Aug 19 18:38:59 2010
From: otto at ottodestruct.com (Otto)
Date: Thu, 19 Aug 2010 13:38:59 -0500
Subject: [wp-hackers] How To Get Completely Processed Body Of Blog Posts?
In-Reply-To: <4C6D79B1.5010702@elfden.co.uk>
References: <000301cb3fb0$f3ac7230$db055690$@org>
	<AANLkTim7poz1wGMaP9as26YGrxQzJjpsN2sZbH13G+mo@mail.gmail.com>
	<AANLkTi=rSD0d6Lksf_XFQ8qTbaPK3UBrbPjPeeDz_nDV@mail.gmail.com>
	<4C6D79B1.5010702@elfden.co.uk>
Message-ID: <AANLkTinkk6Dzgwq7Yp+Dbz6N7x2CQ89f9+aMJMmvNmh0@mail.gmail.com>

On Thu, Aug 19, 2010 at 1:36 PM, Rich Pedley <elfin at elfden.co.uk> wrote:
> On 19/08/2010 19:01, Otto wrote:
>>
>> You can skip the setup_postdata(), the global, the reset...
>>
>> $mypost = get_post(whatever);
>> $content = apply_filters('the_content', $mypost->post_content);
>>
>> Note: Badly made plugins that use shortcodes for inappropriate things
>> will complain at you about doing this. I've seen cases where
>> processing the_content filter will a) Add items to a cart in a
>> shopping plugin,
>
> :P
>
> I fixed it!
>
> well ok I still have a few more things to fix on that side, but I did fix
> that bit specifically!

I wasn't naming names, just giving examples. ;)

Lots of people have made this same sort of mistake. You're not alone.

-Otto

From mikeschinkel at newclarity.net  Thu Aug 19 18:39:58 2010
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Thu, 19 Aug 2010 14:39:58 -0400
Subject: [wp-hackers] multiple databases vs different database prefixes
In-Reply-To: <AANLkTi=98F8hnRt-oUxK3CZUsgMafCDz4kG96LbqhmVT@mail.gmail.com>
References: <2DCF84D4-97F6-4719-98FE-BBA7232D0F59@gmail.com>
	<94046722-07EA-450F-8C12-CC88FF89AA44@newclarity.net>
	<44AFC5B3-6BEF-4F94-85D2-D76CDBA497CC@codehooligans.com>
	<369C10CD-E2F8-4414-9880-D8FA3AE9E9D3@newclarity.net>
	<AANLkTikg5KmAikuxthxvJBRpsG+ucdqwVunt47JLAumA@mail.gmail.com>
	<3629332B-70D5-4391-B035-2CCDA00A17F0@newclarity.net>
	<6EB0D08A-30BE-4484-BEC0-0D39D6344385@gmail.com>
	<AANLkTi=1dEL-a3juui9COqEd_W6M+zy5NrrTzHfqWHjy@mail.gmail.com>
	<AANLkTi=5Jmg+POYu=QFuYzfV9Y=zu-qq3fMT1qN=TCLt@mail.gmail.com>
	<060AC882-9957-4E43-A5AC-C6461E62FCCF@gmail.com>
	<AANLkTi=+QT_GazK306RzNcwUem1j2_WjyoGUg0jrc-Yw@mail.gmail.com>
	<00f301cb3fbf$0d7f96c0$287ec440$@com>
	<AANLkTi=98F8hnRt-oUxK3CZUsgMafCDz4kG96LbqhmVT@mail.gmail.com>
Message-ID: <E26D3D8F-4027-4853-913C-D14C36C81DCC@newclarity.net>

On Aug 19, 2010, at 1:09 PM, Christopher Bratlien wrote:
> From a security point of view:
> 
> Having multiple databases gives you the opportunity to setup different DB
> admins and therefore sandbox each site from each others' tables. A malicious
> script or accidental and dangerous query has less chance of damaging tables
> of other sites' DBs it doesn't have access to. But at the same time, you
> trade off the convenience of being able to do comprehensive backup and
> restore of the one-and-only DB.

To be clear, HyperDB allows multiple databases on one Multisite install so the above, while a potentially very valid point doesn't negative the value of Multisite for the use-case.

As I understand it Ken is doing this for a client, not for his own company.  If the latter I'd say "Fine, shoot yourself in the foot if you want" but for the former he really owes it to his client not to deliver them a maintenance nightmare.

-Mike


From cross at thisismyurl.com  Thu Aug 19 18:57:10 2010
From: cross at thisismyurl.com (Christopher Ross)
Date: Thu, 19 Aug 2010 15:57:10 -0300
Subject: [wp-hackers] WP.org plugin repository - multiple users
Message-ID: <1967CB0F-18B9-4723-A9C1-2CE00B66392D@thisismyurl.com>

Is there a way to allow two developers access to a plugin on the wordpress.org plugin repository? Or do updates always have to come from the account it was created with?

__

Christopher Ross

Toronto      1 (416) 840-5828
Fredericton 1 (506) 474-2708
New Orleans 1 (504) 322 3485

http://christopherross.ca
http://www.thisismyurl.com


From chip at chipbennett.net  Thu Aug 19 18:59:49 2010
From: chip at chipbennett.net (Chip Bennett)
Date: Thu, 19 Aug 2010 13:59:49 -0500
Subject: [wp-hackers] WP.org plugin repository - multiple users
In-Reply-To: <1967CB0F-18B9-4723-A9C1-2CE00B66392D@thisismyurl.com>
References: <1967CB0F-18B9-4723-A9C1-2CE00B66392D@thisismyurl.com>
Message-ID: <AANLkTimE1uQ1JyFBC83-aOSqs7+FBwNSKe9_Md_v7RUY@mail.gmail.com>

Add the wordpress.org username of the contributor you want to add to the
"contributors" line in the header info, and that person will have SVN commit
access to the plugin.

On Thu, Aug 19, 2010 at 1:57 PM, Christopher Ross <cross at thisismyurl.com>wrote:

> Is there a way to allow two developers access to a plugin on the
> wordpress.org plugin repository? Or do updates always have to come from
> the account it was created with?
>
> __
>
> Christopher Ross
>
> Toronto      1 (416) 840-5828
> Fredericton 1 (506) 474-2708
> New Orleans 1 (504) 322 3485
>
> http://christopherross.ca
> http://www.thisismyurl.com
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From mikeschinkel at newclarity.net  Thu Aug 19 18:59:48 2010
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Thu, 19 Aug 2010 14:59:48 -0400
Subject: [wp-hackers] Sorting queries by values in custom array?
In-Reply-To: <AANLkTi=T8NsYFf-DdCTox5b5E1wj76m87QkzfHvubrYQ@mail.gmail.com>
References: <AANLkTik+-1189C_TGu7eTZKSEFcjfC+D9gSz48jwfkPc@mail.gmail.com>
	<44769D28-3391-4CEC-A818-8A61C0E3C836@newclarity.net>
	<AANLkTi=T8NsYFf-DdCTox5b5E1wj76m87QkzfHvubrYQ@mail.gmail.com>
Message-ID: <6E4EED70-244A-4530-A6D6-8EFB6BE4BB75@newclarity.net>

Than,

You can do it all in one query SQL and then even cache the results in a custom table since there are only 1600 permutations.  Here's a related question I asked on WordPress Answers:

http://wordpress.stackexchange.com/questions/468/optimizing-a-proximity-based-store-location-search-on-a-plain-vanilla-web-host

It could also be done with WP_Query() by adding post_where and post_join hooks but there's no need to use them for this since: 

1.) You'll be mucking with the SQL in the hooks anyway, 
2.) You'll be calling the query directly (i.e. it's not part of the loop) so you can have full control,  and
3.) The hooks could potentially cause a side effect elsewhere (although what I say next makes this point a bit moot.)

The reason for the custom table (and for not using something like the transients API) is you'll need to join it to your loop query with the posts_join hook, and set the order by using and posts_orderby hook.

Hope this helps.

-Mike

On Aug 19, 2010, at 12:27 PM, Nathaniel Taintor wrote:

> I'm working with about 40 cities to start, in two categories... 30 US and 10
> international, which get processed differently (i.e. someone searching in
> Tokyo doesn't need to see San Franciso as a "nearby city", just because it
> may be the closest geographically.
> 
> The sorting cities function performs ok, and I can cache the results of that
> function so it doesn't get run every page load. The big slowdown is running
> 20-30 get_posts queries on every index page. And it makes it very difficult
> and slow to page the results. I've been trying to come up with a hack to
> return these results in a single query that can be paged.
> 
> Thanks.
> 
> 
> 
> On Thu, Aug 19, 2010 at 11:35 AM, Mike Schinkel <mikeschinkel at newclarity.net
>> wrote:
> 
>> I was working on almost this exact problem yesterday.
>> 
>> How many total cities do you have?
>> 
>> -Mike
>> 
>> 
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers


From mikeschinkel at newclarity.net  Thu Aug 19 19:00:40 2010
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Thu, 19 Aug 2010 15:00:40 -0400
Subject: [wp-hackers] WP.org plugin repository - multiple users
In-Reply-To: <1967CB0F-18B9-4723-A9C1-2CE00B66392D@thisismyurl.com>
References: <1967CB0F-18B9-4723-A9C1-2CE00B66392D@thisismyurl.com>
Message-ID: <AAC176DA-E3D9-43D1-BAF0-26E79C25948C@newclarity.net>

On Aug 19, 2010, at 2:57 PM, Christopher Ross wrote:
> Is there a way to allow two developers access to a plugin on the wordpress.org plugin repository? Or do updates always have to come from the account it was created with?

Create an account on a shared email alias?

-Mike


From wp at andrewnacin.com  Thu Aug 19 19:04:57 2010
From: wp at andrewnacin.com (Andrew Nacin)
Date: Thu, 19 Aug 2010 15:04:57 -0400
Subject: [wp-hackers] Wp_Query and wildcards
In-Reply-To: <AANLkTimDs8aAHP82+_jaJHkRZ2r2s00iP8gBYnOKakDr@mail.gmail.com>
References: <AANLkTi=UMwN_txQ-VKrC4FEdh+Gfi3EpFn38Gu3ka4wV@mail.gmail.com>
	<AANLkTimzKtcDzDzOkHkNAjLhnX6PQSAC2Q+VTFJh6_Rj@mail.gmail.com>
	<AANLkTimDs8aAHP82+_jaJHkRZ2r2s00iP8gBYnOKakDr@mail.gmail.com>
Message-ID: <AANLkTinKVYzct0AnvDmpPceh78_k2PDaFBu4NpcY24XV@mail.gmail.com>

On Thu, Aug 19, 2010 at 1:27 PM, Lox <lox.dev at knc.nc> wrote:

> 2010/8/19 John Blackbourn <johnbillion+wp at gmail.com<johnbillion%2Bwp at gmail.com>
> <johnbillion%2Bwp at gmail.com <johnbillion%252Bwp at gmail.com>>
> >
>
> > Off the top of my head, you need to escape percent signs with another
> > percent sign: %%.
> >
>
> Nope it was my mistake. It works.


You should use like_escape(), in case your search has % or _ in it, as those
need to be escaped.

From wp at andrewnacin.com  Thu Aug 19 19:06:01 2010
From: wp at andrewnacin.com (Andrew Nacin)
Date: Thu, 19 Aug 2010 15:06:01 -0400
Subject: [wp-hackers] WP.org plugin repository - multiple users
In-Reply-To: <1967CB0F-18B9-4723-A9C1-2CE00B66392D@thisismyurl.com>
References: <1967CB0F-18B9-4723-A9C1-2CE00B66392D@thisismyurl.com>
Message-ID: <AANLkTikDEA0ELCOCbf16LrurkRiT=8BCxSc=7gFhABOe@mail.gmail.com>

On Thu, Aug 19, 2010 at 2:57 PM, Christopher Ross <cross at thisismyurl.com>wrote:

> Is there a way to allow two developers access to a plugin on the
> wordpress.org plugin repository? Or do updates always have to come from
> the account it was created with?


On the /admin/ panel for your plugin, you can add committers.

From chip at chipbennett.net  Thu Aug 19 19:08:08 2010
From: chip at chipbennett.net (Chip Bennett)
Date: Thu, 19 Aug 2010 14:08:08 -0500
Subject: [wp-hackers] WP.org plugin repository - multiple users
In-Reply-To: <AANLkTikDEA0ELCOCbf16LrurkRiT=8BCxSc=7gFhABOe@mail.gmail.com>
References: <1967CB0F-18B9-4723-A9C1-2CE00B66392D@thisismyurl.com>
	<AANLkTikDEA0ELCOCbf16LrurkRiT=8BCxSc=7gFhABOe@mail.gmail.com>
Message-ID: <AANLkTi=h6FhHeVXrB3unVVKPzprgDQm_SED7tKn5n8ob@mail.gmail.com>

Oh, thanks Nacin!  I've only ever *been* added; I've not yet added anyone.

(Please disregard my previous answer...)

On Thu, Aug 19, 2010 at 2:06 PM, Andrew Nacin <wp at andrewnacin.com> wrote:

> On Thu, Aug 19, 2010 at 2:57 PM, Christopher Ross <cross at thisismyurl.com
> >wrote:
>
> > Is there a way to allow two developers access to a plugin on the
> > wordpress.org plugin repository? Or do updates always have to come from
> > the account it was created with?
>
>
> On the /admin/ panel for your plugin, you can add committers.
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From eric at eamann.com  Thu Aug 19 19:15:12 2010
From: eric at eamann.com (Eric Mann)
Date: Thu, 19 Aug 2010 12:15:12 -0700 (PDT)
Subject: [wp-hackers] WP.org plugin repository - multiple users
In-Reply-To: <AANLkTimE1uQ1JyFBC83-aOSqs7+FBwNSKe9_Md_v7RUY@mail.gmail.com>
References: <1967CB0F-18B9-4723-A9C1-2CE00B66392D@thisismyurl.com>
	<AANLkTimE1uQ1JyFBC83-aOSqs7+FBwNSKe9_Md_v7RUY@mail.gmail.com>
Message-ID: <967706437.528925.1282245312314.JavaMail.open-xchange@oxusltgw05.schlund.de>

That's the first step, yes.
?
The seconds step, after adding them to the contributors line in the Readme file
is to add them to the repository itself:
?
?- Go to the repository (wordpress.org/extend/plugins) and log in with the main
account
?- Go to your plug-in and click the "admin" tab
?- Add the user's WordPress login name to the list of committers by entering
their name and clicking "Add Committer"
?
That's it!
?
On August 19, 2010 at 6:59 PM Chip Bennett <chip at chipbennett.net> wrote:

> Add the wordpress.org username of the contributor you want to add to the
> "contributors" line in the header info, and that person will have SVN commit
> access to the plugin.
>
> On Thu, Aug 19, 2010 at 1:57 PM, Christopher Ross
> <cross at thisismyurl.com>wrote:
>
> > Is there a way to allow two developers access to a plugin on the
> > wordpress.org plugin repository? Or do updates always have to come from
> > the account it was created with?
> >
> > __
> >
> > Christopher Ross
> >
> > Toronto? ? ? 1 (416) 840-5828
> > Fredericton 1 (506) 474-2708
> > New Orleans 1 (504) 322 3485
> >
> > http://christopherross.ca
> > http://www.thisismyurl.com
> >
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers at lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> >
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

From elfin at elfden.co.uk  Thu Aug 19 19:26:57 2010
From: elfin at elfden.co.uk (Rich Pedley)
Date: Thu, 19 Aug 2010 20:26:57 +0100
Subject: [wp-hackers] How To Get Completely Processed Body Of Blog Posts?
In-Reply-To: <AANLkTinkk6Dzgwq7Yp+Dbz6N7x2CQ89f9+aMJMmvNmh0@mail.gmail.com>
References: <000301cb3fb0$f3ac7230$db055690$@org>	<AANLkTim7poz1wGMaP9as26YGrxQzJjpsN2sZbH13G+mo@mail.gmail.com>	<AANLkTi=rSD0d6Lksf_XFQ8qTbaPK3UBrbPjPeeDz_nDV@mail.gmail.com>	<4C6D79B1.5010702@elfden.co.uk>
	<AANLkTinkk6Dzgwq7Yp+Dbz6N7x2CQ89f9+aMJMmvNmh0@mail.gmail.com>
Message-ID: <4C6D8581.9040607@elfden.co.uk>

On 19/08/2010 19:38, Otto wrote:
> On Thu, Aug 19, 2010 at 1:36 PM, Rich Pedley<elfin at elfden.co.uk>  wrote:
>> On 19/08/2010 19:01, Otto wrote:
>>>
>>> You can skip the setup_postdata(), the global, the reset...
>>>
>>> $mypost = get_post(whatever);
>>> $content = apply_filters('the_content', $mypost->post_content);
>>>
>>> Note: Badly made plugins that use shortcodes for inappropriate things
>>> will complain at you about doing this. I've seen cases where
>>> processing the_content filter will a) Add items to a cart in a
>>> shopping plugin,
>>
>> :P
>>
>> I fixed it!
>>
>> well ok I still have a few more things to fix on that side, but I did fix
>> that bit specifically!
>
> I wasn't naming names, just giving examples. ;)

yeah I know ;)


> Lots of people have made this same sort of mistake. You're not alone.

aye, I dare say it is fairly common. I'm hoping to sort the rest out 
soon, they are just slightly more complex, and I need to figure things 
out in my head before I start recoding. Plus knee deep in other coding 
atm.

One day I get it all up to spec...

Rich



From lox.dev at knc.nc  Thu Aug 19 19:33:33 2010
From: lox.dev at knc.nc (Lox)
Date: Fri, 20 Aug 2010 06:33:33 +1100
Subject: [wp-hackers] Wp_Query and wildcards
In-Reply-To: <AANLkTinKVYzct0AnvDmpPceh78_k2PDaFBu4NpcY24XV@mail.gmail.com>
References: <AANLkTi=UMwN_txQ-VKrC4FEdh+Gfi3EpFn38Gu3ka4wV@mail.gmail.com>
	<AANLkTimzKtcDzDzOkHkNAjLhnX6PQSAC2Q+VTFJh6_Rj@mail.gmail.com>
	<AANLkTimDs8aAHP82+_jaJHkRZ2r2s00iP8gBYnOKakDr@mail.gmail.com>
	<AANLkTinKVYzct0AnvDmpPceh78_k2PDaFBu4NpcY24XV@mail.gmail.com>
Message-ID: <AANLkTinBTP9cJbCfAFz998pzsd2P0RbR8C2uOWDn3pQJ@mail.gmail.com>

2010/8/20 Andrew Nacin <wp at andrewnacin.com>

> You should use like_escape(), in case your search has % or _ in it, as
> those
> need to be escaped.
>

I'll look at it thks. For now, I have in a posts_where hook:

if( !empty($query_vars['sec']) )
>                 $where .= " AND dominante LIKE '%" .
> esc_sql($query_vars['sec']) ."%'";
>

Witch works as it.

-- 
Lox
lox.dev at knc.nc

From matt at mattjacob.com  Thu Aug 19 19:39:07 2010
From: matt at mattjacob.com (Matt Jacob)
Date: Thu, 19 Aug 2010 12:39:07 -0700
Subject: [wp-hackers] Code reviews for plugins?
Message-ID: <4C6D885B.6010506@mattjacob.com>

Fact: the quality of plugins in the repository is generally pretty low.

Obviously, there are exceptions, and those exceptions rise to the top 
and become more popular. But for the 10,000-some plugins listed, I bet 
that fewer than 100 of those would be considered best practices in 
plugin development. Unfortunately, most---not all---plugin developers 
probably don't even give a crap.

For those developers who *do* give a crap (or several craps), and who 
*do* want to publish high-quality plugins, what resources are available? 
I was thinking it might be neat if more experienced WP developers from 
wp-hackers volunteered to do code reviews of up-and-coming plugins 
(initiated by the plugin developer; not just a random selection).

You could be the best software engineer in the world, but WordPress is a 
separate beast. It's a huge system that's evolved over many years, and 
the fact of the matter is that the more experience developers need to 
pass on the tribal knowledge they've acquired along the way. IMO, code 
reviews are a good way to do that.

Thoughts?

Matt

From mikeschinkel at newclarity.net  Thu Aug 19 19:44:45 2010
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Thu, 19 Aug 2010 15:44:45 -0400
Subject: [wp-hackers] Code reviews for plugins?
In-Reply-To: <4C6D885B.6010506@mattjacob.com>
References: <4C6D885B.6010506@mattjacob.com>
Message-ID: <F657E634-5D14-445F-8545-023A62CD8D5E@newclarity.net>

Matt:

I had the same idea recently and registered http://wpcodereview.com for that purpose.  Want to collaborate?

Another option might be to see if we could somehow use the voting mechanism that works so well to surface reviews of plugins on WordPress Answers[1]?

Whatever the case, +1 on the concern and the desire to do something about it.

-Mike
[1] http://wordpress.stackexchange.com/


On Aug 19, 2010, at 3:39 PM, Matt Jacob wrote:

> Fact: the quality of plugins in the repository is generally pretty low.
> 
> Obviously, there are exceptions, and those exceptions rise to the top and become more popular. But for the 10,000-some plugins listed, I bet that fewer than 100 of those would be considered best practices in plugin development. Unfortunately, most---not all---plugin developers probably don't even give a crap.
> 
> For those developers who *do* give a crap (or several craps), and who *do* want to publish high-quality plugins, what resources are available? I was thinking it might be neat if more experienced WP developers from wp-hackers volunteered to do code reviews of up-and-coming plugins (initiated by the plugin developer; not just a random selection).
> 
> You could be the best software engineer in the world, but WordPress is a separate beast. It's a huge system that's evolved over many years, and the fact of the matter is that the more experience developers need to pass on the tribal knowledge they've acquired along the way. IMO, code reviews are a good way to do that.
> 
> Thoughts?
> 
> Matt
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers


From chip at chipbennett.net  Thu Aug 19 19:52:28 2010
From: chip at chipbennett.net (Chip Bennett)
Date: Thu, 19 Aug 2010 14:52:28 -0500
Subject: [wp-hackers] Code reviews for plugins?
In-Reply-To: <F657E634-5D14-445F-8545-023A62CD8D5E@newclarity.net>
References: <4C6D885B.6010506@mattjacob.com>
	<F657E634-5D14-445F-8545-023A62CD8D5E@newclarity.net>
Message-ID: <AANLkTim6XM4RvBZWDPQjvUbuMng3Vk6pyZyuYLLgT_Wt@mail.gmail.com>

I am a very-much-still-learning plugin developer/contributor. I've tried to
use best practices, to the best of my ability - but would welcome any and
all review/criticism of my plugins.

So, I'll be interested to see what becomes of this discussion, and to avail
myself of whatever that might be.

Chip

On Thu, Aug 19, 2010 at 2:44 PM, Mike Schinkel
<mikeschinkel at newclarity.net>wrote:

> Matt:
>
> I had the same idea recently and registered http://wpcodereview.com for
> that purpose.  Want to collaborate?
>
> Another option might be to see if we could somehow use the voting mechanism
> that works so well to surface reviews of plugins on WordPress Answers[1]?
>
> Whatever the case, +1 on the concern and the desire to do something about
> it.
>
> -Mike
> [1] http://wordpress.stackexchange.com/
>
>
> On Aug 19, 2010, at 3:39 PM, Matt Jacob wrote:
>
> > Fact: the quality of plugins in the repository is generally pretty low.
> >
> > Obviously, there are exceptions, and those exceptions rise to the top and
> become more popular. But for the 10,000-some plugins listed, I bet that
> fewer than 100 of those would be considered best practices in plugin
> development. Unfortunately, most---not all---plugin developers probably
> don't even give a crap.
> >
> > For those developers who *do* give a crap (or several craps), and who
> *do* want to publish high-quality plugins, what resources are available? I
> was thinking it might be neat if more experienced WP developers from
> wp-hackers volunteered to do code reviews of up-and-coming plugins
> (initiated by the plugin developer; not just a random selection).
> >
> > You could be the best software engineer in the world, but WordPress is a
> separate beast. It's a huge system that's evolved over many years, and the
> fact of the matter is that the more experience developers need to pass on
> the tribal knowledge they've acquired along the way. IMO, code reviews are a
> good way to do that.
> >
> > Thoughts?
> >
> > Matt
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers at lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From eric at eamann.com  Thu Aug 19 20:01:27 2010
From: eric at eamann.com (Eric Mann)
Date: Thu, 19 Aug 2010 13:01:27 -0700 (PDT)
Subject: [wp-hackers] Code reviews for plugins?
In-Reply-To: <F657E634-5D14-445F-8545-023A62CD8D5E@newclarity.net>
References: <4C6D885B.6010506@mattjacob.com>
	<F657E634-5D14-445F-8545-023A62CD8D5E@newclarity.net>
Message-ID: <183630796.530862.1282248087954.JavaMail.open-xchange@oxusltgw05.schlund.de>

I, for one, would love to participate in a peer review process.
?
I recommended last year that someone* put together a group of developers to
review plug-ins. ?I was hoping we could flag "reviewed" plug-ins in the
repository to give them a bit of extra work - like verifying that a new version
really does worth with the version of WordPress it claims to. ?If we *could*
flag such plug-ins, it would give the quality ones more weight and allow for a
quick filter or search.
?
In any case, +1 on the idea. ?And seriously, keep us apprised regarding any kind
of wpcodereview.com collaboration.

On August 19, 2010 at 7:44 PM Mike Schinkel <mikeschinkel at newclarity.net> wrote:

> Matt:
>
> I had the same idea recently and registered http://wpcodereview.com for that
> purpose.? Want to collaborate?
>
> Another option might be to see if we could somehow use the voting mechanism
> that works so well to surface reviews of plugins on WordPress Answers[1]?
>
> Whatever the case, +1 on the concern and the desire to do something about it.
>
> -Mike
> [1] http://wordpress.stackexchange.com/
>
>
> On Aug 19, 2010, at 3:39 PM, Matt Jacob wrote:
>
> > Fact: the quality of plugins in the repository is generally pretty low.
> >
> > Obviously, there are exceptions, and those exceptions rise to the top and
> > become more popular. But for the 10,000-some plugins listed, I bet that
> > fewer than 100 of those would be considered best practices in plugin
> > development. Unfortunately, most---not all---plugin developers probably
> > don't even give a crap.
> >
> > For those developers who *do* give a crap (or several craps), and who *do*
> > want to publish high-quality plugins, what resources are available? I was
> > thinking it might be neat if more experienced WP developers from wp-hackers
> > volunteered to do code reviews of up-and-coming plugins (initiated by the
> > plugin developer; not just a random selection).
> >
> > You could be the best software engineer in the world, but WordPress is a
> > separate beast. It's a huge system that's evolved over many years, and the
> > fact of the matter is that the more experience developers need to pass on
> > the tribal knowledge they've acquired along the way. IMO, code reviews are a
> > good way to do that.
> >
> > Thoughts?
> >
> > Matt
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers at lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

From lox.dev at knc.nc  Thu Aug 19 20:02:03 2010
From: lox.dev at knc.nc (Lox)
Date: Fri, 20 Aug 2010 07:02:03 +1100
Subject: [wp-hackers] Code reviews for plugins?
In-Reply-To: <AANLkTim6XM4RvBZWDPQjvUbuMng3Vk6pyZyuYLLgT_Wt@mail.gmail.com>
References: <4C6D885B.6010506@mattjacob.com>
	<F657E634-5D14-445F-8545-023A62CD8D5E@newclarity.net>
	<AANLkTim6XM4RvBZWDPQjvUbuMng3Vk6pyZyuYLLgT_Wt@mail.gmail.com>
Message-ID: <AANLkTinjWJ78GoL-_wYhmwXr91fRnjVH52nze0qcjrfB@mail.gmail.com>

> > I had the same idea recently and registered http://wpcodereview.com for
> > that purpose.  Want to collaborate?
>
>
Neat idea, count me in.

-- 
Lox
lox.dev at knc.nc

From mikeschinkel at newclarity.net  Thu Aug 19 20:06:04 2010
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Thu, 19 Aug 2010 16:06:04 -0400
Subject: [wp-hackers] Code reviews for plugins?
In-Reply-To: <183630796.530862.1282248087954.JavaMail.open-xchange@oxusltgw05.schlund.de>
References: <4C6D885B.6010506@mattjacob.com>
	<F657E634-5D14-445F-8545-023A62CD8D5E@newclarity.net>
	<183630796.530862.1282248087954.JavaMail.open-xchange@oxusltgw05.schlund.de>
Message-ID: <AEC81770-244E-43DB-B359-364836516908@newclarity.net>

Would it make sense to create a google groups mailing list for those that want to collaborate on this?  I'm open for the domain to be used for the good of the community and not just for my own benefit.

-Mike

On Aug 19, 2010, at 4:01 PM, Eric Mann wrote:

> I, for one, would love to participate in a peer review process.
>  
> I recommended last year that someone* put together a group of developers to
> review plug-ins.  I was hoping we could flag "reviewed" plug-ins in the
> repository to give them a bit of extra work - like verifying that a new version
> really does worth with the version of WordPress it claims to.  If we *could*
> flag such plug-ins, it would give the quality ones more weight and allow for a
> quick filter or search.
>  
> In any case, +1 on the idea.  And seriously, keep us apprised regarding any kind
> of wpcodereview.com collaboration.
> 
> On August 19, 2010 at 7:44 PM Mike Schinkel <mikeschinkel at newclarity.net> wrote:
> 
>> Matt:
>> 
>> I had the same idea recently and registered http://wpcodereview.com for that
>> purpose.  Want to collaborate?
>> 
>> Another option might be to see if we could somehow use the voting mechanism
>> that works so well to surface reviews of plugins on WordPress Answers[1]?
>> 
>> Whatever the case, +1 on the concern and the desire to do something about it.
>> 
>> -Mike
>> [1] http://wordpress.stackexchange.com/
>> 
>> 
>> On Aug 19, 2010, at 3:39 PM, Matt Jacob wrote:
>> 
>>> Fact: the quality of plugins in the repository is generally pretty low.
>>> 
>>> Obviously, there are exceptions, and those exceptions rise to the top and
>>> become more popular. But for the 10,000-some plugins listed, I bet that
>>> fewer than 100 of those would be considered best practices in plugin
>>> development. Unfortunately, most---not all---plugin developers probably
>>> don't even give a crap.
>>> 
>>> For those developers who *do* give a crap (or several craps), and who *do*
>>> want to publish high-quality plugins, what resources are available? I was
>>> thinking it might be neat if more experienced WP developers from wp-hackers
>>> volunteered to do code reviews of up-and-coming plugins (initiated by the
>>> plugin developer; not just a random selection).
>>> 
>>> You could be the best software engineer in the world, but WordPress is a
>>> separate beast. It's a huge system that's evolved over many years, and the
>>> fact of the matter is that the more experience developers need to pass on
>>> the tribal knowledge they've acquired along the way. IMO, code reviews are a
>>> good way to do that.
>>> 
>>> Thoughts?
>>> 
>>> Matt
>>> _______________________________________________
>>> wp-hackers mailing list
>>> wp-hackers at lists.automattic.com
>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>> 
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers


From danielbachhuber at gmail.com  Thu Aug 19 20:08:20 2010
From: danielbachhuber at gmail.com (Daniel Bachhuber)
Date: Thu, 19 Aug 2010 16:08:20 -0400
Subject: [wp-hackers] Code reviews for plugins?
In-Reply-To: <183630796.530862.1282248087954.JavaMail.open-xchange@oxusltgw05.schlund.de>
References: <4C6D885B.6010506@mattjacob.com>
	<F657E634-5D14-445F-8545-023A62CD8D5E@newclarity.net>
	<183630796.530862.1282248087954.JavaMail.open-xchange@oxusltgw05.schlund.de>
Message-ID: <57B84544-FB40-435F-809C-BA2786D7462D@gmail.com>

I think it's a great idea as well. My coding has benefited  
tremendously from the generosity of others, and I'd love to start  
being able to give back.

On 19 Aug 2010, at 4:01 PM, Eric Mann wrote:

> I, for one, would love to participate in a peer review process.
>
> I recommended last year that someone* put together a group of  
> developers to
> review plug-ins.  I was hoping we could flag "reviewed" plug-ins in  
> the
> repository to give them a bit of extra work - like verifying that a  
> new version
> really does worth with the version of WordPress it claims to.  If we  
> *could*
> flag such plug-ins, it would give the quality ones more weight and  
> allow for a
> quick filter or search.
>
> In any case, +1 on the idea.  And seriously, keep us apprised  
> regarding any kind
> of wpcodereview.com collaboration.
>
> On August 19, 2010 at 7:44 PM Mike Schinkel <mikeschinkel at newclarity.net 
> > wrote:
>
>> Matt:
>>
>> I had the same idea recently and registered http://wpcodereview.com  
>> for that
>> purpose.  Want to collaborate?
>>
>> Another option might be to see if we could somehow use the voting  
>> mechanism
>> that works so well to surface reviews of plugins on WordPress  
>> Answers[1]?
>>
>> Whatever the case, +1 on the concern and the desire to do something  
>> about it.
>>
>> -Mike
>> [1] http://wordpress.stackexchange.com/
>>
>>
>> On Aug 19, 2010, at 3:39 PM, Matt Jacob wrote:
>>
>>> Fact: the quality of plugins in the repository is generally pretty  
>>> low.
>>>
>>> Obviously, there are exceptions, and those exceptions rise to the  
>>> top and
>>> become more popular. But for the 10,000-some plugins listed, I bet  
>>> that
>>> fewer than 100 of those would be considered best practices in plugin
>>> development. Unfortunately, most---not all---plugin developers  
>>> probably
>>> don't even give a crap.
>>>
>>> For those developers who *do* give a crap (or several craps), and  
>>> who *do*
>>> want to publish high-quality plugins, what resources are  
>>> available? I was
>>> thinking it might be neat if more experienced WP developers from  
>>> wp-hackers
>>> volunteered to do code reviews of up-and-coming plugins (initiated  
>>> by the
>>> plugin developer; not just a random selection).
>>>
>>> You could be the best software engineer in the world, but  
>>> WordPress is a
>>> separate beast. It's a huge system that's evolved over many years,  
>>> and the
>>> fact of the matter is that the more experience developers need to  
>>> pass on
>>> the tribal knowledge they've acquired along the way. IMO, code  
>>> reviews are a
>>> good way to do that.
>>>
>>> Thoughts?
>>>
>>> Matt
>>> _______________________________________________
>>> wp-hackers mailing list
>>> wp-hackers at lists.automattic.com
>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

--
Daniel Bachhuber
www.danielbachhuber.com
danielbachhuber at gmail.com
cell: +1 971 998 5407
aim/skype/twitter: danielbachhuber


From paul at codehooligans.com  Thu Aug 19 20:32:07 2010
From: paul at codehooligans.com (Paul)
Date: Thu, 19 Aug 2010 16:32:07 -0400
Subject: [wp-hackers] Code reviews for plugins?
In-Reply-To: <57B84544-FB40-435F-809C-BA2786D7462D@gmail.com>
References: <4C6D885B.6010506@mattjacob.com>
	<F657E634-5D14-445F-8545-023A62CD8D5E@newclarity.net>
	<183630796.530862.1282248087954.JavaMail.open-xchange@oxusltgw05.schlund.de>
	<57B84544-FB40-435F-809C-BA2786D7462D@gmail.com>
Message-ID: <AE12B082-EEFC-4FE1-AF52-ABDA655342F1@codehooligans.com>

+1 on this. 

P-

On Aug 19, 2010, at 4:08 PM, Daniel Bachhuber wrote:

> I think it's a great idea as well. My coding has benefited tremendously from the generosity of others, and I'd love to start being able to give back.
> 
> On 19 Aug 2010, at 4:01 PM, Eric Mann wrote:
> 
>> I, for one, would love to participate in a peer review process.
>> 
>> I recommended last year that someone* put together a group of developers to
>> review plug-ins.  I was hoping we could flag "reviewed" plug-ins in the
>> repository to give them a bit of extra work - like verifying that a new version
>> really does worth with the version of WordPress it claims to.  If we *could*
>> flag such plug-ins, it would give the quality ones more weight and allow for a
>> quick filter or search.
>> 
>> In any case, +1 on the idea.  And seriously, keep us apprised regarding any kind
>> of wpcodereview.com collaboration.
>> 
>> On August 19, 2010 at 7:44 PM Mike Schinkel <mikeschinkel at newclarity.net> wrote:
>> 
>>> Matt:
>>> 
>>> I had the same idea recently and registered http://wpcodereview.com for that
>>> purpose.  Want to collaborate?
>>> 
>>> Another option might be to see if we could somehow use the voting mechanism
>>> that works so well to surface reviews of plugins on WordPress Answers[1]?
>>> 
>>> Whatever the case, +1 on the concern and the desire to do something about it.
>>> 
>>> -Mike
>>> [1] http://wordpress.stackexchange.com/
>>> 
>>> 
>>> On Aug 19, 2010, at 3:39 PM, Matt Jacob wrote:
>>> 
>>>> Fact: the quality of plugins in the repository is generally pretty low.
>>>> 
>>>> Obviously, there are exceptions, and those exceptions rise to the top and
>>>> become more popular. But for the 10,000-some plugins listed, I bet that
>>>> fewer than 100 of those would be considered best practices in plugin
>>>> development. Unfortunately, most---not all---plugin developers probably
>>>> don't even give a crap.
>>>> 
>>>> For those developers who *do* give a crap (or several craps), and who *do*
>>>> want to publish high-quality plugins, what resources are available? I was
>>>> thinking it might be neat if more experienced WP developers from wp-hackers
>>>> volunteered to do code reviews of up-and-coming plugins (initiated by the
>>>> plugin developer; not just a random selection).
>>>> 
>>>> You could be the best software engineer in the world, but WordPress is a
>>>> separate beast. It's a huge system that's evolved over many years, and the
>>>> fact of the matter is that the more experience developers need to pass on
>>>> the tribal knowledge they've acquired along the way. IMO, code reviews are a
>>>> good way to do that.
>>>> 
>>>> Thoughts?
>>>> 
>>>> Matt
>>>> _______________________________________________
>>>> wp-hackers mailing list
>>>> wp-hackers at lists.automattic.com
>>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>> 
>>> _______________________________________________
>>> wp-hackers mailing list
>>> wp-hackers at lists.automattic.com
>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
> 
> --
> Daniel Bachhuber
> www.danielbachhuber.com
> danielbachhuber at gmail.com
> cell: +1 971 998 5407
> aim/skype/twitter: danielbachhuber
> 
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers


From heiko.rabe at code-styling.de  Thu Aug 19 21:12:44 2010
From: heiko.rabe at code-styling.de (Heiko Rabe)
Date: Thu, 19 Aug 2010 23:12:44 +0200
Subject: [wp-hackers] Code reviews for plugins?
In-Reply-To: <AE12B082-EEFC-4FE1-AF52-ABDA655342F1@codehooligans.com>
References: <4C6D885B.6010506@mattjacob.com>	<F657E634-5D14-445F-8545-023A62CD8D5E@newclarity.net>	<183630796.530862.1282248087954.JavaMail.open-xchange@oxusltgw05.schlund.de>	<57B84544-FB40-435F-809C-BA2786D7462D@gmail.com>
	<AE12B082-EEFC-4FE1-AF52-ABDA655342F1@codehooligans.com>
Message-ID: <000001cb3fe3$44e33c60$cea9b520$@rabe@code-styling.de>

It would be a good idea to check plugins, no doubt. But if you introduce
such a rating of flagging system which additionally can be filtered on, you
would imply, that all not yet reviewed plugins are crap. You would give
advantage to the already reviewed plugins and it stucks until the review has
taken place and reached a particular plugin.
During this time delay a well done plugin will be presented to audience as a
"bad" one, which is wrong but felt so by audience for psychological reasons.
Keep in mind, that this affects also the download and utilization rates of
plugins!

Second concern: I would approximate the number of code lines over all
plugins at least 10851 plugins multiplied an average of 2000 lines = approx.
20 million lines of code at least! I think, it's a huge bunch of work to
read through the code, understand it, looking for security holes, XSS attach
vectors etc.
So the time this will take is extra ordinary and I'm afraid, that some
things are not possible to understand inside some plugins without deeper
knowledge of what they are made for.

Don?t get me wrong, I vote for this review cycle. But also don?t miss this
points thinking about it.

Heiko Rabe
(www.code-styling.de)

-----Urspr?ngliche Nachricht-----
Von: wp-hackers-bounces at lists.automattic.com
[mailto:wp-hackers-bounces at lists.automattic.com] Im Auftrag von Paul
Gesendet: Donnerstag, 19. August 2010 22:32
An: wp-hackers at lists.automattic.com
Betreff: Re: [wp-hackers] Code reviews for plugins?

+1 on this. 

P-

On Aug 19, 2010, at 4:08 PM, Daniel Bachhuber wrote:

> I think it's a great idea as well. My coding has benefited tremendously
from the generosity of others, and I'd love to start being able to give
back.
> 
> On 19 Aug 2010, at 4:01 PM, Eric Mann wrote:
> 
>> I, for one, would love to participate in a peer review process.
>> 
>> I recommended last year that someone* put together a group of developers
to
>> review plug-ins.  I was hoping we could flag "reviewed" plug-ins in the
>> repository to give them a bit of extra work - like verifying that a new
version
>> really does worth with the version of WordPress it claims to.  If we
*could*
>> flag such plug-ins, it would give the quality ones more weight and allow
for a
>> quick filter or search.
>> 
>> In any case, +1 on the idea.  And seriously, keep us apprised regarding
any kind
>> of wpcodereview.com collaboration.
>> 
>> On August 19, 2010 at 7:44 PM Mike Schinkel <mikeschinkel at newclarity.net>
wrote:
>> 
>>> Matt:
>>> 
>>> I had the same idea recently and registered http://wpcodereview.com for
that
>>> purpose.  Want to collaborate?
>>> 
>>> Another option might be to see if we could somehow use the voting
mechanism
>>> that works so well to surface reviews of plugins on WordPress
Answers[1]?
>>> 
>>> Whatever the case, +1 on the concern and the desire to do something
about it.
>>> 
>>> -Mike
>>> [1] http://wordpress.stackexchange.com/
>>> 
>>> 
>>> On Aug 19, 2010, at 3:39 PM, Matt Jacob wrote:
>>> 
>>>> Fact: the quality of plugins in the repository is generally pretty low.
>>>> 
>>>> Obviously, there are exceptions, and those exceptions rise to the top
and
>>>> become more popular. But for the 10,000-some plugins listed, I bet that
>>>> fewer than 100 of those would be considered best practices in plugin
>>>> development. Unfortunately, most---not all---plugin developers probably
>>>> don't even give a crap.
>>>> 
>>>> For those developers who *do* give a crap (or several craps), and who
*do*
>>>> want to publish high-quality plugins, what resources are available? I
was
>>>> thinking it might be neat if more experienced WP developers from
wp-hackers
>>>> volunteered to do code reviews of up-and-coming plugins (initiated by
the
>>>> plugin developer; not just a random selection).
>>>> 
>>>> You could be the best software engineer in the world, but WordPress is
a
>>>> separate beast. It's a huge system that's evolved over many years, and
the
>>>> fact of the matter is that the more experience developers need to pass
on
>>>> the tribal knowledge they've acquired along the way. IMO, code reviews
are a
>>>> good way to do that.
>>>> 
>>>> Thoughts?
>>>> 
>>>> Matt
>>>> _______________________________________________
>>>> wp-hackers mailing list
>>>> wp-hackers at lists.automattic.com
>>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>> 
>>> _______________________________________________
>>> wp-hackers mailing list
>>> wp-hackers at lists.automattic.com
>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
> 
> --
> Daniel Bachhuber
> www.danielbachhuber.com
> danielbachhuber at gmail.com
> cell: +1 971 998 5407
> aim/skype/twitter: danielbachhuber
> 
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

_______________________________________________
wp-hackers mailing list
wp-hackers at lists.automattic.com
http://lists.automattic.com/mailman/listinfo/wp-hackers


From elfin at elfden.co.uk  Thu Aug 19 23:03:12 2010
From: elfin at elfden.co.uk (Rich Pedley)
Date: Fri, 20 Aug 2010 00:03:12 +0100
Subject: [wp-hackers] Code reviews for plugins?
In-Reply-To: <000001cb3fe3$44e33c60$cea9b520$@rabe@code-styling.de>
References: <4C6D885B.6010506@mattjacob.com>	<F657E634-5D14-445F-8545-023A62CD8D5E@newclarity.net>	<183630796.530862.1282248087954.JavaMail.open-xchange@oxusltgw05.schlund.de>	<57B84544-FB40-435F-809C-BA2786D7462D@gmail.com>	<AE12B082-EEFC-4FE1-AF52-ABDA655342F1@codehooligans.com>
	<000001cb3fe3$44e33c60$cea9b520$@rabe@code-styling.de>
Message-ID: <4C6DB830.3020603@elfden.co.uk>

On 19/08/2010 22:12, Heiko Rabe wrote:
[snip]
> Don?t get me wrong, I vote for this review cycle. But also don?t miss this
> points thinking about it.
>

additionally you have to review x version and as soon as a new version 
is released it should no longer be flagged as being well coded (or 
whatever) until it has been reassessed.

Rich

From matt at mattjacob.com  Thu Aug 19 23:34:25 2010
From: matt at mattjacob.com (Matt Jacob)
Date: Thu, 19 Aug 2010 16:34:25 -0700
Subject: [wp-hackers] Code reviews for plugins?
In-Reply-To: <183630796.530862.1282248087954.JavaMail.open-xchange@oxusltgw05.schlund.de>
References: <4C6D885B.6010506@mattjacob.com>	<F657E634-5D14-445F-8545-023A62CD8D5E@newclarity.net>
	<183630796.530862.1282248087954.JavaMail.open-xchange@oxusltgw05.schlund.de>
Message-ID: <4C6DBF81.1020409@mattjacob.com>

On 8/19/10 1:01 PM, Eric Mann wrote:
> review plug-ins.  I was hoping we could flag "reviewed" plug-ins in the
> repository to give them a bit of extra work - like verifying that a new version

I think some people are getting hung up on this idea, but I don't 
necessarily think it's a bad idea. Perhaps it could be step 2 or step 3 
in the process somewhere down the road.

As far as the plugin repo goes, I'm of the opinion that more weight 
should be given to plugins that are being actively maintained. Sure, 
some older plugins will continue to work as-is, but if that's the case, 
how hard is it to update your readme.txt with a "tested up to:" of at 
least the current minor release?

Anyway, back to the topic at hand...

Matt


From andrew at graymerica.com  Thu Aug 19 23:45:43 2010
From: andrew at graymerica.com (Andrew Gray)
Date: Thu, 19 Aug 2010 19:45:43 -0400
Subject: [wp-hackers] Code reviews for plugins
Message-ID: <7E9850B4-8EAE-4E26-B557-D3EFF0EA4BCA@graymerica.com>

I would like to see a search option for plugins where I could filter out 

Plugins that are for older versions or have not been updated in a while.  

I can determine if they are any good, but I would like to filter those that are for 2.6 or have been abandoned.

How ever some plugins, such as members only, still work for exactly what I want them to do and are older

http://wordpress.org/extend/plugins/members-only/  is what I use to keep a development site private and is for version 2.6.2

my 2 cents,

Andrew




From wordpress at cefm.ca  Thu Aug 19 23:58:58 2010
From: wordpress at cefm.ca (Charles Frees-Melvin)
Date: Thu, 19 Aug 2010 20:58:58 -0300
Subject: [wp-hackers] Code reviews for plugins
In-Reply-To: <7E9850B4-8EAE-4E26-B557-D3EFF0EA4BCA@graymerica.com>
References: <7E9850B4-8EAE-4E26-B557-D3EFF0EA4BCA@graymerica.com>
Message-ID: <DDCBCE12-6294-49E9-AC2D-5FC25A51ECD1@cefm.ca>

This is precisely the reason behind this  a well programmed plug-in is less likely to be broken by newer versions of WordPress, it will more likely just become obsolete. We have gone through this in the past. 

Remember when everyone used to call the database directly and the massive amounts of broken plugins when tags were brought into core. This review process not only adds a factor of security but that of plugin xyz broke my site because it was not using the proper APIs. 

--
Charles E. Frees-Melvin
charles at cefm.ca
www.cefm.ca
506-640-1007

Sent from my Rogers iPhone 3G

On 2010-08-19, at 20:45, Andrew Gray <andrew at graymerica.com> wrote:

> I would like to see a search option for plugins where I could filter out 
> 
> Plugins that are for older versions or have not been updated in a while.  
> 
> I can determine if they are any good, but I would like to filter those that are for 2.6 or have been abandoned.
> 
> How ever some plugins, such as members only, still work for exactly what I want them to do and are older
> 
> http://wordpress.org/extend/plugins/members-only/  is what I use to keep a development site private and is for version 2.6.2
> 
> my 2 cents,
> 
> Andrew
> 
> 
> 
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

From otto at ottodestruct.com  Fri Aug 20 00:09:40 2010
From: otto at ottodestruct.com (Otto)
Date: Thu, 19 Aug 2010 19:09:40 -0500
Subject: [wp-hackers] Code reviews for plugins
In-Reply-To: <7E9850B4-8EAE-4E26-B557-D3EFF0EA4BCA@graymerica.com>
References: <7E9850B4-8EAE-4E26-B557-D3EFF0EA4BCA@graymerica.com>
Message-ID: <AANLkTi=-A17XRMn5sL6UnnfERT4duw_s7ObBwjkpKE9h@mail.gmail.com>

On Thu, Aug 19, 2010 at 6:45 PM, Andrew Gray <andrew at graymerica.com> wrote:
> I would like to see a search option for plugins where I could filter out Plugins that are for older versions or have not been updated in a while.

I was thinking the same thing the other day. I was thinking 2.8, but
same basic principle.

On the other hand, I still use some well-made plugins that haven't
been updated since 2.7...

-Otto

From otto at ottodestruct.com  Fri Aug 20 00:11:54 2010
From: otto at ottodestruct.com (Otto)
Date: Thu, 19 Aug 2010 19:11:54 -0500
Subject: [wp-hackers] WP.org plugin repository - multiple users
In-Reply-To: <967706437.528925.1282245312314.JavaMail.open-xchange@oxusltgw05.schlund.de>
References: <1967CB0F-18B9-4723-A9C1-2CE00B66392D@thisismyurl.com>
	<AANLkTimE1uQ1JyFBC83-aOSqs7+FBwNSKe9_Md_v7RUY@mail.gmail.com>
	<967706437.528925.1282245312314.JavaMail.open-xchange@oxusltgw05.schlund.de>
Message-ID: <AANLkTi=ydOLhQ_sUnCzFig69Uyj9Gp9tFUWzacBb6msY@mail.gmail.com>

Yes, that.

Adding them to the admin panel gives them commit access.

Adding them to the readme puts their name in the description area.

Protip: always use your wp.org login name in the author area of the
readme. Makes things work better. Not actually *required*, but it just
works better in the long run.

-Otto



On Thu, Aug 19, 2010 at 2:15 PM, Eric Mann <eric at eamann.com> wrote:
> That's the first step, yes.
>
> The seconds step, after adding them to the contributors line in the Readme file
> is to add them to the repository itself:
>
> ?- Go to the repository (wordpress.org/extend/plugins) and log in with the main
> account
> ?- Go to your plug-in and click the "admin" tab
> ?- Add the user's WordPress login name to the list of committers by entering
> their name and clicking "Add Committer"
>
> That's it!
>
> On August 19, 2010 at 6:59 PM Chip Bennett <chip at chipbennett.net> wrote:
>
>> Add the wordpress.org username of the contributor you want to add to the
>> "contributors" line in the header info, and that person will have SVN commit
>> access to the plugin.
>>
>> On Thu, Aug 19, 2010 at 1:57 PM, Christopher Ross
>> <cross at thisismyurl.com>wrote:
>>
>> > Is there a way to allow two developers access to a plugin on the
>> > wordpress.org plugin repository? Or do updates always have to come from
>> > the account it was created with?
>> >
>> > __
>> >
>> > Christopher Ross
>> >
>> > Toronto? ? ? 1 (416) 840-5828
>> > Fredericton 1 (506) 474-2708
>> > New Orleans 1 (504) 322 3485
>> >
>> > http://christopherross.ca
>> > http://www.thisismyurl.com
>> >
>> > _______________________________________________
>> > wp-hackers mailing list
>> > wp-hackers at lists.automattic.com
>> > http://lists.automattic.com/mailman/listinfo/wp-hackers
>> >
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From wp-hackers at striderweb.com  Fri Aug 20 00:13:55 2010
From: wp-hackers at striderweb.com (Stephen Rider)
Date: Thu, 19 Aug 2010 19:13:55 -0500
Subject: [wp-hackers] multiple databases vs different database prefixes
In-Reply-To: <2DCF84D4-97F6-4719-98FE-BBA7232D0F59@gmail.com>
References: <2DCF84D4-97F6-4719-98FE-BBA7232D0F59@gmail.com>
Message-ID: <F7E4F6D6-B1D9-44CB-B5E3-9281465D4392@striderweb.com>

If you do decide to run 300 separate WP installs, you might take a look at this:  http://striderweb.com/nerdaphernalia/features/virtual-multiblog/

It will make actual file maintenance much easier.

Steve

On Aug 15, 2010, at 4:48 PM, Ken Zaraque wrote:

> I will be creating numerous WP sites - roughly 300+.  I will not be using the multisite feature. These are 300+ separate WP installations.
> 
> Question: Is it better to create each site with it's own database, or should all 300+ sites be in one database but each site having different table prefixes? 
> 
> My concern is scaling.  I am concerned that running all 300+ sites in one database would slow down performance vs having separate databases. Although, having all tables be in one database is very convenient if I ever need to share information between sites.
> 
> Maybe I can use a combination of both?  
> 
> What are your thoughts? 


From 24-7 at gmx.net  Fri Aug 20 06:29:10 2010
From: 24-7 at gmx.net (24/7)
Date: Thu, 19 Aug 2010 23:29:10 -0700 (PDT)
Subject: [wp-hackers] Code reviews for plugins?
In-Reply-To: <000001cb3fe3$44e33c60$cea9b520$@rabe@code-styling.de>
References: <4C6D885B.6010506@mattjacob.com>
	<F657E634-5D14-445F-8545-023A62CD8D5E@newclarity.net>
	<183630796.530862.1282248087954.JavaMail.open-xchange@oxusltgw05.schlund.de>
	<57B84544-FB40-435F-809C-BA2786D7462D@gmail.com>
	<AE12B082-EEFC-4FE1-AF52-ABDA655342F1@codehooligans.com>
	<000001cb3fe3$44e33c60$cea9b520$@rabe@code-styling.de>
Message-ID: <1992312d-02d2-41f9-87b1-19bddf42470d@f42g2000yqn.googlegroups.com>



On 19 Aug., 23:12, "Heiko Rabe" <heiko.r... at code-styling.de> wrote:
> During this time delay a well done plugin will be presented to audience as a
> "bad" one, which is wrong but felt so by audience for psychological reasons.
> Keep in mind, that this affects also the download and utilization rates of
> plugins!

I guess you could just look at the (not that old) theme-reviewers list
(or as joseph scott) and the threads that were about the review
process. They had a hard time in the beginning with a lot of themes
stuck in the queue waiting for their review. As far as i remember they
found some ways to optimize the process. Maybe it's a good starting
point.

From jayarjo at gmail.com  Fri Aug 20 09:42:27 2010
From: jayarjo at gmail.com (Davit Barbakadze)
Date: Fri, 20 Aug 2010 13:42:27 +0400
Subject: [wp-hackers] can one redefine and move UI for custom post types?
Message-ID: <AANLkTiktyoubR0q+xUvZqb_1OegrwcXr-rZKC-O9Uccd@mail.gmail.com>

My problem is that I need to create couple of custom post types, which
are kinda related and I want to group them under single top level
menu. With the information I got at the moment, I can't see how I can
achieve this, without manually messing with the menu array. Is there
any other way?

-- 
Davit Barbakadze

From Mo.Braga at LBi.com  Fri Aug 20 10:49:58 2010
From: Mo.Braga at LBi.com (Mo Braga)
Date: Fri, 20 Aug 2010 11:49:58 +0100
Subject: [wp-hackers] Custom comment for custom post type
Message-ID: <FADDB49D392DA246855E4F9D665F9980099C18E47F@ukexhcm1.lbi.local>

Hi,

Is it possible to customise the comment form (say, add an "Agree" checkbox) just for a particular custom post type?
Mo


________________________________
LBi Ltd is registered in England and Wales, the registered number and address are 03080409, Truman Brewery, 146 Brick Lane, London, E1 6RU. This email may contain confidential and/or privileged information. If you are not the intended recipient (or have received this e-mail in error) please notify the sender immediately and destroy this e-mail. Any unauthorised copying, disclosure or distribution of the material in this e-mail is strictly forbidden.

From chip at chipbennett.net  Fri Aug 20 11:03:21 2010
From: chip at chipbennett.net (Chip Bennett)
Date: Fri, 20 Aug 2010 06:03:21 -0500
Subject: [wp-hackers] Custom comment for custom post type
In-Reply-To: <FADDB49D392DA246855E4F9D665F9980099C18E47F@ukexhcm1.lbi.local>
References: <FADDB49D392DA246855E4F9D665F9980099C18E47F@ukexhcm1.lbi.local>
Message-ID: <AANLkTim9QdiGVVpOnnhzdwLUbaAFt9fcvtsyRPVf0yKe@mail.gmail.com>

Someone may have a better answer, but if your custom post type also has a
custom taxonomy, could you use a is_tax('my-custom-taxonomy') combined with
the comment_form_after_fields hook, to add additional form field(s)?

Chip

On Fri, Aug 20, 2010 at 5:49 AM, Mo Braga <Mo.Braga at lbi.com> wrote:

> Hi,
>
> Is it possible to customise the comment form (say, add an "Agree" checkbox)
> just for a particular custom post type?
> Mo
>
>
> ________________________________
> LBi Ltd is registered in England and Wales, the registered number and
> address are 03080409, Truman Brewery, 146 Brick Lane, London, E1 6RU. This
> email may contain confidential and/or privileged information. If you are not
> the intended recipient (or have received this e-mail in error) please notify
> the sender immediately and destroy this e-mail. Any unauthorised copying,
> disclosure or distribution of the material in this e-mail is strictly
> forbidden.
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From chip at chipbennett.net  Fri Aug 20 11:06:43 2010
From: chip at chipbennett.net (Chip Bennett)
Date: Fri, 20 Aug 2010 06:06:43 -0500
Subject: [wp-hackers] Custom comment for custom post type
In-Reply-To: <AANLkTim9QdiGVVpOnnhzdwLUbaAFt9fcvtsyRPVf0yKe@mail.gmail.com>
References: <FADDB49D392DA246855E4F9D665F9980099C18E47F@ukexhcm1.lbi.local>
	<AANLkTim9QdiGVVpOnnhzdwLUbaAFt9fcvtsyRPVf0yKe@mail.gmail.com>
Message-ID: <AANLkTi=0Hd+m5_e27c9uyX=aT-00E3hVYXZhAtnP9ECN@mail.gmail.com>

Love this Codex page:
http://codex.wordpress.org/Conditional_Tags

Try if( get_post_type() == 'my-custom-post-type' ), combined with the *
comment_form_after_fields* hook?

Chip

On Fri, Aug 20, 2010 at 6:03 AM, Chip Bennett <chip at chipbennett.net> wrote:

> Someone may have a better answer, but if your custom post type also has a
> custom taxonomy, could you use a is_tax('my-custom-taxonomy') combined with
> the comment_form_after_fields hook, to add additional form field(s)?
>
> Chip
>
>
> On Fri, Aug 20, 2010 at 5:49 AM, Mo Braga <Mo.Braga at lbi.com> wrote:
>
>> Hi,
>>
>> Is it possible to customise the comment form (say, add an "Agree"
>> checkbox) just for a particular custom post type?
>> Mo
>>
>>
>> ________________________________
>> LBi Ltd is registered in England and Wales, the registered number and
>> address are 03080409, Truman Brewery, 146 Brick Lane, London, E1 6RU. This
>> email may contain confidential and/or privileged information. If you are not
>> the intended recipient (or have received this e-mail in error) please notify
>> the sender immediately and destroy this e-mail. Any unauthorised copying,
>> disclosure or distribution of the material in this e-mail is strictly
>> forbidden.
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
>
>

From compatiblesamuel at gmail.com  Fri Aug 20 11:18:09 2010
From: compatiblesamuel at gmail.com (samuel compatible)
Date: Fri, 20 Aug 2010 03:18:09 -0800
Subject: [wp-hackers] Custom comment for custom post type
In-Reply-To: <FADDB49D392DA246855E4F9D665F9980099C18E47F@ukexhcm1.lbi.local>
References: <FADDB49D392DA246855E4F9D665F9980099C18E47F@ukexhcm1.lbi.local>
Message-ID: <AANLkTi=b--+XbBWx7YH=xcQApvN5q-YG3Nh=uWhzyhgS@mail.gmail.com>

yeap

On Fri, Aug 20, 2010 at 2:49 AM, Mo Braga <Mo.Braga at lbi.com> wrote:

> Hi,
>
> Is it possible to customise the comment form (say, add an "Agree" checkbox)
> just for a particular custom post type?
> Mo
>
>
> ________________________________
> LBi Ltd is registered in England and Wales, the registered number and
> address are 03080409, Truman Brewery, 146 Brick Lane, London, E1 6RU. This
> email may contain confidential and/or privileged information. If you are not
> the intended recipient (or have received this e-mail in error) please notify
> the sender immediately and destroy this e-mail. Any unauthorised copying,
> disclosure or distribution of the material in this e-mail is strictly
> forbidden.
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From kenzaraque at gmail.com  Fri Aug 20 19:38:46 2010
From: kenzaraque at gmail.com (ken zarque)
Date: Fri, 20 Aug 2010 12:38:46 -0700
Subject: [wp-hackers] multiple databases vs different database prefixes
In-Reply-To: <F7E4F6D6-B1D9-44CB-B5E3-9281465D4392@striderweb.com>
References: <2DCF84D4-97F6-4719-98FE-BBA7232D0F59@gmail.com>
	<F7E4F6D6-B1D9-44CB-B5E3-9281465D4392@striderweb.com>
Message-ID: <AANLkTimn4HvWMRJECLeA=Li2jEdXdBYLFB2=U4Cb77ne@mail.gmail.com>

Thank you again, everyone.

After long talks with the IT team, we decided to go with MS which uses one
large database.

After installing WP with MS turned on, we ran into this question "How do we
deploy single sites in an MS environment from one environment to another".
This is because we have a dev, staging and production environment.

Note: Should I be asking this on a separate thread?


On Thu, Aug 19, 2010 at 5:13 PM, Stephen Rider <wp-hackers at striderweb.com>wrote:

> If you do decide to run 300 separate WP installs, you might take a look at
> this:  http://striderweb.com/nerdaphernalia/features/virtual-multiblog/
>
> It will make actual file maintenance much easier.
>
> Steve
>
> On Aug 15, 2010, at 4:48 PM, Ken Zaraque wrote:
>
> > I will be creating numerous WP sites - roughly 300+.  I will not be using
> the multisite feature. These are 300+ separate WP installations.
> >
> > Question: Is it better to create each site with it's own database, or
> should all 300+ sites be in one database but each site having different
> table prefixes?
> >
> > My concern is scaling.  I am concerned that running all 300+ sites in one
> database would slow down performance vs having separate databases. Although,
> having all tables be in one database is very convenient if I ever need to
> share information between sites.
> >
> > Maybe I can use a combination of both?
> >
> > What are your thoughts?
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From andrew at graymerica.com  Fri Aug 20 20:18:19 2010
From: andrew at graymerica.com (Andrew Gray)
Date: Fri, 20 Aug 2010 16:18:19 -0400
Subject: [wp-hackers] DB inserts into usertable
Message-ID: <724E519F-DF55-4807-8469-5A9D2E55D516@graymerica.com>

I just noticed that some of my databases for my installs had a bunch of random users.

Across multiple Databases, with the same password and style.  I am sure it is because I was lazy and used a master password in a bunch of my Wordpress installs on that server.

At this point, I have fixed the problem, but has anyone else seen this?   Is is a bad plugin or something else.

Here is an example of what was in all my DBs,

No timestamp, gmail addresses, First Name Last Initial.  Every name was different, but the password was the same.

INSERT INTO `wp_users` (`ID`, `user_login`, `user_pass`, `user_nicename`, `user_email`, `user_url`, `user_registered`, `user_activation_key`, `user_status`, `display_name`) VALUES
(2, 'SofiaT', '$P$BWrPjMxeckS8Qjhhd.3CqhhpM5c5G3/', 'Sofia Turner', 'SofiaT at gmail.com', '', '0000-00-00 00:00:00', '', 0, 'Sofia Turner'),
(3, 'AlexandraR', '$P$BWrPjMxeckS8Qjhhd.3CqhhpM5c5G3/', 'Alexandra Russell', 'AlexandraR at gmail.com', '', '0000-00-00 00:00:00', '', 0, 'Alexandra Russell'),
(4, 'JosephB', '$P$BWrPjMxeckS8Qjhhd.3CqhhpM5c5G3/', 'Joseph Butler', 'JosephB at gmail.com', '', '0000-00-00 00:00:00', '', 0, 'Joseph Butler'),


From otto at ottodestruct.com  Fri Aug 20 20:30:07 2010
From: otto at ottodestruct.com (Otto)
Date: Fri, 20 Aug 2010 15:30:07 -0500
Subject: [wp-hackers] DB inserts into usertable
In-Reply-To: <724E519F-DF55-4807-8469-5A9D2E55D516@graymerica.com>
References: <724E519F-DF55-4807-8469-5A9D2E55D516@graymerica.com>
Message-ID: <AANLkTikup2WU6UO1vDpWzGPo_76gyu9-tcX-QNpjEAEO@mail.gmail.com>

Do you have user registration enabled? If so, then it's just spam
registrations. If not, then you likely got hacked.

-Otto



On Fri, Aug 20, 2010 at 3:18 PM, Andrew Gray <andrew at graymerica.com> wrote:
> I just noticed that some of my databases for my installs had a bunch of random users.
>
> Across multiple Databases, with the same password and style. ?I am sure it is because I was lazy and used a master password in a bunch of my Wordpress installs on that server.
>
> At this point, I have fixed the problem, but has anyone else seen this? ? Is is a bad plugin or something else.
>
> Here is an example of what was in all my DBs,
>
> No timestamp, gmail addresses, First Name Last Initial. ?Every name was different, but the password was the same.
>
> INSERT INTO `wp_users` (`ID`, `user_login`, `user_pass`, `user_nicename`, `user_email`, `user_url`, `user_registered`, `user_activation_key`, `user_status`, `display_name`) VALUES
> (2, 'SofiaT', '$P$BWrPjMxeckS8Qjhhd.3CqhhpM5c5G3/', 'Sofia Turner', 'SofiaT at gmail.com', '', '0000-00-00 00:00:00', '', 0, 'Sofia Turner'),
> (3, 'AlexandraR', '$P$BWrPjMxeckS8Qjhhd.3CqhhpM5c5G3/', 'Alexandra Russell', 'AlexandraR at gmail.com', '', '0000-00-00 00:00:00', '', 0, 'Alexandra Russell'),
> (4, 'JosephB', '$P$BWrPjMxeckS8Qjhhd.3CqhhpM5c5G3/', 'Joseph Butler', 'JosephB at gmail.com', '', '0000-00-00 00:00:00', '', 0, 'Joseph Butler'),
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From angelia at 10sexyapples.com  Sat Aug 21 01:49:35 2010
From: angelia at 10sexyapples.com (Angelia Baladon)
Date: Fri, 20 Aug 2010 18:49:35 -0700
Subject: [wp-hackers] custom_post_type and custom taxonomy naming
Message-ID: <AANLkTikeCB7S_-gBXKQe-T-86Kv0enog==aGrnbjbwK_@mail.gmail.com>

Logic is guiding me to create a custom post type called product, and
assigning a custom taxonomy 'also called product' to it. I believe that I
have seen this method recommended in some instances, but, wanted to do a
double check with those more knowledgeable about the inner workings of WP
before I committed to it. In my limited knowledge, I can't see where this
identical naming would cause any problems, other than repetitive permalinks
if not handled correctly, but, better safe than sorry~ Can anyone confirm
for me that this is the way to go?

From mikeschinkel at newclarity.net  Sat Aug 21 03:26:19 2010
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Fri, 20 Aug 2010 23:26:19 -0400
Subject: [wp-hackers] custom_post_type and custom taxonomy naming
In-Reply-To: <AANLkTikeCB7S_-gBXKQe-T-86Kv0enog==aGrnbjbwK_@mail.gmail.com>
References: <AANLkTikeCB7S_-gBXKQe-T-86Kv0enog==aGrnbjbwK_@mail.gmail.com>
Message-ID: <470DB67C-C4FB-4A8C-87FB-2006CD9C0202@newclarity.net>

I don't understand your use-cases or the problems you are trying to solve well enough.
Also, I'm getting ready to drive for four hours to WordCamp Savannah, so don't expect a response any time soon...

-Mike
On Aug 20, 2010, at 9:49 PM, Angelia Baladon wrote:

> Logic is guiding me to create a custom post type called product, and
> assigning a custom taxonomy 'also called product' to it. I believe that I
> have seen this method recommended in some instances, but, wanted to do a
> double check with those more knowledgeable about the inner workings of WP
> before I committed to it. In my limited knowledge, I can't see where this
> identical naming would cause any problems, other than repetitive permalinks
> if not handled correctly, but, better safe than sorry~ Can anyone confirm
> for me that this is the way to go?
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers


From prodevstudio+wordpress at gmail.com  Sat Aug 21 03:27:04 2010
From: prodevstudio+wordpress at gmail.com (Azizur Rahman)
Date: Sat, 21 Aug 2010 04:27:04 +0100
Subject: [wp-hackers] Stopping recursion with save_post/wp_insert_post action
Message-ID: <AANLkTi=VpRVOozrD_CF=ruJhEOXNd9bdosn-7CSdf2Jq@mail.gmail.com>

Hi All,

I am writing a plugin that hooks into wp_insert_post action.

The problem is that I am going into recursion at the moment and not sure how
to stop it.

Here is the pseudo code logic
*********************************************************************
on wp_insert_post or save_post

check the $post->content for x.
return if  x is NOT found

if x is found do
   if x does NOT have meta key/value _x_details_ set
       $x_details_id = wp_insert_post( $x_details);
       add_post_meta($post_ID, '_x_details_', $x_details_id, true);
end
*********************************************************************
I am sure you can see the recursion I am getting myself into when calling
wp_insert_post( $x_details);

what is the best way to stop this recursion?

Is there a better way of doing this?


Thanks in advanced!

Kind Regards,

Azizur Rahman

From mikeschinkel at newclarity.net  Sat Aug 21 03:49:53 2010
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Fri, 20 Aug 2010 23:49:53 -0400
Subject: [wp-hackers] custom_post_type and custom taxonomy naming
In-Reply-To: <470DB67C-C4FB-4A8C-87FB-2006CD9C0202@newclarity.net>
References: <AANLkTikeCB7S_-gBXKQe-T-86Kv0enog==aGrnbjbwK_@mail.gmail.com>
	<470DB67C-C4FB-4A8C-87FB-2006CD9C0202@newclarity.net>
Message-ID: <EB1AB276-E194-4C3A-951A-7EA5CF08E329@newclarity.net>

Oops, I thought she was sending me a private email. Sorry...Doh! :)


On Aug 20, 2010, at 11:26 PM, Mike Schinkel wrote:

> I don't understand your use-cases or the problems you are trying to solve well enough.
> Also, I'm getting ready to drive for four hours to WordCamp Savannah, so don't expect a response any time soon...
> 
> -Mike
> On Aug 20, 2010, at 9:49 PM, Angelia Baladon wrote:
> 
>> Logic is guiding me to create a custom post type called product, and
>> assigning a custom taxonomy 'also called product' to it. I believe that I
>> have seen this method recommended in some instances, but, wanted to do a
>> double check with those more knowledgeable about the inner workings of WP
>> before I committed to it. In my limited knowledge, I can't see where this
>> identical naming would cause any problems, other than repetitive permalinks
>> if not handled correctly, but, better safe than sorry~ Can anyone confirm
>> for me that this is the way to go?
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
> 
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers


From otto at ottodestruct.com  Sat Aug 21 03:51:05 2010
From: otto at ottodestruct.com (Otto)
Date: Fri, 20 Aug 2010 22:51:05 -0500
Subject: [wp-hackers] Stopping recursion with save_post/wp_insert_post
	action
In-Reply-To: <AANLkTi=VpRVOozrD_CF=ruJhEOXNd9bdosn-7CSdf2Jq@mail.gmail.com>
References: <AANLkTi=VpRVOozrD_CF=ruJhEOXNd9bdosn-7CSdf2Jq@mail.gmail.com>
Message-ID: <AANLkTik3wB6COQDTdYq=1CnwHgdSmirKmP9e4OgbrdkL@mail.gmail.com>

Why are you calling wp_insert_post again?

-Otto



On Fri, Aug 20, 2010 at 10:27 PM, Azizur Rahman
<prodevstudio+wordpress at gmail.com> wrote:
> Hi All,
>
> I am writing a plugin that hooks into wp_insert_post action.
>
> The problem is that I am going into recursion at the moment and not sure how
> to stop it.
>
> Here is the pseudo code logic
> *********************************************************************
> on wp_insert_post or save_post
>
> check the $post->content for x.
> return if ?x is NOT found
>
> if x is found do
> ? if x does NOT have meta key/value _x_details_ set
> ? ? ? $x_details_id = wp_insert_post( $x_details);
> ? ? ? add_post_meta($post_ID, '_x_details_', $x_details_id, true);
> end
> *********************************************************************
> I am sure you can see the recursion I am getting myself into when calling
> wp_insert_post( $x_details);
>
> what is the best way to stop this recursion?
>
> Is there a better way of doing this?
>
>
> Thanks in advanced!
>
> Kind Regards,
>
> Azizur Rahman
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From prodevstudio at gmail.com  Sat Aug 21 04:01:06 2010
From: prodevstudio at gmail.com (ProDevStudio)
Date: Sat, 21 Aug 2010 05:01:06 +0100
Subject: [wp-hackers] Stopping recursion with save_post/wp_insert_post
	action
In-Reply-To: <AANLkTik3wB6COQDTdYq=1CnwHgdSmirKmP9e4OgbrdkL@mail.gmail.com>
References: <AANLkTi=VpRVOozrD_CF=ruJhEOXNd9bdosn-7CSdf2Jq@mail.gmail.com>
	<AANLkTik3wB6COQDTdYq=1CnwHgdSmirKmP9e4OgbrdkL@mail.gmail.com>
Message-ID: <AANLkTi=1-i+XWcNbtNQ0Vvo9tz_HQnd5T-vRktVWW24Q@mail.gmail.com>

I am calling wp_insert_post again to place a media attachment.

I think I found a way... which is to remove the action before calling
wp_insert_post again.


Kind Regards,
Azizur Rahman


On Sat, Aug 21, 2010 at 4:51 AM, Otto <otto at ottodestruct.com> wrote:

> Why are you calling wp_insert_post again?
>
> -Otto
>
>
>
> On Fri, Aug 20, 2010 at 10:27 PM, Azizur Rahman
> <prodevstudio+wordpress at gmail.com <prodevstudio%2Bwordpress at gmail.com>>
> wrote:
> > Hi All,
> >
> > I am writing a plugin that hooks into wp_insert_post action.
> >
> > The problem is that I am going into recursion at the moment and not sure
> how
> > to stop it.
> >
> > Here is the pseudo code logic
> > *********************************************************************
> > on wp_insert_post or save_post
> >
> > check the $post->content for x.
> > return if  x is NOT found
> >
> > if x is found do
> >   if x does NOT have meta key/value _x_details_ set
> >       $x_details_id = wp_insert_post( $x_details);
> >       add_post_meta($post_ID, '_x_details_', $x_details_id, true);
> > end
> > *********************************************************************
> > I am sure you can see the recursion I am getting myself into when calling
> > wp_insert_post( $x_details);
> >
> > what is the best way to stop this recursion?
> >
> > Is there a better way of doing this?
> >
> >
> > Thanks in advanced!
> >
> > Kind Regards,
> >
> > Azizur Rahman
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers at lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> >
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From mark at simplercomputing.net  Sat Aug 21 04:06:22 2010
From: mark at simplercomputing.net (Mark E)
Date: Fri, 20 Aug 2010 22:06:22 -0600
Subject: [wp-hackers] Stopping recursion with save_post/wp_insert_post
 action
In-Reply-To: <AANLkTi=VpRVOozrD_CF=ruJhEOXNd9bdosn-7CSdf2Jq@mail.gmail.com>
References: <AANLkTi=VpRVOozrD_CF=ruJhEOXNd9bdosn-7CSdf2Jq@mail.gmail.com>
Message-ID: <4C6F50BE.7020303@simplercomputing.net>

It's happening because you have a hook on wp_insert_post and in your 
hook function you call wp_insert_post. So it's going to keep going and 
going and going and going.

Looks to me like you don't really need to call wp_insert_post inside 
your hook function. Just add the post meta and be done with it - your 
hook function should be passed the post ID, so that's about all you need 
to add post meta. Or least that's how it looks to me based on the pseudo 
code you wrote.

Mark



On 08/20/2010 09:27 PM, Azizur Rahman wrote:
> Hi All,
>
> I am writing a plugin that hooks into wp_insert_post action.
>
> The problem is that I am going into recursion at the moment and not sure how
> to stop it.
>
> Here is the pseudo code logic
> *********************************************************************
> on wp_insert_post or save_post
>
> check the $post->content for x.
> return if  x is NOT found
>
> if x is found do
>     if x does NOT have meta key/value _x_details_ set
>         $x_details_id = wp_insert_post( $x_details);
>         add_post_meta($post_ID, '_x_details_', $x_details_id, true);
> end
> *********************************************************************
> I am sure you can see the recursion I am getting myself into when calling
> wp_insert_post( $x_details);
>
> what is the best way to stop this recursion?

From goldenapplesdesign at gmail.com  Sat Aug 21 04:14:13 2010
From: goldenapplesdesign at gmail.com (Nathaniel Taintor)
Date: Sat, 21 Aug 2010 00:14:13 -0400
Subject: [wp-hackers] Stopping recursion with save_post/wp_insert_post
	action
In-Reply-To: <AANLkTi=1-i+XWcNbtNQ0Vvo9tz_HQnd5T-vRktVWW24Q@mail.gmail.com>
References: <AANLkTi=VpRVOozrD_CF=ruJhEOXNd9bdosn-7CSdf2Jq@mail.gmail.com>
	<AANLkTik3wB6COQDTdYq=1CnwHgdSmirKmP9e4OgbrdkL@mail.gmail.com>
	<AANLkTi=1-i+XWcNbtNQ0Vvo9tz_HQnd5T-vRktVWW24Q@mail.gmail.com>
Message-ID: <717FE457-8012-43FA-9690-ABBAD188ED73@gmail.com>

Or, check for the post type at the beginning of your function.  
Presumably you wouldn't need to run this function on a media  
attachment, so if $post->post_type == 'attachment' then return.

Than

On Aug 21, 2010, at 12:01 AM, ProDevStudio <prodevstudio at gmail.com>  
wrote:

> I am calling wp_insert_post again to place a media attachment.
>
> I think I found a way... which is to remove the action before calling
> wp_insert_post again.
>
>
> Kind Regards,
> Azizur Rahman
>
>
> On Sat, Aug 21, 2010 at 4:51 AM, Otto <otto at ottodestruct.com> wrote:
>
>> Why are you calling wp_insert_post again?
>>
>> -Otto
>>
>>
>>
>> On Fri, Aug 20, 2010 at 10:27 PM, Azizur Rahman
>> <prodevstudio+wordpress at gmail.com <prodevstudio 
>> %2Bwordpress at gmail.com>>
>> wrote:
>>> Hi All,
>>>
>>> I am writing a plugin that hooks into wp_insert_post action.
>>>
>>> The problem is that I am going into recursion at the moment and  
>>> not sure
>> how
>>> to stop it.
>>>
>>> Here is the pseudo code logic
>>> *** 
>>> ******************************************************************
>>> on wp_insert_post or save_post
>>>
>>> check the $post->content for x.
>>> return if  x is NOT found
>>>
>>> if x is found do
>>>  if x does NOT have meta key/value _x_details_ set
>>>      $x_details_id = wp_insert_post( $x_details);
>>>      add_post_meta($post_ID, '_x_details_', $x_details_id, true);
>>> end
>>> *** 
>>> ******************************************************************
>>> I am sure you can see the recursion I am getting myself into when  
>>> calling
>>> wp_insert_post( $x_details);
>>>
>>> what is the best way to stop this recursion?
>>>
>>> Is there a better way of doing this?
>>>
>>>
>>> Thanks in advanced!
>>>
>>> Kind Regards,
>>>
>>> Azizur Rahman
>>> ____________________________

From mark at simplercomputing.net  Sat Aug 21 04:15:05 2010
From: mark at simplercomputing.net (Mark E)
Date: Fri, 20 Aug 2010 22:15:05 -0600
Subject: [wp-hackers] Stopping recursion with save_post/wp_insert_post
 action
In-Reply-To: <AANLkTi=1-i+XWcNbtNQ0Vvo9tz_HQnd5T-vRktVWW24Q@mail.gmail.com>
References: <AANLkTi=VpRVOozrD_CF=ruJhEOXNd9bdosn-7CSdf2Jq@mail.gmail.com>	<AANLkTik3wB6COQDTdYq=1CnwHgdSmirKmP9e4OgbrdkL@mail.gmail.com>
	<AANLkTi=1-i+XWcNbtNQ0Vvo9tz_HQnd5T-vRktVWW24Q@mail.gmail.com>
Message-ID: <4C6F52C9.6030701@simplercomputing.net>



On 08/20/2010 10:01 PM, ProDevStudio wrote:
> I am calling wp_insert_post again to place a media attachment.

You might look at wp_insert_attachment()

Mark

From prodevstudio+wordpress at gmail.com  Sat Aug 21 04:21:56 2010
From: prodevstudio+wordpress at gmail.com (Azizur Rahman)
Date: Sat, 21 Aug 2010 05:21:56 +0100
Subject: [wp-hackers] Stopping recursion with save_post/wp_insert_post
	action
In-Reply-To: <4C6F52C9.6030701@simplercomputing.net>
References: <AANLkTi=VpRVOozrD_CF=ruJhEOXNd9bdosn-7CSdf2Jq@mail.gmail.com>
	<AANLkTik3wB6COQDTdYq=1CnwHgdSmirKmP9e4OgbrdkL@mail.gmail.com>
	<AANLkTi=1-i+XWcNbtNQ0Vvo9tz_HQnd5T-vRktVWW24Q@mail.gmail.com>
	<4C6F52C9.6030701@simplercomputing.net>
Message-ID: <AANLkTinKWhT5znbUkRUnpBRMdXrS+r02XLkRn6xzjgiL@mail.gmail.com>

My media attachments are not a file they are simply an url to file on
another server which end user does not know the full path.

I have got it working by removing the hook before calling it again.

Thank you all for your help.

Kind Regards,
Azizur Rahman

On Sat, Aug 21, 2010 at 5:15 AM, Mark E <mark at simplercomputing.net> wrote:

>
>
> On 08/20/2010 10:01 PM, ProDevStudio wrote:
>
>> I am calling wp_insert_post again to place a media attachment.
>>
>
> You might look at wp_insert_attachment()
>
> Mark
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From angelia at 10sexyapples.com  Sat Aug 21 04:43:15 2010
From: angelia at 10sexyapples.com (Angelia Baladon)
Date: Fri, 20 Aug 2010 21:43:15 -0700
Subject: [wp-hackers] custom_post_type and custom taxonomy naming
Message-ID: <AANLkTi=ESR1CGH+UwZ8+y5-mrky+nepvOviJDjxHOPPK@mail.gmail.com>

Funny Mike. No worries. I wasn't expecting much of a response on it anyway
as it was a pretty ridiculously paranoid question to begin with.

Sort of like me as a person ... every time I post on here I imagine that
everyone reading my question/comment is rolling their eyes and muttering
#$@! newbie under their breath.. heh.

From otto at ottodestruct.com  Sat Aug 21 06:13:22 2010
From: otto at ottodestruct.com (Otto)
Date: Sat, 21 Aug 2010 01:13:22 -0500
Subject: [wp-hackers] Stopping recursion with save_post/wp_insert_post
	action
In-Reply-To: <AANLkTinKWhT5znbUkRUnpBRMdXrS+r02XLkRn6xzjgiL@mail.gmail.com>
References: <AANLkTi=VpRVOozrD_CF=ruJhEOXNd9bdosn-7CSdf2Jq@mail.gmail.com>
	<AANLkTik3wB6COQDTdYq=1CnwHgdSmirKmP9e4OgbrdkL@mail.gmail.com>
	<AANLkTi=1-i+XWcNbtNQ0Vvo9tz_HQnd5T-vRktVWW24Q@mail.gmail.com>
	<4C6F52C9.6030701@simplercomputing.net>
	<AANLkTinKWhT5znbUkRUnpBRMdXrS+r02XLkRn6xzjgiL@mail.gmail.com>
Message-ID: <AANLkTikxLYK7K_5WFoBfbUGVqnx9AFFG89vvG7tUsnj_@mail.gmail.com>

Don't remove the hook. Nathaniel was correct, check the post_type instead.

-Otto



On Fri, Aug 20, 2010 at 11:21 PM, Azizur Rahman
<prodevstudio+wordpress at gmail.com> wrote:
> My media attachments are not a file they are simply an url to file on
> another server which end user does not know the full path.
>
> I have got it working by removing the hook before calling it again.
>
> Thank you all for your help.
>
> Kind Regards,
> Azizur Rahman
>
> On Sat, Aug 21, 2010 at 5:15 AM, Mark E <mark at simplercomputing.net> wrote:
>
>>
>>
>> On 08/20/2010 10:01 PM, ProDevStudio wrote:
>>
>>> I am calling wp_insert_post again to place a media attachment.
>>>
>>
>> You might look at wp_insert_attachment()
>>
>> Mark
>>
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From elfin at elfden.co.uk  Sat Aug 21 07:31:42 2010
From: elfin at elfden.co.uk (Rich Pedley)
Date: Sat, 21 Aug 2010 08:31:42 +0100
Subject: [wp-hackers] custom_post_type and custom taxonomy naming
In-Reply-To: <AANLkTi=ESR1CGH+UwZ8+y5-mrky+nepvOviJDjxHOPPK@mail.gmail.com>
References: <AANLkTi=ESR1CGH+UwZ8+y5-mrky+nepvOviJDjxHOPPK@mail.gmail.com>
Message-ID: <4C6F80DE.9050703@elfden.co.uk>

On 21/08/2010 05:43, Angelia Baladon wrote:
> Funny Mike. No worries. I wasn't expecting much of a response on it anyway
> as it was a pretty ridiculously paranoid question to begin with.
>
> Sort of like me as a person ... every time I post on here I imagine that
> everyone reading my question/comment is rolling their eyes and muttering
> #$@! newbie under their breath.. heh.

nope, that's reserved for me ;) see my banter with Otto ;)

Rich

From andrew at graymerica.com  Sat Aug 21 13:29:21 2010
From: andrew at graymerica.com (Andrew Gray)
Date: Sat, 21 Aug 2010 09:29:21 -0400
Subject: [wp-hackers] wp-hackers Digest, Vol 67, Issue 76
In-Reply-To: <mailman.17507.1282363300.1338.wp-hackers@lists.automattic.com>
References: <mailman.17507.1282363300.1338.wp-hackers@lists.automattic.com>
Message-ID: <E1958791-B81E-4C1D-B4F8-E99A7F81AD02@graymerica.com>

Otto,

Most of the sites do not have registration enabled.

Also, there is no time stamp on the user, which means it was added directly to the DB, not via WP add user function or traditional registration.

Also,  the same password and username pattern was added to 20 sites on one server.  All in different databases  

Also, they were added as admin users, where none of the sites have anything more that Subscriber as the default level.

If no one else has seen this, maybe it was a custom attack, but it sure was weird.

Andrew


On Aug 21, 2010, at 12:01 AM, wp-hackers-request at lists.automattic.com wrote:

> Do you have user registration enabled? If so, then it's just spam
> registrations. If not, then you likely got hacked.
> 
> -Otto
> 
> 
> 
> On Fri, Aug 20, 2010 at 3:18 PM, Andrew Gray <andrew at graymerica.com> wrote:
>> I just noticed that some of my databases for my installs had a bunch of random users.
>> 
>> Across multiple Databases, with the same password and style. ?I am sure it is because I was lazy and used a master password in a bunch of my Wordpress installs on that server.
>> 
>> At this point, I have fixed the problem, but has anyone else seen this? ? Is is a bad plugin or something else.
>> 
>> Here is an example of what was in all my DBs,
>> 
>> No timestamp, gmail addresses, First Name Last Initial. ?Every name was different, but the password was the same.
>> 
>> INSERT INTO `wp_users` (`ID`, `user_login`, `user_pass`, `user_nicename`, `user_email`, `user_url`, `user_registered`, `user_activation_key`, `user_status`, `display_name`) VALUES
>> (2, 'SofiaT', '$P$BWrPjMxeckS8Qjhhd.3CqhhpM5c5G3/', 'Sofia Turner', 'SofiaT at gmail.com', '', '0000-00-00 00:00:00', '', 0, 'Sofia Turner'),
>> (3, 'AlexandraR', '$P$BWrPjMxeckS8Qjhhd.3CqhhpM5c5G3/', 'Alexandra Russell', 'AlexandraR at gmail.com', '', '0000-00-00 00:00:00', '', 0, 'Alexandra Russell'),
>> (4, 'JosephB', '$P$BWrPjMxeckS8Qjhhd.3CqhhpM5c5G3/', 'Joseph Butler', 'JosephB at gmail.com', '', '0000-00-00 00:00:00', '', 0, 'Joseph Butler'),
> 


From bulk at thecodecave.com  Sat Aug 21 14:50:46 2010
From: bulk at thecodecave.com (Brian Layman)
Date: Sat, 21 Aug 2010 10:50:46 -0400
Subject: [wp-hackers] How To Get Completely Processed Body Of Blog Posts?
In-Reply-To: <AANLkTi=rSD0d6Lksf_XFQ8qTbaPK3UBrbPjPeeDz_nDV@mail.gmail.com>
References: <000301cb3fb0$f3ac7230$db055690$@org>	<AANLkTim7poz1wGMaP9as26YGrxQzJjpsN2sZbH13G+mo@mail.gmail.com>
	<AANLkTi=rSD0d6Lksf_XFQ8qTbaPK3UBrbPjPeeDz_nDV@mail.gmail.com>
Message-ID: <000001cb4140$3e30f7a0$ba92e6e0$@thecodecave.com>

Otto:
> I've seen cases where processing the_content filter will 
> a) Add items to a cart in a shopping plugin
 >c) make duplicate posts on twitter/facebook/other...

Ewww Really? I really hope those aren't in the repository... 


From scribu at gmail.com  Sat Aug 21 16:37:41 2010
From: scribu at gmail.com (scribu)
Date: Sat, 21 Aug 2010 19:37:41 +0300
Subject: [wp-hackers] custom_post_type and custom taxonomy naming
In-Reply-To: <AANLkTikeCB7S_-gBXKQe-T-86Kv0enog==aGrnbjbwK_@mail.gmail.com>
References: <AANLkTikeCB7S_-gBXKQe-T-86Kv0enog==aGrnbjbwK_@mail.gmail.com>
Message-ID: <AANLkTi=vEAcCaHF4YA_wcQJiYeLtUm8ebKZozoiU2gdw@mail.gmail.com>

On Sat, Aug 21, 2010 at 4:49 AM, Angelia Baladon
<angelia at 10sexyapples.com>wrote:

> Logic is guiding me to create a custom post type called product, and
> assigning a custom taxonomy 'also called product' to it. I believe that I
> have seen this method recommended in some instances, but, wanted to do a
> double check with those more knowledgeable about the inner workings of WP
> before I committed to it. In my limited knowledge, I can't see where this
> identical naming would cause any problems, other than repetitive permalinks
> if not handled correctly, but, better safe than sorry~ Can anyone confirm
> for me that this is the way to go?
>

Having both a 'product' post type and a 'product' taxonomy will cause more
problems than you think. Don't do it!

You can rename the taxonomy 'products' if you want.


-- 
http://scribu.net

From mikeschinkel at newclarity.net  Sat Aug 21 17:40:23 2010
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Sat, 21 Aug 2010 13:40:23 -0400
Subject: [wp-hackers] custom_post_type and custom taxonomy naming
In-Reply-To: <AANLkTi=vEAcCaHF4YA_wcQJiYeLtUm8ebKZozoiU2gdw@mail.gmail.com>
References: <AANLkTikeCB7S_-gBXKQe-T-86Kv0enog==aGrnbjbwK_@mail.gmail.com>
	<AANLkTi=vEAcCaHF4YA_wcQJiYeLtUm8ebKZozoiU2gdw@mail.gmail.com>
Message-ID: <28EC0A05-BDF7-4727-A26B-76AB536FE984@newclarity.net>

On Aug 21, 2010, at 12:37 PM, scribu wrote:
> Having both a 'product' post type and a 'product' taxonomy will cause more
> problems than you think. Don't do it!

Can you be more specific?  What problems would someone experience, exactly?

-Mike

From scribu at gmail.com  Sat Aug 21 18:37:21 2010
From: scribu at gmail.com (scribu)
Date: Sat, 21 Aug 2010 21:37:21 +0300
Subject: [wp-hackers] custom_post_type and custom taxonomy naming
In-Reply-To: <28EC0A05-BDF7-4727-A26B-76AB536FE984@newclarity.net>
References: <AANLkTikeCB7S_-gBXKQe-T-86Kv0enog==aGrnbjbwK_@mail.gmail.com>
	<AANLkTi=vEAcCaHF4YA_wcQJiYeLtUm8ebKZozoiU2gdw@mail.gmail.com>
	<28EC0A05-BDF7-4727-A26B-76AB536FE984@newclarity.net>
Message-ID: <AANLkTikqtyENAM=61-yMN2F1E3wDXNy9C0R2a8FnpMyX@mail.gmail.com>

On Sat, Aug 21, 2010 at 8:40 PM, Mike Schinkel
<mikeschinkel at newclarity.net>wrote:

> On Aug 21, 2010, at 12:37 PM, scribu wrote:
> > Having both a 'product' post type and a 'product' taxonomy will cause
> more
> > problems than you think. Don't do it!
>
> Can you be more specific?  What problems would someone experience, exactly?
>

Besides the rewrite ones already mentioned by Angelia, I've also experienced
query related problems in the admin side. These could potentially be avoided
if you set a different query_var for each, but there might be other, even
more subtle problems that I'm not aware of.


-- 
http://scribu.net

From peter at oncefuture.com  Sat Aug 21 19:32:43 2010
From: peter at oncefuture.com (Peter Adams)
Date: Sat, 21 Aug 2010 12:32:43 -0700
Subject: [wp-hackers] Single Hook for Comment Status?
Message-ID: <2A7FFFF6-3DE2-43FB-95ED-0D7C8ABB3FDF@oncefuture.com>

Is there a single hook for checking comment status?

It seems that one has to hook both comment_post and transition_comment_status to cover new comments and edited/moderated comments respectively.

Is that right?

If so, any objections to adding transition_comment_status hook to wp_new_comment() so plugin developers can use one hook for comment status just like with posts?

-P-


From scribu at gmail.com  Sat Aug 21 19:59:35 2010
From: scribu at gmail.com (scribu)
Date: Sat, 21 Aug 2010 22:59:35 +0300
Subject: [wp-hackers] Single Hook for Comment Status?
In-Reply-To: <2A7FFFF6-3DE2-43FB-95ED-0D7C8ABB3FDF@oncefuture.com>
References: <2A7FFFF6-3DE2-43FB-95ED-0D7C8ABB3FDF@oncefuture.com>
Message-ID: <AANLkTiktf7UUzwwzHfxObQ5Nv-1+zqVCgNzejDcb30CU@mail.gmail.com>

On Sat, Aug 21, 2010 at 10:32 PM, Peter Adams <peter at oncefuture.com> wrote:

> Is there a single hook for checking comment status?
>
> It seems that one has to hook both comment_post and
> transition_comment_status to cover new comments and edited/moderated
> comments respectively.
>
> Is that right?
>
> If so, any objections to adding transition_comment_status hook to
> wp_new_comment() so plugin developers can use one hook for comment status
> just like with posts?
>

wp_new_comment() should call transition_comment_status(), with the
$old_status being 'new'.

Feel free to open a ticket on trac.


-- 
http://scribu.net

From mikeschinkel at newclarity.net  Sat Aug 21 20:11:28 2010
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Sat, 21 Aug 2010 16:11:28 -0400
Subject: [wp-hackers] custom_post_type and custom taxonomy naming
In-Reply-To: <AANLkTikqtyENAM=61-yMN2F1E3wDXNy9C0R2a8FnpMyX@mail.gmail.com>
References: <AANLkTikeCB7S_-gBXKQe-T-86Kv0enog==aGrnbjbwK_@mail.gmail.com>
	<AANLkTi=vEAcCaHF4YA_wcQJiYeLtUm8ebKZozoiU2gdw@mail.gmail.com>
	<28EC0A05-BDF7-4727-A26B-76AB536FE984@newclarity.net>
	<AANLkTikqtyENAM=61-yMN2F1E3wDXNy9C0R2a8FnpMyX@mail.gmail.com>
Message-ID: <241888D7-FA6E-4DDC-9F37-D1DE1C6244CF@newclarity.net>

On Aug 21, 2010, at 2:37 PM, scribu wrote:
> On Sat, Aug 21, 2010 at 8:40 PM, Mike Schinkel
> <mikeschinkel at newclarity.net>wrote:
> 
>> On Aug 21, 2010, at 12:37 PM, scribu wrote:
>>> Having both a 'product' post type and a 'product' taxonomy will cause
>> more
>>> problems than you think. Don't do it!
>> 
>> Can you be more specific?  What problems would someone experience, exactly?
> 
> Besides the rewrite ones already mentioned by Angelia, I've also experienced
> query related problems in the admin side. These could potentially be avoided
> if you set a different query_var for each, but there might be other, even
> more subtle problems that I'm not aware of.

Gotcha. I haven't had that problem because I set rewrite to false for the taxonomy.

But I think this is a use-case where the edges have not been polished yet and we should fix that, not mark it as a "never do."  

For example, having a "product" taxonomy *could* give a list of posts at http://example.com/products/ and then each "product" post could display at http://example.com/products/ 

That said, if the taxonomy terms are not mirroring the posts then I agree, people shouldn't do it.

-Mike


From dc153464a11bcf5aeb18180db28017fb.wp-hackers at planetmike.com  Sat Aug 21 22:39:09 2010
From: dc153464a11bcf5aeb18180db28017fb.wp-hackers at planetmike.com (Michael Clark)
Date: Sat, 21 Aug 2010 18:39:09 -0400
Subject: [wp-hackers] Custom post type & hierarchical
Message-ID: <p06240800c896043f4654@[192.168.1.67]>

While designing a new theme, I've set up a new post type, with the following:

register_post_type( 'shows',
   array(
     'labels' => array(
         'name' => __( 'Shows' ),
         'singular_name' => __( 'Show' ) ),
     'public' => true,
     'menu_position' => 7,
	'hierarchical' => true,
	'capability_type' => 'page',
	'supports' => array('title', 'editor', 
'author','excerpt','custom-fields','page-attributes')
   )
);

I've added a new "Show" of "1998 Season". Then I added in a show that 
was in that season. You Can't Take it With You. In the admin area: 
http://www.example.com/wp-admin/edit.php?post_type=shows I see the 
show in the hierarchy correctly. But when I click on the View link 
under the show title 
(http://www.example.com/shows/1998-season/you-cant-take-it-with-you/) 
I get a 404 error. If I remove 1998-season from the URL, the page 
shows up just fine. Is this a WordPress bug, or have I done something 
wrong somewhere along the way? Searching the Codex, WP forums and 
Google isn't turning up anything useful.


-- 

Michael Clark
http://www.PlanetMike.com

"Injustice anywhere is a threat to justice everywhere."
  - Martin Luther King Jr.

From scribu at gmail.com  Sat Aug 21 22:49:36 2010
From: scribu at gmail.com (scribu)
Date: Sun, 22 Aug 2010 01:49:36 +0300
Subject: [wp-hackers] Custom post type & hierarchical
In-Reply-To: <p06240800c896043f4654@192.168.1.67>
References: <p06240800c896043f4654@192.168.1.67>
Message-ID: <AANLkTinvsuz0OFezJHLr8d+K5yP68donVr_LF45J4McO@mail.gmail.com>

On Sun, Aug 22, 2010 at 1:39 AM, Michael Clark <
dc153464a11bcf5aeb18180db28017fb.wp-hackers at planetmike.com> wrote:

> I've added a new "Show" of "1998 Season". Then I added in a show that was
> in that season. You Can't Take it With You. In the admin area:
> http://www.example.com/wp-admin/edit.php?post_type=shows I see the show in
> the hierarchy correctly. But when I click on the View link under the show
> title (http://www.example.com/shows/1998-season/you-cant-take-it-with-you/)
> I get a 404 error. If I remove 1998-season from the URL, the page shows up
> just fine. Is this a WordPress bug, or have I done something wrong somewhere
> along the way? Searching the Codex, WP forums and Google isn't turning up
> anything useful.
>

Maybe it's because the slug begins with a number. Try changing it to
'test-1998-season'.


-- 
http://scribu.net

From dc153464a11bcf5aeb18180db28017fb.wp-hackers at planetmike.com  Sat Aug 21 23:17:40 2010
From: dc153464a11bcf5aeb18180db28017fb.wp-hackers at planetmike.com (Michael Clark)
Date: Sat, 21 Aug 2010 19:17:40 -0400
Subject: [wp-hackers] Custom post type & hierarchical
In-Reply-To: <AANLkTinvsuz0OFezJHLr8d+K5yP68donVr_LF45J4McO@mail.gmail.com>
References: <p06240800c896043f4654@192.168.1.67>
	<AANLkTinvsuz0OFezJHLr8d+K5yP68donVr_LF45J4McO@mail.gmail.com>
Message-ID: <p06240801c8960eb0b8e7@[192.168.1.67]>

At 1:49 AM +0300 8/22/10, scribu wrote:
>On Sun, Aug 22, 2010 at 1:39 AM, Michael Clark <
>-> wrote:
>
>>  I've added a new "Show" of "1998 Season". Then I added in a show that was
>>  in that season. You Can't Take it With You. In the admin area:
>>  http://www.example.com/wp-admin/edit.php?post_type=shows I see the show in
>>  the hierarchy correctly. But when I click on the View link under the show
>>  title (http://www.example.com/shows/1998-season/you-cant-take-it-with-you/)
>>  I get a 404 error. If I remove 1998-season from the URL, the page shows up
>>  just fine. Is this a WordPress bug, or have I done something wrong somewhere
>>  along the way? Searching the Codex, WP forums and Google isn't turning up
>>  anything useful.
>>
>
>Maybe it's because the slug begins with a number. Try changing it to
>'test-1998-season'.

Nice guess, but that did not affect anything.

BTW, WP 3.0.1

-- 

Michael Clark
http://www.PlanetMike.com

Christmas Music 24 Hours a Day, 7 Days a week
http://www.ChristmasMusic247.com

"Injustice anywhere is a threat to justice everywhere."
  - Martin Luther King Jr.

From sbressler at gmail.com  Sat Aug 21 23:48:21 2010
From: sbressler at gmail.com (Scott Bressler)
Date: Sat, 21 Aug 2010 16:48:21 -0700
Subject: [wp-hackers] Customizing the view of custom taxonomies
In-Reply-To: <AANLkTikZJ3xuOhUt3tNhf4-4=F385+hEZ_JdPPV4yHwb@mail.gmail.com>
References: <AANLkTik_cUCdkG6JXsG6yNAmdv4Jz1c7v+ei=GJhOW+8@mail.gmail.com>
	<AANLkTimlZOgXkQIPADLcOtmNJywlJd5GImfxuEGD88QE@mail.gmail.com>
	<AANLkTinGST6=tK-9w8p7aym9ZLtTiB50KZVuTmdihtyM@mail.gmail.com>
	<AANLkTin9wziSL10WvTjU9Tks7=X+mgpJScwPp+r3Orme@mail.gmail.com>
	<DCA59451-6C27-46B8-80B6-3F2AE64DF5D2@newclarity.net>
	<AANLkTik5YoqmLo4ds1K9yDcdeZina7ddMjk8GJdPEW6G@mail.gmail.com>
	<34E8AF80-1E96-4AEF-B9C8-94CC29EC9F59@newclarity.net>
	<AANLkTimRbNUOuNhQ_FyA2_Y020Bb1Z-GuOkp1G7aokKm@mail.gmail.com>
	<0E9294E8-C52A-4A92-AD12-D3E98F68CB99@newclarity.net>
	<AANLkTikXrH0pJV_fpnCbAd=eLyxAHH+mJ_xXwLtLqBnV@mail.gmail.com>
	<AANLkTikZJ3xuOhUt3tNhf4-4=F385+hEZ_JdPPV4yHwb@mail.gmail.com>
Message-ID: <AANLkTin=V8MO46Om0YW+x8VYNe0RRoMQnAhu0xEV2h7A@mail.gmail.com>

Thanks to all for your help with this, particularly for the code fragment,
Mike. I'll be specific about my eventual solution in case it might help
someone else down the road.

The key filter I needed and ended up using was
pre_{$my_taxonomy}_description (where description was the specific field I
wanted to edit in the term). The generic hook is: pre_{$taxonomy}_{$field},
which is applied in sanitize_term_field.

The logic in my method was as follows:

function custom_term_description_sanitization( $description ) {
    if ( !empty( $_POST ) && !empty( $_POST[__my_form_input_name__] ) )
        return $_POST[__my_form_input_name__];
    else
        return $description;
}

Thanks again, and hopefully this might help someone in the future trying to
customize the taxonomy UI.

-Scott

On Mon, Aug 2, 2010 at 11:33 AM, Jeremy Clarke <jer at simianuprising.com>wrote:

> On Sun, Aug 1, 2010 at 2:30 PM, Scott Bressler <sbressler at gmail.com>
> wrote:
>
> > The drop-down is indeed for editing the available terms themselves. When
> > one
> > adds a "copy editor" term to the taxonomy, they will pick that this is of
> > type "user." Then, there will of course also be a drop-down in the
> metabox
> > itself for choosing a user. If one were to make a "due date" term, they
> > would choose "date" as the type when editing the taxonomy. Then in the
> > metabox there would be a date selector.
> >
>
> I think your needs require different solutions for each feature, and you
> are
> probably over-estimating the value of taxonomies to solve them.
>
> Your user-related setting about copy editor needs so much special stuff
> that
> it should probably not use taxonomies. Try doing it with custom fields, I
> don't think it will be harder than using taxonomies.
>
> Your due date stuff also does not seem like it needs to be taxonomy-based.
> Have you looked around at the existing editorial workflow plugins? I think
> there are some that solve these problems already.
>
> http://wordpress.org/extend/plugins/search.php?q=editorial
>
>
> --
> Jeremy Clarke | http://jeremyclarke.org
> Code and Design | http://globalvoicesonline.org
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From theodor_ramisch at hotmail.com  Sun Aug 22 00:09:53 2010
From: theodor_ramisch at hotmail.com (Theodor Ramisch)
Date: Sun, 22 Aug 2010 02:09:53 +0200
Subject: [wp-hackers] Network Activate and rewrite rules
Message-ID: <BLU136-W261C01648DE91DDC7ED14F90810@phx.gbl>


Hi all,

I'm currently developing a plugin which adds some rewrite rules. Because it is recommended not to call flush_rules() on every request, I do this once in the activation hook.

If somebody "network activates" the plugin, this hook is only called for the current blog. The plugin will be active, but all other blogs are missing the rewrite rules.

What is the recommended way to correct this behavior?

Best regards,

  Theodor
 		 	   		  

From lox.dev at knc.nc  Sun Aug 22 00:35:25 2010
From: lox.dev at knc.nc (Lox)
Date: Sun, 22 Aug 2010 11:35:25 +1100
Subject: [wp-hackers] Custom post-types and taxonomy rewrite
Message-ID: <AANLkTin-eECzqrQD8+b_-voBgg3ZZ3SPqc6=GJmwMO16@mail.gmail.com>

Hello,

I give a lot of importance in my url. I have a post-type called 'schools'
and a taxonomy for it called 'type'. The rewrite for the post-type is
'school' so http://mysite.com/school/the_school_name/ is giving me the page
for "the_school_name" school.

Now I need to categorize them, so I created a taxonomy called 'school_type'.
How can I have the 'school_type' slugs in front of the schools permalinks ?

Basically I need to have:

http://mysite.com/school/the_school_type/the_school_name/

I tried to add %category% to the postype rewrite parameter but it failed.

Best regards

-- 
Lox
lox.dev at knc.nc

From angelia at 10sexyapples.com  Sun Aug 22 00:53:23 2010
From: angelia at 10sexyapples.com (Angelia Baladon)
Date: Sat, 21 Aug 2010 17:53:23 -0700
Subject: [wp-hackers] custom_post_type and custom taxonomy naming
Message-ID: <AANLkTi=c6FENKAWVnvvAWrVWR+xJJ00bA18YL9r8qcUk@mail.gmail.com>

Well, I'll be a Monkey's Aunt. My overly suspicious,
quantum-physics-if-you-can't-see-what's-happening-then-anything-is-possible-even-if-it-appears-to-be-illogical-thinking,
has served me well for once.

Something just didn't feel right about it to me, so I went with
custom_post_type = product & custom_taxonomy = product type. I mean,
logically that works better anyway as the taxonomy *is* an actual "taxonomy"
( a methodology for grouping different "types" of things ). That made the
most logical sense to me. And I was able to maintain consistency across the
board with Solution & Solution Type, Event & Event Type.
voila!

I can see where it could cause problems somewhere, somehow, just due to the
fact that so often a "slug" or label, or name is used in code somewhere
instead of an ID. Personally I always use ID, always. It just feels more
safe. It will always be unique and it will never change ... well, unless
something unspeakable happens.

Thanks for the feedback~

From sbressler at gmail.com  Sun Aug 22 00:57:51 2010
From: sbressler at gmail.com (Scott Bressler)
Date: Sat, 21 Aug 2010 17:57:51 -0700
Subject: [wp-hackers] Screen options and columns
Message-ID: <AANLkTi=_c-4OgoxiuoAQ9RDZCMXRRVxDpQr7QpHLMfVH@mail.gmail.com>

Hi,

I started trying to doing this on my own, but rather than reinvent the
wheel, I was wondering if there is code in core that can easily be called or
at least copied into my plugin for adding to a page's "Screen Options" to
trigger the number of columns that are used on the page. I would of course
want to save this into usermeta via admin-ajax.

Thanks,
Scott

From scribu at gmail.com  Sun Aug 22 01:19:23 2010
From: scribu at gmail.com (scribu)
Date: Sun, 22 Aug 2010 04:19:23 +0300
Subject: [wp-hackers] Network Activate and rewrite rules
In-Reply-To: <BLU136-W261C01648DE91DDC7ED14F90810@phx.gbl>
References: <BLU136-W261C01648DE91DDC7ED14F90810@phx.gbl>
Message-ID: <AANLkTik-u5qv2V4wBpciCaBdu+kUcqhhLNhpQkyKByan@mail.gmail.com>

On Sun, Aug 22, 2010 at 3:09 AM, Theodor Ramisch <
theodor_ramisch at hotmail.com> wrote:

> I'm currently developing a plugin which adds some rewrite rules. Because it
> is recommended not to call flush_rules() on every request, I do this once in
> the activation hook.
>
> If somebody "network activates" the plugin, this hook is only called for
> the current blog. The plugin will be active, but all other blogs are missing
> the rewrite rules.
>
> What is the recommended way to correct this behavior?
>

Tell your users to also install this plugin:

http://wordpress.org/extend/plugins/proper-network-activation/

Also, complain on trac:

http://core.trac.wordpress.org/ticket/14170


-- 
http://scribu.net

From lox.dev at knc.nc  Sun Aug 22 01:33:23 2010
From: lox.dev at knc.nc (Lox)
Date: Sun, 22 Aug 2010 12:33:23 +1100
Subject: [wp-hackers] custom_post_type and custom taxonomy naming
In-Reply-To: <241888D7-FA6E-4DDC-9F37-D1DE1C6244CF@newclarity.net>
References: <AANLkTikeCB7S_-gBXKQe-T-86Kv0enog==aGrnbjbwK_@mail.gmail.com>
	<AANLkTi=vEAcCaHF4YA_wcQJiYeLtUm8ebKZozoiU2gdw@mail.gmail.com>
	<28EC0A05-BDF7-4727-A26B-76AB536FE984@newclarity.net>
	<AANLkTikqtyENAM=61-yMN2F1E3wDXNy9C0R2a8FnpMyX@mail.gmail.com>
	<241888D7-FA6E-4DDC-9F37-D1DE1C6244CF@newclarity.net>
Message-ID: <AANLkTinY0NAacorm8zBzYXkSS0h_n8VkYnVmkGFPft9s@mail.gmail.com>

2010/8/22 Mike Schinkel <mikeschinkel at newclarity.net>

> For example, having a "product" taxonomy *could* give a list of posts at
> http://example.com/products/ and then each "product" post could display at
> http://example.com/products/
>

That is exactly what I am trying to do at the moment, but it seems I can't
......

-- 
Lox
lox.dev at knc.nc

From lox.dev at knc.nc  Sun Aug 22 01:42:06 2010
From: lox.dev at knc.nc (Lox)
Date: Sun, 22 Aug 2010 12:42:06 +1100
Subject: [wp-hackers] can one redefine and move UI for custom post types?
In-Reply-To: <AANLkTiktyoubR0q+xUvZqb_1OegrwcXr-rZKC-O9Uccd@mail.gmail.com>
References: <AANLkTiktyoubR0q+xUvZqb_1OegrwcXr-rZKC-O9Uccd@mail.gmail.com>
Message-ID: <AANLkTi=Q_5ddfwznQj2JxMbVJAn_844WBM08vHE_4HEv@mail.gmail.com>

 )

2010/8/20 Davit Barbakadze <jayarjo at gmail.com>
>
> My problem is that I need to create couple of custom post types, which
> are kinda related and I want to group them under single top level
> menu. With the information I got at the moment, I can't see how I can
> achieve this, without manually messing with the menu array. Is there
> any other way?

Hi,

I have the same problem and still haven't figured out how to do it ....

Maybe deleting the menu using a admin_head hook (http://goo.gl/YaDY)
and then rebuilding the links to them in a submenu using
add_submenu_page
(http://codex.wordpress.org/Adding_Administration_Menus).
It should be possible this way but it wasn't a hurry enough for me to
dig further.

Regards

--
Lox
lox.dev at knc.nc

From lox.dev at knc.nc  Sun Aug 22 02:03:31 2010
From: lox.dev at knc.nc (Lox)
Date: Sun, 22 Aug 2010 13:03:31 +1100
Subject: [wp-hackers] WP.org plugin repository - multiple users
In-Reply-To: <AANLkTi=ydOLhQ_sUnCzFig69Uyj9Gp9tFUWzacBb6msY@mail.gmail.com>
References: <1967CB0F-18B9-4723-A9C1-2CE00B66392D@thisismyurl.com>
	<AANLkTimE1uQ1JyFBC83-aOSqs7+FBwNSKe9_Md_v7RUY@mail.gmail.com>
	<967706437.528925.1282245312314.JavaMail.open-xchange@oxusltgw05.schlund.de>
	<AANLkTi=ydOLhQ_sUnCzFig69Uyj9Gp9tFUWzacBb6msY@mail.gmail.com>
Message-ID: <AANLkTik--W3Pb8XxBv2eGREfRu=k4ghqkTBBiWBRMJW6@mail.gmail.com>

2010/8/20 Otto <otto at ottodestruct.com>:
> Yes, that.
>
> Adding them to the admin panel gives them commit access.
>
> Adding them to the readme puts their name in the description area.
>
> Protip: always use your wp.org login name in the author area of the
> readme. Makes things work better. Not actually *required*, but it just
> works better in the long run.
>
> -Otto

Hi,

Github pull requests feature is a killer one that really is missing in
wp.org (tell me if I am wrong), and thus prevents developers to contribute
to other plugins. Why? Because it is a pain with SVN!

For those not knowing about it, github allows ANY developers to fork ANY
project with ONE CLICK, to modify and commit on its fork and then, with ONE
CLICK, to send a pull request to the dev that can easily import all or part
of the commits:

# git merge forked_repo (hey easy, isn't it?)

That is a killer feature that allows painless contribution to projects from
ANY Dev (not only specific contributor) and the main Dev keeps the control
of what he commits from pull requests. Gerrit is even better at that, it
allow easier code submit and review before merge. For example, as part of
the CyanogenMod team (we develop an enhanced Android OS version), we've seen
a significant augmentation of contributions when we switched from gerrit fro
code submission and review.

*How wp.org is know, fraining development and innovation whereas much better
exists. *

A simple example: I corrected about all error notices on Otto's SFC plugin
and I have added French locales. I put the code on github and sent him a
mail to add my changes to his plugin. Bu he did not... Why? Most certainly
because it is a pain with how wp.org is, who wouldn't apply commits that fix
error notices?

Just my two cents.

-- 
Lox
lox.dev at knc.nc

From lox.dev at knc.nc  Sun Aug 22 02:17:28 2010
From: lox.dev at knc.nc (Lox)
Date: Sun, 22 Aug 2010 13:17:28 +1100
Subject: [wp-hackers] Code reviews for plugins?
In-Reply-To: <1992312d-02d2-41f9-87b1-19bddf42470d@f42g2000yqn.googlegroups.com>
References: <4C6D885B.6010506@mattjacob.com>
	<F657E634-5D14-445F-8545-023A62CD8D5E@newclarity.net>
	<183630796.530862.1282248087954.JavaMail.open-xchange@oxusltgw05.schlund.de>
	<57B84544-FB40-435F-809C-BA2786D7462D@gmail.com>
	<AE12B082-EEFC-4FE1-AF52-ABDA655342F1@codehooligans.com>
	<1992312d-02d2-41f9-87b1-19bddf42470d@f42g2000yqn.googlegroups.com>
Message-ID: <AANLkTi=8nLhzfp6hAL8ae=Xr8Z3SkX_W8Nrs=M067DsT@mail.gmail.com>

What about starting with a reviewed best practices code snippets database?

It will allow developers to use them and make *better plugins easier to
review*. That could be a butch of scripts organized in folders as a (for
example) a github project reviewed using gerrit. We would easily display
them on the web, then.

2010/8/20 24/7 <24-7 at gmx.net>

>
>
> On 19 Aug., 23:12, "Heiko Rabe" <heiko.r... at code-styling.de> wrote:
> > During this time delay a well done plugin will be presented to audience
> as a
> > "bad" one, which is wrong but felt so by audience for psychological
> reasons.
> > Keep in mind, that this affects also the download and utilization rates
> of
> > plugins!
>
> I guess you could just look at the (not that old) theme-reviewers list
> (or as joseph scott) and the threads that were about the review
> process. They had a hard time in the beginning with a lot of themes
> stuck in the queue waiting for their review. As far as i remember they
> found some ways to optimize the process. Maybe it's a good starting
> point.
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>



-- 
Lox
lox.dev at knc.nc

From lox.dev at knc.nc  Sun Aug 22 03:31:47 2010
From: lox.dev at knc.nc (Lox)
Date: Sun, 22 Aug 2010 14:31:47 +1100
Subject: [wp-hackers] Is_single function wrongly commented ?
Message-ID: <AANLkTi=vT61miZDsuLuF7wguOL1K2aVjD8cnWPnC2pJv@mail.gmail.com>

Hi,


From mikeschinkel at newclarity.net  Sun Aug 22 05:19:25 2010
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Sun, 22 Aug 2010 01:19:25 -0400
Subject: [wp-hackers] custom_post_type and custom taxonomy naming
In-Reply-To: <AANLkTinY0NAacorm8zBzYXkSS0h_n8VkYnVmkGFPft9s@mail.gmail.com>
References: <AANLkTikeCB7S_-gBXKQe-T-86Kv0enog==aGrnbjbwK_@mail.gmail.com>
	<AANLkTi=vEAcCaHF4YA_wcQJiYeLtUm8ebKZozoiU2gdw@mail.gmail.com>
	<28EC0A05-BDF7-4727-A26B-76AB536FE984@newclarity.net>
	<AANLkTikqtyENAM=61-yMN2F1E3wDXNy9C0R2a8FnpMyX@mail.gmail.com>
	<241888D7-FA6E-4DDC-9F37-D1DE1C6244CF@newclarity.net>
	<AANLkTinY0NAacorm8zBzYXkSS0h_n8VkYnVmkGFPft9s@mail.gmail.com>
Message-ID: <AE8DE6A8-FEE9-44BA-93DA-759941020CDA@newclarity.net>

> On Aug 21, 2010, at 9:33 PM, Lox wrote:
> 
>> 2010/8/22 Mike Schinkel <mikeschinkel at newclarity.net>
>> 
>> For example, having a "product" taxonomy *could* give a list of posts at
>> http://example.com/products/ and then each "product" post could display at
>> http://example.com/products/

Wow, I misspoke, I was tired and distracted (was sitting in WordCamp Savannah) when I sent that. Sorry.

I meant to say:

For example, having a "product" taxonomy *could* give a list of posts at http://example.com/products/ and then each "product" post could display at http://example.com/products/%product%/

What I am currently doing is setting "rewrite" to false for the taxonomy and creating a Page for the /products/ URL and using a shortcode to retrieve the posts I want displayed.  My shortcode accepts "post_type" and defaults to using WP_Query() to generate a full list of all posts of my post type but with additional arguments that allow me to specify what WP_Query() will get passed.  By default my shortcode looks for "page-%post_type%.php" in my theme's directory to display a single post so for a product it would look for "post-product.php."

That all works rather well but takes a bit too much fiddling for what I think is an would be a common use-case.  It would be nice if a URL for http://example.com/%post_type%/ would be automatically generated and if there is a taxonomy with the same name that the taxonomy would be automatically mirrored and that the /%post_type%/ URL would then be filtered by the posts that are associated with that taxonomy. JMTCW, as always.

-Mike

On Aug 21, 2010, at 9:33 PM, Lox wrote:

> 2010/8/22 Mike Schinkel <mikeschinkel at newclarity.net>
> 
>> For example, having a "product" taxonomy *could* give a list of posts at
>> http://example.com/products/ and then each "product" post could display at
>> http://example.com/products/
>> 
> 
> That is exactly what I am trying to do at the moment, but it seems I can't
> ......
> 
> -- 
> Lox
> lox.dev at knc.nc
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers


From lox.dev at knc.nc  Sun Aug 22 05:49:19 2010
From: lox.dev at knc.nc (Lox)
Date: Sun, 22 Aug 2010 16:49:19 +1100
Subject: [wp-hackers] custom_post_type and custom taxonomy naming
In-Reply-To: <AE8DE6A8-FEE9-44BA-93DA-759941020CDA@newclarity.net>
References: <AANLkTikeCB7S_-gBXKQe-T-86Kv0enog==aGrnbjbwK_@mail.gmail.com>
	<AANLkTi=vEAcCaHF4YA_wcQJiYeLtUm8ebKZozoiU2gdw@mail.gmail.com>
	<28EC0A05-BDF7-4727-A26B-76AB536FE984@newclarity.net>
	<AANLkTikqtyENAM=61-yMN2F1E3wDXNy9C0R2a8FnpMyX@mail.gmail.com>
	<241888D7-FA6E-4DDC-9F37-D1DE1C6244CF@newclarity.net>
	<AANLkTinY0NAacorm8zBzYXkSS0h_n8VkYnVmkGFPft9s@mail.gmail.com>
	<AE8DE6A8-FEE9-44BA-93DA-759941020CDA@newclarity.net>
Message-ID: <AANLkTinGi45xfybvN=9s2KJ1MmrX2zj5YDswrhxraNdT@mail.gmail.com>

2010/8/22 Mike Schinkel <mikeschinkel at newclarity.net>

> For example, having a "product" taxonomy *could* give a list of posts at
> http://example.com/products/ and then each "product" post could display at
> http://example.com/products/%product%/
>
> What I am currently doing is setting "rewrite" to false for the taxonomy
> and creating a Page for the /products/ URL and using a shortcode to retrieve
> the posts I want displayed.  My shortcode accepts "post_type" and defaults
> to using WP_Query() to generate a full list of all posts of my post type but
> with additional arguments that allow me to specify what WP_Query() will get
> passed.  By default my shortcode looks for "page-%post_type%.php" in my
> theme's directory to display a single post so for a product it would look
> for "post-product.php.
>

This is EXACTLY what I end up doing execpt that it falls back to the
templates located in a template directory of my plugin (based on twenty
ten), so it doesn't need to have the tempates in the theme dir to work.

But I have just found a better way. Having a full page template for each
post type is a hassle to maintain, so I went using a trick that works like
get_template_part() execpt that it looks for the template fragment in my
plugin's template dir first. But those can be override by creating them in
the theme folder.


> That all works rather well but takes a bit too much fiddling for what I
> think is an would be a common use-case.  It would be nice if a URL for
> http://example.com/%post_type%/ would be automatically generated and if
> there is a taxonomy with the same name that the taxonomy would be
> automatically mirrored and that the /%post_type%/ URL would then be filtered
> by the posts that are associated with that taxonomy. JMTCW, as always.
>

+100 for that! This is missing me since the first day I tried custom
post-types.


-- 
Lox
lox.dev at knc.nc

From mikeschinkel at newclarity.net  Sun Aug 22 06:47:51 2010
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Sun, 22 Aug 2010 02:47:51 -0400
Subject: [wp-hackers] custom_post_type and custom taxonomy naming
In-Reply-To: <AANLkTinGi45xfybvN=9s2KJ1MmrX2zj5YDswrhxraNdT@mail.gmail.com>
References: <AANLkTikeCB7S_-gBXKQe-T-86Kv0enog==aGrnbjbwK_@mail.gmail.com>
	<AANLkTi=vEAcCaHF4YA_wcQJiYeLtUm8ebKZozoiU2gdw@mail.gmail.com>
	<28EC0A05-BDF7-4727-A26B-76AB536FE984@newclarity.net>
	<AANLkTikqtyENAM=61-yMN2F1E3wDXNy9C0R2a8FnpMyX@mail.gmail.com>
	<241888D7-FA6E-4DDC-9F37-D1DE1C6244CF@newclarity.net>
	<AANLkTinY0NAacorm8zBzYXkSS0h_n8VkYnVmkGFPft9s@mail.gmail.com>
	<AE8DE6A8-FEE9-44BA-93DA-759941020CDA@newclarity.net>
	<AANLkTinGi45xfybvN=9s2KJ1MmrX2zj5YDswrhxraNdT@mail.gmail.com>
Message-ID: <97EE0442-3AC7-4FFE-BFBF-DC2875FC4B77@newclarity.net>

On Aug 22, 2010, at 1:49 AM, Lox wrote:
> But I have just found a better way. Having a full page template for each
> post type is a hassle to maintain, so I went using a trick that works like
> get_template_part() execpt that it looks for the template fragment in my
> plugin's template dir first. But those can be override by creating them in
> the theme folder.

Sounds like a great solution.  I was thinking about trying something similar I just haven't gotten to it yet. 

-Mike


From lox.dev at knc.nc  Sun Aug 22 07:06:39 2010
From: lox.dev at knc.nc (Lox)
Date: Sun, 22 Aug 2010 18:06:39 +1100
Subject: [wp-hackers] custom_post_type and custom taxonomy naming
In-Reply-To: <97EE0442-3AC7-4FFE-BFBF-DC2875FC4B77@newclarity.net>
References: <AANLkTikeCB7S_-gBXKQe-T-86Kv0enog==aGrnbjbwK_@mail.gmail.com>
	<AANLkTi=vEAcCaHF4YA_wcQJiYeLtUm8ebKZozoiU2gdw@mail.gmail.com>
	<28EC0A05-BDF7-4727-A26B-76AB536FE984@newclarity.net>
	<AANLkTikqtyENAM=61-yMN2F1E3wDXNy9C0R2a8FnpMyX@mail.gmail.com>
	<241888D7-FA6E-4DDC-9F37-D1DE1C6244CF@newclarity.net>
	<AANLkTinY0NAacorm8zBzYXkSS0h_n8VkYnVmkGFPft9s@mail.gmail.com>
	<AE8DE6A8-FEE9-44BA-93DA-759941020CDA@newclarity.net>
	<AANLkTinGi45xfybvN=9s2KJ1MmrX2zj5YDswrhxraNdT@mail.gmail.com>
	<97EE0442-3AC7-4FFE-BFBF-DC2875FC4B77@newclarity.net>
Message-ID: <AANLkTik8Tca4HrZLPQN-8wvwLRN1kaOLuTWaR4M3ZJS9@mail.gmail.com>

2010/8/22 Mike Schinkel <mikeschinkel at newclarity.net>

> Sounds like a great solution.  I was thinking about trying something
> similar I just haven't gotten to it yet.


I just wonder why the 2010 theme's page template doesn't make use of
get_template_part ... It will be easy to hook into it with our plugins as it
has a filter on it...

:(

-- 
Lox
lox.dev at knc.nc

From dan at dansmart.co.uk  Sun Aug 22 07:19:10 2010
From: dan at dansmart.co.uk (Dan Smart)
Date: Sun, 22 Aug 2010 08:19:10 +0100
Subject: [wp-hackers] Custom post type & hierarchical
In-Reply-To: <p06240801c8960eb0b8e7@[192.168.1.67]>
References: <p06240800c896043f4654@192.168.1.67>
	<AANLkTinvsuz0OFezJHLr8d+K5yP68donVr_LF45J4McO@mail.gmail.com>
	<p06240801c8960eb0b8e7@[192.168.1.67]>
Message-ID: <E145D543-830E-4859-98DC-94C439705F93@dansmart.co.uk>

Just to confirm, I have the same issue on WP3.0.1, was going to enquire about that too.

Mind you, the rewrite rules for custom taxonomies don't seem to be completely implemented by WP yet, so I assumed this was another related issue.

Dan

Dan Smart - Web Developer
www.dansmart.co.uk

On 22 Aug 2010, at 00:17, Michael Clark<dc153464a11bcf5aeb18180db28017fb.wp-hackers at planetmike.com> wrote:

> At 1:49 AM +0300 8/22/10, scribu wrote:
>> On Sun, Aug 22, 2010 at 1:39 AM, Michael Clark <
>> -> wrote:
>> 
>>> I've added a new "Show" of "1998 Season". Then I added in a show that was
>>> in that season. You Can't Take it With You. In the admin area:
>>> http://www.example.com/wp-admin/edit.php?post_type=shows I see the show in
>>> the hierarchy correctly. But when I click on the View link under the show
>>> title (http://www.example.com/shows/1998-season/you-cant-take-it-with-you/)
>>> I get a 404 error. If I remove 1998-season from the URL, the page shows up
>>> just fine. Is this a WordPress bug, or have I done something wrong somewhere
>>> along the way? Searching the Codex, WP forums and Google isn't turning up
>>> anything useful.
>>> 
>> 
>> Maybe it's because the slug begins with a number. Try changing it to
>> 'test-1998-season'.
> 
> Nice guess, but that did not affect anything.
> 
> BTW, WP 3.0.1
> 
> -- 
> 
> Michael Clark
> http://www.PlanetMike.com
> 
> Christmas Music 24 Hours a Day, 7 Days a week
> http://www.ChristmasMusic247.com
> 
> "Injustice anywhere is a threat to justice everywhere."
> - Martin Luther King Jr.
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

From mikeschinkel at newclarity.net  Sun Aug 22 08:12:28 2010
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Sun, 22 Aug 2010 04:12:28 -0400
Subject: [wp-hackers] custom_post_type and custom taxonomy naming
In-Reply-To: <AANLkTik8Tca4HrZLPQN-8wvwLRN1kaOLuTWaR4M3ZJS9@mail.gmail.com>
References: <AANLkTikeCB7S_-gBXKQe-T-86Kv0enog==aGrnbjbwK_@mail.gmail.com>
	<AANLkTi=vEAcCaHF4YA_wcQJiYeLtUm8ebKZozoiU2gdw@mail.gmail.com>
	<28EC0A05-BDF7-4727-A26B-76AB536FE984@newclarity.net>
	<AANLkTikqtyENAM=61-yMN2F1E3wDXNy9C0R2a8FnpMyX@mail.gmail.com>
	<241888D7-FA6E-4DDC-9F37-D1DE1C6244CF@newclarity.net>
	<AANLkTinY0NAacorm8zBzYXkSS0h_n8VkYnVmkGFPft9s@mail.gmail.com>
	<AE8DE6A8-FEE9-44BA-93DA-759941020CDA@newclarity.net>
	<AANLkTinGi45xfybvN=9s2KJ1MmrX2zj5YDswrhxraNdT@mail.gmail.com>
	<97EE0442-3AC7-4FFE-BFBF-DC2875FC4B77@newclarity.net>
	<AANLkTik8Tca4HrZLPQN-8wvwLRN1kaOLuTWaR4M3ZJS9@mail.gmail.com>
Message-ID: <D26C89CA-C49D-4DDA-B9FA-DA9C5DF738DE@newclarity.net>

I'll ask Andrew Nacin at WordCamp tomorrow. :)

On Aug 22, 2010, at 3:06 AM, Lox wrote:

> 2010/8/22 Mike Schinkel <mikeschinkel at newclarity.net>
> 
>> Sounds like a great solution.  I was thinking about trying something
>> similar I just haven't gotten to it yet.
> 
> 
> I just wonder why the 2010 theme's page template doesn't make use of
> get_template_part ... It will be easy to hook into it with our plugins as it
> has a filter on it...
> 
> :(
> 
> -- 
> Lox
> lox.dev at knc.nc
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers


From mikeschinkel at newclarity.net  Sun Aug 22 08:17:08 2010
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Sun, 22 Aug 2010 04:17:08 -0400
Subject: [wp-hackers] Custom post-types and taxonomy rewrite
In-Reply-To: <AANLkTin-eECzqrQD8+b_-voBgg3ZZ3SPqc6=GJmwMO16@mail.gmail.com>
References: <AANLkTin-eECzqrQD8+b_-voBgg3ZZ3SPqc6=GJmwMO16@mail.gmail.com>
Message-ID: <55F56FF2-BB9E-485C-BCCB-CEF2BDF3AC5C@newclarity.net>

It's not easy. Hence http://core.trac.wordpress.org/ticket/12935

-Mike

On Aug 21, 2010, at 8:35 PM, Lox wrote:

> Hello,
> 
> I give a lot of importance in my url. I have a post-type called 'schools'
> and a taxonomy for it called 'type'. The rewrite for the post-type is
> 'school' so http://mysite.com/school/the_school_name/ is giving me the page
> for "the_school_name" school.
> 
> Now I need to categorize them, so I created a taxonomy called 'school_type'.
> How can I have the 'school_type' slugs in front of the schools permalinks ?
> 
> Basically I need to have:
> 
> http://mysite.com/school/the_school_type/the_school_name/
> 
> I tried to add %category% to the postype rewrite parameter but it failed.
> 
> Best regards
> 
> -- 
> Lox
> lox.dev at knc.nc
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers


From dan at dansmart.co.uk  Sun Aug 22 08:38:40 2010
From: dan at dansmart.co.uk (Dan Smart)
Date: Sun, 22 Aug 2010 09:38:40 +0100
Subject: [wp-hackers] Custom post-types and taxonomy rewrite
In-Reply-To: <AANLkTin-eECzqrQD8+b_-voBgg3ZZ3SPqc6=GJmwMO16@mail.gmail.com>
References: <AANLkTin-eECzqrQD8+b_-voBgg3ZZ3SPqc6=GJmwMO16@mail.gmail.com>
Message-ID: <735DC203-CC0A-4BB1-85C3-FA9E3D941B52@dansmart.co.uk>

This is being solved here, and is worth checking out: http://somadesign.ca/projects/smarter-custom-post-types/

It uses a combination of the 'generate_rewrite_rules' filter and the 'template_include' filter to cater for the rewrite, with an appropriately named template.


(Sent from iPhone)
Dan Smart - Web Developer
www.dansmart.co.uk

On 22 Aug 2010, at 01:35, Lox <lox.dev at knc.nc> wrote:

> Hello,
> 
> I give a lot of importance in my url. I have a post-type called 'schools'
> and a taxonomy for it called 'type'. The rewrite for the post-type is
> 'school' so http://mysite.com/school/the_school_name/ is giving me the page
> for "the_school_name" school.
> 
> Now I need to categorize them, so I created a taxonomy called 'school_type'.
> How can I have the 'school_type' slugs in front of the schools permalinks ?
> 
> Basically I need to have:
> 
> http://mysite.com/school/the_school_type/the_school_name/
> 
> I tried to add %category% to the postype rewrite parameter but it failed.
> 
> Best regards
> 
> -- 
> Lox
> lox.dev at knc.nc
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

From peter.westwood at ftwr.co.uk  Sun Aug 22 08:57:38 2010
From: peter.westwood at ftwr.co.uk (Peter Westwood)
Date: Sun, 22 Aug 2010 09:57:38 +0100
Subject: [wp-hackers] WP.org plugin repository - multiple users
In-Reply-To: <AANLkTik--W3Pb8XxBv2eGREfRu=k4ghqkTBBiWBRMJW6@mail.gmail.com>
References: <1967CB0F-18B9-4723-A9C1-2CE00B66392D@thisismyurl.com>
	<AANLkTimE1uQ1JyFBC83-aOSqs7+FBwNSKe9_Md_v7RUY@mail.gmail.com>
	<967706437.528925.1282245312314.JavaMail.open-xchange@oxusltgw05.schlund.de>
	<AANLkTi=ydOLhQ_sUnCzFig69Uyj9Gp9tFUWzacBb6msY@mail.gmail.com>
	<AANLkTik--W3Pb8XxBv2eGREfRu=k4ghqkTBBiWBRMJW6@mail.gmail.com>
Message-ID: <AB807186-191F-4DDD-AA3E-D20855BEC3B8@ftwr.co.uk>


On 22 Aug 2010, at 03:03, Lox wrote:

> 
> Github pull requests feature is a killer one that really is missing in
> wp.org (tell me if I am wrong), and thus prevents developers to contribute
> to other plugins. Why? Because it is a pain with SVN!
> 
> For those not knowing about it, github allows ANY developers to fork ANY
> project with ONE CLICK, to modify and commit on its fork and then, with ONE
> CLICK, to send a pull request to the dev that can easily import all or part
> of the commits:
> 
> # git merge forked_repo (hey easy, isn't it?)
> 

Personally I find the git workflow which encourages everyone to fork an exceptionally bad way to build a community around some code.

It also seems to lead to the situation where you can search for a project and find that there are 10s of different source code repositories and it is not always obvious which is the real one and which are the personal forks.

Collaborative development works exceptionally well with subversion - yes git /may/ have some stuff which makes certain scenarios easier for certain people but it is not the best revision control system by a long stretch and has a much higher barrier to entry that subversion does for new developers.

> 
> *How wp.org is know, fraining development and innovation whereas much better
> exists. *
> 
> A simple example: I corrected about all error notices on Otto's SFC plugin
> and I have added French locales. I put the code on github and sent him a
> mail to add my changes to his plugin. Bu he did not... Why? Most certainly
> because it is a pain with how wp.org is, who wouldn't apply commits that fix
> error notices?

Maybe you should have sent him a patch file instead against the svn repository.

That way you would have made it as easy as possible for him to apply your changes rather than expect him to possibly learn a new tool just to get your changes.

westi
-- 
Peter Westwood
http://blog.ftwr.co.uk | http://westi.wordpress.com
C53C F8FC 8796 8508 88D6 C950 54F4 5DCD A834 01C5


From lox.dev at knc.nc  Sun Aug 22 09:24:59 2010
From: lox.dev at knc.nc (Lox)
Date: Sun, 22 Aug 2010 20:24:59 +1100
Subject: [wp-hackers] WP.org plugin repository - multiple users
In-Reply-To: <AB807186-191F-4DDD-AA3E-D20855BEC3B8@ftwr.co.uk>
References: <1967CB0F-18B9-4723-A9C1-2CE00B66392D@thisismyurl.com>
	<AANLkTimE1uQ1JyFBC83-aOSqs7+FBwNSKe9_Md_v7RUY@mail.gmail.com>
	<967706437.528925.1282245312314.JavaMail.open-xchange@oxusltgw05.schlund.de>
	<AANLkTi=ydOLhQ_sUnCzFig69Uyj9Gp9tFUWzacBb6msY@mail.gmail.com>
	<AANLkTik--W3Pb8XxBv2eGREfRu=k4ghqkTBBiWBRMJW6@mail.gmail.com>
	<AB807186-191F-4DDD-AA3E-D20855BEC3B8@ftwr.co.uk>
Message-ID: <AANLkTimWqhTj1a9kd4EJnXz=FEF9+b6Ux6QyXFYqWDjT@mail.gmail.com>

2010/8/22 Peter Westwood <peter.westwood at ftwr.co.uk>

> Personally I find the git workflow which encourages everyone to fork an
> exceptionally bad way to build a community around some code.
>
> It also seems to lead to the situation where you can search for a project
> and find that there are 10s of different source code repositories and it is
> not always obvious which is the real one and which are the personal forks.
>

That is not true. A fork graph gives all that information. We, the
cyanogenmod team of android, are using it intensively and it is full of
success, we do not have any problem with it and we have not found any
drawbacks for now nor any need to use something else. And, using a tool like
gerrit and the team feature of github, it makes it obvious that it is the
main repo (eg: http://github.com/cyanogenmod)

Anyway if any day WP.org wants to use it there is the possibility to link
the plugin to the main repo, all other forks will be just workspaces not
linked to any plugin on WP.org.


>  Collaborative development works exceptionally well with subversion - yes
> git /may/ have some stuff which makes certain scenarios easier for certain
> people but it is not the best revision control system by a long stretch and
> has a much higher barrier to entry that subversion does for new developers.
>

It is much better with github and forks. I experienced many time the
difference on contributing on a github project and a WP.org one... It is
huge and github projects are progressing faster because it is really easy to
anyone to contribute. Saying the opposite is a non sense.

And if you say git is difficult to learn means u don't know about it. I have
been able to learn it in half a day and the documentation around it is well
written.

SO many big famous projects use it with success (linux kernel ...........)

>
> > *How wp.org is know, fraining development and innovation whereas much
> better
> > exists. *
> >
> > A simple example: I corrected about all error notices on Otto's SFC
> plugin
> > and I have added French locales. I put the code on github and sent him a
> > mail to add my changes to his plugin. Bu he did not... Why? Most
> certainly
> > because it is a pain with how wp.org is, who wouldn't apply commits that
> fix
> > error notices?
>
> Maybe you should have sent him a patch file instead against the svn
> repository.
>
> That way you would have made it as easy as possible for him to apply your
> changes rather than expect him to possibly learn a new tool just to get your
> changes.
>

I did send him a link to my commits on Github, commits are detailed patches
and downloading them is as simple as clicking a button ...

-- 
Lox
lox.dev at knc.nc

From lox.dev at knc.nc  Sun Aug 22 09:29:02 2010
From: lox.dev at knc.nc (Lox)
Date: Sun, 22 Aug 2010 20:29:02 +1100
Subject: [wp-hackers] Custom post-types and taxonomy rewrite
In-Reply-To: <735DC203-CC0A-4BB1-85C3-FA9E3D941B52@dansmart.co.uk>
References: <AANLkTin-eECzqrQD8+b_-voBgg3ZZ3SPqc6=GJmwMO16@mail.gmail.com>
	<735DC203-CC0A-4BB1-85C3-FA9E3D941B52@dansmart.co.uk>
Message-ID: <AANLkTinEdzieAKe9YnDDsV_JjVBaWtMznx7+v4rv2+sv@mail.gmail.com>

2010/8/22 Dan Smart <dan at dansmart.co.uk>

> This is being solved here, and is worth checking out:
> http://somadesign.ca/projects/smarter-custom-post-types/
>
> It uses a combination of the 'generate_rewrite_rules' filter and the
> 'template_include' filter to cater for the rewrite, with an appropriately
> named template.
>

That's great thanks for the link. I'll add it to my class that also manages
taxonomies and metaboxes very easly.

-- 
Lox
lox.dev at knc.nc

From elfin at elfden.co.uk  Sun Aug 22 10:46:06 2010
From: elfin at elfden.co.uk (Rich Pedley)
Date: Sun, 22 Aug 2010 11:46:06 +0100
Subject: [wp-hackers] WP.org plugin repository - multiple users
In-Reply-To: <AANLkTimWqhTj1a9kd4EJnXz=FEF9+b6Ux6QyXFYqWDjT@mail.gmail.com>
References: <1967CB0F-18B9-4723-A9C1-2CE00B66392D@thisismyurl.com>	<AANLkTimE1uQ1JyFBC83-aOSqs7+FBwNSKe9_Md_v7RUY@mail.gmail.com>	<967706437.528925.1282245312314.JavaMail.open-xchange@oxusltgw05.schlund.de>	<AANLkTi=ydOLhQ_sUnCzFig69Uyj9Gp9tFUWzacBb6msY@mail.gmail.com>	<AANLkTik--W3Pb8XxBv2eGREfRu=k4ghqkTBBiWBRMJW6@mail.gmail.com>	<AB807186-191F-4DDD-AA3E-D20855BEC3B8@ftwr.co.uk>
	<AANLkTimWqhTj1a9kd4EJnXz=FEF9+b6Ux6QyXFYqWDjT@mail.gmail.com>
Message-ID: <4C70FFEE.2090404@elfden.co.uk>

On 22/08/2010 10:24, Lox wrote:
>> >    Collaborative development works exceptionally well with subversion - yes
>> >  git /may/ have some stuff which makes certain scenarios easier for certain
>> >  people but it is not the best revision control system by a long stretch and
>> >  has a much higher barrier to entry that subversion does for new developers.
>> >
> It is much better with github and forks. I experienced many time the
> difference on contributing on a github project and a WP.org one... It is
> huge and github projects are progressing faster because it is really easy to
> anyone to contribute. Saying the opposite is a non sense.

I've been through this before when moving from CVS to Subversion. I 
had to learn command line CVS initially before a decent working 
windows GUI came about, and still hated it even then.

Without the tortoise shell for subversion on windows I wouldn't be 
using the plugin repository.

> And if you say git is difficult to learn means u don't know about it. I have
> been able to learn it in half a day and the documentation around it is well
> written.

Not everyone will learn as fast. It took me 2 years to get to know CVS 
well enough to do anything more than basic stuff. Because most of the 
time I only ever needed the basics - every time I wanted to do 
anything else I had to wade through a ton of documentation to find out 
how to do things.

To this day I have only ever created one patch.

> SO many big famous projects use it with success (linux kernel ...........)

You're touting that as a success? unless you are pretty tech savvy 
then wading through anything linux wise is a complete and utter 
nightmare. Not everyone comes from a linux background.

Plus what is right for one group of people may be totally wrong for 
another.

I recently dropped out of another project because they moved to git, 
no way will I try and use both. In fact I would rather remove my 
plugins from the repository if it ever changes to git - I dare say I 
won't be the only one.

Rich

From scribu at gmail.com  Sun Aug 22 10:48:00 2010
From: scribu at gmail.com (scribu)
Date: Sun, 22 Aug 2010 13:48:00 +0300
Subject: [wp-hackers] Is_single function wrongly commented ?
In-Reply-To: <AANLkTi=vT61miZDsuLuF7wguOL1K2aVjD8cnWPnC2pJv@mail.gmail.com>
References: <AANLkTi=vT61miZDsuLuF7wguOL1K2aVjD8cnWPnC2pJv@mail.gmail.com>
Message-ID: <AANLkTi=3sVb9NwDvW9bbyzfGwvC8qzCGx0Q8tnx=gzJy@mail.gmail.com>

On Sun, Aug 22, 2010 at 6:31 AM, Lox <lox.dev at knc.nc> wrote:

> This is wrong, is_single() returns false for pages
>
> 1) the fuction comment should be corrected
>

Indeed. Please open a ticket on trac.



> 2) how can I have is_single to return true for a custom post-type that
> behaves like a page ?
>

Use is_singular('your-post-type') instead.


-- 
http://scribu.net

From lox.dev at knc.nc  Sun Aug 22 11:19:19 2010
From: lox.dev at knc.nc (Lox)
Date: Sun, 22 Aug 2010 22:19:19 +1100
Subject: [wp-hackers] WP.org plugin repository - multiple users
In-Reply-To: <4C70FFEE.2090404@elfden.co.uk>
References: <1967CB0F-18B9-4723-A9C1-2CE00B66392D@thisismyurl.com>
	<AANLkTimE1uQ1JyFBC83-aOSqs7+FBwNSKe9_Md_v7RUY@mail.gmail.com>
	<967706437.528925.1282245312314.JavaMail.open-xchange@oxusltgw05.schlund.de>
	<AANLkTi=ydOLhQ_sUnCzFig69Uyj9Gp9tFUWzacBb6msY@mail.gmail.com>
	<AANLkTik--W3Pb8XxBv2eGREfRu=k4ghqkTBBiWBRMJW6@mail.gmail.com>
	<AB807186-191F-4DDD-AA3E-D20855BEC3B8@ftwr.co.uk>
	<AANLkTimWqhTj1a9kd4EJnXz=FEF9+b6Ux6QyXFYqWDjT@mail.gmail.com>
	<4C70FFEE.2090404@elfden.co.uk>
Message-ID: <AANLkTikS+4kNDGUS8-hvMukWHrbSRXU10ci7fvfBtUrH@mail.gmail.com>

)2010/8/22 Rich Pedley <elfin at elfden.co.uk>

> Not everyone will learn as fast. It took me 2 years to get to know CVS well
> enough to do anything more than basic stuff. Because most of the time I only
> ever needed the basics - every time I wanted to do anything else I had to
> wade through a ton of documentation to find out how to do things.
>
> To this day I have only ever created one patch.
>

I agree that CVS and SVN are difficult to learn... and so is Track, yeark...
I stlll don"t get them but I tried many times...

They are difficult to learn but Git is not, really, I was surprised how easy
it has been to learn it, and to teach it to Windows users (I've teach many
non tech guys about it over Gtalk)


>
>
>  SO many big famous projects use it with success (linux kernel ...........)
>>
>
> You're touting that as a success? unless you are pretty tech savvy then
> wading through anything linux wise is a complete and utter nightmare. Not
> everyone comes from a linux background.
>
> Plus what is right for one group of people may be totally wrong for
> another.
>
>
Talking about success, Linux is. Ans so is Android, it oversaled iPhone OS
in US. And guess what: it is using GIT. Well there is also Jquery (
http://github.com/jquery/jquery), prototype.js, scripty2 and more.... Linux
was just ONE example.


> I recently dropped out of another project because they moved to git, no way
> will I try and use both. In fact I would rather remove my plugins from the
> repository if it ever changes to git - I dare say I won't be the only one.
>

You should not be afraid of GIT, it is easy, really. And you're right, more
and more project move to GIT, and most biggest Open source project are using
it, guess what it means....

I do not want to go into a flame war. I just wanted to share my experience:
I've just noticed when I came to wordpress that plugin contribution is a
hassle.

Ideally I'd like to have the ability to choose github has host for my
plugins, as an *alternative* to SVN, not a straight and total move. I am
totally convinced that most plugins will slowly move to it if that happens.

Easing plugin development contributions is all benefit for the Wordpress
community: easier means more contributions, discussions, faster development,
better quality products and so less work to review.

-- 
Lox
lox.dev at knc.nc

From lox.dev at knc.nc  Sun Aug 22 11:21:13 2010
From: lox.dev at knc.nc (Lox)
Date: Sun, 22 Aug 2010 22:21:13 +1100
Subject: [wp-hackers] Is_single function wrongly commented ?
In-Reply-To: <AANLkTi=3sVb9NwDvW9bbyzfGwvC8qzCGx0Q8tnx=gzJy@mail.gmail.com>
References: <AANLkTi=vT61miZDsuLuF7wguOL1K2aVjD8cnWPnC2pJv@mail.gmail.com>
	<AANLkTi=3sVb9NwDvW9bbyzfGwvC8qzCGx0Q8tnx=gzJy@mail.gmail.com>
Message-ID: <AANLkTikf-zhsTroKvxy6H3nkX+KWbT4_N4Eqo8g3C0F2@mail.gmail.com>

2010/8/22 scribu <scribu at gmail.com>

> > 1) the fuction comment should be corrected
> >
>
> Indeed. Please open a ticket on trac.


I'll do.

Thank you for answering, I was suspecting that I may have misunderstood the
function behavior.

-- 
Lox
lox.dev at knc.nc

From lox.dev at knc.nc  Sun Aug 22 11:24:11 2010
From: lox.dev at knc.nc (Lox)
Date: Sun, 22 Aug 2010 22:24:11 +1100
Subject: [wp-hackers] WP.org plugin repository - multiple users
In-Reply-To: <4C70FFEE.2090404@elfden.co.uk>
References: <1967CB0F-18B9-4723-A9C1-2CE00B66392D@thisismyurl.com>
	<AANLkTimE1uQ1JyFBC83-aOSqs7+FBwNSKe9_Md_v7RUY@mail.gmail.com>
	<967706437.528925.1282245312314.JavaMail.open-xchange@oxusltgw05.schlund.de>
	<AANLkTi=ydOLhQ_sUnCzFig69Uyj9Gp9tFUWzacBb6msY@mail.gmail.com>
	<AANLkTik--W3Pb8XxBv2eGREfRu=k4ghqkTBBiWBRMJW6@mail.gmail.com>
	<AB807186-191F-4DDD-AA3E-D20855BEC3B8@ftwr.co.uk>
	<AANLkTimWqhTj1a9kd4EJnXz=FEF9+b6Ux6QyXFYqWDjT@mail.gmail.com>
	<4C70FFEE.2090404@elfden.co.uk>
Message-ID: <AANLkTi=-YPaJG-w3Soa2FOZ2mq2k17uywSmimsgBBLQp@mail.gmail.com>

2010/8/22 Rich Pedley <elfin at elfden.co.uk>

> Without the tortoise shell for subversion on windows I wouldn't be using
> the plugin repository.


http://code.google.com/p/tortoisegit/

-- 
Lox
lox.dev at knc.nc

From scribu at gmail.com  Sun Aug 22 11:33:34 2010
From: scribu at gmail.com (scribu)
Date: Sun, 22 Aug 2010 14:33:34 +0300
Subject: [wp-hackers] Is_single function wrongly commented ?
In-Reply-To: <AANLkTikf-zhsTroKvxy6H3nkX+KWbT4_N4Eqo8g3C0F2@mail.gmail.com>
References: <AANLkTi=vT61miZDsuLuF7wguOL1K2aVjD8cnWPnC2pJv@mail.gmail.com>
	<AANLkTi=3sVb9NwDvW9bbyzfGwvC8qzCGx0Q8tnx=gzJy@mail.gmail.com>
	<AANLkTikf-zhsTroKvxy6H3nkX+KWbT4_N4Eqo8g3C0F2@mail.gmail.com>
Message-ID: <AANLkTinh--y1s3zVyTO5nSOzoBP2RpHEP7Qb=xAv3xqS@mail.gmail.com>

On Sun, Aug 22, 2010 at 2:21 PM, Lox <lox.dev at knc.nc> wrote:

> Thank you for answering, I was suspecting that I may have misunderstood the
> function behavior.
>

Well, that was the _intended_ behaviour, but pages got added along the way,
and now we can't fix it because of backwards compatibility. So yeah,
updating the docblock is the best thing to do.

-- 
http://scribu.net

From dc153464a11bcf5aeb18180db28017fb.wp-hackers at planetmike.com  Sun Aug 22 11:39:46 2010
From: dc153464a11bcf5aeb18180db28017fb.wp-hackers at planetmike.com (Michael Clark)
Date: Sun, 22 Aug 2010 07:39:46 -0400
Subject: [wp-hackers] Custom post type & hierarchical
In-Reply-To: <E145D543-830E-4859-98DC-94C439705F93@dansmart.co.uk>
References: <p06240800c896043f4654@192.168.1.67>
	<AANLkTinvsuz0OFezJHLr8d+K5yP68donVr_LF45J4McO@mail.gmail.com>
	<p06240801c8960eb0b8e7@[192.168.1.67]>
	<E145D543-830E-4859-98DC-94C439705F93@dansmart.co.uk>
Message-ID: <p06240801c896bc0558c3@[192.168.1.67]>

Good morning everyone,

Looking through trac I found that when you set up a hierarchical 
custom_post_type, you have to flush the rewrite rules. From 
http://core.trac.wordpress.org/ticket/13490 :

"After registering a post type, you need to flush the rewrite rules 
in order for the new rules to take effect, This is probably whats 
caught you, you've set it up first without the hierarchical flag set, 
then changed it, which has enabled the UI, but the rules are still 
only for non-hierarchical."

I added this code to the bottom of my function create_my_post_types() 
and all is good now.
	global $wp_rewrite;
	$wp_rewrite->flush_rules(false);

Many thanks for your help. Mike



At 8:19 AM +0100 8/22/10, Dan Smart wrote:
>Just to confirm, I have the same issue on WP3.0.1, was going to 
>enquire about that too.
>
>Mind you, the rewrite rules for custom taxonomies don't seem to be 
>completely implemented by WP yet, so I assumed this was another 
>related issue.
>
>Dan
>
>Dan Smart - Web Developer
>www.dansmart.co.uk
>
>On 22 Aug 2010, at 00:17, Michael 
>Clark<dc153464a11bcf5aeb18180db28017fb.wp-hackers at planetmike.com> 
>wrote:
>
>>  At 1:49 AM +0300 8/22/10, scribu wrote:
>>>  On Sun, Aug 22, 2010 at 1:39 AM, Michael Clark <
>>>  -> wrote:
>>>
>>>>  I've added a new "Show" of "1998 Season". Then I added in a show that was
>>>>  in that season. You Can't Take it With You. In the admin area:
>>>>  http://www.example.com/wp-admin/edit.php?post_type=shows I see the show in
>>>>  the hierarchy correctly. But when I click on the View link under the show
>>>>  title 
>>>>(http://www.example.com/shows/1998-season/you-cant-take-it-with-you/)
>>>>  I get a 404 error. If I remove 1998-season from the URL, the page shows up
>>>>  just fine. Is this a WordPress bug, or have I done something 
>>>>wrong somewhere
>>>>  along the way? Searching the Codex, WP forums and Google isn't turning up
>>>>  anything useful.
>>>>
>>>
>>>  Maybe it's because the slug begins with a number. Try changing it to
>>>  'test-1998-season'.
>>
>>  Nice guess, but that did not affect anything.
>>
>>  BTW, WP 3.0.1
>>
>>  --
>>
>>  Michael Clark
>>  http://www.PlanetMike.com
>>
>>  Christmas Music 24 Hours a Day, 7 Days a week
>>  http://www.ChristmasMusic247.com
>>
>>  "Injustice anywhere is a threat to justice everywhere."
>>  - Martin Luther King Jr.
>>  _______________________________________________
>>  wp-hackers mailing list
>>  wp-hackers at lists.automattic.com
>>  http://lists.automattic.com/mailman/listinfo/wp-hackers
>_______________________________________________
>wp-hackers mailing list
>wp-hackers at lists.automattic.com
>http://lists.automattic.com/mailman/listinfo/wp-hackers


-- 

Michael Clark
http://www.PlanetMike.com

Christmas Music 24 Hours a Day, 7 Days a week
http://www.ChristmasMusic247.com

"Injustice anywhere is a threat to justice everywhere."
  - Martin Luther King Jr.

From lox.dev at knc.nc  Sun Aug 22 11:50:40 2010
From: lox.dev at knc.nc (Lox)
Date: Sun, 22 Aug 2010 22:50:40 +1100
Subject: [wp-hackers] Custom post type & hierarchical
In-Reply-To: <p06240801c896bc0558c3@192.168.1.67>
References: <p06240800c896043f4654@192.168.1.67>
	<AANLkTinvsuz0OFezJHLr8d+K5yP68donVr_LF45J4McO@mail.gmail.com>
	<p06240801c8960eb0b8e7@192.168.1.67>
	<E145D543-830E-4859-98DC-94C439705F93@dansmart.co.uk>
	<p06240801c896bc0558c3@192.168.1.67>
Message-ID: <AANLkTimKzvmYDn_adF+vYTq_g=ZhEwpsiyxe=_GUJeV1@mail.gmail.com>

2010/8/22 Michael Clark <
dc153464a11bcf5aeb18180db28017fb.wp-hackers at planetmike.com>

> I added this code to the bottom of my function create_my_post_types() and
> all is good now.
>        global $wp_rewrite;
>        $wp_rewrite->flush_rules(false);
>

Do u call that function after right after register_post_type? If so it means
it get called on every page request witch is not good, I think.

I personally "flush_rules" only when I change the rewrite slug and it works.

Best regards.

-- 
Lox
lox.dev at knc.nc

From lynne.pope at gmail.com  Sun Aug 22 13:32:07 2010
From: lynne.pope at gmail.com (Lynne Pope)
Date: Mon, 23 Aug 2010 01:32:07 +1200
Subject: [wp-hackers] Code reviews for plugins?
In-Reply-To: <2777658699995126237@unknownmsgid>
References: <4C6D885B.6010506@mattjacob.com>
	<F657E634-5D14-445F-8545-023A62CD8D5E@newclarity.net>
	<183630796.530862.1282248087954.JavaMail.open-xchange@oxusltgw05.schlund.de>
	<57B84544-FB40-435F-809C-BA2786D7462D@gmail.com>
	<AE12B082-EEFC-4FE1-AF52-ABDA655342F1@codehooligans.com>
	<2777658699995126237@unknownmsgid>
Message-ID: <AANLkTino+Q5Om1KTg39r0cRMqmbW9KAPJYwax=gQQ0Vm@mail.gmail.com>

On 20 August 2010 09:12, Heiko Rabe <heiko.rabe at code-styling.de> wrote:

> It would be a good idea to check plugins, no doubt. But if you introduce
> such a rating of flagging system which additionally can be filtered on, you
> would imply, that all not yet reviewed plugins are crap. You would give
> advantage to the already reviewed plugins and it stucks until the review
> has
> taken place and reached a particular plugin.
> During this time delay a well done plugin will be presented to audience as
> a
> "bad" one, which is wrong but felt so by audience for psychological
> reasons.
> Keep in mind, that this affects also the download and utilization rates of
> plugins!
>

If there was enough publicity about the review cycle I think people would be
smart enough to realise reviews take time. It wouldn't be hard to write a
monthly post to show how much progress has been made - like a review
progress meter. If possible, it would be good to have a new field in the
plugin repo to show a status to users, something like: "not yet reviewed",
"developer notified of some issues", and "version xyz passed review", with
the date shown for the last two.


>
> Second concern: I would approximate the number of code lines over all
> plugins at least 10851 plugins multiplied an average of 2000 lines =
> approx.
> 20 million lines of code at least! I think, it's a huge bunch of work to
> read through the code, understand it, looking for security holes, XSS
> attach
> vectors etc.
>

I don't think it's necessary to review all plugins. WordPress phones home
with information about which plugins are installed on which versions of
WordPress. The repo probably contains a lot of plugins that are no longer in
use so why not use the information that is collected from the backend to
shortlist only those plugins that are currently being used?
Then work through from the most popular plugins in use on WP 3.01 & 3.0 to
least popular on those versions, followed by the 2.9 versions.

I'd also suggest publicizing this as much as possible and asking users to
get involved. Very few people are using the works/doesn't work reporting
function in Extend but if users could contribute by testing and reporting
back to the reviewers it could help speed the review process along. If users
report that a plugin doesn't work then there's no need for a code review -
just inform the developer.

Maybe also see if the repo can be changed slightly so that any plugins that
don't work and which have been abandoned could be moved to a, "No longer
maintained" directory. This will help users avoid trying to install a plugin
that won't work while also providing a repository of plugins other
developers can consider resurrecting. Just a thought...



>  So the time this will take is extra ordinary and I'm afraid, that some

things are not possible to understand inside some plugins without deeper
>  knowledge of what they are made for.


I agree Heiko, but I think this idea is something that would gain momentum
and could become a real asset to the WordPress community. It's a +1 from me.

Lynne

From dan at dansmart.co.uk  Sun Aug 22 13:44:51 2010
From: dan at dansmart.co.uk (Dan Smart)
Date: Sun, 22 Aug 2010 14:44:51 +0100
Subject: [wp-hackers] Custom post type & hierarchical
In-Reply-To: <p06240801c896bc0558c3@[192.168.1.67]>
References: <p06240800c896043f4654@192.168.1.67>	<AANLkTinvsuz0OFezJHLr8d+K5yP68donVr_LF45J4McO@mail.gmail.com>	<p06240801c8960eb0b8e7@[192.168.1.67]>	<E145D543-830E-4859-98DC-94C439705F93@dansmart.co.uk>
	<p06240801c896bc0558c3@[192.168.1.67]>
Message-ID: <02b201cb4200$332929c0$997b7d40$@co.uk>

I've tried flushing the rules, and no luck on my hierarchical taxonomy.

Lox, I don't know if you found it a successful fix?


----------------------------------------------------------------------------
---------
Dan Smart - Freelance Web Developer
Web: www.dansmart.co.uk


-----Original Message-----
From: wp-hackers-bounces at lists.automattic.com
[mailto:wp-hackers-bounces at lists.automattic.com] On Behalf Of Michael Clark
Sent: 22 August 2010 12:40
To: wp-hackers at lists.automattic.com
Subject: Re: [wp-hackers] Custom post type & hierarchical

Good morning everyone,

Looking through trac I found that when you set up a hierarchical 
custom_post_type, you have to flush the rewrite rules. From 
http://core.trac.wordpress.org/ticket/13490 :

"After registering a post type, you need to flush the rewrite rules 
in order for the new rules to take effect, This is probably whats 
caught you, you've set it up first without the hierarchical flag set, 
then changed it, which has enabled the UI, but the rules are still 
only for non-hierarchical."

I added this code to the bottom of my function create_my_post_types() 
and all is good now.
	global $wp_rewrite;
	$wp_rewrite->flush_rules(false);

Many thanks for your help. Mike



At 8:19 AM +0100 8/22/10, Dan Smart wrote:
>Just to confirm, I have the same issue on WP3.0.1, was going to 
>enquire about that too.
>
>Mind you, the rewrite rules for custom taxonomies don't seem to be 
>completely implemented by WP yet, so I assumed this was another 
>related issue.
>
>Dan
>
>Dan Smart - Web Developer
>www.dansmart.co.uk
>
>On 22 Aug 2010, at 00:17, Michael 
>Clark<dc153464a11bcf5aeb18180db28017fb.wp-hackers at planetmike.com> 
>wrote:
>
>>  At 1:49 AM +0300 8/22/10, scribu wrote:
>>>  On Sun, Aug 22, 2010 at 1:39 AM, Michael Clark <
>>>  -> wrote:
>>>
>>>>  I've added a new "Show" of "1998 Season". Then I added in a show that
was
>>>>  in that season. You Can't Take it With You. In the admin area:
>>>>  http://www.example.com/wp-admin/edit.php?post_type=shows I see the
show in
>>>>  the hierarchy correctly. But when I click on the View link under the
show
>>>>  title 
>>>>(http://www.example.com/shows/1998-season/you-cant-take-it-with-you/)
>>>>  I get a 404 error. If I remove 1998-season from the URL, the page
shows up
>>>>  just fine. Is this a WordPress bug, or have I done something 
>>>>wrong somewhere
>>>>  along the way? Searching the Codex, WP forums and Google isn't turning
up
>>>>  anything useful.
>>>>
>>>
>>>  Maybe it's because the slug begins with a number. Try changing it to
>>>  'test-1998-season'.
>>
>>  Nice guess, but that did not affect anything.
>>
>>  BTW, WP 3.0.1
>>
>>  --
>>
>>  Michael Clark
>>  http://www.PlanetMike.com
>>
>>  Christmas Music 24 Hours a Day, 7 Days a week
>>  http://www.ChristmasMusic247.com
>>
>>  "Injustice anywhere is a threat to justice everywhere."
>>  - Martin Luther King Jr.
>>  _______________________________________________
>>  wp-hackers mailing list
>>  wp-hackers at lists.automattic.com
>>  http://lists.automattic.com/mailman/listinfo/wp-hackers
>_______________________________________________
>wp-hackers mailing list
>wp-hackers at lists.automattic.com
>http://lists.automattic.com/mailman/listinfo/wp-hackers


-- 

Michael Clark
http://www.PlanetMike.com

Christmas Music 24 Hours a Day, 7 Days a week
http://www.ChristmasMusic247.com

"Injustice anywhere is a threat to justice everywhere."
  - Martin Luther King Jr.
_______________________________________________
wp-hackers mailing list
wp-hackers at lists.automattic.com
http://lists.automattic.com/mailman/listinfo/wp-hackers


From dc153464a11bcf5aeb18180db28017fb.wp-hackers at planetmike.com  Sun Aug 22 14:00:58 2010
From: dc153464a11bcf5aeb18180db28017fb.wp-hackers at planetmike.com (Michael Clark)
Date: Sun, 22 Aug 2010 10:00:58 -0400
Subject: [wp-hackers] Custom post type & hierarchical
In-Reply-To: <AANLkTimKzvmYDn_adF+vYTq_g=ZhEwpsiyxe=_GUJeV1@mail.gmail.com>
References: <p06240800c896043f4654@192.168.1.67>
	<AANLkTinvsuz0OFezJHLr8d+K5yP68donVr_LF45J4McO@mail.gmail.com>
	<p06240801c8960eb0b8e7@192.168.1.67>
	<E145D543-830E-4859-98DC-94C439705F93@dansmart.co.uk>
	<p06240801c896bc0558c3@192.168.1.67>
	<AANLkTimKzvmYDn_adF+vYTq_g=ZhEwpsiyxe=_GUJeV1@mail.gmail.com>
Message-ID: <p06240803c896dc76f332@[192.168.1.67]>

At 10:50 PM +1100 8/22/10, Lox wrote:
>2010/8/22 Michael Clark <
>dc153464a11bcf5aeb18180db28017fb.wp-hackers at planetmike.com>
>
>>  I added this code to the bottom of my function create_my_post_types() and
>>  all is good now.
>  >        global $wp_rewrite;
>  >        $wp_rewrite->flush_rules(false);
>>
>
>Do u call that function after right after register_post_type? If so it means
>it get called on every page request witch is not good, I think.

Yes, I had that right after register_post_type. I commented it out, 
and the hierarchy is still working correctly. So I'd guess that set 
of code only needs to be done after the first time you set up a 
hierarchical set of categories.

I found this info at: http://codex.wordpress.org/Custom_Queries

" "flush" the cached rewrite rules using the 
$wp_rewrite->flush_rules() or by going to settings > permalinks and 
clicking "save" from within the wp-admin. Both methods force 
WordPress to refresh the stored rewrite rules. "

Thanks very much, Mike


>I personally "flush_rules" only when I change the rewrite slug and it works.


-- 

Michael Clark
http://www.PlanetMike.com

Christmas Music 24 Hours a Day, 7 Days a week
http://www.ChristmasMusic247.com

"Injustice anywhere is a threat to justice everywhere."
  - Martin Luther King Jr.

From himself at arnebrachhold.de  Sun Aug 22 14:07:42 2010
From: himself at arnebrachhold.de (Arne Brachhold)
Date: Sun, 22 Aug 2010 16:07:42 +0200
Subject: [wp-hackers] Network Activate and rewrite rules
In-Reply-To: <BLU136-W261C01648DE91DDC7ED14F90810@phx.gbl>
References: <BLU136-W261C01648DE91DDC7ED14F90810@phx.gbl>
Message-ID: <AANLkTi=bMKchi9GuS=_wuF83Qm_vC0J+1OyexziBY2Hk@mail.gmail.com>

Hi,

On Sun, Aug 22, 2010 at 02:09, Theodor Ramisch
<theodor_ramisch at hotmail.com> wrote:
> If somebody "network activates" the plugin, this hook is only called for the current blog. The plugin will be active, but all other blogs are missing the rewrite rules.
> What is the recommended way to correct this behavior?

I one of my plugins I don't add the rules on activation, but in the
init hook. Afterward you can set an option to indicate it was done. On
the next requests you can check for the option and skip the flushing.

- Arne

On Sun, Aug 22, 2010 at 02:09, Theodor Ramisch
<theodor_ramisch at hotmail.com> wrote:
>
> Hi all,
>
> I'm currently developing a plugin which adds some rewrite rules. Because it is recommended not to call flush_rules() on every request, I do this once in the activation hook.
>
> If somebody "network activates" the plugin, this hook is only called for the current blog. The plugin will be active, but all other blogs are missing the rewrite rules.
>
> What is the recommended way to correct this behavior?
>
> Best regards,
>
> ?Theodor
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From lox.dev at knc.nc  Sun Aug 22 14:55:42 2010
From: lox.dev at knc.nc (Lox)
Date: Mon, 23 Aug 2010 01:55:42 +1100
Subject: [wp-hackers] Custom post type & hierarchical
In-Reply-To: <02b201cb4200$332929c0$997b7d40$@co.uk>
References: <p06240800c896043f4654@192.168.1.67>
	<AANLkTinvsuz0OFezJHLr8d+K5yP68donVr_LF45J4McO@mail.gmail.com>
	<p06240801c8960eb0b8e7@192.168.1.67>
	<E145D543-830E-4859-98DC-94C439705F93@dansmart.co.uk>
	<p06240801c896bc0558c3@192.168.1.67>
	<02b201cb4200$332929c0$997b7d40$@co.uk>
Message-ID: <AANLkTimP9jQiw_saW3+crA7XOLxAbwySAH2O-duLC11Z@mail.gmail.com>

2010/8/23 Dan Smart <dan at dansmart.co.uk>

> I've tried flushing the rules, and no luck on my hierarchical taxonomy.
>
> Lox, I don't know if you found it a successful fix?
>

Sorry I haven't tried hierarchical taxonomies.

-- 
Lox
lox.dev at knc.nc

From otto at ottodestruct.com  Sun Aug 22 16:16:33 2010
From: otto at ottodestruct.com (Otto)
Date: Sun, 22 Aug 2010 11:16:33 -0500
Subject: [wp-hackers] WP.org plugin repository - multiple users
In-Reply-To: <AANLkTik--W3Pb8XxBv2eGREfRu=k4ghqkTBBiWBRMJW6@mail.gmail.com>
References: <1967CB0F-18B9-4723-A9C1-2CE00B66392D@thisismyurl.com>
	<AANLkTimE1uQ1JyFBC83-aOSqs7+FBwNSKe9_Md_v7RUY@mail.gmail.com>
	<967706437.528925.1282245312314.JavaMail.open-xchange@oxusltgw05.schlund.de>
	<AANLkTi=ydOLhQ_sUnCzFig69Uyj9Gp9tFUWzacBb6msY@mail.gmail.com>
	<AANLkTik--W3Pb8XxBv2eGREfRu=k4ghqkTBBiWBRMJW6@mail.gmail.com>
Message-ID: <AANLkTinSA3L5gish--Frv4BEYatJdUbdM8RozQC-SAY3@mail.gmail.com>

On Sat, Aug 21, 2010 at 9:03 PM, Lox <lox.dev at knc.nc> wrote:
> A simple example: I corrected about all error notices on Otto's SFC plugin
> and I have added French locales. I put the code on github and sent him a
> mail to add my changes to his plugin. Bu he did not... Why? Most certainly
> because it is a pain with how wp.org is, who wouldn't apply commits that fix
> error notices?

For informational purposes, I didn't commit your changes for a couple
of reasons.

1. I don't like, or use, git. It annoys me.

2. I'm in the middle of rewriting SFC anyway. SFC needs a major update
to use all the new Facebook stuff and to ditch Connect entirely. So
spending time on those changes seemed a bit of a waste.

-Otto

From curtis at curtismchale.ca  Sun Aug 22 16:45:07 2010
From: curtis at curtismchale.ca (Curtis Work)
Date: Sun, 22 Aug 2010 09:45:07 -0700
Subject: [wp-hackers] WP.org plugin repository - multiple users
In-Reply-To: <AANLkTinSA3L5gish--Frv4BEYatJdUbdM8RozQC-SAY3@mail.gmail.com>
References: <1967CB0F-18B9-4723-A9C1-2CE00B66392D@thisismyurl.com>
	<AANLkTimE1uQ1JyFBC83-aOSqs7+FBwNSKe9_Md_v7RUY@mail.gmail.com>
	<967706437.528925.1282245312314.JavaMail.open-xchange@oxusltgw05.schlund.de>
	<AANLkTi=ydOLhQ_sUnCzFig69Uyj9Gp9tFUWzacBb6msY@mail.gmail.com>
	<AANLkTik--W3Pb8XxBv2eGREfRu=k4ghqkTBBiWBRMJW6@mail.gmail.com>
	<AANLkTinSA3L5gish--Frv4BEYatJdUbdM8RozQC-SAY3@mail.gmail.com>
Message-ID: <A4E1E78D-33D9-45F4-B5CC-FA3244709D91@curtismchale.ca>

The reality is that is you want to contribute to a plugin or any OS project you should just do it the way the author wants. They're providing solutions for free so make it easy on them not harder by using your own 'best' solution like Git. I personally prefer Git but would never submit a patch to a WP project in SVN by using Git. It's dumb to think that the provider of OSS will jump at you patch unless you make it as easy as possible. 

On that note is there a documentation on how to submit patches? I would think that the sidebar of each Codex plugin page should link to it. Maybe all that is already there. 

Curtis McHale
Http://www.curtismchale.com
604.751.3482

On 2010-08-22, at 9:16, Otto <otto at ottodestruct.com> wrote:

> On Sat, Aug 21, 2010 at 9:03 PM, Lox <lox.dev at knc.nc> wrote:
>> A simple example: I corrected about all error notices on Otto's SFC plugin
>> and I have added French locales. I put the code on github and sent him a
>> mail to add my changes to his plugin. Bu he did not... Why? Most certainly
>> because it is a pain with how wp.org is, who wouldn't apply commits that fix
>> error notices?
> 
> For informational purposes, I didn't commit your changes for a couple
> of reasons.
> 
> 1. I don't like, or use, git. It annoys me.
> 
> 2. I'm in the middle of rewriting SFC anyway. SFC needs a major update
> to use all the new Facebook stuff and to ditch Connect entirely. So
> spending time on those changes seemed a bit of a waste.
> 
> -Otto
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

From wp at andrewnacin.com  Sun Aug 22 18:40:37 2010
From: wp at andrewnacin.com (Andrew Nacin)
Date: Sun, 22 Aug 2010 14:40:37 -0400
Subject: [wp-hackers] custom_post_type and custom taxonomy naming
In-Reply-To: <D26C89CA-C49D-4DDA-B9FA-DA9C5DF738DE@newclarity.net>
References: <AANLkTikeCB7S_-gBXKQe-T-86Kv0enog==aGrnbjbwK_@mail.gmail.com>
	<AANLkTi=vEAcCaHF4YA_wcQJiYeLtUm8ebKZozoiU2gdw@mail.gmail.com>
	<28EC0A05-BDF7-4727-A26B-76AB536FE984@newclarity.net>
	<AANLkTikqtyENAM=61-yMN2F1E3wDXNy9C0R2a8FnpMyX@mail.gmail.com>
	<241888D7-FA6E-4DDC-9F37-D1DE1C6244CF@newclarity.net>
	<AANLkTinY0NAacorm8zBzYXkSS0h_n8VkYnVmkGFPft9s@mail.gmail.com>
	<AE8DE6A8-FEE9-44BA-93DA-759941020CDA@newclarity.net>
	<AANLkTinGi45xfybvN=9s2KJ1MmrX2zj5YDswrhxraNdT@mail.gmail.com>
	<97EE0442-3AC7-4FFE-BFBF-DC2875FC4B77@newclarity.net>
	<AANLkTik8Tca4HrZLPQN-8wvwLRN1kaOLuTWaR4M3ZJS9@mail.gmail.com>
	<D26C89CA-C49D-4DDA-B9FA-DA9C5DF738DE@newclarity.net>
Message-ID: <AANLkTimu=2LcO4gA7ebwNK3FmK0nfd86PH5upA4U0UvE@mail.gmail.com>

On Sun, Aug 22, 2010 at 4:12 AM, Mike Schinkel
<mikeschinkel at newclarity.net>wrote:

> I'll ask Andrew Nacin at WordCamp tomorrow. :)
>
> On Aug 22, 2010, at 3:06 AM, Lox wrote:
> > I just wonder why the 2010 theme's page template doesn't make use of
> > get_template_part ... It will be easy to hook into it with our plugins as
> it
> > has a filter on it...
>

I'm not sure why it should. We introduced get_template_part() in order to
DRY up code. single.php has its own code that isn't used elsewhere; same
with page.php.

If you want to override page.php, you can do so, on a number of different
hooks or via a child theme. get_template_part() was not designed for plugin
overrides as much as child theme overrides.

From jeffc at wptavern.com  Sun Aug 22 21:15:25 2010
From: jeffc at wptavern.com (Jeff Chandler)
Date: Sun, 22 Aug 2010 17:15:25 -0400
Subject: [wp-hackers] Code reviews for plugins?
Message-ID: <4C71936D.6070600@wptavern.com>

  I wrote a post back in 2009 asking if something like what is bring described here is nothing but a pipe dream.

http://www.wptavern.com/is-a-plugin-validation-team-a-pipe-dream

May be worth reading as well as the comments attached to the post. It's a topic and suggestion that keeps coming up but no one seems to know how to tackle without the intricate process of vetting one plugin against another. What happens if a plugin has been reviewed and flagged as awesome but a week later, has a security vulnerability discovered. Doesn't that make the whole system broke and worthless?

From andrew at graymerica.com  Sun Aug 22 22:10:21 2010
From: andrew at graymerica.com (Andrew Gray)
Date: Sun, 22 Aug 2010 18:10:21 -0400
Subject: [wp-hackers] great example links.php
Message-ID: <E6925686-C118-41F2-87C5-CD2805A596B5@graymerica.com>

Does anyone know of a well done links.php page for displaying / styling wp_list_bookmarks

I am looking something that would make my large links directory for a non-profit look nice and be more usable.

Free or GPL would be the best.

thanks,

Andrew




From vid at zippykid.com  Mon Aug 23 01:26:41 2010
From: vid at zippykid.com (Vid Luther)
Date: Sun, 22 Aug 2010 20:26:41 -0500
Subject: [wp-hackers] introductions and putting the wrong foot forward..
Message-ID: <B5C4B6D8-D1B0-48DF-B42D-0AAEC99DC292@zippykid.com>

Hi Everyone,
 I'm new to the hackers list, and wordpress core development.  I ran into some issues that I thought I would send patches for, but before I did that.. I wanted to do my research, 
rather than wasting the time of a core developer. 

The first issue I had was with the wp_redirect method.. it seems that there is no exit() after it makes the header() call. It's common practice in the PHP world to make that call, as the rest of the PHP is going to execute, even 
though it shouldn't in this case. 

I was wondering if this has been brought up already in the past, and if so, what's the reason to keep it there? If not, I can submit a patch to the core team. 

secondly, http://yoast.com/google-wordpress-and-trackback-urls/

It's an old post, but for SEO reasons it seems to be something that is necessary. It's a 3 yr old post, but I wanted to once again ask if there was a reason for it not being the other way. 

I don't want to make changes to our core functionality, if it'll just get overridden with the next update, if I need to do it as a plugin, I'll do that :).

PS: I scanned through the hackers archives, but since there's no simple way of searching all the years  I gave up after a few months, I did search for wp_redirect in trac though, didn't find anything relating to the issue with exit(); 



From lox.dev at knc.nc  Mon Aug 23 01:32:45 2010
From: lox.dev at knc.nc (Lox)
Date: Mon, 23 Aug 2010 12:32:45 +1100
Subject: [wp-hackers] WP.org plugin repository - multiple users
In-Reply-To: <A4E1E78D-33D9-45F4-B5CC-FA3244709D91@curtismchale.ca>
References: <1967CB0F-18B9-4723-A9C1-2CE00B66392D@thisismyurl.com>
	<AANLkTimE1uQ1JyFBC83-aOSqs7+FBwNSKe9_Md_v7RUY@mail.gmail.com>
	<967706437.528925.1282245312314.JavaMail.open-xchange@oxusltgw05.schlund.de>
	<AANLkTi=ydOLhQ_sUnCzFig69Uyj9Gp9tFUWzacBb6msY@mail.gmail.com>
	<AANLkTik--W3Pb8XxBv2eGREfRu=k4ghqkTBBiWBRMJW6@mail.gmail.com>
	<AANLkTinSA3L5gish--Frv4BEYatJdUbdM8RozQC-SAY3@mail.gmail.com>
	<A4E1E78D-33D9-45F4-B5CC-FA3244709D91@curtismchale.ca>
Message-ID: <AANLkTikhtVsc1zsvsUqvtr0KivCV0fmpsAkk9O2DXKNg@mail.gmail.com>

In fact I do not really mind. I personally use Github for my plugins and
then submit them to WP.org using SVN when a release gets completed.

I was just sharing my experience. Github is definitely better and easier for
code contribution than how WP.org is actually. Saying the opposite just
reflects a lack of knowledge about Github.

Cheers

From mark at simplercomputing.net  Mon Aug 23 01:47:29 2010
From: mark at simplercomputing.net (Mark E)
Date: Sun, 22 Aug 2010 19:47:29 -0600
Subject: [wp-hackers] introductions and putting the wrong foot forward..
In-Reply-To: <B5C4B6D8-D1B0-48DF-B42D-0AAEC99DC292@zippykid.com>
References: <B5C4B6D8-D1B0-48DF-B42D-0AAEC99DC292@zippykid.com>
Message-ID: <4C71D331.6050905@simplercomputing.net>



On 08/22/2010 07:26 PM, Vid Luther wrote:
> I don't want to make changes to our core functionality, if it'll just
> get overridden with the next update, if I need to do it as a plugin,
> I'll do that :).

It's usually best to not make any assumptions about any sort of future 
changes in core code. Instead, make your site work the way you want with 
plugins. Then later if core functionality makes a plugin obsolete, 
disable it.


> PS: I scanned through the hackers archives, but since there's no
> simple way of searching all the years

Try this:

http://tinyurl.com/36ysy2t

;-)

Mark

From lox.dev at knc.nc  Mon Aug 23 01:56:09 2010
From: lox.dev at knc.nc (Lox)
Date: Mon, 23 Aug 2010 12:56:09 +1100
Subject: [wp-hackers] custom_post_type and custom taxonomy naming
In-Reply-To: <AANLkTimu=2LcO4gA7ebwNK3FmK0nfd86PH5upA4U0UvE@mail.gmail.com>
References: <AANLkTikeCB7S_-gBXKQe-T-86Kv0enog==aGrnbjbwK_@mail.gmail.com>
	<AANLkTi=vEAcCaHF4YA_wcQJiYeLtUm8ebKZozoiU2gdw@mail.gmail.com>
	<28EC0A05-BDF7-4727-A26B-76AB536FE984@newclarity.net>
	<AANLkTikqtyENAM=61-yMN2F1E3wDXNy9C0R2a8FnpMyX@mail.gmail.com>
	<241888D7-FA6E-4DDC-9F37-D1DE1C6244CF@newclarity.net>
	<AANLkTinY0NAacorm8zBzYXkSS0h_n8VkYnVmkGFPft9s@mail.gmail.com>
	<AE8DE6A8-FEE9-44BA-93DA-759941020CDA@newclarity.net>
	<AANLkTinGi45xfybvN=9s2KJ1MmrX2zj5YDswrhxraNdT@mail.gmail.com>
	<97EE0442-3AC7-4FFE-BFBF-DC2875FC4B77@newclarity.net>
	<AANLkTik8Tca4HrZLPQN-8wvwLRN1kaOLuTWaR4M3ZJS9@mail.gmail.com>
	<D26C89CA-C49D-4DDA-B9FA-DA9C5DF738DE@newclarity.net>
	<AANLkTimu=2LcO4gA7ebwNK3FmK0nfd86PH5upA4U0UvE@mail.gmail.com>
Message-ID: <AANLkTimjhtEN7H5vLqxDaytnL-bN9gT+mJ-NSjGRbGZN@mail.gmail.com>

2010/8/23 Andrew Nacin <wp at andrewnacin.com>

> I'm not sure why it should. We introduced get_template_part() in order to
> DRY up code. single.php has its own code that isn't used elsewhere; same
> with page.php.
>
> If you want to override page.php, you can do so, on a number of different
> hooks or via a child theme. get_template_part() was not designed for plugin
> overrides as much as child theme overrides.
>

Ok let me explain and use an example.

I have made, for a website, a quiz plugin. I *need* a page to hold it, so it
can be moved, ordered, added to a nav menu, title can be managed using the
page form etc. I can't use a shortcode to let the user put the quiz on the
page he likes, because page content can be parsed many times per page
request (like if u use Otto's SFC plugin) So, in my plugin settings page,
the user selects, from a dropdown, the page to use as the quiz's page
holder.

As long as it is for a specific web site, I can use a theme template adding
my template tag (or a do_action witch I prefer) to display the quiz: that
will reflect the site specific theme and it is ok.

But what happens if I make such plugin public? I will make a copy of the
2010 whole page.php to a template folder of my plugin. So out of the box,
the quiz will use a template based on 2010, and if the user uses a different
theme, the bundled page.php template won't fit. So what? I must give
instruction to tell the user how to make its own template for the quizz, and
thus have to maintain two page.php (his and the quiz's) whereas there is
only one line that changes .... That is tedious ...

Now if page.php was using get_template_part(), I could simply hook into
get_template_part_{$slug} to use a bundled template part. So, my plugin will
feets in user's theme out of the box (as long as his theme reflect the
template layout of 2010 theme witch is the way to do)

Cheers

-- 
Lox
lox.dev at knc.nc

From vid at zippykid.com  Mon Aug 23 02:00:47 2010
From: vid at zippykid.com (Vid Luther)
Date: Sun, 22 Aug 2010 21:00:47 -0500
Subject: [wp-hackers] introductions and putting the wrong foot forward..
In-Reply-To: <4C71D331.6050905@simplercomputing.net>
References: <B5C4B6D8-D1B0-48DF-B42D-0AAEC99DC292@zippykid.com>
	<4C71D331.6050905@simplercomputing.net>
Message-ID: <8DC64830-2804-4AFE-8C05-3CB7164E73D9@zippykid.com>

Thanks Mark,

I should've tried the mightly google site prior to the post. 


Judging by that query, and a different query where i searched for wp_redirect exit the specific issue of exit has not been handled in the threads,
I'd like to propose that this change be made into the core, the patch is simple, I can send it in, unless there is a good reason not to have it in the core.

quite a few of the issues from your first google query wouldn't even have happened, if we used exit() right after header(). 

I'll make a plugin for now, test it out on our site, and then submit the patch if we decide it needs to be submitted, it's  a simple one liner though :).



On Aug 22, 2010, at 8:47 PM, Mark E wrote:

> 
> 
> On 08/22/2010 07:26 PM, Vid Luther wrote:
>> I don't want to make changes to our core functionality, if it'll just
>> get overridden with the next update, if I need to do it as a plugin,
>> I'll do that :).
> 
> It's usually best to not make any assumptions about any sort of future changes in core code. Instead, make your site work the way you want with plugins. Then later if core functionality makes a plugin obsolete, disable it.
> 
> 
>> PS: I scanned through the hackers archives, but since there's no
>> simple way of searching all the years
> 
> Try this:
> 
> http://tinyurl.com/36ysy2t
> 
> ;-)
> 
> Mark
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers


From mark at simplercomputing.net  Mon Aug 23 02:06:07 2010
From: mark at simplercomputing.net (Mark E)
Date: Sun, 22 Aug 2010 20:06:07 -0600
Subject: [wp-hackers] introductions and putting the wrong foot forward..
In-Reply-To: <8DC64830-2804-4AFE-8C05-3CB7164E73D9@zippykid.com>
References: <B5C4B6D8-D1B0-48DF-B42D-0AAEC99DC292@zippykid.com>	<4C71D331.6050905@simplercomputing.net>
	<8DC64830-2804-4AFE-8C05-3CB7164E73D9@zippykid.com>
Message-ID: <4C71D78F.6060609@simplercomputing.net>



On 08/22/2010 08:00 PM, Vid Luther wrote:

> quite a few of the issues from your first google query wouldn't even
> have happened, if we used exit() right after header().

I agree. There's no reason I can think of to redirect a page without 
exiting the script immediately. And, I've run into several problem in 
the past where that lack of exit caused headaches.

Mark

From mark at simplercomputing.net  Mon Aug 23 03:08:31 2010
From: mark at simplercomputing.net (Mark E)
Date: Sun, 22 Aug 2010 21:08:31 -0600
Subject: [wp-hackers] Code reviews for plugins?
In-Reply-To: <4C71936D.6070600@wptavern.com>
References: <4C71936D.6070600@wptavern.com>
Message-ID: <4C71E62F.80307@simplercomputing.net>



On 08/22/2010 03:15 PM, Jeff Chandler wrote:
> I wrote a post back in 2009 asking if something like what is bring
> described here is nothing but a pipe dream.
>
> http://www.wptavern.com/is-a-plugin-validation-team-a-pipe-dream
>
> May be worth reading as well as the comments attached to the post. It's
> a topic and suggestion that keeps coming up but no one seems to know how
> to tackle without the intricate process of vetting one plugin against
> another.

 > What happens if a plugin has been reviewed and flagged as
> awesome but a week later, has a security vulnerability discovered.
> Doesn't that make the whole system broke and worthless?

The answer is simple: Ditch the review process, because obviously nobody 
involved is qualified to manage it.


That said, there are issues about code review that people will not agree 
on - nor should they. Examples:

Some people are entirely anal about insisting on the use of camel case.

Other people are hell bent on using a class even if it only wraps one or 
two incredibly basic functions.

Other people insist that all your css goes in a subdir, all your forms 
go in a subdir, all your JS goes in a dir, etc - even if your entire 
plugin is entirely user-facing and can be contained in one really really 
really small file.

What all that boils down to is people saying "you need to write code 
like ME - I cannot tolerate diversity"

That sort of thinking has absolutely no bearing in a code review process 
unless code might be intended as a core patch, or core addition - that's 
different since that code ought to integrate seemlessly into existing 
style.

Personally, I don't care how people write code as long as three things 
happen:

- No potential function or class name collisions (e.g. be original and 
think ahead)

- No unnecessary overhead. If code isn't needed yet, don't load it. If 
you intend to use data, cache it internally.

- Think like an intruder and defend your code against becoming an 
vehicle for intruders.

So, in terms of code view for plugins, that's all I'd be looking for. 
All the rest is rather pointless.

That latter security item is the biggest hurdle.

One really really really big problem with policing anything is that as 
soon as you start you accept liability. If you fail at any time, you are 
perceived as being liable. On the other hand, if you don't police, no 
one can accuse you of doing a bad job and drag you into court over it.

That's the situation ISPs have faced for about 15 years. And so they 
don't police your activity or your content. They might spy on you, and 
they might reprimand you if someone brings your activity to their 
attention, but they don't police you. And thus they are held liable for 
what you do. They're only a conduit - just like the WP plugin and theme 
repo.

My opinion, if it isn't clear already, is to forget about screening the 
repo. That's not the responsibility of Automattic.

Mark

From mark at simplercomputing.net  Mon Aug 23 03:13:32 2010
From: mark at simplercomputing.net (Mark E)
Date: Sun, 22 Aug 2010 21:13:32 -0600
Subject: [wp-hackers] Code reviews for plugins?
In-Reply-To: <4C71E62F.80307@simplercomputing.net>
References: <4C71936D.6070600@wptavern.com>
	<4C71E62F.80307@simplercomputing.net>
Message-ID: <4C71E75C.9010006@simplercomputing.net>


Correction:


> And thus they are NOT held liable for what you do.


From mikeschinkel at newclarity.net  Mon Aug 23 03:21:23 2010
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Sun, 22 Aug 2010 23:21:23 -0400
Subject: [wp-hackers] Code reviews for plugins?
In-Reply-To: <4C71E62F.80307@simplercomputing.net>
References: <4C71936D.6070600@wptavern.com>
	<4C71E62F.80307@simplercomputing.net>
Message-ID: <0C0F03CF-D716-40E3-BCAF-F35C01D9535A@newclarity.net>

A viable solution seems reasonably clear to me

1.) Crowd-source the code review with a mechanism similar to http://wordpress.stackexchange.com
2.) Focus on the top 15% of plugins by download and use
3.) Review based on objective criteria (i.e. adds tables and/or uses existing tables, use of nonces, list of symbols added to global namespace, number of wp_options added, etc.)

It need not be perfect, it just needs to give some objective and reasonable facts to allow people to decide their own guidance.

-Mike

On Aug 22, 2010, at 11:08 PM, Mark E wrote:

> 
> 
> On 08/22/2010 03:15 PM, Jeff Chandler wrote:
>> I wrote a post back in 2009 asking if something like what is bring
>> described here is nothing but a pipe dream.
>> 
>> http://www.wptavern.com/is-a-plugin-validation-team-a-pipe-dream
>> 
>> May be worth reading as well as the comments attached to the post. It's
>> a topic and suggestion that keeps coming up but no one seems to know how
>> to tackle without the intricate process of vetting one plugin against
>> another.
> 
> > What happens if a plugin has been reviewed and flagged as
>> awesome but a week later, has a security vulnerability discovered.
>> Doesn't that make the whole system broke and worthless?
> 
> The answer is simple: Ditch the review process, because obviously nobody involved is qualified to manage it.
> 
> 
> That said, there are issues about code review that people will not agree on - nor should they. Examples:
> 
> Some people are entirely anal about insisting on the use of camel case.
> 
> Other people are hell bent on using a class even if it only wraps one or two incredibly basic functions.
> 
> Other people insist that all your css goes in a subdir, all your forms go in a subdir, all your JS goes in a dir, etc - even if your entire plugin is entirely user-facing and can be contained in one really really really small file.
> 
> What all that boils down to is people saying "you need to write code like ME - I cannot tolerate diversity"
> 
> That sort of thinking has absolutely no bearing in a code review process unless code might be intended as a core patch, or core addition - that's different since that code ought to integrate seemlessly into existing style.
> 
> Personally, I don't care how people write code as long as three things happen:
> 
> - No potential function or class name collisions (e.g. be original and think ahead)
> 
> - No unnecessary overhead. If code isn't needed yet, don't load it. If you intend to use data, cache it internally.
> 
> - Think like an intruder and defend your code against becoming an vehicle for intruders.
> 
> So, in terms of code view for plugins, that's all I'd be looking for. All the rest is rather pointless.
> 
> That latter security item is the biggest hurdle.
> 
> One really really really big problem with policing anything is that as soon as you start you accept liability. If you fail at any time, you are perceived as being liable. On the other hand, if you don't police, no one can accuse you of doing a bad job and drag you into court over it.
> 
> That's the situation ISPs have faced for about 15 years. And so they don't police your activity or your content. They might spy on you, and they might reprimand you if someone brings your activity to their attention, but they don't police you. And thus they are held liable for what you do. They're only a conduit - just like the WP plugin and theme repo.
> 
> My opinion, if it isn't clear already, is to forget about screening the repo. That's not the responsibility of Automattic.
> 
> Mark
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers


From lynne.pope at gmail.com  Mon Aug 23 03:24:40 2010
From: lynne.pope at gmail.com (Lynne Pope)
Date: Mon, 23 Aug 2010 15:24:40 +1200
Subject: [wp-hackers] Code reviews for plugins?
In-Reply-To: <4C71E62F.80307@simplercomputing.net>
References: <4C71936D.6070600@wptavern.com>
	<4C71E62F.80307@simplercomputing.net>
Message-ID: <AANLkTik7vFjksLOnt+MgLDW5X_+AX1y-SS7c5u671Np5@mail.gmail.com>

On 23 August 2010 15:08, Mark E <mark at simplercomputing.net> wrote:

>
>
>  My opinion, if it isn't clear already, is to forget about screening the
> repo. That's not the responsibility of Automattic.


Nobody is suggesting it is. Unless I've really missed the point here, its
about the community setting up a community-based review process.

If enough people want to get involved and do this then it should, IMO, be
encouraged. It's a huge task to undertake but with enough hands & eyes its
not unachievable.

Lynne

From eric at eamann.com  Mon Aug 23 03:28:16 2010
From: eric at eamann.com (Eric Mann)
Date: Sun, 22 Aug 2010 20:28:16 -0700
Subject: [wp-hackers] Code reviews for plugins?
In-Reply-To: <0C0F03CF-D716-40E3-BCAF-F35C01D9535A@newclarity.net>
References: <4C71936D.6070600@wptavern.com>	<4C71E62F.80307@simplercomputing.net>
	<0C0F03CF-D716-40E3-BCAF-F35C01D9535A@newclarity.net>
Message-ID: <008d01cb4273$3adf0e00$b09d2a00$@com>

I agree on all points, Mike, but kudos on #3.  Having some kind of objective
checklist is the easiest way to avoid differences in coding or organization
styles.  Things like "organizes all JS code in sub-folders" is far less
vital than "provides backwards compatibility for PHP4" or "automatic cleanup
of added option values on uninstall."

An objective list of criteria also makes it easier for new developers to
start working on a plug-in.  My first attempt broke a lot of "rules"
regarding database setup and access ... I'm ashamed to look back at how I
allowed direct querying of the database via POST variables ... that's a huge
security no-no.  I also never thought to clean up my options fields or extra
database tables until someone actually complained about the extra "crap" I'd
left all over their WordPress installation.  So a checklist that a)
developers can build to and b) an objective 3rd party can verify would be
hugely useful.

~Eric

-----Original Message-----
From: wp-hackers-bounces at lists.automattic.com
[mailto:wp-hackers-bounces at lists.automattic.com] On Behalf Of Mike Schinkel
Sent: Sunday, August 22, 2010 8:21 PM
To: wp-hackers at lists.automattic.com
Subject: Re: [wp-hackers] Code reviews for plugins?

A viable solution seems reasonably clear to me

1.) Crowd-source the code review with a mechanism similar to
http://wordpress.stackexchange.com
2.) Focus on the top 15% of plugins by download and use
3.) Review based on objective criteria (i.e. adds tables and/or uses
existing tables, use of nonces, list of symbols added to global namespace,
number of wp_options added, etc.)

It need not be perfect, it just needs to give some objective and reasonable
facts to allow people to decide their own guidance.

-Mike

On Aug 22, 2010, at 11:08 PM, Mark E wrote:

> 
> 
> On 08/22/2010 03:15 PM, Jeff Chandler wrote:
>> I wrote a post back in 2009 asking if something like what is bring
>> described here is nothing but a pipe dream.
>> 
>> http://www.wptavern.com/is-a-plugin-validation-team-a-pipe-dream
>> 
>> May be worth reading as well as the comments attached to the post. It's
>> a topic and suggestion that keeps coming up but no one seems to know how
>> to tackle without the intricate process of vetting one plugin against
>> another.
> 
> > What happens if a plugin has been reviewed and flagged as
>> awesome but a week later, has a security vulnerability discovered.
>> Doesn't that make the whole system broke and worthless?
> 
> The answer is simple: Ditch the review process, because obviously nobody
involved is qualified to manage it.
> 
> 
> That said, there are issues about code review that people will not agree
on - nor should they. Examples:
> 
> Some people are entirely anal about insisting on the use of camel case.
> 
> Other people are hell bent on using a class even if it only wraps one or
two incredibly basic functions.
> 
> Other people insist that all your css goes in a subdir, all your forms go
in a subdir, all your JS goes in a dir, etc - even if your entire plugin is
entirely user-facing and can be contained in one really really really small
file.
> 
> What all that boils down to is people saying "you need to write code like
ME - I cannot tolerate diversity"
> 
> That sort of thinking has absolutely no bearing in a code review process
unless code might be intended as a core patch, or core addition - that's
different since that code ought to integrate seemlessly into existing style.
> 
> Personally, I don't care how people write code as long as three things
happen:
> 
> - No potential function or class name collisions (e.g. be original and
think ahead)
> 
> - No unnecessary overhead. If code isn't needed yet, don't load it. If you
intend to use data, cache it internally.
> 
> - Think like an intruder and defend your code against becoming an vehicle
for intruders.
> 
> So, in terms of code view for plugins, that's all I'd be looking for. All
the rest is rather pointless.
> 
> That latter security item is the biggest hurdle.
> 
> One really really really big problem with policing anything is that as
soon as you start you accept liability. If you fail at any time, you are
perceived as being liable. On the other hand, if you don't police, no one
can accuse you of doing a bad job and drag you into court over it.
> 
> That's the situation ISPs have faced for about 15 years. And so they don't
police your activity or your content. They might spy on you, and they might
reprimand you if someone brings your activity to their attention, but they
don't police you. And thus they are held liable for what you do. They're
only a conduit - just like the WP plugin and theme repo.
> 
> My opinion, if it isn't clear already, is to forget about screening the
repo. That's not the responsibility of Automattic.
> 
> Mark
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

_______________________________________________
wp-hackers mailing list
wp-hackers at lists.automattic.com
http://lists.automattic.com/mailman/listinfo/wp-hackers


From mark at simplercomputing.net  Mon Aug 23 03:49:23 2010
From: mark at simplercomputing.net (Mark E)
Date: Sun, 22 Aug 2010 21:49:23 -0600
Subject: [wp-hackers] Code reviews for plugins?
In-Reply-To: <AANLkTik7vFjksLOnt+MgLDW5X_+AX1y-SS7c5u671Np5@mail.gmail.com>
References: <4C71936D.6070600@wptavern.com>	<4C71E62F.80307@simplercomputing.net>
	<AANLkTik7vFjksLOnt+MgLDW5X_+AX1y-SS7c5u671Np5@mail.gmail.com>
Message-ID: <4C71EFC3.1080806@simplercomputing.net>



On 08/22/2010 09:24 PM, Lynne Pope wrote:
> On 23 August 2010 15:08, Mark E<mark at simplercomputing.net>  wrote:
>>   My opinion, if it isn't clear already, is to forget about screening the
>> repo. That's not the responsibility of Automattic.
>
>
> Nobody is suggesting it is. Unless I've really missed the point here, its
> about the community setting up a community-based review process.
>
> If enough people want to get involved and do this then it should, IMO, be
> encouraged. It's a huge task to undertake but with enough hands&  eyes its
> not unachievable.

I'm seeing a big issue centered around delivering a false sense of 
security to numerous millions of innocent people.

One might think that through before proceeding. And if one proceeds then 
it ought to be made crystal clear and glaringly obvious exactly what the 
review means - in the most basic of layman's of terms. Otherwise an 
entirely new and more dangerous risk will be created as a result of 
trying to eliminate other risks - ironically enough.

I've seen it happen so many times already over the past decade and a 
half that I've lost count.

Mark

From mikeschinkel at newclarity.net  Mon Aug 23 04:01:39 2010
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Mon, 23 Aug 2010 00:01:39 -0400
Subject: [wp-hackers] Code reviews for plugins?
In-Reply-To: <008d01cb4273$3adf0e00$b09d2a00$@com>
References: <4C71936D.6070600@wptavern.com>	<4C71E62F.80307@simplercomputing.net>
	<0C0F03CF-D716-40E3-BCAF-F35C01D9535A@newclarity.net>
	<008d01cb4273$3adf0e00$b09d2a00$@com>
Message-ID: <ED7AE85F-6E1A-408B-BD93-C65B624A985F@newclarity.net>

On Aug 22, 2010, at 11:28 PM, Eric Mann wrote:
> An objective list of criteria also makes it easier for new developers to
> start working on a plug-in.  My first attempt broke a lot of "rules"
> regarding database setup and access ... I'm ashamed to look back at how I
> allowed direct querying of the database via POST variables ... that's a huge
> security no-no.  I also never thought to clean up my options fields or extra
> database tables until someone actually complained about the extra "crap" I'd
> left all over their WordPress installation.  So a checklist that a)
> developers can build to and b) an objective 3rd party can verify would be
> hugely useful.

Exactly.  We need that to get that list of objective best practices.  Given that is seems StackExchange is a great way to surface good solutions I've added this question:

What are Objective Best Practices for Plugin Development?
http://wordpress.stackexchange.com/questions/715/ 

Once we've got a good objective list we can then consider the next step; how do we get them reviewed?

On Aug 22, 2010, at 11:24 PM, Lynne Pope wrote:
> If enough people want to get involved and do this then it should, IMO, be
> encouraged. It's a huge task to undertake but with enough hands & eyes its
> not unachievable.

Many hands makes for light work. If we can get a system in place that encourages and rewards collaboration I think we can get the top 15% of plugins reviewed on an ongoing basis.  Maybe we could study StackExchange's reputation system and model something similar but that is optimized for supporting plugin reviews instead of just getting answers?

On Aug 22, 2010, at 11:49 PM, Mark E wrote:
> I'm seeing a big issue centered around delivering a false sense of security to numerous millions of innocent people.

The Centers for Disease Control in the USA gives people a sense of security but some people still catch diseases that kill them.  The answer isn't to get rid of the CDC, the answer is to constantly try to improve it and to let people know they also need to look out for themselves too; nothing is a panacea. Caveat Emptor! 

-Mike

From mark at simplercomputing.net  Mon Aug 23 04:09:08 2010
From: mark at simplercomputing.net (Mark E)
Date: Sun, 22 Aug 2010 22:09:08 -0600
Subject: [wp-hackers] Code reviews for plugins?
In-Reply-To: <0C0F03CF-D716-40E3-BCAF-F35C01D9535A@newclarity.net>
References: <4C71936D.6070600@wptavern.com>	<4C71E62F.80307@simplercomputing.net>
	<0C0F03CF-D716-40E3-BCAF-F35C01D9535A@newclarity.net>
Message-ID: <4C71F464.4060409@simplercomputing.net>



On 08/22/2010 09:21 PM, Mike Schinkel wrote:
  2.) Focus on the top 15% of plugins by download and use

Scenario:

Tomorrow someone uploads a new plugin, or maybe there are 5000 plugins 
already upload and in use but that don't get reviewed because they're 
either new or not in the top 15% yet. By the time a plugin becomes 
pppular enough for review it's too late, countless sites already use it.

So what is the value of of the review process if it can't be reasonably 
used to communicate something to end users? What's the message that will 
be sent? Would it be "we have 6872 plugins available for Wordpress! But 
you shouldn't use any of them except the 245 that we have reviewed" ?

Mark

From mikeschinkel at newclarity.net  Mon Aug 23 04:39:16 2010
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Mon, 23 Aug 2010 00:39:16 -0400
Subject: [wp-hackers] Code reviews for plugins?
In-Reply-To: <4C71F464.4060409@simplercomputing.net>
References: <4C71936D.6070600@wptavern.com>	<4C71E62F.80307@simplercomputing.net>
	<0C0F03CF-D716-40E3-BCAF-F35C01D9535A@newclarity.net>
	<4C71F464.4060409@simplercomputing.net>
Message-ID: <341A41AD-86CD-4439-B19F-0B5EE13E25BA@newclarity.net>

On Aug 23, 2010, at 12:09 AM, Mark E wrote:
> Scenario:
> 
> Tomorrow someone uploads a new plugin, or maybe there are 5000 plugins already upload and in use but that don't get reviewed because they're either new or not in the top 15% yet. By the time a plugin becomes popular enough for review it's too late, countless sites already use it.
> 
> So what is the value of of the review process if it can't be reasonably used to communicate something to end users? What's the message that will be sent? Would it be "we have 6872 plugins available for Wordpress! But you shouldn't use any of them except the 245 that we have reviewed" ?

Yes, you can find holes in anything we can propose or try.  However given the scenario you describe, how will having a review process that targets the top 15% make things *worse*? Currently it is "We have 6872 plugins available for Wordpress! But you shouldn't use ANY of them at all because NONE of them have been reviewed!"  How is that *worse* than your scenario?

The same could have been said of WordPress 2.0's usability. Compared to v3.0, WordPress 2.0 sucked rotten eggs. But it got better (much better.)  In order to get to to great you have to first journey through fair and then through good; perfection never occurs from the start.

-Mike
P.S. The "top 15%" was a guideline to focus people on the important ones, not a rule. Although I'm not sure if this would cause a disincentive but a bounty system could be set up to get people to review the ones that few are using yet.  If the bounty system is only a bounty of reputation then it might work. Maybe companies that want their plugins reviewed ASAP could even pay the WordPress Foundation a fee and then the WordPress Foundation could offer up reputation bounties for this plugins to review. Just an idea.





From peter.westwood at ftwr.co.uk  Mon Aug 23 07:03:30 2010
From: peter.westwood at ftwr.co.uk (Peter Westwood)
Date: Mon, 23 Aug 2010 08:03:30 +0100
Subject: [wp-hackers] custom_post_type and custom taxonomy naming
In-Reply-To: <AANLkTimjhtEN7H5vLqxDaytnL-bN9gT+mJ-NSjGRbGZN@mail.gmail.com>
References: <AANLkTikeCB7S_-gBXKQe-T-86Kv0enog==aGrnbjbwK_@mail.gmail.com>
	<AANLkTi=vEAcCaHF4YA_wcQJiYeLtUm8ebKZozoiU2gdw@mail.gmail.com>
	<28EC0A05-BDF7-4727-A26B-76AB536FE984@newclarity.net>
	<AANLkTikqtyENAM=61-yMN2F1E3wDXNy9C0R2a8FnpMyX@mail.gmail.com>
	<241888D7-FA6E-4DDC-9F37-D1DE1C6244CF@newclarity.net>
	<AANLkTinY0NAacorm8zBzYXkSS0h_n8VkYnVmkGFPft9s@mail.gmail.com>
	<AE8DE6A8-FEE9-44BA-93DA-759941020CDA@newclarity.net>
	<AANLkTinGi45xfybvN=9s2KJ1MmrX2zj5YDswrhxraNdT@mail.gmail.com>
	<97EE0442-3AC7-4FFE-BFBF-DC2875FC4B77@newclarity.net>
	<AANLkTik8Tca4HrZLPQN-8wvwLRN1kaOLuTWaR4M3ZJS9@mail.gmail.com>
	<D26C89CA-C49D-4DDA-B9FA-DA9C5DF738DE@newclarity.net>
	<AANLkTimu=2LcO4gA7ebwNK3FmK0nfd86PH5upA4U0UvE@mail.gmail.com>
	<AANLkTimjhtEN7H5vLqxDaytnL-bN9gT+mJ-NSjGRbGZN@mail.gmail.com>
Message-ID: <0EC5475A-DCEC-4E33-A479-18DADA53595A@ftwr.co.uk>


On 23 Aug 2010, at 02:56, Lox wrote:

> 2010/8/23 Andrew Nacin <wp at andrewnacin.com>
> 
>> I'm not sure why it should. We introduced get_template_part() in order to
>> DRY up code. single.php has its own code that isn't used elsewhere; same
>> with page.php.
>> 
>> If you want to override page.php, you can do so, on a number of different
>> hooks or via a child theme. get_template_part() was not designed for plugin
>> overrides as much as child theme overrides.
>> 
> 
> Ok let me explain and use an example.
> 
> I have made, for a website, a quiz plugin. I *need* a page to hold it, so it
> can be moved, ordered, added to a nav menu, title can be managed using the
> page form etc. I can't use a shortcode to let the user put the quiz on the
> page he likes, because page content can be parsed many times per page
> request (like if u use Otto's SFC plugin) So, in my plugin settings page,
> the user selects, from a dropdown, the page to use as the quiz's page
> holder.
> 
> As long as it is for a specific web site, I can use a theme template adding
> my template tag (or a do_action witch I prefer) to display the quiz: that
> will reflect the site specific theme and it is ok.
> 
> But what happens if I make such plugin public? I will make a copy of the
> 2010 whole page.php to a template folder of my plugin. So out of the box,
> the quiz will use a template based on 2010, and if the user uses a different
> theme, the bundled page.php template won't fit. So what? I must give
> instruction to tell the user how to make its own template for the quizz, and
> thus have to maintain two page.php (his and the quiz's) whereas there is
> only one line that changes .... That is tedious ...
> 
> Now if page.php was using get_template_part(), I could simply hook into
> get_template_part_{$slug} to use a bundled template part. So, my plugin will
> feets in user's theme out of the box (as long as his theme reflect the
> template layout of 2010 theme witch is the way to do)

The best solutions here are to create a template tag for theme authors to use, create a shortcode for users to use or to overload the contents of the main query and insert your quiz data in the place of the post data.

All of these are much better than trying to bundle extra page templates which won't match most themes

westi
-- 
Peter Westwood
http://blog.ftwr.co.uk | http://westi.wordpress.com
C53C F8FC 8796 8508 88D6 C950 54F4 5DCD A834 01C5


From wordpress at santosj.name  Mon Aug 23 07:58:09 2010
From: wordpress at santosj.name (Jacob Santos)
Date: Mon, 23 Aug 2010 02:58:09 -0500
Subject: [wp-hackers] introductions and putting the wrong foot forward..
In-Reply-To: <8DC64830-2804-4AFE-8C05-3CB7164E73D9@zippykid.com>
References: <B5C4B6D8-D1B0-48DF-B42D-0AAEC99DC292@zippykid.com>	<4C71D331.6050905@simplercomputing.net>
	<8DC64830-2804-4AFE-8C05-3CB7164E73D9@zippykid.com>
Message-ID: <4C722A11.2040004@santosj.name>

  The reason the wp_redirect() function does not return exit() after 
setting the headers it so custom HTML may be entered. Actually, the 
auth_redirect() function does exit() after calling wp_redirect(). It 
appears the use case for wp_redirect() is to set the header but not to 
finish the execution. This allows for you to call wp_redirect() with its 
fancy filtering and checks and also allows you to print HTML for 
applications that can't or won't follow the redirect automatically.

The inline documentation for wp_redirect() should be updated to reflect 
this.

Jacob Santos


On 8/22/2010 9:00 PM, Vid Luther wrote:
> Thanks Mark,
>
> I should've tried the mightly google site prior to the post.
>
>
> Judging by that query, and a different query where i searched for wp_redirect exit the specific issue of exit has not been handled in the threads,
> I'd like to propose that this change be made into the core, the patch is simple, I can send it in, unless there is a good reason not to have it in the core.
>
> quite a few of the issues from your first google query wouldn't even have happened, if we used exit() right after header().
>
> I'll make a plugin for now, test it out on our site, and then submit the patch if we decide it needs to be submitted, it's  a simple one liner though :).
>
>
>
> On Aug 22, 2010, at 8:47 PM, Mark E wrote:
>
>>
>> On 08/22/2010 07:26 PM, Vid Luther wrote:
>>> I don't want to make changes to our core functionality, if it'll just
>>> get overridden with the next update, if I need to do it as a plugin,
>>> I'll do that :).
>> It's usually best to not make any assumptions about any sort of future changes in core code. Instead, make your site work the way you want with plugins. Then later if core functionality makes a plugin obsolete, disable it.
>>
>>
>>> PS: I scanned through the hackers archives, but since there's no
>>> simple way of searching all the years
>> Try this:
>>
>> http://tinyurl.com/36ysy2t
>>
>> ;-)
>>
>> Mark
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers


From harry at thedextrousweb.com  Mon Aug 23 08:46:54 2010
From: harry at thedextrousweb.com (Harry Metcalfe)
Date: Mon, 23 Aug 2010 09:46:54 +0100
Subject: [wp-hackers] Code reviews for plugins?
In-Reply-To: <4C71EFC3.1080806@simplercomputing.net>
References: <4C71936D.6070600@wptavern.com>	<4C71E62F.80307@simplercomputing.net>	<AANLkTik7vFjksLOnt+MgLDW5X_+AX1y-SS7c5u671Np5@mail.gmail.com>
	<4C71EFC3.1080806@simplercomputing.net>
Message-ID: <4C72357E.30102@thedextrousweb.com>

On 23/08/10 04:49, Mark E wrote:
 > I'm seeing a big issue centered around delivering a false sense of
 > security to numerous millions of innocent people.

I agree. I like the idea about having objective criteria, and if the 
results of reviews were phrased appropriately -- ie, accurately -- that 
would be a nice thing to have.

But just to say "The community has reviewed this plugin and it looks 
A-OK to us" is a really bad idea. For a start, I'm not sure you can 
really do that in a generic way: to make that statement for any 
particular user, you'd need to know what other plugins they were 
running, and what their theme does. But ordinary, non-tecchie WP users 
will just interpret it as a badge of quality and may therefore be misled.

But more importantly, just to say a plugin has been "reviewed" without 
knowing what the reviewer was looking for is meaningless. They could 
have been looking for fluffy bunnies. It essentially ends up being a 
review to look for the things the reviewer thinks are important. Which 
is perhaps slightly better than nothing, but not much.

I think we should come up with a list of the top 25 mistakes people make 
in plugins, review to find those, perhaps also highlight whatever else 
looks problematic and tell the author, and then say to users "This 
plugin has passed a review which checks for some common WordPress plugin 
problems" or somesuch...

Harry

PS: if this plan means I never have to spend hours fixing all the 
notices in someone else's plugin, that would be nice.

From wp at andrewnacin.com  Mon Aug 23 08:58:32 2010
From: wp at andrewnacin.com (Andrew Nacin)
Date: Mon, 23 Aug 2010 04:58:32 -0400
Subject: [wp-hackers] introductions and putting the wrong foot forward..
In-Reply-To: <4C71D78F.6060609@simplercomputing.net>
References: <B5C4B6D8-D1B0-48DF-B42D-0AAEC99DC292@zippykid.com>
	<4C71D331.6050905@simplercomputing.net>
	<8DC64830-2804-4AFE-8C05-3CB7164E73D9@zippykid.com>
	<4C71D78F.6060609@simplercomputing.net>
Message-ID: <AANLkTi=T1aLRx511u0RS+ao3-yaX_mz52ftq4CmUH6P4@mail.gmail.com>

On Sun, Aug 22, 2010 at 10:06 PM, Mark E <mark at simplercomputing.net> wrote:

>  On 08/22/2010 08:00 PM, Vid Luther wrote:
>
>  quite a few of the issues from your first google query wouldn't even
>> have happened, if we used exit() right after header().
>>
>
> I agree. There's no reason I can think of to redirect a page without
> exiting the script immediately. And, I've run into several problem in the
> past where that lack of exit caused headaches.


WordPress calls exit() or die() after any wp_redirect() or
wp_safe_redirect() calls. You should to. They're different processes and
sometimes you do want/need to do something before killing the script. We
also rely on this during the plugin activation routine -- it's how we
implement sandboxing.

From arlenbee at gmail.com  Mon Aug 23 11:56:38 2010
From: arlenbee at gmail.com (Arlen Beiler)
Date: Mon, 23 Aug 2010 07:56:38 -0400
Subject: [wp-hackers] WP.org plugin repository - multiple users
In-Reply-To: <AANLkTikhtVsc1zsvsUqvtr0KivCV0fmpsAkk9O2DXKNg@mail.gmail.com>
References: <1967CB0F-18B9-4723-A9C1-2CE00B66392D@thisismyurl.com>
	<AANLkTimE1uQ1JyFBC83-aOSqs7+FBwNSKe9_Md_v7RUY@mail.gmail.com>
	<967706437.528925.1282245312314.JavaMail.open-xchange@oxusltgw05.schlund.de>
	<AANLkTi=ydOLhQ_sUnCzFig69Uyj9Gp9tFUWzacBb6msY@mail.gmail.com>
	<AANLkTik--W3Pb8XxBv2eGREfRu=k4ghqkTBBiWBRMJW6@mail.gmail.com>
	<AANLkTinSA3L5gish--Frv4BEYatJdUbdM8RozQC-SAY3@mail.gmail.com>
	<A4E1E78D-33D9-45F4-B5CC-FA3244709D91@curtismchale.ca>
	<AANLkTikhtVsc1zsvsUqvtr0KivCV0fmpsAkk9O2DXKNg@mail.gmail.com>
Message-ID: <AANLkTinUe70Ox3Per-sFfkbo9oDWpqsKT+tHntoa-BeG@mail.gmail.com>

WordPress, BBPress, *Patch*Press...

How's that ;)

On Sun, Aug 22, 2010 at 9:32 PM, Lox <lox.dev at knc.nc> wrote:

> In fact I do not really mind. I personally use Github for my plugins and
> then submit them to WP.org using SVN when a release gets completed.
>
> I was just sharing my experience. Github is definitely better and easier
> for
> code contribution than how WP.org is actually. Saying the opposite just
> reflects a lack of knowledge about Github.
>
> Cheers
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From paul at codehooligans.com  Mon Aug 23 12:26:42 2010
From: paul at codehooligans.com (Paul)
Date: Mon, 23 Aug 2010 08:26:42 -0400
Subject: [wp-hackers] Code reviews for plugins?
In-Reply-To: <4C72357E.30102@thedextrousweb.com>
References: <4C71936D.6070600@wptavern.com>	<4C71E62F.80307@simplercomputing.net>	<AANLkTik7vFjksLOnt+MgLDW5X_+AX1y-SS7c5u671Np5@mail.gmail.com>
	<4C71EFC3.1080806@simplercomputing.net>
	<4C72357E.30102@thedextrousweb.com>
Message-ID: <EE08FAFC-E9DE-4B6C-95D1-7230A07F5F15@codehooligans.com>

After reading all this new discussion I think I would like to reconsider my previous +1 submission. 

When I read the original comments on this thread last week I though the purpose was to put together a peer review process where plugin developer can offer advice to other plugin developers as review of their code. I originally took this advice as something along the lines of "Well, your code works but this set of routines you've written would be better served if you just hooked into this WP filter and tried this technique (see xxx plugin as an example)". The goal I thought was to share WP plugin development knowledge and make any mediocre plugin developer a better developer. Like myself.   

In reading this last set of messages it almost sounds like you guys want to put together a self-appointed committee where you rate plugins based on some yet to be determined checklist. Why not just publish the check list somewhere some plugin developers can check their own plugin? I agree 100% with someone who wrote about people counting against you for not using the proper camel-case or not putting your JS into a sub-folder. This is crap. No one who uses your plugin will case. What should be review is the code written and its intended functionality. 

Many times I receive requests or remarks from user of my plugins They suggest adding features or functionality I have no intention or adding because in my opinion this was not part of the intended use of the plugin. 

Paul





On Aug 23, 2010, at 4:46 AM, Harry Metcalfe wrote:

> On 23/08/10 04:49, Mark E wrote:
> > I'm seeing a big issue centered around delivering a false sense of
> > security to numerous millions of innocent people.
> 
> I agree. I like the idea about having objective criteria, and if the results of reviews were phrased appropriately -- ie, accurately -- that would be a nice thing to have.
> 
> But just to say "The community has reviewed this plugin and it looks A-OK to us" is a really bad idea. For a start, I'm not sure you can really do that in a generic way: to make that statement for any particular user, you'd need to know what other plugins they were running, and what their theme does. But ordinary, non-tecchie WP users will just interpret it as a badge of quality and may therefore be misled.
> 
> But more importantly, just to say a plugin has been "reviewed" without knowing what the reviewer was looking for is meaningless. They could have been looking for fluffy bunnies. It essentially ends up being a review to look for the things the reviewer thinks are important. Which is perhaps slightly better than nothing, but not much.
> 
> I think we should come up with a list of the top 25 mistakes people make in plugins, review to find those, perhaps also highlight whatever else looks problematic and tell the author, and then say to users "This plugin has passed a review which checks for some common WordPress plugin problems" or somesuch...
> 
> Harry
> 
> PS: if this plan means I never have to spend hours fixing all the notices in someone else's plugin, that would be nice.
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers


From cross at thisismyurl.com  Mon Aug 23 12:46:50 2010
From: cross at thisismyurl.com (Christopher Ross)
Date: Mon, 23 Aug 2010 09:46:50 -0300
Subject: [wp-hackers] Code reviews for plugins?
In-Reply-To: <4C72357E.30102@thedextrousweb.com>
References: <4C71936D.6070600@wptavern.com>	<4C71E62F.80307@simplercomputing.net>	<AANLkTik7vFjksLOnt+MgLDW5X_+AX1y-SS7c5u671Np5@mail.gmail.com>
	<4C71EFC3.1080806@simplercomputing.net>
	<4C72357E.30102@thedextrousweb.com>
Message-ID: <01AD4299-D472-4E9E-A99F-0910118C756B@thisismyurl.com>

this isn't aimed at Harry, simply a reply to the thread in general.

Having a peer review, where a community could help create better plugins is valuable. Having to jump through hoops and adhere to some of the standards discussed in this thread would be a waste of my time. I contribute dozens of free plugins to the community, they could all be improved (and your feedback is welcome) but if I had to waste my time relocating files to meet your standards, I'd spend far more time selling my services than helping the community.

Just my 2 cents.

On 2010-08-23, at 5:46 AM, Harry Metcalfe wrote:

> On 23/08/10 04:49, Mark E wrote:
> > I'm seeing a big issue centered around delivering a false sense of
> > security to numerous millions of innocent people.
> 
> I agree. I like the idea about having objective criteria, and if the results of reviews were phrased appropriately -- ie, accurately -- that would be a nice thing to have.
> 
> But just to say "The community has reviewed this plugin and it looks A-OK to us" is a really bad idea. For a start, I'm not sure you can really do that in a generic way: to make that statement for any particular user, you'd need to know what other plugins they were running, and what their theme does. But ordinary, non-tecchie WP users will just interpret it as a badge of quality and may therefore be misled.
> 
> But more importantly, just to say a plugin has been "reviewed" without knowing what the reviewer was looking for is meaningless. They could have been looking for fluffy bunnies. It essentially ends up being a review to look for the things the reviewer thinks are important. Which is perhaps slightly better than nothing, but not much.
> 
> I think we should come up with a list of the top 25 mistakes people make in plugins, review to find those, perhaps also highlight whatever else looks problematic and tell the author, and then say to users "This plugin has passed a review which checks for some common WordPress plugin problems" or somesuch...
> 
> Harry
> 
> PS: if this plan means I never have to spend hours fixing all the notices in someone else's plugin, that would be nice.
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers


__

Christopher Ross

Toronto      1 (416) 840-5828
Fredericton 1 (506) 474-2708
New Orleans 1 (504) 322 3485

http://christopherross.ca
http://www.thisismyurl.com


From harry at thedextrousweb.com  Mon Aug 23 13:07:05 2010
From: harry at thedextrousweb.com (Harry Metcalfe)
Date: Mon, 23 Aug 2010 14:07:05 +0100
Subject: [wp-hackers] Code reviews for plugins?
In-Reply-To: <01AD4299-D472-4E9E-A99F-0910118C756B@thisismyurl.com>
References: <4C71936D.6070600@wptavern.com>	<4C71E62F.80307@simplercomputing.net>	<AANLkTik7vFjksLOnt+MgLDW5X_+AX1y-SS7c5u671Np5@mail.gmail.com>	<4C71EFC3.1080806@simplercomputing.net>	<4C72357E.30102@thedextrousweb.com>
	<01AD4299-D472-4E9E-A99F-0910118C756B@thisismyurl.com>
Message-ID: <4C727279.9000607@thedextrousweb.com>

That's completely fair. And @Paul, it would absolutely be good just to 
publish that list. I don't think the checklist should be *secret* :)

A code review where people just check each other's plugins and offer 
advice would be great -- but I think it's a different thing. By all 
means, let's do it. All we need is a mailing list and some willing 
developers.

But I don't think anyone can make any claims about general quality as a 
result of having been through that process. Certainly no "This has been 
vetted by the community"-type-assurances on the plugin pages. Because 
such a process, while helping everyone learn, wouldn't really guarantee 
quality, or anything else.

Harry


On 23/08/10 13:46, Christopher Ross wrote:
> this isn't aimed at Harry, simply a reply to the thread in general.
>
> Having a peer review, where a community could help create better plugins is valuable. Having to jump through hoops and adhere to some of the standards discussed in this thread would be a waste of my time. I contribute dozens of free plugins to the community, they could all be improved (and your feedback is welcome) but if I had to waste my time relocating files to meet your standards, I'd spend far more time selling my services than helping the community.
>
> Just my 2 cents.
>
> On 2010-08-23, at 5:46 AM, Harry Metcalfe wrote:
>
>> On 23/08/10 04:49, Mark E wrote:
>>> I'm seeing a big issue centered around delivering a false sense of
>>> security to numerous millions of innocent people.
>>
>> I agree. I like the idea about having objective criteria, and if the results of reviews were phrased appropriately -- ie, accurately -- that would be a nice thing to have.
>>
>> But just to say "The community has reviewed this plugin and it looks A-OK to us" is a really bad idea. For a start, I'm not sure you can really do that in a generic way: to make that statement for any particular user, you'd need to know what other plugins they were running, and what their theme does. But ordinary, non-tecchie WP users will just interpret it as a badge of quality and may therefore be misled.
>>
>> But more importantly, just to say a plugin has been "reviewed" without knowing what the reviewer was looking for is meaningless. They could have been looking for fluffy bunnies. It essentially ends up being a review to look for the things the reviewer thinks are important. Which is perhaps slightly better than nothing, but not much.
>>
>> I think we should come up with a list of the top 25 mistakes people make in plugins, review to find those, perhaps also highlight whatever else looks problematic and tell the author, and then say to users "This plugin has passed a review which checks for some common WordPress plugin problems" or somesuch...
>>
>> Harry
>>
>> PS: if this plan means I never have to spend hours fixing all the notices in someone else's plugin, that would be nice.
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
>
> __
>
> Christopher Ross
>
> Toronto      1 (416) 840-5828
> Fredericton 1 (506) 474-2708
> New Orleans 1 (504) 322 3485
>
> http://christopherross.ca
> http://www.thisismyurl.com
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

-- 
Harry Metcalfe
Tel: 07790 559 876
Web: http://thedextrousweb.com
Twitter: @harrym, @dextrousweb

From lynne.pope at gmail.com  Mon Aug 23 14:34:04 2010
From: lynne.pope at gmail.com (Lynne Pope)
Date: Tue, 24 Aug 2010 02:34:04 +1200
Subject: [wp-hackers] Code reviews for plugins?
In-Reply-To: <4C727279.9000607@thedextrousweb.com>
References: <4C71936D.6070600@wptavern.com>
	<4C71E62F.80307@simplercomputing.net>
	<AANLkTik7vFjksLOnt+MgLDW5X_+AX1y-SS7c5u671Np5@mail.gmail.com>
	<4C71EFC3.1080806@simplercomputing.net>
	<4C72357E.30102@thedextrousweb.com>
	<01AD4299-D472-4E9E-A99F-0910118C756B@thisismyurl.com>
	<4C727279.9000607@thedextrousweb.com>
Message-ID: <AANLkTikW_OjBLV9G4J_44Yh6xWmUafccmqxKeVKP-ppL@mail.gmail.com>

I think the first thing that needs to happen is for people to agree on what
they want a process like this to do. Paul & Christopher have really good
points and if the goal is to improve the quality of plugins then a review
should be (IMO) limited to looking at security & functionality. If people
get into arguments over camelcase, whether tabs or spaces should be used for
indenting, etc etc then little will be achieved except bitterness.

If, however, the intention is to review plugins with the goal of providing
some surety for end-users then this is a completely different process. This
thread shows people are thinking of both of these but I'm not so sure that
both can be achieved.

On 24 August 2010 01:07, Harry Metcalfe <harry at thedextrousweb.com> wrote:

> <snip>
>
> A code review where people just check each other's plugins and offer advice
> would be great -- but I think it's a different thing. By all means, let's do
> it. All we need is a mailing list and some willing developers.
>
> But I don't think anyone can make any claims about general quality as a
> result of having been through that process. Certainly no "This has been
> vetted by the community"-type-assurances on the plugin pages. Because such a
> process, while helping everyone learn, wouldn't really guarantee quality, or
> anything else.
>

This is potentially a minefield. Users don't give a damn about quality -
they just want to know a plugin works, does what it says it does, is secure,
and doesn't conflict with other plugins. It doesn't matter to users if the
plugin is poorly written.
The moment the words, "assurances" or "certification" come in, someone takes
responsibility. THAT is absolutely the last thing the community should do.
No matter how good a vetting process is, guarantees cannot be given. For a
start, guarantees are specifically excluded from the GPL. NO WARRANTY

Lynne


>
>
> On 23/08/10 13:46, Christopher Ross wrote:
>
>> this isn't aimed at Harry, simply a reply to the thread in general.
>>
>> Having a peer review, where a community could help create better plugins
>> is valuable. Having to jump through hoops and adhere to some of the
>> standards discussed in this thread would be a waste of my time. I contribute
>> dozens of free plugins to the community, they could all be improved (and
>> your feedback is welcome) but if I had to waste my time relocating files to
>> meet your standards, I'd spend far more time selling my services than
>> helping the community.
>>
>> Just my 2 cents.
>>
>> On 2010-08-23, at 5:46 AM, Harry Metcalfe wrote:
>>
>>  On 23/08/10 04:49, Mark E wrote:
>>>
>>>> I'm seeing a big issue centered around delivering a false sense of
>>>> security to numerous millions of innocent people.
>>>>
>>>
>>> I agree. I like the idea about having objective criteria, and if the
>>> results of reviews were phrased appropriately -- ie, accurately -- that
>>> would be a nice thing to have.
>>>
>>> But just to say "The community has reviewed this plugin and it looks A-OK
>>> to us" is a really bad idea. For a start, I'm not sure you can really do
>>> that in a generic way: to make that statement for any particular user, you'd
>>> need to know what other plugins they were running, and what their theme
>>> does. But ordinary, non-tecchie WP users will just interpret it as a badge
>>> of quality and may therefore be misled.
>>>
>>> But more importantly, just to say a plugin has been "reviewed" without
>>> knowing what the reviewer was looking for is meaningless. They could have
>>> been looking for fluffy bunnies. It essentially ends up being a review to
>>> look for the things the reviewer thinks are important. Which is perhaps
>>> slightly better than nothing, but not much.
>>>
>>> I think we should come up with a list of the top 25 mistakes people make
>>> in plugins, review to find those, perhaps also highlight whatever else looks
>>> problematic and tell the author, and then say to users "This plugin has
>>> passed a review which checks for some common WordPress plugin problems" or
>>> somesuch...
>>>
>>> Harry
>>>
>>> PS: if this plan means I never have to spend hours fixing all the notices
>>> in someone else's plugin, that would be nice.
>>> _______________________________________________
>>> wp-hackers mailing list
>>> wp-hackers at lists.automattic.com
>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>>
>>
>>
>> __
>>
>> Christopher Ross
>>
>> Toronto      1 (416) 840-5828
>> Fredericton 1 (506) 474-2708
>> New Orleans 1 (504) 322 3485
>>
>> http://christopherross.ca
>> http://www.thisismyurl.com
>>
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
>
> --
> Harry Metcalfe
> Tel: 07790 559 876
> Web: http://thedextrousweb.com
> Twitter: @harrym, @dextrousweb
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From eric at eamann.com  Mon Aug 23 14:39:01 2010
From: eric at eamann.com (Eric Mann)
Date: Mon, 23 Aug 2010 07:39:01 -0700 (PDT)
Subject: [wp-hackers] Code reviews for plugins?
In-Reply-To: <01AD4299-D472-4E9E-A99F-0910118C756B@thisismyurl.com>
References: <4C71936D.6070600@wptavern.com>	<4C71E62F.80307@simplercomputing.net>	<AANLkTik7vFjksLOnt+MgLDW5X_+AX1y-SS7c5u671Np5@mail.gmail.com>
	<4C71EFC3.1080806@simplercomputing.net>
	<4C72357E.30102@thedextrousweb.com>
	<01AD4299-D472-4E9E-A99F-0910118C756B@thisismyurl.com>
Message-ID: <1181229222.49464.1282574341541.JavaMail.open-xchange@oxusltgw11.schlund.de>

I think the two things we're proposing here are:
?
1) To create a checklist of best practices for plug-in development that
developers can use as a guiding tool while building their plug-ins. ?This
checklist would be publicly available and would give end users an idea of the
kind of care and oversight that goes into development - it would not be a
"guarantee" that the plug-in is quality work or excellent code, just that the
plug-in does certain things that it would be expected to do.
?
2) That we organize the community around looking at and verifying that plug-ins
claiming to meet certain standards actually meet certain standards. ?I'm sure
we've all seen plug-ins and themes claiming compatibility with WordPress 2.X.X
only to find out that the developer accidentally used some function that wasn't
actually compatible ... Having people around to look at and verify that, yes,
the developer did his or her due diligence and the plug-in really does meet that
criteria is valuable. ?It gives the developer an extra level of
community-generated credibility.
?
No one's suggesting that we relocate files or rewrite code. ?But just like
certain things are required for WordPress plug-ins (you must have a readme.txt
file with certain sections, you must include an information header in your core
PHP file, etc), we're putting together a list of certain things that are
recommended and strongly encouraged for WordPress plug-ins.
?
On August 23, 2010 at 12:46 PM Christopher Ross <cross at thisismyurl.com> wrote:

> this isn't aimed at Harry, simply a reply to the thread in general.
>
> Having a peer review, where a community could help create better plugins is
> valuable. Having to jump through hoops and adhere to some of the standards
> discussed in this thread would be a waste of my time. I contribute dozens of
> free plugins to the community, they could all be improved (and your feedback
> is welcome) but if I had to waste my time relocating files to meet your
> standards, I'd spend far more time selling my services than helping the
> community.
>
> Just my 2 cents.
>
> On 2010-08-23, at 5:46 AM, Harry Metcalfe wrote:
>
> > On 23/08/10 04:49, Mark E wrote:
> > > I'm seeing a big issue centered around delivering a false sense of
> > > security to numerous millions of innocent people.
> >
> > I agree. I like the idea about having objective criteria, and if the results
> > of reviews were phrased appropriately -- ie, accurately -- that would be a
> > nice thing to have.
> >
> > But just to say "The community has reviewed this plugin and it looks A-OK to
> > us" is a really bad idea. For a start, I'm not sure you can really do that
> > in a generic way: to make that statement for any particular user, you'd need
> > to know what other plugins they were running, and what their theme does. But
> > ordinary, non-tecchie WP users will just interpret it as a badge of quality
> > and may therefore be misled.
> >
> > But more importantly, just to say a plugin has been "reviewed" without
> > knowing what the reviewer was looking for is meaningless. They could have
> > been looking for fluffy bunnies. It essentially ends up being a review to
> > look for the things the reviewer thinks are important. Which is perhaps
> > slightly better than nothing, but not much.
> >
> > I think we should come up with a list of the top 25 mistakes people make in
> > plugins, review to find those, perhaps also highlight whatever else looks
> > problematic and tell the author, and then say to users "This plugin has
> > passed a review which checks for some common WordPress plugin problems" or
> > somesuch...
> >
> > Harry
> >
> > PS: if this plan means I never have to spend hours fixing all the notices in
> > someone else's plugin, that would be nice.
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers at lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
>
>
> __
>
> Christopher Ross
>
> Toronto? ? ? 1 (416) 840-5828
> Fredericton 1 (506) 474-2708
> New Orleans 1 (504) 322 3485
>
> http://christopherross.ca
> http://www.thisismyurl.com
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

From jer at simianuprising.com  Mon Aug 23 14:57:05 2010
From: jer at simianuprising.com (Jeremy Clarke)
Date: Mon, 23 Aug 2010 10:57:05 -0400
Subject: [wp-hackers] multiple databases vs different database prefixes
In-Reply-To: <AANLkTimn4HvWMRJECLeA=Li2jEdXdBYLFB2=U4Cb77ne@mail.gmail.com>
References: <2DCF84D4-97F6-4719-98FE-BBA7232D0F59@gmail.com>
	<F7E4F6D6-B1D9-44CB-B5E3-9281465D4392@striderweb.com>
	<AANLkTimn4HvWMRJECLeA=Li2jEdXdBYLFB2=U4Cb77ne@mail.gmail.com>
Message-ID: <AANLkTi=KydZSqYAf2TStZ4r2vrN_YMZAMpd9cn2fq=2v@mail.gmail.com>

On Fri, Aug 20, 2010 at 3:38 PM, ken zarque <kenzaraque at gmail.com> wrote:

>
> After installing WP with MS turned on, we ran into this question "How do we
> deploy single sites in an MS environment from one environment to another".
> This is because we have a dev, staging and production environment.
>
> Note: Should I be asking this on a separate thread?
>
>
Yes. It is a different (though related) can of worms. I am very interested
in the answers people give you though, as you're asking about the most
obnoxious part of MS deployment.

-- 
Jeremy Clarke | http://jeremyclarke.org
Organizer | http://wordcampmontreal.org

From eric at eamann.com  Mon Aug 23 15:09:00 2010
From: eric at eamann.com (Eric Mann)
Date: Mon, 23 Aug 2010 08:09:00 -0700 (PDT)
Subject: [wp-hackers] Transitioning to Multi-site
Message-ID: <971325574.50316.1282576140891.JavaMail.open-xchange@oxusltgw11.schlund.de>

I have a client who runs 8 different blogs, currently on 8 separate
installations of WordPress. ?I'm trying to encourage them to move to a single MS
installation instead to make it easier (mostly on me) to maintain the different
sites, themes, and mix of plug-ins. ?Unfortunately, I shied away from MU for the
longest time, and now I have no idea where to start with MS.
?
I've used WP-Hive in the past because it allowed me to use multiple domains with
one installation of WordPress (I don't like sub-folder blogs or sub-domains
sites). ?This client project, if we go forward, will be a similar setup -
multiple single-domain blogs hosted on a single WordPress installation.
?
So what steps should I follow to
?1) Set up Multisite - I know how to install it, but how should I configure it
considering I want to use it for separate domains, not sub-folders or
sub-domains?
?2) Move content - I assume the regular WP export-import process will work?
?3) Map the domains to their new home on the new installation?

From dragonfly at dragonflyeye.net  Mon Aug 23 15:14:55 2010
From: dragonfly at dragonflyeye.net (Thomas Belknap)
Date: Mon, 23 Aug 2010 11:14:55 -0400
Subject: [wp-hackers] multiple databases vs different database prefixes
In-Reply-To: <AANLkTi=KydZSqYAf2TStZ4r2vrN_YMZAMpd9cn2fq=2v@mail.gmail.com>
References: <2DCF84D4-97F6-4719-98FE-BBA7232D0F59@gmail.com>
	<F7E4F6D6-B1D9-44CB-B5E3-9281465D4392@striderweb.com>
	<AANLkTimn4HvWMRJECLeA=Li2jEdXdBYLFB2=U4Cb77ne@mail.gmail.com>
	<AANLkTi=KydZSqYAf2TStZ4r2vrN_YMZAMpd9cn2fq=2v@mail.gmail.com>
Message-ID: <AANLkTi=U0h=w3P-m49HA_H01+QoQUEY0uWcooeEnoN1v@mail.gmail.com>

Hmm.. MU used to have a plugin for multi-domain distributions? Made things
seem pretty easy, though. Dr. Mike built it and it's currently on
WPMUDev.org:

http://premium.wpmudev.org/join/

But again, can't vouch for it in the new MS environment. I've mostly been
able to modify MU plugins simply by searching for wpmu-admin.php and
replacing with ms-admin.php.

On Mon, Aug 23, 2010 at 10:57 AM, Jeremy Clarke <jer at simianuprising.com>wrote:

> On Fri, Aug 20, 2010 at 3:38 PM, ken zarque <kenzaraque at gmail.com> wrote:
>
> >
> > After installing WP with MS turned on, we ran into this question "How do
> we
> > deploy single sites in an MS environment from one environment to
> another".
> > This is because we have a dev, staging and production environment.
> >
> > Note: Should I be asking this on a separate thread?
> >
> >
> Yes. It is a different (though related) can of worms. I am very interested
> in the answers people give you though, as you're asking about the most
> obnoxious part of MS deployment.
>
> --
> Jeremy Clarke | http://jeremyclarke.org
> Organizer | http://wordcampmontreal.org
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From scribu at gmail.com  Mon Aug 23 15:16:35 2010
From: scribu at gmail.com (scribu)
Date: Mon, 23 Aug 2010 18:16:35 +0300
Subject: [wp-hackers] Transitioning to Multi-site
In-Reply-To: <971325574.50316.1282576140891.JavaMail.open-xchange@oxusltgw11.schlund.de>
References: <971325574.50316.1282576140891.JavaMail.open-xchange@oxusltgw11.schlund.de>
Message-ID: <AANLkTi=8pATNkYW3=bP9_uwwUe9-27chxUASZm78pCBs@mail.gmail.com>

On Mon, Aug 23, 2010 at 6:09 PM, Eric Mann <eric at eamann.com> wrote:

>  2) Move content - I assume the regular WP export-import process will work?
>

Yes.


  1) Set up Multisite - I know how to install it, but how should I configure
> it
> considering I want to use it for separate domains, not sub-folders or
> sub-domains?
>
>  3) Map the domains to their new home on the new installation?
>

Just use the Domain Mapping plugin.


-- 
http://scribu.net

From lox.dev at knc.nc  Mon Aug 23 15:26:49 2010
From: lox.dev at knc.nc (Lox)
Date: Tue, 24 Aug 2010 02:26:49 +1100
Subject: [wp-hackers] custom_post_type and custom taxonomy naming
In-Reply-To: <0EC5475A-DCEC-4E33-A479-18DADA53595A@ftwr.co.uk>
References: <AANLkTikeCB7S_-gBXKQe-T-86Kv0enog==aGrnbjbwK_@mail.gmail.com>
	<AANLkTi=vEAcCaHF4YA_wcQJiYeLtUm8ebKZozoiU2gdw@mail.gmail.com>
	<28EC0A05-BDF7-4727-A26B-76AB536FE984@newclarity.net>
	<AANLkTikqtyENAM=61-yMN2F1E3wDXNy9C0R2a8FnpMyX@mail.gmail.com>
	<241888D7-FA6E-4DDC-9F37-D1DE1C6244CF@newclarity.net>
	<AANLkTinY0NAacorm8zBzYXkSS0h_n8VkYnVmkGFPft9s@mail.gmail.com>
	<AE8DE6A8-FEE9-44BA-93DA-759941020CDA@newclarity.net>
	<AANLkTinGi45xfybvN=9s2KJ1MmrX2zj5YDswrhxraNdT@mail.gmail.com>
	<97EE0442-3AC7-4FFE-BFBF-DC2875FC4B77@newclarity.net>
	<AANLkTik8Tca4HrZLPQN-8wvwLRN1kaOLuTWaR4M3ZJS9@mail.gmail.com>
	<D26C89CA-C49D-4DDA-B9FA-DA9C5DF738DE@newclarity.net>
	<AANLkTimu=2LcO4gA7ebwNK3FmK0nfd86PH5upA4U0UvE@mail.gmail.com>
	<AANLkTimjhtEN7H5vLqxDaytnL-bN9gT+mJ-NSjGRbGZN@mail.gmail.com>
	<0EC5475A-DCEC-4E33-A479-18DADA53595A@ftwr.co.uk>
Message-ID: <AANLkTimtd6Ct4FT2R-tjvQ7kWba3YnUwi8aWh3R_=j7W@mail.gmail.com>

2010/8/23 Peter Westwood <peter.westwood at ftwr.co.uk>

> The best solutions here are to create a template tag for theme authors to
> use,
>

I systematically do it.


> create a shortcode
>

As said that IS NOT a solution for complex scripts


> for users to use or to overload the contents of the main query and insert
> your quiz data in the place of the post data.
>

How do you do that?

-- 
Lox
lox.dev at knc.nc

From wp-hackers at nicolaskuttler.de  Mon Aug 23 15:52:39 2010
From: wp-hackers at nicolaskuttler.de (Nicolas Kuttler)
Date: Mon, 23 Aug 2010 17:52:39 +0200
Subject: [wp-hackers] Transitioning to Multi-site
In-Reply-To: <971325574.50316.1282576140891.JavaMail.open-xchange@oxusltgw11.schlund.de>
References: <971325574.50316.1282576140891.JavaMail.open-xchange@oxusltgw11.schlund.de>
Message-ID: <20100823155239.GH9316@nicolaskuttler.de>

On Mon, Aug 23, 2010 at 08:09:00AM -0700, Eric Mann wrote:
> ?2) Move content - I assume the regular WP export-import process will work?

In my experience it is very buggy, I won't use it again. If I had to
move single installs into a network again I'd try to find a way to do
it with mysqldump + imports (create new blog first, then import the old
db tables).

> ?3) Map the domains to their new home on the new installation?

yes, the domain mapping plugin works fine

Nicolas

--
Nicolas Kuttler
wp at nkuttler.de

http://www.nkuttler.de
http://www.nicolaskuttler.de (deutsch)

From jeffc at wptavern.com  Mon Aug 23 16:01:52 2010
From: jeffc at wptavern.com (WPTavern)
Date: Mon, 23 Aug 2010 12:01:52 -0400
Subject: [wp-hackers] Code reviews for plugins?
Message-ID: <807D5618-081C-4BCE-89D0-42270D3CB1B0@wptavern.com>

I think one of the best ideas I've seen proposed so far regarding plugin reviews is the idea of setting up an Amazon like review system for plugins. Each plugin on the repository gets their own review section aka comments. These comments could then be rated by the community with the most voted comments displayed at the top. This system is not subject to liability and instead of a team of people working behind the scenes through an email list or what have you, the entire community becomes the team of reviewers. The reviews/comments form also provides an opportunity for the end user to state whether or not the plugin works or is broken which would solve the other problem of plugin devs not getting feedback when someone marks their plugin as broken.

Sent by Jeff Chandler via iPhone

From chip at chipbennett.net  Mon Aug 23 16:05:06 2010
From: chip at chipbennett.net (Chip Bennett)
Date: Mon, 23 Aug 2010 11:05:06 -0500
Subject: [wp-hackers] Code reviews for plugins?
In-Reply-To: <807D5618-081C-4BCE-89D0-42270D3CB1B0@wptavern.com>
References: <807D5618-081C-4BCE-89D0-42270D3CB1B0@wptavern.com>
Message-ID: <AANLkTikKvGeYv8WnE4-FWVt6pZ5jwSEzyK-kCUmydsv1@mail.gmail.com>

This idea *has* to be an improvement over the current "Works/Broken"
anonymous voting system. Though, I believe Otto is working on some
improvements with the "Works/Broken" system, so maybe it's best to see
what's in the pipeline for Plugin repository improvements as part of 3.org?

Chip

On Mon, Aug 23, 2010 at 11:01 AM, WPTavern <jeffc at wptavern.com> wrote:

> I think one of the best ideas I've seen proposed so far regarding plugin
> reviews is the idea of setting up an Amazon like review system for plugins.
> Each plugin on the repository gets their own review section aka comments.
> These comments could then be rated by the community with the most voted
> comments displayed at the top. This system is not subject to liability and
> instead of a team of people working behind the scenes through an email list
> or what have you, the entire community becomes the team of reviewers. The
> reviews/comments form also provides an opportunity for the end user to state
> whether or not the plugin works or is broken which would solve the other
> problem of plugin devs not getting feedback when someone marks their plugin
> as broken.
>
> Sent by Jeff Chandler via iPhone
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From paul at codehooligans.com  Mon Aug 23 16:09:10 2010
From: paul at codehooligans.com (Paul)
Date: Mon, 23 Aug 2010 12:09:10 -0400
Subject: [wp-hackers] Code reviews for plugins?
In-Reply-To: <807D5618-081C-4BCE-89D0-42270D3CB1B0@wptavern.com>
References: <807D5618-081C-4BCE-89D0-42270D3CB1B0@wptavern.com>
Message-ID: <42DD54B1-182C-4431-9E60-F7802DA8DB4B@codehooligans.com>

How is that different than the already in place plugin rating system hosted on WP.org? There users (not just developers) can rate your plugin and advise other is it works with a particular version of WP. Also it links to user support mentions from the WP.org forum. 

Do we really need to start splintering the plugin reviews into another micro-communitee controlled site? 

P-



On Aug 23, 2010, at 12:01 PM, WPTavern wrote:

> I think one of the best ideas I've seen proposed so far regarding plugin reviews is the idea of setting up an Amazon like review system for plugins. Each plugin on the repository gets their own review section aka comments. These comments could then be rated by the community with the most voted comments displayed at the top. This system is not subject to liability and instead of a team of people working behind the scenes through an email list or what have you, the entire community becomes the team of reviewers. The reviews/comments form also provides an opportunity for the end user to state whether or not the plugin works or is broken which would solve the other problem of plugin devs not getting feedback when someone marks their plugin as broken.
> 
> Sent by Jeff Chandler via iPhone
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers


From jer at simianuprising.com  Mon Aug 23 17:02:39 2010
From: jer at simianuprising.com (Jeremy Clarke)
Date: Mon, 23 Aug 2010 13:02:39 -0400
Subject: [wp-hackers] Is_single function wrongly commented ?
In-Reply-To: <AANLkTinh--y1s3zVyTO5nSOzoBP2RpHEP7Qb=xAv3xqS@mail.gmail.com>
References: <AANLkTi=vT61miZDsuLuF7wguOL1K2aVjD8cnWPnC2pJv@mail.gmail.com>
	<AANLkTi=3sVb9NwDvW9bbyzfGwvC8qzCGx0Q8tnx=gzJy@mail.gmail.com>
	<AANLkTikf-zhsTroKvxy6H3nkX+KWbT4_N4Eqo8g3C0F2@mail.gmail.com>
	<AANLkTinh--y1s3zVyTO5nSOzoBP2RpHEP7Qb=xAv3xqS@mail.gmail.com>
Message-ID: <AANLkTi=b8iGsqKcKr0pLhYuyk9x_Nb1e1kfSCSt7bGU8@mail.gmail.com>

On Sun, Aug 22, 2010 at 7:33 AM, scribu <scribu at gmail.com> wrote:

>
> Well, that was the _intended_ behaviour, but pages got added along the way,
> and now we can't fix it because of backwards compatibility. So yeah,
> updating the docblock is the best thing to do.
>
>
Please also add a reference to is_singular() as the solution to the more
general task of checking for singularity. IMHO the function docs should do
this more than they do when there are other alternative functions that are
intimately related.

-- 
Jeremy Clarke
Code and Design | globalvoicesonline.org

From mikeschinkel at newclarity.net  Mon Aug 23 17:03:02 2010
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Mon, 23 Aug 2010 13:03:02 -0400
Subject: [wp-hackers] Code reviews for plugins?
In-Reply-To: <4C72357E.30102@thedextrousweb.com>
References: <4C71936D.6070600@wptavern.com>	<4C71E62F.80307@simplercomputing.net>	<AANLkTik7vFjksLOnt+MgLDW5X_+AX1y-SS7c5u671Np5@mail.gmail.com>
	<4C71EFC3.1080806@simplercomputing.net>
	<4C72357E.30102@thedextrousweb.com>
Message-ID: <F4536CE0-9D75-4B1C-9AF2-A21A99BC7328@newclarity.net>

On Aug 23, 2010, at 4:46 AM, Harry Metcalfe wrote:
> On 23/08/10 04:49, Mark E wrote:
> > I'm seeing a big issue centered around delivering a false sense of
> > security to numerous millions of innocent people.
> 
> I agree. I like the idea about having objective criteria, and if the results of reviews were phrased appropriately -- ie, accurately -- that would be a nice thing to have.
> 
> But just to say "The community has reviewed this plugin and it looks A-OK to us" is a really bad idea. For a start, I'm not sure you can really do that in a generic way: to make that statement for any particular user, you'd need to know what other plugins they were running, and what their theme does. But ordinary, non-tecchie WP users will just interpret it as a badge of quality and may therefore be misled.
> 
> But more importantly, just to say a plugin has been "reviewed" without knowing what the reviewer was looking for is meaningless. They could have been looking for fluffy bunnies. It essentially ends up being a review to look for the things the reviewer thinks are important. Which is perhaps slightly better than nothing, but not much.

I don't think anyone was remotely suggesting a rubber stamp of "The community has reviewed this plugin and it looks A-OK to us."  For a person to have previously suggested that would imply they had given zero consideration to what a process would actually need to be to ultimately provide guidance to users on plugins.

> I think we should come up with a list of the top 25 mistakes people make in plugins, review to find those, perhaps also highlight whatever else looks problematic and tell the author, and then say to users "This plugin has passed a review which checks for some common WordPress plugin problems" or somesuch...

That is what was being discussed.

> PS: if this plan means I never have to spend hours fixing all the notices in someone else's plugin, that would be nice.

That would be one of the goals!

On Aug 23, 2010, at 8:26 AM, Paul wrote:
> When I read the original comments on this thread last week I though the purpose was to put together a peer review process where plugin developer can offer advice to other plugin developers as review of their code. I originally took this advice as something along the lines of "Well, your code works but this set of routines you've written would be better served if you just hooked into this WP filter and tried this technique (see xxx plugin as an example)". The goal I thought was to share WP plugin development knowledge and make any mediocre plugin developer a better developer. Like myself.   

I think both were part of the original discussion and different people took in different directions.  

Frankly I see a value in both; i.e. I would love a code review so I could throw up a snippet of code and have others tell me how I can improve it, and then I think there's also value in being able to give guidance to users of plugins.

> In reading this last set of messages it almost sounds like you guys want to put together a self-appointed committee where you rate plugins based on some yet to be determined checklist.

What was proposed most recently was not a self-appointed committee but a community process where anyone could be involved and the mechanism would by its nature need to surface the high quality contributions and segment from the low quality ones. That mechanism does not exist yet but its design can be discussed and could have a reputation similar to StackExchange.

> Why not just publish the check list somewhere some plugin developers can check their own plugin?

Well, you have to first develop that list and ideally get community buy-in on what should be included and what shouldn't. Knowing we can debate it all day on wp-hackers and at the end of the day still have nothing I proactively creating this as a place to collect a list and several people are already doing so:

http://wordpress.stackexchange.com/questions/715/objective-best-practices-for-plugin-development/735#735

Hope you can add your two cents there as well.

> I agree 100% with someone who wrote about people counting against you for not using the proper camel-case or not putting your JS into a sub-folder. This is crap. No one who uses your plugin will case. What should be review is the code written and its intended functionality. 

This is a red herring.  I don't think anyone is suggesting code formatting or code organization be a part of code review or plugin review.

On Aug 23, 2010, at 10:34 AM, Lynne Pope wrote:
> I think the first thing that needs to happen is for people to agree on what
> they want a process like this to do. Paul & Christopher have really good
> points and if the goal is to improve the quality of plugins then a review
> should be (IMO) limited to looking at security & functionality. If people
> get into arguments over camelcase, whether tabs or spaces should be used for
> indenting, etc etc then little will be achieved except bitterness.

Can we all just please acknowledge that arguments over camelcasing etc. were never on the table, and move on with something productive? 

> If, however, the intention is to review plugins with the goal of providing
> some surety for end-users then this is a completely different process. This
> thread shows people are thinking of both of these but I'm not so sure that
> both can be achieved.

As the ancient Chinese proverb says ?Those that say it can?t be done should get out of the way of those doing it.?  :-)

> This is potentially a minefield. Users don't give a damn about quality -
> they just want to know a plugin works, does what it says it does, is secure,
> and doesn't conflict with other plugins. It doesn't matter to users if the
> plugin is poorly written.

Quality in a plugin *IS* that it works, does what it says it does, is secure and doesn't conflict with other plugins. 

> The moment the words, "assurances" or "certification" come in, someone takes
> responsibility. THAT is absolutely the last thing the community should do.
> No matter how good a vetting process is, guarantees cannot be given. For a
> start, guarantees are specifically excluded from the GPL. NO WARRANTY


Nobody but you mentioned the words  "assurance" or "certification", only "review."   

This is starting to smell of bikeshedding. 

On Aug 23, 2010, at 10:39 AM, Eric Mann wrote:
> I think the two things we're proposing here are:
>  
> 1) To create a checklist of best practices for plug-in development that
> developers can use as a guiding tool while building their plug-ins.  ...
>  
> 2) That we organize the community around looking at and verifying that plug-ins
> claiming to meet certain standards actually meet certain standards.  ...
>  
> No one's suggesting that we relocate files or rewrite code...  

Exactly.

On Aug 23, 2010, at 12:01 PM, WPTavern wrote:
> I think one of the best ideas I've seen proposed so far regarding plugin reviews is the idea of setting up an Amazon like review system for plugins. Each plugin on the repository gets their own review section aka comments. These comments could then be rated by the community with the most voted comments displayed at the top. This system is not subject to liability and instead of a team of people working behind the scenes through an email list or what have you, the entire community becomes the team of reviewers. The reviews/comments form also provides an opportunity for the end user to state whether or not the plugin works or is broken which would solve the other problem of plugin devs not getting feedback when someone marks their plugin as broken.

Exactly (and kudos for writing *that much* on your iPhone! :)


On Aug 23, 2010, at 12:05 PM, Chip Bennett wrote:
> This idea *has* to be an improvement over the current "Works/Broken"
> anonymous voting system. Though, I believe Otto is working on some
> improvements with the "Works/Broken" system, so maybe it's best to see
> what's in the pipeline for Plugin repository improvements as part of 3.org?

Finding a list of best practices is orthogonal to improving said system.  And getting the best practices is the first step so no need to wait.

On Aug 23, 2010, at 12:09 PM, Paul wrote:
> How is that different than the already in place plugin rating system hosted on WP.org? There users (not just developers) can rate your plugin and advise other is it works with a particular version of WP. Also it links to user support mentions from the WP.org forum. 

Because the current system isn't really helpful.

> Do we really need to start splintering the plugin reviews into another micro-communitee controlled site? 

Ideally the results would be on WordPress.org.  But nothing will happen to improve the situation if code is never written.


-Mike


From eric at eamann.com  Mon Aug 23 17:11:55 2010
From: eric at eamann.com (Eric Mann)
Date: Mon, 23 Aug 2010 10:11:55 -0700 (PDT)
Subject: [wp-hackers] add_filter() with multiple arguments
Message-ID: <949819905.54591.1282583515399.JavaMail.open-xchange@oxusltgw11.schlund.de>

It's fairly easy to add a filter that accepts multiple parameters, but how do
you return those parameters?
?
Case-in-point:
http://wordpress.stackexchange.com/questions/741/how-can-i-filter-children-of-the-uncategorized-category-out-of-the-loop
?
The solution to this particular category problem is to add a filter to
'get_categories_taxonomy' which passes two arguments, $args['taxonomy'] and
$args. ?But what do you pass back in the return?
?
Will:
?
function exclude_children($taxonomy, $args) {
?? ?$args['exclude_tree'] => '1';
?? ?return $args;
}
?
add_filter('get_categories_taxonomy', 'exclude_children', 10, 2);
?
break anything when it executes? ?I've never added a filter that accepted
multiple arguments before, and the Codex documentation only addresses receiving
more than one argument, not passing them back ...?

From elfin at elfden.co.uk  Mon Aug 23 17:18:50 2010
From: elfin at elfden.co.uk (Rich Pedley)
Date: Mon, 23 Aug 2010 18:18:50 +0100
Subject: [wp-hackers] Code reviews for plugins?
In-Reply-To: <42DD54B1-182C-4431-9E60-F7802DA8DB4B@codehooligans.com>
References: <807D5618-081C-4BCE-89D0-42270D3CB1B0@wptavern.com>
	<42DD54B1-182C-4431-9E60-F7802DA8DB4B@codehooligans.com>
Message-ID: <4C72AD7A.7000101@elfden.co.uk>

> On Aug 23, 2010, at 12:01 PM, WPTavern wrote:
>
>>> I think one of the best ideas I've seen proposed so far
>>> regarding plugin reviews is the idea of setting up an Amazon
>>> like review system for plugins. Each plugin on the repository
>>> gets their own review section aka comments. These comments
>>> could then be rated by the community with the most voted
>>> comments displayed at the top. This system is not subject to
>>> liability and instead of a team of people working behind the
>>> scenes through an email list or what have you, the entire
>>> community becomes the team of reviewers. The reviews/comments
>>> form also provides an opportunity for the end user to state
>>> whether or not the plugin works or is broken which would solve
>>> the other problem of plugin devs not getting feedback when
>>> someone marks their plugin as broken.
>>>

I would prefer that approach, it does work elsewhere and is suitable 
for reviews - both good and bad. If used I would like the current 
version number of plugin to be used as a default, even if there is a 
drop down selection of all versions.

people are more likely to use it, and is far better than the current 
works/doesn't work system (which I have never liked).

On 23/08/2010 17:09, Paul wrote:
 > How is that different than the already in place plugin rating
 > system hosted on WP.org? There users (not just developers) can rate
 > your plugin and advise other is it works with a particular version
 > of WP. Also it links to user support mentions from the WP.org
 > forum.

because the current system is anonymous, and feedback from people for 
when things don't work is virtually non existent. (to the point where 
I think someone who for whatever reason has a grudge will follow up 
and continually mark something as not working when they haven't even 
tried it).

 > Do we really need to start splintering the plugin reviews into
 > another micro-communitee controlled site?

In this instance feedback for plugin authors is useful not just for 
the author but for potential users. It's a way for users to rant about 
how bad something was as well as provide good reviews. Having it 
hidden away on a forum misses this. I would hope to see people strive 
to get good reviews! because it will be there for all to see.

Obviosuly the plugin author should be able to reply to individual 
comments/reviews, but shouldn't be able to edit/delete. However some 
functionality for someone to report malicious ones might be a good 
idea to have available from the off it was ever implemented.

Rich
-- 
don't have an iphone, and can't even text from a mobile

From mda at blogwaffe.com  Mon Aug 23 17:26:22 2010
From: mda at blogwaffe.com (Michael D Adams)
Date: Mon, 23 Aug 2010 10:26:22 -0700
Subject: [wp-hackers] add_filter() with multiple arguments
In-Reply-To: <949819905.54591.1282583515399.JavaMail.open-xchange@oxusltgw11.schlund.de>
References: <949819905.54591.1282583515399.JavaMail.open-xchange@oxusltgw11.schlund.de>
Message-ID: <AANLkTim67cXwCCL2JxbB3uAnZcBxzjuF50JtmCdEW00M@mail.gmail.com>

On Mon, Aug 23, 2010 at 10:11 AM, Eric Mann <eric at eamann.com> wrote:
> It's fairly easy to add a filter that accepts multiple parameters, but how do
> you return those parameters?

In general, you cannot.

> Case-in-point:
> http://wordpress.stackexchange.com/questions/741/how-can-i-filter-children-of-the-uncategorized-category-out-of-the-loop
>
> The solution to this particular category problem is to add a filter to
> 'get_categories_taxonomy' which passes two arguments, $args['taxonomy'] and
> $args. ?But what do you pass back in the return?

Try the 'list_terms_exclusions' filter instead.  It's not pretty (you
have to modify SQL), but it should work.


> Will:
>
> function exclude_children($taxonomy, $args) {
> ?? ?$args['exclude_tree'] => '1';
> ?? ?return $args;
> }
>
> add_filter('get_categories_taxonomy', 'exclude_children', 10, 2);
>
> break anything when it executes?

Yes, because in the get_categories() function, $taxonomy is now set to
$args.  Try it and see :)  Add a Categories widget to your theme, and
load that code in a plugin.

> ?I've never added a filter that accepted
> multiple arguments before, and the Codex documentation only addresses receiving
> more than one argument, not passing them back ...

You can't return multiple arguments.  You can modify multiple
arguments iff the hook was called with do_action_ref_array() or
apply_filters_ref_array().

Mike
--mdawaffe

PS: Don't use categories at all for the above.  Register a custom taxonomy.

From eric at eamann.com  Mon Aug 23 17:39:21 2010
From: eric at eamann.com (Eric Mann)
Date: Mon, 23 Aug 2010 10:39:21 -0700 (PDT)
Subject: [wp-hackers] add_filter() with multiple arguments
In-Reply-To: <AANLkTim67cXwCCL2JxbB3uAnZcBxzjuF50JtmCdEW00M@mail.gmail.com>
References: <949819905.54591.1282583515399.JavaMail.open-xchange@oxusltgw11.schlund.de>
	<AANLkTim67cXwCCL2JxbB3uAnZcBxzjuF50JtmCdEW00M@mail.gmail.com>
Message-ID: <546512057.55472.1282585161595.JavaMail.open-xchange@oxusltgw11.schlund.de>

>>?PS: Don't use categories at all for the above.? Register a custom taxonomy.
?
Normally I wouldn't, but I'm trying to answer someone's specific question and
they're already using categories.
?
The reason I was suggesting to hook to `get_categories_taxonomy` is because he
only needs to set $args['exclude_tree'] and, since $args is accessible there, it
seemed like the quickest, easiest way to do that ... but when
`get_categories_taxonomy` passed two arguments rather than just 1
($taxonomy=apply_filters('get_categories_taxonomy',$args['taxonomy'],$args);) I
wasn't sure what to do ...

From rbilesky at gmail.com  Mon Aug 23 17:40:45 2010
From: rbilesky at gmail.com (Ryan Bilesky)
Date: Mon, 23 Aug 2010 10:40:45 -0700
Subject: [wp-hackers] Frontend Profile Editor
Message-ID: <AANLkTinCS84CZMSWwiHOi5kOYBf5MUyWPJSg40H2UGZ9@mail.gmail.com>

Is anyone aware of a plugin that will allow users to manage their profiles
via a frontend page, and will allow me to block subscribers from accessing
wp-admin and instead redirecting them to the frontend page to edit their
profile.  I tried searching the repositiry but I could not find any such
plugin.  I thought i'd just double check here before writing my own.

From rbilesky at gmail.com  Mon Aug 23 17:40:45 2010
From: rbilesky at gmail.com (Ryan Bilesky)
Date: Mon, 23 Aug 2010 10:40:45 -0700
Subject: [wp-hackers] Frontend Profile Editor
Message-ID: <AANLkTinCS84CZMSWwiHOi5kOYBf5MUyWPJSg40H2UGZ9@mail.gmail.com>

Is anyone aware of a plugin that will allow users to manage their profiles
via a frontend page, and will allow me to block subscribers from accessing
wp-admin and instead redirecting them to the frontend page to edit their
profile.  I tried searching the repositiry but I could not find any such
plugin.  I thought i'd just double check here before writing my own.

From chip at chipbennett.net  Mon Aug 23 17:44:29 2010
From: chip at chipbennett.net (Chip Bennett)
Date: Mon, 23 Aug 2010 12:44:29 -0500
Subject: [wp-hackers] Code reviews for plugins?
In-Reply-To: <F4536CE0-9D75-4B1C-9AF2-A21A99BC7328@newclarity.net>
References: <4C71936D.6070600@wptavern.com>
	<4C71E62F.80307@simplercomputing.net>
	<AANLkTik7vFjksLOnt+MgLDW5X_+AX1y-SS7c5u671Np5@mail.gmail.com>
	<4C71EFC3.1080806@simplercomputing.net>
	<4C72357E.30102@thedextrousweb.com>
	<F4536CE0-9D75-4B1C-9AF2-A21A99BC7328@newclarity.net>
Message-ID: <AANLkTikzE5Rz=ZFWUG5utVeJ19Lzmt6+pPWqeWTwpjP7@mail.gmail.com>

On Mon, Aug 23, 2010 at 12:03 PM, Mike Schinkel <mikeschinkel at newclarity.net
> wrote:

>
> On Aug 23, 2010, at 12:05 PM, Chip Bennett wrote:
> > This idea *has* to be an improvement over the current "Works/Broken"
> > anonymous voting system. Though, I believe Otto is working on some
> > improvements with the "Works/Broken" system, so maybe it's best to see
> > what's in the pipeline for Plugin repository improvements as part of
> 3.org?
>
> Finding a list of best practices is orthogonal to improving said system.
>  And getting the best practices is the first step so no need to wait.


That comment was in response - and directly related - to Jeff's idea
regarding revising the plugin "Works/Broken" system (or adding an
Amazon-style rating/commenting system) on Extend. I don't see it as
conflicting with the suggestion to develop a set of best-practices
guidelines. I suggested to wait on coming up with ideas to change/replace
the "Works/Broken"  tool on Extend, *not* to wait on creating best-practices
guidelines or to wait on implementing some form of peer review.

In fact, I'll jump right in line, as soon as such peer-review is available.
So, the sooner it happens, the better!

Chip

From mikeschinkel at newclarity.net  Mon Aug 23 17:53:55 2010
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Mon, 23 Aug 2010 13:53:55 -0400
Subject: [wp-hackers] Code reviews for plugins?
In-Reply-To: <AANLkTikzE5Rz=ZFWUG5utVeJ19Lzmt6+pPWqeWTwpjP7@mail.gmail.com>
References: <4C71936D.6070600@wptavern.com>
	<4C71E62F.80307@simplercomputing.net>
	<AANLkTik7vFjksLOnt+MgLDW5X_+AX1y-SS7c5u671Np5@mail.gmail.com>
	<4C71EFC3.1080806@simplercomputing.net>
	<4C72357E.30102@thedextrousweb.com>
	<F4536CE0-9D75-4B1C-9AF2-A21A99BC7328@newclarity.net>
	<AANLkTikzE5Rz=ZFWUG5utVeJ19Lzmt6+pPWqeWTwpjP7@mail.gmail.com>
Message-ID: <6C8A06CA-EB9D-43AF-9AF4-59A691E73E90@newclarity.net>

On Aug 23, 2010, at 1:44 PM, Chip Bennett wrote:
> On Mon, Aug 23, 2010 at 12:03 PM, Mike Schinkel <mikeschinkel at newclarity.net
>> wrote:
> 
>> 
>> On Aug 23, 2010, at 12:05 PM, Chip Bennett wrote:
>>> This idea *has* to be an improvement over the current "Works/Broken"
>>> anonymous voting system. Though, I believe Otto is working on some
>>> improvements with the "Works/Broken" system, so maybe it's best to see
>>> what's in the pipeline for Plugin repository improvements as part of
>> 3.org?
>> 
>> Finding a list of best practices is orthogonal to improving said system.
>> And getting the best practices is the first step so no need to wait.
> 
> That comment was in response - and directly related - to Jeff's idea
> regarding revising the plugin "Works/Broken" system (or adding an
> Amazon-style rating/commenting system) on Extend. I don't see it as
> conflicting with the suggestion to develop a set of best-practices
> guidelines. I suggested to wait on coming up with ideas to change/replace
> the "Works/Broken"  tool on Extend, *not* to wait on creating best-practices
> guidelines or to wait on implementing some form of peer review.
> 
> In fact, I'll jump right in line, as soon as such peer-review is available.
> So, the sooner it happens, the better!

Great!  Hope to get your list of best practices here:

http://wordpress.stackexchange.com/questions/715/

-Mike

From scribu at gmail.com  Mon Aug 23 17:58:21 2010
From: scribu at gmail.com (scribu)
Date: Mon, 23 Aug 2010 20:58:21 +0300
Subject: [wp-hackers] Frontend Profile Editor
In-Reply-To: <AANLkTinCS84CZMSWwiHOi5kOYBf5MUyWPJSg40H2UGZ9@mail.gmail.com>
References: <AANLkTinCS84CZMSWwiHOi5kOYBf5MUyWPJSg40H2UGZ9@mail.gmail.com>
Message-ID: <AANLkTinw6bRFRTQTOn+AQHJ78k-E45XoYy0v=+V4GFJu@mail.gmail.com>

On Mon, Aug 23, 2010 at 8:40 PM, Ryan Bilesky <rbilesky at gmail.com> wrote:

> Is anyone aware of a plugin that will allow users to manage their profiles
> via a frontend page, and will allow me to block subscribers from accessing
> wp-admin and instead redirecting them to the frontend page to edit their
> profile.  I tried searching the repositiry but I could not find any such
> plugin.  I thought i'd just double check here before writing my own.
>

BuddyPress does that, and a lot more:

http://buddypress.org/


-- 
http://scribu.net

From rbilesky at gmail.com  Mon Aug 23 18:05:14 2010
From: rbilesky at gmail.com (Ryan Bilesky)
Date: Mon, 23 Aug 2010 11:05:14 -0700
Subject: [wp-hackers] Frontend Profile Editor
In-Reply-To: <AANLkTinw6bRFRTQTOn+AQHJ78k-E45XoYy0v=+V4GFJu@mail.gmail.com>
References: <AANLkTinCS84CZMSWwiHOi5kOYBf5MUyWPJSg40H2UGZ9@mail.gmail.com>
	<AANLkTinw6bRFRTQTOn+AQHJ78k-E45XoYy0v=+V4GFJu@mail.gmail.com>
Message-ID: <AANLkTin0Yzn_qzWSVAv495xJArPTbRE_SxkXakNgHaa6@mail.gmail.com>

That's just it, I don't need "a lot more" though.  Using buddypress for just
this would be like using a swat team to conduct a traffic stop on someone
who was going 10 miles over the speed limit....it's a bit overkill for just
this.

On Mon, Aug 23, 2010 at 10:58 AM, scribu <scribu at gmail.com> wrote:

>  On Mon, Aug 23, 2010 at 8:40 PM, Ryan Bilesky <rbilesky at gmail.com> wrote:
>
> > Is anyone aware of a plugin that will allow users to manage their
> profiles
> > via a frontend page, and will allow me to block subscribers from
> accessing
> > wp-admin and instead redirecting them to the frontend page to edit their
> > profile.  I tried searching the repositiry but I could not find any such
> > plugin.  I thought i'd just double check here before writing my own.
> >
>
> BuddyPress does that, and a lot more:
>
> http://buddypress.org/
>
>
> --
> http://scribu.net
>  _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From jer at simianuprising.com  Mon Aug 23 18:14:52 2010
From: jer at simianuprising.com (Jeremy Clarke)
Date: Mon, 23 Aug 2010 14:14:52 -0400
Subject: [wp-hackers] Code reviews for plugins?
In-Reply-To: <4C72AD7A.7000101@elfden.co.uk>
References: <807D5618-081C-4BCE-89D0-42270D3CB1B0@wptavern.com>
	<42DD54B1-182C-4431-9E60-F7802DA8DB4B@codehooligans.com>
	<4C72AD7A.7000101@elfden.co.uk>
Message-ID: <AANLkTimM_fUPz31eTD09wWaJvO9rhZOcZFd+h0PESLeP@mail.gmail.com>

On Mon, Aug 23, 2010 at 1:18 PM, Rich Pedley <elfin at elfden.co.uk> wrote:

>
> In this instance feedback for plugin authors is useful not just for the
> author but for potential users. It's a way for users to rant about how bad
> something was as well as provide good reviews. Having it hidden away on a
> forum misses this. I would hope to see people strive to get good reviews!
> because it will be there for all to see.
>
> Obviosuly the plugin author should be able to reply to individual
> comments/reviews, but shouldn't be able to edit/delete. However some
> functionality for someone to report malicious ones might be a good idea to
> have available from the off it was ever implemented.
>
>
FWIW I think the plugin directory should work like the iTunes App store in
almost every way, except that plugin authors should be able to reply to
reviews (like eBay). A one-star review inherently represents a 'broken'
vote, so that whole disctiction can be removed.

The basics of this already exist in the WP Ideas forum, though as we all
know that system (at least historically) is pretty flaky so the code
probably needs to be rewritten specifically for the plugins dir.

jer

From rbilesky at gmail.com  Mon Aug 23 18:05:14 2010
From: rbilesky at gmail.com (Ryan Bilesky)
Date: Mon, 23 Aug 2010 11:05:14 -0700
Subject: [wp-hackers] Frontend Profile Editor
In-Reply-To: <AANLkTinw6bRFRTQTOn+AQHJ78k-E45XoYy0v=+V4GFJu@mail.gmail.com>
References: <AANLkTinCS84CZMSWwiHOi5kOYBf5MUyWPJSg40H2UGZ9@mail.gmail.com>
	<AANLkTinw6bRFRTQTOn+AQHJ78k-E45XoYy0v=+V4GFJu@mail.gmail.com>
Message-ID: <AANLkTin0Yzn_qzWSVAv495xJArPTbRE_SxkXakNgHaa6@mail.gmail.com>

That's just it, I don't need "a lot more" though.  Using buddypress for just
this would be like using a swat team to conduct a traffic stop on someone
who was going 10 miles over the speed limit....it's a bit overkill for just
this.

On Mon, Aug 23, 2010 at 10:58 AM, scribu <scribu at gmail.com> wrote:

>  On Mon, Aug 23, 2010 at 8:40 PM, Ryan Bilesky <rbilesky at gmail.com> wrote:
>
> > Is anyone aware of a plugin that will allow users to manage their
> profiles
> > via a frontend page, and will allow me to block subscribers from
> accessing
> > wp-admin and instead redirecting them to the frontend page to edit their
> > profile.  I tried searching the repositiry but I could not find any such
> > plugin.  I thought i'd just double check here before writing my own.
> >
>
> BuddyPress does that, and a lot more:
>
> http://buddypress.org/
>
>
> --
> http://scribu.net
>  _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From chip at chipbennett.net  Mon Aug 23 18:24:20 2010
From: chip at chipbennett.net (Chip Bennett)
Date: Mon, 23 Aug 2010 13:24:20 -0500
Subject: [wp-hackers] Code reviews for plugins?
In-Reply-To: <6C8A06CA-EB9D-43AF-9AF4-59A691E73E90@newclarity.net>
References: <4C71936D.6070600@wptavern.com>
	<4C71E62F.80307@simplercomputing.net>
	<AANLkTik7vFjksLOnt+MgLDW5X_+AX1y-SS7c5u671Np5@mail.gmail.com>
	<4C71EFC3.1080806@simplercomputing.net>
	<4C72357E.30102@thedextrousweb.com>
	<F4536CE0-9D75-4B1C-9AF2-A21A99BC7328@newclarity.net>
	<AANLkTikzE5Rz=ZFWUG5utVeJ19Lzmt6+pPWqeWTwpjP7@mail.gmail.com>
	<6C8A06CA-EB9D-43AF-9AF4-59A691E73E90@newclarity.net>
Message-ID: <AANLkTin=V+Eqf4a1Fe1W=cMzKLiKmyNBjyzzmGNYocXr@mail.gmail.com>

On Mon, Aug 23, 2010 at 12:53 PM, Mike Schinkel <mikeschinkel at newclarity.net
> wrote:
>
>
> Great!  Hope to get your list of best practices here:
>
> http://wordpress.stackexchange.com/questions/715/
>
> -Mike
>

I'm probably not the best person to weigh in. I'm more in the target
audience who will *use* the list, when it's complete, to improve my own
code. But, I'll add what I can.

Chip

From yojoaquin at gmail.com  Mon Aug 23 18:49:30 2010
From: yojoaquin at gmail.com (Joaquin Rodriguez Montero)
Date: Mon, 23 Aug 2010 15:49:30 -0300
Subject: [wp-hackers] Frontend Profile Editor
Message-ID: <AANLkTikVAwv3Fx_b1ni-Q8kiup-p1E8Hzeuqdc3kVv4t@mail.gmail.com>

A couple of redirects and a user profile page will do the trick

function remove_the_dashboard () {
    if (current_user_can('level_10') || current_user_can('level_7')) {
        return;
    } else {
        if ( preg_match('#wp-admin/#',$_SERVER['REQUEST_URI']))
        wp_redirect(get_option('siteurl') . '/profile/'); // this redirects
the non-admin/editor user to /profile page.
    }
}
add_action('admin_menu', 'remove_the_dashboard');


function redirect_logout() {
        if (
preg_match('#(wp-login.php)?(loggedout=true)#',$_SERVER['REQUEST_URI']))
        wp_redirect(get_option('siteurl') . '/profile/'); // after logout
redirects the non-admin/editor user to /profile page.
}
add_action('login_head', 'redirect_logout');

function redirectregister(){
    wp_redirect(get_option('siteurl') . '/profile/'); //login? redirect to
/profile
}
add_action('login_head', 'redirectregister');

From shawn at crowdfavorite.com  Mon Aug 23 18:52:49 2010
From: shawn at crowdfavorite.com (Shawn Parker)
Date: Mon, 23 Aug 2010 12:52:49 -0600
Subject: [wp-hackers] Network Activate and rewrite rules
In-Reply-To: <AANLkTi=bMKchi9GuS=_wuF83Qm_vC0J+1OyexziBY2Hk@mail.gmail.com>
References: <BLU136-W261C01648DE91DDC7ED14F90810@phx.gbl>
	<AANLkTi=bMKchi9GuS=_wuF83Qm_vC0J+1OyexziBY2Hk@mail.gmail.com>
Message-ID: <1BF25A68-8DE5-4FE4-9CAA-3B773EF654B5@crowdfavorite.com>

You can also inspect the rules on being pulled from the DB and force a rebuild when they're not present. Use the 'transient_rewrite_rules' filter to inspect the rules after they're pulled from the db. If your rule isn't there you can return a null value and it'll force the rules to rebuild. Its a little heavy, yes, but if the site breaks badly without those rules its a good backup plan to have in place.


Shawn Parker
Web Developer
Crowd Favorite
http://crowdfavorite.com
shawn at crowdfavorite.com

On Aug 22, 2010, at 8:07 AM, Arne Brachhold wrote:

> Hi,
> 
> On Sun, Aug 22, 2010 at 02:09, Theodor Ramisch
> <theodor_ramisch at hotmail.com> wrote:
>> If somebody "network activates" the plugin, this hook is only called for the current blog. The plugin will be active, but all other blogs are missing the rewrite rules.
>> What is the recommended way to correct this behavior?
> 
> I one of my plugins I don't add the rules on activation, but in the
> init hook. Afterward you can set an option to indicate it was done. On
> the next requests you can check for the option and skip the flushing.
> 
> - Arne
> 
> On Sun, Aug 22, 2010 at 02:09, Theodor Ramisch
> <theodor_ramisch at hotmail.com> wrote:
>> 
>> Hi all,
>> 
>> I'm currently developing a plugin which adds some rewrite rules. Because it is recommended not to call flush_rules() on every request, I do this once in the activation hook.
>> 
>> If somebody "network activates" the plugin, this hook is only called for the current blog. The plugin will be active, but all other blogs are missing the rewrite rules.
>> 
>> What is the recommended way to correct this behavior?
>> 
>> Best regards,
>> 
>>  Theodor
>> 
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>> 
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers


From rbilesky at gmail.com  Mon Aug 23 18:53:20 2010
From: rbilesky at gmail.com (Ryan Bilesky)
Date: Mon, 23 Aug 2010 11:53:20 -0700
Subject: [wp-hackers] Frontend Profile Editor
In-Reply-To: <AANLkTikVAwv3Fx_b1ni-Q8kiup-p1E8Hzeuqdc3kVv4t@mail.gmail.com>
References: <AANLkTikVAwv3Fx_b1ni-Q8kiup-p1E8Hzeuqdc3kVv4t@mail.gmail.com>
Message-ID: <AANLkTi=wjU0XUStCN2-rLS4W+KArmmfSSBdegf-kChLP@mail.gmail.com>

Well looks like I get to save some time, seems this does exist. Someone sent
me a link (off list for some reason) so I am sharing it here for others to
find if they are looking for the same.

http://wordpress.org/extend/plugins/theme-my-profile/

From elfin at elfden.co.uk  Mon Aug 23 19:23:38 2010
From: elfin at elfden.co.uk (Rich Pedley)
Date: Mon, 23 Aug 2010 20:23:38 +0100
Subject: [wp-hackers] Frontend Profile Editor
In-Reply-To: <AANLkTi=wjU0XUStCN2-rLS4W+KArmmfSSBdegf-kChLP@mail.gmail.com>
References: <AANLkTikVAwv3Fx_b1ni-Q8kiup-p1E8Hzeuqdc3kVv4t@mail.gmail.com>
	<AANLkTi=wjU0XUStCN2-rLS4W+KArmmfSSBdegf-kChLP@mail.gmail.com>
Message-ID: <4C72CABA.20502@elfden.co.uk>

On 23/08/2010 19:53, Ryan Bilesky wrote:
> Well looks like I get to save some time, seems this does exist. Someone sent
> me a link (off list for some reason) so I am sharing it here for others to
> find if they are looking for the same.
>
> http://wordpress.org/extend/plugins/theme-my-profile/

plugin developed by Jeff Farthing

http://www.jfarthing.com/

nice design you have nick.. erm borrow.. erm used there.

Rich

From burobjorn at gmail.com  Mon Aug 23 21:30:07 2010
From: burobjorn at gmail.com (Bjorn Wijers)
Date: Mon, 23 Aug 2010 23:30:07 +0200
Subject: [wp-hackers] deprecated function get_blog_lis(), but no alternative?
Message-ID: <4C72E85F.3020406@gmail.com>

Hi,

I'm using get_blog_list() in several plugins I have built for WordPress 
Mu. Today I was preparing some of them for WordPress 3 multisite and I 
got a message stating that this function is now deprecated yet no 
alternative is available nor recommended ("For performance reasons this 
function is not recommended").

Can somebody tell me a bit more about (looking for the nitty gritty 
details) the thoughts behind this?

Thanks in advance!
-- 

met vriendelijke groet,
Bjorn Wijers

* b u r o b j o r n .nl *
digitaal vakmanschap | digital craftsmanship

Werkdagen:
Van maandag t/m donderdag vanaf 10:00
Vrijdag is voor experimenteren en eigen projecten.

Concordiastraat 68-126
3551 EM Utrecht
The Netherlands

tel: +31 6 49 74 78 70
http://www.burobjorn.nl

From dennen at gmail.com  Mon Aug 23 21:51:26 2010
From: dennen at gmail.com (Bill Dennen)
Date: Mon, 23 Aug 2010 17:51:26 -0400
Subject: [wp-hackers] deprecated function get_blog_lis(),
	but no alternative?
In-Reply-To: <4C72E85F.3020406@gmail.com>
References: <4C72E85F.3020406@gmail.com>
Message-ID: <AANLkTikwTssUiDp-H3afC5jMKEYqpGfW8iReVN8736Vu@mail.gmail.com>

Hi, some info here:

http://wordpress.org/support/topic/suicidal-multisite-database-queries

> Can somebody tell me a bit more about (looking for the nitty gritty details)
> the thoughts behind this?

From peroyomaslists at gmail.com  Mon Aug 23 23:52:48 2010
From: peroyomaslists at gmail.com (=?ISO-8859-1?Q?Andr=E9s_Sanhueza?=)
Date: Mon, 23 Aug 2010 19:52:48 -0400
Subject: [wp-hackers] Adding taxonomies (and other custom fields) to
	taxonomies
Message-ID: <AANLkTinoy2kSzxTiYp=Br4BmX0FFHqHki+BGCfxVYyQt@mail.gmail.com>

Hello. I'm looking for a way to add taxonomies to another taxonomies,
and other meta data as well. My initial goal was to be able to assign
more than a single parent to a taxonomy term (like Drupal does), but
due to the way the tables are written it seems like a
counter-productive job, so the most logical option should be to assign
a non-hierarchical taxonomy to another taxonomy, much like these can
be added to custom post types. Also, being able to assign generic
custom fields would increase the flexibility for a lot of things.

Andr?s Sanhueza

From kenzaraque at gmail.com  Tue Aug 24 00:08:12 2010
From: kenzaraque at gmail.com (ken zarque)
Date: Mon, 23 Aug 2010 17:08:12 -0700
Subject: [wp-hackers] moving sites from one MS installation to another
Message-ID: <AANLkTimoJ7GKTD62hwLYMuJtXLUcxwrhUonY6z5zuV0i@mail.gmail.com>

Note: This is a continuation of a thread concerning one large database vs
multiple small databases.

Question:  What is the best way to move a single site from one MS
installation to another?

I have a dev, staging and production installation of WP MS.  And I am trying
to figure out what is the best way to move a site created in the dev
environment to the staging environment.

Since MS uses one large database, I would be moving a group of tables vs an
entire database.  It worries me that I will corrupt the database.

From scribu at gmail.com  Tue Aug 24 00:08:18 2010
From: scribu at gmail.com (scribu)
Date: Tue, 24 Aug 2010 03:08:18 +0300
Subject: [wp-hackers] Adding taxonomies (and other custom fields) to
	taxonomies
In-Reply-To: <AANLkTinoy2kSzxTiYp=Br4BmX0FFHqHki+BGCfxVYyQt@mail.gmail.com>
References: <AANLkTinoy2kSzxTiYp=Br4BmX0FFHqHki+BGCfxVYyQt@mail.gmail.com>
Message-ID: <AANLkTikTzP6-gE2mOmKCamJc7faNzeTUHopuxd6uRSe=@mail.gmail.com>

On Tue, Aug 24, 2010 at 2:52 AM, Andr?s Sanhueza
<peroyomaslists at gmail.com>wrote:

> Hello. I'm looking for a way to add taxonomies to another taxonomies,
> and other meta data as well. My initial goal was to be able to assign
> more than a single parent to a taxonomy term (like Drupal does), but
> due to the way the tables are written it seems like a
> counter-productive job, so the most logical option should be to assign
> a non-hierarchical taxonomy to another taxonomy, much like these can
> be added to custom post types. Also, being able to assign generic
> custom fields would increase the flexibility for a lot of things.
>

Why do you need a term to have multiple parents? Please give an example use
case.


-- 
http://scribu.net

From zamoose at gmail.com  Tue Aug 24 03:13:02 2010
From: zamoose at gmail.com (Doug Stewart)
Date: Mon, 23 Aug 2010 23:13:02 -0400
Subject: [wp-hackers] Adding taxonomies (and other custom fields) to
	taxonomies
In-Reply-To: <AANLkTikTzP6-gE2mOmKCamJc7faNzeTUHopuxd6uRSe=@mail.gmail.com>
References: <AANLkTinoy2kSzxTiYp=Br4BmX0FFHqHki+BGCfxVYyQt@mail.gmail.com>
	<AANLkTikTzP6-gE2mOmKCamJc7faNzeTUHopuxd6uRSe=@mail.gmail.com>
Message-ID: <F2D68368-1DA6-41C4-A576-A3AE13DF981D@gmail.com>

On Aug 23, 2010, at 8:08 PM, scribu <scribu at gmail.com> wrote:

> On Tue, Aug 24, 2010 at 2:52 AM, Andr?s Sanhueza
> <peroyomaslists at gmail.com>wrote:
> 
>> Hello. I'm looking for a way to add taxonomies to another taxonomies,
>> and other meta data as well. My initial goal was to be able to assign
>> more than a single parent to a taxonomy term (like Drupal does), but
>> due to the way the tables are written it seems like a
>> counter-productive job, so the most logical option should be to assign
>> a non-hierarchical taxonomy to another taxonomy, much like these can
>> be added to custom post types. Also, being able to assign generic
>> custom fields would increase the flexibility for a lot of things.
>> 
> 
> Why do you need a term to have multiple parents? Please give an example use
> case.
> 
> 

Well, you see, when a mommy term and a daddy term love each other VERY much...

--
Doug Stewart
@zamoose
http://literalbarrage.org/blog


From rbilesky at gmail.com  Tue Aug 24 05:51:15 2010
From: rbilesky at gmail.com (Ryan Bilesky)
Date: Mon, 23 Aug 2010 22:51:15 -0700
Subject: [wp-hackers] Change Tag Delimiter from a comma to a semicolon
Message-ID: <AANLkTimqoOXTMs1bBGKB-Go5VorK1uH77Ne_uJ5McO4Z@mail.gmail.com>

The delimiter to add multiple tags is "," however this is causing an issue
when I want to use a tag that includes a comma as part of the tag.  A
workaround that was suggested is to use the ascii equivalent &amp;#44;  This
does work when initially making the post, however if I come back to edit the
post f I am not careful about fixing the tags, it will change from one tag
that has a comma to two separate tags, using the comma as the delimiter.  So
it seems the best option would be to change the delimiter to something
else...say a semicolon.

idk if that would be possible with a plugin I think I would have to hack the
core but regardless I wouldn't even know where to start to change the
delimiter.  Any ideas.

From peter.westwood at ftwr.co.uk  Tue Aug 24 08:13:09 2010
From: peter.westwood at ftwr.co.uk (Peter Westwood)
Date: Tue, 24 Aug 2010 09:13:09 +0100 (BST)
Subject: [wp-hackers] Frontend Profile Editor
In-Reply-To: <AANLkTikVAwv3Fx_b1ni-Q8kiup-p1E8Hzeuqdc3kVv4t@mail.gmail.com>
References: <AANLkTikVAwv3Fx_b1ni-Q8kiup-p1E8Hzeuqdc3kVv4t@mail.gmail.com>
Message-ID: <91f56f809545a03656faf925cede5fdd.squirrel@secure.ftwr.co.uk>

On Mon, August 23, 2010 7:49 pm, Joaquin Rodriguez Montero wrote:
> A couple of redirects and a user profile page will do the trick
>
>     if (current_user_can('level_10') || current_user_can('level_7')) {

Please don't do this!

the 'level_x' caps are only there for backward compatibility with very old
plugins and could disappear at any point in time (or maybe just work only
for random page requests).

Roles are not hierarchical.

westi


From burobjorn at gmail.com  Tue Aug 24 08:36:31 2010
From: burobjorn at gmail.com (Bjorn Wijers)
Date: Tue, 24 Aug 2010 10:36:31 +0200
Subject: [wp-hackers] deprecated function get_blog_lis(),
	but no alternative?
In-Reply-To: <AANLkTikwTssUiDp-H3afC5jMKEYqpGfW8iReVN8736Vu@mail.gmail.com>
References: <4C72E85F.3020406@gmail.com>
	<AANLkTikwTssUiDp-H3afC5jMKEYqpGfW8iReVN8736Vu@mail.gmail.com>
Message-ID: <4C73848F.7000701@gmail.com>

Thanks Bill,

I've read the link you sent, yet I cannot find anything else than vague 
statements on the get_blog_list function going 'suicidal' and some loose 
statements about using transients (which I didn't know of, so learned 
something here :)).

I'm going to implement my own function to retrieve a list of blog ids 
with use of transients to make it easy on the resources. However I would 
be very much interested in some benchmarks if somebody has them on when 
and why the get_blog_list() is becoming a problem.


met vriendelijke groet,
Bjorn Wijers

* b u r o b j o r n .nl *
digitaal vakmanschap | digital craftsmanship

Werkdagen:
Van maandag t/m donderdag vanaf 10:00
Vrijdag is voor experimenteren en eigen projecten.

Concordiastraat 68-126
3551 EM Utrecht
The Netherlands

tel: +31 6 49 74 78 70
http://www.burobjorn.nl

On 08/23/2010 11:51 PM, Bill Dennen wrote:
> Hi, some info here:
>
> http://wordpress.org/support/topic/suicidal-multisite-database-queries
>
>> Can somebody tell me a bit more about (looking for the nitty gritty details)
>> the thoughts behind this?
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From burobjorn at gmail.com  Tue Aug 24 09:14:55 2010
From: burobjorn at gmail.com (Bjorn Wijers)
Date: Tue, 24 Aug 2010 11:14:55 +0200
Subject: [wp-hackers] hooks for multisite: add blog, remove blog, change blog
Message-ID: <4C738D8F.2050406@gmail.com>

Hi,

I'm looking for the hooks to use when a blog has been added, removed or 
changed status (ie: public vs mature etc). So far I haven't been able to 
find these. Can somebody help me out with pointing me in the right 
direction?

Thanks in advance!

-- 

met vriendelijke groet,
Bjorn Wijers

* b u r o b j o r n .nl *
digitaal vakmanschap | digital craftsmanship

Werkdagen:
Van maandag t/m donderdag vanaf 10:00
Vrijdag is voor experimenteren en eigen projecten.

Concordiastraat 68-126
3551 EM Utrecht
The Netherlands

tel: +31 6 49 74 78 70
http://www.burobjorn.nl

From wordpress at web-warlocks.net  Tue Aug 24 11:02:53 2010
From: wordpress at web-warlocks.net (The WordPress Web Warlock)
Date: Tue, 24 Aug 2010 13:02:53 +0200
Subject: [wp-hackers] Adding taxonomies (and other custom fields)
	to	taxonomies
In-Reply-To: <AANLkTinoy2kSzxTiYp=Br4BmX0FFHqHki+BGCfxVYyQt@mail.gmail.com>
References: <AANLkTinoy2kSzxTiYp=Br4BmX0FFHqHki+BGCfxVYyQt@mail.gmail.com>
Message-ID: <4C73A6DD.2080500@web-warlocks.net>

En/na Andr?s Sanhueza ha escrit:
> (...) My initial goal was to be able to assign
> more than a single parent to a taxonomy term (like Drupal does), but
> due to the way the tables are written it seems like a
> counter-productive job, so the most logical option should be to assign
> a non-hierarchical taxonomy to another taxonomy, much like these can
> be added to custom post types. 
Why do you say that? I've been working with multiple parentage for terms 
& other termmeta for a while now, and if anything, it looks to me that 
using multiple taxonomies is counter-productive (you're complicating 
things exponentially, for the one, and they're mutually exclusive).
Adding a taxonomy to another, non-core, taxonomy to have multiple 
parents for a term would be adding a trouble layer to an unneeded layer.
Use just categories, add a termmeta table based on term id; if you need 
it, add another termmeta for management of groups of terms that are 
hierarchical among them (a group can be children/parent of any number of 
other groups).
Cache all that, and manage the possibility of infinite recursion 
somehow; you'll only need to use the category__in parameter of WP_Query 
to list all the related posts.

I've got under development a plugin that does all that and more (and has 
a theme, too, for the needs-theme-support features). I suppose the RC 
will be finished by mid-end September, but if you're a brave man you 
could deal with the beta. Check my site to see it working, and 
specifically 
http://www.web-warlocks.net/wordpress/plugins/zyx-term-meta/features/multiple-term-parentage 
, for some (incomplete) docs.

BTW, my native languages are Catalan and Spanish (from Spain). Given 
your name and the fact that you're stressing the e in Andr?s, I suppose 
this could be of some help, if you needed off-list support :)


From dennen at gmail.com  Tue Aug 24 11:07:10 2010
From: dennen at gmail.com (Bill Dennen)
Date: Tue, 24 Aug 2010 07:07:10 -0400
Subject: [wp-hackers] deprecated function get_blog_lis(),
	but no alternative?
In-Reply-To: <4C73848F.7000701@gmail.com>
References: <4C72E85F.3020406@gmail.com>
	<AANLkTikwTssUiDp-H3afC5jMKEYqpGfW8iReVN8736Vu@mail.gmail.com>
	<4C73848F.7000701@gmail.com>
Message-ID: <AANLkTimYAL=adqrC_zncXXW1wzL3FhBUr-3yF7d95GYG@mail.gmail.com>

I agree. It seems like they removed the function without much input
from people who use it!

Have you seen:

http://tinyurl.com/29lunab

There was more discussion here, too:

http://old.nabble.com/WP-3-Multisite-List-Blogs-td29313106.html

-Bill


On Tue, Aug 24, 2010 at 4:36 AM, Bjorn Wijers <burobjorn at gmail.com> wrote:
> Thanks Bill,
>
> I've read the link you sent, yet I cannot find anything else than vague
> statements on the get_blog_list function going 'suicidal' and some loose
> statements about using transients (which I didn't know of, so learned
> something here :)).
>
> I'm going to implement my own function to retrieve a list of blog ids with
> use of transients to make it easy on the resources. However I would be very
> much interested in some benchmarks if somebody has them on when and why the
> get_blog_list() is becoming a problem.
>
>
> met vriendelijke groet,
> Bjorn Wijers
>
> * b u r o b j o r n .nl *
> digitaal vakmanschap | digital craftsmanship
>
> Werkdagen:
> Van maandag t/m donderdag vanaf 10:00
> Vrijdag is voor experimenteren en eigen projecten.
>
> Concordiastraat 68-126
> 3551 EM Utrecht
> The Netherlands
>
> tel: +31 6 49 74 78 70
> http://www.burobjorn.nl
>
> On 08/23/2010 11:51 PM, Bill Dennen wrote:
>>
>> Hi, some info here:
>>
>> http://wordpress.org/support/topic/suicidal-multisite-database-queries
>>
>>> Can somebody tell me a bit more about (looking for the nitty gritty
>>> details)
>>> the thoughts behind this?
>>
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From yojoaquin at gmail.com  Tue Aug 24 14:03:49 2010
From: yojoaquin at gmail.com (Joaquin Rodriguez Montero)
Date: Tue, 24 Aug 2010 11:03:49 -0300
Subject: [wp-hackers] Frontend Profile Editor
Message-ID: <AANLkTikE43wTu+x8WfnQ1NDvk_xoYfzJjq8ys7FTsd3O@mail.gmail.com>

My bad westi! I know.. sorry! As soon as I pasted it I thought.. hmm that
should be changed to actual caps and not to 'user level'.. Won't happen
again :'(


Message: 6
Date: Tue, 24 Aug 2010 09:13:09 +0100 (BST)
From: "Peter Westwood" <peter.westwood at ftwr.co.uk>
Subject: Re: [wp-hackers] Frontend Profile Editor
To: wp-hackers at lists.automattic.com
Message-ID:
       <91f56f809545a03656faf925cede5fdd.squirrel at secure.ftwr.co.uk
>
Content-Type: text/plain;charset=iso-8859-1

On Mon, August 23, 2010 7:49 pm, Joaquin Rodriguez Montero wrote:
> A couple of redirects and a user profile page will do the trick
>
>     if (current_user_can('level_10') || current_user_can('level_7')) {

Please don't do this!

the 'level_x' caps are only there for backward compatibility with very old
plugins and could disappear at any point in time (or maybe just work only
for random page requests).

Roles are not hierarchical.

westi

From jer at simianuprising.com  Tue Aug 24 16:09:37 2010
From: jer at simianuprising.com (Jeremy Clarke)
Date: Tue, 24 Aug 2010 12:09:37 -0400
Subject: [wp-hackers] Change Tag Delimiter from a comma to a semicolon
In-Reply-To: <AANLkTimqoOXTMs1bBGKB-Go5VorK1uH77Ne_uJ5McO4Z@mail.gmail.com>
References: <AANLkTimqoOXTMs1bBGKB-Go5VorK1uH77Ne_uJ5McO4Z@mail.gmail.com>
Message-ID: <AANLkTikGDvh28=yxratzDE103yBL1xpiGhqjSG=VPuvd@mail.gmail.com>

This is pretty wacky man. I suggest you reconsider your decision to include
commas in tag names. Is it absolutely necessary? Would the text content
really not make sense without the comma? If you're tagging book/movie titles
or something why not just skip commas, are you afraid of the hipster
title-spelling police?

Have you considered using categories instead?

-- 
Jeremy Clarke

From goldenapplesdesign at gmail.com  Tue Aug 24 16:47:03 2010
From: goldenapplesdesign at gmail.com (Nathaniel Taintor)
Date: Tue, 24 Aug 2010 12:47:03 -0400
Subject: [wp-hackers] Change Tag Delimiter from a comma to a semicolon
In-Reply-To: <AANLkTikGDvh28=yxratzDE103yBL1xpiGhqjSG=VPuvd@mail.gmail.com>
References: <AANLkTimqoOXTMs1bBGKB-Go5VorK1uH77Ne_uJ5McO4Z@mail.gmail.com>
	<AANLkTikGDvh28=yxratzDE103yBL1xpiGhqjSG=VPuvd@mail.gmail.com>
Message-ID: <AANLkTinw=75W2ot__5DLq3g0Gy7v=v1wbGbxCGfNc2N5@mail.gmail.com>

I don't know, I had this same issue trying to use "cities" as a custom
taxonomy, where entries like "Washington, DC" constantly gave me problems. I
think its a valid question. I took the lazy way out and renamed all my city
tags without commas, but I'd like to hear from anyone who took the time to
think it through and came up with a solution.

Than

On Tue, Aug 24, 2010 at 12:09 PM, Jeremy Clarke <jer at simianuprising.com>wrote:

> This is pretty wacky man. I suggest you reconsider your decision to include
> commas in tag names. Is it absolutely necessary? Would the text content
> really not make sense without the comma? If you're tagging book/movie
> titles
> or something why not just skip commas, are you afraid of the hipster
> title-spelling police?
>
> Have you considered using categories instead?
>
> --
> Jeremy Clarke
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From dragonfly at dragonflyeye.net  Tue Aug 24 16:51:13 2010
From: dragonfly at dragonflyeye.net (Thomas Belknap)
Date: Tue, 24 Aug 2010 12:51:13 -0400
Subject: [wp-hackers] Change Tag Delimiter from a comma to a semicolon
In-Reply-To: <AANLkTinw=75W2ot__5DLq3g0Gy7v=v1wbGbxCGfNc2N5@mail.gmail.com>
References: <AANLkTimqoOXTMs1bBGKB-Go5VorK1uH77Ne_uJ5McO4Z@mail.gmail.com>
	<AANLkTikGDvh28=yxratzDE103yBL1xpiGhqjSG=VPuvd@mail.gmail.com>
	<AANLkTinw=75W2ot__5DLq3g0Gy7v=v1wbGbxCGfNc2N5@mail.gmail.com>
Message-ID: <AANLkTin1bvBD83wx9xESfCvB57Ji6jVEPOv15=fooiKb@mail.gmail.com>

Why wouldn't you use "locations" and then cities and states as their own
tags? That way, you can use the intersection of two tags to determine
precisely what the user wants.

On Tue, Aug 24, 2010 at 12:47 PM, Nathaniel Taintor <
goldenapplesdesign at gmail.com> wrote:

> I don't know, I had this same issue trying to use "cities" as a custom
> taxonomy, where entries like "Washington, DC" constantly gave me problems.
> I
> think its a valid question. I took the lazy way out and renamed all my city
> tags without commas, but I'd like to hear from anyone who took the time to
> think it through and came up with a solution.
>
> Than
>
> On Tue, Aug 24, 2010 at 12:09 PM, Jeremy Clarke <jer at simianuprising.com
> >wrote:
>
> > This is pretty wacky man. I suggest you reconsider your decision to
> include
> > commas in tag names. Is it absolutely necessary? Would the text content
> > really not make sense without the comma? If you're tagging book/movie
> > titles
> > or something why not just skip commas, are you afraid of the hipster
> > title-spelling police?
> >
> > Have you considered using categories instead?
> >
> > --
> > Jeremy Clarke
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers at lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> >
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From bulk at thecodecave.com  Tue Aug 24 17:25:00 2010
From: bulk at thecodecave.com (Brian Layman)
Date: Tue, 24 Aug 2010 13:25:00 -0400
Subject: [wp-hackers] Adding taxonomies (and other custom fields)
	to	taxonomies
In-Reply-To: <F2D68368-1DA6-41C4-A576-A3AE13DF981D@gmail.com>
References: <AANLkTinoy2kSzxTiYp=Br4BmX0FFHqHki+BGCfxVYyQt@mail.gmail.com>	<AANLkTikTzP6-gE2mOmKCamJc7faNzeTUHopuxd6uRSe=@mail.gmail.com>
	<F2D68368-1DA6-41C4-A576-A3AE13DF981D@gmail.com>
Message-ID: <001501cb43b1$48a2eae0$d9e8c0a0$@thecodecave.com>

> On Tue, Aug 24, 2010 at 2:52 AM, Andr?s Sanhueza
>> <peroyomaslists at gmail.com>wrote:
>> Why do you need a term to have multiple parents? Please give an 
>> example use case.
> Well, you see, when a mommy term and a daddy term love each other VERY much...

Does this related back to it taking less Westi's comment on Brook's law: "It's also likely that one person would reproduce in less than 34 years."?


From elfin at elfden.co.uk  Tue Aug 24 17:50:33 2010
From: elfin at elfden.co.uk (Rich Pedley)
Date: Tue, 24 Aug 2010 18:50:33 +0100
Subject: [wp-hackers] Adding taxonomies (and other custom
	fields)	to	taxonomies
In-Reply-To: <001501cb43b1$48a2eae0$d9e8c0a0$@thecodecave.com>
References: <AANLkTinoy2kSzxTiYp=Br4BmX0FFHqHki+BGCfxVYyQt@mail.gmail.com>	<AANLkTikTzP6-gE2mOmKCamJc7faNzeTUHopuxd6uRSe=@mail.gmail.com>	<F2D68368-1DA6-41C4-A576-A3AE13DF981D@gmail.com>
	<001501cb43b1$48a2eae0$d9e8c0a0$@thecodecave.com>
Message-ID: <4C740669.7070504@elfden.co.uk>

On 24/08/2010 18:25, Brian Layman wrote:
>> On Tue, Aug 24, 2010 at 2:52 AM, Andr?s Sanhueza
>>> <peroyomaslists at gmail.com>wrote: Why do you need a term to have
>>> multiple parents? Please give an example use case.
>> Well, you see, when a mommy term and a daddy term love each other
>> VERY much...
>
> Does this related back to it taking less Westi's comment on Brook's
> law: "It's also likely that one person would reproduce in less than
> 34 years."?

took me 35...

Rich

From goldenapplesdesign at gmail.com  Tue Aug 24 18:00:56 2010
From: goldenapplesdesign at gmail.com (Nathaniel Taintor)
Date: Tue, 24 Aug 2010 14:00:56 -0400
Subject: [wp-hackers] Change Tag Delimiter from a comma to a semicolon
In-Reply-To: <AANLkTin1bvBD83wx9xESfCvB57Ji6jVEPOv15=fooiKb@mail.gmail.com>
References: <AANLkTimqoOXTMs1bBGKB-Go5VorK1uH77Ne_uJ5McO4Z@mail.gmail.com>
	<AANLkTikGDvh28=yxratzDE103yBL1xpiGhqjSG=VPuvd@mail.gmail.com>
	<AANLkTinw=75W2ot__5DLq3g0Gy7v=v1wbGbxCGfNc2N5@mail.gmail.com>
	<AANLkTin1bvBD83wx9xESfCvB57Ji6jVEPOv15=fooiKb@mail.gmail.com>
Message-ID: <AANLkTi=gQ2ni9ZCOy4OxoYwBM7nWQyeNGozdOjwM5Fys@mail.gmail.com>

Well, yeah, there's always a workaround. But sometimes it does make sense
from a user's perspective for the tags to include commas. In my case, I
wasn't storing city, state; I was just storing city information. And for
most people, "Washington, DC" is the name of the city, not just
"Washington". Other cities - like "Seattle" or "Miami" - don't need a state
indicator.

In the same way if you were storing movie titles in a tags field, I would
think you would probably want to use the actual title and not some sanitized
version... that's what the slug is for.

Than


On Tue, Aug 24, 2010 at 12:51 PM, Thomas Belknap <dragonfly at dragonflyeye.net
> wrote:

> Why wouldn't you use "locations" and then cities and states as their own
> tags? That way, you can use the intersection of two tags to determine
> precisely what the user wants.
>
> On Tue, Aug 24, 2010 at 12:47 PM, Nathaniel Taintor <
> goldenapplesdesign at gmail.com> wrote:
>
> > I don't know, I had this same issue trying to use "cities" as a custom
> > taxonomy, where entries like "Washington, DC" constantly gave me
> problems.
> > I
> > think its a valid question. I took the lazy way out and renamed all my
> city
> > tags without commas, but I'd like to hear from anyone who took the time
> to
> > think it through and came up with a solution.
> >
> > Than
> >
> > On Tue, Aug 24, 2010 at 12:09 PM, Jeremy Clarke <jer at simianuprising.com
> > >wrote:
> >
> > > This is pretty wacky man. I suggest you reconsider your decision to
> > include
> > > commas in tag names. Is it absolutely necessary? Would the text content
> > > really not make sense without the comma? If you're tagging book/movie
> > > titles
> > > or something why not just skip commas, are you afraid of the hipster
> > > title-spelling police?
> > >
> > > Have you considered using categories instead?
> > >
> > > --
> > > Jeremy Clarke
> > > _______________________________________________
> > > wp-hackers mailing list
> > > wp-hackers at lists.automattic.com
> > > http://lists.automattic.com/mailman/listinfo/wp-hackers
> > >
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers at lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> >
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From dragonfly at dragonflyeye.net  Tue Aug 24 18:10:24 2010
From: dragonfly at dragonflyeye.net (Thomas Belknap)
Date: Tue, 24 Aug 2010 14:10:24 -0400
Subject: [wp-hackers] Change Tag Delimiter from a comma to a semicolon
In-Reply-To: <AANLkTi=gQ2ni9ZCOy4OxoYwBM7nWQyeNGozdOjwM5Fys@mail.gmail.com>
References: <AANLkTimqoOXTMs1bBGKB-Go5VorK1uH77Ne_uJ5McO4Z@mail.gmail.com>
	<AANLkTikGDvh28=yxratzDE103yBL1xpiGhqjSG=VPuvd@mail.gmail.com>
	<AANLkTinw=75W2ot__5DLq3g0Gy7v=v1wbGbxCGfNc2N5@mail.gmail.com>
	<AANLkTin1bvBD83wx9xESfCvB57Ji6jVEPOv15=fooiKb@mail.gmail.com>
	<AANLkTi=gQ2ni9ZCOy4OxoYwBM7nWQyeNGozdOjwM5Fys@mail.gmail.com>
Message-ID: <AANLkTik9fCSSyMEip5vYAGCRFe3=oeBax4Y4GRMa84ru@mail.gmail.com>

There are certainly plenty of situations where the comma would be helpful to
have back as a non-defining character. It might be worth it to specify that
quotation marks can also define tag boundaries. That way, something within
quotation marks does not have any internal characters read as delimiters.

Makes sense to me.

On Tue, Aug 24, 2010 at 2:00 PM, Nathaniel Taintor <
goldenapplesdesign at gmail.com> wrote:

> Well, yeah, there's always a workaround. But sometimes it does make sense
> from a user's perspective for the tags to include commas. In my case, I
> wasn't storing city, state; I was just storing city information. And for
> most people, "Washington, DC" is the name of the city, not just
> "Washington". Other cities - like "Seattle" or "Miami" - don't need a state
> indicator.
>
> In the same way if you were storing movie titles in a tags field, I would
> think you would probably want to use the actual title and not some
> sanitized
> version... that's what the slug is for.
>
> Than
>
>
> On Tue, Aug 24, 2010 at 12:51 PM, Thomas Belknap <
> dragonfly at dragonflyeye.net
> > wrote:
>
> > Why wouldn't you use "locations" and then cities and states as their own
> > tags? That way, you can use the intersection of two tags to determine
> > precisely what the user wants.
> >
> > On Tue, Aug 24, 2010 at 12:47 PM, Nathaniel Taintor <
> > goldenapplesdesign at gmail.com> wrote:
> >
> > > I don't know, I had this same issue trying to use "cities" as a custom
> > > taxonomy, where entries like "Washington, DC" constantly gave me
> > problems.
> > > I
> > > think its a valid question. I took the lazy way out and renamed all my
> > city
> > > tags without commas, but I'd like to hear from anyone who took the time
> > to
> > > think it through and came up with a solution.
> > >
> > > Than
> > >
> > > On Tue, Aug 24, 2010 at 12:09 PM, Jeremy Clarke <
> jer at simianuprising.com
> > > >wrote:
> > >
> > > > This is pretty wacky man. I suggest you reconsider your decision to
> > > include
> > > > commas in tag names. Is it absolutely necessary? Would the text
> content
> > > > really not make sense without the comma? If you're tagging book/movie
> > > > titles
> > > > or something why not just skip commas, are you afraid of the hipster
> > > > title-spelling police?
> > > >
> > > > Have you considered using categories instead?
> > > >
> > > > --
> > > > Jeremy Clarke
> > > > _______________________________________________
> > > > wp-hackers mailing list
> > > > wp-hackers at lists.automattic.com
> > > > http://lists.automattic.com/mailman/listinfo/wp-hackers
> > > >
> > > _______________________________________________
> > > wp-hackers mailing list
> > > wp-hackers at lists.automattic.com
> > > http://lists.automattic.com/mailman/listinfo/wp-hackers
> > >
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers at lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> >
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From johnbillion+wp at gmail.com  Tue Aug 24 18:25:00 2010
From: johnbillion+wp at gmail.com (John Blackbourn)
Date: Tue, 24 Aug 2010 19:25:00 +0100
Subject: [wp-hackers] Change Tag Delimiter from a comma to a semicolon
In-Reply-To: <AANLkTik9fCSSyMEip5vYAGCRFe3=oeBax4Y4GRMa84ru@mail.gmail.com>
References: <AANLkTimqoOXTMs1bBGKB-Go5VorK1uH77Ne_uJ5McO4Z@mail.gmail.com>
	<AANLkTikGDvh28=yxratzDE103yBL1xpiGhqjSG=VPuvd@mail.gmail.com>
	<AANLkTinw=75W2ot__5DLq3g0Gy7v=v1wbGbxCGfNc2N5@mail.gmail.com>
	<AANLkTin1bvBD83wx9xESfCvB57Ji6jVEPOv15=fooiKb@mail.gmail.com>
	<AANLkTi=gQ2ni9ZCOy4OxoYwBM7nWQyeNGozdOjwM5Fys@mail.gmail.com>
	<AANLkTik9fCSSyMEip5vYAGCRFe3=oeBax4Y4GRMa84ru@mail.gmail.com>
Message-ID: <AANLkTikH1sYVrZL6U47PEotGYd5HVNUWLOpbynzeisjp@mail.gmail.com>

On Tue, Aug 24, 2010 at 7:10 PM, Thomas Belknap
<dragonfly at dragonflyeye.net> wrote:
> It might be worth it to specify that
> quotation marks can also define tag boundaries. That way, something within
> quotation marks does not have any internal characters read as delimiters.

This makes a lot of sense and is an elegant approach. Flickr, for
example, uses spaces as its tag delimiters and lets you use "quotes
around multiple words" in order to allow tags with spaces in them. We
could do just the same to allow tags with commas in them.

From andrew at graymerica.com  Tue Aug 24 20:18:32 2010
From: andrew at graymerica.com (Andrew Gray)
Date: Tue, 24 Aug 2010 16:18:32 -0400
Subject: [wp-hackers] change siteurl at DB level
Message-ID: <2D6847E2-C113-4915-934E-9BFC4934D554@graymerica.com>

I have been trying to move a site from  development.domain.com  to domain.com all day and got fed up and wrote some SQL to make the change on the DB level.
I know that you can download the DB dump and fix it, but it causes some problems for me with UTF characters.  Also some of my sites are pretty big now, with all the revisions, custom post types and what not.

If you run this command, you can pretty much change all of the stock tables.

This will not change all your plugins values, but saved me a ton of time. Took about 1 sec to run


#Change Domain in in Wordpress DB
#before you run this command in SQL (phpmyadmin)
# 1. Backup DB
# 2. Find and replace the text below in your text editor
#replace $old$ with the old domain name
#replace  $new$ with the new domain name

update wp_postmeta set meta_value = replace(meta_value, '$old$' , '$new$') ;
update wp_posts set post_content = replace(post_content, '$old$' , '$new$') ;
update wp_options set option_value = replace(option_value, '$old$' , '$new$') ;

#end sql command

I would love it if there was an easy way to force wordpress to use a place holder for the domain and then replace in the correct one when it reads from the DB.
If I could find a filter that would filter every value from read and write to the db, I could do this very easy, but there is no filter for every value coming from the DB.
I just do not know why the SITEURL should be stored in the DB.  Is there a pair of filters that I can use to replace a value in every read and write

Andrew

From chrisbratlien at gmail.com  Tue Aug 24 20:33:06 2010
From: chrisbratlien at gmail.com (Christopher Bratlien)
Date: Tue, 24 Aug 2010 15:33:06 -0500
Subject: [wp-hackers] change siteurl at DB level
In-Reply-To: <2D6847E2-C113-4915-934E-9BFC4934D554@graymerica.com>
References: <2D6847E2-C113-4915-934E-9BFC4934D554@graymerica.com>
Message-ID: <AANLkTinkxk-n38T442svMbNfWYUChMPcD=RjRAz9SMhK@mail.gmail.com>

You might be interested in a plugin I wrote for exactly the same situation.

http://wordpress.org/extend/plugins/relative-site-url-on-content-save/

It doesn't do any replacing upon installation, though. Only on clicking
Update or Publish

On Tue, Aug 24, 2010 at 3:18 PM, Andrew Gray <andrew at graymerica.com> wrote:

> I have been trying to move a site from  development.domain.com  to
> domain.com all day and got fed up and wrote some SQL to make the change on
> the DB level.
> I know that you can download the DB dump and fix it, but it causes some
> problems for me with UTF characters.  Also some of my sites are pretty big
> now, with all the revisions, custom post types and what not.
>
> If you run this command, you can pretty much change all of the stock
> tables.
>
> This will not change all your plugins values, but saved me a ton of time.
> Took about 1 sec to run
>
>
> #Change Domain in in Wordpress DB
> #before you run this command in SQL (phpmyadmin)
> # 1. Backup DB
> # 2. Find and replace the text below in your text editor
> #replace $old$ with the old domain name
> #replace  $new$ with the new domain name
>
> update wp_postmeta set meta_value = replace(meta_value, '$old$' , '$new$')
> ;
> update wp_posts set post_content = replace(post_content, '$old$' , '$new$')
> ;
> update wp_options set option_value = replace(option_value, '$old$' ,
> '$new$') ;
>
> #end sql command
>
> I would love it if there was an easy way to force wordpress to use a place
> holder for the domain and then replace in the correct one when it reads from
> the DB.
> If I could find a filter that would filter every value from read and write
> to the db, I could do this very easy, but there is no filter for every value
> coming from the DB.
> I just do not know why the SITEURL should be stored in the DB.  Is there a
> pair of filters that I can use to replace a value in every read and write
>
> Andrew
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From jmiloj at gmail.com  Tue Aug 24 20:52:22 2010
From: jmiloj at gmail.com (Jerry Johnson)
Date: Tue, 24 Aug 2010 16:52:22 -0400
Subject: [wp-hackers] change siteurl at DB level
In-Reply-To: <AANLkTinkxk-n38T442svMbNfWYUChMPcD=RjRAz9SMhK@mail.gmail.com>
References: <2D6847E2-C113-4915-934E-9BFC4934D554@graymerica.com>
	<AANLkTinkxk-n38T442svMbNfWYUChMPcD=RjRAz9SMhK@mail.gmail.com>
Message-ID: <AANLkTikogizt1U4Tarp3wPRjTUrjpEFtAggpWa2CVZVd@mail.gmail.com>

Andrew,

You might have a problem with that script, if any of your wp_options have a
serialized string containing the url (like an rss feed url), since the
length of the string will no longer match the serialized string length
value. If so, you might want to only replace a few known records in the
wp_options table which have the entire unserialized string)

Also, look at the guid field in your posts table, to see if you have the old
url in there as well.

(We use wp-mu still, so my scripts are a little different, but we handle
those 2 cases I mention above in addition to yours. We also search/replace
in the wp_blogs and wp_site tables)

Just a thought,
Jerry Milo Johnson



> On Tue, Aug 24, 2010 at 3:18 PM, Andrew Gray <andrew at graymerica.com>
> wrote:
>
> > I have been trying to move a site from  development.domain.com  to
> > domain.com all day and got fed up and wrote some SQL to make the change
> on
> > the DB level.
> > I know that you can download the DB dump and fix it, but it causes some
> > problems for me with UTF characters.  Also some of my sites are pretty
> big
> > now, with all the revisions, custom post types and what not.
> >
> > If you run this command, you can pretty much change all of the stock
> > tables.
> >
> > This will not change all your plugins values, but saved me a ton of time.
> > Took about 1 sec to run
> >
> >
> > #Change Domain in in Wordpress DB
> > #before you run this command in SQL (phpmyadmin)
> > # 1. Backup DB
> > # 2. Find and replace the text below in your text editor
> > #replace $old$ with the old domain name
> > #replace  $new$ with the new domain name
> >
> > update wp_postmeta set meta_value = replace(meta_value, '$old$' ,
> '$new$')
> > ;
> > update wp_posts set post_content = replace(post_content, '$old$' ,
> '$new$')
> > ;
> > update wp_options set option_value = replace(option_value, '$old$' ,
> > '$new$') ;
> >
> > #end sql command
> >
> > I would love it if there was an easy way to force wordpress to use a
> place
> > holder for the domain and then replace in the correct one when it reads
> from
> > the DB.
> > If I could find a filter that would filter every value from read and
> write
> > to the db, I could do this very easy, but there is no filter for every
> value
> > coming from the DB.
> > I just do not know why the SITEURL should be stored in the DB.  Is there
> a
> > pair of filters that I can use to replace a value in every read and write
>

From mda at blogwaffe.com  Tue Aug 24 20:56:31 2010
From: mda at blogwaffe.com (Michael D Adams)
Date: Tue, 24 Aug 2010 13:56:31 -0700
Subject: [wp-hackers] change siteurl at DB level
In-Reply-To: <AANLkTikogizt1U4Tarp3wPRjTUrjpEFtAggpWa2CVZVd@mail.gmail.com>
References: <2D6847E2-C113-4915-934E-9BFC4934D554@graymerica.com>
	<AANLkTinkxk-n38T442svMbNfWYUChMPcD=RjRAz9SMhK@mail.gmail.com>
	<AANLkTikogizt1U4Tarp3wPRjTUrjpEFtAggpWa2CVZVd@mail.gmail.com>
Message-ID: <AANLkTi=ybTUB3=qOyKo6ToLvkToEA5eC8r8VAddquiUB@mail.gmail.com>

On Tue, Aug 24, 2010 at 1:52 PM, Jerry Johnson <jmiloj at gmail.com> wrote:
> Also, look at the guid field in your posts table, to see if you have the old
> url in there as well.

The GUID should never change, even if you change domains.

It's not a permalink, it's an identifier.

Mike
--mdawaffe

From jpotkanski at tribune.com  Tue Aug 24 22:21:32 2010
From: jpotkanski at tribune.com (Potkanski, Jason)
Date: Tue, 24 Aug 2010 17:21:32 -0500
Subject: [wp-hackers] change siteurl at DB level
In-Reply-To: <2D6847E2-C113-4915-934E-9BFC4934D554@graymerica.com>
References: <2D6847E2-C113-4915-934E-9BFC4934D554@graymerica.com>
Message-ID: <7A06A0AED9867C4C8B285D2D5D60B19C54C4C52BA9@FCWPMB06.usa.tribune.com>

Here is a small bash script I use to move from prod back to dev on my local machine. You can run this from the server or the test box depending on how your network is configured. As the others have said, the only way to guarantee the change is a DB dump.

#!/bin/bash
mysqldump -v --host=proddbserver --user=produser --password=prodpw --lock-tables=false --databases wp_prod > dump.sql
sed 's/blogs.prod.com/dev.prod.com/g' dump.sql > newdump.sql
mysql --force -u devuser --password=devpassword -h 127.0.0.1 wp_prod < newdump.sql
rm dump.sql
rm newdump.sql

You can add --default-character-set=UTF8 to the mysqldump and mysql lines if you have MySQL default character set mismatches.

Jason Potkanski
Tribune Technology

-----Original Message-----
From: wp-hackers-bounces at lists.automattic.com [mailto:wp-hackers-bounces at lists.automattic.com] On Behalf Of Andrew Gray
Sent: Tuesday, August 24, 2010 3:19 PM
To: wp-hackers at lists.automattic.com
Subject: [wp-hackers] change siteurl at DB level

I have been trying to move a site from  development.domain.com  to domain.com all day and got fed up and wrote some SQL to make the change on the DB level.
I know that you can download the DB dump and fix it, but it causes some problems for me with UTF characters.  Also some of my sites are pretty big now, with all the revisions, custom post types and what not.

If you run this command, you can pretty much change all of the stock tables.

This will not change all your plugins values, but saved me a ton of time. Took about 1 sec to run


#Change Domain in in Wordpress DB
#before you run this command in SQL (phpmyadmin)
# 1. Backup DB
# 2. Find and replace the text below in your text editor
#replace $old$ with the old domain name
#replace  $new$ with the new domain name

update wp_postmeta set meta_value = replace(meta_value, '$old$' , '$new$') ;
update wp_posts set post_content = replace(post_content, '$old$' , '$new$') ;
update wp_options set option_value = replace(option_value, '$old$' , '$new$') ;

#end sql command

I would love it if there was an easy way to force wordpress to use a place holder for the domain and then replace in the correct one when it reads from the DB.
If I could find a filter that would filter every value from read and write to the db, I could do this very easy, but there is no filter for every value coming from the DB.
I just do not know why the SITEURL should be stored in the DB.  Is there a pair of filters that I can use to replace a value in every read and write

Andrew
_______________________________________________
wp-hackers mailing list
wp-hackers at lists.automattic.com
http://lists.automattic.com/mailman/listinfo/wp-hackers


From chrisbratlien at gmail.com  Tue Aug 24 23:03:20 2010
From: chrisbratlien at gmail.com (Christopher Bratlien)
Date: Tue, 24 Aug 2010 18:03:20 -0500
Subject: [wp-hackers] change siteurl at DB level
In-Reply-To: <7A06A0AED9867C4C8B285D2D5D60B19C54C4C52BA9@FCWPMB06.usa.tribune.com>
References: <2D6847E2-C113-4915-934E-9BFC4934D554@graymerica.com>
	<7A06A0AED9867C4C8B285D2D5D60B19C54C4C52BA9@FCWPMB06.usa.tribune.com>
Message-ID: <93DB550D-9E0A-41D5-B85A-305A7A295D81@gmail.com>

Jason, I believe your bash script has the chance to corrupt serialized data also, as Jerry brought up earlier.

s:14:blogs.prod.com has the length encoded as 14. After running your sed command, we now have

s:14:dev.prod.com

which is corrupt. Should be

s:12:dev.prod.com



On Aug 24, 2010, at 5:21 PM, "Potkanski, Jason" <jpotkanski at tribune.com> wrote:

> Here is a small bash script I use to move from prod back to dev on my local machine. You can run this from the server or the test box depending on how your network is configured. As the others have said, the only way to guarantee the change is a DB dump.
> 
> #!/bin/bash
> mysqldump -v --host=proddbserver --user=produser --password=prodpw --lock-tables=false --databases wp_prod > dump.sql
> sed 's/blogs.prod.com/dev.prod.com/g' dump.sql > newdump.sql
> mysql --force -u devuser --password=devpassword -h 127.0.0.1 wp_prod < newdump.sql
> rm dump.sql
> rm newdump.sql
> 
> You can add --default-character-set=UTF8 to the mysqldump and mysql lines if you have MySQL default character set mismatches.
> 
> Jason Potkanski
> Tribune Technology
> 
> -----Original Message-----
> From: wp-hackers-bounces at lists.automattic.com [mailto:wp-hackers-bounces at lists.automattic.com] On Behalf Of Andrew Gray
> Sent: Tuesday, August 24, 2010 3:19 PM
> To: wp-hackers at lists.automattic.com
> Subject: [wp-hackers] change siteurl at DB level
> 
> I have been trying to move a site from  development.domain.com  to domain.com all day and got fed up and wrote some SQL to make the change on the DB level.
> I know that you can download the DB dump and fix it, but it causes some problems for me with UTF characters.  Also some of my sites are pretty big now, with all the revisions, custom post types and what not.
> 
> If you run this command, you can pretty much change all of the stock tables.
> 
> This will not change all your plugins values, but saved me a ton of time. Took about 1 sec to run
> 
> 
> #Change Domain in in Wordpress DB
> #before you run this command in SQL (phpmyadmin)
> # 1. Backup DB
> # 2. Find and replace the text below in your text editor
> #replace $old$ with the old domain name
> #replace  $new$ with the new domain name
> 
> update wp_postmeta set meta_value = replace(meta_value, '$old$' , '$new$') ;
> update wp_posts set post_content = replace(post_content, '$old$' , '$new$') ;
> update wp_options set option_value = replace(option_value, '$old$' , '$new$') ;
> 
> #end sql command
> 
> I would love it if there was an easy way to force wordpress to use a place holder for the domain and then replace in the correct one when it reads from the DB.
> If I could find a filter that would filter every value from read and write to the db, I could do this very easy, but there is no filter for every value coming from the DB.
> I just do not know why the SITEURL should be stored in the DB.  Is there a pair of filters that I can use to replace a value in every read and write
> 
> Andrew
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
> 
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

From dennen at gmail.com  Tue Aug 24 23:10:06 2010
From: dennen at gmail.com (Bill Dennen)
Date: Tue, 24 Aug 2010 19:10:06 -0400
Subject: [wp-hackers] change siteurl at DB level
In-Reply-To: <93DB550D-9E0A-41D5-B85A-305A7A295D81@gmail.com>
References: <2D6847E2-C113-4915-934E-9BFC4934D554@graymerica.com>
	<7A06A0AED9867C4C8B285D2D5D60B19C54C4C52BA9@FCWPMB06.usa.tribune.com>
	<93DB550D-9E0A-41D5-B85A-305A7A295D81@gmail.com>
Message-ID: <AANLkTim_XRP68Nx3EfR=+93e8D6zXLzM82cnmHDFwXF-@mail.gmail.com>

Ah, this might explain why I lose widgets when doing an SQL export and
find replace to rename blogs! I'm moving from
somesite.com/somedirectory to somesite.com/newdirectory - and the
length is different. I wondered why I lost the widgets when doing
this! Thanks.

On Tue, Aug 24, 2010 at 7:03 PM, Christopher Bratlien
<chrisbratlien at gmail.com> wrote:
> Jason, I believe your bash script has the chance to corrupt serialized data also, as Jerry brought up earlier.

From info at davidmcdonald.org  Tue Aug 24 23:52:59 2010
From: info at davidmcdonald.org (David McDonald)
Date: Wed, 25 Aug 2010 09:52:59 +1000
Subject: [wp-hackers] Subject:  change siteurl at DB level
Message-ID: <AANLkTimNpRsrbjNrb5DfGO+LAMa0vShPCwmOCPh79sh=@mail.gmail.com>

Yes, serialised data needs to be taken into account when changing the
site URL in a WP database.
This most likely is the cause of missing widgets, as I have found some
of the widget data to be serialised.

This script enables a search & replace including serialised data:

 http://spectacu.la/search-and-replace-for-wordpress-databases/

I have used it numerous times and from my experience it works very well.

Regards,

David McDonald
-------------------------------------------
Web Designer, Developer and Consultant

http://www.davidmcdonald.org/info
http://www.linkedin.com/in/davidmcdonald

Melbourne, Australia
Ph: 0403 332 140

Skype: davemelbourne
Twitter: http://twitter.com/davemac

> ------------------------------
>
> Message: 7
> Date: Tue, 24 Aug 2010 19:10:06 -0400
> From: Bill Dennen <dennen at gmail.com>
> Subject: Re: [wp-hackers] change siteurl at DB level
> To: wp-hackers at lists.automattic.com
> Message-ID:
> ? ? ? ?<AANLkTim_XRP68Nx3EfR=+93e8D6zXLzM82cnmHDFwXF- at mail.gmail.com>
> Content-Type: text/plain; charset=ISO-8859-1
>
> Ah, this might explain why I lose widgets when doing an SQL export and
> find replace to rename blogs! I'm moving from
> somesite.com/somedirectory to somesite.com/newdirectory - and the
> length is different. I wondered why I lost the widgets when doing
> this! Thanks.
>
> On Tue, Aug 24, 2010 at 7:03 PM, Christopher Bratlien
> <chrisbratlien at gmail.com> wrote:
>> Jason, I believe your bash script has the chance to corrupt serialized data also, as Jerry brought up earlier.
>
>
> ------------------------------

From otto at ottodestruct.com  Wed Aug 25 00:15:40 2010
From: otto at ottodestruct.com (Otto)
Date: Tue, 24 Aug 2010 19:15:40 -0500
Subject: [wp-hackers] Subject: change siteurl at DB level
In-Reply-To: <AANLkTimNpRsrbjNrb5DfGO+LAMa0vShPCwmOCPh79sh=@mail.gmail.com>
References: <AANLkTimNpRsrbjNrb5DfGO+LAMa0vShPCwmOCPh79sh=@mail.gmail.com>
Message-ID: <AANLkTi=uZOfLOx41VeRH7y5QvzLAHiFhe7zKcF_tj9qw@mail.gmail.com>

I once changed the maybe_unserialize function specifically to handle
this case. I know it's bad to modify core like that, but this was for
a one-off.

function maybe_unserialize( $original ) {
  if ( is_serialized( $original ) ) {
    $fixed = preg_replace_callback (
'!(?<=^|;)s:(\d+)(?=:"(.*?)";(?:}|a:|s:|b:|i:|o:|N;))!s',
'serialize_fix_callback', $original );
    return @unserialize( $fixed );
  }
  return $original;
}

function serialize_fix_callback($match) { return 's:' . strlen($match[2]); }

Worked for me then. Might be useful for somebody.

-Otto



On Tue, Aug 24, 2010 at 6:52 PM, David McDonald <info at davidmcdonald.org> wrote:
> Yes, serialised data needs to be taken into account when changing the
> site URL in a WP database.
> This most likely is the cause of missing widgets, as I have found some
> of the widget data to be serialised.
>
> This script enables a search & replace including serialised data:
>
> ?http://spectacu.la/search-and-replace-for-wordpress-databases/
>
> I have used it numerous times and from my experience it works very well.

From otto at ottodestruct.com  Wed Aug 25 01:08:33 2010
From: otto at ottodestruct.com (Otto)
Date: Tue, 24 Aug 2010 20:08:33 -0500
Subject: [wp-hackers] Transitioning to Multi-site
In-Reply-To: <971325574.50316.1282576140891.JavaMail.open-xchange@oxusltgw11.schlund.de>
References: <971325574.50316.1282576140891.JavaMail.open-xchange@oxusltgw11.schlund.de>
Message-ID: <AANLkTikVN1DOe2rJN1kq46BLxQbJQNKGvQmBWD57N=mz@mail.gmail.com>

On Mon, Aug 23, 2010 at 10:09 AM, Eric Mann <eric at eamann.com> wrote:
> So what steps should I follow to
> ?1) Set up Multisite - I know how to install it, but how should I configure it
> considering I want to use it for separate domains, not sub-folders or
> sub-domains?
> ?2) Move content - I assume the regular WP export-import process will work?
> ?3) Map the domains to their new home on the new installation?

I had to do this myself. It's not hard, actually.

1. Set up a multisite install on one of the sites. One site has to be
the "master", and you cannot change its URL, so choose wisely. When
setting up the other "sub-sites", use a subfolder installation to do
it. They're easier and it frankly doesn't matter which you use in the
end result if you're doing domain mapping. See step 3.

2. Move the content from *one* domain to a new site in WP. I used the
import/export to do it. This works, but images and other things may
break along the way. So you're basically going to do this one site at
a time, and generally it's a pain. This is why you do it one site at a
time. The search/replace regex plugin is invaluable here, to fix all
the images that are going to break in your content (Multisite uses a
different method for storing uploaded files, and all attached files
have a url of http://example.com/files/whatever.jpg. The "files" has
an .htaccess rule to redirect that to the proper p;ace.

3. Using the Domain Mapping plugin, you'll be able to change that
subfolder URL into the domain URL (or frankly any URL.. this is why
the subdomain/subfolder choice is irrelevant, the domain mapping
plugin lets you pick any URL in the world to use, as long as you can
make that URL point to the WordPress installation). I wrote a tutorial
on how to do this:
http://ottopress.com/2010/wordpress-3-0-multisite-domain-mapping-tutorial/

In reality, you'll sort of perform steps 2 and 3 side by side, as you
have to import the content, fix the domain, then fix the broken image
links and such. It's not actually seriously time consuming once you do
it a couple of times. After three sites, you'll be a pro at it. Most
of the time is spent waiting for DNS changes to take effect.

If you have custom themes and such, then you'll need to put them on
the main site, enable them, then use them on the sub-sites. You can
make it so that only specific sites can see specific themes, if you
like. Unless this is open to the public, that's probably not
necessary.

4. Repeat steps 2 and 3 for each site. It's not actually that
terrible, and it's just as easy as moving a site to a new domain...
which ain't particularly simple either. But take it one site at a time
and you'll be alright.

-Otto

From rbilesky at gmail.com  Wed Aug 25 01:24:14 2010
From: rbilesky at gmail.com (Ryan Bilesky)
Date: Tue, 24 Aug 2010 18:24:14 -0700
Subject: [wp-hackers] Change Tag Delimiter from a comma to a semicolon
In-Reply-To: <AANLkTikH1sYVrZL6U47PEotGYd5HVNUWLOpbynzeisjp@mail.gmail.com>
References: <AANLkTimqoOXTMs1bBGKB-Go5VorK1uH77Ne_uJ5McO4Z@mail.gmail.com>
	<AANLkTikGDvh28=yxratzDE103yBL1xpiGhqjSG=VPuvd@mail.gmail.com>
	<AANLkTinw=75W2ot__5DLq3g0Gy7v=v1wbGbxCGfNc2N5@mail.gmail.com>
	<AANLkTin1bvBD83wx9xESfCvB57Ji6jVEPOv15=fooiKb@mail.gmail.com>
	<AANLkTi=gQ2ni9ZCOy4OxoYwBM7nWQyeNGozdOjwM5Fys@mail.gmail.com>
	<AANLkTik9fCSSyMEip5vYAGCRFe3=oeBax4Y4GRMa84ru@mail.gmail.com>
	<AANLkTikH1sYVrZL6U47PEotGYd5HVNUWLOpbynzeisjp@mail.gmail.com>
Message-ID: <AANLkTi=DPciUE94JMpn4ga14cc3oEAUcPja1suPdmoWn@mail.gmail.com>

I am using tags to record locations like "Los Angeles, CA"  which while its
true I could just put Los Angeles, when you get to a city like Portland it
gets more complicated if you don't include the state.  And I want to include
the comma because first thts how cities and states are generally typed so if
I can use a comma i don't have to remeber to not include that, and secondly
I will be allowing users of my site to search for a tag (location) of their
choice, and I can virtually guarantee they will include a comma in the
query.

The reason I am not using Categories is two things: first I already have
planned to use them for a diffrent type of categorization.  Secondly tags
are easier to creat on the fly if a post is going to be associated with a
new location not previously associated with a post.

On Tue, Aug 24, 2010 at 11:25 AM, John Blackbourn
<johnbillion+wp at gmail.com<johnbillion%2Bwp at gmail.com>
> wrote:

> On Tue, Aug 24, 2010 at 7:10 PM, Thomas Belknap
> <dragonfly at dragonflyeye.net> wrote:
> > It might be worth it to specify that
> > quotation marks can also define tag boundaries. That way, something
> within
> > quotation marks does not have any internal characters read as delimiters.
>
> This makes a lot of sense and is an elegant approach. Flickr, for
> example, uses spaces as its tag delimiters and lets you use "quotes
> around multiple words" in order to allow tags with spaces in them. We
> could do just the same to allow tags with commas in them.
>  _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From angelia at 10sexyapples.com  Wed Aug 25 01:59:12 2010
From: angelia at 10sexyapples.com (Angelia Baladon)
Date: Tue, 24 Aug 2010 18:59:12 -0700
Subject: [wp-hackers] Query Bookmarks/Links with Custom Taxonomy that
 matches same Custom Taxonomy assigned to a Custom Post Type in single.php
 sidebar
Message-ID: <AANLkTikL4RCxFO=LzqVRUZEY6knMu7Kgb9rz6=ZT3ccq@mail.gmail.com>

Wow. That was a mouthful. Let me explain ...

I have some custom post types ? "lessons", "howtos", "workshops"

I have several custom taxonomies ie "Unit Topic", "Academic Subject", "Art
Subject" etc.

I have assigned these custom taxonomies to all of my custom post types
*and*to built_in post_type "link".

In the sidebar of my single lesson/howto/workshop, I have customized some
code to show related content by comparing the number of these custom
taxonomies that are common ( basically it's a beefed up version of a
"related post" plugin ). So, for instance, in the single "lesson" post, the
sidebar contains related "howtos", and "workshops".

What I am attempting to do now is to further customize the relation code, to
include a list of related "links" there in the sidebar as well.

Herein lies the rub. I've never dealt with links before. I mostly do CMS
stuff, and not one site has even needed to touch links, so, I'm a complete
virgin with them. As well, they are in a different table ... add on top of
that the still shakiness of the association between links and custom
taxonomies and ... well ... heeeeeeelllllllp

Does anyone have any advice that will help me out here? I feel all
vulnerable and alone ;-)

From jason at blueluna.com  Wed Aug 25 03:55:07 2010
From: jason at blueluna.com (Jason LeVan)
Date: Tue, 24 Aug 2010 23:55:07 -0400
Subject: [wp-hackers] Change Tag Delimiter from a comma to a semicolon
In-Reply-To: <AANLkTi=DPciUE94JMpn4ga14cc3oEAUcPja1suPdmoWn@mail.gmail.com>
References: <AANLkTimqoOXTMs1bBGKB-Go5VorK1uH77Ne_uJ5McO4Z@mail.gmail.com>
	<AANLkTikGDvh28=yxratzDE103yBL1xpiGhqjSG=VPuvd@mail.gmail.com>
	<AANLkTinw=75W2ot__5DLq3g0Gy7v=v1wbGbxCGfNc2N5@mail.gmail.com>
	<AANLkTin1bvBD83wx9xESfCvB57Ji6jVEPOv15=fooiKb@mail.gmail.com>
	<AANLkTi=gQ2ni9ZCOy4OxoYwBM7nWQyeNGozdOjwM5Fys@mail.gmail.com>
	<AANLkTik9fCSSyMEip5vYAGCRFe3=oeBax4Y4GRMa84ru@mail.gmail.com>
	<AANLkTikH1sYVrZL6U47PEotGYd5HVNUWLOpbynzeisjp@mail.gmail.com>
	<AANLkTi=DPciUE94JMpn4ga14cc3oEAUcPja1suPdmoWn@mail.gmail.com>
Message-ID: <AANLkTin60sBqLqYah4=m6YskHmk8z4XcqdMLZEdvYgmC@mail.gmail.com>

Ryan, from the sound of it, you may be better off simply using the city and
state as separate tags. Using the "City, ST" in the search box will still
pull the results. However, this would also add the ability for a user to
search by the state alone, retrieving all California posts, or just those
from a particular city. I think a bigger concern would be users who try
searching something like "Los Angeles, California" or something like
"District of Columbia".

That said, I'll put another vote towards the use of quotes to create a
delimiter free string. This would cause some issues for users who have
quotes as part of the tag name though.

On Tue, Aug 24, 2010 at 9:24 PM, Ryan Bilesky <rbilesky at gmail.com> wrote:

> I am using tags to record locations like "Los Angeles, CA"  which while its
> true I could just put Los Angeles, when you get to a city like Portland it
> gets more complicated if you don't include the state.  And I want to
> include
> the comma because first thts how cities and states are generally typed so
> if
> I can use a comma i don't have to remeber to not include that, and secondly
> I will be allowing users of my site to search for a tag (location) of their
> choice, and I can virtually guarantee they will include a comma in the
> query.
>
> The reason I am not using Categories is two things: first I already have
> planned to use them for a diffrent type of categorization.  Secondly tags
> are easier to creat on the fly if a post is going to be associated with a
> new location not previously associated with a post.
>
> On Tue, Aug 24, 2010 at 11:25 AM, John Blackbourn
> <johnbillion+wp at gmail.com <johnbillion%2Bwp at gmail.com><
> johnbillion%2Bwp at gmail.com <johnbillion%252Bwp at gmail.com>>
> > wrote:
>
> > On Tue, Aug 24, 2010 at 7:10 PM, Thomas Belknap
> > <dragonfly at dragonflyeye.net> wrote:
> > > It might be worth it to specify that
> > > quotation marks can also define tag boundaries. That way, something
> > within
> > > quotation marks does not have any internal characters read as
> delimiters.
> >
> > This makes a lot of sense and is an elegant approach. Flickr, for
> > example, uses spaces as its tag delimiters and lets you use "quotes
> > around multiple words" in order to allow tags with spaces in them. We
> > could do just the same to allow tags with commas in them.
> >  _______________________________________________
> > wp-hackers mailing list
> > wp-hackers at lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> >
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From otto at ottodestruct.com  Wed Aug 25 04:42:26 2010
From: otto at ottodestruct.com (Otto)
Date: Tue, 24 Aug 2010 23:42:26 -0500
Subject: [wp-hackers] Code reviews for plugins?
In-Reply-To: <AANLkTin=V+Eqf4a1Fe1W=cMzKLiKmyNBjyzzmGNYocXr@mail.gmail.com>
References: <4C71936D.6070600@wptavern.com>
	<4C71E62F.80307@simplercomputing.net>
	<AANLkTik7vFjksLOnt+MgLDW5X_+AX1y-SS7c5u671Np5@mail.gmail.com>
	<4C71EFC3.1080806@simplercomputing.net>
	<4C72357E.30102@thedextrousweb.com>
	<F4536CE0-9D75-4B1C-9AF2-A21A99BC7328@newclarity.net>
	<AANLkTikzE5Rz=ZFWUG5utVeJ19Lzmt6+pPWqeWTwpjP7@mail.gmail.com>
	<6C8A06CA-EB9D-43AF-9AF4-59A691E73E90@newclarity.net>
	<AANLkTin=V+Eqf4a1Fe1W=cMzKLiKmyNBjyzzmGNYocXr@mail.gmail.com>
Message-ID: <AANLkTim6_4pmDwaepDpWuZL_KWX=Nv+uSKsWXX9449Op@mail.gmail.com>

I'd like everybody discussing this to keep in mind that there is a
very large difference between "review" and "approval".

I, for one, do not want any sort of "approval" process for plugins.
I'm unhappy with the theme approval process as it currently stands,
because I think it's horribly broken.

Reviews are fine. User reviews would be excellent. But I just want to
be clear that we don't want to be putting anybody in the position to
deny plugins from being listed for not following some arbitrary set of
guidelines. That defeats the whole purpose of a code review, which is
to help the developer to learn better ways and to improve their code.

When you start denying listings because of not following some set of
practices, then you're creating a walled garden of content, which is
one reason I do not like the iTunes App Store and jailbroke my iPhone
within 3 days of getting it. I don't think the WordPress community
should try to emulate Apple in this case.

-Otto

From jayarjo at gmail.com  Wed Aug 25 04:55:56 2010
From: jayarjo at gmail.com (Davit Barbakadze)
Date: Wed, 25 Aug 2010 08:55:56 +0400
Subject: [wp-hackers] any way to add/override bulk actions for post (custom
	post) edit screen?
Message-ID: <AANLkTi==UoshjHFbUnFucM9SScf3hjfg4AAHwW4=0yqP@mail.gmail.com>

Trying to use custom post type functionality at full scale. I've got
some different actions to edit to the bulk edit drop down select box.
Reading the source I do not exactly see if that's possible. Is it?

-- 
Davit Barbakadze

From wp at andrewnacin.com  Wed Aug 25 05:18:57 2010
From: wp at andrewnacin.com (Andrew Nacin)
Date: Wed, 25 Aug 2010 01:18:57 -0400
Subject: [wp-hackers] any way to add/override bulk actions for post
 (custom post) edit screen?
In-Reply-To: <AANLkTi==UoshjHFbUnFucM9SScf3hjfg4AAHwW4=0yqP@mail.gmail.com>
References: <AANLkTi==UoshjHFbUnFucM9SScf3hjfg4AAHwW4=0yqP@mail.gmail.com>
Message-ID: <AANLkTinf0ccYOaH7SgRYi02VRdgahv1utFR9WouqOCmF@mail.gmail.com>

On Wed, Aug 25, 2010 at 12:55 AM, Davit Barbakadze <jayarjo at gmail.com>wrote:

> Trying to use custom post type functionality at full scale. I've got
> some different actions to edit to the bulk edit drop down select box.
> Reading the source I do not exactly see if that's possible. Is it?


In 3.0, doable via JavaScript. In 3.1, there will be an API.

From jayarjo at gmail.com  Wed Aug 25 05:45:39 2010
From: jayarjo at gmail.com (Davit Barbakadze)
Date: Wed, 25 Aug 2010 09:45:39 +0400
Subject: [wp-hackers] any way to add/override bulk actions for post
 (custom post) edit screen?
In-Reply-To: <AANLkTinf0ccYOaH7SgRYi02VRdgahv1utFR9WouqOCmF@mail.gmail.com>
References: <AANLkTi==UoshjHFbUnFucM9SScf3hjfg4AAHwW4=0yqP@mail.gmail.com>
	<AANLkTinf0ccYOaH7SgRYi02VRdgahv1utFR9WouqOCmF@mail.gmail.com>
Message-ID: <AANLkTindJegwjsH3m5e_gB8M9cr+VpL_ZJQwOnmfU2WO@mail.gmail.com>

And then on admin side probably intercept form submission before it
enters the bulk actions switch?

On Wed, Aug 25, 2010 at 9:18 AM, Andrew Nacin <wp at andrewnacin.com> wrote:
> On Wed, Aug 25, 2010 at 12:55 AM, Davit Barbakadze <jayarjo at gmail.com>wrote:
>
>> Trying to use custom post type functionality at full scale. I've got
>> some different actions to edit to the bulk edit drop down select box.
>> Reading the source I do not exactly see if that's possible. Is it?
>
>
> In 3.0, doable via JavaScript. In 3.1, there will be an API.
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>



-- 
Davit Barbakadze

From wp at andrewnacin.com  Wed Aug 25 06:11:51 2010
From: wp at andrewnacin.com (Andrew Nacin)
Date: Wed, 25 Aug 2010 02:11:51 -0400
Subject: [wp-hackers] any way to add/override bulk actions for post
 (custom post) edit screen?
In-Reply-To: <AANLkTindJegwjsH3m5e_gB8M9cr+VpL_ZJQwOnmfU2WO@mail.gmail.com>
References: <AANLkTi==UoshjHFbUnFucM9SScf3hjfg4AAHwW4=0yqP@mail.gmail.com>
	<AANLkTinf0ccYOaH7SgRYi02VRdgahv1utFR9WouqOCmF@mail.gmail.com>
	<AANLkTindJegwjsH3m5e_gB8M9cr+VpL_ZJQwOnmfU2WO@mail.gmail.com>
Message-ID: <AANLkTim8a5wvgn-rPp2ro-55JfC=95_UNo-TVOfBGSRM@mail.gmail.com>

On Wed, Aug 25, 2010 at 1:45 AM, Davit Barbakadze <jayarjo at gmail.com> wrote:

> And then on admin side probably intercept form submission before it
> enters the bulk actions switch?


Correct, though there will probably be some actions added in 3.1.

From jayarjo at gmail.com  Wed Aug 25 07:01:13 2010
From: jayarjo at gmail.com (Davit Barbakadze)
Date: Wed, 25 Aug 2010 11:01:13 +0400
Subject: [wp-hackers] can one redefine and move UI for custom post types?
In-Reply-To: <AANLkTi=Q_5ddfwznQj2JxMbVJAn_844WBM08vHE_4HEv@mail.gmail.com>
References: <AANLkTiktyoubR0q+xUvZqb_1OegrwcXr-rZKC-O9Uccd@mail.gmail.com>
	<AANLkTi=Q_5ddfwznQj2JxMbVJAn_844WBM08vHE_4HEv@mail.gmail.com>
Message-ID: <AANLkTi=b80YWN1EEqpEJ2FHn5+9aMnpoCD+7_AJ0CnTY@mail.gmail.com>

Yeah, that's the only way I see at the moment.

On Sun, Aug 22, 2010 at 5:42 AM, Lox <lox.dev at knc.nc> wrote:
> ?)
>
> 2010/8/20 Davit Barbakadze <jayarjo at gmail.com>
>>
>> My problem is that I need to create couple of custom post types, which
>> are kinda related and I want to group them under single top level
>> menu. With the information I got at the moment, I can't see how I can
>> achieve this, without manually messing with the menu array. Is there
>> any other way?
>
> Hi,
>
> I have the same problem and still haven't figured out how to do it ....
>
> Maybe deleting the menu using a admin_head hook (http://goo.gl/YaDY)
> and then rebuilding the links to them in a submenu using
> add_submenu_page
> (http://codex.wordpress.org/Adding_Administration_Menus).
> It should be possible this way but it wasn't a hurry enough for me to
> dig further.
>
> Regards
>
> --
> Lox
> lox.dev at knc.nc
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>



-- 
Davit Barbakadze

From rbilesky at gmail.com  Wed Aug 25 07:15:37 2010
From: rbilesky at gmail.com (Ryan Bilesky)
Date: Wed, 25 Aug 2010 00:15:37 -0700
Subject: [wp-hackers] Change Tag Delimiter from a comma to a semicolon
In-Reply-To: <AANLkTin60sBqLqYah4=m6YskHmk8z4XcqdMLZEdvYgmC@mail.gmail.com>
References: <AANLkTimqoOXTMs1bBGKB-Go5VorK1uH77Ne_uJ5McO4Z@mail.gmail.com>
	<AANLkTikGDvh28=yxratzDE103yBL1xpiGhqjSG=VPuvd@mail.gmail.com>
	<AANLkTinw=75W2ot__5DLq3g0Gy7v=v1wbGbxCGfNc2N5@mail.gmail.com>
	<AANLkTin1bvBD83wx9xESfCvB57Ji6jVEPOv15=fooiKb@mail.gmail.com>
	<AANLkTi=gQ2ni9ZCOy4OxoYwBM7nWQyeNGozdOjwM5Fys@mail.gmail.com>
	<AANLkTik9fCSSyMEip5vYAGCRFe3=oeBax4Y4GRMa84ru@mail.gmail.com>
	<AANLkTikH1sYVrZL6U47PEotGYd5HVNUWLOpbynzeisjp@mail.gmail.com>
	<AANLkTi=DPciUE94JMpn4ga14cc3oEAUcPja1suPdmoWn@mail.gmail.com>
	<AANLkTin60sBqLqYah4=m6YskHmk8z4XcqdMLZEdvYgmC@mail.gmail.com>
Message-ID: <AANLkTi=3FF4HOd55wvSjFsQUF9c8rs5e0vp2J9vFmO3W@mail.gmail.com>

That may not be a bad idea, my only concern is that if a user can just
search Portland (no state) they are getting results for Portland Oregon and
Portland Maine for example.  Not a desired effect so I would at the very
least need to prevent that.  But I think I could catch that using a filter
on their search term before executing the search, and this filter could
probably also identify if they are for example spelling out the state name,
and change it to the abbreviation.
On Tue, Aug 24, 2010 at 8:55 PM, Jason LeVan <jason at blueluna.com> wrote:

> Ryan, from the sound of it, you may be better off simply using the city and
> state as separate tags. Using the "City, ST" in the search box will still
> pull the results. However, this would also add the ability for a user to
> search by the state alone, retrieving all California posts, or just those
> from a particular city. I think a bigger concern would be users who try
> searching something like "Los Angeles, California" or something like
> "District of Columbia".
>
> That said, I'll put another vote towards the use of quotes to create a
> delimiter free string. This would cause some issues for users who have
> quotes as part of the tag name though.
>
> On Tue, Aug 24, 2010 at 9:24 PM, Ryan Bilesky <rbilesky at gmail.com> wrote:
>
> > I am using tags to record locations like "Los Angeles, CA"  which while
> its
> > true I could just put Los Angeles, when you get to a city like Portland
> it
> > gets more complicated if you don't include the state.  And I want to
> > include
> > the comma because first thts how cities and states are generally typed so
> > if
> > I can use a comma i don't have to remeber to not include that, and
> secondly
> > I will be allowing users of my site to search for a tag (location) of
> their
> > choice, and I can virtually guarantee they will include a comma in the
> > query.
> >
> > The reason I am not using Categories is two things: first I already have
> > planned to use them for a diffrent type of categorization.  Secondly tags
> > are easier to creat on the fly if a post is going to be associated with a
> > new location not previously associated with a post.
> >
> > On Tue, Aug 24, 2010 at 11:25 AM, John Blackbourn
> > <johnbillion+wp at gmail.com <johnbillion%2Bwp at gmail.com> <
> johnbillion%2Bwp at gmail.com <johnbillion%252Bwp at gmail.com>><
> > johnbillion%2Bwp at gmail.com <johnbillion%252Bwp at gmail.com> <
> johnbillion%252Bwp at gmail.com <johnbillion%25252Bwp at gmail.com>>>
>  > > wrote:
> >
> > > On Tue, Aug 24, 2010 at 7:10 PM, Thomas Belknap
> > > <dragonfly at dragonflyeye.net> wrote:
> > > > It might be worth it to specify that
> > > > quotation marks can also define tag boundaries. That way, something
> > > within
> > > > quotation marks does not have any internal characters read as
> > delimiters.
> > >
> > > This makes a lot of sense and is an elegant approach. Flickr, for
> > > example, uses spaces as its tag delimiters and lets you use "quotes
> > > around multiple words" in order to allow tags with spaces in them. We
> > > could do just the same to allow tags with commas in them.
> > >  _______________________________________________
> > > wp-hackers mailing list
> > > wp-hackers at lists.automattic.com
> > > http://lists.automattic.com/mailman/listinfo/wp-hackers
> > >
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers at lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> >
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From elfin at elfden.co.uk  Wed Aug 25 07:21:46 2010
From: elfin at elfden.co.uk (Rich Pedley)
Date: Wed, 25 Aug 2010 08:21:46 +0100
Subject: [wp-hackers] Code reviews for plugins?
In-Reply-To: <AANLkTim6_4pmDwaepDpWuZL_KWX=Nv+uSKsWXX9449Op@mail.gmail.com>
References: <4C71936D.6070600@wptavern.com>	<4C71E62F.80307@simplercomputing.net>	<AANLkTik7vFjksLOnt+MgLDW5X_+AX1y-SS7c5u671Np5@mail.gmail.com>	<4C71EFC3.1080806@simplercomputing.net>	<4C72357E.30102@thedextrousweb.com>	<F4536CE0-9D75-4B1C-9AF2-A21A99BC7328@newclarity.net>	<AANLkTikzE5Rz=ZFWUG5utVeJ19Lzmt6+pPWqeWTwpjP7@mail.gmail.com>	<6C8A06CA-EB9D-43AF-9AF4-59A691E73E90@newclarity.net>	<AANLkTin=V+Eqf4a1Fe1W=cMzKLiKmyNBjyzzmGNYocXr@mail.gmail.com>
	<AANLkTim6_4pmDwaepDpWuZL_KWX=Nv+uSKsWXX9449Op@mail.gmail.com>
Message-ID: <4C74C48A.6040404@elfden.co.uk>

On 25/08/2010 05:42, Otto wrote:
> I'd like everybody discussing this to keep in mind that there is a
> very large difference between "review" and "approval".

in which case the user reviews that appear on the plugin page would be 
better?

> I, for one, do not want any sort of "approval" process for plugins.
> I'm unhappy with the theme approval process as it currently stands,
> because I think it's horribly broken.

I wholeheartedly agree.

> Reviews are fine. User reviews would be excellent. But I just want to
> be clear that we don't want to be putting anybody in the position to
> deny plugins from being listed for not following some arbitrary set of
> guidelines. That defeats the whole purpose of a code review, which is
> to help the developer to learn better ways and to improve their code.
>
> When you start denying listings because of not following some set of
> practices, then you're creating a walled garden of content, which is
> one reason I do not like the iTunes App Store and jailbroke my iPhone
> within 3 days of getting it. I don't think the WordPress community
> should try to emulate Apple in this case.

you mean like the themes currently are? (sorry that may be seen as 
slightly offensive to the theme review team, it's aimed at the process 
rather than the reviewers).

Rich

From philip at frumph.net  Wed Aug 25 07:28:10 2010
From: philip at frumph.net (Philip M. Hofer (Frumph))
Date: Wed, 25 Aug 2010 00:28:10 -0700
Subject: [wp-hackers] Code reviews for plugins?
In-Reply-To: <4C74C48A.6040404@elfden.co.uk>
References: <4C71936D.6070600@wptavern.com>	<4C71E62F.80307@simplercomputing.net>	<AANLkTik7vFjksLOnt+MgLDW5X_+AX1y-SS7c5u671Np5@mail.gmail.com>	<4C71EFC3.1080806@simplercomputing.net>	<4C72357E.30102@thedextrousweb.com>	<F4536CE0-9D75-4B1C-9AF2-A21A99BC7328@newclarity.net>	<AANLkTikzE5Rz=ZFWUG5utVeJ19Lzmt6+pPWqeWTwpjP7@mail.gmail.com>	<6C8A06CA-EB9D-43AF-9AF4-59A691E73E90@newclarity.net>	<AANLkTin=V+Eqf4a1Fe1W=cMzKLiKmyNBjyzzmGNYocXr@mail.gmail.com><AANLkTim6_4pmDwaepDpWuZL_KWX=Nv+uSKsWXX9449Op@mail.gmail.com>
	<4C74C48A.6040404@elfden.co.uk>
Message-ID: <041E09EC50674D25A8D973EBAB38C5B9@frumph.net>

I would like to see the 'works' 'doesn't work' that is implemented on each 
plugin page to be scanned through and if a certain amount of doesn't work is 
found then it can be recommended for removal.

I would rather this be looked at further then any time-lines or version 
releases of wordpress used as a basis.

- Phil

----- Original Message ----- 
From: "Rich Pedley" <elfin at elfden.co.uk>
To: <wp-hackers at lists.automattic.com>
Sent: Wednesday, August 25, 2010 12:21 AM
Subject: Re: [wp-hackers] Code reviews for plugins?


> On 25/08/2010 05:42, Otto wrote:
>> I'd like everybody discussing this to keep in mind that there is a
>> very large difference between "review" and "approval".
>
> in which case the user reviews that appear on the plugin page would be 
> better?
>
>> I, for one, do not want any sort of "approval" process for plugins.
>> I'm unhappy with the theme approval process as it currently stands,
>> because I think it's horribly broken.
>
> I wholeheartedly agree.
>
>> Reviews are fine. User reviews would be excellent. But I just want to
>> be clear that we don't want to be putting anybody in the position to
>> deny plugins from being listed for not following some arbitrary set of
>> guidelines. That defeats the whole purpose of a code review, which is
>> to help the developer to learn better ways and to improve their code.
>>
>> When you start denying listings because of not following some set of
>> practices, then you're creating a walled garden of content, which is
>> one reason I do not like the iTunes App Store and jailbroke my iPhone
>> within 3 days of getting it. I don't think the WordPress community
>> should try to emulate Apple in this case.
>
> you mean like the themes currently are? (sorry that may be seen as 
> slightly offensive to the theme review team, it's aimed at the process 
> rather than the reviewers).
>
> Rich
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
> 



From banago at gmail.com  Wed Aug 25 09:19:09 2010
From: banago at gmail.com (Baki Goxhaj)
Date: Wed, 25 Aug 2010 11:19:09 +0200
Subject: [wp-hackers] Comment Replay Link
Message-ID: <AANLkTi=3-0JeQB_kPM5-DYsXpsDpAvRUuFCQ3FBaDj1E@mail.gmail.com>

I've got this functions where I cannot change the word "Reply" with another
word:

<?php comment_reply_link( array_merge( $args, array( 'depth' => $depth,
'max_depth' => $args['max_depth'] ) ) ); ?>

I looked at the codex, but there was nothing there. Is there any way to add
a custom word to this functions, in stead of the default "Reply"?

Kindly,

Baki Goxhaj
www.wplancer.com | www.banago.info | www.lintuts.com

From otto at ottodestruct.com  Wed Aug 25 09:25:26 2010
From: otto at ottodestruct.com (Otto)
Date: Wed, 25 Aug 2010 04:25:26 -0500
Subject: [wp-hackers] Comment Replay Link
In-Reply-To: <AANLkTi=3-0JeQB_kPM5-DYsXpsDpAvRUuFCQ3FBaDj1E@mail.gmail.com>
References: <AANLkTi=3-0JeQB_kPM5-DYsXpsDpAvRUuFCQ3FBaDj1E@mail.gmail.com>
Message-ID: <AANLkTindecZ8C8wdTKcnU96+0BWrd3tLXGE3EYPwS5kL@mail.gmail.com>

Use the reply_text argument.

And you should be passing that argument to the wp_list_comments
function. See that $args there? That should be the args coming into
the wp_list_comments function. There's no really good reason to call
comment_reply_link directly from the theme.

-Otto



On Wed, Aug 25, 2010 at 4:19 AM, Baki Goxhaj <banago at gmail.com> wrote:
> I've got this functions where I cannot change the word "Reply" with another
> word:
>
> <?php comment_reply_link( array_merge( $args, array( 'depth' => $depth,
> 'max_depth' => $args['max_depth'] ) ) ); ?>
>
> I looked at the codex, but there was nothing there. Is there any way to add
> a custom word to this functions, in stead of the default "Reply"?
>
> Kindly,
>
> Baki Goxhaj
> www.wplancer.com | www.banago.info | www.lintuts.com
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From banago at gmail.com  Wed Aug 25 09:28:01 2010
From: banago at gmail.com (Baki Goxhaj)
Date: Wed, 25 Aug 2010 11:28:01 +0200
Subject: [wp-hackers] Comment Replay Link
In-Reply-To: <AANLkTindecZ8C8wdTKcnU96+0BWrd3tLXGE3EYPwS5kL@mail.gmail.com>
References: <AANLkTi=3-0JeQB_kPM5-DYsXpsDpAvRUuFCQ3FBaDj1E@mail.gmail.com>
	<AANLkTindecZ8C8wdTKcnU96+0BWrd3tLXGE3EYPwS5kL@mail.gmail.com>
Message-ID: <AANLkTimBYXZKUosp1=FowxG_xq6hKFrJJzidC2Qwsvii@mail.gmail.com>

I'm using the Twenty Ten comments template and the function was used on
theme functions, but let my try your solution.

Kindly,

Baki Goxhaj
www.wplancer.com | www.banago.info | www.lintuts.com


On 25 August 2010 11:25, Otto <otto at ottodestruct.com> wrote:

> Use the reply_text argument.
>
> And you should be passing that argument to the wp_list_comments
> function. See that $args there? That should be the args coming into
> the wp_list_comments function. There's no really good reason to call
> comment_reply_link directly from the theme.
>
> -Otto
>
>
>
> On Wed, Aug 25, 2010 at 4:19 AM, Baki Goxhaj <banago at gmail.com> wrote:
> > I've got this functions where I cannot change the word "Reply" with
> another
> > word:
> >
> > <?php comment_reply_link( array_merge( $args, array( 'depth' => $depth,
> > 'max_depth' => $args['max_depth'] ) ) ); ?>
> >
> > I looked at the codex, but there was nothing there. Is there any way to
> add
> > a custom word to this functions, in stead of the default "Reply"?
> >
> > Kindly,
> >
> > Baki Goxhaj
> > www.wplancer.com | www.banago.info | www.lintuts.com
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers at lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> >
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From banago at gmail.com  Wed Aug 25 09:29:05 2010
From: banago at gmail.com (Baki Goxhaj)
Date: Wed, 25 Aug 2010 11:29:05 +0200
Subject: [wp-hackers] Comment Replay Link
In-Reply-To: <AANLkTimBYXZKUosp1=FowxG_xq6hKFrJJzidC2Qwsvii@mail.gmail.com>
References: <AANLkTi=3-0JeQB_kPM5-DYsXpsDpAvRUuFCQ3FBaDj1E@mail.gmail.com>
	<AANLkTindecZ8C8wdTKcnU96+0BWrd3tLXGE3EYPwS5kL@mail.gmail.com>
	<AANLkTimBYXZKUosp1=FowxG_xq6hKFrJJzidC2Qwsvii@mail.gmail.com>
Message-ID: <AANLkTikmsydc10aR4pNqVD_QEeZVRoLN9j8xhqJk8LzK@mail.gmail.com>

It worked - thanks Otto,

Kindly,

Baki Goxhaj
www.wplancer.com | www.banago.info | www.lintuts.com


On 25 August 2010 11:28, Baki Goxhaj <banago at gmail.com> wrote:

> I'm using the Twenty Ten comments template and the function was used on
> theme functions, but let my try your solution.
>
>
> Kindly,
>
> Baki Goxhaj
> www.wplancer.com | www.banago.info | www.lintuts.com
>
>
> On 25 August 2010 11:25, Otto <otto at ottodestruct.com> wrote:
>
>> Use the reply_text argument.
>>
>> And you should be passing that argument to the wp_list_comments
>> function. See that $args there? That should be the args coming into
>> the wp_list_comments function. There's no really good reason to call
>> comment_reply_link directly from the theme.
>>
>> -Otto
>>
>>
>>
>> On Wed, Aug 25, 2010 at 4:19 AM, Baki Goxhaj <banago at gmail.com> wrote:
>> > I've got this functions where I cannot change the word "Reply" with
>> another
>> > word:
>> >
>> > <?php comment_reply_link( array_merge( $args, array( 'depth' => $depth,
>> > 'max_depth' => $args['max_depth'] ) ) ); ?>
>> >
>> > I looked at the codex, but there was nothing there. Is there any way to
>> add
>> > a custom word to this functions, in stead of the default "Reply"?
>> >
>> > Kindly,
>> >
>> > Baki Goxhaj
>> > www.wplancer.com | www.banago.info | www.lintuts.com
>> > _______________________________________________
>> > wp-hackers mailing list
>> > wp-hackers at lists.automattic.com
>> > http://lists.automattic.com/mailman/listinfo/wp-hackers
>> >
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
>
>

From elfin at elfden.co.uk  Wed Aug 25 09:30:07 2010
From: elfin at elfden.co.uk (Rich Pedley)
Date: Wed, 25 Aug 2010 10:30:07 +0100
Subject: [wp-hackers] Code reviews for plugins?
In-Reply-To: <041E09EC50674D25A8D973EBAB38C5B9@frumph.net>
References: <4C71936D.6070600@wptavern.com>	<4C71E62F.80307@simplercomputing.net>	<AANLkTik7vFjksLOnt+MgLDW5X_+AX1y-SS7c5u671Np5@mail.gmail.com>	<4C71EFC3.1080806@simplercomputing.net>	<4C72357E.30102@thedextrousweb.com>	<F4536CE0-9D75-4B1C-9AF2-A21A99BC7328@newclarity.net>	<AANLkTikzE5Rz=ZFWUG5utVeJ19Lzmt6+pPWqeWTwpjP7@mail.gmail.com>	<6C8A06CA-EB9D-43AF-9AF4-59A691E73E90@newclarity.net>	<AANLkTin=V+Eqf4a1Fe1W=cMzKLiKmyNBjyzzmGNYocXr@mail.gmail.com><AANLkTim6_4pmDwaepDpWuZL_KWX=Nv+uSKsWXX9449Op@mail.gmail.com>	<4C74C48A.6040404@elfden.co.uk>
	<041E09EC50674D25A8D973EBAB38C5B9@frumph.net>
Message-ID: <4C74E29F.6040101@elfden.co.uk>

On 25/08/2010 08:28, Philip M. Hofer (Frumph) wrote:
> I would like to see the 'works' 'doesn't work' that is implemented on each
> plugin page to be scanned through and if a certain amount of doesn't work is
> found then it can be recommended for removal.

> I would rather this be looked at further then any time-lines or version
> releases of wordpress used as a basis.

I wouldn't, and I doubt any plugin developer would either. That system 
is flawed.

Rich

From otto at ottodestruct.com  Wed Aug 25 09:31:19 2010
From: otto at ottodestruct.com (Otto)
Date: Wed, 25 Aug 2010 04:31:19 -0500
Subject: [wp-hackers] hooks for multisite: add blog, remove blog,
	change blog
In-Reply-To: <4C738D8F.2050406@gmail.com>
References: <4C738D8F.2050406@gmail.com>
Message-ID: <AANLkTi=V3iT2v=Ss7EOPBZdcwZFOEmkSE4T0o_M9VHUB@mail.gmail.com>

wpmu_new_blog
delete_blog

Can't find one for a status change...

-Otto



On Tue, Aug 24, 2010 at 4:14 AM, Bjorn Wijers <burobjorn at gmail.com> wrote:
> Hi,
>
> I'm looking for the hooks to use when a blog has been added, removed or
> changed status (ie: public vs mature etc). So far I haven't been able to
> find these. Can somebody help me out with pointing me in the right
> direction?
>
> Thanks in advance!
>
> --
>
> met vriendelijke groet,
> Bjorn Wijers
>
> * b u r o b j o r n .nl *
> digitaal vakmanschap | digital craftsmanship
>
> Werkdagen:
> Van maandag t/m donderdag vanaf 10:00
> Vrijdag is voor experimenteren en eigen projecten.
>
> Concordiastraat 68-126
> 3551 EM Utrecht
> The Netherlands
>
> tel: +31 6 49 74 78 70
> http://www.burobjorn.nl
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From banago at gmail.com  Wed Aug 25 09:33:20 2010
From: banago at gmail.com (Baki Goxhaj)
Date: Wed, 25 Aug 2010 11:33:20 +0200
Subject: [wp-hackers] How to remove URL field in Comments Form
Message-ID: <AANLkTimJEdgEWEOLcpkORWj13Ai_yqLyQbQwMALW4KtG@mail.gmail.com>

I want to get rid of the url field in my comments form - how can I achieve
that? Thanks!

Kindly,

Baki Goxhaj
www.wplancer.com | www.banago.info | www.lintuts.com

From mda at blogwaffe.com  Wed Aug 25 09:58:22 2010
From: mda at blogwaffe.com (Michael D Adams)
Date: Wed, 25 Aug 2010 02:58:22 -0700
Subject: [wp-hackers] Change Tag Delimiter from a comma to a semicolon
In-Reply-To: <AANLkTik9fCSSyMEip5vYAGCRFe3=oeBax4Y4GRMa84ru@mail.gmail.com>
References: <AANLkTimqoOXTMs1bBGKB-Go5VorK1uH77Ne_uJ5McO4Z@mail.gmail.com>
	<AANLkTikGDvh28=yxratzDE103yBL1xpiGhqjSG=VPuvd@mail.gmail.com>
	<AANLkTinw=75W2ot__5DLq3g0Gy7v=v1wbGbxCGfNc2N5@mail.gmail.com>
	<AANLkTin1bvBD83wx9xESfCvB57Ji6jVEPOv15=fooiKb@mail.gmail.com>
	<AANLkTi=gQ2ni9ZCOy4OxoYwBM7nWQyeNGozdOjwM5Fys@mail.gmail.com>
	<AANLkTik9fCSSyMEip5vYAGCRFe3=oeBax4Y4GRMa84ru@mail.gmail.com>
Message-ID: <AANLkTinM1ZXOuvigatR6Xq8mDCNnb3fhb3MufwzabaBt@mail.gmail.com>

On Tue, Aug 24, 2010 at 11:10 AM, Thomas Belknap
<dragonfly at dragonflyeye.net> wrote:
> There are certainly plenty of situations where the comma would be helpful to
> have back as a non-defining character. It might be worth it to specify that
> quotation marks can also define tag boundaries. That way, something within
> quotation marks does not have any internal characters read as delimiters.

Patch to treat tag inputs as "real" CSV strings.

http://core.trac.wordpress.org/ticket/14691

So you could type:

foo, bar, "baz, qux"

and have the following tags added to your post.
foo
bar
baz, qux

I don't really care much about the issue though :)  If you do and like
the idea, pimp the ticket.  If you do but don't like the idea, suggest
something else :)

Mike
--mdawaffe

From mda at blogwaffe.com  Wed Aug 25 10:06:53 2010
From: mda at blogwaffe.com (Michael D Adams)
Date: Wed, 25 Aug 2010 03:06:53 -0700
Subject: [wp-hackers] hooks for multisite: add blog, remove blog,
	change blog
In-Reply-To: <AANLkTi=V3iT2v=Ss7EOPBZdcwZFOEmkSE4T0o_M9VHUB@mail.gmail.com>
References: <4C738D8F.2050406@gmail.com>
	<AANLkTi=V3iT2v=Ss7EOPBZdcwZFOEmkSE4T0o_M9VHUB@mail.gmail.com>
Message-ID: <AANLkTikE8oatOxxiQBkB3_gMzD1RuXzdOJWyTm5RM2eC@mail.gmail.com>

On Wed, Aug 25, 2010 at 2:31 AM, Otto <otto at ottodestruct.com> wrote:
> wpmu_new_blog
> delete_blog
>
> Can't find one for a status change...

update_blog_public will sometimes get called (but sometimes not)
make_spam_blog and make_ham_blog get called for spam/ham

Otherwise, I don't think there are any hooks.  I suggest opening a ticket.

Mike
--mdawaffe

From eric at eamann.com  Wed Aug 25 14:23:54 2010
From: eric at eamann.com (Eric Mann)
Date: Wed, 25 Aug 2010 07:23:54 -0700 (PDT)
Subject: [wp-hackers] Code reviews for plugins?
In-Reply-To: <AANLkTim6_4pmDwaepDpWuZL_KWX=Nv+uSKsWXX9449Op@mail.gmail.com>
References: <4C71936D.6070600@wptavern.com>
	<4C71E62F.80307@simplercomputing.net>
	<AANLkTik7vFjksLOnt+MgLDW5X_+AX1y-SS7c5u671Np5@mail.gmail.com>
	<4C71EFC3.1080806@simplercomputing.net>
	<4C72357E.30102@thedextrousweb.com>
	<F4536CE0-9D75-4B1C-9AF2-A21A99BC7328@newclarity.net>
	<AANLkTikzE5Rz=ZFWUG5utVeJ19Lzmt6+pPWqeWTwpjP7@mail.gmail.com>
	<6C8A06CA-EB9D-43AF-9AF4-59A691E73E90@newclarity.net>
	<AANLkTin=V+Eqf4a1Fe1W=cMzKLiKmyNBjyzzmGNYocXr@mail.gmail.com>
	<AANLkTim6_4pmDwaepDpWuZL_KWX=Nv+uSKsWXX9449Op@mail.gmail.com>
Message-ID: <224432808.106037.1282746234336.JavaMail.open-xchange@oxusltgw07.schlund.de>

For the record, no one has suggested any kind of plug-in "approval" process.
?We're talking about an *optional* review process that a) helps plug-in
developers reach a higher state of conformity with their systems b) provides
end-users with an objective set of criteria with which they can evaluate new
systems and c) helps everyone easily identify which plug-ins *really* work with
which versions of WordPress and where any potential code collisions might occur
(there are several plug-ins that are incompatible with one another because
developers broke certain conventions regarding naming, execution order, or
improperly namespacing their scripts).
?
We would never deny a plug-in from being listed. ?Any reviews, while it'd be
great for them to be listed publicly on the repository, are entirely external to
the process of submitting and listing a plug-in.

On August 25, 2010 at 4:42 AM Otto <otto at ottodestruct.com> wrote:

> I'd like everybody discussing this to keep in mind that there is a
> very large difference between "review" and "approval".
>
> I, for one, do not want any sort of "approval" process for plugins.
> I'm unhappy with the theme approval process as it currently stands,
> because I think it's horribly broken.
>
> Reviews are fine. User reviews would be excellent. But I just want to
> be clear that we don't want to be putting anybody in the position to
> deny plugins from being listed for not following some arbitrary set of
> guidelines. That defeats the whole purpose of a code review, which is
> to help the developer to learn better ways and to improve their code.
>
> When you start denying listings because of not following some set of
> practices, then you're creating a walled garden of content, which is
> one reason I do not like the iTunes App Store and jailbroke my iPhone
> within 3 days of getting it. I don't think the WordPress community
> should try to emulate Apple in this case.
>
> -Otto
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

From burobjorn at gmail.com  Wed Aug 25 16:04:08 2010
From: burobjorn at gmail.com (Bjorn Wijers)
Date: Wed, 25 Aug 2010 18:04:08 +0200
Subject: [wp-hackers] hooks for multisite: add blog, remove blog,
 change blog
In-Reply-To: <AANLkTikE8oatOxxiQBkB3_gMzD1RuXzdOJWyTm5RM2eC@mail.gmail.com>
References: <4C738D8F.2050406@gmail.com>	<AANLkTi=V3iT2v=Ss7EOPBZdcwZFOEmkSE4T0o_M9VHUB@mail.gmail.com>
	<AANLkTikE8oatOxxiQBkB3_gMzD1RuXzdOJWyTm5RM2eC@mail.gmail.com>
Message-ID: <4C753EF8.70104@gmail.com>

Thanks! I'll open up some tickets and see if I can add patches.


met vriendelijke groet,
Bjorn Wijers

* b u r o b j o r n .nl *
digitaal vakmanschap | digital craftsmanship

Werkdagen:
Van maandag t/m donderdag vanaf 10:00
Vrijdag is voor experimenteren en eigen projecten.

Concordiastraat 68-126
3551 EM Utrecht
The Netherlands

tel: +31 6 49 74 78 70
http://www.burobjorn.nl

On 08/25/2010 12:06 PM, Michael D Adams wrote:
> On Wed, Aug 25, 2010 at 2:31 AM, Otto<otto at ottodestruct.com>  wrote:
>> wpmu_new_blog
>> delete_blog
>>
>> Can't find one for a status change...
>
> update_blog_public will sometimes get called (but sometimes not)
> make_spam_blog and make_ham_blog get called for spam/ham
>
> Otherwise, I don't think there are any hooks.  I suggest opening a ticket.
>
> Mike
> --mdawaffe
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From kenzaraque at gmail.com  Wed Aug 25 16:25:18 2010
From: kenzaraque at gmail.com (ken zarque)
Date: Wed, 25 Aug 2010 09:25:18 -0700
Subject: [wp-hackers] multiple databases vs different database prefixes
In-Reply-To: <AANLkTi=KydZSqYAf2TStZ4r2vrN_YMZAMpd9cn2fq=2v@mail.gmail.com>
References: <2DCF84D4-97F6-4719-98FE-BBA7232D0F59@gmail.com>
	<F7E4F6D6-B1D9-44CB-B5E3-9281465D4392@striderweb.com>
	<AANLkTimn4HvWMRJECLeA=Li2jEdXdBYLFB2=U4Cb77ne@mail.gmail.com>
	<AANLkTi=KydZSqYAf2TStZ4r2vrN_YMZAMpd9cn2fq=2v@mail.gmail.com>
Message-ID: <AANLkTi=VVLOQTh__9qdBaJQnAoJ0Loe1GT1u5QPjjjMJ@mail.gmail.com>

I started a new thread in this list. I haven't gotten a response. Hopefully
soon.

I haven't found a good solution yet.

On Mon, Aug 23, 2010 at 7:57 AM, Jeremy Clarke <jer at simianuprising.com>wrote:

> On Fri, Aug 20, 2010 at 3:38 PM, ken zarque <kenzaraque at gmail.com> wrote:
>
> >
> > After installing WP with MS turned on, we ran into this question "How do
> we
> > deploy single sites in an MS environment from one environment to
> another".
> > This is because we have a dev, staging and production environment.
> >
> > Note: Should I be asking this on a separate thread?
> >
> >
> Yes. It is a different (though related) can of worms. I am very interested
> in the answers people give you though, as you're asking about the most
> obnoxious part of MS deployment.
>
> --
> Jeremy Clarke | http://jeremyclarke.org
> Organizer | http://wordcampmontreal.org
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From scribu at gmail.com  Wed Aug 25 16:32:43 2010
From: scribu at gmail.com (scribu)
Date: Wed, 25 Aug 2010 19:32:43 +0300
Subject: [wp-hackers] multiple databases vs different database prefixes
In-Reply-To: <AANLkTi=VVLOQTh__9qdBaJQnAoJ0Loe1GT1u5QPjjjMJ@mail.gmail.com>
References: <2DCF84D4-97F6-4719-98FE-BBA7232D0F59@gmail.com>
	<F7E4F6D6-B1D9-44CB-B5E3-9281465D4392@striderweb.com>
	<AANLkTimn4HvWMRJECLeA=Li2jEdXdBYLFB2=U4Cb77ne@mail.gmail.com>
	<AANLkTi=KydZSqYAf2TStZ4r2vrN_YMZAMpd9cn2fq=2v@mail.gmail.com>
	<AANLkTi=VVLOQTh__9qdBaJQnAoJ0Loe1GT1u5QPjjjMJ@mail.gmail.com>
Message-ID: <AANLkTik6z3saTUAtK5EzJzJ9ya2dabopb9dxe9O7=RiS@mail.gmail.com>

> After installing WP with MS turned on, we ran into this question "How do
> we deploy single sites in an MS environment from one environment to
> another".
> This is because we have a dev, staging and production environment.

A good start would be the thread about sql search & replace:

http://old.nabble.com/Subject%3A--change-siteurl-at-DB-level-td29527522.html

-- 
http://scribu.net

From otto at ottodestruct.com  Wed Aug 25 17:05:02 2010
From: otto at ottodestruct.com (Otto)
Date: Wed, 25 Aug 2010 12:05:02 -0500
Subject: [wp-hackers] hooks for multisite: add blog, remove blog,
	change blog
In-Reply-To: <AANLkTikE8oatOxxiQBkB3_gMzD1RuXzdOJWyTm5RM2eC@mail.gmail.com>
References: <4C738D8F.2050406@gmail.com>
	<AANLkTi=V3iT2v=Ss7EOPBZdcwZFOEmkSE4T0o_M9VHUB@mail.gmail.com>
	<AANLkTikE8oatOxxiQBkB3_gMzD1RuXzdOJWyTm5RM2eC@mail.gmail.com>
Message-ID: <AANLkTinadD784dSgr64Ae-A4kP+5WFo1Z-5sKK9epQed@mail.gmail.com>

On Wed, Aug 25, 2010 at 5:06 AM, Michael D Adams <mda at blogwaffe.com> wrote:
> make_spam_blog and make_ham_blog get called for spam/ham

I had to LOL at that.

WordPress: Now with a built in way to make blogs about Bacon!

-Otto

From viniciusandre at gmail.com  Wed Aug 25 17:08:18 2010
From: viniciusandre at gmail.com (Vinicius Massuchetto)
Date: Wed, 25 Aug 2010 14:08:18 -0300
Subject: [wp-hackers] Multiple installations with same tables
Message-ID: <AANLkTikcp0-TabGCfmDNe+oTawxr4rwh9j23MBzPKNYN@mail.gmail.com>

Hi!

Maybe it's a support question, but I've trying to find and get
information on forums with no success.

I run a server with multiple git projects as WP installations. I want
developers to be able to clone these repositories and have them
working in their localhosts connecting to the same tables that the
original project does, once the development strictly depends of the
contents of this database.

Thanks.
-- 
Vin?cius Massuchetto

From scribu at gmail.com  Wed Aug 25 17:29:12 2010
From: scribu at gmail.com (scribu)
Date: Wed, 25 Aug 2010 20:29:12 +0300
Subject: [wp-hackers] Multiple installations with same tables
In-Reply-To: <AANLkTikcp0-TabGCfmDNe+oTawxr4rwh9j23MBzPKNYN@mail.gmail.com>
References: <AANLkTikcp0-TabGCfmDNe+oTawxr4rwh9j23MBzPKNYN@mail.gmail.com>
Message-ID: <AANLkTi=MpZYgubNNrDNbBuVkEHFn1OTuQzw8euSggR0O@mail.gmail.com>

On Wed, Aug 25, 2010 at 8:08 PM, Vinicius Massuchetto <
viniciusandre at gmail.com> wrote:

> I run a server with multiple git projects as WP installations. I want
> developers to be able to clone these repositories and have them
> working in their localhosts connecting to the same tables that the
> original project does, once the development strictly depends of the
> contents of this database.
>

Just set the DB related constants in the wp-config.php file to the same
database.

The DB_HOST will have to point to your db server, which has to be configured
to accept remote connections.

-- 
http://scribu.net

From wordpress at santosj.name  Wed Aug 25 17:36:07 2010
From: wordpress at santosj.name (Jacob Santos)
Date: Wed, 25 Aug 2010 12:36:07 -0500
Subject: [wp-hackers] Multiple installations with same tables
In-Reply-To: <AANLkTi=MpZYgubNNrDNbBuVkEHFn1OTuQzw8euSggR0O@mail.gmail.com>
References: <AANLkTikcp0-TabGCfmDNe+oTawxr4rwh9j23MBzPKNYN@mail.gmail.com>
	<AANLkTi=MpZYgubNNrDNbBuVkEHFn1OTuQzw8euSggR0O@mail.gmail.com>
Message-ID: <AANLkTin1wSMouKCT_zfVW=98JZeHsLAWh-_+n3zQ1Nd9@mail.gmail.com>

Well, he also has to set up WP_SITEURL and WP_HOME if HTTP_HOST is
'localhost'.

On Wed, Aug 25, 2010 at 12:29 PM, scribu <scribu at gmail.com> wrote:

> On Wed, Aug 25, 2010 at 8:08 PM, Vinicius Massuchetto <
> viniciusandre at gmail.com> wrote:
>
> > I run a server with multiple git projects as WP installations. I want
> > developers to be able to clone these repositories and have them
> > working in their localhosts connecting to the same tables that the
> > original project does, once the development strictly depends of the
> > contents of this database.
> >
>
> Just set the DB related constants in the wp-config.php file to the same
> database.
>
> The DB_HOST will have to point to your db server, which has to be
> configured
> to accept remote connections.
>
> --
> http://scribu.net
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From viniciusandre at gmail.com  Wed Aug 25 17:37:08 2010
From: viniciusandre at gmail.com (Vinicius Massuchetto)
Date: Wed, 25 Aug 2010 14:37:08 -0300
Subject: [wp-hackers] Multiple installations with same tables
In-Reply-To: <AANLkTi=MpZYgubNNrDNbBuVkEHFn1OTuQzw8euSggR0O@mail.gmail.com>
References: <AANLkTikcp0-TabGCfmDNe+oTawxr4rwh9j23MBzPKNYN@mail.gmail.com>
	<AANLkTi=MpZYgubNNrDNbBuVkEHFn1OTuQzw8euSggR0O@mail.gmail.com>
Message-ID: <AANLkTimu_pp5krcDEfxzAnM8hw=WPpC5=Whrf8R+NFth@mail.gmail.com>

2010/8/25 scribu <scribu at gmail.com>:
> On Wed, Aug 25, 2010 at 8:08 PM, Vinicius Massuchetto <
> viniciusandre at gmail.com> wrote:
>
>> I run a server with multiple git projects as WP installations. I want
>> developers to be able to clone these repositories and have them
>> working in their localhosts connecting to the same tables that the
>> original project does, once the development strictly depends of the
>> contents of this database.
>>
>
> Just set the DB related constants in the wp-config.php file to the same
> database.
>
> The DB_HOST will have to point to your db server, which has to be configured
> to accept remote connections.

I'm afraid it's not just that. The installation keeps creating remote
permalinks and redirecting to the remote site. It gets even worse if
using multisite.

Thanks.
-- 
Vin?cius Massuchetto

From viniciusandre at gmail.com  Wed Aug 25 17:41:41 2010
From: viniciusandre at gmail.com (Vinicius Massuchetto)
Date: Wed, 25 Aug 2010 14:41:41 -0300
Subject: [wp-hackers] Multiple installations with same tables
In-Reply-To: <AANLkTin1wSMouKCT_zfVW=98JZeHsLAWh-_+n3zQ1Nd9@mail.gmail.com>
References: <AANLkTikcp0-TabGCfmDNe+oTawxr4rwh9j23MBzPKNYN@mail.gmail.com>
	<AANLkTi=MpZYgubNNrDNbBuVkEHFn1OTuQzw8euSggR0O@mail.gmail.com>
	<AANLkTin1wSMouKCT_zfVW=98JZeHsLAWh-_+n3zQ1Nd9@mail.gmail.com>
Message-ID: <AANLkTik+r3KGVybqWu9FgxGgBoZe3H4isuD5pfS_cO7j@mail.gmail.com>

2010/8/25 Jacob Santos <wordpress at santosj.name>:
> Well, he also has to set up WP_SITEURL and WP_HOME if HTTP_HOST is
> 'localhost'.

Nice one. Didn't know that.

According to codex:
"Setting this value in wp-config.php overrides the wp_options table
value for siteurl and disables the WordPress address (URL) field in
the Administration > Settings > General"

I guess that's what I need. I'll ignore wp-config.php file on git
repositories also.

Thanks.
-- 
Vin?cius Massuchetto

From mikeschinkel at newclarity.net  Wed Aug 25 17:50:27 2010
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Wed, 25 Aug 2010 13:50:27 -0400
Subject: [wp-hackers] Code reviews for plugins?
In-Reply-To: <224432808.106037.1282746234336.JavaMail.open-xchange@oxusltgw07.schlund.de>
References: <4C71936D.6070600@wptavern.com>
	<4C71E62F.80307@simplercomputing.net>
	<AANLkTik7vFjksLOnt+MgLDW5X_+AX1y-SS7c5u671Np5@mail.gmail.com>
	<4C71EFC3.1080806@simplercomputing.net>
	<4C72357E.30102@thedextrousweb.com>
	<F4536CE0-9D75-4B1C-9AF2-A21A99BC7328@newclarity.net>
	<AANLkTikzE5Rz=ZFWUG5utVeJ19Lzmt6+pPWqeWTwpjP7@mail.gmail.com>
	<6C8A06CA-EB9D-43AF-9AF4-59A691E73E90@newclarity.net>
	<AANLkTin=V+Eqf4a1Fe1W=cMzKLiKmyNBjyzzmGNYocXr@mail.gmail.com>
	<AANLkTim6_4pmDwaepDpWuZL_KWX=Nv+uSKsWXX9449Op@mail.gmail.com>
	<224432808.106037.1282746234336.JavaMail.open-xchange@oxusltgw07.schlund.de>
Message-ID: <3F05255B-F68B-41AD-B266-A147B5842511@newclarity.net>

On Aug 25, 2010, at 10:23 AM, Eric Mann wrote:
> For the record, no one has suggested any kind of plug-in "approval" process.
>  We're talking about an *optional* review process that a) helps plug-in
> developers reach a higher state of conformity with their systems b) provides
> end-users with an objective set of criteria with which they can evaluate new
> systems and c) helps everyone easily identify which plug-ins *really* work with
> which versions of WordPress and where any potential code collisions might occur
> (there are several plug-ins that are incompatible with one another because
> developers broke certain conventions regarding naming, execution order, or
> improperly namespacing their scripts).
>  
> We would never deny a plug-in from being listed.  Any reviews, while it'd be
> great for them to be listed publicly on the repository, are entirely external to
> the process of submitting and listing a plug-in.

+1

-Mike

From gcorne at bu.edu  Wed Aug 25 17:55:21 2010
From: gcorne at bu.edu (Cornelius, Gregory)
Date: Wed, 25 Aug 2010 13:55:21 -0400
Subject: [wp-hackers] multiple databases vs different database prefixes
In-Reply-To: <AANLkTi=KydZSqYAf2TStZ4r2vrN_YMZAMpd9cn2fq=2v@mail.gmail.com>
References: <2DCF84D4-97F6-4719-98FE-BBA7232D0F59@gmail.com>
	<F7E4F6D6-B1D9-44CB-B5E3-9281465D4392@striderweb.com>
	<AANLkTimn4HvWMRJECLeA=Li2jEdXdBYLFB2=U4Cb77ne@mail.gmail.com>
	<AANLkTi=KydZSqYAf2TStZ4r2vrN_YMZAMpd9cn2fq=2v@mail.gmail.com>
Message-ID: <A71CC655-BAA4-4FDB-9C5A-90E73589140A@bu.edu>

This is not for the feint of heart, especially if the environments are hooked up to different databases and the global tables (wp_blogs, wp_site, etc...) are not synchronized.  

I have been working with a group of developers on a large MPMU installation for a couple years, and we still don't have an ideal setup for prod, staging, test, devel, and development branches.  We are getting closer, but there have been lots of hiccups along the way.      

Two improvements that I would like to see happen are: an API for fetching/modifying blog settings (including widgets/sidebars) across a number of blogs in one fell swoop and a fully supported method for bootstrapping WordPress in a PHP script from the CLI .

On Aug 23, 2010, at 10:57 AM, Jeremy Clarke wrote:

> On Fri, Aug 20, 2010 at 3:38 PM, ken zarque <kenzaraque at gmail.com> wrote:
> 
>> 
>> After installing WP with MS turned on, we ran into this question "How do we
>> deploy single sites in an MS environment from one environment to another".
>> This is because we have a dev, staging and production environment.
>> 
>> Note: Should I be asking this on a separate thread?
>> 
>> 
> Yes. It is a different (though related) can of worms. I am very interested
> in the answers people give you though, as you're asking about the most
> obnoxious part of MS deployment.
> 
> -- 
> Jeremy Clarke | http://jeremyclarke.org
> Organizer | http://wordcampmontreal.org
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers


From wordpress at santosj.name  Wed Aug 25 19:41:27 2010
From: wordpress at santosj.name (Jacob Santos)
Date: Wed, 25 Aug 2010 14:41:27 -0500
Subject: [wp-hackers] Multiple installations with same tables
In-Reply-To: <AANLkTik+r3KGVybqWu9FgxGgBoZe3H4isuD5pfS_cO7j@mail.gmail.com>
References: <AANLkTikcp0-TabGCfmDNe+oTawxr4rwh9j23MBzPKNYN@mail.gmail.com>
	<AANLkTi=MpZYgubNNrDNbBuVkEHFn1OTuQzw8euSggR0O@mail.gmail.com>
	<AANLkTin1wSMouKCT_zfVW=98JZeHsLAWh-_+n3zQ1Nd9@mail.gmail.com>
	<AANLkTik+r3KGVybqWu9FgxGgBoZe3H4isuD5pfS_cO7j@mail.gmail.com>
Message-ID: <AANLkTingGmVWq6rFjh-+0+RZx6ZhK-TwLXcQjNOyBJsV@mail.gmail.com>

I think that in the future, it is best to only give as much information as
needed to solve the problem you are having.

On first read, it seemed like you needed help with GIT and having people
check it out. On second read, it seemed like you needed to know what scribu
replied with.

Most people on the forums, I believe, are only going to give a first read
and if it isn't clear as to what problem you are having, they might not
answer.

No one needed to know you were using GIT, only needed to know that you had a
dev <-> live environment and wanted to know how to test locally.

Jacob Santos

On Wed, Aug 25, 2010 at 12:41 PM, Vinicius Massuchetto <
viniciusandre at gmail.com> wrote:

> 2010/8/25 Jacob Santos <wordpress at santosj.name>:
> > Well, he also has to set up WP_SITEURL and WP_HOME if HTTP_HOST is
> > 'localhost'.
>
> Nice one. Didn't know that.
>
> According to codex:
> "Setting this value in wp-config.php overrides the wp_options table
> value for siteurl and disables the WordPress address (URL) field in
> the Administration > Settings > General"
>
> I guess that's what I need. I'll ignore wp-config.php file on git
> repositories also.
>
> Thanks.
> --
> Vin?cius Massuchetto
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From dvmorris at gmail.com  Wed Aug 25 20:03:31 2010
From: dvmorris at gmail.com (David Morris)
Date: Wed, 25 Aug 2010 15:03:31 -0500
Subject: [wp-hackers] Strange Issue after upgrading wpmu 2.9.1 to 3.0.1 -
 blog home pages randomly show up blank
Message-ID: <AANLkTi=o=9M12+nZ6B=hH7AU5PHz2qu8unPC6MQEt7aq@mail.gmail.com>

I upgraded a wpmu 2.9.1 installation to 3.0.1, and I am having an
intermittent issue with a number of blogs where the page will show up
completely blank. Then when I go to that blog's /wp-admin page, it loads
fine. Then as soon as I go back to the blog home page, it works. The blog
seems to work fine for a while, and occasionally it will die again.

I see nothing coming into the Apache or the PHP error logs, and nothing is
displayed on the screen. When I crawl the site with Xenu Link Sleuth, some
of the blog home pages will return a status of "no info to return", and an
error description of "file has zero length".

The Apache access log shows a lot of 404 errors, but they don't always
correspond to the errors displayed in Xenu. The only other strange thing I
noticed is that Xenu attempts to make requests to blog post pages without
including the blog name in the URL. So if a blog post URL looked like this:

http://blogs.example.com/blog1/this-is-a-blog-post

Xenu will request the blog home page (http://blogs.example.com/blog1),
receive an error, and then immediately request this:

http://blogs.example.com/this-is-a-blog-post (without /blog1 in there)



Any ideas as to why this might be occurring? Thanks for your help,

Dave

From viniciusandre at gmail.com  Wed Aug 25 20:28:27 2010
From: viniciusandre at gmail.com (Vinicius Massuchetto)
Date: Wed, 25 Aug 2010 17:28:27 -0300
Subject: [wp-hackers] Multiple installations with same tables
In-Reply-To: <AANLkTingGmVWq6rFjh-+0+RZx6ZhK-TwLXcQjNOyBJsV@mail.gmail.com>
References: <AANLkTikcp0-TabGCfmDNe+oTawxr4rwh9j23MBzPKNYN@mail.gmail.com>
	<AANLkTi=MpZYgubNNrDNbBuVkEHFn1OTuQzw8euSggR0O@mail.gmail.com>
	<AANLkTin1wSMouKCT_zfVW=98JZeHsLAWh-_+n3zQ1Nd9@mail.gmail.com>
	<AANLkTik+r3KGVybqWu9FgxGgBoZe3H4isuD5pfS_cO7j@mail.gmail.com>
	<AANLkTingGmVWq6rFjh-+0+RZx6ZhK-TwLXcQjNOyBJsV@mail.gmail.com>
Message-ID: <AANLkTinu4nGH5VjHCP7ZER10L1gpzCbXe8UEgJg_MUjN@mail.gmail.com>

2010/8/25 Jacob Santos <wordpress at santosj.name>:
> I think that in the future, it is best to only give as much information as
> needed to solve the problem you are having.
>
> On first read, it seemed like you needed help with GIT and having people
> check it out. On second read, it seemed like you needed to know what scribu
> replied with.
>
> Most people on the forums, I believe, are only going to give a first read
> and if it isn't clear as to what problem you are having, they might not
> answer.
>
> No one needed to know you were using GIT, only needed to know that you had a
> dev <-> live environment and wanted to know how to test locally.

I disagree, in parts.

Cloning means that the user will get the same wp-config.php as the
original one, and I wasn't sure if I needed to edit the file or just
use some hooks to modify instance variables. For me, the wp_options
values were absolute.

Now it's obvious you don't need to know about git.

Thanks!
-- 
Vin?cius Massuchetto

From anca at anca.tv  Thu Aug 26 00:16:22 2010
From: anca at anca.tv (Anca Mosoiu)
Date: Wed, 25 Aug 2010 17:16:22 -0700
Subject: [wp-hackers] How to use post_updated_messages filter
Message-ID: <E691B0D3-E6DD-457C-B475-30F0E01F3AC4@anca.tv>

Hello,

I'm developing a plugin that supports additional actions on the post.php page (besides publish, trash, update, etc).

I figured out how to hook my function to the save_post action, and now I'm trying to provide a user message.  I noticed that there is a "post_updated_messages" filter that allows you to define additional user-facing messages.  There is a nice example of using this as part of creating a custom content type:  http://codex.wordpress.org/Function_Reference/register_post_type.

I also looked at the edit-form-advanced.php, where messages are defined and where the post_updated_messages filter is called.  

My question is...  What's the recommended way to use this filter?  Do I...

(a) Add more messages (with new indexes) to the $messages array and set my $message to the new index I've defined? (How?)

or

(b) Replace the "Post Updated" message (index 4) with my status report based on whether my action was triggered (and successful)?

or

(c) something else?

Right now I'm leaning towards (b), just because it seems that messages map to particular statuses and I know which one to change, but it doesn't feel like as clean a solution as (a).

Thanks,

Anca.
=+=+=+=+=+=+
Anca Mosoiu
anca at anca.tv


From beau at dentedreality.com.au  Thu Aug 26 01:07:18 2010
From: beau at dentedreality.com.au (Beau Lebens)
Date: Wed, 25 Aug 2010 21:07:18 -0400
Subject: [wp-hackers] How to remove URL field in Comments Form
In-Reply-To: <AANLkTimJEdgEWEOLcpkORWj13Ai_yqLyQbQwMALW4KtG@mail.gmail.com>
References: <AANLkTimJEdgEWEOLcpkORWj13Ai_yqLyQbQwMALW4KtG@mail.gmail.com>
Message-ID: <AANLkTikTdytW7sKphWUuTCmGDgSoaiz9z2GkU_bUfN4V@mail.gmail.com>

If you're using the new default theme, Twenty Ten, then you could
write a filter that would remove it before comment_form() is called.
It would look something like this (in your functions.php, or a plugin,
or whatever):

add_filter( 'comment_form_default_fields', 'remove_comment_url_field' );
function remove_comment_url_field( $fields ) {
	unset( $fields['url'] );
	return $fields;
}

If you're using a theme that doesn't use comment_form() (new in 3.0,
so very likely), then you'd need to just hack the comments.php file
within your theme normally. Since the URL field is not required, you
shouldn't need to do any special handling (un-handling) to get around
that.

I just did a short presentation on the comment_form() function at
WordCamp Savannah:
http://www.slideshare.net/beaulebens/hooking-into-comments-5047868

Beau


On Wed, Aug 25, 2010 at 5:33 AM, Baki Goxhaj <banago at gmail.com> wrote:
> I want to get rid of the url field in my comments form - how can I achieve
> that? Thanks!
>
> Kindly,
>
> Baki Goxhaj
> www.wplancer.com | www.banago.info | www.lintuts.com
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From alister at alistercameron.com  Thu Aug 26 02:40:56 2010
From: alister at alistercameron.com (Alister Cameron)
Date: Thu, 26 Aug 2010 12:40:56 +1000
Subject: [wp-hackers] BUG? Custom values not set early enough on publish?
Message-ID: <AANLkTin7T_0SMMpKpgch6h4xhmT36dHo_XKJNYergDEj@mail.gmail.com>

Folks,

I've hooked up a function to the "future_to_publish" hook.

That function is essentially sending out an email when a new post is
published in a particular category.

However one interesting thing I've discovered...

I need to add a custom value into the body of the email and I do this with a
custom value.

So my function calls the get_post_custom_values() function to retrieve the
value I want, for insertion into that email.

HOWEVER... as best I can tell, the custom value is not yet set at the point
where the "future_to_publish" hook fires, and I'm getting no data returned
from the call to get_post_custom_values().

Is it possible that this is the case? That if you save custom values they're
not correctly associated to the published post until AFTER the
"future_to_publish" hook has fired?

I've not got into it any deeper than this, but asking for help!

Any ideas Westy??

Cheers,

-Alister


 *Alister Cameron*
www.strategist

   *Click to connect online...* <http://about.alistercameron.com>
Lvl 1, 234 Whitehorse Rd
<http://maps.google.com/maps?q=Lvl+1%2C+234+Whitehorse+Rd%2CNunawading%2CVIC+3131%2CAustralia&hl=en>Nunawading,
VIC 3131
Australia
 *Work:* 03 9008 0900
*Mobile:* 04 0404 5555
*Fax:* 03 8610 0050
*Email:* alister at alistercameron.com

From carlo at artilibere.com  Thu Aug 26 04:47:16 2010
From: carlo at artilibere.com (Carlo Gandolfo)
Date: Thu, 26 Aug 2010 06:47:16 +0200
Subject: [wp-hackers] Cannot publish anymore, just pending
Message-ID: <AANLkTimyu-bKtvpAr8sGT09f2zJN8HkUp4DR+Ne9R__7@mail.gmail.com>

Hi everybody,
recently I've upgraded to WP3 (network mode enabled) and everything went
fine.
But on last days I've got a problem: no one of my editors neither
administrators can publish anymore.
Every post they try to publish go in "pending" status and rest in that
status until I publish that with network administrator account.
To check I installed a "role" plugin and the capabilities are all ok,
exactly as described in http://codex.wordpress.org/Roles_and_Capabilities .
I cannot understand what's wrong. Anybody experienced the same problem or
have a suggestion to solve?
Thank you very much,
Carlo

From wp at andrewnacin.com  Thu Aug 26 05:00:44 2010
From: wp at andrewnacin.com (Andrew Nacin)
Date: Thu, 26 Aug 2010 01:00:44 -0400
Subject: [wp-hackers] Cannot publish anymore, just pending
In-Reply-To: <AANLkTimyu-bKtvpAr8sGT09f2zJN8HkUp4DR+Ne9R__7@mail.gmail.com>
References: <AANLkTimyu-bKtvpAr8sGT09f2zJN8HkUp4DR+Ne9R__7@mail.gmail.com>
Message-ID: <AANLkTi=z7MrvfGUKpp9vvD7dUdb7tgtA+iubrHQoyJbb@mail.gmail.com>

On Thu, Aug 26, 2010 at 12:47 AM, Carlo Gandolfo <carlo at artilibere.com>wrote:

> Hi everybody,
> recently I've upgraded to WP3 (network mode enabled) and everything went
> fine.
> But on last days I've got a problem: no one of my editors neither
> administrators can publish anymore.
> Every post they try to publish go in "pending" status and rest in that
> status until I publish that with network administrator account.
> To check I installed a "role" plugin and the capabilities are all ok,
> exactly as described in http://codex.wordpress.org/Roles_and_Capabilities.
> I cannot understand what's wrong. Anybody experienced the same problem or
> have a suggestion to solve?
> Thank you very much,
> Carlo


I would disable your plugins. It is very likely one of them is conflicting.

You can also try the WP support forums at http://wordpress.org/support.

From carlo at artilibere.com  Thu Aug 26 05:10:00 2010
From: carlo at artilibere.com (Carlo Gandolfo)
Date: Thu, 26 Aug 2010 07:10:00 +0200
Subject: [wp-hackers] Cannot publish anymore, just pending
In-Reply-To: <AANLkTi=z7MrvfGUKpp9vvD7dUdb7tgtA+iubrHQoyJbb@mail.gmail.com>
References: <AANLkTimyu-bKtvpAr8sGT09f2zJN8HkUp4DR+Ne9R__7@mail.gmail.com>
	<AANLkTi=z7MrvfGUKpp9vvD7dUdb7tgtA+iubrHQoyJbb@mail.gmail.com>
Message-ID: <AANLkTik++SnTtaLWGQctYDffnStdD3juypM+8Q0Ajp_X@mail.gmail.com>

Hi Andrew, thanks for answering.
I already disabled all plugins and set "twentyten" as template, still not
works...
Thanks for suggestion, I'll ask also on forums.

2010/8/26 Andrew Nacin <wp at andrewnacin.com>

> On Thu, Aug 26, 2010 at 12:47 AM, Carlo Gandolfo <carlo at artilibere.com
> >wrote:
>
> > Hi everybody,
> > recently I've upgraded to WP3 (network mode enabled) and everything went
> > fine.
> > But on last days I've got a problem: no one of my editors neither
> > administrators can publish anymore.
> > Every post they try to publish go in "pending" status and rest in that
> > status until I publish that with network administrator account.
> > To check I installed a "role" plugin and the capabilities are all ok,
> > exactly as described in
> http://codex.wordpress.org/Roles_and_Capabilities.
> > I cannot understand what's wrong. Anybody experienced the same problem or
> > have a suggestion to solve?
> > Thank you very much,
> > Carlo
>
>
> I would disable your plugins. It is very likely one of them is conflicting.
>
> You can also try the WP support forums at http://wordpress.org/support.
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From peter.westwood at ftwr.co.uk  Thu Aug 26 07:11:12 2010
From: peter.westwood at ftwr.co.uk (Peter Westwood)
Date: Thu, 26 Aug 2010 08:11:12 +0100
Subject: [wp-hackers] BUG? Custom values not set early enough on publish?
In-Reply-To: <AANLkTin7T_0SMMpKpgch6h4xhmT36dHo_XKJNYergDEj@mail.gmail.com>
References: <AANLkTin7T_0SMMpKpgch6h4xhmT36dHo_XKJNYergDEj@mail.gmail.com>
Message-ID: <5F3BB740-77D2-4DCC-A970-0E7073EB7166@ftwr.co.uk>


On 26 Aug 2010, at 03:40, Alister Cameron wrote:

> Folks,
> 
> I've hooked up a function to the "future_to_publish" hook.
> 
> That function is essentially sending out an email when a new post is
> published in a particular category.
> 
> However one interesting thing I've discovered...
> 
> I need to add a custom value into the body of the email and I do this with a
> custom value.
> 
> So my function calls the get_post_custom_values() function to retrieve the
> value I want, for insertion into that email.
> 
> HOWEVER... as best I can tell, the custom value is not yet set at the point
> where the "future_to_publish" hook fires, and I'm getting no data returned
> from the call to get_post_custom_values().
> 
> Is it possible that this is the case? That if you save custom values they're
> not correctly associated to the published post until AFTER the
> "future_to_publish" hook has fired?
> 
> I've not got into it any deeper than this, but asking for help!
> 
> Any ideas Westy??

Without seeing the code you are using which reproduces this issue not many :-(

Could you share a link to a cut down plugin which just illustrates the issue that will make it much easier for people to help

westi
-- 
Peter Westwood
http://blog.ftwr.co.uk | http://westi.wordpress.com
C53C F8FC 8796 8508 88D6 C950 54F4 5DCD A834 01C5


From alister at alistercameron.com  Thu Aug 26 07:35:44 2010
From: alister at alistercameron.com (Alister Cameron)
Date: Thu, 26 Aug 2010 17:35:44 +1000
Subject: [wp-hackers] BUG? Custom values not set early enough on publish?
Message-ID: <AANLkTikSQSRqtYzuDYGfs1jfiUkBASAVh+-Sjm1iBdCU@mail.gmail.com>

Westy,

Thanks mate. Should have done that.

Here's the code...

http://www.alistercameron.com/future_to_publish.txt

I've removed/obfuscated as little as possible.

I have triggered this function via another means and I can confirm that it
works on an already-published post.

I can also confirm that it bails out at the point where count($location) <
1.

Cheers,

-Alister

From carlo at artilibere.com  Thu Aug 26 09:17:53 2010
From: carlo at artilibere.com (Carlo Gandolfo)
Date: Thu, 26 Aug 2010 11:17:53 +0200
Subject: [wp-hackers] Cannot publish anymore, just pending
In-Reply-To: <AANLkTik++SnTtaLWGQctYDffnStdD3juypM+8Q0Ajp_X@mail.gmail.com>
References: <AANLkTimyu-bKtvpAr8sGT09f2zJN8HkUp4DR+Ne9R__7@mail.gmail.com>
	<AANLkTi=z7MrvfGUKpp9vvD7dUdb7tgtA+iubrHQoyJbb@mail.gmail.com>
	<AANLkTik++SnTtaLWGQctYDffnStdD3juypM+8Q0Ajp_X@mail.gmail.com>
Message-ID: <AANLkTikn+_HEWHLsDJp24oq80q9-JdakBx-zMp3wvV0n@mail.gmail.com>

I also discovered that to publish a user can be just a simple subscriber
with "Grant this user super admin privileges for the Network" flagged on.
It looks even stranger...

2010/8/26 Carlo Gandolfo <carlo at artilibere.com>

> Hi Andrew, thanks for answering.
> I already disabled all plugins and set "twentyten" as template, still not
> works...
> Thanks for suggestion, I'll ask also on forums.
>
> 2010/8/26 Andrew Nacin <wp at andrewnacin.com>
>
> On Thu, Aug 26, 2010 at 12:47 AM, Carlo Gandolfo <carlo at artilibere.com
>> >wrote:
>>
>> > Hi everybody,
>> > recently I've upgraded to WP3 (network mode enabled) and everything went
>> > fine.
>> > But on last days I've got a problem: no one of my editors neither
>> > administrators can publish anymore.
>> > Every post they try to publish go in "pending" status and rest in that
>> > status until I publish that with network administrator account.
>> > To check I installed a "role" plugin and the capabilities are all ok,
>> > exactly as described in
>> http://codex.wordpress.org/Roles_and_Capabilities.
>> > I cannot understand what's wrong. Anybody experienced the same problem
>> or
>> > have a suggestion to solve?
>> > Thank you very much,
>> > Carlo
>>
>>
>> I would disable your plugins. It is very likely one of them is
>> conflicting.
>>
>> You can also try the WP support forums at http://wordpress.org/support.
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
>
>

From wp at andrewnacin.com  Thu Aug 26 10:09:47 2010
From: wp at andrewnacin.com (Andrew Nacin)
Date: Thu, 26 Aug 2010 06:09:47 -0400
Subject: [wp-hackers] Cannot publish anymore, just pending
In-Reply-To: <AANLkTikn+_HEWHLsDJp24oq80q9-JdakBx-zMp3wvV0n@mail.gmail.com>
References: <AANLkTimyu-bKtvpAr8sGT09f2zJN8HkUp4DR+Ne9R__7@mail.gmail.com>
	<AANLkTi=z7MrvfGUKpp9vvD7dUdb7tgtA+iubrHQoyJbb@mail.gmail.com>
	<AANLkTik++SnTtaLWGQctYDffnStdD3juypM+8Q0Ajp_X@mail.gmail.com>
	<AANLkTikn+_HEWHLsDJp24oq80q9-JdakBx-zMp3wvV0n@mail.gmail.com>
Message-ID: <AANLkTi=+FY3mis1DaQjA7Yku-0HxS=20ib+PAciuFAKo@mail.gmail.com>

On Thu, Aug 26, 2010 at 5:17 AM, Carlo Gandolfo <carlo at artilibere.com>wrote:

> I also discovered that to publish a user can be just a simple subscriber
> with "Grant this user super admin privileges for the Network" flagged on.
> It looks even stranger...


I'm not sure what's going on here (unfiltered HTML getting in the way?), but
super admin privileges are network wide, while roles are per blog. You can
be a subscriber on one blog, an administrator on another, and no role on 30
other blogs, but you still have super admin privileges across the entire
network.

From philip at frumph.net  Thu Aug 26 10:19:17 2010
From: philip at frumph.net (Philip M. Hofer (Frumph))
Date: Thu, 26 Aug 2010 03:19:17 -0700
Subject: [wp-hackers] Cannot publish anymore, just pending
In-Reply-To: <AANLkTi=+FY3mis1DaQjA7Yku-0HxS=20ib+PAciuFAKo@mail.gmail.com>
References: <AANLkTimyu-bKtvpAr8sGT09f2zJN8HkUp4DR+Ne9R__7@mail.gmail.com><AANLkTi=z7MrvfGUKpp9vvD7dUdb7tgtA+iubrHQoyJbb@mail.gmail.com><AANLkTik++SnTtaLWGQctYDffnStdD3juypM+8Q0Ajp_X@mail.gmail.com><AANLkTikn+_HEWHLsDJp24oq80q9-JdakBx-zMp3wvV0n@mail.gmail.com>
	<AANLkTi=+FY3mis1DaQjA7Yku-0HxS=20ib+PAciuFAKo@mail.gmail.com>
Message-ID: <22E5E3D347AB4CC4BAF845522F482208@frumph.net>

nacin: per discussion on the meta charset on theme_review documentation

Just remove the documentation portion of that segment? or what would you 
suggest putting in it's place? anything?




From carlo at artilibere.com  Thu Aug 26 10:43:06 2010
From: carlo at artilibere.com (Carlo Gandolfo)
Date: Thu, 26 Aug 2010 12:43:06 +0200
Subject: [wp-hackers] Cannot publish anymore, just pending
In-Reply-To: <AANLkTi=+FY3mis1DaQjA7Yku-0HxS=20ib+PAciuFAKo@mail.gmail.com>
References: <AANLkTimyu-bKtvpAr8sGT09f2zJN8HkUp4DR+Ne9R__7@mail.gmail.com>
	<AANLkTi=z7MrvfGUKpp9vvD7dUdb7tgtA+iubrHQoyJbb@mail.gmail.com>
	<AANLkTik++SnTtaLWGQctYDffnStdD3juypM+8Q0Ajp_X@mail.gmail.com>
	<AANLkTikn+_HEWHLsDJp24oq80q9-JdakBx-zMp3wvV0n@mail.gmail.com>
	<AANLkTi=+FY3mis1DaQjA7Yku-0HxS=20ib+PAciuFAKo@mail.gmail.com>
Message-ID: <AANLkTinxDdG2P9p2LPOweigyTwF842AokgiOK0nwVOut@mail.gmail.com>

ouch, it was trivial...
checking again the problem was with the template i was using, in
functions.php i found:

if (!is_site_admin() && $post_status == 'publish') return 'pending';

hooked to "status_save_pre", hidden in box-inthe-box functions.

sorry guys, and thanks indeed.
Carlo




2010/8/26 Andrew Nacin <wp at andrewnacin.com>

> On Thu, Aug 26, 2010 at 5:17 AM, Carlo Gandolfo <carlo at artilibere.com
> >wrote:
>
> > I also discovered that to publish a user can be just a simple subscriber
> > with "Grant this user super admin privileges for the Network" flagged on.
> > It looks even stranger...
>
>
> I'm not sure what's going on here (unfiltered HTML getting in the way?),
> but
> super admin privileges are network wide, while roles are per blog. You can
> be a subscriber on one blog, an administrator on another, and no role on 30
> other blogs, but you still have super admin privileges across the entire
> network.
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From KrisY at tbs.uk.com  Thu Aug 26 10:44:25 2010
From: KrisY at tbs.uk.com (Kris Young)
Date: Thu, 26 Aug 2010 11:44:25 +0100
Subject: [wp-hackers] Cannot publish anymore, just pending
In-Reply-To: <22E5E3D347AB4CC4BAF845522F482208@frumph.net>
References: <AANLkTimyu-bKtvpAr8sGT09f2zJN8HkUp4DR+Ne9R__7@mail.gmail.com><AANLkTi=z7MrvfGUKpp9vvD7dUdb7tgtA+iubrHQoyJbb@mail.gmail.com><AANLkTik++SnTtaLWGQctYDffnStdD3juypM+8Q0Ajp_X@mail.gmail.com><AANLkTikn+_HEWHLsDJp24oq80q9-JdakBx-zMp3wvV0n@mail.gmail.com><AANLkTi=+FY3mis1DaQjA7Yku-0HxS=20ib+PAciuFAKo@mail.gmail.com>
	<22E5E3D347AB4CC4BAF845522F482208@frumph.net>
Message-ID: <CD47955B7E065D48AB5CF226C2ED75C02E3416@tbs-sbs01.TBS.local>

This happened to me, and it was actually because my system clock was set
a month into the future.

Odd, eh?

-----Original Message-----
From: wp-hackers-bounces at lists.automattic.com
[mailto:wp-hackers-bounces at lists.automattic.com] On Behalf Of Philip M.
Hofer (Frumph)
Sent: 26 August 2010 11:19
To: wp-hackers at lists.automattic.com
Subject: Re: [wp-hackers] Cannot publish anymore, just pending

nacin: per discussion on the meta charset on theme_review documentation

Just remove the documentation portion of that segment? or what would you

suggest putting in it's place? anything?



_______________________________________________
wp-hackers mailing list
wp-hackers at lists.automattic.com
http://lists.automattic.com/mailman/listinfo/wp-hackers

From viniciusandre at gmail.com  Thu Aug 26 12:01:32 2010
From: viniciusandre at gmail.com (Vinicius Massuchetto)
Date: Thu, 26 Aug 2010 12:01:32 +0000
Subject: [wp-hackers] Multiple installations with same tables
In-Reply-To: <AANLkTin1wSMouKCT_zfVW=98JZeHsLAWh-_+n3zQ1Nd9@mail.gmail.com>
References: <AANLkTikcp0-TabGCfmDNe+oTawxr4rwh9j23MBzPKNYN@mail.gmail.com>
	<AANLkTi=MpZYgubNNrDNbBuVkEHFn1OTuQzw8euSggR0O@mail.gmail.com>
	<AANLkTin1wSMouKCT_zfVW=98JZeHsLAWh-_+n3zQ1Nd9@mail.gmail.com>
Message-ID: <AANLkTi=E=b1doVSUrHnW=9Kiu0fVzp0ufv1-aCLhVVc-@mail.gmail.com>

2010/8/25 Jacob Santos <wordpress at santosj.name>:
> Well, he also has to set up WP_SITEURL and WP_HOME if HTTP_HOST is
> 'localhost'.

Is that the same with multisite? It outputs a database connection
error if MULTISITE is true and these constants are set to
'http://'.$_SERVER['HTTP_HOST'].'/path'. The domains are stored in
wp_sites and wp_blogs tables, and I couldn't find any way of
controlling this through wp-config.php.

Thanks.
-- 
Vin?cius Massuchetto

From wordpress at santosj.name  Thu Aug 26 14:39:21 2010
From: wordpress at santosj.name (Jacob Santos)
Date: Thu, 26 Aug 2010 09:39:21 -0500
Subject: [wp-hackers] Multiple installations with same tables
In-Reply-To: <AANLkTi=E=b1doVSUrHnW=9Kiu0fVzp0ufv1-aCLhVVc-@mail.gmail.com>
References: <AANLkTikcp0-TabGCfmDNe+oTawxr4rwh9j23MBzPKNYN@mail.gmail.com>
	<AANLkTi=MpZYgubNNrDNbBuVkEHFn1OTuQzw8euSggR0O@mail.gmail.com>
	<AANLkTin1wSMouKCT_zfVW=98JZeHsLAWh-_+n3zQ1Nd9@mail.gmail.com>
	<AANLkTi=E=b1doVSUrHnW=9Kiu0fVzp0ufv1-aCLhVVc-@mail.gmail.com>
Message-ID: <AANLkTim6RkZbrNjDDxNeO+VcU1zeOtgQK1So4sfhaZcz@mail.gmail.com>

Hmm, that is a good question. I would have to look at how the functions and
what modifications were made for Multisite.

Thanks, I'll look into that.

Jacob Santos

On Thu, Aug 26, 2010 at 7:01 AM, Vinicius Massuchetto <
viniciusandre at gmail.com> wrote:

> 2010/8/25 Jacob Santos <wordpress at santosj.name>:
> > Well, he also has to set up WP_SITEURL and WP_HOME if HTTP_HOST is
> > 'localhost'.
>
> Is that the same with multisite? It outputs a database connection
> error if MULTISITE is true and these constants are set to
> 'http://'.$_SERVER['HTTP_HOST'].'/path'. The domains are stored in
> wp_sites and wp_blogs tables, and I couldn't find any way of
> controlling this through wp-config.php.
>
> Thanks.
> --
> Vin?cius Massuchetto
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From Gavin.Pearce at 3seven9.com  Thu Aug 26 14:48:17 2010
From: Gavin.Pearce at 3seven9.com (Gavin Pearce)
Date: Thu, 26 Aug 2010 15:48:17 +0100
Subject: [wp-hackers] Off-topic rant: WP-Pro
In-Reply-To: <AANLkTinxDdG2P9p2LPOweigyTwF842AokgiOK0nwVOut@mail.gmail.com>
References: <AANLkTimyu-bKtvpAr8sGT09f2zJN8HkUp4DR+Ne9R__7@mail.gmail.com><AANLkTi=z7MrvfGUKpp9vvD7dUdb7tgtA+iubrHQoyJbb@mail.gmail.com><AANLkTik++SnTtaLWGQctYDffnStdD3juypM+8Q0Ajp_X@mail.gmail.com><AANLkTikn+_HEWHLsDJp24oq80q9-JdakBx-zMp3wvV0n@mail.gmail.com><AANLkTi=+FY3mis1DaQjA7Yku-0HxS=20ib+PAciuFAKo@mail.gmail.com>
	<AANLkTinxDdG2P9p2LPOweigyTwF842AokgiOK0nwVOut@mail.gmail.com>
Message-ID: <CD47955B7E065D48AB5CF226C2ED75C02E342E@tbs-sbs01.TBS.local>

--Off-topic warning--

Jane @ Automattic recently made the decision to post a message to the
WP-Pro mailing list saying it was up for closure.

The list had many people speaking up against this decision, and asked
Jane several times to comment or reply on the real reasons why - all of
which were ignored.

The list has since been closed.

Does anyone know anything about this? I was unaware that Automattic
could just close WordPress lists on a whim, I thought this kind of
decision was to be more community based?

Maybe I'm wrong, just concerns me with the future of this list also for
example ...

Cheers,
Gav

From eric at eamann.com  Thu Aug 26 14:56:54 2010
From: eric at eamann.com (Eric Mann)
Date: Thu, 26 Aug 2010 07:56:54 -0700 (PDT)
Subject: [wp-hackers] Off-topic rant: WP-Pro
In-Reply-To: <CD47955B7E065D48AB5CF226C2ED75C02E342E@tbs-sbs01.TBS.local>
References: <AANLkTimyu-bKtvpAr8sGT09f2zJN8HkUp4DR+Ne9R__7@mail.gmail.com><AANLkTi=z7MrvfGUKpp9vvD7dUdb7tgtA+iubrHQoyJbb@mail.gmail.com><AANLkTik++SnTtaLWGQctYDffnStdD3juypM+8Q0Ajp_X@mail.gmail.com><AANLkTikn+_HEWHLsDJp24oq80q9-JdakBx-zMp3wvV0n@mail.gmail.com><AANLkTi=+FY3mis1DaQjA7Yku-0HxS=20ib+PAciuFAKo@mail.gmail.com>
	<AANLkTinxDdG2P9p2LPOweigyTwF842AokgiOK0nwVOut@mail.gmail.com>
	<CD47955B7E065D48AB5CF226C2ED75C02E342E@tbs-sbs01.TBS.local>
Message-ID: <1241059625.142181.1282834614297.JavaMail.open-xchange@oxusltgw00.schlund.de>

Since the lists are all hosted by Automattic, they definitely have the right to
close lists whenever they want for whatever (or no) reason.
?
Not to say I agree with the action. ?I actually find it very disturbing and
would like to know the reasons as well. ?I'm just saying that since the lists
are an Automattic "product" they don't have to make decisions based on community
sentiment. ?If the lists were hosted by wordpress.org, though, it would be a
different matter.
?

On August 26, 2010 at 2:48 PM Gavin Pearce <Gavin.Pearce at 3seven9.com> wrote:

> --Off-topic warning--
>
> Jane @ Automattic recently made the decision to post a message to the
> WP-Pro mailing list saying it was up for closure.
>
> The list had many people speaking up against this decision, and asked
> Jane several times to comment or reply on the real reasons why - all of
> which were ignored.
>
> The list has since been closed.
>
> Does anyone know anything about this? I was unaware that Automattic
> could just close WordPress lists on a whim, I thought this kind of
> decision was to be more community based?
>
> Maybe I'm wrong, just concerns me with the future of this list also for
> example ...
>
> Cheers,
> Gav
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

From jpotkanski at tribune.com  Thu Aug 26 15:08:09 2010
From: jpotkanski at tribune.com (Potkanski, Jason)
Date: Thu, 26 Aug 2010 10:08:09 -0500
Subject: [wp-hackers] Off-topic rant: WP-Pro
In-Reply-To: <1241059625.142181.1282834614297.JavaMail.open-xchange@oxusltgw00.schlund.de>
References: <AANLkTimyu-bKtvpAr8sGT09f2zJN8HkUp4DR+Ne9R__7@mail.gmail.com><AANLkTi=z7MrvfGUKpp9vvD7dUdb7tgtA+iubrHQoyJbb@mail.gmail.com><AANLkTik++SnTtaLWGQctYDffnStdD3juypM+8Q0Ajp_X@mail.gmail.com><AANLkTikn+_HEWHLsDJp24oq80q9-JdakBx-zMp3wvV0n@mail.gmail
	<AANLkTinxDdG2P9p2LPOweigyTwF842AokgiOK0nwVOut@mail.gmail.com>
	<CD47955B7E065D48AB5CF226C2ED75C02E342E@tbs-sbs01.TBS.local>
	<1241059625.142181.1282834614297.JavaMail.open-xchange@oxusltgw00.schlund.de>
Message-ID: <7A06A0AED9867C4C8B285D2D5D60B19C54C4C530D6@FCWPMB06.usa.tribune.com>

Looks like the list was deprecated in favor of http://jobs.wordpress.net . Although since you can't post resumes on the website, half of the functionality of the wp-pro list is gone.


-----Original Message-----
From: wp-hackers-bounces at lists.automattic.com [mailto:wp-hackers-bounces at lists.automattic.com] On Behalf Of Eric Mann
Sent: Thursday, August 26, 2010 9:57 AM
To: wp-hackers at lists.automattic.com
Subject: Re: [wp-hackers] Off-topic rant: WP-Pro

Since the lists are all hosted by Automattic, they definitely have the right to
close lists whenever they want for whatever (or no) reason.
?
Not to say I agree with the action. ?I actually find it very disturbing and
would like to know the reasons as well. ?I'm just saying that since the lists
are an Automattic "product" they don't have to make decisions based on community
sentiment. ?If the lists were hosted by wordpress.org, though, it would be a
different matter.
?

On August 26, 2010 at 2:48 PM Gavin Pearce <Gavin.Pearce at 3seven9.com> wrote:

> --Off-topic warning--
>
> Jane @ Automattic recently made the decision to post a message to the
> WP-Pro mailing list saying it was up for closure.
>
> The list had many people speaking up against this decision, and asked
> Jane several times to comment or reply on the real reasons why - all of
> which were ignored.
>
> The list has since been closed.
>
> Does anyone know anything about this? I was unaware that Automattic
> could just close WordPress lists on a whim, I thought this kind of
> decision was to be more community based?
>
> Maybe I'm wrong, just concerns me with the future of this list also for
> example ...
>
> Cheers,
> Gav
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
_______________________________________________
wp-hackers mailing list
wp-hackers at lists.automattic.com
http://lists.automattic.com/mailman/listinfo/wp-hackers

From elfin at elfden.co.uk  Thu Aug 26 15:17:37 2010
From: elfin at elfden.co.uk (Rich Pedley)
Date: Thu, 26 Aug 2010 16:17:37 +0100
Subject: [wp-hackers] Off-topic rant: WP-Pro
In-Reply-To: <7A06A0AED9867C4C8B285D2D5D60B19C54C4C530D6@FCWPMB06.usa.tribune.com>
References: <AANLkTimyu-bKtvpAr8sGT09f2zJN8HkUp4DR+Ne9R__7@mail.gmail.com><AANLkTi=z7MrvfGUKpp9vvD7dUdb7tgtA+iubrHQoyJbb@mail.gmail.com><AANLkTik++SnTtaLWGQctYDffnStdD3juypM+8Q0Ajp_X@mail.gmail.com><AANLkTikn+_HEWHLsDJp24oq80q9-JdakBx-zMp3wvV0n@mail.gmail	<AANLkTinxDdG2P9p2LPOweigyTwF842AokgiOK0nwVOut@mail.gmail.com>	<CD47955B7E065D48AB5CF226C2ED75C02E342E@tbs-sbs01.TBS.local>	<1241059625.142181.1282834614297.JavaMail.open-xchange@oxusltgw00.schlund.de>
	<7A06A0AED9867C4C8B285D2D5D60B19C54C4C530D6@FCWPMB06.usa.tribune.com>
Message-ID: <4C768591.7020906@elfden.co.uk>

On 26/08/2010 16:08, Potkanski, Jason wrote:
> Looks like the list was deprecated in favor of
> http://jobs.wordpress.net . Although since you can't post resumes
> on the website, half of the functionality of the wp-pro list is
> gone.

erm, a website is far more practical to host a resume than a mailing list.

Why not push for that functionality to be added on 
http://jobs.wordpress.net ?

 From the FAQ:
Can I post my resume? No, at least not at this time.

Now might be a good time to contact them and ask about it now that the 
pro list is defunct.

Rich

From dvmorris at gmail.com  Thu Aug 26 15:18:01 2010
From: dvmorris at gmail.com (David Morris)
Date: Thu, 26 Aug 2010 10:18:01 -0500
Subject: [wp-hackers] Strange Issue after upgrading wpmu 2.9.1 to 3.0.1
 - blog home pages randomly show up blank
In-Reply-To: <AANLkTi=o=9M12+nZ6B=hH7AU5PHz2qu8unPC6MQEt7aq@mail.gmail.com>
References: <AANLkTi=o=9M12+nZ6B=hH7AU5PHz2qu8unPC6MQEt7aq@mail.gmail.com>
Message-ID: <AANLkTikdGOnwD1UT82nRSFMPirFGaN=nENNHB-qo5AP-@mail.gmail.com>

After some more tinkering with the upgrade from 2.9.1 to 3.0, it looks as
though none of the sites will actually work until you first visit the site's
wp-admin page. We have ~800 blogs running on this platform, so I guess we'll
have to write a script to hit up each /wp-admin page before going live.

Is this expected behavior, or is that just a coincidence that the blog
starts working after visiting the /wp-admin page?

Thanks,
Dave

From rbilesky at gmail.com  Thu Aug 26 16:10:34 2010
From: rbilesky at gmail.com (Ryan Bilesky)
Date: Thu, 26 Aug 2010 09:10:34 -0700
Subject: [wp-hackers] Strange Issue after upgrading wpmu 2.9.1 to 3.0.1
 - blog home pages randomly show up blank
In-Reply-To: <AANLkTikdGOnwD1UT82nRSFMPirFGaN=nENNHB-qo5AP-@mail.gmail.com>
References: <AANLkTi=o=9M12+nZ6B=hH7AU5PHz2qu8unPC6MQEt7aq@mail.gmail.com>
	<AANLkTikdGOnwD1UT82nRSFMPirFGaN=nENNHB-qo5AP-@mail.gmail.com>
Message-ID: <AANLkTiksXQQrS2xrushS9aZN=C+kcvbRXgUCppS3K4x+@mail.gmail.com>

Did you run the upgrade script?  Because if not accessing wp-admin for the
blog might upgrade just that blog so it will work, but thats just a total
guess.

On Thu, Aug 26, 2010 at 8:18 AM, David Morris <dvmorris at gmail.com> wrote:

> After some more tinkering with the upgrade from 2.9.1 to 3.0, it looks as
> though none of the sites will actually work until you first visit the
> site's
> wp-admin page. We have ~800 blogs running on this platform, so I guess
> we'll
> have to write a script to hit up each /wp-admin page before going live.
>
> Is this expected behavior, or is that just a coincidence that the blog
> starts working after visiting the /wp-admin page?
>
> Thanks,
>  Dave
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From Ken at adcSTUDIO.com  Thu Aug 26 20:13:33 2010
From: Ken at adcSTUDIO.com (Ken)
Date: Thu, 26 Aug 2010 16:13:33 -0400
Subject: [wp-hackers] How do filters access variables outside of their
	function?
Message-ID: <i56htf$i9h$1@dough.gmane.org>

For example a function Nacin put together on a thread back in May (found 
on Google):

add_filter('post_updated_messages', 'nacin_book_updated_messages');

function nacin_book_updated_messages( $messages ) {

$messages['book'] = array(
  1 => sprintf( __('Book updated. <a href="%s">View book</a>',
'myplugin_textdomain'), esc_url( get_permalink($post_ID) ) ),
  2 => $messages['post'][2],
  3 => $messages['post'][3],
  4 => __('Book updated.', 'myplugin_textdomain'),
/* translators: %s: date and time of the revision */
  5 => isset($_GET['revision']) ? sprintf( __('Book restored to revision 
from
%s', 'myplugin_textdomain'), wp_post_revision_title( (int)
$_GET['revision'], false ) ) : false,
  6 => sprintf( __('Book published. <a href="%s">View book</a>',
'myplugin_textdomain'), esc_url( get_permalink($post_ID) ) ),
  7 => __('Book saved.', 'myplugin_textdomain'),
  8 => sprintf( __('Book submitted. <a target="_blank" href="%s">Preview
book</a>', 'myplugin_textdomain'), esc_url( add_query_arg( 'preview',
'true', get_permalink($post_ID) ) ) ),
  9 => sprintf( __('Book scheduled for: <strong>%1$s</strong>. <a
target="_blank" href="%2$s">Preview book</a>', 'myplugin_textdomain'),
         // translators: Publish box date format, see http://php.net/date
         date_i18n( __( 'M j, Y @ G:i' ), strtotime( $post->post_date ) ),
esc_url( get_permalink($post_ID) ) ),
10 => sprintf( __('Book draft updated. <a target="_blank" href="%s">Preview
book</a>', 'myplugin_textdomain'), esc_url( add_query_arg( 'preview',
'true', get_permalink($post_ID) ) ) ),

}

Calls both $post_ID and $post->post_date, both of which thro notices 
with wp_debug turned on.

The thing that has me stumpt is that I didn't think variables outside of 
the function were accessible unless global'd.

Can anyone enlighten me on this? Thanks


From wp at andrewnacin.com  Thu Aug 26 20:27:09 2010
From: wp at andrewnacin.com (Andrew Nacin)
Date: Thu, 26 Aug 2010 16:27:09 -0400
Subject: [wp-hackers] How do filters access variables outside of their
	function?
In-Reply-To: <i56htf$i9h$1@dough.gmane.org>
References: <i56htf$i9h$1@dough.gmane.org>
Message-ID: <AANLkTinr3F5VW3foaS=+Z4_aLOoF50kqtXcyBMUn=6ab@mail.gmail.com>

On Thu, Aug 26, 2010 at 4:13 PM, Ken <Ken at adcstudio.com> wrote:

> For example a function Nacin put together on a thread back in May (found on
> Google):
> <snip>
> Calls both $post_ID and $post->post_date, both of which thro notices with
> wp_debug turned on.
>
> The thing that has me stumpt is that I didn't think variables outside of
> the function were accessible unless global'd.
>

You'll need to global both of those. I didn't test, I just copy/pasted from
core where this runs in global scope.

From anca at anca.tv  Thu Aug 26 20:34:58 2010
From: anca at anca.tv (Anca Mosoiu)
Date: Thu, 26 Aug 2010 13:34:58 -0700
Subject: [wp-hackers] How do filters access variables outside of their
	function?
In-Reply-To: <mailman.18829.1282853638.1338.wp-hackers@lists.automattic.com>
References: <mailman.18829.1282853638.1338.wp-hackers@lists.automattic.com>
Message-ID: <C8EE29B1-3406-48BD-AE02-50816BA58DF0@anca.tv>

Hi Ken,

Hmm, interesting question.  I'm working with the same sample code (what a coincidence!)  and I used wp_debug to find the same thing you did.  I just changed my function to access the global values for $post_ID and $post, because the values were coming in blank.  

The filter is executed inside admin/edit-form-advanced.php, where the values for $post_ID and $post are available (and validated).   

Cheers,

Anca.

> Date: Thu, 26 Aug 2010 16:13:33 -0400
> From: Ken <Ken at adcSTUDIO.com>
> Subject: [wp-hackers] How do filters access variables outside of their
> 	function?
> To: wp-hackers at lists.automattic.com
> Message-ID: <i56htf$i9h$1 at dough.gmane.org>
> Content-Type: text/plain; charset=ISO-8859-1; format=flowed
> 
> For example a function Nacin put together on a thread back in May (found 
> on Google):
> 
> add_filter('post_updated_messages', 'nacin_book_updated_messages');
> 
> function nacin_book_updated_messages( $messages ) {
> 
> $messages['book'] = array(
>  1 => sprintf( __('Book updated. <a href="%s">View book</a>',
> 'myplugin_textdomain'), esc_url( get_permalink($post_ID) ) ),
>  2 => $messages['post'][2],
>  3 => $messages['post'][3],
>  4 => __('Book updated.', 'myplugin_textdomain'),
> /* translators: %s: date and time of the revision */
>  5 => isset($_GET['revision']) ? sprintf( __('Book restored to revision 
> from
> %s', 'myplugin_textdomain'), wp_post_revision_title( (int)
> $_GET['revision'], false ) ) : false,
>  6 => sprintf( __('Book published. <a href="%s">View book</a>',
> 'myplugin_textdomain'), esc_url( get_permalink($post_ID) ) ),
>  7 => __('Book saved.', 'myplugin_textdomain'),
>  8 => sprintf( __('Book submitted. <a target="_blank" href="%s">Preview
> book</a>', 'myplugin_textdomain'), esc_url( add_query_arg( 'preview',
> 'true', get_permalink($post_ID) ) ) ),
>  9 => sprintf( __('Book scheduled for: <strong>%1$s</strong>. <a
> target="_blank" href="%2$s">Preview book</a>', 'myplugin_textdomain'),
>         // translators: Publish box date format, see http://php.net/date
>         date_i18n( __( 'M j, Y @ G:i' ), strtotime( $post->post_date ) ),
> esc_url( get_permalink($post_ID) ) ),
> 10 => sprintf( __('Book draft updated. <a target="_blank" href="%s">Preview
> book</a>', 'myplugin_textdomain'), esc_url( add_query_arg( 'preview',
> 'true', get_permalink($post_ID) ) ) ),
> 
> }
> 
> Calls both $post_ID and $post->post_date, both of which thro notices 
> with wp_debug turned on.
> 
> The thing that has me stumpt is that I didn't think variables outside of 
> the function were accessible unless global'd.
> 
> Can anyone enlighten me on this? Thanks
> 
> ***************************************


From rbilesky at gmail.com  Thu Aug 26 22:31:47 2010
From: rbilesky at gmail.com (Ryan Bilesky)
Date: Thu, 26 Aug 2010 15:31:47 -0700
Subject: [wp-hackers] Custom Post Status
Message-ID: <AANLkTinB1=qDfVULGLmVmPrp7MLS5KrbQ5vx-4pxJPJ1@mail.gmail.com>

I want to setup a custom post status.  I did a google search, the results of
which seem to point to there being a function to register a custom post
status, that being register_post_status(), howver I see no mntion of this in
the codex function refrence.  Can anyone confirm the existance of such a
function, and at the very least where in the WP code it exists so I can look
at it and see what arguments it requires.

From scribu at gmail.com  Thu Aug 26 22:35:18 2010
From: scribu at gmail.com (scribu)
Date: Fri, 27 Aug 2010 01:35:18 +0300
Subject: [wp-hackers] Custom Post Status
In-Reply-To: <AANLkTinB1=qDfVULGLmVmPrp7MLS5KrbQ5vx-4pxJPJ1@mail.gmail.com>
References: <AANLkTinB1=qDfVULGLmVmPrp7MLS5KrbQ5vx-4pxJPJ1@mail.gmail.com>
Message-ID: <AANLkTi=H7bz9-vSmWsKNYKv4Z6H90AZPFy5qLa=T7Lqr@mail.gmail.com>

"Search Simply through the WordPress Source"

<http://xref.yoast.com/wp.html>http://xref.yoast.com/wp.html

(hint: it does exist)

-- 
http://scribu.net

From austin at ilfilosofo.com  Thu Aug 26 22:37:54 2010
From: austin at ilfilosofo.com (Austin Matzko)
Date: Thu, 26 Aug 2010 17:37:54 -0500
Subject: [wp-hackers] Custom Post Status
In-Reply-To: <AANLkTinB1=qDfVULGLmVmPrp7MLS5KrbQ5vx-4pxJPJ1@mail.gmail.com>
References: <AANLkTinB1=qDfVULGLmVmPrp7MLS5KrbQ5vx-4pxJPJ1@mail.gmail.com>
Message-ID: <AANLkTin5LeBo6C=86=F1UdBiZoRM=KT2kuyVrMd6HwQh@mail.gmail.com>

On Thu, Aug 26, 2010 at 5:31 PM, Ryan Bilesky <rbilesky at gmail.com> wrote:
> I want to setup a custom post status. ?I did a google search, the results of
> which seem to point to there being a function to register a custom post
> status, that being register_post_status(), howver I see no mntion of this in
> the codex function refrence. ?Can anyone confirm the existance of such a
> function, and at the very least where in the WP code it exists so I can look
> at it and see what arguments it requires.

Yes, it exists, but it doesn't do much of anything useful.

See <http://core.trac.wordpress.org/ticket/14318> for a ticket I
started as a basis for improving the post_status API.

From mikeschinkel at newclarity.net  Thu Aug 26 22:38:45 2010
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Thu, 26 Aug 2010 18:38:45 -0400
Subject: [wp-hackers] Custom Post Status
In-Reply-To: <AANLkTinB1=qDfVULGLmVmPrp7MLS5KrbQ5vx-4pxJPJ1@mail.gmail.com>
References: <AANLkTinB1=qDfVULGLmVmPrp7MLS5KrbQ5vx-4pxJPJ1@mail.gmail.com>
Message-ID: <2D69DA37-1072-47B6-9BA8-4CCA2D99CCB6@newclarity.net>

On Aug 26, 2010, at 6:31 PM, Ryan Bilesky wrote:

> I want to setup a custom post status.  I did a google search, the results of
> which seem to point to there being a function to register a custom post
> status, that being register_post_status(), howver I see no mntion of this in
> the codex function refrence.  Can anyone confirm the existance of such a
> function, and at the very least where in the WP code it exists so I can look
> at it and see what arguments it requires.

register_post_status($status,$args) can be found on line 563 of /wp-includes/post.php

Here is the defaults for the $args array:

$defaults = array(
  'label' => false
  'label_count' => false
  'exclude_from_search' => null
  '_builtin' => false
  '_edit_link' => 'post.php?post=%d'
  'capability_type' => 'post'
  'hierarchical' => false
  'public' => null
  'internal' => null
  'protected' => null
  'private' => null
  'show_in_admin_all' => null
  'publicly_queryable' => null
  'show_in_admin_status_list' => null
  'show_in_admin_all_list' => null
  'single_view_cap' => null
);

Hope this helps.

-Mike

From rbilesky at gmail.com  Thu Aug 26 22:49:42 2010
From: rbilesky at gmail.com (Ryan Bilesky)
Date: Thu, 26 Aug 2010 15:49:42 -0700
Subject: [wp-hackers] Custom Post Status
In-Reply-To: <2D69DA37-1072-47B6-9BA8-4CCA2D99CCB6@newclarity.net>
References: <AANLkTinB1=qDfVULGLmVmPrp7MLS5KrbQ5vx-4pxJPJ1@mail.gmail.com>
	<2D69DA37-1072-47B6-9BA8-4CCA2D99CCB6@newclarity.net>
Message-ID: <AANLkTi=YUf_z-idEUwOVpU3opN=qoAOz4g1SM+UGsycN@mail.gmail.com>

Ok now is there a way by chance to remove a built in post status, or at
least prevent it from being selected when writing a post.

@scribu; that's a useful link.  I'll have to bookmark that.
@austin: that's odd, but I don;t think any of that will affect me.  The
status is going to be set via a db query based on end user inputs and for
the most part are to identify certain posts.

@mike: yes, thank you
On Thu, Aug 26, 2010 at 3:38 PM, Mike Schinkel
<mikeschinkel at newclarity.net>wrote:

>  On Aug 26, 2010, at 6:31 PM, Ryan Bilesky wrote:
>
> > I want to setup a custom post status.  I did a google search, the results
> of
> > which seem to point to there being a function to register a custom post
> > status, that being register_post_status(), howver I see no mntion of this
> in
> > the codex function refrence.  Can anyone confirm the existance of such a
> > function, and at the very least where in the WP code it exists so I can
> look
> > at it and see what arguments it requires.
>
> register_post_status($status,$args) can be found on line 563 of
> /wp-includes/post.php
>
> Here is the defaults for the $args array:
>
> $defaults = array(
>  'label' => false
>  'label_count' => false
>  'exclude_from_search' => null
>  '_builtin' => false
>  '_edit_link' => 'post.php?post=%d'
>  'capability_type' => 'post'
>  'hierarchical' => false
>  'public' => null
>  'internal' => null
>  'protected' => null
>  'private' => null
>  'show_in_admin_all' => null
>  'publicly_queryable' => null
>  'show_in_admin_status_list' => null
>  'show_in_admin_all_list' => null
>  'single_view_cap' => null
> );
>
> Hope this helps.
>
> -Mike
>  _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From mikeschinkel at newclarity.net  Thu Aug 26 23:54:19 2010
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Thu, 26 Aug 2010 19:54:19 -0400
Subject: [wp-hackers] Custom Post Status
In-Reply-To: <AANLkTi=YUf_z-idEUwOVpU3opN=qoAOz4g1SM+UGsycN@mail.gmail.com>
References: <AANLkTinB1=qDfVULGLmVmPrp7MLS5KrbQ5vx-4pxJPJ1@mail.gmail.com>
	<2D69DA37-1072-47B6-9BA8-4CCA2D99CCB6@newclarity.net>
	<AANLkTi=YUf_z-idEUwOVpU3opN=qoAOz4g1SM+UGsycN@mail.gmail.com>
Message-ID: <FAD3A5A0-0302-4AB4-BB9B-2158BEABAD60@newclarity.net>

On Aug 26, 2010, at 6:49 PM, Ryan Bilesky wrote:
> Ok now is there a way by chance to remove a built in post status, or at
> least prevent it from being selected when writing a post.


Unfortunately the status list in the Publish metabox is all hard-coded!  See lines 85-104 in /wp-admin/includes/meta-box.php so unless you want to hack core I think the only want to do it is with jQuery/Javascript.  If you want to inject the <script> code to do it just below where is the status are display the hook "post_submitbox_misc_actions" should work.

Here's some code that will remove the 'Pending Review' status from the metabox. You should be able to take it from there:

add_action('post_submitbox_misc_actions','my_post_submitbox_misc_actions');
function my_post_submitbox_misc_actions() {
	$js =<<<JS
<script type="text/javascript">
jQuery(document).ready(function($) {
	$("#misc-publishing-actions select#post_status option[value='pending']").remove();
});
</script>
JS;
	echo $js;
}

Hope this helps.

-Mike


From banago at gmail.com  Fri Aug 27 00:25:54 2010
From: banago at gmail.com (Baki Goxhaj)
Date: Fri, 27 Aug 2010 02:25:54 +0200
Subject: [wp-hackers] How to remove URL field in Comments Form
In-Reply-To: <AANLkTikTdytW7sKphWUuTCmGDgSoaiz9z2GkU_bUfN4V@mail.gmail.com>
References: <AANLkTimJEdgEWEOLcpkORWj13Ai_yqLyQbQwMALW4KtG@mail.gmail.com>
	<AANLkTikTdytW7sKphWUuTCmGDgSoaiz9z2GkU_bUfN4V@mail.gmail.com>
Message-ID: <AANLkTikvJtLKWyXpmM60hu8DKwnh5DBuNT9+VWYekSXc@mail.gmail.com>

Beau,

Yes, I was looking for the filter and that is fantastic information. Thanks!

Kindly,

Baki Goxhaj
www.wplancer.com | www.banago.info | www.lintuts.com


On 26 August 2010 03:07, Beau Lebens <beau at dentedreality.com.au> wrote:

> If you're using the new default theme, Twenty Ten, then you could
> write a filter that would remove it before comment_form() is called.
> It would look something like this (in your functions.php, or a plugin,
> or whatever):
>
> add_filter( 'comment_form_default_fields', 'remove_comment_url_field' );
> function remove_comment_url_field( $fields ) {
>        unset( $fields['url'] );
>        return $fields;
> }
>
> If you're using a theme that doesn't use comment_form() (new in 3.0,
> so very likely), then you'd need to just hack the comments.php file
> within your theme normally. Since the URL field is not required, you
> shouldn't need to do any special handling (un-handling) to get around
> that.
>
> I just did a short presentation on the comment_form() function at
> WordCamp Savannah:
> http://www.slideshare.net/beaulebens/hooking-into-comments-5047868
>
> Beau
>
>
> On Wed, Aug 25, 2010 at 5:33 AM, Baki Goxhaj <banago at gmail.com> wrote:
> > I want to get rid of the url field in my comments form - how can I
> achieve
> > that? Thanks!
> >
> > Kindly,
> >
> > Baki Goxhaj
> > www.wplancer.com | www.banago.info | www.lintuts.com
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers at lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> >
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From Ken at adcSTUDIO.com  Fri Aug 27 00:52:46 2010
From: Ken at adcSTUDIO.com (Ken)
Date: Thu, 26 Aug 2010 20:52:46 -0400
Subject: [wp-hackers] How do filters access variables outside of their
	function?
In-Reply-To: <AANLkTinr3F5VW3foaS=+Z4_aLOoF50kqtXcyBMUn=6ab@mail.gmail.com>
References: <i56htf$i9h$1@dough.gmane.org>
	<AANLkTinr3F5VW3foaS=+Z4_aLOoF50kqtXcyBMUn=6ab@mail.gmail.com>
Message-ID: <i57291$bhd$1@dough.gmane.org>

On 8/26/2010 4:27 PM, Andrew Nacin wrote:
> On Thu, Aug 26, 2010 at 4:13 PM, Ken<Ken at adcstudio.com>  wrote:
>
>> For example a function Nacin put together on a thread back in May (found on
>> Google):
>> <snip>
>> Calls both $post_ID and $post->post_date, both of which thro notices with
>> wp_debug turned on.
>>
>> The thing that has me stumpt is that I didn't think variables outside of
>> the function were accessible unless global'd.
>>
>
> You'll need to global both of those. I didn't test, I just copy/pasted from
> core where this runs in global scope.

Thanks Nacin,

I was just wondering because the without making them global it still 
worked! (I did global them to make the notices go away, I was just 
surprised is all. Still can't understand why it worked.)


From wp at andrewnacin.com  Fri Aug 27 01:51:42 2010
From: wp at andrewnacin.com (Andrew Nacin)
Date: Thu, 26 Aug 2010 21:51:42 -0400
Subject: [wp-hackers] How do filters access variables outside of their
	function?
In-Reply-To: <i57291$bhd$1@dough.gmane.org>
References: <i56htf$i9h$1@dough.gmane.org>
	<AANLkTinr3F5VW3foaS=+Z4_aLOoF50kqtXcyBMUn=6ab@mail.gmail.com>
	<i57291$bhd$1@dough.gmane.org>
Message-ID: <AANLkTi=G6auYg5_HAVb4ER3KJDBqN62feSCXn2DGfTYD@mail.gmail.com>

On Thu, Aug 26, 2010 at 8:52 PM, Ken <Ken at adcstudio.com> wrote:
>
> Thanks Nacin,
>
> I was just wondering because the without making them global it still
> worked! (I did global them to make the notices go away, I was just surprised
> is all. Still can't understand why it worked.)


The one that requires $post->post_date needs global $post to work.
Otherwise, the instances of $post_ID are actually get_permalink( $post_ID ).
get_permalink() would thus be receiving a null value, which means it acts on
whichever post is currently being queried. So I imagine it should mostly
work fine.

From adam at littlefyr.com  Fri Aug 27 04:30:15 2010
From: adam at littlefyr.com (Adam van den Hoven)
Date: Thu, 26 Aug 2010 21:30:15 -0700
Subject: [wp-hackers] Editing media item fields
Message-ID: <AANLkTi=brkL+C=S0m=BCx=3sGPL=WYR2SRyaYJejMAEM@mail.gmail.com>

In a previous question I posted, Andrew Nacin gave the following advice:

In get_media_item(), $form_fields gets set like this:



$form_fields = get_attachment_fields_to_edit( $post, $errors );



In get_attachment_fields_to_edit(), you'll see a filter designed to
> modify/add fields.


So I had a look and low and behold the  line in question is:

$form_fields = apply_filters('attachment_fields_to_edit', $form_fields,
$post);

Since all I want is to select the URL a media Item and return it to the
calling page, I want to pull everything out and put in a single button.

I figure its always good to test stuff first (plus things didn't work the
way I expected) so I put in the following code in functions.php:

function hack_media_item_form_fields( $form_fields, $post ) {
    var_dump($form_fields);
    exit;
    return array();
}
add_filter('attachment_fields_to_edit', 'hack_media_item_form_fields',1,2);

Something should have happened but nothing did. I then running the same
against media_upload_media_item_form_fields.

Does anyone have any idea what I'm doing wrong?

From heiko.rabe at code-styling.de  Fri Aug 27 10:25:05 2010
From: heiko.rabe at code-styling.de (heiko.rabe at code-styling.de)
Date: Fri, 27 Aug 2010 12:25:05 +0200 (CEST)
Subject: [wp-hackers] plugin repository is broken since rewrite
Message-ID: <1172460894.18392.1282904705674.JavaMail.open-xchange@oxltgw04.schlund.de>

Did anybody experience that updating a plugin by SVN results into updated
changelog/pages and correct created *.zip file but still referencing the
previous version for download?
If the download of new version will be entered by hand, it can be downloaded and
is correct.
?
Any thoughts, hints or reasons ?
?
Heiko Rabe
(www.code-styling.de)

From elfin at elfden.co.uk  Fri Aug 27 12:36:17 2010
From: elfin at elfden.co.uk (Rich Pedley)
Date: Fri, 27 Aug 2010 13:36:17 +0100
Subject: [wp-hackers] International plugins - how to test
Message-ID: <4C77B141.4010406@elfden.co.uk>

As usual with people using my plugin getting anyone to test something 
out is a royal PITA, with people offering and never coming back, or 
plain not offering at all.

However I've identified an issue which I think I know how to correct, 
but would love to be able to test, but haven't got the foggiest on how to.

The issue - is my use of number_format
the fix (I think) is to use: number_format_i18n

But I don't want to implement this without some form of testing.

So how do you test in other langauges? What's the easiest method, and 
assuming I need to download a language pack which would you suggest 
for someone that can't actually understand foreign languages.

Suggestions welcome...

Rich


From heiko.rabe at code-styling.de  Fri Aug 27 12:49:30 2010
From: heiko.rabe at code-styling.de (heiko.rabe at code-styling.de)
Date: Fri, 27 Aug 2010 14:49:30 +0200 (CEST)
Subject: [wp-hackers] International plugins - how to test
In-Reply-To: <4C77B141.4010406@elfden.co.uk>
References: <4C77B141.4010406@elfden.co.uk>
Message-ID: <1516371314.26837.1282913370206.JavaMail.open-xchange@oxltgw17.schlund.de>

One easy way I use for checking foreign languages is to use my plugin
http://wordpress.org/extend/plugins/wp-native-dashboard/
It permits downloading the languages files available for your WordPress version
(including necessary additional files for rtl as example). Furthermore you can
activate the quick switcher option and can instantly switch between the
downloaded languages at dashboard on demand.

So if you place at your plugins/theme backend page the output for testing the
date formats (because the plugin operates at backend only), you should be able
to check them.
?
That's the way I am testing localized stuff.
?
hope this may help.
?
Heiko Rabe
(www.code-styling.de)
?

Rich Pedley <elfin at elfden.co.uk> hat am 27. August 2010 um 14:36 geschrieben:

> As usual with people using my plugin getting anyone to test something
> out is a royal PITA, with people offering and never coming back, or
> plain not offering at all.
>
> However I've identified an issue which I think I know how to correct,
> but would love to be able to test, but haven't got the foggiest on how to.
>
> The issue - is my use of number_format
> the fix (I think) is to use: number_format_i18n
>
> But I don't want to implement this without some form of testing.
>
> So how do you test in other langauges? What's the easiest method, and
> assuming I need to download a language pack which would you suggest
> for someone that can't actually understand foreign languages.
>
> Suggestions welcome...
>
> Rich
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

From timberge at cs.tu-berlin.de  Fri Aug 27 12:59:47 2010
From: timberge at cs.tu-berlin.de (Tim Berger)
Date: Fri, 27 Aug 2010 14:59:47 +0200
Subject: [wp-hackers] plugin repository is broken since rewrite
In-Reply-To: <1172460894.18392.1282904705674.JavaMail.open-xchange@oxltgw04.schlund.de>
References: <1172460894.18392.1282904705674.JavaMail.open-xchange@oxltgw04.schlund.de>
Message-ID: <4C77B6C3.3080404@cs.tu-berlin.de>

Well, I can not tell something about Heikos observations. But the "Log
in to vote." link is currently leading only to
http://wordpress.org/extend/plugins/ and not to the login dialogue.

Regards,
Tim

Am 27.08.2010 12:25, schrieb heiko.rabe at code-styling.de:
> Did anybody experience that updating a plugin by SVN results into updated
> changelog/pages and correct created *.zip file but still referencing the
> previous version for download?
> If the download of new version will be entered by hand, it can be downloaded and
> is correct.
>  
> Any thoughts, hints or reasons ?
>  
> Heiko Rabe
> (www.code-styling.de)
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

From elfin at elfden.co.uk  Fri Aug 27 13:58:36 2010
From: elfin at elfden.co.uk (Rich Pedley)
Date: Fri, 27 Aug 2010 14:58:36 +0100
Subject: [wp-hackers] plugin repository is broken since rewrite
In-Reply-To: <4C77B6C3.3080404@cs.tu-berlin.de>
References: <1172460894.18392.1282904705674.JavaMail.open-xchange@oxltgw04.schlund.de>
	<4C77B6C3.3080404@cs.tu-berlin.de>
Message-ID: <4C77C48C.6090509@elfden.co.uk>

On 27/08/2010 13:59, Tim Berger wrote:
> Well, I can not tell something about Heikos observations. But the "Log
> in to vote." link is currently leading only to
> http://wordpress.org/extend/plugins/ and not to the login dialogue.
>

Otto, and others?, are working on that section and redoing things, so 
there may be a few broken things here and there. I'd leave it a day or 
so until he/they have finished.


Rich

From elfin at elfden.co.uk  Fri Aug 27 14:02:02 2010
From: elfin at elfden.co.uk (Rich Pedley)
Date: Fri, 27 Aug 2010 15:02:02 +0100
Subject: [wp-hackers] International plugins - how to test
In-Reply-To: <1516371314.26837.1282913370206.JavaMail.open-xchange@oxltgw17.schlund.de>
References: <4C77B141.4010406@elfden.co.uk>
	<1516371314.26837.1282913370206.JavaMail.open-xchange@oxltgw17.schlund.de>
Message-ID: <4C77C55A.5070907@elfden.co.uk>

On 27/08/2010 13:49, heiko.rabe at code-styling.de wrote:
> One easy way I use for checking foreign languages is to use my plugin
> http://wordpress.org/extend/plugins/wp-native-dashboard/
> It permits downloading the languages files available for your WordPress version
> (including necessary additional files for rtl as example). Furthermore you can
> activate the quick switcher option and can instantly switch between the
> downloaded languages at dashboard on demand.
>
> So if you place at your plugins/theme backend page the output for testing the
> date formats (because the plugin operates at backend only), you should be able
> to check them.
>
> That's the way I am testing localized stuff.
>
> hope this may help.

yeah I saw that plugin, never thought of replicating things in back 
end to test though, good idea thanks!

Rich

From cross at thisismyurl.com  Fri Aug 27 14:08:47 2010
From: cross at thisismyurl.com (Christopher Ross)
Date: Fri, 27 Aug 2010 11:08:47 -0300
Subject: [wp-hackers] WP Hosting
Message-ID: <8D733FEB-DACA-48AC-94B0-F7E39A0B9A1B@thisismyurl.com>

I need a new host and I'm hoping somebody here has a serious recommendation.

By serious, I mean something that isn't just an affiliate link but is a really great WP hosting environment. My sites have hit ~150k a month in traffic, they're also being throttled at my hosting company an average of 4 hours a day with extensive optimization and caching in place.

What I'm looking for is somewhere with great WP support, full access to the servers and a stable history of offering quality support.

Anybody care to vouch for a company?

c.

__

Christopher Ross

Toronto      1 (416) 840-5828
Fredericton 1 (506) 474-2708
New Orleans 1 (504) 322 3485

http://christopherross.ca
http://www.thisismyurl.com


From dennen at gmail.com  Fri Aug 27 14:12:48 2010
From: dennen at gmail.com (Bill Dennen)
Date: Fri, 27 Aug 2010 10:12:48 -0400
Subject: [wp-hackers] WP Hosting
In-Reply-To: <8D733FEB-DACA-48AC-94B0-F7E39A0B9A1B@thisismyurl.com>
References: <8D733FEB-DACA-48AC-94B0-F7E39A0B9A1B@thisismyurl.com>
Message-ID: <AANLkTinbSZvAsV1yHA1WyzgL2Jn0Jx8US-wNBTW7uA1B@mail.gmail.com>

If you want full control over a server, a VPS might be the way to go.

I've had good luck with Linode and ServInt.

ServInt offers managed hosting -- they do backups and will help you install
stuff, too.

http://www.linode.com/ <http://www.linode.com/index.cfm>
http://www.servint.net/

Cheers-
Bill

On Fri, Aug 27, 2010 at 10:08 AM, Christopher Ross <cross at thisismyurl.com>wrote:

> I need a new host and I'm hoping somebody here has a serious
> recommendation.

From vid at zippykid.com  Fri Aug 27 14:17:58 2010
From: vid at zippykid.com (Vid Luther)
Date: Fri, 27 Aug 2010 09:17:58 -0500
Subject: [wp-hackers] WP Hosting
In-Reply-To: <8D733FEB-DACA-48AC-94B0-F7E39A0B9A1B@thisismyurl.com>
References: <8D733FEB-DACA-48AC-94B0-F7E39A0B9A1B@thisismyurl.com>
Message-ID: <802ADAF4-F089-4D5E-9DF3-F9ABAEF1F10A@zippykid.com>

If you know how to setup wordpress, mysql yourself and are comfortable with linux, Slicehost or Rackspace cloud servers would be your simplest bet.


I have personally started a managed wordpress hosting company, and I address some of the things you mention below, but there are others as well, wpengine is one, and page.ly is another.


I would personally only use one of the three above, I'm sure you know who'll I would like you to pick first :).

Mine: zippykid.com
WPEngine: wpengine.com
Page.ly: page.ly

I've met the founders of wp engine, they're cool people, I trust them, page.ly has been getting a lot of press lately, they must be doing something right :). I'm the new kid in town.


On Aug 27, 2010, at 9:08 AM, Christopher Ross wrote:

> I need a new host and I'm hoping somebody here has a serious recommendation.
> 
> By serious, I mean something that isn't just an affiliate link but is a really great WP hosting environment. My sites have hit ~150k a month in traffic, they're also being throttled at my hosting company an average of 4 hours a day with extensive optimization and caching in place.
> 
> What I'm looking for is somewhere with great WP support, full access to the servers and a stable history of offering quality support.
> 
> Anybody care to vouch for a company?
> 
> c.
> 
> __
> 
> Christopher Ross
> 
> Toronto      1 (416) 840-5828
> Fredericton 1 (506) 474-2708
> New Orleans 1 (504) 322 3485
> 
> http://christopherross.ca
> http://www.thisismyurl.com
> 
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers


From jwriteclub at gmail.com  Fri Aug 27 14:20:01 2010
From: jwriteclub at gmail.com (Christopher O'Connell)
Date: Fri, 27 Aug 2010 07:20:01 -0700
Subject: [wp-hackers] WP Hosting
In-Reply-To: <AANLkTinbSZvAsV1yHA1WyzgL2Jn0Jx8US-wNBTW7uA1B@mail.gmail.com>
References: <8D733FEB-DACA-48AC-94B0-F7E39A0B9A1B@thisismyurl.com>
	<AANLkTinbSZvAsV1yHA1WyzgL2Jn0Jx8US-wNBTW7uA1B@mail.gmail.com>
Message-ID: <AANLkTimbZHx-C_1Baggcw8U-5+S0zvLVUK87kQ6=_Lxz@mail.gmail.com>

I've had good luck with Slicehost [http://slicehost.com].

Plus, in addition to being a great virtual server company, they pool
bandwidth, which makes it really easy to scale your bandwidth. I'd imagine
that a 384k slice should handle your 150k/month if set up correctly.

~ Christopher

On Fri, Aug 27, 2010 at 07:12, Bill Dennen <dennen at gmail.com> wrote:

> If you want full control over a server, a VPS might be the way to go.
>
> I've had good luck with Linode and ServInt.
>
> ServInt offers managed hosting -- they do backups and will help you install
> stuff, too.
>
> http://www.linode.com/ <http://www.linode.com/index.cfm>
> http://www.servint.net/
>
> Cheers-
> Bill
>
> On Fri, Aug 27, 2010 at 10:08 AM, Christopher Ross <cross at thisismyurl.com
> >wrote:
>
> > I need a new host and I'm hoping somebody here has a serious
> > recommendation.
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From dvmorris at gmail.com  Fri Aug 27 14:36:26 2010
From: dvmorris at gmail.com (David Morris)
Date: Fri, 27 Aug 2010 09:36:26 -0500
Subject: [wp-hackers] Strange Issue after upgrading wpmu 2.9.1 to 3.0.1
 - blog home pages randomly show up blank
In-Reply-To: <AANLkTiksXQQrS2xrushS9aZN=C+kcvbRXgUCppS3K4x+@mail.gmail.com>
References: <AANLkTi=o=9M12+nZ6B=hH7AU5PHz2qu8unPC6MQEt7aq@mail.gmail.com>
	<AANLkTikdGOnwD1UT82nRSFMPirFGaN=nENNHB-qo5AP-@mail.gmail.com>
	<AANLkTiksXQQrS2xrushS9aZN=C+kcvbRXgUCppS3K4x+@mail.gmail.com>
Message-ID: <AANLkTi=saimhsS4mKSs80jfebc0edbqgxjEz_kY358ME@mail.gmail.com>

As far as I know, the upgrade script for these particular blogs had already
been run, but that's a good point. I will check again. Is there a simple way
to look in the DB to see whether a site has been "upgraded" or not?

Dave

On Thu, Aug 26, 2010 at 11:10 AM, Ryan Bilesky <rbilesky at gmail.com> wrote:

> Did you run the upgrade script?  Because if not accessing wp-admin for the
> blog might upgrade just that blog so it will work, but thats just a total
> guess.
>
> On Thu, Aug 26, 2010 at 8:18 AM, David Morris <dvmorris at gmail.com> wrote:
>
> > After some more tinkering with the upgrade from 2.9.1 to 3.0, it looks as
> > though none of the sites will actually work until you first visit the
> > site's
> > wp-admin page. We have ~800 blogs running on this platform, so I guess
> > we'll
> > have to write a script to hit up each /wp-admin page before going live.
> >
> > Is this expected behavior, or is that just a coincidence that the blog
> > starts working after visiting the /wp-admin page?
> >
> > Thanks,
> >  Dave
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers at lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> >
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>



-- 
Dave Morris
http://dave.showviz.net/
http://3dcamphouston.com/

From mailapera at gmail.com  Fri Aug 27 15:38:23 2010
From: mailapera at gmail.com (mailapera)
Date: Fri, 27 Aug 2010 17:38:23 +0200
Subject: [wp-hackers] WP Hosting
In-Reply-To: <AANLkTimbZHx-C_1Baggcw8U-5+S0zvLVUK87kQ6=_Lxz@mail.gmail.com>
References: <8D733FEB-DACA-48AC-94B0-F7E39A0B9A1B@thisismyurl.com>
	<AANLkTinbSZvAsV1yHA1WyzgL2Jn0Jx8US-wNBTW7uA1B@mail.gmail.com>
	<AANLkTimbZHx-C_1Baggcw8U-5+S0zvLVUK87kQ6=_Lxz@mail.gmail.com>
Message-ID: <AANLkTi=p2V0yMH+cv7=r_qD4W1F4FBjaWqFv_tpqSw0D@mail.gmail.com>

Spry is a good one


On Fri, Aug 27, 2010 at 4:20 PM, Christopher O'Connell <jwriteclub at gmail.com
> wrote:

> I've had good luck with Slicehost [http://slicehost.com].
>
> Plus, in addition to being a great virtual server company, they pool
> bandwidth, which makes it really easy to scale your bandwidth. I'd imagine
> that a 384k slice should handle your 150k/month if set up correctly.
>
> ~ Christopher
>
> On Fri, Aug 27, 2010 at 07:12, Bill Dennen <dennen at gmail.com> wrote:
>
> > If you want full control over a server, a VPS might be the way to go.
> >
> > I've had good luck with Linode and ServInt.
> >
> > ServInt offers managed hosting -- they do backups and will help you
> install
> > stuff, too.
> >
> > http://www.linode.com/ <http://www.linode.com/index.cfm>
> > http://www.servint.net/
> >
> > Cheers-
> > Bill
> >
> > On Fri, Aug 27, 2010 at 10:08 AM, Christopher Ross <
> cross at thisismyurl.com
> > >wrote:
> >
> > > I need a new host and I'm hoping somebody here has a serious
> > > recommendation.
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers at lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> >
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From matt at mattjacob.com  Fri Aug 27 16:03:42 2010
From: matt at mattjacob.com (Matt Jacob)
Date: Fri, 27 Aug 2010 09:03:42 -0700
Subject: [wp-hackers] WP Hosting
In-Reply-To: <8D733FEB-DACA-48AC-94B0-F7E39A0B9A1B@thisismyurl.com>
References: <8D733FEB-DACA-48AC-94B0-F7E39A0B9A1B@thisismyurl.com>
Message-ID: <4C77E1DE.9080502@mattjacob.com>

On 8/27/10 7:08 AM, Christopher Ross wrote:
> By serious, I mean something that isn't just an affiliate link but is
> a really great WP hosting environment. My sites have hit ~150k a
> month in traffic, they're also being throttled at my hosting company
> an average of 4 hours a day with extensive optimization and caching
> in place.

Is that 150,000 uniques or just 150,000 *pageviews*?

I recommend WebFaction for shared hosting and Linode for VPS.

Matt

From kenzaraque at gmail.com  Fri Aug 27 16:39:25 2010
From: kenzaraque at gmail.com (ken zarque)
Date: Fri, 27 Aug 2010 09:39:25 -0700
Subject: [wp-hackers] multiple databases vs different database prefixes
In-Reply-To: <A71CC655-BAA4-4FDB-9C5A-90E73589140A@bu.edu>
References: <2DCF84D4-97F6-4719-98FE-BBA7232D0F59@gmail.com>
	<F7E4F6D6-B1D9-44CB-B5E3-9281465D4392@striderweb.com>
	<AANLkTimn4HvWMRJECLeA=Li2jEdXdBYLFB2=U4Cb77ne@mail.gmail.com>
	<AANLkTi=KydZSqYAf2TStZ4r2vrN_YMZAMpd9cn2fq=2v@mail.gmail.com>
	<A71CC655-BAA4-4FDB-9C5A-90E73589140A@bu.edu>
Message-ID: <AANLkTikGqXrW6RkB3M41D09Utjd2-6RjiKuGaz9H9TNj@mail.gmail.com>

@Mike : Thank you for the link. I posted my question there.

@Cornelius :
can you give me a gist of what these hiccups were?
maybe a fully automated deployment procedure is not possible with WP MS.

I'm having difficulty looking for best practices for site deployment in MS.



On Wed, Aug 25, 2010 at 10:55 AM, Cornelius, Gregory <gcorne at bu.edu> wrote:

> This is not for the feint of heart, especially if the environments are
> hooked up to different databases and the global tables (wp_blogs, wp_site,
> etc...) are not synchronized.
>
> I have been working with a group of developers on a large MPMU installation
> for a couple years, and we still don't have an ideal setup for prod,
> staging, test, devel, and development branches.  We are getting closer, but
> there have been lots of hiccups along the way.
>
> Two improvements that I would like to see happen are: an API for
> fetching/modifying blog settings (including widgets/sidebars) across a
> number of blogs in one fell swoop and a fully supported method for
> bootstrapping WordPress in a PHP script from the CLI .
>
> On Aug 23, 2010, at 10:57 AM, Jeremy Clarke wrote:
>
> > On Fri, Aug 20, 2010 at 3:38 PM, ken zarque <kenzaraque at gmail.com>
> wrote:
> >
> >>
> >> After installing WP with MS turned on, we ran into this question "How do
> we
> >> deploy single sites in an MS environment from one environment to
> another".
> >> This is because we have a dev, staging and production environment.
> >>
> >> Note: Should I be asking this on a separate thread?
> >>
> >>
> > Yes. It is a different (though related) can of worms. I am very
> interested
> > in the answers people give you though, as you're asking about the most
> > obnoxious part of MS deployment.
> >
> > --
> > Jeremy Clarke | http://jeremyclarke.org
> > Organizer | http://wordcampmontreal.org
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers at lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From patrik.bona at mrhead.sk  Fri Aug 27 17:38:47 2010
From: patrik.bona at mrhead.sk (=?ISO-8859-1?Q?Patrik_B=F3na?=)
Date: Fri, 27 Aug 2010 19:38:47 +0200
Subject: [wp-hackers] WordPress multisite without shared user table ?
Message-ID: <4C77F827.8020701@mrhead.sk>

Hello hackers,

I want to setup enviroment with more sites (with WordPress MS), but i 
don't want to share users between these sites...

Do you know any easy way how to do it ? To have own user table for each 
site would be best, but another solution would be appreciated, too.

Many thanks

Patrik

From andrew at graymerica.com  Fri Aug 27 17:48:51 2010
From: andrew at graymerica.com (Andrew Gray)
Date: Fri, 27 Aug 2010 13:48:51 -0400
Subject: [wp-hackers] WP Hosting
Message-ID: <D9C17D80-F567-4838-B4E9-3FAD2F2DD655@graymerica.com>

I am huge fan of both Media Temple Grid and Rack Space Cloud Sites for hosting wordpress.

Both sell CPU cycles on their grids and do not make you deal with the LAMP stack.

We host 40 WP sites on one Media Temple Grid account for $20 per month, + $20 for the upgraded DB.  I use w3 cache for most of them.  Media Temple grid gives you SSH access, php.ini etc.

We also host our bigger sites on Rack Space Cloud Sites.  It is not a VPS , but a LAMP stack that you load your stuff into via SFTP.  You do not get much control over the server, but you also do not have to deal with DOS attacks, software upgrades, etc.   It is crazy fast.  The DB allows 500 connections and is a massive cluster.  It also has automatic daily and weekly snapshot backups.

We have one client doing 5M+ page views on there an using around 100% of one account.  They charge for overages, and never throttle.  It cost a min $150 per month + Bandwidth overages ( about 2.5Tb per month via Max CDN) 

Rack Space cloud Sites is spendy, but well worth it if you do not want to monkey with a server and you want your site to be very fast without caching.

I love the grid stuff, exactly because I do not have to have access to the server,  I just runs.

For your size, I would give Media Temple a try.  Sometime they have weird problems, but I have found them to be a good host.  Hold times are long at times though, if that is a pet peeve, I would skip them.

Andrew





> I need a new host and I'm hoping somebody here has a serious recommendation.
> 
> By serious, I mean something that isn't just an affiliate link but is a really great WP hosting environment. My sites have hit ~150k a month in traffic, they're also being throttled at my hosting company an average of 4 hours a day with extensive optimization and caching in place.
> 
> What I'm looking for is somewhere with great WP support, full access to the servers and a stable history of offering quality support.
> 
> Anybody care to vouch for a company?
> 
> c.

From mda at blogwaffe.com  Fri Aug 27 17:57:53 2010
From: mda at blogwaffe.com (Michael D Adams)
Date: Fri, 27 Aug 2010 10:57:53 -0700
Subject: [wp-hackers] plugin repository is broken since rewrite
In-Reply-To: <1172460894.18392.1282904705674.JavaMail.open-xchange@oxltgw04.schlund.de>
References: <1172460894.18392.1282904705674.JavaMail.open-xchange@oxltgw04.schlund.de>
Message-ID: <AANLkTimx-HP4OD4Kpfzevwz27hTNzFsJsQP7zZGaPG0K@mail.gmail.com>

On Fri, Aug 27, 2010 at 3:25 AM, heiko.rabe at code-styling.de
<heiko.rabe at code-styling.de> wrote:
> Did anybody experience that updating a plugin by SVN results into updated
> changelog/pages and correct created *.zip file but still referencing the
> previous version for download?
> If the download of new version will be entered by hand, it can be downloaded and
> is correct.
>
> Any thoughts, hints or reasons ?

What plugin specifically?

Mike
--mdawaffe

From otto at ottodestruct.com  Fri Aug 27 18:01:42 2010
From: otto at ottodestruct.com (Otto)
Date: Fri, 27 Aug 2010 13:01:42 -0500
Subject: [wp-hackers] plugin repository is broken since rewrite
In-Reply-To: <1172460894.18392.1282904705674.JavaMail.open-xchange@oxltgw04.schlund.de>
References: <1172460894.18392.1282904705674.JavaMail.open-xchange@oxltgw04.schlund.de>
Message-ID: <AANLkTimh+HB-vEvW-KMOz9JFb+-bF9+cdQkZkD1J0yG=@mail.gmail.com>

On Fri, Aug 27, 2010 at 5:25 AM, heiko.rabe at code-styling.de
<heiko.rabe at code-styling.de> wrote:
> Did anybody experience that updating a plugin by SVN results into updated
> changelog/pages and correct created *.zip file but still referencing the
> previous version for download?
> If the download of new version will be entered by hand, it can be downloaded and
> is correct.
>
> Any thoughts, hints or reasons ?

Actually, this was happening before the upgrade. The creation of the
ZIP files and putting them into the cache takes a fair amount of time,
so for a few minutes or so after the plugin update shows up, the zip
file will still be the old one.

This has always been the case, as far as I know.

If it's still not showing up after about 10 minutes, then there may be an issue.

-Otto

From mda at blogwaffe.com  Fri Aug 27 18:07:09 2010
From: mda at blogwaffe.com (Michael D Adams)
Date: Fri, 27 Aug 2010 11:07:09 -0700
Subject: [wp-hackers] plugin repository is broken since rewrite
In-Reply-To: <4C77B6C3.3080404@cs.tu-berlin.de>
References: <1172460894.18392.1282904705674.JavaMail.open-xchange@oxltgw04.schlund.de>
	<4C77B6C3.3080404@cs.tu-berlin.de>
Message-ID: <AANLkTiks4qwBGEZ00T_Ld2=CqWSMj9OfTUWksAw_4zwB@mail.gmail.com>

On Fri, Aug 27, 2010 at 5:59 AM, Tim Berger <timberge at cs.tu-berlin.de> wrote:
> Well, I can not tell something about Heikos observations. But the "Log
> in to vote." link is currently leading only to
> http://wordpress.org/extend/plugins/ and not to the login dialogue.

Fixed.

From lists at mollentze.co.za  Fri Aug 27 18:14:21 2010
From: lists at mollentze.co.za (Werner)
Date: Fri, 27 Aug 2010 20:14:21 +0200
Subject: [wp-hackers] Global meta_key ordering for a custom post type
Message-ID: <4C78007D.10706@mollentze.co.za>

  Hi Hackers,

I'm writing a plugin that enables a custom post type for WP3. The post type is 
for tasks, so I use a meta_key "priority" that I would like to sort the posts by.

Doing the widget is a snap, I'm using:

         $r = new WP_Query(
             array(
                 'post_type'    => 'custom_task_type',
                 'post_status'  => 'publish',
                 'meta_key'     => 'priority',
                 'orderby'      => 'meta_value',
                 'order'        => 'DESC',
                 'meta_compare' => '>=',
                 'meta_value'   => 5,
                 ...
             )
         );
         ...
         wp_reset_postdata();

... to sort the posts for the widget using the "priority" meta_key's value and 
only accounting for posts with a "priority" meta_value greater than 5.

*But*... for general post ordering in archive (I also have custom taxonomies) 
and single page mode (that would also influence things like get_next_post()), 
I'd like to be able to influence the global loop ordering, using the priority 
meta_key, for *any* query that involves my custom post type.

Basically, my custom post type should never be ordered by post date, under any 
circumstances - always by using the meta_key's value, otherwise the ordering 
would simply not make any sense.

What is the best hook to use in my plugin, to influence the ordering of any 
query that *involves* my custom post type? Should I go the query_posts() route?

A simple example would mean the world to me at this point.

Thanks for your time and effort if you have read this far :)

From marco.mehnert at x28.ch  Fri Aug 27 18:14:58 2010
From: marco.mehnert at x28.ch (marco.mehnert at x28.ch)
Date: 27 Aug 2010 20:14:58 +0200
Subject: [wp-hackers]
	=?utf-8?q?wp-hackers_Digest=2C_Vol_67=2C_Issue_104?=
Message-ID: <20100827181458.7459.qmail@everest.ch-meta.net>

Guten Tag

Ich bin bis am 10.09.2010 im Urlaub. Ihre E-Mail wird nicht weitergeleitet. F?r dringende oder wichtige Angelegenheiten wenden Sie sich bitte an Herrn Christian Hanisch: 043 305 77 49 oder christian.hanisch at x28.ch.

Besten Dank und freundliche Gr?sse

-- 
Marco Mehnert
Dipl. Wirtschaftsingenieur FH
Leiter Operations & Support

x28 AG
Badestra?e 2
D-39114 Magdeburg
+49 391 50 58 48 61

www.x28.ch
marco.mehnert at x28.ch



From gregg at fatheaddesign.com  Fri Aug 27 18:24:04 2010
From: gregg at fatheaddesign.com (Gregg F. Tomlinson)
Date: Fri, 27 Aug 2010 13:24:04 -0500
Subject: [wp-hackers] WP Hosting
In-Reply-To: <D9C17D80-F567-4838-B4E9-3FAD2F2DD655@graymerica.com>
References: <D9C17D80-F567-4838-B4E9-3FAD2F2DD655@graymerica.com>
Message-ID: <EA923B03-CC65-4192-9523-859C69B8DD55@fatheaddesign.com>

I personally host WP sites on both a dv server at Media Temple and on  
a dedicated RHEL box at Rackspace. Obviously the RHEL box is  
fantastic, but not very good on the budget (I am hosting a bunch of  
Magento ecomm sites on this box as well so that's how I justify the  
cost). The dv at Media Temple does a great job for hosting multiple WP  
sites, and they do offer SSH access so that's a big plus.

I'm hearing lots of good stuff about WP Engine hosting on Twitter but  
don't know of anyone personally who has used them yet -  http://wpengine.com/

--g


On Aug 27, 2010, at 12:48 PM, Andrew Gray wrote:

> I am huge fan of both Media Temple Grid and Rack Space Cloud Sites  
> for hosting wordpress.
>
> Both sell CPU cycles on their grids and do not make you deal with  
> the LAMP stack.
>
> We host 40 WP sites on one Media Temple Grid account for $20 per  
> month, + $20 for the upgraded DB.  I use w3 cache for most of them.   
> Media Temple grid gives you SSH access, php.ini etc.
>
> We also host our bigger sites on Rack Space Cloud Sites.  It is not  
> a VPS , but a LAMP stack that you load your stuff into via SFTP.   
> You do not get much control over the server, but you also do not  
> have to deal with DOS attacks, software upgrades, etc.   It is crazy  
> fast.  The DB allows 500 connections and is a massive cluster.  It  
> also has automatic daily and weekly snapshot backups.
>
> We have one client doing 5M+ page views on there an using around  
> 100% of one account.  They charge for overages, and never throttle.   
> It cost a min $150 per month + Bandwidth overages ( about 2.5Tb per  
> month via Max CDN)
>
> Rack Space cloud Sites is spendy, but well worth it if you do not  
> want to monkey with a server and you want your site to be very fast  
> without caching.
>
> I love the grid stuff, exactly because I do not have to have access  
> to the server,  I just runs.
>
> For your size, I would give Media Temple a try.  Sometime they have  
> weird problems, but I have found them to be a good host.  Hold times  
> are long at times though, if that is a pet peeve, I would skip them.
>
> Andrew
>
>
>
>
>
>> I need a new host and I'm hoping somebody here has a serious  
>> recommendation.
>>
>> By serious, I mean something that isn't just an affiliate link but  
>> is a really great WP hosting environment. My sites have hit ~150k a  
>> month in traffic, they're also being throttled at my hosting  
>> company an average of 4 hours a day with extensive optimization and  
>> caching in place.
>>
>> What I'm looking for is somewhere with great WP support, full  
>> access to the servers and a stable history of offering quality  
>> support.
>>
>> Anybody care to vouch for a company?
>>
>> c.
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

::::  ::::  ::::

Gregg Tomlinson
Principal

fathead design, inc.
1329 W. Loyola Ave.
Suite G2
Chicago, Illinois  60626

p: 773.338.1313
f: 773.338.1340

Twitter: @fatheaddesign

http://www.fatheaddesign.com

** please consider the environment before you print this e-mail **





From mikeschinkel at newclarity.net  Fri Aug 27 18:47:36 2010
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Fri, 27 Aug 2010 14:47:36 -0400
Subject: [wp-hackers] WP Hosting
In-Reply-To: <AANLkTimbZHx-C_1Baggcw8U-5+S0zvLVUK87kQ6=_Lxz@mail.gmail.com>
References: <8D733FEB-DACA-48AC-94B0-F7E39A0B9A1B@thisismyurl.com>
	<AANLkTinbSZvAsV1yHA1WyzgL2Jn0Jx8US-wNBTW7uA1B@mail.gmail.com>
	<AANLkTimbZHx-C_1Baggcw8U-5+S0zvLVUK87kQ6=_Lxz@mail.gmail.com>
Message-ID: <7ADEF682-C5C9-4C68-8C51-1AC23970E24E@newclarity.net>

On Aug 27, 2010, at 10:20 AM, Christopher O'Connell wrote:

> I've had good luck with Slicehost [http://slicehost.com].
> 
> Plus, in addition to being a great virtual server company, they pool
> bandwidth, which makes it really easy to scale your bandwidth. I'd imagine
> that a 384k slice should handle your 150k/month if set up correctly.

I'm a dev who loves going deep with the WordPress API but want to have a server control panel that configures whatever I need on the server; i.e. I don't want to have to build it myself.

So for SliceHost (and any of the others) do you need to know how to configure a server? 

-Mike



From mikeschinkel at newclarity.net  Fri Aug 27 19:01:17 2010
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Fri, 27 Aug 2010 15:01:17 -0400
Subject: [wp-hackers] Global meta_key ordering for a custom post type
In-Reply-To: <4C78007D.10706@mollentze.co.za>
References: <4C78007D.10706@mollentze.co.za>
Message-ID: <4F59F444-971F-4830-BDFA-67D26E9C459C@newclarity.net>

If you *always* want to influence the ordering, then I think pre_get_posts might be it. Something like:

add_action('pre_get_posts','custom_priority_orderby');
function custom_priority_orderby($query){
    if(your_criteria()){
       $query->set('meta_key','priority');
       $query->set('orderby','meta_value');
    }
}

Hope this helps.

-Mike

On Aug 27, 2010, at 2:14 PM, Werner wrote:

> Hi Hackers,
> 
> I'm writing a plugin that enables a custom post type for WP3. The post type is for tasks, so I use a meta_key "priority" that I would like to sort the posts by.
> 
> Doing the widget is a snap, I'm using:
> 
>        $r = new WP_Query(
>            array(
>                'post_type'    => 'custom_task_type',
>                'post_status'  => 'publish',
>                'meta_key'     => 'priority',
>                'orderby'      => 'meta_value',
>                'order'        => 'DESC',
>                'meta_compare' => '>=',
>                'meta_value'   => 5,
>                ...
>            )
>        );
>        ...
>        wp_reset_postdata();
> 
> ... to sort the posts for the widget using the "priority" meta_key's value and only accounting for posts with a "priority" meta_value greater than 5.
> 
> *But*... for general post ordering in archive (I also have custom taxonomies) and single page mode (that would also influence things like get_next_post()), I'd like to be able to influence the global loop ordering, using the priority meta_key, for *any* query that involves my custom post type.
> 
> Basically, my custom post type should never be ordered by post date, under any circumstances - always by using the meta_key's value, otherwise the ordering would simply not make any sense.
> 
> What is the best hook to use in my plugin, to influence the ordering of any query that *involves* my custom post type? Should I go the query_posts() route?
> 
> A simple example would mean the world to me at this point.
> 
> Thanks for your time and effort if you have read this far :)
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers


From heiko.rabe at code-styling.de  Fri Aug 27 19:03:24 2010
From: heiko.rabe at code-styling.de (Heiko Rabe)
Date: Fri, 27 Aug 2010 21:03:24 +0200
Subject: [wp-hackers] plugin repository is broken since rewrite
In-Reply-To: <AANLkTimh+HB-vEvW-KMOz9JFb+-bF9+cdQkZkD1J0yG=@mail.gmail.com>
References: <1172460894.18392.1282904705674.JavaMail.open-xchange@oxltgw04.schlund.de>
	<AANLkTimh+HB-vEvW-KMOz9JFb+-bF9+cdQkZkD1J0yG=@mail.gmail.com>
Message-ID: <001701cb461a$86562e40$93028ac0$@rabe@code-styling.de>

Please look at this as example:
http://wordpress.org/extend/plugins/wptouch/changelog/

New version exists but since hours the wrong version is shown as download.
WordPress build in update shows correct version.

-----Urspr?ngliche Nachricht-----
Von: wp-hackers-bounces at lists.automattic.com
[mailto:wp-hackers-bounces at lists.automattic.com] Im Auftrag von Otto
Gesendet: Freitag, 27. August 2010 20:02
An: wp-hackers at lists.automattic.com
Betreff: Re: [wp-hackers] plugin repository is broken since rewrite

On Fri, Aug 27, 2010 at 5:25 AM, heiko.rabe at code-styling.de
<heiko.rabe at code-styling.de> wrote:
> Did anybody experience that updating a plugin by SVN results into updated
> changelog/pages and correct created *.zip file but still referencing the
> previous version for download?
> If the download of new version will be entered by hand, it can be
downloaded and
> is correct.
>
> Any thoughts, hints or reasons ?

Actually, this was happening before the upgrade. The creation of the
ZIP files and putting them into the cache takes a fair amount of time,
so for a few minutes or so after the plugin update shows up, the zip
file will still be the old one.

This has always been the case, as far as I know.

If it's still not showing up after about 10 minutes, then there may be an
issue.

-Otto
_______________________________________________
wp-hackers mailing list
wp-hackers at lists.automattic.com
http://lists.automattic.com/mailman/listinfo/wp-hackers


From matt at mattjacob.com  Fri Aug 27 19:10:50 2010
From: matt at mattjacob.com (Matt Jacob)
Date: Fri, 27 Aug 2010 12:10:50 -0700
Subject: [wp-hackers] WP Hosting
In-Reply-To: <7ADEF682-C5C9-4C68-8C51-1AC23970E24E@newclarity.net>
References: <8D733FEB-DACA-48AC-94B0-F7E39A0B9A1B@thisismyurl.com>	<AANLkTinbSZvAsV1yHA1WyzgL2Jn0Jx8US-wNBTW7uA1B@mail.gmail.com>	<AANLkTimbZHx-C_1Baggcw8U-5+S0zvLVUK87kQ6=_Lxz@mail.gmail.com>
	<7ADEF682-C5C9-4C68-8C51-1AC23970E24E@newclarity.net>
Message-ID: <4C780DBA.5080103@mattjacob.com>

On 8/27/10 11:47 AM, Mike Schinkel wrote:
> So for SliceHost (and any of the others) do you need to know how to
> configure a server?

Yes. Most/all of the VPS accounts for $20/mo. are unmanaged. Some 
providers will sell or license you control panel software, but the 
target audience is really Linux sysadmin-type people.

Both Slicehost and Linode offer lots of tutorials on how to set up 
common server software, but there's a big difference between knowing how 
to do something and actually having done something. IMO, the best way to 
learn is from grizzled old sysadmins who've been there before.

You should also install Debian or CentOS in a local environment so that 
you can get comfortable with it before venturing out into the hazards of 
the internet.

Matt

From jwriteclub at gmail.com  Fri Aug 27 19:14:14 2010
From: jwriteclub at gmail.com (Christopher O'Connell)
Date: Fri, 27 Aug 2010 12:14:14 -0700
Subject: [wp-hackers] WP Hosting
In-Reply-To: <7ADEF682-C5C9-4C68-8C51-1AC23970E24E@newclarity.net>
References: <8D733FEB-DACA-48AC-94B0-F7E39A0B9A1B@thisismyurl.com>
	<AANLkTinbSZvAsV1yHA1WyzgL2Jn0Jx8US-wNBTW7uA1B@mail.gmail.com>
	<AANLkTimbZHx-C_1Baggcw8U-5+S0zvLVUK87kQ6=_Lxz@mail.gmail.com>
	<7ADEF682-C5C9-4C68-8C51-1AC23970E24E@newclarity.net>
Message-ID: <AANLkTi=gf8mfhJoxPOwvZezvTcKLbxzYj4OxooqPGBNq@mail.gmail.com>

For slicehost (and most of the VPSs) you need to configure it, BUT,

1) It's nothing very complicated
2) There are excellent tutorials at Slicehost (and others) about what you
need to do
3) There's far less "crapware" on a slice with just what you need than on
most "panel configured" systems. You'll be amazed how much faster it runs.

I don't dislike the Media Temple (mt) grid, but, I wouldn't recommend it for
a commercial site. While it is quite inexpensive, it is too slow for a
commercial site, and experiences weird and unexpected outages, data loss,
&c. I use it to host dev sites and sites that I'm "giving away" (e.g. hobby
groups, &c.), but host production sites on Slicehost or Amazon EC2. I
haven't used the new Rackspace cloud servers yet, but they seem interesting.

The managed wordpress seems like a really interesting option, but I'm not
sure I could give up that much control.

My 2c.

~ Christopher

On Fri, Aug 27, 2010 at 11:47, Mike Schinkel <mikeschinkel at newclarity.net>wrote:

> On Aug 27, 2010, at 10:20 AM, Christopher O'Connell wrote:
>
> > I've had good luck with Slicehost [http://slicehost.com].
> >
> > Plus, in addition to being a great virtual server company, they pool
> > bandwidth, which makes it really easy to scale your bandwidth. I'd
> imagine
> > that a 384k slice should handle your 150k/month if set up correctly.
>
> I'm a dev who loves going deep with the WordPress API but want to have a
> server control panel that configures whatever I need on the server; i.e. I
> don't want to have to build it myself.
>
> So for SliceHost (and any of the others) do you need to know how to
> configure a server?
>
> -Mike
>
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From mda at blogwaffe.com  Fri Aug 27 19:44:01 2010
From: mda at blogwaffe.com (Michael D Adams)
Date: Fri, 27 Aug 2010 12:44:01 -0700
Subject: [wp-hackers] plugin repository is broken since rewrite
In-Reply-To: <1878913031858569593@unknownmsgid>
References: <1172460894.18392.1282904705674.JavaMail.open-xchange@oxltgw04.schlund.de>
	<AANLkTimh+HB-vEvW-KMOz9JFb+-bF9+cdQkZkD1J0yG=@mail.gmail.com>
	<1878913031858569593@unknownmsgid>
Message-ID: <AANLkTi=dhXjiZqL5OxUMkr-0_ctj_cRcE-7ozezeKdAq@mail.gmail.com>

On Fri, Aug 27, 2010 at 12:03 PM, Heiko Rabe <heiko.rabe at code-styling.de> wrote:
> Please look at this as example:
> http://wordpress.org/extend/plugins/wptouch/changelog/
>
> New version exists but since hours the wrong version is shown as download.
> WordPress build in update shows correct version.

I'm not sure what was wrong here.  I resynced the plugins directory to
that plugin and it now shows the correct version.

I suspect there's some caching bug.  If you see another example,
please let me know.

Mike
--mdawaffe

From viniciusandre at gmail.com  Fri Aug 27 20:12:10 2010
From: viniciusandre at gmail.com (Vinicius Massuchetto)
Date: Fri, 27 Aug 2010 17:12:10 -0300
Subject: [wp-hackers] Multiple installations with same tables
In-Reply-To: <AANLkTim6RkZbrNjDDxNeO+VcU1zeOtgQK1So4sfhaZcz@mail.gmail.com>
References: <AANLkTikcp0-TabGCfmDNe+oTawxr4rwh9j23MBzPKNYN@mail.gmail.com>
	<AANLkTi=MpZYgubNNrDNbBuVkEHFn1OTuQzw8euSggR0O@mail.gmail.com>
	<AANLkTin1wSMouKCT_zfVW=98JZeHsLAWh-_+n3zQ1Nd9@mail.gmail.com>
	<AANLkTi=E=b1doVSUrHnW=9Kiu0fVzp0ufv1-aCLhVVc-@mail.gmail.com>
	<AANLkTim6RkZbrNjDDxNeO+VcU1zeOtgQK1So4sfhaZcz@mail.gmail.com>
Message-ID: <AANLkTikc-dGKG4ViN1TXAJYUuw94fjsnfzT9guWaxbDs@mail.gmail.com>

2010/8/26 Jacob Santos <wordpress at santosj.name>:
> Hmm, that is a good question. I would have to look at how the functions and
> what modifications were made for Multisite.

I'm quite stuck on this. I tried to modify some variables into
$wp_query and other places. Does anyone knows if it's possible to
instantly control the domain name through the init, wp, or any other
hook on multisite? If it is, what do I need to change?

Thanks
Vinicius

From marco.mehnert at x28.ch  Fri Aug 27 20:13:00 2010
From: marco.mehnert at x28.ch (marco.mehnert at x28.ch)
Date: 27 Aug 2010 22:13:00 +0200
Subject: [wp-hackers]
	=?utf-8?q?wp-hackers_Digest=2C_Vol_67=2C_Issue_105?=
Message-ID: <20100827201300.28122.qmail@everest.ch-meta.net>

Guten Tag

Ich bin bis am 10.09.2010 im Urlaub. Ihre E-Mail wird nicht weitergeleitet. F?r dringende oder wichtige Angelegenheiten wenden Sie sich bitte an Herrn Christian Hanisch: 043 305 77 49 oder christian.hanisch at x28.ch.

Besten Dank und freundliche Gr?sse

-- 
Marco Mehnert
Dipl. Wirtschaftsingenieur FH
Leiter Operations & Support

x28 AG
Badestra?e 2
D-39114 Magdeburg
+49 391 50 58 48 61

www.x28.ch
marco.mehnert at x28.ch



From rbilesky at gmail.com  Fri Aug 27 20:19:45 2010
From: rbilesky at gmail.com (Ryan Bilesky)
Date: Fri, 27 Aug 2010 13:19:45 -0700
Subject: [wp-hackers] Strange Issue after upgrading wpmu 2.9.1 to 3.0.1
 - blog home pages randomly show up blank
In-Reply-To: <AANLkTi=saimhsS4mKSs80jfebc0edbqgxjEz_kY358ME@mail.gmail.com>
References: <AANLkTi=o=9M12+nZ6B=hH7AU5PHz2qu8unPC6MQEt7aq@mail.gmail.com>
	<AANLkTikdGOnwD1UT82nRSFMPirFGaN=nENNHB-qo5AP-@mail.gmail.com>
	<AANLkTiksXQQrS2xrushS9aZN=C+kcvbRXgUCppS3K4x+@mail.gmail.com>
	<AANLkTi=saimhsS4mKSs80jfebc0edbqgxjEz_kY358ME@mail.gmail.com>
Message-ID: <AANLkTi=1UW4_ed2GXM5j4biQo0Wpk1Xyu6L5Ofq7oyNo@mail.gmail.com>

Just goto wp-admin/ms-upgrade-network.php on your wordpress install and
click Update Network to run it.  If it was already done no big deal if it
needs to be done that will do it,

On Fri, Aug 27, 2010 at 7:36 AM, David Morris <dvmorris at gmail.com> wrote:

> As far as I know, the upgrade script for these particular blogs had already
> been run, but that's a good point. I will check again. Is there a simple
> way
> to look in the DB to see whether a site has been "upgraded" or not?
>
> Dave
>
> On Thu, Aug 26, 2010 at 11:10 AM, Ryan Bilesky <rbilesky at gmail.com> wrote:
>
> > Did you run the upgrade script?  Because if not accessing wp-admin for
> the
> > blog might upgrade just that blog so it will work, but thats just a total
> > guess.
> >
> > On Thu, Aug 26, 2010 at 8:18 AM, David Morris <dvmorris at gmail.com>
> wrote:
> >
> > > After some more tinkering with the upgrade from 2.9.1 to 3.0, it looks
> as
> > > though none of the sites will actually work until you first visit the
> > > site's
> > > wp-admin page. We have ~800 blogs running on this platform, so I guess
> > > we'll
> > > have to write a script to hit up each /wp-admin page before going live.
> > >
> > > Is this expected behavior, or is that just a coincidence that the blog
> > > starts working after visiting the /wp-admin page?
> > >
> > > Thanks,
> > >  Dave
> > > _______________________________________________
> > > wp-hackers mailing list
> > > wp-hackers at lists.automattic.com
> > > http://lists.automattic.com/mailman/listinfo/wp-hackers
> > >
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers at lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> >
>
>
>
> --
> Dave Morris
> http://dave.showviz.net/
> http://3dcamphouston.com/
>  _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From scribu at gmail.com  Fri Aug 27 20:37:08 2010
From: scribu at gmail.com (scribu)
Date: Fri, 27 Aug 2010 23:37:08 +0300
Subject: [wp-hackers] WordPress multisite without shared user table ?
In-Reply-To: <4C77F827.8020701@mrhead.sk>
References: <4C77F827.8020701@mrhead.sk>
Message-ID: <AANLkTimQXS_gUEzJPwUy1J8xQbuCO9hJrC-SdGSE2S79@mail.gmail.com>

On Fri, Aug 27, 2010 at 8:38 PM, Patrik B?na <patrik.bona at mrhead.sk> wrote:

> I want to setup enviroment with more sites (with WordPress MS), but i don't
> want to share users between these sites...
>

Although they will be in the same table, for each user, you can choose what
role (or no role) they have on each site.


-- 
http://scribu.net

From wp at andrewnacin.com  Fri Aug 27 20:57:37 2010
From: wp at andrewnacin.com (Andrew Nacin)
Date: Fri, 27 Aug 2010 16:57:37 -0400
Subject: [wp-hackers] Multiple installations with same tables
In-Reply-To: <AANLkTikc-dGKG4ViN1TXAJYUuw94fjsnfzT9guWaxbDs@mail.gmail.com>
References: <AANLkTikcp0-TabGCfmDNe+oTawxr4rwh9j23MBzPKNYN@mail.gmail.com>
	<AANLkTi=MpZYgubNNrDNbBuVkEHFn1OTuQzw8euSggR0O@mail.gmail.com>
	<AANLkTin1wSMouKCT_zfVW=98JZeHsLAWh-_+n3zQ1Nd9@mail.gmail.com>
	<AANLkTi=E=b1doVSUrHnW=9Kiu0fVzp0ufv1-aCLhVVc-@mail.gmail.com>
	<AANLkTim6RkZbrNjDDxNeO+VcU1zeOtgQK1So4sfhaZcz@mail.gmail.com>
	<AANLkTikc-dGKG4ViN1TXAJYUuw94fjsnfzT9guWaxbDs@mail.gmail.com>
Message-ID: <AANLkTimbHTAbmwB-=0QfSm680MD3D5=2w_OWTzLts6NK@mail.gmail.com>

On Fri, Aug 27, 2010 at 4:12 PM, Vinicius Massuchetto <
viniciusandre at gmail.com> wrote:

> 2010/8/26 Jacob Santos <wordpress at santosj.name>:
> > Hmm, that is a good question. I would have to look at how the functions
> and
> > what modifications were made for Multisite.
>
> I'm quite stuck on this. I tried to modify some variables into
> $wp_query and other places. Does anyone knows if it's possible to
> instantly control the domain name through the init, wp, or any other
> hook on multisite? If it is, what do I need to change?
>

You'll want to look at wp-includes/ms-settings.php, which can be overridden
in wp-content/sunrise.php. Or look at one of the multi-network / domain
mapping plugins.

From harper.shelby at parivedasolutions.com  Fri Aug 27 21:15:45 2010
From: harper.shelby at parivedasolutions.com (Shelby, Harper)
Date: Fri, 27 Aug 2010 16:15:45 -0500
Subject: [wp-hackers] WP 3.0 Upgrade character set woes
Message-ID: <2BB24BBC87D490418DE901138ACDA0DB42A8D8888A@srv-exch-02.pariveda.local>

I'm working on upgrading an existing 2.9.1 WPMU installation to WP 3.0. One issue I have is that after I upgrade, any special characters are being mis-encoded. The wp_x_posts database tables are utf8, wp-config.php says DB_CHARSET is utf8, the HTML headers say utf8, but the characters are being sent as latin1. If I manually force the browser to latin1, I see everything as it should be. Where do I need to start to solve this issue?

Thanks,

Harper Shelby
Pariveda Solutions
 4203 Montrose | Suite 100 | Houston, Texas 77006
 (F) 713.520.4290 | (M) 281.520.2817
The Business of IT(r)
www.parivedasolutions.com<http://www.parivedasolutions.com/>


________________________________
The information transmitted is intended only for the person or entity to which it is addressed and may contain confidential and/or privileged material. Any review, retransmission, dissemination or other use of, or taking of any action in reliance upon, this information by persons or entities other than the intended recipient is prohibited. If you received this in error, please contact the sender and delete the material from any computer.

From mikeschinkel at newclarity.net  Fri Aug 27 21:34:30 2010
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Fri, 27 Aug 2010 17:34:30 -0400
Subject: [wp-hackers] WP Hosting
In-Reply-To: <AANLkTi=gf8mfhJoxPOwvZezvTcKLbxzYj4OxooqPGBNq@mail.gmail.com>
References: <8D733FEB-DACA-48AC-94B0-F7E39A0B9A1B@thisismyurl.com>
	<AANLkTinbSZvAsV1yHA1WyzgL2Jn0Jx8US-wNBTW7uA1B@mail.gmail.com>
	<AANLkTimbZHx-C_1Baggcw8U-5+S0zvLVUK87kQ6=_Lxz@mail.gmail.com>
	<7ADEF682-C5C9-4C68-8C51-1AC23970E24E@newclarity.net>
	<AANLkTi=gf8mfhJoxPOwvZezvTcKLbxzYj4OxooqPGBNq@mail.gmail.com>
Message-ID: <230E305D-5319-4BEF-BF29-19017613802F@newclarity.net>

On Aug 27, 2010, at 3:10 PM, Matt Jacob wrote:
> Yes. Most/all of the VPS accounts for $20/mo. are unmanaged....

On Aug 27, 2010, at 3:14 PM, Christopher O'Connell wrote:
> For slicehost (and most of the VPSs) you need to configure it, BUT,
> 
> 1) It's nothing very complicated...

Thanks for the explanations. Yes, I'm sure it's not complicated for someone who doesn't want to give up control but there are others who are happily ignorant of the control they are giving up, and it's pretty complicated for them!

For me, I currently want to spend my time going really deep into the WordPress API.  Once I've mastered everything I can in with PHP/MySQL/jQuery in the WordPress API maybe I'll venture over to the dark side of system admin. But not until. :)

Seriously though, thanks. 

-Mike


From Ken at adcSTUDIO.com  Fri Aug 27 21:44:05 2010
From: Ken at adcSTUDIO.com (Ken)
Date: Fri, 27 Aug 2010 17:44:05 -0400
Subject: [wp-hackers] How do filters access variables outside of their
	function?
In-Reply-To: <AANLkTi=G6auYg5_HAVb4ER3KJDBqN62feSCXn2DGfTYD@mail.gmail.com>
References: <i56htf$i9h$1@dough.gmane.org>	<AANLkTinr3F5VW3foaS=+Z4_aLOoF50kqtXcyBMUn=6ab@mail.gmail.com>	<i57291$bhd$1@dough.gmane.org>
	<AANLkTi=G6auYg5_HAVb4ER3KJDBqN62feSCXn2DGfTYD@mail.gmail.com>
Message-ID: <i59bj9$j78$1@dough.gmane.org>

Howdy Hackers,

The apparently recommended way of doing nonce in add_meta_box for custom 
types is something like:

add_action('add_meta_boxes', 'my_add_meta_box');
add_action('save_post', 'my_save_post'), 10, 2 );
function my_save_post( $post_ID, $post ) {
	if ( defined('DOING_AUTOSAVE') && DOING_AUTOSAVE )
		return;	
	if ( !wp_verify_nonce( $_POST['my_noncename'], 'secret') )
		return;
	if ( $post->post_type != 'custom_post_type' )
		return;
	if ( !current_user_can('edit_post') )
		return;
	$data = array();
	$data[0] = $_POST['my_field_1'];
	$data[1] = $_POST['my_field_2'];
	update_post_meta($post_ID, 'my_post_meta', $data);
}
function my_add_meta_box($post) {
	$value = get_post_meta($post->ID, 'my_post_meta', $data);
	<input type="hidden" name="my_noncename" id="my_noncename" value="<?php 
echo wp_create_nonce( 'secret' ); ?>" />
	<input type="text" id="my_field_1" name="my_field_1" value="<?php echo 
$value['my_field_1']; ?>" />
	<input type="text" id="my_field_2" name="my_field_2" value="<?=@ 
$value['my_field_2']; ?>" /> // example suppression
}

But unfortunately, with WP_DEBUG on, it writes notices (undefined index 
at $_POST line number etc.) on the 'add new' screen and actually breaks 
the "Appearance -> Menus" ajax responses so that you can't "Add to Menu" 
reliably if at all. (If you've got Firebug, the net tab will show the 
ajax request response... starts with "<br />")

@$_POST suppresses on the Add New screen, but with the Menu Admin it 
isn't working as well (I might have some other error I suppose). Seems 
to work just fine and dandy without WP_DEBUG enabled, but it's been 
suggested to develop with it on, so should I just deal with the bugs 
that debugging creates? LOL

Is there better Example code out there? I'd rather do it cleaner then @ 
suppression...


From otto at ottodestruct.com  Fri Aug 27 21:55:30 2010
From: otto at ottodestruct.com (Otto)
Date: Fri, 27 Aug 2010 16:55:30 -0500
Subject: [wp-hackers] How do filters access variables outside of their
	function?
In-Reply-To: <i59bj9$j78$1@dough.gmane.org>
References: <i56htf$i9h$1@dough.gmane.org>
	<AANLkTinr3F5VW3foaS=+Z4_aLOoF50kqtXcyBMUn=6ab@mail.gmail.com>
	<i57291$bhd$1@dough.gmane.org>
	<AANLkTi=G6auYg5_HAVb4ER3KJDBqN62feSCXn2DGfTYD@mail.gmail.com>
	<i59bj9$j78$1@dough.gmane.org>
Message-ID: <AANLkTinyT+-ajapsLw1WkT4mAEN65HfwOr9tR7TFX_aG@mail.gmail.com>

Check to see if the variable is set before trying to use it. That
avoids the warning.

if ( !isset( $_POST['my_noncename']  ) || !wp_verify_nonce(
$_POST['my_noncename'], 'secret ') )
   return;

This is basically only needed with warnings on. Most people don't
bother, and most examples don't show it this way either, because
frankly it's kind of pointless unless you're a stickler for
eliminating warnings.

-Otto



On Fri, Aug 27, 2010 at 4:44 PM, Ken <Ken at adcstudio.com> wrote:
> Howdy Hackers,
>
> The apparently recommended way of doing nonce in add_meta_box for custom
> types is something like:
>
> add_action('add_meta_boxes', 'my_add_meta_box');
> add_action('save_post', 'my_save_post'), 10, 2 );
> function my_save_post( $post_ID, $post ) {
> ? ? ? ?if ( defined('DOING_AUTOSAVE') && DOING_AUTOSAVE )
> ? ? ? ? ? ? ? ?return;
> ? ? ? ?if ( !wp_verify_nonce( $_POST['my_noncename'], 'secret') )
> ? ? ? ? ? ? ? ?return;
> ? ? ? ?if ( $post->post_type != 'custom_post_type' )
> ? ? ? ? ? ? ? ?return;
> ? ? ? ?if ( !current_user_can('edit_post') )
> ? ? ? ? ? ? ? ?return;
> ? ? ? ?$data = array();
> ? ? ? ?$data[0] = $_POST['my_field_1'];
> ? ? ? ?$data[1] = $_POST['my_field_2'];
> ? ? ? ?update_post_meta($post_ID, 'my_post_meta', $data);
> }
> function my_add_meta_box($post) {
> ? ? ? ?$value = get_post_meta($post->ID, 'my_post_meta', $data);
> ? ? ? ?<input type="hidden" name="my_noncename" id="my_noncename"
> value="<?php echo wp_create_nonce( 'secret' ); ?>" />
> ? ? ? ?<input type="text" id="my_field_1" name="my_field_1" value="<?php
> echo $value['my_field_1']; ?>" />
> ? ? ? ?<input type="text" id="my_field_2" name="my_field_2" value="<?=@
> $value['my_field_2']; ?>" /> // example suppression
> }
>
> But unfortunately, with WP_DEBUG on, it writes notices (undefined index at
> $_POST line number etc.) on the 'add new' screen and actually breaks the
> "Appearance -> Menus" ajax responses so that you can't "Add to Menu"
> reliably if at all. (If you've got Firebug, the net tab will show the ajax
> request response... starts with "<br />")
>
> @$_POST suppresses on the Add New screen, but with the Menu Admin it isn't
> working as well (I might have some other error I suppose). Seems to work
> just fine and dandy without WP_DEBUG enabled, but it's been suggested to
> develop with it on, so should I just deal with the bugs that debugging
> creates? LOL
>
> Is there better Example code out there? I'd rather do it cleaner then @
> suppression...
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From harper.shelby at parivedasolutions.com  Fri Aug 27 21:56:09 2010
From: harper.shelby at parivedasolutions.com (Shelby, Harper)
Date: Fri, 27 Aug 2010 16:56:09 -0500
Subject: [wp-hackers] WP 3.0 Upgrade character set woes
In-Reply-To: <2BB24BBC87D490418DE901138ACDA0DB42A8D8888A@srv-exch-02.pariveda.local>
References: <2BB24BBC87D490418DE901138ACDA0DB42A8D8888A@srv-exch-02.pariveda.local>
Message-ID: <2BB24BBC87D490418DE901138ACDA0DB42A8D888E2@srv-exch-02.pariveda.local>

My apologies - it was a configuration issue related to adding HyperDB without an explicit 'charset' in the add_database call.

-----Original Message-----
From: wp-hackers-bounces at lists.automattic.com [mailto:wp-hackers-bounces at lists.automattic.com] On Behalf Of Shelby, Harper
Sent: Friday, August 27, 2010 4:16 PM
To: wp-hackers at lists.automattic.com
Subject: [wp-hackers] WP 3.0 Upgrade character set woes

I'm working on upgrading an existing 2.9.1 WPMU installation to WP 3.0. One issue I have is that after I upgrade, any special characters are being mis-encoded. The wp_x_posts database tables are utf8, wp-config.php says DB_CHARSET is utf8, the HTML headers say utf8, but the characters are being sent as latin1. If I manually force the browser to latin1, I see everything as it should be. Where do I need to start to solve this issue?

Thanks,

Harper Shelby
Pariveda Solutions
 4203 Montrose | Suite 100 | Houston, Texas 77006
 (F) 713.520.4290 | (M) 281.520.2817
The Business of IT(r)
www.parivedasolutions.com<http://www.parivedasolutions.com/>


________________________________
The information transmitted is intended only for the person or entity to which it is addressed and may contain confidential and/or privileged material. Any review, retransmission, dissemination or other use of, or taking of any action in reliance upon, this information by persons or entities other than the intended recipient is prohibited. If you received this in error, please contact the sender and delete the material from any computer.
_______________________________________________
wp-hackers mailing list
wp-hackers at lists.automattic.com
http://lists.automattic.com/mailman/listinfo/wp-hackers

From wp at andrewnacin.com  Fri Aug 27 21:57:13 2010
From: wp at andrewnacin.com (Andrew Nacin)
Date: Fri, 27 Aug 2010 17:57:13 -0400
Subject: [wp-hackers] How do filters access variables outside of their
	function?
In-Reply-To: <i59bj9$j78$1@dough.gmane.org>
References: <i56htf$i9h$1@dough.gmane.org>
	<AANLkTinr3F5VW3foaS=+Z4_aLOoF50kqtXcyBMUn=6ab@mail.gmail.com>
	<i57291$bhd$1@dough.gmane.org>
	<AANLkTi=G6auYg5_HAVb4ER3KJDBqN62feSCXn2DGfTYD@mail.gmail.com>
	<i59bj9$j78$1@dough.gmane.org>
Message-ID: <AANLkTinJB67HTyryX3xkyHS71O9pTKtpSGTB73SejFs8@mail.gmail.com>

On Fri, Aug 27, 2010 at 5:44 PM, Ken <Ken at adcstudio.com> wrote:

> Is there better Example code out there? I'd rather do it cleaner then @
> suppression...


The proper way to check for whether indices are set would be the use
isset(), empty(), or array_key_exists(). Here's a breakdown of when to use
which. I personally use empty() more than I use isset(), and only use
array_key_exists() for the rare use case.

Use isset() when you need to know that the index is set, regardless of its
value.
  - Examples: $_GET['number'] = true; $_GET['number'] = false; In both
cases, isset($_GET['number']) is true.
  - Use case: When you need to check simply for the index, and not its
value.

Use empty() when you need to know that the index is set and evaluates to
true. Generally I use !empty() as it complements isset().
 - Example: $_GET['number'] = true; empty($_GET['number']) is false.
 - Example: $_GET['number'] = false; empty($_GET['number']) is true.
 - Example: $_GET['number'] is not set; empty($_GET['number']) is true.
 - Good use case: Checkboxes only submit data when checked. This works
perfectly: $was_box_checked = !empty($_GET['checkbox']);

Only use array_key_exists() for a specific use case, an exception to how
isset() works with null values.
 - Problem: isset($array['number']) returns false, if $array['number'] is
'set' but its value is NULL.
 - Solution: array_key_exists( 'number', $array ).

From marco.mehnert at x28.ch  Fri Aug 27 21:57:45 2010
From: marco.mehnert at x28.ch (marco.mehnert at x28.ch)
Date: 27 Aug 2010 23:57:45 +0200
Subject: [wp-hackers]
	=?utf-8?q?wp-hackers_Digest=2C_Vol_67=2C_Issue_106?=
Message-ID: <20100827215745.6222.qmail@everest.ch-meta.net>

Guten Tag

Ich bin bis am 10.09.2010 im Urlaub. Ihre E-Mail wird nicht weitergeleitet. F?r dringende oder wichtige Angelegenheiten wenden Sie sich bitte an Herrn Christian Hanisch: 043 305 77 49 oder christian.hanisch at x28.ch.

Besten Dank und freundliche Gr?sse

-- 
Marco Mehnert
Dipl. Wirtschaftsingenieur FH
Leiter Operations & Support

x28 AG
Badestra?e 2
D-39114 Magdeburg
+49 391 50 58 48 61

www.x28.ch
marco.mehnert at x28.ch



From philip at frumph.net  Fri Aug 27 23:03:36 2010
From: philip at frumph.net (Philip M. Hofer (Frumph))
Date: Fri, 27 Aug 2010 16:03:36 -0700
Subject: [wp-hackers] Looking for the role-capability to set for
	add_submenu_page
Message-ID: <B73FAF12C96948E2AC0C8E9CBA7AC204@frumph.net>

Looking for the role to set for add_submenu_page, if the user is set to 'contributor' i want them to have access to the post-types and do what they need to do and I verify it and publish it for them.

I'm thinking 'edit_posts' ... but i'm just not sure, the http://codex.wordpress.org/Roles_and_Capabilities page really doesn't sort of explain to (me) what each of the roles abilities (by default) are


- Phil

From philip at frumph.net  Fri Aug 27 23:07:23 2010
From: philip at frumph.net (Philip M. Hofer (Frumph))
Date: Fri, 27 Aug 2010 16:07:23 -0700
Subject: [wp-hackers] Reexplanation
Message-ID: <E7BE2E41BB284B7081C5046C60D42D3A@frumph.net>

I want a capability that lets users access and edit custom -> post type pages but nothing else like the post-editor ..

- Phil


From wp at andrewnacin.com  Fri Aug 27 23:19:55 2010
From: wp at andrewnacin.com (Andrew Nacin)
Date: Fri, 27 Aug 2010 19:19:55 -0400
Subject: [wp-hackers] Looking for the role-capability to set for
	add_submenu_page
In-Reply-To: <B73FAF12C96948E2AC0C8E9CBA7AC204@frumph.net>
References: <B73FAF12C96948E2AC0C8E9CBA7AC204@frumph.net>
Message-ID: <AANLkTimrYW7_Na76s6N5YG40hrR8bV1MQGk4cA3-DjEN@mail.gmail.com>

On Fri, Aug 27, 2010 at 7:03 PM, Philip M. Hofer (Frumph) <philip at frumph.net
> wrote:

> Looking for the role to set for add_submenu_page, if the user is set to
> 'contributor' i want them to have access to the post-types and do what they
> need to do and I verify it and publish it for them.
>
> I'm thinking 'edit_posts' ... but i'm just not sure, the
> http://codex.wordpress.org/Roles_and_Capabilities page really doesn't sort
> of explain to (me) what each of the roles abilities (by default) are


edit_posts is indeed the only capability that contributors have, that a
subscriber doesn't. That page is pretty exhaustive, but when in doubt you
can inspect the database entry that defines roles, or source. Just be
careful w/ the source because we've added new capabilities over time and
those are reflected farther down the file. (which is
wp-admin/includes/schema.php).

From philip at frumph.net  Fri Aug 27 23:24:50 2010
From: philip at frumph.net (Philip M. Hofer (Frumph))
Date: Fri, 27 Aug 2010 16:24:50 -0700
Subject: [wp-hackers] Looking for the role-capability to set
	foradd_submenu_page
In-Reply-To: <AANLkTimrYW7_Na76s6N5YG40hrR8bV1MQGk4cA3-DjEN@mail.gmail.com>
References: <B73FAF12C96948E2AC0C8E9CBA7AC204@frumph.net>
	<AANLkTimrYW7_Na76s6N5YG40hrR8bV1MQGk4cA3-DjEN@mail.gmail.com>
Message-ID: <5E9C92DD52B84EF2A586DD9A98E7B894@frumph.net>

Thanks again Nacin, is there any code tricks I can do to stop them from 
having access to the normal posts section?, I kind of want the user to be 
limited to only the post_type I have and only their posts in the post type 
.. if that makes sense..

Let me guess, look at the schema ;/ heh

----- Original Message ----- 
From: "Andrew Nacin" <wp at andrewnacin.com>
To: <wp-hackers at lists.automattic.com>
Sent: Friday, August 27, 2010 4:19 PM
Subject: Re: [wp-hackers] Looking for the role-capability to set 
foradd_submenu_page


> On Fri, Aug 27, 2010 at 7:03 PM, Philip M. Hofer (Frumph) 
> <philip at frumph.net
>> wrote:
>
>> Looking for the role to set for add_submenu_page, if the user is set to
>> 'contributor' i want them to have access to the post-types and do what 
>> they
>> need to do and I verify it and publish it for them.
>>
>> I'm thinking 'edit_posts' ... but i'm just not sure, the
>> http://codex.wordpress.org/Roles_and_Capabilities page really doesn't 
>> sort
>> of explain to (me) what each of the roles abilities (by default) are
>
>
> edit_posts is indeed the only capability that contributors have, that a
> subscriber doesn't. That page is pretty exhaustive, but when in doubt you
> can inspect the database entry that defines roles, or source. Just be
> careful w/ the source because we've added new capabilities over time and
> those are reflected farther down the file. (which is
> wp-admin/includes/schema.php).
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
> 



From paul at codehooligans.com  Fri Aug 27 23:28:08 2010
From: paul at codehooligans.com (Paul)
Date: Fri, 27 Aug 2010 19:28:08 -0400
Subject: [wp-hackers] Looking for the role-capability to set for
	add_submenu_page
In-Reply-To: <B73FAF12C96948E2AC0C8E9CBA7AC204@frumph.net>
References: <B73FAF12C96948E2AC0C8E9CBA7AC204@frumph.net>
Message-ID: <8427F961-DFF7-476B-BE18-2B04FD48A0BD@codehooligans.com>

I would suggest since you are setting up your own post type then go ahead and define your own user capability role. Then use one of the role manager plugins to select who can access the menu based on your defined role. Im my opinion this is cleaner since you are not tied to the build in WordPress user capabilities. 

So how is this done? Quite easily. From digging into this a few weeks ago I think there are 4 basic actions checked within post type term screen. These actions are 'manage', 'edit', 'delete' and 'assign. For your own post type just pick strings like 'myposttype_manage_terms', 'mediatags_edit_terms', 'mediatags_delete_terms', 'mediatags_assign_terms'. Replace 'myposttype' with something specific to your post type. 

In plugin examples I've reviewed the developer sets these up as a define in a main config file something like:

define( 'MYPOSTTYPE_MANAGE_TERMS_CAP', 'myposttype_manage_terms' );
define( 'MYPOSTTYPE_EDIT_TERMS_CAP', 'myposttype_edit_terms' );
define( 'MYPOSTTYPE_DELETE_TERMS_CAP', 'myposttype_delete_terms' );
define( 'MYPOSTTYPE_ASSIGN_TERMS_CAP', 	'myposttype_assign_terms' );

Then when you setup your post_type you just pass in the defines to the function as an array like:

$default_caps				= array();
$default_caps['manage_terms'] 	= MYPOSTTYPE_MANAGE_TERMS_CAP;
$default_caps['edit_terms'] 		= MYPOSTTYPE_EDIT_TERMS_CAP;
$default_caps['delete_terms'] 	= MYPOSTTYPE_DELETE_TERMS_CAP;
$default_caps['assign_terms'] 	= MYPOSTTYPE_ASSIGN_TERMS_CAP;

register_taxonomy(my_post_type, 'post', array(
    'hierarchical' => false,
    'labels' 		=> $labels,
	'show_ui' 		=> false,
    'query_var' 	=> false,
    'rewrite' 		=> false,
	'capabilities' 	=> $default_caps	// Set the capabilities to your custom array
));

Two excellent Role Cap manager plugins:

Members by Justin Tadlock
http://justintadlock.com/archives/2009/09/17/members-wordpress-plugin

Role Manager by Thomas Schneider
http://www.im-web-gefunden.de/wordpress-plugins/role-manager/







On Aug 27, 2010, at 7:03 PM, Philip M. Hofer (Frumph) wrote:

> Looking for the role to set for add_submenu_page, if the user is set to 'contributor' i want them to have access to the post-types and do what they need to do and I verify it and publish it for them.
> 
> I'm thinking 'edit_posts' ... but i'm just not sure, the http://codex.wordpress.org/Roles_and_Capabilities page really doesn't sort of explain to (me) what each of the roles abilities (by default) are
> 
> 
> - Phil
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers


From jdjkelly at gmail.com  Fri Aug 27 23:39:50 2010
From: jdjkelly at gmail.com (Joshua Kelly)
Date: Fri, 27 Aug 2010 19:39:50 -0400
Subject: [wp-hackers] Reexplanation
In-Reply-To: <E7BE2E41BB284B7081C5046C60D42D3A@frumph.net>
References: <E7BE2E41BB284B7081C5046C60D42D3A@frumph.net>
Message-ID: <AANLkTimw1=6JgQaUGKz962+a_=MU7BUUOj4H1Cn_P3sd@mail.gmail.com>

If I understand you correctly, you're looking to only allow users to
edit custom post types, but not regular posts or pages? An easy way of
doing this is simply by hiding the admin panels for posts and pages:
see http://www.strangework.com/2010/03/24/how-to-hide-an-admin-menu-in-wordpress/

I also did a write up (http://www.kmsm.ca/how-to-hide-admin-panels/)
with credit to Brian.

On Fri, Aug 27, 2010 at 7:07 PM, Philip M. Hofer (Frumph)
<philip at frumph.net> wrote:
> I want a capability that lets users access and edit custom -> post type pages but nothing else like the post-editor ..
>
> - Phil
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From brent at prospress.org  Fri Aug 27 23:48:56 2010
From: brent at prospress.org (Brent Shepherd)
Date: Sat, 28 Aug 2010 07:48:56 +0800
Subject: [wp-hackers] Reexplanation
In-Reply-To: <AANLkTimw1=6JgQaUGKz962+a_=MU7BUUOj4H1Cn_P3sd@mail.gmail.com>
References: <E7BE2E41BB284B7081C5046C60D42D3A@frumph.net>
	<AANLkTimw1=6JgQaUGKz962+a_=MU7BUUOj4H1Cn_P3sd@mail.gmail.com>
Message-ID: <AANLkTik5103FvKe8WQz3kdEqUJkq05PFRMBjjrbs8xGb@mail.gmail.com>

Philip,

Take a look at this plugin: http://wordpress.org/extend/plugins/map-cap/

With it, you can control which roles can do what with your custom post type.
To provide access to the edit custom post screen only, you could give a
subscriber role the "Publish custom post" capability. Users with the
subscriber role will then be able to see the edit screen for your custom
post type but not the edit screen for vanilla post/page types.

Take a look at the plugin's code to see which capabilities are required to
perform each action on your custom post type (publish, edit own, edit others
etc.) and how to map these capabilities for your custom post type.

Hope that helps.

Brent


On Sat, Aug 28, 2010 at 7:39 AM, Joshua Kelly <jdjkelly at gmail.com> wrote:

> If I understand you correctly, you're looking to only allow users to
> edit custom post types, but not regular posts or pages? An easy way of
> doing this is simply by hiding the admin panels for posts and pages:
> see
> http://www.strangework.com/2010/03/24/how-to-hide-an-admin-menu-in-wordpress/
>
> I also did a write up (http://www.kmsm.ca/how-to-hide-admin-panels/)
> with credit to Brian.
>
> On Fri, Aug 27, 2010 at 7:07 PM, Philip M. Hofer (Frumph)
> <philip at frumph.net> wrote:
> > I want a capability that lets users access and edit custom -> post type
> pages but nothing else like the post-editor ..
> >
> > - Phil
> >
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers at lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> >
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From wp at andrewnacin.com  Sat Aug 28 02:15:38 2010
From: wp at andrewnacin.com (Andrew Nacin)
Date: Fri, 27 Aug 2010 22:15:38 -0400
Subject: [wp-hackers] Looking for the role-capability to set for
	add_submenu_page
In-Reply-To: <8427F961-DFF7-476B-BE18-2B04FD48A0BD@codehooligans.com>
References: <B73FAF12C96948E2AC0C8E9CBA7AC204@frumph.net>
	<8427F961-DFF7-476B-BE18-2B04FD48A0BD@codehooligans.com>
Message-ID: <AANLkTimKMDyF0i1dRHVuQS=oUe8HjOUm60_C_p21LEre@mail.gmail.com>

On Fri, Aug 27, 2010 at 7:28 PM, Paul <paul at codehooligans.com> wrote:

> I would suggest since you are setting up your own post type then go ahead
> and define your own user capability role. Then use one of the role manager
> plugins to select who can access the menu based on your defined role. Im my
> opinion this is cleaner since you are not tied to the build in WordPress
> user capabilities.
>
> So how is this done? Quite easily. From digging into this a few weeks ago I
> think there are 4 basic actions checked within post type term screen. These
> actions are 'manage', 'edit', 'delete' and 'assign. For your own post type
> just pick strings like 'myposttype_manage_terms', 'mediatags_edit_terms',
> 'mediatags_delete_terms', 'mediatags_assign_terms'. Replace 'myposttype'
> with something specific to your post type.
>
> In plugin examples I've reviewed the developer sets these up as a define in
> a main config file something like:
>
> define( 'MYPOSTTYPE_MANAGE_TERMS_CAP', 'myposttype_manage_terms' );
> define( 'MYPOSTTYPE_EDIT_TERMS_CAP', 'myposttype_edit_terms' );
> define( 'MYPOSTTYPE_DELETE_TERMS_CAP', 'myposttype_delete_terms' );
> define( 'MYPOSTTYPE_ASSIGN_TERMS_CAP',  'myposttype_assign_terms' );
>
> Then when you setup your post_type you just pass in the defines to the
> function as an array like:
>
> $default_caps                           = array();
> $default_caps['manage_terms']   = MYPOSTTYPE_MANAGE_TERMS_CAP;
> $default_caps['edit_terms']             = MYPOSTTYPE_EDIT_TERMS_CAP;
> $default_caps['delete_terms']   = MYPOSTTYPE_DELETE_TERMS_CAP;
> $default_caps['assign_terms']   = MYPOSTTYPE_ASSIGN_TERMS_CAP;
>

Custom capabilities are indeed the proper route.
manage/edit/delete/assign_terms are the capabilities for taxonomies, so it
looks like you're confusing the two. Same concept applies, with one
important caveat.

In the post type case, there are meta capabilities: edit_post, delete_post,
read_post. These meta capabilities should *not* be granted to the user, but
instead you need to roll your own meta handling the way core does it in
map_meta_cap() (we'll probably make core-like handling opt-in for 3.1).
Basically, you check the post, and if the post is private, then you need to
require the read_private_posts capability, etc.

There's also capability_type, which if set to 'mytype' will simply take the
default capability names and s/post/mytype/ them. That's much easier than
setting each cap, as long as you don't need that kind of fine-grained
control. But you still have to deal with meta handling.

From marco.mehnert at x28.ch  Sat Aug 28 02:16:28 2010
From: marco.mehnert at x28.ch (marco.mehnert at x28.ch)
Date: 28 Aug 2010 04:16:28 +0200
Subject: [wp-hackers]
	=?utf-8?q?wp-hackers_Digest=2C_Vol_67=2C_Issue_107?=
Message-ID: <20100828021628.18142.qmail@everest.ch-meta.net>

Guten Tag

Ich bin bis am 10.09.2010 im Urlaub. Ihre E-Mail wird nicht weitergeleitet. F?r dringende oder wichtige Angelegenheiten wenden Sie sich bitte an Herrn Christian Hanisch: 043 305 77 49 oder christian.hanisch at x28.ch.

Besten Dank und freundliche Gr?sse

-- 
Marco Mehnert
Dipl. Wirtschaftsingenieur FH
Leiter Operations & Support

x28 AG
Badestra?e 2
D-39114 Magdeburg
+49 391 50 58 48 61

www.x28.ch
marco.mehnert at x28.ch



From elfin at elfden.co.uk  Sat Aug 28 11:29:10 2010
From: elfin at elfden.co.uk (Rich Pedley)
Date: Sat, 28 Aug 2010 12:29:10 +0100
Subject: [wp-hackers] Plugin repository issue
Message-ID: <4C78F306.9030803@elfden.co.uk>

Re: http://wordpress.org/extend/plugins/eshop/

had to release 2 quick updates (why does someone always find a bug 
after I update?)

First one went through correctly, but going from 5.6.2 to 5.6.3 seems 
to not to have correctly.

the Readme details have changed, but the version has yo to change from 
5.6.2 to 5.6.3
check the log:
http://plugins.trac.wordpress.org/changeset/281871/eshop

to see that I have changed the version number correctly.


If anyone is about that can look into this it would be much appreciated.

Rich

From marco.mehnert at x28.ch  Sat Aug 28 12:00:15 2010
From: marco.mehnert at x28.ch (marco.mehnert at x28.ch)
Date: 28 Aug 2010 14:00:15 +0200
Subject: [wp-hackers]
	=?utf-8?q?wp-hackers_Digest=2C_Vol_67=2C_Issue_108?=
Message-ID: <20100828120015.15935.qmail@everest.ch-meta.net>

Guten Tag

Ich bin bis am 10.09.2010 im Urlaub. Ihre E-Mail wird nicht weitergeleitet. F?r dringende oder wichtige Angelegenheiten wenden Sie sich bitte an Herrn Christian Hanisch: 043 305 77 49 oder christian.hanisch at x28.ch.

Besten Dank und freundliche Gr?sse

-- 
Marco Mehnert
Dipl. Wirtschaftsingenieur FH
Leiter Operations & Support

x28 AG
Badestra?e 2
D-39114 Magdeburg
+49 391 50 58 48 61

www.x28.ch
marco.mehnert at x28.ch



From paul at codehooligans.com  Sat Aug 28 12:19:59 2010
From: paul at codehooligans.com (Paul)
Date: Sat, 28 Aug 2010 08:19:59 -0400
Subject: [wp-hackers] Looking for the role-capability to set for
	add_submenu_page
In-Reply-To: <AANLkTimKMDyF0i1dRHVuQS=oUe8HjOUm60_C_p21LEre@mail.gmail.com>
References: <B73FAF12C96948E2AC0C8E9CBA7AC204@frumph.net>
	<8427F961-DFF7-476B-BE18-2B04FD48A0BD@codehooligans.com>
	<AANLkTimKMDyF0i1dRHVuQS=oUe8HjOUm60_C_p21LEre@mail.gmail.com>
Message-ID: <0963E1F5-BB39-4CCA-B739-A8E9B60D2FC3@codehooligans.com>

Ah very cool. Thanks for the details on post type meta cap, master Nacin. 

P-

On Aug 27, 2010, at 10:15 PM, Andrew Nacin wrote:

> On Fri, Aug 27, 2010 at 7:28 PM, Paul <paul at codehooligans.com> wrote:
> 
>> I would suggest since you are setting up your own post type then go ahead
>> and define your own user capability role. Then use one of the role manager
>> plugins to select who can access the menu based on your defined role. Im my
>> opinion this is cleaner since you are not tied to the build in WordPress
>> user capabilities.
>> 
>> So how is this done? Quite easily. From digging into this a few weeks ago I
>> think there are 4 basic actions checked within post type term screen. These
>> actions are 'manage', 'edit', 'delete' and 'assign. For your own post type
>> just pick strings like 'myposttype_manage_terms', 'mediatags_edit_terms',
>> 'mediatags_delete_terms', 'mediatags_assign_terms'. Replace 'myposttype'
>> with something specific to your post type.
>> 
>> In plugin examples I've reviewed the developer sets these up as a define in
>> a main config file something like:
>> 
>> define( 'MYPOSTTYPE_MANAGE_TERMS_CAP', 'myposttype_manage_terms' );
>> define( 'MYPOSTTYPE_EDIT_TERMS_CAP', 'myposttype_edit_terms' );
>> define( 'MYPOSTTYPE_DELETE_TERMS_CAP', 'myposttype_delete_terms' );
>> define( 'MYPOSTTYPE_ASSIGN_TERMS_CAP',  'myposttype_assign_terms' );
>> 
>> Then when you setup your post_type you just pass in the defines to the
>> function as an array like:
>> 
>> $default_caps                           = array();
>> $default_caps['manage_terms']   = MYPOSTTYPE_MANAGE_TERMS_CAP;
>> $default_caps['edit_terms']             = MYPOSTTYPE_EDIT_TERMS_CAP;
>> $default_caps['delete_terms']   = MYPOSTTYPE_DELETE_TERMS_CAP;
>> $default_caps['assign_terms']   = MYPOSTTYPE_ASSIGN_TERMS_CAP;
>> 
> 
> Custom capabilities are indeed the proper route.
> manage/edit/delete/assign_terms are the capabilities for taxonomies, so it
> looks like you're confusing the two. Same concept applies, with one
> important caveat.
> 
> In the post type case, there are meta capabilities: edit_post, delete_post,
> read_post. These meta capabilities should *not* be granted to the user, but
> instead you need to roll your own meta handling the way core does it in
> map_meta_cap() (we'll probably make core-like handling opt-in for 3.1).
> Basically, you check the post, and if the post is private, then you need to
> require the read_private_posts capability, etc.
> 
> There's also capability_type, which if set to 'mytype' will simply take the
> default capability names and s/post/mytype/ them. That's much easier than
> setting each cap, as long as you don't need that kind of fine-grained
> control. But you still have to deal with meta handling.
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers


From elfin at elfden.co.uk  Sat Aug 28 13:27:43 2010
From: elfin at elfden.co.uk (Rich Pedley)
Date: Sat, 28 Aug 2010 14:27:43 +0100
Subject: [wp-hackers] Plugin repository issue
In-Reply-To: <4C78F306.9030803@elfden.co.uk>
References: <4C78F306.9030803@elfden.co.uk>
Message-ID: <4C790ECF.8040807@elfden.co.uk>

On 28/08/2010 12:29, Rich Pedley wrote:
> Re: http://wordpress.org/extend/plugins/eshop/
>
> had to release 2 quick updates (why does someone always find a bug
> after I update?)
>
> First one went through correctly, but going from 5.6.2 to 5.6.3 seems
> to not to have correctly.
>
> the Readme details have changed, but the version has yo to change from
> 5.6.2 to 5.6.3
> check the log:
> http://plugins.trac.wordpress.org/changeset/281871/eshop
>
> to see that I have changed the version number correctly.
>
>
> If anyone is about that can look into this it would be much appreciated.

and thanks to whoever did something, it just got updated.

Rich

From otto at ottodestruct.com  Sat Aug 28 13:30:08 2010
From: otto at ottodestruct.com (Otto)
Date: Sat, 28 Aug 2010 08:30:08 -0500
Subject: [wp-hackers] Plugin repository issue
In-Reply-To: <4C790ECF.8040807@elfden.co.uk>
References: <4C78F306.9030803@elfden.co.uk> <4C790ECF.8040807@elfden.co.uk>
Message-ID: <AANLkTi=ap6LZVF1NbqjX32Ew_dxkSqVpfrhqTcOiJt8C@mail.gmail.com>

That was me. It's still going through the process, actually.

You should probably go through and remove a lot of those older
versions. With the way the current system works, having lots of older
versions lying around is not a great idea, as it makes it take an
extremely long time to do updates.

-Otto



On Sat, Aug 28, 2010 at 8:27 AM, Rich Pedley <elfin at elfden.co.uk> wrote:
> On 28/08/2010 12:29, Rich Pedley wrote:
>>
>> Re: http://wordpress.org/extend/plugins/eshop/
>>
>> had to release 2 quick updates (why does someone always find a bug
>> after I update?)
>>
>> First one went through correctly, but going from 5.6.2 to 5.6.3 seems
>> to not to have correctly.
>>
>> the Readme details have changed, but the version has yo to change from
>> 5.6.2 to 5.6.3
>> check the log:
>> http://plugins.trac.wordpress.org/changeset/281871/eshop
>>
>> to see that I have changed the version number correctly.
>>
>>
>> If anyone is about that can look into this it would be much appreciated.
>
> and thanks to whoever did something, it just got updated.
>
> Rich
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From elfin at elfden.co.uk  Sat Aug 28 13:32:24 2010
From: elfin at elfden.co.uk (Rich Pedley)
Date: Sat, 28 Aug 2010 14:32:24 +0100
Subject: [wp-hackers] Plugin repository issue
In-Reply-To: <AANLkTi=ap6LZVF1NbqjX32Ew_dxkSqVpfrhqTcOiJt8C@mail.gmail.com>
References: <4C78F306.9030803@elfden.co.uk> <4C790ECF.8040807@elfden.co.uk>
	<AANLkTi=ap6LZVF1NbqjX32Ew_dxkSqVpfrhqTcOiJt8C@mail.gmail.com>
Message-ID: <4C790FE8.4030206@elfden.co.uk>

On 28/08/2010 14:30, Otto wrote:
> That was me. It's still going through the process, actually.
>
> You should probably go through and remove a lot of those older
> versions. With the way the current system works, having lots of older
> versions lying around is not a great idea, as it makes it take an
> extremely long time to do updates.
>

funnily enough I was thinking the same.

I'll start doing so now.

and thanks.

Rich

From austin at ilfilosofo.com  Sat Aug 28 13:45:41 2010
From: austin at ilfilosofo.com (Austin Matzko)
Date: Sat, 28 Aug 2010 08:45:41 -0500
Subject: [wp-hackers] Plugin repository issue
In-Reply-To: <AANLkTi=ap6LZVF1NbqjX32Ew_dxkSqVpfrhqTcOiJt8C@mail.gmail.com>
References: <4C78F306.9030803@elfden.co.uk> <4C790ECF.8040807@elfden.co.uk>
	<AANLkTi=ap6LZVF1NbqjX32Ew_dxkSqVpfrhqTcOiJt8C@mail.gmail.com>
Message-ID: <AANLkTima1eXy2j27Etdokp-k7J9-QNhy7WRVn4jqHMy-@mail.gmail.com>

On Sat, Aug 28, 2010 at 8:30 AM, Otto <otto at ottodestruct.com> wrote:
> You should probably go through and remove a lot of those older
> versions. With the way the current system works, having lots of older
> versions lying around is not a great idea, as it makes it take an
> extremely long time to do updates.

Could you elaborate on this?  Are you saying there should be a limited
number of subdirectories under "tags"?

From elfin at elfden.co.uk  Sat Aug 28 13:50:13 2010
From: elfin at elfden.co.uk (Rich Pedley)
Date: Sat, 28 Aug 2010 14:50:13 +0100
Subject: [wp-hackers] Plugin repository issue
In-Reply-To: <AANLkTima1eXy2j27Etdokp-k7J9-QNhy7WRVn4jqHMy-@mail.gmail.com>
References: <4C78F306.9030803@elfden.co.uk>
	<4C790ECF.8040807@elfden.co.uk>	<AANLkTi=ap6LZVF1NbqjX32Ew_dxkSqVpfrhqTcOiJt8C@mail.gmail.com>
	<AANLkTima1eXy2j27Etdokp-k7J9-QNhy7WRVn4jqHMy-@mail.gmail.com>
Message-ID: <4C791415.6090808@elfden.co.uk>

On 28/08/2010 14:45, Austin Matzko wrote:
> On Sat, Aug 28, 2010 at 8:30 AM, Otto<otto at ottodestruct.com>  wrote:
>> You should probably go through and remove a lot of those older
>> versions. With the way the current system works, having lots of older
>> versions lying around is not a great idea, as it makes it take an
>> extremely long time to do updates.
>
> Could you elaborate on this?  Are you saying there should be a limited
> number of subdirectories under "tags"?

Additionally if there is any issues with excessive tagged version, how 
many can safely be left before plugin authors should think about 
deleting some.

Though from my limited understanding of Subversion, it isn't a problem 
there, more with the public listing of these?

Rich

From viniciusandre at gmail.com  Sat Aug 28 16:57:37 2010
From: viniciusandre at gmail.com (Vinicius Massuchetto)
Date: Sat, 28 Aug 2010 16:57:37 +0000
Subject: [wp-hackers] register_post_type "variable array variable" callback
Message-ID: <AANLkTi=z5HpONhcL4c=esHJgvhc6jiVmqDVFo_+GGVFT@mail.gmail.com>

Hi!

If I do something like:

/* One file */
class custom_data {
	function custom_data () {}
	function register () {
		global $type, ${$type.'_register'};
		print_r(${$type.'_register'});
		register_post_type ($type, ${$type.'_register'}); // Error happens here
	}
}

/* Another file */
$type = 'something';
${$type.'_register'} = array ( ... );
$$type = new custom_data();
add_action ('init', array(&$$type, 'register'));

I get this error:
Catchable fatal error: Object of class custom_data could not be
converted to string in [path]/wp-includes/classes.php on line 277

On this line, If I stop forcing the string conversion (commented
section), things seems alright.
$this->query_vars[$wpvar] = /*(string)*/ $this->query_vars[$wpvar];

Is that a WordPress error? If not, what am I doing wrong?

Thanks!
-- 
Vin?cius Massuchetto

From scribu at gmail.com  Sat Aug 28 17:08:07 2010
From: scribu at gmail.com (scribu)
Date: Sat, 28 Aug 2010 20:08:07 +0300
Subject: [wp-hackers] register_post_type "variable array variable"
	callback
In-Reply-To: <AANLkTi=z5HpONhcL4c=esHJgvhc6jiVmqDVFo_+GGVFT@mail.gmail.com>
References: <AANLkTi=z5HpONhcL4c=esHJgvhc6jiVmqDVFo_+GGVFT@mail.gmail.com>
Message-ID: <AANLkTimXBg+mqOJJs1gxnmo+=sf3BQ_ZxAq3=Xxi2s5H@mail.gmail.com>

It might be this bug:

http://core.trac.wordpress.org/ticket/14330


-- 
http://scribu.net

From viniciusandre at gmail.com  Sat Aug 28 17:19:10 2010
From: viniciusandre at gmail.com (Vinicius Massuchetto)
Date: Sat, 28 Aug 2010 17:19:10 +0000
Subject: [wp-hackers] register_post_type "variable array variable"
	callback
In-Reply-To: <AANLkTimXBg+mqOJJs1gxnmo+=sf3BQ_ZxAq3=Xxi2s5H@mail.gmail.com>
References: <AANLkTi=z5HpONhcL4c=esHJgvhc6jiVmqDVFo_+GGVFT@mail.gmail.com>
	<AANLkTimXBg+mqOJJs1gxnmo+=sf3BQ_ZxAq3=Xxi2s5H@mail.gmail.com>
Message-ID: <AANLkTinSpOt19-cBwC6q1SZ0E4YM=_g29u39OZOoa+Fh@mail.gmail.com>

2010/8/28 scribu <scribu at gmail.com>:
> It might be this bug:
>
> http://core.trac.wordpress.org/ticket/14330
>
>

Well... thanks!
-- 
Vin?cius Massuchetto

From marco.mehnert at x28.ch  Sat Aug 28 17:20:04 2010
From: marco.mehnert at x28.ch (marco.mehnert at x28.ch)
Date: 28 Aug 2010 19:20:04 +0200
Subject: [wp-hackers]
	=?utf-8?q?wp-hackers_Digest=2C_Vol_67=2C_Issue_109?=
Message-ID: <20100828172004.17778.qmail@everest.ch-meta.net>

Guten Tag

Ich bin bis am 10.09.2010 im Urlaub. Ihre E-Mail wird nicht weitergeleitet. F?r dringende oder wichtige Angelegenheiten wenden Sie sich bitte an Herrn Christian Hanisch: 043 305 77 49 oder christian.hanisch at x28.ch.

Besten Dank und freundliche Gr?sse

-- 
Marco Mehnert
Dipl. Wirtschaftsingenieur FH
Leiter Operations & Support

x28 AG
Badestra?e 2
D-39114 Magdeburg
+49 391 50 58 48 61

www.x28.ch
marco.mehnert at x28.ch



From otto at ottodestruct.com  Sat Aug 28 17:53:27 2010
From: otto at ottodestruct.com (Otto)
Date: Sat, 28 Aug 2010 12:53:27 -0500
Subject: [wp-hackers] Plugin repository issue
In-Reply-To: <4C791415.6090808@elfden.co.uk>
References: <4C78F306.9030803@elfden.co.uk> <4C790ECF.8040807@elfden.co.uk>
	<AANLkTi=ap6LZVF1NbqjX32Ew_dxkSqVpfrhqTcOiJt8C@mail.gmail.com>
	<AANLkTima1eXy2j27Etdokp-k7J9-QNhy7WRVn4jqHMy-@mail.gmail.com>
	<4C791415.6090808@elfden.co.uk>
Message-ID: <AANLkTikXGwAWOEMAF6nv8jSnWnS3iXh1N6h3Xf_+pWy0@mail.gmail.com>

On Sat, Aug 28, 2010 at 8:50 AM, Rich Pedley <elfin at elfden.co.uk> wrote:
> On 28/08/2010 14:45, Austin Matzko wrote:
>>
>> On Sat, Aug 28, 2010 at 8:30 AM, Otto<otto at ottodestruct.com> ?wrote:
>>>
>>> You should probably go through and remove a lot of those older
>>> versions. With the way the current system works, having lots of older
>>> versions lying around is not a great idea, as it makes it take an
>>> extremely long time to do updates.
>>
>> Could you elaborate on this? ?Are you saying there should be a limited
>> number of subdirectories under "tags"?
>
> Additionally if there is any issues with excessive tagged version, how many
> can safely be left before plugin authors should think about deleting some.
>
> Though from my limited understanding of Subversion, it isn't a problem
> there, more with the public listing of these?

Sure.

Basically the process that updates the plugin page on wp.org goes
through all the versions in the tags directory. So if there's a lot,
it takes longer. Linear-time O(n) algorithm.

There's no SVN problem with keeping as many versions as you want, but
it gets slower when the number gets large because there's more to
parse and do and such. Eventually I suppose it might hit some
processing limit, but I've not seen any such thing with 30+ versions.

But there's no actual limit, and the process will get around to it
eventually, but less is better. And honestly, having old versions with
extremely minor changes lying around is rather pointless. Generally I
try to keep old versions there only when they had significant changes
(although I'm pretty bad about cleaning them up myself).

Also consider it from a user experience. You want the last few
versions there in case somebody needs to rollback their site or
something, but having a list of every version yea until the beginning
of all time is kinda silly.

-Otto

From otto at ottodestruct.com  Sat Aug 28 18:14:01 2010
From: otto at ottodestruct.com (Otto)
Date: Sat, 28 Aug 2010 13:14:01 -0500
Subject: [wp-hackers] Plugin repository issue
In-Reply-To: <AANLkTikXGwAWOEMAF6nv8jSnWnS3iXh1N6h3Xf_+pWy0@mail.gmail.com>
References: <4C78F306.9030803@elfden.co.uk> <4C790ECF.8040807@elfden.co.uk>
	<AANLkTi=ap6LZVF1NbqjX32Ew_dxkSqVpfrhqTcOiJt8C@mail.gmail.com>
	<AANLkTima1eXy2j27Etdokp-k7J9-QNhy7WRVn4jqHMy-@mail.gmail.com>
	<4C791415.6090808@elfden.co.uk>
	<AANLkTikXGwAWOEMAF6nv8jSnWnS3iXh1N6h3Xf_+pWy0@mail.gmail.com>
Message-ID: <AANLkTimORgkiUstO_p6i7ZC7EizgUUjoOXi0Mh9AZkSq@mail.gmail.com>

Actually, mdawaffe tells me that this only matters when you do a
manual update like I did. A normal update only looks for changed
items. So it shouldn't matter then.

Still, no reason to leave old broken stuff lying around.. ;)

-Otto



On Sat, Aug 28, 2010 at 12:53 PM, Otto <otto at ottodestruct.com> wrote:
> On Sat, Aug 28, 2010 at 8:50 AM, Rich Pedley <elfin at elfden.co.uk> wrote:
>> On 28/08/2010 14:45, Austin Matzko wrote:
>>>
>>> On Sat, Aug 28, 2010 at 8:30 AM, Otto<otto at ottodestruct.com> ?wrote:
>>>>
>>>> You should probably go through and remove a lot of those older
>>>> versions. With the way the current system works, having lots of older
>>>> versions lying around is not a great idea, as it makes it take an
>>>> extremely long time to do updates.
>>>
>>> Could you elaborate on this? ?Are you saying there should be a limited
>>> number of subdirectories under "tags"?
>>
>> Additionally if there is any issues with excessive tagged version, how many
>> can safely be left before plugin authors should think about deleting some.
>>
>> Though from my limited understanding of Subversion, it isn't a problem
>> there, more with the public listing of these?
>
> Sure.
>
> Basically the process that updates the plugin page on wp.org goes
> through all the versions in the tags directory. So if there's a lot,
> it takes longer. Linear-time O(n) algorithm.
>
> There's no SVN problem with keeping as many versions as you want, but
> it gets slower when the number gets large because there's more to
> parse and do and such. Eventually I suppose it might hit some
> processing limit, but I've not seen any such thing with 30+ versions.
>
> But there's no actual limit, and the process will get around to it
> eventually, but less is better. And honestly, having old versions with
> extremely minor changes lying around is rather pointless. Generally I
> try to keep old versions there only when they had significant changes
> (although I'm pretty bad about cleaning them up myself).
>
> Also consider it from a user experience. You want the last few
> versions there in case somebody needs to rollback their site or
> something, but having a list of every version yea until the beginning
> of all time is kinda silly.
>
> -Otto
>

From elfin at elfden.co.uk  Sat Aug 28 18:21:16 2010
From: elfin at elfden.co.uk (Rich Pedley)
Date: Sat, 28 Aug 2010 19:21:16 +0100
Subject: [wp-hackers] Plugin repository issue
In-Reply-To: <AANLkTimORgkiUstO_p6i7ZC7EizgUUjoOXi0Mh9AZkSq@mail.gmail.com>
References: <4C78F306.9030803@elfden.co.uk>
	<4C790ECF.8040807@elfden.co.uk>	<AANLkTi=ap6LZVF1NbqjX32Ew_dxkSqVpfrhqTcOiJt8C@mail.gmail.com>	<AANLkTima1eXy2j27Etdokp-k7J9-QNhy7WRVn4jqHMy-@mail.gmail.com>	<4C791415.6090808@elfden.co.uk>	<AANLkTikXGwAWOEMAF6nv8jSnWnS3iXh1N6h3Xf_+pWy0@mail.gmail.com>
	<AANLkTimORgkiUstO_p6i7ZC7EizgUUjoOXi0Mh9AZkSq@mail.gmail.com>
Message-ID: <4C79539C.70505@elfden.co.uk>

On 28/08/2010 19:14, Otto wrote:
> Actually, mdawaffe tells me that this only matters when you do a
> manual update like I did. A normal update only looks for changed
> items. So it shouldn't matter then.
>
> Still, no reason to leave old broken stuff lying around.. ;)

Well I deleted a lot of the old (keep a local copy in case anyone ever 
needs it of course).

but more importantly do you know why it had to be kickstarted? In 
other words, was it my fault?

Rich

From otto at ottodestruct.com  Sat Aug 28 22:20:48 2010
From: otto at ottodestruct.com (Otto)
Date: Sat, 28 Aug 2010 17:20:48 -0500
Subject: [wp-hackers] Plugin repository issue
In-Reply-To: <4C79539C.70505@elfden.co.uk>
References: <4C78F306.9030803@elfden.co.uk> <4C790ECF.8040807@elfden.co.uk>
	<AANLkTi=ap6LZVF1NbqjX32Ew_dxkSqVpfrhqTcOiJt8C@mail.gmail.com>
	<AANLkTima1eXy2j27Etdokp-k7J9-QNhy7WRVn4jqHMy-@mail.gmail.com>
	<4C791415.6090808@elfden.co.uk>
	<AANLkTikXGwAWOEMAF6nv8jSnWnS3iXh1N6h3Xf_+pWy0@mail.gmail.com>
	<AANLkTimORgkiUstO_p6i7ZC7EizgUUjoOXi0Mh9AZkSq@mail.gmail.com>
	<4C79539C.70505@elfden.co.uk>
Message-ID: <AANLkTikWZvYgaHy=tgxS5UqRJ70RvLa0cRzz5zE_35BL@mail.gmail.com>

It was actually probably my fault. I was making changes to that bit of
code around that time.

Sorry. :)

If you spot anything else out of date, let me know and we'll investigate.

-Otto



On Sat, Aug 28, 2010 at 1:21 PM, Rich Pedley <elfin at elfden.co.uk> wrote:
> On 28/08/2010 19:14, Otto wrote:
>>
>> Actually, mdawaffe tells me that this only matters when you do a
>> manual update like I did. A normal update only looks for changed
>> items. So it shouldn't matter then.
>>
>> Still, no reason to leave old broken stuff lying around.. ;)
>
> Well I deleted a lot of the old (keep a local copy in case anyone ever needs
> it of course).
>
> but more importantly do you know why it had to be kickstarted? In other
> words, was it my fault?
>
> Rich
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From elfin at elfden.co.uk  Sun Aug 29 07:31:59 2010
From: elfin at elfden.co.uk (Rich Pedley)
Date: Sun, 29 Aug 2010 08:31:59 +0100
Subject: [wp-hackers] Plugin repository issue
In-Reply-To: <AANLkTikWZvYgaHy=tgxS5UqRJ70RvLa0cRzz5zE_35BL@mail.gmail.com>
References: <4C78F306.9030803@elfden.co.uk>
	<4C790ECF.8040807@elfden.co.uk>	<AANLkTi=ap6LZVF1NbqjX32Ew_dxkSqVpfrhqTcOiJt8C@mail.gmail.com>	<AANLkTima1eXy2j27Etdokp-k7J9-QNhy7WRVn4jqHMy-@mail.gmail.com>	<4C791415.6090808@elfden.co.uk>	<AANLkTikXGwAWOEMAF6nv8jSnWnS3iXh1N6h3Xf_+pWy0@mail.gmail.com>	<AANLkTimORgkiUstO_p6i7ZC7EizgUUjoOXi0Mh9AZkSq@mail.gmail.com>	<4C79539C.70505@elfden.co.uk>
	<AANLkTikWZvYgaHy=tgxS5UqRJ70RvLa0cRzz5zE_35BL@mail.gmail.com>
Message-ID: <4C7A0CEF.8030809@elfden.co.uk>

On 28/08/2010 23:20, Otto wrote:
> It was actually probably my fault. I was making changes to that bit of
> code around that time.
>
> Sorry. :)
>
> If you spot anything else out of date, let me know and we'll investigate.

hopefully I won't, but will keep an eye out.

Rich

From m.websoft at gmail.com  Sun Aug 29 10:02:56 2010
From: m.websoft at gmail.com (mohammad aghanabi)
Date: Sun, 29 Aug 2010 14:32:56 +0430
Subject: [wp-hackers] inserting index.php codes into functions.php
Message-ID: <AANLkTims1KHOAcvhWxCnzYcAtxWfWmJrSrMyz0c9tV2f@mail.gmail.com>

hi;
is there anyway to make template load index.php contents from functions.php
?
if yes, how to define index in functions.php ?

thanks

From marco.mehnert at x28.ch  Sun Aug 29 12:00:38 2010
From: marco.mehnert at x28.ch (marco.mehnert at x28.ch)
Date: 29 Aug 2010 14:00:38 +0200
Subject: [wp-hackers]
	=?utf-8?q?wp-hackers_Digest=2C_Vol_67=2C_Issue_110?=
Message-ID: <20100829120038.15340.qmail@everest.ch-meta.net>

Guten Tag

Ich bin bis am 10.09.2010 im Urlaub. Ihre E-Mail wird nicht weitergeleitet. F?r dringende oder wichtige Angelegenheiten wenden Sie sich bitte an Herrn Christian Hanisch: 043 305 77 49 oder christian.hanisch at x28.ch.

Besten Dank und freundliche Gr?sse

-- 
Marco Mehnert
Dipl. Wirtschaftsingenieur FH
Leiter Operations & Support

x28 AG
Badestra?e 2
D-39114 Magdeburg
+49 391 50 58 48 61

www.x28.ch
marco.mehnert at x28.ch



From heiko.rabe at code-styling.de  Sun Aug 29 21:31:35 2010
From: heiko.rabe at code-styling.de (Heiko Rabe)
Date: Sun, 29 Aug 2010 23:31:35 +0200
Subject: [wp-hackers] Plugin repository issue
In-Reply-To: <AANLkTikWZvYgaHy=tgxS5UqRJ70RvLa0cRzz5zE_35BL@mail.gmail.com>
References: <4C78F306.9030803@elfden.co.uk>
	<4C790ECF.8040807@elfden.co.uk>	<AANLkTi=ap6LZVF1NbqjX32Ew_dxkSqVpfrhqTcOiJt8C@mail.gmail.com>	<AANLkTima1eXy2j27Etdokp-k7J9-QNhy7WRVn4jqHMy-@mail.gmail.com>	<4C791415.6090808@elfden.co.uk>	<AANLkTikXGwAWOEMAF6nv8jSnWnS3iXh1N6h3Xf_+pWy0@mail.gmail.com>	<AANLkTimORgkiUstO_p6i7ZC7EizgUUjoOXi0Mh9AZkSq@mail.gmail.com>	<4C79539C.70505@elfden.co.uk>
	<AANLkTikWZvYgaHy=tgxS5UqRJ70RvLa0cRzz5zE_35BL@mail.gmail.com>
Message-ID: <000a01cb47c1$8f2ecba0$ad8c62e0$@rabe@code-styling.de>

@Otto: I'm spotting again an out of sync at wp.org plugin page:
http://wordpress.org/extend/plugins/codestyling-localization/changelog/

- changelog already shows the new version
- new version can be downloaded manually by typing the correct url at
browser
- svn time diff while writing this mail is 72 min (time elapsed since
tagging the new version at svn)

Could you please investigate, what may cause this ?
I remember from the past, that updating the page and presenting the new
download was atomic. I also remember delays around 15 min but if this has
been elapsed, all was fine at once not only the page itself.
  

Thanks and regards

Heiko Rabe
(www.code-styling.de)

-----Urspr?ngliche Nachricht-----
Von: wp-hackers-bounces at lists.automattic.com
[mailto:wp-hackers-bounces at lists.automattic.com] Im Auftrag von Otto
Gesendet: Sonntag, 29. August 2010 00:21
An: wp-hackers at lists.automattic.com
Betreff: Re: [wp-hackers] Plugin repository issue

It was actually probably my fault. I was making changes to that bit of
code around that time.

Sorry. :)

If you spot anything else out of date, let me know and we'll investigate.

-Otto



On Sat, Aug 28, 2010 at 1:21 PM, Rich Pedley <elfin at elfden.co.uk> wrote:
> On 28/08/2010 19:14, Otto wrote:
>>
>> Actually, mdawaffe tells me that this only matters when you do a
>> manual update like I did. A normal update only looks for changed
>> items. So it shouldn't matter then.
>>
>> Still, no reason to leave old broken stuff lying around.. ;)
>
> Well I deleted a lot of the old (keep a local copy in case anyone ever
needs
> it of course).
>
> but more importantly do you know why it had to be kickstarted? In other
> words, was it my fault?
>
> Rich
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
_______________________________________________
wp-hackers mailing list
wp-hackers at lists.automattic.com
http://lists.automattic.com/mailman/listinfo/wp-hackers


From otto at ottodestruct.com  Sun Aug 29 21:37:48 2010
From: otto at ottodestruct.com (Otto)
Date: Sun, 29 Aug 2010 16:37:48 -0500
Subject: [wp-hackers] Plugin repository issue
In-Reply-To: <-6426284477561668420@unknownmsgid>
References: <4C78F306.9030803@elfden.co.uk> <4C790ECF.8040807@elfden.co.uk>
	<AANLkTi=ap6LZVF1NbqjX32Ew_dxkSqVpfrhqTcOiJt8C@mail.gmail.com>
	<AANLkTima1eXy2j27Etdokp-k7J9-QNhy7WRVn4jqHMy-@mail.gmail.com>
	<4C791415.6090808@elfden.co.uk>
	<AANLkTikXGwAWOEMAF6nv8jSnWnS3iXh1N6h3Xf_+pWy0@mail.gmail.com>
	<AANLkTimORgkiUstO_p6i7ZC7EizgUUjoOXi0Mh9AZkSq@mail.gmail.com>
	<4C79539C.70505@elfden.co.uk>
	<AANLkTikWZvYgaHy=tgxS5UqRJ70RvLa0cRzz5zE_35BL@mail.gmail.com>
	<-6426284477561668420@unknownmsgid>
Message-ID: <AANLkTinSvfKeA5J4EzuH5m3bDD3Xr32hnjf2ngXEXGgt@mail.gmail.com>

I'm not going to fix this manually at the moment, because mdawaffe
asked me to forward one to him for direct investigation of the
problem. So it may take a day for an update. But we will get to it, I
promise. :)

-Otto



On Sun, Aug 29, 2010 at 4:31 PM, Heiko Rabe <heiko.rabe at code-styling.de> wrote:
> @Otto: I'm spotting again an out of sync at wp.org plugin page:
> http://wordpress.org/extend/plugins/codestyling-localization/changelog/
>
> - changelog already shows the new version
> - new version can be downloaded manually by typing the correct url at
> browser
> - svn time diff while writing this mail is 72 min (time elapsed since
> tagging the new version at svn)
>
> Could you please investigate, what may cause this ?
> I remember from the past, that updating the page and presenting the new
> download was atomic. I also remember delays around 15 min but if this has
> been elapsed, all was fine at once not only the page itself.
>
>
> Thanks and regards
>
> Heiko Rabe
> (www.code-styling.de)
>
> -----Urspr?ngliche Nachricht-----
> Von: wp-hackers-bounces at lists.automattic.com
> [mailto:wp-hackers-bounces at lists.automattic.com] Im Auftrag von Otto
> Gesendet: Sonntag, 29. August 2010 00:21
> An: wp-hackers at lists.automattic.com
> Betreff: Re: [wp-hackers] Plugin repository issue
>
> It was actually probably my fault. I was making changes to that bit of
> code around that time.
>
> Sorry. :)
>
> If you spot anything else out of date, let me know and we'll investigate.
>
> -Otto
>
>
>
> On Sat, Aug 28, 2010 at 1:21 PM, Rich Pedley <elfin at elfden.co.uk> wrote:
>> On 28/08/2010 19:14, Otto wrote:
>>>
>>> Actually, mdawaffe tells me that this only matters when you do a
>>> manual update like I did. A normal update only looks for changed
>>> items. So it shouldn't matter then.
>>>
>>> Still, no reason to leave old broken stuff lying around.. ;)
>>
>> Well I deleted a lot of the old (keep a local copy in case anyone ever
> needs
>> it of course).
>>
>> but more importantly do you know why it had to be kickstarted? In other
>> words, was it my fault?
>>
>> Rich
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From matt at mattjacob.com  Sun Aug 29 22:04:03 2010
From: matt at mattjacob.com (Matt Jacob)
Date: Sun, 29 Aug 2010 15:04:03 -0700
Subject: [wp-hackers] Plugin repository issue
In-Reply-To: <4C79539C.70505@elfden.co.uk>
References: <4C78F306.9030803@elfden.co.uk>	<4C790ECF.8040807@elfden.co.uk>	<AANLkTi=ap6LZVF1NbqjX32Ew_dxkSqVpfrhqTcOiJt8C@mail.gmail.com>	<AANLkTima1eXy2j27Etdokp-k7J9-QNhy7WRVn4jqHMy-@mail.gmail.com>	<4C791415.6090808@elfden.co.uk>	<AANLkTikXGwAWOEMAF6nv8jSnWnS3iXh1N6h3Xf_+pWy0@mail.gmail.com>	<AANLkTimORgkiUstO_p6i7ZC7EizgUUjoOXi0Mh9AZkSq@mail.gmail.com>
	<4C79539C.70505@elfden.co.uk>
Message-ID: <4C7AD953.909@mattjacob.com>

On 8/28/10 11:21 AM, Rich Pedley wrote:
> Well I deleted a lot of the old (keep a local copy in case anyone ever
> needs it of course).

You probably don't even need to keep a local copy unless you *really* 
want to. With SVN, nothing is ever really deleted---it's just deleted as 
of a particular revision number. The repository still has full knowledge 
of everything that once existed, though.

Matt

From erisds at gmail.com  Sun Aug 29 23:22:40 2010
From: erisds at gmail.com (ErisDS)
Date: Mon, 30 Aug 2010 00:22:40 +0100
Subject: [wp-hackers] User Roles & Capabilities - How come add and edit
	aren't separate?
Message-ID: <AANLkTikqidDH78VPwuZpEXSSaq-g7boH08pogZzcw1RH@mail.gmail.com>

Hi All,

Hopefully this is a quick question: does anyone know why the capabilities
aren't divided into edit_posts and add_posts or edit_pages and add_pages?
The capability "edit_posts"/"edit_pages" also permits a user to add new
ones. Is it not a reasonable use case that users should be able to add but
not edit, or edit but not add?

Just wondering!

Eris :)

From wp at andrewnacin.com  Mon Aug 30 00:30:45 2010
From: wp at andrewnacin.com (Andrew Nacin)
Date: Sun, 29 Aug 2010 20:30:45 -0400
Subject: [wp-hackers] User Roles & Capabilities - How come add and edit
 aren't separate?
In-Reply-To: <AANLkTikqidDH78VPwuZpEXSSaq-g7boH08pogZzcw1RH@mail.gmail.com>
References: <AANLkTikqidDH78VPwuZpEXSSaq-g7boH08pogZzcw1RH@mail.gmail.com>
Message-ID: <AANLkTiky9h1ygUctmsTmeKFmBfVF=-Wp7qY9jWEwsu9g@mail.gmail.com>

On Sun, Aug 29, 2010 at 7:22 PM, ErisDS <erisds at gmail.com> wrote:

> Hopefully this is a quick question: does anyone know why the capabilities
> aren't divided into edit_posts and add_posts or edit_pages and add_pages?
> The capability "edit_posts"/"edit_pages" also permits a user to add new
> ones. Is it not a reasonable use case that users should be able to add but
> not edit, or edit but not add?
>

I've worked around this by literally denying access to specific screens
based on the $current_screen object, $pagenow, etc., according to specific
use cases. The distinction isn't too useful for regular post types but I've
seen some custom post type use cases where it makes some sense.

It's also tough to decide how it would be handled. When do we make the
switch from requiring add_posts to requiring edit_posts? Someone with only
add_posts will find themselves suddenly losing their post on save, or
publish? Or can they always see it? (In order to see it, they'll need
edit_posts to see that screen, right?) The converse is probably also easier
-- someone having the ability to edit_posts but not add_posts... But at that
point, they can't edit anything unless assigned to them, because they don't
have the capabilities to edit others' posts.

It seems like a sensible breakdown but then the implementation gets very
foggy.

From otto at ottodestruct.com  Mon Aug 30 02:56:59 2010
From: otto at ottodestruct.com (Otto)
Date: Sun, 29 Aug 2010 21:56:59 -0500
Subject: [wp-hackers] Plugin repository issue
In-Reply-To: <AANLkTinSvfKeA5J4EzuH5m3bDD3Xr32hnjf2ngXEXGgt@mail.gmail.com>
References: <4C78F306.9030803@elfden.co.uk> <4C790ECF.8040807@elfden.co.uk>
	<AANLkTi=ap6LZVF1NbqjX32Ew_dxkSqVpfrhqTcOiJt8C@mail.gmail.com>
	<AANLkTima1eXy2j27Etdokp-k7J9-QNhy7WRVn4jqHMy-@mail.gmail.com>
	<4C791415.6090808@elfden.co.uk>
	<AANLkTikXGwAWOEMAF6nv8jSnWnS3iXh1N6h3Xf_+pWy0@mail.gmail.com>
	<AANLkTimORgkiUstO_p6i7ZC7EizgUUjoOXi0Mh9AZkSq@mail.gmail.com>
	<4C79539C.70505@elfden.co.uk>
	<AANLkTikWZvYgaHy=tgxS5UqRJ70RvLa0cRzz5zE_35BL@mail.gmail.com>
	<-6426284477561668420@unknownmsgid>
	<AANLkTinSvfKeA5J4EzuH5m3bDD3Xr32hnjf2ngXEXGgt@mail.gmail.com>
Message-ID: <AANLkTimzOekoJpjCTFFtF7fnm6EL+JnYJtittqQ6Q_LG@mail.gmail.com>

Seems to have updated itself before we got to it. So, seems to just be
a large delay somewhere.

-Otto



On Sun, Aug 29, 2010 at 4:37 PM, Otto <otto at ottodestruct.com> wrote:
> I'm not going to fix this manually at the moment, because mdawaffe
> asked me to forward one to him for direct investigation of the
> problem. So it may take a day for an update. But we will get to it, I
> promise. :)
>
> -Otto
>
>
>
> On Sun, Aug 29, 2010 at 4:31 PM, Heiko Rabe <heiko.rabe at code-styling.de> wrote:
>> @Otto: I'm spotting again an out of sync at wp.org plugin page:
>> http://wordpress.org/extend/plugins/codestyling-localization/changelog/
>>
>> - changelog already shows the new version
>> - new version can be downloaded manually by typing the correct url at
>> browser
>> - svn time diff while writing this mail is 72 min (time elapsed since
>> tagging the new version at svn)
>>
>> Could you please investigate, what may cause this ?
>> I remember from the past, that updating the page and presenting the new
>> download was atomic. I also remember delays around 15 min but if this has
>> been elapsed, all was fine at once not only the page itself.
>>
>>
>> Thanks and regards
>>
>> Heiko Rabe
>> (www.code-styling.de)
>>
>> -----Urspr?ngliche Nachricht-----
>> Von: wp-hackers-bounces at lists.automattic.com
>> [mailto:wp-hackers-bounces at lists.automattic.com] Im Auftrag von Otto
>> Gesendet: Sonntag, 29. August 2010 00:21
>> An: wp-hackers at lists.automattic.com
>> Betreff: Re: [wp-hackers] Plugin repository issue
>>
>> It was actually probably my fault. I was making changes to that bit of
>> code around that time.
>>
>> Sorry. :)
>>
>> If you spot anything else out of date, let me know and we'll investigate.
>>
>> -Otto
>>
>>
>>
>> On Sat, Aug 28, 2010 at 1:21 PM, Rich Pedley <elfin at elfden.co.uk> wrote:
>>> On 28/08/2010 19:14, Otto wrote:
>>>>
>>>> Actually, mdawaffe tells me that this only matters when you do a
>>>> manual update like I did. A normal update only looks for changed
>>>> items. So it shouldn't matter then.
>>>>
>>>> Still, no reason to leave old broken stuff lying around.. ;)
>>>
>>> Well I deleted a lot of the old (keep a local copy in case anyone ever
>> needs
>>> it of course).
>>>
>>> but more importantly do you know why it had to be kickstarted? In other
>>> words, was it my fault?
>>>
>>> Rich
>>> _______________________________________________
>>> wp-hackers mailing list
>>> wp-hackers at lists.automattic.com
>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>>
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
>

From mda at blogwaffe.com  Mon Aug 30 03:02:59 2010
From: mda at blogwaffe.com (Michael D Adams)
Date: Sun, 29 Aug 2010 20:02:59 -0700
Subject: [wp-hackers] Plugin repository issue
In-Reply-To: <AANLkTimzOekoJpjCTFFtF7fnm6EL+JnYJtittqQ6Q_LG@mail.gmail.com>
References: <4C78F306.9030803@elfden.co.uk> <4C790ECF.8040807@elfden.co.uk>
	<AANLkTi=ap6LZVF1NbqjX32Ew_dxkSqVpfrhqTcOiJt8C@mail.gmail.com>
	<AANLkTima1eXy2j27Etdokp-k7J9-QNhy7WRVn4jqHMy-@mail.gmail.com>
	<4C791415.6090808@elfden.co.uk>
	<AANLkTikXGwAWOEMAF6nv8jSnWnS3iXh1N6h3Xf_+pWy0@mail.gmail.com>
	<AANLkTimORgkiUstO_p6i7ZC7EizgUUjoOXi0Mh9AZkSq@mail.gmail.com>
	<4C79539C.70505@elfden.co.uk>
	<AANLkTikWZvYgaHy=tgxS5UqRJ70RvLa0cRzz5zE_35BL@mail.gmail.com>
	<-6426284477561668420@unknownmsgid>
	<AANLkTinSvfKeA5J4EzuH5m3bDD3Xr32hnjf2ngXEXGgt@mail.gmail.com>
	<AANLkTimzOekoJpjCTFFtF7fnm6EL+JnYJtittqQ6Q_LG@mail.gmail.com>
Message-ID: <AANLkTikit_6EKV2Fy55AMgrZMk0c_XhZtc55ZBVNWo2v@mail.gmail.com>

My first guess is that this is a caching bug; that the cache isn't
being correctly invalidated under some circumstances.

Please keep reporting these if you see more.
Mike
--mdawaffe

On Sun, Aug 29, 2010 at 7:56 PM, Otto <otto at ottodestruct.com> wrote:
> Seems to have updated itself before we got to it. So, seems to just be
> a large delay somewhere.
>
> -Otto
>
>
>
> On Sun, Aug 29, 2010 at 4:37 PM, Otto <otto at ottodestruct.com> wrote:
>> I'm not going to fix this manually at the moment, because mdawaffe
>> asked me to forward one to him for direct investigation of the
>> problem. So it may take a day for an update. But we will get to it, I
>> promise. :)
>>
>> -Otto
>>
>>
>>
>> On Sun, Aug 29, 2010 at 4:31 PM, Heiko Rabe <heiko.rabe at code-styling.de> wrote:
>>> @Otto: I'm spotting again an out of sync at wp.org plugin page:
>>> http://wordpress.org/extend/plugins/codestyling-localization/changelog/
>>>
>>> - changelog already shows the new version
>>> - new version can be downloaded manually by typing the correct url at
>>> browser
>>> - svn time diff while writing this mail is 72 min (time elapsed since
>>> tagging the new version at svn)
>>>
>>> Could you please investigate, what may cause this ?
>>> I remember from the past, that updating the page and presenting the new
>>> download was atomic. I also remember delays around 15 min but if this has
>>> been elapsed, all was fine at once not only the page itself.
>>>
>>>
>>> Thanks and regards
>>>
>>> Heiko Rabe
>>> (www.code-styling.de)
>>>
>>> -----Urspr?ngliche Nachricht-----
>>> Von: wp-hackers-bounces at lists.automattic.com
>>> [mailto:wp-hackers-bounces at lists.automattic.com] Im Auftrag von Otto
>>> Gesendet: Sonntag, 29. August 2010 00:21
>>> An: wp-hackers at lists.automattic.com
>>> Betreff: Re: [wp-hackers] Plugin repository issue
>>>
>>> It was actually probably my fault. I was making changes to that bit of
>>> code around that time.
>>>
>>> Sorry. :)
>>>
>>> If you spot anything else out of date, let me know and we'll investigate.
>>>
>>> -Otto
>>>
>>>
>>>
>>> On Sat, Aug 28, 2010 at 1:21 PM, Rich Pedley <elfin at elfden.co.uk> wrote:
>>>> On 28/08/2010 19:14, Otto wrote:
>>>>>
>>>>> Actually, mdawaffe tells me that this only matters when you do a
>>>>> manual update like I did. A normal update only looks for changed
>>>>> items. So it shouldn't matter then.
>>>>>
>>>>> Still, no reason to leave old broken stuff lying around.. ;)
>>>>
>>>> Well I deleted a lot of the old (keep a local copy in case anyone ever
>>> needs
>>>> it of course).
>>>>
>>>> but more importantly do you know why it had to be kickstarted? In other
>>>> words, was it my fault?
>>>>
>>>> Rich
>>>> _______________________________________________
>>>> wp-hackers mailing list
>>>> wp-hackers at lists.automattic.com
>>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>>>
>>> _______________________________________________
>>> wp-hackers mailing list
>>> wp-hackers at lists.automattic.com
>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>>
>>> _______________________________________________
>>> wp-hackers mailing list
>>> wp-hackers at lists.automattic.com
>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>>
>>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From marco.mehnert at x28.ch  Mon Aug 30 03:03:49 2010
From: marco.mehnert at x28.ch (marco.mehnert at x28.ch)
Date: 30 Aug 2010 05:03:49 +0200
Subject: [wp-hackers]
	=?utf-8?q?wp-hackers_Digest=2C_Vol_67=2C_Issue_111?=
Message-ID: <20100830030349.21175.qmail@everest.ch-meta.net>

Guten Tag

Ich bin bis am 10.09.2010 im Urlaub. Ihre E-Mail wird nicht weitergeleitet. F?r dringende oder wichtige Angelegenheiten wenden Sie sich bitte an Herrn Christian Hanisch: 043 305 77 49 oder christian.hanisch at x28.ch.

Besten Dank und freundliche Gr?sse

-- 
Marco Mehnert
Dipl. Wirtschaftsingenieur FH
Leiter Operations & Support

x28 AG
Badestra?e 2
D-39114 Magdeburg
+49 391 50 58 48 61

www.x28.ch
marco.mehnert at x28.ch



From list at expost.org  Mon Aug 30 03:30:00 2010
From: list at expost.org (Raj)
Date: Mon, 30 Aug 2010 09:00:00 +0530
Subject: [wp-hackers] What Should A Plugin Author Do To Make Plugins
	Extensible?
Message-ID: <000f01cb47f3$a28807c0$e7981740$@org>

What are the best practices to be followed while implementing a plug-in so
that the plug-in can be extended by other plug-in authors. 

 

Raj


From wp at andrewnacin.com  Mon Aug 30 04:12:31 2010
From: wp at andrewnacin.com (Andrew Nacin)
Date: Mon, 30 Aug 2010 00:12:31 -0400
Subject: [wp-hackers] What Should A Plugin Author Do To Make Plugins
	Extensible?
In-Reply-To: <000f01cb47f3$a28807c0$e7981740$@org>
References: <000f01cb47f3$a28807c0$e7981740$@org>
Message-ID: <AANLkTik=-ubdRwtewc0YTWTS4SQ2Q1N=7SSbBee_0msF@mail.gmail.com>

On Sun, Aug 29, 2010 at 11:30 PM, Raj <list at expost.org> wrote:

> What are the best practices to be followed while implementing a plug-in so
> that the plug-in can be extended by other plug-in authors.
>

Here's four to start:

 - Wrap functions in function_exists(). Not necessary for functions attached
to hooks as those can be removed, or those where overriding them makes
little sense (unless you want to be sure there are no conflicts... It's good
practice).

 - Include actions and filters of your own.

 - Make sure you don't execute code on include. This is good practice for
any plugin. Wait for a hook for basically anything.

 - If you're using a class to encapsulate your plugin, make sure you allow
the methods in that plugin to be accessed (singleton, global variable,
etc.), so hooks can be removed and such.

From mda at blogwaffe.com  Mon Aug 30 04:36:11 2010
From: mda at blogwaffe.com (Michael D Adams)
Date: Sun, 29 Aug 2010 21:36:11 -0700
Subject: [wp-hackers] User Roles & Capabilities - How come add and edit
 aren't separate?
In-Reply-To: <AANLkTiky9h1ygUctmsTmeKFmBfVF=-Wp7qY9jWEwsu9g@mail.gmail.com>
References: <AANLkTikqidDH78VPwuZpEXSSaq-g7boH08pogZzcw1RH@mail.gmail.com>
	<AANLkTiky9h1ygUctmsTmeKFmBfVF=-Wp7qY9jWEwsu9g@mail.gmail.com>
Message-ID: <AANLkTimeaTP1zYHzRJORY6M0xs9Di6XtUt3U5F8axR6h@mail.gmail.com>

On Sun, Aug 29, 2010 at 5:30 PM, Andrew Nacin <wp at andrewnacin.com> wrote:
> On Sun, Aug 29, 2010 at 7:22 PM, ErisDS <erisds at gmail.com> wrote:
>
>> Hopefully this is a quick question: does anyone know why the capabilities
>> aren't divided into edit_posts and add_posts or edit_pages and add_pages?
>> The capability "edit_posts"/"edit_pages" also permits a user to add new
>> ones. Is it not a reasonable use case that users should be able to add but
>> not edit, or edit but not add?

Can you explain your use case more?  Is this edit-only user only
editing other people's posts? Editing only her posts that someone else
writes but assigns to her?  Editing both others' posts and his posts?

> I've worked around this by literally denying access to specific screens
> based on the $current_screen object, $pagenow, etc., according to specific
> use cases. The distinction isn't too useful for regular post types but I've
> seen some custom post type use cases where it makes some sense.

That's the best way I can think of too, but it takes a lot of
whitelisting (QuickPress, PressThis, ...) and it doesn't help with
XML-RPC or APP calls.  I think you'd also need to hook on some
pre-save filter.

> It's also tough to decide how it would be handled. When do we make the
> switch from requiring add_posts to requiring edit_posts? Someone with only
> add_posts will find themselves suddenly losing their post on save, or
> publish? Or can they always see it? (In order to see it, they'll need
> edit_posts to see that screen, right?) The converse is probably also easier
> -- someone having the ability to edit_posts but not add_posts... But at that
> point, they can't edit anything unless assigned to them, because they don't
> have the capabilities to edit others' posts.
>
> It seems like a sensible breakdown but then the implementation gets very
> foggy.

edit_posts means "create posts and edit posts I wrote that are not yet
published".

WP implements something like a user with "add_posts" but without
"edit_posts": contributors are users without edit_published_posts.
It's not quite the same, but it's one practical way to answer your
questions above.

To implement a user with edit_posts but without "add_posts", it might
be possible to strip a user's edit_posts but give him/her
edit_others_posts, edit_published_posts, and edit_private_posts as
appropriate.  You'd have do this stripping dynamically, though, since
menus (in core and in plugins) use edit_posts to control access to
various screens.

Mike
--mdawaffe

From elfin at elfden.co.uk  Mon Aug 30 07:21:39 2010
From: elfin at elfden.co.uk (Rich Pedley)
Date: Mon, 30 Aug 2010 08:21:39 +0100
Subject: [wp-hackers] Plugin repository issue
In-Reply-To: <4C7AD953.909@mattjacob.com>
References: <4C78F306.9030803@elfden.co.uk>	<4C790ECF.8040807@elfden.co.uk>	<AANLkTi=ap6LZVF1NbqjX32Ew_dxkSqVpfrhqTcOiJt8C@mail.gmail.com>	<AANLkTima1eXy2j27Etdokp-k7J9-QNhy7WRVn4jqHMy-@mail.gmail.com>	<4C791415.6090808@elfden.co.uk>	<AANLkTikXGwAWOEMAF6nv8jSnWnS3iXh1N6h3Xf_+pWy0@mail.gmail.com>	<AANLkTimORgkiUstO_p6i7ZC7EizgUUjoOXi0Mh9AZkSq@mail.gmail.com>	<4C79539C.70505@elfden.co.uk>
	<4C7AD953.909@mattjacob.com>
Message-ID: <4C7B5C03.2010108@elfden.co.uk>

On 29/08/2010 23:04, Matt Jacob wrote:
> On 8/28/10 11:21 AM, Rich Pedley wrote:
>> Well I deleted a lot of the old (keep a local copy in case anyone ever
>> needs it of course).
>
> You probably don't even need to keep a local copy unless you *really*
> want to. With SVN, nothing is ever really deleted---it's just deleted as
> of a particular revision number. The repository still has full knowledge
> of everything that once existed, though.

True, but that would then involve me looking up how to retrieve things 
each time I needed to. And no point telling me now how to, because the 
likely hood of anyone asking is virtually zero. But no doubt in the 
distant future someone will ask, by which time I will have forgotten...

Rich

From erisds at gmail.com  Mon Aug 30 07:43:27 2010
From: erisds at gmail.com (ErisDS)
Date: Mon, 30 Aug 2010 08:43:27 +0100
Subject: [wp-hackers] User Roles & Capabilities - How come add and edit
 aren't separate?
In-Reply-To: <AANLkTimeaTP1zYHzRJORY6M0xs9Di6XtUt3U5F8axR6h@mail.gmail.com>
References: <AANLkTikqidDH78VPwuZpEXSSaq-g7boH08pogZzcw1RH@mail.gmail.com>
	<AANLkTiky9h1ygUctmsTmeKFmBfVF=-Wp7qY9jWEwsu9g@mail.gmail.com>
	<AANLkTimeaTP1zYHzRJORY6M0xs9Di6XtUt3U5F8axR6h@mail.gmail.com>
Message-ID: <AANLkTi=39VEiXc4XBN7TifC=PKRQEoZwd-=8LMYHgQEB@mail.gmail.com>

>
> Can you explain your use case more?  Is this edit-only user only
> editing other people's posts? Editing only her posts that someone else
> writes but assigns to her?  Editing both others' posts and his posts?


The specific use case is a user that can edit pages but not add new ones,
but that lead me to look at any similar use case where it might be desirable
to keep add and edit separate and how I would/could solve the problems
surrounding it.
However, it probably makes most sense in terms of pages - the idea that an
editor can edit a website's pages but not add new ones.


>  > It's also tough to decide how it would be handled. When do we make the
> > switch from requiring add_posts to requiring edit_posts? Someone with
> only
> > add_posts will find themselves suddenly losing their post on save, or
> > publish? Or can they always see it? (In order to see it, they'll need
> > edit_posts to see that screen, right?) The converse is probably also
> easier
> > -- someone having the ability to edit_posts but not add_posts... But at
> that
> > point, they can't edit anything unless assigned to them, because they
> don't
> > have the capabilities to edit others' posts.
> >
> > It seems like a sensible breakdown but then the implementation gets very
> > foggy.
>

See, I knew there would be a reason why it isn't done that way, I just
didn't know what it was. It makes sense - it is a very tough line to draw. I
would consider that from the use case of edit but not add then yes they'd
need something like "edit_others_posts", and from the use case of add but
not edit, feasibly they'd need "edit_own_posts" otherwise they'd be locked
out on autosave. But it's a relatively arbitrary line to draw and I wouldn't
imagine these ideas should be built into the default roles - just be *nice*
if the capabilities were there.


> To implement a user with edit_posts but without "add_posts", it might
> be possible to strip a user's edit_posts but give him/her
> edit_others_posts, edit_published_posts, and edit_private_posts as
> appropriate.  You'd have do this stripping dynamically, though, since
> menus (in core and in plugins) use edit_posts to control access to
> various screens.
>

This is where the access system trips me up / starts to make less sense to
me - the fact that the high level capabilites are the ones generally checked
for (so the posts menu checks for edit_posts not edit_posts OR
edit_others_posts etc). But I can see there are ways to work around it (just
change the capability that the menu checks for). There seems to me to be a
few filters missing - e.g. around the add new button on the edit page, but
that's something I can maybe have a go at patching (don't want to be seen as
a moaner!).

Anyway, thanks for your replies. My question has been answered - I was only
wondering why it worked that way & now I understand.

Eris :)

From lynne.pope at gmail.com  Mon Aug 30 11:15:28 2010
From: lynne.pope at gmail.com (Lynne Pope)
Date: Mon, 30 Aug 2010 23:15:28 +1200
Subject: [wp-hackers] WordPress 3.0.1 package problem?
Message-ID: <AANLkTimPMs+y6Ym5c14Ds17BKmT+8tNVyf+_CuSwFn5-@mail.gmail.com>

Hi all,
I'm curious as to why WP 3.0 tar.gz has been removed from the release
archive (http://wordpress.org/download/release-archive/) and why
http://wordpress.org/wordpress-mu-3.0.1.tar.gz is also not available. Does
anyone know why this is?
Without those releases there is no md5checksum to check file integrity
against.

Cheers,
Lynne

From wordpress at zed1.com  Mon Aug 30 11:39:42 2010
From: wordpress at zed1.com (Mike Little)
Date: Mon, 30 Aug 2010 12:39:42 +0100
Subject: [wp-hackers] WordPress 3.0.1 package problem?
In-Reply-To: <AANLkTimPMs+y6Ym5c14Ds17BKmT+8tNVyf+_CuSwFn5-@mail.gmail.com>
References: <AANLkTimPMs+y6Ym5c14Ds17BKmT+8tNVyf+_CuSwFn5-@mail.gmail.com>
Message-ID: <AANLkTi=-UNwKRZWpqSh_HPKYxKssBqF84oCpdkKGOS=P@mail.gmail.com>

On 30 August 2010 12:15, Lynne Pope <lynne.pope at gmail.com> wrote:

> Hi all,
> I'm curious as to why WP 3.0 tar.gz has been removed from the release
> archive (http://wordpress.org/download/release-archive/) and why
> http://wordpress.org/wordpress-mu-3.0.1.tar.gz is also not available. Does
> anyone know why this is?
>

I see them both, can download them both, and their respective md5 checksums
match.


Mike
-- 
Mike Little
http://zed1.com/

From wordpress at zed1.com  Mon Aug 30 11:40:45 2010
From: wordpress at zed1.com (Mike Little)
Date: Mon, 30 Aug 2010 12:40:45 +0100
Subject: [wp-hackers] WordPress 3.0.1 package problem?
In-Reply-To: <AANLkTi=-UNwKRZWpqSh_HPKYxKssBqF84oCpdkKGOS=P@mail.gmail.com>
References: <AANLkTimPMs+y6Ym5c14Ds17BKmT+8tNVyf+_CuSwFn5-@mail.gmail.com>
	<AANLkTi=-UNwKRZWpqSh_HPKYxKssBqF84oCpdkKGOS=P@mail.gmail.com>
Message-ID: <AANLkTikKwEdDj-B_eJ6r8k9YEJvGDvOX4KC=WiHGbK3Q@mail.gmail.com>

On 30 August 2010 12:39, Mike Little <wordpress at zed1.com> wrote:

> On 30 August 2010 12:15, Lynne Pope <lynne.pope at gmail.com> wrote:
>
>> Hi all,
>> I'm curious as to why WP 3.0 tar.gz has been removed from the release
>> archive (http://wordpress.org/download/release-archive/) and why
>> http://wordpress.org/wordpress-mu-3.0.1.tar.gz is also not available.
>> Does
>> anyone know why this is?
>>
>
> I see them both, can download them both, and their respective md5 checksums
> match.
>
>
Actually, I just spotted you said wordpress-mu 3.01, there is no WordPress
MU 3.0.1 it's all WordPress now.

Mike
-- 
Mike Little
http://zed1.com/

From marco.mehnert at x28.ch  Mon Aug 30 11:41:47 2010
From: marco.mehnert at x28.ch (marco.mehnert at x28.ch)
Date: 30 Aug 2010 13:41:47 +0200
Subject: [wp-hackers]
	=?utf-8?q?wp-hackers_Digest=2C_Vol_67=2C_Issue_112?=
Message-ID: <20100830114147.10445.qmail@everest.ch-meta.net>

Guten Tag

Ich bin bis am 10.09.2010 im Urlaub. Ihre E-Mail wird nicht weitergeleitet. F?r dringende oder wichtige Angelegenheiten wenden Sie sich bitte an Herrn Christian Hanisch: 043 305 77 49 oder christian.hanisch at x28.ch.

Besten Dank und freundliche Gr?sse

-- 
Marco Mehnert
Dipl. Wirtschaftsingenieur FH
Leiter Operations & Support

x28 AG
Badestra?e 2
D-39114 Magdeburg
+49 391 50 58 48 61

www.x28.ch
marco.mehnert at x28.ch



From elfin at elfden.co.uk  Mon Aug 30 11:48:53 2010
From: elfin at elfden.co.uk (Rich Pedley)
Date: Mon, 30 Aug 2010 12:48:53 +0100
Subject: [wp-hackers] WordPress 3.0.1 package problem?
In-Reply-To: <AANLkTikKwEdDj-B_eJ6r8k9YEJvGDvOX4KC=WiHGbK3Q@mail.gmail.com>
References: <AANLkTimPMs+y6Ym5c14Ds17BKmT+8tNVyf+_CuSwFn5-@mail.gmail.com>	<AANLkTi=-UNwKRZWpqSh_HPKYxKssBqF84oCpdkKGOS=P@mail.gmail.com>
	<AANLkTikKwEdDj-B_eJ6r8k9YEJvGDvOX4KC=WiHGbK3Q@mail.gmail.com>
Message-ID: <4C7B9AA5.3040301@elfden.co.uk>

On 30/08/2010 12:40, Mike Little wrote:
> On 30 August 2010 12:39, Mike Little<wordpress at zed1.com>  wrote:
>
>> On 30 August 2010 12:15, Lynne Pope<lynne.pope at gmail.com>  wrote:
>>
>>> Hi all,
>>> I'm curious as to why WP 3.0 tar.gz has been removed from the release
>>> archive (http://wordpress.org/download/release-archive/) and why
>>> http://wordpress.org/wordpress-mu-3.0.1.tar.gz is also not available.
>>> Does
>>> anyone know why this is?
>>>
>>
>> I see them both, can download them both, and their respective md5 checksums
>> match.
>>
>>
> Actually, I just spotted you said wordpress-mu 3.01, there is no WordPress
> MU 3.0.1 it's all WordPress now.

Then why is there a 3.0 & 3.0.1 listed in the MU Releases section?

That page is confusing though, would it be better to split into 3 now?

Rich

From wordpress at zed1.com  Mon Aug 30 11:54:52 2010
From: wordpress at zed1.com (Mike Little)
Date: Mon, 30 Aug 2010 12:54:52 +0100
Subject: [wp-hackers] WordPress 3.0.1 package problem?
In-Reply-To: <4C7B9AA5.3040301@elfden.co.uk>
References: <AANLkTimPMs+y6Ym5c14Ds17BKmT+8tNVyf+_CuSwFn5-@mail.gmail.com>
	<AANLkTi=-UNwKRZWpqSh_HPKYxKssBqF84oCpdkKGOS=P@mail.gmail.com>
	<AANLkTikKwEdDj-B_eJ6r8k9YEJvGDvOX4KC=WiHGbK3Q@mail.gmail.com>
	<4C7B9AA5.3040301@elfden.co.uk>
Message-ID: <AANLkTinWsjJGpPU4X73BiT0=wvGLx2NBE9+5=Ew0GT+L@mail.gmail.com>

On 30 August 2010 12:48, Rich Pedley <elfin at elfden.co.uk> wrote:

> On 30/08/2010 12:40, Mike Little wrote:
>
>> On 30 August 2010 12:39, Mike Little<wordpress at zed1.com>  wrote:
>>
>>  On 30 August 2010 12:15, Lynne Pope<lynne.pope at gmail.com>  wrote:
>>>
>>>  Hi all,
>>>> I'm curious as to why WP 3.0 tar.gz has been removed from the release
>>>> archive (http://wordpress.org/download/release-archive/) and why
>>>> http://wordpress.org/wordpress-mu-3.0.1.tar.gz is also not available.
>>>> Does
>>>> anyone know why this is?
>>>>
>>>>
>>> I see them both, can download them both, and their respective md5
>>> checksums
>>> match.
>>>
>>>
>>>  Actually, I just spotted you said wordpress-mu 3.01, there is no
>> WordPress
>> MU 3.0.1 it's all WordPress now.
>>
>
> Then why is there a 3.0 & 3.0.1 listed in the MU Releases section?
>
> That page is confusing though, would it be better to split into 3 now?
>
> Rich
>

The mu releases did not used to be on that page at all. I suspect it's
something to do with the reworking of the .org site. So my guess would be
that an automated script that generates the links is probably confused by
having mu releases listed on the same page (and now pointing at the same svn
tree).

Mike
-- 
Mike Little
http://zed1.com/

From elfin at elfden.co.uk  Mon Aug 30 12:17:38 2010
From: elfin at elfden.co.uk (Rich Pedley)
Date: Mon, 30 Aug 2010 13:17:38 +0100
Subject: [wp-hackers] WordPress 3.0.1 package problem?
In-Reply-To: <AANLkTinWsjJGpPU4X73BiT0=wvGLx2NBE9+5=Ew0GT+L@mail.gmail.com>
References: <AANLkTimPMs+y6Ym5c14Ds17BKmT+8tNVyf+_CuSwFn5-@mail.gmail.com>	<AANLkTi=-UNwKRZWpqSh_HPKYxKssBqF84oCpdkKGOS=P@mail.gmail.com>	<AANLkTikKwEdDj-B_eJ6r8k9YEJvGDvOX4KC=WiHGbK3Q@mail.gmail.com>	<4C7B9AA5.3040301@elfden.co.uk>
	<AANLkTinWsjJGpPU4X73BiT0=wvGLx2NBE9+5=Ew0GT+L@mail.gmail.com>
Message-ID: <4C7BA162.1040102@elfden.co.uk>

On 30/08/2010 12:54, Mike Little wrote:
> On 30 August 2010 12:48, Rich Pedley<elfin at elfden.co.uk>  wrote:
>
>> On 30/08/2010 12:40, Mike Little wrote:
>>
>>>>   Actually, I just spotted you said wordpress-mu 3.01, there is no
>>> WordPress
>>> MU 3.0.1 it's all WordPress now.
>>>
>>
>> Then why is there a 3.0&  3.0.1 listed in the MU Releases section?
>>
>> That page is confusing though, would it be better to split into 3 now?
>>
>> Rich
>>
>
> The mu releases did not used to be on that page at all. I suspect it's
> something to do with the reworking of the .org site. So my guess would be
> that an automated script that generates the links is probably confused by
> having mu releases listed on the same page (and now pointing at the same svn
> tree).
>

actually thinking about it, having those there is useful for those 
upgrading from MU.

I still think the page needs splitting into 3 now though.

Rich

From lynne.pope at gmail.com  Mon Aug 30 12:53:45 2010
From: lynne.pope at gmail.com (Lynne Pope)
Date: Tue, 31 Aug 2010 00:53:45 +1200
Subject: [wp-hackers] WordPress 3.0.1 package problem?
In-Reply-To: <4C7BA162.1040102@elfden.co.uk>
References: <AANLkTimPMs+y6Ym5c14Ds17BKmT+8tNVyf+_CuSwFn5-@mail.gmail.com>
	<AANLkTi=-UNwKRZWpqSh_HPKYxKssBqF84oCpdkKGOS=P@mail.gmail.com>
	<AANLkTikKwEdDj-B_eJ6r8k9YEJvGDvOX4KC=WiHGbK3Q@mail.gmail.com>
	<4C7B9AA5.3040301@elfden.co.uk>
	<AANLkTinWsjJGpPU4X73BiT0=wvGLx2NBE9+5=Ew0GT+L@mail.gmail.com>
	<4C7BA162.1040102@elfden.co.uk>
Message-ID: <AANLkTinukaYk4B2A3O38EgeDgE1FG1ffDz2orKjDTPad@mail.gmail.com>

On Tue, Aug 31, 2010 at 12:17 AM, Rich Pedley <elfin at elfden.co.uk> wrote:

> On 30/08/2010 12:54, Mike Little wrote:
>
>> On 30 August 2010 12:48, Rich Pedley<elfin at elfden.co.uk>  wrote:
>>
>>  On 30/08/2010 12:40, Mike Little wrote:
>>>
>>>   Actually, I just spotted you said wordpress-mu 3.01, there is no
>>>>>
>>>> WordPress
>>>> MU 3.0.1 it's all WordPress now.
>>>>
>>>>
>>> Then why is there a 3.0&  3.0.1 listed in the MU Releases section?
>>>
>>> That page is confusing though, would it be better to split into 3 now?
>>>
>>> Rich
>>>
>>>
>> The mu releases did not used to be on that page at all. I suspect it's
>> something to do with the reworking of the .org site. So my guess would be
>> that an automated script that generates the links is probably confused by
>> having mu releases listed on the same page (and now pointing at the same
>> svn
>> tree).
>>
>>
> actually thinking about it, having those there is useful for those
> upgrading from MU.
>
>  I still think the page needs splitting into 3 now though.



Aha - now I see what's happened! I am so used to loading that page,
scrolling to the bottom, glancing at the version number and grabbing that +
the md5checksum that I never even noticed the page now has MU releases on it
as well. Then, to add to the confusion, there are releases listed there for
MU 3.0 and 3.0.1 zips.

I agree that those three should be split. My mistake came from just
habitually using that page the same way every time. Since MU 3.0.x is the
same as WordPress 3.0.x now I just went, "huh?" and ignored the MU in the
file name. I don't think it's illogical to expect the MU 3.0.x releases to
be the same files as the WP 3.0.x releases. However, even so, if a zip file
is provided for the release and there's a link for a tar.gz and md5checksum
then the link shouldn't be going to a "Release not found." page.

I'd prefer the page split, with a dedicated MU release archive for
historical reasons that ends with the last separate release of MU. Keeping
RC's and betas separate also makes sense, while making it less likely for
users to accidentally download them.

Of course, I am biased - I don't want to have to scroll and engage eyes and
brain just to quickly grab a distro ;)

Lynne

From dragonfly at dragonflyeye.net  Mon Aug 30 14:16:32 2010
From: dragonfly at dragonflyeye.net (Thomas Belknap)
Date: Mon, 30 Aug 2010 10:16:32 -0400
Subject: [wp-hackers] get_last_updated Deprecated
Message-ID: <AANLkTinV9n0C+=kKybbKksih_YQWoaxQNYEcSERW=Kdt@mail.gmail.com>

I thought I'd read something about this on this list, but I tried searching
the archives and came up with bupkis. Probably substandard searching skilz,
I'm sure...

It looks like get_last_updated is marked to be deprecated soon. Is there a
function meant to replace this functionality in 3.0? Seems like the kind of
thing you'd want and certainly I do.

In fact, looking at ms-blogs.php, I really don't see anything that allows us
to return a list of current blogs at all? Sorry, I'm just so used to the
wpmu-functions.php list that I'm probably just lost.

From Ken at adcSTUDIO.com  Mon Aug 30 19:45:21 2010
From: Ken at adcSTUDIO.com (Ken)
Date: Mon, 30 Aug 2010 15:45:21 -0400
Subject: [wp-hackers] uninstall post meta with get_post issue
Message-ID: <i5h1op$7mr$1@dough.gmane.org>

Hi All,

I've been trying to write an uninstall for my plugin, but the following 
doesn't work:

<?php
if( !defined( 'ABSPATH') && !defined('WP_UNINSTALL_PLUGIN') )
     exit();
$get_posts_args = array('numberposts' => -1, // codex code had 0
			  'post_type' => 'any',
			  'post_status' => null );
$all_posts = get_posts( $get_posts_args );
foreach( $all_posts as $postinfo) {
	delete_post_meta($postinfo->ID, 'post_meta_one');
	delete_post_meta($postinfo->ID, 'post_meta_two');
}
?>

I put this in uninstall.php in the root folder of my plugin. For some 
reason it won't delete anything the meta of drafts. Am I doing something 
wrong?


From scribu at gmail.com  Mon Aug 30 20:02:43 2010
From: scribu at gmail.com (scribu)
Date: Mon, 30 Aug 2010 23:02:43 +0300
Subject: [wp-hackers] uninstall post meta with get_post issue
In-Reply-To: <i5h1op$7mr$1@dough.gmane.org>
References: <i5h1op$7mr$1@dough.gmane.org>
Message-ID: <AANLkTinhBLXZ5LLMgD2XZ5LRz1escdf2QWrKn7AGUiJo@mail.gmail.com>

On Mon, Aug 30, 2010 at 10:45 PM, Ken <Ken at adcstudio.com> wrote:

> I put this in uninstall.php in the root folder of my plugin. For some
> reason it won't delete anything the meta of drafts. Am I doing something
> wrong?
>

Instead of

'post_status' => null

you should have

'post_status' => 'any'

Personally, I would do a single direct query:

$wpdb->query( "DELETE FROM $wpdb->postmeta WHERE meta_key IN ('foo', 'bar')"
);


-- 
http://scribu.net

From Ken at adcSTUDIO.com  Mon Aug 30 20:08:50 2010
From: Ken at adcSTUDIO.com (Ken)
Date: Mon, 30 Aug 2010 16:08:50 -0400
Subject: [wp-hackers] uninstall post meta with get_post issue
In-Reply-To: <AANLkTinhBLXZ5LLMgD2XZ5LRz1escdf2QWrKn7AGUiJo@mail.gmail.com>
References: <i5h1op$7mr$1@dough.gmane.org>
	<AANLkTinhBLXZ5LLMgD2XZ5LRz1escdf2QWrKn7AGUiJo@mail.gmail.com>
Message-ID: <i5h34n$e2f$1@dough.gmane.org>

On 8/30/2010 4:02 PM, scribu wrote:
> On Mon, Aug 30, 2010 at 10:45 PM, Ken<Ken at adcstudio.com>  wrote:
>
>> I put this in uninstall.php in the root folder of my plugin. For some
>> reason it won't delete anything the meta of drafts. Am I doing something
>> wrong?
>>
>
> Instead of
>
> 'post_status' =>  null
>
> you should have
>
> 'post_status' =>  'any'
>
> Personally, I would do a single direct query:
>
> $wpdb->query( "DELETE FROM $wpdb->postmeta WHERE meta_key IN ('foo', 'bar')"
> );
>
>


Thanks scribu,

Reading the codex I was wondering why post_type had 'any' but 
post_status was 'blank'. I tried reading the source for get_post but I 
got too far down the rabbit hole for it to make any sense to me! Your 
code works like a charm, thanks again. I'll update the codex.


From frank at bueltge.de  Mon Aug 30 20:09:19 2010
From: frank at bueltge.de (Frank Bueltge)
Date: Mon, 30 Aug 2010 22:09:19 +0200
Subject: [wp-hackers] thickbox in wp-admin
Message-ID: <AANLkTimGitGap5qWERRuzzrms-6kHqTwJs6rxZOwk9rZ@mail.gmail.com>

I use the thickbox function/scripts in own pages on wp-admin. i give the
size of the window with this script:
Example:
<script type="text/javascript">
<!--
 var viewportwidth;
var viewportheight;
 if (typeof window.innerWidth != 'undefined') {
viewportwidth = window.innerWidth-80,
 viewportheight = window.innerHeight-100
} else if (typeof document.documentElement != 'undefined'
 && typeof document.documentElement.clientWidth !=
'undefined' && document.documentElement.clientWidth != 0)
 {
viewportwidth = document.documentElement.clientWidth,
viewportheight = document.documentElement.clientHeight
 } else { // older versions of IE
viewportwidth = document.getElementsByTagName('body')[0].clientWidth,
 viewportheight = document.getElementsByTagName('body')[0].clientHeight
}
 //document.write('<p class="textright">Your viewport width is
'+viewportwidth+'x'+viewportheight+'</p>');
 document.write('<a onclick="return false;" href="<?php echo WP_PLUGIN_URL .
'/' . FB_ADM_BASEDIR; ?>/inc/index.php?username=<?php echo DB_USER;
?>&?KeepThis=true&amp;TB_iframe=true&amp;height='+viewportheight+'&width='+viewportwidth+'"
class="thickbox button"><?php _e( 'Start ', FB_TEXTDOMAIN ); ?></a>');
 //-->
</script>

this works fine on own pages in backend of WP, dont worls on exists pages in
the wp-admin, like wp-admin/plugins.php

It is not possible to set the wight  and height on the URL in the link - any
ideas or what is my error?

Many thanks for your help for this small request on my plugins.
Best wishes

From wp at andrewnacin.com  Mon Aug 30 20:45:16 2010
From: wp at andrewnacin.com (Andrew Nacin)
Date: Mon, 30 Aug 2010 16:45:16 -0400
Subject: [wp-hackers] WordPress 3.0.1 package problem?
In-Reply-To: <AANLkTinukaYk4B2A3O38EgeDgE1FG1ffDz2orKjDTPad@mail.gmail.com>
References: <AANLkTimPMs+y6Ym5c14Ds17BKmT+8tNVyf+_CuSwFn5-@mail.gmail.com>
	<AANLkTi=-UNwKRZWpqSh_HPKYxKssBqF84oCpdkKGOS=P@mail.gmail.com>
	<AANLkTikKwEdDj-B_eJ6r8k9YEJvGDvOX4KC=WiHGbK3Q@mail.gmail.com>
	<4C7B9AA5.3040301@elfden.co.uk>
	<AANLkTinWsjJGpPU4X73BiT0=wvGLx2NBE9+5=Ew0GT+L@mail.gmail.com>
	<4C7BA162.1040102@elfden.co.uk>
	<AANLkTinukaYk4B2A3O38EgeDgE1FG1ffDz2orKjDTPad@mail.gmail.com>
Message-ID: <AANLkTinYsgRcc8bxUT=bSezqYiFkUk0cTQc+SFWxuyx-@mail.gmail.com>

On Mon, Aug 30, 2010 at 8:53 AM, Lynne Pope <lynne.pope at gmail.com> wrote:

> On Tue, Aug 31, 2010 at 12:17 AM, Rich Pedley <elfin at elfden.co.uk> wrote:
>
> > On 30/08/2010 12:54, Mike Little wrote:
> >
> >> On 30 August 2010 12:48, Rich Pedley<elfin at elfden.co.uk>  wrote:
> >>
> >>  On 30/08/2010 12:40, Mike Little wrote:
> >>>
> >>>   Actually, I just spotted you said wordpress-mu 3.01, there is no
> >>>>>
> >>>> WordPress
> >>>> MU 3.0.1 it's all WordPress now.
> >>>>
> >>>>
> >>> Then why is there a 3.0&  3.0.1 listed in the MU Releases section?
> >>>
> >>> That page is confusing though, would it be better to split into 3 now?
> >>>
> >>> Rich
> >>>
> >>>
> >> The mu releases did not used to be on that page at all. I suspect it's
> >> something to do with the reworking of the .org site. So my guess would
> be
> >> that an automated script that generates the links is probably confused
> by
> >> having mu releases listed on the same page (and now pointing at the same
> >> svn
> >> tree).
> >>
> >>
> > actually thinking about it, having those there is useful for those
> > upgrading from MU.
> >
> >  I still think the page needs splitting into 3 now though.
>

To address the various questions here -

That page can probably be split, yes. We dropped it in there when we shut
down mu.wordpress.org because we didn't want the MU archive to go away.

That said, the 3.0+ "MU" zips are for the 2.9.2- MU automatic upgrade, which
expects the download to be inside a directory called "wordpress-mu" instead
of "wordpress". That's the only difference between 3.0.1-mu-latest and
3.0.1-latest.

Because these are only used by the automatic upgrade, we should be able to
hide them from the release archive page.

From jer at simianuprising.com  Mon Aug 30 20:57:46 2010
From: jer at simianuprising.com (Jeremy Clarke)
Date: Mon, 30 Aug 2010 16:57:46 -0400
Subject: [wp-hackers] What Should A Plugin Author Do To Make Plugins
	Extensible?
In-Reply-To: <AANLkTik=-ubdRwtewc0YTWTS4SQ2Q1N=7SSbBee_0msF@mail.gmail.com>
References: <000f01cb47f3$a28807c0$e7981740$@org>
	<AANLkTik=-ubdRwtewc0YTWTS4SQ2Q1N=7SSbBee_0msF@mail.gmail.com>
Message-ID: <AANLkTin+bGWuUopjjzDQjHK0cFUthCSVtdSajN68R7dv@mail.gmail.com>

On Mon, Aug 30, 2010 at 12:12 AM, Andrew Nacin <wp at andrewnacin.com> wrote:

>
>  - Wrap functions in function_exists(). Not necessary for functions
> attached
> to hooks as those can be removed, or those where overriding them makes
> little sense (unless you want to be sure there are no conflicts... It's
> good
> practice).
>
>  - Include actions and filters of your own.
>
>
And *mention the new actions/filters/pluggable-functions that you've added
in your plugin description*. If you don't mention them then developers won't
know they are there and will be less likely to choose your plugin because
they don't realize that you're doing extra work to make their lives easier.

IMHO this even applies to template tags and helper functions. I think a lot
more functions from plugins are worth mentioning on the plugin page and
treating as a kind of API. If nothing else it would encourage plugin devs to
think of their functions as an API rather than something only they use,
which might increase usability for others.

-- 
Jeremy Clarke
Code and Design | globalvoicesonline.org

From wp at andrewnacin.com  Mon Aug 30 21:00:27 2010
From: wp at andrewnacin.com (Andrew Nacin)
Date: Mon, 30 Aug 2010 17:00:27 -0400
Subject: [wp-hackers] get_last_updated Deprecated
In-Reply-To: <AANLkTinV9n0C+=kKybbKksih_YQWoaxQNYEcSERW=Kdt@mail.gmail.com>
References: <AANLkTinV9n0C+=kKybbKksih_YQWoaxQNYEcSERW=Kdt@mail.gmail.com>
Message-ID: <AANLkTinfPLg=Cwiwq6sLXrT=ae-7Ws9z5vdCSEgU+Kw0@mail.gmail.com>

On Mon, Aug 30, 2010 at 10:16 AM, Thomas Belknap <dragonfly at dragonflyeye.net
> wrote:

> I thought I'd read something about this on this list, but I tried searching
> the archives and came up with bupkis. Probably substandard searching skilz,
> I'm sure...
>
> It looks like get_last_updated is marked to be deprecated soon. Is there a
> function meant to replace this functionality in 3.0? Seems like the kind of
> thing you'd want and certainly I do.
>
> In fact, looking at ms-blogs.php, I really don't see anything that allows
> us
> to return a list of current blogs at all? Sorry, I'm just so used to the
> wpmu-functions.php list that I'm probably just lost.


Only the first argument for get_last_updated() is deprecated.

get_blog_list() was deprecated for being suicidal. The queries it generated
were death for any scaled MU implementation. This has been discussed in a
few other instances -- try searching the wp-hackers archives or
core.trac.wordpress.org.

From wp at andrewnacin.com  Mon Aug 30 21:04:10 2010
From: wp at andrewnacin.com (Andrew Nacin)
Date: Mon, 30 Aug 2010 17:04:10 -0400
Subject: [wp-hackers] What Should A Plugin Author Do To Make Plugins
	Extensible?
In-Reply-To: <AANLkTin+bGWuUopjjzDQjHK0cFUthCSVtdSajN68R7dv@mail.gmail.com>
References: <000f01cb47f3$a28807c0$e7981740$@org>
	<AANLkTik=-ubdRwtewc0YTWTS4SQ2Q1N=7SSbBee_0msF@mail.gmail.com>
	<AANLkTin+bGWuUopjjzDQjHK0cFUthCSVtdSajN68R7dv@mail.gmail.com>
Message-ID: <AANLkTim4+FaeOhWt+Sn-1cC9CC7rbg_DMXCGhfzdASGr@mail.gmail.com>

On Mon, Aug 30, 2010 at 4:57 PM, Jeremy Clarke <jer at simianuprising.com>wrote:

> On Mon, Aug 30, 2010 at 12:12 AM, Andrew Nacin <wp at andrewnacin.com> wrote:
>
> >
> >  - Wrap functions in function_exists(). Not necessary for functions
> > attached
> > to hooks as those can be removed, or those where overriding them makes
> > little sense (unless you want to be sure there are no conflicts... It's
> > good
> > practice).
> >
> >  - Include actions and filters of your own.
> >
> >
> And *mention the new actions/filters/pluggable-functions that you've added
> in your plugin description*. If you don't mention them then developers
> won't
> know they are there and will be less likely to choose your plugin because
> they don't realize that you're doing extra work to make their lives easier.
>
> IMHO this even applies to template tags and helper functions. I think a lot
> more functions from plugins are worth mentioning on the plugin page and
> treating as a kind of API. If nothing else it would encourage plugin devs
> to
> think of their functions as an API rather than something only they use,
> which might increase usability for others.


Good points. Another idea might be to offer template tags as hooks as well.
[1]

[1]
http://www.andrewnacin.com/2010/05/18/rethinking-template-tags-in-plugins/

From mikeschinkel at newclarity.net  Mon Aug 30 21:08:49 2010
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Mon, 30 Aug 2010 16:08:49 -0500 (CDT)
Subject: [wp-hackers] What Should A Plugin Author Do To Make
	Plugins	Extensible?
In-Reply-To: <AANLkTin+bGWuUopjjzDQjHK0cFUthCSVtdSajN68R7dv@mail.gmail.com>
References: <000f01cb47f3$a28807c0$e7981740$@org>
	<AANLkTik=-ubdRwtewc0YTWTS4SQ2Q1N=7SSbBee_0msF@mail.gmail.com>
	<AANLkTin+bGWuUopjjzDQjHK0cFUthCSVtdSajN68R7dv@mail.gmail.com>
Message-ID: <6C0E0A4E-8CD7-48A1-AD5E-786832B80FAF@newclarity.net>

It would be nice in the plugin page had a separate section label API to encourage more plugin developers to think about including an API and to give other developers an easy place to look for API docs. JWTCW. 

-Mike

On Aug 30, 2010, at 4:58 PM, Jeremy Clarke <jer at simianuprising.com> wrote:

> On Mon, Aug 30, 2010 at 12:12 AM, Andrew Nacin <wp at andrewnacin.com> wrote:
> 
>> 
>> - Wrap functions in function_exists(). Not necessary for functions
>> attached
>> to hooks as those can be removed, or those where overriding them makes
>> little sense (unless you want to be sure there are no conflicts... It's
>> good
>> practice).
>> 
>> - Include actions and filters of your own.
>> 
>> 
> And *mention the new actions/filters/pluggable-functions that you've added
> in your plugin description*. If you don't mention them then developers won't
> know they are there and will be less likely to choose your plugin because
> they don't realize that you're doing extra work to make their lives easier.
> 
> IMHO this even applies to template tags and helper functions. I think a lot
> more functions from plugins are worth mentioning on the plugin page and
> treating as a kind of API. If nothing else it would encourage plugin devs to
> think of their functions as an API rather than something only they use,
> which might increase usability for others.
> 
> -- 
> Jeremy Clarke
> Code and Design | globalvoicesonline.org
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

From chip at chipbennett.net  Tue Aug 31 01:22:20 2010
From: chip at chipbennett.net (Chip Bennett)
Date: Mon, 30 Aug 2010 20:22:20 -0500
Subject: [wp-hackers] the_shortlink and Attachment Pages
Message-ID: <AANLkTinSGyeK+mvTCtaincSkoXuO8m=V48zvfbruqTBR@mail.gmail.com>

Why does the_shortlink() not generate/return a shortlink for Attachment
pages? Is this an oversight, by design, or some error/mistake on my end?

Chip

From eric at eamann.com  Tue Aug 31 01:24:53 2010
From: eric at eamann.com (Eric Mann)
Date: Mon, 30 Aug 2010 18:24:53 -0700
Subject: [wp-hackers] What Should A Plugin Author Do To
	Make	Plugins	Extensible?
In-Reply-To: <6C0E0A4E-8CD7-48A1-AD5E-786832B80FAF@newclarity.net>
References: <000f01cb47f3$a28807c0$e7981740$@org>	<AANLkTik=-ubdRwtewc0YTWTS4SQ2Q1N=7SSbBee_0msF@mail.gmail.com>	<AANLkTin+bGWuUopjjzDQjHK0cFUthCSVtdSajN68R7dv@mail.gmail.com>
	<6C0E0A4E-8CD7-48A1-AD5E-786832B80FAF@newclarity.net>
Message-ID: <000301cb48ab$51ae5c60$f50b1520$@com>

+1 for an API system in the readme file.  And to support it, I'm going to
start adding API documentation to all of my systems.

-----Original Message-----
From: wp-hackers-bounces at lists.automattic.com
[mailto:wp-hackers-bounces at lists.automattic.com] On Behalf Of Mike Schinkel
Sent: Monday, August 30, 2010 2:09 PM
To: wp-hackers at lists.automattic.com
Cc: wp-hackers at lists.automattic.com
Subject: Re: [wp-hackers] What Should A Plugin Author Do To Make Plugins
Extensible?

It would be nice in the plugin page had a separate section label API to
encourage more plugin developers to think about including an API and to give
other developers an easy place to look for API docs. JWTCW. 

-Mike

On Aug 30, 2010, at 4:58 PM, Jeremy Clarke <jer at simianuprising.com> wrote:

> On Mon, Aug 30, 2010 at 12:12 AM, Andrew Nacin <wp at andrewnacin.com> wrote:
> 
>> 
>> - Wrap functions in function_exists(). Not necessary for functions
>> attached
>> to hooks as those can be removed, or those where overriding them makes
>> little sense (unless you want to be sure there are no conflicts... It's
>> good
>> practice).
>> 
>> - Include actions and filters of your own.
>> 
>> 
> And *mention the new actions/filters/pluggable-functions that you've added
> in your plugin description*. If you don't mention them then developers
won't
> know they are there and will be less likely to choose your plugin because
> they don't realize that you're doing extra work to make their lives
easier.
> 
> IMHO this even applies to template tags and helper functions. I think a
lot
> more functions from plugins are worth mentioning on the plugin page and
> treating as a kind of API. If nothing else it would encourage plugin devs
to
> think of their functions as an API rather than something only they use,
> which might increase usability for others.
> 
> -- 
> Jeremy Clarke
> Code and Design | globalvoicesonline.org
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
_______________________________________________
wp-hackers mailing list
wp-hackers at lists.automattic.com
http://lists.automattic.com/mailman/listinfo/wp-hackers


From list at expost.org  Tue Aug 31 02:06:52 2010
From: list at expost.org (Raj)
Date: Tue, 31 Aug 2010 07:36:52 +0530
Subject: [wp-hackers] What Should A Plugin Author Do
	To	Make	Plugins	Extensible?
In-Reply-To: <000301cb48ab$51ae5c60$f50b1520$@com>
References: <000f01cb47f3$a28807c0$e7981740$@org>	<AANLkTik=-ubdRwtewc0YTWTS4SQ2Q1N=7SSbBee_0msF@mail.gmail.com>	<AANLkTin+bGWuUopjjzDQjHK0cFUthCSVtdSajN68R7dv@mail.gmail.com>	<6C0E0A4E-8CD7-48A1-AD5E-786832B80FAF@newclarity.net>
	<000301cb48ab$51ae5c60$f50b1520$@com>
Message-ID: <001b01cb48b1$30803170$91809450$@org>

Wish there was some way to resolve dependencies in Wordpress. For example, a
plugin that works depending on WP-eCommerece when installed, should prompt
the user of a missing dependency and offer to automatically install it. Has
this ever been considered before?

-----Original Message-----
From: wp-hackers-bounces at lists.automattic.com
[mailto:wp-hackers-bounces at lists.automattic.com] On Behalf Of Eric Mann
Sent: Tuesday, August 31, 2010 6:55 AM
To: wp-hackers at lists.automattic.com
Subject: Re: [wp-hackers] What Should A Plugin Author Do To Make Plugins
Extensible?

+1 for an API system in the readme file.  And to support it, I'm going to
start adding API documentation to all of my systems.

-----Original Message-----
From: wp-hackers-bounces at lists.automattic.com
[mailto:wp-hackers-bounces at lists.automattic.com] On Behalf Of Mike Schinkel
Sent: Monday, August 30, 2010 2:09 PM
To: wp-hackers at lists.automattic.com
Cc: wp-hackers at lists.automattic.com
Subject: Re: [wp-hackers] What Should A Plugin Author Do To Make Plugins
Extensible?

It would be nice in the plugin page had a separate section label API to
encourage more plugin developers to think about including an API and to give
other developers an easy place to look for API docs. JWTCW. 

-Mike

On Aug 30, 2010, at 4:58 PM, Jeremy Clarke <jer at simianuprising.com> wrote:

> On Mon, Aug 30, 2010 at 12:12 AM, Andrew Nacin <wp at andrewnacin.com> wrote:
> 
>> 
>> - Wrap functions in function_exists(). Not necessary for functions
>> attached
>> to hooks as those can be removed, or those where overriding them makes
>> little sense (unless you want to be sure there are no conflicts... It's
>> good
>> practice).
>> 
>> - Include actions and filters of your own.
>> 
>> 
> And *mention the new actions/filters/pluggable-functions that you've added
> in your plugin description*. If you don't mention them then developers
won't
> know they are there and will be less likely to choose your plugin because
> they don't realize that you're doing extra work to make their lives
easier.
> 
> IMHO this even applies to template tags and helper functions. I think a
lot
> more functions from plugins are worth mentioning on the plugin page and
> treating as a kind of API. If nothing else it would encourage plugin devs
to
> think of their functions as an API rather than something only they use,
> which might increase usability for others.
> 
> -- 
> Jeremy Clarke
> Code and Design | globalvoicesonline.org
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
_______________________________________________
wp-hackers mailing list
wp-hackers at lists.automattic.com
http://lists.automattic.com/mailman/listinfo/wp-hackers

_______________________________________________
wp-hackers mailing list
wp-hackers at lists.automattic.com
http://lists.automattic.com/mailman/listinfo/wp-hackers


From mikeschinkel at newclarity.net  Tue Aug 31 02:27:58 2010
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Mon, 30 Aug 2010 22:27:58 -0400
Subject: [wp-hackers] What Should A Plugin Author Do
	To	Make	Plugins	Extensible?
In-Reply-To: <001b01cb48b1$30803170$91809450$@org>
References: <000f01cb47f3$a28807c0$e7981740$@org>	<AANLkTik=-ubdRwtewc0YTWTS4SQ2Q1N=7SSbBee_0msF@mail.gmail.com>	<AANLkTin+bGWuUopjjzDQjHK0cFUthCSVtdSajN68R7dv@mail.gmail.com>	<6C0E0A4E-8CD7-48A1-AD5E-786832B80FAF@newclarity.net>
	<000301cb48ab$51ae5c60$f50b1520$@com>
	<001b01cb48b1$30803170$91809450$@org>
Message-ID: <2648845D-6363-4D87-9993-F0CB35FE6762@newclarity.net>

On Aug 30, 2010, at 10:06 PM, Raj wrote:
> Wish there was some way to resolve dependencies in Wordpress. For example, a
> plugin that works depending on WP-eCommerece when installed, should prompt
> the user of a missing dependency and offer to automatically install it. Has
> this ever been considered before?

Considered, and discussed ad-nausem (search the archives.) With no resolution.

Maybe for v3.1?  

http://wpdevel.wordpress.com/2010/08/30/at-this-weeks-dev-chat-well-start-t/

-Mike

From list at expost.org  Tue Aug 31 03:27:12 2010
From: list at expost.org (Raj)
Date: Tue, 31 Aug 2010 08:57:12 +0530
Subject: [wp-hackers] What Is Deprecated Argument Run?
Message-ID: <000001cb48bc$69289570$3b79c050$@org>

What is the "deprecated_argument_run " action used for? Why is it called so
many times in every page request?

 


From wp at andrewnacin.com  Tue Aug 31 03:45:18 2010
From: wp at andrewnacin.com (Andrew Nacin)
Date: Mon, 30 Aug 2010 23:45:18 -0400
Subject: [wp-hackers] What Is Deprecated Argument Run?
In-Reply-To: <000001cb48bc$69289570$3b79c050$@org>
References: <000001cb48bc$69289570$3b79c050$@org>
Message-ID: <AANLkTi=BGsq7ooTwvTddu-NM21w-w39x8P8y1PXuO7Z6@mail.gmail.com>

On Mon, Aug 30, 2010 at 11:27 PM, Raj <list at expost.org> wrote:

> What is the "deprecated_argument_run " action used for? Why is it called so
> many times in every page request?


It is run when deprecated function arguments are used. If I had to guess, a
plugin or theme is using a lot of deprecated arguments.

You can track deprecated usage using this hook (and a few others). One such
plugin that logs deprecated notices is
http://wordpress.org/extend/plugins/log-deprecated-notices/.

If you turn on WP_DEBUG, you'll see the many E_NOTICEs being triggered.

From wp at andrewnacin.com  Tue Aug 31 04:06:41 2010
From: wp at andrewnacin.com (Andrew Nacin)
Date: Tue, 31 Aug 2010 00:06:41 -0400
Subject: [wp-hackers] What Should A Plugin Author Do To Make Plugins
	Extensible?
In-Reply-To: <2648845D-6363-4D87-9993-F0CB35FE6762@newclarity.net>
References: <000f01cb47f3$a28807c0$e7981740$@org>
	<AANLkTik=-ubdRwtewc0YTWTS4SQ2Q1N=7SSbBee_0msF@mail.gmail.com>
	<AANLkTin+bGWuUopjjzDQjHK0cFUthCSVtdSajN68R7dv@mail.gmail.com>
	<6C0E0A4E-8CD7-48A1-AD5E-786832B80FAF@newclarity.net>
	<000301cb48ab$51ae5c60$f50b1520$@com>
	<001b01cb48b1$30803170$91809450$@org>
	<2648845D-6363-4D87-9993-F0CB35FE6762@newclarity.net>
Message-ID: <AANLkTin7TNVj7MBvO2TzCPATULhe6_wKCfxQbYYMnPxn@mail.gmail.com>

On Mon, Aug 30, 2010 at 10:27 PM, Mike Schinkel <mikeschinkel at newclarity.net
> wrote:

> On Aug 30, 2010, at 10:06 PM, Raj wrote:
> > Wish there was some way to resolve dependencies in Wordpress. For
> example, a
> > plugin that works depending on WP-eCommerece when installed, should
> prompt
> > the user of a missing dependency and offer to automatically install it.
> Has
> > this ever been considered before?
>
> Considered, and discussed ad-nausem (search the archives.) With no
> resolution.
>

There's been a resolution. The core developers are in agreement [1] that the
existing hook structure is more than adequate for a dependencies system, if
not ideal.

[1] http://core.trac.wordpress.org/ticket/11308 complete with code examples
and suggested best practices for plugins that are dependencies and will be
dependencies.

From rbilesky at gmail.com  Tue Aug 31 04:12:01 2010
From: rbilesky at gmail.com (Ryan Bilesky)
Date: Mon, 30 Aug 2010 21:12:01 -0700
Subject: [wp-hackers] What Should A Plugin Author Do To Make Plugins
	Extensible?
In-Reply-To: <6C0E0A4E-8CD7-48A1-AD5E-786832B80FAF@newclarity.net>
References: <000f01cb47f3$a28807c0$e7981740$@org>
	<AANLkTik=-ubdRwtewc0YTWTS4SQ2Q1N=7SSbBee_0msF@mail.gmail.com>
	<AANLkTin+bGWuUopjjzDQjHK0cFUthCSVtdSajN68R7dv@mail.gmail.com>
	<6C0E0A4E-8CD7-48A1-AD5E-786832B80FAF@newclarity.net>
Message-ID: <AANLkTinta74dHSaPcCER8VRr4Qp=TGZVn65FoKc_TW9e@mail.gmail.com>

idk that enough plugin use this to make it worthwhile to include such a
section.  Plugin authors can always put API documentation under "Other
Notes"

On Mon, Aug 30, 2010 at 2:08 PM, Mike Schinkel
<mikeschinkel at newclarity.net>wrote:

> It would be nice in the plugin page had a separate section label API to
> encourage more plugin developers to think about including an API and to give
> other developers an easy place to look for API docs. JWTCW.
>
> -Mike
>
> On Aug 30, 2010, at 4:58 PM, Jeremy Clarke <jer at simianuprising.com> wrote:
>
> > On Mon, Aug 30, 2010 at 12:12 AM, Andrew Nacin <wp at andrewnacin.com>
> wrote:
> >
> >>
> >> - Wrap functions in function_exists(). Not necessary for functions
> >> attached
> >> to hooks as those can be removed, or those where overriding them makes
> >> little sense (unless you want to be sure there are no conflicts... It's
> >> good
> >> practice).
> >>
> >> - Include actions and filters of your own.
> >>
> >>
> > And *mention the new actions/filters/pluggable-functions that you've
> added
> > in your plugin description*. If you don't mention them then developers
> won't
> > know they are there and will be less likely to choose your plugin because
> > they don't realize that you're doing extra work to make their lives
> easier.
> >
> > IMHO this even applies to template tags and helper functions. I think a
> lot
> > more functions from plugins are worth mentioning on the plugin page and
> > treating as a kind of API. If nothing else it would encourage plugin devs
> to
> > think of their functions as an API rather than something only they use,
> > which might increase usability for others.
> >
> > --
> > Jeremy Clarke
> > Code and Design | globalvoicesonline.org
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers at lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From mikeschinkel at newclarity.net  Tue Aug 31 04:32:47 2010
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Tue, 31 Aug 2010 00:32:47 -0400
Subject: [wp-hackers] What Should A Plugin Author Do To Make Plugins
	Extensible?
In-Reply-To: <AANLkTinta74dHSaPcCER8VRr4Qp=TGZVn65FoKc_TW9e@mail.gmail.com>
References: <000f01cb47f3$a28807c0$e7981740$@org>
	<AANLkTik=-ubdRwtewc0YTWTS4SQ2Q1N=7SSbBee_0msF@mail.gmail.com>
	<AANLkTin+bGWuUopjjzDQjHK0cFUthCSVtdSajN68R7dv@mail.gmail.com>
	<6C0E0A4E-8CD7-48A1-AD5E-786832B80FAF@newclarity.net>
	<AANLkTinta74dHSaPcCER8VRr4Qp=TGZVn65FoKc_TW9e@mail.gmail.com>
Message-ID: <AF1FFFEF-2309-423A-855D-24647F7DC1D1@newclarity.net>

On Aug 31, 2010, at 12:12 AM, Ryan Bilesky wrote:
> idk that enough plugin use this to make it worthwhile to include such a
> section.  Plugin authors can always put API documentation under "Other
> Notes"

"Build it and they will come."

It's not about how many are doing it, it's about encouraging more to do so by making it more obvious that there are people who value it.

-Mike

From mikeschinkel at newclarity.net  Tue Aug 31 04:34:21 2010
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Tue, 31 Aug 2010 00:34:21 -0400
Subject: [wp-hackers] What Should A Plugin Author Do To Make Plugins
	Extensible?
In-Reply-To: <AANLkTin7TNVj7MBvO2TzCPATULhe6_wKCfxQbYYMnPxn@mail.gmail.com>
References: <000f01cb47f3$a28807c0$e7981740$@org>
	<AANLkTik=-ubdRwtewc0YTWTS4SQ2Q1N=7SSbBee_0msF@mail.gmail.com>
	<AANLkTin+bGWuUopjjzDQjHK0cFUthCSVtdSajN68R7dv@mail.gmail.com>
	<6C0E0A4E-8CD7-48A1-AD5E-786832B80FAF@newclarity.net>
	<000301cb48ab$51ae5c60$f50b1520$@com>
	<001b01cb48b1$30803170$91809450$@org>
	<2648845D-6363-4D87-9993-F0CB35FE6762@newclarity.net>
	<AANLkTin7TNVj7MBvO2TzCPATULhe6_wKCfxQbYYMnPxn@mail.gmail.com>
Message-ID: <9457DB21-3E8B-4132-9490-EAC77A4687E1@newclarity.net>

On Aug 31, 2010, at 12:06 AM, Andrew Nacin wrote:
> There's been a resolution. The core developers are in agreement [1] that the
> existing hook structure is more than adequate for a dependencies system, if
> not ideal.
> 
> [1] http://core.trac.wordpress.org/ticket/11308 complete with code examples
> and suggested best practices for plugins that are dependencies and will be
> dependencies.

I stand corrected; I was not aware of that discussion and it came after and/or in parallel with some of the discussions I was referring to.

That said, I don't think the ticket you mention addresses the use-case I was exactly referring to, at least not as far as I can tell (the examples were all abstract with no actual use-cases mentioned, ironic since I'm always asked for use-cases, but I digress...)

If I understood correctly what has been resolved is how to allow a plugin to have another plugin expose optional functionality.  For example I might has an analytics component interfaces with Google analytics but if a plugin is installed that supports Clicky then my plugin could give the user the option to use Clicky analytics instead.

That's very useful functionality and I agree with the approach.  But that's not the same use-case I was referring to.  Instead I'm referring to a system where a plugin A could identify that it needs plugin B, C and D and that it can then automatically download and install B, C and D (with user permission, of course.)  

Now that may be what westi was referring to when he said "I'm quite strongly against the idea of plugin dependencies. I would much prefer for plugins to be written using hooks and actions in the same way that WordPress is." If so, and respectfully speak, that's much like me saying "I'm quite strongly against people feeding the poor." It might be the case (I'm not, btw, just an example) but my potentially being against feeding the poor doesn't take away their need to eat.  Similarly even if someone is against plugin dependencies it doesn't mean those dependencies won't exist, they'll just be haphazardly managed.

This is about simplifying things for the end user.  Hasn't that been WordPress' calling card since day one?

-Mike

From wp at andrewnacin.com  Tue Aug 31 04:57:37 2010
From: wp at andrewnacin.com (Andrew Nacin)
Date: Tue, 31 Aug 2010 00:57:37 -0400
Subject: [wp-hackers] What Should A Plugin Author Do To Make Plugins
	Extensible?
In-Reply-To: <9457DB21-3E8B-4132-9490-EAC77A4687E1@newclarity.net>
References: <000f01cb47f3$a28807c0$e7981740$@org>
	<AANLkTik=-ubdRwtewc0YTWTS4SQ2Q1N=7SSbBee_0msF@mail.gmail.com>
	<AANLkTin+bGWuUopjjzDQjHK0cFUthCSVtdSajN68R7dv@mail.gmail.com>
	<6C0E0A4E-8CD7-48A1-AD5E-786832B80FAF@newclarity.net>
	<000301cb48ab$51ae5c60$f50b1520$@com>
	<001b01cb48b1$30803170$91809450$@org>
	<2648845D-6363-4D87-9993-F0CB35FE6762@newclarity.net>
	<AANLkTin7TNVj7MBvO2TzCPATULhe6_wKCfxQbYYMnPxn@mail.gmail.com>
	<9457DB21-3E8B-4132-9490-EAC77A4687E1@newclarity.net>
Message-ID: <AANLkTinsYZuhEY6VBSw8ra9xyfUgS6HjmAH363i24WMw@mail.gmail.com>

On Tue, Aug 31, 2010 at 12:34 AM, Mike Schinkel <mikeschinkel at newclarity.net
> wrote:

> That's very useful functionality and I agree with the approach.  But that's
> not the same use-case I was referring to.  Instead I'm referring to a system
> where a plugin A could identify that it needs plugin B, C and D and that it
> can then automatically download and install B, C and D (with user
> permission, of course.)


Ah, that's another story. The ticket wasn't about installation, it was about
how to tie them together once both installed.

This is something we need to consider soon (probably 3.1) in the context of
child themes. If you want to install a nice-looking child theme, the parent
theme should also be downloaded.

But, if you want to download a plugin that requires BuddyPress, I'm not sure
it follows that you necessarily want BuddyPress downloaded... But there are
some plugins such as taxonomy metadata that are API things, that you *would*
want downloaded.

In either case the directory would keep track of dependencies and alert core
via the API what the requested download is dependent on.

From mikeschinkel at newclarity.net  Tue Aug 31 05:15:00 2010
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Tue, 31 Aug 2010 01:15:00 -0400
Subject: [wp-hackers] What Should A Plugin Author Do To Make Plugins
	Extensible?
In-Reply-To: <AANLkTinsYZuhEY6VBSw8ra9xyfUgS6HjmAH363i24WMw@mail.gmail.com>
References: <000f01cb47f3$a28807c0$e7981740$@org>
	<AANLkTik=-ubdRwtewc0YTWTS4SQ2Q1N=7SSbBee_0msF@mail.gmail.com>
	<AANLkTin+bGWuUopjjzDQjHK0cFUthCSVtdSajN68R7dv@mail.gmail.com>
	<6C0E0A4E-8CD7-48A1-AD5E-786832B80FAF@newclarity.net>
	<000301cb48ab$51ae5c60$f50b1520$@com>
	<001b01cb48b1$30803170$91809450$@org>
	<2648845D-6363-4D87-9993-F0CB35FE6762@newclarity.net>
	<AANLkTin7TNVj7MBvO2TzCPATULhe6_wKCfxQbYYMnPxn@mail.gmail.com>
	<9457DB21-3E8B-4132-9490-EAC77A4687E1@newclarity.net>
	<AANLkTinsYZuhEY6VBSw8ra9xyfUgS6HjmAH363i24WMw@mail.gmail.com>
Message-ID: <F2DF5F09-7C80-4BB9-99E2-01D30ED86E3F@newclarity.net>

On Aug 31, 2010, at 12:57 AM, Andrew Nacin wrote:
> On Tue, Aug 31, 2010 at 12:34 AM, Mike Schinkel <mikeschinkel at newclarity.net
>> wrote:
> 
>> That's very useful functionality and I agree with the approach.  But that's
>> not the same use-case I was referring to.  Instead I'm referring to a system
>> where a plugin A could identify that it needs plugin B, C and D and that it
>> can then automatically download and install B, C and D (with user
>> permission, of course.)
> 
> Ah, that's another story. The ticket wasn't about installation, it was about
> how to tie them together once both installed.

Right.  But Raj's question and my response was about installation.  

It's so easy to scan emails and miss the gist, eh?   I know, I do it all the time... :-(

> This is something we need to consider soon (probably 3.1) in the context of
> child themes. If you want to install a nice-looking child theme, the parent
> theme should also be downloaded.
> 
> But, if you want to download a plugin that requires BuddyPress, I'm not sure
> it follows that you necessarily want BuddyPress downloaded... But there are
> some plugins such as taxonomy metadata that are API things, that you *would*
> want downloaded.
> 
> In either case the directory would keep track of dependencies and alert core
> via the API what the requested download is dependent on.

A big +1.  :-)

-Mike


From frank at bueltge.de  Tue Aug 31 05:28:26 2010
From: frank at bueltge.de (Frank Bueltge)
Date: Tue, 31 Aug 2010 07:28:26 +0200
Subject: [wp-hackers] What Is Deprecated Argument Run?
In-Reply-To: <AANLkTi=BGsq7ooTwvTddu-NM21w-w39x8P8y1PXuO7Z6@mail.gmail.com>
References: <000001cb48bc$69289570$3b79c050$@org>
	<AANLkTi=BGsq7ooTwvTddu-NM21w-w39x8P8y1PXuO7Z6@mail.gmail.com>
Message-ID: <AANLkTi=12Sdt3Ew-cMtcXiiXN8EK+3qJwoVP3uZQFf+y@mail.gmail.com>

You see Thies also with xdebug in Source development area when WP_DEBUG =
true

Am 31.08.2010 05:45 schrieb "Andrew Nacin" <wp at andrewnacin.com>:

On Mon, Aug 30, 2010 at 11:27 PM, Raj <list at expost.org> wrote:

> What is the "deprecated_argument_r...
It is run when deprecated function arguments are used. If I had to guess, a
plugin or theme is using a lot of deprecated arguments.

You can track deprecated usage using this hook (and a few others). One such
plugin that logs deprecated notices is
http://wordpress.org/extend/plugins/log-deprecated-notices/.

If you turn on WP_DEBUG, you'll see the many E_NOTICEs being triggered.

_______________________________________________
wp-hackers mailing list
wp-hackers at lists.automattic....

From hanskrentel at yahoo.de  Tue Aug 31 07:50:09 2010
From: hanskrentel at yahoo.de (hakre)
Date: Tue, 31 Aug 2010 07:50:09 +0000 (GMT)
Subject: [wp-hackers] On Submitting Code
Message-ID: <871789.47676.qm@web24103.mail.ird.yahoo.com>

Wordpress lacks a clear policy for submitting code[1].

I got reminded yesterday on that one by one of the free 
software guys.

What's your Opinion? Suggestions? Questions? I think 
it is worth to take care about.

-- hakre

[1] http://wp.me/pLEEp-mFe

http://hakre.wordpress.com/




From jeremy at visser.name  Tue Aug 31 12:17:24 2010
From: jeremy at visser.name (Jeremy Visser)
Date: Tue, 31 Aug 2010 22:17:24 +1000
Subject: [wp-hackers] On Submitting Code
In-Reply-To: <871789.47676.qm@web24103.mail.ird.yahoo.com>
References: <871789.47676.qm@web24103.mail.ird.yahoo.com>
Message-ID: <4C7CF2D4.4050109@visser.name>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hi Hakre,

hakre said:
> Wordpress lacks a clear policy for submitting code[1].
> 
> I got reminded yesterday on that one by one of the free software
> guys.

What would that achieve? In your blog post you wrote:

> WordPress does not have such a policy right now [...] This is a
> serious issue.

> That?s really a big problem, because after code has made it in, it?s
> very hard to find out for every contribution if the needed rights
> were given or not. Just think a moment about that.

You say that like it?s a bad thing. On the contrary, it is a good thing,
and ensures that WordPress is and will always remain true to the spirit
of free libre open source software.

This is because it is simply impractical for Automattic to contact each
copyright holder to request a change away from the GPL to something
proprietary. That?s a Good Thing?, and keeps them honest. :)

Even without a code submission policy, it is 100% clear that all
contributions to WordPress fall under the GPL. There is no doubt about
that. The LICENSE.txt file is included with every copy of WordPress,
which clearly talks about derivative works. A code contribution policy
will not clarify that.

You talked about the need for a code submission policy, then said that
it?s hard to track down individual code contributions, as if the two are
somehow related, and you even seem to imply that the latter will be
solved by the former.

That will not be the case. A code submission policy is not going to
magically track down contributions any more than the existing ?Props
Br?er Rabbit? bylines in SVN.

Let me go back to my first point about WordPress remaining FLOSS. One
code submission policy that some big projects like MySQL or VirtualBox
use is that contributors must sign a copyright assignment, which assigns
the copyright of the contributions to the parent company. This enables
the parent company to create proprietary and non-GPL versions of the
contributed code.

The spirit of WordPress is definitely not in favour of moving in that
direction. From what I remember of Matt Mullenweg speaking about open
source software, I am certain he is not inclined to move in that
direction either.

Maybe you weren?t suggesting a copyright assignment be included in a
code submission policy. But if you?re not going to include that in the
policy, there?s not much else to put in there that?s not already in
LICENSE.txt.

In good faith,
Jeremy.

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.10 (GNU/Linux)

iEYEARECAAYFAkx88s8ACgkQvs6Qqs8TxBr/aACeMosBaAWPgKQjZwAvfiFW/bsA
N74An0PeXkF6L93hfpjyfCjzo4OvoH8F
=uknL
-----END PGP SIGNATURE-----

From wp-hackers at nicolaskuttler.de  Tue Aug 31 12:10:43 2010
From: wp-hackers at nicolaskuttler.de (Nicolas Kuttler)
Date: Tue, 31 Aug 2010 14:10:43 +0200
Subject: [wp-hackers] On Submitting Code
In-Reply-To: <4C7CF2D4.4050109@visser.name>
References: <871789.47676.qm@web24103.mail.ird.yahoo.com>
	<4C7CF2D4.4050109@visser.name>
Message-ID: <20100831121043.GA32272@nicolaskuttler.de>

On Tue, Aug 31, 2010 at 10:17:24PM +1000, Jeremy Visser wrote:
> Even without a code submission policy, it is 100% clear that all
> contributions to WordPress fall under the GPL. There is no doubt about
> that. The LICENSE.txt file is included with every copy of WordPress,
> which clearly talks about derivative works. A code contribution policy
> will not clarify that.

Not at all. Please see the official docs on how to apply the GPL:

http://www.gnu.org/licenses/gpl-howto.html

Personally, I think it's absurd to think that a LICENSE.txt file
dumped in some directory magically attaches itself to everything
contained in that directory. See also

$ rgrep "@license" wp-*
wp-admin/includes/class-ftp.php: * @license LGPL License http://www.opensource.org/licenses/lgpl-license.html
wp-admin/includes/class-ftp-pure.php: * @license LGPL License http://www.opensource.org/licenses/lgpl-license.html
wp-admin/includes/class-ftp-pure.php: * @license LGPL License http://www.opensource.org/licenses/lgpl-license.html
wp-admin/includes/class-ftp-sockets.php: * @license LGPL License http://www.opensource.org/licenses/lgpl-license.html
wp-admin/includes/class-ftp-sockets.php: * @license LGPL License http://www.opensource.org/licenses/lgpl-license.html
wp-content/plugins/wp-syntax/geshi/geshi.php: * @license http://gnu.org/copyleft/gpl.html GNU GPL
wp-content/plugins/wp-syntax/geshi/geshi.php:     * @license http://www.gnu.org/copyleft/lgpl.html
wp-includes/class-IXR.php: * @license BSD License http://www.opensource.org/licenses/bsd-license.php
wp-includes/class-simplepie.php: * @license http://www.opensource.org/licenses/bsd-license.php BSD License
wp-includes/class-simplepie.php: * @license http://www.opensource.org/licenses/bsd-license.php
wp-includes/rss.php: * @license GPL
wp-includes/class-json.php: * @license http://www.opensource.org/licenses/bsd-license.php

There obviously is code in the tree that's not GPL, and maybe code
that's not obviously GPL v2 only. Does the LICENSE.txt apply to those
files as well?

Yeah, sure, you can argue that when there is an explicit license it
overrides LICENSE.txt, but really, why ignore what the author of the
license recommends.

http://www.gnu.org/licenses/gpl-howto.html (again)

Nicolas

--
Nicolas Kuttler
wp at nkuttler.de

http://www.nkuttler.de
http://www.nicolaskuttler.de (deutsch)

From hanskrentel at yahoo.de  Tue Aug 31 12:42:36 2010
From: hanskrentel at yahoo.de (hakre)
Date: Tue, 31 Aug 2010 12:42:36 +0000 (GMT)
Subject: [wp-hackers] On Submitting Code
In-Reply-To: <mailman.19631.1283254607.1338.wp-hackers@lists.automattic.com>
References: <mailman.19631.1283254607.1338.wp-hackers@lists.automattic.com>
Message-ID: <752843.66622.qm@web24102.mail.ird.yahoo.com>

On Tue, Aug 31, 2010 at 10:17:24PM +1000, Jeremy Visser wrote:

> Hi Hakre,

> What would that achieve? In your blog post you wrote:

>> WordPress does not have such a policy right now [...] This is a
>> serious issue.

>> That?s really a big problem, because after code has made it in, it's
>> very hard to find out for every contribution if the needed rights
>> were given or not. Just think a moment about that.

> You say that like it?s a bad thing. On the contrary, it is a good thing,
> and ensures that WordPress is and will always remain true to the spirit
> of free libre open source software.
> [...]

Hmm, no. Because code submitted falls under no policy. Your argumentation stops 
at the point where improper licensed code is added by someone. If you now 
confront yourself with that case and you need to verify that for all code that 
has been added so far, then you might understand why a code submission policy is 
very helpful. And then you might understand why I have currently a lot of work 
todo. I'm grateful for any help offerd.

> [...] Even without a code submission policy, it is 100% clear that all
> contributions to WordPress fall under the GPL.

That might be clear to yourself because you are who you are. For anybody else, 
they most certainly can not read your mind. So you speak for yourself, that's 
fine. But there are more contributions than yours.

> [...] The LICENSE.txt file is included with every copy of WordPress,
>which clearly talks about derivative works. A code contribution policy
> will not clarify that.

I have not said that a code contribution policy will clarify the license. The 
important point is, that when new code comes in, it is ensured that this new 
code is not breaking the license. A code contribution policy can actually help 
here. So it's the License and a clear code contribution policy. Not the one vs. 
the other.

> You talked about the need for a code submission policy, then said that
> it?s hard to track down individual code contributions, as if the two are
>somehow related, and you even seem to imply that the latter will be
> solved by the former.

Let me make that more clear:

Current and Past code contributions are hard to track down (normally the more 
old, the harder) because they need to be checked.

It would have helped if there had been already a contribution policy and it 
would help for the future if there is coming one.

> That will not be the case. A code submission policy is not going to
> magically track down contributions any more than the existing "Props
> Br?er Rabbit? bylines in SVN.

You're naming the problem that the project is facing. That Roger Rabbit one 
might just be a joke, but in general what you say with that is the problem there 
was no policy for those contributions.

> [...] One
> code submission policy that some big projects like MySQL or VirtualBox
> use is that contributors must sign a copyright assignment, which assigns
> the copyright of the contributions to the parent company. This enables
> the parent company to create proprietary and non-GPL versions of the
> contributed code.

A code contribution policy must not mean that copyright is assigned to the 
project. But it can, and for useful reasons. I suggest the following read:

Why the FSF gets copyright assignments from contributors
http://www.gnu.org/copyleft/why-assign.html

Assigning copyright must have nothing to do with creating proprietary products 
as in the examples you named.

I'm open for examples, and sure, not those that would deal with the option to a 
proprietary-co-license please.

> [...] Maybe you weren?t suggesting a copyright assignment be included in a
> code submission policy. But if you're not going to include that in the
> policy, there's not much else to put in there that's not already in
> LICENSE.txt.

I was not suggesting that to do. It has various reasons why not, and right now 
I'm more interested in feedback from other developers.

-- hakre




From lynne.pope at gmail.com  Tue Aug 31 12:55:43 2010
From: lynne.pope at gmail.com (Lynne Pope)
Date: Wed, 1 Sep 2010 00:55:43 +1200
Subject: [wp-hackers] On Submitting Code
In-Reply-To: <4C7CF2D4.4050109@visser.name>
References: <871789.47676.qm@web24103.mail.ird.yahoo.com>
	<4C7CF2D4.4050109@visser.name>
Message-ID: <AANLkTikpGXuPYo0AF-aEnv4kBTsK5BWUCbJJPRpX3DeS@mail.gmail.com>

On Wed, Sep 1, 2010 at 12:17 AM, Jeremy Visser <jeremy at visser.name> wrote:

> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
>
> Hi Hakre,
>
> hakre said:
> > Wordpress lacks a clear policy for submitting code[1].
> >
> > I got reminded yesterday on that one by one of the free software
> > guys.
>
> What would that achieve? In your blog post you wrote:
>
> > WordPress does not have such a policy right now [...] This is a
> > serious issue.
>
> > That?s really a big problem, because after code has made it in, it?s
> > very hard to find out for every contribution if the needed rights
> > were given or not. Just think a moment about that.
>
> You say that like it?s a bad thing. On the contrary, it is a good thing,
> and ensures that WordPress is and will always remain true to the spirit
> of free libre open source software.
>

I respectfully disagree. A code submission policy would ensure that everyone
understands that the code they submit is licensed under the GNU/GPL.
Assuming they know is no defense if problems arise later.
Such a policy is also invaluable for protecting WordPress. At the moment
there is no defense if code is submitted (and used) where the submitter had
no rights to the code.

People here may not know or remember the legal battle (and huge amount of
controversy played out on the Net) that arose when the Mambo CMS was accused
of using "stolen code" back in 2004. (
http://www.linuxtoday.com/developer/2004093001526NWLL) The code in question
was committed by a Mambo developer who had previously developed similar code
while working under contract to customise Mambo for a company. The company
claimed that his code was theirs and claimed the code that was distributed
in Mambo under the GPL was "code theft" and an infringment of their
copyright.

Resolving this issue was very costly for Mambo, both in time and money, and
made a lot of people wary about using it. If a code submission policy had
been in place at that time the responsibility would have fallen on the
developer involved, and not on the project. There is simply no way an open
source project like WordPress can know if developers are submitting code
they have the rights to, or whether the code is derived from something that
has an incompatible license.

A code submission policy can't stop unoriginal code from being submitted,
but it can provide a defense if anything blows up.



>   Maybe you weren?t suggesting a copyright assignment be included in a
> code submission policy. But if you?re not going to include that in the
> policy, there?s not much else to put in there that?s not already in
>  LICENSE.txt.


Copyright assignment can be as simple as sharing copyright. Sun Microsystems
used this approach (in the old days, before takeover) and it worked very
well. Developers do not have to give up copyright but can simply assign
rights to the project, thereby ensuring WordPress always stays licensed
under the GNU/GPL.

Including a link to LICENSE.txt does not confer anything. Especially since
WordPress is licensed under the GNU/GPL with no version number attached and
can therefore be redistributed under any GNU/GPL version. If someone uses a
defense that xyz is permitted under GPL v.3 or even GPL version 1, then it
would be hard to argue that they are wrong.

Implementing a code submission policy now does not mean previous submitters
must be contacted, or even agree to it. They would need to agree if there
was to be any licensing change, but a submission policy cannot be
retrospective. Should any issues arise from code that was submitted in the
past lawyers would have to look at how long the code had been in WordPress
and whether unchallenged pre-existing use that was publicly available and
seen by millions could raise grounds for a challenge. IANAL, but feel the
likelihood of challenges to historic code is highly unlikely.

However, we live in an increasingly litigious world, with software patents
and copyright infringement challenges arising every day. To make sure
everyone is on the same page, understands what submitting code under the GPL
means, and to protect WordPress, I believe a code submission policy is
necessary.

Regards,
Lynne

From mikeschinkel at newclarity.net  Tue Aug 31 17:51:28 2010
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Tue, 31 Aug 2010 13:51:28 -0400
Subject: [wp-hackers] On Submitting Code
In-Reply-To: <AANLkTikpGXuPYo0AF-aEnv4kBTsK5BWUCbJJPRpX3DeS@mail.gmail.com>
References: <871789.47676.qm@web24103.mail.ird.yahoo.com>
	<4C7CF2D4.4050109@visser.name>
	<AANLkTikpGXuPYo0AF-aEnv4kBTsK5BWUCbJJPRpX3DeS@mail.gmail.com>
Message-ID: <D2641171-0EAE-4F65-8A14-F010C171CD26@newclarity.net>

On Aug 31, 2010, at 8:55 AM, Lynne Pope wrote:
> Resolving this issue was very costly for Mambo, both in time and money, and
> made a lot of people wary about using it. If a code submission policy had
> been in place at that time the responsibility would have fallen on the
> developer involved, and not on the project. There is simply no way an open
> source project like WordPress can know if developers are submitting code
> they have the rights to, or whether the code is derived from something that
> has an incompatible license.
> 
> A code submission policy can't stop unoriginal code from being submitted,
> but it can provide a defense if anything blows up.

+1

-Mike

From wordpress at santosj.name  Tue Aug 31 18:28:02 2010
From: wordpress at santosj.name (Jacob Santos)
Date: Tue, 31 Aug 2010 13:28:02 -0500
Subject: [wp-hackers] On Submitting Code
In-Reply-To: <D2641171-0EAE-4F65-8A14-F010C171CD26@newclarity.net>
References: <871789.47676.qm@web24103.mail.ird.yahoo.com>
	<4C7CF2D4.4050109@visser.name>
	<AANLkTikpGXuPYo0AF-aEnv4kBTsK5BWUCbJJPRpX3DeS@mail.gmail.com>
	<D2641171-0EAE-4F65-8A14-F010C171CD26@newclarity.net>
Message-ID: <AANLkTi=ydp+H_rbmoc0r1TVXCqqsspKJwEp2gzHc76W9@mail.gmail.com>

Well, it happened to that one theme as well.

The only problem, I believe, is that most places that implement this, do so
with a contract that has to be signed and mailed / faxed back to the
company. If this is required, then it will limit the contributors and the
amount. However, you can be sure that those willing to take the time will
probably be heavy contributors.

Jacob Santos

On Tue, Aug 31, 2010 at 12:51 PM, Mike Schinkel <mikeschinkel at newclarity.net
> wrote:

> On Aug 31, 2010, at 8:55 AM, Lynne Pope wrote:
> > Resolving this issue was very costly for Mambo, both in time and money,
> and
> > made a lot of people wary about using it. If a code submission policy had
> > been in place at that time the responsibility would have fallen on the
> > developer involved, and not on the project. There is simply no way an
> open
> > source project like WordPress can know if developers are submitting code
> > they have the rights to, or whether the code is derived from something
> that
> > has an incompatible license.
> >
> > A code submission policy can't stop unoriginal code from being submitted,
> > but it can provide a defense if anything blows up.
>
> +1
>
> -Mike
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From rbilesky at gmail.com  Tue Aug 31 19:48:14 2010
From: rbilesky at gmail.com (Ryan Bilesky)
Date: Tue, 31 Aug 2010 12:48:14 -0700
Subject: [wp-hackers] On Submitting Code
In-Reply-To: <4C7CF2D4.4050109@visser.name>
References: <871789.47676.qm@web24103.mail.ird.yahoo.com>
	<4C7CF2D4.4050109@visser.name>
Message-ID: <AANLkTi=xeQv_o6xDzwhydRgkpj=M=bf9uzhkps7WSFVh@mail.gmail.com>

On Tue, Aug 31, 2010 at 5:17 AM, Jeremy Visser <jeremy at visser.name> wrote:

> ...Even without a code submission policy, it is 100% clear that all
> contributions to WordPress fall under the GPL. There is no doubt about
> that. The LICENSE.txt file is included with every copy of WordPress,
> which clearly talks about derivative works. A code contribution policy
> will not clarify that....


I disagree.  The GPL license talks about derivative works, but it depends on
what you constitute as derivative works.  I personally would not consider a
theme or a plugin a derivative work.  Now granted I am not a lawyer, and idk
if there has been some sort of precedent set in some court case about what
constitutes a derivative work.  But in my mind, a pluigin or theme is its
own unique work, the fact that it connect to a GPL based software don't make
it derivative.  Just like if someone wrote code for some purpose and
licensed it under GPL and released it as a DLL, if I write a software
program and I use that DLL, the DLL is GPL but my code is not derived for
the DLL so it can use whatever license I want.  In the same way a plugin or
theme is its own codebase, the fact that it integrates into another software
does not change its separateness.In my mind a derivative work would be if I
took the wordpress code and used some of its functions in building my own
php script or if I modify wordpress to create my own separate blogging
system.

Now that's my own personal opinion, yours may differ.  The fact is, its not
so clear cut afaik as to what exactly constitutes a derivative work, now
perhaps licensing isn't so obvious, and some sort of submission policy would
clarify that you can only submit GPL licensed plugins and themes.

From mikeschinkel at newclarity.net  Tue Aug 31 20:10:49 2010
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Tue, 31 Aug 2010 16:10:49 -0400
Subject: [wp-hackers] On Submitting Code
In-Reply-To: <AANLkTi=xeQv_o6xDzwhydRgkpj=M=bf9uzhkps7WSFVh@mail.gmail.com>
References: <871789.47676.qm@web24103.mail.ird.yahoo.com>
	<4C7CF2D4.4050109@visser.name>
	<AANLkTi=xeQv_o6xDzwhydRgkpj=M=bf9uzhkps7WSFVh@mail.gmail.com>
Message-ID: <AECC4DD6-15E3-4CC5-8DEB-F36CBB33BFCA@newclarity.net>

On Aug 31, 2010, at 3:48 PM, Ryan Bilesky wrote:
> On Tue, Aug 31, 2010 at 5:17 AM, Jeremy Visser <jeremy at visser.name> wrote:
>> ...Even without a code submission policy, it is 100% clear that all
>> contributions to WordPress fall under the GPL. There is no doubt about
>> that. The LICENSE.txt file is included with every copy of WordPress,
>> which clearly talks about derivative works. A code contribution policy
>> will not clarify that....
> 
> I disagree.  The GPL license talks about derivative works, but it depends on
> what you constitute as derivative works.  I personally would not consider a
> theme or a plugin a derivative work.  Now granted I am not a lawyer, and idk
> if there has been some sort of precedent set in some court case about what
> constitutes a derivative work.  But in my mind, a pluigin or theme is its
> own unique work, the fact that it connect to a GPL based software don't make
> it derivative.  

FWIW even though I know that the majority of the WordPress community do not share your opinion I have had long discussions with a prominent local IP attorney on that subject and his opinion agrees with yours. Opinion to be published somewhere in the near future.

-Mike

From rbilesky at gmail.com  Tue Aug 31 20:18:04 2010
From: rbilesky at gmail.com (Ryan Bilesky)
Date: Tue, 31 Aug 2010 13:18:04 -0700
Subject: [wp-hackers] On Submitting Code
In-Reply-To: <AECC4DD6-15E3-4CC5-8DEB-F36CBB33BFCA@newclarity.net>
References: <871789.47676.qm@web24103.mail.ird.yahoo.com>
	<4C7CF2D4.4050109@visser.name>
	<AANLkTi=xeQv_o6xDzwhydRgkpj=M=bf9uzhkps7WSFVh@mail.gmail.com>
	<AECC4DD6-15E3-4CC5-8DEB-F36CBB33BFCA@newclarity.net>
Message-ID: <AANLkTimswBRrvPBTFWygW2QG=iE4qu8Fh8TtLOF_xsDW@mail.gmail.com>

Just to clarify I'm not trying to shoot down GPL or anything. I personally
would license my works under GPL, I just think that its not a "legal
requirement".  In fact I have found many sites distributing wordpress themes
not under GPL license, but creative commons license (not sure if that would
be considered GPL compatible but my initial guess would be no)

On Tue, Aug 31, 2010 at 1:10 PM, Mike Schinkel
<mikeschinkel at newclarity.net>wrote:

> On Aug 31, 2010, at 3:48 PM, Ryan Bilesky wrote:
> > On Tue, Aug 31, 2010 at 5:17 AM, Jeremy Visser <jeremy at visser.name>
> wrote:
> >> ...Even without a code submission policy, it is 100% clear that all
> >> contributions to WordPress fall under the GPL. There is no doubt about
> >> that. The LICENSE.txt file is included with every copy of WordPress,
> >> which clearly talks about derivative works. A code contribution policy
> >> will not clarify that....
> >
> > I disagree.  The GPL license talks about derivative works, but it depends
> on
> > what you constitute as derivative works.  I personally would not consider
> a
> > theme or a plugin a derivative work.  Now granted I am not a lawyer, and
> idk
> > if there has been some sort of precedent set in some court case about
> what
> > constitutes a derivative work.  But in my mind, a pluigin or theme is its
> > own unique work, the fact that it connect to a GPL based software don't
> make
> > it derivative.
>
> FWIW even though I know that the majority of the WordPress community do not
> share your opinion I have had long discussions with a prominent local IP
> attorney on that subject and his opinion agrees with yours. Opinion to be
> published somewhere in the near future.
>
> -Mike
>  _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From mikeschinkel at newclarity.net  Tue Aug 31 20:28:28 2010
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Tue, 31 Aug 2010 16:28:28 -0400
Subject: [wp-hackers] On Submitting Code
In-Reply-To: <AANLkTimswBRrvPBTFWygW2QG=iE4qu8Fh8TtLOF_xsDW@mail.gmail.com>
References: <871789.47676.qm@web24103.mail.ird.yahoo.com>
	<4C7CF2D4.4050109@visser.name>
	<AANLkTi=xeQv_o6xDzwhydRgkpj=M=bf9uzhkps7WSFVh@mail.gmail.com>
	<AECC4DD6-15E3-4CC5-8DEB-F36CBB33BFCA@newclarity.net>
	<AANLkTimswBRrvPBTFWygW2QG=iE4qu8Fh8TtLOF_xsDW@mail.gmail.com>
Message-ID: <CA01FBD3-E5D1-4B39-87EE-6DB0429678B0@newclarity.net>

On Aug 31, 2010, at 4:18 PM, Ryan Bilesky wrote:
> Just to clarify I'm not trying to shoot down GPL or anything. I personally
> would license my works under GPL, I just think that its not a "legal
> requirement".  In fact I have found many sites distributing wordpress themes
> not under GPL license, but creative commons license (not sure if that would
> be considered GPL compatible but my initial guess would be no)

And to clarify too, I also support the GPL (in general).  I would and do plan to license plugins I implement as GPL but honestly I would like the option to not have to, especially for selected vertical markets. For example if I wrote a plugin for option's traders I might want to keep that closed source given it's a vertical,  it's a vertical where the end users make lots of money and have no issue whatsoever with paying for things, and where being able to fund service and support would benefit both the end users and the organization selling to those end users.  

If OTOH I write a generic post metabox fields plugin (which I am doing) that practically everyone could benefit from I would/will definitely license it as GPL.

JMTCW.

-Mike


From elfin at elfden.co.uk  Tue Aug 31 21:47:49 2010
From: elfin at elfden.co.uk (Rich Pedley)
Date: Tue, 31 Aug 2010 22:47:49 +0100
Subject: [wp-hackers] plugin activation help
Message-ID: <4C7D7885.5060103@elfden.co.uk>

I'm getting a couple of people post about some issues when activating 
my plugin eShop.

Fatal error: Cannot redeclare add_user() (previously declared in 
C:\Inetpub\vhosts\ellcee.com\httpdocs\blog\wordpressDEV\wp-admin\includes\user.php:23) 
in 
C:\Inetpub\vhosts\ellcee.com\httpdocs\blog\wordpressDEV\wp-admin\includes\user.php 
on line 44

&

Fatal error: Cannot redeclare add_user() (previously declared in 
C:\inetpub\vhosts\mydomain.com\httpdocs\store\wp-admin\includes\user.php:23) 
in 
C:\inetpub\vhosts\mydomain.com\httpdocs\store\wp-admin\includes\user.php 
on line 44


Obviously I can't replicate this myself.

Any ideas on what would be causing this? Or tips on how to help them 
without access to anything at their end?

Any help appreciated.

Rich

From burobjorn at gmail.com  Tue Aug 31 21:47:56 2010
From: burobjorn at gmail.com (Bjorn Wijers)
Date: Tue, 31 Aug 2010 23:47:56 +0200
Subject: [wp-hackers] Race condition with custom field and wp_insert_post?
Message-ID: <4C7D788C.1060704@gmail.com>

Hi,

I've built a script which adds a post to WordPress using 
wp_insert_post() and then after successfully adding the post to the 
database adds some custom fields.

My question is: which action(s) can I use after the posts has been 
published or updated including the customfield(s) so that a plugin can 
use both the post content and it's post meta data?

Currently the plugin I use makes use of the publish change actions and 
the post meta data has not been written yet, so I cannot check for any 
post meta key value pairs. Basically a race condition, which I would 
like to prevent. So any pointers would be much appreciated!

Hope this makes sense,

grtz
BjornW

-- 

met vriendelijke groet,
Bjorn Wijers

* b u r o b j o r n .nl *
digitaal vakmanschap | digital craftsmanship

Werkdagen:
Van maandag t/m donderdag vanaf 10:00
Vrijdag is voor experimenteren en eigen projecten.

Concordiastraat 68-126
3551 EM Utrecht
The Netherlands

tel: +31 6 49 74 78 70
http://www.burobjorn.nl

From eric at eamann.com  Tue Aug 31 21:56:17 2010
From: eric at eamann.com (Eric Mann)
Date: Tue, 31 Aug 2010 14:56:17 -0700 (PDT)
Subject: [wp-hackers] plugin activation help
In-Reply-To: <4C7D7885.5060103@elfden.co.uk>
References: <4C7D7885.5060103@elfden.co.uk>
Message-ID: <261054093.90486.1283291777561.JavaMail.open-xchange@oxusltgw08.schlund.de>

The usual. ?Have them deactivate all other plug-ins ... activate yours ... then
re-activate other plug-ins one at a time. ?There's a collision somewhere, but
with this little information we can't know where or what's causing it.

On August 31, 2010 at 9:47 PM Rich Pedley <elfin at elfden.co.uk> wrote:

> I'm getting a couple of people post about some issues when activating
> my plugin eShop.
>
> Fatal error: Cannot redeclare add_user() (previously declared in
> C:\Inetpub\vhosts\ellcee.com\httpdocs\blog\wordpressDEV\wp-admin\includes\user
> .php:23)
> in
> C:\Inetpub\vhosts\ellcee.com\httpdocs\blog\wordpressDEV\wp-admin\includes\user
> .php
> on line 44
>
> &
>
> Fatal error: Cannot redeclare add_user() (previously declared in
> C:\inetpub\vhosts\mydomain.com\httpdocs\store\wp-admin\includes\user.php:23)
> in
> C:\inetpub\vhosts\mydomain.com\httpdocs\store\wp-admin\includes\user.php
> on line 44
>
>
> Obviously I can't replicate this myself.
>
> Any ideas on what would be causing this? Or tips on how to help them
> without access to anything at their end?
>
> Any help appreciated.
>
> Rich
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

From list at expost.org  Tue Aug 31 23:38:52 2010
From: list at expost.org (Raj)
Date: Wed, 1 Sep 2010 05:08:52 +0530
Subject: [wp-hackers] plugin activation help
In-Reply-To: <4C7D7885.5060103@elfden.co.uk>
References: <4C7D7885.5060103@elfden.co.uk>
Message-ID: <000901cb4965$accc3620$0664a260$@org>

If only I had a dime for every time that happens. I'd be making more than I
am through donations.

It seems everybody likes to name their functions:

sanitize()
validateEmail()
validate()
strip()
... and so on.

Perhaps we could all adopt the gentleman's code - prefix every single
function uniquely :P


-----Original Message-----
From: wp-hackers-bounces at lists.automattic.com
[mailto:wp-hackers-bounces at lists.automattic.com] On Behalf Of Rich Pedley
Sent: Wednesday, September 01, 2010 3:18 AM
To: wp-hackers at lists.automattic.com
Subject: [wp-hackers] plugin activation help

I'm getting a couple of people post about some issues when activating 
my plugin eShop.

Fatal error: Cannot redeclare add_user() (previously declared in 
C:\Inetpub\vhosts\ellcee.com\httpdocs\blog\wordpressDEV\wp-admin\includes\us
er.php:23) 
in 
C:\Inetpub\vhosts\ellcee.com\httpdocs\blog\wordpressDEV\wp-admin\includes\us
er.php 
on line 44

&

Fatal error: Cannot redeclare add_user() (previously declared in 
C:\inetpub\vhosts\mydomain.com\httpdocs\store\wp-admin\includes\user.php:23)

in 
C:\inetpub\vhosts\mydomain.com\httpdocs\store\wp-admin\includes\user.php 
on line 44


Obviously I can't replicate this myself.

Any ideas on what would be causing this? Or tips on how to help them 
without access to anything at their end?

Any help appreciated.

Rich
_______________________________________________
wp-hackers mailing list
wp-hackers at lists.automattic.com
http://lists.automattic.com/mailman/listinfo/wp-hackers


From curtis at curtismchale.ca  Tue Aug 31 23:52:23 2010
From: curtis at curtismchale.ca (Curtis McHale)
Date: Tue, 31 Aug 2010 16:52:23 -0700
Subject: [wp-hackers] plugin activation help
In-Reply-To: <000901cb4965$accc3620$0664a260$@org>
References: <4C7D7885.5060103@elfden.co.uk>
	<000901cb4965$accc3620$0664a260$@org>
Message-ID: <4C7D95B7.6090507@curtismchale.ca>

I thought that was already the recommended best practice. Every function 
you write for a plugin or a theme should be prefixed to make sure it 
doesn't duplicate another plugin or theme.

Raj wrote:
> If only I had a dime for every time that happens. I'd be making more than I
> am through donations.
>
> It seems everybody likes to name their functions:
>
> sanitize()
> validateEmail()
> validate()
> strip()
> ... and so on.
>
> Perhaps we could all adopt the gentleman's code - prefix every single
> function uniquely :P
>
>
> -----Original Message-----
> From: wp-hackers-bounces at lists.automattic.com
> [mailto:wp-hackers-bounces at lists.automattic.com] On Behalf Of Rich Pedley
> Sent: Wednesday, September 01, 2010 3:18 AM
> To: wp-hackers at lists.automattic.com
> Subject: [wp-hackers] plugin activation help
>
> I'm getting a couple of people post about some issues when activating
> my plugin eShop.
>
> Fatal error: Cannot redeclare add_user() (previously declared in
> C:\Inetpub\vhosts\ellcee.com\httpdocs\blog\wordpressDEV\wp-admin\includes\us
> er.php:23)
> in
> C:\Inetpub\vhosts\ellcee.com\httpdocs\blog\wordpressDEV\wp-admin\includes\us
> er.php
> on line 44
>
> &
>
> Fatal error: Cannot redeclare add_user() (previously declared in
> C:\inetpub\vhosts\mydomain.com\httpdocs\store\wp-admin\includes\user.php:23)
>
> in
> C:\inetpub\vhosts\mydomain.com\httpdocs\store\wp-admin\includes\user.php
> on line 44
>
>
> Obviously I can't replicate this myself.
>
> Any ideas on what would be causing this? Or tips on how to help them
> without access to anything at their end?
>
> Any help appreciated.
>
> Rich
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

-- 
Curtis McHale

604.751.3482
http://curtismchale.ca
http://twitter.com/curtismchale
http://ca.linkedin.com/in/curtismchale


