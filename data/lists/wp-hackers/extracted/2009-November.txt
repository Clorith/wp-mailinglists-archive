From wordpress at dd32.id.au  Sun Nov  1 08:36:30 2009
From: wordpress at dd32.id.au (Dion Hulse (dd32))
Date: Sun, 01 Nov 2009 19:36:30 +1100
Subject: [wp-hackers] Taxnomy Q: All categories (posts>0) with posts in
 term X of another taxonomy
In-Reply-To: <674b4a3b0910220343o3e4ffea9n54b6d0a700066fa8@mail.gmail.com>
References: <op.u165s2q2spxmuu@dd32.no-ip.com>
	<674b4a3b0910220343o3e4ffea9n54b6d0a700066fa8@mail.gmail.com>
Message-ID: <op.u2pji2iqspxmuu@dd32>

On Thu, 22 Oct 2009 21:43:57 +1100, Austin Matzko <if.website at gmail.com>  
wrote:
> Unless I misunderstand what you want, wouldn't the following work?
>
> $term = get_term_by('name', 'SomeTag', 'post_tag');
> if ( ! empty( $term->term_id ) ) {
> 	$cat_ids = (array) wp_get_object_terms(get_objects_in_term(
> array($term->term_id), array('post_tag')), array('category'),
> array('fields' => 'ids'));
> }

Finally got back to implementing this part of the project, That pretty  
much worked, With one gotcha.. get_objects_in_term() doesnt care what kind  
of object its returning, Could be an attachment, a post, a DRAFT post, or  
even a Trashed post..

I ended up splitting it up, and putting a query in between to filter it to  
valid post_ids.. Seems to work reasonably well


$term = get_term_by('name', 'SomeTag', 'post_tag');
if ( ! empty( $term->term_id ) ) {
	$ids = get_objects_in_term(array($term->term_id), array('post_tag'));
	global $wpdb;
	$ids = array_map('intval', $ids);
	$ids = implode(',', $ids);
	$ids = (array)$wpdb->get_col("SELECT ID FROM $wpdb->posts WHERE ID  
IN($ids) AND post_type='post' AND post_status='publish'");
	
  	$cat_ids = (array) wp_get_object_terms($ids, array('category'),  
array('fields' => 'ids'));
}

So thanks Austin once again, Ended up saving me a heap of time.

From r at schestowitz.com  Sun Nov  1 09:25:55 2009
From: r at schestowitz.com (Roy Schestowitz)
Date: Sun, 01 Nov 2009 09:25:55 +0000
Subject: [wp-hackers] WP-Hackers Stats for October 2009
Message-ID: <4AED5423.7000600@schestowitz.com>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

  ?  Times are Greenwich Mean Time (GMT) +0:00

  ?  Statistics span a period of one month

  ?  Subject line formatted consistently "WP-Hackers Stats for <MONTH>
<YEAR>"

  ?  Killfile <subject contains "WP-Hackers Stats for "> if uninterested
____________________________________________________________

Stats for wp-hackers
~~~~~~~~~~~~~~~~~~~~
***** People who have written most messages:
+----+-----Author-----------------------------------+--Msg-+-Percent-+
|  1 | otto ottodestruct.com                        |   49 |  8.94 % |
|  2 | scribu gmail.com                             |   38 |  6.93 % |
|  3 | william.canino googlemail.com                |   28 |  5.11 % |
|  4 | wp-hackers striderweb.com                    |   21 |  3.83 % |
|  5 | sharon BrewerRadio.com                       |   18 |  3.28 % |
|  6 | if.website gmail.com                         |   16 |  2.92 % |
|  7 | jer simianuprising.com                       |   14 |  2.55 % |
|  8 | gaarai gaarai.com                            |   14 |  2.55 % |
|  9 | peter.westwood ftwr.co.uk                    |   13 |  2.37 % |
| 10 | mikeschinkel newclarity.net                  |   12 |  2.19 % |
| 11 | wordpress dd32.id.au                         |   12 |  2.19 % |
| 12 | ncrice gmail.com                             |   12 |  2.19 % |
| 13 | jeremib gmail.com                            |   11 |  2.01 % |
| 14 | bryanharley gmail.com                        |   10 |  1.82 % |
| 15 | jeremy visser.name                           |    9 |  1.64 % |
| 16 | info toscho.de                               |    8 |  1.46 % |
| 17 | lynne.pope gmail.com                         |    8 |  1.46 % |
| 18 | emartin24 gmail.com                          |    7 |  1.28 % |
| 19 | aaron xavisys.com                            |    7 |  1.28 % |
| 20 | mccormicky gmail.com                         |    7 |  1.28 % |
| 21 | zamoose gmail.com                            |    6 |  1.09 % |
| 22 | navjotjsingh gmail.com                       |    6 |  1.09 % |
| 23 | mark watero.us                               |    6 |  1.09 % |
| 24 | ajd cloudiness.com                           |    5 |  0.91 % |
| 25 | matt sivel.net                               |    5 |  0.91 % |
+----+----------------------------------------------+------+---------+
|    | other                                        |  206 | 37.59 % |
+----+----------------------------------------------+------+---------+

***** Best authors, by total size of their messages (w/o quoting):
+----+-----Author-------------------------------------------+-KBytes-+
|  1 | otto ottodestruct.com                                |   43.9 |
|  2 | william.canino googlemail.com                        |   27.1 |
|  3 | wp-hackers striderweb.com                            |   24.7 |
|  4 | gaarai gaarai.com                                    |   19.3 |
|  5 | jer simianuprising.com                               |   17.5 |
|  6 | sharon BrewerRadio.com                               |   17.2 |
|  7 | scribu gmail.com                                     |   15.4 |
|  8 | g30rg3x gmail.com                                    |   12.7 |
|  9 | peter.westwood ftwr.co.uk                            |   12.0 |
| 10 | ncrice gmail.com                                     |   11.1 |
| 11 | Jesse.Silverstein xerox.com                          |   11.0 |
| 12 | if.website gmail.com                                 |    9.6 |
| 13 | lynne.pope gmail.com                                 |    9.3 |
| 14 | wordpress dd32.id.au                                 |    8.9 |
| 15 | liste srpski.biz                                     |    8.9 |
| 16 | jeremib gmail.com                                    |    8.6 |
| 17 | lew fullthrottledevelopment.com                      |    8.5 |
| 18 | mikeschinkel newclarity.net                          |    8.1 |
| 19 | vgururao gmail.com                                   |    6.2 |
| 20 | mark watero.us                                       |    5.9 |
| 21 | jeremy visser.name                                   |    5.6 |
| 22 | xavier borderie.net                                  |    5.3 |
| 23 | pl fusi0n.org                                        |    5.3 |
| 24 | mccormicky gmail.com                                 |    4.8 |
| 25 | info toscho.de                                       |    4.8 |
+----+------------------------------------------------------+--------+

***** Best authors, by average size of their message (w/o quoting):
+----+-----Author--------------------------------------------+-bytes-+
|  1 | lew fullthrottledevelopment.com                       |  4345 |
|  2 | g30rg3x gmail.com                                     |  4337 |
|  3 | sc0ttkclark gmail.com                                 |  3373 |
|  4 | vgururao gmail.com                                    |  3153 |
|  5 | Jesse.Silverstein xerox.com                           |  2821 |
|  6 | tlpstone gmail.com                                    |  2505 |
|  7 | Jesse.Silverstein XEROX.COM                           |  2312 |
|  8 | liste srpski.biz                                      |  2279 |
|  9 | eike.starkmann fu-berlin.de                           |  1971 |
| 10 | me olumidealabi.com                                   |  1873 |
| 11 | pl fusi0n.org                                         |  1802 |
| 12 | xrdawson gmail.com                                    |  1800 |
| 13 | blewis wikimedia.org                                  |  1759 |
| 14 | azad_shaikh786 yahoo.com                              |  1674 |
| 15 | hempsworth googlemail.com                             |  1654 |
| 16 | Michael Clark                                         |  1589 |
| 17 | viniciusandre gmail.com                               |  1490 |
| 18 | jason realestatetomato.com                            |  1472 |
| 19 | gaarai gaarai.com                                     |  1411 |
| 20 | hal burgiss.net                                       |  1371 |
| 21 | Brian b5media.com                                     |  1341 |
| 22 | jeffc wptavern.com                                    |  1293 |
| 23 | jer simianuprising.com                                |  1282 |
| 24 | listswphackers mist.org.uk                            |  1227 |
| 25 | TurnerJD cofc.edu                                     |  1208 |
+----+-------------------------------------------------------+-------+

***** Table showing the most successful subjects:
+----+----Subject-----------------------------------+--Msg-+-Percent-+
|  1 | [wp-hackers] wordpress security              |   63 | 11.50 % |
|  2 | [wp-hackers] WordPress as CMS (was: wordpres |   39 |  7.12 % |
|  3 | [wp-hackers] checking if post has shortcode, |   20 |  3.65 % |
|  4 | [wp-hackers] looking for opinions on php5-on |   17 |  3.10 % |
|  5 | [wp-hackers] [OT] Top posting                |   14 |  2.55 % |
|  6 | [wp-hackers] Why were the image tooltips rem |   13 |  2.37 % |
|  7 | [wp-hackers] ajax to call function in theme  |   12 |  2.19 % |
|  8 | [wp-hackers] [OT] Testing needed for WordTra |   11 |  2.01 % |
|  9 | [wp-hackers] Prepend blog name in comment fe |   11 |  2.01 % |
| 10 | [wp-hackers] Images attached to posts/pages? |   11 |  2.01 % |
| 11 | [wp-hackers] get_post() not fetching from po |   10 |  1.82 % |
| 12 | [wp-hackers] SELECT SQL_CALC_FOUND_ROWS dist |   10 |  1.82 % |
| 13 | [wp-hackers] Plugin to stop wp-trackback DOS |   10 |  1.82 % |
| 14 | [wp-hackers] Custom permalinks with the Rewr |    9 |  1.64 % |
| 15 | [wp-hackers] WordPress Bike Shed Mailing Lis |    9 |  1.64 % |
| 16 | [wp-hackers] Encrypting comment_author_IP,   |    9 |  1.64 % |
| 17 | [wp-hackers] Plugin License Excluding Spam   |    8 |  1.46 % |
| 18 | [wp-hackers] SELECT option_name,             |    8 |  1.46 % |
| 19 | [wp-hackers] Hook being called twice on acti |    8 |  1.46 % |
| 20 | [wp-hackers] get_posts with both a custom po |    7 |  1.28 % |
| 21 | [wp-hackers] jQuery Error in IE but not FF   |    7 |  1.28 % |
| 22 | [wp-hackers] filtering french characters in  |    7 |  1.28 % |
| 23 | [wp-hackers] Show only Shortcodes in Sidebar |    7 |  1.28 % |
| 24 | [wp-hackers] Creating an "Author Cafe"       |    6 |  1.09 % |
| 25 | [wp-hackers] The WordPress Logo Font         |    6 |  1.09 % |
+----+----------------------------------------------+------+---------+
|    | other                                        |  216 | 39.42 % |
+----+----------------------------------------------+------+---------+

***** Most used email clients:
+----+----Mailer------------------------------------+--Msg-+-Percent-+
|  1 | Google Mail/Other                            |  343 | 62.59 % |
|  2 | Apple Mail (2.1076)                          |   44 |  8.03 % |
|  3 | Thunderbird 2.0.0.23 (Windows/20090812)      |   23 |  4.20 % |
|  4 | Opera Mail/10.10 (Win32)                     |   19 |  3.47 % |
|  5 | Thunderbird 2.0.0.23 (X11/20090817)          |   18 |  3.28 % |
|  6 | Outlook Connector for MDaemon 2.1.6          |   18 |  3.28 % |
|  7 | Apple Mail (2.936)                           |   17 |  3.10 % |
|  8 | Microsoft Office Outlook 12.0                |   10 |  1.82 % |
|  9 | Mozilla/5.x                                  |    9 |  1.64 % |
| 10 | G2/1.0                                       |    7 |  1.28 % |
| 11 | Evolution 2.28.0                             |    6 |  1.09 % |
| 12 | Evolution 2.22.3.1                           |    4 |  0.73 % |
| 13 | iPhone Mail (7C144)                          |    3 |  0.55 % |
| 14 | Mutt                                         |    3 |  0.55 % |
| 15 | iPhone Mail (7D11)                           |    3 |  0.55 % |
| 16 | Microsoft-Entourage/12.20.0.090605           |    2 |  0.36 % |
| 17 | Thunderbird 2.0.0.12 (Windows/20080213)      |    2 |  0.36 % |
| 18 | Postbox 1.0.0 (Windows/2009090808)           |    2 |  0.36 % |
| 19 | Apple Mail (2.935.3)                         |    2 |  0.36 % |
| 20 | Evolution 2.28.1                             |    2 |  0.36 % |
| 21 | RoundCube Webmail/0.2.1                      |    1 |  0.18 % |
| 22 | Thunderbird 2.0.0.23 (Macintosh/20090812)    |    1 |  0.18 % |
| 23 | iPhone Mail (7A341)                          |    1 |  0.18 % |
| 24 | iPhone Mail (5H11)                           |    1 |  0.18 % |
| 25 | Microsoft Outlook Express 6.x                |    1 |  0.18 % |
+----+----------------------------------------------+------+---------+
|    | other                                        |    6 |  1.09 % |
+----+----------------------------------------------+------+---------+

***** Table of maximal quoting:
+----+-----Author------------------------------------------+-Percent-+
|  1 | voschristina gmail.com                              | 98.38 % |
|  2 | raven mecus.es                                      | 87.10 % |
|  3 | spellham flowershopnetwork.com                      | 80.78 % |
|  4 | joelfisher gmail.com                                | 79.01 % |
|  5 | kontakt joernroeder.de                              | 78.93 % |
|  6 | hypecreations gmail.com                             | 72.69 % |
|  7 | mccormicky gmail.com                                | 70.09 % |
|  8 | aaron.jorbin gmail.com                              | 69.34 % |
|  9 | adriaan.pelzer gmail.com                            | 69.23 % |
| 10 | SuperMoonMan gmail.com                              | 69.22 % |
| 11 | jwriteclub gmail.com                                | 67.56 % |
| 12 | feeds armeda.com                                    | 67.06 % |
| 13 | mikeschinkel newclarity.net                         | 66.52 % |
| 14 | ezs evilzenscientist.com                            | 66.39 % |
| 15 | brad webdevstudios.com                              | 65.13 % |
| 16 | me olumidealabi.com                                 | 64.62 % |
| 17 | esmi quirm.net                                      | 63.46 % |
| 18 | jason realestatetomato.com                          | 63.17 % |
| 19 | navjotjsingh gmail.com                              | 62.52 % |
| 20 | notfornoone gmail.com                               | 61.50 % |
| 21 | bryanharley gmail.com                               | 61.23 % |
| 22 | tim.moore maine.edu                                 | 60.90 % |
| 23 | frank bueltge.de                                    | 60.45 % |
| 24 | joost yoast.com                                     | 59.01 % |
| 25 | william.canino googlemail.com                       | 58.53 % |
+----+-----------------------------------------------------+---------+
|    | average                                             | 42.30 % |
+----+-----------------------------------------------------+---------+

***** Graph showing number of messages written during hours of day:

100% -------------------------------#----------------- - 52
 90% -----------------------------#-#----------------- msgs
 80% -----------------------------#-#-----------------
 70% -----------------#---#-------#-#-#---------------
 60% -----------------#---#---#-#-#-#-#-#-------------
 50% -----------------#---#-#-#-#-#-#-#-#-------#-----
 40% -----------------#-#-#-#-#-#-#-#-#-#-----#-#---#-
 30% -----------------#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-
 20% ---------------#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-
 10% -#-#-#-------#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-
      * * * * * * * * * * * * * * * * * * * * * * * *
hour  0         5           11          17          23


***** Graph showing number of messages written during days of month:

100% -----------------------------------------#--------------------- - 56
 90% -----------------------------------------#--------------------- msgs
 80% -----------------------------------------#---------#-----------
 70% -------------------------------#---------#---------#-----#-----
 60% -------------------------------#---------#-#-------#-----#-----
 50% -------------------------------#-----#---#-#-#-----#-----#-----
 40% -#-----------#---#-----------#-#-----#---#-#-#-----#-#---#-----
 30% -#-----------#---#---------#-#-#-----#---#-#-#-----#-#---#-----
 20% -#-----------#-#-#-----#---#-#-#-----#---#-#-#-----#-#---#-----
 10% -#-#-#-#-#-#-#-#-#-#---#-#-#-#-#-#---#-#-#-#-#-#---#-#---#-----
      * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
 day  1         6           12          18          24            31


***** Graph showing number of messages written during days of week:

100% -------------#--------------- - 140
 90% -------------#--------------- msgs
 80% -------------#---------------
 70% -#-------#---#---#-----------
 60% -#-------#---#---#-----------
 50% -#-------#---#---#-----------
 40% -#-------#---#---#-----------
 30% -#---#---#---#---#-----------
 20% -#---#---#---#---#---#-------
 10% -#---#---#---#---#---#---#---
      *   *   *   *   *   *   *
     Mon Tue Wed Thu Fri Sat Sun


***** Maximal quoting:
      Author     : voschristina gmail.com
      Subject    : [wp-hackers] UNsubscribe
      Date       : Thu, 22 Oct 2009 13:58:52 -0400
      Quote ratio: 98.38% / 12964 bytes

***** Longest message:
      Author     : voschristina gmail.com
      Subject    : [wp-hackers] UNsubscribe
      Date       : Thu, 22 Oct 2009 13:58:52 -0400
      Size       : 12964 bytes

***** Most successful subject:
      Subject    : [wp-hackers] wordpress security
      No. of msgs: 63
      Total size : 109234 bytes

***** Final summary:
      Total number of messages:             548
      Total number of different authors:    125
      Total number of different subjects:   102
      Total size of messages (w/o headers): 861008 bytes
      Average size of a message:            1571 bytes

***** Generated by MailListStat v1.3, (C) 2001-2003 <marki (at) nexin.sk>
***** See http://freshmeat.net/projects/mls for details...

DISCLAIMER: Stats automatically produced. Remember that stats are often
meaningless and deceiving.
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.9 (GNU/Linux)

iEYEARECAAYFAkrtVBkACgkQU4xAY3RXLo5t2ACfc5yT9R4VtwUwC6V03WBlhZD2
t+sAniuHYxUtYKVDDF32KcijbEBKLdZE
=pfYG
-----END PGP SIGNATURE-----

From jeremy at visser.name  Sun Nov  1 11:57:50 2009
From: jeremy at visser.name (Jeremy Visser)
Date: Sun, 01 Nov 2009 22:57:50 +1100
Subject: [wp-hackers] WP-Hackers Stats for October 2009
In-Reply-To: <4AED5423.7000600@schestowitz.com>
References: <4AED5423.7000600@schestowitz.com>
Message-ID: <1257076670.6701.2.camel@rillian.narnia.sunriseroad.net>

I feel really sorry for this poor soul:

On Sun, 2009-11-01 at 09:25 +0000, Roy Schestowitz wrote:
> ***** Most used email clients:
> +----+----Mailer------------------------------------+--Msg-+-Percent-+
> | 25 | Microsoft Outlook Express 6.x                |    1 |  0.18 % |
> +----+----------------------------------------------+------+---------+



From lists at rotorised.com  Sun Nov  1 12:48:22 2009
From: lists at rotorised.com (Ryan McCue)
Date: Sun, 01 Nov 2009 22:48:22 +1000
Subject: [wp-hackers] Implementing Post Sub-Types
Message-ID: <4AED8396.5070209@rotorised.com>

I have a theme/plugin in development that is going to implement
different types of posts. These will still be posts, as such, but will
be styled and created specially.

In order to maximize the compatibility with existing posts (and if the
user ever changes the theme in future), I want to keep these as posts,
rather than using custom post types, but I want to be able to assign a
special "sub-type" to be able to handle these differently.

So, hackers, what do you think the best implementation for this is?

I've worked with using categories before and hiding them in the
interface (frankly, pain in the ass). I'm thinking the best solution for
this will be post meta.

Thanks,

-- 
Ryan McCue
<http://ryanmccue.info/>


From sksunil at gmail.com  Sun Nov  1 12:59:02 2009
From: sksunil at gmail.com (sunil sk)
Date: Sun, 1 Nov 2009 18:29:02 +0530
Subject: [wp-hackers] How to show only first level sub categories under a
	main category
Message-ID: <4a100e480911010459h48ea6f49m4fbe4d1a873a0c6e@mail.gmail.com>

Hi
I am a new bee in wordpress.

I have a list of categories. Under each category there are many
subcategories. How can I ** list only 1st level of subcategories under a
main category. I don't want to list 3rd level of category. I need to show
only 2nd level of category under a main category.

Thanks

From peter.westwood at ftwr.co.uk  Sun Nov  1 14:52:36 2009
From: peter.westwood at ftwr.co.uk (Peter Westwood)
Date: Sun, 1 Nov 2009 14:52:36 +0000
Subject: [wp-hackers] Implementing Post Sub-Types
In-Reply-To: <4AED8396.5070209@rotorised.com>
References: <4AED8396.5070209@rotorised.com>
Message-ID: <C798250F-CB55-4319-99D9-1965A5D0BC05@ftwr.co.uk>


On 1 Nov 2009, at 12:48, Ryan McCue wrote:

> I have a theme/plugin in development that is going to implement
> different types of posts. These will still be posts, as such, but will
> be styled and created specially.
>
> In order to maximize the compatibility with existing posts (and if the
> user ever changes the theme in future), I want to keep these as posts,
> rather than using custom post types, but I want to be able to assign a
> special "sub-type" to be able to handle these differently.
>
> So, hackers, what do you think the best implementation for this is?
>
> I've worked with using categories before and hiding them in the
> interface (frankly, pain in the ass). I'm thinking the best solution  
> for
> this will be post meta.

Either post meta as you suggest or a custom taxonomy would be the best  
solutions IMHO.
-- 
Peter Westwood
http://blog.ftwr.co.uk | http://westi.wordpress.com
C53C F8FC 8796 8508 88D6 C950 54F4 5DCD A834 01C5


From scribu at gmail.com  Sun Nov  1 15:38:10 2009
From: scribu at gmail.com (scribu)
Date: Sun, 1 Nov 2009 17:38:10 +0200
Subject: [wp-hackers] How to show only first level sub categories under
	a main category
In-Reply-To: <4a100e480911010459h48ea6f49m4fbe4d1a873a0c6e@mail.gmail.com>
References: <4a100e480911010459h48ea6f49m4fbe4d1a873a0c6e@mail.gmail.com>
Message-ID: <349fe48b0911010738m875b529r60613af8b145d59c@mail.gmail.com>

If you will look at the documentation for wp_list_categories(), you'll see
there's a 'depth' argument. You can use that.


On Sun, Nov 1, 2009 at 2:59 PM, sunil sk <sksunil at gmail.com> wrote:

> Hi
> I am a new bee in wordpress.
>
> I have a list of categories. Under each category there are many
> subcategories. How can I ** list only 1st level of subcategories under a
> main category. I don't want to list 3rd level of category. I need to show
> only 2nd level of category under a main category.
>
> Thanks
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>



-- 
http://scribu.net

From celeph at gmail.com  Sun Nov  1 18:24:11 2009
From: celeph at gmail.com (Gerrit Wessendorf)
Date: Sun, 1 Nov 2009 13:24:11 -0500
Subject: [wp-hackers] Handling cookies with wp-plugin and wp-supercache
Message-ID: <a613fec40911011024h2c2465f5xd21aa66c8ef151d5@mail.gmail.com>

Hi,
I hope this isn't too offtopic, but I was hoping someone might be able to
give me a hint or idea. :)

The situation:
I wrote a simple plugin for wordpress that reads the http-referrer and sets
a cookie with info about searchengine or email referrals. This cookie is
available in the entire session until the user closes the browser. The value
can be used with a function in template files, or shortcodes in pages/posts.
With Firefox plugin refspoof I simulate different referrers.

This all works great both as wp-plugin and outside of wordpress as included
object.

I installed wp-supercache, added my cookiename to supercache's rewrite rules
in .htaccess,

[...]
RewriteCond %{REQUEST_URI} !^.*[^/]$
RewriteCond %{REQUEST_URI} !^.*//.*$
RewriteCond %{REQUEST_METHOD} !POST
RewriteCond %{QUERY_STRING} !.*=.*
RewriteCond %{HTTP:Cookie}
!^.*(comment_author_|wordpress_logged_in|wp-postpass_|MYCOOKIENAME).*$
[...]

and I used the following for my test markup:

<!-- mfunc AgoraCapture::html() -->
<?php AgoraCapture::html(); ?>
<!-- /mfunc-->

The function html() returns some html markup with to display the value(s)
and a link to remove the cookie.

I also defined some shortcodes which work great without supercache and still
need to be tested with supercache, once I get the html() test working.

The problem:
My test function doesn't seem to be able to update or delete the cookie once
wp-supercache is activated. If I visit the site by typing in the url
directly, my code will set a value indicating it's a direct visit. If I then
choose to remove and spoof a new referrer the directvisit-value stays and
remains unchanged. If I manually delete the cookie from the browser's cookie
list I'm able to simulate another referrer, but once the cookie is set, it
stays there until I manually remove it again. This makes it a bit difficult
to test different scenarios, and I'm not able to tell if the site would set
the proper values in a real-world situation.

I have the feeling it might just be a minor detail I have overlooked, and I
can't imagine I'm the first to handle cookies in a wp-supercache
environment. Have you ever developed a plugin or wordpress extension that
handles cookies and had to work with wp-supercache?

Any hint is really appreciated.
Many thanks in advance,
Gerrit

From netkickstart at gmail.com  Sun Nov  1 20:07:22 2009
From: netkickstart at gmail.com (netkickstart at gmail.com)
Date: Sun, 1 Nov 2009 15:07:22 -0500
Subject: [wp-hackers] dynamic post passwords
Message-ID: <DEFC4A7AD0E7444FB5642322E9B93394@zenpawn>

The introduction of the post_password_required function in 2.7
was a great idea, but it's unfortunate it doesn't have a hook.

I'd like to be able to check the post password on the fly such
that it could handle a number of valid answers (kind of like a
captcha for viewing posts, for example).

One hack might be to use the_password_form filter to check the
password, but then you'd have duplicate either the_content or
the_excerpt, as the output is immediately returned.  Yuck.

Any other thoughts?  I hope I'm just overcomplicating things.


Thanks,
-Erin

From netkickstart at gmail.com  Sun Nov  1 20:28:36 2009
From: netkickstart at gmail.com (netkickstart at gmail.com)
Date: Sun, 1 Nov 2009 15:28:36 -0500
Subject: [wp-hackers] dynamic post passwords
Message-ID: <CA30D96384CC405A900A66562ED1A1CF@zenpawn>

I just had another idea on this (sorry if anyone responded already;
I'm on the digest version).  How about checking $_POST['post_password']
in the init hook and, if it passes the dynamic password test, assuming
we know the $post in that context, the wp-postpass_ cookie could then
be set to match the post's password as stored in the db.  In this way,
post_password_required would return false and the post would be shown.

-Erin

From glenn at glennansley.com  Sun Nov  1 20:38:12 2009
From: glenn at glennansley.com (Glenn Ansley)
Date: Sun, 1 Nov 2009 15:38:12 -0500
Subject: [wp-hackers] dynamic post passwords
In-Reply-To: <CA30D96384CC405A900A66562ED1A1CF@zenpawn>
References: <CA30D96384CC405A900A66562ED1A1CF@zenpawn>
Message-ID: <7474be390911011238v43df6a36iffe1a6a9079279d7@mail.gmail.com>

I have a plugin that automatically assigns passwords to children pages
if the password is set for the parent page.
I encountered several obstacles because of the way the output is
returned. It's been a while so I honestly can't remember what the
specific problems I had were and how I got around it... but here's the
source code in the event it helps you out or gives you a better idea.
I do remember that my plugin doesn't apply the password to
grandchildren pages, just children pages, just fyi.

Hope it helps.

http://fullthrottledevelopment.com/password-protect-children-pages
Source Code: http://svn.wp-plugins.org/ft-password-protect-children-pages/trunk/ft-password-protect-children-pages.php

Glenn Ansley
http://fullthrottledevelopment.com
http://twitter.com/glennansley
http://twitter.com/full_throttle

On Sun, Nov 1, 2009 at 3:28 PM,  <netkickstart at gmail.com> wrote:
> I just had another idea on this (sorry if anyone responded already;
> I'm on the digest version). ?How about checking $_POST['post_password']
> in the init hook and, if it passes the dynamic password test, assuming
> we know the $post in that context, the wp-postpass_ cookie could then
> be set to match the post's password as stored in the db. ?In this way,
> post_password_required would return false and the post would be shown.
>
> -Erin
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From william.canino at googlemail.com  Sun Nov  1 20:53:32 2009
From: william.canino at googlemail.com (William Canino)
Date: Sun, 1 Nov 2009 15:53:32 -0500
Subject: [wp-hackers] Handling cookies with wp-plugin and wp-supercache
In-Reply-To: <a613fec40911011024h2c2465f5xd21aa66c8ef151d5@mail.gmail.com>
References: <a613fec40911011024h2c2465f5xd21aa66c8ef151d5@mail.gmail.com>
Message-ID: <e4dc67e0911011253q65ef5d63l3cd8b9e493c48bfa@mail.gmail.com>

> My test function doesn't seem to be able to update or delete the cookie once
> wp-supercache is activated. If I visit the site by typing in the url
> directly, my code will set a value indicating it's a direct visit. If I then
> choose to remove and spoof a new referrer the directvisit-value stays and
> remains unchanged. If I manually delete the cookie from the browser's cookie
> list I'm able to simulate another referrer, but once the cookie is set, it
> stays there until I manually remove it again. This makes it a bit difficult
> to test different scenarios, and I'm not able to tell if the site would set
> the proper values in a real-world situation.

Plugins/Cookies and Super Cache can work together with a little extra planning.

1. "Full on" super-cached pages -- that is, those served from the
wp-content/cache/sitename/path/index.html -- cannot set, remove or
change cookies directly because the pages are served directly by
Apache and never loaded from WordPress at all.  Alternatives: (1) The
Header directive in Apache or (2) set/remove the cookie in Javascript.

2. "Half on" cached pages can set, remove or change cookies directly
but you have to edit wp-cache-phase1.php -- before line 110 -- because
the pages are served directly by wp-super-cache without running
plugins at all.  See the ff. code.  Alternatives: (1) Load before
Super Cache does or (2) set/remove the cookie in Javascript.

header( 'WP-Super-Cache: WP-Cache' );
// <-- add your Cookie-setting PHP here. Go nuts.
if ( $meta[ 'dynamic' ] ) {
	include($cache_file);
} else {
	readfile( $cache_file );
}
die();

Does this make sense? You may need to state your problem more
succinctly because I don't understand.

W



2009/11/1 Gerrit Wessendorf <celeph at gmail.com>:
> Hi,
> I hope this isn't too offtopic, but I was hoping someone might be able to
> give me a hint or idea. :)
>
> The situation:
> I wrote a simple plugin for wordpress that reads the http-referrer and sets
> a cookie with info about searchengine or email referrals. This cookie is
> available in the entire session until the user closes the browser. The value
> can be used with a function in template files, or shortcodes in pages/posts.
> With Firefox plugin refspoof I simulate different referrers.
>
> This all works great both as wp-plugin and outside of wordpress as included
> object.
>
> I installed wp-supercache, added my cookiename to supercache's rewrite rules
> in .htaccess,
>
> [...]
> RewriteCond %{REQUEST_URI} !^.*[^/]$
> RewriteCond %{REQUEST_URI} !^.*//.*$
> RewriteCond %{REQUEST_METHOD} !POST
> RewriteCond %{QUERY_STRING} !.*=.*
> RewriteCond %{HTTP:Cookie}
> !^.*(comment_author_|wordpress_logged_in|wp-postpass_|MYCOOKIENAME).*$
> [...]
>
> and I used the following for my test markup:
>
> <!-- mfunc AgoraCapture::html() -->
> <?php AgoraCapture::html(); ?>
> <!-- /mfunc-->
>
> The function html() returns some html markup with to display the value(s)
> and a link to remove the cookie.
>
> I also defined some shortcodes which work great without supercache and still
> need to be tested with supercache, once I get the html() test working.
>
> The problem:
> My test function doesn't seem to be able to update or delete the cookie once
> wp-supercache is activated. If I visit the site by typing in the url
> directly, my code will set a value indicating it's a direct visit. If I then
> choose to remove and spoof a new referrer the directvisit-value stays and
> remains unchanged. If I manually delete the cookie from the browser's cookie
> list I'm able to simulate another referrer, but once the cookie is set, it
> stays there until I manually remove it again. This makes it a bit difficult
> to test different scenarios, and I'm not able to tell if the site would set
> the proper values in a real-world situation.
>
> I have the feeling it might just be a minor detail I have overlooked, and I
> can't imagine I'm the first to handle cookies in a wp-supercache
> environment. Have you ever developed a plugin or wordpress extension that
> handles cookies and had to work with wp-supercache?
>
> Any hint is really appreciated.
> Many thanks in advance,
> Gerrit
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From celeph at gmail.com  Sun Nov  1 22:03:46 2009
From: celeph at gmail.com (Gerrit Wessendorf)
Date: Sun, 1 Nov 2009 17:03:46 -0500
Subject: [wp-hackers] Handling cookies with wp-plugin and wp-supercache
In-Reply-To: <e4dc67e0911011253q65ef5d63l3cd8b9e493c48bfa@mail.gmail.com>
References: <a613fec40911011024h2c2465f5xd21aa66c8ef151d5@mail.gmail.com>
	<e4dc67e0911011253q65ef5d63l3cd8b9e493c48bfa@mail.gmail.com>
Message-ID: <a613fec40911011403r3e24fa6i51767b5b077dd15c@mail.gmail.com>

Hi William,

Yes, it makes perfect sense. I was afraid Javascript might be the answer to
my problem, but I will try the other options first.
Thanks for the suggestions!
Gerrit



On Sun, Nov 1, 2009 at 3:53 PM, William Canino <
william.canino at googlemail.com> wrote:

> > My test function doesn't seem to be able to update or delete the cookie
> once
> > wp-supercache is activated. If I visit the site by typing in the url
> > directly, my code will set a value indicating it's a direct visit. If I
> then
> > choose to remove and spoof a new referrer the directvisit-value stays and
> > remains unchanged. If I manually delete the cookie from the browser's
> cookie
> > list I'm able to simulate another referrer, but once the cookie is set,
> it
> > stays there until I manually remove it again. This makes it a bit
> difficult
> > to test different scenarios, and I'm not able to tell if the site would
> set
> > the proper values in a real-world situation.
>
> Plugins/Cookies and Super Cache can work together with a little extra
> planning.
>
> 1. "Full on" super-cached pages -- that is, those served from the
> wp-content/cache/sitename/path/index.html -- cannot set, remove or
> change cookies directly because the pages are served directly by
> Apache and never loaded from WordPress at all.  Alternatives: (1) The
> Header directive in Apache or (2) set/remove the cookie in Javascript.
>
> 2. "Half on" cached pages can set, remove or change cookies directly
> but you have to edit wp-cache-phase1.php -- before line 110 -- because
> the pages are served directly by wp-super-cache without running
> plugins at all.  See the ff. code.  Alternatives: (1) Load before
> Super Cache does or (2) set/remove the cookie in Javascript.
>
> header( 'WP-Super-Cache: WP-Cache' );
> // <-- add your Cookie-setting PHP here. Go nuts.
> if ( $meta[ 'dynamic' ] ) {
>        include($cache_file);
> } else {
>        readfile( $cache_file );
> }
> die();
>
> Does this make sense? You may need to state your problem more
> succinctly because I don't understand.
>
> W
>
>
>
> 2009/11/1 Gerrit Wessendorf <celeph at gmail.com>:
> > Hi,
> > I hope this isn't too offtopic, but I was hoping someone might be able to
> > give me a hint or idea. :)
> >
> > The situation:
> > I wrote a simple plugin for wordpress that reads the http-referrer and
> sets
> > a cookie with info about searchengine or email referrals. This cookie is
> > available in the entire session until the user closes the browser. The
> value
> > can be used with a function in template files, or shortcodes in
> pages/posts.
> > With Firefox plugin refspoof I simulate different referrers.
> >
> > This all works great both as wp-plugin and outside of wordpress as
> included
> > object.
> >
> > I installed wp-supercache, added my cookiename to supercache's rewrite
> rules
> > in .htaccess,
> >
> > [...]
> > RewriteCond %{REQUEST_URI} !^.*[^/]$
> > RewriteCond %{REQUEST_URI} !^.*//.*$
> > RewriteCond %{REQUEST_METHOD} !POST
> > RewriteCond %{QUERY_STRING} !.*=.*
> > RewriteCond %{HTTP:Cookie}
> > !^.*(comment_author_|wordpress_logged_in|wp-postpass_|MYCOOKIENAME).*$
> > [...]
> >
> > and I used the following for my test markup:
> >
> > <!-- mfunc AgoraCapture::html() -->
> > <?php AgoraCapture::html(); ?>
> > <!-- /mfunc-->
> >
> > The function html() returns some html markup with to display the value(s)
> > and a link to remove the cookie.
> >
> > I also defined some shortcodes which work great without supercache and
> still
> > need to be tested with supercache, once I get the html() test working.
> >
> > The problem:
> > My test function doesn't seem to be able to update or delete the cookie
> once
> > wp-supercache is activated. If I visit the site by typing in the url
> > directly, my code will set a value indicating it's a direct visit. If I
> then
> > choose to remove and spoof a new referrer the directvisit-value stays and
> > remains unchanged. If I manually delete the cookie from the browser's
> cookie
> > list I'm able to simulate another referrer, but once the cookie is set,
> it
> > stays there until I manually remove it again. This makes it a bit
> difficult
> > to test different scenarios, and I'm not able to tell if the site would
> set
> > the proper values in a real-world situation.
> >
> > I have the feeling it might just be a minor detail I have overlooked, and
> I
> > can't imagine I'm the first to handle cookies in a wp-supercache
> > environment. Have you ever developed a plugin or wordpress extension that
> > handles cookies and had to work with wp-supercache?
> >
> > Any hint is really appreciated.
> > Many thanks in advance,
> > Gerrit
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers at lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> >
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From jeremy at visser.name  Sun Nov  1 23:47:03 2009
From: jeremy at visser.name (Jeremy Visser)
Date: Mon, 02 Nov 2009 10:47:03 +1100
Subject: [wp-hackers] b-quote quicktag
Message-ID: <1257119223.13110.5.camel@rillian.narnia.sunriseroad.net>

Am I the only one that finds it really annoying that when you click the
b-quote quicktag button, it inserts



<blockquote></blockquote>



tags with several linebreaks around them and results in superfluous
linebreaks like it did then? (Okay, just kidding about the last part --
that was done for comedic effect.)

I can sort of understand where you're coming from -- <blockquote> is a
block-level tag, so if you're in the middle of typing a paragraph, and
then click "b-quote", it doesn't make sense to have a <blockquote>
starting in the middle of a paragraph.

But I think the behaviour is a carry-over from before we had TinyMCE. If
you cannot understand that <blockquote> is a block-level tag, then
you'll be using the TinyMCE editor for sure.

To be fair, <ul> and <ol> are block-level tags too, and yet they don't
have extraneous linebreaks wrapped around them.

What say you?


From mark at watero.us  Mon Nov  2 00:15:52 2009
From: mark at watero.us (mark waterous)
Date: Sun, 1 Nov 2009 16:15:52 -0800
Subject: [wp-hackers] Plugin repository not accepting a new tag?
In-Reply-To: <a613fec40911011403r3e24fa6i51767b5b077dd15c@mail.gmail.com>
References: <a613fec40911011024h2c2465f5xd21aa66c8ef151d5@mail.gmail.com>	<e4dc67e0911011253q65ef5d63l3cd8b9e493c48bfa@mail.gmail.com>
	<a613fec40911011403r3e24fa6i51767b5b077dd15c@mail.gmail.com>
Message-ID: <004d01ca5b51$a5dec880$f19c5980$@us>

My apologies if this isn't a good place to ask this, but I wasn't sure
posting in the forums wouldn't fall on mostly deaf ears (and I don't know
where would be better to be fair).

I'm trying to tag a new release of a plugin in the repository, but it
refuses to commit my changes, and I'm a little frustrated not knowing what
I'm doing wrong. I modified the files in trunk, and checked them in without
any problems. I then tried to tag the latest release, via

$ svn cp trunk tags/0.2.5

Works fine, but then when I try to check in the new tag, I'm getting this
error:

$ svn ci -m "Tagging version 0.2.5"
Adding         tags/0.2.5
Adding         tags/0.2.5/kstats-reloaded.php
Adding         tags/0.2.5/lib/cleanup.php
svn: Commit failed (details follow):
svn: File '/kstats-reloaded/tags/0.2.5/lib/cleanup.php' already exists

This didn't happen when I tagged the first two releases. Neither Trac nor
the SVN repo show my latest tags, yet the repository itself updated the
archive and claims to have 0.2.5 available, which makes me wonder if it's
just pulling it from trunk (despite the readme in trunk stating 0.2.5 as
stable and not trunk)? Can I just rm the directories and try it again, or am
I just going to make a mess of svn?

I feel really lost right now. :( Trying to figure out the problem on the SVN
FAQs isn't helping either, the only answer I could find for that error had
to do with file name case, resulting from using svn under Windows, yet I'm
running the svn on my linux box, so... bah.

--
Mark Waterous


From wp-hackers at striderweb.com  Mon Nov  2 02:56:44 2009
From: wp-hackers at striderweb.com (Stephen Rider)
Date: Sun, 1 Nov 2009 20:56:44 -0600
Subject: [wp-hackers] "deprecating" direct calls to wp-config.php
Message-ID: <4167AD97-4D8A-4922-83DB-23B5DBCA68B4@striderweb.com>

Hi all --

I just wanted to call a bit of attention to this patch:
<http://core.trac.wordpress.org/ticket/11059>

Per a recent discussion on this list, we should be discouraging  
plugins calling wp-config.php directly.  The patch adds a "deprecated"  
call to wp-config/php that should only fire when it's called  
directly.  (Specifically, it only happens if the file is called and  
ABSPATH is not already defined.)

I wanted to point this out here, but let's keep discussion on the trac  
site itself and not clutter up wp-hackers.  Please reply there.

Regards,
Stephen

-- 
Stephen Rider
http://striderweb.com/





From mark at watero.us  Mon Nov  2 03:35:46 2009
From: mark at watero.us (mark waterous)
Date: Sun, 1 Nov 2009 19:35:46 -0800
Subject: [wp-hackers] Plugin repository not accepting a new tag?
In-Reply-To: <004d01ca5b51$a5dec880$f19c5980$@us>
References: <a613fec40911011024h2c2465f5xd21aa66c8ef151d5@mail.gmail.com>	<e4dc67e0911011253q65ef5d63l3cd8b9e493c48bfa@mail.gmail.com>	<a613fec40911011403r3e24fa6i51767b5b077dd15c@mail.gmail.com>
	<004d01ca5b51$a5dec880$f19c5980$@us>
Message-ID: <004e01ca5b6d$913171a0$b39454e0$@us>

Hmph. After everything else, just deleting my local copy and checking it out
again let me set a new tag. Sorry for the noise.

--
Mark Waterous


> -----Original Message-----
> From: wp-hackers-bounces at lists.automattic.com [mailto:wp-hackers-
> bounces at lists.automattic.com] On Behalf Of mark waterous
> Sent: Sunday, November 01, 2009 4:16 PM
> To: wp-hackers at lists.automattic.com
> Subject: [wp-hackers] Plugin repository not accepting a new tag?
> 
> My apologies if this isn't a good place to ask this, but I wasn't sure
> posting in the forums wouldn't fall on mostly deaf ears (and I don't
> know
> where would be better to be fair).
> 
> I'm trying to tag a new release...


From william.canino at googlemail.com  Mon Nov  2 04:41:00 2009
From: william.canino at googlemail.com (William Canino)
Date: Sun, 1 Nov 2009 23:41:00 -0500
Subject: [wp-hackers] Adding an output buffer callback
Message-ID: <e4dc67e0911012041p1ac1aa69ma910382636b473a@mail.gmail.com>

One of the features of Google Analytics and GA plugins is the ability
to track outgoing links using this technique
http://www.google.com/support/googleanalytics/bin/answer.py?hl=en&answer=55527
.

I reviewed the various GA plugins and saw that they only run their
preg_match_replace inside a filter hook on the_content, the_excerpt
and comment_text.  This means they don't track outbound links on the
theme, the widgets, and the output of plugins.

Another thing they don't track is where people click the blog's feeds
link and how often.

I want to improve this by preg_match_replace-ing the whole page
output.  I have written a function ga_link() that modifies hyperlinks
to insert this tracking code.

I would like advice on where to best call ob_start('ga_link') and
ob_end_flush().

W

From wp at xentek.net  Mon Nov  2 05:10:26 2009
From: wp at xentek.net (Eric Marden)
Date: Mon, 2 Nov 2009 00:10:26 -0500
Subject: [wp-hackers] Adding an output buffer callback
In-Reply-To: <e4dc67e0911012041p1ac1aa69ma910382636b473a@mail.gmail.com>
References: <e4dc67e0911012041p1ac1aa69ma910382636b473a@mail.gmail.com>
Message-ID: <229A6876-3CC2-4746-8D4B-14C767295C69@xentek.net>

On Nov 1, 2009, at 11:41 PM, William Canino wrote:
> I want to improve this by preg_match_replace-ing the whole page
> output.  I have written a function ga_link() that modifies hyperlinks
> to insert this tracking code.
>
> I would like advice on where to best call ob_start('ga_link') and
> ob_end_flush().


You might want to do that on wp_head and wp_footer actions.

That way you pretty much get everything between the body tags, which  
is all you care about anyway.

More:
http://codex.wordpress.org/Plugin_API/Action_Reference/wp_head
http://codex.wordpress.org/Plugin_API/Action_Reference/wp_footer

Though this seems like an awful lot of processing just to tag outbound  
links. Some of the ones you mentioned might be best served being done  
in the theme layer or hard coded.


- Eric Marden
__________________________________
http://xentek.net/code/wordpress/






From anacin at gwhatchet.com  Mon Nov  2 07:12:28 2009
From: anacin at gwhatchet.com (Andrew Nacin)
Date: Mon, 2 Nov 2009 02:12:28 -0500
Subject: [wp-hackers] Adding an output buffer callback
In-Reply-To: <229A6876-3CC2-4746-8D4B-14C767295C69@xentek.net>
References: <e4dc67e0911012041p1ac1aa69ma910382636b473a@mail.gmail.com> 
	<229A6876-3CC2-4746-8D4B-14C767295C69@xentek.net>
Message-ID: <8b870c460911012312l14ade030xeec980535375ed8@mail.gmail.com>

>
> I want to improve this by preg_match_replace-ing the whole page output.
>

The solution to your problem isn't using output buffering to generate a lot
of obtrusive JavaScript. Have you considered unobtrusive JavaScript? That
would rather clearly make the most sense here.

From william.canino at googlemail.com  Mon Nov  2 07:36:44 2009
From: william.canino at googlemail.com (William Canino)
Date: Mon, 2 Nov 2009 02:36:44 -0500
Subject: [wp-hackers] Adding an output buffer callback
In-Reply-To: <8b870c460911012312l14ade030xeec980535375ed8@mail.gmail.com>
References: <e4dc67e0911012041p1ac1aa69ma910382636b473a@mail.gmail.com>
	<229A6876-3CC2-4746-8D4B-14C767295C69@xentek.net>
	<8b870c460911012312l14ade030xeec980535375ed8@mail.gmail.com>
Message-ID: <e4dc67e0911012336w25e1f8d2q45b5667cf3043e33@mail.gmail.com>

Andrew, that is a tough question because I'm afraid my ga_link() is
all ready in PHP.

Is unobtrusive Javascript better, across the board?

W

2009/11/2 Andrew Nacin <anacin at gwhatchet.com>:
>>
>> I want to improve this by preg_match_replace-ing the whole page output.
>>
>
> The solution to your problem isn't using output buffering to generate a lot
> of obtrusive JavaScript. Have you considered unobtrusive JavaScript? That
> would rather clearly make the most sense here.
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From wp at xentek.net  Mon Nov  2 08:23:19 2009
From: wp at xentek.net (Eric Marden)
Date: Mon, 2 Nov 2009 03:23:19 -0500
Subject: [wp-hackers] Adding an output buffer callback
In-Reply-To: <e4dc67e0911012336w25e1f8d2q45b5667cf3043e33@mail.gmail.com>
References: <e4dc67e0911012041p1ac1aa69ma910382636b473a@mail.gmail.com>
	<229A6876-3CC2-4746-8D4B-14C767295C69@xentek.net>
	<8b870c460911012312l14ade030xeec980535375ed8@mail.gmail.com>
	<e4dc67e0911012336w25e1f8d2q45b5667cf3043e33@mail.gmail.com>
Message-ID: <3864FFC7-459E-4773-947F-FBD83CCC4240@xentek.net>

> Is unobtrusive Javascript better, across the board?

Yes. But has its draw backs, especially when crawling the entire DOM  
for links or the fact (performance) or that it won't work for non-JS  
using folks (obviously).

Let a plugin handle the links in the post/page content, and hand tag  
the rest, I say.




- Eric Marden
__________________________________
http://xentek.net/code/wordpress/






From wp at xentek.net  Mon Nov  2 10:05:33 2009
From: wp at xentek.net (Eric Marden)
Date: Mon, 2 Nov 2009 05:05:33 -0500
Subject: [wp-hackers] b-quote quicktag
In-Reply-To: <1257119223.13110.5.camel@rillian.narnia.sunriseroad.net>
References: <1257119223.13110.5.camel@rillian.narnia.sunriseroad.net>
Message-ID: <5991EAA5-B702-41B0-B142-9E17E9D26D32@xentek.net>

On Nov 1, 2009, at 6:47 PM, Jeremy Visser wrote:

> What say you?

I say... make a patch and submit it to trac ;)


- Eric Marden
__________________________________
http://xentek.net/code/wordpress/






From scribu at gmail.com  Mon Nov  2 10:43:17 2009
From: scribu at gmail.com (scribu)
Date: Mon, 2 Nov 2009 12:43:17 +0200
Subject: [wp-hackers] Plugin repository not accepting a new tag?
In-Reply-To: <004e01ca5b6d$913171a0$b39454e0$@us>
References: <a613fec40911011024h2c2465f5xd21aa66c8ef151d5@mail.gmail.com>
	<e4dc67e0911011253q65ef5d63l3cd8b9e493c48bfa@mail.gmail.com>
	<a613fec40911011403r3e24fa6i51767b5b077dd15c@mail.gmail.com>
	<004d01ca5b51$a5dec880$f19c5980$@us>
	<004e01ca5b6d$913171a0$b39454e0$@us>
Message-ID: <349fe48b0911020243g4b8dfebft318021430b748381@mail.gmail.com>

On Mon, Nov 2, 2009 at 5:35 AM, mark waterous <mark at watero.us> wrote:

> Hmph. After everything else, just deleting my local copy and checking it
> out
> again let me set a new tag. Sorry for the noise.
>

I have similar problems. I think it's a bug in subversion.


-- 
http://scribu.net

From public at toppa.com  Mon Nov  2 12:18:00 2009
From: public at toppa.com (Michael Toppa)
Date: Mon, 02 Nov 2009 07:18:00 -0500
Subject: [wp-hackers] Adding an output buffer callback
In-Reply-To: <mailman.5222.1257147407.16651.wp-hackers@lists.automattic.com>
References: <mailman.5222.1257147407.16651.wp-hackers@lists.automattic.com>
Message-ID: <4AEECDF8.6060207@toppa.com>


> One of the features of Google Analytics and GA plugins is the ability
> to track outgoing links using this technique
> http://www.google.com/support/googleanalytics/bin/answer.py?hl=en&answer=55527
> .
>
> I reviewed the various GA plugins and saw that they only run their
> preg_match_replace inside a filter hook on the_content, the_excerpt
> and comment_text.  This means they don't track outbound links on the
> theme, the widgets, and the output of plugins.
One of the most common support issues I have with my Shashin (Picasa 
photo viewer) plugin is conflicts with Google Analytics plugins, so at 
least some of them do in fact interfere with the output of other 
plugins. My plugin creates links with onclicks to enable the photo 
viewer, and at least some of the GA plugins blithely overwrite those 
onclicks with their own, breaking my plugin. Please keep this in mind 
when working on your plugin - check for an existing onclick before 
creating one. You can probably add your instructions to the end of an 
existing onclick, but please test it first.

Thanks,

Mike T
http://www.toppa.com

From scribu at gmail.com  Mon Nov  2 12:41:14 2009
From: scribu at gmail.com (scribu)
Date: Mon, 2 Nov 2009 14:41:14 +0200
Subject: [wp-hackers] Adding an output buffer callback
In-Reply-To: <4AEECDF8.6060207@toppa.com>
References: <mailman.5222.1257147407.16651.wp-hackers@lists.automattic.com>
	<4AEECDF8.6060207@toppa.com>
Message-ID: <349fe48b0911020441y2fa96116i85ba435a9dc406c2@mail.gmail.com>

>
>  One of the most common support issues I have with my Shashin (Picasa photo
> viewer) plugin is conflicts with Google Analytics plugins, so at least some
> of them do in fact interfere with the output of other plugins. My plugin
> creates links with onclicks to enable the photo viewer, and at least some of
> the GA plugins blithely overwrite those onclicks with their own, breaking my
> plugin. Please keep this in mind when working on your plugin - check for an
> existing onclick before creating one. You can probably add your instructions
> to the end of an existing onclick, but please test it first.
>

That's a prime example for why un-obtrusive javascript is better:

Both plugins should attach onClick handlers using jQuery:

jQuery('a').click(yourEventHandler);


-- 
http://scribu.net

From donncha at linux.ie  Mon Nov  2 13:14:35 2009
From: donncha at linux.ie (Donncha O Caoimh)
Date: Mon, 02 Nov 2009 13:14:35 +0000
Subject: [wp-hackers] Handling cookies with wp-plugin and wp-supercache
In-Reply-To: <a613fec40911011403r3e24fa6i51767b5b077dd15c@mail.gmail.com>
References: <a613fec40911011024h2c2465f5xd21aa66c8ef151d5@mail.gmail.com>	<e4dc67e0911011253q65ef5d63l3cd8b9e493c48bfa@mail.gmail.com>
	<a613fec40911011403r3e24fa6i51767b5b077dd15c@mail.gmail.com>
Message-ID: <4AEEDB3B.6060402@linux.ie>

Hey Gerrit,

Instead of modifying wp-cache-phase1.php you can use one of the 
cacheactions. You'll be able to add a supercache plugin in the 
wp-super-cache/plugins folder that uses that hook. You should probably 
move the plugins folder out of that directory as the next time you 
update it'll delete your plugin.

Doing this will make it easier to upgrade the plugin.

I'd switch to half-on mode. It's almost as fast 99% of the time as full 
mode and more flexible.

Donncha

Gerrit Wessendorf wrote:
> Hi William,
> 
> Yes, it makes perfect sense. I was afraid Javascript might be the answer to
> my problem, but I will try the other options first.
> Thanks for the suggestions!
> Gerrit
> 
> 
> 
> On Sun, Nov 1, 2009 at 3:53 PM, William Canino <
> william.canino at googlemail.com> wrote:
> 
>>> My test function doesn't seem to be able to update or delete the cookie
>> once
>>> wp-supercache is activated. If I visit the site by typing in the url
>>> directly, my code will set a value indicating it's a direct visit. If I
>> then
>>> choose to remove and spoof a new referrer the directvisit-value stays and
>>> remains unchanged. If I manually delete the cookie from the browser's
>> cookie
>>> list I'm able to simulate another referrer, but once the cookie is set,
>> it
>>> stays there until I manually remove it again. This makes it a bit
>> difficult
>>> to test different scenarios, and I'm not able to tell if the site would
>> set
>>> the proper values in a real-world situation.
>> Plugins/Cookies and Super Cache can work together with a little extra
>> planning.
>>
>> 1. "Full on" super-cached pages -- that is, those served from the
>> wp-content/cache/sitename/path/index.html -- cannot set, remove or
>> change cookies directly because the pages are served directly by
>> Apache and never loaded from WordPress at all.  Alternatives: (1) The
>> Header directive in Apache or (2) set/remove the cookie in Javascript.
>>
>> 2. "Half on" cached pages can set, remove or change cookies directly
>> but you have to edit wp-cache-phase1.php -- before line 110 -- because
>> the pages are served directly by wp-super-cache without running
>> plugins at all.  See the ff. code.  Alternatives: (1) Load before
>> Super Cache does or (2) set/remove the cookie in Javascript.
>>
>> header( 'WP-Super-Cache: WP-Cache' );
>> // <-- add your Cookie-setting PHP here. Go nuts.
>> if ( $meta[ 'dynamic' ] ) {
>>        include($cache_file);
>> } else {
>>        readfile( $cache_file );
>> }
>> die();
>>
>> Does this make sense? You may need to state your problem more
>> succinctly because I don't understand.
>>
>> W
>>
>>
>>
>> 2009/11/1 Gerrit Wessendorf <celeph at gmail.com>:
>>> Hi,
>>> I hope this isn't too offtopic, but I was hoping someone might be able to
>>> give me a hint or idea. :)
>>>
>>> The situation:
>>> I wrote a simple plugin for wordpress that reads the http-referrer and
>> sets
>>> a cookie with info about searchengine or email referrals. This cookie is
>>> available in the entire session until the user closes the browser. The
>> value
>>> can be used with a function in template files, or shortcodes in
>> pages/posts.
>>> With Firefox plugin refspoof I simulate different referrers.
>>>
>>> This all works great both as wp-plugin and outside of wordpress as
>> included
>>> object.
>>>
>>> I installed wp-supercache, added my cookiename to supercache's rewrite
>> rules
>>> in .htaccess,
>>>
>>> [...]
>>> RewriteCond %{REQUEST_URI} !^.*[^/]$
>>> RewriteCond %{REQUEST_URI} !^.*//.*$
>>> RewriteCond %{REQUEST_METHOD} !POST
>>> RewriteCond %{QUERY_STRING} !.*=.*
>>> RewriteCond %{HTTP:Cookie}
>>> !^.*(comment_author_|wordpress_logged_in|wp-postpass_|MYCOOKIENAME).*$
>>> [...]
>>>
>>> and I used the following for my test markup:
>>>
>>> <!-- mfunc AgoraCapture::html() -->
>>> <?php AgoraCapture::html(); ?>
>>> <!-- /mfunc-->
>>>
>>> The function html() returns some html markup with to display the value(s)
>>> and a link to remove the cookie.
>>>
>>> I also defined some shortcodes which work great without supercache and
>> still
>>> need to be tested with supercache, once I get the html() test working.
>>>
>>> The problem:
>>> My test function doesn't seem to be able to update or delete the cookie
>> once
>>> wp-supercache is activated. If I visit the site by typing in the url
>>> directly, my code will set a value indicating it's a direct visit. If I
>> then
>>> choose to remove and spoof a new referrer the directvisit-value stays and
>>> remains unchanged. If I manually delete the cookie from the browser's
>> cookie
>>> list I'm able to simulate another referrer, but once the cookie is set,
>> it
>>> stays there until I manually remove it again. This makes it a bit
>> difficult
>>> to test different scenarios, and I'm not able to tell if the site would
>> set
>>> the proper values in a real-world situation.
>>>
>>> I have the feeling it might just be a minor detail I have overlooked, and
>> I
>>> can't imagine I'm the first to handle cookies in a wp-supercache
>>> environment. Have you ever developed a plugin or wordpress extension that
>>> handles cookies and had to work with wp-supercache?
>>>
>>> Any hint is really appreciated.
>>> Many thanks in advance,
>>> Gerrit
>>> _______________________________________________
>>> wp-hackers mailing list
>>> wp-hackers at lists.automattic.com
>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>>
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
> 
> 

From kkarpieszuk at gmail.com  Mon Nov  2 14:17:53 2009
From: kkarpieszuk at gmail.com (Konrad Karpieszuk)
Date: Mon, 2 Nov 2009 15:17:53 +0100
Subject: [wp-hackers] Handling cookies with wp-plugin and wp-supercache
In-Reply-To: <4AEEDB3B.6060402@linux.ie>
References: <a613fec40911011024h2c2465f5xd21aa66c8ef151d5@mail.gmail.com>
	<e4dc67e0911011253q65ef5d63l3cd8b9e493c48bfa@mail.gmail.com>
	<a613fec40911011403r3e24fa6i51767b5b077dd15c@mail.gmail.com>
	<4AEEDB3B.6060402@linux.ie>
Message-ID: <67dfa4090911020617u26369964q6cab549e616c5b2a@mail.gmail.com>

>
>
> Instead of modifying wp-cache-phase1.php you can use one of the
> cacheactions. You'll be able to add a supercache plugin in the
> wp-super-cache/plugins folder that uses that hook. You should probably move
> the plugins folder out of that directory as the next time you update it'll
> delete your plugin.
>
> Doing this will make it easier to upgrade the plugin.


Donncha, could you describe it (maybe create some small tutorial) somewhere
how to do this? I think this will help for numerous wordpress plugins
develeopers :) Your plugin (wp super cache) is really popular and in
internet many times i saw questions from plugins developers that their
plugins doesn't work if wp super cache is installed. Most of them finally
decide to write in FAQ to disable wp super cache (truelly i did it also).
But this is not good solutions, especially if your plugin is ready to handle
this problem. Not everybody read source code of your plugin to find solution
and today i first time see that it is possible to set and read cookie with
wp super cache enabled :)

If you will decide to write this (even shortly) i promise to help you in
translating it into polish language.


-- 
(en) regards / (pl) pozdrawiam
Konrad Karpieszuk
http://konradjestwrwandzie.wordpress.com/

From otto at ottodestruct.com  Mon Nov  2 15:10:07 2009
From: otto at ottodestruct.com (Otto)
Date: Mon, 2 Nov 2009 09:10:07 -0600
Subject: [wp-hackers] Why strings aren't translated here?
In-Reply-To: <9b6c20460910301420k7fdcccdq3b71438237d01d38@mail.gmail.com>
References: <9b6c20460910291420y1d0419e8v15af8d3aab9ac75b@mail.gmail.com> 
	<731931D6-D550-429F-B18C-7F5097DE020A@ftwr.co.uk>
	<9b6c20460910291435t33ec92f7iaeb10473463873fd@mail.gmail.com> 
	<161617690910300858n442e9e66mcc3d1af2b17e039e@mail.gmail.com> 
	<9b6c20460910301420k7fdcccdq3b71438237d01d38@mail.gmail.com>
Message-ID: <161617690911020710q73df03c0k51e750cf40c8a30b@mail.gmail.com>

On Fri, Oct 30, 2009 at 3:20 PM, Milan Dini? <liste at srpski.biz> wrote:
> Now I tried what you suggested ( $gse_options['tip_text'] = sprintf(__("It
> seems that ... ) but it still doesn't translate that string. Maybe is
> problem because it is run in register_activation_hook.

Yes, that is indeed your problem. Or, rather, the lack of the init is
your problem.

When the activation hook fires, your plugin has just been included.
Init occurred before that happened. So your init doesn't get run, and
thus your text domain never gets loaded before you try to start
translating things. You need to load the text domain before you use
translation functions.


-Otto
Sent from Memphis, TN, United States

From william.canino at googlemail.com  Mon Nov  2 15:34:05 2009
From: william.canino at googlemail.com (William Canino)
Date: Mon, 2 Nov 2009 10:34:05 -0500
Subject: [wp-hackers] Handling cookies with wp-plugin and wp-supercache
In-Reply-To: <67dfa4090911020617u26369964q6cab549e616c5b2a@mail.gmail.com>
References: <a613fec40911011024h2c2465f5xd21aa66c8ef151d5@mail.gmail.com>
	<e4dc67e0911011253q65ef5d63l3cd8b9e493c48bfa@mail.gmail.com>
	<a613fec40911011403r3e24fa6i51767b5b077dd15c@mail.gmail.com>
	<4AEEDB3B.6060402@linux.ie>
	<67dfa4090911020617u26369964q6cab549e616c5b2a@mail.gmail.com>
Message-ID: <e4dc67e0911020734o12f133edv54c1a9f7f19cfa62@mail.gmail.com>

+1 on starting the Super Cache API documentation.

>> You'll be able to add a supercache plugin in the
>> wp-super-cache/plugins folder that uses that hook. You should probably move
>> the plugins folder out of that directory as the next time you update it'll
>> delete your plugin.

Sorry for my language, but this is horrible.

> Instead of modifying wp-cache-phase1.php you can use one of the
> cacheactions

Donncha is referring to wp_cache_served_cache_file. He is right.
Instead of my previous code suggestion, I would have suggested this:

function cookie-setting-code() {
   // do stuff
}
add_cacheaction('wp_cache_served_cache_file', 'cookie-setting-code');

The thing is, I don't know whether to put the code inline in the
plugin, in init, in wp_head or in functions.php.  I haven't gotten
around to trying this and, well, there's no documentation.



2009/11/2 Konrad Karpieszuk <kkarpieszuk at gmail.com>:
>>
>>
>> Instead of modifying wp-cache-phase1.php you can use one of the
>> cacheactions. You'll be able to add a supercache plugin in the
>> wp-super-cache/plugins folder that uses that hook. You should probably move
>> the plugins folder out of that directory as the next time you update it'll
>> delete your plugin.
>>
>> Doing this will make it easier to upgrade the plugin.
>
>
> Donncha, could you describe it (maybe create some small tutorial) somewhere
> how to do this? I think this will help for numerous wordpress plugins
> develeopers :) Your plugin (wp super cache) is really popular and in
> internet many times i saw questions from plugins developers that their
> plugins doesn't work if wp super cache is installed. Most of them finally
> decide to write in FAQ to disable wp super cache (truelly i did it also).
> But this is not good solutions, especially if your plugin is ready to handle
> this problem. Not everybody read source code of your plugin to find solution
> and today i first time see that it is possible to set and read cookie with
> wp super cache enabled :)
>
> If you will decide to write this (even shortly) i promise to help you in
> translating it into polish language.
>
>
> --
> (en) regards / (pl) pozdrawiam
> Konrad Karpieszuk
> http://konradjestwrwandzie.wordpress.com/
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From william.canino at googlemail.com  Mon Nov  2 16:24:31 2009
From: william.canino at googlemail.com (William Canino)
Date: Mon, 2 Nov 2009 11:24:31 -0500
Subject: [wp-hackers] Adding an output buffer callback
In-Reply-To: <4AEECDF8.6060207@toppa.com>
References: <mailman.5222.1257147407.16651.wp-hackers@lists.automattic.com>
	<4AEECDF8.6060207@toppa.com>
Message-ID: <e4dc67e0911020824n500e2dbbo92c90c4f79ae88d9@mail.gmail.com>

> I reviewed the various GA plugins and saw that they only run their
> preg_match_replace inside a filter hook on the_content, the_excerpt
> and comment_text.  This means they don't track outbound links on the
> theme, the widgets, and the output of plugins.

Michael, "Ultimate Google Analytics",  "WP Google Analytics" and the
"Google Analytics for WordPress" plugins all use preg_match_replace
and do overwrite onclicks.  Meanwhile, "Google Analyticator" uses
jQuery.click().  Finally, Sylvestre's "Google Analytics" doesn't track
outbound links.  These are all the GA plugins out there.

Thank you for your help, guys. Google Analyticator solves all my
concerns.  Thank you, Spiral Web Consulting.

Almost all = I need to tweak it to track my feed clicks.



2009/11/2 Michael Toppa <public at toppa.com>:
> One of the most common support issues I have with my Shashin (Picasa photo
> viewer) plugin is conflicts with Google Analytics plugins, so at least some
> of them do in fact interfere with the output of other plugins. My plugin
> creates links with onclicks to enable the photo viewer, and at least some of
> the GA plugins blithely overwrite those onclicks with their own, breaking my
> plugin. Please keep this in mind when working on your plugin - check for an
> existing onclick before creating one. You can probably add your instructions
> to the end of an existing onclick, but please test it first.
>
> Thanks,

From celeph at gmail.com  Mon Nov  2 17:28:37 2009
From: celeph at gmail.com (Gerrit Wessendorf)
Date: Mon, 2 Nov 2009 12:28:37 -0500
Subject: [wp-hackers] Handling cookies with wp-plugin and wp-supercache
In-Reply-To: <4AEEDB3B.6060402@linux.ie>
References: <a613fec40911011024h2c2465f5xd21aa66c8ef151d5@mail.gmail.com>
	<e4dc67e0911011253q65ef5d63l3cd8b9e493c48bfa@mail.gmail.com>
	<a613fec40911011403r3e24fa6i51767b5b077dd15c@mail.gmail.com>
	<4AEEDB3B.6060402@linux.ie>
Message-ID: <a613fec40911020928k7d84f571x8aff91fbe29f6bc4@mail.gmail.com>

Hi Donncha,

Thank you for the advice! I will have to try and take a look at it again
tonight. Wp-supercache will run in half-on mode for now. I might have to
look into an optional alternative for full-on users later.

@Konrad: I'd be happy to write a tutorial once I have it working, and could
offer my plugin as an example.
Thanks!
Gerrit



On Mon, Nov 2, 2009 at 8:14 AM, Donncha O Caoimh <donncha at linux.ie> wrote:

> Hey Gerrit,
>
> Instead of modifying wp-cache-phase1.php you can use one of the
> cacheactions. You'll be able to add a supercache plugin in the
> wp-super-cache/plugins folder that uses that hook. You should probably move
> the plugins folder out of that directory as the next time you update it'll
> delete your plugin.
>
> Doing this will make it easier to upgrade the plugin.
>
> I'd switch to half-on mode. It's almost as fast 99% of the time as full
> mode and more flexible.
>
> Donncha
>
>
> Gerrit Wessendorf wrote:
>
>> Hi William,
>>
>> Yes, it makes perfect sense. I was afraid Javascript might be the answer
>> to
>> my problem, but I will try the other options first.
>> Thanks for the suggestions!
>> Gerrit
>>
>>
>>
>> On Sun, Nov 1, 2009 at 3:53 PM, William Canino <
>> william.canino at googlemail.com> wrote:
>>
>>  My test function doesn't seem to be able to update or delete the cookie
>>>>
>>> once
>>>
>>>> wp-supercache is activated. If I visit the site by typing in the url
>>>> directly, my code will set a value indicating it's a direct visit. If I
>>>>
>>> then
>>>
>>>> choose to remove and spoof a new referrer the directvisit-value stays
>>>> and
>>>> remains unchanged. If I manually delete the cookie from the browser's
>>>>
>>> cookie
>>>
>>>> list I'm able to simulate another referrer, but once the cookie is set,
>>>>
>>> it
>>>
>>>> stays there until I manually remove it again. This makes it a bit
>>>>
>>> difficult
>>>
>>>> to test different scenarios, and I'm not able to tell if the site would
>>>>
>>> set
>>>
>>>> the proper values in a real-world situation.
>>>>
>>> Plugins/Cookies and Super Cache can work together with a little extra
>>> planning.
>>>
>>> 1. "Full on" super-cached pages -- that is, those served from the
>>> wp-content/cache/sitename/path/index.html -- cannot set, remove or
>>> change cookies directly because the pages are served directly by
>>> Apache and never loaded from WordPress at all.  Alternatives: (1) The
>>> Header directive in Apache or (2) set/remove the cookie in Javascript.
>>>
>>> 2. "Half on" cached pages can set, remove or change cookies directly
>>> but you have to edit wp-cache-phase1.php -- before line 110 -- because
>>> the pages are served directly by wp-super-cache without running
>>> plugins at all.  See the ff. code.  Alternatives: (1) Load before
>>> Super Cache does or (2) set/remove the cookie in Javascript.
>>>
>>> header( 'WP-Super-Cache: WP-Cache' );
>>> // <-- add your Cookie-setting PHP here. Go nuts.
>>> if ( $meta[ 'dynamic' ] ) {
>>>       include($cache_file);
>>> } else {
>>>       readfile( $cache_file );
>>> }
>>> die();
>>>
>>> Does this make sense? You may need to state your problem more
>>> succinctly because I don't understand.
>>>
>>> W
>>>
>>>
>>>
>>> 2009/11/1 Gerrit Wessendorf <celeph at gmail.com>:
>>>
>>>> Hi,
>>>> I hope this isn't too offtopic, but I was hoping someone might be able
>>>> to
>>>> give me a hint or idea. :)
>>>>
>>>> The situation:
>>>> I wrote a simple plugin for wordpress that reads the http-referrer and
>>>>
>>> sets
>>>
>>>> a cookie with info about searchengine or email referrals. This cookie is
>>>> available in the entire session until the user closes the browser. The
>>>>
>>> value
>>>
>>>> can be used with a function in template files, or shortcodes in
>>>>
>>> pages/posts.
>>>
>>>> With Firefox plugin refspoof I simulate different referrers.
>>>>
>>>> This all works great both as wp-plugin and outside of wordpress as
>>>>
>>> included
>>>
>>>> object.
>>>>
>>>> I installed wp-supercache, added my cookiename to supercache's rewrite
>>>>
>>> rules
>>>
>>>> in .htaccess,
>>>>
>>>> [...]
>>>> RewriteCond %{REQUEST_URI} !^.*[^/]$
>>>> RewriteCond %{REQUEST_URI} !^.*//.*$
>>>> RewriteCond %{REQUEST_METHOD} !POST
>>>> RewriteCond %{QUERY_STRING} !.*=.*
>>>> RewriteCond %{HTTP:Cookie}
>>>> !^.*(comment_author_|wordpress_logged_in|wp-postpass_|MYCOOKIENAME).*$
>>>> [...]
>>>>
>>>> and I used the following for my test markup:
>>>>
>>>> <!-- mfunc AgoraCapture::html() -->
>>>> <?php AgoraCapture::html(); ?>
>>>> <!-- /mfunc-->
>>>>
>>>> The function html() returns some html markup with to display the
>>>> value(s)
>>>> and a link to remove the cookie.
>>>>
>>>> I also defined some shortcodes which work great without supercache and
>>>>
>>> still
>>>
>>>> need to be tested with supercache, once I get the html() test working.
>>>>
>>>> The problem:
>>>> My test function doesn't seem to be able to update or delete the cookie
>>>>
>>> once
>>>
>>>> wp-supercache is activated. If I visit the site by typing in the url
>>>> directly, my code will set a value indicating it's a direct visit. If I
>>>>
>>> then
>>>
>>>> choose to remove and spoof a new referrer the directvisit-value stays
>>>> and
>>>> remains unchanged. If I manually delete the cookie from the browser's
>>>>
>>> cookie
>>>
>>>> list I'm able to simulate another referrer, but once the cookie is set,
>>>>
>>> it
>>>
>>>> stays there until I manually remove it again. This makes it a bit
>>>>
>>> difficult
>>>
>>>> to test different scenarios, and I'm not able to tell if the site would
>>>>
>>> set
>>>
>>>> the proper values in a real-world situation.
>>>>
>>>> I have the feeling it might just be a minor detail I have overlooked,
>>>> and
>>>>
>>> I
>>>
>>>> can't imagine I'm the first to handle cookies in a wp-supercache
>>>> environment. Have you ever developed a plugin or wordpress extension
>>>> that
>>>> handles cookies and had to work with wp-supercache?
>>>>
>>>> Any hint is really appreciated.
>>>> Many thanks in advance,
>>>> Gerrit
>>>> _______________________________________________
>>>> wp-hackers mailing list
>>>> wp-hackers at lists.automattic.com
>>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>>>
>>>>  _______________________________________________
>>> wp-hackers mailing list
>>> wp-hackers at lists.automattic.com
>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>>
>>>  _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
>>
>>  _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From wp at xentek.net  Mon Nov  2 20:27:40 2009
From: wp at xentek.net (Eric Marden)
Date: Mon, 2 Nov 2009 15:27:40 -0500
Subject: [wp-hackers] Adding an output buffer callback
In-Reply-To: <e4dc67e0911020824n500e2dbbo92c90c4f79ae88d9@mail.gmail.com>
References: <mailman.5222.1257147407.16651.wp-hackers@lists.automattic.com>
	<4AEECDF8.6060207@toppa.com>
	<e4dc67e0911020824n500e2dbbo92c90c4f79ae88d9@mail.gmail.com>
Message-ID: <7662BCE7-619D-4AF0-862E-5865D2B9BC30@xentek.net>

On Nov 2, 2009, at 11:24 AM, William Canino wrote:

> Almost all = I need to tweak it to track my feed clicks.


Consider FeedBurner.com for additional stats on feed usage, too.


- Eric Marden
__________________________________
http://xentek.net/code/wordpress/






From donncha at linux.ie  Tue Nov  3 11:47:19 2009
From: donncha at linux.ie (Donncha O Caoimh)
Date: Tue, 03 Nov 2009 11:47:19 +0000
Subject: [wp-hackers] Handling cookies with wp-plugin and wp-supercache
In-Reply-To: <e4dc67e0911020734o12f133edv54c1a9f7f19cfa62@mail.gmail.com>
References: <a613fec40911011024h2c2465f5xd21aa66c8ef151d5@mail.gmail.com>	<e4dc67e0911011253q65ef5d63l3cd8b9e493c48bfa@mail.gmail.com>	<a613fec40911011403r3e24fa6i51767b5b077dd15c@mail.gmail.com>	<4AEEDB3B.6060402@linux.ie>	<67dfa4090911020617u26369964q6cab549e616c5b2a@mail.gmail.com>
	<e4dc67e0911020734o12f133edv54c1a9f7f19cfa62@mail.gmail.com>
Message-ID: <4AF01847.7040903@linux.ie>

For the past few weeks I've been meaning to write a "Hacking Supercache 
for fun and pleasure" post with tips and tricks and lists of actions and 
filters that can be used.

Unfortunately a lack of time has stopped me writing it so far but maybe 
this month.

If you're curious, have a read through wp-cache-phase1.php. It's a short 
file but has some interesting stuff, and the plugins/ folder has 2 
example plugins.

Donncha
PS. it's not horrible, really! :P

William Canino wrote:
> +1 on starting the Super Cache API documentation.
> 
>>> You'll be able to add a supercache plugin in the
>>> wp-super-cache/plugins folder that uses that hook. You should probably move
>>> the plugins folder out of that directory as the next time you update it'll
>>> delete your plugin.
> 
> Sorry for my language, but this is horrible.
> 
>> Instead of modifying wp-cache-phase1.php you can use one of the
>> cacheactions
> 
> Donncha is referring to wp_cache_served_cache_file. He is right.
> Instead of my previous code suggestion, I would have suggested this:
> 
> function cookie-setting-code() {
>    // do stuff
> }
> add_cacheaction('wp_cache_served_cache_file', 'cookie-setting-code');
> 
> The thing is, I don't know whether to put the code inline in the
> plugin, in init, in wp_head or in functions.php.  I haven't gotten
> around to trying this and, well, there's no documentation.
> 
> 
> 
> 2009/11/2 Konrad Karpieszuk <kkarpieszuk at gmail.com>:
>>>
>>> Instead of modifying wp-cache-phase1.php you can use one of the
>>> cacheactions. You'll be able to add a supercache plugin in the
>>> wp-super-cache/plugins folder that uses that hook. You should probably move
>>> the plugins folder out of that directory as the next time you update it'll
>>> delete your plugin.
>>>
>>> Doing this will make it easier to upgrade the plugin.
>>
>> Donncha, could you describe it (maybe create some small tutorial) somewhere
>> how to do this? I think this will help for numerous wordpress plugins
>> develeopers :) Your plugin (wp super cache) is really popular and in
>> internet many times i saw questions from plugins developers that their
>> plugins doesn't work if wp super cache is installed. Most of them finally
>> decide to write in FAQ to disable wp super cache (truelly i did it also).
>> But this is not good solutions, especially if your plugin is ready to handle
>> this problem. Not everybody read source code of your plugin to find solution
>> and today i first time see that it is possible to set and read cookie with
>> wp super cache enabled :)
>>
>> If you will decide to write this (even shortly) i promise to help you in
>> translating it into polish language.
>>
>>
>> --
>> (en) regards / (pl) pozdrawiam
>> Konrad Karpieszuk
>> http://konradjestwrwandzie.wordpress.com/
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
> 
> 

From marvinc at gmail.com  Tue Nov  3 13:49:57 2009
From: marvinc at gmail.com (MarvinC)
Date: Tue, 3 Nov 2009 08:49:57 -0500
Subject: [wp-hackers] Menu that links to specific content
In-Reply-To: <d7153760910290756w24bd12e3k3cf1f4a67b26ae51@mail.gmail.com>
References: <604360770910290723m1c0ef595la84e98d46f6e04f6@mail.gmail.com>
	<65b196650910290731m888bf21r46883c3086cf7755@mail.gmail.com>
	<d7153760910290756w24bd12e3k3cf1f4a67b26ae51@mail.gmail.com>
Message-ID: <604360770911030549l749c90b6sd337708e9ff0ce28@mail.gmail.com>

I understand this may be considered OT to the list but I'm "not getting it".
Is there any way to clarify how this would work in Wordpress? Would I place
the code in the header.php file? It looks simple but since it's a first for
me I'm not seeing the big picture.
Any responses appreciated.

On Thu, Oct 29, 2009 at 9:56 AM, mccormicky <mccormicky at gmail.com> wrote:

> LINKS MENU:
> <a href="#overview">Overview</a>
> <a href="#history">History</a>
> <a href="#middleofpage">Middle</a>
> <a href="#last"> Last</a>
>
>
> CONTENT w/ANCHOR links
>
> <h3 id="overview">Overview</h3>
> <h3 id="history">History</h3>
> <p id="middleofpage">middle paragraph</p>
> <p id="last">End of page</p>
>
>
> On Thu, Oct 29, 2009 at 10:31 AM, Simon Blackbourn <piemanek at gmail.com
> >wrote:
>
> > 2009/10/29 MarvinC <marvinc at gmail.com>
> >
> > > My apologies in advance if this isn't a "hack request" but I'm in need
> of
> > a
> > > way to create a menu containing links that point to specific content on
> a
> > > page. The content on most of the pages on a client site is long so what
> > > they
> > > request is the ability for the user to click to be taken to a specific
> > area
> > > of the page, like so:
> > > Link 1: Overview
> > > Link 2: History
> > > Link 3: Middle of Page
> > > Link 4: Last Paragraph of Page
> > >
> > >
> > http://hackadelic.com/solutions/wordpress/toc-boxes automatically
> > generates
> > a 'table of contents' for a post/page from the headers (h1, h2, etc) in
> the
> > content.
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers at lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> >
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From scribu at gmail.com  Tue Nov  3 14:24:15 2009
From: scribu at gmail.com (scribu)
Date: Tue, 3 Nov 2009 16:24:15 +0200
Subject: [wp-hackers] Username Madness
Message-ID: <349fe48b0911030624k538e1c48udccfb298bb3de1b1@mail.gmail.com>

Currently, in the wp_users table, there are 3 fields for the user name:

user_login
user_nicename
display_name

Besides those, we have two fields in wp_usermeta:

first_name
last_name


Instead of retaining a value, display_name should only remember the user
preference:

1 - user_login
2 - user_nicename
3 - first_name + last_name

with 2 as the default value.


Any thoughts?

-- 
http://scribu.net

From glenn at glennansley.com  Tue Nov  3 14:49:39 2009
From: glenn at glennansley.com (Glenn Ansley)
Date: Tue, 3 Nov 2009 09:49:39 -0500
Subject: [wp-hackers] Username Madness
In-Reply-To: <349fe48b0911030624k538e1c48udccfb298bb3de1b1@mail.gmail.com>
References: <349fe48b0911030624k538e1c48udccfb298bb3de1b1@mail.gmail.com>
Message-ID: <7474be390911030649p1156081yf9259bc88226eb00@mail.gmail.com>

+1 on this.
What about backwards compatibility?

On Tue, Nov 3, 2009 at 9:24 AM, scribu <scribu at gmail.com> wrote:
> Currently, in the wp_users table, there are 3 fields for the user name:
>
> user_login
> user_nicename
> display_name
>
> Besides those, we have two fields in wp_usermeta:
>
> first_name
> last_name
>
>
> Instead of retaining a value, display_name should only remember the user
> preference:
>
> 1 - user_login
> 2 - user_nicename
> 3 - first_name + last_name
>
> with 2 as the default value.
>
>
> Any thoughts?
>
> --
> http://scribu.net
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From pete at jointforcestech.com  Tue Nov  3 15:06:19 2009
From: pete at jointforcestech.com (Pete Mall)
Date: Tue, 3 Nov 2009 07:06:19 -0800
Subject: [wp-hackers] Username Madness
In-Reply-To: <7474be390911030649p1156081yf9259bc88226eb00@mail.gmail.com>
References: <349fe48b0911030624k538e1c48udccfb298bb3de1b1@mail.gmail.com> 
	<7474be390911030649p1156081yf9259bc88226eb00@mail.gmail.com>
Message-ID: <7f49e8010911030706k79fc4369v67995c6936244bbb@mail.gmail.com>

It'll break every other plugin!

On Tue, Nov 3, 2009 at 6:49 AM, Glenn Ansley <glenn at glennansley.com> wrote:

> +1 on this.
> What about backwards compatibility?
>
> On Tue, Nov 3, 2009 at 9:24 AM, scribu <scribu at gmail.com> wrote:
> > Currently, in the wp_users table, there are 3 fields for the user name:
> >
> > user_login
> > user_nicename
> > display_name
> >
> > Besides those, we have two fields in wp_usermeta:
> >
> > first_name
> > last_name
> >
> >
> > Instead of retaining a value, display_name should only remember the user
> > preference:
> >
> > 1 - user_login
> > 2 - user_nicename
> > 3 - first_name + last_name
> >
> > with 2 as the default value.
> >
> >
> > Any thoughts?
> >
> > --
> > http://scribu.net
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers at lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> >
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From SuperMoonMan at gmail.com  Tue Nov  3 15:06:31 2009
From: SuperMoonMan at gmail.com (Steven Rossi)
Date: Tue, 3 Nov 2009 10:06:31 -0500
Subject: [wp-hackers] Username Madness
In-Reply-To: <349fe48b0911030624k538e1c48udccfb298bb3de1b1@mail.gmail.com>
References: <349fe48b0911030624k538e1c48udccfb298bb3de1b1@mail.gmail.com>
Message-ID: <474320ee0911030706i48206e89x7a5cf76e15aa3ee9@mail.gmail.com>

Yes, please. Working with user stuff is a pain for this reason. As long as
it's backwards compatible (particularly for plugin developers), I'm all for
this. Thanks for getting it going.

Steven Rossi
http://www.letsmovetothemoon.com
http://www.stevenjrossi.com
http://www.twitter.com/supermoonman

On Tue, Nov 3, 2009 at 9:24 AM, scribu <scribu at gmail.com> wrote:

> Currently, in the wp_users table, there are 3 fields for the user name:
>
> user_login
> user_nicename
> display_name
>
> Besides those, we have two fields in wp_usermeta:
>
> first_name
> last_name
>
>
> Instead of retaining a value, display_name should only remember the user
> preference:
>
> 1 - user_login
> 2 - user_nicename
> 3 - first_name + last_name
>
> with 2 as the default value.
>
>
> Any thoughts?
>
> --
> http://scribu.net
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From otto at ottodestruct.com  Tue Nov  3 15:17:28 2009
From: otto at ottodestruct.com (Otto)
Date: Tue, 3 Nov 2009 09:17:28 -0600
Subject: [wp-hackers] Username Madness
In-Reply-To: <349fe48b0911030624k538e1c48udccfb298bb3de1b1@mail.gmail.com>
References: <349fe48b0911030624k538e1c48udccfb298bb3de1b1@mail.gmail.com>
Message-ID: <161617690911030717p1c165a98ld80f9465f0d757d@mail.gmail.com>

-1. I see no benefit to this, and several downsides. Those three
fields do different things and so should contain different
information.

Also, what if I want my display_name to be something different? The
database doesn't have to be limited to only what the existing UI is
capable of.

-Otto



On Tue, Nov 3, 2009 at 8:24 AM, scribu <scribu at gmail.com> wrote:
> Currently, in the wp_users table, there are 3 fields for the user name:
>
> user_login
> user_nicename
> display_name
>
> Besides those, we have two fields in wp_usermeta:
>
> first_name
> last_name
>
>
> Instead of retaining a value, display_name should only remember the user
> preference:
>
> 1 - user_login
> 2 - user_nicename
> 3 - first_name + last_name
>
> with 2 as the default value.
>
>
> Any thoughts?
>
> --
> http://scribu.net
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From dragonfly at dragonflyeye.net  Tue Nov  3 15:22:53 2009
From: dragonfly at dragonflyeye.net (Thomas Belknap)
Date: Tue, 3 Nov 2009 10:22:53 -0500
Subject: [wp-hackers] Username Madness
In-Reply-To: <161617690911030717p1c165a98ld80f9465f0d757d@mail.gmail.com>
References: <349fe48b0911030624k538e1c48udccfb298bb3de1b1@mail.gmail.com>
	<161617690911030717p1c165a98ld80f9465f0d757d@mail.gmail.com>
Message-ID: <77b239a00911030722j11f855ech3fc4a8ed6516a4ce@mail.gmail.com>

I have to say that I've never seen any real problem with reconciling these
many fields. Yes, it's a bit strange the way it's laid out - never really
understood why display_name and first/last name are in different databases,
for example - but Otto is right in that they all serve different functions.

On Tue, Nov 3, 2009 at 10:17 AM, Otto <otto at ottodestruct.com> wrote:

> -1. I see no benefit to this, and several downsides. Those three
> fields do different things and so should contain different
> information.
>
> Also, what if I want my display_name to be something different? The
> database doesn't have to be limited to only what the existing UI is
> capable of.
>
> -Otto
>
>
>
> On Tue, Nov 3, 2009 at 8:24 AM, scribu <scribu at gmail.com> wrote:
> > Currently, in the wp_users table, there are 3 fields for the user name:
> >
> > user_login
> > user_nicename
> > display_name
> >
> > Besides those, we have two fields in wp_usermeta:
> >
> > first_name
> > last_name
> >
> >
> > Instead of retaining a value, display_name should only remember the user
> > preference:
> >
> > 1 - user_login
> > 2 - user_nicename
> > 3 - first_name + last_name
> >
> > with 2 as the default value.
> >
> >
> > Any thoughts?
> >
> > --
> > http://scribu.net
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers at lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> >
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From scribu at gmail.com  Tue Nov  3 15:39:18 2009
From: scribu at gmail.com (scribu)
Date: Tue, 3 Nov 2009 17:39:18 +0200
Subject: [wp-hackers] Username Madness
In-Reply-To: <161617690911030717p1c165a98ld80f9465f0d757d@mail.gmail.com>
References: <349fe48b0911030624k538e1c48udccfb298bb3de1b1@mail.gmail.com>
	<161617690911030717p1c165a98ld80f9465f0d757d@mail.gmail.com>
Message-ID: <349fe48b0911030739y11302271r8c0334bcbeb87a86@mail.gmail.com>

On Tue, Nov 3, 2009 at 4:49 PM, Glenn Ansley <glenn at glennansley.com> wrote:

> +1 on this.
> What about backwards compatibility?
>

The WP_User object could be populated in a backwards compatible way, so as
long as the plugin isn't accessing the database field directly, there should
be no problems.


On Tue, Nov 3, 2009 at 5:17 PM, Otto <otto at ottodestruct.com> wrote:

> -1. I see no benefit to this, and several downsides.


How about the benefit of less redundancy?

Currently, when a user changes any of user_nicename, first_name or
last_name, the display_name has to be updated too.


Those three fields do different things and so should contain different
> information.


Exactly. Currently, display_name stores the same information as one of the
other fields.



> Also, what if I want my display_name to be something different?


You should use user_nicename instead, since that's what it's for.


-- 
http://scribu.net

From mrbrog at gmail.com  Tue Nov  3 15:43:18 2009
From: mrbrog at gmail.com (Claudio Simeone)
Date: Tue, 3 Nov 2009 16:43:18 +0100
Subject: [wp-hackers] "deprecating" direct calls to wp-config.php
In-Reply-To: <4167AD97-4D8A-4922-83DB-23B5DBCA68B4@striderweb.com>
References: <4167AD97-4D8A-4922-83DB-23B5DBCA68B4@striderweb.com>
Message-ID: <c41cda880911030743y32be0e57ua13a11b3f9ec5de2@mail.gmail.com>

2009/11/2 Stephen Rider <wp-hackers at striderweb.com>:

> I just wanted to call a bit of attention to this patch:
> <http://core.trac.wordpress.org/ticket/11059>
>
> Per a recent discussion on this list, we should be discouraging plugins
> calling wp-config.php directly.

> Regards,
> Stephen

Hi Stephen,

what's the reason, in details, of discouraging direct calls of
wp-config.php (or similar of wp-load.php)?
Sometimes I include wp-load.php in scripts external to WP, so I can
use e.g., database functions etc in those scripts.
Is that correct, or is to be discouraged, and if so, what is the
correct way to use WP environment in external scripts?

thanks in advance.
Claudio

From william.canino at googlemail.com  Tue Nov  3 16:09:58 2009
From: william.canino at googlemail.com (William Canino)
Date: Tue, 3 Nov 2009 11:09:58 -0500
Subject: [wp-hackers] Username Madness
In-Reply-To: <349fe48b0911030624k538e1c48udccfb298bb3de1b1@mail.gmail.com>
References: <349fe48b0911030624k538e1c48udccfb298bb3de1b1@mail.gmail.com>
Message-ID: <e4dc67e0911030809r6aa01e2aob29ac6bf6e3eaa26@mail.gmail.com>

My (real) first and last name is 'Bed?et Taseski'
My nickname is 'Bed?et the Russian'.
My user_login is 'admin' (cannot be changed)
My user_nicename is 'bedzet' (http://blog.com/author/bedzet)
My display_name is 'Bed?et the Russian' (output of the_author() )

Only nicename is guaranteed URL safe.  Also, some cultures write their
name as 'lastname + firstname'.

What is the confusion?

-1 on redefining display_name. Deprecate it, if you want. Don't redefine it.

Thank you,

W


2009/11/3 scribu <scribu at gmail.com>:
> Currently, in the wp_users table, there are 3 fields for the user name:
>
> user_login
> user_nicename
> display_name
>
> Besides those, we have two fields in wp_usermeta:
>
> first_name
> last_name
>
>
> Instead of retaining a value, display_name should only remember the user
> preference:
>
> 1 - user_login
> 2 - user_nicename
> 3 - first_name + last_name
>
> with 2 as the default value.
>
>
> Any thoughts?
>
> --
> http://scribu.net
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From mikeschinkel at newclarity.net  Tue Nov  3 16:38:12 2009
From: mikeschinkel at newclarity.net (mikeschinkel at newclarity.net)
Date: Tue, 3 Nov 2009 10:38:12 -0600 (CST)
Subject: [wp-hackers] Username Madness
In-Reply-To: <e4dc67e0911030809r6aa01e2aob29ac6bf6e3eaa26@mail.gmail.com>
References: <349fe48b0911030624k538e1c48udccfb298bb3de1b1@mail.gmail.com>
	<e4dc67e0911030809r6aa01e2aob29ac6bf6e3eaa26@mail.gmail.com>
Message-ID: <D0C44637-20B3-4F26-A894-ACEF45C1E9E9@newclarity.net>

> -1 on redefining display_name. Deprecate it, if you want. Don't  
> redefine it.

Agree.

Sent from my iPhone

On Nov 3, 2009, at 8:14 AM, William Canino <william.canino at googlemail.com 
 > wrote:

> My (real) first and last name is 'Bed?et Taseski'
> My nickname is 'Bed?et the Russian'.
> My user_login is 'admin' (cannot be changed)
> My user_nicename is 'bedzet' (http://blog.com/author/bedzet)
> My display_name is 'Bed?et the Russian' (output of the_author() )
>
> Only nicename is guaranteed URL safe.  Also, some cultures write their
> name as 'lastname + firstname'.
>
> What is the confusion?
>
> -1 on redefining display_name. Deprecate it, if you want. Don't  
> redefine it.
>
> Thank you,
>
> W
>
>
> 2009/11/3 scribu <scribu at gmail.com>:
>> Currently, in the wp_users table, there are 3 fields for the user  
>> name:
>>
>> user_login
>> user_nicename
>> display_name
>>
>> Besides those, we have two fields in wp_usermeta:
>>
>> first_name
>> last_name
>>
>>
>> Instead of retaining a value, display_name should only remember the  
>> user
>> preference:
>>
>> 1 - user_login
>> 2 - user_nicename
>> 3 - first_name + last_name
>>
>> with 2 as the default value.
>>
>>
>> Any thoughts?
>>
>> --
>> http://scribu.net
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

From casey.bisson at gmail.com  Tue Nov  3 16:39:38 2009
From: casey.bisson at gmail.com (Casey Bisson)
Date: Tue, 3 Nov 2009 11:39:38 -0500
Subject: [wp-hackers] Username Madness
In-Reply-To: <349fe48b0911030624k538e1c48udccfb298bb3de1b1@mail.gmail.com>
References: <349fe48b0911030624k538e1c48udccfb298bb3de1b1@mail.gmail.com>
Message-ID: <3ee7077c0911030839v49247706h9ec9513385cbc1b1@mail.gmail.com>

We use WP at my university where the user_login and user_nicename (which is
used in URLs) is not changeable by the user. And the first and last name
fields are set from our central user directory, leaving users only the
display_name (nickname) field to enter an alternate.

A user's
real first and last name as well as nickname are each very important
to supporting good searchability of the data. The role of WordPress in
this for me is that I'm using it as the application platform upon
which we're building out a number of applications, including a
new directory search.

I don't care about the DB structure, but please don't eliminate
the independent profile field for nickname.

--Casey

Information Architect
Plymouth State University
http://Plymouth.edu
http://MaisonBisson.com
http://about.Scriblio.net


 On Tue, Nov 3, 2009 at 9:24 AM, scribu <scribu at gmail.com> wrote:

> Currently, in the wp_users table, there are 3 fields for the user name:
>
> user_login
> user_nicename
> display_name
>
> Besides those, we have two fields in wp_usermeta:
>
> first_name
> last_name
>
>
> Instead of retaining a value, display_name should only remember the user
> preference:
>
> 1 - user_login
> 2 - user_nicename
> 3 - first_name + last_name
>
> with 2 as the default value.
>
>
> Any thoughts?
>
> --
> http://scribu.net
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From otto at ottodestruct.com  Tue Nov  3 17:05:04 2009
From: otto at ottodestruct.com (Otto)
Date: Tue, 3 Nov 2009 11:05:04 -0600
Subject: [wp-hackers] "deprecating" direct calls to wp-config.php
In-Reply-To: <c41cda880911030743y32be0e57ua13a11b3f9ec5de2@mail.gmail.com>
References: <4167AD97-4D8A-4922-83DB-23B5DBCA68B4@striderweb.com> 
	<c41cda880911030743y32be0e57ua13a11b3f9ec5de2@mail.gmail.com>
Message-ID: <161617690911030905q664ce2f7t93740c82239bb755@mail.gmail.com>

On Tue, Nov 3, 2009 at 9:43 AM, Claudio Simeone <mrbrog at gmail.com> wrote:
> what's the reason, in details, of discouraging direct calls of
> wp-config.php (or similar of wp-load.php)?
> Sometimes I include wp-load.php in scripts external to WP, so I can
> use e.g., database functions etc in those scripts.
> Is that correct, or is to be discouraged, and if so, what is the
> correct way to use WP environment in external scripts?

The correct way depends on what exactly you're doing. However, there's
never any real reason to include wp-config or wp-load directly. Doing
so is.. not wrong, exactly... just a bit sloppy. It's error-prone,
more likely to break things.

If you're doing AJAX like requests and need access to WordPress
functions, then you could use techniques similar to these:
http://codex.wordpress.org/AJAX_in_Plugins

For most anything else, hooking into the template_redirect function to
produce your custom output is the better way to go.

-Otto

From scribu at gmail.com  Tue Nov  3 17:06:58 2009
From: scribu at gmail.com (scribu)
Date: Tue, 3 Nov 2009 19:06:58 +0200
Subject: [wp-hackers] Username Madness
In-Reply-To: <3ee7077c0911030839v49247706h9ec9513385cbc1b1@mail.gmail.com>
References: <349fe48b0911030624k538e1c48udccfb298bb3de1b1@mail.gmail.com>
	<3ee7077c0911030839v49247706h9ec9513385cbc1b1@mail.gmail.com>
Message-ID: <349fe48b0911030906w3cd4add6nd360384b99eb932e@mail.gmail.com>

I missed a field. Here are all the fields involved:

In wp_users:

user_login - constant
user_nicename - URL safe
display_name - computed from other fields

In wp_usermeta: all are editable and optional:

nickname
first_name
last_name


So, correction:

Also, what if I want my display_name to be something different?
>
>
> You should use user_nicename instead, since that's what it's for.
>

You should use wp_usermeta.nickname instead of display_name.


Only nicename is guaranteed URL safe.  Also, some cultures write their
> name as 'lastname + firstname'.
>

As stated above, you can use wp_usermeta.nickname or a filter, and it won't
interfere with URLs either.


I don't care about the DB structure, but please don't eliminate
> the independent profile field for nickname.
>

Yeah, nickname won't be going anywhere.



> -1 on redefining display_name. Deprecate it, if you want. Don't redefine
> it.
>

The preference can be easily stored in the usermeta table.

But I'm wondering if this isn't a deliberate design choice, for better
performance - WPMU comes to mind.


-- 
http://scribu.net

From otto at ottodestruct.com  Tue Nov  3 17:17:43 2009
From: otto at ottodestruct.com (Otto)
Date: Tue, 3 Nov 2009 11:17:43 -0600
Subject: [wp-hackers] Username Madness
In-Reply-To: <349fe48b0911030906w3cd4add6nd360384b99eb932e@mail.gmail.com>
References: <349fe48b0911030624k538e1c48udccfb298bb3de1b1@mail.gmail.com> 
	<3ee7077c0911030839v49247706h9ec9513385cbc1b1@mail.gmail.com> 
	<349fe48b0911030906w3cd4add6nd360384b99eb932e@mail.gmail.com>
Message-ID: <161617690911030917v6c8d20as4e73aa0bb4515a5c@mail.gmail.com>

>> Also, what if I want my display_name to be something different?
>
> You should use wp_usermeta.nickname instead of display_name.

No, because I have a nickname already. So, what if I want my display
name to be a fourth option? You're discounting customization and
plugins.

Forget the existing User Interface and how it works. Display name does
not have to be any of the three choices you make. It'll work just fine
if I manually set it to something else.

In other words, you're making the assumption that display_name must be
one of those three. That assumption is incorrect. It can be a fourth.
The fact that the core code only gives three options doesn't mean that
a fourth option cannot be created by external code.

The interface is not the database.

-Otto
Sent from Memphis, TN, United States

From jason at realestatetomato.com  Tue Nov  3 17:18:32 2009
From: jason at realestatetomato.com (Jason Benesch)
Date: Tue, 3 Nov 2009 09:18:32 -0800
Subject: [wp-hackers] Menu that links to specific content
In-Reply-To: <604360770911030549l749c90b6sd337708e9ff0ce28@mail.gmail.com>
References: <604360770910290723m1c0ef595la84e98d46f6e04f6@mail.gmail.com>
	<65b196650910290731m888bf21r46883c3086cf7755@mail.gmail.com>
	<d7153760910290756w24bd12e3k3cf1f4a67b26ae51@mail.gmail.com>
	<604360770911030549l749c90b6sd337708e9ff0ce28@mail.gmail.com>
Message-ID: <579c69ac0911030918w2adcda5bhcbdf1716495f82f0@mail.gmail.com>

In your header.php add this menu:

<ul id="menu">
<li><a href="#overview">Overview></a></li>
<li><a href="#history">History</a></li>
<li><a href="#middleofpage">Middle</a></li>
<li><a href="#last"> Last</a></li>
</ul>

<style type="text/css">
#menu li { float:left; }
#menu li a { float:left; padding: 3px 8px; }
</style>



Then in your index.php file, or your archive.php file, or your page.php file
or any main body template file, add some more anchors:

<a name="overview">This is the overview section</a>
...... Stuff about the overview.......

<a name="history">This is the history section</a>
...... Stuff about the history.......



<a name="last">This is the last section</a>
...... Stuff about the last section of the page.......

On Tue, Nov 3, 2009 at 5:49 AM, MarvinC <marvinc at gmail.com> wrote:

> I understand this may be considered OT to the list but I'm "not getting
> it".
> Is there any way to clarify how this would work in Wordpress? Would I place
> the code in the header.php file? It looks simple but since it's a first for
> me I'm not seeing the big picture.
> Any responses appreciated.
>
> On Thu, Oct 29, 2009 at 9:56 AM, mccormicky <mccormicky at gmail.com> wrote:
>
> > LINKS MENU:
> > <a href="#overview">Overview</a>
> > <a href="#history">History</a>
> > <a href="#middleofpage">Middle</a>
> > <a href="#last"> Last</a>
> >
> >
> > CONTENT w/ANCHOR links
> >
> > <h3 id="overview">Overview</h3>
> > <h3 id="history">History</h3>
> > <p id="middleofpage">middle paragraph</p>
> > <p id="last">End of page</p>
> >
> >
> > On Thu, Oct 29, 2009 at 10:31 AM, Simon Blackbourn <piemanek at gmail.com
> > >wrote:
> >
> > > 2009/10/29 MarvinC <marvinc at gmail.com>
> > >
> > > > My apologies in advance if this isn't a "hack request" but I'm in
> need
> > of
> > > a
> > > > way to create a menu containing links that point to specific content
> on
> > a
> > > > page. The content on most of the pages on a client site is long so
> what
> > > > they
> > > > request is the ability for the user to click to be taken to a
> specific
> > > area
> > > > of the page, like so:
> > > > Link 1: Overview
> > > > Link 2: History
> > > > Link 3: Middle of Page
> > > > Link 4: Last Paragraph of Page
> > > >
> > > >
> > > http://hackadelic.com/solutions/wordpress/toc-boxes automatically
> > > generates
> > > a 'table of contents' for a post/page from the headers (h1, h2, etc) in
> > the
> > > content.
> > > _______________________________________________
> > > wp-hackers mailing list
> > > wp-hackers at lists.automattic.com
> > > http://lists.automattic.com/mailman/listinfo/wp-hackers
> > >
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers at lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> >
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>



-- 
Jason Benesch

Real Estate Tomato
Co-owner
www.realestatetomato.com
(619) 770-1950
jason at realestatetomato.com

ListingPress
Owner, Founder
www.listingpress.com
(619) 955-7465
jason at listingpress.com

From marvinc at gmail.com  Tue Nov  3 17:33:38 2009
From: marvinc at gmail.com (MarvinC)
Date: Tue, 3 Nov 2009 12:33:38 -0500
Subject: [wp-hackers] Menu that links to specific content
In-Reply-To: <579c69ac0911030918w2adcda5bhcbdf1716495f82f0@mail.gmail.com>
References: <604360770910290723m1c0ef595la84e98d46f6e04f6@mail.gmail.com>
	<65b196650910290731m888bf21r46883c3086cf7755@mail.gmail.com>
	<d7153760910290756w24bd12e3k3cf1f4a67b26ae51@mail.gmail.com>
	<604360770911030549l749c90b6sd337708e9ff0ce28@mail.gmail.com>
	<579c69ac0911030918w2adcda5bhcbdf1716495f82f0@mail.gmail.com>
Message-ID: <604360770911030933k6a579b56ta325d1993cc5fa95@mail.gmail.com>

Thanks for the reply. SHould the CSS section be added to the style sheet?
I'm wondering how this would work in WP if I wanted to widgetize the TOC or
have the TOC to appear in a widget that only appears on select pages.

On Tue, Nov 3, 2009 at 12:18 PM, Jason Benesch
<jason at realestatetomato.com>wrote:

> In your header.php add this menu:
>
> <ul id="menu">
> <li><a href="#overview">Overview></a></li>
> <li><a href="#history">History</a></li>
> <li><a href="#middleofpage">Middle</a></li>
> <li><a href="#last"> Last</a></li>
> </ul>
>
> <style type="text/css">
> #menu li { float:left; }
> #menu li a { float:left; padding: 3px 8px; }
> </style>
>
>
>
> Then in your index.php file, or your archive.php file, or your page.php
> file
> or any main body template file, add some more anchors:
>
> <a name="overview">This is the overview section</a>
> ...... Stuff about the overview.......
>
> <a name="history">This is the history section</a>
> ...... Stuff about the history.......
>
>
>
> <a name="last">This is the last section</a>
> ...... Stuff about the last section of the page.......
>
> On Tue, Nov 3, 2009 at 5:49 AM, MarvinC <marvinc at gmail.com> wrote:
>
> > I understand this may be considered OT to the list but I'm "not getting
> > it".
> > Is there any way to clarify how this would work in Wordpress? Would I
> place
> > the code in the header.php file? It looks simple but since it's a first
> for
> > me I'm not seeing the big picture.
> > Any responses appreciated.
> >
> > On Thu, Oct 29, 2009 at 9:56 AM, mccormicky <mccormicky at gmail.com>
> wrote:
> >
> > > LINKS MENU:
> > > <a href="#overview">Overview</a>
> > > <a href="#history">History</a>
> > > <a href="#middleofpage">Middle</a>
> > > <a href="#last"> Last</a>
> > >
> > >
> > > CONTENT w/ANCHOR links
> > >
> > > <h3 id="overview">Overview</h3>
> > > <h3 id="history">History</h3>
> > > <p id="middleofpage">middle paragraph</p>
> > > <p id="last">End of page</p>
> > >
> > >
> > > On Thu, Oct 29, 2009 at 10:31 AM, Simon Blackbourn <piemanek at gmail.com
> > > >wrote:
> > >
> > > > 2009/10/29 MarvinC <marvinc at gmail.com>
> > > >
> > > > > My apologies in advance if this isn't a "hack request" but I'm in
> > need
> > > of
> > > > a
> > > > > way to create a menu containing links that point to specific
> content
> > on
> > > a
> > > > > page. The content on most of the pages on a client site is long so
> > what
> > > > > they
> > > > > request is the ability for the user to click to be taken to a
> > specific
> > > > area
> > > > > of the page, like so:
> > > > > Link 1: Overview
> > > > > Link 2: History
> > > > > Link 3: Middle of Page
> > > > > Link 4: Last Paragraph of Page
> > > > >
> > > > >
> > > > http://hackadelic.com/solutions/wordpress/toc-boxes automatically
> > > > generates
> > > > a 'table of contents' for a post/page from the headers (h1, h2, etc)
> in
> > > the
> > > > content.
> > > > _______________________________________________
> > > > wp-hackers mailing list
> > > > wp-hackers at lists.automattic.com
> > > > http://lists.automattic.com/mailman/listinfo/wp-hackers
> > > >
> > > _______________________________________________
> > > wp-hackers mailing list
> > > wp-hackers at lists.automattic.com
> > > http://lists.automattic.com/mailman/listinfo/wp-hackers
> > >
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers at lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> >
>
>
>
> --
> Jason Benesch
>
> Real Estate Tomato
> Co-owner
> www.realestatetomato.com
> (619) 770-1950
> jason at realestatetomato.com
>
> ListingPress
> Owner, Founder
> www.listingpress.com
> (619) 955-7465
> jason at listingpress.com
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From mccormicky at gmail.com  Tue Nov  3 17:47:08 2009
From: mccormicky at gmail.com (mccormicky)
Date: Tue, 3 Nov 2009 12:47:08 -0500
Subject: [wp-hackers] Menu that links to specific content
In-Reply-To: <604360770911030933k6a579b56ta325d1993cc5fa95@mail.gmail.com>
References: <604360770910290723m1c0ef595la84e98d46f6e04f6@mail.gmail.com>
	<65b196650910290731m888bf21r46883c3086cf7755@mail.gmail.com>
	<d7153760910290756w24bd12e3k3cf1f4a67b26ae51@mail.gmail.com>
	<604360770911030549l749c90b6sd337708e9ff0ce28@mail.gmail.com>
	<579c69ac0911030918w2adcda5bhcbdf1716495f82f0@mail.gmail.com>
	<604360770911030933k6a579b56ta325d1993cc5fa95@mail.gmail.com>
Message-ID: <d7153760911030947s768a28bbkdb9137e6986a2f31@mail.gmail.com>

As long as the ids of the TOC are unique go ahead and place the new CSS to
style the TOC menu in the main WP stylesheet
You could make a separate stylesheet for the TOC menu but some people frown
on too many external stylesheets (tho'  it is lightweight enough not to
matter really either way).

As for including the TOC menu in only certain pages you could make special
page templates and include the TOC just like you'd include a sidebar

<?php /*
Template Name:Special Page Template
*/ ?>
<?php get_header();?>

<?php include (TEMPLATEPATH . "/toc.php"); ?>

etc

?>


On Tue, Nov 3, 2009 at 12:33 PM, MarvinC <marvinc at gmail.com> wrote:

> Thanks for the reply. SHould the CSS section be added to the style sheet?
> I'm wondering how this would work in WP if I wanted to widgetize the TOC or
> have the TOC to appear in a widget that only appears on select pages.
>
> On Tue, Nov 3, 2009 at 12:18 PM, Jason Benesch
> <jason at realestatetomato.com>wrote:
>
> > In your header.php add this menu:
> >
> > <ul id="menu">
> > <li><a href="#overview">Overview></a></li>
> > <li><a href="#history">History</a></li>
> > <li><a href="#middleofpage">Middle</a></li>
> > <li><a href="#last"> Last</a></li>
> > </ul>
> >
> > <style type="text/css">
> > #menu li { float:left; }
> > #menu li a { float:left; padding: 3px 8px; }
> > </style>
> >
> >
> >
> > Then in your index.php file, or your archive.php file, or your page.php
> > file
> > or any main body template file, add some more anchors:
> >
> > <a name="overview">This is the overview section</a>
> > ...... Stuff about the overview.......
> >
> > <a name="history">This is the history section</a>
> > ...... Stuff about the history.......
> >
> >
> >
> > <a name="last">This is the last section</a>
> > ...... Stuff about the last section of the page.......
> >
> > On Tue, Nov 3, 2009 at 5:49 AM, MarvinC <marvinc at gmail.com> wrote:
> >
> > > I understand this may be considered OT to the list but I'm "not getting
> > > it".
> > > Is there any way to clarify how this would work in Wordpress? Would I
> > place
> > > the code in the header.php file? It looks simple but since it's a first
> > for
> > > me I'm not seeing the big picture.
> > > Any responses appreciated.
> > >
> > > On Thu, Oct 29, 2009 at 9:56 AM, mccormicky <mccormicky at gmail.com>
> > wrote:
> > >
> > > > LINKS MENU:
> > > > <a href="#overview">Overview</a>
> > > > <a href="#history">History</a>
> > > > <a href="#middleofpage">Middle</a>
> > > > <a href="#last"> Last</a>
> > > >
> > > >
> > > > CONTENT w/ANCHOR links
> > > >
> > > > <h3 id="overview">Overview</h3>
> > > > <h3 id="history">History</h3>
> > > > <p id="middleofpage">middle paragraph</p>
> > > > <p id="last">End of page</p>
> > > >
> > > >
> > > > On Thu, Oct 29, 2009 at 10:31 AM, Simon Blackbourn <
> piemanek at gmail.com
> > > > >wrote:
> > > >
> > > > > 2009/10/29 MarvinC <marvinc at gmail.com>
> > > > >
> > > > > > My apologies in advance if this isn't a "hack request" but I'm in
> > > need
> > > > of
> > > > > a
> > > > > > way to create a menu containing links that point to specific
> > content
> > > on
> > > > a
> > > > > > page. The content on most of the pages on a client site is long
> so
> > > what
> > > > > > they
> > > > > > request is the ability for the user to click to be taken to a
> > > specific
> > > > > area
> > > > > > of the page, like so:
> > > > > > Link 1: Overview
> > > > > > Link 2: History
> > > > > > Link 3: Middle of Page
> > > > > > Link 4: Last Paragraph of Page
> > > > > >
> > > > > >
> > > > > http://hackadelic.com/solutions/wordpress/toc-boxes automatically
> > > > > generates
> > > > > a 'table of contents' for a post/page from the headers (h1, h2,
> etc)
> > in
> > > > the
> > > > > content.
> > > > > _______________________________________________
> > > > > wp-hackers mailing list
> > > > > wp-hackers at lists.automattic.com
> > > > > http://lists.automattic.com/mailman/listinfo/wp-hackers
> > > > >
> > > > _______________________________________________
> > > > wp-hackers mailing list
> > > > wp-hackers at lists.automattic.com
> > > > http://lists.automattic.com/mailman/listinfo/wp-hackers
> > > >
> > > _______________________________________________
> > > wp-hackers mailing list
> > > wp-hackers at lists.automattic.com
> > > http://lists.automattic.com/mailman/listinfo/wp-hackers
> > >
> >
> >
> >
> > --
> > Jason Benesch
> >
> > Real Estate Tomato
> > Co-owner
> > www.realestatetomato.com
> > (619) 770-1950
> > jason at realestatetomato.com
> >
> > ListingPress
> > Owner, Founder
> > www.listingpress.com
> > (619) 955-7465
> > jason at listingpress.com
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers at lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> >
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From jason at realestatetomato.com  Tue Nov  3 17:53:40 2009
From: jason at realestatetomato.com (Jason Benesch)
Date: Tue, 3 Nov 2009 09:53:40 -0800
Subject: [wp-hackers] "deprecating" direct calls to wp-config.php
In-Reply-To: <161617690911030905q664ce2f7t93740c82239bb755@mail.gmail.com>
References: <4167AD97-4D8A-4922-83DB-23B5DBCA68B4@striderweb.com>
	<c41cda880911030743y32be0e57ua13a11b3f9ec5de2@mail.gmail.com>
	<161617690911030905q664ce2f7t93740c82239bb755@mail.gmail.com>
Message-ID: <579c69ac0911030953g325e8fbk6d40f223b9f0f659@mail.gmail.com>

Wordpress now has a 'wp_ajax_nopriv_my_action' in 2.8 for your ajax calls
but following up with what Otto wrote about the template_redirect, here is a
quick example of a way you could go about making ajax requests without
having to call wp-load directly from one of your external script files.
Someone please correct me if you see anything off:


Let's say your plugin name is incredible ajax or inc_ajax

// Create some extra variables to accept when passed through the url
function my_query_vars( $query_vars ) {
    $myvars = array( 'inc_ajax' );
    $query_vars = array_merge( $query_vars, $myvars );
    return $query_vars;
}
add_filter( 'query_vars', 'my_query_vars' );

// Flush your rewrite rules if you want pretty permalinks
function flush_rewrite_rules() {
    global $wp_rewrite;
    $wp_rewrite->flush_rules();
}
add_action( 'init', 'flush_rewrite_rules' );

// Create a rewrite rule if you want pretty permalinks
function add_rewrite_rules( $wp_rewrite ) {
    $wp_rewrite->add_rewrite_tag( "%inc_ajax%", "(.+?)", "inc_ajax=" );

    $urls = array( 'ajax/%inc_ajax%' );
    foreach( $urls as $url ) {
        $rule = $wp_rewrite->generate_rewrite_rules($url, EP_NONE, false,
false, false, false, false);
        $wp_rewrite->rules = array_merge( $rule, $wp_rewrite->rules );
    }
    return $wp_rewrite;
}
add_action( 'generate_rewrite_rules', 'add_rewrite_rules' );

// Let's echo out the content we are looking to dynamically grab before we
load any template files
function ajax_template() {
    global $wp, $wpdb;
    if( isset( $wp->query_vars['inc_ajax'] ) && !empty(
$wp->query_vars['inc_ajax'] ) ) {
        switch( $wp->query_vars['inc_ajax'] ) {
            case 'all_users':
                $all_users = $wpdb->get_results("SELECT * FROM
{$wpdb->users}");
                echo json_encode($all_users);
                exit;
            break;
            case 'some_users':
                $some_users = $wpdb->get_results( $wpdb->prepare( "SELECT *
FROM {$wpdb->users} WHERE id = %s", $_POST['user_id'] ) );
                echo json_encode($some_users);
                exit;
            break;
            default:
                echo 'You really shouldn't be here...';
                exit;
            break;
        }
    }
}
add_action( 'template_redirect', 'ajax_template' );




So now from your theme file, here is an example of an ajax request using
jQuery:

jQuery(function($) {
    $('#some_button').click(function(){
        $.post( "http://mywpdomain.com/ajax/all_users",
            function( data ) {
                console.log(data);
            }, json );
    });
});


My point being, you now have created an ajax request url for your blog.

You can obviously elaborate on this and you should probably use the WP
'wp_ajax_nopriv_my_action' action hook in 2.8...

But this is just an example of how you could avoid using loading the
wp-load, or wp-config from external scripts in your plugin.

Hope it helps sombody!




On Tue, Nov 3, 2009 at 9:05 AM, Otto <otto at ottodestruct.com> wrote:

> On Tue, Nov 3, 2009 at 9:43 AM, Claudio Simeone <mrbrog at gmail.com> wrote:
> > what's the reason, in details, of discouraging direct calls of
> > wp-config.php (or similar of wp-load.php)?
> > Sometimes I include wp-load.php in scripts external to WP, so I can
> > use e.g., database functions etc in those scripts.
> > Is that correct, or is to be discouraged, and if so, what is the
> > correct way to use WP environment in external scripts?
>
> The correct way depends on what exactly you're doing. However, there's
> never any real reason to include wp-config or wp-load directly. Doing
> so is.. not wrong, exactly... just a bit sloppy. It's error-prone,
> more likely to break things.
>
> If you're doing AJAX like requests and need access to WordPress
> functions, then you could use techniques similar to these:
> http://codex.wordpress.org/AJAX_in_Plugins
>
> For most anything else, hooking into the template_redirect function to
> produce your custom output is the better way to go.
>
> -Otto
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>



-- 
Jason Benesch

Real Estate Tomato
Co-owner
www.realestatetomato.com
(619) 770-1950
jason at realestatetomato.com

ListingPress
Owner, Founder
www.listingpress.com
(619) 955-7465
jason at listingpress.com

From wp-hackers at striderweb.com  Tue Nov  3 17:57:16 2009
From: wp-hackers at striderweb.com (Stephen Rider)
Date: Tue, 3 Nov 2009 11:57:16 -0600
Subject: [wp-hackers] "deprecating" direct calls to wp-config.php
In-Reply-To: <161617690911030905q664ce2f7t93740c82239bb755@mail.gmail.com>
References: <4167AD97-4D8A-4922-83DB-23B5DBCA68B4@striderweb.com>
	<c41cda880911030743y32be0e57ua13a11b3f9ec5de2@mail.gmail.com>
	<161617690911030905q664ce2f7t93740c82239bb755@mail.gmail.com>
Message-ID: <E6D6C182-5D19-453E-A654-05A609ABDD5E@striderweb.com>


On Nov 3, 2009, at 11:05 AM, Otto wrote:

> On Tue, Nov 3, 2009 at 9:43 AM, Claudio Simeone <mrbrog at gmail.com>  
> wrote:
>> Sometimes I include wp-load.php in scripts external to WP....
>> Is that correct, or is to be discouraged, and if so, what is the
>> correct way to use WP environment in external scripts?
>
> The correct way depends on what exactly you're doing. However, there's
> never any real reason to include wp-config or wp-load directly. Doing
> so is.. not wrong, exactly... just a bit sloppy. It's error-prone,
> more likely to break things.

A little more specifically, as of WP 2.6, wp-config.php may be one  
directory up from where you expect it, which can break things.  Not  
only will you plugin be looking for a file that isn't there, but if a  
moved wp-config.php sets ABSPATH, ABSPATH will be *wrong*.

Thus if you absolutely must call one of these directly, call wp- 
load.php as it doesn't ever move.

Beyond that, Otto's advice is good. :)

> For most anything else, hooking into the template_redirect function to
> produce your custom output is the better way to go.

Stephen

-- 
Stephen Rider
http://striderweb.com/


From scribu at gmail.com  Tue Nov  3 18:11:45 2009
From: scribu at gmail.com (scribu)
Date: Tue, 3 Nov 2009 20:11:45 +0200
Subject: [wp-hackers] Username Madness
In-Reply-To: <161617690911030917v6c8d20as4e73aa0bb4515a5c@mail.gmail.com>
References: <349fe48b0911030624k538e1c48udccfb298bb3de1b1@mail.gmail.com>
	<3ee7077c0911030839v49247706h9ec9513385cbc1b1@mail.gmail.com>
	<349fe48b0911030906w3cd4add6nd360384b99eb932e@mail.gmail.com>
	<161617690911030917v6c8d20as4e73aa0bb4515a5c@mail.gmail.com>
Message-ID: <349fe48b0911031011q6c9ca9cfu6638b526c426500f@mail.gmail.com>

On Tue, Nov 3, 2009 at 7:17 PM, Otto <otto at ottodestruct.com> wrote:

> >> Also, what if I want my display_name to be something different?
> >
> > You should use wp_usermeta.nickname instead of display_name.
>
> No, because I have a nickname already. So, what if I want my display
> name to be a fourth option? You're discounting customization and
> plugins.
>
> Forget the existing User Interface and how it works. Display name does
> not have to be any of the three choices you make. It'll work just fine
> if I manually set it to something else.

In other words, you're making the assumption that display_name must be
> one of those three. That assumption is incorrect. It can be a fourth.
> The fact that the core code only gives three options doesn't mean that
> a fourth option cannot be created by external code.
>
> The interface is not the database.
>

Indeed: If you choose to completely ignore the user interface, you can use
display_name as yet another nickname.

But then, why not just use wp_usermeta to set as many nicknames as you want?


Then you could hook into 'the_author' and return one of them, instead of
display_name.


-- 
http://scribu.net

From jer at simianuprising.com  Tue Nov  3 18:28:59 2009
From: jer at simianuprising.com (Jeremy Clarke)
Date: Tue, 3 Nov 2009 13:28:59 -0500
Subject: [wp-hackers] Username Madness
In-Reply-To: <349fe48b0911031011q6c9ca9cfu6638b526c426500f@mail.gmail.com>
References: <349fe48b0911030624k538e1c48udccfb298bb3de1b1@mail.gmail.com>
	<3ee7077c0911030839v49247706h9ec9513385cbc1b1@mail.gmail.com>
	<349fe48b0911030906w3cd4add6nd360384b99eb932e@mail.gmail.com>
	<161617690911030917v6c8d20as4e73aa0bb4515a5c@mail.gmail.com>
	<349fe48b0911031011q6c9ca9cfu6638b526c426500f@mail.gmail.com>
Message-ID: <e1202cb10911031028i7fc94acyd56f157d0c0839d2@mail.gmail.com>

I think the current system is indeed messy but makes a lot of sense
and retroactively shunting it into plugin territory is a bad idea.

We have users who blog from places where they need to maintain their
anonymity for security reasons. They use display name to hold their
pseudonyms and first+last to hold their real names (useful for various
organizational reasons).

I don't think changing this is worth the problems it will cause. It's
not that hard to understand and as long as the workflow of using it is
well designed (which it currently is) very few people will actually
have problems with it.

-- 
Jeremy Clarke | http://jeremyclarke.org
Code and Design | http://globalvoicesonline.org

From william.canino at googlemail.com  Tue Nov  3 18:35:00 2009
From: william.canino at googlemail.com (William Canino)
Date: Tue, 3 Nov 2009 13:35:00 -0500
Subject: [wp-hackers] Username Madness
In-Reply-To: <349fe48b0911030906w3cd4add6nd360384b99eb932e@mail.gmail.com>
References: <349fe48b0911030624k538e1c48udccfb298bb3de1b1@mail.gmail.com>
	<3ee7077c0911030839v49247706h9ec9513385cbc1b1@mail.gmail.com>
	<349fe48b0911030906w3cd4add6nd360384b99eb932e@mail.gmail.com>
Message-ID: <e4dc67e0911031035v63c07605r7a5cb8e8f565755@mail.gmail.com>

Sorry, scribu. All is great now, IMO.

> But I'm wondering if this isn't a deliberate design choice, for better
> performance

Exactly.

display_name is what the fella or her site's admin wants displayed.
If it is First_name || Last_name || ' - CS Department' then it is so.
"SELECT display_name FROM wp_users" is fast and gives everyone and his
plugins what he expects.  No need for additional case statements or
JOINs or the_author filters or rewrites and all that.

If there is something superfluous in the list, it is wp_usermeta.nickname.

The next superfluous is user_login, if we go rewrite our installation
wizard and registration forms to ask and use the URL-safe nicename to
be the user's login name for WordPress.



2009/11/3 scribu <scribu at gmail.com>:
> I missed a field. Here are all the fields involved:
>
> In wp_users:
>
> user_login - constant
> user_nicename - URL safe
> display_name - computed from other fields
>
> In wp_usermeta: all are editable and optional:
>
> nickname
> first_name
> last_name
>
>
> So, correction:
>
> Also, what if I want my display_name to be something different?
>>
>>
>> You should use user_nicename instead, since that's what it's for.
>>
>
> You should use wp_usermeta.nickname instead of display_name.
>
>
> Only nicename is guaranteed URL safe. ?Also, some cultures write their
>> name as 'lastname + firstname'.
>>
>
> As stated above, you can use wp_usermeta.nickname or a filter, and it won't
> interfere with URLs either.
>
>
> I don't care about the DB structure, but please don't eliminate
>> the independent profile field for nickname.
>>
>
> Yeah, nickname won't be going anywhere.
>
>
>
>> -1 on redefining display_name. Deprecate it, if you want. Don't redefine
>> it.
>>
>
> The preference can be easily stored in the usermeta table.
>
> But I'm wondering if this isn't a deliberate design choice, for better
> performance - WPMU comes to mind.
>
>
> --
> http://scribu.net
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From marvinc at gmail.com  Tue Nov  3 18:37:54 2009
From: marvinc at gmail.com (MarvinC)
Date: Tue, 3 Nov 2009 13:37:54 -0500
Subject: [wp-hackers] Menu that links to specific content
In-Reply-To: <d7153760911030947s768a28bbkdb9137e6986a2f31@mail.gmail.com>
References: <604360770910290723m1c0ef595la84e98d46f6e04f6@mail.gmail.com>
	<65b196650910290731m888bf21r46883c3086cf7755@mail.gmail.com>
	<d7153760910290756w24bd12e3k3cf1f4a67b26ae51@mail.gmail.com>
	<604360770911030549l749c90b6sd337708e9ff0ce28@mail.gmail.com>
	<579c69ac0911030918w2adcda5bhcbdf1716495f82f0@mail.gmail.com>
	<604360770911030933k6a579b56ta325d1993cc5fa95@mail.gmail.com>
	<d7153760911030947s768a28bbkdb9137e6986a2f31@mail.gmail.com>
Message-ID: <604360770911031037l5b2ca270qcad22f84bcdaf86@mail.gmail.com>

Don't mean to seem scattered but I came across the WP-TOC plugin which works
in that it detects the Headings and displays a TOC based upon the [toc]
short-code. The problem is that it only works when placed on the page. So
image a really long page with a narrow width and a TOC box sitting in it. I
don't see anything in the Readme that states it can be used as a widget so
I've fired off an email to the author to confirm.

I would like to have a specific page template and tried to create a new
template file but think I may have done something wrong. Here are my steps:
1. Create new file: Test.php
2. Get errors after adding the following code to the beginning of the file:

<?php /*
Template Name:Test
*/ ?>
<?php get_header();?>

<?php include (TEMPLATEPATH . "/toc.php"); ?> or <?php include (TEMPLATEPATH
. "/wp-toc.php"); ?>

?>

Am I missing the obvious?

tia


On Tue, Nov 3, 2009 at 12:47 PM, mccormicky <mccormicky at gmail.com> wrote:

> As long as the ids of the TOC are unique go ahead and place the new CSS to
> style the TOC menu in the main WP stylesheet
> You could make a separate stylesheet for the TOC menu but some people frown
> on too many external stylesheets (tho'  it is lightweight enough not to
> matter really either way).
>
> As for including the TOC menu in only certain pages you could make special
> page templates and include the TOC just like you'd include a sidebar
>
> <?php /*
> Template Name:Special Page Template
> */ ?>
> <?php get_header();?>
>
> <?php include (TEMPLATEPATH . "/toc.php"); ?>
>
> etc
>
> ?>
>
>
> On Tue, Nov 3, 2009 at 12:33 PM, MarvinC <marvinc at gmail.com> wrote:
>
> > Thanks for the reply. SHould the CSS section be added to the style sheet?
> > I'm wondering how this would work in WP if I wanted to widgetize the TOC
> or
> > have the TOC to appear in a widget that only appears on select pages.
> >
> > On Tue, Nov 3, 2009 at 12:18 PM, Jason Benesch
> > <jason at realestatetomato.com>wrote:
> >
> > > In your header.php add this menu:
> > >
> > > <ul id="menu">
> > > <li><a href="#overview">Overview></a></li>
> > > <li><a href="#history">History</a></li>
> > > <li><a href="#middleofpage">Middle</a></li>
> > > <li><a href="#last"> Last</a></li>
> > > </ul>
> > >
> > > <style type="text/css">
> > > #menu li { float:left; }
> > > #menu li a { float:left; padding: 3px 8px; }
> > > </style>
> > >
> > >
> > >
> > > Then in your index.php file, or your archive.php file, or your page.php
> > > file
> > > or any main body template file, add some more anchors:
> > >
> > > <a name="overview">This is the overview section</a>
> > > ...... Stuff about the overview.......
> > >
> > > <a name="history">This is the history section</a>
> > > ...... Stuff about the history.......
> > >
> > >
> > >
> > > <a name="last">This is the last section</a>
> > > ...... Stuff about the last section of the page.......
> > >
> > > On Tue, Nov 3, 2009 at 5:49 AM, MarvinC <marvinc at gmail.com> wrote:
> > >
> > > > I understand this may be considered OT to the list but I'm "not
> getting
> > > > it".
> > > > Is there any way to clarify how this would work in Wordpress? Would I
> > > place
> > > > the code in the header.php file? It looks simple but since it's a
> first
> > > for
> > > > me I'm not seeing the big picture.
> > > > Any responses appreciated.
> > > >
> > > > On Thu, Oct 29, 2009 at 9:56 AM, mccormicky <mccormicky at gmail.com>
> > > wrote:
> > > >
> > > > > LINKS MENU:
> > > > > <a href="#overview">Overview</a>
> > > > > <a href="#history">History</a>
> > > > > <a href="#middleofpage">Middle</a>
> > > > > <a href="#last"> Last</a>
> > > > >
> > > > >
> > > > > CONTENT w/ANCHOR links
> > > > >
> > > > > <h3 id="overview">Overview</h3>
> > > > > <h3 id="history">History</h3>
> > > > > <p id="middleofpage">middle paragraph</p>
> > > > > <p id="last">End of page</p>
> > > > >
> > > > >
> > > > > On Thu, Oct 29, 2009 at 10:31 AM, Simon Blackbourn <
> > piemanek at gmail.com
> > > > > >wrote:
> > > > >
> > > > > > 2009/10/29 MarvinC <marvinc at gmail.com>
> > > > > >
> > > > > > > My apologies in advance if this isn't a "hack request" but I'm
> in
> > > > need
> > > > > of
> > > > > > a
> > > > > > > way to create a menu containing links that point to specific
> > > content
> > > > on
> > > > > a
> > > > > > > page. The content on most of the pages on a client site is long
> > so
> > > > what
> > > > > > > they
> > > > > > > request is the ability for the user to click to be taken to a
> > > > specific
> > > > > > area
> > > > > > > of the page, like so:
> > > > > > > Link 1: Overview
> > > > > > > Link 2: History
> > > > > > > Link 3: Middle of Page
> > > > > > > Link 4: Last Paragraph of Page
> > > > > > >
> > > > > > >
> > > > > > http://hackadelic.com/solutions/wordpress/toc-boxesautomatically
> > > > > > generates
> > > > > > a 'table of contents' for a post/page from the headers (h1, h2,
> > etc)
> > > in
> > > > > the
> > > > > > content.
> > > > > > _______________________________________________
> > > > > > wp-hackers mailing list
> > > > > > wp-hackers at lists.automattic.com
> > > > > > http://lists.automattic.com/mailman/listinfo/wp-hackers
> > > > > >
> > > > > _______________________________________________
> > > > > wp-hackers mailing list
> > > > > wp-hackers at lists.automattic.com
> > > > > http://lists.automattic.com/mailman/listinfo/wp-hackers
> > > > >
> > > > _______________________________________________
> > > > wp-hackers mailing list
> > > > wp-hackers at lists.automattic.com
> > > > http://lists.automattic.com/mailman/listinfo/wp-hackers
> > > >
> > >
> > >
> > >
> > > --
> > > Jason Benesch
> > >
> > > Real Estate Tomato
> > > Co-owner
> > > www.realestatetomato.com
> > > (619) 770-1950
> > > jason at realestatetomato.com
> > >
> > > ListingPress
> > > Owner, Founder
> > > www.listingpress.com
> > > (619) 955-7465
> > > jason at listingpress.com
> > > _______________________________________________
> > > wp-hackers mailing list
> > > wp-hackers at lists.automattic.com
> > > http://lists.automattic.com/mailman/listinfo/wp-hackers
> > >
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers at lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> >
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From mccormicky at gmail.com  Tue Nov  3 18:58:22 2009
From: mccormicky at gmail.com (mccormicky)
Date: Tue, 3 Nov 2009 13:58:22 -0500
Subject: [wp-hackers] Menu that links to specific content
In-Reply-To: <604360770911031037l5b2ca270qcad22f84bcdaf86@mail.gmail.com>
References: <604360770910290723m1c0ef595la84e98d46f6e04f6@mail.gmail.com>
	<65b196650910290731m888bf21r46883c3086cf7755@mail.gmail.com>
	<d7153760910290756w24bd12e3k3cf1f4a67b26ae51@mail.gmail.com>
	<604360770911030549l749c90b6sd337708e9ff0ce28@mail.gmail.com>
	<579c69ac0911030918w2adcda5bhcbdf1716495f82f0@mail.gmail.com>
	<604360770911030933k6a579b56ta325d1993cc5fa95@mail.gmail.com>
	<d7153760911030947s768a28bbkdb9137e6986a2f31@mail.gmail.com>
	<604360770911031037l5b2ca270qcad22f84bcdaf86@mail.gmail.com>
Message-ID: <d7153760911031058m4e0611b4na3eb796734a559ea@mail.gmail.com>

Hope I am not confusing you more, then!


 do you want the menu In a sidebar


If you use this code you can use a shortcode for the wpTOC plugin in a
sidebar textwidget
add_filter('widget_text', 'do_shortcode');

but you have to paste it in functions.php and be careful to paste it
between the opening
<?php
and closing
?>

My laste code snippet might have had some bad " in it.






On Tue, Nov 3, 2009 at 1:37 PM, MarvinC <marvinc at gmail.com> wrote:
>
> Don't mean to seem scattered but I came across the WP-TOC plugin which works
> in that it detects the Headings and displays a TOC based upon the [toc]
> short-code. The problem is that it only works when placed on the page. So
> image a really long page with a narrow width and a TOC box sitting in it. I
> don't see anything in the Readme that states it can be used as a widget so
> I've fired off an email to the author to confirm.
>
> I would like to have a specific page template and tried to create a new
> template file but think I may have done something wrong. Here are my steps:
> 1. Create new file: Test.php
> 2. Get errors after adding the following code to the beginning of the file:
>
> <?php /*
> Template Name:Test
> */ ?>
> <?php get_header();?>
>
> <?php include (TEMPLATEPATH . "/toc.php"); ?> or <?php include (TEMPLATEPATH
> . "/wp-toc.php"); ?>
>
> ?>
>
> Am I missing the obvious?
>
> tia
>
>
> On Tue, Nov 3, 2009 at 12:47 PM, mccormicky <mccormicky at gmail.com> wrote:
>
> > As long as the ids of the TOC are unique go ahead and place the new CSS to
> > style the TOC menu in the main WP stylesheet
> > You could make a separate stylesheet for the TOC menu but some people frown
> > on too many external stylesheets (tho' ?it is lightweight enough not to
> > matter really either way).
> >
> > As for including the TOC menu in only certain pages you could make special
> > page templates and include the TOC just like you'd include a sidebar
> >
> > <?php /*
> > Template Name:Special Page Template
> > */ ?>
> > <?php get_header();?>
> >
> > <?php include (TEMPLATEPATH . "/toc.php"); ?>
> >
> > etc
> >
> > ?>
> >
> >
> > On Tue, Nov 3, 2009 at 12:33 PM, MarvinC <marvinc at gmail.com> wrote:
> >
> > > Thanks for the reply. SHould the CSS section be added to the style sheet?
> > > I'm wondering how this would work in WP if I wanted to widgetize the TOC
> > or
> > > have the TOC to appear in a widget that only appears on select pages.
> > >
> > > On Tue, Nov 3, 2009 at 12:18 PM, Jason Benesch
> > > <jason at realestatetomato.com>wrote:
> > >
> > > > In your header.php add this menu:
> > > >
> > > > <ul id="menu">
> > > > <li><a href="#overview">Overview></a></li>
> > > > <li><a href="#history">History</a></li>
> > > > <li><a href="#middleofpage">Middle</a></li>
> > > > <li><a href="#last"> Last</a></li>
> > > > </ul>
> > > >
> > > > <style type="text/css">
> > > > #menu li { float:left; }
> > > > #menu li a { float:left; padding: 3px 8px; }
> > > > </style>
> > > >
> > > >
> > > >
> > > > Then in your index.php file, or your archive.php file, or your page.php
> > > > file
> > > > or any main body template file, add some more anchors:
> > > >
> > > > <a name="overview">This is the overview section</a>
> > > > ...... Stuff about the overview.......
> > > >
> > > > <a name="history">This is the history section</a>
> > > > ...... Stuff about the history.......
> > > >
> > > >
> > > >
> > > > <a name="last">This is the last section</a>
> > > > ...... Stuff about the last section of the page.......
> > > >
> > > > On Tue, Nov 3, 2009 at 5:49 AM, MarvinC <marvinc at gmail.com> wrote:
> > > >
> > > > > I understand this may be considered OT to the list but I'm "not
> > getting
> > > > > it".
> > > > > Is there any way to clarify how this would work in Wordpress? Would I
> > > > place
> > > > > the code in the header.php file? It looks simple but since it's a
> > first
> > > > for
> > > > > me I'm not seeing the big picture.
> > > > > Any responses appreciated.
> > > > >
> > > > > On Thu, Oct 29, 2009 at 9:56 AM, mccormicky <mccormicky at gmail.com>
> > > > wrote:
> > > > >
> > > > > > LINKS MENU:
> > > > > > <a href="#overview">Overview</a>
> > > > > > <a href="#history">History</a>
> > > > > > <a href="#middleofpage">Middle</a>
> > > > > > <a href="#last"> Last</a>
> > > > > >
> > > > > >
> > > > > > CONTENT w/ANCHOR links
> > > > > >
> > > > > > <h3 id="overview">Overview</h3>
> > > > > > <h3 id="history">History</h3>
> > > > > > <p id="middleofpage">middle paragraph</p>
> > > > > > <p id="last">End of page</p>
> > > > > >
> > > > > >
> > > > > > On Thu, Oct 29, 2009 at 10:31 AM, Simon Blackbourn <
> > > piemanek at gmail.com
> > > > > > >wrote:
> > > > > >
> > > > > > > 2009/10/29 MarvinC <marvinc at gmail.com>
> > > > > > >
> > > > > > > > My apologies in advance if this isn't a "hack request" but I'm
> > in
> > > > > need
> > > > > > of
> > > > > > > a
> > > > > > > > way to create a menu containing links that point to specific
> > > > content
> > > > > on
> > > > > > a
> > > > > > > > page. The content on most of the pages on a client site is long
> > > so
> > > > > what
> > > > > > > > they
> > > > > > > > request is the ability for the user to click to be taken to a
> > > > > specific
> > > > > > > area
> > > > > > > > of the page, like so:
> > > > > > > > Link 1: Overview
> > > > > > > > Link 2: History
> > > > > > > > Link 3: Middle of Page
> > > > > > > > Link 4: Last Paragraph of Page
> > > > > > > >
> > > > > > > >
> > > > > > > http://hackadelic.com/solutions/wordpress/toc-boxesautomatically
> > > > > > > generates
> > > > > > > a 'table of contents' for a post/page from the headers (h1, h2,
> > > etc)
> > > > in
> > > > > > the
> > > > > > > content.
> > > > > > > _______________________________________________
> > > > > > > wp-hackers mailing list
> > > > > > > wp-hackers at lists.automattic.com
> > > > > > > http://lists.automattic.com/mailman/listinfo/wp-hackers
> > > > > > >
> > > > > > _______________________________________________
> > > > > > wp-hackers mailing list
> > > > > > wp-hackers at lists.automattic.com
> > > > > > http://lists.automattic.com/mailman/listinfo/wp-hackers
> > > > > >
> > > > > _______________________________________________
> > > > > wp-hackers mailing list
> > > > > wp-hackers at lists.automattic.com
> > > > > http://lists.automattic.com/mailman/listinfo/wp-hackers
> > > > >
> > > >
> > > >
> > > >
> > > > --
> > > > Jason Benesch
> > > >
> > > > Real Estate Tomato
> > > > Co-owner
> > > > www.realestatetomato.com
> > > > (619) 770-1950
> > > > jason at realestatetomato.com
> > > >
> > > > ListingPress
> > > > Owner, Founder
> > > > www.listingpress.com
> > > > (619) 955-7465
> > > > jason at listingpress.com
> > > > _______________________________________________
> > > > wp-hackers mailing list
> > > > wp-hackers at lists.automattic.com
> > > > http://lists.automattic.com/mailman/listinfo/wp-hackers
> > > >
> > > _______________________________________________
> > > wp-hackers mailing list
> > > wp-hackers at lists.automattic.com
> > > http://lists.automattic.com/mailman/listinfo/wp-hackers
> > >
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers at lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> >
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

From jer at simianuprising.com  Tue Nov  3 19:11:51 2009
From: jer at simianuprising.com (Jeremy Clarke)
Date: Tue, 3 Nov 2009 14:11:51 -0500
Subject: [wp-hackers] Username Madness
In-Reply-To: <e4dc67e0911031035v63c07605r7a5cb8e8f565755@mail.gmail.com>
References: <349fe48b0911030624k538e1c48udccfb298bb3de1b1@mail.gmail.com>
	<3ee7077c0911030839v49247706h9ec9513385cbc1b1@mail.gmail.com>
	<349fe48b0911030906w3cd4add6nd360384b99eb932e@mail.gmail.com>
	<e4dc67e0911031035v63c07605r7a5cb8e8f565755@mail.gmail.com>
Message-ID: <e1202cb10911031111k144c7d78wf8eb453ef36f804e@mail.gmail.com>

On Tue, Nov 3, 2009 at 1:35 PM, William Canino
<william.canino at googlemail.com> wrote:
> The next superfluous is user_login, if we go rewrite our installation
> wizard and registration forms to ask and use the URL-safe nicename to
> be the user's login name for WordPress.

Yeah, that's definitely something weird. Am I the only person who
finds it very strange that WP allows capitalization in its login
names? What use is that? Should one site really be allowed to have a
login for "jeremy" and "Jeremy"?

-- 
Jeremy Clarke
Code and Design | globalvoicesonline.org

From Ken at adcSTUDIO.com  Tue Nov  3 19:50:04 2009
From: Ken at adcSTUDIO.com (Ken Newman)
Date: Tue, 03 Nov 2009 14:50:04 -0500
Subject: [wp-hackers] Username Madness
In-Reply-To: <e1202cb10911031111k144c7d78wf8eb453ef36f804e@mail.gmail.com>
References: <349fe48b0911030624k538e1c48udccfb298bb3de1b1@mail.gmail.com>	<3ee7077c0911030839v49247706h9ec9513385cbc1b1@mail.gmail.com>	<349fe48b0911030906w3cd4add6nd360384b99eb932e@mail.gmail.com>	<e4dc67e0911031035v63c07605r7a5cb8e8f565755@mail.gmail.com>
	<e1202cb10911031111k144c7d78wf8eb453ef36f804e@mail.gmail.com>
Message-ID: <4AF0896C.6010806@adcSTUDIO.com>

On 11/3/2009 2:11 PM, Jeremy Clarke wrote:
> On Tue, Nov 3, 2009 at 1:35 PM, William Canino
> <william.canino at googlemail.com>  wrote:
>    
>> The next superfluous is user_login, if we go rewrite our installation
>> wizard and registration forms to ask and use the URL-safe nicename to
>> be the user's login name for WordPress.
>>      
> Yeah, that's definitely something weird. Am I the only person who
> finds it very strange that WP allows capitalization in its login
> names? What use is that? Should one site really be allowed to have a
> login for "jeremy" and "Jeremy"?
>
>    
I like the ability to use caps, and spaces (just figured that one out by 
mistake), in user names. But I do get yer point, spoofing users' names 
becomes less noticeable, readers could mistake lower jeremy for upper 
Jeremy the admin, but I think that's a matter for admin review, not any 
changes to the wordpress core.

From mrbrog at gmail.com  Tue Nov  3 20:08:39 2009
From: mrbrog at gmail.com (Claudio Simeone)
Date: Tue, 3 Nov 2009 21:08:39 +0100
Subject: [wp-hackers] "deprecating" direct calls to wp-config.php
In-Reply-To: <E6D6C182-5D19-453E-A654-05A609ABDD5E@striderweb.com>
References: <4167AD97-4D8A-4922-83DB-23B5DBCA68B4@striderweb.com> 
	<c41cda880911030743y32be0e57ua13a11b3f9ec5de2@mail.gmail.com> 
	<161617690911030905q664ce2f7t93740c82239bb755@mail.gmail.com> 
	<E6D6C182-5D19-453E-A654-05A609ABDD5E@striderweb.com>
Message-ID: <c41cda880911031208q112b78e8n2bb888ab91cd6dea@mail.gmail.com>

Otto wrote:

>> The correct way depends on what exactly you're doing. However, there's
>> never any real reason to include wp-config or wp-load directly. Doing
>> so is.. not wrong, exactly... just a bit sloppy. It's error-prone,
>> more likely to break things.
[...]
>> For most anything else, hooking into the template_redirect function to
>> produce your custom output is the better way to go.

Stephen Rider wrote:

> A little more specifically, as of WP 2.6, wp-config.php may be one directory
> up from where you expect it, which can break things. ?Not only will you
> plugin be looking for a file that isn't there, but if a moved wp-config.php
> sets ABSPATH, ABSPATH will be *wrong*.
>
> Thus if you absolutely must call one of these directly, call wp-load.php as
> it doesn't ever move.
>
> Beyond that, Otto's advice is good. :)

Thank you all for your answers. Maybe I didn't explain well myself,
and I apologize for this :)
When I need to extend my WP, I do that in the clean way, writing
plugins, using built-in hooks and filters, the correct ajax calls, and
everything goes all right.
So my question was more related to a scenario in which I need to
"import" all WP functions, into another - external - script, that is
not directly connected with my WP installation, or it is not inside my
installation.

Let's say I have another CMS and I want to retrieve some info from the
database (making a sort of integration), for example the last 3 posts
(I know that I can get these informations via the RSS Feed, but this
is only an example), it's very easy to me to create a ph script
'last_posts.php' and make something like:

<?php
include_once('wordpress/wp-load.php'); // or wherever it is
$lastposts = get_posts('numberposts=3');
foreach($lastposts as $post) :
    setup_postdata($post);
?>
<h2><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></h2>
<?php endforeach; ?>

with this trick I can use the Loop in an external file, and very
important, I can use all WP functions, instead to reinvent the wheel
using php mysql functions and "classic" code, and writing new
functions from scratch for example to get the post permalinks.
I know that is as Otto says, sloppy, but it's my way to "use" WP
system in external scripts.
So I asked if this is a wrong way of using WP and if there is a right
way to achieve the same result.

thanks again
Claudio

From Ken at adcSTUDIO.com  Tue Nov  3 20:24:06 2009
From: Ken at adcSTUDIO.com (Ken Newman)
Date: Tue, 03 Nov 2009 15:24:06 -0500
Subject: [wp-hackers] "deprecating" direct calls to wp-config.php
In-Reply-To: <c41cda880911031208q112b78e8n2bb888ab91cd6dea@mail.gmail.com>
References: <4167AD97-4D8A-4922-83DB-23B5DBCA68B4@striderweb.com>
	<c41cda880911030743y32be0e57ua13a11b3f9ec5de2@mail.gmail.com>
	<161617690911030905q664ce2f7t93740c82239bb755@mail.gmail.com>
	<E6D6C182-5D19-453E-A654-05A609ABDD5E@striderweb.com>
	<c41cda880911031208q112b78e8n2bb888ab91cd6dea@mail.gmail.com>
Message-ID: <4AF09166.5030008@adcSTUDIO.com>

On 11/3/2009 3:08 PM, Claudio Simeone wrote:
> Thank you all for your answers. Maybe I didn't explain well myself,
> and I apologize for this :)
> When I need to extend my WP, I do that in the clean way, writing
> plugins, using built-in hooks and filters, the correct ajax calls, and
> everything goes all right.
> So my question was more related to a scenario in which I need to
> "import" all WP functions, into another - external - script, that is
> not directly connected with my WP installation, or it is not inside my
> installation.
>
> Let's say I have another CMS and I want to retrieve some info from the
> database (making a sort of integration), for example the last 3 posts
> (I know that I can get these informations via the RSS Feed, but this
> is only an example), it's very easy to me to create a ph script
> 'last_posts.php' and make something like:
>
> <?php
> include_once('wordpress/wp-load.php'); // or wherever it is
> $lastposts = get_posts('numberposts=3');
> foreach($lastposts as $post) :
>      setup_postdata($post);
> ?>
> <h2><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></h2>
> <?php endforeach; ?>
>
> with this trick I can use the Loop in an external file, and very
> important, I can use all WP functions, instead to reinvent the wheel
> using php mysql functions and "classic" code, and writing new
> functions from scratch for example to get the post permalinks.
> I know that is as Otto says, sloppy, but it's my way to "use" WP
> system in external scripts.
> So I asked if this is a wrong way of using WP and if there is a right
> way to achieve the same result.
>
> thanks again
> Claudio
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>    
For integrating php apps with WordPress, you could use what is suggested 
on bbpress.og [ 
http://bbpress.org/documentation/integration-with-wordpress/ ] which is 
|require_once('path/to/wp-blog-header.php');| in your app. Hope this helps.

From otto at ottodestruct.com  Tue Nov  3 20:24:41 2009
From: otto at ottodestruct.com (Otto)
Date: Tue, 3 Nov 2009 14:24:41 -0600
Subject: [wp-hackers] "deprecating" direct calls to wp-config.php
In-Reply-To: <c41cda880911031208q112b78e8n2bb888ab91cd6dea@mail.gmail.com>
References: <4167AD97-4D8A-4922-83DB-23B5DBCA68B4@striderweb.com> 
	<c41cda880911030743y32be0e57ua13a11b3f9ec5de2@mail.gmail.com> 
	<161617690911030905q664ce2f7t93740c82239bb755@mail.gmail.com> 
	<E6D6C182-5D19-453E-A654-05A609ABDD5E@striderweb.com>
	<c41cda880911031208q112b78e8n2bb888ab91cd6dea@mail.gmail.com>
Message-ID: <161617690911031224h65a370efn682be00b24901b9d@mail.gmail.com>

On Tue, Nov 3, 2009 at 2:08 PM, Claudio Simeone <mrbrog at gmail.com> wrote:
> So my question was more related to a scenario in which I need to
> "import" all WP functions, into another - external - script, that is
> not directly connected with my WP installation, or it is not inside my
> installation.


From donncha at linux.ie  Tue Nov  3 20:27:51 2009
From: donncha at linux.ie (Donncha O Caoimh)
Date: Tue, 03 Nov 2009 20:27:51 +0000
Subject: [wp-hackers] Handling cookies with wp-plugin and wp-supercache
In-Reply-To: <4AF01847.7040903@linux.ie>
References: <a613fec40911011024h2c2465f5xd21aa66c8ef151d5@mail.gmail.com>	<e4dc67e0911011253q65ef5d63l3cd8b9e493c48bfa@mail.gmail.com>	<a613fec40911011403r3e24fa6i51767b5b077dd15c@mail.gmail.com>	<4AEEDB3B.6060402@linux.ie>	<67dfa4090911020617u26369964q6cab549e616c5b2a@mail.gmail.com>	<e4dc67e0911020734o12f133edv54c1a9f7f19cfa62@mail.gmail.com>
	<4AF01847.7040903@linux.ie>
Message-ID: <4AF09247.5070905@linux.ie>

And here we have it. WP Super Cache for Developers: 
http://ocaoimh.ie/wp-super-cache-developers/

If you have feedback, please leave it on my blog post announcing it as 
the above link is a page with no comment form: 
http://ocaoimh.ie/wp-super-cache-developer-documentation/

Donncha

Donncha O Caoimh wrote:
> For the past few weeks I've been meaning to write a "Hacking Supercache 
> for fun and pleasure" post with tips and tricks and lists of actions and 
> filters that can be used.
> 
> Unfortunately a lack of time has stopped me writing it so far but maybe 
> this month.
> 
> If you're curious, have a read through wp-cache-phase1.php. It's a short 
> file but has some interesting stuff, and the plugins/ folder has 2 
> example plugins.
> 
> Donncha
> PS. it's not horrible, really! :P
> 
> William Canino wrote:
>> +1 on starting the Super Cache API documentation.
>>
>>>> You'll be able to add a supercache plugin in the
>>>> wp-super-cache/plugins folder that uses that hook. You should 
>>>> probably move
>>>> the plugins folder out of that directory as the next time you update 
>>>> it'll
>>>> delete your plugin.
>>
>> Sorry for my language, but this is horrible.
>>
>>> Instead of modifying wp-cache-phase1.php you can use one of the
>>> cacheactions
>>
>> Donncha is referring to wp_cache_served_cache_file. He is right.
>> Instead of my previous code suggestion, I would have suggested this:
>>
>> function cookie-setting-code() {
>>    // do stuff
>> }
>> add_cacheaction('wp_cache_served_cache_file', 'cookie-setting-code');
>>
>> The thing is, I don't know whether to put the code inline in the
>> plugin, in init, in wp_head or in functions.php.  I haven't gotten
>> around to trying this and, well, there's no documentation.
>>
>>
>>
>> 2009/11/2 Konrad Karpieszuk <kkarpieszuk at gmail.com>:
>>>>
>>>> Instead of modifying wp-cache-phase1.php you can use one of the
>>>> cacheactions. You'll be able to add a supercache plugin in the
>>>> wp-super-cache/plugins folder that uses that hook. You should 
>>>> probably move
>>>> the plugins folder out of that directory as the next time you update 
>>>> it'll
>>>> delete your plugin.
>>>>
>>>> Doing this will make it easier to upgrade the plugin.
>>>
>>> Donncha, could you describe it (maybe create some small tutorial) 
>>> somewhere
>>> how to do this? I think this will help for numerous wordpress plugins
>>> develeopers :) Your plugin (wp super cache) is really popular and in
>>> internet many times i saw questions from plugins developers that their
>>> plugins doesn't work if wp super cache is installed. Most of them 
>>> finally
>>> decide to write in FAQ to disable wp super cache (truelly i did it 
>>> also).
>>> But this is not good solutions, especially if your plugin is ready to 
>>> handle
>>> this problem. Not everybody read source code of your plugin to find 
>>> solution
>>> and today i first time see that it is possible to set and read cookie 
>>> with
>>> wp super cache enabled :)
>>>
>>> If you will decide to write this (even shortly) i promise to help you in
>>> translating it into polish language.
>>>
>>>
>>> -- 
>>> (en) regards / (pl) pozdrawiam
>>> Konrad Karpieszuk
>>> http://konradjestwrwandzie.wordpress.com/
>>> _______________________________________________
>>> wp-hackers mailing list
>>> wp-hackers at lists.automattic.com
>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>>
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
>>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
> 
> 

From mrbrog at gmail.com  Tue Nov  3 20:29:50 2009
From: mrbrog at gmail.com (Claudio Simeone)
Date: Tue, 3 Nov 2009 21:29:50 +0100
Subject: [wp-hackers] "deprecating" direct calls to wp-config.php
In-Reply-To: <161617690911031224h65a370efn682be00b24901b9d@mail.gmail.com>
References: <4167AD97-4D8A-4922-83DB-23B5DBCA68B4@striderweb.com> 
	<c41cda880911030743y32be0e57ua13a11b3f9ec5de2@mail.gmail.com> 
	<161617690911030905q664ce2f7t93740c82239bb755@mail.gmail.com> 
	<E6D6C182-5D19-453E-A654-05A609ABDD5E@striderweb.com>
	<c41cda880911031208q112b78e8n2bb888ab91cd6dea@mail.gmail.com> 
	<161617690911031224h65a370efn682be00b24901b9d@mail.gmail.com>
Message-ID: <c41cda880911031229t488a210exb1e5494ac5a79d11@mail.gmail.com>

2009/11/3 Otto <otto at ottodestruct.com>:

> On Tue, Nov 3, 2009 at 2:08 PM, Claudio Simeone <mrbrog at gmail.com> wrote:
>> So my question was more related to a scenario in which I need to
>> "import" all WP functions, into another - external - script, that is
>> not directly connected with my WP installation, or it is not inside my
>> installation.
>
> From anything outside to WordPress itself, you should probably include
> the wp-blog-header.php file. You can include wp-load.php, and it'll be
> slightly faster, but not all the query stuff will get initialized
> because wp() won't get called.

Ken and Otto, thank you VERY much, especially for explaining the
difference between wp-load.php and wp-blog-header.php!

Claudio

From otto at ottodestruct.com  Tue Nov  3 20:36:42 2009
From: otto at ottodestruct.com (Otto)
Date: Tue, 3 Nov 2009 14:36:42 -0600
Subject: [wp-hackers] Username Madness
In-Reply-To: <349fe48b0911031011q6c9ca9cfu6638b526c426500f@mail.gmail.com>
References: <349fe48b0911030624k538e1c48udccfb298bb3de1b1@mail.gmail.com> 
	<3ee7077c0911030839v49247706h9ec9513385cbc1b1@mail.gmail.com> 
	<349fe48b0911030906w3cd4add6nd360384b99eb932e@mail.gmail.com> 
	<161617690911030917v6c8d20as4e73aa0bb4515a5c@mail.gmail.com> 
	<349fe48b0911031011q6c9ca9cfu6638b526c426500f@mail.gmail.com>
Message-ID: <161617690911031236m4b6f98ew987589c2caaab9c3@mail.gmail.com>

On Tue, Nov 3, 2009 at 12:11 PM, scribu <scribu at gmail.com> wrote:
> Indeed: If you choose to completely ignore the user interface, you can use
> display_name as yet another nickname.

No... you can choose to use it as the name that gets displayed. This
has nothing to do with "Nickname" whatsoever.

- My Nickname is a piece of information about me.
- My display_name is the name I want to be displayed.

These are not the same thing at all. They're not even close.

> But then, why not just use wp_usermeta to set as many nicknames as you want?

If I were to have more than one nickname, then yes, I'd put them all
in usermeta. The name of the table kinda gives it away, it's the place
where you put "meta" information about the "user".

I've been considering a custom avatar system, and I'd put them in
usermeta too (probably under "avatar"). If I was to make a field
called "phone number", then it'd probably go in usermeta too.

> Then you could hook into 'the_author' and return one of them, instead of
> display_name.

Well, that wouldn't make any sense. There's already a field to be
displayed for a user's name. Oddly enough, it's called "display_name".

Meta = information about information. User-meta is information about
the "user" that is defined as a row in the users table.

Let's try it this way: Information about a user that is needed often
(login name, email, display_name, etc) goes in the user table.
Information about a user that is not needed often (first/last names,
nickname, etc) goes in the usermeta table. If you prefer to think of
it as merely an optimization, then you'd be wrong, but if that helps
you cope with it, fine.

-Otto
Sent from Memphis, TN, United States

From xrdawson at gmail.com  Wed Nov  4 02:58:11 2009
From: xrdawson at gmail.com (Chris Dawson)
Date: Tue, 3 Nov 2009 18:58:11 -0800
Subject: [wp-hackers] making new post using cURL
Message-ID: <659b9ea30911031858s456bde30y202805e48b6c12f2@mail.gmail.com>

I'm trying to make a new post into Wordpress using the command line cURL
tool.  I've looked at the source of the post-new.php page to see the
variables listed and have sniffed the request when I make a post in Firefox
using Firebug.  However, there are a bunch of parameters and I cannot figure
out which are required and which are not, and I'd like to make my request as
slim as possible.  Does anyone have a working example of how to do this, or
know which parameters are required in the request?  I'm also confused if the
_wpnonce is necessary.

This is what I have so far, which successfully logs in and stores the auth
cookie, but the rest of the request fails.

#!/bin/sh


url="http://mywordpressurl.com"
login_url="$url/wp-login.php"
new_post_url='$url/wp-admin/post-new.php'
name="foobar"
pwd='barfoo'
button='wp-submit'
cookies="cookies.txt"


create_post () {
    curl -s -L -c $cookies -d "pwd=$pwd" -d "log=$name" -d
"wp-submit=Log%20In" "$login_url"
    curl -s -b $cookies -d "post_type=post" -d 'post_title=Hey there' -d
'content=Yeah, this is a new post' "$new_post_url"
}

create_post


-- 
Chris Dawson
971-533-8335

From gaarai at gaarai.com  Wed Nov  4 03:49:49 2009
From: gaarai at gaarai.com (Chris Jean)
Date: Tue, 03 Nov 2009 21:49:49 -0600
Subject: [wp-hackers] making new post using cURL
In-Reply-To: <659b9ea30911031858s456bde30y202805e48b6c12f2@mail.gmail.com>
References: <659b9ea30911031858s456bde30y202805e48b6c12f2@mail.gmail.com>
Message-ID: <4AF0F9DD.7050905@gaarai.com>

I don't believe that it is possible to do what you want in the method 
that you are attempting. The nonces will defeat you, and if they don't 
immediately, they will render your script useless within a short period 
of time. In addition, this is just working too hard to do something that 
already has a simple to use interface.

You should look in the XMLRPC functionality of sending data to 
WordPress. There's a good rundown of this method at the following link:

http://www.nickycakes.com/post-to-wordpress-remotely-with-xmlrpc-in-php/

You could easily wrap this into a small PHP script that you could call 
from the command line.

Chris Jean
http://gaarai.com/
http://wp-roadmap.com/



Chris Dawson wrote:
> I'm trying to make a new post into Wordpress using the command line cURL
> tool.  I've looked at the source of the post-new.php page to see the
> variables listed and have sniffed the request when I make a post in Firefox
> using Firebug.  However, there are a bunch of parameters and I cannot figure
> out which are required and which are not, and I'd like to make my request as
> slim as possible.  Does anyone have a working example of how to do this, or
> know which parameters are required in the request?  I'm also confused if the
> _wpnonce is necessary.
>
> This is what I have so far, which successfully logs in and stores the auth
> cookie, but the rest of the request fails.
>
> #!/bin/sh
>
>
> url="http://mywordpressurl.com"
> login_url="$url/wp-login.php"
> new_post_url='$url/wp-admin/post-new.php'
> name="foobar"
> pwd='barfoo'
> button='wp-submit'
> cookies="cookies.txt"
>
>
> create_post () {
>     curl -s -L -c $cookies -d "pwd=$pwd" -d "log=$name" -d
> "wp-submit=Log%20In" "$login_url"
>     curl -s -b $cookies -d "post_type=post" -d 'post_title=Hey there' -d
> 'content=Yeah, this is a new post' "$new_post_url"
> }
>
> create_post
>
>
>   

From pete at jointforcestech.com  Wed Nov  4 06:27:20 2009
From: pete at jointforcestech.com (Pete Mall)
Date: Tue, 3 Nov 2009 22:27:20 -0800
Subject: [wp-hackers] WordCamp NYC Plugin Competition
Message-ID: <7f49e8010911032227x274332e8i82b1cd4e477a22dc@mail.gmail.com>

Looking for a NY metro area based WordPress developer to team up with to
enter the WordCamp NYC plugin competition. Any takers?

Cheers!
Pete

From xrdawson at gmail.com  Wed Nov  4 08:19:52 2009
From: xrdawson at gmail.com (Chris Dawson)
Date: Wed, 4 Nov 2009 00:19:52 -0800
Subject: [wp-hackers] making new post using cURL
In-Reply-To: <659b9ea30911031858s456bde30y202805e48b6c12f2@mail.gmail.com>
References: <659b9ea30911031858s456bde30y202805e48b6c12f2@mail.gmail.com>
Message-ID: <659b9ea30911040019l37ec6d7cg29f2d1991acfb3e0@mail.gmail.com>

Chris,

Thanks for the response.

I have looked at and successfully made a post using the XML-RPC feature of
Wordpress.  However, the reason this did not work for me is that I need to
add a parameter to the post for a plugin (specifically the Blubrry
Powerpress plugin).  I don't believe there is a way to add data for use by a
plugin using the XML-RPC call, right?  I tried adding the parameter I
needed, and it did not work, so I assume the XML-RPC call has a limited set
of parameters it will accept.

I've looked at this from various ways, implementing a hook inside my own
plugin to do something when a new post is created using add_filter, etc.
The problem is that the Powerpress plugin is pretty hairy and I have no
clear idea after looking through the source what the process is to create an
enclosure and which functions to call.  The easiest thing, in my mind, was
to make a post using cURL with this parameter passed in
"Powerpress[podcast][url]=someUrlToAnMp3".  That is what the Wordpress page
looks for and the Powerpress plugin does the right thing when something is
posted in that format.

I'm not opposed to doing it another way, but this is my dilemma.  Any ideas?

Thanks,
Chris


> I don't believe that it is possible to do what you want in the method
> that you are attempting. The nonces will defeat you, and if they don't
> immediately, they will render your script useless within a short period
>
> of time. In addition, this is just working too hard to do something that
> already has a simple to use interface.
>
> You should look in the XMLRPC functionality of sending data to
> WordPress. There's a good rundown of this method at the following link:
>
> http://www.nickycakes.com/post-to-wordpress-remotely-with-xmlrpc-in-php/
>
> You could easily wrap this into a small PHP script that you could call
>
> from the command line.
>
> Chris Jean
> http://gaarai.com/
> http://wp-roadmap.com/
>
>

On Tue, Nov 3, 2009 at 6:58 PM, Chris Dawson <xrdawson at gmail.com> wrote:

> I'm trying to make a new post into Wordpress using the command line cURL
> tool.  I've looked at the source of the post-new.php page to see the
> variables listed and have sniffed the request when I make a post in Firefox
> using Firebug.  However, there are a bunch of parameters and I cannot figure
> out which are required and which are not, and I'd like to make my request as
> slim as possible.  Does anyone have a working example of how to do this, or
> know which parameters are required in the request?  I'm also confused if the
> _wpnonce is necessary.
>
> This is what I have so far, which successfully logs in and stores the auth
> cookie, but the rest of the request fails.
>
> #!/bin/sh
>
>
> url="http://mywordpressurl.com"
> login_url="$url/wp-login.php"
> new_post_url='$url/wp-admin/post-new.php'
> name="foobar"
> pwd='barfoo'
> button='wp-submit'
> cookies="cookies.txt"
>
>
> create_post () {
>     curl -s -L -c $cookies -d "pwd=$pwd" -d "log=$name" -d
> "wp-submit=Log%20In" "$login_url"
>     curl -s -b $cookies -d "post_type=post" -d 'post_title=Hey there' -d
> 'content=Yeah, this is a new post' "$new_post_url"
> }
>
> create_post
>
>
> --
> Chris Dawson
> 971-533-8335
>
>


-- 
Chris Dawson
971-533-8335

From wordpress at dd32.id.au  Wed Nov  4 08:31:55 2009
From: wordpress at dd32.id.au (Dion Hulse (dd32))
Date: Wed, 04 Nov 2009 19:31:55 +1100
Subject: [wp-hackers] making new post using cURL
In-Reply-To: <659b9ea30911040019l37ec6d7cg29f2d1991acfb3e0@mail.gmail.com>
References: <659b9ea30911031858s456bde30y202805e48b6c12f2@mail.gmail.com>
	<659b9ea30911040019l37ec6d7cg29f2d1991acfb3e0@mail.gmail.com>
Message-ID: <op.u2u3bewjspxmuu@dd32>

My solution to this would be to use a PHP-CLI script..

php-cli /path/to/script.php

<?php
include 'PATH/TO/WP/wp-blog-header.php';

wp_insert_post( array( blahb blah blah) );

//Call some plugin function here to add needed data

?>

You're wasting your time scripting it by HTTP, just run the PHP directly  
and set anything that needs setting. The PHP way is going to work in the  
future when WP changes the admin pages and/or the plugin changes is UI.

On Wed, 04 Nov 2009 19:19:52 +1100, Chris Dawson <xrdawson at gmail.com>  
wrote:

> Chris,
>
> Thanks for the response.
>
> I have looked at and successfully made a post using the XML-RPC feature  
> of
> Wordpress.  However, the reason this did not work for me is that I need  
> to
> add a parameter to the post for a plugin (specifically the Blubrry
> Powerpress plugin).  I don't believe there is a way to add data for use  
> by a
> plugin using the XML-RPC call, right?  I tried adding the parameter I
> needed, and it did not work, so I assume the XML-RPC call has a limited  
> set
> of parameters it will accept.
>
> I've looked at this from various ways, implementing a hook inside my own
> plugin to do something when a new post is created using add_filter, etc.
> The problem is that the Powerpress plugin is pretty hairy and I have no
> clear idea after looking through the source what the process is to  
> create an
> enclosure and which functions to call.  The easiest thing, in my mind,  
> was
> to make a post using cURL with this parameter passed in
> "Powerpress[podcast][url]=someUrlToAnMp3".  That is what the Wordpress  
> page
> looks for and the Powerpress plugin does the right thing when something  
> is
> posted in that format.
>
> I'm not opposed to doing it another way, but this is my dilemma.  Any  
> ideas?
>
> Thanks,
> Chris
>
>
>> I don't believe that it is possible to do what you want in the method
>> that you are attempting. The nonces will defeat you, and if they don't
>> immediately, they will render your script useless within a short period
>>
>> of time. In addition, this is just working too hard to do something that
>> already has a simple to use interface.
>>
>> You should look in the XMLRPC functionality of sending data to
>> WordPress. There's a good rundown of this method at the following link:
>>
>> http://www.nickycakes.com/post-to-wordpress-remotely-with-xmlrpc-in-php/
>>
>> You could easily wrap this into a small PHP script that you could call
>>
>> from the command line.
>>
>> Chris Jean
>> http://gaarai.com/
>> http://wp-roadmap.com/
>>
>>
>
> On Tue, Nov 3, 2009 at 6:58 PM, Chris Dawson <xrdawson at gmail.com> wrote:
>
>> I'm trying to make a new post into Wordpress using the command line cURL
>> tool.  I've looked at the source of the post-new.php page to see the
>> variables listed and have sniffed the request when I make a post in  
>> Firefox
>> using Firebug.  However, there are a bunch of parameters and I cannot  
>> figure
>> out which are required and which are not, and I'd like to make my  
>> request as
>> slim as possible.  Does anyone have a working example of how to do  
>> this, or
>> know which parameters are required in the request?  I'm also confused  
>> if the
>> _wpnonce is necessary.
>>
>> This is what I have so far, which successfully logs in and stores the  
>> auth
>> cookie, but the rest of the request fails.
>>
>> #!/bin/sh
>>
>>
>> url="http://mywordpressurl.com"
>> login_url="$url/wp-login.php"
>> new_post_url='$url/wp-admin/post-new.php'
>> name="foobar"
>> pwd='barfoo'
>> button='wp-submit'
>> cookies="cookies.txt"
>>
>>
>> create_post () {
>>     curl -s -L -c $cookies -d "pwd=$pwd" -d "log=$name" -d
>> "wp-submit=Log%20In" "$login_url"
>>     curl -s -b $cookies -d "post_type=post" -d 'post_title=Hey there' -d
>> 'content=Yeah, this is a new post' "$new_post_url"
>> }
>>
>> create_post
>>
>>
>> --
>> Chris Dawson
>> 971-533-8335
>>
>>
>
>


-- 
Using Opera's revolutionary e-mail client: http://www.opera.com/mail/

From frank at bueltge.de  Wed Nov  4 09:53:35 2009
From: frank at bueltge.de (Frank Bueltge)
Date: Wed, 4 Nov 2009 10:53:35 +0100
Subject: [wp-hackers] Delete Plugin on SVN please
Message-ID: <db047a770911040153k102d8960nadab3a9de8950141@mail.gmail.com>

I hope this is the right adress here.
Please, delete the svn-folder for the plugin
http://wordpress.org/extend/plugins/phpmyvisites/
I will not supportet this and now its give newer and better solutions.

Thanks and best regards
Frank

http://bueltge.de : frank at bueltge.de
http://wpengineer.com : frank at wpengineer.com

From wordpress at dd32.id.au  Wed Nov  4 10:19:38 2009
From: wordpress at dd32.id.au (Dion Hulse (dd32))
Date: Wed, 04 Nov 2009 21:19:38 +1100
Subject: [wp-hackers] Delete Plugin on SVN please
In-Reply-To: <db047a770911040153k102d8960nadab3a9de8950141@mail.gmail.com>
References: <db047a770911040153k102d8960nadab3a9de8950141@mail.gmail.com>
Message-ID: <op.u2u8a0ctspxmuu@dd32>

The correct way to handle this would be to mearly post an update to the  
readme along the lines of "Please note, Support for this plugin ended  
xx-xx-xxxx. Development has ceased, If someone would like to take over,  
Contact xxxxxx"..

Removing the plugin all together isnt exactly in the open source model,  
Its already out here, So just let it rot, You dont hide/remove all traces  
of non-supported items..

On Wed, 04 Nov 2009 20:53:35 +1100, Frank Bueltge <frank at bueltge.de> wrote:

> I hope this is the right adress here.
> Please, delete the svn-folder for the plugin
> http://wordpress.org/extend/plugins/phpmyvisites/
> I will not supportet this and now its give newer and better solutions.
>
> Thanks and best regards
> Frank
>
> http://bueltge.de : frank at bueltge.de
> http://wpengineer.com : frank at wpengineer.com
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>


-- 
Using Opera's revolutionary e-mail client: http://www.opera.com/mail/

From frank at bueltge.de  Wed Nov  4 10:56:33 2009
From: frank at bueltge.de (Frank Bueltge)
Date: Wed, 4 Nov 2009 11:56:33 +0100
Subject: [wp-hackers] Delete Plugin on SVN please
In-Reply-To: <op.u2u8a0ctspxmuu@dd32>
References: <db047a770911040153k102d8960nadab3a9de8950141@mail.gmail.com> 
	<op.u2u8a0ctspxmuu@dd32>
Message-ID: <db047a770911040256s7450354i56d79ed6b54d822@mail.gmail.com>

Yes, i have change the readme and copy the files in the folder tags
for other people to use this.
I think it is very hard for user to find a plugin for an keyword. I
will not develop this plugin for next time.



On Wed, Nov 4, 2009 at 11:19 AM, Dion Hulse (dd32) <wordpress at dd32.id.au> wrote:
> The correct way to handle this would be to mearly post an update to the
> readme along the lines of "Please note, Support for this plugin ended
> xx-xx-xxxx. Development has ceased, If someone would like to take over,
> Contact xxxxxx"..
>
> Removing the plugin all together isnt exactly in the open source model, Its
> already out here, So just let it rot, You dont hide/remove all traces of
> non-supported items..
>
> On Wed, 04 Nov 2009 20:53:35 +1100, Frank Bueltge <frank at bueltge.de> wrote:
>
>> I hope this is the right adress here.
>> Please, delete the svn-folder for the plugin
>> http://wordpress.org/extend/plugins/phpmyvisites/
>> I will not supportet this and now its give newer and better solutions.
>>
>> Thanks and best regards
>> Frank
>>
>> http://bueltge.de : frank at bueltge.de
>> http://wpengineer.com : frank at wpengineer.com
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
>
>
> --
> Using Opera's revolutionary e-mail client: http://www.opera.com/mail/
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From nb at nikolay.bg  Wed Nov  4 11:53:36 2009
From: nb at nikolay.bg (Nikolay Bachiyski)
Date: Wed, 4 Nov 2009 13:53:36 +0200
Subject: [wp-hackers] Username Madness
In-Reply-To: <349fe48b0911030624k538e1c48udccfb298bb3de1b1@mail.gmail.com>
References: <349fe48b0911030624k538e1c48udccfb298bb3de1b1@mail.gmail.com>
Message-ID: <87e663fa0911040353n78de080ax8299c27cbff10246@mail.gmail.com>

On Tue, Nov 3, 2009 at 16:24, scribu <scribu at gmail.com> wrote:
> Currently, in the wp_users table, there are 3 fields for the user name:
>
> user_login
> user_nicename
> display_name
>
> Besides those, we have two fields in wp_usermeta:
>
> first_name
> last_name
>
>
> Instead of retaining a value, display_name should only remember the user
> preference:
>
> 1 - user_login
> 2 - user_nicename
> 3 - first_name + last_name
>
> with 2 as the default value.
>
>
> Any thoughts?
>

We should have only one editable field: display_name and get rid of
nickname and first/last name.

There are two many languages, in which the name pair doesn't make any
sense. Also, one field is better than three.

Happy hacking,
Nikolay.

From martijn at crystal-labs.nl  Wed Nov  4 14:20:58 2009
From: martijn at crystal-labs.nl (Martijn Engler)
Date: Wed, 4 Nov 2009 15:20:58 +0100
Subject: [wp-hackers] Username Madness
In-Reply-To: <87e663fa0911040353n78de080ax8299c27cbff10246@mail.gmail.com>
References: <349fe48b0911030624k538e1c48udccfb298bb3de1b1@mail.gmail.com> 
	<87e663fa0911040353n78de080ax8299c27cbff10246@mail.gmail.com>
Message-ID: <467de7260911040620m76431fc8ydbc2f894798a097e@mail.gmail.com>

> We should have only one editable field: display_name and get rid of
> nickname and first/last name.
>
Erh, no. I was looking for a separate first_name / last_name yesterday
(forgot it was in user_meta), because we want to sort on last name on
a certain page. That wouldn't be possible if they were together in one
field.

From scribu at gmail.com  Wed Nov  4 14:40:48 2009
From: scribu at gmail.com (scribu)
Date: Wed, 4 Nov 2009 16:40:48 +0200
Subject: [wp-hackers] Username Madness
In-Reply-To: <467de7260911040620m76431fc8ydbc2f894798a097e@mail.gmail.com>
References: <349fe48b0911030624k538e1c48udccfb298bb3de1b1@mail.gmail.com>
	<87e663fa0911040353n78de080ax8299c27cbff10246@mail.gmail.com>
	<467de7260911040620m76431fc8ydbc2f894798a097e@mail.gmail.com>
Message-ID: <349fe48b0911040640y64b02819n6ca0475c8f6d2ed9@mail.gmail.com>

On Wed, Nov 4, 2009 at 4:20 PM, Martijn Engler <martijn at crystal-labs.nl>wrote:

> > We should have only one editable field: display_name and get rid of
> > nickname and first/last name.
> >
> Erh, no. I was looking for a separate first_name / last_name yesterday
> (forgot it was in user_meta), because we want to sort on last name on
> a certain page. That wouldn't be possible if they were together in one
> field.
>

Since it's in user_meta, you could easily add those fields back through a
plugin.

What Nikolai was suggesting is that first_name & last_name should not be in
Core, since they aren't usually helpful.

Also, this would considerably simplify the user admin interface.


-- 
http://scribu.net

From patrik.bona at mrhead.sk  Wed Nov  4 15:44:22 2009
From: patrik.bona at mrhead.sk (=?ISO-8859-1?Q?Patrik_B=F3na?=)
Date: Wed, 04 Nov 2009 16:44:22 +0100
Subject: [wp-hackers] Blank screen during WP installation
Message-ID: <4AF1A156.1060306@mrhead.sk>

Hi All,

Recently I was working on interesting problem. Wordpress installation 
was failing when it was trying connect to the database. Problem was that 
there was no error just blank screen.

I've tried to turn on error_reporting, but it did not help, so i started 
to trace executed PHP files...  After some time i've found that nothing 
is executed after following line in wp-includes/wp-db.php:

$this->dbh = @mysql_connect($dbhost, $dbuser, $dbpassword, true);

So i've just removed @ and refreshed page and there was this error message:

Fatal error: mysql_connect() [<a 
href='function.mysql-connect'>function.mysql-connect</a>]: Using mysql 
has been disabled by admin. in 
/domains1/do1840700/public/www_root/wp-includes/wp-db.php on line 341

So obviously problem was that mysql_connect was disabled (bad hosting), 
no discussion here... ;)

But from my point of view this can be much bigger problem for people who 
just want to try wordpress (on bad hosting) and after some clicks just 
blank page is showed to them... Google also did not help me, so i don't 
think that it can help to people who can not find problem themselves.

I know that mysql is prerequisite for WP, but why to not help people 
with this.

Maybe solution which just came to my mind will be to check with 
function_exists if mysql_connect is enabled somewhere during 
installation process. What do you think ?

Best regards

Patrik

From mccormicky at gmail.com  Wed Nov  4 15:56:14 2009
From: mccormicky at gmail.com (mccormicky)
Date: Wed, 4 Nov 2009 10:56:14 -0500
Subject: [wp-hackers] Blank screen during WP installation
In-Reply-To: <4AF1A156.1060306@mrhead.sk>
References: <4AF1A156.1060306@mrhead.sk>
Message-ID: <d7153760911040756o619fb45epdcf2d54ed2019b3d@mail.gmail.com>

Can I just ask what information did you enter when the installation page
asked you for a db name, user and host?
Does your host allow you to create databases---just not use them?
Seems to me if a potential user can't use mysql
 (if they can't have mysql chances are they can't have php,either)
and the requirements of WP are PHP+mysql
what you are proposing is  unnecessary....
The first thing you do before installing software is check to see if you
have the correct environment or system to support it.




On Wed, Nov 4, 2009 at 10:44 AM, Patrik B?na <patrik.bona at mrhead.sk> wrote:

> Hi All,
>
> Recently I was working on interesting problem. Wordpress installation was
> failing when it was trying connect to the database. Problem was that there
> was no error just blank screen.
>
> I've tried to turn on error_reporting, but it did not help, so i started to
> trace executed PHP files...  After some time i've found that nothing is
> executed after following line in wp-includes/wp-db.php:
>
> $this->dbh = @mysql_connect($dbhost, $dbuser, $dbpassword, true);
>
> So i've just removed @ and refreshed page and there was this error message:
>
> Fatal error: mysql_connect() [<a
> href='function.mysql-connect'>function.mysql-connect</a>]: Using mysql has
> been disabled by admin. in
> /domains1/do1840700/public/www_root/wp-includes/wp-db.php on line 341
>
> So obviously problem was that mysql_connect was disabled (bad hosting), no
> discussion here... ;)
>
> But from my point of view this can be much bigger problem for people who
> just want to try wordpress (on bad hosting) and after some clicks just blank
> page is showed to them... Google also did not help me, so i don't think that
> it can help to people who can not find problem themselves.
>
> I know that mysql is prerequisite for WP, but why to not help people with
> this.
>
> Maybe solution which just came to my mind will be to check with
> function_exists if mysql_connect is enabled somewhere during installation
> process. What do you think ?
>
> Best regards
>
> Patrik
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From wp at xentek.net  Wed Nov  4 18:24:03 2009
From: wp at xentek.net (Eric Marden)
Date: Wed, 4 Nov 2009 13:24:03 -0500
Subject: [wp-hackers] making new post using cURL
In-Reply-To: <659b9ea30911040019l37ec6d7cg29f2d1991acfb3e0@mail.gmail.com>
References: <659b9ea30911031858s456bde30y202805e48b6c12f2@mail.gmail.com>
	<659b9ea30911040019l37ec6d7cg29f2d1991acfb3e0@mail.gmail.com>
Message-ID: <A3796C68-03E0-4FC7-9A10-1DDAC0BCAB51@xentek.net>

On Nov 4, 2009, at 3:19 AM, Chris Dawson wrote:

> "Powerpress[podcast][url]=someUrlToAnMp3"


Hooking in at init and adding data to the $_POST array may work,  
provided you know the URL to the MP3.


- Eric Marden
__________________________________
http://xentek.net/code/wordpress/






From Ken at adcSTUDIO.com  Wed Nov  4 19:57:59 2009
From: Ken at adcSTUDIO.com (Ken Newman)
Date: Wed, 04 Nov 2009 14:57:59 -0500
Subject: [wp-hackers] Delete Plugin on SVN please
In-Reply-To: <db047a770911040256s7450354i56d79ed6b54d822@mail.gmail.com>
References: <db047a770911040153k102d8960nadab3a9de8950141@mail.gmail.com>
	<op.u2u8a0ctspxmuu@dd32>
	<db047a770911040256s7450354i56d79ed6b54d822@mail.gmail.com>
Message-ID: <4AF1DCC7.2050308@adcSTUDIO.com>

On 11/4/2009 5:56 AM, Frank Bueltge wrote:
> Yes, i have change the readme and copy the files in the folder tags
> for other people to use this.
> I think it is very hard for user to find a plugin for an keyword. I
> will not develop this plugin for next time.
>
>    
I think this brings up a good point about the state of the repositories. 
Deleting

"...the plugin all together isnt exactly in the open source model"

but I do think that all the abandoned and junk plugins are reducing the 
usability of the repositories. Perhaps we can clean it up with a new 
tag/filtering system? For example, anything explicitly abandoned can be 
marked and filtered out of most searches, but available for developers 
who may be interested in resurrection a particular project.

Also, we could filter out plugins and themes that are out-of-date, say 
compatible only up to 2.7 or whatever. The plus is it would encourage 
plugin devs to keep up with the latest version of WP; similarly, the 
minus is it would encourage other devs to just update the tag and not 
bother actually testing it, therefor by-passing the filter. I believe 
there are less of the latter than the former, but some consideration is 
probably due there.

Tangently related is security review of submitted plugins. Should there 
be some minimal cursory inspection of plugins to prevent malicious code 
being added to the repos? I don't know how the submission process works, 
so sorry if this is already done by someone, but if not, should someone 
be doing this? I certainly don't have enough info on this subject but 
would like to know more about its implications/considerations.


From mark at watero.us  Wed Nov  4 21:01:31 2009
From: mark at watero.us (mark waterous)
Date: Wed, 4 Nov 2009 13:01:31 -0800
Subject: [wp-hackers] Delete Plugin on SVN please
In-Reply-To: <4AF1DCC7.2050308@adcSTUDIO.com>
References: <db047a770911040153k102d8960nadab3a9de8950141@mail.gmail.com>	<op.u2u8a0ctspxmuu@dd32>	<db047a770911040256s7450354i56d79ed6b54d822@mail.gmail.com>
	<4AF1DCC7.2050308@adcSTUDIO.com>
Message-ID: <006c01ca5d91$fd2f3150$f78d93f0$@us>

> Perhaps we can clean it up with a new
> tag/filtering system? For example, anything explicitly abandoned can be
> marked and filtered out of most searches, but available for developers
> who may be interested in resurrection a particular project.

+1 for that. There's a lot of hidden gems in there, but at present tracking
down specifics can be a time consuming process. Placing some extra
responsibility on the developer to maintain their plugin or mark it
abandoned would be a good start - perhaps adding an advanced search
capability would help the end user though? Just a few options where you
could filter out plugins by their compatibility, last date updated, etc.

Plugins that haven't been updated since 2007 probably shouldn't be coming
back very high on the search results.
-Mark


From glenn at glennansley.com  Wed Nov  4 21:04:08 2009
From: glenn at glennansley.com (Glenn Ansley)
Date: Wed, 4 Nov 2009 16:04:08 -0500
Subject: [wp-hackers] Delete Plugin on SVN please
In-Reply-To: <006c01ca5d91$fd2f3150$f78d93f0$@us>
References: <db047a770911040153k102d8960nadab3a9de8950141@mail.gmail.com>
	<op.u2u8a0ctspxmuu@dd32>
	<db047a770911040256s7450354i56d79ed6b54d822@mail.gmail.com>
	<4AF1DCC7.2050308@adcSTUDIO.com> <006c01ca5d91$fd2f3150$f78d93f0$@us>
Message-ID: <7474be390911041304v4f266e82haa5d1b348a8bba87@mail.gmail.com>

I'd love to be able to flag a couple of mine for deletion or as
'inactive' or 'no longer supported'... like one that was misspelled
and never had any files committed to it.

Glenn Ansley
http://twitter.com/glennansley
http://fullthrottledevelopment.com

On Wed, Nov 4, 2009 at 4:01 PM, mark waterous <mark at watero.us> wrote:
>> Perhaps we can clean it up with a new
>> tag/filtering system? For example, anything explicitly abandoned can be
>> marked and filtered out of most searches, but available for developers
>> who may be interested in resurrection a particular project.
>
> +1 for that. There's a lot of hidden gems in there, but at present tracking
> down specifics can be a time consuming process. Placing some extra
> responsibility on the developer to maintain their plugin or mark it
> abandoned would be a good start - perhaps adding an advanced search
> capability would help the end user though? Just a few options where you
> could filter out plugins by their compatibility, last date updated, etc.
>
> Plugins that haven't been updated since 2007 probably shouldn't be coming
> back very high on the search results.
> -Mark
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From peter.westwood at ftwr.co.uk  Wed Nov  4 21:10:46 2009
From: peter.westwood at ftwr.co.uk (Peter Westwood)
Date: Wed, 4 Nov 2009 21:10:46 +0000
Subject: [wp-hackers] Delete Plugin on SVN please
In-Reply-To: <006c01ca5d91$fd2f3150$f78d93f0$@us>
References: <db047a770911040153k102d8960nadab3a9de8950141@mail.gmail.com>	<op.u2u8a0ctspxmuu@dd32>	<db047a770911040256s7450354i56d79ed6b54d822@mail.gmail.com>
	<4AF1DCC7.2050308@adcSTUDIO.com>
	<006c01ca5d91$fd2f3150$f78d93f0$@us>
Message-ID: <C1A2A5AC-738D-4C6C-815B-9C375C55865B@ftwr.co.uk>


On 4 Nov 2009, at 21:01, mark waterous wrote:

>> Perhaps we can clean it up with a new
>> tag/filtering system? For example, anything explicitly abandoned  
>> can be
>> marked and filtered out of most searches, but available for  
>> developers
>> who may be interested in resurrection a particular project.
>
> +1 for that. There's a lot of hidden gems in there, but at present  
> tracking
> down specifics can be a time consuming process. Placing some extra
> responsibility on the developer to maintain their plugin or mark it
> abandoned would be a good start - perhaps adding an advanced search
> capability would help the end user though? Just a few options where  
> you
> could filter out plugins by their compatibility, last date updated,  
> etc.
>

If you want a plugin removed completely try emailing the support email  
address plugins at wp.org

> Plugins that haven't been updated since 2007 probably shouldn't be  
> coming
> back very high on the search results.
>

Just because a plugin has not been updated since 2007 does not  
necessarily mean that plugin doesn't work.

In fact it is quite possible if the plugin was well coded and used the  
apis available correctly that it still works.

westi
-- 
Peter Westwood
http://blog.ftwr.co.uk | http://westi.wordpress.com
C53C F8FC 8796 8508 88D6 C950 54F4 5DCD A834 01C5


From Ken at adcSTUDIO.com  Wed Nov  4 21:19:07 2009
From: Ken at adcSTUDIO.com (Ken Newman)
Date: Wed, 04 Nov 2009 16:19:07 -0500
Subject: [wp-hackers] Delete Plugin on SVN please
In-Reply-To: <C1A2A5AC-738D-4C6C-815B-9C375C55865B@ftwr.co.uk>
References: <db047a770911040153k102d8960nadab3a9de8950141@mail.gmail.com>	<op.u2u8a0ctspxmuu@dd32>	<db047a770911040256s7450354i56d79ed6b54d822@mail.gmail.com>	<4AF1DCC7.2050308@adcSTUDIO.com>	<006c01ca5d91$fd2f3150$f78d93f0$@us>
	<C1A2A5AC-738D-4C6C-815B-9C375C55865B@ftwr.co.uk>
Message-ID: <4AF1EFCB.2020909@adcSTUDIO.com>

On 11/4/2009 4:10 PM, Peter Westwood wrote:
> Just because a plugin has not been updated since 2007 does not 
> necessarily mean that plugin doesn't work.
>
> In fact it is quite possible if the plugin was well coded and used the 
> apis available correctly that it still works.
>
> westi
That's where I'm hoping that the new compatibility feature could be 
used. But I'd still like to get the ones known to not work since 2007 
off my search lists ;)

From gaarai at gaarai.com  Wed Nov  4 21:19:13 2009
From: gaarai at gaarai.com (Chris Jean)
Date: Wed, 04 Nov 2009 15:19:13 -0600
Subject: [wp-hackers] Delete Plugin on SVN please
In-Reply-To: <7474be390911041304v4f266e82haa5d1b348a8bba87@mail.gmail.com>
References: <db047a770911040153k102d8960nadab3a9de8950141@mail.gmail.com>	<op.u2u8a0ctspxmuu@dd32>	<db047a770911040256s7450354i56d79ed6b54d822@mail.gmail.com>	<4AF1DCC7.2050308@adcSTUDIO.com>
	<006c01ca5d91$fd2f3150$f78d93f0$@us>
	<7474be390911041304v4f266e82haa5d1b348a8bba87@mail.gmail.com>
Message-ID: <4AF1EFD1.1000205@gaarai.com>

This brings up an issue that I have with the plugin repo. I'm not proud 
of this, but it has happened a number of times.

I start a plugin project based on a good idea. During one of my moments 
of reflecting upon design, implementation, etc, I decide to figure out 
the name of the project. I find a good one that isn't taken, and I 
register it.

I then invariably get something that swamps me: a big project at work, 
some personal stuff is happening that takes away my time, etc. Then when 
I'm able to come back to the project, days have gone by and I realize 
something. Since the repo system lists new projects based upon the day 
that the repo was approved and not based upon the first version being 
submitted, my great new plugin idea will be quickly lost due to the lack 
of attention on the new plugin list. In other words, if I wait 10 days 
from repo approval to push up the first version, then people will have 
to go 10 days back in the new plugin list to find my plugin. This 
realization has at times caused me to lose interest in a project.

Of course, I could just wait to register a name until the project is 
finished, but this has a few other problems: 1) The name may be taken by 
the time I finish the project causing me to go and rename everything, 
including any promotional/support posts I may have created. 2) I now 
have to wait some random number of days until my repo gets approved 
before I can push out the version. 3) If I'm busy again when my repo is 
approved and don't end up getting back to it in a couple or more days, 
I'm back to the same problem I started with.

If there were a way that I could delete repos that I didn't end up 
using, I could release those names back into the available pool.

Here's an idea. Plugin repositories that have not had an initial version 
commit made to them for a period of time (such as 10 days, a month, six 
months, ...) should be automatically removed and freed. This would 
prevent dead projects that never got started and name squatters from 
removing good names from the pool for no benefit to the community.

Chris Jean
http://gaarai.com/
@chrisjean



Glenn Ansley wrote:
> I'd love to be able to flag a couple of mine for deletion or as
> 'inactive' or 'no longer supported'... like one that was misspelled
> and never had any files committed to it.
>
> Glenn Ansley
> http://twitter.com/glennansley
> http://fullthrottledevelopment.com

From mark at watero.us  Wed Nov  4 21:56:34 2009
From: mark at watero.us (mark waterous)
Date: Wed, 4 Nov 2009 13:56:34 -0800
Subject: [wp-hackers] Delete Plugin on SVN please
In-Reply-To: <C1A2A5AC-738D-4C6C-815B-9C375C55865B@ftwr.co.uk>
References: <db047a770911040153k102d8960nadab3a9de8950141@mail.gmail.com>	<op.u2u8a0ctspxmuu@dd32>	<db047a770911040256s7450354i56d79ed6b54d822@mail.gmail.com>	<4AF1DCC7.2050308@adcSTUDIO.com>	<006c01ca5d91$fd2f3150$f78d93f0$@us>
	<C1A2A5AC-738D-4C6C-815B-9C375C55865B@ftwr.co.uk>
Message-ID: <006d01ca5d99$ad825620$08870260$@us>

> Just because a plugin has not been updated since 2007 does not
> necessarily mean that plugin doesn't work.
> 
> In fact it is quite possible if the plugin was well coded and used the
> apis available correctly that it still works.

Agreed, but how often is this the case vs not?

Chances are much higher that a plugin which has not been updated for a few
years will either not take advantage of improvements to Wordpress, or
function properly. Though there are a few, so maybe once again this could
just be added a search filter. "Sort by last updated" would not only allow
people to look for more recent options should they like, but would allow
developers and die-hards the option to flip the results and see what was
done back in the day.
-Mark


From wp-hackers at striderweb.com  Thu Nov  5 03:07:15 2009
From: wp-hackers at striderweb.com (Stephen Rider)
Date: Wed, 4 Nov 2009 21:07:15 -0600
Subject: [wp-hackers] "deprecating" direct calls to wp-config.php
In-Reply-To: <8b870c460911040759x1855b077y5ba9dbe2b3b08ffc@mail.gmail.com>
References: <4167AD97-4D8A-4922-83DB-23B5DBCA68B4@striderweb.com>
	<8b870c460911040759x1855b077y5ba9dbe2b3b08ffc@mail.gmail.com>
Message-ID: <2EC3CFD0-FCB3-4BF0-99E2-BEA09F865F32@striderweb.com>

That bit is copied straight from the existing _deprecated_file()  
function.

So if that is a problem, then it is also a bug in existing WP Core code.

Stephen

On Nov 4, 2009, at 9:59 AM, Andrew Nacin wrote:

> I haven't started to comment on Trac tickets yet, so I figured I'd  
> just drop you an e-mail. In your most recent patch in #11059, you  
> use true === WP_DEBUG. Really, it should be true == WP_DEBUG, as  
> that's the same check that is made in wp-settings.php. Otherwise,  
> someone using define('WP_DEBUG', 1) would get all debug notices  
> except for this proposed one.
>
> On Sun, Nov 1, 2009 at 21:56, Stephen Rider <wp- 
> hackers at striderweb.com> wrote:
> Hi all --
>
> I just wanted to call a bit of attention to this patch:
> <http://core.trac.wordpress.org/ticket/11059>

From wp-hackers at striderweb.com  Thu Nov  5 03:15:59 2009
From: wp-hackers at striderweb.com (Stephen Rider)
Date: Wed, 4 Nov 2009 21:15:59 -0600
Subject: [wp-hackers] Delete Plugin on SVN please
In-Reply-To: <006d01ca5d99$ad825620$08870260$@us>
References: <db047a770911040153k102d8960nadab3a9de8950141@mail.gmail.com>	<op.u2u8a0ctspxmuu@dd32>	<db047a770911040256s7450354i56d79ed6b54d822@mail.gmail.com>	<4AF1DCC7.2050308@adcSTUDIO.com>	<006c01ca5d91$fd2f3150$f78d93f0$@us>
	<C1A2A5AC-738D-4C6C-815B-9C375C55865B@ftwr.co.uk>
	<006d01ca5d99$ad825620$08870260$@us>
Message-ID: <4F714425-FD5C-427B-A5A0-2B8BC6690022@striderweb.com>


On Nov 4, 2009, at 3:56 PM, mark waterous wrote:

>> Just because a plugin has not been updated since 2007 does not
>> necessarily mean that plugin doesn't work.
>
> Agreed, but how often is this the case vs not?

The question is moot.  The point is: old != inactive.  The system  
should not make assumptions based on date.

I know I use at least one plugin that is quite old, but works fine.   
(A very straightforward plugin, but definitely useful.)

Stephen

From william.canino at googlemail.com  Thu Nov  5 05:38:52 2009
From: william.canino at googlemail.com (William Canino)
Date: Thu, 5 Nov 2009 00:38:52 -0500
Subject: [wp-hackers] Tutorial for custom Walker_Comment ?
Message-ID: <e4dc67e0911042138j5ff74cc4s9cf1f45cc4dc221e@mail.gmail.com>

After a year of procrastinating, I will begin implementing
wp_list_comments() on a theme.

Does anyone know any tutorial for making one's own Walker_Comment?
Sorry if I sound so lazy.

From william.canino at googlemail.com  Thu Nov  5 06:55:11 2009
From: william.canino at googlemail.com (William Canino)
Date: Thu, 5 Nov 2009 01:55:11 -0500
Subject: [wp-hackers] How to number the paged comments in theme Was:
	Tutorial for custom Walker_Comment ?
Message-ID: <e4dc67e0911042255q75925428r5a7e98f56e546a74@mail.gmail.com>

Hello,

I figured the first one by myself, but now I am quite stuck.

1. My theme has no nested comments, but uses <ol> instead of <ul>

How do I number the paged comments (<ol start="?"> to maintain comment
numbering. For example, if I chose 10 comments per page, the comments
at page two will start at 11. How do I get that 11?

2. I want to echo my <div class="navigation"><?php
paginate_comments_links() ?></div> only if there is actual comment
paging.  What condition should I test?  I'm stuck because
paginate_comments_links doesn't seem to support $before and $after.

Have a good evening, everyone.

W

P.S. Is there an automattic discussion list particularly for theme developers?


2009/11/5 William Canino <william.canino at googlemail.com>:
> After a year of procrastinating, I will begin implementing
> wp_list_comments() on a theme.
>
> Does anyone know any tutorial for making one's own Walker_Comment?
> Sorry if I sound so lazy.
>

From elflop at googlemail.com  Thu Nov  5 09:31:34 2009
From: elflop at googlemail.com (elflop at googlemail.com)
Date: Thu, 05 Nov 2009 09:31:34 +0000
Subject: [wp-hackers] plugin compatability
Message-ID: <0016e6d64087ac36e304779c6404@google.com>

Sorry for sending this to the list, not sure where it should go.

The new plugin compatibility section on a plugin page. As suspected I have  
recently had someone mark mine as 'broken' with the latest version of WP.  
Luckily others have marked it as 'Works'. I knew that at some point this  
would happen, and feel that it isn't good for plugins authors.

There appears to be no way for a plugin author to see why someone marked it  
as broken, it could be for any reason - possibly not even connected with  
the plugin itself! A lot of queries I get are from people that don't  
understand WP let alone the use of plugins... I therefore feel the  
usefulness to be reduced and may even be harmful for some developers.

So I suggest it is either removed, or people are required to enter in a  
reason why it is broken and that the plugin author is given a chance to  
respond. As it stands a plugin could be marked as broken simply because  
someone doesn't like it!

From scribu at gmail.com  Thu Nov  5 09:39:06 2009
From: scribu at gmail.com (scribu)
Date: Thu, 5 Nov 2009 11:39:06 +0200
Subject: [wp-hackers] plugin compatability
In-Reply-To: <0016e6d64087ac36e304779c6404@google.com>
References: <0016e6d64087ac36e304779c6404@google.com>
Message-ID: <349fe48b0911050139s56d5f463k647396100dc4448f@mail.gmail.com>

Something that might help would be to allow only logged-in users to vote on
compatibility.


-- 
http://scribu.net

From scribu at gmail.com  Thu Nov  5 10:08:46 2009
From: scribu at gmail.com (scribu)
Date: Thu, 5 Nov 2009 12:08:46 +0200
Subject: [wp-hackers] Fwd: Re:  plugin compatability
In-Reply-To: <349fe48b0911050208s3c2c6519hdc935368ad949a31@mail.gmail.com>
References: <349fe48b0911050139s56d5f463k647396100dc4448f@mail.gmail.com>
	<000e0cdf97b4f2065a04779ccc5d@google.com>
	<349fe48b0911050208s3c2c6519hdc935368ad949a31@mail.gmail.com>
Message-ID: <349fe48b0911050208n58fb2b91u2fa01b87c1a613b4@mail.gmail.com>

On Thu, Nov 5, 2009 at 12:00 PM, <elflop at googlemail.com> wrote:

> On , scribu <scribu at gmail.com> wrote:
> > Something that might help would be to allow only logged-in users to vote
> on
> > compatibility.
>
> I wasn't aware that none logged in users could vote!
>

Sorry, I checked now and you do have to login to vote.


Integrating the compatibility check with the support threads would be
useful:

When a user votes that a plugin is broken, he could post a message with the
error he is experiencing.

Either that, or there should be only one button: "Works".


-- 
http://scribu.net



-- 
http://scribu.net

From esmi at quirm.net  Thu Nov  5 10:22:08 2009
From: esmi at quirm.net (esmi at quirm dot net)
Date: Thu, 05 Nov 2009 10:22:08 +0000
Subject: [wp-hackers] Fwd: Re:  plugin compatability
In-Reply-To: <349fe48b0911050208n58fb2b91u2fa01b87c1a613b4@mail.gmail.com>
References: <349fe48b0911050139s56d5f463k647396100dc4448f@mail.gmail.com>	<000e0cdf97b4f2065a04779ccc5d@google.com>	<349fe48b0911050208s3c2c6519hdc935368ad949a31@mail.gmail.com>
	<349fe48b0911050208n58fb2b91u2fa01b87c1a613b4@mail.gmail.com>
Message-ID: <4AF2A750.4080009@quirm.net>

on 05/11/2009 10:08 scribu said the following:

> Either that, or there should be only one button: "Works".

+1 for this idea if it could be integrated with a display of the number 
of downloads for the current plugin version.

esmi





From elflop at googlemail.com  Thu Nov  5 10:24:55 2009
From: elflop at googlemail.com (elflop at googlemail.com)
Date: Thu, 05 Nov 2009 10:24:55 +0000
Subject: [wp-hackers] Fwd: Re:  plugin compatability
In-Reply-To: <349fe48b0911050208n58fb2b91u2fa01b87c1a613b4@mail.gmail.com>
Message-ID: <00c09f8c1db57b031304779d233a@google.com>

> Sorry, I checked now and you do have to login to vote.

oh good ;)

> Integrating the compatibility check with the support threads would be
> useful:

> When a user votes that a plugin is broken, he could post a message with  
> the
> error he is experiencing.

I would like that, and then link a list of 'broken' reports to the relevant  
post allowing plugin authors to respond, and for people to see the  
responces.

> Either that, or there should be only one button: "Works".

:) nice, I've started clicking that when I release a new version... which  
shouldn't really be allowed. (same as rating)


From lynne.pope at gmail.com  Thu Nov  5 13:27:40 2009
From: lynne.pope at gmail.com (Lynne Pope)
Date: Fri, 6 Nov 2009 02:27:40 +1300
Subject: [wp-hackers] plugin compatability
In-Reply-To: <0016e6d64087ac36e304779c6404@google.com>
References: <0016e6d64087ac36e304779c6404@google.com>
Message-ID: <427667db0911050527p3b44922fmece39565576e079f@mail.gmail.com>

2009/11/5 <elflop at googlemail.com>

>
> So I suggest it is either removed, or people are required to enter in a
> reason why it is broken and that the plugin author is given a chance to
> respond. As it stands a plugin could be marked as broken simply because
> someone doesn't like it!
>

Even with it requiring login before voting the system can be gamed. I don't
understand why anyone would vote actually.
They go to the repository, download the plugin, install, test, then... go
back to the repository to vote???
That seems to be a stretch to me.

I've downloaded two plugins since that new feature went up. Couldn't be
bothered going back just to vote. If others are like me then the voting will
only ever be done for ulterior reasons and honest reporting will be up the
spout and washed away completely.

For compatibility feedback to be really useful it should be provided as a
rating from the WordPress plugin admin screen, not from a download page that
genuine users may not go back to. IMO anyway ;)

Lynne

-- 
http://twitter.com/elpie/

From gaarai at gaarai.com  Thu Nov  5 13:28:10 2009
From: gaarai at gaarai.com (Chris Jean)
Date: Thu, 05 Nov 2009 07:28:10 -0600
Subject: [wp-hackers] plugin compatability
In-Reply-To: <427667db0911050527p3b44922fmece39565576e079f@mail.gmail.com>
References: <0016e6d64087ac36e304779c6404@google.com>
	<427667db0911050527p3b44922fmece39565576e079f@mail.gmail.com>
Message-ID: <4AF2D2EA.8030509@gaarai.com>

Good, I thought I was the only one that thought this.

This whole compatibility deal should be automated and all the 
information should come from a reputable source. If it can't be 
automated and verified, then it will never be truly useful.

Chris Jean
http://gaarai.com/
http://wp-roadmap.com/



Lynne Pope wrote:
> Even with it requiring login before voting the system can be gamed. I don't
> understand why anyone would vote actually.
> They go to the repository, download the plugin, install, test, then... go
> back to the repository to vote???
> That seems to be a stretch to me.
>
> I've downloaded two plugins since that new feature went up. Couldn't be
> bothered going back just to vote. If others are like me then the voting will
> only ever be done for ulterior reasons and honest reporting will be up the
> spout and washed away completely.
>
> For compatibility feedback to be really useful it should be provided as a
> rating from the WordPress plugin admin screen, not from a download page that
> genuine users may not go back to. IMO anyway ;)
>
> Lynne
>
>   

From kkarpieszuk at gmail.com  Thu Nov  5 13:32:25 2009
From: kkarpieszuk at gmail.com (Konrad Karpieszuk)
Date: Thu, 5 Nov 2009 14:32:25 +0100
Subject: [wp-hackers] Handling cookies with wp-plugin and wp-supercache
In-Reply-To: <4AF09247.5070905@linux.ie>
References: <a613fec40911011024h2c2465f5xd21aa66c8ef151d5@mail.gmail.com>
	<e4dc67e0911011253q65ef5d63l3cd8b9e493c48bfa@mail.gmail.com>
	<a613fec40911011403r3e24fa6i51767b5b077dd15c@mail.gmail.com>
	<4AEEDB3B.6060402@linux.ie>
	<67dfa4090911020617u26369964q6cab549e616c5b2a@mail.gmail.com>
	<e4dc67e0911020734o12f133edv54c1a9f7f19cfa62@mail.gmail.com>
	<4AF01847.7040903@linux.ie> <4AF09247.5070905@linux.ie>
Message-ID: <67dfa4090911050532x5f8be843wea49f7ca596a9a64@mail.gmail.com>

Donncha, thank you :) Sorry that i answer so late but i wanted first to
check this tutorial in practice, and then say thank you, but i see that in
incoming days i will nto have opportunity to check it :) so now i just send
you thanks for this and when i will use your suggestion in my plugins, then
i will ask more if i will have any questions :)

at end i see that this is not finished so i hope soon you will give us more
:)

On Tue, Nov 3, 2009 at 9:27 PM, Donncha O Caoimh <donncha at linux.ie> wrote:

> And here we have it. WP Super Cache for Developers:
> http://ocaoimh.ie/wp-super-cache-developers/
>
> If you have feedback, please leave it on my blog post announcing it as the
> above link is a page with no comment form:
> http://ocaoimh.ie/wp-super-cache-developer-documentation/
>
> Donncha
>
>
> Donncha O Caoimh wrote:
>
>> For the past few weeks I've been meaning to write a "Hacking Supercache
>> for fun and pleasure" post with tips and tricks and lists of actions and
>> filters that can be used.
>>
>> Unfortunately a lack of time has stopped me writing it so far but maybe
>> this month.
>>
>> If you're curious, have a read through wp-cache-phase1.php. It's a short
>> file but has some interesting stuff, and the plugins/ folder has 2 example
>> plugins.
>>
>> Donncha
>> PS. it's not horrible, really! :P
>>
>> William Canino wrote:
>>
>>> +1 on starting the Super Cache API documentation.
>>>
>>>  You'll be able to add a supercache plugin in the
>>>>> wp-super-cache/plugins folder that uses that hook. You should probably
>>>>> move
>>>>> the plugins folder out of that directory as the next time you update
>>>>> it'll
>>>>> delete your plugin.
>>>>>
>>>>
>>> Sorry for my language, but this is horrible.
>>>
>>>  Instead of modifying wp-cache-phase1.php you can use one of the
>>>> cacheactions
>>>>
>>>
>>> Donncha is referring to wp_cache_served_cache_file. He is right.
>>> Instead of my previous code suggestion, I would have suggested this:
>>>
>>> function cookie-setting-code() {
>>>   // do stuff
>>> }
>>> add_cacheaction('wp_cache_served_cache_file', 'cookie-setting-code');
>>>
>>> The thing is, I don't know whether to put the code inline in the
>>> plugin, in init, in wp_head or in functions.php.  I haven't gotten
>>> around to trying this and, well, there's no documentation.
>>>
>>>
>>>
>>> 2009/11/2 Konrad Karpieszuk <kkarpieszuk at gmail.com>:
>>>
>>>>
>>>>> Instead of modifying wp-cache-phase1.php you can use one of the
>>>>> cacheactions. You'll be able to add a supercache plugin in the
>>>>> wp-super-cache/plugins folder that uses that hook. You should probably
>>>>> move
>>>>> the plugins folder out of that directory as the next time you update
>>>>> it'll
>>>>> delete your plugin.
>>>>>
>>>>> Doing this will make it easier to upgrade the plugin.
>>>>>
>>>>
>>>> Donncha, could you describe it (maybe create some small tutorial)
>>>> somewhere
>>>> how to do this? I think this will help for numerous wordpress plugins
>>>> develeopers :) Your plugin (wp super cache) is really popular and in
>>>> internet many times i saw questions from plugins developers that their
>>>> plugins doesn't work if wp super cache is installed. Most of them
>>>> finally
>>>> decide to write in FAQ to disable wp super cache (truelly i did it
>>>> also).
>>>> But this is not good solutions, especially if your plugin is ready to
>>>> handle
>>>> this problem. Not everybody read source code of your plugin to find
>>>> solution
>>>> and today i first time see that it is possible to set and read cookie
>>>> with
>>>> wp super cache enabled :)
>>>>
>>>> If you will decide to write this (even shortly) i promise to help you in
>>>> translating it into polish language.
>>>>
>>>>
>>>> --
>>>> (en) regards / (pl) pozdrawiam
>>>> Konrad Karpieszuk
>>>> http://konradjestwrwandzie.wordpress.com/
>>>> _______________________________________________
>>>> wp-hackers mailing list
>>>> wp-hackers at lists.automattic.com
>>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>>>
>>>>  _______________________________________________
>>> wp-hackers mailing list
>>> wp-hackers at lists.automattic.com
>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>>
>>>
>>>  _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
>>
>>  _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>



-- 
(en) regards / (pl) pozdrawiam
Konrad Karpieszuk
http://konradjestwrwandzie.wordpress.com/

From lynne.pope at gmail.com  Thu Nov  5 13:46:55 2009
From: lynne.pope at gmail.com (Lynne Pope)
Date: Fri, 6 Nov 2009 02:46:55 +1300
Subject: [wp-hackers] plugin compatability
In-Reply-To: <427667db0911050527p3b44922fmece39565576e079f@mail.gmail.com>
References: <0016e6d64087ac36e304779c6404@google.com>
	<427667db0911050527p3b44922fmece39565576e079f@mail.gmail.com>
Message-ID: <427667db0911050546v73ab2b01r740d02909ce3a630@mail.gmail.com>

2009/11/6 Lynne Pope <lynne.pope at gmail.com>

>
>
> For compatibility feedback to be really useful it should be provided as a
> rating from the WordPress plugin admin screen, not from a download page that
> genuine users may not go back to. IMO anyway ;)
>

It's really late and that part was badly written. The "WordPress plugin
admin screen" may confuse someone. I mean the plugin page of the WP admin
user interface. Sorry if I caused any head-scratching there!

This could be something as simple as a question when a user deactivates or
uninstalls a plugin.

Lynne

-- 
http://twitter.com/elpie/

From anacin at gwhatchet.com  Thu Nov  5 14:12:38 2009
From: anacin at gwhatchet.com (Andrew Nacin)
Date: Thu, 5 Nov 2009 09:12:38 -0500
Subject: [wp-hackers] How to number the paged comments in theme Was:
	Tutorial for custom Walker_Comment ?
In-Reply-To: <e4dc67e0911042255q75925428r5a7e98f56e546a74@mail.gmail.com>
References: <e4dc67e0911042255q75925428r5a7e98f56e546a74@mail.gmail.com>
Message-ID: <8b870c460911050612g353c710bpa1fc252e03778f42@mail.gmail.com>

>
> 2. I want to echo my <div class="navigation"><?php
> paginate_comments_links() ?></div> only if there is actual comment paging.
>

You could use the echo=false arg and check the length of the returned
string.

From mike at zed1.com  Thu Nov  5 14:27:21 2009
From: mike at zed1.com (Mike Little)
Date: Thu, 5 Nov 2009 14:27:21 +0000
Subject: [wp-hackers] How to number the paged comments in theme Was:
	Tutorial for custom Walker_Comment ?
In-Reply-To: <8b870c460911050612g353c710bpa1fc252e03778f42@mail.gmail.com>
References: <e4dc67e0911042255q75925428r5a7e98f56e546a74@mail.gmail.com> 
	<8b870c460911050612g353c710bpa1fc252e03778f42@mail.gmail.com>
Message-ID: <7235ce780911050627k18cf2881k77ee15733953e65d@mail.gmail.com>

2009/11/5 Andrew Nacin <anacin at gwhatchet.com>

> >
> > 2. I want to echo my <div class="navigation"><?php
> > paginate_comments_links() ?></div> only if there is actual comment
> paging.
> >
>
> You could use the echo=false arg and check the length of the returned
> string.
>

>

I don't believe that will work: the default comment_walker *always* echoes.


See this trac ticket for a report and fix
http://core.trac.wordpress.org/ticket/10948


Mike
-- 
Mike Little
http://zed1.com/

From sojweb at indiana.edu  Thu Nov  5 14:46:46 2009
From: sojweb at indiana.edu (SoJ Web)
Date: Thu, 5 Nov 2009 09:46:46 -0500
Subject: [wp-hackers] Get authors for post category
Message-ID: <6F9EABE3-70E5-4926-ADFC-651B7A0494E4@indiana.edu>

Hi all,

Does anyone know of an easy way to get all the authors for posts in a  
certain category? I'd like to have an author list that only includes  
authors who've posted to a particular category, and I'd like to avoid  
writing a custom query, if possible. Thanks.


-Jeff


From anacin at gwhatchet.com  Thu Nov  5 14:51:44 2009
From: anacin at gwhatchet.com (Andrew Nacin)
Date: Thu, 5 Nov 2009 09:51:44 -0500
Subject: [wp-hackers] How to number the paged comments in theme Was:
	Tutorial for custom Walker_Comment ?
In-Reply-To: <7235ce780911050627k18cf2881k77ee15733953e65d@mail.gmail.com>
References: <e4dc67e0911042255q75925428r5a7e98f56e546a74@mail.gmail.com> 
	<8b870c460911050612g353c710bpa1fc252e03778f42@mail.gmail.com> 
	<7235ce780911050627k18cf2881k77ee15733953e65d@mail.gmail.com>
Message-ID: <8b870c460911050651y75a28666s4a5b6565f44a5e0@mail.gmail.com>

>
> I don't believe that will work: the default comment_walker *always* echoes.
>

#10948 is for wp_list_comments()... paginate_comments_links() only relies on
the walker to determine the number of pages required (and even then only
when threading is on, otherwise it uses $wp_query).  It accepts echo=false
without any problem.

Andrew

From mike at zed1.com  Thu Nov  5 14:57:02 2009
From: mike at zed1.com (Mike Little)
Date: Thu, 5 Nov 2009 14:57:02 +0000
Subject: [wp-hackers] How to number the paged comments in theme Was:
	Tutorial for custom Walker_Comment ?
In-Reply-To: <8b870c460911050651y75a28666s4a5b6565f44a5e0@mail.gmail.com>
References: <e4dc67e0911042255q75925428r5a7e98f56e546a74@mail.gmail.com> 
	<8b870c460911050612g353c710bpa1fc252e03778f42@mail.gmail.com> 
	<7235ce780911050627k18cf2881k77ee15733953e65d@mail.gmail.com> 
	<8b870c460911050651y75a28666s4a5b6565f44a5e0@mail.gmail.com>
Message-ID: <7235ce780911050657s29f43262w3a67e144ed45d675@mail.gmail.com>

2009/11/5 Andrew Nacin <anacin at gwhatchet.com>

> >
> > I don't believe that will work: the default comment_walker *always*
> echoes.
> >
>
> #10948 is for wp_list_comments()... paginate_comments_links() only relies
> on
> the walker to determine the number of pages required (and even then only
> when threading is on, otherwise it uses $wp_query).  It accepts echo=false
> without any problem.
>
>
Doh! That's what I get for not reading things properly, thanks for
clarifying that.

Mike
-- 
Mike Little
http://zed1.com/

From scribu at gmail.com  Thu Nov  5 15:16:58 2009
From: scribu at gmail.com (scribu)
Date: Thu, 5 Nov 2009 17:16:58 +0200
Subject: [wp-hackers] Get authors for post category
In-Reply-To: <6F9EABE3-70E5-4926-ADFC-651B7A0494E4@indiana.edu>
References: <6F9EABE3-70E5-4926-ADFC-651B7A0494E4@indiana.edu>
Message-ID: <349fe48b0911050716y4382ecb2of1f1cce28bdff932@mail.gmail.com>

There is no "easy" way:

$post_ids = implode(',', get_objects_in_term($term_id, 'category'));

$authors = $wpdb->get_results("
SELECT DISTINCT *
FROM $wpdb->users u
JOIN $wpdb->posts p ON (p.author_id = u.ID)
WHERE p.ID IN ('$post_ids')
");


-- 
http://scribu.net

From otto at ottodestruct.com  Thu Nov  5 15:38:38 2009
From: otto at ottodestruct.com (Otto)
Date: Thu, 5 Nov 2009 09:38:38 -0600
Subject: [wp-hackers] Tutorial for custom Walker_Comment ?
In-Reply-To: <e4dc67e0911042138j5ff74cc4s9cf1f45cc4dc221e@mail.gmail.com>
References: <e4dc67e0911042138j5ff74cc4s9cf1f45cc4dc221e@mail.gmail.com>
Message-ID: <161617690911050738of9e537ew78bdfe66a5b4af81@mail.gmail.com>

Why would you need to make your own Walker_Comment? I mean, yes, you
can do it that way, but the callback and end-callback parameters give
you most control you'd need.

And even those should be unnecessary in most cases. Why theme authors
always resort to extreme customization of HTML instead of using CSS
mystifies me... It's bad practice and only results in low search
engine rankings.

-Otto



On Wed, Nov 4, 2009 at 11:38 PM, William Canino
<william.canino at googlemail.com> wrote:
> After a year of procrastinating, I will begin implementing
> wp_list_comments() on a theme.
>
> Does anyone know any tutorial for making one's own Walker_Comment?
> Sorry if I sound so lazy.
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From batmoo at gmail.com  Thu Nov  5 15:58:22 2009
From: batmoo at gmail.com (Mohammad Jangda)
Date: Thu, 5 Nov 2009 10:58:22 -0500
Subject: [wp-hackers] plugin compatability
In-Reply-To: <427667db0911050546v73ab2b01r740d02909ce3a630@mail.gmail.com>
References: <0016e6d64087ac36e304779c6404@google.com>
	<427667db0911050527p3b44922fmece39565576e079f@mail.gmail.com> 
	<427667db0911050546v73ab2b01r740d02909ce3a630@mail.gmail.com>
Message-ID: <eaaa36c90911050758j20968f53pb20c7eee65b3c94d@mail.gmail.com>

>
> So I suggest ... people are required to enter in a reason why it is broken
> and that the plugin author is given a chance to respond. As it stands a
> plugin could be marked as broken simply because someone doesn't like it!


+1. Ideally, we should give users the option to specify the versions of PHP,
MySQL, browser, etc. that they're using. That would be an amazing help for
plugin developers. But, at the very least, I think a free-form text field to
provide some details about what's broken would also be a good alternative.

For compatibility feedback to be really useful it should be provided as
> a rating from the WordPress plugin admin screen


According to the blog post announcing the plugin compatibility beta (
http://wordpress.org/development/2009/10/plugin-compatibility-beta/), seems
like this is something that's planned: "Eventually, we?d like to gather this
compatibility feedback from within WordPress, allowing you to vote directly
from your plugins admin screen."

--
Mohammad Jangda
www.digitalize.ca | @mjangda

From john.ivar.myrstad at gmail.com  Thu Nov  5 16:25:41 2009
From: john.ivar.myrstad at gmail.com (John Myrstad)
Date: Thu, 5 Nov 2009 17:25:41 +0100
Subject: [wp-hackers] plugin compatability
In-Reply-To: <eaaa36c90911050758j20968f53pb20c7eee65b3c94d@mail.gmail.com>
References: <0016e6d64087ac36e304779c6404@google.com>
	<427667db0911050527p3b44922fmece39565576e079f@mail.gmail.com>
	<427667db0911050546v73ab2b01r740d02909ce3a630@mail.gmail.com>
	<eaaa36c90911050758j20968f53pb20c7eee65b3c94d@mail.gmail.com>
Message-ID: <d29aad6e0911050825n6b9091dfp2eeb136b5fd00092@mail.gmail.com>

Maybe broken report should ask for more info on configuration and not count
if not two users with the same configuration reports it as broken ?

From wp at xentek.net  Thu Nov  5 16:44:37 2009
From: wp at xentek.net (Eric Marden)
Date: Thu, 5 Nov 2009 11:44:37 -0500
Subject: [wp-hackers] Delete Plugin on SVN please
In-Reply-To: <4AF1EFD1.1000205@gaarai.com>
References: <db047a770911040153k102d8960nadab3a9de8950141@mail.gmail.com>	<op.u2u8a0ctspxmuu@dd32>	<db047a770911040256s7450354i56d79ed6b54d822@mail.gmail.com>	<4AF1DCC7.2050308@adcSTUDIO.com>
	<006c01ca5d91$fd2f3150$f78d93f0$@us>
	<7474be390911041304v4f266e82haa5d1b348a8bba87@mail.gmail.com>
	<4AF1EFD1.1000205@gaarai.com>
Message-ID: <A009B762-B97B-4E88-8ED6-C1B73E5A6E64@xentek.net>

On Nov 4, 2009, at 4:19 PM, Chris Jean wrote:

>  then invariably get something that swamps me: a big project at  
> work, some personal stuff is happening that takes away my time, etc.  
> Then when I'm able to come back to the project, days have gone by  
> and I realize something. Since the repo system lists new projects  
> based upon the day that the repo was approved and not based upon the  
> first version being submitted, my great new plugin idea will be  
> quickly lost due to the lack of attention on the new plugin list. In  
> other words, if I wait 10 days from repo approval to push up the  
> first version, then people will have to go 10 days back in the new  
> plugin list to find my plugin. This realization has at times caused  
> me to lose interest in a project.


You need a better strategy. You can announce new plugins (and updated  
plugins) on Web Log Tools collection, which will get your plugin a lot  
more attention then I've ever got on the Plugin DB, even when I  
committed v1 as soon as I got access.




- Eric Marden
__________________________________
http://xentek.net/code/wordpress/






From Ken at adcSTUDIO.com  Thu Nov  5 16:46:19 2009
From: Ken at adcSTUDIO.com (Ken Newman)
Date: Thu, 05 Nov 2009 11:46:19 -0500
Subject: [wp-hackers] plugin compatability
In-Reply-To: <0016e6d64087ac36e304779c6404@google.com>
References: <0016e6d64087ac36e304779c6404@google.com>
Message-ID: <4AF3015B.70903@adcSTUDIO.com>

On 11/5/2009 4:31 AM, elflop at googlemail.com wrote:
> Sorry for sending this to the list, not sure where it should go.
>
> The new plugin compatibility section on a plugin page. As suspected I 
> have recently had someone mark mine as 'broken' with the latest 
> version of WP. Luckily others have marked it as 'Works'. I knew that 
> at some point this would happen, and feel that it isn't good for 
> plugins authors.
>
> There appears to be no way for a plugin author to see why someone 
> marked it as broken, it could be for any reason - possibly not even 
> connected with the plugin itself! A lot of queries I get are from 
> people that don't understand WP let alone the use of plugins... I 
> therefore feel the usefulness to be reduced and may even be harmful 
> for some developers.
>
> So I suggest it is either removed, or people are required to enter in 
> a reason why it is broken and that the plugin author is given a chance 
> to respond. As it stands a plugin could be marked as broken simply 
> because someone doesn't like it!
The truth is, this compatibility thing will only work if developers and 
users see this as a valuable resource and participate. If we all go and 
mark plugins that work for us as working, then it will mitigate 
(outnumber) those with ulterior motives. No, you won't have a perfect 
score, but that's not the point. If most people choose not to 
participate, then it doesn't matter that someone tries to game the 
system: only people with issues vote and everything appears broken 
anyway. I feel that "cheating" is mute.

We have to convince people that this resource is worth the effort of 
maintaining it. An optional comment box for developer messages is about 
the only useful thing suggested so far. Either crowd sourcing works here 
or it doesn't.


From wp at xentek.net  Thu Nov  5 16:48:27 2009
From: wp at xentek.net (Eric Marden)
Date: Thu, 5 Nov 2009 11:48:27 -0500
Subject: [wp-hackers] "deprecating" direct calls to wp-config.php
In-Reply-To: <2EC3CFD0-FCB3-4BF0-99E2-BEA09F865F32@striderweb.com>
References: <4167AD97-4D8A-4922-83DB-23B5DBCA68B4@striderweb.com>
	<8b870c460911040759x1855b077y5ba9dbe2b3b08ffc@mail.gmail.com>
	<2EC3CFD0-FCB3-4BF0-99E2-BEA09F865F32@striderweb.com>
Message-ID: <EC153D6D-1533-4923-B044-6DBCBDE7D1B3@xentek.net>

On Nov 4, 2009, at 10:07 PM, Stephen Rider wrote:

>> Otherwise, someone using define('WP_DEBUG', 1)

The docs say to use a boolean value: http://codex.wordpress.org/Editing_wp-config.php#Debug

Just because 1 and 0 evaluate the same in many cases, they are still  
not bool values.


- Eric Marden
__________________________________
http://xentek.net/code/wordpress/






From scribu at gmail.com  Thu Nov  5 18:38:04 2009
From: scribu at gmail.com (scribu)
Date: Thu, 5 Nov 2009 20:38:04 +0200
Subject: [wp-hackers] plugin compatability
In-Reply-To: <eaaa36c90911050758j20968f53pb20c7eee65b3c94d@mail.gmail.com>
References: <0016e6d64087ac36e304779c6404@google.com>
	<427667db0911050527p3b44922fmece39565576e079f@mail.gmail.com>
	<427667db0911050546v73ab2b01r740d02909ce3a630@mail.gmail.com>
	<eaaa36c90911050758j20968f53pb20c7eee65b3c94d@mail.gmail.com>
Message-ID: <349fe48b0911051038he399bc1x7a4f8da2b815e477@mail.gmail.com>

On Thu, Nov 5, 2009 at 5:58 PM, Mohammad Jangda <batmoo at gmail.com> wrote:

> +1. Ideally, we should give users the option to specify the versions of
> PHP,
> MySQL, browser, etc. that they're using. That would be an amazing help for
> plugin developers. But, at the very least, I think a free-form text field
> to
> provide some details about what's broken would also be a good alternative.
>

All the additional (non-sensitive) info could be collected automatically
when the voting is done from the user's install. That would be really neat.


-- 
http://scribu.net

From zamoose at gmail.com  Thu Nov  5 19:21:09 2009
From: zamoose at gmail.com (Doug Stewart)
Date: Thu, 5 Nov 2009 14:21:09 -0500
Subject: [wp-hackers] plugin compatability
In-Reply-To: <349fe48b0911051038he399bc1x7a4f8da2b815e477@mail.gmail.com>
References: <0016e6d64087ac36e304779c6404@google.com>
	<427667db0911050527p3b44922fmece39565576e079f@mail.gmail.com>
	<427667db0911050546v73ab2b01r740d02909ce3a630@mail.gmail.com>
	<eaaa36c90911050758j20968f53pb20c7eee65b3c94d@mail.gmail.com>
	<349fe48b0911051038he399bc1x7a4f8da2b815e477@mail.gmail.com>
Message-ID: <71ddd7490911051121qabdc90sa344f1283018a344@mail.gmail.com>

This is the same set of problems developers with apps in the Apple App
Store encounter, as well as Amazon.  There's no real accountability
for reviews in a direct sense. Amazon, at least, allows for 3rd
parties to mark reviews "helpful" or "unhelpful" which seems to factor
into which reviews the Amazon site presents as [semi-]authoritative.

One thing to take a cue from the App Store on is suggested reviews at
time of plugin deactivation. If you delete an app from your iPhone, a
dialog pops up and says "Would you like to review this app before
deleting?" or somesuch, giving users an opportunity to register their
complaints in a 1-5 star fashion.

I've actually seen a couple of WP plugins that seem to do something
similar -- Woopra comes readily to mind as one, as does Intense
Debate.

So I guess I'm saying that the problems are not insurmountable but do
bear some special consideration prior to implementation time,
particularly in accounting for potential griefers.

-- 
-Doug
http://literalbarrage.org/blog/

From sojweb at indiana.edu  Thu Nov  5 19:35:38 2009
From: sojweb at indiana.edu (SoJ Web)
Date: Thu, 5 Nov 2009 14:35:38 -0500
Subject: [wp-hackers] Get authors for post category
In-Reply-To: <349fe48b0911050716y4382ecb2of1f1cce28bdff932@mail.gmail.com>
References: <6F9EABE3-70E5-4926-ADFC-651B7A0494E4@indiana.edu>
	<349fe48b0911050716y4382ecb2of1f1cce28bdff932@mail.gmail.com>
Message-ID: <D3509705-AC67-49C0-A792-839B0847C4FB@indiana.edu>

That's what I was afraid of :-). Thanks.


-Jeff

On Nov 5, 2009, at 10:16 AM, scribu wrote:

> There is no "easy" way:
>
> $post_ids = implode(',', get_objects_in_term($term_id, 'category'));
>
> $authors = $wpdb->get_results("
> SELECT DISTINCT *
> FROM $wpdb->users u
> JOIN $wpdb->posts p ON (p.author_id = u.ID)
> WHERE p.ID IN ('$post_ids')
> ");
>
>
> -- 
> http://scribu.net
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers


From wp at xentek.net  Thu Nov  5 20:13:51 2009
From: wp at xentek.net (Eric Marden)
Date: Thu, 5 Nov 2009 15:13:51 -0500
Subject: [wp-hackers] plugin compatability
In-Reply-To: <4AF3015B.70903@adcSTUDIO.com>
References: <0016e6d64087ac36e304779c6404@google.com>
	<4AF3015B.70903@adcSTUDIO.com>
Message-ID: <4DBC8E08-93C8-4A49-AC35-83B2F05A3021@xentek.net>

On Nov 5, 2009, at 11:46 AM, Ken Newman wrote:

> We have to convince people that this resource is worth the effort of  
> maintaining it. An optional comment box for developer messages is  
> about the only useful thing suggested so far. Either crowd sourcing  
> works here or it doesn't.


I agree with Ken here. I've been voting on both my own plugins and  
those I use all the time. Put the effort in, and it will be useful.  
Adding a comment box would be helpful at this point, but the real fun  
will come when you can do this in wp-admin/plugins.php


- Eric Marden
__________________________________
http://xentek.net/code/wordpress/






From peter.westwood at ftwr.co.uk  Thu Nov  5 20:40:19 2009
From: peter.westwood at ftwr.co.uk (Peter Westwood)
Date: Thu, 5 Nov 2009 20:40:19 +0000
Subject: [wp-hackers] plugin compatability
In-Reply-To: <71ddd7490911051121qabdc90sa344f1283018a344@mail.gmail.com>
References: <0016e6d64087ac36e304779c6404@google.com>
	<427667db0911050527p3b44922fmece39565576e079f@mail.gmail.com>
	<427667db0911050546v73ab2b01r740d02909ce3a630@mail.gmail.com>
	<eaaa36c90911050758j20968f53pb20c7eee65b3c94d@mail.gmail.com>
	<349fe48b0911051038he399bc1x7a4f8da2b815e477@mail.gmail.com>
	<71ddd7490911051121qabdc90sa344f1283018a344@mail.gmail.com>
Message-ID: <F51FE79D-6A50-48CD-A906-8214DF4E09C9@ftwr.co.uk>

First of all.

It is possible that in-the-admin plugin compatibility voting will come  
in a future version but it's not something for the current version of  
WordPress.

We need to see how the voting goes and wait for us to get some data to  
look at.

On 5 Nov 2009, at 19:21, Doug Stewart wrote:

> One thing to take a cue from the App Store on is suggested reviews at
> time of plugin deactivation. If you delete an app from your iPhone, a
> dialog pops up and says "Would you like to review this app before
> deleting?" or somesuch, giving users an opportunity to register their
> complaints in a 1-5 star fashion.

I think this is a really bad idea personally.

This is like only asking your unsatisfied customers for a review.

You will likely only get negative low scoring feedback - yes some of  
it will be constructive and helpful.

The opportunity cost of installing a free app is so low that you are  
much more likely to do it even if it in no way fits your needs and  
therefore also much more likely to delete it as it cost you nothing.

westi
-- 
Peter Westwood
http://blog.ftwr.co.uk | http://westi.wordpress.com
C53C F8FC 8796 8508 88D6 C950 54F4 5DCD A834 01C5


From lew at fullthrottledevelopment.com  Thu Nov  5 21:57:23 2009
From: lew at fullthrottledevelopment.com (Lew Ayotte - Full Throttle Development)
Date: Thu, 5 Nov 2009 16:57:23 -0500
Subject: [wp-hackers] Delete Plugin on SVN please
In-Reply-To: <A009B762-B97B-4E88-8ED6-C1B73E5A6E64@xentek.net>
References: <db047a770911040153k102d8960nadab3a9de8950141@mail.gmail.com> 
	<op.u2u8a0ctspxmuu@dd32>
	<db047a770911040256s7450354i56d79ed6b54d822@mail.gmail.com> 
	<4AF1DCC7.2050308@adcSTUDIO.com> <006c01ca5d91$fd2f3150$f78d93f0$@us> 
	<7474be390911041304v4f266e82haa5d1b348a8bba87@mail.gmail.com> 
	<4AF1EFD1.1000205@gaarai.com>
	<A009B762-B97B-4E88-8ED6-C1B73E5A6E64@xentek.net>
Message-ID: <160203ed0911051357u64e552e2l9c2d6ba15ed88837@mail.gmail.com>

I guess this is semi-related to cleanup...

We've had a developer who tried to submit a plugin on six different
occassions but it never seemed to work. I tried on his behalf (with my
account info) and it worked right off but it gave the plugin name a "-7"
appended as in (http://wordpress.org/extend/plugins/ft-facepress-7/)

I imagine 1 - 6 are in some DB somewhere and if someone were to create
another named "ft-facepress" it would be ft-facepress-8... I guess.

Lew Ayotte
Full Throttle Development, LLC
706.363.0688
478.246.4627
lew at fullthrottledevelopment.com
http://fullthrottledevelopment.com
http://twitter.com/full_throttle
http://twitter.com/lewayotte


On Thu, Nov 5, 2009 at 11:44 AM, Eric Marden <wp at xentek.net> wrote:

> On Nov 4, 2009, at 4:19 PM, Chris Jean wrote:
>
>   then invariably get something that swamps me: a big project at work, some
>> personal stuff is happening that takes away my time, etc. Then when I'm able
>> to come back to the project, days have gone by and I realize something.
>> Since the repo system lists new projects based upon the day that the repo
>> was approved and not based upon the first version being submitted, my great
>> new plugin idea will be quickly lost due to the lack of attention on the new
>> plugin list. In other words, if I wait 10 days from repo approval to push up
>> the first version, then people will have to go 10 days back in the new
>> plugin list to find my plugin. This realization has at times caused me to
>> lose interest in a project.
>>
>
>
> You need a better strategy. You can announce new plugins (and updated
> plugins) on Web Log Tools collection, which will get your plugin a lot more
> attention then I've ever got on the Plugin DB, even when I committed v1 as
> soon as I got access.
>
>
>
>
>
> - Eric Marden
> __________________________________
> http://xentek.net/code/wordpress/
>
>
>
>
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From lew at fullthrottledevelopment.com  Thu Nov  5 22:01:38 2009
From: lew at fullthrottledevelopment.com (Lew Ayotte - Full Throttle Development)
Date: Thu, 5 Nov 2009 17:01:38 -0500
Subject: [wp-hackers] plugin compatability
In-Reply-To: <71ddd7490911051121qabdc90sa344f1283018a344@mail.gmail.com>
References: <0016e6d64087ac36e304779c6404@google.com>
	<427667db0911050527p3b44922fmece39565576e079f@mail.gmail.com> 
	<427667db0911050546v73ab2b01r740d02909ce3a630@mail.gmail.com> 
	<eaaa36c90911050758j20968f53pb20c7eee65b3c94d@mail.gmail.com> 
	<349fe48b0911051038he399bc1x7a4f8da2b815e477@mail.gmail.com> 
	<71ddd7490911051121qabdc90sa344f1283018a344@mail.gmail.com>
Message-ID: <160203ed0911051401h2821948exf2d8e2713aaa71f7@mail.gmail.com>

I was thinking the same thing...

One thing to take a cue from the App Store on is suggested reviews at
> time of plugin deactivation. If you delete an app from your iPhone, a
> dialog pops up and says "Would you like to review this app before
> deleting?" or somesuch, giving users an opportunity to register their
> complaints in a 1-5 star fashion.
>

Lew Ayotte
Full Throttle Development, LLC
706.363.0688
478.246.4627
lew at fullthrottledevelopment.com
http://fullthrottledevelopment.com
http://twitter.com/full_throttle
http://twitter.com/lewayotte


On Thu, Nov 5, 2009 at 2:21 PM, Doug Stewart <zamoose at gmail.com> wrote:

> This is the same set of problems developers with apps in the Apple App
> Store encounter, as well as Amazon.  There's no real accountability
> for reviews in a direct sense. Amazon, at least, allows for 3rd
> parties to mark reviews "helpful" or "unhelpful" which seems to factor
> into which reviews the Amazon site presents as [semi-]authoritative.
>
> One thing to take a cue from the App Store on is suggested reviews at
> time of plugin deactivation. If you delete an app from your iPhone, a
> dialog pops up and says "Would you like to review this app before
> deleting?" or somesuch, giving users an opportunity to register their
> complaints in a 1-5 star fashion.
>
> I've actually seen a couple of WP plugins that seem to do something
> similar -- Woopra comes readily to mind as one, as does Intense
> Debate.
>
> So I guess I'm saying that the problems are not insurmountable but do
> bear some special consideration prior to implementation time,
> particularly in accounting for potential griefers.
>
> --
> -Doug
> http://literalbarrage.org/blog/
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From photofantaisie at gmail.com  Thu Nov  5 22:34:17 2009
From: photofantaisie at gmail.com (Ade Walker)
Date: Thu, 5 Nov 2009 23:34:17 +0100
Subject: [wp-hackers] plugin compatability
In-Reply-To: <0016e6d64087ac36e304779c6404@google.com>
References: <0016e6d64087ac36e304779c6404@google.com>
Message-ID: <9dd057850911051434w14429c8bya9f424a1a787c97f@mail.gmail.com>

I have two problems with the new compatibility vote system:

1. What does a less than 100% "Works" compatibility rating actually mean to
the average plugin "searcher"? For example, go to
http://wordpress.org/extend/plugins/google-sitemap-generator/ and you will
see (at the time of writing this) that 4% of votes say "Broken". How am I,
the "average plugin searcher" to interpret this? That the plugin is no good?
That the plugin may not work? That it only works 96% of the time? It doesn't
mean any of these, of course, but I'm not sure that such a rating helps me
(the less tech-savvy user) to decide whether to use the plugin or not.

2. As mentioned by elflop, there is no way of knowing a voter's reason for
marking a plugin as Broken. Is it really broken, ie throws an error, or is
it just incompatible with another plugin? Or is the voter disatisfied with
the functionality? Or did he/she just get out of the wrong side of bed that
day? In other words, is the "customer" always right and, when he isn't, how
does the developer undo the damage which has been done?

On balance, I think it's a nice idea, with potential benefits of encouraging
authors of neglected plugins to resume development or, at least, to update
the readme.txt file. However, I think in reality there will be a large
number of plugins - including popular and generally well though-of plugins
(like the example I mentioned above) - having less than 100% compatibility
ratings. And I don't think anyone, whether end-user or developer, benefits
from this. :-/



2009/11/5 <elflop at googlemail.com>

> Sorry for sending this to the list, not sure where it should go.
>
> The new plugin compatibility section on a plugin page. As suspected I have
> recently had someone mark mine as 'broken' with the latest version of WP.
> Luckily others have marked it as 'Works'. I knew that at some point this
> would happen, and feel that it isn't good for plugins authors.
>

From Ken at adcSTUDIO.com  Thu Nov  5 22:50:27 2009
From: Ken at adcSTUDIO.com (Ken Newman)
Date: Thu, 05 Nov 2009 17:50:27 -0500
Subject: [wp-hackers] plugin compatability
In-Reply-To: <9dd057850911051434w14429c8bya9f424a1a787c97f@mail.gmail.com>
References: <0016e6d64087ac36e304779c6404@google.com>
	<9dd057850911051434w14429c8bya9f424a1a787c97f@mail.gmail.com>
Message-ID: <4AF356B3.4050905@adcSTUDIO.com>

On 11/5/2009 5:34 PM, Ade Walker wrote:
> I have two problems with the new compatibility vote system:
>
> 1. What does a less than 100% "Works" compatibility rating actually mean to
> the average plugin "searcher"? For example, go to
> http://wordpress.org/extend/plugins/google-sitemap-generator/ and you will
> see (at the time of writing this) that 4% of votes say "Broken". How am I,
> the "average plugin searcher" to interpret this? That the plugin is no good?
> That the plugin may not work? That it only works 96% of the time? It doesn't
> mean any of these, of course, but I'm not sure that such a rating helps me
> (the less tech-savvy user) to decide whether to use the plugin or not.
>    
1. Basically, your concern is one of display UI on the wordpress.org 
site. You'd rather them make the consensus more obvious. OK, so switch 
the display to read "Preliminary feedback: 96%" in small, then a big ol' 
fat "Consensus: GOOD TO GO!"

That should solve that problem.

Seriously, WordPress users are a pretty competent and fairly intelligent 
group. I'm sure that the 4% isn't turning many people off this plugin.

2. Undoing damage done. Yeah, this might be a concern, but as I 
understand it, Each version of wordpress, you get another fresh start! 
:) how great is that?

From william.canino at googlemail.com  Thu Nov  5 23:11:29 2009
From: william.canino at googlemail.com (William Canino)
Date: Thu, 5 Nov 2009 18:11:29 -0500
Subject: [wp-hackers] How to number the paged comments in theme Was:
	Tutorial for custom Walker_Comment ?
In-Reply-To: <7235ce780911050657s29f43262w3a67e144ed45d675@mail.gmail.com>
References: <e4dc67e0911042255q75925428r5a7e98f56e546a74@mail.gmail.com>
	<8b870c460911050612g353c710bpa1fc252e03778f42@mail.gmail.com>
	<7235ce780911050627k18cf2881k77ee15733953e65d@mail.gmail.com>
	<8b870c460911050651y75a28666s4a5b6565f44a5e0@mail.gmail.com>
	<7235ce780911050657s29f43262w3a67e144ed45d675@mail.gmail.com>
Message-ID: <e4dc67e0911051511n44624ac5i16e7706d21cc3f84@mail.gmail.com>

>> It accepts echo=false without any problem.

Yes it does. However, I may end up using ( get_comment_pages_count() >
1 ) as it is more good-looking.  That leaves me with the other
quandary:

> 1. My theme has no nested comments, but uses <ol> instead of <ul>
>
> How do I number the paged comments (<ol start="?"> to maintain comment
> numbering. For example, if I chose 10 comments per page, the comments
> at page two will start at 11. How do I get that 11?

Do you think

<ol start="<?php echo ( get_query_var('cpage') - 1 ) *
get_query_var('comments_per_page') + 1 ?>">

is okay and wouldn't cause problems or fail later?

I am just being careful about these undocumented functions.


2009/11/5 Mike Little <mike at zed1.com>:
> 2009/11/5 Andrew Nacin <anacin at gwhatchet.com>
>
>> >
>> > I don't believe that will work: the default comment_walker *always*
>> echoes.
>> >
>>
>> #10948 is for wp_list_comments()... paginate_comments_links() only relies
>> on
>> the walker to determine the number of pages required (and even then only
>> when threading is on, otherwise it uses $wp_query). ?It accepts echo=false
>> without any problem.
>>
>>
> Doh! That's what I get for not reading things properly, thanks for
> clarifying that.
>
> Mike
> --
> Mike Little
> http://zed1.com/
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From wp at xentek.net  Thu Nov  5 23:43:09 2009
From: wp at xentek.net (Eric Marden)
Date: Thu, 5 Nov 2009 18:43:09 -0500
Subject: [wp-hackers] plugin compatability
In-Reply-To: <4AF356B3.4050905@adcSTUDIO.com>
References: <0016e6d64087ac36e304779c6404@google.com>
	<9dd057850911051434w14429c8bya9f424a1a787c97f@mail.gmail.com>
	<4AF356B3.4050905@adcSTUDIO.com>
Message-ID: <BC688A39-CC01-400E-A545-43CEA067320C@xentek.net>

On Nov 5, 2009, at 5:34 PM, Ade Walker wrote:

> you will see (at the time of writing this) that 4% of votes say  
> "Broken". How am I,
> the "average plugin searcher" to interpret this? That the plugin is  
> no good?


On Nov 5, 2009, at 5:50 PM, Ken Newman wrote:

> but as I understand it, Each version of wordpress, you get another  
> fresh start! :) how great is that?


It seems to me that this was the exact reason it rolls to 0% on a new  
version, is a good enough solution to the (valid) concerns raised by  
Ade.

Besides, I'm not that attached to folks using my plugins... I release  
them so that I can take advantage of the auto-update feature, else I'd  
just leave them on my site and use my own source control server to  
package them for download. So if less than 100% turns them off from  
trying it, I won't be upset.


- Eric Marden
__________________________________
http://xentek.net/code/wordpress/






From hn at sacharis.no  Fri Nov  6 09:24:00 2009
From: hn at sacharis.no (Harald Nesland)
Date: Fri, 06 Nov 2009 10:24:00 +0100
Subject: [wp-hackers] Bug in automatic/ftp plugin update
Message-ID: <4AF3EB30.2080705@sacharis.no>

Hi,

Sorry if this isn't the right place, or if it is already fixed.

Just a minor spelling error ;-)


Index: wp-admin/includes/file.php
===================================================================
--- wp-admin/includes/file.php  (revision 12151)
+++ wp-admin/includes/file.php  (working copy)
@@ -840,8 +840,8 @@
         $disabled = defined('FTP_SSL') || defined('FTP_SSH') ? '' : ' 
disabled="disabled"';

         foreach ( $types as $name => $text ) : ?>
-       <label for="<?php echo esc_atr($name) ?>">
-               <input type="radio" name="connection_type" id="<?php 
echo esc_atr($name) ?>" value="<?php echo esc_atr($name) ?>" <?php 
checked($name, $connection_type); echo $disabled; ?>/>
+       <label for="<?php echo esc_attr($name) ?>">
+               <input type="radio" name="connection_type" id="<?php 
echo esc_attr($name) ?>" value="<?php echo esc_attr($name) ?>" <?php 
checked($name, $connection_type); echo $disabled; ?>/>
                 <?php echo $text ?>
         </label>
         <?php endforeach; ?>



From office at wpseek.com  Fri Nov  6 17:20:16 2009
From: office at wpseek.com (Oliver Schloebe)
Date: Fri, 06 Nov 2009 18:20:16 +0100
Subject: [wp-hackers] Bug in automatic/ftp plugin update
In-Reply-To: <4AF3EB30.2080705@sacharis.no>
References: <4AF3EB30.2080705@sacharis.no>
Message-ID: <4AF45AD0.6030207@wpseek.com>

Better open a new ticket here (if not already submitted): 
http://core.trac.wordpress.org/


On 06.11.2009 10:24, Harald Nesland wrote:
> Hi,
>
> Sorry if this isn't the right place, or if it is already fixed.
>
> Just a minor spelling error ;-)
>
>
> Index: wp-admin/includes/file.php
> ===================================================================
> --- wp-admin/includes/file.php  (revision 12151)
> +++ wp-admin/includes/file.php  (working copy)
> @@ -840,8 +840,8 @@
>         $disabled = defined('FTP_SSL') || defined('FTP_SSH') ? '' : ' 
> disabled="disabled"';
>
>         foreach ( $types as $name => $text ) : ?>
> - <label for="<?php echo esc_atr($name) ?>">
> - <input type="radio" name="connection_type" id="<?php echo 
> esc_atr($name) ?>" value="<?php echo esc_atr($name) ?>" <?php 
> checked($name, $connection_type); echo $disabled; ?>/>
> + <label for="<?php echo esc_attr($name) ?>">
> + <input type="radio" name="connection_type" id="<?php echo 
> esc_attr($name) ?>" value="<?php echo esc_attr($name) ?>" <?php 
> checked($name, $connection_type); echo $disabled; ?>/>
> <?php echo $text ?>
> </label>
> <?php endforeach; ?>
>
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

-- 
Regards,
Oliver Schl?be

http://wpseek.com/
http://wpworldmap.net/
http://www.schloebe.de/firefox-extensions/wordpress-helper/#english


From matt at sivel.net  Fri Nov  6 17:31:16 2009
From: matt at sivel.net (Matt Martz)
Date: Fri, 6 Nov 2009 12:31:16 -0500
Subject: [wp-hackers] Bug in automatic/ftp plugin update
In-Reply-To: <4AF45AD0.6030207@wpseek.com>
References: <4AF3EB30.2080705@sacharis.no> <4AF45AD0.6030207@wpseek.com>
Message-ID: <518fa9630911060931y3c878cdbw6e8da7244eb19a14@mail.gmail.com>

> Better open a new ticket here (if not already submitted):
> http://core.trac.wordpress.org/
>
>> Hi,
>>
>> Sorry if this isn't the right place, or if it is already fixed.
>>
>> Just a minor spelling error ;-)

Meant to mention this earlier,  But Andrew Ozz saw this message and
already committed the fix.

http://core.trac.wordpress.org/changeset/12152

-- 
Matt Martz
matt at sivel.net
http://sivel.net/

From steve at sltaylor.co.uk  Sat Nov  7 21:11:45 2009
From: steve at sltaylor.co.uk (Steve Taylor)
Date: Sat, 7 Nov 2009 21:11:45 +0000
Subject: [wp-hackers] custom Edit Pages screens
Message-ID: <a21f8bf00911071311l6b12d518ubda32679eafcd424@mail.gmail.com>

I'm working with a site with a lot of pages, some sectioned off into
distinct areas. It's becoming unmanageable to work with a specific
section, tabbing to the right page of the Edit Pages list all the time
- and it'd be unmanageable in a different way if I increased or
removed the pages-per-screen limit.

I thought it'd be good to add some custom Edit Pages screens to the
Pages menu in admin, each one only showing descendents of particular
pages that are the parents for separate sections of the site.

After looking into edit-pages.php for a while, I can't see an obvious
way to use this code (hooks, includes, whatever). I'm heading towards
copying it wholesale and tweaking. Anyone got a better idea?

thanks,

Steve Taylor

From scribu at gmail.com  Sat Nov  7 22:01:06 2009
From: scribu at gmail.com (scribu)
Date: Sun, 8 Nov 2009 00:01:06 +0200
Subject: [wp-hackers] custom Edit Pages screens
In-Reply-To: <a21f8bf00911071311l6b12d518ubda32679eafcd424@mail.gmail.com>
References: <a21f8bf00911071311l6b12d518ubda32679eafcd424@mail.gmail.com>
Message-ID: <349fe48b0911071401l66786f43l6462c4e553166d00@mail.gmail.com>

You can add a ?page_parent=124 and then hook into 'pre_get_posts' and add
that as a query_var.

The only roadblock is displaying the filter links. You'll probably have to
use JS for that.


-- 
http://scribu.net

From liste at srpski.biz  Sun Nov  8 12:42:23 2009
From: liste at srpski.biz (=?UTF-8?B?TWlsYW4gRGluacSH?=)
Date: Sun, 8 Nov 2009 13:42:23 +0100
Subject: [wp-hackers] Why strings aren't translated here?
In-Reply-To: <161617690911020710q73df03c0k51e750cf40c8a30b@mail.gmail.com>
References: <9b6c20460910291420y1d0419e8v15af8d3aab9ac75b@mail.gmail.com>
	<731931D6-D550-429F-B18C-7F5097DE020A@ftwr.co.uk>
	<9b6c20460910291435t33ec92f7iaeb10473463873fd@mail.gmail.com>
	<161617690910300858n442e9e66mcc3d1af2b17e039e@mail.gmail.com>
	<9b6c20460910301420k7fdcccdq3b71438237d01d38@mail.gmail.com>
	<161617690911020710q73df03c0k51e750cf40c8a30b@mail.gmail.com>
Message-ID: <9b6c20460911080442q2f4fefk1bc2292bab84d2a7@mail.gmail.com>

I solved this by placing another load_plugin_textdomain function in function
that is run on register_activation_hook. That way string is localized on
activation of plugin.

For second string I followed your advice and replaced variable with
function, and string is localized in function.

Thank you for your help.

2009/11/2 Otto <otto at ottodestruct.com>

> On Fri, Oct 30, 2009 at 3:20 PM, Milan Dini? <liste at srpski.biz> wrote:
> > Now I tried what you suggested ( $gse_options['tip_text'] =
> sprintf(__("It
> > seems that ... ) but it still doesn't translate that string. Maybe is
> > problem because it is run in register_activation_hook.
>
> Yes, that is indeed your problem. Or, rather, the lack of the init is
> your problem.
>
> When the activation hook fires, your plugin has just been included.
> Init occurred before that happened. So your init doesn't get run, and
> thus your text domain never gets loaded before you try to start
> translating things. You need to load the text domain before you use
> translation functions.
>
>
> -Otto
> Sent from Memphis, TN, United States
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From jer at simianuprising.com  Sun Nov  8 16:33:17 2009
From: jer at simianuprising.com (Jeremy Clarke)
Date: Sun, 8 Nov 2009 11:33:17 -0500
Subject: [wp-hackers] custom Edit Pages screens
In-Reply-To: <a21f8bf00911071311l6b12d518ubda32679eafcd424@mail.gmail.com>
References: <a21f8bf00911071311l6b12d518ubda32679eafcd424@mail.gmail.com>
Message-ID: <e1202cb10911080833p30feac52xc58fd7279b962b9f@mail.gmail.com>

On Sat, Nov 7, 2009 at 4:11 PM, Steve Taylor <steve at sltaylor.co.uk> wrote:
> After looking into edit-pages.php for a while, I can't see an obvious
> way to use this code (hooks, includes, whatever). I'm heading towards
> copying it wholesale and tweaking. Anyone got a better idea?

I have to recommend the Pagemash plugin:
http://wordpress.org/extend/plugins/pagemash/

It might not be the best solution for your particular situation since
it puts all pages on one screen, but if your browser can handle it its
incredibly powerful. IMHO its 'the missing page management tool' for
people who have a complex hierarchy, and if it ever breaks you're not
really any worse off than before, it just gives you a better way to
control things than Pages > Edit.

-- 
Jeremy Clarke | http://jeremyclarke.org
Code and Design | http://globalvoicesonline.org

From william.canino at googlemail.com  Sun Nov  8 18:48:39 2009
From: william.canino at googlemail.com (William Canino)
Date: Sun, 8 Nov 2009 13:48:39 -0500
Subject: [wp-hackers] How to number the paged comments in theme Was:
	Tutorial for custom Walker_Comment ?
In-Reply-To: <e4dc67e0911051511n44624ac5i16e7706d21cc3f84@mail.gmail.com>
References: <e4dc67e0911042255q75925428r5a7e98f56e546a74@mail.gmail.com>
	<8b870c460911050612g353c710bpa1fc252e03778f42@mail.gmail.com>
	<7235ce780911050627k18cf2881k77ee15733953e65d@mail.gmail.com>
	<8b870c460911050651y75a28666s4a5b6565f44a5e0@mail.gmail.com>
	<7235ce780911050657s29f43262w3a67e144ed45d675@mail.gmail.com>
	<e4dc67e0911051511n44624ac5i16e7706d21cc3f84@mail.gmail.com>
Message-ID: <e4dc67e0911081048o36389ca1jabd758530482e4f5@mail.gmail.com>

Buggers! get_comment_pages_count() returns more than 1 even if the
get_option('page_comments') setting is off. Therefore I gotta check
both conditions.

Reference: See http://phpxref.ftwr.co.uk/wordpress/wp-includes/comment.php.source.html#l588
.

A tip to anyone who is off to number the paged comments, too: <ol
start> only works with the "older comments at the top" setting,
because this tag doesn't do reverse numbering.


2009/11/5 William Canino <william.canino at googlemail.com>:
>>> It accepts echo=false without any problem.
>
> Yes it does. However, I may end up using ( get_comment_pages_count() >
> 1 ) as it is more good-looking. ?That leaves me with the other
> quandary:
>
>> 1. My theme has no nested comments, but uses <ol> instead of <ul>
>>
>> How do I number the paged comments (<ol start="?"> to maintain comment
>> numbering. For example, if I chose 10 comments per page, the comments
>> at page two will start at 11. How do I get that 11?
>
> Do you think
>
> <ol start="<?php echo ( get_query_var('cpage') - 1 ) *
> get_query_var('comments_per_page') + 1 ?>">
>
> is okay and wouldn't cause problems or fail later?
>
> I am just being careful about these undocumented functions.
>
>
> 2009/11/5 Mike Little <mike at zed1.com>:
>> 2009/11/5 Andrew Nacin <anacin at gwhatchet.com>
>>
>>> >
>>> > I don't believe that will work: the default comment_walker *always*
>>> echoes.
>>> >
>>>
>>> #10948 is for wp_list_comments()... paginate_comments_links() only relies
>>> on
>>> the walker to determine the number of pages required (and even then only
>>> when threading is on, otherwise it uses $wp_query). ?It accepts echo=false
>>> without any problem.
>>>
>>>
>> Doh! That's what I get for not reading things properly, thanks for
>> clarifying that.
>>
>> Mike
>> --
>> Mike Little
>> http://zed1.com/
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
>

From william.canino at googlemail.com  Sun Nov  8 19:17:09 2009
From: william.canino at googlemail.com (William Canino)
Date: Sun, 8 Nov 2009 14:17:09 -0500
Subject: [wp-hackers] SEO,
	How to turn off paged comments for search engine crawlers?
Message-ID: <e4dc67e0911081117j4ead9461h451eb94bc3b325b9@mail.gmail.com>

Paged comments introduce two SEO problems:

1. the article appears as duplicate content across several URLs
2. the pagerank is diluted across several URLs.

Four people have suggested solutions to this:

1. have all but the main permalink show an excerpt of the post,
2. add meta noindex nofollow to pages with older comments
3. add " - comment page $cpage" to the titles of pages with paged comments
4. hack paginate_comments_links, previous_comments_link() and
next_comments_link() to add the nofollow tag

Comments contain precious content sometimes. and it's a shame if the
search engines can't find and point to them.

I am thinking of a fifth solution, and would like your opinion.

5. only if useragent is a search engine crawler,
  a. turn off comment paging on the main permalink
  a. 301 redirect the pages with older comments to the main permalink,
yet maintaining the #comment-id.

Which one do you think would work best?

W

From mikeschinkel at newclarity.net  Sun Nov  8 19:29:40 2009
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Sun, 8 Nov 2009 11:29:40 -0800
Subject: [wp-hackers] SEO,
	How to turn off paged comments for search engine crawlers?
In-Reply-To: <e4dc67e0911081117j4ead9461h451eb94bc3b325b9@mail.gmail.com>
References: <e4dc67e0911081117j4ead9461h451eb94bc3b325b9@mail.gmail.com>
Message-ID: <08147935-CFF3-4BE3-9860-2E936EBDFFDA@newclarity.net>

Using rel="canonical" and then setting up a page that displays each  
comment by itself with a link back to its post to pass pagerank is a  
6th solution.

-Mike Schinkel
WordPress Custom Plugins
http://mikeschinkel.com/custom-wordpress-plugins/


On Nov 8, 2009, at 11:17 AM, William Canino wrote:

> Paged comments introduce two SEO problems:
>
> 1. the article appears as duplicate content across several URLs
> 2. the pagerank is diluted across several URLs.
>
> Four people have suggested solutions to this:
>
> 1. have all but the main permalink show an excerpt of the post,
> 2. add meta noindex nofollow to pages with older comments
> 3. add " - comment page $cpage" to the titles of pages with paged  
> comments
> 4. hack paginate_comments_links, previous_comments_link() and
> next_comments_link() to add the nofollow tag
>
> Comments contain precious content sometimes. and it's a shame if the
> search engines can't find and point to them.
>
> I am thinking of a fifth solution, and would like your opinion.
>
> 5. only if useragent is a search engine crawler,
>  a. turn off comment paging on the main permalink
>  a. 301 redirect the pages with older comments to the main permalink,
> yet maintaining the #comment-id.
>
> Which one do you think would work best?
>
> W
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers


From joost at yoast.com  Sun Nov  8 19:50:15 2009
From: joost at yoast.com (Joost de Valk)
Date: Sun, 8 Nov 2009 20:50:15 +0100
Subject: [wp-hackers] SEO,
	How to turn off paged comments for search engine crawlers?
Message-ID: <5267E548-3A18-445D-9EDA-5F58DD4CD11F@yoast.com>

Both solution 5 & 6 won't work.

5 is cloaking, which is considered illegal by the search engines and  
I'd highly advise against it.

6 is not going to work: canonical is meant to distinguish the one  
"true" (canonical) version of a document from copies of it. Giving  
each comment its own page would make each comment completely different  
from the original article, and thus wouldn't work with the  canonical  
tag.

To be honest there's only one real solution: disabling paged comments  
altogether. Even using the canonical tag on sub pages with other  
comments is a lousy solution.

Cheers,
Joost


Joost de Valk

Sent from my iPhone

On Nov 8, 2009, at 20:29, Mike Schinkel <mikeschinkel at newclarity.net>  
wrote:

> Using rel="canonical" and then setting up a page that displays each  
> comment by itself with a link back to its post to pass pagerank is a  
> 6th solution.
>
> -Mike Schinkel
> WordPress Custom Plugins
> http://mikeschinkel.com/custom-wordpress-plugins/
>
>
> On Nov 8, 2009, at 11:17 AM, William Canino wrote:
>
>> Paged comments introduce two SEO problems:
>>
>> 1. the article appears as duplicate content across several URLs
>> 2. the pagerank is diluted across several URLs.
>>
>> Four people have suggested solutions to this:
>>
>> 1. have all but the main permalink show an excerpt of the post,
>> 2. add meta noindex nofollow to pages with older comments
>> 3. add " - comment page $cpage" to the titles of pages with paged  
>> comments
>> 4. hack paginate_comments_links, previous_comments_link() and
>> next_comments_link() to add the nofollow tag
>>
>> Comments contain precious content sometimes. and it's a shame if the
>> search engines can't find and point to them.
>>
>> I am thinking of a fifth solution, and would like your opinion.
>>
>> 5. only if useragent is a search engine crawler,
>> a. turn off comment paging on the main permalink
>> a. 301 redirect the pages with older comments to the main permalink,
>> yet maintaining the #comment-id.
>>
>> Which one do you think would work best?
>>
>> W
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers


From mikeschinkel at newclarity.net  Sun Nov  8 21:31:01 2009
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Sun, 8 Nov 2009 13:31:01 -0800
Subject: [wp-hackers] SEO,
	How to turn off paged comments for search engine crawlers?
In-Reply-To: <5267E548-3A18-445D-9EDA-5F58DD4CD11F@yoast.com>
References: <5267E548-3A18-445D-9EDA-5F58DD4CD11F@yoast.com>
Message-ID: <1C0A7857-A4B9-41A6-B6D9-719DCCD82597@newclarity.net>

On Nov 8, 2009, at 11:50 AM, Joost de Valk wrote:
> 6 is not going to work: canonical is meant to distinguish the one  
> "true" (canonical) version of a document from copies of it. Giving  
> each comment its own page would make each comment completely  
> different from the original article, and thus wouldn't work with  
> the  canonical tag.

You misunderstood my suggestion. I apologize for not stating it  
clearly enough.  I'll use examples this time (these URLs are examples,  
not exact):

Assume a post called "My Post" with 25 comments and 10 comments per  
page.  You'd potentially have URLs of:

http://www.example.com/my-post/
http://www.example.com/my-post/comments/page-1/
http://www.example.com/my-post/comments/page-2/

Each of these would have a rel=canoncial that pointed to:

http://www.example.com/my-post/

In addition, you'd have 25 URL that look like this:

http://www.example.com/my-post/comments/1/
http://www.example.com/my-post/comments/2/
http://www.example.com/my-post/comments/3/
...
http://www.example.com/my-post/comments/25/

These pages would each have just one comment and would have a title  
being the first sentence of the comment and these pages would have  
links back to the post and they would NOT use rel=canonical.

There is significant benefit to this approach:

-- More pages means more SEO surface area,

-- More comments mean more URLs pointing back to the main post each  
passing a bit of page rank,

-- Unique pages for the comments so that really good comments can draw  
search engine traffic of their own,

-- Unique comment pages allow people on social media and blogs to link  
directly to specific comments without confusing the people following  
the links with the other comments, and 

-- In general, whenever possible, it's good to have a real link to  
each unique piece of content and a comment is a unique piece of content.

I hope that clarifies why my 6th option was not invalid as it appeared  
to be given my initial terse suggestion.


-Mike Schinkel
WordPress Custom Plugins
http://mikeschinkel.com/custom-wordpress-plugins/

P.S.  We could also <IFRAME> the canonical URL (i.e. http://www.example.com/my-post/ 
) and use HTTP_REFERER to known when to serve up only the raw content  
and thus allow all URLs shown above to have the content displayed for  
context but not have it duplicated anywhere.



From wp at xentek.net  Sun Nov  8 22:09:45 2009
From: wp at xentek.net (Eric Marden)
Date: Sun, 8 Nov 2009 17:09:45 -0500
Subject: [wp-hackers] Codex Question
Message-ID: <E35961BB-1F8B-468D-B75B-5E0258D79102@xentek.net>

I found a section of the codex that encourages a core hack to  
customize the Read More link:
http://codex.wordpress.org/Customizing_the_Read_More#Link_Jumps_to_More_or_Top_of_Page

Should I leave it for legacy reasons, or edit it out?


- Eric Marden
__________________________________
http://xentek.net/code/wordpress/
tw: @xentek





From lynne.pope at gmail.com  Sun Nov  8 23:02:05 2009
From: lynne.pope at gmail.com (Lynne Pope)
Date: Mon, 9 Nov 2009 12:02:05 +1300
Subject: [wp-hackers] Codex Question
In-Reply-To: <E35961BB-1F8B-468D-B75B-5E0258D79102@xentek.net>
References: <E35961BB-1F8B-468D-B75B-5E0258D79102@xentek.net>
Message-ID: <427667db0911081502o497e50cdje09a9fa1bbe7e90a@mail.gmail.com>

2009/11/9 Eric Marden <wp at xentek.net>

> I found a section of the codex that encourages a core hack to customize the
> Read More link:
>
> http://codex.wordpress.org/Customizing_the_Read_More#Link_Jumps_to_More_or_Top_of_Page
>
> Should I leave it for legacy reasons, or edit it out?
>

I'd remove it. There's information given on how to override the default in
the theme's functions.php (which should stay) but the Codex, IMO, should not
be encouraging core hacks. The core hacks are for WP 2.7.1 and lower and
WordPress has moved on from there. If you want to preserve it for legacy
purposes it would probably be better off being copied into a forum thread so
anyone searching for outdated info for some reason, can still find it.

Lynne
-- 
http://twitter.com/elpie/

From scribu at gmail.com  Sun Nov  8 23:20:30 2009
From: scribu at gmail.com (scribu)
Date: Mon, 9 Nov 2009 01:20:30 +0200
Subject: [wp-hackers] SEO,
	How to turn off paged comments for search 	engine crawlers?
In-Reply-To: <1C0A7857-A4B9-41A6-B6D9-719DCCD82597@newclarity.net>
References: <5267E548-3A18-445D-9EDA-5F58DD4CD11F@yoast.com>
	<1C0A7857-A4B9-41A6-B6D9-719DCCD82597@newclarity.net>
Message-ID: <349fe48b0911081520n446bb9bv8226b45e9c9754d4@mail.gmail.com>

Mike, I think your suggestion is already implemented by the SEO Super
Comments<http://www.prelovac.com/vladimir/wordpress-plugins/seo-super-comments>plugin.


-- 
http://scribu.net

From steve at sltaylor.co.uk  Sun Nov  8 23:53:55 2009
From: steve at sltaylor.co.uk (Steve Taylor)
Date: Sun, 8 Nov 2009 23:53:55 +0000
Subject: [wp-hackers] custom Edit Pages screens
In-Reply-To: <e1202cb10911080833p30feac52xc58fd7279b962b9f@mail.gmail.com>
References: <a21f8bf00911071311l6b12d518ubda32679eafcd424@mail.gmail.com>
	<e1202cb10911080833p30feac52xc58fd7279b962b9f@mail.gmail.com>
Message-ID: <a21f8bf00911081553v1ce20288p8a2f5dbec60b6eaf@mail.gmail.com>

Thanks Jeremy, the pageMash plugin is fantastic. Definitely a fine
replacement for My Page Order.

However, as you say, it's probably not ideal for me. The whole idea is
to be able to go to a list that only deals with a certain page's
descendents. pageMash makes it a little easier than WP's pagination,
but I assume it'll slow down when there's a lot of pages.

scribu, thanks for the tip - I'm experimenting now. So far the major
issue is that adding post_parent as a query_var returns *only*
immediate children of that page - and none of the other descendents.
Any ideas? I can't see an obvious query_var to set. I imagine the
get_pages() parameters are irrelevent here?

Steve


2009/11/8 Jeremy Clarke <jer at simianuprising.com>:
> On Sat, Nov 7, 2009 at 4:11 PM, Steve Taylor <steve at sltaylor.co.uk> wrote:
>> After looking into edit-pages.php for a while, I can't see an obvious
>> way to use this code (hooks, includes, whatever). I'm heading towards
>> copying it wholesale and tweaking. Anyone got a better idea?
>
> I have to recommend the Pagemash plugin:
> http://wordpress.org/extend/plugins/pagemash/
>
> It might not be the best solution for your particular situation since
> it puts all pages on one screen, but if your browser can handle it its
> incredibly powerful. IMHO its 'the missing page management tool' for
> people who have a complex hierarchy, and if it ever breaks you're not
> really any worse off than before, it just gives you a better way to
> control things than Pages > Edit.
>
> --
> Jeremy Clarke | http://jeremyclarke.org
> Code and Design | http://globalvoicesonline.org
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From mikeschinkel at newclarity.net  Mon Nov  9 01:23:13 2009
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Sun, 8 Nov 2009 20:23:13 -0500
Subject: [wp-hackers] SEO,
	How to turn off paged comments for search 	engine crawlers?
In-Reply-To: <349fe48b0911081520n446bb9bv8226b45e9c9754d4@mail.gmail.com>
References: <5267E548-3A18-445D-9EDA-5F58DD4CD11F@yoast.com>
	<1C0A7857-A4B9-41A6-B6D9-719DCCD82597@newclarity.net>
	<349fe48b0911081520n446bb9bv8226b45e9c9754d4@mail.gmail.com>
Message-ID: <00576DDA-6A96-42DF-8703-2F2013A8CDF7@newclarity.net>

On Nov 8, 2009, at 6:20 PM, scribu wrote:

> Mike, I think your suggestion is already implemented by the SEO Super
> Comments<http://www.prelovac.com/vladimir/wordpress-plugins/seo-super-comments 
> >plugin.

Cool.

Be nice if the approach because a standard pattern vs. obscurely  
implemented.  I can't tell you how many times I've wanted to link to a  
specific comment in a tweet, for example.  Standard patterns would  
empower many more blogs to enable that.

-Mike Schinkel
WordPress Custom Plugins
http://mikeschinkel.com/custom-wordpress-plugins/



From ceo at kettlewell.net  Mon Nov  9 07:25:04 2009
From: ceo at kettlewell.net (Matthew Kettlewell)
Date: Mon, 09 Nov 2009 00:25:04 -0700
Subject: [wp-hackers] body hook for add_filter ?
Message-ID: <4AF7C3D0.40006@kettlewell.net>

Is there a hook I can use in add_filter() that will return the entire 
contents within the body tags?

somthing like add_filter('entire_body_content', myfunc);

I didn't see anything in the codex, so thought I'd run it by you guys 
first before I use a series of add_filter()'s for a variety of hooks.

Thanks

Matt

-- 
~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~
Matthew Kettlewell - aka "The Dominator"
~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~
http://www.BloggingEmergency.com/



From anacin at gwhatchet.com  Mon Nov  9 07:37:21 2009
From: anacin at gwhatchet.com (Andrew Nacin)
Date: Mon, 9 Nov 2009 02:37:21 -0500
Subject: [wp-hackers] body hook for add_filter ?
In-Reply-To: <4AF7C3D0.40006@kettlewell.net>
References: <4AF7C3D0.40006@kettlewell.net>
Message-ID: <8b870c460911082337p3a9c65a1m2983159e55f081c3@mail.gmail.com>

>
> Is there a hook I can use in add_filter() that will return the entire
> contents within the body tags?
>

Check out PHP object buffering,
http://www.php.net/manual/en/ref.outcontrol.php. You can run ob_start (with
a callback) in wp_head.

From scribu at gmail.com  Mon Nov  9 09:48:04 2009
From: scribu at gmail.com (scribu)
Date: Mon, 9 Nov 2009 11:48:04 +0200
Subject: [wp-hackers] custom Edit Pages screens
In-Reply-To: <a21f8bf00911081553v1ce20288p8a2f5dbec60b6eaf@mail.gmail.com>
References: <a21f8bf00911071311l6b12d518ubda32679eafcd424@mail.gmail.com>
	<e1202cb10911080833p30feac52xc58fd7279b962b9f@mail.gmail.com>
	<a21f8bf00911081553v1ce20288p8a2f5dbec60b6eaf@mail.gmail.com>
Message-ID: <349fe48b0911090148y12095244m5f5ce8e446eddacc@mail.gmail.com>

On Mon, Nov 9, 2009 at 1:53 AM, Steve Taylor <steve at sltaylor.co.uk> wrote:

> scribu, thanks for the tip - I'm experimenting now. So far the major
> issue is that adding post_parent as a query_var returns *only*
> immediate children of that page - and none of the other descendents.
> Any ideas? I can't see an obvious query_var to set. I imagine the
> get_pages() parameters are irrelevent here?
>

You could manually get all the child page IDs and put them as 'post__in'.


-- 
http://scribu.net

From steve at sltaylor.co.uk  Mon Nov  9 16:14:32 2009
From: steve at sltaylor.co.uk (Steve Taylor)
Date: Mon, 9 Nov 2009 16:14:32 +0000
Subject: [wp-hackers] custom Edit Pages screens
In-Reply-To: <349fe48b0911090148y12095244m5f5ce8e446eddacc@mail.gmail.com>
References: <a21f8bf00911071311l6b12d518ubda32679eafcd424@mail.gmail.com>
	<e1202cb10911080833p30feac52xc58fd7279b962b9f@mail.gmail.com>
	<a21f8bf00911081553v1ce20288p8a2f5dbec60b6eaf@mail.gmail.com>
	<349fe48b0911090148y12095244m5f5ce8e446eddacc@mail.gmail.com>
Message-ID: <a21f8bf00911090814x5265a1f0raf884ae1dbab893b@mail.gmail.com>

> You could manually get all the child page IDs and put them as 'post__in'.

That works! Wasn't familiar with these under-the-hood paramters for a
query that aren't exposed by get_pages() etc.

Only problem left is the annoying bold "Parent Page: ..." markers that
are output. I've been trying in vain to hide them with CSS, but
selecting inner text but not child elements seems impossible. This is
the markup:

<strong><a title="Edit [page title]" href="[edit link]"
class="row-title">? ? [page title]</a> | Parent Page: [parent
title]</strong>

I tried:

table.page td.page-title strong { display: none; }
table.page td.page-title strong a { display: inline !important; }

But no luck. This kind of works:

table.page td.page-title strong { visibility: hidden; }
table.page td.page-title strong a { visibility: visible !important; }

But obviously there's random blank space everywhere.

Well, it probably would have taken less time by now to build my own
page from the ground up. Ah well! I have to leave this for now...
Thanks for the hints.

Steve

From cclarkson at htcomp.net  Mon Nov  9 20:27:56 2009
From: cclarkson at htcomp.net (Charles K. Clarkson)
Date: Mon, 09 Nov 2009 14:27:56 -0600
Subject: [wp-hackers] custom Edit Pages screens
In-Reply-To: <a21f8bf00911090814x5265a1f0raf884ae1dbab893b@mail.gmail.com>
References: <a21f8bf00911071311l6b12d518ubda32679eafcd424@mail.gmail.com>	<e1202cb10911080833p30feac52xc58fd7279b962b9f@mail.gmail.com>	<a21f8bf00911081553v1ce20288p8a2f5dbec60b6eaf@mail.gmail.com>	<349fe48b0911090148y12095244m5f5ce8e446eddacc@mail.gmail.com>
	<a21f8bf00911090814x5265a1f0raf884ae1dbab893b@mail.gmail.com>
Message-ID: <4AF87B4C.6050204@htcomp.net>

Steve Taylor wrote:
> Only problem left is the annoying bold "Parent Page: ..." markers that
> are output. I've been trying in vain to hide them with CSS, but
> selecting inner text but not child elements seems impossible. This is
> the markup:
> 
> <strong><a title="Edit [page title]" href="[edit link]"
> class="row-title">? ? [page title]</a> | Parent Page: [parent
> title]</strong>

jQuery is CSS 3 compliant and has functions to target inner text and html.



HTH,

Charles Clarkson
-- 
Mobile Home Investor
Free Market Advocate
Programmer

I'm not really a smart person. I just play one on the Internet.

Stephenville, TX
http://www.clarksonenergyhomes.com/wordpress/about/
http://twitter.com/CharlesClarkson
+1 (254) 968-8328


From Ken at adcSTUDIO.com  Mon Nov  9 20:30:46 2009
From: Ken at adcSTUDIO.com (Ken Newman)
Date: Mon, 09 Nov 2009 15:30:46 -0500
Subject: [wp-hackers] SEO,
 How to turn off paged comments for search engine crawlers?
In-Reply-To: <08147935-CFF3-4BE3-9860-2E936EBDFFDA@newclarity.net>
References: <e4dc67e0911081117j4ead9461h451eb94bc3b325b9@mail.gmail.com>
	<08147935-CFF3-4BE3-9860-2E936EBDFFDA@newclarity.net>
Message-ID: <4AF87BF6.3050503@adcSTUDIO.com>

or 7th: all comments on one page, use jQuery to collapse/psuedo-paginate 
comments.

From steve at sltaylor.co.uk  Mon Nov  9 20:34:41 2009
From: steve at sltaylor.co.uk (Steve Taylor)
Date: Mon, 9 Nov 2009 20:34:41 +0000
Subject: [wp-hackers] custom Edit Pages screens
In-Reply-To: <4AF87B4C.6050204@htcomp.net>
References: <a21f8bf00911071311l6b12d518ubda32679eafcd424@mail.gmail.com>
	<e1202cb10911080833p30feac52xc58fd7279b962b9f@mail.gmail.com>
	<a21f8bf00911081553v1ce20288p8a2f5dbec60b6eaf@mail.gmail.com>
	<349fe48b0911090148y12095244m5f5ce8e446eddacc@mail.gmail.com>
	<a21f8bf00911090814x5265a1f0raf884ae1dbab893b@mail.gmail.com>
	<4AF87B4C.6050204@htcomp.net>
Message-ID: <a21f8bf00911091234q31b4b4c8rcad052c75d13f00@mail.gmail.com>

Thanks. I was trying to stick with pure CSS to avoid the lag you
sometimes get altering CSS with JS. It might be the only option...

But out of curiosity, what are the CSS 3 selectors for this? I can't
find much out there to see if there's any browser support.

Steve

2009/11/9 Charles K. Clarkson <cclarkson at htcomp.net>:
> Steve Taylor wrote:
>>
>> Only problem left is the annoying bold "Parent Page: ..." markers that
>> are output. I've been trying in vain to hide them with CSS, but
>> selecting inner text but not child elements seems impossible. This is
>> the markup:
>>
>> <strong><a title="Edit [page title]" href="[edit link]"
>> class="row-title">? ? [page title]</a> | Parent Page: [parent
>> title]</strong>
>
> jQuery is CSS 3 compliant and has functions to target inner text and html.
>
>
>
> HTH,
>
> Charles Clarkson
> --
> Mobile Home Investor
> Free Market Advocate
> Programmer
>
> I'm not really a smart person. I just play one on the Internet.
>
> Stephenville, TX
> http://www.clarksonenergyhomes.com/wordpress/about/
> http://twitter.com/CharlesClarkson
> +1 (254) 968-8328
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From matt at mattjacob.com  Tue Nov 10 07:02:57 2009
From: matt at mattjacob.com (Matt Jacob)
Date: Tue, 10 Nov 2009 00:02:57 -0700
Subject: [wp-hackers] Best practice way for a plugin to use WP_Rewrite
Message-ID: <410963320911092302m2bf86b68n3e21d51886cff404@mail.gmail.com>

Hi everyone,

I've searched long and hard for a definitive answer to this question,
but I came across a lot of misinformation and bad advice along the
way. Basically, all I want to do is add a few known (not dynamic) URIs
to WordPress via a plugin---with pretty permalinks if they're enabled
and standard query string variables if they're not.

What I've got so far works perfectly fine, except in a couple edge
cases. I've got this function that's called on plugin activation and
when someone saves the plugin's options page:

    private function DeployRewriteRules() {
        global $wp_rewrite;

        add_filter('rewrite_rules_array', array($this, 'InsertRewriteRules'));
        $wp_rewrite->flush_rules();
    }

    public function InsertRewriteRules($rules) {
        $new_rules = array(
            'pingfm/post/([a-zA-Z0-9]{32})/?$' =>
'index.php?pa=post&pk=$matches[1]',
            'pingfm/status/([0-9]+)/?$'        =>
'index.php?pa=status&pi=$matches[1]',
            'pingfm/feed/?$'                   => 'index.php?pa=feed',
        );

        return $new_rules + $rules;
    }

Unfortunately, sometimes other things modify the rewrite rules, and
then my users have to deactivate/reactivate or save the plugin
settings page again in order to get mine back.

As of 2.8, I know I can hook into the "permalink_structure_changed"
action, and this gets me about 90% of the way there. The edge case I
mentioned earlier is when someone hits the save button on the
Permalink Settings page without actually changing anything. The new
rules are saved out, but the action is skipped over.

I *could* call my DeployRewriteRules() function on every page load,
but I know that flushing the rewrite rules is pretty
resource-intensive, and that's not acceptable to my users.

And that leaves me with this: what is the best practice method for
ensuring that my rewrite rules are present at every page load? Is
there one, or are there just varying degrees of bad methods? Would it
be feasible to add a "permalink_structure_saved" hook in a future
release?

Thanks!

Matt

From anacin at gwhatchet.com  Tue Nov 10 07:54:46 2009
From: anacin at gwhatchet.com (Andrew Nacin)
Date: Tue, 10 Nov 2009 02:54:46 -0500
Subject: [wp-hackers] How to number the paged comments in theme Was:
	Tutorial for custom Walker_Comment ?
In-Reply-To: <e4dc67e0911081048o36389ca1jabd758530482e4f5@mail.gmail.com>
References: <e4dc67e0911042255q75925428r5a7e98f56e546a74@mail.gmail.com> 
	<8b870c460911050612g353c710bpa1fc252e03778f42@mail.gmail.com> 
	<7235ce780911050627k18cf2881k77ee15733953e65d@mail.gmail.com> 
	<8b870c460911050651y75a28666s4a5b6565f44a5e0@mail.gmail.com> 
	<7235ce780911050657s29f43262w3a67e144ed45d675@mail.gmail.com> 
	<e4dc67e0911051511n44624ac5i16e7706d21cc3f84@mail.gmail.com> 
	<e4dc67e0911081048o36389ca1jabd758530482e4f5@mail.gmail.com>
Message-ID: <8b870c460911092354j63838b0emc17d5bf59ea12509@mail.gmail.com>

>
> A tip to anyone who is off to number the paged comments, too: <ol

start> only works with the "older comments at the top" setting,

because this tag doesn't do reverse numbering.


You can manually specify the value of a list item in HTML. Also, the HTML5
spec includes a reversed attribute for ordered lists, though I don't think
any browser implements it yet.

From wordpress at dd32.id.au  Tue Nov 10 08:41:32 2009
From: wordpress at dd32.id.au (Dion Hulse (dd32))
Date: Tue, 10 Nov 2009 19:41:32 +1100
Subject: [wp-hackers] Best practice way for a plugin to use WP_Rewrite
In-Reply-To: <410963320911092302m2bf86b68n3e21d51886cff404@mail.gmail.com>
References: <410963320911092302m2bf86b68n3e21d51886cff404@mail.gmail.com>
Message-ID: <op.u257rbguspxmuu@dd32>

On Tue, 10 Nov 2009 18:02:57 +1100, Matt Jacob <matt at mattjacob.com> wrote:
> And that leaves me with this: what is the best practice method for
> ensuring that my rewrite rules are present at every page load? Is
> there one, or are there just varying degrees of bad methods? Would it
> be feasible to add a "permalink_structure_saved" hook in a future
> release?

Simply add
add_filter('rewrite_rules_array', array($this, 'InsertRewriteRules'));
to your class's 'init' action function

You only call the flush on YOUR activations, but anytime the rules are  
flushed by anything, then your filter is hooked ready to fire.

Just hooking it by itself causes no negative effects.
-- 
Using Opera's revolutionary e-mail client: http://www.opera.com/mail/

From scribu at gmail.com  Tue Nov 10 12:20:48 2009
From: scribu at gmail.com (scribu)
Date: Tue, 10 Nov 2009 14:20:48 +0200
Subject: [wp-hackers] Best practice way for a plugin to use WP_Rewrite
In-Reply-To: <410963320911092302m2bf86b68n3e21d51886cff404@mail.gmail.com>
References: <410963320911092302m2bf86b68n3e21d51886cff404@mail.gmail.com>
Message-ID: <349fe48b0911100420i50145b7n5590345d2204ee86@mail.gmail.com>

A "permalink_structure_saved" hook sounds good.

Or even better would be if WP wouldn't regenerate the rules when the
user doesn't change anything.

On 11/10/09, Matt Jacob <matt at mattjacob.com> wrote:
> Hi everyone,
>
> I've searched long and hard for a definitive answer to this question,
> but I came across a lot of misinformation and bad advice along the
> way. Basically, all I want to do is add a few known (not dynamic) URIs
> to WordPress via a plugin---with pretty permalinks if they're enabled
> and standard query string variables if they're not.
>
> What I've got so far works perfectly fine, except in a couple edge
> cases. I've got this function that's called on plugin activation and
> when someone saves the plugin's options page:
>
>     private function DeployRewriteRules() {
>         global $wp_rewrite;
>
>         add_filter('rewrite_rules_array', array($this,
> 'InsertRewriteRules'));
>         $wp_rewrite->flush_rules();
>     }
>
>     public function InsertRewriteRules($rules) {
>         $new_rules = array(
>             'pingfm/post/([a-zA-Z0-9]{32})/?$' =>
> 'index.php?pa=post&pk=$matches[1]',
>             'pingfm/status/([0-9]+)/?$'        =>
> 'index.php?pa=status&pi=$matches[1]',
>             'pingfm/feed/?$'                   => 'index.php?pa=feed',
>         );
>
>         return $new_rules + $rules;
>     }
>
> Unfortunately, sometimes other things modify the rewrite rules, and
> then my users have to deactivate/reactivate or save the plugin
> settings page again in order to get mine back.
>
> As of 2.8, I know I can hook into the "permalink_structure_changed"
> action, and this gets me about 90% of the way there. The edge case I
> mentioned earlier is when someone hits the save button on the
> Permalink Settings page without actually changing anything. The new
> rules are saved out, but the action is skipped over.
>
> I *could* call my DeployRewriteRules() function on every page load,
> but I know that flushing the rewrite rules is pretty
> resource-intensive, and that's not acceptable to my users.
>
> And that leaves me with this: what is the best practice method for
> ensuring that my rewrite rules are present at every page load? Is
> there one, or are there just varying degrees of bad methods? Would it
> be feasible to add a "permalink_structure_saved" hook in a future
> release?
>
> Thanks!
>
> Matt
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>


-- 
http://scribu.net

From otto at ottodestruct.com  Tue Nov 10 14:38:54 2009
From: otto at ottodestruct.com (Otto)
Date: Tue, 10 Nov 2009 08:38:54 -0600
Subject: [wp-hackers] Best practice way for a plugin to use WP_Rewrite
In-Reply-To: <349fe48b0911100420i50145b7n5590345d2204ee86@mail.gmail.com>
References: <410963320911092302m2bf86b68n3e21d51886cff404@mail.gmail.com> 
	<349fe48b0911100420i50145b7n5590345d2204ee86@mail.gmail.com>
Message-ID: <161617690911100638x3ba4d9e3tf8f0294482d272d5@mail.gmail.com>

On Tue, Nov 10, 2009 at 6:20 AM, scribu <scribu at gmail.com> wrote:
> A "permalink_structure_saved" hook sounds good.
>
> Or even better would be if WP wouldn't regenerate the rules when the
> user doesn't change anything.

Erm.. I thought the flush only happened when the Permalink structure is saved.

-Otto

From scribu at gmail.com  Tue Nov 10 15:17:25 2009
From: scribu at gmail.com (scribu)
Date: Tue, 10 Nov 2009 17:17:25 +0200
Subject: [wp-hackers] Best practice way for a plugin to use WP_Rewrite
In-Reply-To: <161617690911100638x3ba4d9e3tf8f0294482d272d5@mail.gmail.com>
References: <410963320911092302m2bf86b68n3e21d51886cff404@mail.gmail.com>
	<349fe48b0911100420i50145b7n5590345d2204ee86@mail.gmail.com>
	<161617690911100638x3ba4d9e3tf8f0294482d272d5@mail.gmail.com>
Message-ID: <349fe48b0911100717q250d4620k20b699fd394df1e3@mail.gmail.com>

On Tue, Nov 10, 2009 at 4:38 PM, Otto <otto at ottodestruct.com> wrote:

> On Tue, Nov 10, 2009 at 6:20 AM, scribu <scribu at gmail.com> wrote:
> > A "permalink_structure_saved" hook sounds good.
> >
> > Or even better would be if WP wouldn't regenerate the rules when the
> > user doesn't change anything.
>
> Erm.. I thought the flush only happened when the Permalink structure is
> saved.
>
> -Otto
>

That's what I meant: don't flush rules when: a user saves the permalinks,
but without making any changes.


-- 
http://scribu.net

From matt at mattjacob.com  Tue Nov 10 15:19:37 2009
From: matt at mattjacob.com (Matt Jacob)
Date: Tue, 10 Nov 2009 08:19:37 -0700
Subject: [wp-hackers] Best practice way for a plugin to use WP_Rewrite
In-Reply-To: <349fe48b0911100717q250d4620k20b699fd394df1e3@mail.gmail.com>
References: <410963320911092302m2bf86b68n3e21d51886cff404@mail.gmail.com> 
	<349fe48b0911100420i50145b7n5590345d2204ee86@mail.gmail.com> 
	<161617690911100638x3ba4d9e3tf8f0294482d272d5@mail.gmail.com> 
	<349fe48b0911100717q250d4620k20b699fd394df1e3@mail.gmail.com>
Message-ID: <410963320911100719p6e4f36f4w8418006664537674@mail.gmail.com>

On Tue, Nov 10, 2009 at 8:17 AM, scribu <scribu at gmail.com> wrote:
> That's what I meant: don't flush rules when: a user saves the permalinks,
> but without making any changes.

Right. As it stands, you can go into your permalink options, make no
changes whatsoever, save, and the rules will still be flushed.

Matt

From matt at mattjacob.com  Tue Nov 10 15:40:01 2009
From: matt at mattjacob.com (Matt Jacob)
Date: Tue, 10 Nov 2009 08:40:01 -0700
Subject: [wp-hackers] Best practice way for a plugin to use WP_Rewrite
In-Reply-To: <op.u257rbguspxmuu@dd32>
References: <410963320911092302m2bf86b68n3e21d51886cff404@mail.gmail.com> 
	<op.u257rbguspxmuu@dd32>
Message-ID: <410963320911100740q34614becv2986b89f4ba747f7@mail.gmail.com>

On Tue, Nov 10, 2009 at 1:41 AM, Dion Hulse (dd32) <wordpress at dd32.id.au> wrote:
> Simply add
> add_filter('rewrite_rules_array', array($this, 'InsertRewriteRules'));
> to your class's 'init' action function
>
> You only call the flush on YOUR activations, but anytime the rules are
> flushed by anything, then your filter is hooked ready to fire.
>
> Just hooking it by itself causes no negative effects.

Thanks! I swear I had tried that before, but now it looks like
everything is working nicely. That was the answer I was looking for.

Matt

From otto at ottodestruct.com  Tue Nov 10 15:54:20 2009
From: otto at ottodestruct.com (Otto)
Date: Tue, 10 Nov 2009 09:54:20 -0600
Subject: [wp-hackers] Best practice way for a plugin to use WP_Rewrite
In-Reply-To: <349fe48b0911100717q250d4620k20b699fd394df1e3@mail.gmail.com>
References: <410963320911092302m2bf86b68n3e21d51886cff404@mail.gmail.com> 
	<349fe48b0911100420i50145b7n5590345d2204ee86@mail.gmail.com> 
	<161617690911100638x3ba4d9e3tf8f0294482d272d5@mail.gmail.com> 
	<349fe48b0911100717q250d4620k20b699fd394df1e3@mail.gmail.com>
Message-ID: <161617690911100754r4a65e6bduee42ca2e53a9f9a@mail.gmail.com>

On Tue, Nov 10, 2009 at 9:17 AM, scribu <scribu at gmail.com> wrote:
> That's what I meant: don't flush rules when: a user saves the permalinks,
> but without making any changes.

Yeah, but that strikes me as a good thing. I can't count the number of
times I've told people to go resave their permalinks to fix a problem
with the rewrite rules being all mucked up by some plugin.

-Otto
Sent from Memphis, TN, United States

From dave at technicacreative.co.uk  Tue Nov 10 15:56:32 2009
From: dave at technicacreative.co.uk (Dave Jones)
Date: Tue, 10 Nov 2009 15:56:32 +0000
Subject: [wp-hackers] Best practice way for a plugin to use WP_Rewrite
In-Reply-To: <161617690911100754r4a65e6bduee42ca2e53a9f9a@mail.gmail.com>
References: <410963320911092302m2bf86b68n3e21d51886cff404@mail.gmail.com>
	<349fe48b0911100420i50145b7n5590345d2204ee86@mail.gmail.com>
	<161617690911100638x3ba4d9e3tf8f0294482d272d5@mail.gmail.com>
	<349fe48b0911100717q250d4620k20b699fd394df1e3@mail.gmail.com>
	<161617690911100754r4a65e6bduee42ca2e53a9f9a@mail.gmail.com>
Message-ID: <40AFF1ED-9CED-4E16-8A80-C84BCC0C84DD@technicacreative.co.uk>

That's exactly what I was just thinking!



Dave Jones
www.technicacreative.co.uk

On 10 Nov 2009, at 15:54, Otto wrote:

> On Tue, Nov 10, 2009 at 9:17 AM, scribu <scribu at gmail.com> wrote:
>> That's what I meant: don't flush rules when: a user saves the  
>> permalinks,
>> but without making any changes.
>
> Yeah, but that strikes me as a good thing. I can't count the number of
> times I've told people to go resave their permalinks to fix a problem
> with the rewrite rules being all mucked up by some plugin.
>
> -Otto
> Sent from Memphis, TN, United States
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers


From scribu at gmail.com  Tue Nov 10 22:33:06 2009
From: scribu at gmail.com (scribu)
Date: Wed, 11 Nov 2009 00:33:06 +0200
Subject: [wp-hackers] Feed caching
Message-ID: <349fe48b0911101433q41fe36f3h96bddf394db64d2f@mail.gmail.com>

Does anybody have some clue on how and where feeds are cached and how
one might invalidate them, for debugging purposes?


-- 
http://scribu.net

From johnbillion+wp at gmail.com  Tue Nov 10 22:37:55 2009
From: johnbillion+wp at gmail.com (John Blackbourn)
Date: Tue, 10 Nov 2009 22:37:55 +0000
Subject: [wp-hackers] Feed caching
In-Reply-To: <349fe48b0911101433q41fe36f3h96bddf394db64d2f@mail.gmail.com>
References: <349fe48b0911101433q41fe36f3h96bddf394db64d2f@mail.gmail.com>
Message-ID: <1fa535a70911101437h7a1a7f09t8fc1ddfcc2e15c64@mail.gmail.com>

They're in the wp_options db table and they all start with rss_*

John

2009/11/10 scribu <scribu at gmail.com>:
> Does anybody have some clue on how and where feeds are cached and how
> one might invalidate them, for debugging purposes?
>
>
> --
> http://scribu.net
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From dave at technicacreative.co.uk  Tue Nov 10 22:54:31 2009
From: dave at technicacreative.co.uk (Dave Jones)
Date: Tue, 10 Nov 2009 22:54:31 +0000
Subject: [wp-hackers] Feed caching
In-Reply-To: <1fa535a70911101437h7a1a7f09t8fc1ddfcc2e15c64@mail.gmail.com>
References: <349fe48b0911101433q41fe36f3h96bddf394db64d2f@mail.gmail.com>
	<1fa535a70911101437h7a1a7f09t8fc1ddfcc2e15c64@mail.gmail.com>
Message-ID: <987891EF-E605-4D00-BACD-1DD7E9D6AC43@technicacreative.co.uk>

What are the one's that start _transient_feed ?

Dave Jones
www.technicacreative.co.uk


On 10 Nov 2009, at 22:37, John Blackbourn wrote:

> They're in the wp_options db table and they all start with rss_*
>
> John
>
> 2009/11/10 scribu <scribu at gmail.com>:
>> Does anybody have some clue on how and where feeds are cached and how
>> one might invalidate them, for debugging purposes?
>>
>>
>> --
>> http://scribu.net
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers


From steph at sillybean.net  Wed Nov 11 02:49:57 2009
From: steph at sillybean.net (Stephanie Leary)
Date: Tue, 10 Nov 2009 20:49:57 -0600
Subject: [wp-hackers] Feed caching
In-Reply-To: <349fe48b0911101433q41fe36f3h96bddf394db64d2f@mail.gmail.com>
References: <349fe48b0911101433q41fe36f3h96bddf394db64d2f@mail.gmail.com>
Message-ID: <C4DACA1F-5975-4B7B-9D4B-421213FF7457@sillybean.net>

On Nov 10, 2009, at 4:33 PM, scribu wrote:
> Does anybody have some clue on how and where feeds are cached and how
> one might invalidate them, for debugging purposes?

Changing the lifetime usually works for me. I dump this into  
functions.php:

// refresh RSS widgets every 2 minutes instead of 24 hours
add_filter( 'wp_feed_cache_transient_lifetime', create_function('$a',  
'return 120;') );


Stephanie Leary

From scribu at gmail.com  Wed Nov 11 02:55:37 2009
From: scribu at gmail.com (scribu)
Date: Wed, 11 Nov 2009 04:55:37 +0200
Subject: [wp-hackers] Feed caching
In-Reply-To: <987891EF-E605-4D00-BACD-1DD7E9D6AC43@technicacreative.co.uk>
References: <349fe48b0911101433q41fe36f3h96bddf394db64d2f@mail.gmail.com>
	<1fa535a70911101437h7a1a7f09t8fc1ddfcc2e15c64@mail.gmail.com>
	<987891EF-E605-4D00-BACD-1DD7E9D6AC43@technicacreative.co.uk>
Message-ID: <349fe48b0911101855gc7c8429udb16b41d7b123617@mail.gmail.com>

I'm pretty sure the ones starting with rss_* are for the admin dashboard.

I have no ideea what the _transient_feed_* ones are for.

On 11/11/09, Dave Jones <dave at technicacreative.co.uk> wrote:
> What are the one's that start _transient_feed ?
>
> Dave Jones
> www.technicacreative.co.uk
>
>
> On 10 Nov 2009, at 22:37, John Blackbourn wrote:
>
>> They're in the wp_options db table and they all start with rss_*
>>
>> John
>>
>> 2009/11/10 scribu <scribu at gmail.com>:
>>> Does anybody have some clue on how and where feeds are cached and how
>>> one might invalidate them, for debugging purposes?
>>>
>>>
>>> --
>>> http://scribu.net
>>> _______________________________________________
>>> wp-hackers mailing list
>>> wp-hackers at lists.automattic.com
>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>>
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>


-- 
http://scribu.net

From anacin at gwhatchet.com  Wed Nov 11 05:27:49 2009
From: anacin at gwhatchet.com (Andrew Nacin)
Date: Wed, 11 Nov 2009 00:27:49 -0500
Subject: [wp-hackers] Feed caching
In-Reply-To: <349fe48b0911101855gc7c8429udb16b41d7b123617@mail.gmail.com>
References: <349fe48b0911101433q41fe36f3h96bddf394db64d2f@mail.gmail.com> 
	<1fa535a70911101437h7a1a7f09t8fc1ddfcc2e15c64@mail.gmail.com> 
	<987891EF-E605-4D00-BACD-1DD7E9D6AC43@technicacreative.co.uk> 
	<349fe48b0911101855gc7c8429udb16b41d7b123617@mail.gmail.com>
Message-ID: <8b870c460911102127q4f446b4bp18ecf133c1a82a66@mail.gmail.com>

Looks like the _transient_feed_* transients are where feeds are cached (both
simplepie and magpierss use transients) and that the rss_* options are from
before 2.8 and the introduction of transients.

Not sure why rss_* options aren't removed in the upgrade process but I
assume there was a reason for not having that occur.

It's been previously mentioned that you could hook
into wp_feed_cache_transient_lifetime. I suppose you could set it to 0 but
it would be more efficient if you could hook directly into fetch_feed and
modify the Simplepie options. I submitted
http://core.trac.wordpress.org/ticket/11117 earlier today to address that.
That would allow you to do something like:

if ( defined('WP_DEBUG') && WP_DEBUG ) add_action('wp_feed_options',
'do_not_cache_feeds');
function do_not_cache_feeds(&$feed) {
$feed->enable_cache(false);
}

Andrew

From tunamaxx at yahoo.com  Wed Nov 11 07:56:17 2009
From: tunamaxx at yahoo.com (Tuna Can)
Date: Tue, 10 Nov 2009 23:56:17 -0800 (PST)
Subject: [wp-hackers] Best practice way for a plugin to use WP_Rewrite
In-Reply-To: <40AFF1ED-9CED-4E16-8A80-C84BCC0C84DD@technicacreative.co.uk>
Message-ID: <88432.93280.qm@web65701.mail.ac4.yahoo.com>

Please excuse a noob's first foray into [wp-hackers] but this thread is almost exactly why I signed up in the first place.

I am building a custom theme and including the option of 'taming' TimThumb URLs with a $non_wp_rules rewrite. Half of the problem was solved by Dion's:

add_filter('rewrite_rules_array', array($this, 'InsertRewriteRules'));

....but the rest of the problem lies in the fact that I can't seem to force a $wp_rewrite->flush_rules() when saving theme options. The only way I can get changes to permanently exist in .htaccess is by manually saving the Permalink options.

Is it possible to flush_rules() when saving theme options?

For more history on my question, please see my support topic on the .org forums:

http://wordpress.org/support/topic/324792

Thanks,

Tony


      __________________________________________________________________
Yahoo! Canada Toolbar: Search from anywhere on the web, and bookmark your favourite sites. Download it now
http://ca.toolbar.yahoo.com.


From frank at bueltge.de  Wed Nov 11 14:04:26 2009
From: frank at bueltge.de (Frank Bueltge)
Date: Wed, 11 Nov 2009 15:04:26 +0100
Subject: [wp-hackers] Feed caching
In-Reply-To: <349fe48b0911101433q41fe36f3h96bddf394db64d2f@mail.gmail.com>
References: <349fe48b0911101433q41fe36f3h96bddf394db64d2f@mail.gmail.com>
Message-ID: <db047a770911110604r459e2584u2192cd507888b010@mail.gmail.com>

@scribu: you must see what you wanr for a function, or? fetch_rss
works with Magpie and fetch_feed works with SimplePie now. In the
feature is this only SimplePie and then works the Hook for cachetime:
wp_feed_cache_transient_lifetime
With Mapie you must set the konstant: define('MAGPIE_CACHE_ON', 0);

*Sorry for my bad english!



On Tue, Nov 10, 2009 at 11:33 PM, scribu <scribu at gmail.com> wrote:
> Does anybody have some clue on how and where feeds are cached and how
> one might invalidate them, for debugging purposes?
>
>
> --
> http://scribu.net
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From otto at ottodestruct.com  Wed Nov 11 16:03:15 2009
From: otto at ottodestruct.com (Otto)
Date: Wed, 11 Nov 2009 10:03:15 -0600
Subject: [wp-hackers] Feed caching
In-Reply-To: <349fe48b0911101433q41fe36f3h96bddf394db64d2f@mail.gmail.com>
References: <349fe48b0911101433q41fe36f3h96bddf394db64d2f@mail.gmail.com>
Message-ID: <161617690911110803o7887a1b5oc8c811716b1ae23@mail.gmail.com>

Depends on whether you're using the old fetch_rss stuff or the fetch_feed stuff.

fetch_rss used Magpie, and is now deprecated. It stores them in the
options table with rss_garbage type keys.

fetch_feed uses SimplePie and the new transient options system.
Transients can be stored in many ways, but will probably be options
that start with _transient_ as the key name.

_transient_feed_* will be the feed's content.
_transient_feed_mod_* will be the feed's last modification time.

-Otto
Sent from Memphis, TN, United States


On Tue, Nov 10, 2009 at 4:33 PM, scribu <scribu at gmail.com> wrote:
> Does anybody have some clue on how and where feeds are cached and how
> one might invalidate them, for debugging purposes?

From golunski at onet.eu  Wed Nov 11 17:08:04 2009
From: golunski at onet.eu (Dawid Golunski)
Date: Wed, 11 Nov 2009 17:08:04 +0000
Subject: [wp-hackers] WordPress <= 2.8.5 Unrestricted File Upload Arbitrary
	PHP Code Execution
Message-ID: <F941938E-AB91-4AEB-B188-93D29C603196@onet.eu>

=============================================
- Release date: November 11th, 2009
- Discovered by: Dawid Golunski
- Severity: Moderately High
=============================================

I. VULNERABILITY
-------------------------
WordPress <= 2.8.5 Unrestricted File Upload Arbitrary PHP Code Execution

II. BACKGROUND
-------------------------
WordPress is a state-of-the-art publishing platform with a focus on  
aesthetics, web standards,
and  usability. WordPress is both free and priceless at the same time.  
More simply, WordPress is
what you use when you want to work with your blogging software, not  
fight it.

III. DESCRIPTION
-------------------------

Wordpress allows authorised users to add an attachment to a blog post.
It does not sanitize provided file properly before moving it to an  
uploads directory.

The part of the code responsible for uploading files looks as follows:

wp-admin/includes/file.php:
---[cut]---
line 217:
function wp_handle_upload( &$file, $overrides = false, $time = null ) {
---[cut]---
// All tests are on by default. Most can be turned off by  
$override[{test_name}] = false;
$test_form = true;
$test_size = true;

// If you override this, you must provide $ext and $type!!!!
$test_type = true;
$mimes = false;
---[cut]---

// A properly uploaded file will pass this test. There should be no  
reason to override this one.
if (! @ is_uploaded_file( $file['tmp_name'] ) )
         return $upload_error_handler( $file, __( 'Specified file  
failed upload test.' ));

// A correct MIME type will pass this test. Override $mimes or use the  
upload_mimes filter.
if ( $test_type ) {
         $wp_filetype = wp_check_filetype( $file['name'], $mimes );

         extract( $wp_filetype );

         if ( ( !$type || !$ext ) && ! 
current_user_can( 'unfiltered_upload' ) )
                 return $upload_error_handler( $file,
					       __( 'File type does not meet security guidelines. Try  
another.' ));

         if ( !$ext )
                 $ext = ltrim(strrchr($file['name'], '.'), '.');

         if ( !$type )
                 $type = $file['type'];
} else {
         $type = '';
}

// A writable uploads dir will pass this test. Again, there's no point  
overriding this one.
if ( ! ( ( $uploads = wp_upload_dir($time) ) && false ===  
$uploads['error'] ) )
         return $upload_error_handler( $file, $uploads['error'] );

$filename = wp_unique_filename( $uploads['path'], $file['name'],  
$unique_filename_callback );

// Move the file to the uploads dir
$new_file = $uploads['path'] . "/$filename";
if ( false === @ move_uploaded_file( $file['tmp_name'], $new_file ) ) {
         return $upload_error_handler( $file,
		   sprintf( __('The uploaded file could not be moved to %s.' ),  
$uploads['path'] ) );
}
---[cut ]---

 From the above code we can see that provided filename gets checked  
with:
$wp_filetype = wp_check_filetype( $file['name'], $mimes );

Here is how the wp_check_filetype() function looks like:

wp-includes/functions.php:
---[cut]---
line 2228:

function wp_check_filetype( $filename, $mimes = null ) {
         // Accepted MIME types are set here as PCRE unless provided.
         $mimes = ( is_array( $mimes ) ) ? $mimes :  
apply_filters( 'upload_mimes', array(
                 'jpg|jpeg|jpe' => 'image/jpeg',
                 'gif' => 'image/gif',
                 'png' => 'image/png',
                 'bmp' => 'image/bmp',
                 'tif|tiff' => 'image/tiff',
                 'ico' => 'image/x-icon',
                 'asf|asx|wax|wmv|wmx' => 'video/asf',
                 'avi' => 'video/avi',
				
				---[cut, more mime types]---
line 2279:

         $type = false;
         $ext = false;

         foreach ( $mimes as $ext_preg => $mime_match ) {
                 $ext_preg = '!\.(' . $ext_preg . ')$!i';
                 if ( preg_match( $ext_preg, $filename,  
$ext_matches ) ) {
                         $type = $mime_match;
                         $ext = $ext_matches[1];
                         break;
                 }
         }

         return compact( 'ext', 'type' );
}

We can see that type of the file gets set to a predefined MIME type  
that matches supplied
extension, and that the extension is obtained from a regexp that  
matches a mime ext. string after
the LAST dot.
If extension is not on the list $type and $ext will be set to FALSE  
and wordpress will
produce an error ("File type does not meet security guidelines. Try  
another").

Let's look at the other check that is performed on the filename before  
a file gets uploaded,
that is a call to the following function:
$filename = wp_unique_filename( $uploads['path'], $file['name'],  
$unique_filename_callback );


wp-includes/functions.php:
line 2096:
function wp_unique_filename( $dir, $filename,  
$unique_filename_callback = null ) {
         // sanitize the file name before we begin processing
         $filename = sanitize_file_name($filename);

         ---[cut, code that only matters if uploaded file already  
exists]---
line 2126:
		return $filename;
}

To have a complete view on file sanitization performed by wordpress we  
need to look into the
sanitize_file_name() function:

wp-includes/formatting.php:
line 601:
function sanitize_file_name( $filename ) {
         $filename_raw = $filename;
         $special_chars = array("?", "[", "]", "/", "\\", "=", "<",  
">", ":", ";", ",", "'", "\"",
				"&", "$", "#", "*", "(", ")", "|", "~", "`", "!", "{", "}", chr(0));
         $special_chars = apply_filters('sanitize_file_name_chars',  
$special_chars, $filename_raw);
         $filename = str_replace($special_chars, '', $filename);
         $filename = preg_replace('/[\s-]+/', '-', $filename);
         $filename = trim($filename, '.-_');
         return apply_filters('sanitize_file_name', $filename,  
$filename_raw);
}

This function removes special characters shown above, replaces spaces  
and consecutive dashes with
a single dash, trims period, dash and underscore from beginning and  
end of the filename.

The sanitization process appears quite extensive however it does not  
take into account files that
have multiple extensions.
It is possible to upload a file containing an arbitrary PHP script  
with an extension of '.php.jpg'
and execute it by requesting the uploaded file directly.


The execution of the PHP code despite the .php.jpg extension is  
possible because Apache
allows for multiple extensions. Here is a quote from Apache docs  
regarding this matter:

"
Files can have more than one extension, and the order of the  
extensions is normally irrelevant.
For example, if the file welcome.html.fr maps onto content type text/ 
html and language French then
the file welcome.fr.html will map onto exactly the same information.  
If more than one extension is
given that maps onto the same type of meta-information, then the one  
to the right will be used,
except for languages and content encodings. For example, if .gif maps  
to the MIME-type  image/gif
and .html maps to the MIME-type text/html, then the file  
welcome.gif.html will be associated with
the MIME-type text/html.

Care should be taken when a file with multiple extensions gets  
associated with both a MIME-type
and a handler. This will usually result in the request being handled  
by the module associated with
the handler. For example, if the .imap  extension is mapped to the  
handler imap-file
(from mod_imagemap) and the .html extension is mapped to the MIME-type  
text/html, then the file
world.imap.html will be associated with both the imap-file handler and  
text/html MIME-type.
When it is processed, the imap-file handler will be used, and so it  
will be treated as a
mod_imagemap imagemap file.
"

IV. PROOF OF CONCEPT
-------------------------
Browser is enough to replicate this issue. Simply log in to your  
wordpress blog as a low privileged
user or admin. Create a new post and use the media file upload feature  
to upload a file:

test-image.php.jpg

containing the following code:

<?php
	phpinfo();
?>

After the upload you should receive a positive response saying:

test-vuln.php.jpg
image/jpeg
2009-11-11

and it should be possible to request the uploaded file via a link:
http://link-to-our-wp-unsecured-blog.com/wp-content/uploads/2009/11/test-vuln.php.jpg

thus executing the PHP code it contains.

In the above code example, a php info page will be shown.

V. BUSINESS IMPACT
-------------------------
An attacker that has already obtained login details (for example by  
stealing user's cookies with
an XSS attack) to the blog as one of the existing users could exploit  
this vulnerability to get
access to the system in the Apache user's context.
 From there he could use local bugs to further escalate the  
privileges. Apache account would be
enough in most cases to view the source codes and gain access to the  
databases.

Some wordpress users of the 2.8.5 release have reported that some php  
files have been added to
their wordpress directory. It could be possible that they have been  
hit by this bug. Therefore it
is important to take some countermeasures as soon as possible.

VI. SYSTEMS AFFECTED
-------------------------
Most likely all of the wordpress releases contain this bug. Including  
the current hardened stable
release 2.8.5 and the beta version.

VII. SOLUTION
-------------------------
Vendor has been informed about the bug. Currently wordpress developers  
and contributors are in
the process of bug hunting and fixing reported bugs in beta versions  
before the new stable release,
so hopefully it should not take long for them to take this problem  
into account.

You can apply the temporary solutions for this problem which I provide  
below before an official
patch is made.

You can create a .htaccess file in the uploads dir (wordpress/wp- 
content/uploads) with
the following content:

deny from all
<Files ~ "^\w+\.(gif|jpe?g|png|avi)$">
	order deny,allow
	allow from all
</Files>

Adjust allowed file extensions in the brackets if necessary.
This will prevent Apache from serving files with double extensions  
inside the uploads directory.

Alternatively you can try to patch the source code yourself by editing  
the
wp-admin/includes/file.php file and the wp_handle_upload() function it  
contains. An example patch
could be to add the following three lines of code at the line 260:

// Fix Unrestricted File Upload Arbitrary PHP Code Execution bug,  
return if more than 1 extension provided
if ( count(explode('.', $file['name'])) > 2 );
         return $upload_error_handler( $file, __( 'File type does not  
meet security guidelines. Try another.' ));


VIII. REFERENCES
-------------------------
http://www.wordpress.org
http://httpd.apache.org/docs/2.2/mod/mod_mime.html#multipleext

IX. CREDITS
-------------------------
This vulnerability has been discovered by Dawid Golunski
golunski (at) onet (dot) eu

Greetings go to: robxt, sajanek, xsoti, bart, falcon (for the old  
time's sake :) and complexmind

X. REVISION HISTORY
-------------------------
November 11th, 2009: Initial release

XI. LEGAL NOTICES
-------------------------
The information contained within this advisory is supplied "as-is"  
with no warranties or guarantees of fitness of
use or otherwise. I accept no responsibility for any damage caused by  
the use or misuse of this information.


From kkarpieszuk at gmail.com  Wed Nov 11 17:15:11 2009
From: kkarpieszuk at gmail.com (Konrad Karpieszuk)
Date: Wed, 11 Nov 2009 18:15:11 +0100
Subject: [wp-hackers] some problem with javascript in widgets options?
Message-ID: <67dfa4090911110915i1a63e9danef62d38ce59a9dd6@mail.gmail.com>

hi

Sorry but i need to ask here. Since yesterday i try to find solution,
i asked in many places (also at wp forum) but nobody knows the answer.
this is why i thing that this is problem with javascript

first of all: problem exists in firefox and chrome (both on linux and
windows). but everything works great in opera (linux and windows) and
IE (windows)

when i try to add widget (i am in wp-admin > widgets) i drag any
widget from center of page to right panel, where i drop it. this small
throbber (animated circle) start to work which shows me that wordpress
started to save my widget. but throbber don't stop, it is animating
and animating (i waited even few minutes). when i click on Save
button, throbber stops and dissapear (what shows me, or better
suggests me that widget in sidebar is saved)

but when i refresh site, i dont see nothing new in sidebar. also when
i refresh wp-admin, right panel in widgets.php is empty. so widget
truelly wasn't saved.

i have wp 2.8.5 with no plugins and themes (i use default theme). i
have many more installations of wp, but only in this one case widgets
doesn't work

please, any suggestion how to fix it? what can i check, how i can
reapir this? where in mysql widgets are saved, how it works?

some tip: i was creating new theme, i registered sidebar to
function.php and i named sidebar with long name (about 30 letters).
maybe this was a reason why widgets doesn't work now? maybe mysql cell
doesn't allow long widget name and i destroyed something?

p.s. this is my post from yesterday at forum, there you havve some
more information http://wordpress.org/support/topic/330237?replies=1

-- 
(en) regards / (pl) pozdrawiam
Konrad Karpieszuk
http://konradjestwrwandzie.wordpress.com/

From jer at simianuprising.com  Wed Nov 11 17:23:14 2009
From: jer at simianuprising.com (Jeremy Clarke)
Date: Wed, 11 Nov 2009 12:23:14 -0500
Subject: [wp-hackers] WordPress <= 2.8.5 Unrestricted File Upload
	Arbitrary PHP Code Execution
In-Reply-To: <F941938E-AB91-4AEB-B188-93D29C603196@onet.eu>
References: <F941938E-AB91-4AEB-B188-93D29C603196@onet.eu>
Message-ID: <e1202cb10911110923p42b32e90n718c8c937fec248e@mail.gmail.com>

.htaccess idea sounds really lightweight and nice. A related solution
is to turn off PHP execution in the apache config for your server (if
you have access) for any directories that are writable. At one point
attackers had uploaded php files without any .php extension in them
and were managing to load them, but this stopped it.

	# Cache dir
	<Directory /var/www/path_to_site/wp-content/cache>
		AllowOverride None
		php_admin_flag engine off
		php_admin_value open_basedir none
	</Directory>
	# media upload dir
	<Directory /var/www/path_to_site/wp-content/uploads>
		AllowOverride None
		php_admin_flag engine off
		php_admin_value open_basedir none
	</Directory>

It leaves room for other types of code if your server is configured to
run them though.


--
Jeremy Clarke | http://jeremyclarke.org
Code and Design | http://globalvoicesonline.org

From dave at technicacreative.co.uk  Wed Nov 11 17:37:40 2009
From: dave at technicacreative.co.uk (Dave Jones)
Date: Wed, 11 Nov 2009 17:37:40 +0000
Subject: [wp-hackers] WordPress <= 2.8.5 Unrestricted File Upload
	Arbitrary PHP Code Execution
In-Reply-To: <e1202cb10911110923p42b32e90n718c8c937fec248e@mail.gmail.com>
References: <F941938E-AB91-4AEB-B188-93D29C603196@onet.eu>
	<e1202cb10911110923p42b32e90n718c8c937fec248e@mail.gmail.com>
Message-ID: <B10BC7B4-7DAE-47E3-AA0E-9A3EACA5EAEC@technicacreative.co.uk>

This will work for mod_php based installs but what about sites hosted  
on shared servers?  Most shared servers rely on FastCGI/suPHP for  
security.  I've tried php_admin_flag and php_flag in .htaccess and  
they both produce config errors.

Any suggestions would be warmly received.

Dave Jones
www.technicacreative.co.uk


On 11 Nov 2009, at 17:23, Jeremy Clarke wrote:

> .htaccess idea sounds really lightweight and nice. A related solution
> is to turn off PHP execution in the apache config for your server (if
> you have access) for any directories that are writable. At one point
> attackers had uploaded php files without any .php extension in them
> and were managing to load them, but this stopped it.
>
> 	# Cache dir
> 	<Directory /var/www/path_to_site/wp-content/cache>
> 		AllowOverride None
> 		php_admin_flag engine off
> 		php_admin_value open_basedir none
> 	</Directory>
> 	# media upload dir
> 	<Directory /var/www/path_to_site/wp-content/uploads>
> 		AllowOverride None
> 		php_admin_flag engine off
> 		php_admin_value open_basedir none
> 	</Directory>
>
> It leaves room for other types of code if your server is configured to
> run them though.
>
>
> --
> Jeremy Clarke | http://jeremyclarke.org
> Code and Design | http://globalvoicesonline.org
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers


From otto at ottodestruct.com  Wed Nov 11 17:48:24 2009
From: otto at ottodestruct.com (Otto)
Date: Wed, 11 Nov 2009 11:48:24 -0600
Subject: [wp-hackers] WordPress <= 2.8.5 Unrestricted File Upload
	Arbitrary PHP Code Execution
In-Reply-To: <F941938E-AB91-4AEB-B188-93D29C603196@onet.eu>
References: <F941938E-AB91-4AEB-B188-93D29C603196@onet.eu>
Message-ID: <161617690911110948h359a0ec0m8d4fc8a08b761d99@mail.gmail.com>

This seems like an Apache configuration problem to me. There are no
circumstances I can think of where I'd want test.php.jpg to be
executed as PHP by Apache.

A suggestion of an Apache configuration to disallow this type of thing
in the first place would be more helpful than resorting to .htaccess
hacks.

-Otto



On Wed, Nov 11, 2009 at 11:08 AM, Dawid Golunski <golunski at onet.eu> wrote:
> The execution of the PHP code despite the .php.jpg extension is possible
> because Apache
> allows for multiple extensions. Here is a quote from Apache docs regarding
> this matter:
>
> "
> Files can have more than one extension, and the order of the extensions is
> normally irrelevant.
> For example, if the file welcome.html.fr maps onto content type text/html
> and language French then
> the file welcome.fr.html will map onto exactly the same information. If more
> than one extension is
> given that maps onto the same type of meta-information, then the one to the
> right will be used,
> except for languages and content encodings. For example, if .gif maps to the
> MIME-type ?image/gif
> and .html maps to the MIME-type text/html, then the file welcome.gif.html
> will be associated with
> the MIME-type text/html.
>
> Care should be taken when a file with multiple extensions gets associated
> with both a MIME-type
> and a handler. This will usually result in the request being handled by the
> module associated with
> the handler. For example, if the .imap ?extension is mapped to the handler
> imap-file
> (from mod_imagemap) and the .html extension is mapped to the MIME-type
> text/html, then the file
> world.imap.html will be associated with both the imap-file handler and
> text/html MIME-type.
> When it is processed, the imap-file handler will be used, and so it will be
> treated as a
> mod_imagemap imagemap file.
> "
>
> IV. PROOF OF CONCEPT
> -------------------------
> Browser is enough to replicate this issue. Simply log in to your wordpress
> blog as a low privileged
> user or admin. Create a new post and use the media file upload feature to
> upload a file:
>
> test-image.php.jpg
>
> containing the following code:
>
> <?php
> ? ? ? ?phpinfo();
> ?>
>
> After the upload you should receive a positive response saying:
>
> test-vuln.php.jpg
> image/jpeg
> 2009-11-11
>
> and it should be possible to request the uploaded file via a link:
> http://link-to-our-wp-unsecured-blog.com/wp-content/uploads/2009/11/test-vuln.php.jpg
>
> thus executing the PHP code it contains.

From jer at simianuprising.com  Wed Nov 11 17:54:27 2009
From: jer at simianuprising.com (Jeremy Clarke)
Date: Wed, 11 Nov 2009 12:54:27 -0500
Subject: [wp-hackers] WordPress <= 2.8.5 Unrestricted File Upload
	Arbitrary PHP Code Execution
In-Reply-To: <161617690911110948h359a0ec0m8d4fc8a08b761d99@mail.gmail.com>
References: <F941938E-AB91-4AEB-B188-93D29C603196@onet.eu>
	<161617690911110948h359a0ec0m8d4fc8a08b761d99@mail.gmail.com>
Message-ID: <e1202cb10911110954r1adc2cbv1c984040b9b6e120@mail.gmail.com>

On Wed, Nov 11, 2009 at 12:48 PM, Otto <otto at ottodestruct.com> wrote:
> This seems like an Apache configuration problem to me. There are no
> circumstances I can think of where I'd want test.php.jpg to be
> executed as PHP by Apache.

I think the example would be if you were using php with GD or
something to output images on the fly (maybe with a caching layer in
the php). There must be some plugins out there that use this trick, I
know i've seen it before. It might be that this should be the
.htaccess hack and not the standard though.

-- 
Jeremy Clarke
Code and Design | globalvoicesonline.org

From dave at technicacreative.co.uk  Wed Nov 11 18:00:34 2009
From: dave at technicacreative.co.uk (Dave Jones)
Date: Wed, 11 Nov 2009 18:00:34 +0000
Subject: [wp-hackers] WordPress <= 2.8.5 Unrestricted File Upload
	Arbitrary PHP Code Execution
In-Reply-To: <161617690911110948h359a0ec0m8d4fc8a08b761d99@mail.gmail.com>
References: <F941938E-AB91-4AEB-B188-93D29C603196@onet.eu>
	<161617690911110948h359a0ec0m8d4fc8a08b761d99@mail.gmail.com>
Message-ID: <AA0420DF-BB03-4850-A71F-29740D542433@technicacreative.co.uk>

I was testing test.php - I have to agree with Otto on none of my  
servers does test.php.jpg return anything but an empty image.

Looks like this is a false alarm.

Dave Jones
www.technicacreative.co.uk


On 11 Nov 2009, at 17:48, Otto wrote:

> This seems like an Apache configuration problem to me. There are no
> circumstances I can think of where I'd want test.php.jpg to be
> executed as PHP by Apache.
>
> A suggestion of an Apache configuration to disallow this type of thing
> in the first place would be more helpful than resorting to .htaccess
> hacks.
>
> -Otto
>
>
>
> On Wed, Nov 11, 2009 at 11:08 AM, Dawid Golunski <golunski at onet.eu>  
> wrote:
>> The execution of the PHP code despite the .php.jpg extension is  
>> possible
>> because Apache
>> allows for multiple extensions. Here is a quote from Apache docs  
>> regarding
>> this matter:
>>
>> "
>> Files can have more than one extension, and the order of the  
>> extensions is
>> normally irrelevant.
>> For example, if the file welcome.html.fr maps onto content type  
>> text/html
>> and language French then
>> the file welcome.fr.html will map onto exactly the same  
>> information. If more
>> than one extension is
>> given that maps onto the same type of meta-information, then the  
>> one to the
>> right will be used,
>> except for languages and content encodings. For example, if .gif  
>> maps to the
>> MIME-type  image/gif
>> and .html maps to the MIME-type text/html, then the file  
>> welcome.gif.html
>> will be associated with
>> the MIME-type text/html.
>>
>> Care should be taken when a file with multiple extensions gets  
>> associated
>> with both a MIME-type
>> and a handler. This will usually result in the request being  
>> handled by the
>> module associated with
>> the handler. For example, if the .imap  extension is mapped to the  
>> handler
>> imap-file
>> (from mod_imagemap) and the .html extension is mapped to the MIME- 
>> type
>> text/html, then the file
>> world.imap.html will be associated with both the imap-file handler  
>> and
>> text/html MIME-type.
>> When it is processed, the imap-file handler will be used, and so it  
>> will be
>> treated as a
>> mod_imagemap imagemap file.
>> "
>>
>> IV. PROOF OF CONCEPT
>> -------------------------
>> Browser is enough to replicate this issue. Simply log in to your  
>> wordpress
>> blog as a low privileged
>> user or admin. Create a new post and use the media file upload  
>> feature to
>> upload a file:
>>
>> test-image.php.jpg
>>
>> containing the following code:
>>
>> <?php
>>        phpinfo();
>> ?>
>>
>> After the upload you should receive a positive response saying:
>>
>> test-vuln.php.jpg
>> image/jpeg
>> 2009-11-11
>>
>> and it should be possible to request the uploaded file via a link:
>> http://link-to-our-wp-unsecured-blog.com/wp-content/uploads/2009/11/test-vuln.php.jpg
>>
>> thus executing the PHP code it contains.
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers


From ceo at kettlewell.net  Wed Nov 11 18:06:25 2009
From: ceo at kettlewell.net (Matthew Kettlewell)
Date: Wed, 11 Nov 2009 11:06:25 -0700
Subject: [wp-hackers] WordPress <= 2.8.5 Unrestricted File Upload
	Arbitrary PHP Code Execution
In-Reply-To: <AA0420DF-BB03-4850-A71F-29740D542433@technicacreative.co.uk>
References: <F941938E-AB91-4AEB-B188-93D29C603196@onet.eu>
	<161617690911110948h359a0ec0m8d4fc8a08b761d99@mail.gmail.com>
	<AA0420DF-BB03-4850-A71F-29740D542433@technicacreative.co.uk>
Message-ID: <6de32230911111006s7205d5e3kf78be0bcda734957@mail.gmail.com>

Would be interesting to see how many servers in the wild have Apache
configured to allow this sort of thing..... I suspect that most advanced
users know better and how to config for changes, but would a big hosting
company leave something like this open to reduce support calls to turn it
on, or out of ignorance?


On Wed, Nov 11, 2009 at 11:00 AM, Dave Jones <dave at technicacreative.co.uk>wrote:

> I was testing test.php - I have to agree with Otto on none of my servers
> does test.php.jpg return anything but an empty image.
>
> Looks like this is a false alarm.
>
>
> Dave Jones
> www.technicacreative.co.uk
>
>
> On 11 Nov 2009, at 17:48, Otto wrote:
>
>  This seems like an Apache configuration problem to me. There are no
>> circumstances I can think of where I'd want test.php.jpg to be
>> executed as PHP by Apache.
>>
>> A suggestion of an Apache configuration to disallow this type of thing
>> in the first place would be more helpful than resorting to .htaccess
>> hacks.
>>
>> -Otto
>>
>>
>>
>> On Wed, Nov 11, 2009 at 11:08 AM, Dawid Golunski <golunski at onet.eu>
>> wrote:
>>
>>> The execution of the PHP code despite the .php.jpg extension is possible
>>> because Apache
>>> allows for multiple extensions. Here is a quote from Apache docs
>>> regarding
>>> this matter:
>>>
>>> "
>>> Files can have more than one extension, and the order of the extensions
>>> is
>>> normally irrelevant.
>>> For example, if the file welcome.html.fr maps onto content type
>>> text/html
>>> and language French then
>>> the file welcome.fr.html will map onto exactly the same information. If
>>> more
>>> than one extension is
>>> given that maps onto the same type of meta-information, then the one to
>>> the
>>> right will be used,
>>> except for languages and content encodings. For example, if .gif maps to
>>> the
>>> MIME-type  image/gif
>>> and .html maps to the MIME-type text/html, then the file welcome.gif.html
>>> will be associated with
>>> the MIME-type text/html.
>>>
>>> Care should be taken when a file with multiple extensions gets associated
>>> with both a MIME-type
>>> and a handler. This will usually result in the request being handled by
>>> the
>>> module associated with
>>> the handler. For example, if the .imap  extension is mapped to the
>>> handler
>>> imap-file
>>> (from mod_imagemap) and the .html extension is mapped to the MIME-type
>>> text/html, then the file
>>> world.imap.html will be associated with both the imap-file handler and
>>> text/html MIME-type.
>>> When it is processed, the imap-file handler will be used, and so it will
>>> be
>>> treated as a
>>> mod_imagemap imagemap file.
>>> "
>>>
>>> IV. PROOF OF CONCEPT
>>> -------------------------
>>> Browser is enough to replicate this issue. Simply log in to your
>>> wordpress
>>> blog as a low privileged
>>> user or admin. Create a new post and use the media file upload feature to
>>> upload a file:
>>>
>>> test-image.php.jpg
>>>
>>> containing the following code:
>>>
>>> <?php
>>>       phpinfo();
>>> ?>
>>>
>>> After the upload you should receive a positive response saying:
>>>
>>> test-vuln.php.jpg
>>> image/jpeg
>>> 2009-11-11
>>>
>>> and it should be possible to request the uploaded file via a link:
>>>
>>> http://link-to-our-wp-unsecured-blog.com/wp-content/uploads/2009/11/test-vuln.php.jpg
>>>
>>> thus executing the PHP code it contains.
>>>
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From scribu at gmail.com  Wed Nov 11 18:37:02 2009
From: scribu at gmail.com (scribu)
Date: Wed, 11 Nov 2009 20:37:02 +0200
Subject: [wp-hackers] Feed caching
In-Reply-To: <161617690911110803o7887a1b5oc8c811716b1ae23@mail.gmail.com>
References: <349fe48b0911101433q41fe36f3h96bddf394db64d2f@mail.gmail.com>
	<161617690911110803o7887a1b5oc8c811716b1ae23@mail.gmail.com>
Message-ID: <349fe48b0911111037g3d42f15fk5337a4163ae0e174@mail.gmail.com>

I'm sorry, my question wasn't clear. I was asking about the feeds
generated by WP itself:

http://localhost/wp/?feed=rss2 etc.

These don't appear to be stored in the wp_options table, but they are
cached somewhere.

-- 
http://scribu.net

From g30rg3x at gmail.com  Wed Nov 11 18:37:17 2009
From: g30rg3x at gmail.com (g30rg3_x)
Date: Wed, 11 Nov 2009 12:37:17 -0600
Subject: [wp-hackers] WordPress <= 2.8.5 Unrestricted File Upload
	Arbitrary PHP Code Execution
In-Reply-To: <6de32230911111006s7205d5e3kf78be0bcda734957@mail.gmail.com>
References: <F941938E-AB91-4AEB-B188-93D29C603196@onet.eu>
	<161617690911110948h359a0ec0m8d4fc8a08b761d99@mail.gmail.com>
	<AA0420DF-BB03-4850-A71F-29740D542433@technicacreative.co.uk>
	<6de32230911111006s7205d5e3kf78be0bcda734957@mail.gmail.com>
Message-ID: <d5d5430f0911111037s6476db6dt4a330a2d4229512e@mail.gmail.com>

2009/11/11 Matthew Kettlewell <ceo at kettlewell.net>:
> Would be interesting to see how many servers in the wild have Apache
> configured to allow this sort of thing...
Not so sure but i guess that (from recent incidents reports)
MediaTemple is one of them.

Kinda weird behavior, couldn't actually reproduce it as of the moment
(in any real production environment) but since the documentation
states then it should be true...

Regards
-- 
_________________________
             g30rg3_x

From otto at ottodestruct.com  Wed Nov 11 18:51:11 2009
From: otto at ottodestruct.com (Otto)
Date: Wed, 11 Nov 2009 12:51:11 -0600
Subject: [wp-hackers] Feed caching
In-Reply-To: <349fe48b0911111037g3d42f15fk5337a4163ae0e174@mail.gmail.com>
References: <349fe48b0911101433q41fe36f3h96bddf394db64d2f@mail.gmail.com> 
	<161617690911110803o7887a1b5oc8c811716b1ae23@mail.gmail.com> 
	<349fe48b0911111037g3d42f15fk5337a4163ae0e174@mail.gmail.com>
Message-ID: <161617690911111051p6dd3355dj842d9a5b0fa55790@mail.gmail.com>

No, as far as I know, the generated feeds are not cached anywhere by default.

Are you running WP-SuperCache? That can cache them.

-Otto



On Wed, Nov 11, 2009 at 12:37 PM, scribu <scribu at gmail.com> wrote:
> I'm sorry, my question wasn't clear. I was asking about the feeds
> generated by WP itself:
>
> http://localhost/wp/?feed=rss2 etc.
>
> These don't appear to be stored in the wp_options table, but they are
> cached somewhere.
>
> --
> http://scribu.net
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From otto at ottodestruct.com  Wed Nov 11 18:54:15 2009
From: otto at ottodestruct.com (Otto)
Date: Wed, 11 Nov 2009 12:54:15 -0600
Subject: [wp-hackers] WordPress <= 2.8.5 Unrestricted File Upload
	Arbitrary PHP Code Execution
In-Reply-To: <e1202cb10911110954r1adc2cbv1c984040b9b6e120@mail.gmail.com>
References: <F941938E-AB91-4AEB-B188-93D29C603196@onet.eu> 
	<161617690911110948h359a0ec0m8d4fc8a08b761d99@mail.gmail.com> 
	<e1202cb10911110954r1adc2cbv1c984040b9b6e120@mail.gmail.com>
Message-ID: <161617690911111054h76f26523l60917034ea2e0b15@mail.gmail.com>

To do that, you would just want test.php to output a image/jpeg mim
header, followed by the jpeg binary data. No need for tricky clever
naming tricks.

I've been unable to get this to work on my local Apache install so
far. test.php.jpg doesn't execute. Does anybody know the config needed
to make this vulnerable?

-Otto
Sent from Memphis, TN, United States


On Wed, Nov 11, 2009 at 11:54 AM, Jeremy Clarke <jer at simianuprising.com> wrote:
> On Wed, Nov 11, 2009 at 12:48 PM, Otto <otto at ottodestruct.com> wrote:
>> This seems like an Apache configuration problem to me. There are no
>> circumstances I can think of where I'd want test.php.jpg to be
>> executed as PHP by Apache.
>
> I think the example would be if you were using php with GD or
> something to output images on the fly (maybe with a caching layer in
> the php). There must be some plugins out there that use this trick, I
> know i've seen it before. It might be that this should be the
> .htaccess hack and not the standard though.
>
> --
> Jeremy Clarke
> Code and Design | globalvoicesonline.org
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From dave at technicacreative.co.uk  Wed Nov 11 18:57:03 2009
From: dave at technicacreative.co.uk (Dave Jones)
Date: Wed, 11 Nov 2009 18:57:03 +0000
Subject: [wp-hackers] WordPress <= 2.8.5 Unrestricted File Upload
	Arbitrary PHP Code Execution
In-Reply-To: <161617690911111054h76f26523l60917034ea2e0b15@mail.gmail.com>
References: <F941938E-AB91-4AEB-B188-93D29C603196@onet.eu>
	<161617690911110948h359a0ec0m8d4fc8a08b761d99@mail.gmail.com>
	<e1202cb10911110954r1adc2cbv1c984040b9b6e120@mail.gmail.com>
	<161617690911111054h76f26523l60917034ea2e0b15@mail.gmail.com>
Message-ID: <78F6BC12-46C6-4416-9D0C-E02EC79AA9AF@technicacreative.co.uk>

php_enable_exploits on ?

:D

Dave Jones
www.technicacreative.co.uk


On 11 Nov 2009, at 18:54, Otto wrote:

> To do that, you would just want test.php to output a image/jpeg mim
> header, followed by the jpeg binary data. No need for tricky clever
> naming tricks.
>
> I've been unable to get this to work on my local Apache install so
> far. test.php.jpg doesn't execute. Does anybody know the config needed
> to make this vulnerable?
>
> -Otto
> Sent from Memphis, TN, United States
>
>
> On Wed, Nov 11, 2009 at 11:54 AM, Jeremy Clarke <jer at simianuprising.com 
> > wrote:
>> On Wed, Nov 11, 2009 at 12:48 PM, Otto <otto at ottodestruct.com> wrote:
>>> This seems like an Apache configuration problem to me. There are no
>>> circumstances I can think of where I'd want test.php.jpg to be
>>> executed as PHP by Apache.
>>
>> I think the example would be if you were using php with GD or
>> something to output images on the fly (maybe with a caching layer in
>> the php). There must be some plugins out there that use this trick, I
>> know i've seen it before. It might be that this should be the
>> .htaccess hack and not the standard though.
>>
>> --
>> Jeremy Clarke
>> Code and Design | globalvoicesonline.org
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers


From ozh at planetozh.com  Wed Nov 11 19:14:44 2009
From: ozh at planetozh.com (Ozh)
Date: Wed, 11 Nov 2009 20:14:44 +0100
Subject: [wp-hackers] Feed caching
In-Reply-To: <161617690911111051p6dd3355dj842d9a5b0fa55790@mail.gmail.com>
References: <349fe48b0911101433q41fe36f3h96bddf394db64d2f@mail.gmail.com>
	<161617690911110803o7887a1b5oc8c811716b1ae23@mail.gmail.com>
	<349fe48b0911111037g3d42f15fk5337a4163ae0e174@mail.gmail.com>
	<161617690911111051p6dd3355dj842d9a5b0fa55790@mail.gmail.com>
Message-ID: <ae81acd10911111114g6f87fab7rb718050a9bfdf123@mail.gmail.com>

I think this is browser behavior to cache XML. Anyway, each time I
have to test stuff with feeds (like working on a feed related plugin)
I simply poll $feed_url.'?&'.mt_rand(1,99999) to avoid browser caching
:-P

On Wed, Nov 11, 2009 at 7:51 PM, Otto <otto at ottodestruct.com> wrote:
> No, as far as I know, the generated feeds are not cached anywhere by default.

-- 
http://planetOzh.com ~ Blog and WordPress Stuff
http://FrenchFragFactory.net ~ Daily Quake News

From scribu at gmail.com  Wed Nov 11 19:20:15 2009
From: scribu at gmail.com (scribu)
Date: Wed, 11 Nov 2009 21:20:15 +0200
Subject: [wp-hackers] Feed caching
In-Reply-To: <161617690911111051p6dd3355dj842d9a5b0fa55790@mail.gmail.com>
References: <349fe48b0911101433q41fe36f3h96bddf394db64d2f@mail.gmail.com>
	<161617690911110803o7887a1b5oc8c811716b1ae23@mail.gmail.com>
	<349fe48b0911111037g3d42f15fk5337a4163ae0e174@mail.gmail.com>
	<161617690911111051p6dd3355dj842d9a5b0fa55790@mail.gmail.com>
Message-ID: <349fe48b0911111120k6b840cc3u2467b11622fe09af@mail.gmail.com>

You're right... they aren't cached. Don't know why I was under that impression.

On 11/11/09, Otto <otto at ottodestruct.com> wrote:
> No, as far as I know, the generated feeds are not cached anywhere by
> default.
>
> Are you running WP-SuperCache? That can cache them.
>
> -Otto
>
>
>
> On Wed, Nov 11, 2009 at 12:37 PM, scribu <scribu at gmail.com> wrote:
>> I'm sorry, my question wasn't clear. I was asking about the feeds
>> generated by WP itself:
>>
>> http://localhost/wp/?feed=rss2 etc.
>>
>> These don't appear to be stored in the wp_options table, but they are
>> cached somewhere.
>>
>> --
>> http://scribu.net
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>


-- 
http://scribu.net

From scribu at gmail.com  Wed Nov 11 19:21:19 2009
From: scribu at gmail.com (scribu)
Date: Wed, 11 Nov 2009 21:21:19 +0200
Subject: [wp-hackers] Feed caching
In-Reply-To: <349fe48b0911111120k6b840cc3u2467b11622fe09af@mail.gmail.com>
References: <349fe48b0911101433q41fe36f3h96bddf394db64d2f@mail.gmail.com>
	<161617690911110803o7887a1b5oc8c811716b1ae23@mail.gmail.com>
	<349fe48b0911111037g3d42f15fk5337a4163ae0e174@mail.gmail.com>
	<161617690911111051p6dd3355dj842d9a5b0fa55790@mail.gmail.com>
	<349fe48b0911111120k6b840cc3u2467b11622fe09af@mail.gmail.com>
Message-ID: <349fe48b0911111121q3aa87c4exe815433e20a4e235@mail.gmail.com>

Thanks to everyone who responded. Learned a couple of things. :)

On 11/11/09, scribu <scribu at gmail.com> wrote:
> You're right... they aren't cached. Don't know why I was under that
> impression.
>
> On 11/11/09, Otto <otto at ottodestruct.com> wrote:
>> No, as far as I know, the generated feeds are not cached anywhere by
>> default.
>>
>> Are you running WP-SuperCache? That can cache them.
>>
>> -Otto
>>
>>
>>
>> On Wed, Nov 11, 2009 at 12:37 PM, scribu <scribu at gmail.com> wrote:
>>> I'm sorry, my question wasn't clear. I was asking about the feeds
>>> generated by WP itself:
>>>
>>> http://localhost/wp/?feed=rss2 etc.
>>>
>>> These don't appear to be stored in the wp_options table, but they are
>>> cached somewhere.
>>>
>>> --
>>> http://scribu.net
>>> _______________________________________________
>>> wp-hackers mailing list
>>> wp-hackers at lists.automattic.com
>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>>
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
>
>
> --
> http://scribu.net
>


-- 
http://scribu.net

From info at toscho.de  Wed Nov 11 19:33:18 2009
From: info at toscho.de (Thomas Scholz)
Date: Wed, 11 Nov 2009 20:33:18 +0100
Subject: [wp-hackers] WordPress <= 2.8.5 Unrestricted File Upload
 Arbitrary PHP Code Execution
In-Reply-To: <161617690911110948h359a0ec0m8d4fc8a08b761d99@mail.gmail.com>
References: <F941938E-AB91-4AEB-B188-93D29C603196@onet.eu>
	<161617690911110948h359a0ec0m8d4fc8a08b761d99@mail.gmail.com>
Message-ID: <op.u28wlsmwr6yny2@toscho.de>

Otto:

> This seems like an Apache configuration problem to me. There are no
> circumstances I can think of where I'd want test.php.jpg to be
> executed as PHP by Apache.

This is a result of

	Options +MultiViews

in the .htaccess. A useful setting for Content-Negotiation or references  
to files without any suffix.

It is a very common setting too, so this bug should be fixed in the WP  
core.

Thomas

-- 
Redaktion, Druck- und Webdesign
http://toscho.de ? 0160/1764727
Twitter: @toscho

From aaron at xavisys.com  Wed Nov 11 19:33:14 2009
From: aaron at xavisys.com (Aaron D. Campbell)
Date: Wed, 11 Nov 2009 12:33:14 -0700
Subject: [wp-hackers] WordPress <= 2.8.5 Unrestricted File
 Upload	Arbitrary PHP Code Execution
In-Reply-To: <161617690911111054h76f26523l60917034ea2e0b15@mail.gmail.com>
References: <F941938E-AB91-4AEB-B188-93D29C603196@onet.eu>
	<161617690911110948h359a0ec0m8d4fc8a08b761d99@mail.gmail.com>
	<e1202cb10911110954r1adc2cbv1c984040b9b6e120@mail.gmail.com>
	<161617690911111054h76f26523l60917034ea2e0b15@mail.gmail.com>
Message-ID: <4AFB117A.6020009@xavisys.com>

I haven't been able to duplicate this on any of my servers either.  I 
did find that different browsers display my "vuln-test.php.jpg" differently.

Firefox shows the path to the file such as 
"http://example.com/wp-content/uploads/2009/10/vuln-test.php.jpg"
IE 8 shows the contents of the file such as "<?php phpinfo(); ?>"
Opera and Safari both show it like a broken image


Otto wrote:
> To do that, you would just want test.php to output a image/jpeg mim
> header, followed by the jpeg binary data. No need for tricky clever
> naming tricks.
>
> I've been unable to get this to work on my local Apache install so
> far. test.php.jpg doesn't execute. Does anybody know the config needed
> to make this vulnerable?
>
> -Otto
> Sent from Memphis, TN, United States
>   

From Ken at adcSTUDIO.com  Wed Nov 11 19:37:21 2009
From: Ken at adcSTUDIO.com (Ken Newman)
Date: Wed, 11 Nov 2009 14:37:21 -0500
Subject: [wp-hackers] WordPress <= 2.8.5 Unrestricted File
 Upload	Arbitrary PHP Code Execution
In-Reply-To: <4AFB117A.6020009@xavisys.com>
References: <F941938E-AB91-4AEB-B188-93D29C603196@onet.eu>	<161617690911110948h359a0ec0m8d4fc8a08b761d99@mail.gmail.com>	<e1202cb10911110954r1adc2cbv1c984040b9b6e120@mail.gmail.com>	<161617690911111054h76f26523l60917034ea2e0b15@mail.gmail.com>
	<4AFB117A.6020009@xavisys.com>
Message-ID: <4AFB1271.5070104@adcSTUDIO.com>

I tried to test it, but it crashed the flash uploader. It reset to 
crunching 0% and stalled.

On 11/11/2009 2:33 PM, Aaron D. Campbell wrote:
> I haven't been able to duplicate this on any of my servers either.  I 
> did find that different browsers display my "vuln-test.php.jpg" 
> differently.
>
> Firefox shows the path to the file such as 
> "http://example.com/wp-content/uploads/2009/10/vuln-test.php.jpg"
> IE 8 shows the contents of the file such as "<?php phpinfo(); ?>"
> Opera and Safari both show it like a broken image
>
>
> Otto wrote:
>> To do that, you would just want test.php to output a image/jpeg mim
>> header, followed by the jpeg binary data. No need for tricky clever
>> naming tricks.
>>
>> I've been unable to get this to work on my local Apache install so
>> far. test.php.jpg doesn't execute. Does anybody know the config needed
>> to make this vulnerable?
>>
>> -Otto
>> Sent from Memphis, TN, United States
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers


From otto at ottodestruct.com  Wed Nov 11 19:41:16 2009
From: otto at ottodestruct.com (Otto)
Date: Wed, 11 Nov 2009 13:41:16 -0600
Subject: [wp-hackers] WordPress <= 2.8.5 Unrestricted File Upload
	Arbitrary PHP Code Execution
In-Reply-To: <op.u28wlsmwr6yny2@toscho.de>
References: <F941938E-AB91-4AEB-B188-93D29C603196@onet.eu> 
	<161617690911110948h359a0ec0m8d4fc8a08b761d99@mail.gmail.com> 
	<op.u28wlsmwr6yny2@toscho.de>
Message-ID: <161617690911111141m58b05921m9b45317a570e3ea4@mail.gmail.com>

Well, that's kinda my point. I don't see it as a bug in WP. If you
upload a file named test.php.jpg, then WordPress is going to treat it
as a JPG file. It can't magically tell that the actual content of the
file is not a JPG.

I don't think there's any bug to fix, as this is not a
WordPress-specific vulnerability. It's a generic vulnerability to any
software which allows you to upload files to a server and uses the
filename to differentiate between them. The actual vulnerability is in
Apache with the MultiViews option enabled.

-Otto



On Wed, Nov 11, 2009 at 1:33 PM, Thomas Scholz <info at toscho.de> wrote:
> Otto:
>
>> This seems like an Apache configuration problem to me. There are no
>> circumstances I can think of where I'd want test.php.jpg to be
>> executed as PHP by Apache.
>
> This is a result of
>
> ? ? ? ?Options +MultiViews
>
> in the .htaccess. A useful setting for Content-Negotiation or references to
> files without any suffix.
>
> It is a very common setting too, so this bug should be fixed in the WP core.
>
> Thomas
>
> --
> Redaktion, Druck- und Webdesign
> http://toscho.de ? 0160/1764727
> Twitter: @toscho
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From info at toscho.de  Wed Nov 11 19:53:32 2009
From: info at toscho.de (Thomas Scholz)
Date: Wed, 11 Nov 2009 20:53:32 +0100
Subject: [wp-hackers] WordPress <= 2.8.5 Unrestricted File Upload
 Arbitrary PHP Code Execution
In-Reply-To: <161617690911111141m58b05921m9b45317a570e3ea4@mail.gmail.com>
References: <F941938E-AB91-4AEB-B188-93D29C603196@onet.eu>
	<161617690911110948h359a0ec0m8d4fc8a08b761d99@mail.gmail.com>
	<op.u28wlsmwr6yny2@toscho.de>
	<161617690911111141m58b05921m9b45317a570e3ea4@mail.gmail.com>
Message-ID: <op.u28xjimlr6yny2@toscho.de>

Otto:

> Well, that's kinda my point. I don't see it as a bug in WP. If you
> upload a file named test.php.jpg, then WordPress is going to treat it
> as a JPG file. It can't magically tell that the actual content of the
> file is not a JPG.

Sometimes it can. Mediawiki uses FileInfo or mime_content_type() to check  
uploaded files.
See:
<http://www.mediawiki.org/wiki/Manual:Mime_type_detection>
<http://www.php.net/manual/en/book.fileinfo.php>
<http://www.php.net/manual/en/function.mime-content-type.php>

> I don't think there's any bug to fix, as this is not a
> WordPress-specific vulnerability. It's a generic vulnerability to any
> software which allows you to upload files to a server and uses the
> filename to differentiate between them.

The point is not trust the suffix only.

> The actual vulnerability is in Apache with the MultiViews option enabled.

In Apache it?s a feature. The server doesn?t know if you want this effect.

Thomas

-- 
Redaktion, Druck- und Webdesign
http://toscho.de ? 0160/1764727
Twitter: @toscho

From dave at technicacreative.co.uk  Wed Nov 11 19:55:06 2009
From: dave at technicacreative.co.uk (Dave Jones)
Date: Wed, 11 Nov 2009 19:55:06 +0000
Subject: [wp-hackers] WordPress <= 2.8.5 Unrestricted File Upload
	Arbitrary PHP Code Execution
In-Reply-To: <op.u28xjimlr6yny2@toscho.de>
References: <F941938E-AB91-4AEB-B188-93D29C603196@onet.eu>
	<161617690911110948h359a0ec0m8d4fc8a08b761d99@mail.gmail.com>
	<op.u28wlsmwr6yny2@toscho.de>
	<161617690911111141m58b05921m9b45317a570e3ea4@mail.gmail.com>
	<op.u28xjimlr6yny2@toscho.de>
Message-ID: <70E9505A-6669-4D24-852A-CC7857CBB8E4@technicacreative.co.uk>

Defining it as a feature in one software and a bug in another. Smells  
funny to me.

Dave Jones
www.technicacreative.co.uk


On 11 Nov 2009, at 19:53, Thomas Scholz wrote:

> Otto:
>
>> Well, that's kinda my point. I don't see it as a bug in WP. If you
>> upload a file named test.php.jpg, then WordPress is going to treat it
>> as a JPG file. It can't magically tell that the actual content of the
>> file is not a JPG.
>
> Sometimes it can. Mediawiki uses FileInfo or mime_content_type() to  
> check uploaded files.
> See:
> <http://www.mediawiki.org/wiki/Manual:Mime_type_detection>
> <http://www.php.net/manual/en/book.fileinfo.php>
> <http://www.php.net/manual/en/function.mime-content-type.php>
>
>> I don't think there's any bug to fix, as this is not a
>> WordPress-specific vulnerability. It's a generic vulnerability to any
>> software which allows you to upload files to a server and uses the
>> filename to differentiate between them.
>
> The point is not trust the suffix only.
>
>> The actual vulnerability is in Apache with the MultiViews option  
>> enabled.
>
> In Apache it?s a feature. The server doesn?t know if you want this  
> effect.
>
> Thomas
>
> -- 
> Redaktion, Druck- und Webdesign
> http://toscho.de ? 0160/1764727
> Twitter: @toscho
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers


From lynne.pope at gmail.com  Wed Nov 11 19:57:34 2009
From: lynne.pope at gmail.com (Lynne Pope)
Date: Thu, 12 Nov 2009 08:57:34 +1300
Subject: [wp-hackers] WordPress <= 2.8.5 Unrestricted File Upload
	Arbitrary PHP Code Execution
In-Reply-To: <161617690911111141m58b05921m9b45317a570e3ea4@mail.gmail.com>
References: <F941938E-AB91-4AEB-B188-93D29C603196@onet.eu> 
	<161617690911110948h359a0ec0m8d4fc8a08b761d99@mail.gmail.com> 
	<op.u28wlsmwr6yny2@toscho.de>
	<161617690911111141m58b05921m9b45317a570e3ea4@mail.gmail.com>
Message-ID: <427667db0911111157p535e0237x302b2895aa71d71d@mail.gmail.com>

2009/11/12 Otto <otto at ottodestruct.com>

> Well, that's kinda my point. I don't see it as a bug in WP. If you
> upload a file named test.php.jpg, then WordPress is going to treat it
> as a JPG file. It can't magically tell that the actual content of the
> file is not a JPG.
>

It's a trivial matter for WordPress to ensure that the file has only the JPG
extension though.


>
> I don't think there's any bug to fix, as this is not a
> WordPress-specific vulnerability. It's a generic vulnerability to any
> software which allows you to upload files to a server and uses the
> filename to differentiate between them. The actual vulnerability is in
> Apache with the MultiViews option enabled.
>

You are right, its not a WordPress-specific vulnerability. However, I was
able to reproduce this on a shared server. The htaccess directive stops it
cold but for the server it just worked on the host is one that has thousands
of accounts. Perhaps hosts are not as smart as we think they are?

This exploit is in the wild now and it won't matter to users whether the
host configuration is poor or not - they will just see WordPress being
hacked.

I think its worth fixing.

Lynne

From otto at ottodestruct.com  Wed Nov 11 19:58:05 2009
From: otto at ottodestruct.com (Otto)
Date: Wed, 11 Nov 2009 13:58:05 -0600
Subject: [wp-hackers] WordPress <= 2.8.5 Unrestricted File Upload
	Arbitrary PHP Code Execution
In-Reply-To: <op.u28xjimlr6yny2@toscho.de>
References: <F941938E-AB91-4AEB-B188-93D29C603196@onet.eu> 
	<161617690911110948h359a0ec0m8d4fc8a08b761d99@mail.gmail.com> 
	<op.u28wlsmwr6yny2@toscho.de>
	<161617690911111141m58b05921m9b45317a570e3ea4@mail.gmail.com> 
	<op.u28xjimlr6yny2@toscho.de>
Message-ID: <161617690911111158w1ed338b4ra3e280d0d13dbd28@mail.gmail.com>

On Wed, Nov 11, 2009 at 1:53 PM, Thomas Scholz <info at toscho.de> wrote:
> Sometimes it can. Mediawiki uses FileInfo or mime_content_type() to check
> uploaded files.
> See:
> <http://www.mediawiki.org/wiki/Manual:Mime_type_detection>
> <http://www.php.net/manual/en/book.fileinfo.php>
> <http://www.php.net/manual/en/function.mime-content-type.php>

All of these are unreliable, at best. The fileinfo extension is
probably not installed, the mime-content-type is deprecated (and
straight up doesn't work as far as I can tell).

> The point is not trust the suffix only.

There is no trustworthy way to determine file type, period. So it's a
matter of choosing what you want to use, all methods have drawbacks.
Filename suffix is the most common and most well understood.

>> The actual vulnerability is in Apache with the MultiViews option enabled.
>
> In Apache it?s a feature. The server doesn?t know if you want this effect.

Still can't get this to work, BTW. I enabled MultiViews. No change,
the PHP does not execute.

What else are the preconditions to make this thing vulnerable?

-Otto
Sent from Memphis, TN, United States

From mgerring at emrl.com  Wed Nov 11 20:04:38 2009
From: mgerring at emrl.com (Matthew Gerring)
Date: Wed, 11 Nov 2009 12:04:38 -0800
Subject: [wp-hackers]  Uploading image attachments from the front-end
Message-ID: <0A9E664C-9FA8-491B-BEA4-53CF42A4B8C2@emrl.com>

Hello all,

I'm working on a collaborative editing system for WP and I'm trying to  
figure out how to access WP's media features from the frontend.  
wp_insert_attachment works just fine, but if I try to generate a  
thumbnail or the image metadata, WP shuts down and stops loading the  
page. I think this is because these functions are only supposed to run  
from the admin area but I'm not sure. This is what my code looks like:

function sw_photo_upload() {
if ($_FILES != null) {
$upath = wp_upload_dir();
$target_path = $upath['path'].'/';
$target_path = $target_path . basename( $_FILES['uploadedfile'] 
['name']);
$target_uri = $upath['url'].'/'.basename( $_FILES['uploadedfile'] 
['name']);
if(move_uploaded_file($_FILES['uploadedfile']['tmp_name'],  
$target_path)) {
     echo "The file ".  basename( $_FILES['uploadedfile']['name'])."  
has been uploaded";
     echo $target_path;
     $attach = array();
     $attach['guid'] = $target_uri;
     $attach['post_title'] = basename( $_FILES['uploadedfile']['name']);
     $attach_id = wp_insert_attachment($attach, $target_uri,  
$_POST['parent']);
     wp_create_thumbnail($attach_id, '90');
     //wp_generate_attachment_metadata( $attach_id, $target_path );
} else {
     echo "There was an error uploading ".$_FILES['uploadedfile'] 
['name']." to ".$target_path.". PHP returned the following error: ". 
$_FILES['uploadedfile']['error'];
}
}
}

There's lots of debugging stuff in there and I'm sure it's very  
sloppy, but I don't understand why wp_create_thumbnail causes  
everything to crash. It executes just fine if I comment that line out,  
but I want to use WP's built in thumbnail generation. Is there a good  
way to do this?

(And yes, I know this needs security improvements, that's my next step  
once it's working).

-Matthew

From otto at ottodestruct.com  Wed Nov 11 20:05:05 2009
From: otto at ottodestruct.com (Otto)
Date: Wed, 11 Nov 2009 14:05:05 -0600
Subject: [wp-hackers] WordPress <= 2.8.5 Unrestricted File Upload
	Arbitrary PHP Code Execution
In-Reply-To: <427667db0911111157p535e0237x302b2895aa71d71d@mail.gmail.com>
References: <F941938E-AB91-4AEB-B188-93D29C603196@onet.eu> 
	<161617690911110948h359a0ec0m8d4fc8a08b761d99@mail.gmail.com> 
	<op.u28wlsmwr6yny2@toscho.de>
	<161617690911111141m58b05921m9b45317a570e3ea4@mail.gmail.com> 
	<427667db0911111157p535e0237x302b2895aa71d71d@mail.gmail.com>
Message-ID: <161617690911111205y3dd1d22au4466a792738e391d@mail.gmail.com>

On Wed, Nov 11, 2009 at 1:57 PM, Lynne Pope <lynne.pope at gmail.com> wrote:
> 2009/11/12 Otto <otto at ottodestruct.com>
> It's a trivial matter for WordPress to ensure that the file has only the JPG
> extension though.

So you're suggesting that filenames like my.summer.vacation.jpg are invalid?

Seems rather arbitrary.

> You are right, its not a WordPress-specific vulnerability. However, I was
> able to reproduce this on a shared server. The htaccess directive stops it
> cold...

Since you can reproduce this and I still can't, can you confirm that
adding "Options -MultiViews" to the .htaccess stops it as well?

> Perhaps hosts are not as smart as we think they are?

You're just preaching to the choir now... ;)

> This exploit is in the wild now

And it's unlikely to be a threat. Basically, it's a privilege
escalation exploit. To exploit it, you have to have the rights to
upload files already. You have to have an account. You have to be able
to make posts. And you apparently have to have a rare condition on the
server to make it vulnerable (one which has not been properly defined
yet, I might add).

It's pretty low in terms of threat level, as I see it.

> and it won't matter to users whether the
> host configuration is poor or not - they will just see WordPress being
> hacked.

Happens all the time. Shared servers are notoriously shit for
security. Look at all the "my WP got hacked" posts in the support
forums. Most of the time, they're on shared servers with poor
inter-user security. Any one site on the box gets hacked, and the
attacker runs a script which finds anything with a php extension and
adds his little crap code to it. Voila, 1000 sites all hacked in an
instant. Doesn't stop the user from blaming WP there, even though WP
had nothing to do with it.

> I think its worth fixing.

I don't. It might be worth adding to an exploit scanner plugin ("Your
server has multiviews enabled! This is a well known Apache problem
[link to article on the topic]. To fix this, add the following to
.htaccess:..."), but that's it.

-Otto
Sent from Memphis, TN, United States

From Ken at adcSTUDIO.com  Wed Nov 11 20:16:47 2009
From: Ken at adcSTUDIO.com (Ken Newman)
Date: Wed, 11 Nov 2009 15:16:47 -0500
Subject: [wp-hackers] WordPress <= 2.8.5 Unrestricted File
 Upload	Arbitrary PHP Code Execution
In-Reply-To: <161617690911111205y3dd1d22au4466a792738e391d@mail.gmail.com>
References: <F941938E-AB91-4AEB-B188-93D29C603196@onet.eu>
	<161617690911110948h359a0ec0m8d4fc8a08b761d99@mail.gmail.com>
	<op.u28wlsmwr6yny2@toscho.de>	<161617690911111141m58b05921m9b45317a570e3ea4@mail.gmail.com>
	<427667db0911111157p535e0237x302b2895aa71d71d@mail.gmail.com>
	<161617690911111205y3dd1d22au4466a792738e391d@mail.gmail.com>
Message-ID: <4AFB1BAF.9090600@adcSTUDIO.com>

Couldn't you just block anything with *.php.* from being uploaded thru 
wordpress?

From glenn at glennansley.com  Wed Nov 11 20:29:07 2009
From: glenn at glennansley.com (Glenn Ansley)
Date: Wed, 11 Nov 2009 15:29:07 -0500
Subject: [wp-hackers] Manually toggle is_archive
Message-ID: <7474be390911111229j6d1be9b5ka5b973e86ecf9a2e@mail.gmail.com>

Hey all,
Is there a specific way I need to manually set $wp_query->is_archive to true?
I've tried to global $wp_query and set it to true at several points in
the process of loading, but it is either getting overwritten or
hitting the wrong object.
I can get it to stick.

I can even hook into template redirect and unset
$wp_query->is_archive. I just can't force it to be 1 (or 0 for that
matter).

Any ideas? Thanks.

(sorry if this comes through twice. I always forget to change the from
email to the one registered with the list).

From matt at sivel.net  Wed Nov 11 20:34:11 2009
From: matt at sivel.net (Matt Martz)
Date: Wed, 11 Nov 2009 15:34:11 -0500
Subject: [wp-hackers] WordPress <= 2.8.5 Unrestricted File Upload
	Arbitrary PHP Code Execution
In-Reply-To: <4AFB1BAF.9090600@adcSTUDIO.com>
References: <F941938E-AB91-4AEB-B188-93D29C603196@onet.eu> 
	<161617690911110948h359a0ec0m8d4fc8a08b761d99@mail.gmail.com> 
	<op.u28wlsmwr6yny2@toscho.de>
	<161617690911111141m58b05921m9b45317a570e3ea4@mail.gmail.com> 
	<427667db0911111157p535e0237x302b2895aa71d71d@mail.gmail.com> 
	<161617690911111205y3dd1d22au4466a792738e391d@mail.gmail.com> 
	<4AFB1BAF.9090600@adcSTUDIO.com>
Message-ID: <518fa9630911111234p1cf1ae1bjb405069cacd9a91a@mail.gmail.com>

> Couldn't you just block anything with *.php.* from being uploaded thru
> wordpress?

Ryan has opened a ticket for this and has already attached a patch.

http://core.trac.wordpress.org/ticket/11122

Just thought you guys would be interested.

-- 
Matt Martz
matt at sivel.net
http://sivel.net/

From leogermani at gmail.com  Wed Nov 11 20:37:58 2009
From: leogermani at gmail.com (Leo germani)
Date: Wed, 11 Nov 2009 18:37:58 -0200
Subject: [wp-hackers] Uploading image attachments from the front-end
In-Reply-To: <0A9E664C-9FA8-491B-BEA4-53CF42A4B8C2@emrl.com>
References: <0A9E664C-9FA8-491B-BEA4-53CF42A4B8C2@emrl.com>
Message-ID: <32c7967e0911111237k17637c42sa87444d92c56e85f@mail.gmail.com>

I think you should use media_handle_upload()

Leo,,

On Wed, Nov 11, 2009 at 6:04 PM, Matthew Gerring <mgerring at emrl.com> wrote:

> Hello all,
>
> I'm working on a collaborative editing system for WP and I'm trying to
> figure out how to access WP's media features from the frontend.
> wp_insert_attachment works just fine, but if I try to generate a thumbnail
> or the image metadata, WP shuts down and stops loading the page. I think
> this is because these functions are only supposed to run from the admin area
> but I'm not sure. This is what my code looks like:
>
> function sw_photo_upload() {
> if ($_FILES != null) {
> $upath = wp_upload_dir();
> $target_path = $upath['path'].'/';
> $target_path = $target_path . basename( $_FILES['uploadedfile']['name']);
> $target_uri = $upath['url'].'/'.basename( $_FILES['uploadedfile']['name']);
> if(move_uploaded_file($_FILES['uploadedfile']['tmp_name'], $target_path)) {
>    echo "The file ".  basename( $_FILES['uploadedfile']['name'])." has been
> uploaded";
>    echo $target_path;
>    $attach = array();
>    $attach['guid'] = $target_uri;
>    $attach['post_title'] = basename( $_FILES['uploadedfile']['name']);
>    $attach_id = wp_insert_attachment($attach, $target_uri,
> $_POST['parent']);
>    wp_create_thumbnail($attach_id, '90');
>    //wp_generate_attachment_metadata( $attach_id, $target_path );
> } else {
>    echo "There was an error uploading ".$_FILES['uploadedfile']['name']."
> to ".$target_path.". PHP returned the following error:
> ".$_FILES['uploadedfile']['error'];
> }
> }
> }
>
> There's lots of debugging stuff in there and I'm sure it's very sloppy, but
> I don't understand why wp_create_thumbnail causes everything to crash. It
> executes just fine if I comment that line out, but I want to use WP's built
> in thumbnail generation. Is there a good way to do this?
>
> (And yes, I know this needs security improvements, that's my next step once
> it's working).
>
> -Matthew
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>



-- 
leogermani.pirex.com.br
leogermani.estudiolivre.org

From mgerring at emrl.com  Wed Nov 11 20:39:59 2009
From: mgerring at emrl.com (Matthew Gerring)
Date: Wed, 11 Nov 2009 12:39:59 -0800
Subject: [wp-hackers] Uploading image attachments from the front-end
In-Reply-To: <32c7967e0911111237k17637c42sa87444d92c56e85f@mail.gmail.com>
References: <0A9E664C-9FA8-491B-BEA4-53CF42A4B8C2@emrl.com>
	<32c7967e0911111237k17637c42sa87444d92c56e85f@mail.gmail.com>
Message-ID: <73C9CA2C-1075-41D7-BF86-2E1413DD5833@emrl.com>

Finally found that function just now, but I'm leaning towards using  
media_handle_sideload.

On Nov 11, 2009, at 12:37 PM, Leo germani wrote:

> I think you should use media_handle_upload()
>
> Leo,,
>
> On Wed, Nov 11, 2009 at 6:04 PM, Matthew Gerring <mgerring at emrl.com>  
> wrote:
>
>> Hello all,
>>
>> I'm working on a collaborative editing system for WP and I'm trying  
>> to
>> figure out how to access WP's media features from the frontend.
>> wp_insert_attachment works just fine, but if I try to generate a  
>> thumbnail
>> or the image metadata, WP shuts down and stops loading the page. I  
>> think
>> this is because these functions are only supposed to run from the  
>> admin area
>> but I'm not sure. This is what my code looks like:
>>
>> function sw_photo_upload() {
>> if ($_FILES != null) {
>> $upath = wp_upload_dir();
>> $target_path = $upath['path'].'/';
>> $target_path = $target_path . basename( $_FILES['uploadedfile'] 
>> ['name']);
>> $target_uri = $upath['url'].'/'.basename( $_FILES['uploadedfile'] 
>> ['name']);
>> if(move_uploaded_file($_FILES['uploadedfile']['tmp_name'],  
>> $target_path)) {
>>   echo "The file ".  basename( $_FILES['uploadedfile']['name'])."  
>> has been
>> uploaded";
>>   echo $target_path;
>>   $attach = array();
>>   $attach['guid'] = $target_uri;
>>   $attach['post_title'] = basename( $_FILES['uploadedfile']['name']);
>>   $attach_id = wp_insert_attachment($attach, $target_uri,
>> $_POST['parent']);
>>   wp_create_thumbnail($attach_id, '90');
>>   //wp_generate_attachment_metadata( $attach_id, $target_path );
>> } else {
>>   echo "There was an error uploading ".$_FILES['uploadedfile'] 
>> ['name']."
>> to ".$target_path.". PHP returned the following error:
>> ".$_FILES['uploadedfile']['error'];
>> }
>> }
>> }
>>
>> There's lots of debugging stuff in there and I'm sure it's very  
>> sloppy, but
>> I don't understand why wp_create_thumbnail causes everything to  
>> crash. It
>> executes just fine if I comment that line out, but I want to use  
>> WP's built
>> in thumbnail generation. Is there a good way to do this?
>>
>> (And yes, I know this needs security improvements, that's my next  
>> step once
>> it's working).
>>
>> -Matthew
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
>
>
>
> -- 
> leogermani.pirex.com.br
> leogermani.estudiolivre.org
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers


From Ken at adcSTUDIO.com  Wed Nov 11 20:49:39 2009
From: Ken at adcSTUDIO.com (Ken Newman)
Date: Wed, 11 Nov 2009 15:49:39 -0500
Subject: [wp-hackers] WordPress <= 2.8.5 Unrestricted File
 Upload	Arbitrary PHP Code Execution
In-Reply-To: <518fa9630911111234p1cf1ae1bjb405069cacd9a91a@mail.gmail.com>
References: <F941938E-AB91-4AEB-B188-93D29C603196@onet.eu>
	<161617690911110948h359a0ec0m8d4fc8a08b761d99@mail.gmail.com>
	<op.u28wlsmwr6yny2@toscho.de>	<161617690911111141m58b05921m9b45317a570e3ea4@mail.gmail.com>
	<427667db0911111157p535e0237x302b2895aa71d71d@mail.gmail.com>
	<161617690911111205y3dd1d22au4466a792738e391d@mail.gmail.com>
	<4AFB1BAF.9090600@adcSTUDIO.com>
	<518fa9630911111234p1cf1ae1bjb405069cacd9a91a@mail.gmail.com>
Message-ID: <4AFB2363.4050603@adcSTUDIO.com>

Wow, 5 hrs ago, we are a bit behind the times... lol, thanks!

On 11/11/2009 3:34 PM, Matt Martz wrote:
>> Couldn't you just block anything with *.php.* from being uploaded thru
>> wordpress?
>>      
> Ryan has opened a ticket for this and has already attached a patch.
>
> http://core.trac.wordpress.org/ticket/11122
>
> Just thought you guys would be interested.
>
>    


From lynne.pope at gmail.com  Wed Nov 11 20:53:34 2009
From: lynne.pope at gmail.com (Lynne Pope)
Date: Thu, 12 Nov 2009 09:53:34 +1300
Subject: [wp-hackers] WordPress <= 2.8.5 Unrestricted File Upload
	Arbitrary PHP Code Execution
In-Reply-To: <518fa9630911111234p1cf1ae1bjb405069cacd9a91a@mail.gmail.com>
References: <F941938E-AB91-4AEB-B188-93D29C603196@onet.eu> 
	<161617690911110948h359a0ec0m8d4fc8a08b761d99@mail.gmail.com> 
	<op.u28wlsmwr6yny2@toscho.de>
	<161617690911111141m58b05921m9b45317a570e3ea4@mail.gmail.com> 
	<427667db0911111157p535e0237x302b2895aa71d71d@mail.gmail.com> 
	<161617690911111205y3dd1d22au4466a792738e391d@mail.gmail.com> 
	<4AFB1BAF.9090600@adcSTUDIO.com>
	<518fa9630911111234p1cf1ae1bjb405069cacd9a91a@mail.gmail.com>
Message-ID: <427667db0911111253j62c1b407uc3d38d895809db98@mail.gmail.com>

2009/11/12 Matt Martz <matt at sivel.net>

> > Couldn't you just block anything with *.php.* from being uploaded thru
> > wordpress?
>
> Ryan has opened a ticket for this and has already attached a patch.
>
> http://core.trac.wordpress.org/ticket/11122
>

Cool :-)

I just learned that Multiviews are enabled by default and that this is the
config for WHM/cPanel servers. Which means a whole heap of WordPress users
will have this without knowing that this kind of content negotiation can
result in security vulnerabilities.

Re - the patch, I have a question I want to make here (because it could be
completely off the wall)...
Wouldn't getimagesize($imgfile); do a check to ensure the file has width and
height, which an image has but a script file does not? Or can that be
fudged?

I am not yet in the PHP expert league, as some of you are, so thought I'd
ask here rather than clutter up the trac ;)

Cheers,
Lynne


-- 
http://twitter.com/elpie/

From scribu at gmail.com  Wed Nov 11 20:58:13 2009
From: scribu at gmail.com (scribu)
Date: Wed, 11 Nov 2009 22:58:13 +0200
Subject: [wp-hackers] WordPress <= 2.8.5 Unrestricted File Upload
	Arbitrary PHP Code Execution
In-Reply-To: <427667db0911111253j62c1b407uc3d38d895809db98@mail.gmail.com>
References: <F941938E-AB91-4AEB-B188-93D29C603196@onet.eu>
	<161617690911110948h359a0ec0m8d4fc8a08b761d99@mail.gmail.com>
	<op.u28wlsmwr6yny2@toscho.de>
	<161617690911111141m58b05921m9b45317a570e3ea4@mail.gmail.com>
	<427667db0911111157p535e0237x302b2895aa71d71d@mail.gmail.com>
	<161617690911111205y3dd1d22au4466a792738e391d@mail.gmail.com>
	<4AFB1BAF.9090600@adcSTUDIO.com>
	<518fa9630911111234p1cf1ae1bjb405069cacd9a91a@mail.gmail.com>
	<427667db0911111253j62c1b407uc3d38d895809db98@mail.gmail.com>
Message-ID: <349fe48b0911111258n151f411dm859997062b6be9c5@mail.gmail.com>

> Wouldn't getimagesize($imgfile); do a check to ensure the file has width and
> height, which an image has but a script file does not? Or can that be
> fudged?

That might work for images, but what about audio and other types of
valid content?

On 11/11/09, Lynne Pope <lynne.pope at gmail.com> wrote:
> 2009/11/12 Matt Martz <matt at sivel.net>
>
>> > Couldn't you just block anything with *.php.* from being uploaded thru
>> > wordpress?
>>
>> Ryan has opened a ticket for this and has already attached a patch.
>>
>> http://core.trac.wordpress.org/ticket/11122
>>
>
> Cool :-)
>
> I just learned that Multiviews are enabled by default and that this is the
> config for WHM/cPanel servers. Which means a whole heap of WordPress users
> will have this without knowing that this kind of content negotiation can
> result in security vulnerabilities.
>
> Re - the patch, I have a question I want to make here (because it could be
> completely off the wall)...
> Wouldn't getimagesize($imgfile); do a check to ensure the file has width and
> height, which an image has but a script file does not? Or can that be
> fudged?
>
> I am not yet in the PHP expert league, as some of you are, so thought I'd
> ask here rather than clutter up the trac ;)
>
> Cheers,
> Lynne
>
>
> --
> http://twitter.com/elpie/
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>


-- 
http://scribu.net

From Ken at adcSTUDIO.com  Wed Nov 11 20:58:43 2009
From: Ken at adcSTUDIO.com (Ken Newman)
Date: Wed, 11 Nov 2009 15:58:43 -0500
Subject: [wp-hackers] WordPress <= 2.8.5 Unrestricted File
 Upload	Arbitrary PHP Code Execution
In-Reply-To: <427667db0911111253j62c1b407uc3d38d895809db98@mail.gmail.com>
References: <F941938E-AB91-4AEB-B188-93D29C603196@onet.eu>
	<161617690911110948h359a0ec0m8d4fc8a08b761d99@mail.gmail.com>
	<op.u28wlsmwr6yny2@toscho.de>	<161617690911111141m58b05921m9b45317a570e3ea4@mail.gmail.com>
	<427667db0911111157p535e0237x302b2895aa71d71d@mail.gmail.com>
	<161617690911111205y3dd1d22au4466a792738e391d@mail.gmail.com>
	<4AFB1BAF.9090600@adcSTUDIO.com>	<518fa9630911111234p1cf1ae1bjb405069cacd9a91a@mail.gmail.com>
	<427667db0911111253j62c1b407uc3d38d895809db98@mail.gmail.com>
Message-ID: <4AFB2583.6090202@adcSTUDIO.com>

Crap. Yeah, I have one client on a host using cPanel. Confirmed that 
info.php.jpg does execute on their server.

On 11/11/2009 3:53 PM, Lynne Pope wrote:
> 2009/11/12 Matt Martz<matt at sivel.net>
>
>    
>>> Couldn't you just block anything with *.php.* from being uploaded thru
>>> wordpress?
>>>        
>> Ryan has opened a ticket for this and has already attached a patch.
>>
>> http://core.trac.wordpress.org/ticket/11122
>>
>>      
> Cool :-)
>
> I just learned that Multiviews are enabled by default and that this is the
> config for WHM/cPanel servers. Which means a whole heap of WordPress users
> will have this without knowing that this kind of content negotiation can
> result in security vulnerabilities.
>
> Re - the patch, I have a question I want to make here (because it could be
> completely off the wall)...
> Wouldn't getimagesize($imgfile); do a check to ensure the file has width and
> height, which an image has but a script file does not? Or can that be
> fudged?
>
> I am not yet in the PHP expert league, as some of you are, so thought I'd
> ask here rather than clutter up the trac ;)
>
> Cheers,
> Lynne
>
>
>    


From glenn at glennansley.com  Wed Nov 11 22:26:00 2009
From: glenn at glennansley.com (Glenn Ansley)
Date: Wed, 11 Nov 2009 17:26:00 -0500
Subject: [wp-hackers] Manually toggle is_archive
In-Reply-To: <7474be390911111229j6d1be9b5ka5b973e86ecf9a2e@mail.gmail.com>
References: <7474be390911111229j6d1be9b5ka5b973e86ecf9a2e@mail.gmail.com>
Message-ID: <7474be390911111426y35056cbv7ee19dbffc8e5b67@mail.gmail.com>

I got it working. It was a stupid error.
Semi-related, it was for a plugin that allows you to create archive
pages for posts in multiple categories.
ie: http://yourdomain.com/categories/cat-1+cat2+cat3
If you have time to help me debug it, that would be awesome:
http://fullthrottledevelopment.com/create-a-wordpress-archive-for-posts-in-multiple-categories

Glenn Ansley
http://fullthrottledevelopment.com

On Wed, Nov 11, 2009 at 3:29 PM, Glenn Ansley <glenn at glennansley.com> wrote:
> Hey all,
> Is there a specific way I need to manually set $wp_query->is_archive to true?
> I've tried to global $wp_query and set it to true at several points in
> the process of loading, but it is either getting overwritten or
> hitting the wrong object.
> I can get it to stick.
>
> I can even hook into template redirect and unset
> $wp_query->is_archive. I just can't force it to be 1 (or 0 for that
> matter).
>
> Any ideas? Thanks.
>
> (sorry if this comes through twice. I always forget to change the from
> email to the one registered with the list).
>

From scribu at gmail.com  Wed Nov 11 23:28:07 2009
From: scribu at gmail.com (scribu)
Date: Thu, 12 Nov 2009 01:28:07 +0200
Subject: [wp-hackers] Manually toggle is_archive
In-Reply-To: <7474be390911111426y35056cbv7ee19dbffc8e5b67@mail.gmail.com>
References: <7474be390911111229j6d1be9b5ka5b973e86ecf9a2e@mail.gmail.com>
	<7474be390911111426y35056cbv7ee19dbffc8e5b67@mail.gmail.com>
Message-ID: <349fe48b0911111528r7bbe3a12w76b984760530fc23@mail.gmail.com>

I hope you were aware of this:

http://ryan.boren.me/2007/10/01/taxonomy-intersections-and-unions/


On Thu, Nov 12, 2009 at 12:26 AM, Glenn Ansley <glenn at glennansley.com>wrote:

> I got it working. It was a stupid error.
> Semi-related, it was for a plugin that allows you to create archive
> pages for posts in multiple categories.
> ie: http://yourdomain.com/categories/cat-1+cat2+cat3
> If you have time to help me debug it, that would be awesome:
>
> http://fullthrottledevelopment.com/create-a-wordpress-archive-for-posts-in-multiple-categories
>
> Glenn Ansley
> http://fullthrottledevelopment.com
>
> On Wed, Nov 11, 2009 at 3:29 PM, Glenn Ansley <glenn at glennansley.com>
> wrote:
> > Hey all,
> > Is there a specific way I need to manually set $wp_query->is_archive to
> true?
> > I've tried to global $wp_query and set it to true at several points in
> > the process of loading, but it is either getting overwritten or
> > hitting the wrong object.
> > I can get it to stick.
> >
> > I can even hook into template redirect and unset
> > $wp_query->is_archive. I just can't force it to be 1 (or 0 for that
> > matter).
> >
> > Any ideas? Thanks.
> >
> > (sorry if this comes through twice. I always forget to change the from
> > email to the one registered with the list).
> >
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>



-- 
http://scribu.net

From wordpress at santosj.name  Thu Nov 12 16:18:06 2009
From: wordpress at santosj.name (Jacob Santos)
Date: Thu, 12 Nov 2009 10:18:06 -0600
Subject: [wp-hackers] WordPress <= 2.8.5 Unrestricted File Upload Arbitrary
	PHP Code Execution
Message-ID: <4AFC353E.4020906@santosj.name>


Okay, good news, we've fixed the extension exploit and then will have to 
wait another 6 to 8 months while another XSS attack shows up about 
people adding images executing JavaScript on their servers (which isn't 
completely bad since most / all administrative tasks requires a nonce).

However, If we are all on top of security exploits, this is an extremely 
simple one to fix and one that is used often to execute JS. However, the 
correct fix would to be check all images against the function and that 
might be prohibitive. At least for ones that are uploaded.

Jacob Santos

>>/ Wouldn't getimagesize($imgfile); do a check to ensure the file has width and
/>/> height, which an image has but a script file does not? Or can that be
/>/> fudged?
/
> That might work for images, but what about audio and other types of
> valid content?


From dave at technicacreative.co.uk  Thu Nov 12 16:25:02 2009
From: dave at technicacreative.co.uk (Dave Jones)
Date: Thu, 12 Nov 2009 16:25:02 +0000
Subject: [wp-hackers] WordPress <= 2.8.5 Unrestricted File Upload
	Arbitrary PHP Code Execution
In-Reply-To: <4AFC353E.4020906@santosj.name>
References: <4AFC353E.4020906@santosj.name>
Message-ID: <FFB01B28-8D3D-4107-8474-B759582BC6A7@technicacreative.co.uk>

I'm slightly confused since I thought the exploit allowed arbitrary  
execution of PHP on the server.  This is much worse than a XSS  
Javascript exploit since PHP could potentially send spam emails,  
execute a DDOS attack, delete your public_html directory from the  
server or whatever.

i have no doubt that fixing this exploit is a good thing, however I  
feel it slightly misses the point.  That said, I have been unable to  
replicate this exploit in the wild, even with Options +MultiVIews.

This is clearly and Apache/mis-configuration issue and if fixed in WP  
will remain unfixed in countless other web applications.  It would be  
far better to ensure your host correctly configures Apache and doesn't  
leave security holes in the server, or move to a host that does!


Dave Jones
www.technicacreative.co.uk


On 12 Nov 2009, at 16:18, Jacob Santos wrote:

> Okay, good news, we've fixed the extension exploit and then will  
> have to wait another 6 to 8 months while another XSS attack shows up  
> about people adding images executing JavaScript on their servers  
> (which isn't completely bad since most / all administrative tasks  
> requires a nonce).


From Ken at adcSTUDIO.com  Thu Nov 12 16:40:27 2009
From: Ken at adcSTUDIO.com (Ken Newman)
Date: Thu, 12 Nov 2009 11:40:27 -0500
Subject: [wp-hackers] WordPress <= 2.8.5 Unrestricted File
 Upload	Arbitrary PHP Code Execution
In-Reply-To: <FFB01B28-8D3D-4107-8474-B759582BC6A7@technicacreative.co.uk>
References: <4AFC353E.4020906@santosj.name>
	<FFB01B28-8D3D-4107-8474-B759582BC6A7@technicacreative.co.uk>
Message-ID: <4AFC3A7B.6080102@adcSTUDIO.com>

I have replicated this behavior, as in executed info.php.jpg on a server 
running from a popular hosting company. (Is it appropriate to list hosts 
here?) I figured out which host to test from the previous message from 
Lynne Pope, :

I just learned that Multiviews are enabled by default and that this is the
config for WHM/cPanel servers.

So I went to a client's site (one of our only clients with a cPanel 
host; going to switch them to our normal host soon.) and tested it. I 
was surprised that it worked on such a popular host.

If you want to test this out, Dave Jones or Otto, you'll probably have 
to use a host with WHM/cPanel.

On 11/12/2009 11:25 AM, Dave Jones wrote:
> I'm slightly confused since I thought the exploit allowed arbitrary 
> execution of PHP on the server.  This is much worse than a XSS 
> Javascript exploit since PHP could potentially send spam emails, 
> execute a DDOS attack, delete your public_html directory from the 
> server or whatever.
>
> i have no doubt that fixing this exploit is a good thing, however I 
> feel it slightly misses the point.  That said, I have been unable to 
> replicate this exploit in the wild, even with Options +MultiVIews.
>
> This is clearly and Apache/mis-configuration issue and if fixed in WP 
> will remain unfixed in countless other web applications.  It would be 
> far better to ensure your host correctly configures Apache and doesn't 
> leave security holes in the server, or move to a host that does!
>
>
> Dave Jones
> www.technicacreative.co.uk
>
>
> On 12 Nov 2009, at 16:18, Jacob Santos wrote:
>
>> Okay, good news, we've fixed the extension exploit and then will have 
>> to wait another 6 to 8 months while another XSS attack shows up about 
>> people adding images executing JavaScript on their servers (which 
>> isn't completely bad since most / all administrative tasks requires a 
>> nonce).
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers


From dave at technicacreative.co.uk  Thu Nov 12 16:43:00 2009
From: dave at technicacreative.co.uk (Dave Jones)
Date: Thu, 12 Nov 2009 16:43:00 +0000
Subject: [wp-hackers] WordPress <= 2.8.5 Unrestricted File
	Upload	Arbitrary PHP Code Execution
In-Reply-To: <4AFC3A7B.6080102@adcSTUDIO.com>
References: <4AFC353E.4020906@santosj.name>
	<FFB01B28-8D3D-4107-8474-B759582BC6A7@technicacreative.co.uk>
	<4AFC3A7B.6080102@adcSTUDIO.com>
Message-ID: <FCED8432-A50C-4269-8BEF-BF8DA35EDEFD@technicacreative.co.uk>

Ah Ok, I don't use cPanel though have done in the best and yes it is  
very popular and widespread.

This could probably be considered a bug/issue with cPanel WHM as much  
as Wordpress then?

Dave Jones
www.technicacreative.co.uk


On 12 Nov 2009, at 16:40, Ken Newman wrote:

> I have replicated this behavior, as in executed info.php.jpg on a  
> server running from a popular hosting company. (Is it appropriate to  
> list hosts here?) I figured out which host to test from the previous  
> message from Lynne Pope, :
>
> I just learned that Multiviews are enabled by default and that this  
> is the
> config for WHM/cPanel servers.
>
> So I went to a client's site (one of our only clients with a cPanel  
> host; going to switch them to our normal host soon.) and tested it.  
> I was surprised that it worked on such a popular host.
>
> If you want to test this out, Dave Jones or Otto, you'll probably  
> have to use a host with WHM/cPanel.
>
> On 11/12/2009 11:25 AM, Dave Jones wrote:
>> I'm slightly confused since I thought the exploit allowed arbitrary  
>> execution of PHP on the server.  This is much worse than a XSS  
>> Javascript exploit since PHP could potentially send spam emails,  
>> execute a DDOS attack, delete your public_html directory from the  
>> server or whatever.
>>
>> i have no doubt that fixing this exploit is a good thing, however I  
>> feel it slightly misses the point.  That said, I have been unable  
>> to replicate this exploit in the wild, even with Options +MultiVIews.
>>
>> This is clearly and Apache/mis-configuration issue and if fixed in  
>> WP will remain unfixed in countless other web applications.  It  
>> would be far better to ensure your host correctly configures Apache  
>> and doesn't leave security holes in the server, or move to a host  
>> that does!
>>
>>
>> Dave Jones
>> www.technicacreative.co.uk
>>
>>
>> On 12 Nov 2009, at 16:18, Jacob Santos wrote:
>>
>>> Okay, good news, we've fixed the extension exploit and then will  
>>> have to wait another 6 to 8 months while another XSS attack shows  
>>> up about people adding images executing JavaScript on their  
>>> servers (which isn't completely bad since most / all  
>>> administrative tasks requires a nonce).
>>
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers


From otto at ottodestruct.com  Thu Nov 12 16:43:23 2009
From: otto at ottodestruct.com (Otto)
Date: Thu, 12 Nov 2009 10:43:23 -0600
Subject: [wp-hackers] WordPress <= 2.8.5 Unrestricted File Upload
	Arbitrary PHP Code Execution
In-Reply-To: <4AFC3A7B.6080102@adcSTUDIO.com>
References: <4AFC353E.4020906@santosj.name>
	<FFB01B28-8D3D-4107-8474-B759582BC6A7@technicacreative.co.uk> 
	<4AFC3A7B.6080102@adcSTUDIO.com>
Message-ID: <161617690911120843p4dbc99f2md2994f4227c6d58d@mail.gmail.com>

I don't have access to any hosts that have this issue. I tried the
ones I use, and have yet to find one that will execute *.php.jpg from
a web request.

If it's an Apache problem, then somebody should be able to tell me how
to configure Apache to do it. I can't figure it out.

I can confirm that simply turning on MultiViews doesn't create an
exploitable system. There's some more configuration to make it happen.

A default Apache and PHP installation, with no extreme changes to
them, is NOT vulnerable.

-Otto



On Thu, Nov 12, 2009 at 10:40 AM, Ken Newman <Ken at adcstudio.com> wrote:
> I have replicated this behavior, as in executed info.php.jpg on a server
> running from a popular hosting company. (Is it appropriate to list hosts
> here?) I figured out which host to test from the previous message from Lynne
> Pope, :
>
> I just learned that Multiviews are enabled by default and that this is the
> config for WHM/cPanel servers.
>
> So I went to a client's site (one of our only clients with a cPanel host;
> going to switch them to our normal host soon.) and tested it. I was
> surprised that it worked on such a popular host.
>
> If you want to test this out, Dave Jones or Otto, you'll probably have to
> use a host with WHM/cPanel.
>
> On 11/12/2009 11:25 AM, Dave Jones wrote:
>>
>> I'm slightly confused since I thought the exploit allowed arbitrary
>> execution of PHP on the server. ?This is much worse than a XSS Javascript
>> exploit since PHP could potentially send spam emails, execute a DDOS attack,
>> delete your public_html directory from the server or whatever.
>>
>> i have no doubt that fixing this exploit is a good thing, however I feel
>> it slightly misses the point. ?That said, I have been unable to replicate
>> this exploit in the wild, even with Options +MultiVIews.
>>
>> This is clearly and Apache/mis-configuration issue and if fixed in WP will
>> remain unfixed in countless other web applications. ?It would be far better
>> to ensure your host correctly configures Apache and doesn't leave security
>> holes in the server, or move to a host that does!
>>
>>
>> Dave Jones
>> www.technicacreative.co.uk
>>
>>
>> On 12 Nov 2009, at 16:18, Jacob Santos wrote:
>>
>>> Okay, good news, we've fixed the extension exploit and then will have to
>>> wait another 6 to 8 months while another XSS attack shows up about people
>>> adding images executing JavaScript on their servers (which isn't completely
>>> bad since most / all administrative tasks requires a nonce).
>>
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From Ken at adcSTUDIO.com  Thu Nov 12 16:48:06 2009
From: Ken at adcSTUDIO.com (Ken Newman)
Date: Thu, 12 Nov 2009 11:48:06 -0500
Subject: [wp-hackers] WordPress <= 2.8.5 Unrestricted File
 Upload	Arbitrary PHP Code Execution
In-Reply-To: <161617690911120843p4dbc99f2md2994f4227c6d58d@mail.gmail.com>
References: <4AFC353E.4020906@santosj.name>	<FFB01B28-8D3D-4107-8474-B759582BC6A7@technicacreative.co.uk>
	<4AFC3A7B.6080102@adcSTUDIO.com>
	<161617690911120843p4dbc99f2md2994f4227c6d58d@mail.gmail.com>
Message-ID: <4AFC3C46.6030400@adcSTUDIO.com>

That's good to know, I will simply let the hosting provider know and 
switch my client to our other provider who isn't vulnerable. I hate 
cPanel anyway. Thanks! If I do get a response from the host about what 
configuration they are running, I'll let you know.

On 11/12/2009 11:43 AM, Otto wrote:
> I don't have access to any hosts that have this issue. I tried the
> ones I use, and have yet to find one that will execute *.php.jpg from
> a web request.
>
> If it's an Apache problem, then somebody should be able to tell me how
> to configure Apache to do it. I can't figure it out.
>
> I can confirm that simply turning on MultiViews doesn't create an
> exploitable system. There's some more configuration to make it happen.
>
> A default Apache and PHP installation, with no extreme changes to
> them, is NOT vulnerable.
>
> -Otto
>    

From otto at ottodestruct.com  Thu Nov 12 17:00:21 2009
From: otto at ottodestruct.com (Otto)
Date: Thu, 12 Nov 2009 11:00:21 -0600
Subject: [wp-hackers] WordPress <= 2.8.5 Unrestricted File Upload
	Arbitrary PHP Code Execution
In-Reply-To: <161617690911120843p4dbc99f2md2994f4227c6d58d@mail.gmail.com>
References: <4AFC353E.4020906@santosj.name>
	<FFB01B28-8D3D-4107-8474-B759582BC6A7@technicacreative.co.uk> 
	<4AFC3A7B.6080102@adcSTUDIO.com>
	<161617690911120843p4dbc99f2md2994f4227c6d58d@mail.gmail.com>
Message-ID: <161617690911120900j6fa8a0c1mbb6e60e980b60df7@mail.gmail.com>

Scratch that, I found a vulnerable host. Friend of mine has a shared
hosting account which shows the issue.

What's more, I figured out how to reproduce the problem. And it has
nothing to do with MultiViews.


If the host's configuration uses this (or similar), to tie PHP files
to the PHP interpreter, then test.php.jpg is executable:

AddHandler application/x-httpd-php .php

If, instead, they use this (or similar):

<FilesMatch "\.php$|\.php5$|\.php4$|\.php3$|\.phtml$|\.phpt$">
    SetHandler application/x-httpd-php
</FilesMatch>
<FilesMatch "\.phps$">
   SetHandler application/x-httpd-php-source
</FilesMatch>

Then the server is safe from this type of attack.

Step 15 here talks about this sort of thing:
http://php.net/manual/en/install.unix.apache2.php


-Otto
Sent from Memphis, TN, United States


On Thu, Nov 12, 2009 at 10:43 AM, Otto <otto at ottodestruct.com> wrote:
> I don't have access to any hosts that have this issue. I tried the
> ones I use, and have yet to find one that will execute *.php.jpg from
> a web request.
>
> If it's an Apache problem, then somebody should be able to tell me how
> to configure Apache to do it. I can't figure it out.
>
> I can confirm that simply turning on MultiViews doesn't create an
> exploitable system. There's some more configuration to make it happen.
>
> A default Apache and PHP installation, with no extreme changes to
> them, is NOT vulnerable.
>
> -Otto
>
>
>
> On Thu, Nov 12, 2009 at 10:40 AM, Ken Newman <Ken at adcstudio.com> wrote:
>> I have replicated this behavior, as in executed info.php.jpg on a server
>> running from a popular hosting company. (Is it appropriate to list hosts
>> here?) I figured out which host to test from the previous message from Lynne
>> Pope, :
>>
>> I just learned that Multiviews are enabled by default and that this is the
>> config for WHM/cPanel servers.
>>
>> So I went to a client's site (one of our only clients with a cPanel host;
>> going to switch them to our normal host soon.) and tested it. I was
>> surprised that it worked on such a popular host.
>>
>> If you want to test this out, Dave Jones or Otto, you'll probably have to
>> use a host with WHM/cPanel.
>>
>> On 11/12/2009 11:25 AM, Dave Jones wrote:
>>>
>>> I'm slightly confused since I thought the exploit allowed arbitrary
>>> execution of PHP on the server. ?This is much worse than a XSS Javascript
>>> exploit since PHP could potentially send spam emails, execute a DDOS attack,
>>> delete your public_html directory from the server or whatever.
>>>
>>> i have no doubt that fixing this exploit is a good thing, however I feel
>>> it slightly misses the point. ?That said, I have been unable to replicate
>>> this exploit in the wild, even with Options +MultiVIews.
>>>
>>> This is clearly and Apache/mis-configuration issue and if fixed in WP will
>>> remain unfixed in countless other web applications. ?It would be far better
>>> to ensure your host correctly configures Apache and doesn't leave security
>>> holes in the server, or move to a host that does!
>>>
>>>
>>> Dave Jones
>>> www.technicacreative.co.uk
>>>
>>>
>>> On 12 Nov 2009, at 16:18, Jacob Santos wrote:
>>>
>>>> Okay, good news, we've fixed the extension exploit and then will have to
>>>> wait another 6 to 8 months while another XSS attack shows up about people
>>>> adding images executing JavaScript on their servers (which isn't completely
>>>> bad since most / all administrative tasks requires a nonce).
>>>
>>> _______________________________________________
>>> wp-hackers mailing list
>>> wp-hackers at lists.automattic.com
>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
>

From dave at technicacreative.co.uk  Thu Nov 12 17:03:03 2009
From: dave at technicacreative.co.uk (Dave Jones)
Date: Thu, 12 Nov 2009 17:03:03 +0000
Subject: [wp-hackers] WordPress <= 2.8.5 Unrestricted File Upload
	Arbitrary PHP Code Execution
In-Reply-To: <161617690911120900j6fa8a0c1mbb6e60e980b60df7@mail.gmail.com>
References: <4AFC353E.4020906@santosj.name>
	<FFB01B28-8D3D-4107-8474-B759582BC6A7@technicacreative.co.uk>
	<4AFC3A7B.6080102@adcSTUDIO.com>
	<161617690911120843p4dbc99f2md2994f4227c6d58d@mail.gmail.com>
	<161617690911120900j6fa8a0c1mbb6e60e980b60df7@mail.gmail.com>
Message-ID: <C9446233-9C8F-4623-87C9-B12DB1A0259C@technicacreative.co.uk>

AddHandler application/x-httpd-php .php is the default config in many  
Linux distros though :(

Dave Jones
www.technicacreative.co.uk


On 12 Nov 2009, at 17:00, Otto wrote:

> AddHandler application/x-httpd-php .php


From otto at ottodestruct.com  Thu Nov 12 17:02:55 2009
From: otto at ottodestruct.com (Otto)
Date: Thu, 12 Nov 2009 11:02:55 -0600
Subject: [wp-hackers] WordPress <= 2.8.5 Unrestricted File Upload
	Arbitrary PHP Code Execution
In-Reply-To: <161617690911120900j6fa8a0c1mbb6e60e980b60df7@mail.gmail.com>
References: <4AFC353E.4020906@santosj.name>
	<FFB01B28-8D3D-4107-8474-B759582BC6A7@technicacreative.co.uk> 
	<4AFC3A7B.6080102@adcSTUDIO.com>
	<161617690911120843p4dbc99f2md2994f4227c6d58d@mail.gmail.com> 
	<161617690911120900j6fa8a0c1mbb6e60e980b60df7@mail.gmail.com>
Message-ID: <161617690911120902g3baced8eh3f2edfb97d736467@mail.gmail.com>

I just confirmed on my friend's vulnerable host that this code in the
.htaccess removed the vulnerability.

RemoveHandler application/x-httpd-php .php
<FilesMatch "\.php$|\.php5$|\.php4$|\.php3$|\.phtml$|\.phpt$">
   SetHandler application/x-httpd-php
</FilesMatch>
<FilesMatch "\.phps$">
  SetHandler application/x-httpd-php-source
</FilesMatch>

-Otto
Sent from Memphis, TN, United States

From gaarai at gaarai.com  Thu Nov 12 17:11:37 2009
From: gaarai at gaarai.com (Chris Jean)
Date: Thu, 12 Nov 2009 11:11:37 -0600
Subject: [wp-hackers] WordPress <= 2.8.5 Unrestricted File Upload
 Arbitrary PHP Code Execution
In-Reply-To: <161617690911120902g3baced8eh3f2edfb97d736467@mail.gmail.com>
References: <4AFC353E.4020906@santosj.name>	<FFB01B28-8D3D-4107-8474-B759582BC6A7@technicacreative.co.uk>
	<4AFC3A7B.6080102@adcSTUDIO.com>	<161617690911120843p4dbc99f2md2994f4227c6d58d@mail.gmail.com>
	<161617690911120900j6fa8a0c1mbb6e60e980b60df7@mail.gmail.com>
	<161617690911120902g3baced8eh3f2edfb97d736467@mail.gmail.com>
Message-ID: <4AFC41C9.2080801@gaarai.com>

I've just caught wind of this issue. Can I get more details on how to 
attempt the exploit? For example, if there is a file: exploit.php.jpg, 
do I simply request that file via the browser or is there a trick to it?

Chris Jean
http://gaarai.com/
@chrisjean



Otto wrote:
> I just confirmed on my friend's vulnerable host that this code in the
> .htaccess removed the vulnerability.
>
> RemoveHandler application/x-httpd-php .php
> <FilesMatch "\.php$|\.php5$|\.php4$|\.php3$|\.phtml$|\.phpt$">
>    SetHandler application/x-httpd-php
> </FilesMatch>
> <FilesMatch "\.phps$">
>   SetHandler application/x-httpd-php-source
> </FilesMatch>
>
> -Otto
> Sent from Memphis, TN, United States
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>   

From otto at ottodestruct.com  Thu Nov 12 17:17:20 2009
From: otto at ottodestruct.com (Otto)
Date: Thu, 12 Nov 2009 11:17:20 -0600
Subject: [wp-hackers] WordPress <= 2.8.5 Unrestricted File Upload
	Arbitrary PHP Code Execution
In-Reply-To: <4AFC41C9.2080801@gaarai.com>
References: <4AFC353E.4020906@santosj.name>
	<FFB01B28-8D3D-4107-8474-B759582BC6A7@technicacreative.co.uk> 
	<4AFC3A7B.6080102@adcSTUDIO.com>
	<161617690911120843p4dbc99f2md2994f4227c6d58d@mail.gmail.com> 
	<161617690911120900j6fa8a0c1mbb6e60e980b60df7@mail.gmail.com> 
	<161617690911120902g3baced8eh3f2edfb97d736467@mail.gmail.com> 
	<4AFC41C9.2080801@gaarai.com>
Message-ID: <161617690911120917h306884ffs44e8a7c7f5e02d54@mail.gmail.com>

That's the basic exploit, yes. Make a PHP file. Rename it to whatever.php.jpg.

WordPress will allow low-privilege users to upload this file through
WordPress, as *.jpg is in the whitelist for those users.

And apparently, some poorly configured Apache installations will let
you request that file and have it actually run as PHP code. Which can
provide a neat little backdoor into the system.

To exploit it, you must have a login to the system, the system must
allow you to upload files, and Apache must be configured using the
older AddHandler directive instead of the latest PHP recommended
method.

-Otto
Sent from Memphis, TN, United States


On Thu, Nov 12, 2009 at 11:11 AM, Chris Jean <gaarai at gaarai.com> wrote:
> I've just caught wind of this issue. Can I get more details on how to
> attempt the exploit? For example, if there is a file: exploit.php.jpg, do I
> simply request that file via the browser or is there a trick to it?
>
> Chris Jean
> http://gaarai.com/
> @chrisjean
>
>
>
> Otto wrote:
>>
>> I just confirmed on my friend's vulnerable host that this code in the
>> .htaccess removed the vulnerability.
>>
>> RemoveHandler application/x-httpd-php .php
>> <FilesMatch "\.php$|\.php5$|\.php4$|\.php3$|\.phtml$|\.phpt$">
>> ? SetHandler application/x-httpd-php
>> </FilesMatch>
>> <FilesMatch "\.phps$">
>> ?SetHandler application/x-httpd-php-source
>> </FilesMatch>
>>
>> -Otto
>> Sent from Memphis, TN, United States
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From otto at ottodestruct.com  Thu Nov 12 17:19:31 2009
From: otto at ottodestruct.com (Otto)
Date: Thu, 12 Nov 2009 11:19:31 -0600
Subject: [wp-hackers] Uploading image attachments from the front-end
In-Reply-To: <73C9CA2C-1075-41D7-BF86-2E1413DD5833@emrl.com>
References: <0A9E664C-9FA8-491B-BEA4-53CF42A4B8C2@emrl.com> 
	<32c7967e0911111237k17637c42sa87444d92c56e85f@mail.gmail.com> 
	<73C9CA2C-1075-41D7-BF86-2E1413DD5833@emrl.com>
Message-ID: <161617690911120919i16b8e09n72d94185911ef484@mail.gmail.com>

Sideload is where you "upload" a file from somewhere else on the web.
So it'll go grab that file from a website URL that you give it.


-Otto
Sent from Memphis, TN, United States


On Wed, Nov 11, 2009 at 2:39 PM, Matthew Gerring <mgerring at emrl.com> wrote:
> Finally found that function just now, but I'm leaning towards using
> media_handle_sideload.
>
> On Nov 11, 2009, at 12:37 PM, Leo germani wrote:
>
>> I think you should use media_handle_upload()
>>
>> Leo,,
>>
>> On Wed, Nov 11, 2009 at 6:04 PM, Matthew Gerring <mgerring at emrl.com>
>> wrote:
>>
>>> Hello all,
>>>
>>> I'm working on a collaborative editing system for WP and I'm trying to
>>> figure out how to access WP's media features from the frontend.
>>> wp_insert_attachment works just fine, but if I try to generate a
>>> thumbnail
>>> or the image metadata, WP shuts down and stops loading the page. I think
>>> this is because these functions are only supposed to run from the admin
>>> area
>>> but I'm not sure. This is what my code looks like:
>>>
>>> function sw_photo_upload() {
>>> if ($_FILES != null) {
>>> $upath = wp_upload_dir();
>>> $target_path = $upath['path'].'/';
>>> $target_path = $target_path . basename( $_FILES['uploadedfile']['name']);
>>> $target_uri = $upath['url'].'/'.basename(
>>> $_FILES['uploadedfile']['name']);
>>> if(move_uploaded_file($_FILES['uploadedfile']['tmp_name'], $target_path))
>>> {
>>> ?echo "The file ". ?basename( $_FILES['uploadedfile']['name'])." has been
>>> uploaded";
>>> ?echo $target_path;
>>> ?$attach = array();
>>> ?$attach['guid'] = $target_uri;
>>> ?$attach['post_title'] = basename( $_FILES['uploadedfile']['name']);
>>> ?$attach_id = wp_insert_attachment($attach, $target_uri,
>>> $_POST['parent']);
>>> ?wp_create_thumbnail($attach_id, '90');
>>> ?//wp_generate_attachment_metadata( $attach_id, $target_path );
>>> } else {
>>> ?echo "There was an error uploading ".$_FILES['uploadedfile']['name']."
>>> to ".$target_path.". PHP returned the following error:
>>> ".$_FILES['uploadedfile']['error'];
>>> }
>>> }
>>> }
>>>
>>> There's lots of debugging stuff in there and I'm sure it's very sloppy,
>>> but
>>> I don't understand why wp_create_thumbnail causes everything to crash. It
>>> executes just fine if I comment that line out, but I want to use WP's
>>> built
>>> in thumbnail generation. Is there a good way to do this?
>>>
>>> (And yes, I know this needs security improvements, that's my next step
>>> once
>>> it's working).
>>>
>>> -Matthew
>>> _______________________________________________
>>> wp-hackers mailing list
>>> wp-hackers at lists.automattic.com
>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>>
>>
>>
>>
>> --
>> leogermani.pirex.com.br
>> leogermani.estudiolivre.org
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From dave at technicacreative.co.uk  Thu Nov 12 17:22:03 2009
From: dave at technicacreative.co.uk (Dave Jones)
Date: Thu, 12 Nov 2009 17:22:03 +0000
Subject: [wp-hackers] WordPress <= 2.8.5 Unrestricted File Upload
	Arbitrary PHP Code Execution
In-Reply-To: <161617690911120917h306884ffs44e8a7c7f5e02d54@mail.gmail.com>
References: <4AFC353E.4020906@santosj.name>
	<FFB01B28-8D3D-4107-8474-B759582BC6A7@technicacreative.co.uk>
	<4AFC3A7B.6080102@adcSTUDIO.com>
	<161617690911120843p4dbc99f2md2994f4227c6d58d@mail.gmail.com>
	<161617690911120900j6fa8a0c1mbb6e60e980b60df7@mail.gmail.com>
	<161617690911120902g3baced8eh3f2edfb97d736467@mail.gmail.com>
	<4AFC41C9.2080801@gaarai.com>
	<161617690911120917h306884ffs44e8a7c7f5e02d54@mail.gmail.com>
Message-ID: <4692345E-07F0-43AF-8D30-C765548E3F8E@technicacreative.co.uk>

That's a nice plain english summary of the issue.  Thanks.

Dave Jones
www.technicacreative.co.uk


On 12 Nov 2009, at 17:17, Otto wrote:

> That's the basic exploit, yes. Make a PHP file. Rename it to  
> whatever.php.jpg.
>
> WordPress will allow low-privilege users to upload this file through
> WordPress, as *.jpg is in the whitelist for those users.
>
> And apparently, some poorly configured Apache installations will let
> you request that file and have it actually run as PHP code. Which can
> provide a neat little backdoor into the system.
>
> To exploit it, you must have a login to the system, the system must
> allow you to upload files, and Apache must be configured using the
> older AddHandler directive instead of the latest PHP recommended
> method.
>
> -Otto
> Sent from Memphis, TN, United States
>
>
> On Thu, Nov 12, 2009 at 11:11 AM, Chris Jean <gaarai at gaarai.com>  
> wrote:
>> I've just caught wind of this issue. Can I get more details on how to
>> attempt the exploit? For example, if there is a file:  
>> exploit.php.jpg, do I
>> simply request that file via the browser or is there a trick to it?
>>
>> Chris Jean
>> http://gaarai.com/
>> @chrisjean
>>
>>
>>
>> Otto wrote:
>>>
>>> I just confirmed on my friend's vulnerable host that this code in  
>>> the
>>> .htaccess removed the vulnerability.
>>>
>>> RemoveHandler application/x-httpd-php .php
>>> <FilesMatch "\.php$|\.php5$|\.php4$|\.php3$|\.phtml$|\.phpt$">
>>>   SetHandler application/x-httpd-php
>>> </FilesMatch>
>>> <FilesMatch "\.phps$">
>>>  SetHandler application/x-httpd-php-source
>>> </FilesMatch>
>>>
>>> -Otto
>>> Sent from Memphis, TN, United States
>>> _______________________________________________
>>> wp-hackers mailing list
>>> wp-hackers at lists.automattic.com
>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>>
>>
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers


From pete at jointforcestech.com  Thu Nov 12 17:26:45 2009
From: pete at jointforcestech.com (Pete Mall)
Date: Thu, 12 Nov 2009 09:26:45 -0800
Subject: [wp-hackers] WordPress <= 2.8.5 Unrestricted File Upload
	Arbitrary PHP Code Execution
In-Reply-To: <161617690911120917h306884ffs44e8a7c7f5e02d54@mail.gmail.com>
References: <4AFC353E.4020906@santosj.name>
	<FFB01B28-8D3D-4107-8474-B759582BC6A7@technicacreative.co.uk> 
	<4AFC3A7B.6080102@adcSTUDIO.com>
	<161617690911120843p4dbc99f2md2994f4227c6d58d@mail.gmail.com> 
	<161617690911120900j6fa8a0c1mbb6e60e980b60df7@mail.gmail.com> 
	<161617690911120902g3baced8eh3f2edfb97d736467@mail.gmail.com> 
	<4AFC41C9.2080801@gaarai.com>
	<161617690911120917h306884ffs44e8a7c7f5e02d54@mail.gmail.com>
Message-ID: <7f49e8010911120926p1f152c1bsf6eaf859d961dc36@mail.gmail.com>

My WordPress MU installation converts it to testphp.jpg from test.php.jpg



On Thu, Nov 12, 2009 at 9:17 AM, Otto <otto at ottodestruct.com> wrote:

> That's the basic exploit, yes. Make a PHP file. Rename it to
> whatever.php.jpg.
>
> WordPress will allow low-privilege users to upload this file through
> WordPress, as *.jpg is in the whitelist for those users.
>
> And apparently, some poorly configured Apache installations will let
> you request that file and have it actually run as PHP code. Which can
> provide a neat little backdoor into the system.
>
> To exploit it, you must have a login to the system, the system must
> allow you to upload files, and Apache must be configured using the
> older AddHandler directive instead of the latest PHP recommended
> method.
>
> -Otto
> Sent from Memphis, TN, United States
>
>
> On Thu, Nov 12, 2009 at 11:11 AM, Chris Jean <gaarai at gaarai.com> wrote:
> > I've just caught wind of this issue. Can I get more details on how to
> > attempt the exploit? For example, if there is a file: exploit.php.jpg, do
> I
> > simply request that file via the browser or is there a trick to it?
> >
> > Chris Jean
> > http://gaarai.com/
> > @chrisjean
> >
> >
> >
> > Otto wrote:
> >>
> >> I just confirmed on my friend's vulnerable host that this code in the
> >> .htaccess removed the vulnerability.
> >>
> >> RemoveHandler application/x-httpd-php .php
> >> <FilesMatch "\.php$|\.php5$|\.php4$|\.php3$|\.phtml$|\.phpt$">
> >>   SetHandler application/x-httpd-php
> >> </FilesMatch>
> >> <FilesMatch "\.phps$">
> >>  SetHandler application/x-httpd-php-source
> >> </FilesMatch>
> >>
> >> -Otto
> >> Sent from Memphis, TN, United States
> >> _______________________________________________
> >> wp-hackers mailing list
> >> wp-hackers at lists.automattic.com
> >> http://lists.automattic.com/mailman/listinfo/wp-hackers
> >>
> >
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers at lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> >
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From mgerring at emrl.com  Thu Nov 12 18:28:54 2009
From: mgerring at emrl.com (Matthew Gerring)
Date: Thu, 12 Nov 2009 10:28:54 -0800
Subject: [wp-hackers] Uploading image attachments from the front-end
In-Reply-To: <161617690911120919i16b8e09n72d94185911ef484@mail.gmail.com>
References: <0A9E664C-9FA8-491B-BEA4-53CF42A4B8C2@emrl.com>
	<32c7967e0911111237k17637c42sa87444d92c56e85f@mail.gmail.com>
	<73C9CA2C-1075-41D7-BF86-2E1413DD5833@emrl.com>
	<161617690911120919i16b8e09n72d94185911ef484@mail.gmail.com>
Message-ID: <6C26D93F-FD4F-47CA-871D-FD7C9647B495@emrl.com>

I figured that out- media_sideload_image() handles the upload and  
creates a fake $_FILES-like array from a remote URL. You can pass a  
regular $_FILES array to media_handle_sideload() along with the post  
ID and it handles all of the attachment, meta, mimetype, thumbnail  
generation, and etc.

I had to require /wp-admin/includes/admin.php to have access to all of  
the functions I needed- is this the best way to do it?

-Matthew

On Nov 12, 2009, at 9:19 AM, Otto wrote:

> Sideload is where you "upload" a file from somewhere else on the web.
> So it'll go grab that file from a website URL that you give it.
>
>
> -Otto
> Sent from Memphis, TN, United States
>
>
> On Wed, Nov 11, 2009 at 2:39 PM, Matthew Gerring <mgerring at emrl.com>  
> wrote:
>> Finally found that function just now, but I'm leaning towards using
>> media_handle_sideload.
>>
>> On Nov 11, 2009, at 12:37 PM, Leo germani wrote:
>>
>>> I think you should use media_handle_upload()
>>>
>>> Leo,,
>>>
>>> On Wed, Nov 11, 2009 at 6:04 PM, Matthew Gerring <mgerring at emrl.com>
>>> wrote:
>>>
>>>> Hello all,
>>>>
>>>> I'm working on a collaborative editing system for WP and I'm  
>>>> trying to
>>>> figure out how to access WP's media features from the frontend.
>>>> wp_insert_attachment works just fine, but if I try to generate a
>>>> thumbnail
>>>> or the image metadata, WP shuts down and stops loading the page.  
>>>> I think
>>>> this is because these functions are only supposed to run from the  
>>>> admin
>>>> area
>>>> but I'm not sure. This is what my code looks like:
>>>>
>>>> function sw_photo_upload() {
>>>> if ($_FILES != null) {
>>>> $upath = wp_upload_dir();
>>>> $target_path = $upath['path'].'/';
>>>> $target_path = $target_path . basename( $_FILES['uploadedfile'] 
>>>> ['name']);
>>>> $target_uri = $upath['url'].'/'.basename(
>>>> $_FILES['uploadedfile']['name']);
>>>> if(move_uploaded_file($_FILES['uploadedfile']['tmp_name'],  
>>>> $target_path))
>>>> {
>>>>  echo "The file ".  basename( $_FILES['uploadedfile']['name'])."  
>>>> has been
>>>> uploaded";
>>>>  echo $target_path;
>>>>  $attach = array();
>>>>  $attach['guid'] = $target_uri;
>>>>  $attach['post_title'] = basename( $_FILES['uploadedfile'] 
>>>> ['name']);
>>>>  $attach_id = wp_insert_attachment($attach, $target_uri,
>>>> $_POST['parent']);
>>>>  wp_create_thumbnail($attach_id, '90');
>>>>  //wp_generate_attachment_metadata( $attach_id, $target_path );
>>>> } else {
>>>>  echo "There was an error uploading ".$_FILES['uploadedfile'] 
>>>> ['name']."
>>>> to ".$target_path.". PHP returned the following error:
>>>> ".$_FILES['uploadedfile']['error'];
>>>> }
>>>> }
>>>> }
>>>>
>>>> There's lots of debugging stuff in there and I'm sure it's very  
>>>> sloppy,
>>>> but
>>>> I don't understand why wp_create_thumbnail causes everything to  
>>>> crash. It
>>>> executes just fine if I comment that line out, but I want to use  
>>>> WP's
>>>> built
>>>> in thumbnail generation. Is there a good way to do this?
>>>>
>>>> (And yes, I know this needs security improvements, that's my next  
>>>> step
>>>> once
>>>> it's working).
>>>>
>>>> -Matthew
>>>> _______________________________________________
>>>> wp-hackers mailing list
>>>> wp-hackers at lists.automattic.com
>>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>>>
>>>
>>>
>>>
>>> --
>>> leogermani.pirex.com.br
>>> leogermani.estudiolivre.org
>>> _______________________________________________
>>> wp-hackers mailing list
>>> wp-hackers at lists.automattic.com
>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers


From tunamaxx at yahoo.com  Thu Nov 12 19:23:49 2009
From: tunamaxx at yahoo.com (Tuna Can)
Date: Thu, 12 Nov 2009 11:23:49 -0800 (PST)
Subject: [wp-hackers] Best practice way for a plugin to use WP_Rewrite
In-Reply-To: <88432.93280.qm@web65701.mail.ac4.yahoo.com>
Message-ID: <681756.86343.qm@web65715.mail.ac4.yahoo.com>

A little perseverance paid off...  My whole issue relates to trying to hook in the flush_rules() at 'init' instead of 'admin-init' as required.

Sorry for the noob mistake. :)


      __________________________________________________________________
Be smarter than spam. See how smart SpamGuard is at giving junk email the boot with the All-new Yahoo! Mail.  Click on Options in Mail and switch to New Mail today or register for free at http://mail.yahoo.ca


From wp at xentek.net  Thu Nov 12 20:12:54 2009
From: wp at xentek.net (Eric Marden)
Date: Thu, 12 Nov 2009 15:12:54 -0500
Subject: [wp-hackers] Uploading image attachments from the front-end
In-Reply-To: <6C26D93F-FD4F-47CA-871D-FD7C9647B495@emrl.com>
References: <0A9E664C-9FA8-491B-BEA4-53CF42A4B8C2@emrl.com>
	<32c7967e0911111237k17637c42sa87444d92c56e85f@mail.gmail.com>
	<73C9CA2C-1075-41D7-BF86-2E1413DD5833@emrl.com>
	<161617690911120919i16b8e09n72d94185911ef484@mail.gmail.com>
	<6C26D93F-FD4F-47CA-871D-FD7C9647B495@emrl.com>
Message-ID: <DB433758-3F5E-4C3F-BDEE-D8B399A7CCB6@xentek.net>

On Nov 12, 2009, at 1:28 PM, Matthew Gerring wrote:

> I had to require /wp-admin/includes/admin.php to have access to all  
> of the functions I needed- is this the best way to do it?


No. Your upload processing code should be in a plugin so it can take  
advantage of WP API functions.
I usually hook into init:

add_action('init','upload_handler_function');

function upload_handler_function()
{
   // check for your form being submitted (via hidden field) and  
validate the nonce
   // then process the rest with the media_* api functions or whatever
}



- Eric Marden
__________________________________
http://xentek.net/code/wordpress/
tw: @xentek





From wp at xentek.net  Thu Nov 12 20:25:08 2009
From: wp at xentek.net (Eric Marden)
Date: Thu, 12 Nov 2009 15:25:08 -0500
Subject: [wp-hackers] some problem with javascript in widgets options?
In-Reply-To: <67dfa4090911110915i1a63e9danef62d38ce59a9dd6@mail.gmail.com>
References: <67dfa4090911110915i1a63e9danef62d38ce59a9dd6@mail.gmail.com>
Message-ID: <11FD3801-2558-44FE-BC49-41500486EFB5@xentek.net>

> when i try to add widget (i am in wp-admin > widgets) i drag any
> widget from center of page to right panel, where i drop it. this small
> throbber (animated circle) start to work which shows me that wordpress
> started to save my widget. but throbber don't stop, it is animating
> and animating (i waited even few minutes). when i click on Save
> button, throbber stops and dissapear (what shows me, or better
> suggests me that widget in sidebar is saved)
>
> but when i refresh site, i dont see nothing new in sidebar. also when
> i refresh wp-admin, right panel in widgets.php is empty. so widget
> truelly wasn't saved.

Does firebug for Firefox report any issues? Can you see the ajax  
requests (with firebug) and do they return a response?



- Eric Marden
__________________________________
http://xentek.net/code/wordpress/
tw: @xentek





From kkarpieszuk at gmail.com  Thu Nov 12 20:39:29 2009
From: kkarpieszuk at gmail.com (Konrad Karpieszuk)
Date: Thu, 12 Nov 2009 21:39:29 +0100
Subject: [wp-hackers] some problem with javascript in widgets options?
In-Reply-To: <11FD3801-2558-44FE-BC49-41500486EFB5@xentek.net>
References: <67dfa4090911110915i1a63e9danef62d38ce59a9dd6@mail.gmail.com>
	<11FD3801-2558-44FE-BC49-41500486EFB5@xentek.net>
Message-ID: <67dfa4090911121239l5a9eb900w5fcd8c6eab04a7ab@mail.gmail.com>

Eric, thank you for any answer. I was affraid that anybody wont answer me

Where firebug should reports JS problems? I checked DOM tab and Script
tab and tehre i don't see any error reports (but there is a lot of
information, so maybe i don't see, how it should look?)

On Thu, Nov 12, 2009 at 9:25 PM, Eric Marden <wp at xentek.net> wrote:
>> when i try to add widget (i am in wp-admin > widgets) i drag any
>> widget from center of page to right panel, where i drop it. this small
>> throbber (animated circle) start to work which shows me that wordpress
>> started to save my widget. but throbber don't stop, it is animating
>> and animating (i waited even few minutes). when i click on Save
>> button, throbber stops and dissapear (what shows me, or better
>> suggests me that widget in sidebar is saved)
>>
>> but when i refresh site, i dont see nothing new in sidebar. also when
>> i refresh wp-admin, right panel in widgets.php is empty. so widget
>> truelly wasn't saved.
>
> Does firebug for Firefox report any issues? Can you see the ajax requests
> (with firebug) and do they return a response?
>
>
>
> - Eric Marden
> __________________________________
> http://xentek.net/code/wordpress/
> tw: @xentek
>
>
>
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>



-- 
(en) regards / (pl) pozdrawiam
Konrad Karpieszuk
http://konradjestwrwandzie.wordpress.com/

From wordpress at dd32.id.au  Thu Nov 12 20:40:07 2009
From: wordpress at dd32.id.au (Dion Hulse (dd32))
Date: Fri, 13 Nov 2009 07:40:07 +1100
Subject: [wp-hackers] Uploading image attachments from the front-end
In-Reply-To: <6C26D93F-FD4F-47CA-871D-FD7C9647B495@emrl.com>
References: <0A9E664C-9FA8-491B-BEA4-53CF42A4B8C2@emrl.com>
	<32c7967e0911111237k17637c42sa87444d92c56e85f@mail.gmail.com>
	<73C9CA2C-1075-41D7-BF86-2E1413DD5833@emrl.com>
	<161617690911120919i16b8e09n72d94185911ef484@mail.gmail.com>
	<6C26D93F-FD4F-47CA-871D-FD7C9647B495@emrl.com>
Message-ID: <op.u3auc118spxmuu@dd32>

On Fri, 13 Nov 2009 05:28:54 +1100, Matthew Gerring <mgerring at emrl.com>  
wrote:

> I figured that out- media_sideload_image() handles the upload and
> creates a fake $_FILES-like array from a remote URL. You can pass a
> regular $_FILES array to media_handle_sideload() along with the post
> ID and it handles all of the attachment, meta, mimetype, thumbnail
> generation, and etc.
>
> I had to require /wp-admin/includes/admin.php to have access to all of
> the functions I needed- is this the best way to do it?

Unfortunately, Yes. As the media management functions are held within.
You might get away with just using wp-admin/includes/media.php and  
file.php..
-- 
Using Opera's revolutionary e-mail client: http://www.opera.com/mail/

From shinji at elite-systems.org  Thu Nov 12 21:26:02 2009
From: shinji at elite-systems.org (Robert Pendell)
Date: Thu, 12 Nov 2009 16:26:02 -0500
Subject: [wp-hackers] WordPress <= 2.8.5 Unrestricted File Upload
	Arbitrary PHP Code Execution
In-Reply-To: <161617690911120900j6fa8a0c1mbb6e60e980b60df7@mail.gmail.com>
References: <4AFC353E.4020906@santosj.name>
	<FFB01B28-8D3D-4107-8474-B759582BC6A7@technicacreative.co.uk>
	<4AFC3A7B.6080102@adcSTUDIO.com>
	<161617690911120843p4dbc99f2md2994f4227c6d58d@mail.gmail.com>
	<161617690911120900j6fa8a0c1mbb6e60e980b60df7@mail.gmail.com>
Message-ID: <a13b5a590911121326i4205f5bekffb314d5d4445254@mail.gmail.com>

Ok.  I'm curious here.  Does this only affect configurations that use php as
an Apache module?  That's what those instructions dictate.  Here is my
configuration and it isn't affected even with MultiViews on.  I am running
php as a fastcgi binary.

.htaccess:
AddHandler fastcgi-script fcg fcgi fpl
AddHandler php5-fastcgi .php
Action php5-fastcgi /php5-wrapper.fcgi




Robert Pendell
shinji at elite-systems.org
CAcert Assurer
"A perfect world is one of chaos."



On Thu, Nov 12, 2009 at 12:00 PM, Otto <otto at ottodestruct.com> wrote:

> Scratch that, I found a vulnerable host. Friend of mine has a shared
> hosting account which shows the issue.
>
> What's more, I figured out how to reproduce the problem. And it has
> nothing to do with MultiViews.
>
>
> If the host's configuration uses this (or similar), to tie PHP files
> to the PHP interpreter, then test.php.jpg is executable:
>
> AddHandler application/x-httpd-php .php
>
> If, instead, they use this (or similar):
>
> <FilesMatch "\.php$|\.php5$|\.php4$|\.php3$|\.phtml$|\.phpt$">
>    SetHandler application/x-httpd-php
> </FilesMatch>
> <FilesMatch "\.phps$">
>   SetHandler application/x-httpd-php-source
> </FilesMatch>
>
> Then the server is safe from this type of attack.
>
> Step 15 here talks about this sort of thing:
> http://php.net/manual/en/install.unix.apache2.php
>
>
> -Otto
> Sent from Memphis, TN, United States
>
>
> On Thu, Nov 12, 2009 at 10:43 AM, Otto <otto at ottodestruct.com> wrote:
> > I don't have access to any hosts that have this issue. I tried the
> > ones I use, and have yet to find one that will execute *.php.jpg from
> > a web request.
> >
> > If it's an Apache problem, then somebody should be able to tell me how
> > to configure Apache to do it. I can't figure it out.
> >
> > I can confirm that simply turning on MultiViews doesn't create an
> > exploitable system. There's some more configuration to make it happen.
> >
> > A default Apache and PHP installation, with no extreme changes to
> > them, is NOT vulnerable.
> >
> > -Otto
> >
> >
> >
> > On Thu, Nov 12, 2009 at 10:40 AM, Ken Newman <Ken at adcstudio.com> wrote:
> >> I have replicated this behavior, as in executed info.php.jpg on a server
> >> running from a popular hosting company. (Is it appropriate to list hosts
> >> here?) I figured out which host to test from the previous message from
> Lynne
> >> Pope, :
> >>
> >> I just learned that Multiviews are enabled by default and that this is
> the
> >> config for WHM/cPanel servers.
> >>
> >> So I went to a client's site (one of our only clients with a cPanel
> host;
> >> going to switch them to our normal host soon.) and tested it. I was
> >> surprised that it worked on such a popular host.
> >>
> >> If you want to test this out, Dave Jones or Otto, you'll probably have
> to
> >> use a host with WHM/cPanel.
> >>
> >> On 11/12/2009 11:25 AM, Dave Jones wrote:
> >>>
> >>> I'm slightly confused since I thought the exploit allowed arbitrary
> >>> execution of PHP on the server.  This is much worse than a XSS
> Javascript
> >>> exploit since PHP could potentially send spam emails, execute a DDOS
> attack,
> >>> delete your public_html directory from the server or whatever.
> >>>
> >>> i have no doubt that fixing this exploit is a good thing, however I
> feel
> >>> it slightly misses the point.  That said, I have been unable to
> replicate
> >>> this exploit in the wild, even with Options +MultiVIews.
> >>>
> >>> This is clearly and Apache/mis-configuration issue and if fixed in WP
> will
> >>> remain unfixed in countless other web applications.  It would be far
> better
> >>> to ensure your host correctly configures Apache and doesn't leave
> security
> >>> holes in the server, or move to a host that does!
> >>>
> >>>
> >>> Dave Jones
> >>> www.technicacreative.co.uk
> >>>
> >>>
> >>> On 12 Nov 2009, at 16:18, Jacob Santos wrote:
> >>>
> >>>> Okay, good news, we've fixed the extension exploit and then will have
> to
> >>>> wait another 6 to 8 months while another XSS attack shows up about
> people
> >>>> adding images executing JavaScript on their servers (which isn't
> completely
> >>>> bad since most / all administrative tasks requires a nonce).
> >>>
> >>> _______________________________________________
> >>> wp-hackers mailing list
> >>> wp-hackers at lists.automattic.com
> >>> http://lists.automattic.com/mailman/listinfo/wp-hackers
> >>
> >> _______________________________________________
> >> wp-hackers mailing list
> >> wp-hackers at lists.automattic.com
> >> http://lists.automattic.com/mailman/listinfo/wp-hackers
> >>
> >
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From pete at jointforcestech.com  Thu Nov 12 21:30:11 2009
From: pete at jointforcestech.com (Pete Mall)
Date: Thu, 12 Nov 2009 13:30:11 -0800
Subject: [wp-hackers] WordPress <= 2.8.5 Unrestricted File Upload
	Arbitrary PHP Code Execution
In-Reply-To: <a13b5a590911121326i4205f5bekffb314d5d4445254@mail.gmail.com>
References: <4AFC353E.4020906@santosj.name>
	<FFB01B28-8D3D-4107-8474-B759582BC6A7@technicacreative.co.uk> 
	<4AFC3A7B.6080102@adcSTUDIO.com>
	<161617690911120843p4dbc99f2md2994f4227c6d58d@mail.gmail.com> 
	<161617690911120900j6fa8a0c1mbb6e60e980b60df7@mail.gmail.com> 
	<a13b5a590911121326i4205f5bekffb314d5d4445254@mail.gmail.com>
Message-ID: <7f49e8010911121330n347a90f6ja5e52a3688a5f76b@mail.gmail.com>

This is already fixed in WP 2.8.6.


On Thu, Nov 12, 2009 at 1:26 PM, Robert Pendell <shinji at elite-systems.org>wrote:

> Ok.  I'm curious here.  Does this only affect configurations that use php
> as
> an Apache module?  That's what those instructions dictate.  Here is my
> configuration and it isn't affected even with MultiViews on.  I am running
> php as a fastcgi binary.
>
> .htaccess:
> AddHandler fastcgi-script fcg fcgi fpl
> AddHandler php5-fastcgi .php
> Action php5-fastcgi /php5-wrapper.fcgi
>
>
>
>
> Robert Pendell
> shinji at elite-systems.org
> CAcert Assurer
> "A perfect world is one of chaos."
>
>
>
> On Thu, Nov 12, 2009 at 12:00 PM, Otto <otto at ottodestruct.com> wrote:
>
> > Scratch that, I found a vulnerable host. Friend of mine has a shared
> > hosting account which shows the issue.
> >
> > What's more, I figured out how to reproduce the problem. And it has
> > nothing to do with MultiViews.
> >
> >
> > If the host's configuration uses this (or similar), to tie PHP files
> > to the PHP interpreter, then test.php.jpg is executable:
> >
> > AddHandler application/x-httpd-php .php
> >
> > If, instead, they use this (or similar):
> >
> > <FilesMatch "\.php$|\.php5$|\.php4$|\.php3$|\.phtml$|\.phpt$">
> >    SetHandler application/x-httpd-php
> > </FilesMatch>
> > <FilesMatch "\.phps$">
> >   SetHandler application/x-httpd-php-source
> > </FilesMatch>
> >
> > Then the server is safe from this type of attack.
> >
> > Step 15 here talks about this sort of thing:
> > http://php.net/manual/en/install.unix.apache2.php
> >
> >
> > -Otto
> > Sent from Memphis, TN, United States
> >
> >
> > On Thu, Nov 12, 2009 at 10:43 AM, Otto <otto at ottodestruct.com> wrote:
> > > I don't have access to any hosts that have this issue. I tried the
> > > ones I use, and have yet to find one that will execute *.php.jpg from
> > > a web request.
> > >
> > > If it's an Apache problem, then somebody should be able to tell me how
> > > to configure Apache to do it. I can't figure it out.
> > >
> > > I can confirm that simply turning on MultiViews doesn't create an
> > > exploitable system. There's some more configuration to make it happen.
> > >
> > > A default Apache and PHP installation, with no extreme changes to
> > > them, is NOT vulnerable.
> > >
> > > -Otto
> > >
> > >
> > >
> > > On Thu, Nov 12, 2009 at 10:40 AM, Ken Newman <Ken at adcstudio.com>
> wrote:
> > >> I have replicated this behavior, as in executed info.php.jpg on a
> server
> > >> running from a popular hosting company. (Is it appropriate to list
> hosts
> > >> here?) I figured out which host to test from the previous message from
> > Lynne
> > >> Pope, :
> > >>
> > >> I just learned that Multiviews are enabled by default and that this is
> > the
> > >> config for WHM/cPanel servers.
> > >>
> > >> So I went to a client's site (one of our only clients with a cPanel
> > host;
> > >> going to switch them to our normal host soon.) and tested it. I was
> > >> surprised that it worked on such a popular host.
> > >>
> > >> If you want to test this out, Dave Jones or Otto, you'll probably have
> > to
> > >> use a host with WHM/cPanel.
> > >>
> > >> On 11/12/2009 11:25 AM, Dave Jones wrote:
> > >>>
> > >>> I'm slightly confused since I thought the exploit allowed arbitrary
> > >>> execution of PHP on the server.  This is much worse than a XSS
> > Javascript
> > >>> exploit since PHP could potentially send spam emails, execute a DDOS
> > attack,
> > >>> delete your public_html directory from the server or whatever.
> > >>>
> > >>> i have no doubt that fixing this exploit is a good thing, however I
> > feel
> > >>> it slightly misses the point.  That said, I have been unable to
> > replicate
> > >>> this exploit in the wild, even with Options +MultiVIews.
> > >>>
> > >>> This is clearly and Apache/mis-configuration issue and if fixed in WP
> > will
> > >>> remain unfixed in countless other web applications.  It would be far
> > better
> > >>> to ensure your host correctly configures Apache and doesn't leave
> > security
> > >>> holes in the server, or move to a host that does!
> > >>>
> > >>>
> > >>> Dave Jones
> > >>> www.technicacreative.co.uk
> > >>>
> > >>>
> > >>> On 12 Nov 2009, at 16:18, Jacob Santos wrote:
> > >>>
> > >>>> Okay, good news, we've fixed the extension exploit and then will
> have
> > to
> > >>>> wait another 6 to 8 months while another XSS attack shows up about
> > people
> > >>>> adding images executing JavaScript on their servers (which isn't
> > completely
> > >>>> bad since most / all administrative tasks requires a nonce).
> > >>>
> > >>> _______________________________________________
> > >>> wp-hackers mailing list
> > >>> wp-hackers at lists.automattic.com
> > >>> http://lists.automattic.com/mailman/listinfo/wp-hackers
> > >>
> > >> _______________________________________________
> > >> wp-hackers mailing list
> > >> wp-hackers at lists.automattic.com
> > >> http://lists.automattic.com/mailman/listinfo/wp-hackers
> > >>
> > >
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers at lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> >
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From batmoo at gmail.com  Thu Nov 12 21:36:11 2009
From: batmoo at gmail.com (Mohammad Jangda)
Date: Thu, 12 Nov 2009 16:36:11 -0500
Subject: [wp-hackers] some problem with javascript in widgets options?
In-Reply-To: <67dfa4090911121239l5a9eb900w5fcd8c6eab04a7ab@mail.gmail.com>
References: <67dfa4090911110915i1a63e9danef62d38ce59a9dd6@mail.gmail.com> 
	<11FD3801-2558-44FE-BC49-41500486EFB5@xentek.net>
	<67dfa4090911121239l5a9eb900w5fcd8c6eab04a7ab@mail.gmail.com>
Message-ID: <eaaa36c90911121336ve9933eao55299b61b73c4668@mail.gmail.com>

>
> Where firebug should reports JS problems? I checked DOM tab and Script
> tab and tehre i don't see any error reports (but there is a lot of
> information, so maybe i don't see, how it should look?)
>
>
Under the Console tab. Make sure Console is "Enabled" and "Show Javascript
Errors" and "Show XMLHttpRequests" are selected.

From otto at ottodestruct.com  Thu Nov 12 21:37:38 2009
From: otto at ottodestruct.com (Otto)
Date: Thu, 12 Nov 2009 15:37:38 -0600
Subject: [wp-hackers] WordPress <= 2.8.5 Unrestricted File Upload
	Arbitrary PHP Code Execution
In-Reply-To: <7f49e8010911121330n347a90f6ja5e52a3688a5f76b@mail.gmail.com>
References: <4AFC353E.4020906@santosj.name>
	<FFB01B28-8D3D-4107-8474-B759582BC6A7@technicacreative.co.uk> 
	<4AFC3A7B.6080102@adcSTUDIO.com>
	<161617690911120843p4dbc99f2md2994f4227c6d58d@mail.gmail.com> 
	<161617690911120900j6fa8a0c1mbb6e60e980b60df7@mail.gmail.com> 
	<a13b5a590911121326i4205f5bekffb314d5d4445254@mail.gmail.com> 
	<7f49e8010911121330n347a90f6ja5e52a3688a5f76b@mail.gmail.com>
Message-ID: <161617690911121337r50d2b63bhca36464528d492e@mail.gmail.com>

"Fixed" is not the word I'd use to describe it. The vulnerability
still exists, WP 2.8.6 just has a hacky workaround to prevent it being
easily exploited through WordPress.

I'd prefer an actual fix to my Apache configuration which prevents the
file from executing in the first place.

-Otto



On Thu, Nov 12, 2009 at 3:30 PM, Pete Mall <pete at jointforcestech.com> wrote:
> This is already fixed in WP 2.8.6.
>
>
> On Thu, Nov 12, 2009 at 1:26 PM, Robert Pendell <shinji at elite-systems.org>wrote:
>
>> Ok. ?I'm curious here. ?Does this only affect configurations that use php
>> as
>> an Apache module? ?That's what those instructions dictate. ?Here is my
>> configuration and it isn't affected even with MultiViews on. ?I am running
>> php as a fastcgi binary.
>>
>> .htaccess:
>> AddHandler fastcgi-script fcg fcgi fpl
>> AddHandler php5-fastcgi .php
>> Action php5-fastcgi /php5-wrapper.fcgi
>>
>>
>>
>>
>> Robert Pendell
>> shinji at elite-systems.org
>> CAcert Assurer
>> "A perfect world is one of chaos."
>>
>>
>>
>> On Thu, Nov 12, 2009 at 12:00 PM, Otto <otto at ottodestruct.com> wrote:
>>
>> > Scratch that, I found a vulnerable host. Friend of mine has a shared
>> > hosting account which shows the issue.
>> >
>> > What's more, I figured out how to reproduce the problem. And it has
>> > nothing to do with MultiViews.
>> >
>> >
>> > If the host's configuration uses this (or similar), to tie PHP files
>> > to the PHP interpreter, then test.php.jpg is executable:
>> >
>> > AddHandler application/x-httpd-php .php
>> >
>> > If, instead, they use this (or similar):
>> >
>> > <FilesMatch "\.php$|\.php5$|\.php4$|\.php3$|\.phtml$|\.phpt$">
>> > ? ?SetHandler application/x-httpd-php
>> > </FilesMatch>
>> > <FilesMatch "\.phps$">
>> > ? SetHandler application/x-httpd-php-source
>> > </FilesMatch>
>> >
>> > Then the server is safe from this type of attack.
>> >
>> > Step 15 here talks about this sort of thing:
>> > http://php.net/manual/en/install.unix.apache2.php
>> >
>> >
>> > -Otto
>> > Sent from Memphis, TN, United States
>> >
>> >
>> > On Thu, Nov 12, 2009 at 10:43 AM, Otto <otto at ottodestruct.com> wrote:
>> > > I don't have access to any hosts that have this issue. I tried the
>> > > ones I use, and have yet to find one that will execute *.php.jpg from
>> > > a web request.
>> > >
>> > > If it's an Apache problem, then somebody should be able to tell me how
>> > > to configure Apache to do it. I can't figure it out.
>> > >
>> > > I can confirm that simply turning on MultiViews doesn't create an
>> > > exploitable system. There's some more configuration to make it happen.
>> > >
>> > > A default Apache and PHP installation, with no extreme changes to
>> > > them, is NOT vulnerable.
>> > >
>> > > -Otto
>> > >
>> > >
>> > >
>> > > On Thu, Nov 12, 2009 at 10:40 AM, Ken Newman <Ken at adcstudio.com>
>> wrote:
>> > >> I have replicated this behavior, as in executed info.php.jpg on a
>> server
>> > >> running from a popular hosting company. (Is it appropriate to list
>> hosts
>> > >> here?) I figured out which host to test from the previous message from
>> > Lynne
>> > >> Pope, :
>> > >>
>> > >> I just learned that Multiviews are enabled by default and that this is
>> > the
>> > >> config for WHM/cPanel servers.
>> > >>
>> > >> So I went to a client's site (one of our only clients with a cPanel
>> > host;
>> > >> going to switch them to our normal host soon.) and tested it. I was
>> > >> surprised that it worked on such a popular host.
>> > >>
>> > >> If you want to test this out, Dave Jones or Otto, you'll probably have
>> > to
>> > >> use a host with WHM/cPanel.
>> > >>
>> > >> On 11/12/2009 11:25 AM, Dave Jones wrote:
>> > >>>
>> > >>> I'm slightly confused since I thought the exploit allowed arbitrary
>> > >>> execution of PHP on the server. ?This is much worse than a XSS
>> > Javascript
>> > >>> exploit since PHP could potentially send spam emails, execute a DDOS
>> > attack,
>> > >>> delete your public_html directory from the server or whatever.
>> > >>>
>> > >>> i have no doubt that fixing this exploit is a good thing, however I
>> > feel
>> > >>> it slightly misses the point. ?That said, I have been unable to
>> > replicate
>> > >>> this exploit in the wild, even with Options +MultiVIews.
>> > >>>
>> > >>> This is clearly and Apache/mis-configuration issue and if fixed in WP
>> > will
>> > >>> remain unfixed in countless other web applications. ?It would be far
>> > better
>> > >>> to ensure your host correctly configures Apache and doesn't leave
>> > security
>> > >>> holes in the server, or move to a host that does!
>> > >>>
>> > >>>
>> > >>> Dave Jones
>> > >>> www.technicacreative.co.uk
>> > >>>
>> > >>>
>> > >>> On 12 Nov 2009, at 16:18, Jacob Santos wrote:
>> > >>>
>> > >>>> Okay, good news, we've fixed the extension exploit and then will
>> have
>> > to
>> > >>>> wait another 6 to 8 months while another XSS attack shows up about
>> > people
>> > >>>> adding images executing JavaScript on their servers (which isn't
>> > completely
>> > >>>> bad since most / all administrative tasks requires a nonce).
>> > >>>
>> > >>> _______________________________________________
>> > >>> wp-hackers mailing list
>> > >>> wp-hackers at lists.automattic.com
>> > >>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>> > >>
>> > >> _______________________________________________
>> > >> wp-hackers mailing list
>> > >> wp-hackers at lists.automattic.com
>> > >> http://lists.automattic.com/mailman/listinfo/wp-hackers
>> > >>
>> > >
>> > _______________________________________________
>> > wp-hackers mailing list
>> > wp-hackers at lists.automattic.com
>> > http://lists.automattic.com/mailman/listinfo/wp-hackers
>> >
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From otto at ottodestruct.com  Thu Nov 12 21:50:19 2009
From: otto at ottodestruct.com (Otto)
Date: Thu, 12 Nov 2009 15:50:19 -0600
Subject: [wp-hackers] WordPress <= 2.8.5 Unrestricted File Upload
	Arbitrary PHP Code Execution
In-Reply-To: <a13b5a590911121326i4205f5bekffb314d5d4445254@mail.gmail.com>
References: <4AFC353E.4020906@santosj.name>
	<FFB01B28-8D3D-4107-8474-B759582BC6A7@technicacreative.co.uk> 
	<4AFC3A7B.6080102@adcSTUDIO.com>
	<161617690911120843p4dbc99f2md2994f4227c6d58d@mail.gmail.com> 
	<161617690911120900j6fa8a0c1mbb6e60e980b60df7@mail.gmail.com> 
	<a13b5a590911121326i4205f5bekffb314d5d4445254@mail.gmail.com>
Message-ID: <161617690911121350j113a440bifa9b1f3eb1ed3619@mail.gmail.com>

On Thu, Nov 12, 2009 at 3:26 PM, Robert Pendell
<shinji at elite-systems.org> wrote:
> Ok. ?I'm curious here. ?Does this only affect configurations that use php as
> an Apache module? ?That's what those instructions dictate. ?Here is my
> configuration and it isn't affected even with MultiViews on. ?I am running
> php as a fastcgi binary.
>
> .htaccess:
> AddHandler fastcgi-script fcg fcgi fpl
> AddHandler php5-fastcgi .php
> Action php5-fastcgi /php5-wrapper.fcgi

I have no idea what specific configurations it is under, however I did
find this interesting tidbit:

https://issues.apache.org/bugzilla/show_bug.cgi?id=43372

Looks like Apache has no intention of correcting this misfeature.

-Otto
Sent from Memphis, TN, United States

From pete at jointforcestech.com  Thu Nov 12 21:53:27 2009
From: pete at jointforcestech.com (Pete Mall)
Date: Thu, 12 Nov 2009 13:53:27 -0800
Subject: [wp-hackers] WordPress <= 2.8.5 Unrestricted File Upload
	Arbitrary PHP Code Execution
In-Reply-To: <161617690911121350j113a440bifa9b1f3eb1ed3619@mail.gmail.com>
References: <4AFC353E.4020906@santosj.name>
	<FFB01B28-8D3D-4107-8474-B759582BC6A7@technicacreative.co.uk> 
	<4AFC3A7B.6080102@adcSTUDIO.com>
	<161617690911120843p4dbc99f2md2994f4227c6d58d@mail.gmail.com> 
	<161617690911120900j6fa8a0c1mbb6e60e980b60df7@mail.gmail.com> 
	<a13b5a590911121326i4205f5bekffb314d5d4445254@mail.gmail.com> 
	<161617690911121350j113a440bifa9b1f3eb1ed3619@mail.gmail.com>
Message-ID: <7f49e8010911121353g96b6844uf852196513d5b96d@mail.gmail.com>

there are not gonna fix it anytime soon... its being used a lot for
legitimate purposes



On Thu, Nov 12, 2009 at 1:50 PM, Otto <otto at ottodestruct.com> wrote:

> On Thu, Nov 12, 2009 at 3:26 PM, Robert Pendell
> <shinji at elite-systems.org> wrote:
> > Ok.  I'm curious here.  Does this only affect configurations that use php
> as
> > an Apache module?  That's what those instructions dictate.  Here is my
> > configuration and it isn't affected even with MultiViews on.  I am
> running
> > php as a fastcgi binary.
> >
> > .htaccess:
> > AddHandler fastcgi-script fcg fcgi fpl
> > AddHandler php5-fastcgi .php
> > Action php5-fastcgi /php5-wrapper.fcgi
>
> I have no idea what specific configurations it is under, however I did
> find this interesting tidbit:
>
> https://issues.apache.org/bugzilla/show_bug.cgi?id=43372
>
> Looks like Apache has no intention of correcting this misfeature.
>
> -Otto
> Sent from Memphis, TN, United States
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From wp at xentek.net  Thu Nov 12 22:12:51 2009
From: wp at xentek.net (Eric Marden)
Date: Thu, 12 Nov 2009 17:12:51 -0500
Subject: [wp-hackers] WordPress <= 2.8.5 Unrestricted File Upload
	Arbitrary PHP Code Execution
In-Reply-To: <161617690911121337r50d2b63bhca36464528d492e@mail.gmail.com>
References: <4AFC353E.4020906@santosj.name>
	<FFB01B28-8D3D-4107-8474-B759582BC6A7@technicacreative.co.uk>
	<4AFC3A7B.6080102@adcSTUDIO.com>
	<161617690911120843p4dbc99f2md2994f4227c6d58d@mail.gmail.com>
	<161617690911120900j6fa8a0c1mbb6e60e980b60df7@mail.gmail.com>
	<a13b5a590911121326i4205f5bekffb314d5d4445254@mail.gmail.com>
	<7f49e8010911121330n347a90f6ja5e52a3688a5f76b@mail.gmail.com>
	<161617690911121337r50d2b63bhca36464528d492e@mail.gmail.com>
Message-ID: <B9A0CB18-C718-445A-89DE-116758E839CE@xentek.net>

On Nov 12, 2009, at 4:37 PM, Otto wrote:

> I'd prefer an actual fix to my Apache configuration which prevents the
> file from executing in the first place.


Sounds like it would make a good plugin ;)


- Eric Marden
__________________________________
http://xentek.net/code/wordpress/
tw: @xentek





From otto at ottodestruct.com  Thu Nov 12 22:17:47 2009
From: otto at ottodestruct.com (Otto)
Date: Thu, 12 Nov 2009 16:17:47 -0600
Subject: [wp-hackers] WordPress <= 2.8.5 Unrestricted File Upload
	Arbitrary PHP Code Execution
In-Reply-To: <B9A0CB18-C718-445A-89DE-116758E839CE@xentek.net>
References: <4AFC353E.4020906@santosj.name>
	<FFB01B28-8D3D-4107-8474-B759582BC6A7@technicacreative.co.uk> 
	<4AFC3A7B.6080102@adcSTUDIO.com>
	<161617690911120843p4dbc99f2md2994f4227c6d58d@mail.gmail.com> 
	<161617690911120900j6fa8a0c1mbb6e60e980b60df7@mail.gmail.com> 
	<a13b5a590911121326i4205f5bekffb314d5d4445254@mail.gmail.com> 
	<7f49e8010911121330n347a90f6ja5e52a3688a5f76b@mail.gmail.com> 
	<161617690911121337r50d2b63bhca36464528d492e@mail.gmail.com> 
	<B9A0CB18-C718-445A-89DE-116758E839CE@xentek.net>
Message-ID: <161617690911121417v61a70e4cibd4af65003957ffc@mail.gmail.com>

On Thu, Nov 12, 2009 at 4:12 PM, Eric Marden <wp at xentek.net> wrote:
> Sounds like it would make a good plugin ;)

Can't be a plugin. The .php.jpg executing problem is in Apache,
bypassing WordPress entirely. All WP does is provide a path to upload
the file.


-Otto

From Ken at adcSTUDIO.com  Thu Nov 12 22:26:07 2009
From: Ken at adcSTUDIO.com (Ken Newman)
Date: Thu, 12 Nov 2009 17:26:07 -0500
Subject: [wp-hackers] WordPress <= 2.8.5 Unrestricted File
 Upload	Arbitrary PHP Code Execution
In-Reply-To: <161617690911121417v61a70e4cibd4af65003957ffc@mail.gmail.com>
References: <4AFC353E.4020906@santosj.name>	<FFB01B28-8D3D-4107-8474-B759582BC6A7@technicacreative.co.uk>
	<4AFC3A7B.6080102@adcSTUDIO.com>	<161617690911120843p4dbc99f2md2994f4227c6d58d@mail.gmail.com>
	<161617690911120900j6fa8a0c1mbb6e60e980b60df7@mail.gmail.com>
	<a13b5a590911121326i4205f5bekffb314d5d4445254@mail.gmail.com>
	<7f49e8010911121330n347a90f6ja5e52a3688a5f76b@mail.gmail.com>
	<161617690911121337r50d2b63bhca36464528d492e@mail.gmail.com>
	<B9A0CB18-C718-445A-89DE-116758E839CE@xentek.net>
	<161617690911121417v61a70e4cibd4af65003957ffc@mail.gmail.com>
Message-ID: <4AFC8B7F.5050809@adcSTUDIO.com>

Perhaps he meant that the plugin would change that .htaccess setting or 
add the one you suggested:

RemoveHandler application/x-httpd-php .php
<FilesMatch "\.php$|\.php5$|\.php4$|\.php3$|\.phtml$|\.phpt$">
    SetHandler application/x-httpd-php
</FilesMatch>
<FilesMatch "\.phps$">
   SetHandler application/x-httpd-php-source
</FilesMatch>

On 11/12/2009 5:17 PM, Otto wrote:
> On Thu, Nov 12, 2009 at 4:12 PM, Eric Marden<wp at xentek.net>  wrote:
>    
>> Sounds like it would make a good plugin ;)
>>      
> Can't be a plugin. The .php.jpg executing problem is in Apache,
> bypassing WordPress entirely. All WP does is provide a path to upload
> the file.
>
>
> -Otto
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>    


From william.canino at googlemail.com  Thu Nov 12 22:38:03 2009
From: william.canino at googlemail.com (William Canino)
Date: Thu, 12 Nov 2009 17:38:03 -0500
Subject: [wp-hackers] SEO,
	How to turn off paged comments for search 	engine crawlers?
In-Reply-To: <00576DDA-6A96-42DF-8703-2F2013A8CDF7@newclarity.net>
References: <5267E548-3A18-445D-9EDA-5F58DD4CD11F@yoast.com>
	<1C0A7857-A4B9-41A6-B6D9-719DCCD82597@newclarity.net>
	<349fe48b0911081520n446bb9bv8226b45e9c9754d4@mail.gmail.com>
	<00576DDA-6A96-42DF-8703-2F2013A8CDF7@newclarity.net>
Message-ID: <e4dc67e0911121438y14349c8au8980cc918db413d@mail.gmail.com>

8th: Add <link rel="canonical" href="main permalink" /> to the <head>
of pages with older comments.

Number 8 solves the duplication and pagerank dilution issues (Thanks
Mike), but the big G may ignore indexing the comments altogether ....
that's why I thought of using Mike's idea:

>> Mike, I think your suggestion is already implemented by the SEO Super
>> Comments<http://www.prelovac.com/vladimir/wordpress-plugins/seo-super-comments>plugin.

Thank you to scribu and to Mike ... and to Vladimir Prelovac.  My
comments now appear in individual pages as if they are posts (
http://blog.com/comment/999 casted from single.php ) and everything
looks very promising!  :)

My only hitch now is that my comments RSS feed still points to the
format http://permalink#comment-id .  Unfortunately, WordPress has no
filter hook inside get_comment_link() or comment_link().



2009/11/8 Mike Schinkel <mikeschinkel at newclarity.net>:
> On Nov 8, 2009, at 6:20 PM, scribu wrote:
>
>> Mike, I think your suggestion is already implemented by the SEO Super
>>
>> Comments<http://www.prelovac.com/vladimir/wordpress-plugins/seo-super-comments>plugin.
>
> Cool.
>
> Be nice if the approach because a standard pattern vs. obscurely
> implemented. ?I can't tell you how many times I've wanted to link to a
> specific comment in a tweet, for example. ?Standard patterns would empower
> many more blogs to enable that.
>
> -Mike Schinkel
> WordPress Custom Plugins
> http://mikeschinkel.com/custom-wordpress-plugins/
>
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From kkarpieszuk at gmail.com  Thu Nov 12 23:22:04 2009
From: kkarpieszuk at gmail.com (Konrad Karpieszuk)
Date: Fri, 13 Nov 2009 00:22:04 +0100
Subject: [wp-hackers] some problem with javascript in widgets options?
In-Reply-To: <eaaa36c90911121336ve9933eao55299b61b73c4668@mail.gmail.com>
References: <67dfa4090911110915i1a63e9danef62d38ce59a9dd6@mail.gmail.com>
	<11FD3801-2558-44FE-BC49-41500486EFB5@xentek.net>
	<67dfa4090911121239l5a9eb900w5fcd8c6eab04a7ab@mail.gmail.com>
	<eaaa36c90911121336ve9933eao55299b61b73c4668@mail.gmail.com>
Message-ID: <67dfa4090911121522j6ad47edby53da5a024dcaeffe@mail.gmail.com>

ok, thank you (wow, i dodint realised how much features are possible
thanks to firebug)

but ok. i enabled this. when i drag and drop widgets i got in console:

http://kultura1.website.pl/wp-admin/admin-ajax.php 200 OK 1.09s

when i expand it i have:

[headers]

Date	Thu, 12 Nov 2009 23:17:42 GMT
Server	WisePanel Web Server/1.0.0 (Unix) mod_extfilter/1.3 Shpanel
PHP-CGI Interface v. 1.0
X-Powered-By	PHP/4.4.7
Connection	close
Transfer-Encoding	chunked
Content-Type	text/html; charset=UTF-8
Content-Encoding	gzip
Nag??wki zapytania
Host	kultura1.website.pl
User-Agent	Mozilla/5.0 (X11; U; Linux x86_64; pl-PL; rv:1.9.1.4)
Gecko/20091028 Ubuntu/9.10 (karmic) Firefox/3.5.4
Accept	*/*
Accept-Language	pl,en-us;q=0.7,en;q=0.3
Accept-Encoding	gzip,deflate
Accept-Charset	ISO-8859-2,utf-8;q=0.7,*;q=0.7
Keep-Alive	300
Connection	keep-alive
Content-Type	application/x-www-form-urlencoded; charset=UTF-8
X-Requested-With	XMLHttpRequest
Referer	http://kultura1.website.pl/wp-admin/widgets.php
Content-Length	215
Cookie	wordpress_40d95c8eb28d808eef52f9b94c8c4ded=admin%7C1258145035%7Cf8982d42a55abe1445f90aa2a72e03be;
wp-settings-1=m0%3Do%26m1%3Dc%26m2%3Dc%26m3%3Do%26m4%3Do%26m5%3Dc%26m6%3Dc%26m7%3Dc%26m8%3Dc%26hidetb%3D1%26uploader%3D1%26align%3Dright%26editor%3Dtinymce%26urlbutton%3Durlfile;
wp-settings-time-1=1258029335; wordpress_test_cookie=WP+Cookie+check;
wordpress_logged_in_40d95c8eb28d808eef52f9b94c8c4ded=admin%7C1258145035%7C2591d6e94a2bb7fae816e421da9b580a

[message]

action	save-widget
add_new	multi
id_base	tag_cloud
multi_number	3
savewidgets	5b79a6702f
sidebar	sidebar-1
widget-height	200
widget-id	tag_cloud-3
widget-tag_cloud[3][title]	
widget-width	250
widget_number	2

[answer]

(this is empty)

anyone understand something from this and could help? :)

On Thu, Nov 12, 2009 at 10:36 PM, Mohammad Jangda <batmoo at gmail.com> wrote:
>>
>> Where firebug should reports JS problems? I checked DOM tab and Script
>> tab and tehre i don't see any error reports (but there is a lot of
>> information, so maybe i don't see, how it should look?)
>>
>>
> Under the Console tab. Make sure Console is "Enabled" and "Show Javascript
> Errors" and "Show XMLHttpRequests" are selected.
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>



-- 
(en) regards / (pl) pozdrawiam
Konrad Karpieszuk
http://konradjestwrwandzie.wordpress.com/

From admin at laptoptips.ca  Thu Nov 12 23:44:28 2009
From: admin at laptoptips.ca (Andrew Ozz)
Date: Thu, 12 Nov 2009 15:44:28 -0800
Subject: [wp-hackers] some problem with javascript in widgets options?
In-Reply-To: <67dfa4090911121522j6ad47edby53da5a024dcaeffe@mail.gmail.com>
References: <67dfa4090911110915i1a63e9danef62d38ce59a9dd6@mail.gmail.com>	<11FD3801-2558-44FE-BC49-41500486EFB5@xentek.net>	<67dfa4090911121239l5a9eb900w5fcd8c6eab04a7ab@mail.gmail.com>	<eaaa36c90911121336ve9933eao55299b61b73c4668@mail.gmail.com>
	<67dfa4090911121522j6ad47edby53da5a024dcaeffe@mail.gmail.com>
Message-ID: <4AFC9DDC.4050401@laptoptips.ca>

Konrad Karpieszuk wrote:
> when i expand it i have:
> 
> [headers]
> ...
> Cookie	wordpress_...

You shouldn't disclose your cookies, change your passwords (and perhaps 
the AUTH_KEY, SECURE_AUTH_KEY, etc. in wp-config.php) straight away.

> [message]
> 
> action	save-widget
> add_new	multi
> id_base	tag_cloud
> multi_number	3
> savewidgets	5b79a6702f
> sidebar	sidebar-1
> widget-height	200
> widget-id	tag_cloud-3
> widget-tag_cloud[3][title]	
> widget-width	250
> widget_number	2
> 
> [answer]
> 
> (this is empty)

This looks ok but there should be another AJAX request with "action = 
widgets-order" and response of "1". Both requests should be fired when 
adding a widget to the sidebar.


From matt at mattjacob.com  Fri Nov 13 00:25:04 2009
From: matt at mattjacob.com (Matt Jacob)
Date: Thu, 12 Nov 2009 17:25:04 -0700
Subject: [wp-hackers] Best practice way for a plugin to use WP_Rewrite
In-Reply-To: <681756.86343.qm@web65715.mail.ac4.yahoo.com>
References: <88432.93280.qm@web65701.mail.ac4.yahoo.com>
	<681756.86343.qm@web65715.mail.ac4.yahoo.com>
Message-ID: <410963320911121625p75814aa3xfad9c900270489c@mail.gmail.com>

On Thu, Nov 12, 2009 at 12:23 PM, Tuna Can <tunamaxx at yahoo.com> wrote:
> A little perseverance paid off... ?My whole issue relates to trying to hook in the flush_rules() at 'init' instead of 'admin-init' as required.

I don't think that's entirely true. On plugin activation, I'm doing this:

add_action('init', array($this, 'FlushRewriteRules'));

Every time the plugin is loaded, I'm doing this:

add_filter('rewrite_rules_array', array($this, 'InsertRewriteRules'));

Seems to work pretty well for me. Maybe you were running into a
problem somewhere else?

Matt

From hempsworth at googlemail.com  Fri Nov 13 02:31:15 2009
From: hempsworth at googlemail.com (Alex Hempton-Smith)
Date: Fri, 13 Nov 2009 02:31:15 +0000
Subject: [wp-hackers] Blank comments, redirect instead of error page
Message-ID: <5a1dad880911121831i38c9d3a7j40ddd07caa347ff0@mail.gmail.com>

Hi,

When a user enters a blank comment, I would like to redirect them back to
the post they were viewing instead of showing the "Error: please type a
comment." page.

How would I go about this?

Many thanks,
Alex

From pete at jointforcestech.com  Fri Nov 13 02:36:59 2009
From: pete at jointforcestech.com (Pete Mall)
Date: Thu, 12 Nov 2009 18:36:59 -0800
Subject: [wp-hackers] Blank comments, redirect instead of error page
In-Reply-To: <5a1dad880911121831i38c9d3a7j40ddd07caa347ff0@mail.gmail.com>
References: <5a1dad880911121831i38c9d3a7j40ddd07caa347ff0@mail.gmail.com>
Message-ID: <7f49e8010911121836h2e6072fp5faa739864304d6e@mail.gmail.com>

Use the preprocess_comment filter... add_filter('preprocess_comment',
'your_function')

On Thu, Nov 12, 2009 at 6:31 PM, Alex Hempton-Smith <
hempsworth at googlemail.com> wrote:

> Hi,
>
> When a user enters a blank comment, I would like to redirect them back to
> the post they were viewing instead of showing the "Error: please type a
> comment." page.
>
> How would I go about this?
>
> Many thanks,
> Alex
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From tunamaxx at yahoo.com  Fri Nov 13 03:38:45 2009
From: tunamaxx at yahoo.com (Tuna Can)
Date: Thu, 12 Nov 2009 19:38:45 -0800 (PST)
Subject: [wp-hackers] Best practice way for a plugin to use WP_Rewrite
In-Reply-To: <410963320911121625p75814aa3xfad9c900270489c@mail.gmail.com>
Message-ID: <74014.51063.qm@web65705.mail.ac4.yahoo.com>

Honestly, I would be ecstatic to be proven wrong on this. Do you have any idea why using a plugin with only the following code (plus the required plugin header of course):

function my_flush_rewrites() {
	global $wp_rewrite;
	$wp_rewrite->flush_rules();
}

function my_add_rewrites() {
	global $wp_rewrite;
	$my_new_non_wp_rules = array(
		'this/([0-9]+)$' => 'that/index.php?a=$1',
	);
	$wp_rewrite->non_wp_rules = $my_new_non_wp_rules + $wp_rewrite->non_wp_rules;
}

add_action( 'generate_rewrite_rules', 'my_add_rewrites' );
add_action( 'admin_init', 'my_flush_rewrites' );

...will automatically write the following in .htaccess:

RewriteRule ^this/([0-9]+)$ /that/index.php?a=$1 [QSA,L]

...but, if I set the .htaccess back to the WP default, then change the 'admin_init' to just 'init' like so:

add_action( 'init', 'my_flush_rewrites' );

...the changes aren't written to .htaccess unless I go to Settings / Permalinks and "Save Changes" manually?

HOWEVER, while I have had a little light at the end of the tunnel with this issue, my real question is whether it is possible to to flush_rules() via a THEME OPTIONS PAGE form submission. Since even discovering the 'admin_init' thing earlier today, I can't cause the changes to be made to .htaccess via my theme options page.

Any guidance would be GREATLY appreciated.

Thanks you,

Tony



--- On Thu, 11/12/09, Matt Jacob <matt at mattjacob.com> wrote:

> From: Matt Jacob <matt at mattjacob.com>
> Subject: Re: [wp-hackers] Best practice way for a plugin to use WP_Rewrite
> To: wp-hackers at lists.automattic.com
> Received: Thursday, November 12, 2009, 4:25 PM
> On Thu, Nov 12, 2009 at 12:23 PM,
> Tuna Can <tunamaxx at yahoo.com>
> wrote:
> > A little perseverance paid off... ?My whole issue
> relates to trying to hook in the flush_rules() at 'init'
> instead of 'admin-init' as required.
> 
> I don't think that's entirely true. On plugin activation,
> I'm doing this:
> 
> add_action('init', array($this, 'FlushRewriteRules'));
> 
> Every time the plugin is loaded, I'm doing this:
> 
> add_filter('rewrite_rules_array', array($this,
> 'InsertRewriteRules'));
> 
> Seems to work pretty well for me. Maybe you were running
> into a
> problem somewhere else?
> 
> Matt
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
> 


      __________________________________________________________________
Be smarter than spam. See how smart SpamGuard is at giving junk email the boot with the All-new Yahoo! Mail.  Click on Options in Mail and switch to New Mail today or register for free at http://mail.yahoo..ca


From tunamaxx at yahoo.com  Fri Nov 13 03:57:30 2009
From: tunamaxx at yahoo.com (Tuna Can)
Date: Thu, 12 Nov 2009 19:57:30 -0800 (PST)
Subject: [wp-hackers] Best practice way for a plugin to use WP_Rewrite
In-Reply-To: <74014.51063.qm@web65705.mail.ac4.yahoo.com>
Message-ID: <949435.75773.qm@web65711.mail.ac4.yahoo.com>

Ok... ignore what I said about not beinag able to write the changes to .htaccess via a them option form submission; that actually works. However, I stand behind the 'admin_init' versus 'init' comment still.

Does the fact that I am using 2.9-rare make a difference?

Thanks,

Tony 

--- On Thu, 11/12/09, Tuna Can <tunamaxx at yahoo.com> wrote:

> From: Tuna Can <tunamaxx at yahoo.com>
> Subject: Re: [wp-hackers] Best practice way for a plugin to use WP_Rewrite
> To: wp-hackers at lists.automattic.com
> Received: Thursday, November 12, 2009, 7:38 PM
> Honestly, I would be ecstatic to be
> proven wrong on this. Do you have any idea why using a
> plugin with only the following code (plus the required
> plugin header of course):
> 
> function my_flush_rewrites() {
> ??? global $wp_rewrite;
> ??? $wp_rewrite->flush_rules();
> }
> 
> function my_add_rewrites() {
> ??? global $wp_rewrite;
> ??? $my_new_non_wp_rules = array(
> ??? ??? 'this/([0-9]+)$'
> => 'that/index.php?a=$1',
> ??? );
> ??? $wp_rewrite->non_wp_rules =
> $my_new_non_wp_rules + $wp_rewrite->non_wp_rules;
> }
> 
> add_action( 'generate_rewrite_rules', 'my_add_rewrites' );
> add_action( 'admin_init', 'my_flush_rewrites' );
> 
> ...will automatically write the following in .htaccess:
> 
> RewriteRule ^this/([0-9]+)$ /that/index.php?a=$1 [QSA,L]
> 
> ...but, if I set the .htaccess back to the WP default, then
> change the 'admin_init' to just 'init' like so:
> 
> add_action( 'init', 'my_flush_rewrites' );
> 
> ...the changes aren't written to .htaccess unless I go to
> Settings / Permalinks and "Save Changes" manually?
> 
> HOWEVER, while I have had a little light at the end of the
> tunnel with this issue, my real question is whether it is
> possible to to flush_rules() via a THEME OPTIONS PAGE form
> submission. Since even discovering the 'admin_init' thing
> earlier today, I can't cause the changes to be made to
> .htaccess via my theme options page.
> 
> Any guidance would be GREATLY appreciated.
> 
> Thanks you,
> 
> Tony
> 
> 
> 
> --- On Thu, 11/12/09, Matt Jacob <matt at mattjacob.com>
> wrote:
> 
> > From: Matt Jacob <matt at mattjacob.com>
> > Subject: Re: [wp-hackers] Best practice way for a
> plugin to use WP_Rewrite
> > To: wp-hackers at lists.automattic.com
> > Received: Thursday, November 12, 2009, 4:25 PM
> > On Thu, Nov 12, 2009 at 12:23 PM,
> > Tuna Can <tunamaxx at yahoo.com>
> > wrote:
> > > A little perseverance paid off... ?My whole
> issue
> > relates to trying to hook in the flush_rules() at
> 'init'
> > instead of 'admin-init' as required.
> > 
> > I don't think that's entirely true. On plugin
> activation,
> > I'm doing this:
> > 
> > add_action('init', array($this,
> 'FlushRewriteRules'));
> > 
> > Every time the plugin is loaded, I'm doing this:
> > 
> > add_filter('rewrite_rules_array', array($this,
> > 'InsertRewriteRules'));
> > 
> > Seems to work pretty well for me. Maybe you were
> running
> > into a
> > problem somewhere else?
> > 
> > Matt
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers at lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> > 
> 
> 
> ? ? ?
> __________________________________________________________________
> Be smarter than spam. See how smart SpamGuard is at giving
> junk email the boot with the All-new Yahoo! Mail.?
> Click on Options in Mail and switch to New Mail today or
> register for free at http://mail.yahoo..ca
> 
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
> 


      __________________________________________________________________
Looking for the perfect gift? Give the gift of Flickr! 

http://www.flickr.com/gift/


From peter.westwood at ftwr.co.uk  Fri Nov 13 09:25:49 2009
From: peter.westwood at ftwr.co.uk (Peter Westwood)
Date: Fri, 13 Nov 2009 09:25:49 +0000
Subject: [wp-hackers] Best practice way for a plugin to use WP_Rewrite
In-Reply-To: <74014.51063.qm@web65705.mail.ac4.yahoo.com>
References: <74014.51063.qm@web65705.mail.ac4.yahoo.com>
Message-ID: <278243C5-809A-465C-8F66-E7D9BF9B1B47@ftwr.co.uk>


On 13 Nov 2009, at 03:38, Tuna Can wrote:

> Honestly, I would be ecstatic to be proven wrong on this. Do you  
> have any idea why using a plugin with only the following code (plus  
> the required plugin header of course):
>
> function my_flush_rewrites() {
> 	global $wp_rewrite;
> 	$wp_rewrite->flush_rules();
> }
>
> function my_add_rewrites() {
> 	global $wp_rewrite;
> 	$my_new_non_wp_rules = array(
> 		'this/([0-9]+)$' => 'that/index.php?a=$1',
> 	);
> 	$wp_rewrite->non_wp_rules = $my_new_non_wp_rules + $wp_rewrite- 
> >non_wp_rules;
> }
>
> add_action( 'generate_rewrite_rules', 'my_add_rewrites' );
> add_action( 'admin_init', 'my_flush_rewrites' );
>
> ...will automatically write the following in .htaccess:
>
> RewriteRule ^this/([0-9]+)$ /that/index.php?a=$1 [QSA,L]
>
> ...but, if I set the .htaccess back to the WP default, then change  
> the 'admin_init' to just 'init' like so:
>
> add_action( 'init', 'my_flush_rewrites' );
>
> ...the changes aren't written to .htaccess unless I go to Settings /  
> Permalinks and "Save Changes" manually?

Because the function save_mod_rewrite_rules() is only defined for  
admin pages. (It is in wp-admin/includes/misc.php)
and WP_Rewrite uses that to save to the .htaccess file

You really don't want to flush the rules on every page load anyway.

Peter
-- 
Peter Westwood
http://blog.ftwr.co.uk | http://westi.wordpress.com
C53C F8FC 8796 8508 88D6 C950 54F4 5DCD A834 01C5


From ozh at planetozh.com  Fri Nov 13 09:30:26 2009
From: ozh at planetozh.com (Ozh)
Date: Fri, 13 Nov 2009 10:30:26 +0100
Subject: [wp-hackers] Not willing to summon the ancient troll,
	but... PHP5 in WP 3.0 ?
In-Reply-To: <949435.75773.qm@web65711.mail.ac4.yahoo.com>
Message-ID: <OFE566D134.C60D5A90-ONC125766D.0033ED1C-C125766D.00343A15@notes.edfgdf.fr>

Peeps,

I've just read on technosailor.com that PHP 5 is coming in WP 3.0
Did I miss something or is that confirmed?
(again, not my intention to generate yet another endless debate on 
PHP4/PHP5, sorry in advance if it goes there)

Ozh


From wordpress at dd32.id.au  Fri Nov 13 09:58:46 2009
From: wordpress at dd32.id.au (Dion Hulse (dd32))
Date: Fri, 13 Nov 2009 20:58:46 +1100
Subject: [wp-hackers] Not willing to summon the ancient troll,
 but... PHP5 in WP 3.0 ?
In-Reply-To: <OFE566D134.C60D5A90-ONC125766D.0033ED1C-C125766D.00343A15@notes.edfgdf.fr>
References: <OFE566D134.C60D5A90-ONC125766D.0033ED1C-C125766D.00343A15@notes.edfgdf.fr>
Message-ID: <op.u3bvb8uaspxmuu@dd32>

Nothing for WP 3.0 is set in stone yet AFAIK.

It was originally suggested that 2.9 had a "Oh, you're on PHP4, WP will  
require PHP5 in a future release" message, but its been decided against  
AFAIK.

I'm pretty sure the line is still, PHP5, when its time. (ie. a small  
fraction are left on PHP4).

PHP5-only features are OK though, Much like JS-only features are OK, If  
theres another way the user can achieve it, then so be it, if its not as  
nice looking, bad luck. Same for some code, for example, In 2.9, with  
oEmbed, I think you miss some XML-parsing functionalities oEmbed has if  
you're running PHP4 (As the code to do it under both PHP4 and 5 is just..  
so different). And 2.8 had the Extra timezone beautification if you have  
the PHP5 date libraries available..


On Fri, 13 Nov 2009 20:30:26 +1100, Ozh <ozh at planetozh.com> wrote:

> Peeps,
>
> I've just read on technosailor.com that PHP 5 is coming in WP 3.0
> Did I miss something or is that confirmed?
> (again, not my intention to generate yet another endless debate on
> PHP4/PHP5, sorry in advance if it goes there)
>
> Ozh
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>


-- 
Using Opera's revolutionary e-mail client: http://www.opera.com/mail/

From ozh at planetozh.com  Fri Nov 13 10:04:05 2009
From: ozh at planetozh.com (Ozh)
Date: Fri, 13 Nov 2009 11:04:05 +0100
Subject: [wp-hackers] Not willing to summon the ancient troll,
 but... PHP5 in WP 3.0 ?
In-Reply-To: <op.u3bvb8uaspxmuu@dd32>
Message-ID: <OF4CB18C91.3E704F9F-ONC125766D.00373C9F-C125766D.00374E95@notes.edfgdf.fr>

> Nothing for WP 3.0 is set in stone yet AFAIK.
> 
> I'm pretty sure the line is still, PHP5, when its time. (ie. a small 
> fraction are left on PHP4).

OK that's what I thought, thanks for confirming.

Ozh

From if.website at gmail.com  Fri Nov 13 11:46:02 2009
From: if.website at gmail.com (Austin Matzko)
Date: Fri, 13 Nov 2009 05:46:02 -0600
Subject: [wp-hackers] Not willing to summon the ancient troll,
	but... PHP5 	in WP 3.0 ?
In-Reply-To: <op.u3bvb8uaspxmuu@dd32>
References: <OFE566D134.C60D5A90-ONC125766D.0033ED1C-C125766D.00343A15@notes.edfgdf.fr>
	<op.u3bvb8uaspxmuu@dd32>
Message-ID: <674b4a3b0911130346p15074952m6881f173c2dd9a8b@mail.gmail.com>

On Fri, Nov 13, 2009 at 3:58 AM, Dion Hulse (dd32) <wordpress at dd32.id.au> wrote:
> I'm pretty sure the line is still, PHP5, when its time. (ie. a small
> fraction are left on PHP4).

When less than 10% are still using PHP4 according to the phoned-home
data, WordPress will switch to PHP5--that's the exact number Matt
Mullenweg and others at Automattic have repeatedly used.

From kkarpieszuk at gmail.com  Fri Nov 13 15:14:54 2009
From: kkarpieszuk at gmail.com (Konrad Karpieszuk)
Date: Fri, 13 Nov 2009 16:14:54 +0100
Subject: [wp-hackers] some problem with javascript in widgets options?
In-Reply-To: <4AFC9DDC.4050401@laptoptips.ca>
References: <67dfa4090911110915i1a63e9danef62d38ce59a9dd6@mail.gmail.com>
	<11FD3801-2558-44FE-BC49-41500486EFB5@xentek.net>
	<67dfa4090911121239l5a9eb900w5fcd8c6eab04a7ab@mail.gmail.com>
	<eaaa36c90911121336ve9933eao55299b61b73c4668@mail.gmail.com>
	<67dfa4090911121522j6ad47edby53da5a024dcaeffe@mail.gmail.com>
	<4AFC9DDC.4050401@laptoptips.ca>
Message-ID: <67dfa4090911130714x11a8fee0x2a42f5fcb0c9d425@mail.gmail.com>

> You shouldn't disclose your cookies, change your passwords (and perhaps the
> AUTH_KEY, SECURE_AUTH_KEY, etc. in wp-config.php) straight away.

ok, changed

> This looks ok but there should be another AJAX request with "action =
> widgets-order" and response of "1". Both requests should be fired when
> adding a widget to the sidebar.


do you suppose why i don't have this second request?



-- 
(en) regards / (pl) pozdrawiam
Konrad Karpieszuk
http://konradjestwrwandzie.wordpress.com/

From otto at ottodestruct.com  Fri Nov 13 15:32:45 2009
From: otto at ottodestruct.com (Otto)
Date: Fri, 13 Nov 2009 09:32:45 -0600
Subject: [wp-hackers] Not willing to summon the ancient troll,
	but... PHP5 	in WP 3.0 ?
In-Reply-To: <674b4a3b0911130346p15074952m6881f173c2dd9a8b@mail.gmail.com>
References: <OFE566D134.C60D5A90-ONC125766D.0033ED1C-C125766D.00343A15@notes.edfgdf.fr>
	<op.u3bvb8uaspxmuu@dd32>
	<674b4a3b0911130346p15074952m6881f173c2dd9a8b@mail.gmail.com>
Message-ID: <161617690911130732r7780b16cr2cf51bdb2cbdefef@mail.gmail.com>

I've been recommending everybody switch to PHP5, in order to try to
get that number down.

http://wordpress.org/support/topic/316394

I encourage all reading this to do the same.

-Otto



On Fri, Nov 13, 2009 at 5:46 AM, Austin Matzko <if.website at gmail.com> wrote:
> On Fri, Nov 13, 2009 at 3:58 AM, Dion Hulse (dd32) <wordpress at dd32.id.au> wrote:
>> I'm pretty sure the line is still, PHP5, when its time. (ie. a small
>> fraction are left on PHP4).
>
> When less than 10% are still using PHP4 according to the phoned-home
> data, WordPress will switch to PHP5--that's the exact number Matt
> Mullenweg and others at Automattic have repeatedly used.
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From shane at bugssite.org  Fri Nov 13 16:40:26 2009
From: shane at bugssite.org (Shane A. Froebel)
Date: Fri, 13 Nov 2009 11:40:26 -0500
Subject: [wp-hackers] Not willing to summon the ancient troll,
	but... PHP5 	in WP 3.0 ?
In-Reply-To: <161617690911130732r7780b16cr2cf51bdb2cbdefef@mail.gmail.com>
References: <OFE566D134.C60D5A90-ONC125766D.0033ED1C-C125766D.00343A15@notes.edfgdf.fr>
	<op.u3bvb8uaspxmuu@dd32>
	<674b4a3b0911130346p15074952m6881f173c2dd9a8b@mail.gmail.com>
	<161617690911130732r7780b16cr2cf51bdb2cbdefef@mail.gmail.com>
Message-ID: <4AFD8BFA.2000805@bugssite.org>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Otto,

I mentioned that at one of the dev meetings which was shot down, but I
am glad the percentage has gone way down. I read I think about 2 weeks
ago that it was getting close to 11% using PHP4.

I think the question is if we go PHP5 for 3.0 will we re-write the
entire code in favor of Object Oriented style programing for even less
queries at a time. :)

Your Friend,
Shane

Otto wrote:
> I've been recommending everybody switch to PHP5, in order to try to
> get that number down.
> 
> http://wordpress.org/support/topic/316394
> 
> I encourage all reading this to do the same.
> 
> -Otto
> 
> 
> 
> On Fri, Nov 13, 2009 at 5:46 AM, Austin Matzko <if.website at gmail.com> wrote:
>> On Fri, Nov 13, 2009 at 3:58 AM, Dion Hulse (dd32) <wordpress at dd32.id.au> wrote:
>>> I'm pretty sure the line is still, PHP5, when its time. (ie. a small
>>> fraction are left on PHP4).
>> When less than 10% are still using PHP4 according to the phoned-home
>> data, WordPress will switch to PHP5--that's the exact number Matt
>> Mullenweg and others at Automattic have repeatedly used.
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
> 
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.9 (MingW32)

iQIcBAEBAgAGBQJK/Yv6AAoJEC7/vS6gbNwFre8QAKHHikmkdyD0u44JE1r7SvuK
mHZzYjO6Jj0k+pNwyXcm6HWF4ZUtljuD1Dojo5S512qp6pN5NsDpsgYwBNC+i2hV
lLQPaEDQYIW2iLOBXg9VVwsiNdHUPkcdItJM6aIzE3gBbi2S+8O1kOj4W/bB0SYp
7VQLUjvDi4fImyLGmfuynk8WXbXDZUl4pXoKDyuWTMCIB6jOeZUnGJgjFCJDwgU+
gTI/YE1x9McKNZOn0UHsq1wzWCtKWVfI4xchZjPvl7/BhNuDSoLkqYh+roqkmirn
o/9k71o1cG6kPNBMofIko+eVBiamtlvXPKWBZ/VLs0x9nzyJ+nwr2X/2iRsZOBYz
UB4oOVIGneRn/4hEzn9UK2GyxFsX2o4IEQyFQjNt0YeDH6y9LRHGY0nnXCINdIm3
AnPIMwJeLtn4pqBAD0kdYlHmNbUSNSqPwiOyPXDh6PHO2Ho9JBb4gNJmwSawEgb3
yvH+vdf3H0fT5EucF+J2SPQ+eXBqhE3w7g8QKEbNxz61o/I1T9N7iUIU43n7UbfI
4MAnsn2VbHw2XeZ7OxbzVc32pK4cBU9UwIICzuNnx5eiqztLhNHvBsz75grX5pgN
6svFpLMebNySj9erc+Ia5LRZKENoTdK6BYr8MdIcBmc+ET8Z3+l+5AF82GRRot7L
I5wdCNvk2sJjnbLG0YP/
=FfPh
-----END PGP SIGNATURE-----

From malaiac at gmail.com  Fri Nov 13 17:03:19 2009
From: malaiac at gmail.com (Malaiac)
Date: Fri, 13 Nov 2009 18:03:19 +0100
Subject: [wp-hackers] Not willing to summon the ancient troll,
	but... PHP5 	in WP 3.0 ?
In-Reply-To: <OFE566D134.C60D5A90-ONC125766D.0033ED1C-C125766D.00343A15@notes.edfgdf.fr>
References: <949435.75773.qm@web65711.mail.ac4.yahoo.com>
	<OFE566D134.C60D5A90-ONC125766D.0033ED1C-C125766D.00343A15@notes.edfgdf.fr>
Message-ID: <59e7f3130911130903v1df2fc28ia18f05fe01c9a876@mail.gmail.com>

Talking about 3.0 (and not about PHP4/5), are there any major orientations /
switches planned for this release, and a vague release date ?

Malaiac

From peter.westwood at ftwr.co.uk  Fri Nov 13 17:10:09 2009
From: peter.westwood at ftwr.co.uk (Peter Westwood)
Date: Fri, 13 Nov 2009 17:10:09 +0000
Subject: [wp-hackers] Not willing to summon the ancient troll,
	but... PHP5 	in WP 3.0 ?
In-Reply-To: <59e7f3130911130903v1df2fc28ia18f05fe01c9a876@mail.gmail.com>
References: <949435.75773.qm@web65711.mail.ac4.yahoo.com>
	<OFE566D134.C60D5A90-ONC125766D.0033ED1C-C125766D.00343A15@notes.edfgdf.fr>
	<59e7f3130911130903v1df2fc28ia18f05fe01c9a876@mail.gmail.com>
Message-ID: <69BA6871-05DA-42C0-88D6-C8094475F6A1@ftwr.co.uk>


On 13 Nov 2009, at 17:03, Malaiac wrote:

> Talking about 3.0 (and not about PHP4/5), are there any major  
> orientations /
> switches planned for this release, and a vague release date ?

Not yet.

We are still concentrating on 2.9 for now.

Once that is done we can start to think in more detail about 3.0  
features and timeline

Cheers
-- 
Peter Westwood
http://blog.ftwr.co.uk | http://westi.wordpress.com
C53C F8FC 8796 8508 88D6 C950 54F4 5DCD A834 01C5


From scribu at gmail.com  Fri Nov 13 17:41:15 2009
From: scribu at gmail.com (scribu)
Date: Fri, 13 Nov 2009 19:41:15 +0200
Subject: [wp-hackers] some problem with javascript in widgets options?
In-Reply-To: <67dfa4090911130714x11a8fee0x2a42f5fcb0c9d425@mail.gmail.com>
References: <67dfa4090911110915i1a63e9danef62d38ce59a9dd6@mail.gmail.com>
	<11FD3801-2558-44FE-BC49-41500486EFB5@xentek.net>
	<67dfa4090911121239l5a9eb900w5fcd8c6eab04a7ab@mail.gmail.com>
	<eaaa36c90911121336ve9933eao55299b61b73c4668@mail.gmail.com>
	<67dfa4090911121522j6ad47edby53da5a024dcaeffe@mail.gmail.com>
	<4AFC9DDC.4050401@laptoptips.ca>
	<67dfa4090911130714x11a8fee0x2a42f5fcb0c9d425@mail.gmail.com>
Message-ID: <349fe48b0911130941n6c9adeecv41c3d791dda1dd04@mail.gmail.com>

On Fri, Nov 13, 2009 at 5:14 PM, Konrad Karpieszuk <kkarpieszuk at gmail.com>wrote:

> do you suppose why i don't have this second request?
>

Add this to wp-config.php to maybe show an error:

define('WP_DEBUG', true);


-- 
http://scribu.net

From matt at mattjacob.com  Fri Nov 13 18:37:19 2009
From: matt at mattjacob.com (Matt Jacob)
Date: Fri, 13 Nov 2009 11:37:19 -0700
Subject: [wp-hackers] Collecting de-identified environment info via plugin
Message-ID: <410963320911131037w39ba4820p14600e1665aa9bb@mail.gmail.com>

As a plugin developer, it seems like it would be useful to collect
information about the environments in which my plugin is running
(things like PHP version, WP version, plugin version, etc.). This
would obviously help me tailor future releases to better meet the
needs of my users. Data would only be collected after the user opts
in, and they would be able to opt out at any time.

Now I'm curious if WordPress generates some kind of unique
"installation ID" or if I'll have to come up with something myself. I
only care to collect de-identified data, as I have no use for the IP
address, hostname of the server, URI of the WP installation, etc. The
less information I have about the user, the better.

Has anyone done this in the past? Any pointers or suggestions?

Matt

From if.website at gmail.com  Fri Nov 13 19:31:15 2009
From: if.website at gmail.com (Austin Matzko)
Date: Fri, 13 Nov 2009 13:31:15 -0600
Subject: [wp-hackers] Collecting de-identified environment info via
	plugin
In-Reply-To: <410963320911131037w39ba4820p14600e1665aa9bb@mail.gmail.com>
References: <410963320911131037w39ba4820p14600e1665aa9bb@mail.gmail.com>
Message-ID: <674b4a3b0911131131r56afaccfg59d562d087d20fcd@mail.gmail.com>

On Fri, Nov 13, 2009 at 12:37 PM, Matt Jacob <matt at mattjacob.com> wrote:
> As a plugin developer, it seems like it would be useful to collect
> information about the environments in which my plugin is running
> (things like PHP version, WP version, plugin version, etc.). This
> would obviously help me tailor future releases to better meet the
> needs of my users. Data would only be collected after the user opts
> in, and they would be able to opt out at any time.
>
> Now I'm curious if WordPress generates some kind of unique
> "installation ID" or if I'll have to come up with something myself. I
> only care to collect de-identified data, as I have no use for the IP
> address, hostname of the server, URI of the WP installation, etc. The
> less information I have about the user, the better.
>
> Has anyone done this in the past? Any pointers or suggestions?

WP sends WP version, MySQL version, PHP version, language locale, and
some other information back to WordPress.org every time it checks for
updates to WordPress.  See wp_version_check() in wp-includes.php.

The IP address is automatically provided unless the site is behind
some kind of proxy.

There is no "installation ID" in core WP, but you could probably
create a good-enough anonymous one by hashing the siteurl option
value.

From otto at ottodestruct.com  Fri Nov 13 19:51:24 2009
From: otto at ottodestruct.com (Otto)
Date: Fri, 13 Nov 2009 13:51:24 -0600
Subject: [wp-hackers] Collecting de-identified environment info via
	plugin
In-Reply-To: <410963320911131037w39ba4820p14600e1665aa9bb@mail.gmail.com>
References: <410963320911131037w39ba4820p14600e1665aa9bb@mail.gmail.com>
Message-ID: <161617690911131151s66d36e62t271eb57db0e9db5f@mail.gmail.com>

How important is it to you that the identifier not change, ever?

If it's okay for it to almost never change, then just run md5 over the
siteurl. Most people don't move their sites around often, that value
will rarely change.

If you need to know, for sure, that the value won't change unless
somebody specifically tries to change it, then I suggest rolling your
own. Something like this would work:

$plugin_identifier = get_option('plugin_id_whatever');
if (empty($plugin_identifier)) {
  $plugin_identifier = wp_generate_password(64);
  update_option('plugin_id_whatever', $plugin_identifier);
}

Basically generate a randomized 64 char string and save it. It's only
ever generated once, and unless the user manually goes into the
database to delete or change the option, it'll never change.

-Otto
Sent from Memphis, TN, United States


On Fri, Nov 13, 2009 at 12:37 PM, Matt Jacob <matt at mattjacob.com> wrote:
> As a plugin developer, it seems like it would be useful to collect
> information about the environments in which my plugin is running
> (things like PHP version, WP version, plugin version, etc.). This
> would obviously help me tailor future releases to better meet the
> needs of my users. Data would only be collected after the user opts
> in, and they would be able to opt out at any time.
>
> Now I'm curious if WordPress generates some kind of unique
> "installation ID" or if I'll have to come up with something myself. I
> only care to collect de-identified data, as I have no use for the IP
> address, hostname of the server, URI of the WP installation, etc. The
> less information I have about the user, the better.
>
> Has anyone done this in the past? Any pointers or suggestions?
>
> Matt
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From matt at mattjacob.com  Fri Nov 13 19:57:42 2009
From: matt at mattjacob.com (Matt Jacob)
Date: Fri, 13 Nov 2009 12:57:42 -0700
Subject: [wp-hackers] Collecting de-identified environment info via
	plugin
In-Reply-To: <674b4a3b0911131131r56afaccfg59d562d087d20fcd@mail.gmail.com>
References: <410963320911131037w39ba4820p14600e1665aa9bb@mail.gmail.com> 
	<674b4a3b0911131131r56afaccfg59d562d087d20fcd@mail.gmail.com>
Message-ID: <410963320911131157u1bba0340pe73ddca0a3557f26@mail.gmail.com>

On Fri, Nov 13, 2009 at 12:31 PM, Austin Matzko <if.website at gmail.com> wrote:
> WP sends WP version, MySQL version, PHP version, language locale, and
> some other information back to WordPress.org every time it checks for
> updates to WordPress. ?See wp_version_check() in wp-includes.php.

Thanks, Austin and Otto. That was along the lines of what I was
thinking, but I wanted to do a sanity check before I implemented it.

Matt

From tunamaxx at yahoo.com  Fri Nov 13 21:43:53 2009
From: tunamaxx at yahoo.com (Tuna Can)
Date: Fri, 13 Nov 2009 13:43:53 -0800 (PST)
Subject: [wp-hackers] Best practice way for a plugin to use WP_Rewrite
In-Reply-To: <278243C5-809A-465C-8F66-E7D9BF9B1B47@ftwr.co.uk>
Message-ID: <695560.94465.qm@web65708.mail.ac4.yahoo.com>

--- On Fri, 11/13/09, Peter Westwood <peter.westwood at ftwr.co.uk> wrote:
> Because the function save_mod_rewrite_rules() is only
> defined for admin pages. (It is in wp-admin/includes/misc.php)
> and WP_Rewrite uses that to save to the .htaccess file

This is what triggered my 'A ha!' moment yesterday. "Of course it has to be 'admin_init' to work" I thought to myself. However, Matt says he's having success with just 'init' on plugin activation, so I am a littel confused still.

OH! Maybe that is is? He's calling it through register_activation_hook where I am not. I want to be able to flush_rules() on option update.

By the way, I understand that I should NOT be calling the flush on every page load; this was just simple test code.

Thanks,

Tony


      __________________________________________________________________
Yahoo! Canada Toolbar: Search from anywhere on the web, and bookmark your favourite sites. Download it now
http://ca.toolbar.yahoo.com.


From wp at xentek.net  Sat Nov 14 07:53:25 2009
From: wp at xentek.net (Eric Marden)
Date: Sat, 14 Nov 2009 02:53:25 -0500
Subject: [wp-hackers] WordPress <= 2.8.5 Unrestricted File
	Upload	Arbitrary PHP Code Execution
In-Reply-To: <4AFC8B7F.5050809@adcSTUDIO.com>
References: <4AFC353E.4020906@santosj.name>	<FFB01B28-8D3D-4107-8474-B759582BC6A7@technicacreative.co.uk>
	<4AFC3A7B.6080102@adcSTUDIO.com>	<161617690911120843p4dbc99f2md2994f4227c6d58d@mail.gmail.com>
	<161617690911120900j6fa8a0c1mbb6e60e980b60df7@mail.gmail.com>
	<a13b5a590911121326i4205f5bekffb314d5d4445254@mail.gmail.com>
	<7f49e8010911121330n347a90f6ja5e52a3688a5f76b@mail.gmail.com>
	<161617690911121337r50d2b63bhca36464528d492e@mail.gmail.com>
	<B9A0CB18-C718-445A-89DE-116758E839CE@xentek.net>
	<161617690911121417v61a70e4cibd4af65003957ffc@mail.gmail.com>
	<4AFC8B7F.5050809@adcSTUDIO.com>
Message-ID: <BF0382CA-BD7F-4BFB-9876-F67ED08BFD9B@xentek.net>

On Nov 12, 2009, at 5:26 PM, Ken Newman wrote:

> Perhaps he meant that the plugin would change that .htaccess setting  
> or add the one you suggested:
>
> RemoveHandler application/x-httpd-php .php
> <FilesMatch "\.php$|\.php5$|\.php4$|\.php3$|\.phtml$|\.phpt$">
>   SetHandler application/x-httpd-php
> </FilesMatch>
> <FilesMatch "\.phps$">
>  SetHandler application/x-httpd-php-source
> </FilesMatch>

That's exactly what I meant. :)

- Eric Marden
__________________________________
http://xentek.net/code/wordpress/
tw: @xentek





From kkarpieszuk at gmail.com  Sat Nov 14 11:08:32 2009
From: kkarpieszuk at gmail.com (Konrad Karpieszuk)
Date: Sat, 14 Nov 2009 12:08:32 +0100
Subject: [wp-hackers] some problem with javascript in widgets options?
In-Reply-To: <349fe48b0911130941n6c9adeecv41c3d791dda1dd04@mail.gmail.com>
References: <67dfa4090911110915i1a63e9danef62d38ce59a9dd6@mail.gmail.com>
	<11FD3801-2558-44FE-BC49-41500486EFB5@xentek.net>
	<67dfa4090911121239l5a9eb900w5fcd8c6eab04a7ab@mail.gmail.com>
	<eaaa36c90911121336ve9933eao55299b61b73c4668@mail.gmail.com>
	<67dfa4090911121522j6ad47edby53da5a024dcaeffe@mail.gmail.com>
	<4AFC9DDC.4050401@laptoptips.ca>
	<67dfa4090911130714x11a8fee0x2a42f5fcb0c9d425@mail.gmail.com>
	<349fe48b0911130941n6c9adeecv41c3d791dda1dd04@mail.gmail.com>
Message-ID: <67dfa4090911140308n27a2903erdbd84f4222691e1a@mail.gmail.com>

totally nothing :(

On Fri, Nov 13, 2009 at 6:41 PM, scribu <scribu at gmail.com> wrote:
> On Fri, Nov 13, 2009 at 5:14 PM, Konrad Karpieszuk <kkarpieszuk at gmail.com>wrote:
>
>> do you suppose why i don't have this second request?
>>
>
> Add this to wp-config.php to maybe show an error:
>
> define('WP_DEBUG', true);
>
>
> --
> http://scribu.net
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>



-- 
(en) regards / (pl) pozdrawiam
Konrad Karpieszuk
http://konradjestwrwandzie.wordpress.com/

From kkarpieszuk at gmail.com  Sat Nov 14 11:32:34 2009
From: kkarpieszuk at gmail.com (Konrad Karpieszuk)
Date: Sat, 14 Nov 2009 12:32:34 +0100
Subject: [wp-hackers] some problem with javascript in widgets options?
In-Reply-To: <67dfa4090911140308n27a2903erdbd84f4222691e1a@mail.gmail.com>
References: <67dfa4090911110915i1a63e9danef62d38ce59a9dd6@mail.gmail.com>
	<11FD3801-2558-44FE-BC49-41500486EFB5@xentek.net>
	<67dfa4090911121239l5a9eb900w5fcd8c6eab04a7ab@mail.gmail.com>
	<eaaa36c90911121336ve9933eao55299b61b73c4668@mail.gmail.com>
	<67dfa4090911121522j6ad47edby53da5a024dcaeffe@mail.gmail.com>
	<4AFC9DDC.4050401@laptoptips.ca>
	<67dfa4090911130714x11a8fee0x2a42f5fcb0c9d425@mail.gmail.com>
	<349fe48b0911130941n6c9adeecv41c3d791dda1dd04@mail.gmail.com>
	<67dfa4090911140308n27a2903erdbd84f4222691e1a@mail.gmail.com>
Message-ID: <67dfa4090911140332v5c5ecbe5v102acd909d568e75@mail.gmail.com>

hmm, now  i checked how it looks in good site  and compared with site,
where i have problems:

http://stypendia-bialystok.pl/bad-good.png

at left is bad and at right is good. as you can see at top answer is
200 OK, but there is red circle with X

could anyone find which differences are important?

On Sat, Nov 14, 2009 at 12:08 PM, Konrad Karpieszuk
<kkarpieszuk at gmail.com> wrote:
> totally nothing :(
>
> On Fri, Nov 13, 2009 at 6:41 PM, scribu <scribu at gmail.com> wrote:
>> On Fri, Nov 13, 2009 at 5:14 PM, Konrad Karpieszuk <kkarpieszuk at gmail.com>wrote:
>>
>>> do you suppose why i don't have this second request?
>>>
>>
>> Add this to wp-config.php to maybe show an error:
>>
>> define('WP_DEBUG', true);
>>
>>
>> --
>> http://scribu.net
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
>
>
>
> --
> (en) regards / (pl) pozdrawiam
> Konrad Karpieszuk
> http://konradjestwrwandzie.wordpress.com/
>



-- 
(en) regards / (pl) pozdrawiam
Konrad Karpieszuk
http://konradjestwrwandzie.wordpress.com/

From cclarkson at htcomp.net  Sun Nov 15 05:02:56 2009
From: cclarkson at htcomp.net (Charles K. Clarkson)
Date: Sat, 14 Nov 2009 23:02:56 -0600
Subject: [wp-hackers] Sidebar ID Naming Problems
Message-ID: <4AFF8B80.5070300@htcomp.net>

Hello,

This went a little long. There were a lot more problems than I anticipated. So,
I moved the question to the top.

How should I proceed?

     Write a patch for a new function that gets the sidebar id from a name-or-id
     input or an array where the name or id is specified? (Which would entail
     patching other functions [3] in /wp-includes/widgets.php.)

     - OR -

     Rewrite the documentation to reflect the problems with some edge cases of id
     naming.

     - OR -

     Something else?



register_sidebar() allows more names and ids to be registered than
dynamic_sidebar() recognizes as valid names and ids.

For example, register_sidebar() allows me to name a side bar "1" with a id of
"first". I don't know why anyone would choose those values, but
register_sidebar() allows it [1].

register_sidebar( array('name' => 1, id => 'first') );


dynamic_sidebar() will not be able to find the sidebar given its name (1).

     if ( is_int($index) ) {
         $index = "sidebar-$index"; /// 1 becomes 'sidebar-1'
         ...

The main problem is that dynamic_sidebar() is trying to process both ids and
names through the same variable ($index) while register_sidebar() separates the
two with an array ( array('name' => 'Top', 'id' => 'sidebar-1' ).

According to the in-line docs for dynamic_sidebar():

     It is confusing for the $index parameter, but just know that it should just
     work. When you register the sidebar in the theme, you will use the same name
     for this function or "Pay no heed to the man behind the curtain." Just
     accept it as an oddity of WordPress sidebar register and display.


It does "just work" if you never use your own sidebar ids.


I started looking at this because I wanted to use is_active_sidebar() which
tests to see if a dynamic_sidebar() has anything in it. There is no
get_dynamic_sidebar(). dynamic_sidebar() sends everything to the browser or
returns false.

     register_sidebar( array('name' => 'Top') ); // id defaults to "sidebar-1"
     ...

     if ( is_active_sidebar('Top') )
         dynamic_sidebar('Top');

Which fails because is_active_sidebar() just completely skips over searching for
an id to go with a name. To get it to work you need to know when it was
registered. Not something theme authors and designers are going to follow
easily. There's a ticket to fix this: http://core.trac.wordpress.org/ticket/10440

     if ( is_active_sidebar(1) )
         dynamic_sidebar('Top');

Like dynamic_sidebar(), is_active_sidebar() converts 1 to "sidebar-1". Unlike
dynamic_sidebar() it assumes everything is entered as an id.


unregister_sidebar() assumes its parameter (incorrectly named $name, not $id) is
an id. But it wants a literal id, like "sidebar-1". unregister_sidebar(1)
unregisters a sidebar with an id of 1, while dynamic_sidebar(1) tries to display
a sidebar with an id of "sidebar-1".


Wait. There's more.

The dynamic_sidebar() function is used by the Widgets management page. So, it is
possible to create a sidebar with register_sidebar() that dynamic_sidebar()
cannot find. You can populate it with drag and drop [2] and not have it appear
on the web site.


Note:
[1] register_sidebar() allows the user to override the default setting of:
     'id' => "sidebar-$i",

[2] When you refresh the Widgets management page the widgets will disappear from
     the sidebar. They are still attached to a sidebar, but dynamic_sidebar()
     cannot see the sidebar.

[3] Depending on the exact solution used, this might include patching these
     functions:
         dynamic_sidebar()
         is_active_sidebar()
         unregister_sidebar()
         register_sidebar()
         register_sidebars()

     And creating this one:
         get_sidebar_id()


HTH,


Charles Clarkson
--
Mobile Home Investor
Free Market Advocate
Programmer

I'm not really a smart person. I just play one on the Internet.

Stephenville, TX
http://www.clarksonenergyhomes.com/wordpress/about/
http://twitter.com/CharlesClarkson
+1 (254) 968-8328

From tonyscott100 at yahoo.co.uk  Mon Nov 16 15:17:56 2009
From: tonyscott100 at yahoo.co.uk (Tony Scott)
Date: Mon, 16 Nov 2009 07:17:56 -0800 (PST)
Subject: [wp-hackers] Test
Message-ID: <85259.11518.qm@web24507.mail.ird.yahoo.com>

Test - apologies - please ignore...

 Tony


----
Tony Scott
http://tonyscott.org.uk | http://twitter.com/tonys
http://uk.wordcamp.org | http://hackspace.org.uk



      

From kontakt at joernroeder.de  Mon Nov 16 17:59:07 2009
From: kontakt at joernroeder.de (=?ISO-8859-1?Q?J=F6rn_R=F6der?=)
Date: Mon, 16 Nov 2009 18:59:07 +0100
Subject: [wp-hackers] Uploading image attachments from the front-end
In-Reply-To: <op.u3auc118spxmuu@dd32>
References: <0A9E664C-9FA8-491B-BEA4-53CF42A4B8C2@emrl.com>
	<32c7967e0911111237k17637c42sa87444d92c56e85f@mail.gmail.com>
	<73C9CA2C-1075-41D7-BF86-2E1413DD5833@emrl.com>
	<161617690911120919i16b8e09n72d94185911ef484@mail.gmail.com>
	<6C26D93F-FD4F-47CA-871D-FD7C9647B495@emrl.com>
	<op.u3auc118spxmuu@dd32>
Message-ID: <5FA53342-399F-427C-B325-CEE2983DDB2E@joernroeder.de>

Hi,
Have a look at the tdo Mini Form Plugin. It have an Image-Uploader  
witch allows you to upload stuff from the Front-End?

http://thedeadone.net/download/tdo-mini-forms-wordpress-plugin/

J?rn


Am 12.11.2009 um 21:40 schrieb Dion Hulse (dd32):

> On Fri, 13 Nov 2009 05:28:54 +1100, Matthew Gerring  
> <mgerring at emrl.com> wrote:
>
>> I figured that out- media_sideload_image() handles the upload and
>> creates a fake $_FILES-like array from a remote URL. You can pass a
>> regular $_FILES array to media_handle_sideload() along with the post
>> ID and it handles all of the attachment, meta, mimetype, thumbnail
>> generation, and etc.
>>
>> I had to require /wp-admin/includes/admin.php to have access to all  
>> of
>> the functions I needed- is this the best way to do it?
>
> Unfortunately, Yes. As the media management functions are held within.
> You might get away with just using wp-admin/includes/media.php and  
> file.php..
> -- 
> Using Opera's revolutionary e-mail client: http://www.opera.com/mail/
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers


From jer at simianuprising.com  Mon Nov 16 18:19:37 2009
From: jer at simianuprising.com (Jeremy Clarke)
Date: Mon, 16 Nov 2009 13:19:37 -0500
Subject: [wp-hackers] Not willing to summon the ancient troll,
	but... PHP5 	in WP 3.0 ?
In-Reply-To: <59e7f3130911130903v1df2fc28ia18f05fe01c9a876@mail.gmail.com>
References: <949435.75773.qm@web65711.mail.ac4.yahoo.com>
	<OFE566D134.C60D5A90-ONC125766D.0033ED1C-C125766D.00343A15@notes.edfgdf.fr>
	<59e7f3130911130903v1df2fc28ia18f05fe01c9a876@mail.gmail.com>
Message-ID: <e1202cb10911161019t6d67a181ve99fac5ba6e892b6@mail.gmail.com>

On Fri, Nov 13, 2009 at 12:03 PM, Malaiac <malaiac at gmail.com> wrote:
> Talking about 3.0 (and not about PHP4/5), are there any major orientations /
> switches planned for this release, and a vague release date ?

At WordCamp NYC yesterday Ma.tt said that the merging of WPMU and WP
would be one of the goals for 3.0. He also reiterated that 3.0 isn't a
'major' release, but just the +0.1 release that comes after 2.9.

-- 
Jeremy Clarke | http://jeremyclarke.org
Code and Design | http://globalvoicesonline.org

From wp at xentek.net  Mon Nov 16 18:25:51 2009
From: wp at xentek.net (Eric Marden)
Date: Mon, 16 Nov 2009 13:25:51 -0500
Subject: [wp-hackers] some problem with javascript in widgets options?
In-Reply-To: <67dfa4090911140308n27a2903erdbd84f4222691e1a@mail.gmail.com>
References: <67dfa4090911110915i1a63e9danef62d38ce59a9dd6@mail.gmail.com>
	<11FD3801-2558-44FE-BC49-41500486EFB5@xentek.net>
	<67dfa4090911121239l5a9eb900w5fcd8c6eab04a7ab@mail.gmail.com>
	<eaaa36c90911121336ve9933eao55299b61b73c4668@mail.gmail.com>
	<67dfa4090911121522j6ad47edby53da5a024dcaeffe@mail.gmail.com>
	<4AFC9DDC.4050401@laptoptips.ca>
	<67dfa4090911130714x11a8fee0x2a42f5fcb0c9d425@mail.gmail.com>
	<349fe48b0911130941n6c9adeecv41c3d791dda1dd04@mail.gmail.com>
	<67dfa4090911140308n27a2903erdbd84f4222691e1a@mail.gmail.com>
Message-ID: <82A3F31F-ED32-4899-9B99-8D8F0146EB6B@xentek.net>

> Add this to wp-config.php to maybe show an error:
>> define('WP_DEBUG', true);
>>> totally nothing :(

Often times my set-up requires this statement after define('WP_DEBUG',  
true) before I start seeing errors on the screen:

ini_set('display_errors',1);


- Eric Marden
__________________________________
http://xentek.net/code/wordpress/
tw: @xentek





From jer at simianuprising.com  Mon Nov 16 18:43:05 2009
From: jer at simianuprising.com (Jeremy Clarke)
Date: Mon, 16 Nov 2009 13:43:05 -0500
Subject: [wp-hackers] Sidebar ID Naming Problems
In-Reply-To: <4AFF8B80.5070300@htcomp.net>
References: <4AFF8B80.5070300@htcomp.net>
Message-ID: <e1202cb10911161043p4a3715ffo41bfa1ef8d9cb5de@mail.gmail.com>

Yikes! Whatever the solution is, I'd just like to add a request for a
'description' setting for sidebars. Somewhere you could put a couple
lines of text explaining what/where the sidebar is for/showing, so
that if lots of sidebars are defined you don't have to put tons of
info  in the title field. If this is available somehow and I'm missing
it please let me know :)

-- 
Jeremy Clarke | http://jeremyclarke.org
Code and Design | globalvoicesonline.org

From kkarpieszuk at gmail.com  Mon Nov 16 19:20:46 2009
From: kkarpieszuk at gmail.com (Konrad Karpieszuk)
Date: Mon, 16 Nov 2009 20:20:46 +0100
Subject: [wp-hackers] some problem with javascript in widgets options?
In-Reply-To: <82A3F31F-ED32-4899-9B99-8D8F0146EB6B@xentek.net>
References: <67dfa4090911110915i1a63e9danef62d38ce59a9dd6@mail.gmail.com>
	<11FD3801-2558-44FE-BC49-41500486EFB5@xentek.net>
	<67dfa4090911121239l5a9eb900w5fcd8c6eab04a7ab@mail.gmail.com>
	<eaaa36c90911121336ve9933eao55299b61b73c4668@mail.gmail.com>
	<67dfa4090911121522j6ad47edby53da5a024dcaeffe@mail.gmail.com>
	<4AFC9DDC.4050401@laptoptips.ca>
	<67dfa4090911130714x11a8fee0x2a42f5fcb0c9d425@mail.gmail.com>
	<349fe48b0911130941n6c9adeecv41c3d791dda1dd04@mail.gmail.com>
	<67dfa4090911140308n27a2903erdbd84f4222691e1a@mail.gmail.com>
	<82A3F31F-ED32-4899-9B99-8D8F0146EB6B@xentek.net>
Message-ID: <67dfa4090911161120w4b36f92aq70e16b6e34c599fd@mail.gmail.com>

something happened :)

when i added this code, which you wrote, and i tried to add widget to
sidebar i saw this in widget title field:

<br /> <b>Notice</b>:  Undefined index:  title in
<b>/users/kultura1/www/kultura1.website.pl/wp-includes/default-widgets.php</b>
on line <b>988</b><br />

just when i dragged Tag Cloud widget to sidebar, widgetbox opens and
in title this was written (with those html tags). but throber still is
working and of course widget is not saved

On Mon, Nov 16, 2009 at 7:25 PM, Eric Marden <wp at xentek.net> wrote:
>> Add this to wp-config.php to maybe show an error:
>>>
>>> define('WP_DEBUG', true);
>>>>
>>>> totally nothing :(
>
> Often times my set-up requires this statement after define('WP_DEBUG', true)
> before I start seeing errors on the screen:
>
> ini_set('display_errors',1);
>
>
> - Eric Marden
> __________________________________
> http://xentek.net/code/wordpress/
> tw: @xentek
>
>
>
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>



-- 
(en) regards / (pl) pozdrawiam
Konrad Karpieszuk
http://konradjestwrwandzie.wordpress.com/

From ozh at planetozh.com  Mon Nov 16 19:46:06 2009
From: ozh at planetozh.com (Ozh)
Date: Mon, 16 Nov 2009 20:46:06 +0100
Subject: [wp-hackers] Not willing to summon the ancient troll,
	but... PHP5 	in WP 3.0 ?
In-Reply-To: <e1202cb10911161019t6d67a181ve99fac5ba6e892b6@mail.gmail.com>
References: <949435.75773.qm@web65711.mail.ac4.yahoo.com>
	<OFE566D134.C60D5A90-ONC125766D.0033ED1C-C125766D.00343A15@notes.edfgdf.fr>
	<59e7f3130911130903v1df2fc28ia18f05fe01c9a876@mail.gmail.com>
	<e1202cb10911161019t6d67a181ve99fac5ba6e892b6@mail.gmail.com>
Message-ID: <ae81acd10911161146l2fad75f6jf926a0585d05d491@mail.gmail.com>

On Mon, Nov 16, 2009 at 7:19 PM, Jeremy Clarke <jer at simianuprising.com> wrote:
> At WordCamp NYC yesterday Ma.tt said that the merging of WPMU and WP
> would be one of the goals for 3.0. He also reiterated that 3.0 isn't a
> 'major' release, but just the +0.1 release that comes after 2.9.

Willingly or not, 3.0 "sounds" major, so it better be major in some
way or another or people will whine :)
(I think WP+MU is pretty major anyway)


-- 
http://planetOzh.com ~ Blog and WordPress Stuff
http://FrenchFragFactory.net ~ Daily Quake News

From Ken at adcSTUDIO.com  Mon Nov 16 20:17:46 2009
From: Ken at adcSTUDIO.com (Ken Newman)
Date: Mon, 16 Nov 2009 15:17:46 -0500
Subject: [wp-hackers] Not willing to summon the ancient troll,
 but... PHP5 	in WP 3.0 ?
In-Reply-To: <e1202cb10911161019t6d67a181ve99fac5ba6e892b6@mail.gmail.com>
References: <949435.75773.qm@web65711.mail.ac4.yahoo.com>	<OFE566D134.C60D5A90-ONC125766D.0033ED1C-C125766D.00343A15@notes.edfgdf.fr>	<59e7f3130911130903v1df2fc28ia18f05fe01c9a876@mail.gmail.com>
	<e1202cb10911161019t6d67a181ve99fac5ba6e892b6@mail.gmail.com>
Message-ID: <4B01B36A.10001@adcSTUDIO.com>

On 11/16/2009 1:19 PM, Jeremy Clarke wrote:
> On Fri, Nov 13, 2009 at 12:03 PM, Malaiac<malaiac at gmail.com>  wrote:
>    
>> Talking about 3.0 (and not about PHP4/5), are there any major orientations /
>> switches planned for this release, and a vague release date ?
>>      
> At WordCamp NYC yesterday Ma.tt said that the merging of WPMU and WP
> would be one of the goals for 3.0. He also reiterated that 3.0 isn't a
> 'major' release, but just the +0.1 release that comes after 2.9.
>
>    
Then why not call it 2.10? The 3 increment is a major release, or that's 
how the whole rest of the world does it. It's not decimal math :(

From pete at jointforcestech.com  Mon Nov 16 20:20:22 2009
From: pete at jointforcestech.com (Pete Mall)
Date: Mon, 16 Nov 2009 12:20:22 -0800
Subject: [wp-hackers] Not willing to summon the ancient troll,
	but... PHP5 	in WP 3.0 ?
In-Reply-To: <4B01B36A.10001@adcSTUDIO.com>
References: <949435.75773.qm@web65711.mail.ac4.yahoo.com>
	<OFE566D134.C60D5A90-ONC125766D.0033ED1C-C125766D.00343A15@notes.edfgdf.fr>
	<59e7f3130911130903v1df2fc28ia18f05fe01c9a876@mail.gmail.com> 
	<e1202cb10911161019t6d67a181ve99fac5ba6e892b6@mail.gmail.com> 
	<4B01B36A.10001@adcSTUDIO.com>
Message-ID: <7f49e8010911161220w5267a0fcoc8ecf95d8e9b6bb1@mail.gmail.com>

Not in the WP world!


On Mon, Nov 16, 2009 at 12:17 PM, Ken Newman <Ken at adcstudio.com> wrote:

> On 11/16/2009 1:19 PM, Jeremy Clarke wrote:
>
>> On Fri, Nov 13, 2009 at 12:03 PM, Malaiac<malaiac at gmail.com>  wrote:
>>
>>
>>> Talking about 3.0 (and not about PHP4/5), are there any major
>>> orientations /
>>> switches planned for this release, and a vague release date ?
>>>
>>>
>> At WordCamp NYC yesterday Ma.tt said that the merging of WPMU and WP
>> would be one of the goals for 3.0. He also reiterated that 3.0 isn't a
>> 'major' release, but just the +0.1 release that comes after 2.9.
>>
>>
>>
> Then why not call it 2.10? The 3 increment is a major release, or that's
> how the whole rest of the world does it. It's not decimal math :(
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From otto at ottodestruct.com  Mon Nov 16 20:33:49 2009
From: otto at ottodestruct.com (Otto)
Date: Mon, 16 Nov 2009 14:33:49 -0600
Subject: [wp-hackers] Not willing to summon the ancient troll,
	but... PHP5 	in WP 3.0 ?
In-Reply-To: <4B01B36A.10001@adcSTUDIO.com>
References: <949435.75773.qm@web65711.mail.ac4.yahoo.com>
	<OFE566D134.C60D5A90-ONC125766D.0033ED1C-C125766D.00343A15@notes.edfgdf.fr>
	<59e7f3130911130903v1df2fc28ia18f05fe01c9a876@mail.gmail.com> 
	<e1202cb10911161019t6d67a181ve99fac5ba6e892b6@mail.gmail.com> 
	<4B01B36A.10001@adcSTUDIO.com>
Message-ID: <161617690911161233h45c80edfj2b4186bd6938108a@mail.gmail.com>

On Mon, Nov 16, 2009 at 2:17 PM, Ken Newman <Ken at adcstudio.com> wrote:
> Then why not call it 2.10? The 3 increment is a major release, or that's how
> the whole rest of the world does it. It's not decimal math :(

WordPress doesn't work that way.

As I understand it, Matt thinks that that sort of versioning scheme
(one based on the amount of feature change) leads to "version
inflation".

So WordPress works on a straight point system. All major releases get
a 0.1 number upgrade. Minor releases are merely counted.

Thus, 2.9 is followed by 2.9.1 (for minor and security updates) and
followed by 3.0 as the next major version.

Personally, I disagree with this system, as it's confusing to new
users, who are used to version number having actual meaning. But, ce
la vie.

-Otto

From jer at simianuprising.com  Mon Nov 16 20:44:14 2009
From: jer at simianuprising.com (Jeremy Clarke)
Date: Mon, 16 Nov 2009 15:44:14 -0500
Subject: [wp-hackers] Not willing to summon the ancient troll,
	but... PHP5 	in WP 3.0 ?
In-Reply-To: <161617690911161233h45c80edfj2b4186bd6938108a@mail.gmail.com>
References: <949435.75773.qm@web65711.mail.ac4.yahoo.com>
	<OFE566D134.C60D5A90-ONC125766D.0033ED1C-C125766D.00343A15@notes.edfgdf.fr>
	<59e7f3130911130903v1df2fc28ia18f05fe01c9a876@mail.gmail.com>
	<e1202cb10911161019t6d67a181ve99fac5ba6e892b6@mail.gmail.com>
	<4B01B36A.10001@adcSTUDIO.com>
	<161617690911161233h45c80edfj2b4186bd6938108a@mail.gmail.com>
Message-ID: <e1202cb10911161244g48cd3aafrf79f18a08fc27202@mail.gmail.com>

On Mon, Nov 16, 2009 at 3:33 PM, Otto <otto at ottodestruct.com> wrote:
> Personally, I disagree with this system, as it's confusing to new
> users, who are used to version number having actual meaning. But, ce
> la vie.

#bikeshed #iwroteareplythendeletedit

-- 
Jeremy Clarke
Code and Design | globalvoicesonline.org

From scribu at gmail.com  Mon Nov 16 21:05:44 2009
From: scribu at gmail.com (scribu)
Date: Mon, 16 Nov 2009 23:05:44 +0200
Subject: [wp-hackers] Sidebar ID Naming Problems
In-Reply-To: <e1202cb10911161043p4a3715ffo41bfa1ef8d9cb5de@mail.gmail.com>
References: <4AFF8B80.5070300@htcomp.net>
	<e1202cb10911161043p4a3715ffo41bfa1ef8d9cb5de@mail.gmail.com>
Message-ID: <349fe48b0911161305g378c1a26n5cbd0c9f3abeb64c@mail.gmail.com>

Charles,

I think the first thing you should do is make it so that register_sidebar()
doesn't allow sidebars that display_sidebar() can't find.

Or, if it's worth it, make display_sidebar() find all sidebars.


On Mon, Nov 16, 2009 at 8:43 PM, Jeremy Clarke <jer at simianuprising.com>wrote:

> Yikes! Whatever the solution is, I'd just like to add a request for a
> 'description' setting for sidebars. Somewhere you could put a couple
> lines of text explaining what/where the sidebar is for/showing, so
> that if lots of sidebars are defined you don't have to put tons of
> info  in the title field. If this is available somehow and I'm missing
> it please let me know :)
>

An optional description for each sidebar would be really useful for heavily
widgetized themes. However, I don't know where one could find the screen
space to fit it in.


-- 
http://scribu.net

From scribu at gmail.com  Mon Nov 16 21:07:34 2009
From: scribu at gmail.com (scribu)
Date: Mon, 16 Nov 2009 23:07:34 +0200
Subject: [wp-hackers] some problem with javascript in widgets options?
In-Reply-To: <67dfa4090911161120w4b36f92aq70e16b6e34c599fd@mail.gmail.com>
References: <67dfa4090911110915i1a63e9danef62d38ce59a9dd6@mail.gmail.com>
	<67dfa4090911121239l5a9eb900w5fcd8c6eab04a7ab@mail.gmail.com>
	<eaaa36c90911121336ve9933eao55299b61b73c4668@mail.gmail.com>
	<67dfa4090911121522j6ad47edby53da5a024dcaeffe@mail.gmail.com>
	<4AFC9DDC.4050401@laptoptips.ca>
	<67dfa4090911130714x11a8fee0x2a42f5fcb0c9d425@mail.gmail.com>
	<349fe48b0911130941n6c9adeecv41c3d791dda1dd04@mail.gmail.com>
	<67dfa4090911140308n27a2903erdbd84f4222691e1a@mail.gmail.com>
	<82A3F31F-ED32-4899-9B99-8D8F0146EB6B@xentek.net>
	<67dfa4090911161120w4b36f92aq70e16b6e34c599fd@mail.gmail.com>
Message-ID: <349fe48b0911161307x7e942dc1y9ae598a9965fd711@mail.gmail.com>

On Mon, Nov 16, 2009 at 9:20 PM, Konrad Karpieszuk <kkarpieszuk at gmail.com>wrote:

> something happened :)
>
> when i added this code, which you wrote, and i tried to add widget to
> sidebar i saw this in widget title field:
>
> <br /> <b>Notice</b>:  Undefined index:  title in
> <b>/users/kultura1/www/kultura1.website.pl/wp-includes/default-widgets.php
> </b>
> on line <b>988</b><br />
>

What about Firebug? Still nothing?



-- 
http://scribu.net

From kikizas at gmail.com  Mon Nov 16 21:18:17 2009
From: kikizas at gmail.com (Demetris)
Date: Mon, 16 Nov 2009 23:18:17 +0200
Subject: [wp-hackers] Not willing to summon the ancient troll,
	but... PHP5 	in WP 3.0 ?
In-Reply-To: <161617690911161233h45c80edfj2b4186bd6938108a@mail.gmail.com>
References: <949435.75773.qm@web65711.mail.ac4.yahoo.com>
	<OFE566D134.C60D5A90-ONC125766D.0033ED1C-C125766D.00343A15@notes.edfgdf.fr>
	<59e7f3130911130903v1df2fc28ia18f05fe01c9a876@mail.gmail.com>
	<e1202cb10911161019t6d67a181ve99fac5ba6e892b6@mail.gmail.com>
	<4B01B36A.10001@adcSTUDIO.com>
	<161617690911161233h45c80edfj2b4186bd6938108a@mail.gmail.com>
Message-ID: <9f34a3610911161318h1d0a6020rb13fbd5e5f33fcd0@mail.gmail.com>

On Mon, Nov 16, 2009 at 10:33 PM, Otto <otto at ottodestruct.com> wrote:
> On Mon, Nov 16, 2009 at 2:17 PM, Ken Newman <Ken at adcstudio.com> wrote:
>> Then why not call it 2.10? The 3 increment is a major release, or that's how
>> the whole rest of the world does it. It's not decimal math :(
>
> WordPress doesn't work that way.
>
> As I understand it, Matt thinks that that sort of versioning scheme
> (one based on the amount of feature change) leads to "version
> inflation".
>
[SNIP]

Not that it matters, but I am with Matt on this.  The WP versioning
scheme is a good self-restraint;  it does not leave you any room to
play games with numbers.  (Or we could end up doing it like Google. We
have barely seen their browser yet, and it is already on version 4!)

Cheers!

Demetris
http://op111.net/

From kkarpieszuk at gmail.com  Mon Nov 16 21:28:20 2009
From: kkarpieszuk at gmail.com (Konrad Karpieszuk)
Date: Mon, 16 Nov 2009 22:28:20 +0100
Subject: [wp-hackers] some problem with javascript in widgets options?
In-Reply-To: <349fe48b0911161307x7e942dc1y9ae598a9965fd711@mail.gmail.com>
References: <67dfa4090911110915i1a63e9danef62d38ce59a9dd6@mail.gmail.com>
	<eaaa36c90911121336ve9933eao55299b61b73c4668@mail.gmail.com>
	<67dfa4090911121522j6ad47edby53da5a024dcaeffe@mail.gmail.com>
	<4AFC9DDC.4050401@laptoptips.ca>
	<67dfa4090911130714x11a8fee0x2a42f5fcb0c9d425@mail.gmail.com>
	<349fe48b0911130941n6c9adeecv41c3d791dda1dd04@mail.gmail.com>
	<67dfa4090911140308n27a2903erdbd84f4222691e1a@mail.gmail.com>
	<82A3F31F-ED32-4899-9B99-8D8F0146EB6B@xentek.net>
	<67dfa4090911161120w4b36f92aq70e16b6e34c599fd@mail.gmail.com>
	<349fe48b0911161307x7e942dc1y9ae598a9965fd711@mail.gmail.com>
Message-ID: <67dfa4090911161328n67b1618fgd97486edc2e2c4a5@mail.gmail.com>

no, in firebug console is still thesame. answer is 200OK but in red
color with cross suggestig that something was wrong. did you saw print
screen which i submitted here yesterday?

On Mon, Nov 16, 2009 at 10:07 PM, scribu <scribu at gmail.com> wrote:
> On Mon, Nov 16, 2009 at 9:20 PM, Konrad Karpieszuk <kkarpieszuk at gmail.com>wrote:
>
>> something happened :)
>>
>> when i added this code, which you wrote, and i tried to add widget to
>> sidebar i saw this in widget title field:
>>
>> <br /> <b>Notice</b>: ?Undefined index: ?title in
>> <b>/users/kultura1/www/kultura1.website.pl/wp-includes/default-widgets.php
>> </b>
>> on line <b>988</b><br />
>>
>
> What about Firebug? Still nothing?
>
>
>
> --
> http://scribu.net
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>



-- 
(en) regards / (pl) pozdrawiam
Konrad Karpieszuk
http://konradjestwrwandzie.wordpress.com/

From jer at simianuprising.com  Mon Nov 16 21:31:04 2009
From: jer at simianuprising.com (Jeremy Clarke)
Date: Mon, 16 Nov 2009 16:31:04 -0500
Subject: [wp-hackers] Sidebar ID Naming Problems
In-Reply-To: <349fe48b0911161305g378c1a26n5cbd0c9f3abeb64c@mail.gmail.com>
References: <4AFF8B80.5070300@htcomp.net>
	<e1202cb10911161043p4a3715ffo41bfa1ef8d9cb5de@mail.gmail.com>
	<349fe48b0911161305g378c1a26n5cbd0c9f3abeb64c@mail.gmail.com>
Message-ID: <e1202cb10911161331y6c541050r7d0a90ebd33a2dba@mail.gmail.com>

On Mon, Nov 16, 2009 at 4:05 PM, scribu <scribu at gmail.com> wrote:
> An optional description for each sidebar would be really useful for
heavily
> widgetized themes. However, I don't know where one could find the screen
> space to fit it in.

I see your point, though I have to ask "Can we afford *not* to find space
for this". The fewer sidebars you have, the less the extra space will hurt,
but at the same time the more sidebars you have the more desperately your
users need help differentiating them. Also if you think its a waste of space
you can just not define them for your sidebars and you'll have no problems,
this would only be relevant/problematic if the theme/plugin author thought
it was a good idea.

Mockup below:

http://simianuprising.com/wp-content/uploads/2009/11/wp-widget-sidebar-descriptions-mockup.png

[image: wp-widget-sidebar-descriptions-mockup.png]


-- 
Jeremy Clarke | http://jeremyclarke.org
Code and Design | http://globalvoicesonline.org

From Ken at adcSTUDIO.com  Mon Nov 16 22:13:55 2009
From: Ken at adcSTUDIO.com (Ken Newman)
Date: Mon, 16 Nov 2009 17:13:55 -0500
Subject: [wp-hackers] Not willing to summon the ancient troll,
 but... PHP5 	in WP 3.0 ?
In-Reply-To: <9f34a3610911161318h1d0a6020rb13fbd5e5f33fcd0@mail.gmail.com>
References: <949435.75773.qm@web65711.mail.ac4.yahoo.com>	<OFE566D134.C60D5A90-ONC125766D.0033ED1C-C125766D.00343A15@notes.edfgdf.fr>	<59e7f3130911130903v1df2fc28ia18f05fe01c9a876@mail.gmail.com>	<e1202cb10911161019t6d67a181ve99fac5ba6e892b6@mail.gmail.com>	<4B01B36A.10001@adcSTUDIO.com>	<161617690911161233h45c80edfj2b4186bd6938108a@mail.gmail.com>
	<9f34a3610911161318h1d0a6020rb13fbd5e5f33fcd0@mail.gmail.com>
Message-ID: <4B01CEA3.1070902@adcSTUDIO.com>

On 11/16/2009 4:18 PM, Demetris wrote:
> Not that it matters, but I am with Matt on this.  The WP versioning
> scheme is a good self-restraint;  it does not leave you any room to
> play games with numbers.  (Or we could end up doing it like Google. We
> have barely seen their browser yet, and it is already on version 4!)
>
> Cheers!
>
> Demetris
> http://op111.net/
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>    
I think there's something to be said of doing it the other way. A 3.0 
release being a "Major" release would allow for major changes that a 
limited number of users may not be ready for, like PHP 5 support and 
removing PHP 4 backporting. Like wise, removing depreciated functions, 
code rewrites, re factoring, and abstractions could be done with less 
disruption on a real full major release because its expected for major 
releases. Going forward, and for a limited time, there would be support 
for 2.9.1, or 2.10 etc for security updates, and those users would have 
to eventually upgrade before support ended. Maintaining two branches 
(one only for security), but for a relatively short term wouldn't be too 
onerous would it? It seems to work for most projects, though I may be 
missing something here.

From cclarkson at htcomp.net  Mon Nov 16 22:19:38 2009
From: cclarkson at htcomp.net (Charles K. Clarkson)
Date: Mon, 16 Nov 2009 16:19:38 -0600
Subject: [wp-hackers] Sidebar ID Naming Problems
In-Reply-To: <349fe48b0911161305g378c1a26n5cbd0c9f3abeb64c@mail.gmail.com>
References: <4AFF8B80.5070300@htcomp.net>	<e1202cb10911161043p4a3715ffo41bfa1ef8d9cb5de@mail.gmail.com>
	<349fe48b0911161305g378c1a26n5cbd0c9f3abeb64c@mail.gmail.com>
Message-ID: <4B01CFFA.6070707@htcomp.net>

scribu wrote:
> I think the first thing you should do is make it so that register_sidebar()
> doesn't allow sidebars that display_sidebar() can't find.
> 
> Or, if it's worth it, make display_sidebar() find all sidebars.

(Its dynamic_sidebar(), not display_sidebar().)

I agree with you, but I want to keep it backward compatible. I think a new
function that standardizes the possible names and patches to each current
sidebar function that needs to find a sidebar, would accomplish a uniform
naming convention which is backward compatible and allows the use of named
arguments.

I started this, but haven't fully debugged it yet. I stopped to add this
thread to the list. Much of it is just a copy of present code which we
know works. Its the mainly named arguments which need to be debugged.

/**
  * Return the id of a sidebar given its name or the integer portion of
  * 'sidebar-1' styled ids.
  *
  * Since register_sidebar() supports it, this function will look for sidebars
  * named as integers or as a default id (like 2 or 'sidebar-13') first and check
  * those as ids if the name fails (and those ids exist).
  *
  * @since 2.9.0
  *
  * @param int|string|array $args The name or id of the wigdet specified by
  * register_sidebar(s) functions. As an array use the register_sidebar() syntax
  * identifying sidebar by name or id or both.
  *
  * @return mixed returns false if id not found or returns sidebar id.
  */
function get_sidebar_id ($args) {
     global $wp_registered_sidebars;

     if ( ! is_array($args) ) {

         // $args is a name or an id
         $name_or_id = $args;

         // for backward compatibility
         if ( is_int($name_or_id) ) {
             return "sidebar-$name_or_id";

         } else {
             $name_or_id = sanitize_title($name_or_id);
             foreach ( (array) $wp_registered_sidebars as $id => $value ) {
                 if ( sanitize_title($value['name']) == $name_or_id ) {
                     return $id;
                 }
             }
         }

         return $name_or_id;

     } else {

         if ( !array_key_exists('id', $args) and !array_key_exists('name', $args) )
             return false;

         // $args is an array holding a name, an id or both.
         if ( array_key_exists('id', $args) && array_key_exists($args['id'], 
$wp_registered_sidebars) )
             return $args['id'];

         if ( array_key_exists('name', $args) ) {
             $name = sanitize_title($args['name']);
             foreach ( (array) $wp_registered_sidebars as $id => $value ) {
                 if ( sanitize_title($value['name']) == $name ) {
                     return $id;
                 }
             }
         }
     }

     return false
}



HTH,

Charles Clarkson
-- 
Mobile Home Investor
Free Market Advocate
Programmer

I'm not really a smart person. I just play one on the Internet.

Stephenville, TX
http://www.clarksonenergyhomes.com/wordpress/about/
http://twitter.com/CharlesClarkson
+1 (254) 968-8328

From Ken at adcSTUDIO.com  Mon Nov 16 22:19:49 2009
From: Ken at adcSTUDIO.com (Ken Newman)
Date: Mon, 16 Nov 2009 17:19:49 -0500
Subject: [wp-hackers] Sidebar ID Naming Problems
In-Reply-To: <e1202cb10911161331y6c541050r7d0a90ebd33a2dba@mail.gmail.com>
References: <4AFF8B80.5070300@htcomp.net>	<e1202cb10911161043p4a3715ffo41bfa1ef8d9cb5de@mail.gmail.com>	<349fe48b0911161305g378c1a26n5cbd0c9f3abeb64c@mail.gmail.com>
	<e1202cb10911161331y6c541050r7d0a90ebd33a2dba@mail.gmail.com>
Message-ID: <4B01D005.4040105@adcSTUDIO.com>

On 11/16/2009 4:31 PM, Jeremy Clarke wrote:
> I see your point, though I have to ask "Can we afford *not* to find space
> for this". The fewer sidebars you have, the less the extra space will hurt,
> but at the same time the more sidebars you have the more desperately your
> users need help differentiating them. Also if you think its a waste of space
> you can just not define them for your sidebars and you'll have no problems,
> this would only be relevant/problematic if the theme/plugin author thought
> it was a good idea.
>
> Mockup below:
>
> http://simianuprising.com/wp-content/uploads/2009/11/wp-widget-sidebar-descriptions-mockup.png
>
> [image: wp-widget-sidebar-descriptions-mockup.png]
>    
+1 for this. I'd definitely use this to help my clients understand how 
to use, edit, and customize their sites. For now, in some cases I've 
resorted to putting descriptive titles (that are hidden by css on the 
front) to try and make it easier for them. Clients still tend to get 
embarrassed by having to ask, and its not pleasant for me too realize 
I've not made it easy enough.

From zamoose at gmail.com  Mon Nov 16 22:48:18 2009
From: zamoose at gmail.com (Doug Stewart)
Date: Mon, 16 Nov 2009 17:48:18 -0500
Subject: [wp-hackers] Sidebar ID Naming Problems
In-Reply-To: <4B01D005.4040105@adcSTUDIO.com>
References: <4AFF8B80.5070300@htcomp.net>
	<e1202cb10911161043p4a3715ffo41bfa1ef8d9cb5de@mail.gmail.com>
	<349fe48b0911161305g378c1a26n5cbd0c9f3abeb64c@mail.gmail.com>
	<e1202cb10911161331y6c541050r7d0a90ebd33a2dba@mail.gmail.com>
	<4B01D005.4040105@adcSTUDIO.com>
Message-ID: <71ddd7490911161448n5e89cd19lb8032b6e40587d3a@mail.gmail.com>

+50

Get a patch in Trac, pronto, if you please.

-- 
-Doug
http://literalbarrage.org/blog

From cclarkson at htcomp.net  Mon Nov 16 22:58:30 2009
From: cclarkson at htcomp.net (Charles K. Clarkson)
Date: Mon, 16 Nov 2009 16:58:30 -0600
Subject: [wp-hackers] Sidebar ID Naming Problems
In-Reply-To: <e1202cb10911161043p4a3715ffo41bfa1ef8d9cb5de@mail.gmail.com>
References: <4AFF8B80.5070300@htcomp.net>
	<e1202cb10911161043p4a3715ffo41bfa1ef8d9cb5de@mail.gmail.com>
Message-ID: <4B01D916.4010901@htcomp.net>

Jeremy Clarke wrote:

 > I'd just like to add a request for a 'description' setting for sidebars.
 > Somewhere you could put a couple lines of text explaining what/where the
 > sidebar is for/showing, so that if lots of sidebars are defined you don't
 > have to put tons of info  in the title field. If this is available somehow
 > and I'm missing it please let me know :)

You can do part of this now. I didn't look into how to add it to the
Widget Admin page, but there is no check by register_sidebar() to stop
you from adding additional fields now.

I tested with these:

$sidebar_id = register_sidebar(array(
     'name'         => '468x60 Post Banner',
     'before_title' => '<h4>',
     'after_title'  => '</h4>',
     'description'  => 'Add your banner markup to this sidebar. ' .
                       'It shows up on single post pages.',
));

function get_sidebar_description ($id) {
     global $wp_registered_sidebars;
     if ( array_key_exists($id, $wp_registered_sidebars) )
         return $wp_registered_sidebars[$id]['description'];

     return '';
}

echo get_sidebar_description($sidebar_id);


HTH,

Charles Clarkson
--
Mobile Home Investor
Free Market Advocate
Programmer

I'm not really a smart person. I just play one on the Internet.

Stephenville, TX
http://www.clarksonenergyhomes.com/wordpress/about/
http://twitter.com/CharlesClarkson
+1 (254) 968-8328


From jer at simianuprising.com  Tue Nov 17 01:34:18 2009
From: jer at simianuprising.com (Jeremy Clarke)
Date: Mon, 16 Nov 2009 20:34:18 -0500
Subject: [wp-hackers] Sidebar ID Naming Problems
In-Reply-To: <71ddd7490911161448n5e89cd19lb8032b6e40587d3a@mail.gmail.com>
References: <4AFF8B80.5070300@htcomp.net>
	<e1202cb10911161043p4a3715ffo41bfa1ef8d9cb5de@mail.gmail.com>
	<349fe48b0911161305g378c1a26n5cbd0c9f3abeb64c@mail.gmail.com>
	<e1202cb10911161331y6c541050r7d0a90ebd33a2dba@mail.gmail.com>
	<4B01D005.4040105@adcSTUDIO.com>
	<71ddd7490911161448n5e89cd19lb8032b6e40587d3a@mail.gmail.com>
Message-ID: <e1202cb10911161734m32a8eccdy86ba50d03911b932@mail.gmail.com>

On Mon, Nov 16, 2009 at 5:48 PM, Doug Stewart <zamoose at gmail.com> wrote:

> +50
>
> Get a patch in Trac, pronto, if you please.
>

Word.

http://core.trac.wordpress.org/ticket/11157

-- 
Jeremy Clarke | http://jeremyclarke.org
Code and Design | http://globalvoicesonline.org

From shane at bugssite.org  Tue Nov 17 04:03:59 2009
From: shane at bugssite.org (Shane A. Froebel)
Date: Mon, 16 Nov 2009 23:03:59 -0500
Subject: [wp-hackers] Not willing to summon the ancient troll,
 but... PHP5 	in WP 3.0 ?
In-Reply-To: <4B01CEA3.1070902@adcSTUDIO.com>
References: <949435.75773.qm@web65711.mail.ac4.yahoo.com>
	<OFE566D134.C60D5A90-ONC125766D.0033ED1C-C125766D.00343A15@notes.edfgdf.fr>
	<59e7f3130911130903v1df2fc28ia18f05fe01c9a876@mail.gmail.com>
	<e1202cb10911161019t6d67a181ve99fac5ba6e892b6@mail.gmail.com>
	<4B01B36A.10001@adcSTUDIO.com>
	<161617690911161233h45c80edfj2b4186bd6938108a@mail.gmail.com>
	<9f34a3610911161318h1d0a6020rb13fbd5e5f33fcd0@mail.gmail.com>
	<4B01CEA3.1070902@adcSTUDIO.com>
Message-ID: <4B0220AF.8070904@bugssite.org>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Well..... I would say 3.0 is a major release from the stand point of
possibility that it might be PHP5.

Mark and I were talking at WordCamp NYC (and I think I brought this up a
number of times) that PHP4 is around 10.6% -- not the 14% Matt said on
stage. If we are only .6% points (0./% points for those wanting it to be
below 10%) it might very well happen during the time we are developing
the merge of MU and Stand-alone WordPress in one package.

Mark will chime in once he's all rested up, but I don't have access tot
he real numbers. Clarity will show.

Anyway, back to 2.9 bug hunting. :)

Your Friend,
Shane

Ken Newman wrote:
> On 11/16/2009 4:18 PM, Demetris wrote:
>> Not that it matters, but I am with Matt on this.  The WP versioning
>> scheme is a good self-restraint;  it does not leave you any room to
>> play games with numbers.  (Or we could end up doing it like Google. We
>> have barely seen their browser yet, and it is already on version 4!)
>>
>> Cheers!
>>
>> Demetris
>> http://op111.net/
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>    
> I think there's something to be said of doing it the other way. A 3.0
> release being a "Major" release would allow for major changes that a
> limited number of users may not be ready for, like PHP 5 support and
> removing PHP 4 backporting. Like wise, removing depreciated functions,
> code rewrites, re factoring, and abstractions could be done with less
> disruption on a real full major release because its expected for major
> releases. Going forward, and for a limited time, there would be support
> for 2.9.1, or 2.10 etc for security updates, and those users would have
> to eventually upgrade before support ended. Maintaining two branches
> (one only for security), but for a relatively short term wouldn't be too
> onerous would it? It seems to work for most projects, though I may be
> missing something here.
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
> 
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.9 (MingW32)

iQIcBAEBAgAGBQJLAiCvAAoJEC7/vS6gbNwFLc4P/AtDMHky8QsyA9qVef0KOhYo
kMHjrQtPWm1/Kmq1X/5Maj22tG80xAI1hgu4XyjVmptz/wTUDB95olpCd4yWZccM
yKG7R+G5STRkNn5ivxvp/iph8HkqF2yfJ13lCATvm8Rsr7HYRDpviBf5NjZfQGsX
FqIbwCRunWy2JPODMos/QpGrmeAMb5BHQblegoqHe4bXe/l9a8TRGrW+zvP8j2Hu
wGvU+iaZ11yOstU6+0F6QEZemPZZJLUWYI0EOjALH920F2QBCYNJebCMRgJJt0iD
R0xlUT3njkDKy+IdfLQ6KL+4T1QX8B541ZqR3RztNhhiksbGYZW9EGxYh1F8I9cw
hwMNL7/wCxuh/8JicE2GSuX/ShOR2+QRf/p+4E6HqesEjmFS048yOHd03MRF6ucT
bfWLgl2k0uouql6HuxI/spATe2EnDkMYXOsjshT4jVL4Pu8SKqM3a6XJlvyqdM4U
7NHTJNWf3fPEA8Y+vdydf7jS9Z+clF9evnIYcln4GzcMZ3vmCuqta8o1eQ9kTl2i
mVyb/RTw8UHt/7kTnk+tmB7bY1+e/x4KaCAtuCG0upPjArAJ8mm9cpZzK4cqa1ch
MGis9GcC/FOjL8Z4kf7O0E24pVphIctF4Uux/xqWW9nrOGWZP08WOxPPgqpbgkiD
r9CYwOKBNuD6zwL8jIMK
=BqSZ
-----END PGP SIGNATURE-----

From markjaquith at gmail.com  Tue Nov 17 06:24:17 2009
From: markjaquith at gmail.com (Mark Jaquith)
Date: Tue, 17 Nov 2009 01:24:17 -0500
Subject: [wp-hackers] 2.9-beta-1 is available
Message-ID: <2979bd660911162224j45895ac1k6c7bb64336ab5223@mail.gmail.com>

http://wordpress.org/wordpress-2.9-beta-1.zip

Big features to test:

? Basic image editing (rotate, flip, resize, crop)
? Post/Page image thumbnails. Enable the admin UI by declaring support
in your theme: add_theme_support('post-thumbnails');
? Trash, with undo functionality, for posts, pages, comments
? Comment Meta table and functions ? like Custom Fields/postmeta but
for comments
? Easy media embeds, oEmbed ? paste a URL on its own item and have it
turn into embed code
? register_theme_directory() which enables plugins to bundle their own
themes, without copying (BuddyPress, primary example)
? Combo upgrader ? get notified of plugin updates in the WP core
upgrader, as well as being informed of crowd-sourced compatibility
information for the plugins.

It's bug-fixing and polishing time! Our priorities should be, in this order:

1. Fixing regressions in old features/behaviors
2. Squashing bugs in the new features
3. Polish

Big thanks to everyone who has contributed so far. Special thanks to
Viper007Bond for the media embed features. It makes something that
used to be really hard into the simplest thing in the world: paste in
the URL where you saw the media item. Boom. Remember, our job is to
make complicated things so simple that people don't have to think
about them. I would phrase "embed code" to disappear from our
vocabulary.

Let's all put our heads down, test the heck out of this thing, and
hopefully launch it in early December!

-- 
Mark Jaquith
? http://markjaquith.com/
? http://coveredwebservices.com/

From cclarkson at htcomp.net  Tue Nov 17 13:06:51 2009
From: cclarkson at htcomp.net (Charles K. Clarkson)
Date: Tue, 17 Nov 2009 07:06:51 -0600
Subject: [wp-hackers] Sidebar ID Naming Problems
In-Reply-To: <349fe48b0911161305g378c1a26n5cbd0c9f3abeb64c@mail.gmail.com>
References: <4AFF8B80.5070300@htcomp.net>	<e1202cb10911161043p4a3715ffo41bfa1ef8d9cb5de@mail.gmail.com>
	<349fe48b0911161305g378c1a26n5cbd0c9f3abeb64c@mail.gmail.com>
Message-ID: <4B029FEB.20502@htcomp.net>

scribu wrote:

> Or, if it's worth it, make display_sidebar() find all sidebars.

I went with the second option.

http://core.trac.wordpress.org/ticket/11160


Thanks for listening to me.

Charles Clarkson
-- 
Mobile Home Investor
Free Market Advocate
Programmer

I'm not really a smart person. I just play one on the Internet.

Stephenville, TX
http://www.clarksonenergyhomes.com/wordpress/about/
http://twitter.com/CharlesClarkson
+1 (254) 968-8328

From autremonde75 at gmail.com  Tue Nov 17 14:33:11 2009
From: autremonde75 at gmail.com (Olivier)
Date: Tue, 17 Nov 2009 06:33:11 -0800 (PST)
Subject: [wp-hackers] "deprecating" direct calls to wp-config.php
In-Reply-To: <EC153D6D-1533-4923-B044-6DBCBDE7D1B3@xentek.net>
References: <4167AD97-4D8A-4922-83DB-23B5DBCA68B4@striderweb.com> 
	<8b870c460911040759x1855b077y5ba9dbe2b3b08ffc@mail.gmail.com> 
	<2EC3CFD0-FCB3-4BF0-99E2-BEA09F865F32@striderweb.com>
	<EC153D6D-1533-4923-B044-6DBCBDE7D1B3@xentek.net>
Message-ID: <3c67989d-f068-44d9-82c5-58228feb40f5@j24g2000yqa.googlegroups.com>

Hello,

I saw this subject so I tried to adapt my plugins but no luck so far :
(
I have used the example provided on the CoDex.

So I have removed the require_once wp-config.php
Then I have encapsulated all my js/jQuery ajax code into a php
function. Then I have hooked my function on admin_header and added a
require_once for the file including my ajax function into my main
plugin file but no luck, it doesn't work, the code is apparently not
hit :(

One issue I see about this change is that my ajax code will be loaded
on every admin page while right now it was loaded only for the
specific page it was intended to (thanks to the admin_print_scripts
hook) so it will be a performance degradation.

Isn't there any way to make everybody happy (ie finding a way to
properly locate the wp-config.php whatever the installation path is?).

Thanks!

Olivier

From contato at catiakitahara.com.br  Tue Nov 17 14:38:58 2009
From: contato at catiakitahara.com.br (=?UTF-8?Q?C=C3=A1tia_Kitahara?=)
Date: Tue, 17 Nov 2009 12:38:58 -0200
Subject: [wp-hackers] Plugins and themes localization
Message-ID: <9e03f6490911170638o1fdef5eaq27d384baaee940af@mail.gmail.com>

Hi guys,

My first time here, so my name is C?tia, I'm from the Brazilian WordPress
Community and I'm responsible for the Brazilian translation team.

Recently somebody asked me if there is a repository for plugins/themes
localizations.

It made me think about an idea I had once: to add to the plugins/themes
directory the information wether a plugin/theme is internationalized or not
and if so, in which languages it's available.

I brought this conversation to the polyglots list (this thread here:
http://lists.automattic.com/pipermail/wp-polyglots/2009-November/003806.html)
and Z? suggested me that the best way of doing that would be adding those
informations to the plugin/theme readme.txt files so it could be easily
displayed at the FYI box. He also suggested me to have this discussion here.

So, is this possible? It would be very useful for non-english speakers, and
I think if people starts seeing this as an important feature of their
plugins/themes, maybe more people would internationalize their
plugins/themes making our lives easier. ;)

Thanks,
-- 
C?tia Kitahara

www.catiakitahara.com.br
www.airuma.com.br
www.wordpress-br.com

From otto at ottodestruct.com  Tue Nov 17 14:41:20 2009
From: otto at ottodestruct.com (Otto)
Date: Tue, 17 Nov 2009 08:41:20 -0600
Subject: [wp-hackers] "deprecating" direct calls to wp-config.php
In-Reply-To: <3c67989d-f068-44d9-82c5-58228feb40f5@j24g2000yqa.googlegroups.com>
References: <4167AD97-4D8A-4922-83DB-23B5DBCA68B4@striderweb.com> 
	<8b870c460911040759x1855b077y5ba9dbe2b3b08ffc@mail.gmail.com> 
	<2EC3CFD0-FCB3-4BF0-99E2-BEA09F865F32@striderweb.com>
	<EC153D6D-1533-4923-B044-6DBCBDE7D1B3@xentek.net> 
	<3c67989d-f068-44d9-82c5-58228feb40f5@j24g2000yqa.googlegroups.com>
Message-ID: <161617690911170641k23d9b34id12dde140faff9e@mail.gmail.com>

Sounds like you're doing it wrong.

Where you load your javascript code is irrelevant. Load it on any page
you like, however you like.

The place where you load wp-config.php can be replaced by putting your
code in an action triggered by wp_ajax_whatever. That's the
difference.

And no, there is no reliable way to find and/or load wp-config. That's
simply the wrong way to do things, every single time. It's always been
the wrong way. And there's absolutely no guarantee that the method
will continue to work in the future.

-Otto



On Tue, Nov 17, 2009 at 8:33 AM, Olivier <autremonde75 at gmail.com> wrote:
> Hello,
>
> I saw this subject so I tried to adapt my plugins but no luck so far :
> (
> I have used the example provided on the CoDex.
>
> So I have removed the require_once wp-config.php
> Then I have encapsulated all my js/jQuery ajax code into a php
> function. Then I have hooked my function on admin_header and added a
> require_once for the file including my ajax function into my main
> plugin file but no luck, it doesn't work, the code is apparently not
> hit :(
>
> One issue I see about this change is that my ajax code will be loaded
> on every admin page while right now it was loaded only for the
> specific page it was intended to (thanks to the admin_print_scripts
> hook) so it will be a performance degradation.
>
> Isn't there any way to make everybody happy (ie finding a way to
> properly locate the wp-config.php whatever the installation path is?).
>
> Thanks!
>
> Olivier
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From photofantaisie at gmail.com  Tue Nov 17 15:10:19 2009
From: photofantaisie at gmail.com (Ade Walker)
Date: Tue, 17 Nov 2009 16:10:19 +0100
Subject: [wp-hackers] Plugins and themes localization
In-Reply-To: <9e03f6490911170638o1fdef5eaq27d384baaee940af@mail.gmail.com>
References: <9e03f6490911170638o1fdef5eaq27d384baaee940af@mail.gmail.com>
Message-ID: <9dd057850911170710t3bf77730ib0addefc59e42641@mail.gmail.com>

+1 from me. Great idea.


2009/11/17 C?tia Kitahara <contato at catiakitahara.com.br>

> Hi guys,
>
> My first time here, so my name is C?tia, I'm from the Brazilian WordPress
> Community and I'm responsible for the Brazilian translation team.
>
> Recently somebody asked me if there is a repository for plugins/themes
> localizations.
>
> It made me think about an idea I had once: to add to the plugins/themes
> directory the information wether a plugin/theme is internationalized or not
> and if so, in which languages it's available.
>
> I brought this conversation to the polyglots list (this thread here:
>
> http://lists.automattic.com/pipermail/wp-polyglots/2009-November/003806.html
> )
> and Z? suggested me that the best way of doing that would be adding those
> informations to the plugin/theme readme.txt files so it could be easily
> displayed at the FYI box. He also suggested me to have this discussion
> here.
>
> So, is this possible? It would be very useful for non-english speakers, and
> I think if people starts seeing this as an important feature of their
> plugins/themes, maybe more people would internationalize their
> plugins/themes making our lives easier. ;)
>
> Thanks,
> --
> C?tia Kitahara
>
> www.catiakitahara.com.br
> www.airuma.com.br
> www.wordpress-br.com
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From beau at dentedreality.com.au  Tue Nov 17 15:31:42 2009
From: beau at dentedreality.com.au (Beau Lebens)
Date: Tue, 17 Nov 2009 10:31:42 -0500
Subject: [wp-hackers] Plugins and themes localization
In-Reply-To: <9dd057850911170710t3bf77730ib0addefc59e42641@mail.gmail.com>
References: <9e03f6490911170638o1fdef5eaq27d384baaee940af@mail.gmail.com> 
	<9dd057850911170710t3bf77730ib0addefc59e42641@mail.gmail.com>
Message-ID: <902424490911170731h1c3624a0i9779778b767f1141@mail.gmail.com>

This sounds like a great idea, and definitely would make sense to add
into the readme.txt. It could be as simple as:

Locales: en_AU, pt_BR, ca_ES, fr_FR

Then if that tag was part of the file, we could mark the plugin as
localized, and list the languages it's available in. If it's *not*
present, we could mark it as such, and provide a link to the Codex to
get the plugin author started:
http://codex.wordpress.org/I18n_for_WordPress_Developers


On Tue, Nov 17, 2009 at 10:10 AM, Ade Walker <photofantaisie at gmail.com> wrote:
> +1 from me. Great idea.
>
>
> 2009/11/17 C?tia Kitahara <contato at catiakitahara.com.br>
>
>> Hi guys,
>>
>> My first time here, so my name is C?tia, I'm from the Brazilian WordPress
>> Community and I'm responsible for the Brazilian translation team.
>>
>> Recently somebody asked me if there is a repository for plugins/themes
>> localizations.
>>
>> It made me think about an idea I had once: to add to the plugins/themes
>> directory the information wether a plugin/theme is internationalized or not
>> and if so, in which languages it's available.
>>
>> I brought this conversation to the polyglots list (this thread here:
>>
>> http://lists.automattic.com/pipermail/wp-polyglots/2009-November/003806.html
>> )
>> and Z? suggested me that the best way of doing that would be adding those
>> informations to the plugin/theme readme.txt files so it could be easily
>> displayed at the FYI box. He also suggested me to have this discussion
>> here.
>>
>> So, is this possible? It would be very useful for non-english speakers, and
>> I think if people starts seeing this as an important feature of their
>> plugins/themes, maybe more people would internationalize their
>> plugins/themes making our lives easier. ;)
>>
>> Thanks,
>> --
>> C?tia Kitahara
>>
>> www.catiakitahara.com.br
>> www.airuma.com.br
>> www.wordpress-br.com
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From wp at xentek.net  Tue Nov 17 15:49:16 2009
From: wp at xentek.net (Eric Marden)
Date: Tue, 17 Nov 2009 10:49:16 -0500
Subject: [wp-hackers] "deprecating" direct calls to wp-config.php
In-Reply-To: <3c67989d-f068-44d9-82c5-58228feb40f5@j24g2000yqa.googlegroups.com>
References: <4167AD97-4D8A-4922-83DB-23B5DBCA68B4@striderweb.com>
	<8b870c460911040759x1855b077y5ba9dbe2b3b08ffc@mail.gmail.com>
	<2EC3CFD0-FCB3-4BF0-99E2-BEA09F865F32@striderweb.com>
	<EC153D6D-1533-4923-B044-6DBCBDE7D1B3@xentek.net>
	<3c67989d-f068-44d9-82c5-58228feb40f5@j24g2000yqa.googlegroups.com>
Message-ID: <00F91484-5B04-45F8-A9C7-C3ED68ED207E@xentek.net>


> Isn't there any way to make everybody happy (ie finding a way to
> properly locate the wp-config.php whatever the installation path is?).


Doing it the right way will make everybody happy. :)

You DO NOT need to include wp-config.php for ajax in the admin nor the  
front-end, nor for just about anything else you might want to do in  
WordPress.

Your processing function should look like this:

add_action('wp_ajax_myhook','my_ajax_function');
function my_ajax_function()
{
   // do stuff and echo results
   exit;
}

Your ajax js should pass action=myhook somewhere in its request  
payload, and post to wp-admin/admin-ajax.php...  <?php echo  
admin_url("admin-ajax.php"); ?> is your friend here.

More Info: http://codex.wordpress.org/AJAX_in_Plugins

Add your script using a function that calls wp_enqueue_script:
http://codex.wordpress.org/Function_Reference/wp_enqueue_script

This function should hook in on admin_print_scripts. If you want to  
limit it to a certain page you can use the "admin_print_scripts-*"  
hook, where * is the page hook.

Briefly explained here: http://codex.wordpress.org/Plugin_API/Action_Reference#Administrative_Actions 
  and here: http://codex.wordpress.org/Plugin_API/Action_Reference/admin_head-%28plugin_page%29



Bottom line is that if your functionality is encapsulated properly in  
a plugin, you'll have full access to all of WordPress's API and there  
is almost nothing that you won't be able to accomplish. Plugin  
Development can be a departure from what you're used to doing as PHP  
Developer. I spent many years as a developer and never even considered  
using a callback (http://en.wikipedia.org/wiki/Callback_%28computer_science%29 
), but WordPress makes extensive use of them, because as a language  
construct they are incredibly powerful ways to let plugins do their  
thing during various stages of the WP execution life cycle.


HTH,


- Eric Marden
__________________________________
http://xentek.net/code/wordpress/
tw: @xentek





From autremonde75 at gmail.com  Tue Nov 17 16:29:55 2009
From: autremonde75 at gmail.com (Olivier)
Date: Tue, 17 Nov 2009 08:29:55 -0800 (PST)
Subject: [wp-hackers] "deprecating" direct calls to wp-config.php
In-Reply-To: <00F91484-5B04-45F8-A9C7-C3ED68ED207E@xentek.net>
References: <4167AD97-4D8A-4922-83DB-23B5DBCA68B4@striderweb.com> 
	<8b870c460911040759x1855b077y5ba9dbe2b3b08ffc@mail.gmail.com> 
	<2EC3CFD0-FCB3-4BF0-99E2-BEA09F865F32@striderweb.com>
	<EC153D6D-1533-4923-B044-6DBCBDE7D1B3@xentek.net> 
	<3c67989d-f068-44d9-82c5-58228feb40f5@j24g2000yqa.googlegroups.com> 
	<00F91484-5B04-45F8-A9C7-C3ED68ED207E@xentek.net>
Message-ID: <49ae4828-78c4-4668-8468-5ea0028e8e26@a32g2000yqm.googlegroups.com>

Otto,

Thanks for your prompt answer! I don't really understand your
statment :
"The place where you load wp-config.php can be replaced by putting
your code in an action triggered by wp_ajax_whatever. That's the
difference."
I guess you are talking about some kind of action hook like
add_action('admin_header','my_ajax_function');
Right? Do I place this action hook in the same file as the ajax
function, no matter where is the hook?

How do I link my include ajax function code into the plugin? By
enqueuing the script through an admin_print_scripts callback function?
Or rather by a require_once in the plugin master file?

Sorry if this is obvious for you but it is really not for. I have
tried several things and I am not able to find a solution to remove
the wp-config.php :(

Eric,

Thanks as well for your point. The admin_url is a function that
requires the wp-config.php to be loaded (until I find a solution to
bypass it).

Thanks again!

Olivier

From photofantaisie at gmail.com  Tue Nov 17 16:32:04 2009
From: photofantaisie at gmail.com (Ade Walker)
Date: Tue, 17 Nov 2009 17:32:04 +0100
Subject: [wp-hackers] Plugins and themes localization
In-Reply-To: <902424490911170731h1c3624a0i9779778b767f1141@mail.gmail.com>
References: <9e03f6490911170638o1fdef5eaq27d384baaee940af@mail.gmail.com>
	<9dd057850911170710t3bf77730ib0addefc59e42641@mail.gmail.com>
	<902424490911170731h1c3624a0i9779778b767f1141@mail.gmail.com>
Message-ID: <9dd057850911170832t571d4402ufffc7886756b939f@mail.gmail.com>

For localisation files, I agree. However, we should also have something to
indicate that the plugin is internationalised even if no translations are
currently available.

Maybe something as simple as Internationalised: Yes, added to the readme.

Just a thought.

2009/11/17 Beau Lebens <beau at dentedreality.com.au>

> This sounds like a great idea, and definitely would make sense to add
> into the readme.txt. It could be as simple as:
>
> Locales: en_AU, pt_BR, ca_ES, fr_FR
>
> Then if that tag was part of the file, we could mark the plugin as
> localized, and list the languages it's available in. If it's *not*
> present, we could mark it as such, and provide a link to the Codex to
> get the plugin author started:
> http://codex.wordpress.org/I18n_for_WordPress_Developers
>
>

From otto at ottodestruct.com  Tue Nov 17 16:37:01 2009
From: otto at ottodestruct.com (Otto)
Date: Tue, 17 Nov 2009 10:37:01 -0600
Subject: [wp-hackers] "deprecating" direct calls to wp-config.php
In-Reply-To: <49ae4828-78c4-4668-8468-5ea0028e8e26@a32g2000yqm.googlegroups.com>
References: <4167AD97-4D8A-4922-83DB-23B5DBCA68B4@striderweb.com> 
	<8b870c460911040759x1855b077y5ba9dbe2b3b08ffc@mail.gmail.com> 
	<2EC3CFD0-FCB3-4BF0-99E2-BEA09F865F32@striderweb.com>
	<EC153D6D-1533-4923-B044-6DBCBDE7D1B3@xentek.net> 
	<3c67989d-f068-44d9-82c5-58228feb40f5@j24g2000yqa.googlegroups.com> 
	<00F91484-5B04-45F8-A9C7-C3ED68ED207E@xentek.net>
	<49ae4828-78c4-4668-8468-5ea0028e8e26@a32g2000yqm.googlegroups.com>
Message-ID: <161617690911170837j593aa168ie7869922a49cc226@mail.gmail.com>

Have you read the codex article? I thought it was perfectly clear.
http://codex.wordpress.org/AJAX_in_Plugins

I'll try to as simple as possible here:

1. You have some code that you want to call via an AJAX request. That
code will go in a plugin, like this:

add_action('wp_ajax_whatever', 'whatever_callback');
function whatever_callback() {
// do anything you like here
// check $_POST, whatever you want, All WordPress is available to you
// echo out whatever you like to return back to the AJAX call, then
die();
}

That is the server side code. That is what you will be calling. That's
what replaces the need for you to load wp-config.php at all.

The trick to this is that you won't call yourfile.php directly from
your javascript any more. Instead, your javascript will call the
admin-ajax.php file. The exact URL your javascript needs to call can
be generated using admin_url("admin-ajax.php"). So, when you're
outputting your javascript (and this can be anywhere you like, mind
you, not just in admin_header), then you'll use that as the point to
which you make the request.

For example, in jQuery, you'd do something like this:

jQuery(document).ready(function($) {
	var data = {
		action: 'whatever',
		anything: 'you like here'
	};
	jQuery.post(<?php echo admin_url("admin-ajax.php"); ?>, data,
function(response) {
		alert('Got this from the server: ' + response);
	});
});


See? It's making a POST request to the admin-ajax file. The "action"
of "whatever" is what triggers that call to the wp_ajax_whatever
action hook, which then runs your server side code within the
WordPress context.

No need for calling wp-config.php anywhere.

-Otto



On Tue, Nov 17, 2009 at 10:29 AM, Olivier <autremonde75 at gmail.com> wrote:
> Otto,
>
> Thanks for your prompt answer! I don't really understand your
> statment :
> "The place where you load wp-config.php can be replaced by putting
> your code in an action triggered by wp_ajax_whatever. That's the
> difference."
> I guess you are talking about some kind of action hook like
> add_action('admin_header','my_ajax_function');
> Right? Do I place this action hook in the same file as the ajax
> function, no matter where is the hook?
>
> How do I link my include ajax function code into the plugin? By
> enqueuing the script through an admin_print_scripts callback function?
> Or rather by a require_once in the plugin master file?
>
> Sorry if this is obvious for you but it is really not for. I have
> tried several things and I am not able to find a solution to remove
> the wp-config.php :(
>
> Eric,
>
> Thanks as well for your point. The admin_url is a function that
> requires the wp-config.php to be loaded (until I find a solution to
> bypass it).
>
> Thanks again!
>
> Olivier
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From nuno.morgadinho at gmail.com  Tue Nov 17 16:40:51 2009
From: nuno.morgadinho at gmail.com (nunomorgadinho)
Date: Tue, 17 Nov 2009 08:40:51 -0800 (PST)
Subject: [wp-hackers] ajax to call function in theme
In-Reply-To: <349fe48b0910291420t2166a30fl45a55ab74e69b15b@mail.gmail.com>
References: <ffecf028.1ca58b7.1e2fa7d8.368e@BrewerRadio.com>
	<5a7034dc.1ca58d4.1ee9774a.3c61@BrewerRadio.com>
	<349fe48b0910291420t2166a30fl45a55ab74e69b15b@mail.gmail.com>
Message-ID: <26393151.post@talk.nabble.com>


I've also updated this in the Codex example that uses Sack. Took me a while
to figure this so maybe it will help others now.


scribu wrote:
> 
> Finally updated the Codex example, using jQuery.
> 
> -- 
> http://scribu.net
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
> 
> 

-- 
View this message in context: http://old.nabble.com/ajax-to-call-function-in-theme-tp26116790p26393151.html
Sent from the Wordpress Hackers mailing list archive at Nabble.com.


From autremonde75 at gmail.com  Tue Nov 17 16:44:26 2009
From: autremonde75 at gmail.com (Olivier)
Date: Tue, 17 Nov 2009 08:44:26 -0800 (PST)
Subject: [wp-hackers] "deprecating" direct calls to wp-config.php
In-Reply-To: <161617690911170837j593aa168ie7869922a49cc226@mail.gmail.com>
References: <4167AD97-4D8A-4922-83DB-23B5DBCA68B4@striderweb.com> 
	<8b870c460911040759x1855b077y5ba9dbe2b3b08ffc@mail.gmail.com> 
	<2EC3CFD0-FCB3-4BF0-99E2-BEA09F865F32@striderweb.com>
	<EC153D6D-1533-4923-B044-6DBCBDE7D1B3@xentek.net> 
	<3c67989d-f068-44d9-82c5-58228feb40f5@j24g2000yqa.googlegroups.com> 
	<00F91484-5B04-45F8-A9C7-C3ED68ED207E@xentek.net>
	<49ae4828-78c4-4668-8468-5ea0028e8e26@a32g2000yqm.googlegroups.com>
	<161617690911170837j593aa168ie7869922a49cc226@mail.gmail.com>
Message-ID: <00f227d2-3248-446a-9471-5389b69db485@k17g2000yqh.googlegroups.com>

Hi Otto,

Yes I have read the Codex.

I think I haven't explained clearly enough where my problem was, sorry
for that.

The issue isn't with the Ajax callback. I am able to have this working
properly without any problem.

The issue is with the javascript/jQuery code (client side). If I
remove the call the wp-config.php, then when the JS code is generated
and added into the html file sent to the client, this php part won't
be resolved : <?php echo admin_url("admin-ajax.php"); ?> potentially
because admin_url is a function known through the core...

That's it, no issue with the server side ajax handling, I don't have
anything to change on that front as I am already using the admin-ajax
hooking style. The issue is really with the client side and providing
the right URL to call which I can't if I don't have a way to get the
admin_url resolved.

Sorry for the confusion...

Olivier

From otto at ottodestruct.com  Tue Nov 17 16:48:14 2009
From: otto at ottodestruct.com (Otto)
Date: Tue, 17 Nov 2009 10:48:14 -0600
Subject: [wp-hackers] "deprecating" direct calls to wp-config.php
In-Reply-To: <00f227d2-3248-446a-9471-5389b69db485@k17g2000yqh.googlegroups.com>
References: <4167AD97-4D8A-4922-83DB-23B5DBCA68B4@striderweb.com> 
	<8b870c460911040759x1855b077y5ba9dbe2b3b08ffc@mail.gmail.com> 
	<2EC3CFD0-FCB3-4BF0-99E2-BEA09F865F32@striderweb.com>
	<EC153D6D-1533-4923-B044-6DBCBDE7D1B3@xentek.net> 
	<3c67989d-f068-44d9-82c5-58228feb40f5@j24g2000yqa.googlegroups.com> 
	<00F91484-5B04-45F8-A9C7-C3ED68ED207E@xentek.net>
	<49ae4828-78c4-4668-8468-5ea0028e8e26@a32g2000yqm.googlegroups.com>
	<161617690911170837j593aa168ie7869922a49cc226@mail.gmail.com> 
	<00f227d2-3248-446a-9471-5389b69db485@k17g2000yqh.googlegroups.com>
Message-ID: <161617690911170848t962745fte648fb5da64bc1a8@mail.gmail.com>

On Tue, Nov 17, 2009 at 10:44 AM, Olivier <autremonde75 at gmail.com> wrote:
> The issue is with the javascript/jQuery code (client side). If I
> remove the call the wp-config.php, then when the JS code is generated
> and added into the html file sent to the client, this php part won't
> be resolved : <?php echo admin_url("admin-ajax.php"); ?> potentially
> because admin_url is a function known through the core...
>
> That's it, no issue with the server side ajax handling, I don't have
> anything to change on that front as I am already using the admin-ajax
> hooking style. The issue is really with the client side and providing
> the right URL to call which I can't if I don't have a way to get the
> admin_url resolved.

Okay, but that makes no particular sense to me. If you're in a plugin
context, then you don't have to include wp-config. You're already
running inside WordPress.

Why are you having to include the wp-config.php there? Are you
generating this through a separate PHP file or something?

How, exactly, are you generating this Javascript right now? How does
it get included onto the page in question?

-Otto
Sent from Memphis, TN, United States

From trelvao at workmedia.pt  Tue Nov 17 16:54:25 2009
From: trelvao at workmedia.pt (Tiago Relvao)
Date: Tue, 17 Nov 2009 16:54:25 +0000
Subject: [wp-hackers] "deprecating" direct calls to wp-config.php
In-Reply-To: <161617690911170848t962745fte648fb5da64bc1a8@mail.gmail.com>
References: <4167AD97-4D8A-4922-83DB-23B5DBCA68B4@striderweb.com>
	<8b870c460911040759x1855b077y5ba9dbe2b3b08ffc@mail.gmail.com>
	<2EC3CFD0-FCB3-4BF0-99E2-BEA09F865F32@striderweb.com>	<EC153D6D-1533-4923-B044-6DBCBDE7D1B3@xentek.net>
	<3c67989d-f068-44d9-82c5-58228feb40f5@j24g2000yqa.googlegroups.com>
	<00F91484-5B04-45F8-A9C7-C3ED68ED207E@xentek.net>	<49ae4828-78c4-4668-8468-5ea0028e8e26@a32g2000yqm.googlegroups.com>	<161617690911170837j593aa168ie7869922a49cc226@mail.gmail.com>
	<00f227d2-3248-446a-9471-5389b69db485@k17g2000yqh.googlegroups.com>
	<161617690911170848t962745fte648fb5da64bc1a8@mail.gmail.com>
Message-ID: <4B02D541.3080100@workmedia.pt>

You already have a js var defined for that: ajaxurl
You just have to use it as yout url.

Tiago


Otto wrote:
> On Tue, Nov 17, 2009 at 10:44 AM, Olivier <autremonde75 at gmail.com> wrote:
>   
>> The issue is with the javascript/jQuery code (client side). If I
>> remove the call the wp-config.php, then when the JS code is generated
>> and added into the html file sent to the client, this php part won't
>> be resolved : <?php echo admin_url("admin-ajax.php"); ?> potentially
>> because admin_url is a function known through the core...
>>
>> That's it, no issue with the server side ajax handling, I don't have
>> anything to change on that front as I am already using the admin-ajax
>> hooking style. The issue is really with the client side and providing
>> the right URL to call which I can't if I don't have a way to get the
>> admin_url resolved.
>>     
>
> Okay, but that makes no particular sense to me. If you're in a plugin
> context, then you don't have to include wp-config. You're already
> running inside WordPress.
>
> Why are you having to include the wp-config.php there? Are you
> generating this through a separate PHP file or something?
>
> How, exactly, are you generating this Javascript right now? How does
> it get included onto the page in question?
>
> -Otto
> Sent from Memphis, TN, United States
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>   

From markandrewslade at gmail.com  Tue Nov 17 16:56:54 2009
From: markandrewslade at gmail.com (Mark Slade)
Date: Tue, 17 Nov 2009 11:56:54 -0500
Subject: [wp-hackers] Getting post_author to update with an autosave.
Message-ID: <1258477014.2598.14.camel@jupiter>

Hello,

I am trying to resolve an issue in my WPMU 2.8 installation causing a
page's original author to be carried over when it is autosaved by a
different author.

I have hooked into edit_page_form and am using it to spit out a hidden
input named "post_author_override" with a value of the current user's
ID.  In an autosave this is translated to "post_author" and survives all
the way to wp_create_post_autosave(), defined in
wp-admin/includes/post.php.

At this point _wp_post_revision_fields() is called, defined in
wp-includes/post.php, which removes the post_author field because it is
protected.  I can hook into the '_wp_post_revision_fields' filter and
add it, but it's hard-coded to be removed so this does me no good.

As a result, the autosave is created/updated without post_author being
changed, and autosaves are always attributed to the original author and
not the actual author.

I can fix this by directly editing _wp_post_revision_fields so that
post_author is not in the array of protected keys, but am concerned that
it was put there for a reason and this will cause something to break.

Can anyone lend some insight?  Is it by design that autosaves keep the
original author, and not the actual author?

Thank you,
Mark


From wp at xentek.net  Tue Nov 17 17:24:10 2009
From: wp at xentek.net (Eric Marden)
Date: Tue, 17 Nov 2009 12:24:10 -0500
Subject: [wp-hackers] "deprecating" direct calls to wp-config.php
In-Reply-To: <49ae4828-78c4-4668-8468-5ea0028e8e26@a32g2000yqm.googlegroups.com>
References: <4167AD97-4D8A-4922-83DB-23B5DBCA68B4@striderweb.com>
	<8b870c460911040759x1855b077y5ba9dbe2b3b08ffc@mail.gmail.com>
	<2EC3CFD0-FCB3-4BF0-99E2-BEA09F865F32@striderweb.com>
	<EC153D6D-1533-4923-B044-6DBCBDE7D1B3@xentek.net>
	<3c67989d-f068-44d9-82c5-58228feb40f5@j24g2000yqa.googlegroups.com>
	<00F91484-5B04-45F8-A9C7-C3ED68ED207E@xentek.net>
	<49ae4828-78c4-4668-8468-5ea0028e8e26@a32g2000yqm.googlegroups.com>
Message-ID: <E38F8F15-77C4-4AE2-875C-4A5FDA510C8D@xentek.net>


On Nov 17, 2009, at 11:29 AM, Olivier wrote:

> Sorry if this is obvious for you but it is really not for. I have
> tried several things and I am not able to find a solution to remove
> the wp-config.php :(


I just walked you through the entire process. What you're missing is  
that your code is obviously not inside a plugin, else you'd have  
access to the WP API. Either way, you're still doing it wrong.


- Eric Marden
__________________________________
http://xentek.net/code/wordpress/
tw: @xentek





From autremonde75 at gmail.com  Tue Nov 17 17:31:05 2009
From: autremonde75 at gmail.com (Olivier)
Date: Tue, 17 Nov 2009 09:31:05 -0800 (PST)
Subject: [wp-hackers] "deprecating" direct calls to wp-config.php
In-Reply-To: <4B02D541.3080100@workmedia.pt>
References: <4167AD97-4D8A-4922-83DB-23B5DBCA68B4@striderweb.com> 
	<8b870c460911040759x1855b077y5ba9dbe2b3b08ffc@mail.gmail.com> 
	<2EC3CFD0-FCB3-4BF0-99E2-BEA09F865F32@striderweb.com>
	<EC153D6D-1533-4923-B044-6DBCBDE7D1B3@xentek.net> 
	<3c67989d-f068-44d9-82c5-58228feb40f5@j24g2000yqa.googlegroups.com> 
	<00F91484-5B04-45F8-A9C7-C3ED68ED207E@xentek.net>
	<49ae4828-78c4-4668-8468-5ea0028e8e26@a32g2000yqm.googlegroups.com>
	<161617690911170837j593aa168ie7869922a49cc226@mail.gmail.com> 
	<00f227d2-3248-446a-9471-5389b69db485@k17g2000yqh.googlegroups.com> 
	<161617690911170848t962745fte648fb5da64bc1a8@mail.gmail.com> 
	<4B02D541.3080100@workmedia.pt>
Message-ID: <701ec16e-482d-45a7-af70-80b07bdf9058@x31g2000yqx.googlegroups.com>

Otto,

I am generating my Javascript through a separate php file to not mix
pure php server side code and client oriented JS in php. This separate
php file isn't included with a require_once, it is included through
the enqueue_script called for target pages. This ensure that the JS
code is generated only for this page and not for all admin pages.

Tiago,

Thanks sir, that did the trick! ajaxurl is perfect, thanks a lot! Not
sure if it works for the frontend as well.

Anyway, thanks a lot for your help gents!

Olivier

From contato at catiakitahara.com.br  Tue Nov 17 18:16:30 2009
From: contato at catiakitahara.com.br (=?UTF-8?Q?C=C3=A1tia_Kitahara?=)
Date: Tue, 17 Nov 2009 16:16:30 -0200
Subject: [wp-hackers] Plugins and themes localization
Message-ID: <9e03f6490911171016k47df34b1qa1d3a741847b22e5@mail.gmail.com>

I agree with you, Ade, telling if it's internationalized is also important.

Another point to consider is that most of the time the localizations and
even the internationalizations are made by a third person. So it would be
interesting to provide a way/instructions to those people contribute sending
their work to the author, this way it'll be included into the releases.

I'm saying that because sometimes people localize/internationalize
plugins/themes for their own use and they just don't share it, because they
forget or for any other reason. And the author doesn't know about it.

Maybe a button "send your localization to the plugin/theme author" ?


Message: 6
> Date: Tue, 17 Nov 2009 10:31:42 -0500
> From: Beau Lebens <beau at dentedreality.com.au>
> Subject: Re: [wp-hackers] Plugins and themes localization
> To: wp-hackers at lists.automattic.com
> Message-ID:
>        <902424490911170731h1c3624a0i9779778b767f1141 at mail.gmail.com>
> Content-Type: text/plain; charset=UTF-8
>
> This sounds like a great idea, and definitely would make sense to add
> into the readme.txt. It could be as simple as:
>
> Locales: en_AU, pt_BR, ca_ES, fr_FR
>
> Then if that tag was part of the file, we could mark the plugin as
> localized, and list the languages it's available in. If it's *not*
> present, we could mark it as such, and provide a link to the Codex to
> get the plugin author started:
> http://codex.wordpress.org/I18n_for_WordPress_Developers
>
>
> Message: 9
> Date: Tue, 17 Nov 2009 17:32:04 +0100
> From: Ade Walker <photofantaisie at gmail.com>
> Subject: Re: [wp-hackers] Plugins and themes localization
> To: wp-hackers at lists.automattic.com
> Message-ID:
>        <9dd057850911170832t571d4402ufffc7886756b939f at mail.gmail.com>
> Content-Type: text/plain; charset=ISO-8859-1
>
> For localisation files, I agree. However, we should also have something to
> indicate that the plugin is internationalised even if no translations are
> currently available.
>
> Maybe something as simple as Internationalised: Yes, added to the readme.
>
> Just a thought.
>


-- 
C?tia Kitahara

www.catiakitahara.com.br
www.airuma.com.br
www.wordpress-br.com

From admin at laptoptips.ca  Tue Nov 17 18:55:58 2009
From: admin at laptoptips.ca (Andrew Ozz)
Date: Tue, 17 Nov 2009 10:55:58 -0800
Subject: [wp-hackers] "deprecating" direct calls to wp-config.php
In-Reply-To: <701ec16e-482d-45a7-af70-80b07bdf9058@x31g2000yqx.googlegroups.com>
References: <4167AD97-4D8A-4922-83DB-23B5DBCA68B4@striderweb.com>
	<8b870c460911040759x1855b077y5ba9dbe2b3b08ffc@mail.gmail.com>
	<2EC3CFD0-FCB3-4BF0-99E2-BEA09F865F32@striderweb.com>	<EC153D6D-1533-4923-B044-6DBCBDE7D1B3@xentek.net>
	<3c67989d-f068-44d9-82c5-58228feb40f5@j24g2000yqa.googlegroups.com>
	<00F91484-5B04-45F8-A9C7-C3ED68ED207E@xentek.net>	<49ae4828-78c4-4668-8468-5ea0028e8e26@a32g2000yqm.googlegroups.com>	<161617690911170837j593aa168ie7869922a49cc226@mail.gmail.com>
	<00f227d2-3248-446a-9471-5389b69db485@k17g2000yqh.googlegroups.com>
	<161617690911170848t962745fte648fb5da64bc1a8@mail.gmail.com>
	<4B02D541.3080100@workmedia.pt>
	<701ec16e-482d-45a7-af70-80b07bdf9058@x31g2000yqx.googlegroups.com>
Message-ID: <4B02F1BE.3020100@laptoptips.ca>

Olivier wrote:
> Thanks sir, that did the trick! ajaxurl is perfect, thanks a lot! Not
> sure if it works for the frontend as well.

The ajaxurl JS var is available only in the admin. To use it on the 
front-end you can declare it from your plugin:

add_action('wp_head', 'my_ajaxurl', 1);
function my_ajaxurl() {
?>
<script type="text/javascript">
   var ajaxurl = "<?php echo admin_url('admin_ajax.php'); ?>";
</script>
<?php
}

From otto at ottodestruct.com  Tue Nov 17 19:46:54 2009
From: otto at ottodestruct.com (Otto)
Date: Tue, 17 Nov 2009 13:46:54 -0600
Subject: [wp-hackers] Getting post_author to update with an autosave.
In-Reply-To: <1258477014.2598.14.camel@jupiter>
References: <1258477014.2598.14.camel@jupiter>
Message-ID: <161617690911171146g6712aa66wdf9f07f589ee4bf4@mail.gmail.com>

Looks like that was fixed here: http://core.trac.wordpress.org/ticket/10004

Fix will be in 2.9.

-Otto
Sent from Memphis, TN, United States


On Tue, Nov 17, 2009 at 10:56 AM, Mark Slade <markandrewslade at gmail.com> wrote:
> Hello,
>
> I am trying to resolve an issue in my WPMU 2.8 installation causing a
> page's original author to be carried over when it is autosaved by a
> different author.
>
> I have hooked into edit_page_form and am using it to spit out a hidden
> input named "post_author_override" with a value of the current user's
> ID. ?In an autosave this is translated to "post_author" and survives all
> the way to wp_create_post_autosave(), defined in
> wp-admin/includes/post.php.
>
> At this point _wp_post_revision_fields() is called, defined in
> wp-includes/post.php, which removes the post_author field because it is
> protected. ?I can hook into the '_wp_post_revision_fields' filter and
> add it, but it's hard-coded to be removed so this does me no good.
>
> As a result, the autosave is created/updated without post_author being
> changed, and autosaves are always attributed to the original author and
> not the actual author.
>
> I can fix this by directly editing _wp_post_revision_fields so that
> post_author is not in the array of protected keys, but am concerned that
> it was put there for a reason and this will cause something to break.
>
> Can anyone lend some insight? ?Is it by design that autosaves keep the
> original author, and not the actual author?
>
> Thank you,
> Mark
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From autremonde75 at gmail.com  Tue Nov 17 19:49:31 2009
From: autremonde75 at gmail.com (Olivier)
Date: Tue, 17 Nov 2009 11:49:31 -0800 (PST)
Subject: [wp-hackers] "deprecating" direct calls to wp-config.php
In-Reply-To: <4B02F1BE.3020100@laptoptips.ca>
References: <4167AD97-4D8A-4922-83DB-23B5DBCA68B4@striderweb.com> 
	<8b870c460911040759x1855b077y5ba9dbe2b3b08ffc@mail.gmail.com> 
	<2EC3CFD0-FCB3-4BF0-99E2-BEA09F865F32@striderweb.com>
	<EC153D6D-1533-4923-B044-6DBCBDE7D1B3@xentek.net> 
	<3c67989d-f068-44d9-82c5-58228feb40f5@j24g2000yqa.googlegroups.com> 
	<00F91484-5B04-45F8-A9C7-C3ED68ED207E@xentek.net>
	<49ae4828-78c4-4668-8468-5ea0028e8e26@a32g2000yqm.googlegroups.com>
	<161617690911170837j593aa168ie7869922a49cc226@mail.gmail.com> 
	<00f227d2-3248-446a-9471-5389b69db485@k17g2000yqh.googlegroups.com> 
	<161617690911170848t962745fte648fb5da64bc1a8@mail.gmail.com> 
	<4B02D541.3080100@workmedia.pt>
	<701ec16e-482d-45a7-af70-80b07bdf9058@x31g2000yqx.googlegroups.com>
	<4B02F1BE.3020100@laptoptips.ca>
Message-ID: <a89b3688-8816-4077-9dfa-288ed74d57b2@v25g2000yqk.googlegroups.com>

Andrew,

Thanks for the details, very usefull!

Olivier

From markandrewslade at gmail.com  Tue Nov 17 19:56:35 2009
From: markandrewslade at gmail.com (Mark Slade)
Date: Tue, 17 Nov 2009 14:56:35 -0500
Subject: [wp-hackers] Getting post_author to update with an autosave.
In-Reply-To: <161617690911171146g6712aa66wdf9f07f589ee4bf4@mail.gmail.com>
References: <1258477014.2598.14.camel@jupiter>
	<161617690911171146g6712aa66wdf9f07f589ee4bf4@mail.gmail.com>
Message-ID: <1258487795.2598.22.camel@jupiter>

Otto - thanks for the link.  I thought I was thorough in my search for
existing discussions on the topic but apparently was not :)

Mark


On Tue, 2009-11-17 at 13:46 -0600, Otto wrote:
> Looks like that was fixed here: http://core.trac.wordpress.org/ticket/10004
> 
> Fix will be in 2.9.
> 
> -Otto
> Sent from Memphis, TN, United States
> 
> 
> On Tue, Nov 17, 2009 at 10:56 AM, Mark Slade <markandrewslade at gmail.com> wrote:
> > Hello,
> >
> > I am trying to resolve an issue in my WPMU 2.8 installation causing a
> > page's original author to be carried over when it is autosaved by a
> > different author.
> >
> > I have hooked into edit_page_form and am using it to spit out a hidden
> > input named "post_author_override" with a value of the current user's
> > ID.  In an autosave this is translated to "post_author" and survives all
> > the way to wp_create_post_autosave(), defined in
> > wp-admin/includes/post.php.
> >
> > At this point _wp_post_revision_fields() is called, defined in
> > wp-includes/post.php, which removes the post_author field because it is
> > protected.  I can hook into the '_wp_post_revision_fields' filter and
> > add it, but it's hard-coded to be removed so this does me no good.
> >
> > As a result, the autosave is created/updated without post_author being
> > changed, and autosaves are always attributed to the original author and
> > not the actual author.
> >
> > I can fix this by directly editing _wp_post_revision_fields so that
> > post_author is not in the array of protected keys, but am concerned that
> > it was put there for a reason and this will cause something to break.
> >
> > Can anyone lend some insight?  Is it by design that autosaves keep the
> > original author, and not the actual author?
> >
> > Thank you,
> > Mark
> >
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers at lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> >
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers


From scribu at gmail.com  Tue Nov 17 23:37:27 2009
From: scribu at gmail.com (scribu)
Date: Wed, 18 Nov 2009 01:37:27 +0200
Subject: [wp-hackers] Plugins and themes localization
In-Reply-To: <9e03f6490911171016k47df34b1qa1d3a741847b22e5@mail.gmail.com>
References: <9e03f6490911171016k47df34b1qa1d3a741847b22e5@mail.gmail.com>
Message-ID: <349fe48b0911171537h7ea30a29k33bc86a33c412287@mail.gmail.com>

C?tia, better handling of all aspects related to i18n is going into a
project called GlotPress <http://glotpress.org>.


-- 
http://scribu.net

From wp-hackers at striderweb.com  Wed Nov 18 01:29:30 2009
From: wp-hackers at striderweb.com (Stephen Rider)
Date: Tue, 17 Nov 2009 19:29:30 -0600
Subject: [wp-hackers] Plugins and themes localization
In-Reply-To: <9e03f6490911170638o1fdef5eaq27d384baaee940af@mail.gmail.com>
References: <9e03f6490911170638o1fdef5eaq27d384baaee940af@mail.gmail.com>
Message-ID: <9EBE569E-D74F-4046-9844-99B200979049@striderweb.com>

I wonder if this should be added as a plugin header?

Name: My Plugin
Author: Me
.
.
.
.
Localizations: en_US fr_FR

...where the first in that list is always the "native" language of the un-translated plugin.

However it's done, +1 for standardizing a way to label plugins as localized or at least "localization ready".

Stephen

-- 
Stephen Rider
http://striderweb.com/

On Nov 17, 2009, at 8:38 AM, C?tia Kitahara wrote:

> It made me think about an idea I had once: to add to the plugins/themes
> directory the information wether a plugin/theme is internationalized or not
> and if so, in which languages it's available.
> 
> I brought this conversation to the polyglots list (this thread here:
> http://lists.automattic.com/pipermail/wp-polyglots/2009-November/003806.html)
> and Z? suggested me that the best way of doing that would be adding those
> informations to the plugin/theme readme.txt files so it could be easily
> displayed at the FYI box. He also suggested me to have this discussion here.
> 
> So, is this possible? It would be very useful for non-english speakers, and
> I think if people starts seeing this as an important feature of their
> plugins/themes, maybe more people would internationalize their
> plugins/themes making our lives easier. ;)


From jfontainhas at gmail.com  Wed Nov 18 03:11:41 2009
From: jfontainhas at gmail.com (=?ISO-8859-1?Q?Jos=E9_Fontainhas?=)
Date: Tue, 17 Nov 2009 22:11:41 -0500
Subject: [wp-hackers] Plugins and themes localization
In-Reply-To: <9EBE569E-D74F-4046-9844-99B200979049@striderweb.com>
References: <9e03f6490911170638o1fdef5eaq27d384baaee940af@mail.gmail.com> 
	<9EBE569E-D74F-4046-9844-99B200979049@striderweb.com>
Message-ID: <7e66c63e0911171911p43891ab3hf7092e36d1e8cb62@mail.gmail.com>

I am not too sure of the benefits of listing which translations are
available, as a specific section on the readme. Why? Because
maintaining that information is just going to be another headache for
plugin/theme authors, as the translations probably come in on a
different cycle than the "normal" release cycle of the theme or
plugin.

I'd suggest simply indicating if it is internationalized or not, and
on downloading you'd see which translations are available at that
particular moment. Maybe the information on which languages are
available (at the time of that particular release) could simply be
listed on the description section, as well as instructions for
translators on where to send their language files, informally.

My 0.02?, anyway

Z?



2009/11/17 Stephen Rider <wp-hackers at striderweb.com>:
> I wonder if this should be added as a plugin header?
>
> Name: My Plugin
> Author: Me
> .
> .
> .
> .
> Localizations: en_US fr_FR
>
> ...where the first in that list is always the "native" language of the un-translated plugin.
>
> However it's done, +1 for standardizing a way to label plugins as localized or at least "localization ready".
>
> Stephen
>
> --
> Stephen Rider
> http://striderweb.com/

From scribu at gmail.com  Wed Nov 18 06:12:39 2009
From: scribu at gmail.com (scribu)
Date: Wed, 18 Nov 2009 08:12:39 +0200
Subject: [wp-hackers] Plugins and themes localization
In-Reply-To: <7e66c63e0911171911p43891ab3hf7092e36d1e8cb62@mail.gmail.com>
References: <9e03f6490911170638o1fdef5eaq27d384baaee940af@mail.gmail.com>
	<9EBE569E-D74F-4046-9844-99B200979049@striderweb.com>
	<7e66c63e0911171911p43891ab3hf7092e36d1e8cb62@mail.gmail.com>
Message-ID: <349fe48b0911172212w7ac16a20w79ac974036ee5cd@mail.gmail.com>

2009/11/18 Jos? Fontainhas <jfontainhas at gmail.com>

> I am not too sure of the benefits of listing which translations are
> available, as a specific section on the readme. Why? Because
> maintaining that information is just going to be another headache for
> plugin/theme authors, as the translations probably come in on a
> different cycle than the "normal" release cycle of the theme or
> plugin.
>

Completely agree.

There already is a header that signals if a plugin is translatable:
Textdomain.



> I'd suggest simply indicating if it is internationalized or not, and
> on downloading you'd see which translations are available at that
> particular moment. Maybe the information on which languages are
> available (at the time of that particular release) could simply be
> listed on the description section, as well as instructions for
> translators on where to send their language files, informally.
>

That's already how I do it.


-- 
http://scribu.net

From peter.westwood at ftwr.co.uk  Wed Nov 18 07:46:55 2009
From: peter.westwood at ftwr.co.uk (Peter Westwood)
Date: Wed, 18 Nov 2009 07:46:55 +0000
Subject: [wp-hackers] Plugins and themes localization
In-Reply-To: <9e03f6490911170638o1fdef5eaq27d384baaee940af@mail.gmail.com>
References: <9e03f6490911170638o1fdef5eaq27d384baaee940af@mail.gmail.com>
Message-ID: <0A85722C-AF25-4F8D-8926-026B41286571@ftwr.co.uk>

I think we need to steer clear from using readme.txt for this.

We need to work towards a situation where the plugin developer does  
not need to get involved for translations to happen much like we have  
for the core of WordPress where the translation files are stored in  
separate svn and the translators have deployment tools available.

At present it is easy to make your plugin translatable - if you log  
into the admin section for your plugin on WordPress.org you can  
download a pot file for your plugin and you can also use the tools  
there to add a textdomain to all your translatable strings.

Like the plugin compatibility data this is an area where we need to  
make the information source the community rather than funnel  
everything through the plugin developer.

Maybe we could have an online translation tool hosted on wordpress.org  
where people could translate the odd string?

-- 
Peter Westwood
http://blog.ftwr.co.uk | http://westi.wordpress.com
C53C F8FC 8796 8508 88D6 C950 54F4 5DCD A834 01C5


From raven at mecus.es  Wed Nov 18 07:50:08 2009
From: raven at mecus.es (Rafael Poveda - RaveN)
Date: Wed, 18 Nov 2009 07:50:08 +0000
Subject: [wp-hackers] Plugins and themes localization
Message-ID: <1338570468-1258530640-cardhu_decombobulator_blackberry.rim.net-2126050854-@bda063.bisx.produk.on.blackberry>

I think GlotPress would be great :)


------Mensaje original------
De: Peter Westwood
Remitente: wp-hackers-bounces at lists.automattic.com
Para: WP-Hackers List
Responder a: WP-Hackers List
Asunto: Re: [wp-hackers] Plugins and themes localization
Enviado: 18 Nov, 2009 08:46

I think we need to steer clear from using readme.txt for this.

We need to work towards a situation where the plugin developer does  
not need to get involved for translations to happen much like we have  
for the core of WordPress where the translation files are stored in  
separate svn and the translators have deployment tools available.

At present it is easy to make your plugin translatable - if you log  
into the admin section for your plugin on WordPress.org you can  
download a pot file for your plugin and you can also use the tools  
there to add a textdomain to all your translatable strings.

Like the plugin compatibility data this is an area where we need to  
make the information source the community rather than funnel  
everything through the plugin developer.

Maybe we could have an online translation tool hosted on wordpress.org  
where people could translate the odd string?

-- 
Peter Westwood
http://blog.ftwr.co.uk | http://westi.wordpress.com
C53C F8FC 8796 8508 88D6 C950 54F4 5DCD A834 01C5

_______________________________________________
wp-hackers mailing list
wp-hackers at lists.automattic.com
http://lists.automattic.com/mailman/listinfo/wp-hackers


Rafael Poveda <RaveN> | Mecus.es
raven at mecus.es | raven at raven.es
gtalk: rafael.poveda

From photofantaisie at gmail.com  Wed Nov 18 10:08:04 2009
From: photofantaisie at gmail.com (Ade Walker)
Date: Wed, 18 Nov 2009 11:08:04 +0100
Subject: [wp-hackers] Plugins and themes localization
In-Reply-To: <349fe48b0911172212w7ac16a20w79ac974036ee5cd@mail.gmail.com>
References: <9e03f6490911170638o1fdef5eaq27d384baaee940af@mail.gmail.com>
	<9EBE569E-D74F-4046-9844-99B200979049@striderweb.com>
	<7e66c63e0911171911p43891ab3hf7092e36d1e8cb62@mail.gmail.com>
	<349fe48b0911172212w7ac16a20w79ac974036ee5cd@mail.gmail.com>
Message-ID: <9dd057850911180208v6f0b7255y147fcc64d207fe68@mail.gmail.com>

2009/11/18 scribu <scribu at gmail.com>

>
> There already is a header that signals if a plugin is translatable:
> Textdomain.
>

I don't think that adds any info to the details displayed on Extend. Or does
it? Or have I misunderstood the point you were making? :-)

From photofantaisie at gmail.com  Wed Nov 18 10:19:38 2009
From: photofantaisie at gmail.com (Ade Walker)
Date: Wed, 18 Nov 2009 11:19:38 +0100
Subject: [wp-hackers] Plugins and themes localization
In-Reply-To: <0A85722C-AF25-4F8D-8926-026B41286571@ftwr.co.uk>
References: <9e03f6490911170638o1fdef5eaq27d384baaee940af@mail.gmail.com>
	<0A85722C-AF25-4F8D-8926-026B41286571@ftwr.co.uk>
Message-ID: <9dd057850911180219y2bdf21cr79edcebf1c16af74@mail.gmail.com>

2009/11/18 Peter Westwood <peter.westwood at ftwr.co.uk>

> At present it is easy to make your plugin translatable -
>

Agreed - assuming it's been internationalised in the first place. It seems
to me some sort of flag on Extend, pulled from a simple addition to the
readme file (Internationalised: Yes/no kind of thing) would make life much
easier for non-English language users to find plugins that they want to use.


As for the actual translations, you probably have a good point. These
generally are not maintained by the plugin developer, he/she just packages
the .mo files with the download, so having comunity sourced info for this
does make sense.

From leogermani at gmail.com  Wed Nov 18 10:26:56 2009
From: leogermani at gmail.com (Leo germani)
Date: Wed, 18 Nov 2009 08:26:56 -0200
Subject: [wp-hackers] Plugins and themes localization
In-Reply-To: <7e66c63e0911171911p43891ab3hf7092e36d1e8cb62@mail.gmail.com>
References: <9e03f6490911170638o1fdef5eaq27d384baaee940af@mail.gmail.com> 
	<9EBE569E-D74F-4046-9844-99B200979049@striderweb.com>
	<7e66c63e0911171911p43891ab3hf7092e36d1e8cb62@mail.gmail.com>
Message-ID: <32c7967e0911180226k86aa780oe634270390e8e15d@mail.gmail.com>

2009/11/18 Jos? Fontainhas <jfontainhas at gmail.com>

> I am not too sure of the benefits of listing which translations are
> available, as a specific section on the readme. Why? Because
> maintaining that information is just going to be another headache for
> plugin/theme authors, as the translations probably come in on a
> different cycle than the "normal" release cycle of the theme or
> plugin.
>

You have a point.

Perhaps the plugin/theme directory could look for ".mo" files inside the
package and automatically indicate what languages are available.

Leo,,

From autremonde75 at gmail.com  Wed Nov 18 13:40:47 2009
From: autremonde75 at gmail.com (Olivier)
Date: Wed, 18 Nov 2009 05:40:47 -0800 (PST)
Subject: [wp-hackers] "deprecating" direct calls to wp-config.php
In-Reply-To: <4B02F1BE.3020100@laptoptips.ca>
References: <4167AD97-4D8A-4922-83DB-23B5DBCA68B4@striderweb.com> 
	<8b870c460911040759x1855b077y5ba9dbe2b3b08ffc@mail.gmail.com> 
	<2EC3CFD0-FCB3-4BF0-99E2-BEA09F865F32@striderweb.com>
	<EC153D6D-1533-4923-B044-6DBCBDE7D1B3@xentek.net> 
	<3c67989d-f068-44d9-82c5-58228feb40f5@j24g2000yqa.googlegroups.com> 
	<00F91484-5B04-45F8-A9C7-C3ED68ED207E@xentek.net>
	<49ae4828-78c4-4668-8468-5ea0028e8e26@a32g2000yqm.googlegroups.com>
	<161617690911170837j593aa168ie7869922a49cc226@mail.gmail.com> 
	<00f227d2-3248-446a-9471-5389b69db485@k17g2000yqh.googlegroups.com> 
	<161617690911170848t962745fte648fb5da64bc1a8@mail.gmail.com> 
	<4B02D541.3080100@workmedia.pt>
	<701ec16e-482d-45a7-af70-80b07bdf9058@x31g2000yqx.googlegroups.com>
	<4B02F1BE.3020100@laptoptips.ca>
Message-ID: <96194a5f-9120-4108-8166-e1780ecbf761@b15g2000yqd.googlegroups.com>

> <script type="text/javascript">
> ? ?var ajaxurl = "<?php echo admin_url('admin_ajax.php'); ?>";
> </script>

Please note that there is a typo here, the right code is :
	<script type="text/javascript">
	var ajaxurl = "<?php echo admin_url('admin-ajax.php'); ?>";
	</script>

Note that the admin_ajax is in fact admin-ajax. I spent 3 hours today
to find the solution, was too obvious ;)

From gaarai at gaarai.com  Wed Nov 18 16:09:29 2009
From: gaarai at gaarai.com (Chris Jean)
Date: Wed, 18 Nov 2009 10:09:29 -0600
Subject: [wp-hackers] Sidebar ID Naming Problems
In-Reply-To: <4AFF8B80.5070300@htcomp.net>
References: <4AFF8B80.5070300@htcomp.net>
Message-ID: <4B041C39.2020509@gaarai.com>

I really appreciate you bringing this up Charles. This is a situation 
that I have dreaded for a long time.

I often produce solutions that have a very large number number of 
"sidebars". This results in widget shuffling when any of the sidebars 
are removed or new ones are added. I'd love a solution that allowed me 
to specify very specific sidebar IDs using alphanumeric, -, and _ 
characters.

I'm going to start working on a Core patch that does just that. Does 
anyone know of any potential pitfalls as I begin working with this? For 
example, is there code in the widget handling that expects/requires an 
integer sidebar id?

Chris Jean
http://gaarai.com/
@chrisjean



Charles K. Clarkson wrote:
> Hello,
>
> This went a little long. There were a lot more problems than I 
> anticipated. So,
> I moved the question to the top.
>
> How should I proceed?
>
>     Write a patch for a new function that gets the sidebar id from a 
> name-or-id
>     input or an array where the name or id is specified? (Which would 
> entail
>     patching other functions [3] in /wp-includes/widgets.php.)
>
>     - OR -
>
>     Rewrite the documentation to reflect the problems with some edge 
> cases of id
>     naming.
>
>     - OR -
>
>     Something else?
>
>
>
> register_sidebar() allows more names and ids to be registered than
> dynamic_sidebar() recognizes as valid names and ids.
>
> For example, register_sidebar() allows me to name a side bar "1" with 
> a id of
> "first". I don't know why anyone would choose those values, but
> register_sidebar() allows it [1].
>
> register_sidebar( array('name' => 1, id => 'first') );
>
>
> dynamic_sidebar() will not be able to find the sidebar given its name 
> (1).
>
>     if ( is_int($index) ) {
>         $index = "sidebar-$index"; /// 1 becomes 'sidebar-1'
>         ...
>
> The main problem is that dynamic_sidebar() is trying to process both 
> ids and
> names through the same variable ($index) while register_sidebar() 
> separates the
> two with an array ( array('name' => 'Top', 'id' => 'sidebar-1' ).
>
> According to the in-line docs for dynamic_sidebar():
>
>     It is confusing for the $index parameter, but just know that it 
> should just
>     work. When you register the sidebar in the theme, you will use the 
> same name
>     for this function or "Pay no heed to the man behind the curtain." 
> Just
>     accept it as an oddity of WordPress sidebar register and display.
>
>
> It does "just work" if you never use your own sidebar ids.
>
>
> I started looking at this because I wanted to use is_active_sidebar() 
> which
> tests to see if a dynamic_sidebar() has anything in it. There is no
> get_dynamic_sidebar(). dynamic_sidebar() sends everything to the 
> browser or
> returns false.
>
>     register_sidebar( array('name' => 'Top') ); // id defaults to 
> "sidebar-1"
>     ...
>
>     if ( is_active_sidebar('Top') )
>         dynamic_sidebar('Top');
>
> Which fails because is_active_sidebar() just completely skips over 
> searching for
> an id to go with a name. To get it to work you need to know when it was
> registered. Not something theme authors and designers are going to follow
> easily. There's a ticket to fix this: 
> http://core.trac.wordpress.org/ticket/10440
>
>     if ( is_active_sidebar(1) )
>         dynamic_sidebar('Top');
>
> Like dynamic_sidebar(), is_active_sidebar() converts 1 to "sidebar-1". 
> Unlike
> dynamic_sidebar() it assumes everything is entered as an id.
>
>
> unregister_sidebar() assumes its parameter (incorrectly named $name, 
> not $id) is
> an id. But it wants a literal id, like "sidebar-1". unregister_sidebar(1)
> unregisters a sidebar with an id of 1, while dynamic_sidebar(1) tries 
> to display
> a sidebar with an id of "sidebar-1".
>
>
> Wait. There's more.
>
> The dynamic_sidebar() function is used by the Widgets management page. 
> So, it is
> possible to create a sidebar with register_sidebar() that 
> dynamic_sidebar()
> cannot find. You can populate it with drag and drop [2] and not have 
> it appear
> on the web site.
>
>
> Note:
> [1] register_sidebar() allows the user to override the default setting 
> of:
>     'id' => "sidebar-$i",
>
> [2] When you refresh the Widgets management page the widgets will 
> disappear from
>     the sidebar. They are still attached to a sidebar, but 
> dynamic_sidebar()
>     cannot see the sidebar.
>
> [3] Depending on the exact solution used, this might include patching 
> these
>     functions:
>         dynamic_sidebar()
>         is_active_sidebar()
>         unregister_sidebar()
>         register_sidebar()
>         register_sidebars()
>
>     And creating this one:
>         get_sidebar_id()
>
>
> HTH,
>
>
> Charles Clarkson
> -- 
> Mobile Home Investor
> Free Market Advocate
> Programmer
>
> I'm not really a smart person. I just play one on the Internet.
>
> Stephenville, TX
> http://www.clarksonenergyhomes.com/wordpress/about/
> http://twitter.com/CharlesClarkson
> +1 (254) 968-8328
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

From cclarkson at htcomp.net  Wed Nov 18 16:43:28 2009
From: cclarkson at htcomp.net (Charles K. Clarkson)
Date: Wed, 18 Nov 2009 10:43:28 -0600
Subject: [wp-hackers] Sidebar ID Naming Problems
In-Reply-To: <4B041C39.2020509@gaarai.com>
References: <4AFF8B80.5070300@htcomp.net> <4B041C39.2020509@gaarai.com>
Message-ID: <4B042430.8030103@htcomp.net>

Chris Jean wrote:

>  I'd love a solution that allowed me
> to specify very specific sidebar IDs using alphanumeric, -, and _ 
> characters.
> 
> I'm going to start working on a Core patch that does just that. Does 
> anyone know of any potential pitfalls as I begin working with this? For 
> example, is there code in the widget handling that expects/requires an 
> integer sidebar id?

Hey Chris,

I already have a ticket open: http://core.trac.wordpress.org/ticket/11160

It does what you want by allowing you to pass an array as the parameter:

array(
     'id' => 'foo'
     'name' => 'My Weird Sidebar name',
}

I didn't test for this solution yet, but you should be able to pass the same
array to is_active_sidebar(), dynamic_sidebar() and unregister_sidebar() as
you do to register_sidebar().

So, you could set your arrays up for register sidebar and then use those same
arrays for all other sidebar functions.

Assuming $my_sidebars is a long list of sidebars:

foreach ( $my_sidebars as $name => $side_bar ) {
     register_sidebar($side_bar);
}

if ( is_active_sidebar( $my_sidebars['categories'] ) ) {
     dynamic_sidebar( $my_sidebars['categories'] );
}

Unlike now, dynamic_sidebar() will find the id in the array and do the right
thing.


HTH,

Charles Clarkson
-- 
Mobile Home Investor
Free Market Advocate
Programmer

I'm not really a smart person. I just play one on the Internet.

Stephenville, TX
http://www.clarksonenergyhomes.com/wordpress/about/
http://twitter.com/CharlesClarkson
+1 (254) 968-8328

From gaarai at gaarai.com  Wed Nov 18 16:49:23 2009
From: gaarai at gaarai.com (Chris Jean)
Date: Wed, 18 Nov 2009 10:49:23 -0600
Subject: [wp-hackers] Sidebar ID Naming Problems
In-Reply-To: <4B042430.8030103@htcomp.net>
References: <4AFF8B80.5070300@htcomp.net> <4B041C39.2020509@gaarai.com>
	<4B042430.8030103@htcomp.net>
Message-ID: <4B042593.1090204@gaarai.com>

That's great Charles. I'll dig into the code and verify functionality.

It's time WordPress matures beyond the "I assume that the sidebars are 
never going to change on the site" mentality.

Chris Jean
http://gaarai.com/
@chrisjean



Charles K. Clarkson wrote:
> Chris Jean wrote:
>
>>  I'd love a solution that allowed me
>> to specify very specific sidebar IDs using alphanumeric, -, and _ 
>> characters.
>>
>> I'm going to start working on a Core patch that does just that. Does 
>> anyone know of any potential pitfalls as I begin working with this? 
>> For example, is there code in the widget handling that 
>> expects/requires an integer sidebar id?

From dangayle at gmail.com  Wed Nov 18 18:12:13 2009
From: dangayle at gmail.com (Dan Gayle)
Date: Wed, 18 Nov 2009 10:12:13 -0800
Subject: [wp-hackers] SEO,
	How to turn off paged comments for search 	engine crawlers?
In-Reply-To: <00576DDA-6A96-42DF-8703-2F2013A8CDF7@newclarity.net>
References: <5267E548-3A18-445D-9EDA-5F58DD4CD11F@yoast.com>
	<1C0A7857-A4B9-41A6-B6D9-719DCCD82597@newclarity.net>
	<349fe48b0911081520n446bb9bv8226b45e9c9754d4@mail.gmail.com>
	<00576DDA-6A96-42DF-8703-2F2013A8CDF7@newclarity.net>
Message-ID: <74a8f8d80911181012w786f7c4craec0d5cf13e82ab3@mail.gmail.com>

Linking to a specific comment is easy. Most all comments are given
#ids, so it's simply a matter of using a url fragment identifier like
this:

http://example.com/post/#commentId


On Sun, Nov 8, 2009 at 5:23 PM, Mike Schinkel
<mikeschinkel at newclarity.net> wrote:
> On Nov 8, 2009, at 6:20 PM, scribu wrote:
>
>> Mike, I think your suggestion is already implemented by the SEO Super
>>
>> Comments<http://www.prelovac.com/vladimir/wordpress-plugins/seo-super-comments>plugin.
>
> Cool.
>
> Be nice if the approach because a standard pattern vs. obscurely
> implemented. ?I can't tell you how many times I've wanted to link to a
> specific comment in a tweet, for example. ?Standard patterns would empower
> many more blogs to enable that.
>
> -Mike Schinkel
> WordPress Custom Plugins
> http://mikeschinkel.com/custom-wordpress-plugins/
>
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From dangayle at gmail.com  Wed Nov 18 18:24:37 2009
From: dangayle at gmail.com (Dan Gayle)
Date: Wed, 18 Nov 2009 10:24:37 -0800
Subject: [wp-hackers] Not willing to summon the ancient troll,
	but... PHP5 	in WP 3.0 ?
In-Reply-To: <4B01CEA3.1070902@adcSTUDIO.com>
References: <949435.75773.qm@web65711.mail.ac4.yahoo.com>
	<OFE566D134.C60D5A90-ONC125766D.0033ED1C-C125766D.00343A15@notes.edfgdf.fr>
	<59e7f3130911130903v1df2fc28ia18f05fe01c9a876@mail.gmail.com>
	<e1202cb10911161019t6d67a181ve99fac5ba6e892b6@mail.gmail.com>
	<4B01B36A.10001@adcSTUDIO.com>
	<161617690911161233h45c80edfj2b4186bd6938108a@mail.gmail.com>
	<9f34a3610911161318h1d0a6020rb13fbd5e5f33fcd0@mail.gmail.com>
	<4B01CEA3.1070902@adcSTUDIO.com>
Message-ID: <74a8f8d80911181024n4e1c6808p3106758a272a0d3@mail.gmail.com>

Please, let at least this happen. I HATE HATE HATE having to always
upgrade to a new version because the new 'features' introduced in the
last update included security bugs, etc. How fast has WP cycled
through it's 2.8.* branch because of bugs, etc.?

I often don't _want_ to upgrade to get new features, since that can
break custom coded plugins, but we're forced to because there is only
one branch that also includes bug fixes.

At least two branches, please. Do it like linux or something, with a
hardened, stabilized release with long term security support, and a
latest release with the coolest whiz-bang ajax features.

On Mon, Nov 16, 2009 at 2:13 PM, Ken Newman <Ken at adcstudio.com> wrote:
> Going forward,
> and for a limited time, there would be support for 2.9.1, or 2.10 etc for
> security updates, and those users would have to eventually upgrade before
> support ended. Maintaining two branches (one only for security), but for a
> relatively short term wouldn't be too onerous would it?

From dangayle at gmail.com  Wed Nov 18 18:34:25 2009
From: dangayle at gmail.com (Dan Gayle)
Date: Wed, 18 Nov 2009 10:34:25 -0800
Subject: [wp-hackers] Sidebar ID Naming Problems
In-Reply-To: <4B042593.1090204@gaarai.com>
References: <4AFF8B80.5070300@htcomp.net> <4B041C39.2020509@gaarai.com>
	<4B042430.8030103@htcomp.net> <4B042593.1090204@gaarai.com>
Message-ID: <74a8f8d80911181034u737057s6385ae2d5b2d2143@mail.gmail.com>

+1

I love it when you register a new sidebar, such as when you use a new
theme, and what _was_ your footer sidebar is now in your content area,
or what was your primary navigation is now in your sidebar. Great fun!
(Especially when the ability to save the contents of a specific widget
was taken away when you removed it from a sidebar. That was sweet. At
least that is back.)

On Wed, Nov 18, 2009 at 8:49 AM, Chris Jean <gaarai at gaarai.com> wrote:

> It's time WordPress matures beyond the "I assume that the sidebars are never
> going to change on the site" mentality.

From SuperMoonMan at gmail.com  Wed Nov 18 20:07:13 2009
From: SuperMoonMan at gmail.com (Steven Rossi)
Date: Wed, 18 Nov 2009 14:07:13 -0600
Subject: [wp-hackers] Not willing to summon the ancient troll,
	but... PHP5 	in WP 3.0 ?
In-Reply-To: <74a8f8d80911181024n4e1c6808p3106758a272a0d3@mail.gmail.com>
References: <949435.75773.qm@web65711.mail.ac4.yahoo.com>
	<OFE566D134.C60D5A90-ONC125766D.0033ED1C-C125766D.00343A15@notes.edfgdf.fr>
	<59e7f3130911130903v1df2fc28ia18f05fe01c9a876@mail.gmail.com> 
	<e1202cb10911161019t6d67a181ve99fac5ba6e892b6@mail.gmail.com> 
	<4B01B36A.10001@adcSTUDIO.com>
	<161617690911161233h45c80edfj2b4186bd6938108a@mail.gmail.com> 
	<9f34a3610911161318h1d0a6020rb13fbd5e5f33fcd0@mail.gmail.com> 
	<4B01CEA3.1070902@adcSTUDIO.com>
	<74a8f8d80911181024n4e1c6808p3106758a272a0d3@mail.gmail.com>
Message-ID: <474320ee0911181207l69287c6ft91312af906a8f390@mail.gmail.com>

Part of me likes the idea, but I'm not totally on board just yet. I really
appreciate the simplicity of the Wordpress install/upgrade process (the
upgrade process having just recently joined in on the simplicity train with
the advent of automatic upgrade functionality), and I would hate to dilute
it too much. I'm not saying that this is a bad idea, but I'd have to see a
more complete picture of how the process would work for less technical
users.

Steven Rossi
http://www.letsmovetothemoon.com
http://www.stevenjrossi.com
http://www.twitter.com/supermoonman

On Wed, Nov 18, 2009 at 12:24 PM, Dan Gayle <dangayle at gmail.com> wrote:

> Please, let at least this happen. I HATE HATE HATE having to always
> upgrade to a new version because the new 'features' introduced in the
> last update included security bugs, etc. How fast has WP cycled
> through it's 2.8.* branch because of bugs, etc.?
>
> I often don't _want_ to upgrade to get new features, since that can
> break custom coded plugins, but we're forced to because there is only
> one branch that also includes bug fixes.
>
> At least two branches, please. Do it like linux or something, with a
> hardened, stabilized release with long term security support, and a
> latest release with the coolest whiz-bang ajax features.
>
> On Mon, Nov 16, 2009 at 2:13 PM, Ken Newman <Ken at adcstudio.com> wrote:
> > Going forward,
> > and for a limited time, there would be support for 2.9.1, or 2.10 etc for
> > security updates, and those users would have to eventually upgrade before
> > support ended. Maintaining two branches (one only for security), but for
> a
> > relatively short term wouldn't be too onerous would it?
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From russgilbert at gmail.com  Wed Nov 18 21:39:37 2009
From: russgilbert at gmail.com (Russ Gilbert)
Date: Wed, 18 Nov 2009 13:39:37 -0800
Subject: [wp-hackers] A Humble Request
Message-ID: <01a201ca6897$a3f08600$ebd19200$@com>

Greetings masters of all things Wordpress.

 

I almost hate to bug everyone with something so small, but it's something
that has begun to take up a fair amount of time.

 

On the "Edit Page" interface, underneath the "Page Order" field is text that
states "(We know this is a little janky, it'll be better in future
releases.)"

 

While I appreciate the acknowledgment of the jankiness and it never bothered
me working with WP on my personal sites, I now regularly set up Wordpress
sites for clients, many of whom I have talked into migrating from another
CMS.  The Order interface is in fact a little janky but it's also quite
functional, and to a client who is new to Wordpress it's a bit of a turn
off.  

 

I wouldn't mention it if I hadn't had to defend it to clients a couple of
times, to the point where I have begun suppressing it for new client sites I
roll out.

 

It occurs to me that I'm probably not the only one with this issue, and that
removing the text in the core would a) not have any functional impact
whatsoever and b) would aid in the shift from thinking of Wordpress as a
blogging platform to thinking of it as the world class CMS that it's rapidly
becoming.

 

Obviously, a nicer interface for ordering pages would be nice too but given
the number of awesome plugins for page management out there, not a priority.

 

I have been playing with the 2.9 beta (loving the image editor guys!) and
hope this suggestion comes at a point where it might be acted on.  

 

Thanks!


From wordpress at dd32.id.au  Wed Nov 18 21:47:49 2009
From: wordpress at dd32.id.au (Dion Hulse (dd32))
Date: Thu, 19 Nov 2009 08:47:49 +1100
Subject: [wp-hackers] A Humble Request
In-Reply-To: <01a201ca6897$a3f08600$ebd19200$@com>
References: <01a201ca6897$a3f08600$ebd19200$@com>
Message-ID: <op.u3l1hziqspxmuu@dd32>

I'd create a Trac Ticket for this: http://core.trac.wordpress.org/newticket
Login with your WordPress.org forum username/password.

On Thu, 19 Nov 2009 08:39:37 +1100, Russ Gilbert <russgilbert at gmail.com>  
wrote:

> Greetings masters of all things Wordpress.
>
>
> I almost hate to bug everyone with something so small, but it's something
> that has begun to take up a fair amount of time.
>
>
> On the "Edit Page" interface, underneath the "Page Order" field is text  
> that
> states "(We know this is a little janky, it'll be better in future
> releases.)"
>
>
> While I appreciate the acknowledgment of the jankiness and it never  
> bothered
> me working with WP on my personal sites, I now regularly set up Wordpress
> sites for clients, many of whom I have talked into migrating from another
> CMS.  The Order interface is in fact a little janky but it's also quite
> functional, and to a client who is new to Wordpress it's a bit of a turn
> off.
>
>
> I wouldn't mention it if I hadn't had to defend it to clients a couple of
> times, to the point where I have begun suppressing it for new client  
> sites I
> roll out.
>
>
> It occurs to me that I'm probably not the only one with this issue, and  
> that
> removing the text in the core would a) not have any functional impact
> whatsoever and b) would aid in the shift from thinking of Wordpress as a
> blogging platform to thinking of it as the world class CMS that it's  
> rapidly
> becoming.
>
>
> Obviously, a nicer interface for ordering pages would be nice too but  
> given
> the number of awesome plugins for page management out there, not a  
> priority.
>
>
> I have been playing with the 2.9 beta (loving the image editor guys!) and
> hope this suggestion comes at a point where it might be acted on.
>
>
> Thanks!
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>


-- 
Using Opera's revolutionary e-mail client: http://www.opera.com/mail/

From steve at sltaylor.co.uk  Wed Nov 18 21:50:02 2009
From: steve at sltaylor.co.uk (Steve Taylor)
Date: Wed, 18 Nov 2009 21:50:02 +0000
Subject: [wp-hackers] A Humble Request
In-Reply-To: <01a201ca6897$a3f08600$ebd19200$@com>
References: <01a201ca6897$a3f08600$ebd19200$@com>
Message-ID: <a21f8bf00911181350p284ca4e4s2a43d01d7b332e92@mail.gmail.com>

I'm just adding help hints for a client. Assuming you know how to add
JS to the admin, try this:

jQuery( document ).ready( function($) {
	if ( $( "#pageparentdiv" ).length ) {
		var i = 1;
		$.each( $( "#pageparentdiv .inside p" ), function() {
			if ( i == 4 ) {
				// Ordering hint
				$( this ).html( 'No need to bother with this. Use <a
href="/wp-admin/edit-pages.php?page=mypageorder">My Page Order</a>.'
);
			}
			i++;
		});
	}
});

Ugly but the best option for now (?). My Page Order is the best simple
ordering plugin I think, but pageMash is slicker.

HTH,

Steve


2009/11/18 Russ Gilbert <russgilbert at gmail.com>:
> Greetings masters of all things Wordpress.
>
>
>
> I almost hate to bug everyone with something so small, but it's something
> that has begun to take up a fair amount of time.
>
>
>
> On the "Edit Page" interface, underneath the "Page Order" field is text that
> states "(We know this is a little janky, it'll be better in future
> releases.)"
>
>
>
> While I appreciate the acknowledgment of the jankiness and it never bothered
> me working with WP on my personal sites, I now regularly set up Wordpress
> sites for clients, many of whom I have talked into migrating from another
> CMS. ?The Order interface is in fact a little janky but it's also quite
> functional, and to a client who is new to Wordpress it's a bit of a turn
> off.
>
>
>
> I wouldn't mention it if I hadn't had to defend it to clients a couple of
> times, to the point where I have begun suppressing it for new client sites I
> roll out.
>
>
>
> It occurs to me that I'm probably not the only one with this issue, and that
> removing the text in the core would a) not have any functional impact
> whatsoever and b) would aid in the shift from thinking of Wordpress as a
> blogging platform to thinking of it as the world class CMS that it's rapidly
> becoming.
>
>
>
> Obviously, a nicer interface for ordering pages would be nice too but given
> the number of awesome plugins for page management out there, not a priority.
>
>
>
> I have been playing with the 2.9 beta (loving the image editor guys!) and
> hope this suggestion comes at a point where it might be acted on.
>
>
>
> Thanks!
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From anacin at gwhatchet.com  Wed Nov 18 21:51:15 2009
From: anacin at gwhatchet.com (Andrew Nacin)
Date: Wed, 18 Nov 2009 16:51:15 -0500
Subject: [wp-hackers] A Humble Request
In-Reply-To: <op.u3l1hziqspxmuu@dd32>
References: <01a201ca6897$a3f08600$ebd19200$@com> <op.u3l1hziqspxmuu@dd32>
Message-ID: <8b870c460911181351g3f12081bo332a4c973c0e8503@mail.gmail.com>

See also:
http://core.trac.wordpress.org/ticket/2702
http://core.trac.wordpress.org/ticket/6362

Here's a quick way to remove that text:
add_filter('gettext', 'remove_janky_page_order');
function remove_janky_page_order($translated) {
    $janky = 'Pages are usually ordered alphabetically, but you can put a
number above to change the order pages appear in. (We know this is a little
janky, it&#8217;ll be better in future releases.)';
    if ($translated == $janky)
        return 'Pages are usually ordered alphabetically, but you can put a
number above to change the order pages appear in.';
    return $translated;
}

From feeds at armeda.com  Wed Nov 18 21:53:24 2009
From: feeds at armeda.com (Dre Feeds)
Date: Wed, 18 Nov 2009 13:53:24 -0800
Subject: [wp-hackers] A Humble Request
In-Reply-To: <01a201ca6897$a3f08600$ebd19200$@com>
References: <01a201ca6897$a3f08600$ebd19200$@com>
Message-ID: <77D8592A-D0AE-45D6-B5DD-0DE69E048064@armeda.com>

I think this is valid and not a huge undertaking.

+1

Cheers,
Dre Armeda
http://armeda.com

Sent from my iPhone

On Nov 18, 2009, at 1:39 PM, "Russ Gilbert" <russgilbert at gmail.com>  
wrote:

> Greetings masters of all things Wordpress.
>
>
>
> I almost hate to bug everyone with something so small, but it's  
> something
> that has begun to take up a fair amount of time.
>
>
>
> On the "Edit Page" interface, underneath the "Page Order" field is  
> text that
> states "(We know this is a little janky, it'll be better in future
> releases.)"
>
>
>
> While I appreciate the acknowledgment of the jankiness and it never  
> bothered
> me working with WP on my personal sites, I now regularly set up  
> Wordpress
> sites for clients, many of whom I have talked into migrating from  
> another
> CMS.  The Order interface is in fact a little janky but it's also  
> quite
> functional, and to a client who is new to Wordpress it's a bit of a  
> turn
> off.
>
>
>
> I wouldn't mention it if I hadn't had to defend it to clients a  
> couple of
> times, to the point where I have begun suppressing it for new client  
> sites I
> roll out.
>
>
>
> It occurs to me that I'm probably not the only one with this issue,  
> and that
> removing the text in the core would a) not have any functional impact
> whatsoever and b) would aid in the shift from thinking of Wordpress  
> as a
> blogging platform to thinking of it as the world class CMS that it's  
> rapidly
> becoming.
>
>
>
> Obviously, a nicer interface for ordering pages would be nice too  
> but given
> the number of awesome plugins for page management out there, not a  
> priority.
>
>
>
> I have been playing with the 2.9 beta (loving the image editor  
> guys!) and
> hope this suggestion comes at a point where it might be acted on.
>
>
>
> Thanks!
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

From russgilbert at gmail.com  Wed Nov 18 21:53:20 2009
From: russgilbert at gmail.com (Russ Gilbert)
Date: Wed, 18 Nov 2009 13:53:20 -0800
Subject: [wp-hackers] A Humble Request
In-Reply-To: <8b870c460911181351g3f12081bo332a4c973c0e8503@mail.gmail.com>
References: <01a201ca6897$a3f08600$ebd19200$@com> <op.u3l1hziqspxmuu@dd32>
	<8b870c460911181351g3f12081bo332a4c973c0e8503@mail.gmail.com>
Message-ID: <01b301ca6899$8ccf20b0$a66d6210$@com>

Oh that's perfect.  I will add to my foundation plugin - thanks!!!

Trac ticket entered.

-----Original Message-----
From: wp-hackers-bounces at lists.automattic.com
[mailto:wp-hackers-bounces at lists.automattic.com] On Behalf Of Andrew Nacin
Sent: Wednesday, November 18, 2009 1:51 PM
To: wp-hackers at lists.automattic.com
Subject: Re: [wp-hackers] A Humble Request

See also:
http://core.trac.wordpress.org/ticket/2702
http://core.trac.wordpress.org/ticket/6362

Here's a quick way to remove that text:
add_filter('gettext', 'remove_janky_page_order');
function remove_janky_page_order($translated) {
    $janky = 'Pages are usually ordered alphabetically, but you can put a
number above to change the order pages appear in. (We know this is a little
janky, it&#8217;ll be better in future releases.)';
    if ($translated == $janky)
        return 'Pages are usually ordered alphabetically, but you can put a
number above to change the order pages appear in.';
    return $translated;
}
_______________________________________________
wp-hackers mailing list
wp-hackers at lists.automattic.com
http://lists.automattic.com/mailman/listinfo/wp-hackers


From bryanharley at gmail.com  Wed Nov 18 22:03:35 2009
From: bryanharley at gmail.com (Bryan Harley)
Date: Wed, 18 Nov 2009 14:03:35 -0800
Subject: [wp-hackers] A Humble Request
In-Reply-To: <01b301ca6899$8ccf20b0$a66d6210$@com>
References: <01a201ca6897$a3f08600$ebd19200$@com> <op.u3l1hziqspxmuu@dd32>
	<8b870c460911181351g3f12081bo332a4c973c0e8503@mail.gmail.com>
	<01b301ca6899$8ccf20b0$a66d6210$@com>
Message-ID: <58410e2e0911181403k430044cmbc9d1bf1fc86c488@mail.gmail.com>

This has been patched in this ticket: http://core.trac.wordpress.org/ticket/6362

Ready, but has not been committed to 2.9 yet.

-Bryan


On Wed, Nov 18, 2009 at 1:53 PM, Russ Gilbert <russgilbert at gmail.com> wrote:
> Oh that's perfect. ?I will add to my foundation plugin - thanks!!!
>
> Trac ticket entered.
>
> -----Original Message-----
> From: wp-hackers-bounces at lists.automattic.com
> [mailto:wp-hackers-bounces at lists.automattic.com] On Behalf Of Andrew Nacin
> Sent: Wednesday, November 18, 2009 1:51 PM
> To: wp-hackers at lists.automattic.com
> Subject: Re: [wp-hackers] A Humble Request
>
> See also:
> http://core.trac.wordpress.org/ticket/2702
> http://core.trac.wordpress.org/ticket/6362
>
> Here's a quick way to remove that text:
> add_filter('gettext', 'remove_janky_page_order');
> function remove_janky_page_order($translated) {
> ? ?$janky = 'Pages are usually ordered alphabetically, but you can put a
> number above to change the order pages appear in. (We know this is a little
> janky, it&#8217;ll be better in future releases.)';
> ? ?if ($translated == $janky)
> ? ? ? ?return 'Pages are usually ordered alphabetically, but you can put a
> number above to change the order pages appear in.';
> ? ?return $translated;
> }
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From emmensetech at gmail.com  Wed Nov 18 22:22:24 2009
From: emmensetech at gmail.com (Aaron Brazell)
Date: Wed, 18 Nov 2009 17:22:24 -0500
Subject: [wp-hackers] WP_Http File Upload
Message-ID: <ca7320070911181422p3b393a1eo1cbcf041c67a7de8@mail.gmail.com>

I'm working on a project that requires HTTP file uploads via POST. Does
anyone (Jacob?) know how the request should be written using the WP_Http
class? There doesn't seem to be any code that handles file uploads, but I'm
hoping I don't have to write an extender class just for that use case.

Help?

Aaron Brazell
CEO, Emmense Technologies
Lead Editor, Technosailor.com
Author, The WordPress Bible

e: aaron at technosailor.com
b: http://technosailor.com
t: http://twitter.com/technosailor
p: 443-455-1056Aaron Brazell
web:: www.technosailor.com
phone:: 410-608-6620
skype:: technosailor
twitter:: @technosailor

From beau at dentedreality.com.au  Wed Nov 18 22:42:47 2009
From: beau at dentedreality.com.au (Beau Lebens)
Date: Wed, 18 Nov 2009 14:42:47 -0800
Subject: [wp-hackers] WP_Http File Upload
In-Reply-To: <ca7320070911181422p3b393a1eo1cbcf041c67a7de8@mail.gmail.com>
References: <ca7320070911181422p3b393a1eo1cbcf041c67a7de8@mail.gmail.com>
Message-ID: <902424490911181442l13affbbbid3e33c6f76503ca8@mail.gmail.com>

> I'm working on a project that requires HTTP file uploads via POST. Does
> anyone (Jacob?) know how the request should be written using the WP_Http
> class? There doesn't seem to be any code that handles file uploads, but I'm
> hoping I don't have to write an extender class just for that use case.

I believe you'd be able to do this via something like
base64_encode()ing the contents of the file, then sending the other
details along with the POST request just by setting that into the body
of the request, as a query-string formatting string.

You're likely to have some "fun" dealing with big files using this
method though, don't know if that's going to be an issue for you.

Something like this should be a starting point (not tested at all :) ).

<?php
$file = file_get_contents('filename.ext');
$file = base64_encode($file);
$body = http_build_query( array( 'file' => $file, 'name' => $name,
'whateverelse' => 'something' ) );
$result = wp_remote_post( $url, array( 'body'=>$body );
echo wp_remote_retrieve_body($result);
?>

This is all assuming you're sending a file from WP to a remote site,
and obviously the format will depend on what they're expecting.

HTH
Beau

From wp at xentek.net  Wed Nov 18 22:51:59 2009
From: wp at xentek.net (Eric Marden)
Date: Wed, 18 Nov 2009 17:51:59 -0500
Subject: [wp-hackers] A Humble Request
In-Reply-To: <8b870c460911181351g3f12081bo332a4c973c0e8503@mail.gmail.com>
References: <01a201ca6897$a3f08600$ebd19200$@com> <op.u3l1hziqspxmuu@dd32>
	<8b870c460911181351g3f12081bo332a4c973c0e8503@mail.gmail.com>
Message-ID: <2511F5B2-1638-4A55-B644-1366F9551196@xentek.net>

On Nov 18, 2009, at 4:51 PM, Andrew Nacin wrote:

> http://core.trac.wordpress.org/ticket/6362

I just recently refreshed this patch 2 weeks ago, and while it should  
still be valid, might need refreshing again against trunk. I can do  
that tonight if one of the committers want to review it and push it  
in. It addresses many text changes, including removing the 'janky'  
comment. Personally, while the page order thing could be better, I've  
never really found it to be 'janky' for even a moderate amount of  
pages (<= 100).




- Eric Marden
__________________________________
http://xentek.net/code/wordpress/
tw: @xentek





From jeremy at visser.name  Wed Nov 18 22:55:39 2009
From: jeremy at visser.name (Jeremy Visser)
Date: Thu, 19 Nov 2009 09:55:39 +1100
Subject: [wp-hackers] A Humble Request
In-Reply-To: <01a201ca6897$a3f08600$ebd19200$@com>
References: <01a201ca6897$a3f08600$ebd19200$@com>
Message-ID: <1258584939.3438.6.camel@rillian.narnia.sunriseroad.net>

On Wed, 2009-11-18 at 13:39 -0800, Russ Gilbert wrote: 
> On the "Edit Page" interface, underneath the "Page Order" field is text that
> states "(We know this is a little janky, it'll be better in future
> releases.)"

Just FYI, Drupal 6 already handles this nicely. You can simply
drag-and-drop pages in the menu editor screen to set the order.

I've found the jQuery tableDnD plugin [0] has a nice feel for the
drag-and-drop, which would be used to handle the client-side dragging of
the pages.

[0] <http://code.google.com/p/tablednd/>


From peter.westwood at ftwr.co.uk  Wed Nov 18 23:02:46 2009
From: peter.westwood at ftwr.co.uk (Peter Westwood)
Date: Wed, 18 Nov 2009 23:02:46 +0000
Subject: [wp-hackers] A Humble Request
In-Reply-To: <2511F5B2-1638-4A55-B644-1366F9551196@xentek.net>
References: <01a201ca6897$a3f08600$ebd19200$@com> <op.u3l1hziqspxmuu@dd32>
	<8b870c460911181351g3f12081bo332a4c973c0e8503@mail.gmail.com>
	<2511F5B2-1638-4A55-B644-1366F9551196@xentek.net>
Message-ID: <CD71C2E1-8832-435B-9A70-5B1C2EA5ADEE@ftwr.co.uk>


On 18 Nov 2009, at 22:51, Eric Marden wrote:

> On Nov 18, 2009, at 4:51 PM, Andrew Nacin wrote:
>
>> http://core.trac.wordpress.org/ticket/6362
>
> I just recently refreshed this patch 2 weeks ago, and while it  
> should still be valid, might need refreshing again against trunk. I  
> can do that tonight if one of the committers want to review it and  
> push it in. It addresses many text changes, including removing the  
> 'janky' comment. Personally, while the page order thing could be  
> better, I've never really found it to be 'janky' for even a moderate  
> amount of pages (<= 100).

If someone could make sure this patch is up-to-date I will commit  
tomorrow :-)

Getting late here now.

Cheers
-- 
Peter Westwood
http://blog.ftwr.co.uk | http://westi.wordpress.com
C53C F8FC 8796 8508 88D6 C950 54F4 5DCD A834 01C5


From emmensetech at gmail.com  Wed Nov 18 23:16:34 2009
From: emmensetech at gmail.com (Aaron Brazell)
Date: Wed, 18 Nov 2009 18:16:34 -0500
Subject: [wp-hackers] WP_Http File Upload
In-Reply-To: <902424490911181442l13affbbbid3e33c6f76503ca8@mail.gmail.com>
References: <ca7320070911181422p3b393a1eo1cbcf041c67a7de8@mail.gmail.com>
	<902424490911181442l13affbbbid3e33c6f76503ca8@mail.gmail.com>
Message-ID: <ca7320070911181516s79960476k25d62a5923d42428@mail.gmail.com>

On Wed, Nov 18, 2009 at 5:42 PM, Beau Lebens <beau at dentedreality.com.au>wrote:

> I believe you'd be able to do this via something like
> base64_encode()ing the contents of the file, then sending the other
> details along with the POST request just by setting that into the body
> of the request, as a query-string formatting string.
>
> You're likely to have some "fun" dealing with big files using this
> method though, don't know if that's going to be an issue for you.
>
> Something like this should be a starting point (not tested at all :) ).
>
> <?php
> $file = file_get_contents('filename.ext');
> $file = base64_encode($file);
> $body = http_build_query( array( 'file' => $file, 'name' => $name,
> 'whateverelse' => 'something' ) );
> $result = wp_remote_post( $url, array( 'body'=>$body );
> echo wp_remote_retrieve_body($result);
> ?>
>
> This is all assuming you're sending a file from WP to a remote site,
> and obviously the format will depend on what they're expecting.
>

Thanks Beau-

Your assumptions are incorrect about source and destination, but the
principle of your code seems valid. I'll give it a whirl tomorrow. I'm
rebuilding my PHP Twitter library based on BackPress (thus the WP_Http
class) since cURL can be so... bad. Changing avatars and background images
require a POST of the image files. We'll see how far I get. :-)

Thanks again,

Aaron

From bryanharley at gmail.com  Wed Nov 18 23:26:57 2009
From: bryanharley at gmail.com (Bryan Harley)
Date: Wed, 18 Nov 2009 15:26:57 -0800
Subject: [wp-hackers] A Humble Request
In-Reply-To: <1258584939.3438.6.camel@rillian.narnia.sunriseroad.net>
References: <01a201ca6897$a3f08600$ebd19200$@com>
	<1258584939.3438.6.camel@rillian.narnia.sunriseroad.net>
Message-ID: <58410e2e0911181526p4e170cf8sfa6a2617bcc26b1b@mail.gmail.com>

I agree, a drag and drop interface would be nice.  There's a lot of
discussion going on here: http://core.trac.wordpress.org/ticket/2702
about how exactly this should be implemented.

-Bryan

On Wed, Nov 18, 2009 at 2:55 PM, Jeremy Visser <jeremy at visser.name> wrote:
> On Wed, 2009-11-18 at 13:39 -0800, Russ Gilbert wrote:
>> On the "Edit Page" interface, underneath the "Page Order" field is text that
>> states "(We know this is a little janky, it'll be better in future
>> releases.)"
>
> Just FYI, Drupal 6 already handles this nicely. You can simply
> drag-and-drop pages in the menu editor screen to set the order.
>
> I've found the jQuery tableDnD plugin [0] has a nice feel for the
> drag-and-drop, which would be used to handle the client-side dragging of
> the pages.
>
> [0] <http://code.google.com/p/tablednd/>
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From john at aldenta.com  Thu Nov 19 03:19:57 2009
From: john at aldenta.com (John Ford)
Date: Wed, 18 Nov 2009 22:19:57 -0500
Subject: [wp-hackers] Post thumbnail remains after image is trashed
Message-ID: <6ddb714d0911181919w3e2d10d9x5b58313636fb8570@mail.gmail.com>

I'm starting to use the new 2.9 post-thumbnail feature and have run
into a little quirk.  If you assign a post-thumbnail a post, and then
trash the image, the post-thumbnail is still associated with the post.
 The reason this happens is that _thumbnail_id still exists in the
postmeta table and all the functions in post-image-templates.php rely
on the post meta.

I've thought of a couple of options for a patch but I'd like to get
some ideas and opinions about the best way to solve this before I dive
in.

1. Update get_post_image_id() in post-image-template.php to check if
the image has been trashed before returning the id. This adds a little
bit of extra overhead but would keep the post thumbnail in place if
they restore the image. One possible downside is that if the user
later restores the image from the Media page then they may be
surprised that the post thumbnail has also returned.

2. Delete the _thumbnail_id when the photo is trashed. This would mean
that if the user clicks Undo then the photo thumbnail is no longer
attached. It may be nice to delete the _thumbnail_id when a photo is
deleted anyway to keep the table a little more tidy.

Any thoughts on the best approach to this?   Should the user get
alerted about this happening?

http://core.trac.wordpress.org/ticket/11149

Thanks.

John

From wp at xentek.net  Thu Nov 19 03:37:24 2009
From: wp at xentek.net (Eric Marden)
Date: Wed, 18 Nov 2009 22:37:24 -0500
Subject: [wp-hackers] A Humble Request
In-Reply-To: <CD71C2E1-8832-435B-9A70-5B1C2EA5ADEE@ftwr.co.uk>
References: <01a201ca6897$a3f08600$ebd19200$@com> <op.u3l1hziqspxmuu@dd32>
	<8b870c460911181351g3f12081bo332a4c973c0e8503@mail.gmail.com>
	<2511F5B2-1638-4A55-B644-1366F9551196@xentek.net>
	<CD71C2E1-8832-435B-9A70-5B1C2EA5ADEE@ftwr.co.uk>
Message-ID: <B06C21F6-28D2-4617-BA08-13125F5642A2@xentek.net>


On Nov 18, 2009, at 6:02 PM, Peter Westwood wrote:
>>> http://core.trac.wordpress.org/ticket/6362
>
> If someone could make sure this patch is up-to-date I will commit  
> tomorrow :-)



I'm refreshing it now as we speak.


- Eric Marden
__________________________________
http://xentek.net/code/wordpress/
tw: @xentek





From wp at xentek.net  Thu Nov 19 06:11:32 2009
From: wp at xentek.net (Eric Marden)
Date: Thu, 19 Nov 2009 01:11:32 -0500
Subject: [wp-hackers] Post thumbnail remains after image is trashed
In-Reply-To: <6ddb714d0911181919w3e2d10d9x5b58313636fb8570@mail.gmail.com>
References: <6ddb714d0911181919w3e2d10d9x5b58313636fb8570@mail.gmail.com>
Message-ID: <D71521AE-9CCB-4062-93B2-112EC874D140@xentek.net>


On Nov 18, 2009, at 10:19 PM, John Ford wrote:

> 2. Delete the _thumbnail_id when the photo is trashed. This would mean
> that if the user clicks Undo then the photo thumbnail is no longer
> attached. It may be nice to delete the _thumbnail_id when a photo is
> deleted anyway to keep the table a little more tidy.

Delete the _thumbnail_id. Warn the user that this is happening.

- Eric Marden
__________________________________
http://xentek.net/code/wordpress/
tw: @xentek





From wordpress at santosj.name  Thu Nov 19 06:50:28 2009
From: wordpress at santosj.name (Jacob Santos)
Date: Thu, 19 Nov 2009 00:50:28 -0600
Subject: [wp-hackers] WP_Http File Upload
In-Reply-To: <ca7320070911181422p3b393a1eo1cbcf041c67a7de8@mail.gmail.com>
References: <ca7320070911181422p3b393a1eo1cbcf041c67a7de8@mail.gmail.com>
Message-ID: <4B04EAB4.10006@santosj.name>

Aaron,

File handling is not handled by default, which you know. This might be 
an interesting extension, as I believe cURL has a specific use case for 
this and so does the HTTP extension. It would be nice to take advantage 
of those extensions functionality for this purpose. When you start to 
get into the other "transports" then it gets ugly, really really ugly. 
As in, "Oh dear god, now I remember why I didn't do it in the first 
place," ugly.

It is something I want, so if Dion Helse (dd32) or another hasn't 
already, then I believe I might take it up. If you are attempting to 
POST to a server that uses PHP and expects it to be compatible with PHP 
Upload, then I'm pretty sure that it is not currently supported by the 
HTTP API in WordPress at this point. You would have to do a bit of 
hacking to add support for cURL and the HTTP API.

Um, I won't be able to get to this until the weekend, but after a bit of 
research it appears simple enough. Ha ha, oh man, famous last words, 
soon I'll be screaming and then the fun will start. I kid. The currently 
problem is that the multipart/form-data is not supported at all and 
completely breaks most of what the current implementation assumes about 
the HTTP request. It will require creating new transports for just 
supporting multipart headers or adding the functionality to support 
multipart headers. Actually, it becomes increasely difficult because you 
have to add up all of the content for the main header and then for all 
of the other headers. So you would have to create the multipart headers 
and base64 the files and get the length and then attempt it again.

Probably also, the multipart can be made to attempt sending up to 8MB to 
see if that works and then split the files into 8MB chunks after if 
multiple files are used. The execution time for this would be crazy 
long, so might be better to just AJAX it instead and send one file at a 
time. It is also possible to check the execution time (for those that 
support it) and then stop with a message of which files were transferred.

Sounds like fun. Just hope someone else doesn't beat me to it.

For now, it doesn't seem like this will be something that will go into 
2.9, maybe 3.0. 2.9 is already beta and I'm unsure if they're going to 
put something so experimental and unstable into something so close to 
being released (2.9.1 maybe?). Given that very few are ever going to use 
this feature, it may not matter. Also, if it is requires more than 4 
hours of work, then I'll have to cut it to two weeks (weekends).

The cURL code is simple enough and you could attempt to use the HTTP 
Extension (even more simple) for now until it is supported for reals in 
WordPress.

Jacob Santos

Aaron Brazell wrote:
> I'm working on a project that requires HTTP file uploads via POST. Does
> anyone (Jacob?) know how the request should be written using the WP_Http
> class? There doesn't seem to be any code that handles file uploads, but I'm
> hoping I don't have to write an extender class just for that use case.
>
> Help?
>
> Aaron Brazell
> CEO, Emmense Technologies
> Lead Editor, Technosailor.com
> Author, The WordPress Bible
>
> e: aaron at technosailor.com
> b: http://technosailor.com
> t: http://twitter.com/technosailor
> p: 443-455-1056Aaron Brazell
> web:: www.technosailor.com
> phone:: 410-608-6620
> skype:: technosailor
> twitter:: @technosailor
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>   

From wordpress at santosj.name  Thu Nov 19 07:08:11 2009
From: wordpress at santosj.name (Jacob Santos)
Date: Thu, 19 Nov 2009 01:08:11 -0600
Subject: [wp-hackers] Options for Controller - Views
Message-ID: <4B04EEDB.6070102@santosj.name>

For an upcoming project, I need something that doesn't suck in the realm 
of either a content management that can easily be extended without a 
bunch of hacks or a framework. The goal is quick modification and 
development from A to B, meaning the least amount of framework building 
and maintenance on my end. So I have two options, either use a framework 
(Code Igniter) or WordPress.

Assuming that I'm going with WordPress, I need an easier controller to 
work with and a system that handles views better. Something WordPress 
does poorly. Thus, I can think of the following options:

1. Rewrite the WP_Rewrite

A full rewrite would allow for creating something that learns from the 
"mistakes" of the current implementation with emphasis of being easy to 
work with and allow for an view to be part of the flow. This would take 
the most time and require the most testing. I'd say it would take a week 
or two to complete (development and testing).

2. Modify Existing WP_Rewrite

I'm not sure why it is just so convoluted to get working. I'm sure that 
if I was able to get it working just once, that it would be great, 
however, the views is still something that would require correcting. 
Creating a hack around it just isn't all that clean with development and 
I would guess that it would be better for those who extend WordPress in 
cool and fun ways.

So what do you guys think? I take issue that it requires intensive 
training and large amount of BS before you can get the Rewrite to work. 
On other frameworks, it simple and extremely easy to add rewrite paths. 
Partly because this is loaded at the beginning without the need to 
hijack Wp_Query.

Jacob Santos

From emmensetech at gmail.com  Thu Nov 19 07:18:31 2009
From: emmensetech at gmail.com (Aaron Brazell)
Date: Thu, 19 Nov 2009 02:18:31 -0500
Subject: [wp-hackers] WP_Http File Upload
In-Reply-To: <4B04EAB4.10006@santosj.name>
References: <ca7320070911181422p3b393a1eo1cbcf041c67a7de8@mail.gmail.com>
	<4B04EAB4.10006@santosj.name>
Message-ID: <ca7320070911182318y53efa04ybd24f02476e68aac@mail.gmail.com>

On Thu, Nov 19, 2009 at 1:50 AM, Jacob Santos <wordpress at santosj.name>wrote:

> Sounds like fun. Just hope someone else doesn't beat me to it.
>
>
I promise not to beat you to it. ;-) In fact, if you need a use case to work
with this in, ping me when you can (off list).

Aaron

From aneeska2k5 at gmail.com  Thu Nov 19 08:24:17 2009
From: aneeska2k5 at gmail.com (aneeskA)
Date: Thu, 19 Nov 2009 13:54:17 +0530
Subject: [wp-hackers] fixed posting format for a travelogue blog
Message-ID: <55c794f10911190024u248d4364tc913acf1dee787c6@mail.gmail.com>

Hi all,

I am looking for a way to create a travelogue blog such a way that all the
posts have the same format. Like this:

Place
Location
Map
Pics
Summary
Major Attraction
etc

I will fill in the necessary details and when Publish is pressed I will get
a post in that predefined format. I googled looking for a way to do it. But
couldn't find any. Can any one please help me?

Regards
aneeskA

From wp at xentek.net  Thu Nov 19 09:26:14 2009
From: wp at xentek.net (Eric Marden)
Date: Thu, 19 Nov 2009 04:26:14 -0500
Subject: [wp-hackers] fixed posting format for a travelogue blog
In-Reply-To: <55c794f10911190024u248d4364tc913acf1dee787c6@mail.gmail.com>
References: <55c794f10911190024u248d4364tc913acf1dee787c6@mail.gmail.com>
Message-ID: <6314C0B5-6367-4431-AAD8-3DCFE3757167@xentek.net>

On Nov 19, 2009, at 3:24 AM, aneeskA wrote:
> I am looking for a way to create a travelogue blog such a way that  
> all the
> posts have the same format. Like this:
>
> Place
> Location
> Map
> Pics
> Summary
> Major Attraction
> etc


There are two ways to do this:

Use Custom Fields, and output the contents in your theme: http://codex.wordpress.org/Custom_Fields

Write a plugin that adds metaboxes to the Write Panel and output those  
values to your theme (this is really just adding a custom UI to custom  
fields, anyway, but requires more effort to implement): http://codex.wordpress.org/Function_Reference/add_meta_box




- Eric Marden
__________________________________
http://xentek.net/code/wordpress/
tw: @xentek





From scribu at gmail.com  Thu Nov 19 09:39:10 2009
From: scribu at gmail.com (scribu)
Date: Thu, 19 Nov 2009 11:39:10 +0200
Subject: [wp-hackers] fixed posting format for a travelogue blog
In-Reply-To: <6314C0B5-6367-4431-AAD8-3DCFE3757167@xentek.net>
References: <55c794f10911190024u248d4364tc913acf1dee787c6@mail.gmail.com>
	<6314C0B5-6367-4431-AAD8-3DCFE3757167@xentek.net>
Message-ID: <349fe48b0911190139u32a302d1h9d06bf15aaee8d21@mail.gmail.com>

For a custom UI for custom fields, try the Custom Field Template plugin.


On 11/19/09, Eric Marden <wp at xentek.net> wrote:
>
> On Nov 19, 2009, at 3:24 AM, aneeskA wrote:
>
>> I am looking for a way to create a travelogue blog such a way that all the
>> posts have the same format. Like this:
>>
>> Place
>> Location
>> Map
>> Pics
>> Summary
>> Major Attraction
>> etc
>>
>
>
> There are two ways to do this:
>
> Use Custom Fields, and output the contents in your theme:
> http://codex.wordpress.org/Custom_Fields
>
> Write a plugin that adds metaboxes to the Write Panel and output those
> values to your theme (this is really just adding a custom UI to custom
> fields, anyway, but requires more effort to implement):
> http://codex.wordpress.org/Function_Reference/add_meta_box
>
>
>
>
> - Eric Marden
> __________________________________
> http://xentek.net/code/wordpress/
> tw: @xentek
>
>
>
>
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>



-- 
http://scribu.net

From contato at catiakitahara.com.br  Thu Nov 19 13:08:34 2009
From: contato at catiakitahara.com.br (=?UTF-8?Q?C=C3=A1tia_Kitahara?=)
Date: Thu, 19 Nov 2009 11:08:34 -0200
Subject: [wp-hackers] Plugins and themes localization
In-Reply-To: <9e03f6490911171016k47df34b1qa1d3a741847b22e5@mail.gmail.com>
References: <9e03f6490911171016k47df34b1qa1d3a741847b22e5@mail.gmail.com>
Message-ID: <9e03f6490911190508h12ffc2aub949deabd6fc7121@mail.gmail.com>

>
> C?tia, better handling of all aspects related to i18n is going into a
> project called GlotPress <http://glotpress.org>.
>

Scribu, as far as I know GlotPress is just a translation tool. I started
this subject at Polyglots list, but Z? suggested me this is the place to
have it.

I am not too sure of the benefits of listing which translations are
> available, as a specific section on the readme. Why? Because
> maintaining that information is just going to be another headache for
> plugin/theme authors, as the translations probably come in on a
> different cycle than the "normal" release cycle of the theme or
> plugin.
>

I see, Z?, but I don't think it's such a headache, the author just need to
list the localizations he/she is distributing with the package, if there are
localizations done after, they'll be added to the next release. Besides it's
not supposed to be mandatory, isn't it?


> I'd suggest simply indicating if it is internationalized or not, and
> on downloading you'd see which translations are available at that
> particular moment.


But the point of displaying these informations is to avoid the need of
downloanding the plugin/theme and to have these informations at hand.


> Maybe the information on which languages are
> available (at the time of that particular release) could simply be
> listed on the description section, as well as instructions for
> translators on where to send their language files, informally.
>

Or maybe on another section called "Localizations". At least for themes,
it's possible to search for the tag "translation ready".

We need to work towards a situation where the plugin developer does
> not need to get involved for translations to happen much like we have
> for the core of WordPress where the translation files are stored in
> separate svn and the translators have deployment tools available.
>

Peter, I don't know about plans for a plugin/themes localizations official
repository, and I don't know if that's the case.

-- 
C?tia Kitahara

www.catiakitahara.com.br
www.airuma.com.br
www.wordpress-br.com

From scribu at gmail.com  Thu Nov 19 13:25:12 2009
From: scribu at gmail.com (scribu)
Date: Thu, 19 Nov 2009 15:25:12 +0200
Subject: [wp-hackers] Plugins and themes localization
In-Reply-To: <9e03f6490911190508h12ffc2aub949deabd6fc7121@mail.gmail.com>
References: <9e03f6490911171016k47df34b1qa1d3a741847b22e5@mail.gmail.com>
	<9e03f6490911190508h12ffc2aub949deabd6fc7121@mail.gmail.com>
Message-ID: <349fe48b0911190525i40125a87u106919df4ef5fda@mail.gmail.com>

I see, Z?, but I don't think it's such a headache, the author just need to
list the localizations he/she is distributing with the package, if there are
localizations done after, they'll be added to the next release. Besides it's
not supposed to be mandatory, isn't it?

As a plugin developer, it would be an extra burden for me. An
acceptable solution would be for WP Extend to figure out which
localizations are included, like somebody suggested in this topic.
This could be done using the Domain Path header included in the
plugin.

On 11/19/09, C?tia Kitahara <contato at catiakitahara.com.br> wrote:
>>
>> C?tia, better handling of all aspects related to i18n is going into a
>> project called GlotPress <http://glotpress.org>.
>>
>
> Scribu, as far as I know GlotPress is just a translation tool. I started
> this subject at Polyglots list, but Z? suggested me this is the place to
> have it.
>
> I am not too sure of the benefits of listing which translations are
>> available, as a specific section on the readme. Why? Because
>> maintaining that information is just going to be another headache for
>> plugin/theme authors, as the translations probably come in on a
>> different cycle than the "normal" release cycle of the theme or
>> plugin.
>>
>
> I see, Z?, but I don't think it's such a headache, the author just need to
> list the localizations he/she is distributing with the package, if there are
> localizations done after, they'll be added to the next release. Besides it's
> not supposed to be mandatory, isn't it?
>
>
>> I'd suggest simply indicating if it is internationalized or not, and
>> on downloading you'd see which translations are available at that
>> particular moment.
>
>
> But the point of displaying these informations is to avoid the need of
> downloanding the plugin/theme and to have these informations at hand.
>
>
>> Maybe the information on which languages are
>> available (at the time of that particular release) could simply be
>> listed on the description section, as well as instructions for
>> translators on where to send their language files, informally.
>>
>
> Or maybe on another section called "Localizations". At least for themes,
> it's possible to search for the tag "translation ready".
>
> We need to work towards a situation where the plugin developer does
>> not need to get involved for translations to happen much like we have
>> for the core of WordPress where the translation files are stored in
>> separate svn and the translators have deployment tools available.
>>
>
> Peter, I don't know about plans for a plugin/themes localizations official
> repository, and I don't know if that's the case.
>
> --
> C?tia Kitahara
>
> www.catiakitahara.com.br
> www.airuma.com.br
> www.wordpress-br.com
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>


-- 
http://scribu.net

From dan at phiffer.org  Thu Nov 19 14:02:54 2009
From: dan at phiffer.org (Dan Phiffer)
Date: Thu, 19 Nov 2009 09:02:54 -0500
Subject: [wp-hackers] Options for Controller - Views
In-Reply-To: <4B04EEDB.6070102@santosj.name>
References: <4B04EEDB.6070102@santosj.name>
Message-ID: <B678277B-A025-43E6-9D92-50D46E4541B3@phiffer.org>

Hi Jacob,

We were faced with a similar choice for a recently launched blog at MoMA.org 
. We ended up going with WordPress for CMS functions and handling the  
routing/views in our existing Ruby on Rails setup. I've released the  
plugin that allows the content to be shared: http://wordpress.org/extend/plugins/json-api/

It's already in production use here:
http://moma.org/explore/inside_out

Best,
-Dan


On Nov 19, 2009, at 2:08 AM, Jacob Santos wrote:

> For an upcoming project, I need something that doesn't suck in the  
> realm of either a content management that can easily be extended  
> without a bunch of hacks or a framework. The goal is quick  
> modification and development from A to B, meaning the least amount  
> of framework building and maintenance on my end. So I have two  
> options, either use a framework (Code Igniter) or WordPress.
>
> Assuming that I'm going with WordPress, I need an easier controller  
> to work with and a system that handles views better. Something  
> WordPress does poorly. Thus, I can think of the following options:
>
> 1. Rewrite the WP_Rewrite
>
> A full rewrite would allow for creating something that learns from  
> the "mistakes" of the current implementation with emphasis of being  
> easy to work with and allow for an view to be part of the flow. This  
> would take the most time and require the most testing. I'd say it  
> would take a week or two to complete (development and testing).
>
> 2. Modify Existing WP_Rewrite
>
> I'm not sure why it is just so convoluted to get working. I'm sure  
> that if I was able to get it working just once, that it would be  
> great, however, the views is still something that would require  
> correcting. Creating a hack around it just isn't all that clean with  
> development and I would guess that it would be better for those who  
> extend WordPress in cool and fun ways.
>
> So what do you guys think? I take issue that it requires intensive  
> training and large amount of BS before you can get the Rewrite to  
> work. On other frameworks, it simple and extremely easy to add  
> rewrite paths. Partly because this is loaded at the beginning  
> without the need to hijack Wp_Query.
>
> Jacob Santos
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers


From scribu at gmail.com  Thu Nov 19 14:24:42 2009
From: scribu at gmail.com (scribu)
Date: Thu, 19 Nov 2009 16:24:42 +0200
Subject: [wp-hackers] Options for Controller - Views
In-Reply-To: <B678277B-A025-43E6-9D92-50D46E4541B3@phiffer.org>
References: <4B04EEDB.6070102@santosj.name>
	<B678277B-A025-43E6-9D92-50D46E4541B3@phiffer.org>
Message-ID: <349fe48b0911190624t12c7e85brd9f4745481a64aa2@mail.gmail.com>

+1 on revamping the Rewrite API, or at the very least finishing it.
You shouldn't have to call various global variables to get the job
done.

On 11/19/09, Dan Phiffer <dan at phiffer.org> wrote:
> Hi Jacob,
>
> We were faced with a similar choice for a recently launched blog at MoMA.org
> . We ended up going with WordPress for CMS functions and handling the
> routing/views in our existing Ruby on Rails setup. I've released the
> plugin that allows the content to be shared:
> http://wordpress.org/extend/plugins/json-api/
>
> It's already in production use here:
> http://moma.org/explore/inside_out
>
> Best,
> -Dan
>
>
> On Nov 19, 2009, at 2:08 AM, Jacob Santos wrote:
>
>> For an upcoming project, I need something that doesn't suck in the
>> realm of either a content management that can easily be extended
>> without a bunch of hacks or a framework. The goal is quick
>> modification and development from A to B, meaning the least amount
>> of framework building and maintenance on my end. So I have two
>> options, either use a framework (Code Igniter) or WordPress.
>>
>> Assuming that I'm going with WordPress, I need an easier controller
>> to work with and a system that handles views better. Something
>> WordPress does poorly. Thus, I can think of the following options:
>>
>> 1. Rewrite the WP_Rewrite
>>
>> A full rewrite would allow for creating something that learns from
>> the "mistakes" of the current implementation with emphasis of being
>> easy to work with and allow for an view to be part of the flow. This
>> would take the most time and require the most testing. I'd say it
>> would take a week or two to complete (development and testing).
>>
>> 2. Modify Existing WP_Rewrite
>>
>> I'm not sure why it is just so convoluted to get working. I'm sure
>> that if I was able to get it working just once, that it would be
>> great, however, the views is still something that would require
>> correcting. Creating a hack around it just isn't all that clean with
>> development and I would guess that it would be better for those who
>> extend WordPress in cool and fun ways.
>>
>> So what do you guys think? I take issue that it requires intensive
>> training and large amount of BS before you can get the Rewrite to
>> work. On other frameworks, it simple and extremely easy to add
>> rewrite paths. Partly because this is loaded at the beginning
>> without the need to hijack Wp_Query.
>>
>> Jacob Santos
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>


-- 
http://scribu.net

From mikeschinkel at newclarity.net  Thu Nov 19 14:30:55 2009
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Thu, 19 Nov 2009 09:30:55 -0500
Subject: [wp-hackers] Options for Controller - Views
In-Reply-To: <349fe48b0911190624t12c7e85brd9f4745481a64aa2@mail.gmail.com>
References: <4B04EEDB.6070102@santosj.name>
	<B678277B-A025-43E6-9D92-50D46E4541B3@phiffer.org>
	<349fe48b0911190624t12c7e85brd9f4745481a64aa2@mail.gmail.com>
Message-ID: <B5FD4A37-C348-4D99-B249-EB2D31D0F050@newclarity.net>

> 1. Rewrite the WP_Rewrite

+1000.

I wrote a URL rewriting plugin that I layered on top of the current implementation. It is outrageously complicated because it had to be to work, and my gut feeling is that it is extremely fragile. URL routing should not be that difficult. 

-Mike Schinkel
WordPress Custom Plugins
http://mikeschinkel.com/custom-wordpress-plugins/

P.S. Jacob, if you are interested in my custom plugin let me know.


On Nov 19, 2009, at 9:24 AM, scribu wrote:

> +1 on revamping the Rewrite API, or at the very least finishing it.
> You shouldn't have to call various global variables to get the job
> done.
> 
> On 11/19/09, Dan Phiffer <dan at phiffer.org> wrote:
>> Hi Jacob,
>> 
>> We were faced with a similar choice for a recently launched blog at MoMA.org
>> . We ended up going with WordPress for CMS functions and handling the
>> routing/views in our existing Ruby on Rails setup. I've released the
>> plugin that allows the content to be shared:
>> http://wordpress.org/extend/plugins/json-api/
>> 
>> It's already in production use here:
>> http://moma.org/explore/inside_out
>> 
>> Best,
>> -Dan
>> 
>> 
>> On Nov 19, 2009, at 2:08 AM, Jacob Santos wrote:
>> 
>>> For an upcoming project, I need something that doesn't suck in the
>>> realm of either a content management that can easily be extended
>>> without a bunch of hacks or a framework. The goal is quick
>>> modification and development from A to B, meaning the least amount
>>> of framework building and maintenance on my end. So I have two
>>> options, either use a framework (Code Igniter) or WordPress.
>>> 
>>> Assuming that I'm going with WordPress, I need an easier controller
>>> to work with and a system that handles views better. Something
>>> WordPress does poorly. Thus, I can think of the following options:
>>> 
>>> 1. Rewrite the WP_Rewrite
>>> 
>>> A full rewrite would allow for creating something that learns from
>>> the "mistakes" of the current implementation with emphasis of being
>>> easy to work with and allow for an view to be part of the flow. This
>>> would take the most time and require the most testing. I'd say it
>>> would take a week or two to complete (development and testing).
>>> 
>>> 2. Modify Existing WP_Rewrite
>>> 
>>> I'm not sure why it is just so convoluted to get working. I'm sure
>>> that if I was able to get it working just once, that it would be
>>> great, however, the views is still something that would require
>>> correcting. Creating a hack around it just isn't all that clean with
>>> development and I would guess that it would be better for those who
>>> extend WordPress in cool and fun ways.
>>> 
>>> So what do you guys think? I take issue that it requires intensive
>>> training and large amount of BS before you can get the Rewrite to
>>> work. On other frameworks, it simple and extremely easy to add
>>> rewrite paths. Partly because this is loaded at the beginning
>>> without the need to hijack Wp_Query.
>>> 
>>> Jacob Santos
>>> _______________________________________________
>>> wp-hackers mailing list
>>> wp-hackers at lists.automattic.com
>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>> 
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>> 
> 
> 
> -- 
> http://scribu.net
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers


From mikeschinkel at newclarity.net  Thu Nov 19 15:09:21 2009
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Thu, 19 Nov 2009 10:09:21 -0500
Subject: [wp-hackers] fixed posting format for a travelogue blog
In-Reply-To: <55c794f10911190024u248d4364tc913acf1dee787c6@mail.gmail.com>
References: <55c794f10911190024u248d4364tc913acf1dee787c6@mail.gmail.com>
Message-ID: <095254AD-39B2-4352-8A19-2E65F1087648@newclarity.net>

What the others said but also look at the More Fields, PODs, Flutter plugsin along with custom page templates.

-Mike Schinkel
WordPress Custom Plugins
http://mikeschinkel.com/custom-wordpress-plugins/





On Nov 19, 2009, at 3:24 AM, aneeskA wrote:

> Hi all,
> 
> I am looking for a way to create a travelogue blog such a way that all the
> posts have the same format. Like this:
> 
> Place
> Location
> Map
> Pics
> Summary
> Major Attraction
> etc
> 
> I will fill in the necessary details and when Publish is pressed I will get
> a post in that predefined format. I googled looking for a way to do it. But
> couldn't find any. Can any one please help me?
> 
> Regards
> aneeskA
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers


From mikeschinkel at newclarity.net  Thu Nov 19 15:42:18 2009
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Thu, 19 Nov 2009 10:42:18 -0500
Subject: [wp-hackers] SEO,
	How to turn off paged comments for search 	engine crawlers?
In-Reply-To: <74a8f8d80911181012w786f7c4craec0d5cf13e82ab3@mail.gmail.com>
References: <5267E548-3A18-445D-9EDA-5F58DD4CD11F@yoast.com>
	<1C0A7857-A4B9-41A6-B6D9-719DCCD82597@newclarity.net>
	<349fe48b0911081520n446bb9bv8226b45e9c9754d4@mail.gmail.com>
	<00576DDA-6A96-42DF-8703-2F2013A8CDF7@newclarity.net>
	<74a8f8d80911181012w786f7c4craec0d5cf13e82ab3@mail.gmail.com>
Message-ID: <316B128B-5874-4A6B-8449-64E9F3CB5CFB@newclarity.net>

On Nov 18, 2009, at 1:12 PM, Dan Gayle wrote:

> Linking to a specific comment is easy. Most all comments are given
> #ids, so it's simply a matter of using a url fragment identifier like
> this:
> 
> http://example.com/post/#commentId

Sorry if I didn't explain my completely what I meant.  

Yes, I'm aware of using URL fragments on comment pages but that's not what I was looking for.  URL with fragments identifying a comment load a post with comments, not a single comment.  

I was proposing functionality that would allow each comment to be displayed by itself on a page. This would allow each comment to be separately indexed by Google and each comment would have a different profile in the search results page than it would as one tiny bit of a post with all comments.

-Mike Schinkel
WordPress Custom Plugins
http://mikeschinkel.com/custom-wordpress-plugins/


> 
> 
> On Sun, Nov 8, 2009 at 5:23 PM, Mike Schinkel
> <mikeschinkel at newclarity.net> wrote:
>> On Nov 8, 2009, at 6:20 PM, scribu wrote:
>> 
>>> Mike, I think your suggestion is already implemented by the SEO Super
>>> 
>>> Comments<http://www.prelovac.com/vladimir/wordpress-plugins/seo-super-comments>plugin.
>> 
>> Cool.
>> 
>> Be nice if the approach because a standard pattern vs. obscurely
>> implemented.  I can't tell you how many times I've wanted to link to a
>> specific comment in a tweet, for example.  Standard patterns would empower
>> many more blogs to enable that.
>> 
>> -Mike Schinkel
>> WordPress Custom Plugins
>> http://mikeschinkel.com/custom-wordpress-plugins/
>> 
>> 
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>> 
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers


From jeremib at gmail.com  Thu Nov 19 18:14:26 2009
From: jeremib at gmail.com (Jeremi Bergman)
Date: Thu, 19 Nov 2009 13:14:26 -0500
Subject: [wp-hackers] Page Hierarchy
Message-ID: <f38206c90911191014g1342f356me7385698b9d06df4@mail.gmail.com>

Does anyone know of any code snippet that already exists that will give me
either an multi dimensional array, or a ul of all pages and their page
hierarchy?

Thanks

From otto at ottodestruct.com  Thu Nov 19 18:36:42 2009
From: otto at ottodestruct.com (Otto)
Date: Thu, 19 Nov 2009 12:36:42 -0600
Subject: [wp-hackers] Page Hierarchy
In-Reply-To: <f38206c90911191014g1342f356me7385698b9d06df4@mail.gmail.com>
References: <f38206c90911191014g1342f356me7385698b9d06df4@mail.gmail.com>
Message-ID: <161617690911191036j3e2d5f65k5c06df7d9b57d1f9@mail.gmail.com>

get_pages gives you an array of the pages. It's not tree-like, but you
can create a custom Walker for it, if you want to make it tree like.

wp_list_pages does just what you asked for, outputs a unordered list.
It can do a tree like list, if you like.


-Otto
Sent from Memphis, TN, United States


On Thu, Nov 19, 2009 at 12:14 PM, Jeremi Bergman <jeremib at gmail.com> wrote:
> Does anyone know of any code snippet that already exists that will give me
> either an multi dimensional array, or a ul of all pages and their page
> hierarchy?
>
> Thanks
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From jeremib at gmail.com  Thu Nov 19 18:44:36 2009
From: jeremib at gmail.com (Jeremi Bergman)
Date: Thu, 19 Nov 2009 13:44:36 -0500
Subject: [wp-hackers] Page Hierarchy
In-Reply-To: <161617690911191036j3e2d5f65k5c06df7d9b57d1f9@mail.gmail.com>
References: <f38206c90911191014g1342f356me7385698b9d06df4@mail.gmail.com> 
	<161617690911191036j3e2d5f65k5c06df7d9b57d1f9@mail.gmail.com>
Message-ID: <f38206c90911191044p2c1218e6tc52cdb2ab7e4932a@mail.gmail.com>

Thanks, that's perfect.

Jeremi Bergman
865-622-7134


On Thu, Nov 19, 2009 at 1:36 PM, Otto <otto at ottodestruct.com> wrote:

> get_pages gives you an array of the pages. It's not tree-like, but you
> can create a custom Walker for it, if you want to make it tree like.
>
> wp_list_pages does just what you asked for, outputs a unordered list.
> It can do a tree like list, if you like.
>
>
> -Otto
> Sent from Memphis, TN, United States
>
>
> On Thu, Nov 19, 2009 at 12:14 PM, Jeremi Bergman <jeremib at gmail.com>
> wrote:
> > Does anyone know of any code snippet that already exists that will give
> me
> > either an multi dimensional array, or a ul of all pages and their page
> > hierarchy?
> >
> > Thanks
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers at lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> >
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From matt at mattjacob.com  Thu Nov 19 18:46:49 2009
From: matt at mattjacob.com (Matt Jacob)
Date: Thu, 19 Nov 2009 11:46:49 -0700
Subject: [wp-hackers] Options for Controller - Views
In-Reply-To: <4B04EEDB.6070102@santosj.name>
References: <4B04EEDB.6070102@santosj.name>
Message-ID: <410963320911191046t30e1c9fdkeda9acfc16a73fb4@mail.gmail.com>

On Thu, Nov 19, 2009 at 12:08 AM, Jacob Santos <wordpress at santosj.name> wrote:
> 1. Rewrite the WP_Rewrite

+1.

This seems to be a point of much confusion and much contention among
plugin developers (see my post from about a week or two ago).

Matt

From wordpress at santosj.name  Thu Nov 19 19:25:28 2009
From: wordpress at santosj.name (Jacob Santos)
Date: Thu, 19 Nov 2009 13:25:28 -0600
Subject: [wp-hackers] WP_Http File Upload
Message-ID: <4B059BA8.8030800@santosj.name>

Actually, I think I can just add a method to WP_Http class for adding 
files with optional mime type parameter. Since the header code will be 
the same for the Streams transport, I'm thinking of just creating a new 
class which handles it for both. The cURL and HTTP Extension transports 
will use the built-in functionality, since it will be stable, less prone 
to bugs and won't require maintenance like the multipart class will in 
the future.

I'm thinking this will require two to three hours of work with an hour 
of testing and maybe another hour for debugging. I'll have to make sure 
I devote the time Saturday, because this would be very useful for my own 
purposes. I've been trying to figure out how to do this myself and it 
actually doesn't seem to be difficult. I should of just looked at the 
standard.


Jacob Santos

[1] I mean it would be like waking up after a wild night of partying to 
find yourself laying next to a fat lady with a poop sack and boils on 
her face.

From otto at ottodestruct.com  Thu Nov 19 19:41:04 2009
From: otto at ottodestruct.com (Otto)
Date: Thu, 19 Nov 2009 13:41:04 -0600
Subject: [wp-hackers] Options for Controller - Views
In-Reply-To: <349fe48b0911190624t12c7e85brd9f4745481a64aa2@mail.gmail.com>
References: <4B04EEDB.6070102@santosj.name>
	<B678277B-A025-43E6-9D92-50D46E4541B3@phiffer.org> 
	<349fe48b0911190624t12c7e85brd9f4745481a64aa2@mail.gmail.com>
Message-ID: <161617690911191141j7ed5c23dqfcba580d102e3de4@mail.gmail.com>

Can somebody explain what the issue is here, to me?

All I've ever done to mess with rewrite rules is to call the
add_rewrite_rule function on an init hook. If I wanted to do whole
custom pages based on that, I'd probably use template_redirect for it.

I've never seen any need to mess with global variables. What are you
trying to do, exactly?

-Otto



On Thu, Nov 19, 2009 at 8:24 AM, scribu <scribu at gmail.com> wrote:
> +1 on revamping the Rewrite API, or at the very least finishing it.
> You shouldn't have to call various global variables to get the job
> done.

From mark at watero.us  Thu Nov 19 20:28:14 2009
From: mark at watero.us (mark waterous)
Date: Thu, 19 Nov 2009 12:28:14 -0800
Subject: [wp-hackers] Plugin activation/deactivation and testing?
In-Reply-To: <ca7320070911182318y53efa04ybd24f02476e68aac@mail.gmail.com>
References: <ca7320070911181422p3b393a1eo1cbcf041c67a7de8@mail.gmail.com>	<4B04EAB4.10006@santosj.name>
	<ca7320070911182318y53efa04ybd24f02476e68aac@mail.gmail.com>
Message-ID: <006701ca6956$d3b10c60$7b132520$@us>

I have a couple of 'newbie' questions I'm hoping might someone here could
help me clarify; I've attempted to search the Codex and Google thoroughly
before asking, and while I've found tentative answers, they don't completely
clear up the situation for me.

1) According to the Codex, register_activation_hook and
register_deactivation_hook should only be called once during the lifetime of
an installed plugin. Is this *completely* accurate?

The reason I ask, despite the Codex saying so, is twofold; the first reason
is that I've been dissecting some of my favorite plugins while trying to
improve the upgrade process I'm using in my own, and it looks like a few of
them are relying on their activation hook to complete necessary upgrades, ie
database changes or options updates. They don't appear to have any specific
version checks outside of the activation hooks that would call it directly,
yet they have specifically named upgrade methods running inside of it. I'm
assuming this is to provide for people who deactivate their plugins before
activating a new version, but it's gotten me to wonder 'what if'...

The second reason is that I've had some reports of data loss when upgrading
my plugin, and the only possible cause I've been able to track down is the
fact that I have a deactivation hook which does cleanup on uninstall and
removes the additional db tables and options. One of two things is most
likely happening and I haven't gotten a clear answer from the bug reports;
either they're deactivating the plugin manually, in which case I think I'm
going to move the uninstall feature to the options page and remove my
deactivation hook, or the deactivation hook is being called at some stage of
the upgrade process and wiping the data clean before reactivating the latest
version.

This is 'what if' #2 spurred on by another developer suggesting that they
thought during the automatic upgrade of a plugin, Wordpress was deactivating
the old before activating the new, instead of just laying it in over top
(such as if you were to ftp the new version).

 
2) When releasing a new plugin, is there any way to mimic an automatic
upgrade to see how it will affect users blogs before actually tagging the
new release? (aka, do you have any suggestions for helping me to improve my
testing process before releasing a new plugin into the wild?)

This may seem like a stupid question, but I'm asking it anyways - I try and
test as much as I can, throwing different possible scenarios at my plugin,
running with WP_DEBUG on and so forth, but all my testing includes direct
editing of my files on my sandbox. I've even begun a routine where by before
I release a new version of the plugin, I install an old version, activate
it, upload a newer, activate it, and upload the latest, and make sure
nothing breaks along the way. Nevertheless I'm worried that this isn't
enough, and I would like to be able to test it from every possible angle,
such as what would happen during an automatic upgrade, before releasing the
next version.

My plugin is still technically in beta, but by the time I get it to a stable
version 1.0 release I would like to have a rock solid testing routine to
make sure that when I tag a new version, I'm not going to bring anybodies
site down. Any past experience or blogs I could read and research on the
subject would be greatly appreciated!

--
Mark Waterous
http://mark.watero.us/
(mark at watero.us) 


From beau at dentedreality.com.au  Thu Nov 19 20:50:31 2009
From: beau at dentedreality.com.au (Beau Lebens)
Date: Thu, 19 Nov 2009 12:50:31 -0800
Subject: [wp-hackers] Plugins and themes localization
In-Reply-To: <349fe48b0911190525i40125a87u106919df4ef5fda@mail.gmail.com>
References: <9e03f6490911171016k47df34b1qa1d3a741847b22e5@mail.gmail.com> 
	<9e03f6490911190508h12ffc2aub949deabd6fc7121@mail.gmail.com> 
	<349fe48b0911190525i40125a87u106919df4ef5fda@mail.gmail.com>
Message-ID: <902424490911191250q5fceef58ve285fd2b576cd073@mail.gmail.com>

>>> I'd suggest simply indicating if it is internationalized or not, and
>>> on downloading you'd see which translations are available at that
>>> particular moment.

<pie_in_the_sky_mode>

Another option would be that we could just detect if a plugin is
internationalized (check for a call to load_plugin_textdomain), and
allow the community to upload MO files "against" a plugin, and list
them there for download (perhaps with ratings).

We would also provide an option for any user to download a PO file,
generated against a specific version (as per the link that's available
to the author ATM), pre-filled with the Plurals value for the language
they select, since that's a nightmare otherwise it seems. They'd
translate (or ideally, use something like GlotPress, so this all
stayed online and was much less confusing), then save the MO and it
goes into the pool of available translations.

</pie_in_the_sky_mode>

From wordpress at dd32.id.au  Thu Nov 19 21:09:56 2009
From: wordpress at dd32.id.au (Dion Hulse (dd32))
Date: Fri, 20 Nov 2009 08:09:56 +1100
Subject: [wp-hackers] Plugin activation/deactivation and testing?
In-Reply-To: <006701ca6956$d3b10c60$7b132520$@us>
References: <ca7320070911181422p3b393a1eo1cbcf041c67a7de8@mail.gmail.com>
	<4B04EAB4.10006@santosj.name>
	<ca7320070911182318y53efa04ybd24f02476e68aac@mail.gmail.com>
	<006701ca6956$d3b10c60$7b132520$@us>
Message-ID: <op.u3nueqysspxmuu@dd32>

Long post.. But i'll fill you in:

Upon plugin upgrade the process is:
  * Fetch download
  * Extract into temp table
  * Deacivate plugin (Note, Hoooks are NOT called at this deactivation. In  
bulk upgrade in 2.9, he blog goes into maintainence mode insead)
  * Current plugin's folder is deleted
  * New files are moved into its place
  * Plugin is reactivated, activation hooks ARE called at this point.

The activation hook should be used to create tables/defaults if they are  
not already set. You may want to change your deactivation hook to ask for  
confirmation before removing all the data.. Alternativly, You can have a  
look at the plugin uninstall hooks which are run on plugin DELETE, So  
users can deactivate your plugin, yet keep the settings until they decide  
to delete it through the admin interface.

Thats just on the upgrade proceedure.. I'd like to hear what others have  
to say about the rest of your items tho.

On Fri, 20 Nov 2009 07:28:14 +1100, mark waterous <mark at watero.us> wrote:

> 1) According to the Codex, register_activation_hook and
> register_deactivation_hook should only be called once during the  
> lifetime of
> an installed plugin. Is this *completely* accurate?
>
> The reason I ask, despite the Codex saying so, is twofold; the first  
> reason
> is that I've been dissecting some of my favorite plugins while trying to
> improve the upgrade process I'm using in my own, and it looks like a few  
> of
> them are relying on their activation hook to complete necessary  
> upgrades, ie
> database changes or options updates. They don't appear to have any  
> specific
> version checks outside of the activation hooks that would call it  
> directly,
> yet they have specifically named upgrade methods running inside of it.  
> I'm
> assuming this is to provide for people who deactivate their plugins  
> before
> activating a new version, but it's gotten me to wonder 'what if'...
>
> The second reason is that I've had some reports of data loss when  
> upgrading
> my plugin, and the only possible cause I've been able to track down is  
> the
> fact that I have a deactivation hook which does cleanup on uninstall and
> removes the additional db tables and options. One of two things is most
> likely happening and I haven't gotten a clear answer from the bug  
> reports;
> either they're deactivating the plugin manually, in which case I think  
> I'm
> going to move the uninstall feature to the options page and remove my
> deactivation hook, or the deactivation hook is being called at some  
> stage of
> the upgrade process and wiping the data clean before reactivating the  
> latest
> version.
-- 
Using Opera's revolutionary e-mail client: http://www.opera.com/mail/

From wordpress at dd32.id.au  Thu Nov 19 21:12:14 2009
From: wordpress at dd32.id.au (Dion Hulse (dd32))
Date: Fri, 20 Nov 2009 08:12:14 +1100
Subject: [wp-hackers] Options for Controller - Views
In-Reply-To: <161617690911191141j7ed5c23dqfcba580d102e3de4@mail.gmail.com>
References: <4B04EEDB.6070102@santosj.name>
	<B678277B-A025-43E6-9D92-50D46E4541B3@phiffer.org>
	<349fe48b0911190624t12c7e85brd9f4745481a64aa2@mail.gmail.com>
	<161617690911191141j7ed5c23dqfcba580d102e3de4@mail.gmail.com>
Message-ID: <op.u3nuiom5spxmuu@dd32>

I was thinking the same thing Otto.

Adding a rule is easy. If you want complex selection based off it, Its not  
too hard to add extra query vars, set them via the rule, And if thats not  
enough, hook in to parse_request to change the query vars further..

I'd like to see some examples of what is NOT possible currently...

On Fri, 20 Nov 2009 06:41:04 +1100, Otto <otto at ottodestruct.com> wrote:

> Can somebody explain what the issue is here, to me?
>
> All I've ever done to mess with rewrite rules is to call the
> add_rewrite_rule function on an init hook. If I wanted to do whole
> custom pages based on that, I'd probably use template_redirect for it.
>
> I've never seen any need to mess with global variables. What are you
> trying to do, exactly?
>
> -Otto
>
>
>
> On Thu, Nov 19, 2009 at 8:24 AM, scribu <scribu at gmail.com> wrote:
>> +1 on revamping the Rewrite API, or at the very least finishing it.
>> You shouldn't have to call various global variables to get the job
>> done.
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>


-- 
Using Opera's revolutionary e-mail client: http://www.opera.com/mail/

From mirepup at gmail.com  Thu Nov 19 21:41:36 2009
From: mirepup at gmail.com (Jeff Rose)
Date: Thu, 19 Nov 2009 13:41:36 -0800
Subject: [wp-hackers] Update post status
Message-ID: <b825b2cd0911191341g56b57e9cle0c95513d8f85642@mail.gmail.com>

I'm a relative newbie developer and my latest plugin needs to
programatically change the status of a post and I'm wondering the proper
steps to doing this.

This would be going from a DRAFT status to either a FUTURE or PUBLISHED
status depending on the chosen option.

Any advice is appreciated.

http://www.jeffrose.ca/twitter

From mark at watero.us  Thu Nov 19 21:52:09 2009
From: mark at watero.us (mark waterous)
Date: Thu, 19 Nov 2009 13:52:09 -0800
Subject: [wp-hackers] Plugin activation/deactivation and testing?
In-Reply-To: <op.u3nueqysspxmuu@dd32>
References: <ca7320070911181422p3b393a1eo1cbcf041c67a7de8@mail.gmail.com>	<4B04EAB4.10006@santosj.name>	<ca7320070911182318y53efa04ybd24f02476e68aac@mail.gmail.com>	<006701ca6956$d3b10c60$7b132520$@us>
	<op.u3nueqysspxmuu@dd32>
Message-ID: <006b01ca6962$8bcdeb00$a369c100$@us>

> Long post.. But i'll fill you in:

I apologize for the long post, I just wanted to make sure I was being
thorough and explaining the reason behind questioning the Codex.


> The activation hook should be used to create tables/defaults if they
> are not already set. You may want to change your deactivation hook to ask
> for confirmation before removing all the data.. Alternativly, You can have
> a look at the plugin uninstall hooks which are run on plugin DELETE, So
> users can deactivate your plugin, yet keep the settings until they
> decide to delete it through the admin interface.


When asking for confirmation during the deactivation am I able to just halt
the process by outputting a form/HTML inside the deactivation hook, or would
I have to implement such a confirmation via Javascript or otherwise? 

I appreciate the information on how that process works. I believe I'm going
to have to rethink my whole upgrade schema to try and take advantage of this
fact while still accommodating those people who are hands on about it.

--
Mark Waterous
http://mark.watero.us/
(mark at watero.us) 



From russgilbert at gmail.com  Thu Nov 19 21:52:18 2009
From: russgilbert at gmail.com (Russ Gilbert)
Date: Thu, 19 Nov 2009 13:52:18 -0800
Subject: [wp-hackers] Update post status
In-Reply-To: <b825b2cd0911191341g56b57e9cle0c95513d8f85642@mail.gmail.com>
References: <b825b2cd0911191341g56b57e9cle0c95513d8f85642@mail.gmail.com>
Message-ID: <145901ca6962$930cc6c0$b9265440$@com>

I'm fairly new myself, but just had to tackle that same task this week.

http://codex.wordpress.org/Function_Reference is your friend.

The function in question is:

http://codex.wordpress.org/Function_Reference/wp_update_post

(works on both posts and pages)



-----Original Message-----
From: wp-hackers-bounces at lists.automattic.com
[mailto:wp-hackers-bounces at lists.automattic.com] On Behalf Of Jeff Rose
Sent: Thursday, November 19, 2009 1:42 PM
To: wp-hackers at lists.automattic.com
Subject: [wp-hackers] Update post status

I'm a relative newbie developer and my latest plugin needs to
programatically change the status of a post and I'm wondering the proper
steps to doing this.

This would be going from a DRAFT status to either a FUTURE or PUBLISHED
status depending on the chosen option.

Any advice is appreciated.

http://www.jeffrose.ca/twitter
_______________________________________________
wp-hackers mailing list
wp-hackers at lists.automattic.com
http://lists.automattic.com/mailman/listinfo/wp-hackers


From scribu at gmail.com  Thu Nov 19 21:59:10 2009
From: scribu at gmail.com (scribu)
Date: Thu, 19 Nov 2009 23:59:10 +0200
Subject: [wp-hackers] Plugins and themes localization
In-Reply-To: <902424490911191250q5fceef58ve285fd2b576cd073@mail.gmail.com>
References: <9e03f6490911171016k47df34b1qa1d3a741847b22e5@mail.gmail.com>
	<9e03f6490911190508h12ffc2aub949deabd6fc7121@mail.gmail.com>
	<349fe48b0911190525i40125a87u106919df4ef5fda@mail.gmail.com>
	<902424490911191250q5fceef58ve285fd2b576cd073@mail.gmail.com>
Message-ID: <349fe48b0911191359i6f619ee3qca5d94d782b6ed8e@mail.gmail.com>

That's largely what GlotPress will be for!


On 11/19/09, Beau Lebens <beau at dentedreality.com.au> wrote:
>
> >>> I'd suggest simply indicating if it is internationalized or not, and
> >>> on downloading you'd see which translations are available at that
> >>> particular moment.
>
>
> <pie_in_the_sky_mode>
>
> Another option would be that we could just detect if a plugin is
> internationalized (check for a call to load_plugin_textdomain), and
> allow the community to upload MO files "against" a plugin, and list
> them there for download (perhaps with ratings).
>
> We would also provide an option for any user to download a PO file,
> generated against a specific version (as per the link that's available
> to the author ATM), pre-filled with the Plurals value for the language
> they select, since that's a nightmare otherwise it seems. They'd
> translate (or ideally, use something like GlotPress, so this all
> stayed online and was much less confusing), then save the MO and it
> goes into the pool of available translations.
>
> </pie_in_the_sky_mode>
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>



-- 
http://scribu.net

From emmensetech at gmail.com  Thu Nov 19 22:31:47 2009
From: emmensetech at gmail.com (Aaron Brazell)
Date: Thu, 19 Nov 2009 17:31:47 -0500
Subject: [wp-hackers] WP_Http File Upload
In-Reply-To: <4B059BA8.8030800@santosj.name>
References: <4B059BA8.8030800@santosj.name>
Message-ID: <ca7320070911191431n262a9f4cga7230d640dcb6426@mail.gmail.com>

Alright well if you want to pass me code (so I don't have to wait for WP to
actually implent it for something that it isn't used for in core), I'd be
much obliged. You grok this stuff better than I do (HTTP
protocols/headers/transport). :)

Aaron Brazell
CEO, Emmense Technologies
Lead Editor, Technosailor.com
Author, The WordPress Bible

e: aaron at technosailor.com
b: http://technosailor.com
t: http://twitter.com/technosailor
p: 443-455-1056Aaron Brazell
web:: www.technosailor.com
phone:: 410-608-6620
skype:: technosailor
twitter:: @technosailor


On Thu, Nov 19, 2009 at 2:25 PM, Jacob Santos <wordpress at santosj.name>wrote:

> Actually, I think I can just add a method to WP_Http class for adding files
> with optional mime type parameter. Since the header code will be the same
> for the Streams transport, I'm thinking of just creating a new class which
> handles it for both. The cURL and HTTP Extension transports will use the
> built-in functionality, since it will be stable, less prone to bugs and
> won't require maintenance like the multipart class will in the future.
>
> I'm thinking this will require two to three hours of work with an hour of
> testing and maybe another hour for debugging. I'll have to make sure I
> devote the time Saturday, because this would be very useful for my own
> purposes. I've been trying to figure out how to do this myself and it
> actually doesn't seem to be difficult. I should of just looked at the
> standard.
>
>
> Jacob Santos
>
> [1] I mean it would be like waking up after a wild night of partying to
> find yourself laying next to a fat lady with a poop sack and boils on her
> face.
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From scribu at gmail.com  Thu Nov 19 22:40:53 2009
From: scribu at gmail.com (scribu)
Date: Fri, 20 Nov 2009 00:40:53 +0200
Subject: [wp-hackers] Plugin activation/deactivation and testing?
In-Reply-To: <006b01ca6962$8bcdeb00$a369c100$@us>
References: <ca7320070911181422p3b393a1eo1cbcf041c67a7de8@mail.gmail.com>
	<4B04EAB4.10006@santosj.name>
	<ca7320070911182318y53efa04ybd24f02476e68aac@mail.gmail.com>
	<006701ca6956$d3b10c60$7b132520$@us> <op.u3nueqysspxmuu@dd32>
	<006b01ca6962$8bcdeb00$a369c100$@us>
Message-ID: <349fe48b0911191440of92015eg32bce530c35896d9@mail.gmail.com>

There is also:

register_uninstall_hook();

This is when you should remove all data introduced by your plugin, without
confirmation.

If it wasn't mentioned in the Codex, you should add it.

-- 
http://scribu.net

From jeremib at gmail.com  Fri Nov 20 01:38:43 2009
From: jeremib at gmail.com (Jeremi Bergman)
Date: Thu, 19 Nov 2009 20:38:43 -0500
Subject: [wp-hackers] WP as a CMS with a touch of Blogging
Message-ID: <f38206c90911191738s29b2c546w95315ae06053864b@mail.gmail.com>

So I'm using WP mainly as a CMS, utilizing more of the pages functionality
than the blog posts.  I have created my page hierarchy and have a menu
automatically built off the top 2 levels of the pages using wp_list_pages.
I have a bit of a problem though.

Let's say my Page hierarchy is as so


   1. Item 1
   2. Item 2
      1. Item 2.1
      2. Item 2.2
      3. Item 2.3
   3. Item 3

The problem comes in when what I want menu item 2.1 to be is actually a link
a blog category.

So is there anyway to include blog posts in a page, or maybe just have that
redirect to the correct category of posts.

Thanks.

Jeremi Bergman
865-622-7134
Sent from Knoxville, TN, United States

From leogermani at gmail.com  Fri Nov 20 02:09:26 2009
From: leogermani at gmail.com (Leo germani)
Date: Fri, 20 Nov 2009 00:09:26 -0200
Subject: [wp-hackers] WP as a CMS with a touch of Blogging
In-Reply-To: <f38206c90911191738s29b2c546w95315ae06053864b@mail.gmail.com>
References: <f38206c90911191738s29b2c546w95315ae06053864b@mail.gmail.com>
Message-ID: <32c7967e0911191809g46a0d2a2jdfa4cd33c6ae005f@mail.gmail.com>

two quick options

option 1 - in settings > reading, choose a page that will display your blog
posts'

option 2 - create a page template and make a custom query_posts() and loop

Leo,,

On Thu, Nov 19, 2009 at 11:38 PM, Jeremi Bergman <jeremib at gmail.com> wrote:

> So I'm using WP mainly as a CMS, utilizing more of the pages functionality
> than the blog posts.  I have created my page hierarchy and have a menu
> automatically built off the top 2 levels of the pages using wp_list_pages.
> I have a bit of a problem though.
>
> Let's say my Page hierarchy is as so
>
>
>   1. Item 1
>   2. Item 2
>      1. Item 2.1
>      2. Item 2.2
>      3. Item 2.3
>   3. Item 3
>
> The problem comes in when what I want menu item 2.1 to be is actually a
> link
> a blog category.
>
> So is there anyway to include blog posts in a page, or maybe just have that
> redirect to the correct category of posts.
>
> Thanks.
>
> Jeremi Bergman
> 865-622-7134
> Sent from Knoxville, TN, United States
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>



-- 
leogermani.pirex.com.br
leogermani.estudiolivre.org

From elrabino at gmail.com  Fri Nov 20 02:24:52 2009
From: elrabino at gmail.com (Daniel Dvorkin)
Date: Fri, 20 Nov 2009 00:24:52 -0200
Subject: [wp-hackers] WP as a CMS with a touch of Blogging
In-Reply-To: <32c7967e0911191809g46a0d2a2jdfa4cd33c6ae005f@mail.gmail.com>
References: <f38206c90911191738s29b2c546w95315ae06053864b@mail.gmail.com> 
	<32c7967e0911191809g46a0d2a2jdfa4cd33c6ae005f@mail.gmail.com>
Message-ID: <f5aa06cf0911191824l375ef1e4idfcef23f43ce0dc8@mail.gmail.com>

Or hack the wp_list_pages results to insert a link to the category.

http://sivel.net/2009/03/adding-links-to-wp_list_pages-part-2/

From n2fisher at gmail.com  Fri Nov 20 02:49:44 2009
From: n2fisher at gmail.com (Norm Fisher)
Date: Thu, 19 Nov 2009 20:49:44 -0600
Subject: [wp-hackers] Plugin activation/deactivation and testing?
In-Reply-To: <006701ca6956$d3b10c60$7b132520$@us>
References: <ca7320070911181422p3b393a1eo1cbcf041c67a7de8@mail.gmail.com>
	<4B04EAB4.10006@santosj.name>
	<ca7320070911182318y53efa04ybd24f02476e68aac@mail.gmail.com>
	<006701ca6956$d3b10c60$7b132520$@us>
Message-ID: <5efa3e3a0911191849n1e6ac0bcgadbb8dbf35f62a82@mail.gmail.com>

Just a quick comment .. one very common recommendation on the forums
when people have problems upgrading is to deactivate all plugins, try
the automatic upgrade, then re-activate the plugins.

Therefore the deactivation hook should not destroy any tables ..



On Thu, Nov 19, 2009 at 2:28 PM, mark waterous <mark at watero.us> wrote:
> I have a couple of 'newbie' questions I'm hoping might someone here could
> help me clarify; I've attempted to search the Codex and Google thoroughly
> before asking, and while I've found tentative answers, they don't completely
> clear up the situation for me.
>
> 1) According to the Codex, register_activation_hook and
> register_deactivation_hook should only be called once during the lifetime of
> an installed plugin. Is this *completely* accurate?

From wordpress at santosj.name  Fri Nov 20 03:06:27 2009
From: wordpress at santosj.name (Jacob Santos)
Date: Thu, 19 Nov 2009 21:06:27 -0600
Subject: [wp-hackers] Options for Controller - Views
In-Reply-To: <161617690911191141j7ed5c23dqfcba580d102e3de4@mail.gmail.com>
References: <4B04EEDB.6070102@santosj.name>	<B678277B-A025-43E6-9D92-50D46E4541B3@phiffer.org>
	<349fe48b0911190624t12c7e85brd9f4745481a64aa2@mail.gmail.com>
	<161617690911191141j7ed5c23dqfcba580d102e3de4@mail.gmail.com>
Message-ID: <4B0607B3.5010606@santosj.name>

Using template_redirect is a dirty hack and I can get by not using 
add_rewrite_rule function completely with a few other hacks. The point 
of MVC is to easily extend the base with a defined flow path. Right now 
it is like a maze with many paths leading to dead ends. If I can get by 
with rewriting the controller and view handling to prevent having to 
hack it together like it is now, I could use it to cleanly create 
something with the WordPress API.

In fact, I could do without the whole "blog" portion and use the Plugin 
API and other parts, like the administration to create something 
completely different using WordPress as the base. As it stands now, it 
would require a great deal of hacking and I could never really remove 
the portions of WordPress that makes WordPress, well WordPress. If that 
is the case, then I'm better off starting from a framework that actually 
implements MVC properly and without all of the WTF?s that exist within 
WordPress.

I'll rather not have to create a hack. The function is a good one and 
could be used. I think it would be better to extend it to call a hook or 
a class which will create the view. If you can easily redirect the flow 
to your function, method or class without relying on init hook, then you 
can unhook the current blog pages or whatever.

Also, it has to be easy, so if someone wants to extend what I created, 
they can do so without having to kick their own ass trying to figure it 
out. Do you know how long it takes to learn Zend Framework, Code 
Igniter, etc? An hour and it is pretty straight forward with all of the 
examples and that is also with working development. I spent 4 hours 
trying to use WP_Rewrite and after feeling like an idiot and cursing the 
name of the person who created such a monstrosity, I gave up and used 
the template_redirect route. To find that I have to use it anyway isn't 
all that appealing.

Usually, I try not to compound a dirty hack with more dirty hacks. You 
should be able to do this with two functions, the one you call to call 
your function and your function that is run. The mod_rewrite creator 
code can be broken into its own component class.

I think the last time I tried this I attempted to work WP_Query in the 
project as well as it was far too much rewriting. The goal should be to 
get closer to an simpler MVC implementation.

Jacob Santos



Otto wrote:
> Can somebody explain what the issue is here, to me?
>
> All I've ever done to mess with rewrite rules is to call the
> add_rewrite_rule function on an init hook. If I wanted to do whole
> custom pages based on that, I'd probably use template_redirect for it.
>
> I've never seen any need to mess with global variables. What are you
> trying to do, exactly?
>
> -Otto
>
>
>
> On Thu, Nov 19, 2009 at 8:24 AM, scribu <scribu at gmail.com> wrote:
>   
>> +1 on revamping the Rewrite API, or at the very least finishing it.
>> You shouldn't have to call various global variables to get the job
>> done.
>>     
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>   

From gigalinux at gmail.com  Fri Nov 20 03:10:00 2009
From: gigalinux at gmail.com (Dennis Morhardt)
Date: Fri, 20 Nov 2009 04:10:00 +0100
Subject: [wp-hackers] Options for Controller - Views
In-Reply-To: <4B0607B3.5010606@santosj.name>
References: <4B04EEDB.6070102@santosj.name>
	<B678277B-A025-43E6-9D92-50D46E4541B3@phiffer.org> 
	<349fe48b0911190624t12c7e85brd9f4745481a64aa2@mail.gmail.com> 
	<161617690911191141j7ed5c23dqfcba580d102e3de4@mail.gmail.com> 
	<4B0607B3.5010606@santosj.name>
Message-ID: <5d70d5290911191910n6cd6e26bvff710f0177def550@mail.gmail.com>

For WordPress 3.0:
http://trac.glotpress.org/browser/trunk/gp-includes/routes.php

That would be perfect.

From mark at watero.us  Fri Nov 20 03:49:09 2009
From: mark at watero.us (mark waterous)
Date: Thu, 19 Nov 2009 19:49:09 -0800
Subject: [wp-hackers] Plugin activation/deactivation and testing?
In-Reply-To: <5efa3e3a0911191849n1e6ac0bcgadbb8dbf35f62a82@mail.gmail.com>
References: <ca7320070911181422p3b393a1eo1cbcf041c67a7de8@mail.gmail.com>	<4B04EAB4.10006@santosj.name>	<ca7320070911182318y53efa04ybd24f02476e68aac@mail.gmail.com>	<006701ca6956$d3b10c60$7b132520$@us>
	<5efa3e3a0911191849n1e6ac0bcgadbb8dbf35f62a82@mail.gmail.com>
Message-ID: <007901ca6994$6afd1e50$40f75af0$@us>

> Just a quick comment .. one very common recommendation on the forums
> when people have problems upgrading is to deactivate all plugins, try
> the automatic upgrade, then re-activate the plugins.
> 
> Therefore the deactivation hook should not destroy any tables ..

That didn't even cross my mind! I think it would be best if I removed my
deactivation hook immediately in favor of register_uninstall_hook as scribu
suggested, along with making it a prominent feature on the options page,
part of the readme... at least then if some people wind up with remnants, I
can say I tried. ;)

--
Mark Waterous
http://mark.watero.us/
(mark at watero.us) 



From wordpress at santosj.name  Fri Nov 20 04:06:48 2009
From: wordpress at santosj.name (Jacob Santos)
Date: Thu, 19 Nov 2009 22:06:48 -0600
Subject: [wp-hackers] Options for Controller - Views
In-Reply-To: <5d70d5290911191910n6cd6e26bvff710f0177def550@mail.gmail.com>
References: <4B04EEDB.6070102@santosj.name>	<B678277B-A025-43E6-9D92-50D46E4541B3@phiffer.org>
	<349fe48b0911190624t12c7e85brd9f4745481a64aa2@mail.gmail.com>
	<161617690911191141j7ed5c23dqfcba580d102e3de4@mail.gmail.com>
	<4B0607B3.5010606@santosj.name>
	<5d70d5290911191910n6cd6e26bvff710f0177def550@mail.gmail.com>
Message-ID: <4B0615D8.7030900@santosj.name>

Yeah, no.

The router is a little too specific to the project. The code for 
WordPress would have to be a little bit more flexible with its routes. 
Also it doesn't implement a URI component capable of pulling out the 
three URL paths. Also, my code would be fully documented. I mean, there 
are MVC tiny enough to implement three classes that fully implements the 
controller component.

Mine will also have candy as part of it. It will be super sweet.

Jacob Santos

Dennis Morhardt wrote:
> For WordPress 3.0:
> http://trac.glotpress.org/browser/trunk/gp-includes/routes.php
>
> That would be perfect.
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>   

From zamoose at gmail.com  Fri Nov 20 05:28:51 2009
From: zamoose at gmail.com (Doug Stewart)
Date: Fri, 20 Nov 2009 00:28:51 -0500
Subject: [wp-hackers] Options for Controller - Views
In-Reply-To: <4B0615D8.7030900@santosj.name>
References: <4B04EEDB.6070102@santosj.name>
	<B678277B-A025-43E6-9D92-50D46E4541B3@phiffer.org> 
	<349fe48b0911190624t12c7e85brd9f4745481a64aa2@mail.gmail.com> 
	<161617690911191141j7ed5c23dqfcba580d102e3de4@mail.gmail.com> 
	<4B0607B3.5010606@santosj.name>
	<5d70d5290911191910n6cd6e26bvff710f0177def550@mail.gmail.com> 
	<4B0615D8.7030900@santosj.name>
Message-ID: <71ddd7490911192128i2ff2e0fwae3faa79906899d0@mail.gmail.com>

On Thu, Nov 19, 2009 at 11:06 PM, Jacob Santos <wordpress at santosj.name>wrote:

>
> Mine will also have candy as part of it. It will be super sweet.
>
>
Beer, or it fails a voice vote.  Scotch is acceptable too...

If you have beer or Scotch candy -- double bonus!  *grin*

-- 
-Doug
@zamoose
http://literalbarrage.org/blog/

From frank at bueltge.de  Fri Nov 20 08:25:07 2009
From: frank at bueltge.de (Frank Bueltge)
Date: Fri, 20 Nov 2009 09:25:07 +0100
Subject: [wp-hackers] Multilanguage Support in 2.9rare
Message-ID: <db047a770911200025s323e5eb0lb7e9c0c22d7466ea@mail.gmail.com>

Hello,

with the last update before 2 days and today on the nightly build it
is not possiblt to use a other language. Do you have an idea?
I have install the language-folder in wp-content with the
languages-files (de_DE) and have also set the constant in the
wp-config.php

Also, all plugins dosnt work with other language. The same problem is
on my dev-area on local machine.

Thanks for your help.
Best wishes

From jordi at jcanals.cat  Fri Nov 20 12:50:36 2009
From: jordi at jcanals.cat (Jordi Canals)
Date: Fri, 20 Nov 2009 13:50:36 +0100
Subject: [wp-hackers] WP as a CMS with a touch of Blogging
In-Reply-To: <f5aa06cf0911191824l375ef1e4idfcef23f43ce0dc8@mail.gmail.com>
References: <f38206c90911191738s29b2c546w95315ae06053864b@mail.gmail.com>
	<32c7967e0911191809g46a0d2a2jdfa4cd33c6ae005f@mail.gmail.com>
	<f5aa06cf0911191824l375ef1e4idfcef23f43ce0dc8@mail.gmail.com>
Message-ID: <eccf1e7c0911200450x6f6c82fs846edd7de78b405d@mail.gmail.com>

Or just create a page template which includes the archive template after
making a custrom query:

query_posts('your params');
include 'archive.php';

Regards,
Jordi Canals

2009/11/20 Daniel Dvorkin <elrabino at gmail.com>

> Or hack the wp_list_pages results to insert a link to the category.
>
> http://sivel.net/2009/03/adding-links-to-wp_list_pages-part-2/
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From ryanchan404 at gmail.com  Fri Nov 20 13:31:47 2009
From: ryanchan404 at gmail.com (Ryan Chan)
Date: Fri, 20 Nov 2009 21:31:47 +0800
Subject: [wp-hackers] Licensing issue when selling Wordpress
Message-ID: <45d40ce30911200531j60d6f532u776a330b84ae5a3d@mail.gmail.com>

Hello,


I know WP is under GPL2 license, I have read the document but still
not 100% sure, so I describe my case here, to make sure I am following
the rule of open-source...


Case:

1. I design a customized WP theme, and bundle WP core, with a few
extra plugins, sell to customers
2. Some client just need basic theme, so I bundle WP GPL theme,
instead of a customer theme, and sell to customer
3. I optionally provide installation service, but not all customer need it



Is the above case violating the license?


Ryan

From william.canino at googlemail.com  Fri Nov 20 13:46:18 2009
From: william.canino at googlemail.com (William Canino)
Date: Fri, 20 Nov 2009 08:46:18 -0500
Subject: [wp-hackers] Licensing issue when selling Wordpress
In-Reply-To: <45d40ce30911200531j60d6f532u776a330b84ae5a3d@mail.gmail.com>
References: <45d40ce30911200531j60d6f532u776a330b84ae5a3d@mail.gmail.com>
Message-ID: <e4dc67e0911200546k592b1fb9x6b83feabebc04a09@mail.gmail.com>

Yes, Oui and Si.

http://www.gnu.org/licenses/gpl-faq.html#DoesTheGPLAllowMoney and ff. questions

2009/11/20 Ryan Chan <ryanchan404 at gmail.com>:
> Hello,
>
>
> I know WP is under GPL2 license, I have read the document but still
> not 100% sure, so I describe my case here, to make sure I am following
> the rule of open-source...
>
>
> Case:
>
> 1. I design a customized WP theme, and bundle WP core, with a few
> extra plugins, sell to customers
> 2. Some client just need basic theme, so I bundle WP GPL theme,
> instead of a customer theme, and sell to customer
> 3. I optionally provide installation service, but not all customer need it
>
>
>
> Is the above case violating the license?
>
>
> Ryan
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From scribu at gmail.com  Fri Nov 20 13:46:43 2009
From: scribu at gmail.com (scribu)
Date: Fri, 20 Nov 2009 15:46:43 +0200
Subject: [wp-hackers] Licensing issue when selling Wordpress
In-Reply-To: <45d40ce30911200531j60d6f532u776a330b84ae5a3d@mail.gmail.com>
References: <45d40ce30911200531j60d6f532u776a330b84ae5a3d@mail.gmail.com>
Message-ID: <349fe48b0911200546u394e3073l71018610b5b34688@mail.gmail.com>

IANAL, but as long as all the plugins are GPL too, you shold be fine.


-- 
http://scribu.net

From william.canino at googlemail.com  Fri Nov 20 13:48:38 2009
From: william.canino at googlemail.com (William Canino)
Date: Fri, 20 Nov 2009 08:48:38 -0500
Subject: [wp-hackers] Licensing issue when selling Wordpress
In-Reply-To: <349fe48b0911200546u394e3073l71018610b5b34688@mail.gmail.com>
References: <45d40ce30911200531j60d6f532u776a330b84ae5a3d@mail.gmail.com>
	<349fe48b0911200546u394e3073l71018610b5b34688@mail.gmail.com>
Message-ID: <e4dc67e0911200548q3d7510b9sf565d9084b215e9c@mail.gmail.com>

Oops, I misread the question.

It's No, non and no. :)

Good luck with your business.

2009/11/20 scribu <scribu at gmail.com>:
> IANAL, but as long as all the plugins are GPL too, you shold be fine.
>
>
> --
> http://scribu.net
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From steve at sltaylor.co.uk  Fri Nov 20 14:15:29 2009
From: steve at sltaylor.co.uk (Steve Taylor)
Date: Fri, 20 Nov 2009 14:15:29 +0000
Subject: [wp-hackers] detecting type of edit for parent_save_pre
Message-ID: <a21f8bf00911200615rad7f46dwd06caa5b42d6d41b@mail.gmail.com>

I'm having some issues with a plugin I did recently
(http://wordpress.org/extend/plugins/lock-pages/). Part of it prevents
certain users from changing the parent of pages which are set as
"locked" by admins.

The issue I'm having is that when said users upload images to a locked
page, it gets "de-attached" by the plugin. You can grab the code to
see it all, but this is the code that I think is the issue - it's
hooked to parent_save_pre.

function lockParent( $parent ) {
	// Make sure this isn't an uploaded attachment or image being edited
	if ( !isset( $_POST["html-upload"] ) || $_POST["html-upload"] != "Upload" ) ) {
		// Can user edit this page?
		if ( $this->userCanEdit( $_POST['post_ID'] ) ) {
			return $parent;
		} else {
			// Keep old parent, user can't change it
			return $_POST[$this->prefix.'old_parent'];
		}
	} else {
		return $parent;
	}
}

The check at the start is what I added to make sure we're not dealing
with an image upload, and it works - but then when you edit, say, the
image's title, and Save Changes, then the parent gets changed and the
image is de-attached again.

I know there must be a certain way to check that the function only
runs for *pages* being saved. Am I missing an argument for
parent_save_pre? I tried global $post and checking $post->post_type,
but it didn't seem to work.

Any hints appreciated!

Steve Taylor

From harish.mlists at gmail.com  Fri Nov 20 14:24:10 2009
From: harish.mlists at gmail.com (Harish Narayanan)
Date: Fri, 20 Nov 2009 15:24:10 +0100
Subject: [wp-hackers] Licensing issue when selling Wordpress
In-Reply-To: <45d40ce30911200531j60d6f532u776a330b84ae5a3d@mail.gmail.com>
References: <45d40ce30911200531j60d6f532u776a330b84ae5a3d@mail.gmail.com>
Message-ID: <4B06A68A.7080705@gmail.com>

Ryan Chan wrote:
> Hello,
> 
> 
> I know WP is under GPL2 license, I have read the document but still
> not 100% sure, so I describe my case here, to make sure I am following
> the rule of open-source...
> 
> 
> Case:
> 
> 1. I design a customized WP theme, and bundle WP core, with a few
> extra plugins, sell to customers

(I am not a lawyer. This is not legal advice, please no one sue me.)

Yes, you can sell it. You provide the customer the source (which you do
by virtue of it being non-binary PHP stuff). So, assuming you don't
change any of the copyright information (and thus make it clear who
wrote what subset of your bundle), you follow the GPL.

The thing is, if the user in turn decides to modify and/or distribute
your bundle for free (or even sell it at a lower price), they are free
to do that also. The license affords them the same freedoms you are using.

> 2. Some client just need basic theme, so I bundle WP GPL theme,
> instead of a customer theme, and sell to customer

Yes, you can do this also. But there is nothing to stop your customer
from giving it away (or more likely, just fetching it themselves from
the internet.)

> 3. I optionally provide installation service, but not all customer need it

I think you are asking whether you can charge to help a customer install
your bundle. Yes, you can.

In essence, as I understand it, your business model appears to be making
it easier to get WordPress + Some useful plugins + Some interesting
(custom or otherwise) theme. This is what you are charging them for; not
for the software, but for the convenience.

Harish

From otto at ottodestruct.com  Fri Nov 20 14:32:54 2009
From: otto at ottodestruct.com (Otto)
Date: Fri, 20 Nov 2009 08:32:54 -0600
Subject: [wp-hackers] Options for Controller - Views
In-Reply-To: <4B0607B3.5010606@santosj.name>
References: <4B04EEDB.6070102@santosj.name>
	<B678277B-A025-43E6-9D92-50D46E4541B3@phiffer.org> 
	<349fe48b0911190624t12c7e85brd9f4745481a64aa2@mail.gmail.com> 
	<161617690911191141j7ed5c23dqfcba580d102e3de4@mail.gmail.com> 
	<4B0607B3.5010606@santosj.name>
Message-ID: <161617690911200632r44fe6cbbh5eccb13a86f0eba8@mail.gmail.com>

On Thu, Nov 19, 2009 at 9:06 PM, Jacob Santos <wordpress at santosj.name> wrote:
> Using template_redirect is a dirty hack...

How is template_redirect a dirty hack? The template-loader is the
entire "view" portion of WordPress, and IMO it works just fine. You
can select your "view" based on any criteria you prefer. yes, it's one
big set of else-if's, but the template_redirect lets you add your own
set of criteria and to bypass the existing templates (views) entirely.

I think you're too wedded to some pre-existing other concept of MVC
that you have instead of working within the existing framework.

> and I can get by not using
> add_rewrite_rule function completely with a few other hacks. The point of
> MVC is to easily extend the base with a defined flow path. Right now it is
> like a maze with many paths leading to dead ends.

I don't see that at all. It's a very clear and well-defined structure,
albeit a potentially poorly named one.

> In fact, I could do without the whole "blog" portion and use the Plugin API
> and other parts, like the administration to create something completely
> different using WordPress as the base.

The administration piece of WordPress is the real dirty hack here. Not
to disparage anybody, but it's a total mess. Dozens of points of
entry, cross-including all over the place... it's extremely difficult
to work with. The front-end portion is trivially easy to extend by
comparison.

> As it stands now, it would require a
> great deal of hacking and I could never really remove the portions of
> WordPress that makes WordPress, well WordPress. If that is the case, then
> I'm better off starting from a framework that actually implements MVC
> properly and without all of the WTF?s that exist within WordPress.

Well, yes, basically you are. You're talking about wanting to make
WordPress into not WordPress, and in that case I'd ask why bother with
starting with WordPress in the first place? I've used the Zend MVC
framework before, and it's quite good. If you want specific portions
of WordPress, then quite a lot of it has been abstracted out into
classes. Things like the Plugin API and such are actually somewhat
trivial to recreate, because lets face it, all that really does is to
keep a dynamic list of files somewhere and then includes them, one at
a time. Creating an interface to do that is not difficult. The clever
bit there is scanning the plugins for the header information.

> Also, it has to be easy, so if someone wants to extend what I created, they
> can do so without having to kick their own ass trying to figure it out. Do
> you know how long it takes to learn Zend Framework, Code Igniter, etc? An
> hour and it is pretty straight forward with all of the examples and that is
> also with working development. I spent 4 hours trying to use WP_Rewrite and
> after feeling like an idiot and cursing the name of the person who created
> such a monstrosity, I gave up and used the template_redirect route. To find
> that I have to use it anyway isn't all that appealing.

I'm confused as to what exactly you were trying to do with WP_Rewrite
that you found so difficult. Calling add_rewrite_rule to, well, add a
rewrite rule seems fairly straightforward to me. WP_Rewrite is just an
internal implementation that is basically equivalent to the .htaccess
rewrites method. It doesn't claim to be much of anything more. It
doesn't connect URLs to "views", it changes URLs from one form to
another. That's all it ever claims to do. If you want to connect query
variables to views, then template_redirect is the right way to do it.
That's not a hack, that's by design. The whole thing is based on query
variables, WP_Rewrite just lets you create those variables based on
other characteristics of the URL.

> I think the last time I tried this I attempted to work WP_Query in the
> project as well as it was far too much rewriting. The goal should be to get
> closer to an simpler MVC implementation.

I disagree. The goal should be to abstract the pieces into separate
components, yes, but not to go full MVC with all the limitations that
encompasses. MVC can be nice for some things, but it is ultimately
frustrating and limiting when applied to Web Applications.

To pick an example, Zend MVC is relatively easy to work with, but it
ultimately limits you on how you can construct your URLs. It's
inflexible in several respects because of the assumptions it makes
about how you want your URLs to look. WordPress' rewrite system is
highly flexible, since you can make your URLs look any way you can
express with regexp, then change them into query_vars, and direct to
your templates based on those vars.

-Otto

From otto at ottodestruct.com  Fri Nov 20 14:37:08 2009
From: otto at ottodestruct.com (Otto)
Date: Fri, 20 Nov 2009 08:37:08 -0600
Subject: [wp-hackers] Plugin activation/deactivation and testing?
In-Reply-To: <007901ca6994$6afd1e50$40f75af0$@us>
References: <ca7320070911181422p3b393a1eo1cbcf041c67a7de8@mail.gmail.com> 
	<4B04EAB4.10006@santosj.name>
	<ca7320070911182318y53efa04ybd24f02476e68aac@mail.gmail.com> 
	<006701ca6956$d3b10c60$7b132520$@us>
	<5efa3e3a0911191849n1e6ac0bcgadbb8dbf35f62a82@mail.gmail.com> 
	<007901ca6994$6afd1e50$40f75af0$@us>
Message-ID: <161617690911200637u475a9cc2jb37d6d1635e232be@mail.gmail.com>

Yes, the uninstall hook is fired when the plugin gets deleted, not deactivated.

Somebody correct me if I'm incorrect.

-Otto
Sent from Memphis, TN, United States


On Thu, Nov 19, 2009 at 9:49 PM, mark waterous <mark at watero.us> wrote:
>> Just a quick comment .. one very common recommendation on the forums
>> when people have problems upgrading is to deactivate all plugins, try
>> the automatic upgrade, then re-activate the plugins.
>>
>> Therefore the deactivation hook should not destroy any tables ..
>
> That didn't even cross my mind! I think it would be best if I removed my
> deactivation hook immediately in favor of register_uninstall_hook as scribu
> suggested, along with making it a prominent feature on the options page,
> part of the readme... at least then if some people wind up with remnants, I
> can say I tried. ;)
>
> --
> Mark Waterous
> http://mark.watero.us/
> (mark at watero.us)
>
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From wordpress at santosj.name  Fri Nov 20 15:08:34 2009
From: wordpress at santosj.name (Jacob Santos)
Date: Fri, 20 Nov 2009 09:08:34 -0600
Subject: [wp-hackers] Options for Controller - Views
In-Reply-To: <161617690911200632r44fe6cbbh5eccb13a86f0eba8@mail.gmail.com>
References: <4B04EEDB.6070102@santosj.name>	<B678277B-A025-43E6-9D92-50D46E4541B3@phiffer.org>
	<349fe48b0911190624t12c7e85brd9f4745481a64aa2@mail.gmail.com>
	<161617690911191141j7ed5c23dqfcba580d102e3de4@mail.gmail.com>
	<4B0607B3.5010606@santosj.name>
	<161617690911200632r44fe6cbbh5eccb13a86f0eba8@mail.gmail.com>
Message-ID: <4B06B0F2.2010204@santosj.name>

Yes, it is completely possible to use the template redirect hook as the 
controller, but in this instance the reason is that you would have to 
have the majority of your controller logic in there or abstract it out 
into separate functions to keep the function from becoming massive. So 
if I did the extra work and allowed for the Rewrite to call the function 
directly, I don't have to worry about all of the logic myself or I could 
have a mile long function for all of the points of the project.

I will take for instance one project where I replaced two sections and 
provided for two other sections. Yeah, I didn't use the add_rewrite_rule 
and I may add it in there just to see how well it works and if it 
removes the need for the title hack.

MVC as a pattern does extremely well in large web based projects. I 
mean, extremely well, because you know exactly where everything is. All 
of the views are together (like in WordPress), all of the models are 
together, and mostly all of the controllers are together. You know 
exactly where to look, if I'm building the view data, then I'll go to 
the controller. If there is something wrong with the data, then I'll go 
to the models. If there is something wrong with the design, then I'll go 
to the views.

As an aside, the Zend Framework also allows for regex rewrites, so it 
isn't completely limited to the structure they place you in. It also 
supports the same kind of system as WordPress. I'm not saying we use it, 
because there are lighter weight ones that can be used.

And yes, you are correct, I could start with a framework and pull out 
the parts that I need. My project is going to be GPL, so there won't be 
any license conflicts, so I could just pluck the library out of 
WordPress and recreate the administration. The reason I want to use 
WordPress is that it is GPL, has many plugins that the person who uses 
my project will have access to immediately. The majority of the code 
base for authentication, authorization, and security is maintained for 
WordPress, so if I recreated everything, I'll have my work cut out to me 
with regards to security. If there is a defect, when will I know and how 
long would it take for me to fix it. Sure, WordPress appears to have one 
every 6 months, but most of them are extremely hard to exploit at this 
point. I'll be taking the risk, even with all of the precautions I'd 
take to prevent exploits.

How this benefits me is that there is already a structure in place, sure 
it may take a week to three to rewrite the WP_Rewrite, but alas if it 
isn't wanted in the core of WordPress, and since I'll technically be 
forking WordPress (like WordPress Mu was a fork), then I can do it and 
maintain it. I would just rather put it back into the community. What 
I'll be saving is the days or weeks it will take to create the themes 
code, the plugin code, the administration. It will allow me to spend the 
majority of my time working on my project and completing it in short 
order verses spending that time recreating what I need.

I think what I'm going to do, is write it for my needs, create the patch 
and see where it goes. Who knows, if Mu or bbPress has any controller 
logic, it may end up in WordPress at some point. It could even be better 
than my implementation.

Alas, I believe I went too far in to why I need it and lost the point. 
The point is that WP_Rewrite should not be doing the mod_rewrite and the 
controller, I think the programmer that architect the code thought, 
"What better rewriter is there other than mod_rewrite? The answer, none. 
Lets use it and force the person to create other files for their 
extensions."

What I plan on doing is splitting the WP_Rewrite out into the 
mod_rewrite reader / writer and the Router. It won't be perfect, but I'm 
sure I can put in some extra code for WP_Query to ignore placing 404 
when there is a match in the Router. In effect, really, I will be 
placing the Router before the WP_Query and the WP_Query will be created 
based on the controller. So it might not be as ugly as I thought and 
shouldn't be that much work to fit it in to WordPress core.

Well, I know my plan and the developers with commit access have not yet 
chimed in to the discussion, so there I don't have any idea if it will 
be accepted. I believe that as long as it doesn't break too much code 
and plugins that it will probably be accepted, unless code already 
exists in one of the other projects.

Jacob Santos


Otto wrote:
> On Thu, Nov 19, 2009 at 9:06 PM, Jacob Santos <wordpress at santosj.name> wrote:
>   
>> Using template_redirect is a dirty hack...
>>     
>
> How is template_redirect a dirty hack? The template-loader is the
> entire "view" portion of WordPress, and IMO it works just fine. You
> can select your "view" based on any criteria you prefer. yes, it's one
> big set of else-if's, but the template_redirect lets you add your own
> set of criteria and to bypass the existing templates (views) entirely.
>
> I think you're too wedded to some pre-existing other concept of MVC
> that you have instead of working within the existing framework.
>
>   
>> and I can get by not using
>> add_rewrite_rule function completely with a few other hacks. The point of
>> MVC is to easily extend the base with a defined flow path. Right now it is
>> like a maze with many paths leading to dead ends.
>>     
>
> I don't see that at all. It's a very clear and well-defined structure,
> albeit a potentially poorly named one.
>
>   
>> In fact, I could do without the whole "blog" portion and use the Plugin API
>> and other parts, like the administration to create something completely
>> different using WordPress as the base.
>>     
>
> The administration piece of WordPress is the real dirty hack here. Not
> to disparage anybody, but it's a total mess. Dozens of points of
> entry, cross-including all over the place... it's extremely difficult
> to work with. The front-end portion is trivially easy to extend by
> comparison.
>
>   
>> As it stands now, it would require a
>> great deal of hacking and I could never really remove the portions of
>> WordPress that makes WordPress, well WordPress. If that is the case, then
>> I'm better off starting from a framework that actually implements MVC
>> properly and without all of the WTF?s that exist within WordPress.
>>     
>
> Well, yes, basically you are. You're talking about wanting to make
> WordPress into not WordPress, and in that case I'd ask why bother with
> starting with WordPress in the first place? I've used the Zend MVC
> framework before, and it's quite good. If you want specific portions
> of WordPress, then quite a lot of it has been abstracted out into
> classes. Things like the Plugin API and such are actually somewhat
> trivial to recreate, because lets face it, all that really does is to
> keep a dynamic list of files somewhere and then includes them, one at
> a time. Creating an interface to do that is not difficult. The clever
> bit there is scanning the plugins for the header information.
>
>   
>> Also, it has to be easy, so if someone wants to extend what I created, they
>> can do so without having to kick their own ass trying to figure it out. Do
>> you know how long it takes to learn Zend Framework, Code Igniter, etc? An
>> hour and it is pretty straight forward with all of the examples and that is
>> also with working development. I spent 4 hours trying to use WP_Rewrite and
>> after feeling like an idiot and cursing the name of the person who created
>> such a monstrosity, I gave up and used the template_redirect route. To find
>> that I have to use it anyway isn't all that appealing.
>>     
>
> I'm confused as to what exactly you were trying to do with WP_Rewrite
> that you found so difficult. Calling add_rewrite_rule to, well, add a
> rewrite rule seems fairly straightforward to me. WP_Rewrite is just an
> internal implementation that is basically equivalent to the .htaccess
> rewrites method. It doesn't claim to be much of anything more. It
> doesn't connect URLs to "views", it changes URLs from one form to
> another. That's all it ever claims to do. If you want to connect query
> variables to views, then template_redirect is the right way to do it.
> That's not a hack, that's by design. The whole thing is based on query
> variables, WP_Rewrite just lets you create those variables based on
> other characteristics of the URL.
>
>   
>> I think the last time I tried this I attempted to work WP_Query in the
>> project as well as it was far too much rewriting. The goal should be to get
>> closer to an simpler MVC implementation.
>>     
>
> I disagree. The goal should be to abstract the pieces into separate
> components, yes, but not to go full MVC with all the limitations that
> encompasses. MVC can be nice for some things, but it is ultimately
> frustrating and limiting when applied to Web Applications.
>
> To pick an example, Zend MVC is relatively easy to work with, but it
> ultimately limits you on how you can construct your URLs. It's
> inflexible in several respects because of the assumptions it makes
> about how you want your URLs to look. WordPress' rewrite system is
> highly flexible, since you can make your URLs look any way you can
> express with regexp, then change them into query_vars, and direct to
> your templates based on those vars.
>
> -Otto
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>   

From otto at ottodestruct.com  Fri Nov 20 15:20:11 2009
From: otto at ottodestruct.com (Otto)
Date: Fri, 20 Nov 2009 09:20:11 -0600
Subject: [wp-hackers] Options for Controller - Views
In-Reply-To: <4B06B0F2.2010204@santosj.name>
References: <4B04EEDB.6070102@santosj.name>
	<B678277B-A025-43E6-9D92-50D46E4541B3@phiffer.org> 
	<349fe48b0911190624t12c7e85brd9f4745481a64aa2@mail.gmail.com> 
	<161617690911191141j7ed5c23dqfcba580d102e3de4@mail.gmail.com> 
	<4B0607B3.5010606@santosj.name>
	<161617690911200632r44fe6cbbh5eccb13a86f0eba8@mail.gmail.com> 
	<4B06B0F2.2010204@santosj.name>
Message-ID: <161617690911200720v6dbb64a8ue77743acd07668f7@mail.gmail.com>

On Fri, Nov 20, 2009 at 9:08 AM, Jacob Santos <wordpress at santosj.name> wrote:
> Yes, it is completely possible to use the template redirect hook as the
> controller, but in this instance the reason is that you would have to have
> the majority of your controller logic in there or abstract it out into
> separate functions to keep the function from becoming massive. So if I did
> the extra work and allowed for the Rewrite to call the function directly, I
> don't have to worry about all of the logic myself or I could have a mile
> long function for all of the points of the project.
>
> I will take for instance one project where I replaced two sections and
> provided for two other sections. Yeah, I didn't use the add_rewrite_rule and
> I may add it in there just to see how well it works and if it removes the
> need for the title hack.

Okay, but I guess this is where we're differing here. WP_Rewrite
doesn't call *anything* directly. That's not its function at all. It
doesn't decide what gets displayed, it's not a controller and it's not
meant to be.

> Alas, I believe I went too far in to why I need it and lost the point. The
> point is that WP_Rewrite should not be doing the mod_rewrite and the
> controller, I think the programmer that architect the code thought, "What
> better rewriter is there other than mod_rewrite? The answer, none. Lets use
> it and force the person to create other files for their extensions."

WP_Rewrite isn't supposed to be a controller in that sense. It's just
a URL parser. That's it. All WP_Rewrite does is convert the URL into
query_vars.

Other parts use those query vars to determine what to do and where to
go. In particular, WP_Query uses the query_vars to determine what
content to pull out of the DB, and then it sets flags accordingly. The
template-loader then uses those flags to determine what template
(view) to pass control off to. Everything is nice and separated.

> What I plan on doing is splitting the WP_Rewrite out into the mod_rewrite
> reader / writer and the Router.

The "router" in WordPress is the template-loader file. Not WP_Rewrite.

You're trying to fit a square peg in a round hole here. Yes, you can
shave the sides of the peg and make an octagon to fit through the
hole, but it won't roll as well as a cylinder would. ;)

-Otto

From mikeschinkel at newclarity.net  Fri Nov 20 15:29:52 2009
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Fri, 20 Nov 2009 10:29:52 -0500
Subject: [wp-hackers] Options for Controller - Views
In-Reply-To: <161617690911200632r44fe6cbbh5eccb13a86f0eba8@mail.gmail.com>
References: <4B04EEDB.6070102@santosj.name>
	<B678277B-A025-43E6-9D92-50D46E4541B3@phiffer.org>
	<349fe48b0911190624t12c7e85brd9f4745481a64aa2@mail.gmail.com>
	<161617690911191141j7ed5c23dqfcba580d102e3de4@mail.gmail.com>
	<4B0607B3.5010606@santosj.name>
	<161617690911200632r44fe6cbbh5eccb13a86f0eba8@mail.gmail.com>
Message-ID: <F8622BD2-7122-49C2-A431-87F07C2F052A@newclarity.net>

On Nov 20, 2009, at 9:32 AM, Otto wrote:
> How is template_redirect a dirty hack? The template-loader is the
> entire "view" portion of WordPress, and IMO it works just fine. You
> can select your "view" based on any criteria you prefer. yes, it's one
> big set of else-if's, but the template_redirect lets you add your own
> set of criteria and to bypass the existing templates (views) entirely.

Yes it is a nasty, dirty, ugly hack.  In order to get something as simple as an arbitrary URL to route requires use of the follow hooks (directly from my plugin):

		add_action('template_redirect',array(__CLASS__,'custom_url'));
		add_action('generate_rewrite_rules', array(__CLASS__,'add_rewrite_rules'));
		add_filter('query_vars', array(__CLASS__,'add_queryvars' ));
		register_activation_hook(__FILE__,array(__CLASS__,'flush_rewrite_rules');
		add_action('pre_get_posts',array(__CLASS__,'set_query'));
		add_action('parse_query',array(__CLASS__,'parse_query'));
		add_filter('the_content',array(__CLASS__,'filter_post_list_content'));
		add_filter('posts_fields',array(__CLASS__,'filter_posts_fields'));
		add_filter('posts_where_paged',array(__CLASS__,'filter_posts_where_paged'));
		add_filter('posts_join_paged',array(__CLASS__,'filter_posts_join_paged'));
		add_filter('posts_orderby',array(__CLASS__,'filter_posts_orderby'));
		add_filter('posts_groupby',array(__CLASS__,'filter_posts_groupby'));

It is total crap that you have to use so many hooks to get the path "/products/{product}" to work and that your hooks have to much with fragile SQL.

> I don't see that at all. It's a very clear and well-defined structure,

...for someone who has developed years of expertise with it. *Not* for 99.9% of WordPress users.

> The administration piece of WordPress is the real dirty hack here. Not
> to disparage anybody, but it's a total mess. Dozens of points of
> entry, cross-including all over the place... it's extremely difficult
> to work with.

Agreed.

> ...and in that case I'd ask why bother with

> starting with WordPress in the first place?

Because WordPress is in use by millions of people. 
Because there are more plugins for WordPress than for anything else.
Because there are more off-the-shelf themes for WordPress than for anything else.
Because WordPress has a better end user admin interface than anything else. 
Because WordPress is in active in development.
Need I go on?

> I've used the Zend MVC
> framework before, and it's quite good.

Good. For programmers. 

But not a good solution for people whose needs match 80% of what WordPress offers but also needs to control URLs for 20% of their site.

> I'm confused as to what exactly you were trying to do with WP_Rewrite
> that you found so difficult. Calling add_rewrite_rule to, well, add a
> rewrite rule seems fairly straightforward to me. WP_Rewrite is just an
> internal implementation that is basically equivalent to the .htaccess
> rewrites method. It doesn't claim to be much of anything more. It
> doesn't connect URLs to "views", it changes URLs from one form to
> another. That's all it ever claims to do. If you want to connect query
> variables to views, then template_redirect is the right way to do it.
> That's not a hack, that's by design. The whole thing is based on query
> variables, WP_Rewrite just lets you create those variables based on
> other characteristics of the URL.

Speaking for myself and not Jacob, what was difficult was that in order to support the following structure I had to use TWELVE (12) HOOKS and the resultant code was very fragile!!!

http://pm-sherpa.com/solutions/
http://pm-sherpa.com/solutions/huddle/

Is *should* be as easy as me adding in a (simplified) URI Template and mapping it to a file or function (that's what my plugin allows, but it was far too difficult, and fragile, to make it work.) 

> I disagree. The goal should be to abstract the pieces into separate
> components, yes, but not to go full MVC with all the limitations that
> encompasses. MVC can be nice for some things, but it is ultimately
> frustrating and limiting when applied to Web Applications.

For the record, I'm not advocating MVC, I'm advocating making URL mapping easy.  Easy like Django or Rails.

> WordPress' rewrite system is
> highly flexible, since you can make your URLs look any way you can
> express with regexp, then change them into query_vars, and direct to
> your templates based on those vars.

But WordPress' rewrite system is far to complicated for any but the advanced WordPress developer to tackle, and too fragile to be a robust solution. 

-Mike Schinkel
WordPress Custom Plugins
http://mikeschinkel.com/custom-wordpress-plugins/









From mike at zed1.com  Fri Nov 20 15:51:32 2009
From: mike at zed1.com (Mike Little)
Date: Fri, 20 Nov 2009 15:51:32 +0000
Subject: [wp-hackers] WP as a CMS with a touch of Blogging
In-Reply-To: <eccf1e7c0911200450x6f6c82fs846edd7de78b405d@mail.gmail.com>
References: <f38206c90911191738s29b2c546w95315ae06053864b@mail.gmail.com> 
	<32c7967e0911191809g46a0d2a2jdfa4cd33c6ae005f@mail.gmail.com> 
	<f5aa06cf0911191824l375ef1e4idfcef23f43ce0dc8@mail.gmail.com> 
	<eccf1e7c0911200450x6f6c82fs846edd7de78b405d@mail.gmail.com>
Message-ID: <7235ce780911200751g5cac15c1r63c99e77e3cb68ad@mail.gmail.com>

2009/11/20 Jordi Canals <jordi at jcanals.cat>

> Or just create a page template which includes the archive template after
> making a custrom query:
>
> query_posts('your params');
> include 'archive.php';
>
> Regards,
> Jordi Canals
>
>


Jeremi,

A special page  template is a good idea if you are comfortable writing a bit
of PHP code.

Otherwise there are a couple of redirect plugins that will do what you want.
Owen Winkler's redirectify is the simplest. (sadly no longer available but
email me privately and I'll send you a copy.)

Mike
-- 
Mike Little
http://zed1.com/

From navjotjsingh at gmail.com  Fri Nov 20 15:58:47 2009
From: navjotjsingh at gmail.com (Navjot Singh)
Date: Fri, 20 Nov 2009 21:28:47 +0530
Subject: [wp-hackers] WP as a CMS with a touch of Blogging
In-Reply-To: <7235ce780911200751g5cac15c1r63c99e77e3cb68ad@mail.gmail.com>
References: <f38206c90911191738s29b2c546w95315ae06053864b@mail.gmail.com> 
	<32c7967e0911191809g46a0d2a2jdfa4cd33c6ae005f@mail.gmail.com> 
	<f5aa06cf0911191824l375ef1e4idfcef23f43ce0dc8@mail.gmail.com> 
	<eccf1e7c0911200450x6f6c82fs846edd7de78b405d@mail.gmail.com> 
	<7235ce780911200751g5cac15c1r63c99e77e3cb68ad@mail.gmail.com>
Message-ID: <7b9e108c0911200758t408a9518oa9a552d5a01ddb69@mail.gmail.com>

Why not use Page Links to Plugin to link to any category you want?

http://wordpress.org/extend/plugins/page-links-to/

Regards
Navjot Singh

Sent from Delhi, DL, India

On Fri, Nov 20, 2009 at 9:21 PM, Mike Little <mike at zed1.com> wrote:

> 2009/11/20 Jordi Canals <jordi at jcanals.cat>
>
> > Or just create a page template which includes the archive template after
> > making a custrom query:
> >
> > query_posts('your params');
> > include 'archive.php';
> >
> > Regards,
> > Jordi Canals
> >
> >
>
>
> Jeremi,
>
> A special page  template is a good idea if you are comfortable writing a
> bit
> of PHP code.
>
> Otherwise there are a couple of redirect plugins that will do what you
> want.
> Owen Winkler's redirectify is the simplest. (sadly no longer available but
> email me privately and I'll send you a copy.)
>
> Mike
> --
> Mike Little
> http://zed1.com/
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From scribu at gmail.com  Fri Nov 20 16:09:38 2009
From: scribu at gmail.com (scribu)
Date: Fri, 20 Nov 2009 18:09:38 +0200
Subject: [wp-hackers] detecting type of edit for parent_save_pre
In-Reply-To: <a21f8bf00911200615rad7f46dwd06caa5b42d6d41b@mail.gmail.com>
References: <a21f8bf00911200615rad7f46dwd06caa5b42d6d41b@mail.gmail.com>
Message-ID: <349fe48b0911200809w4185026fhe0ce81e8eb8595e5@mail.gmail.com>

You should hook into 'save_post' instead and check by $post->post_type
instead of relying on the $_POST variable.


-- 
http://scribu.net

From otto at ottodestruct.com  Fri Nov 20 16:17:50 2009
From: otto at ottodestruct.com (Otto)
Date: Fri, 20 Nov 2009 10:17:50 -0600
Subject: [wp-hackers] Options for Controller - Views
In-Reply-To: <F8622BD2-7122-49C2-A431-87F07C2F052A@newclarity.net>
References: <4B04EEDB.6070102@santosj.name>
	<B678277B-A025-43E6-9D92-50D46E4541B3@phiffer.org> 
	<349fe48b0911190624t12c7e85brd9f4745481a64aa2@mail.gmail.com> 
	<161617690911191141j7ed5c23dqfcba580d102e3de4@mail.gmail.com> 
	<4B0607B3.5010606@santosj.name>
	<161617690911200632r44fe6cbbh5eccb13a86f0eba8@mail.gmail.com> 
	<F8622BD2-7122-49C2-A431-87F07C2F052A@newclarity.net>
Message-ID: <161617690911200817u5bb847a1m6f602922d9561c69@mail.gmail.com>

On Fri, Nov 20, 2009 at 9:29 AM, Mike Schinkel
<mikeschinkel at newclarity.net> wrote:
> Yes it is a nasty, dirty, ugly hack. ?In order to get something as simple as an arbitrary URL to route requires use of the follow hooks (directly from my plugin):
>
> ? ? ? ? ? ? ? ?add_action('template_redirect',array(__CLASS__,'custom_url'));
> ? ? ? ? ? ? ? ?add_action('generate_rewrite_rules', array(__CLASS__,'add_rewrite_rules'));
> ? ? ? ? ? ? ? ?add_filter('query_vars', array(__CLASS__,'add_queryvars' ));
> ? ? ? ? ? ? ? ?register_activation_hook(__FILE__,array(__CLASS__,'flush_rewrite_rules');
> ? ? ? ? ? ? ? ?add_action('pre_get_posts',array(__CLASS__,'set_query'));
> ? ? ? ? ? ? ? ?add_action('parse_query',array(__CLASS__,'parse_query'));
> ? ? ? ? ? ? ? ?add_filter('the_content',array(__CLASS__,'filter_post_list_content'));
> ? ? ? ? ? ? ? ?add_filter('posts_fields',array(__CLASS__,'filter_posts_fields'));
> ? ? ? ? ? ? ? ?add_filter('posts_where_paged',array(__CLASS__,'filter_posts_where_paged'));
> ? ? ? ? ? ? ? ?add_filter('posts_join_paged',array(__CLASS__,'filter_posts_join_paged'));
> ? ? ? ? ? ? ? ?add_filter('posts_orderby',array(__CLASS__,'filter_posts_orderby'));
> ? ? ? ? ? ? ? ?add_filter('posts_groupby',array(__CLASS__,'filter_posts_groupby'));
>
> It is total crap that you have to use so many hooks to get the path "/products/{product}" to work and that your hooks have to much with fragile SQL.

Sweet Jebus, man. Why in the *world* would you need all that?

function add_product_var($public_query_vars) {
    $public_query_vars[] = 'product';
    return $public_query_vars;
}
add_filter('query_vars', 'add_product_var');

function do_product_rewrite() {
    add_rewrite_rule('product/([^/]+)/?$',
"index.php?product={$matches[1]}",'top');
}
add_action('init', 'do_product_rewrite');

Then in your template_redirect hooked function, you can do
get_query_var('product') to get the value of your product variable and
act accordingly.

Unless you're doing something completely absurd, I have no idea why
you need all those hooks. Heck, all the posts_* hooks your using have
absolutely nothing to do with rewriting or routing of the resulting
page. Those modify the WP_Query only.

-Otto

From scribu at gmail.com  Fri Nov 20 16:22:47 2009
From: scribu at gmail.com (scribu)
Date: Fri, 20 Nov 2009 18:22:47 +0200
Subject: [wp-hackers] Options for Controller - Views
In-Reply-To: <161617690911200817u5bb847a1m6f602922d9561c69@mail.gmail.com>
References: <4B04EEDB.6070102@santosj.name>
	<B678277B-A025-43E6-9D92-50D46E4541B3@phiffer.org>
	<349fe48b0911190624t12c7e85brd9f4745481a64aa2@mail.gmail.com>
	<161617690911191141j7ed5c23dqfcba580d102e3de4@mail.gmail.com>
	<4B0607B3.5010606@santosj.name>
	<161617690911200632r44fe6cbbh5eccb13a86f0eba8@mail.gmail.com>
	<F8622BD2-7122-49C2-A431-87F07C2F052A@newclarity.net>
	<161617690911200817u5bb847a1m6f602922d9561c69@mail.gmail.com>
Message-ID: <349fe48b0911200822i23172fdag238484d70c77a4ac@mail.gmail.com>

>
> Sweet Jebus, man. Why in the *world* would you need all that?
>
> function add_product_var($public_query_vars) {
>    $public_query_vars[] = 'product';
>    return $public_query_vars;
> }
> add_filter('query_vars', 'add_product_var');
>
> function do_product_rewrite() {
>    add_rewrite_rule('product/([^/]+)/?$',
> "index.php?product={$matches[1]}",'top');
> }
> add_action('init', 'do_product_rewrite');
>


Even shorter:

function do_product_rewrite() {
        $tag = 'product';
        add_rewrite_tag("%$tag%", '([^/]+)', "$tag=");
        add_permastruct($tag, 'products' . "/%$tag%");
}
add_action('init', 'do_product_rewrite');


-- 
http://scribu.net

From scribu at gmail.com  Fri Nov 20 16:24:37 2009
From: scribu at gmail.com (scribu)
Date: Fri, 20 Nov 2009 18:24:37 +0200
Subject: [wp-hackers] Options for Controller - Views
In-Reply-To: <349fe48b0911200822i23172fdag238484d70c77a4ac@mail.gmail.com>
References: <4B04EEDB.6070102@santosj.name>
	<B678277B-A025-43E6-9D92-50D46E4541B3@phiffer.org>
	<349fe48b0911190624t12c7e85brd9f4745481a64aa2@mail.gmail.com>
	<161617690911191141j7ed5c23dqfcba580d102e3de4@mail.gmail.com>
	<4B0607B3.5010606@santosj.name>
	<161617690911200632r44fe6cbbh5eccb13a86f0eba8@mail.gmail.com>
	<F8622BD2-7122-49C2-A431-87F07C2F052A@newclarity.net>
	<161617690911200817u5bb847a1m6f602922d9561c69@mail.gmail.com>
	<349fe48b0911200822i23172fdag238484d70c77a4ac@mail.gmail.com>
Message-ID: <349fe48b0911200824o99215ffifefc1cc8b8cfc22b@mail.gmail.com>

I guess it's not that bad, once you get the hang of it. Better documentation
would surely help!


-- 
http://scribu.net

From otto at ottodestruct.com  Fri Nov 20 16:26:13 2009
From: otto at ottodestruct.com (Otto)
Date: Fri, 20 Nov 2009 10:26:13 -0600
Subject: [wp-hackers] Options for Controller - Views
In-Reply-To: <161617690911200817u5bb847a1m6f602922d9561c69@mail.gmail.com>
References: <4B04EEDB.6070102@santosj.name>
	<B678277B-A025-43E6-9D92-50D46E4541B3@phiffer.org> 
	<349fe48b0911190624t12c7e85brd9f4745481a64aa2@mail.gmail.com> 
	<161617690911191141j7ed5c23dqfcba580d102e3de4@mail.gmail.com> 
	<4B0607B3.5010606@santosj.name>
	<161617690911200632r44fe6cbbh5eccb13a86f0eba8@mail.gmail.com> 
	<F8622BD2-7122-49C2-A431-87F07C2F052A@newclarity.net>
	<161617690911200817u5bb847a1m6f602922d9561c69@mail.gmail.com>
Message-ID: <161617690911200826m32b5d027u85579a1d39f4b2b1@mail.gmail.com>

Okay looking closer at your rules and what you're doing, this needs to
be explained further.

>                add_action('template_redirect',array(__CLASS__,'custom_url'));
>                add_action('generate_rewrite_rules', array(__CLASS__,'add_rewrite_rules'));
>                add_filter('query_vars', array(__CLASS__,'add_queryvars' ));
>                register_activation_hook(__FILE__,array(__CLASS__,'flush_rewrite_rules');


Those four are basically correct and those are how you're doing both
rewriting and routing.
- template_redirect for routing
- generate_rewrite_rules to add your custom rule
- query_vars to add your custom variables
- activation hook to flush on plugin activation

Those are the only ones relevant to this conversation. All the rest
you used are to modify the query and presumably pull out something
special from the database to display things.

Without knowing exactly what they're doing, I can't say whether there
is an easier way to modify the WP_Query or not. However, your use of
so many posts_* hooks suggests you're modifying the SQL directly,
which indeed would be quite fragile. There probably is a better way,
but again, I can't be sure without knowing what exactly you're doing
there.

Nevertheless, the query is not "rewriting" nor is it "routing". It's
database access, and if you really wanted, your "view" doesn't have to
use it at all. It all depends on what exactly you're doing.

-Otto
Sent from Memphis, TN, United States

From mikeschinkel at newclarity.net  Fri Nov 20 16:55:28 2009
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Fri, 20 Nov 2009 11:55:28 -0500
Subject: [wp-hackers] Options for Controller - Views
In-Reply-To: <161617690911200817u5bb847a1m6f602922d9561c69@mail.gmail.com>
References: <4B04EEDB.6070102@santosj.name>
	<B678277B-A025-43E6-9D92-50D46E4541B3@phiffer.org>
	<349fe48b0911190624t12c7e85brd9f4745481a64aa2@mail.gmail.com>
	<161617690911191141j7ed5c23dqfcba580d102e3de4@mail.gmail.com>
	<4B0607B3.5010606@santosj.name>
	<161617690911200632r44fe6cbbh5eccb13a86f0eba8@mail.gmail.com>
	<F8622BD2-7122-49C2-A431-87F07C2F052A@newclarity.net>
	<161617690911200817u5bb847a1m6f602922d9561c69@mail.gmail.com>
Message-ID: <0A2A9C6B-D2E8-4952-A48C-4067EFC0C577@newclarity.net>

On Nov 20, 2009, at 11:17 AM, Otto wrote:
> On Fri, Nov 20, 2009 at 9:29 AM, Mike Schinkel
>> Yes it is a nasty, dirty, ugly hack.  In order to get something as simple as an arbitrary URL to route requires use of the follow hooks (directly from my plugin):
>> 
>>                add_action('template_redirect',array(__CLASS__,'custom_url'));
>>                add_action('generate_rewrite_rules', array(__CLASS__,'add_rewrite_rules'));
>>                add_filter('query_vars', array(__CLASS__,'add_queryvars' ));
>>                register_activation_hook(__FILE__,array(__CLASS__,'flush_rewrite_rules');
>>                add_action('pre_get_posts',array(__CLASS__,'set_query'));
>>                add_action('parse_query',array(__CLASS__,'parse_query'));
>>                add_filter('the_content',array(__CLASS__,'filter_post_list_content'));
>>                add_filter('posts_fields',array(__CLASS__,'filter_posts_fields'));
>>                add_filter('posts_where_paged',array(__CLASS__,'filter_posts_where_paged'));
>>                add_filter('posts_join_paged',array(__CLASS__,'filter_posts_join_paged'));
>>                add_filter('posts_orderby',array(__CLASS__,'filter_posts_orderby'));
>>                add_filter('posts_groupby',array(__CLASS__,'filter_posts_groupby'));
>> 
>> It is total crap that you have to use so many hooks to get the path "/products/{product}" to work and that your hooks have to much with fragile SQL.
> 
> Sweet Jebus, man. Why in the *world* would you need all that?


To create a generic functionality that lets me add URLs like what follows and have them load appropriate functionality from WordPress such as a post or a list of posts:

add_custom_url(	array(
	'name' 					=> 'solutions-list-by-alpha',
	'url_type'			=> 'post-list',
	'url_template' 	=> 'solutions/by-alpha',
	'template_file' => 'custom/solutions-by-alpha.php',
	'mf_page_type'	=> 'Solution',
));

add_custom_url(	array(
	'name' 					=> 'solution-page',
	'url_type'			=> 'single-post',
	'url_template' 	=> 'solutions/{solution_slug}',
	'template_file' => 'custom/solution.php',
	'mf_page_type'	=> 'Solution',
));

add_custom_url(	array(
	'name' 					=> 'solutions-list',
	'url_type'			=> 'post-list',
	'url_template' 	=> 'solutions',
	'template_file' => 'custom/solutions.php',
	'mf_page_type'	=> 'Solution',
));

add_custom_url(	array(
	'url_template' 	=> 'test',
	'callback' 			=> 'do_test_page',
));

function do_test_page() {
	echo 'Hi!';
}

> Unless you're doing something completely absurd, I have no idea why
> you need all those hooks. Heck, all the posts_* hooks your using have
> absolutely nothing to do with rewriting or routing of the resulting
> page. Those modify the WP_Query only.

You know, I thought the same until I tried to make it work. I spent a week coding that and every time I got close it seemed like WordPress was actively trying to thwart me.

I also had to kill these which I hated but it was too much to overcome and I didn't have time to do it "right":

			remove_action('template_redirect', 'redirect_canonical');
			remove_action('template_redirect', 'wp_old_slug_redirect');

The reason I needed to muck with SQL is because, while I could get the URLs to route with just a few hooks, I couldn't get it to select the appropriate posts and/or post lists (I was using More Fields plugin to create unique "content types.")  Yes, it's not exactly a routing issue but without the route being able to access WP functionality to pull the appropriate posts then just having custom URL routes is like having a Bugatti Veyron but no gasoline. 

Listen, if you really can make this work easier, and I mean really work, I'm all for you proving me wrong (but you won't in this case, I'm certain of it.) OTOH, if core can be modified so that a route can be specified and tied to a custom post type and/or a custom function all without having to do anything more than specify what I have specified above then that is what we need.

-Mike Schinkel
WordPress Custom Plugins
http://mikeschinkel.com/custom-wordpress-plugins/






From mikeschinkel at newclarity.net  Fri Nov 20 16:57:48 2009
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Fri, 20 Nov 2009 11:57:48 -0500
Subject: [wp-hackers] Options for Controller - Views
In-Reply-To: <161617690911200826m32b5d027u85579a1d39f4b2b1@mail.gmail.com>
References: <4B04EEDB.6070102@santosj.name>
	<B678277B-A025-43E6-9D92-50D46E4541B3@phiffer.org>
	<349fe48b0911190624t12c7e85brd9f4745481a64aa2@mail.gmail.com>
	<161617690911191141j7ed5c23dqfcba580d102e3de4@mail.gmail.com>
	<4B0607B3.5010606@santosj.name>
	<161617690911200632r44fe6cbbh5eccb13a86f0eba8@mail.gmail.com>
	<F8622BD2-7122-49C2-A431-87F07C2F052A@newclarity.net>
	<161617690911200817u5bb847a1m6f602922d9561c69@mail.gmail.com>
	<161617690911200826m32b5d027u85579a1d39f4b2b1@mail.gmail.com>
Message-ID: <B99C0B15-41F2-440D-A9A7-4B08072AEA0B@newclarity.net>

On Nov 20, 2009, at 11:26 AM, Otto wrote:
> Okay looking closer at your rules and what you're doing, this needs to
> be explained further.
> 
>>               add_action('template_redirect',array(__CLASS__,'custom_url'));
>>               add_action('generate_rewrite_rules', array(__CLASS__,'add_rewrite_rules'));
>>               add_filter('query_vars', array(__CLASS__,'add_queryvars' ));
>>               register_activation_hook(__FILE__,array(__CLASS__,'flush_rewrite_rules');
> 
> 
> Those four are basically correct and those are how you're doing both
> rewriting and routing.
> - template_redirect for routing
> - generate_rewrite_rules to add your custom rule
> - query_vars to add your custom variables
> - activation hook to flush on plugin activation
> 
> Those are the only ones relevant to this conversation. All the rest
> you used are to modify the query and presumably pull out something
> special from the database to display things.

You are correct.  But as I said earlier one without the other is, for all practical purposes, pointless.


> Without knowing exactly what they're doing, I can't say whether there
> is an easier way to modify the WP_Query or not. However, your use of
> so many posts_* hooks suggests you're modifying the SQL directly,
> which indeed would be quite fragile. There probably is a better way,
> but again, I can't be sure without knowing what exactly you're doing
> there.

If you can find a better, easier way I'd be extremely grateful.

> Nevertheless, the query is not "rewriting" nor is it "routing". It's
> database access, and if you really wanted, your "view" doesn't have to
> use it at all. It all depends on what exactly you're doing.

Again, one without the other is pointless.

-Mike Schinkel
WordPress Custom Plugins
http://mikeschinkel.com/custom-wordpress-plugins/







From otto at ottodestruct.com  Fri Nov 20 17:22:56 2009
From: otto at ottodestruct.com (Otto)
Date: Fri, 20 Nov 2009 11:22:56 -0600
Subject: [wp-hackers] Options for Controller - Views
In-Reply-To: <0A2A9C6B-D2E8-4952-A48C-4067EFC0C577@newclarity.net>
References: <4B04EEDB.6070102@santosj.name>
	<B678277B-A025-43E6-9D92-50D46E4541B3@phiffer.org> 
	<349fe48b0911190624t12c7e85brd9f4745481a64aa2@mail.gmail.com> 
	<161617690911191141j7ed5c23dqfcba580d102e3de4@mail.gmail.com> 
	<4B0607B3.5010606@santosj.name>
	<161617690911200632r44fe6cbbh5eccb13a86f0eba8@mail.gmail.com> 
	<F8622BD2-7122-49C2-A431-87F07C2F052A@newclarity.net>
	<161617690911200817u5bb847a1m6f602922d9561c69@mail.gmail.com> 
	<0A2A9C6B-D2E8-4952-A48C-4067EFC0C577@newclarity.net>
Message-ID: <161617690911200922s49232edw6bcd7852b9c6b716@mail.gmail.com>

On Fri, Nov 20, 2009 at 10:55 AM, Mike Schinkel
<mikeschinkel at newclarity.net> wrote:
> To create a generic functionality that lets me add URLs like what follows and have them load appropriate functionality from WordPress such as a post or a list of posts:
>
> add_custom_url( array(
...

I don't follow what any of that really means, but I'm pretty certain I
can probably make it simpler for you than using all those hooks.  The
callback one, for example, is relatively easy to do. The rest might be
easy, might not. Depends on what it's doing, I can't tell just from
the names of the bits in your arrays alone.

Email me direct with the code you have and I'll see if I can help you
simplify it.

> The reason I needed to muck with SQL is because, while I could get the URLs to route with just a few hooks, I couldn't get it to select the appropriate posts and/or post lists (I was using More Fields plugin to create unique "content types.")  Yes, it's not exactly a routing issue but without the route being able to access WP functionality to pull the appropriate posts then just having custom URL routes is like having a Bugatti Veyron but no gasoline.

If you can get the variables you need into query vars, then it should
be a straightforward matter to pull the posts you need, and hopefully
to do it without direct SQL modification. However, that's not a
routing issue at all, that's an issue with WP_Query and it being
potentially unable to query your posts in the way you want.

But again, *you don't need to use WP_Query*. A template never has to
mess with the $wp_posts variable if it doesn't want to do so. You can
ignore it entirely and pull the posts you want yourself. Or create a
new WP_Query with special parameters. Or anything you like, once
you're in your template (via a template_redirect), you have total
control over everything. Everything is loaded, all of WordPress is
prepared, but it's the template that waves the baton and displays
everything.

> OTOH, if core can be modified so that a route can be specified and tied to a custom post type and/or a custom function all without having to do anything more than specify what I have specified above then that is what we need.

Routing arbitrary URLs to custom functions (via callbacks) is easy
verging on trivial. Custom post type might be, but I need more
information on that.

-Otto
Sent from Memphis, TN, United States

From wp at xentek.net  Fri Nov 20 17:23:50 2009
From: wp at xentek.net (Eric Marden)
Date: Fri, 20 Nov 2009 12:23:50 -0500
Subject: [wp-hackers] WP as a CMS with a touch of Blogging
In-Reply-To: <7235ce780911200751g5cac15c1r63c99e77e3cb68ad@mail.gmail.com>
References: <f38206c90911191738s29b2c546w95315ae06053864b@mail.gmail.com>
	<32c7967e0911191809g46a0d2a2jdfa4cd33c6ae005f@mail.gmail.com>
	<f5aa06cf0911191824l375ef1e4idfcef23f43ce0dc8@mail.gmail.com>
	<eccf1e7c0911200450x6f6c82fs846edd7de78b405d@mail.gmail.com>
	<7235ce780911200751g5cac15c1r63c99e77e3cb68ad@mail.gmail.com>
Message-ID: <EF964153-648C-4186-87F6-5E8EFE7137EC@xentek.net>

On Nov 20, 2009, at 10:51 AM, Mike Little wrote:

> Owen Winkler's redirectify is the simplest. (sadly no longer  
> available but
> email me privately and I'll send you a copy.)


Mike,

If the plugin still works, is open source, and isn't in the Plugin DB,  
consider cleaning it up, crediting the original author, and publishing  
it there - especially if Owen doesn't want to mess with it anymore.


- Eric Marden
__________________________________
http://xentek.net/code/wordpress/
tw: @xentek





From mikeschinkel at newclarity.net  Fri Nov 20 17:52:19 2009
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Fri, 20 Nov 2009 12:52:19 -0500
Subject: [wp-hackers] Options for Controller - Views
In-Reply-To: <161617690911200922s49232edw6bcd7852b9c6b716@mail.gmail.com>
References: <4B04EEDB.6070102@santosj.name>
	<B678277B-A025-43E6-9D92-50D46E4541B3@phiffer.org>
	<349fe48b0911190624t12c7e85brd9f4745481a64aa2@mail.gmail.com>
	<161617690911191141j7ed5c23dqfcba580d102e3de4@mail.gmail.com>
	<4B0607B3.5010606@santosj.name>
	<161617690911200632r44fe6cbbh5eccb13a86f0eba8@mail.gmail.com>
	<F8622BD2-7122-49C2-A431-87F07C2F052A@newclarity.net>
	<161617690911200817u5bb847a1m6f602922d9561c69@mail.gmail.com>
	<0A2A9C6B-D2E8-4952-A48C-4067EFC0C577@newclarity.net>
	<161617690911200922s49232edw6bcd7852b9c6b716@mail.gmail.com>
Message-ID: <46950463-F850-4097-A165-DB31B041E953@newclarity.net>

On Nov 20, 2009, at 12:22 PM, Otto wrote:
> Email me direct with the code you have and I'll see if I can help you
> simplify it.

Done, thanks.

> If you can get the variables you need into query vars, then it should
> be a straightforward matter to pull the posts you need, and hopefully
> to do it without direct SQL modification. However, that's not a
> routing issue at all, that's an issue with WP_Query and it being
> potentially unable to query your posts in the way you want.

I know that's the theory, but I wasn't able to make it work in reality.

> But again, *you don't need to use WP_Query*. A template never has to
> mess with the $wp_posts variable if it doesn't want to do so. You can
> ignore it entirely and pull the posts you want yourself.

I can do that but then I'm duplicating far too much code.

BTW, one of the things I was doing it creating a Shortcode to return a list of "Solutions" (i.e. posts of "type" "solution") and embed within another post.  I had to do it that way because of the way Wordpress hijacks things but honestly that was 6 months ago and I can't remember exactly what the problem was.

> Or create a
> new WP_Query with special parameters. Or anything you like, once
> you're in your template (via a template_redirect), you have total
> control over everything. Everything is loaded, all of WordPress is
> prepared, but it's the template that waves the baton and displays
> everything.

I was trying to create routing that had as little impact on how other things are done as possible.   Sure, i can write a lot of custom code but I was trying my best to avoid it.

> Routing arbitrary URLs to custom functions (via callbacks) is easy
> verging on trivial.

Yes, but once in the custom function you have to do far too much work; it shouldn't be like that.

As I remember, to fix it would require some new hooks and some changes in some internal assumptions when a custom route is in use.

> Custom post type might be, but I need more
> information on that.

In your email.

-Mike Schinkel
WordPress Custom Plugins
http://mikeschinkel.com/custom-wordpress-plugins/






From wordpress at santosj.name  Fri Nov 20 22:02:35 2009
From: wordpress at santosj.name (Jacob Santos)
Date: Fri, 20 Nov 2009 16:02:35 -0600
Subject: [wp-hackers] Options for Controller - Views
Message-ID: <4B0711FB.3090006@santosj.name>

Okay, so looking at the issue, it seems I had thought that the WP_Query 
was the router, but really it is WP_Rewrite. Also, it seems that too 
much is really just tied to WordPress itself and requires work to extend 
with other uses. In my opinion, WP_Rewrite and WP_Query can exist, but 
new code can be created for WordPress that is more generic that the two 
classes can then use.

In this way, the Router, URI, and Controller can be separated in to 
their own easily identified components. The Views can also be changed to 
not be based off of the template loader file.

I believe the problem is that too much of the code is affecting 
WordPress and it is difficult to see how to work within the parameters 
to add and change. In this way the entire set up is really a hack 
provided to allow for other people to extend WordPress but not really 
take it and replace WordPress cleanly.

Part of the issue is lack of documentation and well, if no one is going 
to step up that knows it well enough (I can't get the code to work that 
is on the Codex) then really, when I write the new code, I'll be sure to 
write out a detailed explanation.

You know if someone wants to help, I can create a ticket and apply the 
patches when I have something. Or if someone wants to take it in a new 
direction, I think, if there are multiple implementations then the best 
one can be looked at. (Also I will probably "steal" it for my own project.)

Jacob Santos

From scribu at gmail.com  Fri Nov 20 22:53:10 2009
From: scribu at gmail.com (scribu)
Date: Sat, 21 Nov 2009 00:53:10 +0200
Subject: [wp-hackers] Options for Controller - Views
In-Reply-To: <4B0711FB.3090006@santosj.name>
References: <4B0711FB.3090006@santosj.name>
Message-ID: <349fe48b0911201453u6f6c9038lef1b14cc786ab6e5@mail.gmail.com>

I was going to suggest BackPress, but it doesn't seem to have either
WP_Rewrite or WP_Query.


-- 
http://scribu.net

From wordpress at santosj.name  Sat Nov 21 00:24:12 2009
From: wordpress at santosj.name (Jacob Santos)
Date: Fri, 20 Nov 2009 18:24:12 -0600
Subject: [wp-hackers] Options for Controller - Views
In-Reply-To: <349fe48b0911201453u6f6c9038lef1b14cc786ab6e5@mail.gmail.com>
References: <4B0711FB.3090006@santosj.name>
	<349fe48b0911201453u6f6c9038lef1b14cc786ab6e5@mail.gmail.com>
Message-ID: <4B07332C.1060407@santosj.name>

Well, the new code can become part of BackPress in some time in the 
future, if the core developers managing that project consider the patch 
acceptable for inclusion.

Jacob Santos

scribu wrote:
> I was going to suggest BackPress, but it doesn't seem to have either
> WP_Rewrite or WP_Query.
>
>
>   

From russgilbert at gmail.com  Sat Nov 21 01:46:17 2009
From: russgilbert at gmail.com (Russ Gilbert)
Date: Fri, 20 Nov 2009 17:46:17 -0800
Subject: [wp-hackers] Adding Filters
Message-ID: <15b201ca6a4c$6d60a730$4821f590$@com>

I am using Benoit Gobe's Email Anti-Spam Plugin to obfuscate email addresses
from spam spiders.  Generally speaking it does a fine job but for my current
project I want to keep the email addresses in a custom field.

 

Looking at the plugin, obviously anything not in the_content won't get
filtered:  

 

add_filter ('the_content', 'anti_email_spam', 15);

 

So - I thought it would be as simple as adding a filter for the function I'm
using to extract the custom field:  

 

add_filter ('get_post_custom_values', 'anti_email_spam', 16);

 

But that doesn't seem to work.  I'm somewhat new to WP development so I have
to assume I'm missing something, but I'm not sure what.

 

Thanks!


From anacin at gwhatchet.com  Sat Nov 21 02:41:46 2009
From: anacin at gwhatchet.com (Andrew Nacin)
Date: Fri, 20 Nov 2009 21:41:46 -0500
Subject: [wp-hackers] Adding Filters
In-Reply-To: <15b201ca6a4c$6d60a730$4821f590$@com>
References: <15b201ca6a4c$6d60a730$4821f590$@com>
Message-ID: <8b870c460911201841u921a396k681f9c31bed204d3@mail.gmail.com>

>
> add_filter ('get_post_custom_values', 'anti_email_spam', 16);
>

You should read through the Plugin API in the Codex:
http://codex.wordpress.org/Plugin_API.

You don't add a filter to a function; you add it to an API hook that is
built into the WordPress core. the_content() happens to be a function, but
it is also the name of a hook that filters the content returned by that
function, and that's what you're applying the filter to. (
http://adambrown.info/p/wp_hooks/hook/the_content?version=2.8&file=wp-includes/post-template.php--
it also is a filter in a few other spots.)

From russgilbert at gmail.com  Sat Nov 21 02:42:50 2009
From: russgilbert at gmail.com (Russ Gilbert)
Date: Fri, 20 Nov 2009 18:42:50 -0800
Subject: [wp-hackers] Adding Filters
In-Reply-To: <8b870c460911201841u921a396k681f9c31bed204d3@mail.gmail.com>
References: <15b201ca6a4c$6d60a730$4821f590$@com>
	<8b870c460911201841u921a396k681f9c31bed204d3@mail.gmail.com>
Message-ID: <15b801ca6a54$539ac710$fad05530$@com>

Newbie mistake, I misinterpreted "the_content" in there. - thanks!

-----Original Message-----
From: wp-hackers-bounces at lists.automattic.com
[mailto:wp-hackers-bounces at lists.automattic.com] On Behalf Of Andrew Nacin
Sent: Friday, November 20, 2009 6:42 PM
To: wp-hackers at lists.automattic.com
Subject: Re: [wp-hackers] Adding Filters

>
> add_filter ('get_post_custom_values', 'anti_email_spam', 16);
>

You should read through the Plugin API in the Codex:
http://codex.wordpress.org/Plugin_API.

You don't add a filter to a function; you add it to an API hook that is
built into the WordPress core. the_content() happens to be a function, but
it is also the name of a hook that filters the content returned by that
function, and that's what you're applying the filter to. (
http://adambrown.info/p/wp_hooks/hook/the_content?version=2.8&file=wp-includ
es/post-template.php--
it also is a filter in a few other spots.)
_______________________________________________
wp-hackers mailing list
wp-hackers at lists.automattic.com
http://lists.automattic.com/mailman/listinfo/wp-hackers


From steve at sltaylor.co.uk  Sat Nov 21 18:29:10 2009
From: steve at sltaylor.co.uk (Steve Taylor)
Date: Sat, 21 Nov 2009 18:29:10 +0000
Subject: [wp-hackers] detecting type of edit for parent_save_pre
In-Reply-To: <349fe48b0911200809w4185026fhe0ce81e8eb8595e5@mail.gmail.com>
References: <a21f8bf00911200615rad7f46dwd06caa5b42d6d41b@mail.gmail.com>
	<349fe48b0911200809w4185026fhe0ce81e8eb8595e5@mail.gmail.com>
Message-ID: <a21f8bf00911211029v7d7a59c9h75667b8e695ec99c@mail.gmail.com>

Just tried this but ran into all sorts of trouble. To be honest I've
lost track of what it was - I think it (or I) got confused about
revisions being saved.

In any case, I've fixed the original problem by detecting
$_POST["attachments"] - it works, at least. I'll put the new, more
serious issue in a new thread.... Bah.


2009/11/20 scribu <scribu at gmail.com>:
> You should hook into 'save_post' instead and check by $post->post_type
> instead of relying on the $_POST variable.
>
>
> --
> http://scribu.net
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From steve at sltaylor.co.uk  Sat Nov 21 18:38:26 2009
From: steve at sltaylor.co.uk (Steve Taylor)
Date: Sat, 21 Nov 2009 18:38:26 +0000
Subject: [wp-hackers] altering the Quick Edit box
Message-ID: <a21f8bf00911211038m1fa4d611r9ee1a2da0fe76e85@mail.gmail.com>

I've searched a lot on this issue, but all I can find is other people
stuck on it. Basically, I'm trying to add fields to the Quick Edit box
for pages.

A plugin I'm working on
(http://wordpress.org/extend/plugins/lock-pages/) tries to lock the
editing of specified pages' parent and slug. It works fine on the
normal page edit screen - it stores the old values in hidden fields,
and reverts to them if the user is barred from editing them.

But Quick Edits slip right past this. I got as far as working this out:

- The Quick Edits are each generated dynamically from a hidden
"template" at the bottom of the page
- Each row has a hidden div, which contains a div for each field's value
- The JS dynamically populates the values from these divs whenever
"Quick Edit" is clicked.

I got my hidden fields into the template with the
quick_edit_custom_box hook, fine. I also did some jQuery to
dynamically add the values needed to each tr.iedit.

But try as I might I couldn't populate them. I had something like this:

$( "form table.page tr.iedit a.editinline" ).click( function() {
  [code for populating hidden fields]
  return false;
});

But it just wouldn't run. It seemed as if when my function ran, WP's
inlineEditPost function hadn't yet created the Quick Edit box, so the
hidden fields weren't there to populate with values. I tried used
mouseup instead of click, no luck. Is there a clash here? Anyone else
had the same problem?

Steve

From dan at phiffer.org  Sat Nov 21 19:37:39 2009
From: dan at phiffer.org (Dan Phiffer)
Date: Sat, 21 Nov 2009 14:37:39 -0500
Subject: [wp-hackers] Renaming a plugin
Message-ID: <45041095-3ADB-420B-91BF-B0089E655A3C@phiffer.org>

Hi all,

I'm pretty new to WordPress plugin development, so apologies if this is an obvious question. How does one go about renaming a plugin? Both as in changing the text that appears above Description / Installation / Screenshots etc. and also the path http://wordpress.org/extend/plugins/[plugin-name]/

Thanks!
-Dan

From tunamaxx at yahoo.com  Sat Nov 21 20:08:07 2009
From: tunamaxx at yahoo.com (Tuna Can)
Date: Sat, 21 Nov 2009 12:08:07 -0800 (PST)
Subject: [wp-hackers] Renaming a plugin
In-Reply-To: <45041095-3ADB-420B-91BF-B0089E655A3C@phiffer.org>
Message-ID: <557147.81855.qm@web65707.mail.ac4.yahoo.com>

Checkout the WordPress Codex page here:

http://codex.wordpress.org/Writing_a_Plugin

It will tell you how "the top of your Plugin's main PHP file must contain a standard Plugin information header." The info you want to change is in there.


<?php
/*
Plugin Name: Name Of The Plugin
Plugin URI: http://URI_Of_Page_Describing_Plugin_and_Updates
Description: A brief description of the Plugin.
Version: The Plugin's Version Number, e.g.: 1.0
Author: Name Of The Plugin Author
Author URI: http://URI_Of_The_Plugin_Author
*/
?>




--- On Sat, 11/21/09, Dan Phiffer <dan at phiffer.org> wrote:

> From: Dan Phiffer <dan at phiffer.org>
> Subject: [wp-hackers] Renaming a plugin
> To: wp-hackers at lists.automattic.com
> Received: Saturday, November 21, 2009, 11:37 AM
> Hi all,
> 
> I'm pretty new to WordPress plugin development, so
> apologies if this is an obvious question. How does one go
> about renaming a plugin? Both as in changing the text that
> appears above Description / Installation / Screenshots etc.
> and also the path http://wordpress.org/extend/plugins/[plugin-name]/
> 
> Thanks!
> -Dan
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
> 


      __________________________________________________________________
Looking for the perfect gift? Give the gift of Flickr! 

http://www.flickr.com/gift/


From mark at watero.us  Sat Nov 21 20:26:26 2009
From: mark at watero.us (mark waterous)
Date: Sat, 21 Nov 2009 12:26:26 -0800
Subject: [wp-hackers] Renaming a plugin
In-Reply-To: <557147.81855.qm@web65707.mail.ac4.yahoo.com>
References: <45041095-3ADB-420B-91BF-B0089E655A3C@phiffer.org>
	<557147.81855.qm@web65707.mail.ac4.yahoo.com>
Message-ID: <000f01ca6ae8$e71747e0$b545d7a0$@us>

> Checkout the WordPress Codex page here:
> 
> http://codex.wordpress.org/Writing_a_Plugin


I think he might be referring to the information that's displayed on the
repository page for the plugin, in which case he would probably want to take
a look at the readme file information and standards located here:

http://wordpress.org/extend/plugins/about/#readme

As for changing the name of your plugin within the repository, I don't
believe you can - once a repository is set up it's relatively permanent. If
you wanted to change the name of your plugin you would have to request a new
repository be set up under the new name.

--
Mark Waterous
http://mark.watero.us/
(mark at watero.us) 



From dan at phiffer.org  Sat Nov 21 21:14:45 2009
From: dan at phiffer.org (Dan Phiffer)
Date: Sat, 21 Nov 2009 16:14:45 -0500
Subject: [wp-hackers] Renaming a plugin
In-Reply-To: <000f01ca6ae8$e71747e0$b545d7a0$@us>
References: <45041095-3ADB-420B-91BF-B0089E655A3C@phiffer.org>
	<557147.81855.qm@web65707.mail.ac4.yahoo.com>
	<000f01ca6ae8$e71747e0$b545d7a0$@us>
Message-ID: <A706C9EC-61DE-42F3-9320-E23D7EFF53B9@phiffer.org>


On Nov 21, 2009, at 3:26 PM, mark waterous wrote:

> As for changing the name of your plugin within the repository, I don't
> believe you can - once a repository is set up it's relatively permanent. 

Thanks, this was what I was after.

-Dan

From tunamaxx at yahoo.com  Sat Nov 21 21:17:26 2009
From: tunamaxx at yahoo.com (Tuna Can)
Date: Sat, 21 Nov 2009 13:17:26 -0800 (PST)
Subject: [wp-hackers] Renaming a plugin
In-Reply-To: <A706C9EC-61DE-42F3-9320-E23D7EFF53B9@phiffer.org>
Message-ID: <473612.70496.qm@web65714.mail.ac4.yahoo.com>

Oops! Sorry about that... looks like I have a little egg on my face. :)

Carry on here... nothing to see... nothing to see... *embarrassed*

Thanks,

Tony

--- On Sat, 11/21/09, Dan Phiffer <dan at phiffer.org> wrote:

> From: Dan Phiffer <dan at phiffer.org>
> Subject: Re: [wp-hackers] Renaming a plugin
> To: wp-hackers at lists.automattic.com
> Received: Saturday, November 21, 2009, 1:14 PM
> 
> On Nov 21, 2009, at 3:26 PM, mark waterous wrote:
> 
> > As for changing the name of your plugin within the
> repository, I don't
> > believe you can - once a repository is set up it's
> relatively permanent. 
> 
> Thanks, this was what I was after.
> 
> -Dan
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
> 


      __________________________________________________________________
Yahoo! Canada Toolbar: Search from anywhere on the web, and bookmark your favourite sites. Download it now
http://ca.toolbar.yahoo.com.


From dan at phiffer.org  Sat Nov 21 21:35:33 2009
From: dan at phiffer.org (Dan Phiffer)
Date: Sat, 21 Nov 2009 16:35:33 -0500
Subject: [wp-hackers] Renaming a plugin
In-Reply-To: <473612.70496.qm@web65714.mail.ac4.yahoo.com>
References: <473612.70496.qm@web65714.mail.ac4.yahoo.com>
Message-ID: <1C61FFA0-4A43-474E-A8FD-17AEA629E87D@phiffer.org>


On Nov 21, 2009, at 4:17 PM, Tuna Can wrote:

> Oops! Sorry about that... looks like I have a little egg on my face. :)

No need to apologize, I think it's a good the hackers list is willing to rehash basic stuff.

It hadn't occurred to me that updating readme.txt would also update the plugin name on extend, but that makes sense.

-Dan


> 
> --- On Sat, 11/21/09, Dan Phiffer <dan at phiffer.org> wrote:
> 
>> From: Dan Phiffer <dan at phiffer.org>
>> Subject: Re: [wp-hackers] Renaming a plugin
>> To: wp-hackers at lists.automattic.com
>> Received: Saturday, November 21, 2009, 1:14 PM
>> 
>> On Nov 21, 2009, at 3:26 PM, mark waterous wrote:
>> 
>>> As for changing the name of your plugin within the
>> repository, I don't
>>> believe you can - once a repository is set up it's
>> relatively permanent. 
>> 
>> Thanks, this was what I was after.
>> 
>> -Dan
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>> 
> 
> 
>      __________________________________________________________________
> Yahoo! Canada Toolbar: Search from anywhere on the web, and bookmark your favourite sites. Download it now
> http://ca.toolbar.yahoo.com.
> 
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers


From wordpress at dd32.id.au  Sat Nov 21 22:07:00 2009
From: wordpress at dd32.id.au (Dion Hulse (dd32))
Date: Sun, 22 Nov 2009 09:07:00 +1100
Subject: [wp-hackers] detecting type of edit for parent_save_pre
In-Reply-To: <a21f8bf00911211029v7d7a59c9h75667b8e695ec99c@mail.gmail.com>
References: <a21f8bf00911200615rad7f46dwd06caa5b42d6d41b@mail.gmail.com>
	<349fe48b0911200809w4185026fhe0ce81e8eb8595e5@mail.gmail.com>
	<a21f8bf00911211029v7d7a59c9h75667b8e695ec99c@mail.gmail.com>
Message-ID: <op.u3rmdye9spxmuu@dd32>

checking for DOING_AJAX is the simplest way to avoid autosaves for a start

On Sun, 22 Nov 2009 05:29:10 +1100, Steve Taylor <steve at sltaylor.co.uk>  
wrote:

> Just tried this but ran into all sorts of trouble. To be honest I've
> lost track of what it was - I think it (or I) got confused about
> revisions being saved.
>
> In any case, I've fixed the original problem by detecting
> $_POST["attachments"] - it works, at least. I'll put the new, more
> serious issue in a new thread.... Bah.
>
>
> 2009/11/20 scribu <scribu at gmail.com>:
>> You should hook into 'save_post' instead and check by $post->post_type
>> instead of relying on the $_POST variable.
>>
>>
>> --
>> http://scribu.net
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>


-- 
Using Opera's revolutionary e-mail client: http://www.opera.com/mail/

From peter.westwood at ftwr.co.uk  Sun Nov 22 14:51:18 2009
From: peter.westwood at ftwr.co.uk (Peter Westwood)
Date: Sun, 22 Nov 2009 14:51:18 +0000
Subject: [wp-hackers] Multilanguage Support in 2.9rare
In-Reply-To: <db047a770911200025s323e5eb0lb7e9c0c22d7466ea@mail.gmail.com>
References: <db047a770911200025s323e5eb0lb7e9c0c22d7466ea@mail.gmail.com>
Message-ID: <A160431F-46B7-495A-84AA-C1D100DD6A7D@ftwr.co.uk>


On 20 Nov 2009, at 08:25, Frank Bueltge wrote:

> with the last update before 2 days and today on the nightly build it
> is not possiblt to use a other language. Do you have an idea?
> I have install the language-folder in wp-content with the
> languages-files (de_DE) and have also set the constant in the
> wp-config.php
>
> Also, all plugins dosnt work with other language. The same problem is
> on my dev-area on local machine.
>

I have just tested this on trunk (with fr_FR.mo) and it all appears to  
work.

Is it still not working for you?

Cheers
-- 
Peter Westwood
http://blog.ftwr.co.uk | http://westi.wordpress.com
C53C F8FC 8796 8508 88D6 C950 54F4 5DCD A834 01C5


From steve at sltaylor.co.uk  Sun Nov 22 16:53:58 2009
From: steve at sltaylor.co.uk (Steve Taylor)
Date: Sun, 22 Nov 2009 16:53:58 +0000
Subject: [wp-hackers] detecting type of edit for parent_save_pre
In-Reply-To: <op.u3rmdye9spxmuu@dd32>
References: <a21f8bf00911200615rad7f46dwd06caa5b42d6d41b@mail.gmail.com>
	<349fe48b0911200809w4185026fhe0ce81e8eb8595e5@mail.gmail.com>
	<a21f8bf00911211029v7d7a59c9h75667b8e695ec99c@mail.gmail.com>
	<op.u3rmdye9spxmuu@dd32>
Message-ID: <a21f8bf00911220853r574845f6s84fd94f145d7b6f1@mail.gmail.com>

Thanks, good tip. I guess this would skip Quick Edits too though?

I've started another thread about the problems with that - for now
I've actually disabled Quick Edit for pages where I've locked the
slug. It's tempting to use DOING_AJAX to filter autosaves as it
currently makes no difference, but I'll have to come up with something
more specific if/when I solve the Quick Edit issue.


2009/11/21 Dion Hulse (dd32) <wordpress at dd32.id.au>:
> checking for DOING_AJAX is the simplest way to avoid autosaves for a start
>
> On Sun, 22 Nov 2009 05:29:10 +1100, Steve Taylor <steve at sltaylor.co.uk>
> wrote:
>
>> Just tried this but ran into all sorts of trouble. To be honest I've
>> lost track of what it was - I think it (or I) got confused about
>> revisions being saved.
>>
>> In any case, I've fixed the original problem by detecting
>> $_POST["attachments"] - it works, at least. I'll put the new, more
>> serious issue in a new thread.... Bah.
>>
>>
>> 2009/11/20 scribu <scribu at gmail.com>:
>>>
>>> You should hook into 'save_post' instead and check by $post->post_type
>>> instead of relying on the $_POST variable.
>>>
>>>
>>> --
>>> http://scribu.net
>>> _______________________________________________
>>> wp-hackers mailing list
>>> wp-hackers at lists.automattic.com
>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>>
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
>
>
> --
> Using Opera's revolutionary e-mail client: http://www.opera.com/mail/
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From viniciusandre at gmail.com  Sun Nov 22 18:59:38 2009
From: viniciusandre at gmail.com (Vinicius Massuchetto)
Date: Sun, 22 Nov 2009 16:59:38 -0200
Subject: [wp-hackers] Change Password on Wordpress Plugins
Message-ID: <4ede8f490911221059k2f5f131ct8761ffe748bbf8cb@mail.gmail.com>

I know it sounds stupid, but I couldn't find any "change password"
section on my account on http://wordpress.org/extend/plugins/.
Is this option available?

Thanks.
--
Vin?cius Massuchetto
http://vinicius.soylocoporti.org.br

From peter.westwood at ftwr.co.uk  Sun Nov 22 19:03:54 2009
From: peter.westwood at ftwr.co.uk (Peter Westwood)
Date: Sun, 22 Nov 2009 19:03:54 +0000
Subject: [wp-hackers] Change Password on Wordpress Plugins
In-Reply-To: <4ede8f490911221059k2f5f131ct8761ffe748bbf8cb@mail.gmail.com>
References: <4ede8f490911221059k2f5f131ct8761ffe748bbf8cb@mail.gmail.com>
Message-ID: <0083BF02-C7F4-4BEE-A017-1D67F0792D46@ftwr.co.uk>


On 22 Nov 2009, at 18:59, Vinicius Massuchetto wrote:

> I know it sounds stupid, but I couldn't find any "change password"
> section on my account on http://wordpress.org/extend/plugins/.
> Is this option available?
>

Navigate to the Support forums and go to your profile there where you  
can then change your password.

You have one username and password for everything on WordPress.org

Cheers
-- 
Peter Westwood
http://blog.ftwr.co.uk | http://westi.wordpress.com
C53C F8FC 8796 8508 88D6 C950 54F4 5DCD A834 01C5


From navjotjsingh at gmail.com  Sun Nov 22 19:03:35 2009
From: navjotjsingh at gmail.com (Navjot Singh)
Date: Mon, 23 Nov 2009 00:33:35 +0530
Subject: [wp-hackers] Change Password on Wordpress Plugins
In-Reply-To: <4ede8f490911221059k2f5f131ct8761ffe748bbf8cb@mail.gmail.com>
References: <4ede8f490911221059k2f5f131ct8761ffe748bbf8cb@mail.gmail.com>
Message-ID: <7b9e108c0911221103y7e8e8650o5811be1613bf8ab@mail.gmail.com>

Visit http://wordpress.org/support/ and then click View Your profile and now
click Edit on right and find password change section at the bottom.

-
Navjot Singh

On Mon, Nov 23, 2009 at 12:29 AM, Vinicius Massuchetto <
viniciusandre at gmail.com> wrote:

> I know it sounds stupid, but I couldn't find any "change password"
> section on my account on http://wordpress.org/extend/plugins/.
> Is this option available?
>
> Thanks.
> --
> Vin?cius Massuchetto
> http://vinicius.soylocoporti.org.br
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From leogermani at gmail.com  Sun Nov 22 19:04:08 2009
From: leogermani at gmail.com (Leo germani)
Date: Sun, 22 Nov 2009 17:04:08 -0200
Subject: [wp-hackers] Change Password on Wordpress Plugins
In-Reply-To: <4ede8f490911221059k2f5f131ct8761ffe748bbf8cb@mail.gmail.com>
References: <4ede8f490911221059k2f5f131ct8761ffe748bbf8cb@mail.gmail.com>
Message-ID: <32c7967e0911221104q242c56ccp305883d73d5d7ad2@mail.gmail.com>

you have to go to your profile on the Forum.... dont ask me why...

On Sun, Nov 22, 2009 at 4:59 PM, Vinicius Massuchetto <
viniciusandre at gmail.com> wrote:

> I know it sounds stupid, but I couldn't find any "change password"
> section on my account on http://wordpress.org/extend/plugins/.
> Is this option available?
>
> Thanks.
> --
> Vin?cius Massuchetto
> http://vinicius.soylocoporti.org.br
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>



-- 
leogermani.pirex.com.br
leogermani.estudiolivre.org

From office at wpseek.com  Sun Nov 22 19:12:50 2009
From: office at wpseek.com (=?ISO-8859-1?Q?Oliver_Schl=F6be?=)
Date: Sun, 22 Nov 2009 20:12:50 +0100
Subject: [wp-hackers] Change Password on Wordpress Plugins
In-Reply-To: <4ede8f490911221059k2f5f131ct8761ffe748bbf8cb@mail.gmail.com>
References: <4ede8f490911221059k2f5f131ct8761ffe748bbf8cb@mail.gmail.com>
Message-ID: <4B098D32.8090905@wpseek.com>

Go here: http://wordpress.org/support/, log in, then click "View your 
profile", then "Edit" on the right-hand side. Et voil?. There you are.


On 22.11.2009 19:59, Vinicius Massuchetto wrote:
> I know it sounds stupid, but I couldn't find any "change password"
> section on my account on http://wordpress.org/extend/plugins/.
> Is this option available?
>
> Thanks.
> --
> Vin??cius Massuchetto
> http://vinicius.soylocoporti.org.br
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>    

-- 
Regards,
Oliver Schl?be

http://wpseek.com/
http://wpworldmap.net/


From viniciusandre at gmail.com  Sun Nov 22 19:48:16 2009
From: viniciusandre at gmail.com (Vinicius Massuchetto)
Date: Sun, 22 Nov 2009 17:48:16 -0200
Subject: [wp-hackers] Change Password on Wordpress Plugins
In-Reply-To: <4B098D32.8090905@wpseek.com>
References: <4ede8f490911221059k2f5f131ct8761ffe748bbf8cb@mail.gmail.com>
	<4B098D32.8090905@wpseek.com>
Message-ID: <4ede8f490911221148k399e9c84r1d53c391d880468d@mail.gmail.com>

On Sun, Nov 22, 2009 at 5:12 PM, Oliver Schl?be <office at wpseek.com> wrote:
> Go here: http://wordpress.org/support/, log in, then click "View your
> profile", then "Edit" on the right-hand side. Et voil?. There you are.
>
>
> On 22.11.2009 19:59, Vinicius Massuchetto wrote:
>>
>> I know it sounds stupid, but I couldn't find any "change password"
>> section on my account on http://wordpress.org/extend/plugins/.
>> Is this option available?

Nice! Thanks to all of you.

As I subscribed to submit a plugin, the first place I clicked was on
my nickname on the right. The "view your profile" is not shown on
http://wordpress.org/extend/plugins/.

I guess the same link would be useful there.

Thanks again.
--
Vin?cius Massuchetto

From mirepup at gmail.com  Mon Nov 23 05:04:15 2009
From: mirepup at gmail.com (Jeff Rose)
Date: Sun, 22 Nov 2009 21:04:15 -0800
Subject: [wp-hackers] Update post status
Message-ID: <b825b2cd0911222104t30885b5em3cc2b17e911ffb0d@mail.gmail.com>

Thanks Russ Gilbert for the reply regarding the wp_update_post function but
it isn't exactly what I was after, although that is the correct way to
update the post's information.

What I'm looking to do is trigger the correct function when the STATUS
changes. Like I said - when I update the post from DRAFT to FUTURE, is there
something more to do than set the status to FUTURE, and make sure the date
is in the future?

-- 
Jeff Rose
------------------
http://www.twitter.com/JeffRose
http://www.linkedin.com/in/JeffeRose
http://www.installedforyou.com

From batmoo at gmail.com  Mon Nov 23 05:29:14 2009
From: batmoo at gmail.com (Mohammad Jangda)
Date: Mon, 23 Nov 2009 00:29:14 -0500
Subject: [wp-hackers] Update post status
In-Reply-To: <b825b2cd0911222104t30885b5em3cc2b17e911ffb0d@mail.gmail.com>
References: <b825b2cd0911222104t30885b5em3cc2b17e911ffb0d@mail.gmail.com>
Message-ID: <eaaa36c90911222129q1d69af2cg85ce5e76ff26a2@mail.gmail.com>

>
> What I'm looking to do is trigger the correct function when the STATUS
> changes. Like I said - when I update the post from DRAFT to FUTURE, is
> there
> something more to do than set the status to FUTURE, and make sure the date
> is in the future?
>
>
You can use the action transition_post_status. Or if you want to trigger
only on specific status changes (i.e. to take action only when a post DRAFT
to FUTURE/PUBLISH) use ${old_status}_to_$new_status.

Details here: http://codex.wordpress.org/Post_Status_Transitions

--
Mo Jangda
www.digitalize.ca | @mjangda

From frank at bueltge.de  Mon Nov 23 15:37:36 2009
From: frank at bueltge.de (Frank Bueltge)
Date: Mon, 23 Nov 2009 16:37:36 +0100
Subject: [wp-hackers] Multilanguage Support in 2.9rare
In-Reply-To: <A160431F-46B7-495A-84AA-C1D100DD6A7D@ftwr.co.uk>
References: <db047a770911200025s323e5eb0lb7e9c0c22d7466ea@mail.gmail.com> 
	<A160431F-46B7-495A-84AA-C1D100DD6A7D@ftwr.co.uk>
Message-ID: <db047a770911230737o3adc8c67u6a420df943a20cc8@mail.gmail.com>

Hello Peter,

thanks for your reply, works fine with fr_FR, not with de_DE.
I will see for this problem on the german team.
Thanks a lot

http://inpsyde.com
http://pressthis.de




On Sun, Nov 22, 2009 at 3:51 PM, Peter Westwood
<peter.westwood at ftwr.co.uk> wrote:
>
> On 20 Nov 2009, at 08:25, Frank Bueltge wrote:
>
>> with the last update before 2 days and today on the nightly build it
>> is not possiblt to use a other language. Do you have an idea?
>> I have install the language-folder in wp-content with the
>> languages-files (de_DE) and have also set the constant in the
>> wp-config.php
>>
>> Also, all plugins dosnt work with other language. The same problem is
>> on my dev-area on local machine.
>>
>
> I have just tested this on trunk (with fr_FR.mo) and it all appears to work.
>
> Is it still not working for you?
>
> Cheers
> --
> Peter Westwood
> http://blog.ftwr.co.uk | http://westi.wordpress.com
> C53C F8FC 8796 8508 88D6 C950 54F4 5DCD A834 01C5
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From peter.westwood at ftwr.co.uk  Mon Nov 23 22:42:07 2009
From: peter.westwood at ftwr.co.uk (Peter Westwood)
Date: Mon, 23 Nov 2009 22:42:07 +0000
Subject: [wp-hackers] WordPress dev chat will not be happening this week.
Message-ID: <7A131B06-BBD7-43CE-9759-A265D1CE5727@ftwr.co.uk>

Hi All,

Just a heads up for those of you who are interested.

The next dev chat will be on Thursday 3rd December at the usual time  
of 9PM UTC.

This weeks is skipped due to Thanksgiving.

As usual agenda items can be suggested here: http://wpdevel.wordpress.com/

Thanks

Westi
-- 
Peter Westwood
http://blog.ftwr.co.uk | http://westi.wordpress.com
C53C F8FC 8796 8508 88D6 C950 54F4 5DCD A834 01C5


From otto at ottodestruct.com  Mon Nov 23 23:17:13 2009
From: otto at ottodestruct.com (Otto)
Date: Mon, 23 Nov 2009 17:17:13 -0600
Subject: [wp-hackers] Options for Controller - Views
In-Reply-To: <4B0711FB.3090006@santosj.name>
References: <4B0711FB.3090006@santosj.name>
Message-ID: <161617690911231517q50c46dd2t48b22f6264c12167@mail.gmail.com>

I still don't understand the problem, exactly. It seems perfectly
clear and separated to me. I think you're conflating what each piece
does and trying to make things do something they were never designed
to do.

It's really quite simple.

URL comes in, gets grabbed.
WP_Rewrite parses it, sets up query_vars.
WP_Query is loaded and uses query_vars to get database data. Also sets
some internal flags.
template-loader.php is loaded last, and uses those flags to determine
the correct view.

Where is the disconnect between these? WP_Rewrite is relatively easy
to adjust and change if you know regexp. WP_Query is less easy to
change, but often it's unnecessary to mess with if you're loading
custom data. And the template-loader couldn't really be any more
simple, though it probably could be more efficient.

Let's try another approach: What is it that you want to do that you're
finding very difficult to do? Because I think you're simply
doing-it-wrong, somehow. If you want to "replace" WordPress' control,
than that's really not at all difficult to do.

-Otto
Sent from Memphis, TN, United States


On Fri, Nov 20, 2009 at 4:02 PM, Jacob Santos <wordpress at santosj.name> wrote:
> Okay, so looking at the issue, it seems I had thought that the WP_Query was
> the router, but really it is WP_Rewrite. Also, it seems that too much is
> really just tied to WordPress itself and requires work to extend with other
> uses. In my opinion, WP_Rewrite and WP_Query can exist, but new code can be
> created for WordPress that is more generic that the two classes can then
> use.
>
> In this way, the Router, URI, and Controller can be separated in to their
> own easily identified components. The Views can also be changed to not be
> based off of the template loader file.
>
> I believe the problem is that too much of the code is affecting WordPress
> and it is difficult to see how to work within the parameters to add and
> change. In this way the entire set up is really a hack provided to allow for
> other people to extend WordPress but not really take it and replace
> WordPress cleanly.
>
> Part of the issue is lack of documentation and well, if no one is going to
> step up that knows it well enough (I can't get the code to work that is on
> the Codex) then really, when I write the new code, I'll be sure to write out
> a detailed explanation.
>
> You know if someone wants to help, I can create a ticket and apply the
> patches when I have something. Or if someone wants to take it in a new
> direction, I think, if there are multiple implementations then the best one
> can be looked at. (Also I will probably "steal" it for my own project.)
>
> Jacob Santos
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From shinji at elite-systems.org  Tue Nov 24 01:37:45 2009
From: shinji at elite-systems.org (Robert Pendell)
Date: Mon, 23 Nov 2009 20:37:45 -0500
Subject: [wp-hackers] Changing the maintenance mode text
Message-ID: <a13b5a590911231737u70cce898uaa6e3ae3b4800a89@mail.gmail.com>

Is there anyway to change the maintenance mode text displayed without using
a plugin?

Robert Pendell
shinji at elite-systems.org
CAcert Assurer
"A perfect world is one of chaos."

From matt at sivel.net  Tue Nov 24 01:39:40 2009
From: matt at sivel.net (Matt Martz)
Date: Mon, 23 Nov 2009 20:39:40 -0500
Subject: [wp-hackers] Changing the maintenance mode text
In-Reply-To: <a13b5a590911231737u70cce898uaa6e3ae3b4800a89@mail.gmail.com>
References: <a13b5a590911231737u70cce898uaa6e3ae3b4800a89@mail.gmail.com>
Message-ID: <518fa9630911231739l70f4e964w95460cd4dbd7b7b4@mail.gmail.com>

> Is there anyway to change the maintenance mode text displayed without using
> a plugin?

Take a look at http://sivel.net/2009/06/wordpress-maintenance-mode-without-a-plugin-part-2/

-- 
Matt Martz
matt at sivel.net
http://sivel.net/

From mark at watero.us  Tue Nov 24 01:58:33 2009
From: mark at watero.us (mark waterous)
Date: Mon, 23 Nov 2009 17:58:33 -0800
Subject: [wp-hackers] Changing the maintenance mode text
In-Reply-To: <a13b5a590911231737u70cce898uaa6e3ae3b4800a89@mail.gmail.com>
References: <a13b5a590911231737u70cce898uaa6e3ae3b4800a89@mail.gmail.com>
Message-ID: <001a01ca6ca9$a1533c60$e3f9b520$@us>

> Is there anyway to change the maintenance mode text displayed without
> using a plugin?
> 
> Robert Pendell

Sure is, but instead of explaining it all here, howsabout I point you in the
direction of Matt's page on it?

http://sivel.net/2009/06/wordpress-maintenance-mode-without-a-plugin/

--
Mark Waterous
http://mark.watero.us/
(mark at watero.us) 



From shinji at elite-systems.org  Tue Nov 24 03:16:49 2009
From: shinji at elite-systems.org (Robert Pendell)
Date: Mon, 23 Nov 2009 22:16:49 -0500
Subject: [wp-hackers] Changing the maintenance mode text
In-Reply-To: <001a01ca6ca9$a1533c60$e3f9b520$@us>
References: <a13b5a590911231737u70cce898uaa6e3ae3b4800a89@mail.gmail.com>
	<001a01ca6ca9$a1533c60$e3f9b520$@us>
Message-ID: <a13b5a590911231916w3a776b56j4516a591fa50ab3c@mail.gmail.com>

Thanks to both of you.  I had seen the first part which is how I found out
about the .maintenance file to begin with but my eyes completely overlooked
the part 2 link.

Robert Pendell
shinji at elite-systems.org
CAcert Assurer
"A perfect world is one of chaos."

From burobjorn at gmail.com  Tue Nov 24 19:55:17 2009
From: burobjorn at gmail.com (Bjorn Wijers)
Date: Tue, 24 Nov 2009 20:55:17 +0100
Subject: [wp-hackers] WP as a CMS with a touch of Blogging
In-Reply-To: <EF964153-648C-4186-87F6-5E8EFE7137EC@xentek.net>
References: <f38206c90911191738s29b2c546w95315ae06053864b@mail.gmail.com>	<32c7967e0911191809g46a0d2a2jdfa4cd33c6ae005f@mail.gmail.com>	<f5aa06cf0911191824l375ef1e4idfcef23f43ce0dc8@mail.gmail.com>	<eccf1e7c0911200450x6f6c82fs846edd7de78b405d@mail.gmail.com>	<7235ce780911200751g5cac15c1r63c99e77e3cb68ad@mail.gmail.com>
	<EF964153-648C-4186-87F6-5E8EFE7137EC@xentek.net>
Message-ID: <4B0C3A25.1090402@gmail.com>

>> Owen Winkler's redirectify is the simplest. (sadly no longer available
>> but
>> email me privately and I'll send you a copy.)
> 
> 
> Mike,
> 
> If the plugin still works, is open source, and isn't in the Plugin DB,
> consider cleaning it up, crediting the original author, and publishing
> it there - especially if Owen doesn't want to mess with it anymore.

I stumbled across this thread and wanted to mention that I've just
uploaded my redirect plugin bbRedirector today. It should be available
shortly (just committed the first version to svn).

I've created it some time ago for a client and finally had some time to
clean it up and share it with the rest of the world. Perhaps it is
helpful for you.

See:
http://wordpress.org/extend/plugins/bbredirector/

-- 

met vriendelijke groet,
Bjorn Wijers

* b u r o b j o r n .nl *
digitaal vakmanschap | digital craftsmanship

Concordiastraat 68-126
3551 EM Utrecht
The Netherlands

phone: +31 6 49 74 78 70
http://www.burobjorn.nl

From tim at silentgap.com  Tue Nov 24 22:21:39 2009
From: tim at silentgap.com (Tim Schoffelman)
Date: Tue, 24 Nov 2009 16:21:39 -0600
Subject: [wp-hackers] comments_number() function renames first parameter
Message-ID: <5b1aecc0911241421u10f10758i97ed163a3f931bcc@mail.gmail.com>

Hey Everyone,

Running into a interesting situation to which I can't find any documentation
in the codex on it.

I want to display the number of comments for each post using either the

<?php comments_number(__('comment',"blogname"), __('1 comment', "blogname"),
__('% comments', "blogname")); ?>

or the

<?php comments_popup_link(__('comment', "blogname"), __('1 comment',
"blogname"), __('% comments', "blogname")); ?>

functions.

The problem is that when the page is loading it displays "comment" (which I
want) if I have zero comments, but one of the last things that it does is
right before it's finished loading the page, "comment" changes to "Comments
(0)". It doesn't matter if I take out the localization either.

Also, I'm running WordPress MU 2.8.4a

Any thoughts?

Thanks!
Tim Schoffelman

From tim at silentgap.com  Tue Nov 24 22:22:47 2009
From: tim at silentgap.com (Tim Schoffelman)
Date: Tue, 24 Nov 2009 16:22:47 -0600
Subject: [wp-hackers] comments_number() function renames first parameter
In-Reply-To: <5b1aecc0911241421u10f10758i97ed163a3f931bcc@mail.gmail.com>
References: <5b1aecc0911241421u10f10758i97ed163a3f931bcc@mail.gmail.com>
Message-ID: <5b1aecc0911241422w7d3a8251od0bf6b67be6dbf05@mail.gmail.com>

Also, I'm running the Intense Debate plugin (latest version), which now that
I'm thinking about it, may be the issue - checking...



On Tue, Nov 24, 2009 at 4:21 PM, Tim Schoffelman <tim at silentgap.com> wrote:

> Hey Everyone,
>
> Running into a interesting situation to which I can't find any
> documentation in the codex on it.
>
> I want to display the number of comments for each post using either the
>
> <?php comments_number(__('comment',"blogname"), __('1 comment',
> "blogname"), __('% comments', "blogname")); ?>
>
> or the
>
> <?php comments_popup_link(__('comment', "blogname"), __('1 comment',
> "blogname"), __('% comments', "blogname")); ?>
>
> functions.
>
> The problem is that when the page is loading it displays "comment" (which I
> want) if I have zero comments, but one of the last things that it does is
> right before it's finished loading the page, "comment" changes to "Comments
> (0)". It doesn't matter if I take out the localization either.
>
> Also, I'm running WordPress MU 2.8.4a
>
> Any thoughts?
>
> Thanks!
> Tim Schoffelman
>

From tim at silentgap.com  Tue Nov 24 22:31:58 2009
From: tim at silentgap.com (Tim Schoffelman)
Date: Tue, 24 Nov 2009 16:31:58 -0600
Subject: [wp-hackers] comments_number() function renames first parameter
In-Reply-To: <5b1aecc0911241422w7d3a8251od0bf6b67be6dbf05@mail.gmail.com>
References: <5b1aecc0911241421u10f10758i97ed163a3f931bcc@mail.gmail.com>
	<5b1aecc0911241422w7d3a8251od0bf6b67be6dbf05@mail.gmail.com>
Message-ID: <5b1aecc0911241431q6c4e31dlb53e094956345107@mail.gmail.com>

Ok, Nevermind - it looks like Intense Debate was overriding my functions -
everyone can go about your business - thanks!


On Tue, Nov 24, 2009 at 4:22 PM, Tim Schoffelman <tim at silentgap.com> wrote:

> Also, I'm running the Intense Debate plugin (latest version), which now
> that I'm thinking about it, may be the issue - checking...
>
>
>
>
> On Tue, Nov 24, 2009 at 4:21 PM, Tim Schoffelman <tim at silentgap.com>wrote:
>
>> Hey Everyone,
>>
>> Running into a interesting situation to which I can't find any
>> documentation in the codex on it.
>>
>> I want to display the number of comments for each post using either the
>>
>> <?php comments_number(__('comment',"blogname"), __('1 comment',
>> "blogname"), __('% comments', "blogname")); ?>
>>
>> or the
>>
>> <?php comments_popup_link(__('comment', "blogname"), __('1 comment',
>> "blogname"), __('% comments', "blogname")); ?>
>>
>> functions.
>>
>> The problem is that when the page is loading it displays "comment" (which
>> I want) if I have zero comments, but one of the last things that it does is
>> right before it's finished loading the page, "comment" changes to "Comments
>> (0)". It doesn't matter if I take out the localization either.
>>
>> Also, I'm running WordPress MU 2.8.4a
>>
>> Any thoughts?
>>
>> Thanks!
>> Tim Schoffelman
>>
>
>

From wordpress at santosj.name  Wed Nov 25 00:56:33 2009
From: wordpress at santosj.name (Jacob Santos)
Date: Tue, 24 Nov 2009 18:56:33 -0600
Subject: [wp-hackers] The problem with WP_Rewrite <<< RE: Options for
	Controller - Views
Message-ID: <4B0C80C1.5070502@santosj.name>

My main problem with wanting to rewrite it and I apologize for going off 
on a tangent, is that I shouldn't have to think and test as much as I do 
when working with WP_Rewrite. I shouldn't have to do all sorts of calls 
to functions to set up a rewrite when all I need to do is use one hook. 
Why do I have to use the long way, when I can just use the shortcut 
named template_redirect.

My point is why even have all of that code when you have to use 
template_redirect anyway.

You are telling me and actually believe that it is an excellent idea, 
which I can't understand, that I can either spend hours going through 
and using WP_Rewrite just to have to use template_redirect. You are 
basically telling me that my only advantage is that I won't get the 404 
title when WP_Query parses the query vars and determines that the page 
doesn't exist.

So the option is spend four hours on just getting WP_Rewrite to work, 
and then another 10 to 30 minutes to get template_redirect working with 
the query_vars.

OR

I can spend an extra 20 minutes doing my own regex or request_uri 
parsing. Yeah, sure, the only advantage I'll get is that my 
template_redirect won't make you cringe when you look at it.

I think the high learning curve is driving many people away. It doesn't 
work like you would assume it will work and requires a lot of extra work 
that has to be done exactly right in order to work correctly.

What I'm talking about is a single function which is it, one single 
function that can be called anywhere and will bypass WP_Query 
completely. WP_Query will use the new system, thus giving a better idea 
and an example of how plugin developers should be doing it. I'm talking 
about a clear and easy API which is not so tightly integrated in to 
WordPress that you need to bypass WordPress after WordPress has already 
processed everything in order to do what you wanted.

Now, sure, I'll give you that once I am able to get the WP_Rewrite 
working once and understand what is going on, it will take a lot less 
time, but it doesn't work as many of the other controllers 
implementations out there do. I think that it is incomplete, everything 
right now was written not to allow for extension, but to allow for 
WordPress to kind of have a sort of front controller implementation.

It is actually quite impressive for its time, but that was years ago and 
I think it is time for a little bit change. Yeah, sure it works and has 
been working for a long, long time with minor or no issues, but I want 
to change that. I want to rewrite a tiny and critical subset of 
WordPress that will have bugs, features that people won't need and may 
not use for a long time. I will do this, because it suits my needs and I 
want to manage another component for some time before it gets passed off 
to anyone who will manage it after me.

I mean, it will probably be 6 months to a year before it is reviewed for 
inclusion in to WordPress. Also, it might be useful to someone who 
wishes to take my idea in the future and apply it to WordPress and 
hopefully is capable enough to not include bugs or fix the ones in my 
implementation.

I should have left a note saying that I won't be able to do this for 
another 2 weeks at least. I keep thinking about doing this, but it is 
time consuming and before I was doing it for WordPress and I was unsure 
if any of the ones with commit access would commit it. I didn't want to 
spend the weeks writing it and then take the risk of it not being 
committed. Now that I'm doing it for me, I'm less concerned about that. 
I'm saying it might be soon or it might not, but I wanted to know what 
everyone else would like the direction to be.

Jacob Santos

From elrabino at gmail.com  Wed Nov 25 02:24:17 2009
From: elrabino at gmail.com (Daniel Dvorkin)
Date: Wed, 25 Nov 2009 00:24:17 -0200
Subject: [wp-hackers] (Another) problem with WP_Rewrite - The
	too-many-pages-bug
Message-ID: <f5aa06cf0911241824x109e4e78y5c03eb72c77386a8@mail.gmail.com>

Hi,

I stumbled across this bug:??http://core.trac.wordpress.org/ticket/10798
It's really messy.

Changing the $use_verbose_page_rules to false in the WP_rewrite class,
seems to solve the problem... In fact, everything that I checked works
fine now.

But I need to understand what else modifies that change... and I can't
find any information...


Thanks!

From wordpress at santosj.name  Wed Nov 25 05:09:05 2009
From: wordpress at santosj.name (Jacob Santos)
Date: Tue, 24 Nov 2009 23:09:05 -0600
Subject: [wp-hackers] (Another) problem with WP_Rewrite - The
	too-many-pages-bug
In-Reply-To: <f5aa06cf0911241824x109e4e78y5c03eb72c77386a8@mail.gmail.com>
References: <f5aa06cf0911241824x109e4e78y5c03eb72c77386a8@mail.gmail.com>
Message-ID: <4B0CBBF1.4060909@santosj.name>

Actually, that is part of the WordPress WP_Rewrite feature. It allows 
for easily finding paths that are completely dynamic.

For example, most web sites would have that hard coded into the 
controller, but since WordPress allows for customizing the rewrite rules 
to the extreme, it would be almost impossible to allow for the extension 
using my code. Therefore, I mean, I would allow you to use the hard 
coded rewrites, if you wish and probably set up a few of them to use 
them, since it is the same as in WordPress. It is just that with 
postnames, it would be too slow to do all of the queries needed to get 
what you were looking at otherwise.

Not really scalable when you get up to the tens of thousands or for some 
just thousands of posts. So, what I'm trying to say, is that it wouldn't 
be fixed with my rewrite of the WP_Rewrite and WP_Query components.

Jacob Santos

Daniel Dvorkin wrote:
> Hi,
>
> I stumbled across this bug:  http://core.trac.wordpress.org/ticket/10798
> It's really messy.
>
> Changing the $use_verbose_page_rules to false in the WP_rewrite class,
> seems to solve the problem... In fact, everything that I checked works
> fine now.
>
> But I need to understand what else modifies that change... and I can't
> find any information...
>
>
> Thanks!
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>   

From dan at jallits.com  Wed Nov 25 22:46:56 2009
From: dan at jallits.com (Daniel Craig Jallits)
Date: Wed, 25 Nov 2009 16:46:56 -0600
Subject: [wp-hackers] Post Correct Timezone with DST
Message-ID: <9FB917B4-4F35-4AFD-91B7-2B8C2D3E5B38@jallits.com>

I want to display either Central Daylight Time (CDT) or Central  
Standard Time (CST) as part of my post's timestamp [single.php]. I  
have RTFM and searched the codex plus google with no positive results.  
Can anyone point me in the right direction?

_____________________________
Daniel Craig Jallits
3427 N. Paulina Street #1
Chicago, Illinois, 60657-1220
United States of America
(312) 613 0537 | http://jallits.com/


From zack at grossbart.com  Thu Nov 26 00:15:36 2009
From: zack at grossbart.com (Zack Grossbart)
Date: Wed, 25 Nov 2009 19:15:36 -0500
Subject: [wp-hackers] Adding an editorial calendar to WordPress
Message-ID: <CMEPJALLEOLCIEPMHPBKOEOCEJAA.zack@grossbart.com>

Hello Everyone,

This is my first post to this list.  I'm working on a new plugin that adds an
editorial calendar to WordPress.

http://wordpress.org/extend/plugins/editorial-calendar

This plugin allows users to see all of their posts in a calendar view and drag
and drop them to manage their blog.  You can try a demo at:

http://www.zackgrossbart.com/extras/sandbox/wp-admin

I wrote this plugin with the hope of contributing it to the WordPress core.  It
provides functionality that most bloggers want and is missing from WordPress
right now.  I opened a Trac ticket for this
(http://core.trac.wordpress.org/ticket/11252) and Denis-de-Bernardy and nacin
voted for leaving it as a plugin.  However, they encouraged me to contact the
list and see if I could build traction in the community.

So what do you think?  Should this stay as a plugin or be considered for the
WordPress core?

Thanks in advance for the help.

Cheers,
Zack


From dan at jallits.com  Thu Nov 26 00:54:35 2009
From: dan at jallits.com (Daniel Craig Jallits)
Date: Wed, 25 Nov 2009 18:54:35 -0600
Subject: [wp-hackers] Adding an editorial calendar to WordPress
In-Reply-To: <CMEPJALLEOLCIEPMHPBKOEOCEJAA.zack@grossbart.com>
References: <CMEPJALLEOLCIEPMHPBKOEOCEJAA.zack@grossbart.com>
Message-ID: <F6C952D0-224A-4597-8D5B-80A43CB0C60B@jallits.com>

Hey Zack:

I am new too the list too, well actually just coming back after a  
prolonged hiatus. However, I have been an avid WordPress user since  
'03; using it to deploy hundreds of client sites. I think your plugin  
is marvelous, but would agree that this is more suited as a plugin  
than it is a core function. Thank you for your contribution though, I  
know one client who would find this useful.
_____________________________
Daniel Craig Jallits
3427 N. Paulina Street #1
Chicago, Illinois, 60657-1220
United States of America
(312) 613 0537 | http://jallits.com/

From jer at simianuprising.com  Thu Nov 26 16:01:50 2009
From: jer at simianuprising.com (Jeremy Clarke)
Date: Thu, 26 Nov 2009 11:01:50 -0500
Subject: [wp-hackers] Adding an editorial calendar to WordPress
In-Reply-To: <CMEPJALLEOLCIEPMHPBKOEOCEJAA.zack@grossbart.com>
References: <CMEPJALLEOLCIEPMHPBKOEOCEJAA.zack@grossbart.com>
Message-ID: <e1202cb10911260801s283d6850tc6460150c4ed885f@mail.gmail.com>

On Wed, Nov 25, 2009 at 7:15 PM, Zack Grossbart <zack at grossbart.com> wrote:

> So what do you think?  Should this stay as a plugin or be considered for
> the
> WordPress core?
>

The screenshots look beautiful and it looks like a really well thought-out
tool but i have to agree with the others, this should stay as a plugin. I
think for most people the normal Posts > Edit screen suffices for getting a
sense of when things were posted because it is chronological. Some people
would find your calendar useful, but IMHO for most people it would just be
another confusing menu item to deal with.

On a side note, I think what the Posts > Edit screen needs to be more
editorially useful is better filtering like author-based, and to display the
active filters in the page heading. Right now it just says 'Edit Posts' even
if you've applied month, category, tag or author filters (you can add more
filters than are visible using urls).

-- 
Jeremy Clarke | http://jeremyclarke.org
Code and Design | http://globalvoicesonline.org

From zack at grossbart.com  Thu Nov 26 17:09:32 2009
From: zack at grossbart.com (Zack Grossbart)
Date: Thu, 26 Nov 2009 12:09:32 -0500
Subject: [wp-hackers] Adding an editorial calendar to WordPress
In-Reply-To: <e1202cb10911260801s283d6850tc6460150c4ed885f@mail.gmail.com>
Message-ID: <CMEPJALLEOLCIEPMHPBKOEOMEJAA.zack@grossbart.com>

Thank you all for taking a look.  I always think about managing a blog as a
calendar, but you guys are probably in a better position to know how most
bloggers work.  Adding a new top level menu option is a big change.

I'll keep working on it as a plugin.  Thanks for all the help.

Cheers,
Zack

> -----Original Message-----
> From: wp-hackers-bounces at lists.automattic.com
> [mailto:wp-hackers-bounces at lists.automattic.com]On Behalf Of Jeremy
> Clarke
> Sent: Thursday, November 26, 2009 11:02 AM
> To: wp-hackers at lists.automattic.com
> Subject: Re: [wp-hackers] Adding an editorial calendar to WordPress
>
>
> On Wed, Nov 25, 2009 at 7:15 PM, Zack Grossbart <zack at grossbart.com> wrote:
>
> > So what do you think?  Should this stay as a plugin or be considered for
> > the
> > WordPress core?
> >
>
> The screenshots look beautiful and it looks like a really well thought-out
> tool but i have to agree with the others, this should stay as a plugin. I
> think for most people the normal Posts > Edit screen suffices for getting a
> sense of when things were posted because it is chronological. Some people
> would find your calendar useful, but IMHO for most people it would just be
> another confusing menu item to deal with.
>
> On a side note, I think what the Posts > Edit screen needs to be more
> editorially useful is better filtering like author-based, and to display the
> active filters in the page heading. Right now it just says 'Edit Posts' even
> if you've applied month, category, tag or author filters (you can add more
> filters than are visible using urls).
>
> --
> Jeremy Clarke | http://jeremyclarke.org
> Code and Design | http://globalvoicesonline.org
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers


From batmoo at gmail.com  Thu Nov 26 17:38:38 2009
From: batmoo at gmail.com (Mohammad Jangda)
Date: Thu, 26 Nov 2009 12:38:38 -0500
Subject: [wp-hackers] Adding an editorial calendar to WordPress
In-Reply-To: <CMEPJALLEOLCIEPMHPBKOEOMEJAA.zack@grossbart.com>
References: <e1202cb10911260801s283d6850tc6460150c4ed885f@mail.gmail.com> 
	<CMEPJALLEOLCIEPMHPBKOEOMEJAA.zack@grossbart.com>
Message-ID: <eaaa36c90911260938nd0523e7r97a34053a57d8032@mail.gmail.com>

>
> I always think about managing a blog as a calendar


That is actually an interesting approach and would be useful to a many
WordPress, particularly content-heavy ones with a large set of
authors/editors. But I agree that this is better served as a plugin -- the
existing Edit Posts page does the job well enough in majority of cases.

I was actually going to build something similar to this for one of my
plugins (http://wordpress.org/extend/plugins/edit-flow/); maybe we could
integrate the two? I'll contact you offline.

--
Mohammad Jangda
www.digitalize.ca | @mjangda

From wp-hackers at google-adsense-templates.co.uk  Thu Nov 26 17:41:37 2009
From: wp-hackers at google-adsense-templates.co.uk (wp-hackers at google-adsense-templates.co.uk)
Date: Thu, 26 Nov 2009 17:41:37 +0000
Subject: [wp-hackers] [Plugin: SEO Super Comments] Extending the Code
Message-ID: <66ftg51il9lr69li3e31qk2r4trt7r4ucm@4ax.com>

I posted this question to
http://wordpress.org/support/topic/335137?replies=1 but so far no joy.
hoping I get some pointers here.

I've been playing around with a plugin called SEO Super Comments
http://www.prelovac.com/vladimir/wordpress-plugins/seo-super-comments
which creaes a page for each comment.

Got it working at
http://www.45-year-old-millionaire.co.uk/what-is-twitter-marketing.html#comments
(though had to hack my themes code to get it working as I wanted it).

Example comment page
http://www.45-year-old-millionaire.co.uk/what-is-twitter-marketing.html?cid=4848

Cool concept for an SEO plugin, but it's not perfect.

What I want to do now is only show the link code when a comment is X
number of words or charachters, so a long comment gets it's own page
(created by the plugin) while small comments don't get the link. Right
now a single word comment gets it's own page which is bad SEO wise.

So I'm trying to figure out the code for this and not sure where to
start. Is there a variable or something that counts the number of
words in a comment for example? If there is I could use it as part of
a if statement.

David

From yok2504 at gmail.com  Thu Nov 26 18:00:21 2009
From: yok2504 at gmail.com (Sinan)
Date: Thu, 26 Nov 2009 20:00:21 +0200
Subject: [wp-hackers] =?utf-8?q?hello_everybody_=C4=B1_have_a_question?=
Message-ID: <64aa440d0911261000t45a93bd0i6314a2baf37c2135@mail.gmail.com>

*hello everybody ? have a question like **post sidebar*

? find the like this plug in or *functions*, how can ? do this.

screen question : http://i49.tinypic.com/16knot4.png

*my english bad sorry :)*

[image: 16knot4.png]

From otto at ottodestruct.com  Thu Nov 26 19:24:40 2009
From: otto at ottodestruct.com (Otto)
Date: Thu, 26 Nov 2009 13:24:40 -0600
Subject: [wp-hackers] The problem with WP_Rewrite <<< RE: Options for
	Controller - Views
In-Reply-To: <4B0C80C1.5070502@santosj.name>
References: <4B0C80C1.5070502@santosj.name>
Message-ID: <161617690911261124v3a8258abl46c603abdf5efe9a@mail.gmail.com>

On Tue, Nov 24, 2009 at 6:56 PM, Jacob Santos <wordpress at santosj.name> wrote:
> My main problem with wanting to rewrite it and I apologize for going off on
> a tangent, is that I shouldn't have to think and test as much as I do when
> working with WP_Rewrite. I shouldn't have to do all sorts of calls to
> functions to set up a rewrite when all I need to do is use one hook. Why do
> I have to use the long way, when I can just use the shortcut named
> template_redirect.
>
> My point is why even have all of that code when you have to use
> template_redirect anyway.

Umm... because template_redirect and WP_Rewrite don't do the same
things in any way, shape, or form?

- You use template_redirect to change the final output of the
WordPress system, to basically create a custom "view".
- You use WP_Rewrite to parse the URL into query_variables.

These aren't even close to similar. They have absolutely zero to do
with each other. Why in the world would you want to combine them in
any real way?

> You are telling me and actually believe that it is an excellent idea, which
> I can't understand, that I can either spend hours going through and using
> WP_Rewrite just to have to use template_redirect. You are basically telling
> me that my only advantage is that I won't get the 404 title when WP_Query
> parses the query vars and determines that the page doesn't exist.

No, I'm telling you that you're completely confusing these two
entirely separate and different subsystems, and I really don't
understand why.

Also, hours? It's like 5 lines of code to add a new rewrite rule. I
would think that the "add_rewrite_rule" function is relatively
straightforward. The add_tag stuff is even easier, if you want to
stick close to the existing structures.

Okay, the flush rules stuff could be done better, I grant you. This is
a speed optimization that needs to be worked on.

> I think the high learning curve is driving many people away. It doesn't work
> like you would assume it will work and requires a lot of extra work that has
> to be done exactly right in order to work correctly.

Okay, I'm no super-genius, but I understood exactly what it was doing
in about 30 minutes. It works exactly the way I expect it to work.

I am totally and completely confused with your concept of somehow
integrating the rewrite parsing system into the controller and router.
That makes little sense to me. It confused me with the Zend MVC system
as well, because (and this is key) I don't want URLs to immediately
direct to a specific view, I want URLs to determine dynamic
parameters.

URLs are not Views. If I have a URL like /tag/whatever then I might
want to set $tag=whatever, not to direct to the "tag" view with
"whatever" as a parameter. Because what if I want to combine
parameters? How would your concept handle /category/X/tag/Y ?

> I think that it is incomplete, everything right now was written not to allow
> for extension, but to allow for WordPress to kind of have a sort of front
> controller implementation.

On the contrary, I find the WordPress system to be far more flexible,
easier to understand, and easier to use.

I would absolutely not support your system without a better
explanation of exactly what the hell you're talking about. Because
what you're describing, as I see it, is a massive step backwards.

-Otto

From mikeschinkel at newclarity.net  Thu Nov 26 19:58:21 2009
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Thu, 26 Nov 2009 14:58:21 -0500
Subject: [wp-hackers] The problem with WP_Rewrite <<< RE: Options for
	Controller - Views
In-Reply-To: <161617690911261124v3a8258abl46c603abdf5efe9a@mail.gmail.com>
References: <4B0C80C1.5070502@santosj.name>
	<161617690911261124v3a8258abl46c603abdf5efe9a@mail.gmail.com>
Message-ID: <8B9D5A49-3CE6-4661-9B3B-EBCF617B3E99@newclarity.net>

On Nov 26, 2009, at 2:24 PM, Otto wrote:
> Also, hours? It's like 5 lines of code to add a new rewrite rule. I
> would think that the "add_rewrite_rule" function is relatively
> straightforward. The add_tag stuff is even easier, if you want to
> stick close to the existing structures.
> 
> ....
> 
> Okay, I'm no super-genius, but I understood exactly what it was doing
> in about 30 minutes. It works exactly the way I expect it to work.
> 
> ...
> 
> On the contrary, I find the WordPress system to be far more flexible,
> easier to understand, and easier to use.

Are you open to considering that, per chance, you understand how Wordpress works internally better than perhaps 99.99% of other users, and that for the vast majority of people the way it works is extremely obtuse?

I'm not specifically supporting Jacob's suggestions but currently there are huge difficulties in getting Wordpress to respect the use of URLs that are not designed to support the hardcoded assumptions baked into Wordpress core. What's more, my use cases are not obscure, i.e. "products/{product}", ability to have a list of Posts be children of a Page, and things like that.

Back on the 20th I email you directly with code I wrote that showed how difficult the current system is to work with and I've yet to hear back from you about it.  I know it's not your concern to address my specific needs but that was not why I emailed you the code. I instead sent you the code to demonstrate the problems with the current system; on that you have remaining quite.

My point is that you keep saying how great the current system of URL routing but ignore examples that illustrate that it is not.  A little acknowledgement of the real issues would be nice.

-Mike Schinkel




From scribu at gmail.com  Thu Nov 26 23:41:48 2009
From: scribu at gmail.com (scribu)
Date: Fri, 27 Nov 2009 01:41:48 +0200
Subject: [wp-hackers] [Plugin: SEO Super Comments] Extending the Code
In-Reply-To: <66ftg51il9lr69li3e31qk2r4trt7r4ucm@4ax.com>
References: <66ftg51il9lr69li3e31qk2r4trt7r4ucm@4ax.com>
Message-ID: <349fe48b0911261541k9a48913n8e4939d5654739e6@mail.gmail.com>

On Thu, Nov 26, 2009 at 7:41 PM,
<wp-hackers at google-adsense-templates.co.uk>wrote:

> So I'm trying to figure out the code for this and not sure where to
> start. Is there a variable or something that counts the number of
> words in a comment for example? If there is I could use it as part of
> a if statement.
>

$wordcount = count(split(' ', $comment->content));


-- 
http://scribu.net

From scribu at gmail.com  Thu Nov 26 23:43:26 2009
From: scribu at gmail.com (scribu)
Date: Fri, 27 Nov 2009 01:43:26 +0200
Subject: [wp-hackers] =?utf-8?q?hello_everybody_=C4=B1_have_a_question?=
In-Reply-To: <64aa440d0911261000t45a93bd0i6314a2baf37c2135@mail.gmail.com>
References: <64aa440d0911261000t45a93bd0i6314a2baf37c2135@mail.gmail.com>
Message-ID: <349fe48b0911261543k264b86b2qd817b73428342f52@mail.gmail.com>

Try the PostHaste <http://wordpress.org/extend/plugins/posthaste/> plugin.


On Thu, Nov 26, 2009 at 8:00 PM, Sinan <yok2504 at gmail.com> wrote:

> *hello everybody ? have a question like **post sidebar*
>
> ? find the like this plug in or *functions*, how can ? do this.
>
> screen question : http://i49.tinypic.com/16knot4.png
>
> *my english bad sorry :)*
>
> [image: 16knot4.png]
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>



-- 
http://scribu.net

From matt at mattjacob.com  Fri Nov 27 00:11:13 2009
From: matt at mattjacob.com (Matt Jacob)
Date: Thu, 26 Nov 2009 17:11:13 -0700
Subject: [wp-hackers] [Plugin: SEO Super Comments] Extending the Code
In-Reply-To: <349fe48b0911261541k9a48913n8e4939d5654739e6@mail.gmail.com>
References: <66ftg51il9lr69li3e31qk2r4trt7r4ucm@4ax.com>
	<349fe48b0911261541k9a48913n8e4939d5654739e6@mail.gmail.com>
Message-ID: <410963320911261611o6b69b23apabf8de6590028940@mail.gmail.com>

On Thu, Nov 26, 2009 at 4:41 PM, scribu <scribu at gmail.com> wrote:
>> So I'm trying to figure out the code for this and not sure where to
>> start. Is there a variable or something that counts the number of
>> words in a comment for example? If there is I could use it as part of
>> a if statement.
>>
>
> $wordcount = count(split(' ', $comment->content));

Or even str_word_count(), which is a built-in function.

Matt

From yok2504 at gmail.com  Fri Nov 27 00:16:05 2009
From: yok2504 at gmail.com (Sinan)
Date: Fri, 27 Nov 2009 02:16:05 +0200
Subject: [wp-hackers] =?utf-8?q?hello_everybody_=C4=B1_have_a_question?=
In-Reply-To: <349fe48b0911261543k264b86b2qd817b73428342f52@mail.gmail.com>
References: <64aa440d0911261000t45a93bd0i6314a2baf37c2135@mail.gmail.com> 
	<349fe48b0911261543k264b86b2qd817b73428342f52@mail.gmail.com>
Message-ID: <64aa440d0911261616x22ca2850h5f20f634c9da56e3@mail.gmail.com>

Thank you very much @scribu


2009/11/27 scribu <scribu at gmail.com>

> Try the PostHaste <http://wordpress.org/extend/plugins/posthaste/> plugin.
>
>
> On Thu, Nov 26, 2009 at 8:00 PM, Sinan <yok2504 at gmail.com> wrote:
>
> > *hello everybody ? have a question like **post sidebar*
> >
> > ? find the like this plug in or *functions*, how can ? do this.
> >
> > screen question : http://i49.tinypic.com/16knot4.png
> >
> > *my english bad sorry :)*
> >
> > [image: 16knot4.png]
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers at lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> >
>
>
>
> --
> http://scribu.net
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From wordpress at dd32.id.au  Fri Nov 27 06:53:59 2009
From: wordpress at dd32.id.au (Dion Hulse (dd32))
Date: Fri, 27 Nov 2009 17:53:59 +1100
Subject: [wp-hackers] Adding an editorial calendar to WordPress
In-Reply-To: <CMEPJALLEOLCIEPMHPBKOEOMEJAA.zack@grossbart.com>
References: <CMEPJALLEOLCIEPMHPBKOEOMEJAA.zack@grossbart.com>
Message-ID: <op.u31j36cpspxmuu@dd32>

On Fri, 27 Nov 2009 04:09:32 +1100, Zack Grossbart <zack at grossbart.com>  
wrote:
> I always think about managing a blog as a calendar

I can see how some would feel that way.

But to me, a Blog is a collection of content, with certain meta attached,  
specifically, an order and a date.

I can see how that calender could be useful to those who need to move  
posts between specific dates often, but hats not my usage, My usage would  
be to publish a post on this day, and never worry about the order again.

Seems like a great plugin to achieve what you're wanting however, i just  
dont see the need for it in core either.

In all respects, Its much like the Calender widget, except for the  
backend..
-- 
Using Opera's revolutionary e-mail client: http://www.opera.com/mail/

From malaiac at gmail.com  Fri Nov 27 09:14:37 2009
From: malaiac at gmail.com (Malaiac)
Date: Fri, 27 Nov 2009 10:14:37 +0100
Subject: [wp-hackers] Fwd: [Webmaster Central Help] Site hacked.
Message-ID: <59e7f3130911270114pe9903bex725b35750d545d21@mail.gmail.com>

Regarding http://www.google.com/support/forum/p/Webmasters/thread?fid=2bb823d5af6173a00004794fff8f89b7&hl=en

it seems this is an exploit from older versions of WP.

One of my sites had been hacked with it. Upgrading to 2.8.6 and
overwriting the wp-settings.php file did the job.

M

---------- Forwarded message ----------
From: Google Help <noreply at google.com>
Date: 2009/11/27
Subject: Re: [Webmaster Central Help] Site hacked. Search results
says: "Buy Cheap Viagra Online - Are You Looking For The Cheapest
Viagra ..."
To: malaiac at gmail.com


DerickSchaefer has posted an answer to the question "Site hacked.
Search results says: "Buy Cheap Viagra Online - Are You Looking For
The Cheapest Viagra ..."":

ingenuityworks, JRod and I found the code in side of WP-SETTINGS.PHP
the guidance provided by redleg. Basically, we went into a UNIX shell
and did a find command on all .PHP files that had the phrase
'base64_decode' in it. Three files surfaced and the obvious one was
the one that had the huge ugly string of funny characters in it. In
our case this was WP-SETTINGS.PHP. This could differ in your case.

Two solutions that you can't hurt yourself in trying. One, replace
wp-settings.php or simply upgrade WordPress to the next version.

If you want to search your files and find exactly where this is, go to
a UNIX shell and use the "cd" command to get where your wordpress
files are. For example, cd www <return> and then run a GREP command
like grep "base64_decode" *.php and it will tell you what it sees.

Great thread here guys and thanks to all who helped as this was a
nasty little virus to snoop out and get rid of.

View this question at the Google Help Forum
Unsubscribe from answers to this question

From burobjorn at gmail.com  Fri Nov 27 13:57:50 2009
From: burobjorn at gmail.com (Bjorn Wijers)
Date: Fri, 27 Nov 2009 14:57:50 +0100
Subject: [wp-hackers] What is the best method to check a theme's
	dependencies on plugins?
Message-ID: <4B0FDADE.2000507@gmail.com>

Hi there,

I'm working on a theme which is going to be used in conjunction with a
lot of plugins. So naturally I want to make sure these plugins are all
active and ready for my theme to use, but I'm not sure about the best
way to approach this. Oh, and I need to install this theme on a blog
part of a WP MU install. As far as I can see I have two options:

1) Use this solution posted in 2005:
http://jonathanleighton.com/blog/2005/09/13/wordpress-plugin-dependencies/

2) Or do something like this in the functions.php of my theme, which at
the moment does not seem to work (any hints on why it's not working
appreciated).

[code]
/**
 * Checks if certain plugins are active before this theme can be used.
 * This function is called by the switch_theme() Wordpress action.
 *
 * @access private
 * @param string Theme name
 * @return string theme name or stop and display an error message
 */
if( ! function_exists('_bbtheme_check_dependencies') ) {
  function _bbtheme_check_dependencies($theme_name) {

    // return theme name directly if not using our theme
    if( $theme_name !== 'bbtheme' ) { return $theme_name; }

    // are plugins we need active and available?
    if( ! is_active_plugin('register-plus/register-plus.php') ) {
        die (__('Register Plus not active', $bbtheme_txt_domain) );
    } else if( ! is_active_plugin('userphoto/userphoto.php') ) {
        die (__('User Photo plugin not active.', $bbtheme_txt_domain) );
    }
  }
}

// upon theme activation check dependencies
add_action('switch_theme', '_bbtheme_check_dependencies');

[/code]

Thanks in advance,
-- 

met vriendelijke groet,
Bjorn Wijers

* b u r o b j o r n .nl *
digitaal vakmanschap | digital craftsmanship

Concordiastraat 68-126
3551 EM Utrecht
The Netherlands

phone: +31 6 49 74 78 70
http://www.burobjorn.nl

From wordpress at santosj.name  Fri Nov 27 14:13:23 2009
From: wordpress at santosj.name (Jacob Santos)
Date: Fri, 27 Nov 2009 08:13:23 -0600
Subject: [wp-hackers] The problem with WP_Rewrite <<< RE: Options for
 Controller - Views
In-Reply-To: <161617690911261124v3a8258abl46c603abdf5efe9a@mail.gmail.com>
References: <4B0C80C1.5070502@santosj.name>
	<161617690911261124v3a8258abl46c603abdf5efe9a@mail.gmail.com>
Message-ID: <4B0FDE83.4070508@santosj.name>

Yeah, I'm talking about the controller as a whole, which usually 
includes the URI parsing, the Router, and the classes or in WordPress's 
case, functions. I'm also talking about the views, because the 
controller that is called loads the specific view. Actually, to clear up 
any confusion, the WordPress views, i.e. the templates and their files, 
will not change. The only thing that will change is that there will be 
functions or classes that loads the view, instead of a if...elseif block.

Also, it isn't as if I could remove template_redirect completely. Any 
system would have to be backwards compatible with what exists now, as 
well as existed years ago. Well, at least if I wanted the patch to ever 
be acceptable, besides the whole issue of breakage and its experimental 
nature. I remember doing that one time, thinking, "Well, it should just 
work right if I follow the standard and documentation." Yeah, I learned 
something from that experience, but with the controller implementation, 
I'm not relying on whether or not someone else thought of all of the 
bugs. If there are any bugs or SNAFUs, then it would be all me. I 
couldn't care if it is going to be acceptable for WordPress, I'm doing 
it for me and if anyone wants to see it in WordPress, then so be it.

I'm not asking if WordPress merits a rewrite (more likely a refactor 
into the new system) of the WP_Rewrite and WP_Query. I'm asking if in 
anyone opinion if I should extend the current or replace it. I think of 
the people who have voted, the consensus is that it should be replaced, 
which is what I'm going to attempt to do.

Also, the whole thing about the parameters. That is already possible 
with many controller implementations. Only the most rigid don't allow 
you to do that with the URL string. However, one thing, if you wanted 
/tag/whatever to set $tag = whatever, then do the same thing as setting 
certain parts to parameters for a controller. So you would still send it 
to a controller, it just wouldn't be the "tag" controller class or 
function. Or I mean, it could be the tag controller to save time and 
automatically call the tag controller class which sets the $tag 
parameter to "whatever".

I mean, let me wrote the code and put it up as a patch. You did give me 
more to think about, but I just don't think you are going to convince me 
that WordPress way of doing things is all that intuitive and clean. If 
it was intuitive, then I should have been able to get started a lot 
quicker. Really, I would have to change my whole way of doing things 
from having first started with other frameworks that implement the MVC 
the way it should be to allow for others to work of it.

I'll probably have some code in 4 to 6 weeks, unless life takes me for a 
ride, then probably never, so I'll rather not completely waste your 
time. It might make a good blog post for the next person who succeeds 
me, if I fail. That way you don't have the whole, "Are we really have 
this conversation again?" If we aren't already. I might have brought it 
up ages ago, just not this specific question.

Jacob Santos

Otto wrote:
> On Tue, Nov 24, 2009 at 6:56 PM, Jacob Santos <wordpress at santosj.name> wrote:
>   
>> My main problem with wanting to rewrite it and I apologize for going off on
>> a tangent, is that I shouldn't have to think and test as much as I do when
>> working with WP_Rewrite. I shouldn't have to do all sorts of calls to
>> functions to set up a rewrite when all I need to do is use one hook. Why do
>> I have to use the long way, when I can just use the shortcut named
>> template_redirect.
>>
>> My point is why even have all of that code when you have to use
>> template_redirect anyway.
>>     
>
> Umm... because template_redirect and WP_Rewrite don't do the same
> things in any way, shape, or form?
>
> - You use template_redirect to change the final output of the
> WordPress system, to basically create a custom "view".
> - You use WP_Rewrite to parse the URL into query_variables.
>
> These aren't even close to similar. They have absolutely zero to do
> with each other. Why in the world would you want to combine them in
> any real way?
>
>   
>> You are telling me and actually believe that it is an excellent idea, which
>> I can't understand, that I can either spend hours going through and using
>> WP_Rewrite just to have to use template_redirect. You are basically telling
>> me that my only advantage is that I won't get the 404 title when WP_Query
>> parses the query vars and determines that the page doesn't exist.
>>     
>
> No, I'm telling you that you're completely confusing these two
> entirely separate and different subsystems, and I really don't
> understand why.
>
> Also, hours? It's like 5 lines of code to add a new rewrite rule. I
> would think that the "add_rewrite_rule" function is relatively
> straightforward. The add_tag stuff is even easier, if you want to
> stick close to the existing structures.
>
> Okay, the flush rules stuff could be done better, I grant you. This is
> a speed optimization that needs to be worked on.
>
>   
>> I think the high learning curve is driving many people away. It doesn't work
>> like you would assume it will work and requires a lot of extra work that has
>> to be done exactly right in order to work correctly.
>>     
>
> Okay, I'm no super-genius, but I understood exactly what it was doing
> in about 30 minutes. It works exactly the way I expect it to work.
>
> I am totally and completely confused with your concept of somehow
> integrating the rewrite parsing system into the controller and router.
> That makes little sense to me. It confused me with the Zend MVC system
> as well, because (and this is key) I don't want URLs to immediately
> direct to a specific view, I want URLs to determine dynamic
> parameters.
>
> URLs are not Views. If I have a URL like /tag/whatever then I might
> want to set $tag=whatever, not to direct to the "tag" view with
> "whatever" as a parameter. Because what if I want to combine
> parameters? How would your concept handle /category/X/tag/Y ?
>
>   
>> I think that it is incomplete, everything right now was written not to allow
>> for extension, but to allow for WordPress to kind of have a sort of front
>> controller implementation.
>>     
>
> On the contrary, I find the WordPress system to be far more flexible,
> easier to understand, and easier to use.
>
> I would absolutely not support your system without a better
> explanation of exactly what the hell you're talking about. Because
> what you're describing, as I see it, is a massive step backwards.
>
> -Otto
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>   

From wp-hackers at google-adsense-templates.co.uk  Fri Nov 27 14:39:36 2009
From: wp-hackers at google-adsense-templates.co.uk (wp-hackers at google-adsense-templates.co.uk)
Date: Fri, 27 Nov 2009 14:39:36 +0000
Subject: [wp-hackers] [Plugin: SEO Super Comments] Extending the Code
In-Reply-To: <66ftg51il9lr69li3e31qk2r4trt7r4ucm@4ax.com>
References: <66ftg51il9lr69li3e31qk2r4trt7r4ucm@4ax.com>
Message-ID: <j4pvg55g69qsdpr6euc5p0uder146fg0qf@4ax.com>

Thanks for the input, figured it out with this code:

if (strlen(strip_tags($comment->comment_content)) > 250)

So the link only shows when a comment is 250+ characters

Should make a big difference to some of my sites, got a site with
3,500 comments with about 20% big enough to warrant it's own page.
Can't wait to see what it does to traffic.

David

On Thu, 26 Nov 2009 17:41:37 +0000, you wrote:

>I posted this question to
>http://wordpress.org/support/topic/335137?replies=1 but so far no joy.
>hoping I get some pointers here.
>
>I've been playing around with a plugin called SEO Super Comments
>http://www.prelovac.com/vladimir/wordpress-plugins/seo-super-comments
>which creaes a page for each comment.
>
>Got it working at
>http://www.45-year-old-millionaire.co.uk/what-is-twitter-marketing.html#comments
>(though had to hack my themes code to get it working as I wanted it).
>
>Example comment page
>http://www.45-year-old-millionaire.co.uk/what-is-twitter-marketing.html?cid=4848
>
>Cool concept for an SEO plugin, but it's not perfect.
>
>What I want to do now is only show the link code when a comment is X
>number of words or charachters, so a long comment gets it's own page
>(created by the plugin) while small comments don't get the link. Right
>now a single word comment gets it's own page which is bad SEO wise.
>
>So I'm trying to figure out the code for this and not sure where to
>start. Is there a variable or something that counts the number of
>words in a comment for example? If there is I could use it as part of
>a if statement.
>
>David
>_______________________________________________
>wp-hackers mailing list
>wp-hackers at lists.automattic.com
>http://lists.automattic.com/mailman/listinfo/wp-hackers

From scribu at gmail.com  Fri Nov 27 16:33:32 2009
From: scribu at gmail.com (scribu)
Date: Fri, 27 Nov 2009 16:33:32 +0000
Subject: [wp-hackers] [Plugin: SEO Super Comments] Extending the Code
In-Reply-To: <j4pvg55g69qsdpr6euc5p0uder146fg0qf@4ax.com>
References: <66ftg51il9lr69li3e31qk2r4trt7r4ucm@4ax.com>
	<j4pvg55g69qsdpr6euc5p0uder146fg0qf@4ax.com>
Message-ID: <349fe48b0911270833v2255f1a6je5a927effeee1c76@mail.gmail.com>

What would also be nice is an 'in reply to' link.

-- 
http://scribu.net

From cdunde1 at tampabay.rr.com  Fri Nov 27 18:59:05 2009
From: cdunde1 at tampabay.rr.com (barry)
Date: Fri, 27 Nov 2009 13:59:05 -0500
Subject: [wp-hackers] need to hire someone
Message-ID: <15FF3F0E34A742BBBD6003661E120B79@barry>


I have a wordpress site that I created with a seperate php page as the home page.  I did this because I wanted a voting poll to be the home page that would lead my visitors to the wordpress section.  I have decided that I no longer want the php page to be the main page of the site.  I want my wordpress blog to be the home page and I want the php voting poll page to be moved.  You can follow this link to see the home page of my site is a php page with a voting poll script www.whowillwinthe2012election.com.  The wordpress section is at www.whowillwinthe2012election.com/wordpress.  I want the php voting poll page to become www.whowillwinthe2012election.com/2012electionpoll.php and I want the wordpress blog to become www.whowillwinthe2012election.com.  I will provide ftp access.  Please email me your quote.

Thanks,

Barry



E-mail message checked by Spyware Doctor (6.1.0.447)
Database version: 6.13800
http://www.pctools.com/en/spyware-doctor-antivirus/

From navjotjsingh at gmail.com  Fri Nov 27 19:02:06 2009
From: navjotjsingh at gmail.com (Navjot Singh)
Date: Sat, 28 Nov 2009 00:32:06 +0530
Subject: [wp-hackers] need to hire someone
In-Reply-To: <15FF3F0E34A742BBBD6003661E120B79@barry>
References: <15FF3F0E34A742BBBD6003661E120B79@barry>
Message-ID: <7b9e108c0911271102q3217b2e2nf10e857cb102eec6@mail.gmail.com>

I can do it for $10...via Paypal.

Regards
Navjot Singh

On Sat, Nov 28, 2009 at 12:29 AM, barry <cdunde1 at tampabay.rr.com> wrote:

>
> I have a wordpress site that I created with a seperate php page as the home
> page.  I did this because I wanted a voting poll to be the home page that
> would lead my visitors to the wordpress section.  I have decided that I no
> longer want the php page to be the main page of the site.  I want my
> wordpress blog to be the home page and I want the php voting poll page to be
> moved.  You can follow this link to see the home page of my site is a php
> page with a voting poll script www.whowillwinthe2012election.com.  The
> wordpress section is at www.whowillwinthe2012election.com/wordpress.  I
> want the php voting poll page to become
> www.whowillwinthe2012election.com/2012electionpoll.php and I want the
> wordpress blog to become www.whowillwinthe2012election.com.  I will
> provide ftp access.  Please email me your quote.
>
> Thanks,
>
> Barry
>
>
>
> E-mail message checked by Spyware Doctor (6.1.0.447)
> Database version: 6.13800
> http://www.pctools.com/en/spyware-doctor-antivirus/
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From feeds at armeda.com  Fri Nov 27 19:04:15 2009
From: feeds at armeda.com (Dre Armeda - Feeds)
Date: Fri, 27 Nov 2009 11:04:15 -0800
Subject: [wp-hackers] need to hire someone
In-Reply-To: <7b9e108c0911271102q3217b2e2nf10e857cb102eec6@mail.gmail.com>
References: <15FF3F0E34A742BBBD6003661E120B79@barry>
	<7b9e108c0911271102q3217b2e2nf10e857cb102eec6@mail.gmail.com>
Message-ID: <4B1022AF.7030103@armeda.com>

Please take this off of the mailing list, this is not the appropriate venue!

Dre

Navjot Singh wrote:
> I can do it for $10...via Paypal.
>
> Regards
> Navjot Singh
>
> On Sat, Nov 28, 2009 at 12:29 AM, barry <cdunde1 at tampabay.rr.com> wrote:
>
>   
>> I have a wordpress site that I created with a seperate php page as the home
>> page.  I did this because I wanted a voting poll to be the home page that
>> would lead my visitors to the wordpress section.  I have decided that I no
>> longer want the php page to be the main page of the site.  I want my
>> wordpress blog to be the home page and I want the php voting poll page to be
>> moved.  You can follow this link to see the home page of my site is a php
>> page with a voting poll script www.whowillwinthe2012election.com.  The
>> wordpress section is at www.whowillwinthe2012election.com/wordpress.  I
>> want the php voting poll page to become
>> www.whowillwinthe2012election.com/2012electionpoll.php and I want the
>> wordpress blog to become www.whowillwinthe2012election.com.  I will
>> provide ftp access.  Please email me your quote.
>>
>> Thanks,
>>
>> Barry
>>
>>
>>
>> E-mail message checked by Spyware Doctor (6.1.0.447)
>> Database version: 6.13800
>> http://www.pctools.com/en/spyware-doctor-antivirus/
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
>>     
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>   

From peter.westwood at ftwr.co.uk  Fri Nov 27 19:04:48 2009
From: peter.westwood at ftwr.co.uk (Peter Westwood)
Date: Fri, 27 Nov 2009 19:04:48 +0000
Subject: [wp-hackers] need to hire someone
In-Reply-To: <7b9e108c0911271102q3217b2e2nf10e857cb102eec6@mail.gmail.com>
References: <15FF3F0E34A742BBBD6003661E120B79@barry>
	<7b9e108c0911271102q3217b2e2nf10e857cb102eec6@mail.gmail.com>
Message-ID: <F8F27D0D-4A23-4ADA-96BC-038E44A85873@ftwr.co.uk>

Dear All,

Just a polite reminder.

The wp-hackers list is meant for people interested in extending  
WordPress either through plugins or improvements to the core code and  
discussions about those subjects.

Sometimes there are professional consulting opportunities surrounding  
some aspect of the WordPress codebase for people who are familiar with  
the program.

For that purpose we have the wp-pro mailing list. <http://codex.wordpress.org/Mailing_Lists#Professional 
 >

Cheers
-- 
Peter Westwood
http://blog.ftwr.co.uk | http://westi.wordpress.com
C53C F8FC 8796 8508 88D6 C950 54F4 5DCD A834 01C5


From navjotjsingh at gmail.com  Fri Nov 27 19:04:57 2009
From: navjotjsingh at gmail.com (Navjot Singh)
Date: Sat, 28 Nov 2009 00:34:57 +0530
Subject: [wp-hackers] need to hire someone
In-Reply-To: <4B1022AF.7030103@armeda.com>
References: <15FF3F0E34A742BBBD6003661E120B79@barry>
	<7b9e108c0911271102q3217b2e2nf10e857cb102eec6@mail.gmail.com> 
	<4B1022AF.7030103@armeda.com>
Message-ID: <7b9e108c0911271104q1b41bc7bi8ce5ddf521d1808c@mail.gmail.com>

Sorry...should have replied personally.

Sent from Delhi, India

On Sat, Nov 28, 2009 at 12:34 AM, Dre Armeda - Feeds <feeds at armeda.com>wrote:

> Please take this off of the mailing list, this is not the appropriate
> venue!
>
> Dre
>
>
> Navjot Singh wrote:
>
>> I can do it for $10...via Paypal.
>>
>> Regards
>> Navjot Singh
>>
>> On Sat, Nov 28, 2009 at 12:29 AM, barry <cdunde1 at tampabay.rr.com> wrote:
>>
>>
>>
>>> I have a wordpress site that I created with a seperate php page as the
>>> home
>>> page.  I did this because I wanted a voting poll to be the home page that
>>> would lead my visitors to the wordpress section.  I have decided that I
>>> no
>>> longer want the php page to be the main page of the site.  I want my
>>> wordpress blog to be the home page and I want the php voting poll page to
>>> be
>>> moved.  You can follow this link to see the home page of my site is a php
>>> page with a voting poll script www.whowillwinthe2012election.com.  The
>>> wordpress section is at www.whowillwinthe2012election.com/wordpress.  I
>>> want the php voting poll page to become
>>> www.whowillwinthe2012election.com/2012electionpoll.php and I want the
>>> wordpress blog to become www.whowillwinthe2012election.com.  I will
>>> provide ftp access.  Please email me your quote.
>>>
>>> Thanks,
>>>
>>> Barry
>>>
>>>
>>>
>>> E-mail message checked by Spyware Doctor (6.1.0.447)
>>> Database version: 6.13800
>>> http://www.pctools.com/en/spyware-doctor-antivirus/
>>> _______________________________________________
>>> wp-hackers mailing list
>>> wp-hackers at lists.automattic.com
>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>>
>>>
>>>
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
>>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From dan at jallits.com  Fri Nov 27 19:12:08 2009
From: dan at jallits.com (Daniel Craig Jallits)
Date: Fri, 27 Nov 2009 13:12:08 -0600
Subject: [wp-hackers] need to hire someone
In-Reply-To: <7b9e108c0911271104q1b41bc7bi8ce5ddf521d1808c@mail.gmail.com>
References: <15FF3F0E34A742BBBD6003661E120B79@barry>
	<7b9e108c0911271102q3217b2e2nf10e857cb102eec6@mail.gmail.com>
	<4B1022AF.7030103@armeda.com>
	<7b9e108c0911271104q1b41bc7bi8ce5ddf521d1808c@mail.gmail.com>
Message-ID: <EC42A07E-2F73-41B6-B3F7-80E87D453BA2@jallits.com>

Would also like to remind everyone about http://jobs.wordpress.net/

_____________________________
Daniel Craig Jallits
3427 N. Paulina Street #1
Chicago, Illinois, 60657-1220
United States of America
(312) 613 0537 | http://jallits.com/

From otto at ottodestruct.com  Fri Nov 27 19:31:01 2009
From: otto at ottodestruct.com (Otto)
Date: Fri, 27 Nov 2009 13:31:01 -0600
Subject: [wp-hackers] The problem with WP_Rewrite <<< RE: Options for
	Controller - Views
In-Reply-To: <8B9D5A49-3CE6-4661-9B3B-EBCF617B3E99@newclarity.net>
References: <4B0C80C1.5070502@santosj.name>
	<161617690911261124v3a8258abl46c603abdf5efe9a@mail.gmail.com> 
	<8B9D5A49-3CE6-4661-9B3B-EBCF617B3E99@newclarity.net>
Message-ID: <161617690911271131t6d21b3f6y35bc814f73f09a06@mail.gmail.com>

On Thu, Nov 26, 2009 at 1:58 PM, Mike Schinkel
<mikeschinkel at newclarity.net> wrote:
> Are you open to considering that, per chance, you understand how Wordpress works internally better than perhaps 99.99% of other users, and that for the vast majority of people the way it works is extremely obtuse?

Certainly. However, I'm more open to perhaps a suggestion of better
documentation or specific improvements. Jacob and you are suggesting
more extreme changes, and doing it in a way that make me believe that
you doesn't understand the layout of the code, which is why I'm asking
questions. That's why you ask questions: to try to understand things
better.

In other words, I'm trying to explain why I think it's a good system,
and trying to get you to explain to me why you think that it is not.
However, all I'm getting back is a bunch of nonsense and confusion.
There seems to be a large amount of misunderstanding about what the
various parts do, and I'm trying to figure out why.


> I'm not specifically supporting Jacob's suggestions but currently there are huge difficulties in getting Wordpress to respect the use of URLs that are not designed to support the hardcoded assumptions baked into Wordpress core. What's more, my use cases are not obscure, i.e. "products/{product}", ability to have a list of Posts be children of a Page, and things like that.

The cases you given to me all seemed extremely simple to do, so I'm
having difficulty understanding what's so hard about them. Me and
others have given cope snippets trying to illustrate our points. For
example, adding /product/whatever should be a simple case of using the
add_rewrite_tag function. I'm trying to get you, or anybody, to
explain why you think that's so difficult to do.


> Back on the 20th I email you directly with code

Thanksgiving. I've been out of town for the last week and unable to
examine your code. I'll get to it soon.


> My point is that you keep saying how great the current system of URL routing but ignore examples that illustrate that it is not.  A little acknowledgement of the real issues would be nice.

A little explanation of those issues in a way that is totally
non-confusing would be superb. All I'm seeing is mixing and matching
of various systems and what they do. Rewriting has nothing to do with
the query which has nothing to do with the templates... So why are
they all being discussed and examined as if they were at all the same
thing?

Can you explain the problems you have in simpler terms, perhaps? I do
want to help, but *I really don't understand your issues*.


-Otto

From otto at ottodestruct.com  Fri Nov 27 19:38:50 2009
From: otto at ottodestruct.com (Otto)
Date: Fri, 27 Nov 2009 13:38:50 -0600
Subject: [wp-hackers] The problem with WP_Rewrite <<< RE: Options for
	Controller - Views
In-Reply-To: <4B0FDE83.4070508@santosj.name>
References: <4B0C80C1.5070502@santosj.name>
	<161617690911261124v3a8258abl46c603abdf5efe9a@mail.gmail.com> 
	<4B0FDE83.4070508@santosj.name>
Message-ID: <161617690911271138o514df897w63f30ac84947d9aa@mail.gmail.com>

On Fri, Nov 27, 2009 at 8:13 AM, Jacob Santos <wordpress at santosj.name> wrote:
> Yeah, I'm talking about the controller as a whole, which usually includes
> the URI parsing, the Router, and the classes or in WordPress's case,
> functions. I'm also talking about the views, because the controller that is
> called loads the specific view.

In that sense, WordPress has no controller, as you understand it. It
doesn't really fit the MVC mold. Note: I think that's a good thing.

> Actually, to clear up any confusion, the
> WordPress views, i.e. the templates and their files, will not change. The
> only thing that will change is that there will be functions or classes that
> loads the view, instead of a if...elseif block.

Fair enough, but I don't see any benefit to doing this. What will you
be better able to do with a template-redirect.php changed into some
class system that you cannot do right now?

Also, again, I must state that this subsystem (file) has zero to do
with URLs, parsing, rewriting, the query... So how do those fit into
your idea?

> I couldn't care if it is going to
> be acceptable for WordPress, I'm doing it for me and if anyone wants to see
> it in WordPress, then so be it.

I just don't want you to waste your time and then to become
disillusioned if others dislike it. I'd prefer to understand what it
is that you want to do before you go and do it. I'd like to help make
improvements to the existing code, if you can tell me where you think
there are failings.

> I'm asking if in anyone
> opinion if I should extend the current or replace it.

I can't give you my opinion until I understand what you're talking about.

I think the existing system is fine, personally. Some better
documentation, perhaps, but I can't think of anything that is wrong
with it in particular.

> Also, the whole thing about the parameters. That is already possible with
> many controller implementations. Only the most rigid don't allow you to do
> that with the URL string. However, one thing, if you wanted /tag/whatever to
> set $tag = whatever, then do the same thing as setting certain parts to
> parameters for a controller. So you would still send it to a controller, it
> just wouldn't be the "tag" controller class or function. Or I mean, it could
> be the tag controller to save time and automatically call the tag controller
> class which sets the $tag parameter to "whatever".

I understand this, but I found it difficult and confusing in every
rigid-MVC style system I've tried, which is why I pretty much hate MVC
in general. It's rigid and inflexible in 99% of the implementations of
it. It's a bad way to write web-code. IMO, of course.

-Otto
Sent from Memphis, Tennessee, United States

From wes at funderberg.com  Fri Nov 27 23:02:06 2009
From: wes at funderberg.com (Wes Funderberg)
Date: Fri, 27 Nov 2009 18:02:06 -0500
Subject: [wp-hackers] Ethical question about automatic Trackback/Pingback
	upon Import
Message-ID: <20091127230208.4FB9A10C62F@lists.luv.wordpress.org>

All,

 My question is that of an ethical nature about automatically sending a
trackback/pingback whenever a user imports a file containing post
information with the trackback/pingback URL. What I would like to know is
that while it could be done, would it be ethical to do this behind the scene
or should the import user always decide if they want to send a
trackback/pingback to the original author.

 The reason behind this is to ensure that the original content author gets
credit but also is notified whenever someone will use their excerpted
content on their own blog.

Thank you!!!


Wes Funderberg
Since 1971
http://www.funderberg.com


From scribu at gmail.com  Fri Nov 27 23:25:44 2009
From: scribu at gmail.com (scribu)
Date: Sat, 28 Nov 2009 01:25:44 +0200
Subject: [wp-hackers] Install any plugin version from the admin
Message-ID: <349fe48b0911271525y72810153qc286abc3de51d600@mail.gmail.com>

While handling support questions for users, I often find myself
sending them to manually upgrade a plugin to the development version.

Wouldn't it be nice if they could do that from the WP admin, just like
they do normal plugin installs.

Also, this could be easily expanded to allow users to downgrade a
plugin, for whatever reason.

The UI for this could be implemented in a plugin, as long as the
wp.org API allows you to specify what version you want to download.
Any chance of that happening?


-- 
http://scribu.net

From wordpress at dd32.id.au  Sat Nov 28 00:01:26 2009
From: wordpress at dd32.id.au (Dion Hulse (dd32))
Date: Sat, 28 Nov 2009 11:01:26 +1100
Subject: [wp-hackers] Install any plugin version from the admin
In-Reply-To: <349fe48b0911271525y72810153qc286abc3de51d600@mail.gmail.com>
References: <349fe48b0911271525y72810153qc286abc3de51d600@mail.gmail.com>
Message-ID: <op.u32vol0vspxmuu@dd32>

I personally see no problem with having a small "Other Versions" link to  
select which version to install, as well as allowing older version  
installs, it'd allow "current development" installs too.

On Sat, 28 Nov 2009 10:25:44 +1100, scribu <scribu at gmail.com> wrote:

> While handling support questions for users, I often find myself
> sending them to manually upgrade a plugin to the development version.
>
> Wouldn't it be nice if they could do that from the WP admin, just like
> they do normal plugin installs.
>
> Also, this could be easily expanded to allow users to downgrade a
> plugin, for whatever reason.
>
> The UI for this could be implemented in a plugin, as long as the
> wp.org API allows you to specify what version you want to download.
> Any chance of that happening?
>
>


-- 
Using Opera's revolutionary e-mail client: http://www.opera.com/mail/

From office at wpseek.com  Sat Nov 28 00:12:52 2009
From: office at wpseek.com (=?ISO-8859-1?Q?Oliver_Schl=F6be?=)
Date: Sat, 28 Nov 2009 01:12:52 +0100
Subject: [wp-hackers] Install any plugin version from the admin
In-Reply-To: <349fe48b0911271525y72810153qc286abc3de51d600@mail.gmail.com>
References: <349fe48b0911271525y72810153qc286abc3de51d600@mail.gmail.com>
Message-ID: <4B106B04.20802@wpseek.com>

+1 for that

While developing plugins (that interact with other plugins) I often 
wished that would be possible.


On 28.11.2009 00:25, scribu wrote:
> While handling support questions for users, I often find myself
> sending them to manually upgrade a plugin to the development version.
>
> Wouldn't it be nice if they could do that from the WP admin, just like
> they do normal plugin installs.
>
> Also, this could be easily expanded to allow users to downgrade a
> plugin, for whatever reason.
>
> The UI for this could be implemented in a plugin, as long as the
> wp.org API allows you to specify what version you want to download.
> Any chance of that happening?
>
>
>    

-- 
Regards,
Oliver Schl?be

http://wpseek.com/
http://wpworldmap.net/


From mikeschinkel at newclarity.net  Sat Nov 28 12:02:43 2009
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Sat, 28 Nov 2009 07:02:43 -0500
Subject: [wp-hackers] This was painful to read...
Message-ID: <4DDFBF3D-6E70-4420-8DF0-15579CAAFC78@newclarity.net>

This was painful to read. Not because I disagree, but because I can't disagree even though I wish it were not true:

From: http://birdhouse.org/blog/2009/11/11/drupal-or-django/

"For example, it makes sense to build student magazines, handbooks, FAQs, and blogs with WordPress. But it?s simply not possible to build an equipment checkout system, or a course evaluation system, or a student/faculty/staff directory with WordPress ? not while trying to preserve your sanity. That?s because WordPress assumes so much about the structure of your data ? it thinks every piece of content has a title, a summary, an author, etc. Start to veer away from that basic data structure and you find yourself quickly needing a platform that doesn?t make assumptions about how things should be done. For those kinds of problems, we use Django."


At least for me, this is the crux of my issues with URL routing; WordPress wants to force me to use a certain URL structure that doesn't fit many use cases when it would be so easy to have WordPress handle URL routing more generically. If the difficulty in URL routing could be fixed, most everything else would be easy to fix.

-Mike Schinkel


From dragonfly at dragonflyeye.net  Sat Nov 28 12:21:17 2009
From: dragonfly at dragonflyeye.net (Thomas Belknap)
Date: Sat, 28 Nov 2009 07:21:17 -0500
Subject: [wp-hackers] This was painful to read...
In-Reply-To: <4DDFBF3D-6E70-4420-8DF0-15579CAAFC78@newclarity.net>
References: <4DDFBF3D-6E70-4420-8DF0-15579CAAFC78@newclarity.net>
Message-ID: <77b239a00911280421q5ff6ea94ja0243cc441bdf587@mail.gmail.com>

I can get behind the URL routing issues. I can get behind supporting
slightly more abstraction to the data structure of WordPress for the sake of
greater flexibility. But it *is* WORDpress, not PDFpress or EvaluationPress.
The assumption has always been that WordPress is a blog - or if you prefer
not to use that term, a "self publication tool." - not a CMS. For those
willing to put a bunch of extra work into building a full-fledged CMS out of
WP, I say good luck. But I prefer my tools to be good at what they do, not
half-assed for the sake of being like other software that is already out
there in an already saturated market.

WordPress installs easy, sets up fast and is hugely flexible for those
looking to publish their words on the Internet. Those who think the same is
true for Drupal have forgotten what it's like not to know how to do what we
do here. This ease of use factor is what gives WP it's market share.
Changing it will doubtless have the opposite effect.

On Sat, Nov 28, 2009 at 7:02 AM, Mike Schinkel
<mikeschinkel at newclarity.net>wrote:

> This was painful to read. Not because I disagree, but because I can't
> disagree even though I wish it were not true:
>
> From: http://birdhouse.org/blog/2009/11/11/drupal-or-django/
>
> "For example, it makes sense to build student magazines, handbooks, FAQs,
> and blogs with WordPress. But it?s simply not possible to build an equipment
> checkout system, or a course evaluation system, or a student/faculty/staff
> directory with WordPress ? not while trying to preserve your sanity. That?s
> because WordPress assumes so much about the structure of your data ? it
> thinks every piece of content has a title, a summary, an author, etc. Start
> to veer away from that basic data structure and you find yourself quickly
> needing a platform that doesn?t make assumptions about how things should be
> done. For those kinds of problems, we use Django."
>
>
> At least for me, this is the crux of my issues with URL routing; WordPress
> wants to force me to use a certain URL structure that doesn't fit many use
> cases when it would be so easy to have WordPress handle URL routing more
> generically. If the difficulty in URL routing could be fixed, most
> everything else would be easy to fix.
>
> -Mike Schinkel
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From mikeschinkel at newclarity.net  Sat Nov 28 12:58:05 2009
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Sat, 28 Nov 2009 07:58:05 -0500
Subject: [wp-hackers] The problem with WP_Rewrite <<< RE: Options for
	Controller - Views
In-Reply-To: <161617690911271131t6d21b3f6y35bc814f73f09a06@mail.gmail.com>
References: <4B0C80C1.5070502@santosj.name>
	<161617690911261124v3a8258abl46c603abdf5efe9a@mail.gmail.com>
	<8B9D5A49-3CE6-4661-9B3B-EBCF617B3E99@newclarity.net>
	<161617690911271131t6d21b3f6y35bc814f73f09a06@mail.gmail.com>
Message-ID: <E7B7D271-B75D-4561-BE5F-8E054D62F7A7@newclarity.net>

On Nov 27, 2009, at 2:31 PM, Otto wrote:
> On Thu, Nov 26, 2009 at 1:58 PM, Mike Schinkel
> <mikeschinkel at newclarity.net> wrote:
>> Are you open to considering that, per chance, you understand how Wordpress works internally better than perhaps 99.99% of other users, and that for the vast majority of people the way it works is extremely obtuse?
> 
> Certainly. However, I'm more open to perhaps a suggestion of better
> documentation or specific improvements. Jacob and you are suggesting
> more extreme changes,

No, Jacob and I have issues but Jacob and I are suggesting different thing. IMO, mine are not extreme changes.

> and doing it in a way that make me believe that
> you doesn't understand the layout of the code, which is why I'm asking
> questions. That's why you ask questions: to try to understand things
> better.

That could well be.  But telling me that I don't understand the layout of the code is in conflict with your prior assertion that it is very easy to understand, don't you think?

> In other words, I'm trying to explain why I think it's a good system,
> and trying to get you to explain to me why you think that it is not.

To start, it is very confusing and hard to figure out what you need to do to accomplish a URL routing task in WordPress.  Let's take a look at the following which is what I'd like to be able to do (my plugin actually does it but in a manner I feel is very fragile):

add_custom_url(	array(
   'name'          => 'product-page',
   'url_type'      => 'single-post',
   'url_template'  => 'products/{product_slug}',
   'template_file' => 'custom/product.php',
   'post_type'     => 'product',
));

To me that seems very straightforward and is a level of simplicity I think we should strive for, don't you think?  (Wouldn't it be great to have custom URLs addable from the admin console? That's what I think we should have. Also note is assumes a custom post type, the other thing Wordpress badly needs to support in core.)

Now what is (some of) the code I have to write to support that?  Let's take a look:

$wp_query->query_vars['page_id'] = 0;
$wp_query->is_page = false;  // A "single-post" is not same as a WordPress "Page"
$wp_query->is_single = $wp_query->is_singular = true;
if ($post_id = self::get_post_id($wp_query)) {
   $wp_query->queried_object = $wp_query->post = get_post($post_id);
   $wp_query->query_vars['p'] = $post_id;
} else {
   $wp_query->is_404 = true;
}

Simple?  I think not (what's "is_single" and how does it compare to "is_singular?" Why do I need to set "page_id" to 0? Why do I have to set "query_vars['p']" to $post_id? Why do I have to set "is_page" to false? What else should I have set that I didn't know to set? ) 

So I'm not sure it is fully robust and inline with all of Wordpress; there many be many use cases with which the code is incompatible because I didn't set something right in $wp_query but it's very hard to know for sure without testing all those use cases. And that's one of the keys to the problem. There are so many things that can potentially break but that you can't know until you test the use case.  That's why such functionality needs to be in core, because only in core will all the use cases ever get fully fleshed out. 

What's more, there's lots of code that runs in core that, by the time I get enough control in my plugin, I have to unravel and redo. That's not an ideal architecture and that's what I'm looking to have improved.

> However, all I'm getting back is a bunch of nonsense and confusion.
> There seems to be a large amount of misunderstanding about what the
> various parts do, and I'm trying to figure out why.

The misunderstanding about the various parts is simply because the current setup is extremely confusing in spite of your assertion to the latter.

Now I'm not going to suggest if be moved to an MVC; that would be too much for the community to bear.  Instead, I'm simply asking that arbitrary URL routing and post types be added to core as a first class concept; integrated into the core and tested. 

I'm not even asking that the core be changed over to use arbitrary URL routing for everything; I'm just asking that the core make some intelligent decisions based upon incoming URLs that have been mapped to something other than the standard patterns in for Wordpress.  If an routed URL is not matched, nothing would be different.

>> I'm not specifically supporting Jacob's suggestions but currently there are huge difficulties in getting Wordpress to respect the use of URLs that are not designed to support the hardcoded assumptions baked into Wordpress core. What's more, my use cases are not obscure, i.e. "products/{product}", ability to have a list of Posts be children of a Page, and things like that.
> 
> The cases you given to me all seemed extremely simple to do, so I'm
> having difficulty understanding what's so hard about them.

They appear to be simple, until you start trying to implement them.  If they had been simple I would be on my merry way. But my plugin, which I sent you, required lots of fiddling to get working and then I'm not even sure it is robust.

Sure you can get the URLs to route but the state of Wordpress for those URLs is often the issue. Each URL type wants a different state loaded and Wordpress gets in the way, forcing it's idea of what should be done on you and doesn't give you the choice of what to load.  It *assumes* you are using one of its standard patterns or you are using nothing and that you have to handcode much of the code run during standard routing that is already in core but not run the way you need it.

> Me and others have given cope snippets trying to illustrate our points. For
> example, adding /product/whatever should be a simple case of using the
> add_rewrite_tag function. I'm trying to get you, or anybody, to
> explain why you think that's so difficult to do.

Let's use an analogy.  I ask you how to get to town.  There are two roads; one that is a mile and one that takes me 50 miles over the mountain and back.  I say I need a 3rd road and you scoff that the 1 mile road is all you need.  You of course ignore that the 1 mile route includes a 100 foot crevice over which there is no bridge.

So yes, you code snippets route the URL. But Wordpress core does not respect that the URL was routed and thus doesn't let us set up state as we need it.  Therein lies the rub.

Here's a question: Have you actually ever implemented a Wordpress site that actually uses custom URLs in the manners we are attempting. My guess is you haven't otherwise the roadblocks left in the core would be immediately apparent.

Try:

1.) Routing URLs to a "custom post type" (the type can be defined in a custom field for this use case, although having it defined in wp_posts table would be the ideal.)  Load the desired post without duplicating lots of code in core and without having to write tens of lines of code to set $wp_query that 99.9% of developers would not know how to do.

2.) Routing URLs to a custom list of posts (the custom list can be defined by a category or by a tag.) Load the desired list of posts without having to write tens of lines of code that to set $wp_query that 99.9% of developers would not know how to do.

>> Back on the 20th I email you directly with code
> 
> Thanksgiving. I've been out of town for the last week and unable to
> examine your code. I'll get to it soon.

Sorry. I assumed since you were replying on the list  in opposition to the concern you had either dismissed or ignored what I sent.

>> My point is that you keep saying how great the current system of URL routing but ignore examples that illustrate that it is not.  A little acknowledgement of the real issues would be nice.
> 
> A little explanation of those issues in a way that is totally
> non-confusing would be superb.

Code is poetry. I sent you code.  Please look at it as it contains code that illustrates the complexity. 

> Rewriting has nothing to do with the query which has
> nothing to do with the templates... 

Yet discussing one without considering the ramifications on the other two is I believe why you are having problems understanding. The three are not independent in use; they are a holistic three and have to be considered together.

> Can you explain the problems you have in simpler terms, perhaps? I do
> want to help, but *I really don't understand your issues*.

Simplest terms I know.  URL routing is not too hard, but harder than it should be.  Getting Wordpress to load what's appropriate based on the URL routing requires major surgery. Once you start routing URLs there are content patterns that Wordpress core did not previously envision and getting those patterns to work reliably, robustly and without running excess expensive code requires far too much effort.

-Mike Schinkel

From mikeschinkel at newclarity.net  Sat Nov 28 13:13:57 2009
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Sat, 28 Nov 2009 08:13:57 -0500
Subject: [wp-hackers] This was painful to read...
In-Reply-To: <77b239a00911280421q5ff6ea94ja0243cc441bdf587@mail.gmail.com>
References: <4DDFBF3D-6E70-4420-8DF0-15579CAAFC78@newclarity.net>
	<77b239a00911280421q5ff6ea94ja0243cc441bdf587@mail.gmail.com>
Message-ID: <659E46A2-76B1-4894-9766-1C51BBEC414E@newclarity.net>

On Nov 28, 2009, at 7:21 AM, Thomas Belknap wrote:
> I can get behind the URL routing issues. I can get behind supporting
> slightly more abstraction to the data structure of WordPress for the sake of
> greater flexibility. But it *is* WORDpress, not PDFpress or EvaluationPress.
> The assumption has always been that WordPress is a blog - or if you prefer
> not to use that term, a "self publication tool." - not a CMS.

But Wordpress has come so far and has so many benefits for those who use it that it's a shame so many in the community want to limit its vision to always being "only a blog."  A damn shame, because it could easily be so much more.

> For those
> willing to put a bunch of extra work into building a full-fledged CMS out of
> WP, I say good luck. But I prefer my tools to be good at what they do, not
> half-assed for the sake of being like other software that is already out
> there in an already saturated market.

I don't see WordPress as being half-assed if it were to add URL routing and custom post types; I would see it as a platform that has over 3000 custom extensions and probably as many off-the-shelf custom themes. I see it as the platform most likely to succeed if it were not held back by a too-narrow vision.

> WordPress installs easy, sets up fast and is hugely flexible for those
> looking to publish their words on the Internet. Those who think the same is
> true for Drupal have forgotten what it's like not to know how to do what we
> do here.

The irony is that you say "Wordpress is just a blog" and then criticize Drupal for being too complex.  Wordpress could easily match Drupal's core differentiator (custom post types) and not be as complex as Drupal.

> This ease of use factor is what gives WP it's market share.
> Changing it will doubtless have the opposite effect.

That changing Wordpress will cause it to loose market share or even ease of use is an assertion based in little more than an invalid assumption.  I've developed both modules and plugins for Drupal and Wordpress respectively and it's their architectures that divide them, not their features.  

Wordpress could easily add custom post types (and custom URLs to support) without increasing the architectural complexity.  What's more, it could continue to be as easy to use for the average person, it would just have more headroom for those more advanced.

-Mike Schinkel


From mikeschinkel at newclarity.net  Sat Nov 28 13:24:18 2009
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Sat, 28 Nov 2009 08:24:18 -0500
Subject: [wp-hackers] The problem with WP_Rewrite <<< RE: Options for
	Controller - Views
In-Reply-To: <4B0FDE83.4070508@santosj.name>
References: <4B0C80C1.5070502@santosj.name>
	<161617690911261124v3a8258abl46c603abdf5efe9a@mail.gmail.com>
	<4B0FDE83.4070508@santosj.name>
Message-ID: <2F7A9878-EB06-48DB-A852-F44FDDF92C54@newclarity.net>

On Nov 27, 2009, at 9:13 AM, Jacob Santos wrote:
> Also, it isn't as if I could remove template_redirect completely. Any system would have to be backwards compatible with what exists now, as well as existed years ago. Well, at least if I wanted the patch to ever be acceptable, besides the whole issue of breakage and its experimental nature. I remember doing that one time, thinking, "Well, it should just work right if I follow the standard and documentation." Yeah, I learned something from that experience, but with the controller implementation, I'm not relying on whether or not someone else thought of all of the bugs. If there are any bugs or SNAFUs, then it would be all me. I couldn't care if it is going to be acceptable for WordPress, I'm doing it for me and if anyone wants to see it in WordPress, then so be it.

I would love to see what you come up with, especially if it is backward compatible and especially if you can also package it integrated into the current Wordpress core so I can download and run through it with a debugger without having to figure out how to apply the patch.  

In my other email to the list replying to Otto I just didn't want to advocate that others completely rewrite the core because I knew that wasn't going to happen.

-Mike Schinkel

From dragonfly at dragonflyeye.net  Sat Nov 28 13:27:51 2009
From: dragonfly at dragonflyeye.net (Thomas Belknap)
Date: Sat, 28 Nov 2009 08:27:51 -0500
Subject: [wp-hackers] This was painful to read...
In-Reply-To: <659E46A2-76B1-4894-9766-1C51BBEC414E@newclarity.net>
References: <4DDFBF3D-6E70-4420-8DF0-15579CAAFC78@newclarity.net>
	<77b239a00911280421q5ff6ea94ja0243cc441bdf587@mail.gmail.com>
	<659E46A2-76B1-4894-9766-1C51BBEC414E@newclarity.net>
Message-ID: <77b239a00911280527v2501fb92i2ef2de9d9657cbc1@mail.gmail.com>

.... The irony is that you say "Wordpress is just a blog" and then criticize
Drupal for being too complex.  Wordpress could easily match Drupal's core
differentiator (custom post types) and not be as complex as Drupal....

Not criticizing at all. Drupal rocks at what it does. But it's not the kind
of thing that a person just wanting to publish their words on the Internet
would necessarily want to toy with. And what makes Drupal good - and I
personally think what makes WordPress good - is that Drupal is pure
abstraction and WordPress isn't. Drupal can be used to do any number of
different types of websites, with the caveat that it doesn't easily lend
itself to any specific type of website. It's for pros who have a decent
understanding of the core database concepts that drive web applications.
WordPress is superlative at publishing, but if you want to create a Torrent
site, you're probably not going to have much success. But you can get a
publishing house setup in fifteen minutes. Why mess with that?

Anything that increases WP's flexibility without compromising its ease of
use for the average pedestrian I would be fine with.

From mikeschinkel at newclarity.net  Sat Nov 28 13:49:18 2009
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Sat, 28 Nov 2009 08:49:18 -0500
Subject: [wp-hackers] This was painful to read...
In-Reply-To: <77b239a00911280527v2501fb92i2ef2de9d9657cbc1@mail.gmail.com>
References: <4DDFBF3D-6E70-4420-8DF0-15579CAAFC78@newclarity.net>
	<77b239a00911280421q5ff6ea94ja0243cc441bdf587@mail.gmail.com>
	<659E46A2-76B1-4894-9766-1C51BBEC414E@newclarity.net>
	<77b239a00911280527v2501fb92i2ef2de9d9657cbc1@mail.gmail.com>
Message-ID: <81AC58EF-62EC-4203-B4F6-0D7E0B4C070A@newclarity.net>


On Nov 28, 2009, at 8:27 AM, Thomas Belknap wrote:
> Not criticizing at all. Drupal rocks at what it does. But it's not the kind
> of thing that a person just wanting to publish their words on the Internet
> would necessarily want to toy with. And what makes Drupal good - and I
> personally think what makes WordPress good - is that Drupal is pure
> abstraction and WordPress isn't. Drupal can be used to do any number of
> different types of websites, with the caveat that it doesn't easily lend
> itself to any specific type of website.

Well, I'll criticize Drupal then.  It's far too abstract; it's architecture is highly coupled and that makes if very difficult to get simple things done if those simple things were not envisioned by the people who wrote Drupal core.  Moderation in all things yet their abstraction is not moderate. In addition, it runs an incredible amount of code to load even the simplest page which adds server load on a high volume site and makes debugging a chore. Worse, the admin console is incredibly sluggish compared to Wordpress making admin tasks tedious at best, and the theming is so coupled with the core that it's very hard to theme.

The irony for me is that abstraction is what originally attracted me to Drupal over Wordpress. After living with it for 2 years I realized that it was a nightmare and not a blessing and switched to Wordpress instead.

> It's for pros who have a decent understanding of the core database
> concepts that drive web applications.

I disagree.  I taught database programming as early as 1987 and have seen the pendulum swing many times. Drupal on the surface appears to be well architected; once you use it you realize it is far too coupled for it's own good.

> WordPress is superlative at publishing, but if you want to create a Torrent
> site, you're probably not going to have much success. But you can get a
> publishing house setup in fifteen minutes. Why mess with that?


If "messing" is adding a thin layer to support custom post types and custom URLs then why not?

Besides, how many business people want to create Torrent sites?  Most want to build business-related sites.  Wordpress would be all 80% would need if it had custom post types and URLs to support.

> Anything that increases WP's flexibility without compromising its ease of
> use for the average pedestrian I would be fine with.

That's all I'm suggesting.

-Mike

From scribu at gmail.com  Sat Nov 28 14:09:27 2009
From: scribu at gmail.com (scribu)
Date: Sat, 28 Nov 2009 16:09:27 +0200
Subject: [wp-hackers] This was painful to read...
In-Reply-To: <81AC58EF-62EC-4203-B4F6-0D7E0B4C070A@newclarity.net>
References: <4DDFBF3D-6E70-4420-8DF0-15579CAAFC78@newclarity.net>
	<77b239a00911280421q5ff6ea94ja0243cc441bdf587@mail.gmail.com>
	<659E46A2-76B1-4894-9766-1C51BBEC414E@newclarity.net>
	<77b239a00911280527v2501fb92i2ef2de9d9657cbc1@mail.gmail.com>
	<81AC58EF-62EC-4203-B4F6-0D7E0B4C070A@newclarity.net>
Message-ID: <349fe48b0911280609n6691d318mf6e519c0eb3b0c3b@mail.gmail.com>

For the custom post types bit, see:

http://core.trac.wordpress.org/ticket/9674


-- 
http://scribu.net

From erisds at gmail.com  Sat Nov 28 14:10:36 2009
From: erisds at gmail.com (ErisDS)
Date: Sat, 28 Nov 2009 14:10:36 +0000
Subject: [wp-hackers] This was painful to read...
In-Reply-To: <81AC58EF-62EC-4203-B4F6-0D7E0B4C070A@newclarity.net>
References: <4DDFBF3D-6E70-4420-8DF0-15579CAAFC78@newclarity.net> 
	<77b239a00911280421q5ff6ea94ja0243cc441bdf587@mail.gmail.com> 
	<659E46A2-76B1-4894-9766-1C51BBEC414E@newclarity.net>
	<77b239a00911280527v2501fb92i2ef2de9d9657cbc1@mail.gmail.com> 
	<81AC58EF-62EC-4203-B4F6-0D7E0B4C070A@newclarity.net>
Message-ID: <686d0bd70911280610v7ed872afhcb4bf95fe587c84d@mail.gmail.com>

Someone recently commented on a blog post of mine about the Pods plugin,
which I described as basically "turning Wordpress into Drupal".

What I replied to him goes the same here: use the right tool for the right
job. It depends on the requirements of the project. A website based on
custom data-types will not work well in Wordpress, but if you're building a
blog or info site, Drupal is overkill.

They are very different tools intended for very different jobs. However,
Wordpress is so flexible and extensible that with the help of plugins like
Pods it can move in to solve problems that would normally fall into Drupal's
area. But I don't think the Wordpress core should be modified with this
purpose in mind.

Wordpress is so very good at what it does, and with the additions coming in
2.9 for media management I think it's market is clear.
The problem developers have is that Drupal is quite hard to setup and
nowhere near as intuitive as Wordpress for clients to manage. We're missing
the middle ground - a custom data-type based CMS that is intuitive and
flexible.

From mikeschinkel at newclarity.net  Sat Nov 28 14:15:06 2009
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Sat, 28 Nov 2009 09:15:06 -0500
Subject: [wp-hackers] This was painful to read...
In-Reply-To: <349fe48b0911280609n6691d318mf6e519c0eb3b0c3b@mail.gmail.com>
References: <4DDFBF3D-6E70-4420-8DF0-15579CAAFC78@newclarity.net>
	<77b239a00911280421q5ff6ea94ja0243cc441bdf587@mail.gmail.com>
	<659E46A2-76B1-4894-9766-1C51BBEC414E@newclarity.net>
	<77b239a00911280527v2501fb92i2ef2de9d9657cbc1@mail.gmail.com>
	<81AC58EF-62EC-4203-B4F6-0D7E0B4C070A@newclarity.net>
	<349fe48b0911280609n6691d318mf6e519c0eb3b0c3b@mail.gmail.com>
Message-ID: <7F9E570E-0FF2-47AB-9DED-F7462C99D19C@newclarity.net>

On Nov 28, 2009, at 9:09 AM, scribu wrote:
> For the custom post types bit, see:
> 
> http://core.trac.wordpress.org/ticket/9674

Thanks.  I'm anxious to see custom post types.

That said, how do you/they plan to handle URLs for custom post types?

-Mike Schinkel

From mikeschinkel at newclarity.net  Sat Nov 28 14:18:14 2009
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Sat, 28 Nov 2009 09:18:14 -0500
Subject: [wp-hackers] This was painful to read...
In-Reply-To: <686d0bd70911280610v7ed872afhcb4bf95fe587c84d@mail.gmail.com>
References: <4DDFBF3D-6E70-4420-8DF0-15579CAAFC78@newclarity.net>
	<77b239a00911280421q5ff6ea94ja0243cc441bdf587@mail.gmail.com>
	<659E46A2-76B1-4894-9766-1C51BBEC414E@newclarity.net>
	<77b239a00911280527v2501fb92i2ef2de9d9657cbc1@mail.gmail.com>
	<81AC58EF-62EC-4203-B4F6-0D7E0B4C070A@newclarity.net>
	<686d0bd70911280610v7ed872afhcb4bf95fe587c84d@mail.gmail.com>
Message-ID: <095D1DF2-2BBC-47EF-AD27-A9950F622ED0@newclarity.net>

On Nov 28, 2009, at 9:10 AM, ErisDS wrote:
> What I replied to him goes the same here: use the right tool for the right
> job. It depends on the requirements of the project. A website based on
> custom data-types will not work well in Wordpress, but if you're building a
> blog or info site, Drupal is overkill.
> 
> They are very different tools intended for very different jobs. However,
> Wordpress is so flexible and extensible that with the help of plugins like
> Pods it can move in to solve problems that would normally fall into Drupal's
> area. But I don't think the Wordpress core should be modified with this
> purpose in mind.

Sigh. Drupal is such a PITA that I'm at the point I'd never recommend it for anything.

And Wordpress has almost all the core components it needs. It's almost there.

> We're missing the middle ground - a custom data-type based CMS that is
> intuitive and flexible.

Wordpress can be that middle ground, if people will just see it.

-Mike Schinkel

From scribu at gmail.com  Sat Nov 28 14:20:56 2009
From: scribu at gmail.com (scribu)
Date: Sat, 28 Nov 2009 16:20:56 +0200
Subject: [wp-hackers] This was painful to read...
In-Reply-To: <7F9E570E-0FF2-47AB-9DED-F7462C99D19C@newclarity.net>
References: <4DDFBF3D-6E70-4420-8DF0-15579CAAFC78@newclarity.net>
	<77b239a00911280421q5ff6ea94ja0243cc441bdf587@mail.gmail.com>
	<659E46A2-76B1-4894-9766-1C51BBEC414E@newclarity.net>
	<77b239a00911280527v2501fb92i2ef2de9d9657cbc1@mail.gmail.com>
	<81AC58EF-62EC-4203-B4F6-0D7E0B4C070A@newclarity.net>
	<349fe48b0911280609n6691d318mf6e519c0eb3b0c3b@mail.gmail.com>
	<7F9E570E-0FF2-47AB-9DED-F7462C99D19C@newclarity.net>
Message-ID: <349fe48b0911280620t52092161iea9a4eac95831d66@mail.gmail.com>

On Sat, Nov 28, 2009 at 4:15 PM, Mike Schinkel
<mikeschinkel at newclarity.net>wrote:

> On Nov 28, 2009, at 9:09 AM, scribu wrote:
> > For the custom post types bit, see:
> >
> > http://core.trac.wordpress.org/ticket/9674
>
> Thanks.  I'm anxious to see custom post types.
>
> That said, how do you/they plan to handle URLs for custom post types?
>

There is no plan, yet. The focus was on the admin part.


-- 
http://scribu.net

From mikeschinkel at newclarity.net  Sat Nov 28 14:25:15 2009
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Sat, 28 Nov 2009 09:25:15 -0500
Subject: [wp-hackers] This was painful to read...
In-Reply-To: <349fe48b0911280620t52092161iea9a4eac95831d66@mail.gmail.com>
References: <4DDFBF3D-6E70-4420-8DF0-15579CAAFC78@newclarity.net>
	<77b239a00911280421q5ff6ea94ja0243cc441bdf587@mail.gmail.com>
	<659E46A2-76B1-4894-9766-1C51BBEC414E@newclarity.net>
	<77b239a00911280527v2501fb92i2ef2de9d9657cbc1@mail.gmail.com>
	<81AC58EF-62EC-4203-B4F6-0D7E0B4C070A@newclarity.net>
	<349fe48b0911280609n6691d318mf6e519c0eb3b0c3b@mail.gmail.com>
	<7F9E570E-0FF2-47AB-9DED-F7462C99D19C@newclarity.net>
	<349fe48b0911280620t52092161iea9a4eac95831d66@mail.gmail.com>
Message-ID: <31CE3F55-B12E-4B8F-8096-394E23D1B579@newclarity.net>

On Nov 28, 2009, at 9:20 AM, scribu wrote:
> On Sat, Nov 28, 2009 at 4:15 PM, Mike Schinkel
> <mikeschinkel at newclarity.net>wrote:
> 
>> On Nov 28, 2009, at 9:09 AM, scribu wrote:
>>> For the custom post types bit, see:
>>> 
>>> http://core.trac.wordpress.org/ticket/9674
>> 
>> Thanks.  I'm anxious to see custom post types.
>> 
>> That said, how do you/they plan to handle URLs for custom post types?
>> 
> 
> There is no plan, yet. The focus was on the admin part.

Sounds like then that my issue with custom URLs will need to (mostly) be addressed in order to make custom post types usable, right?  

FYI, I'd say that 80% of what I've needed custom URLs for has been custom post types.

-Mike Schinkel

From hal at burgiss.net  Sat Nov 28 14:33:05 2009
From: hal at burgiss.net (Hal Burgiss)
Date: Sat, 28 Nov 2009 09:33:05 -0500
Subject: [wp-hackers] This was painful to read...
In-Reply-To: <81AC58EF-62EC-4203-B4F6-0D7E0B4C070A@newclarity.net>
References: <4DDFBF3D-6E70-4420-8DF0-15579CAAFC78@newclarity.net>
	<77b239a00911280421q5ff6ea94ja0243cc441bdf587@mail.gmail.com>
	<659E46A2-76B1-4894-9766-1C51BBEC414E@newclarity.net>
	<77b239a00911280527v2501fb92i2ef2de9d9657cbc1@mail.gmail.com>
	<81AC58EF-62EC-4203-B4F6-0D7E0B4C070A@newclarity.net>
Message-ID: <20091128143305.GK8852@honey.burgiss.net>

On Sat, Nov 28, 2009 at 08:49:18AM -0500, Mike Schinkel wrote:
> 
> If "messing" is adding a thin layer to support custom post types and custom
> URLs then why not?
> 
> Besides, how many business people want to create Torrent sites?  Most want
> to build business-related sites.  Wordpress would be all 80% would need if
> it had custom post types and URLs to support.
> 
> > Anything that increases WP's flexibility without compromising its ease of
> > use for the average pedestrian I would be fine with.
> 
> That's all I'm suggesting.

Speaking for a small web shop that builds using Wordpress, Drupal and Zend
Framework, I couldn't agree with Mike more on all points. While Drupal "does
more", its heavy, bloated and convoluted by comparison. For those of us that
often are happily and productively using Wordpress to do non-traditional
Wordpress types of things, custom post types and more flexible url handling
would be really welcomed. 

-- 
Hal

From mikeschinkel at newclarity.net  Sat Nov 28 14:46:50 2009
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Sat, 28 Nov 2009 09:46:50 -0500
Subject: [wp-hackers] Putting post into /blog/
Message-ID: <1C3F993B-12FC-4E1E-8373-EBCF534C509A@newclarity.net>

Here's another URL related issue.  For the longest time I've wanted to move everything blog related (i.e. not "Pages") including tags, categories, and posts under the "/blog/" URL path.  Let me explain with hypothetical URLs:

example.com/products/
example.com/support/
example.com/about/
example.com/contact/
example.com/blog/
example.com/blog/category/{category_slug}/
example.com/blog/tag/{tag_slug}/
example.com/blog/{year}/{month}/{post_slug}/

You'd think this would be easy but unfortunately it has been a very elusive beast.  

I met Matt at WordCamp Birmingham and he proposed a(n ugly) hack. The hack required moving everything index.php and wp-config.php into a /wp/ subdirectory and then in index.php I changed the require link to:

require('./wp/wp-blog-header.php');

And added this in wp-config.php:

define('WP_SITEURL', 'http://example.com/wp');

It worked, except for it broke the media uploads (I didn't learn that until much later, and who knows what else it breaks?)

This shouldn't be so hard, don't you agree?  

Has anyone else tried this?  Can we make this work without an ugly hack, i.e. as an option in the admin console (and w/o having to move code to non-standard locations?)

Is there any will to add support for this pattern into core itself?

-Mike Schinkel

From kkarpieszuk at gmail.com  Sat Nov 28 15:07:11 2009
From: kkarpieszuk at gmail.com (Konrad Karpieszuk)
Date: Sat, 28 Nov 2009 16:07:11 +0100
Subject: [wp-hackers] what if i will import sql file with database?
Message-ID: <67dfa4090911280707j17801aauce59f9520b15e850@mail.gmail.com>

hello

we plan to move our wordpress installation with tons of posts, plugins
and images to new hosting with new domain.

we just made copy of database with mysqldump and we want to put it on
new web server, where new installation of wordpress is installed (we
will remove automatically created database and we will change settings
in wp-config.php). also we plan to import everything from /wp-content

what should we expect? :) for sure will be problem with domain. in
which cell in mysql it is saved? what ellse?

-- 
(en) regards / (pl) pozdrawiam
Konrad Karpieszuk
http://konradjestwrwandzie.wordpress.com/

From scribu at gmail.com  Sat Nov 28 15:20:25 2009
From: scribu at gmail.com (scribu)
Date: Sat, 28 Nov 2009 17:20:25 +0200
Subject: [wp-hackers] Putting post into /blog/
In-Reply-To: <1C3F993B-12FC-4E1E-8373-EBCF534C509A@newclarity.net>
References: <1C3F993B-12FC-4E1E-8373-EBCF534C509A@newclarity.net>
Message-ID: <349fe48b0911280720mb085d8bvaa924b33e859c537@mail.gmail.com>

On Sat, Nov 28, 2009 at 4:46 PM, Mike Schinkel
<mikeschinkel at newclarity.net>wrote:

> Here's another URL related issue.  For the longest time I've wanted to move
> everything blog related (i.e. not "Pages") including tags, categories, and
> posts under the "/blog/" URL path.  Let me explain with hypothetical URLs:
>
> example.com/products/
> example.com/support/
> example.com/about/
> example.com/contact/
> example.com/blog/
> example.com/blog/category/{category_slug}/<http://example.com/blog/category/%7Bcategory_slug%7D/>
> example.com/blog/tag/{tag_slug}/<http://example.com/blog/tag/%7Btag_slug%7D/>
> example.com/blog/{year}/{month}/{post_slug}/<http://example.com/blog/%7Byear%7D/%7Bmonth%7D/%7Bpost_slug%7D/>
>
> You'd think this would be easy but unfortunately it has been a very elusive
> beast.
>

I've encountered this problem before.

Something that kind of works is adding /blog/ in the post permalink
structure, in the admin:

/blog/%year%/...




> I met Matt at WordCamp Birmingham and he proposed a(n ugly) hack. The hack
> required moving everything index.php and wp-config.php into a /wp/
> subdirectory and then in index.php I changed the require link to:
>
> require('./wp/wp-blog-header.php');
>
> And added this in wp-config.php:
>
> define('WP_SITEURL', 'http://example.com/wp' <http://example.com/wp%27>);
>
> It worked, except for it broke the media uploads (I didn't learn that until
> much later, and who knows what else it breaks?)
>

I wouldn't call that a dirty hack, but it doesn't adress your issue.

It simply allows you to have all the WP files in a different directory.


-- 
http://scribu.net

From scribu at gmail.com  Sat Nov 28 15:21:59 2009
From: scribu at gmail.com (scribu)
Date: Sat, 28 Nov 2009 17:21:59 +0200
Subject: [wp-hackers] what if i will import sql file with database?
In-Reply-To: <67dfa4090911280707j17801aauce59f9520b15e850@mail.gmail.com>
References: <67dfa4090911280707j17801aauce59f9520b15e850@mail.gmail.com>
Message-ID: <349fe48b0911280721i30cb385dt34216e22485232a9@mail.gmail.com>

On Sat, Nov 28, 2009 at 5:07 PM, Konrad Karpieszuk <kkarpieszuk at gmail.com>wrote:

> hello
>
> we plan to move our wordpress installation with tons of posts, plugins
> and images to new hosting with new domain.
>

There are plenty of tutorials explaining how to move your WP site to a
different domain.

Google is your friend.


-- 
http://scribu.net

From peter.westwood at ftwr.co.uk  Sat Nov 28 17:26:10 2009
From: peter.westwood at ftwr.co.uk (Peter Westwood)
Date: Sat, 28 Nov 2009 17:26:10 +0000
Subject: [wp-hackers] Putting post into /blog/
In-Reply-To: <1C3F993B-12FC-4E1E-8373-EBCF534C509A@newclarity.net>
References: <1C3F993B-12FC-4E1E-8373-EBCF534C509A@newclarity.net>
Message-ID: <79D6517B-A627-4EF6-A4D8-8C39F6DE6803@ftwr.co.uk>


On 28 Nov 2009, at 14:46, Mike Schinkel wrote:

> Here's another URL related issue.  For the longest time I've wanted  
> to move everything blog related (i.e. not "Pages") including tags,  
> categories, and posts under the "/blog/" URL path.  Let me explain  
> with hypothetical URLs:
>
> example.com/products/
> example.com/support/
> example.com/about/
> example.com/contact/
> example.com/blog/
> example.com/blog/category/{category_slug}/
> example.com/blog/tag/{tag_slug}/
> example.com/blog/{year}/{month}/{post_slug}/
>
> You'd think this would be easy but unfortunately it has been a very  
> elusive beast.

Have you considered this.

Two WP installs

One in the root
One in the blog folder

You can share the user tables between the two and I suspect that you  
can do similar things to what bbPress does and share cookies so that  
you only have to log in once.

You could then use some of the hooks available to change the menu  
items such that if you go to posts on the site handling pages it takes  
you to the other sites admin seamlessly
-- 
Peter Westwood
http://blog.ftwr.co.uk | http://westi.wordpress.com
C53C F8FC 8796 8508 88D6 C950 54F4 5DCD A834 01C5


From harish.mlists at gmail.com  Sat Nov 28 17:36:47 2009
From: harish.mlists at gmail.com (Harish Narayanan)
Date: Sat, 28 Nov 2009 17:36:47 +0000
Subject: [wp-hackers] Putting post into /blog/
In-Reply-To: <349fe48b0911280720mb085d8bvaa924b33e859c537@mail.gmail.com>
References: <1C3F993B-12FC-4E1E-8373-EBCF534C509A@newclarity.net>
	<349fe48b0911280720mb085d8bvaa924b33e859c537@mail.gmail.com>
Message-ID: <4B115FAF.2040605@gmail.com>

scribu wrote:
> On Sat, Nov 28, 2009 at 4:46 PM, Mike Schinkel
> <mikeschinkel at newclarity.net>wrote:
> 
>> Here's another URL related issue.  For the longest time I've wanted to move
>> everything blog related (i.e. not "Pages") including tags, categories, and
>> posts under the "/blog/" URL path.  Let me explain with hypothetical URLs:
>>
>> example.com/products/
>> example.com/support/
>> example.com/about/
>> example.com/contact/
>> example.com/blog/
>> example.com/blog/category/{category_slug}/<http://example.com/blog/category/%7Bcategory_slug%7D/>
>> example.com/blog/tag/{tag_slug}/<http://example.com/blog/tag/%7Btag_slug%7D/>
>> example.com/blog/{year}/{month}/{post_slug}/<http://example.com/blog/%7Byear%7D/%7Bmonth%7D/%7Bpost_slug%7D/>
>>
>> You'd think this would be easy but unfortunately it has been a very elusive
>> beast.
>>
> 
> I've encountered this problem before.
> 
> Something that kind of works is adding /blog/ in the post permalink
> structure, in the admin:
> 
> /blog/%year%/...

I don't see why this suggestion won't give you the URL structure you
want, assuming each example.com/foo/ is a WordPress page.

Harish

From harish.mlists at gmail.com  Sat Nov 28 17:44:26 2009
From: harish.mlists at gmail.com (Harish Narayanan)
Date: Sat, 28 Nov 2009 17:44:26 +0000
Subject: [wp-hackers] what if i will import sql file with database?
In-Reply-To: <67dfa4090911280707j17801aauce59f9520b15e850@mail.gmail.com>
References: <67dfa4090911280707j17801aauce59f9520b15e850@mail.gmail.com>
Message-ID: <4B11617A.2040202@gmail.com>

Konrad Karpieszuk wrote:
> hello
> 
> we plan to move our wordpress installation with tons of posts, plugins
> and images to new hosting with new domain.
> 
> we just made copy of database with mysqldump and we want to put it on
> new web server, where new installation of wordpress is installed (we
> will remove automatically created database and we will change settings
> in wp-config.php). also we plan to import everything from /wp-content
> 
> what should we expect? :) for sure will be problem with domain. in
> which cell in mysql it is saved? what ellse?

Following the steps you describe, everything should be fine, except
you'll find your site magically remembering the old domain and
constantly jumping to it (like if you try to log-in to wp-admin).

In order to get around this, I used to change the site URL in a couple
of places in the database, but upon some googling,

http://lmgtfy.com/?q=moving+wordpress+to+a+new+domain

I see that it can be done by adding the following to your wp-config.php

define('WP_SITEURL', 'http://newdomain.pl');
define('WP_HOME', 'http://newdomain.pl');

Harish

From kikizas at gmail.com  Sat Nov 28 18:29:57 2009
From: kikizas at gmail.com (Demetris)
Date: Sat, 28 Nov 2009 20:29:57 +0200
Subject: [wp-hackers] Putting post into /blog/
In-Reply-To: <4B115FAF.2040605@gmail.com>
References: <1C3F993B-12FC-4E1E-8373-EBCF534C509A@newclarity.net>
	<349fe48b0911280720mb085d8bvaa924b33e859c537@mail.gmail.com>
	<4B115FAF.2040605@gmail.com>
Message-ID: <9f34a3610911281029s34d11c6cr55c3374e7cf0418a@mail.gmail.com>

I have a question that goes one step further than the original
question.  I know that a permalink structure like:

/journal/%post_id%

... works.  (I?ve used it.)

Now, say that I want to use a static page for ?Front Page?.  So, in
Settings ? Reading I select a Page, e.g. my About page, as ?Front
Page?

Then I make a new page to use as ?Posts Page?:

http://example.com/journal

Notice that the slug of my ?Posts Page? is exactly the same as the
first part of my permalink structure: ?journal?.  I did that on
purpose, because I want the same name for both.

This scheme SEEMS to work in a test setup:

http://example.com/ ? My static About page

http://example.com/journal ? My posts in reverse chronology

http://example.com/journal/1 ? My first post.

http://example.com/journal/category/foo ? Posts in the category Foo

etc. etc.

Is there some reason NOT to use such a setup?

Thanks for reading,

Demetris
http://op111.net/

From otto at ottodestruct.com  Sat Nov 28 19:13:00 2009
From: otto at ottodestruct.com (Otto)
Date: Sat, 28 Nov 2009 13:13:00 -0600
Subject: [wp-hackers] The problem with WP_Rewrite <<< RE: Options for
	Controller - Views
In-Reply-To: <E7B7D271-B75D-4561-BE5F-8E054D62F7A7@newclarity.net>
References: <4B0C80C1.5070502@santosj.name>
	<161617690911261124v3a8258abl46c603abdf5efe9a@mail.gmail.com> 
	<8B9D5A49-3CE6-4661-9B3B-EBCF617B3E99@newclarity.net>
	<161617690911271131t6d21b3f6y35bc814f73f09a06@mail.gmail.com> 
	<E7B7D271-B75D-4561-BE5F-8E054D62F7A7@newclarity.net>
Message-ID: <161617690911281113q2e5f0460m12364d97e8a1cbfa@mail.gmail.com>

On Sat, Nov 28, 2009 at 6:58 AM, Mike Schinkel
<mikeschinkel at newclarity.net> wrote:
> add_custom_url( array(
> ? 'name' ? ? ? ? ?=> 'product-page',
> ? 'url_type' ? ? ?=> 'single-post',
> ? 'url_template' ?=> 'products/{product_slug}',
> ? 'template_file' => 'custom/product.php',
> ? 'post_type' ? ? => 'product',
> ));
>
> To me that seems very straightforward and is a level of simplicity I think we should strive for, don't you think?

Yes, but then again no. Basically, you're wanting to combine three
systems into one, which makes the whole of the system more complex and
confusing.

I'm just guessing at what your code does, but to me it appears to:
a) Create a new rewrite rule for products/whatever.
b) Push those off into a new template called custom/product.php
c) Get some kind of special Page data from the database to display there.

IMO, it's too much. You're overthinking it by trying to multiplex
everything together. Each piece should be handled separately, and in
some kind of en masse way.

> (Wouldn't it be great to have custom URLs addable from the admin console? That's what I think we should have. Also note is assumes a custom post type, the other thing Wordpress badly needs to support in core.)

Custom post type support is improved in 2.9, although I have not
examined the new code in detail.

> Now what is (some of) the code I have to write to support that? ?Let's take a look:
> $wp_query->query_vars['page_id'] = 0;
> $wp_query->is_page = false; ?// A "single-post" is not same as a WordPress "Page"
> $wp_query->is_single = $wp_query->is_singular = true;
> if ($post_id = self::get_post_id($wp_query)) {
> ? $wp_query->queried_object = $wp_query->post = get_post($post_id);
> ? $wp_query->query_vars['p'] = $post_id;
> } else {
> ? $wp_query->is_404 = true;
> }

A lot of this seems to me to be required only because you're
attempting to use the existing $wp_query instead of overriding it with
your own in some fashion. Have you considered doing something along
these lines instead?

global $wp_query;
$wp_query = new WP_Query(array('whatever'=>'XYZ' ...));

Or even better, just do this:
query_posts(array('whatever'=>'XYZ' ...));

I mean, the existing wp_query is basically irrelevant to you, yes?
You're wanting to get your own page based on your own parameters. So
just do that and dump the pre-existing query.

Perhaps that is overly simplistic and I need to examine your code
further. I'll try to get to that on Monday.

> (what's "is_single" and how does it compare to "is_singular?")

Single posts only (is_single) vs. any page that shows only a single
post (is_page or is_single or is_attachment).

> Now I'm not going to suggest if be moved to an MVC; that would be too much for the community to bear. ?Instead, I'm simply asking that arbitrary URL routing and post types be added to core as a first class concept; integrated into the core and tested.

The URL rewriting is already quite capable of that, but directly
linking that into some kind of template routing system seems to be
conflating two entirely separate ideas to me. It's unnecessary,
basically. All you really need to do is to add a rewrite to pull your
variable in from the URL, then use a template_redirect to detect that
variable and call any template you like accordingly. Sure, you could
make a function to do that all in one stroke, but why? It adds
unnecessary complexity to the code, and leaves people thinking that
rewrites == custom templates, when nothing could be further from the
truth.

I took a quick glance at the code (not reading it thoroughly yet) and
it seems to me that the majority of the complexity lies in your
modification of the wp_query. Getting the data you need from the posts
table, basically. The rewriting and template redirection is
straightforward, albeit you seem to have done it the (very) hard way.
I'll try to work up a simpler example to show you what I mean.

> Sure you can get the URLs to route but the state of Wordpress for those URLs is often the issue. Each URL type wants a different state loaded and Wordpress gets in the way, forcing it's idea of what should be done on you and doesn't give you the choice of what to load. ?It *assumes* you are using one of its standard patterns or you are using nothing and that you have to handcode much of the code run during standard routing that is already in core but not run the way you need it.

Agreed, WP does indeed want you to do it its own way, however that
doesn't necessarily mean overriding the existing system with changes.
Bit of WordPress are defined as classes for a reason. Just instantiate
new ones with your own parameters instead, then stick them in the
proper globals.

> Here's a question: Have you actually ever implemented a Wordpress site that actually uses custom URLs in the manners we are attempting. My guess is you haven't otherwise the roadblocks left in the core would be immediately apparent.

Implemented for a production system, no. Rewrote URLs for fun and
profit, yes. :)

> Yet discussing one without considering the ramifications on the other two is I believe why you are having problems understanding. The three are not independent in use; they are a holistic three and have to be considered together.

I really disagree with this, in a big way. Not every rewrite is going
to use a custom template or load a custom post. Quite the contrary, in
fact, most rewrites that people want simply change the nature of the
URL, not the nature of what is loading.

However, I do agree that custom post types suck. Hopefully 2.9
improves upon this.

> Simplest terms I know. ?URL routing is not too hard, but harder than it should be. ?Getting Wordpress to load what's appropriate based on the URL routing requires major surgery. Once you start routing URLs there are content patterns that Wordpress core did not previously envision and getting those patterns to work reliably, robustly and without running excess expensive code requires far too much effort.

Okay. I'm absolutely certain I can create a demo that showcases a
better way to do these than you're describing. I'll work on it soon.

But for now, I'm off to get a beer. Happy Holidays!

-Otto
Sent from Memphis, TN, United States

From wp-hackers at striderweb.com  Sat Nov 28 20:24:23 2009
From: wp-hackers at striderweb.com (Stephen Rider)
Date: Sat, 28 Nov 2009 14:24:23 -0600
Subject: [wp-hackers] This was painful to read...
In-Reply-To: <77b239a00911280421q5ff6ea94ja0243cc441bdf587@mail.gmail.com>
References: <4DDFBF3D-6E70-4420-8DF0-15579CAAFC78@newclarity.net>
	<77b239a00911280421q5ff6ea94ja0243cc441bdf587@mail.gmail.com>
Message-ID: <FB4CB4CB-CD30-43DB-89EB-AA1712156124@striderweb.com>


On Nov 28, 2009, at 6:21 AM, Thomas Belknap wrote:

> I can get behind the URL routing issues. I can get behind supporting
> slightly more abstraction to the data structure of WordPress for the sake of
> greater flexibility. But it *is* WORDpress, not PDFpress or EvaluationPress.
> The assumption has always been that WordPress is a blog - or if you prefer
> not to use that term, a "self publication tool." - not a CMS.

See, the problem is that whenever a discussion like this comes up-- e.g. "how can we make WordPress more like a CMS?"-- we get a lot of snarky remarks back along the lines of "It's already a CMS, dummy".  Then for other discussions we get "It's not a CMS and shouldn't be."

Well which is it?  You can't argue against changes with both "it's not one" and "it's already one".

Personally, I stand behind Mike's post 100%.  WordPress should work on the API for custom post types.  I'm glad to see that this has gotten some progress in 2.9, but definitely want to see it continue.

Here's the thing:  We don't need custom post type capabilities in the default Admin, but it would be wonderful to have to ability in the code so that *plugins* can easily add them and admin sections for them.  It would be cool, for example, to make edit pages modular and abstracted, so Plugins could readily make custom edit pages for Post Types by adding in edit sections -- almost like widgets.  For Post Type X I need the Text box, Parent, Categories, and nothing else.  Boom. Done.

In a way it's a shame that in Admin we moved away from "Action" ("Write". "Edit") menus toward "Thing" ("Posts", "Pages") menus, as this makes it more difficult -- or at least more bulky -- to incorporate custom post types.  Where previously it would have been intuitive to add a new item or two under "Edit", now to follow the existing structure it would be a case of adding a whole new top menu for each new Post Type, which would get big pretty quickly.

Well, that's just my two bits.

Again, I'm glad to see work on Custom Post types in 2.9.  Let's keep going!  :-)

Stephen


-- 
Stephen Rider
http://striderweb.com/


From mikeschinkel at newclarity.net  Sat Nov 28 21:00:49 2009
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Sat, 28 Nov 2009 16:00:49 -0500
Subject: [wp-hackers] This was painful to read...
In-Reply-To: <FB4CB4CB-CD30-43DB-89EB-AA1712156124@striderweb.com>
References: <4DDFBF3D-6E70-4420-8DF0-15579CAAFC78@newclarity.net>
	<77b239a00911280421q5ff6ea94ja0243cc441bdf587@mail.gmail.com>
	<FB4CB4CB-CD30-43DB-89EB-AA1712156124@striderweb.com>
Message-ID: <B89C1FE6-8591-48A7-AE1B-519C991331B1@newclarity.net>

On Nov 28, 2009, at 3:24 PM, Stephen Rider wrote:
> Here's the thing:  We don't need custom post type capabilities in the default Admin, but it would be wonderful to have to ability in the code so that *plugins* can easily add them and admin sections for them.  It would be cool, for example, to make edit pages modular and abstracted, so Plugins could readily make custom edit pages for Post Types by adding in edit sections -- almost like widgets.  For Post Type X I need the Text box, Parent, Categories, and nothing else.  Boom. Done.

That sounds like an extremely good plan.  

What's more, I'd really like to see the artificial distinction between Posts and Pages minimized, i.e. Currently Posts can have tags and categories, but not Pages while Pages can be part of a menu but not Posts. etc.  It would be nice to have each of these features decoupled and allowed to be assigned in the admin.  The default configure would be to have Posts and Pages the way they are now but if I wanted to add tagging to Pages then it would be great if I could just add it.

-Mike Schinkel

From mikeschinkel at newclarity.net  Sat Nov 28 22:24:28 2009
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Sat, 28 Nov 2009 17:24:28 -0500
Subject: [wp-hackers] The problem with WP_Rewrite <<< RE: Options for
	Controller - Views
In-Reply-To: <161617690911281113q2e5f0460m12364d97e8a1cbfa@mail.gmail.com>
References: <4B0C80C1.5070502@santosj.name>
	<161617690911261124v3a8258abl46c603abdf5efe9a@mail.gmail.com>
	<8B9D5A49-3CE6-4661-9B3B-EBCF617B3E99@newclarity.net>
	<161617690911271131t6d21b3f6y35bc814f73f09a06@mail.gmail.com>
	<E7B7D271-B75D-4561-BE5F-8E054D62F7A7@newclarity.net>
	<161617690911281113q2e5f0460m12364d97e8a1cbfa@mail.gmail.com>
Message-ID: <37AD065D-6910-4110-A9DA-21B63ED65CCA@newclarity.net>

On Nov 28, 2009, at 2:13 PM, Otto wrote:
> On Sat, Nov 28, 2009 at 6:58 AM, Mike Schinkel
> <mikeschinkel at newclarity.net> wrote:
>> add_custom_url( array(
>>   'name'          => 'product-page',
>>   'url_type'      => 'single-post',
>>   'url_template'  => 'products/{product_slug}',
>>   'template_file' => 'custom/product.php',
>>   'post_type'     => 'product',
>> ));
>> 
>> To me that seems very straightforward and is a level of simplicity I think we should strive for, don't you think?
> 
> Yes, but then again no. Basically, you're wanting to combine three
> systems into one, which makes the whole of the system more complex and
> confusing.

> 
> I'm just guessing at what your code does, but to me it appears to:
> a) Create a new rewrite rule for products/whatever.
> b) Push those off into a new template called custom/product.php
> c) Get some kind of special Page data from the database to display there.
> 
> IMO, it's too much. You're overthinking it by trying to multiplex
> everything together. Each piece should be handled separately, and in
> some kind of en masse way.

Yes, you understood what I was trying to accomplish correctly, thanks.

However, I don't understand why you take issue with the need to simplify use of the three subsystems.  Yes, I can see that having them be separated in the core might make sense but I can't see why it would be a bad idea to create a layer that simplifies their use for URL routing when URL routing is something that many people want to do, and do easily.

>> (Wouldn't it be great to have custom URLs addable from the admin console? That's what I think we should have. Also note is assumes a custom post type, the other thing Wordpress badly needs to support in core.)
> 
> Custom post type support is improved in 2.9, although I have not
> examined the new code in detail.

That's awesome.  Can't wait!
> 
>> Now what is (some of) the code I have to write to support that?  Let's take a look:
>> $wp_query->query_vars['page_id'] = 0;
>> $wp_query->is_page = false;  // A "single-post" is not same as a WordPress "Page"
>> $wp_query->is_single = $wp_query->is_singular = true;
>> if ($post_id = self::get_post_id($wp_query)) {
>>   $wp_query->queried_object = $wp_query->post = get_post($post_id);
>>   $wp_query->query_vars['p'] = $post_id;
>> } else {
>>   $wp_query->is_404 = true;
>> }
> 
> A lot of this seems to me to be required only because you're
> attempting to use the existing $wp_query instead of overriding it with
> your own in some fashion. Have you considered doing something along
> these lines instead?
> 
> global $wp_query;
> $wp_query = new WP_Query(array('whatever'=>'XYZ' ...));
> 
> Or even better, just do this:
> query_posts(array('whatever'=>'XYZ' ...));
> 
> I mean, the existing wp_query is basically irrelevant to you, yes?
> You're wanting to get your own page based on your own parameters. So
> just do that and dump the pre-existing query.

Honestly since it's been 6+ months since I last worked on this I can't know for sure whether that will work or not.  I am working on a 3 day developer training course for Wordpress to be delivered Dec 8-10 so I will hopefully get a chance to dig back into that soon to verify.

That said, one big problem I have with it is that I don't want to have Wordpress load a $wp_query and then throw it away only to hit the database a second time.  It's not elegant nor is it good for performance (and caching, while it makes sense to employ, is not a solution for a bad architecture choice.)

Beyond that I seem to remember there were other reasons why that wouldn't work but honestly I can't remember what they are. Like I said I'll try to re-implement soon in order to figure out why.

> Perhaps that is overly simplistic and I need to examine your code
> further. I'll try to get to that on Monday.

I will appreciate that.

>> (what's "is_single" and how does it compare to "is_singular?")
> 
> Single posts only (is_single) vs. any page that shows only a single
> post (is_page or is_single or is_attachment).

I guess the point is that all those switches are overwhelming for most people who are not constantly coding plugins, or mucking with the core.

>> Now I'm not going to suggest if be moved to an MVC; that would be too much for the community to bear.  Instead, I'm simply asking that arbitrary URL routing and post types be added to core as a first class concept; integrated into the core and tested.
> 
> The URL rewriting is already quite capable of that, but directly
> linking that into some kind of template routing system seems to be
> conflating two entirely separate ideas to me. It's unnecessary,
> basically.

It simplifies things, and I thought that was what Wordpress was supposed to be; simple. Right? 

Besides, it doesn't have to be fully conflated in the core, all we need is a layer on top that allows is but leaves the lower level components separate. But that will requiring fixing some of the assumptions in the core that are not easily overridden.
Not having in the core means that it will be very hard to get it fully robust and to ensure the core provides the necessary hooks to fully address the issue.

BTW, the core currently conflates many things that IMO would ideally be separate; Posts vs. Pages, for example.

> All you really need to do is to add a rewrite to pull your
> variable in from the URL, then use a template_redirect to detect that
> variable and call any template you like accordingly. Sure, you could

> make a function to do that all in one stroke, but why?

To make it easier for 99.9% of people. Look out into the wild and ask yourself why so few people are using URL Rewriting on Wordpress sites?  The answer is because it's far to hard to do for the average person.

> It adds unnecessary complexity to the code,

It would add very little complexity to the core if the core where updated to support it.

> and leaves people thinking that rewrites == custom templates, when
> nothing could be further from the truth.

I don't see there's such an aversion to this. People just want to get get something done, not learn all the gory mechanics.

> I took a quick glance at the code (not reading it thoroughly yet) and
> it seems to me that the majority of the complexity lies in your
> modification of the wp_query. Getting the data you need from the posts
> table, basically.

That is correct.  Being able to have URLs rewritten but not being able to have them load the content that need to be loaded does very little good. So addressing one without the other isn't useful.

> The rewriting and template redirection is
> straightforward, albeit you seem to have done it the (very) hard way.
> I'll try to work up a simpler example to show you what I mean.

I'd love to learn an easier way...

>> Sure you can get the URLs to route but the state of Wordpress for those URLs is often the issue. Each URL type wants a different state loaded and Wordpress gets in the way, forcing it's idea of what should be done on you and doesn't give you the choice of what to load.  It *assumes* you are using one of its standard patterns or you are using nothing and that you have to hand-code much of the code run during standard routing that is already in core but not run the way you need it.
> 
> Agreed, WP does indeed want you to do it its own way, however that
> doesn't necessarily mean overriding the existing system with changes.

Not asking to override, just want a simplifying layer on top.

>> Yet discussing one without considering the ramifications on the other two is I believe why you are having problems understanding. The three are not independent in use; they are a holistic three and have to be considered together.
> 
> I really disagree with this, in a big way. Not every rewrite is going
> to use a custom template or load a custom post. Quite the contrary, in
> fact, most rewrites that people want simply change the nature of the
> URL, not the nature of what is loading.

Again, I think you are misunderstanding. Not asking to unify them, asking for another layer to simplify their use *when* it is appropriate.

> Okay. I'm absolutely certain I can create a demo that showcases a
> better way to do these than you're describing. I'll work on it soon.

I look forward to it, and appreciate it in advance.

> But for now, I'm off to get a beer. Happy Holidays!

Enjoy, and ditto.

-Mike Schinkel

From jordi at jcanals.cat  Sat Nov 28 22:40:12 2009
From: jordi at jcanals.cat (Jordi Canals)
Date: Sat, 28 Nov 2009 23:40:12 +0100
Subject: [wp-hackers] Making Capability Manager site wide for MU
Message-ID: <eccf1e7c0911281440maa8649dy284077398e70455b@mail.gmail.com>

Hello all,

I have a plugin called 'Capability Manager' wich works fine from now. (You
can find it at http://wordpress.org/extend/plugins/capsman/)
Some users and myself, suggested to introduce an special feature for
WordPress MU.

The plugin just manages role capabilities (Not user capabilities), and it's
a very simple one. For WordPress MU it works well if you want to manage
capabilities at blog level. But what I want to introduce now, is to manage
them at site level. I mean, when setting/unsetting a capability in the site,
It will set/unset it on any blog in this site, overwriting individual blog
roles and capabilities. The problem is that it looks that there is no Site
Level Roles and Capabilities, so I'm doing it.

The first thing is to determine if I'm running on MU which I think I can do
by checking if the constant VHOST is defined. Don't know if there is a
better way to do it.

About overwriting roles to use them site wide, my approach is the following
(And some draft code):

I will use the following filters:

pre_option_{$wpdb->prefix}user_roles
update_option_{$wpdb->prefix}user_roles

Just this two as we are never going to delete the role options. And want to
maintain a copy of the roles on the managed blog.

The code would look something like that:

$my_roles = $wpdb->prefix . 'user_roles';

add_filter('pre_option_' . $my_roles, 'my_get_role_option');
add_action('update_option_' . $my_roles, 'my_update_role_option', 2);

function my_get_role_option ( $default ) {
    global $wpdb;
    return get_site_option($db->base_prefix . 'user_roles', $default);
}

function my_update_role_option($oldvalue, $newvalue) {
    global $wpdb;
    update_site_option($wpdb->base_prefix . 'user_roles', $newvalue);
}


This is just an approach draft, not tested yet. All other functionallity
managing cpabilities, creating and deleting roles is done (for blogs).
I think with just this two filter/action, It should run, as I get and save
the options to the sitemeta table, does not mind what blog I'm on.
Only global site admins will have access to manage capabilities.

Any comment or suggestion about this will be really welcome. Look just at
the idea, not the code itself (as the code can contain coding errors).

Thanks in advance,

---
Jordi Canals
http://alkivia.org

From scribu at gmail.com  Sat Nov 28 23:08:35 2009
From: scribu at gmail.com (scribu)
Date: Sun, 29 Nov 2009 01:08:35 +0200
Subject: [wp-hackers] Putting post into /blog/
In-Reply-To: <9f34a3610911281029s34d11c6cr55c3374e7cf0418a@mail.gmail.com>
References: <1C3F993B-12FC-4E1E-8373-EBCF534C509A@newclarity.net>
	<349fe48b0911280720mb085d8bvaa924b33e859c537@mail.gmail.com>
	<4B115FAF.2040605@gmail.com>
	<9f34a3610911281029s34d11c6cr55c3374e7cf0418a@mail.gmail.com>
Message-ID: <349fe48b0911281508x234d110bnd59d5cfeb9d6260c@mail.gmail.com>

On Sat, Nov 28, 2009 at 8:29 PM, Demetris <kikizas at gmail.com> wrote:

> I have a question that goes one step further than the original
> question.  I know that a permalink structure like:
>
> /journal/%post_id%
>
> ... works.  (I?ve used it.)
>
> Now, say that I want to use a static page for ?Front Page?.  So, in
> Settings ? Reading I select a Page, e.g. my About page, as ?Front
> Page?
>
> Then I make a new page to use as ?Posts Page?:
>
> http://example.com/journal
>
> Notice that the slug of my ?Posts Page? is exactly the same as the
> first part of my permalink structure: ?journal?.  I did that on
> purpose, because I want the same name for both.
>
> This scheme SEEMS to work in a test setup:
>
> http://example.com/ ? My static About page
>
> http://example.com/journal ? My posts in reverse chronology
>
> http://example.com/journal/1 ? My first post.
>
> http://example.com/journal/category/foo ? Posts in the category Foo
>
> etc. etc.
>
> Is there some reason NOT to use such a setup?
>
> Thanks for reading,
>
> Demetris
> http://op111.net/



Make sure the Newer / Older Posts links work properly:

http://example.com/journal/category/foo/page/2

etc.


-- 
http://scribu.net

From scribu at gmail.com  Sat Nov 28 23:24:34 2009
From: scribu at gmail.com (scribu)
Date: Sun, 29 Nov 2009 01:24:34 +0200
Subject: [wp-hackers] Making Capability Manager site wide for MU
In-Reply-To: <eccf1e7c0911281440maa8649dy284077398e70455b@mail.gmail.com>
References: <eccf1e7c0911281440maa8649dy284077398e70455b@mail.gmail.com>
Message-ID: <349fe48b0911281524r6a13b7a5v560876ceb1dcaca2@mail.gmail.com>

This feature would be really useful.

Your implementation ideea looks solid to me.

To clarify: this would not allow individual blogs to have different
capabilities for the same role, right? (This would be a good thing, in my
case)


-- 
http://scribu.net

From scribu at gmail.com  Sat Nov 28 23:32:53 2009
From: scribu at gmail.com (scribu)
Date: Sun, 29 Nov 2009 01:32:53 +0200
Subject: [wp-hackers] Install any plugin version from the admin
In-Reply-To: <4B106B04.20802@wpseek.com>
References: <349fe48b0911271525y72810153qc286abc3de51d600@mail.gmail.com>
	<4B106B04.20802@wpseek.com>
Message-ID: <349fe48b0911281532p51800c1eubc96abca73a840b4@mail.gmail.com>

Opened a ticket: http://core.trac.wordpress.org/ticket/11281


-- 
http://scribu.net

From jordi at jcanals.cat  Sun Nov 29 00:06:15 2009
From: jordi at jcanals.cat (Jordi Canals)
Date: Sun, 29 Nov 2009 01:06:15 +0100
Subject: [wp-hackers] Making Capability Manager site wide for MU
In-Reply-To: <349fe48b0911281524r6a13b7a5v560876ceb1dcaca2@mail.gmail.com>
References: <eccf1e7c0911281440maa8649dy284077398e70455b@mail.gmail.com>
	<349fe48b0911281524r6a13b7a5v560876ceb1dcaca2@mail.gmail.com>
Message-ID: <eccf1e7c0911281606l47f07617sf75a78ab0cc5b3b4@mail.gmail.com>

2009/11/29 scribu <scribu at gmail.com>

> This feature would be really useful.
>
> Your implementation ideea looks solid to me.
>
> To clarify: this would not allow individual blogs to have different
> capabilities for the same role, right? (This would be a good thing, in my
> case)
>
>
Thanks Scribu,

I think you mean having a default site wide, and allow one or more blogs to
be managed on it's own.
At the first attempt I will do: Or managing blog by blog, or all blogs
depending on global settings. After this working, in a next release, I can
think about allowing some blogs to be 'independent'. (This last could not be
so difficult, having the blog IDs, I think)

Thanks again for your suggestion.

---
Jordi Canals
http://alkivia.org

From mikeschinkel at newclarity.net  Sun Nov 29 00:32:07 2009
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Sat, 28 Nov 2009 19:32:07 -0500
Subject: [wp-hackers] Putting post into /blog/
In-Reply-To: <349fe48b0911280720mb085d8bvaa924b33e859c537@mail.gmail.com>
References: <1C3F993B-12FC-4E1E-8373-EBCF534C509A@newclarity.net>
	<349fe48b0911280720mb085d8bvaa924b33e859c537@mail.gmail.com>
Message-ID: <EDA4241F-ABF5-4E14-8C59-7361CC3705D9@newclarity.net>

Hi all:

> <mikeschinkel at newclarity.net>wrote:
> 
>> Here's another URL related issue.  For the longest time I've wanted to move
>> everything blog related (i.e. not "Pages") including tags, categories, and
>> posts under the "/blog/" URL path.  Let me explain with hypothetical URLs:
>> 
>> example.com/products/
>> example.com/support/
>> example.com/about/
>> example.com/contact/
>> example.com/blog/
>> example.com/blog/category/{category_slug}/<http://example.com/blog/category/%7Bcategory_slug%7D/>
>> example.com/blog/tag/{tag_slug}/<http://example.com/blog/tag/%7Btag_slug%7D/>
>> example.com/blog/{year}/{month}/{post_slug}/<http://example.com/blog/%7Byear%7D/%7Bmonth%7D/%7Bpost_slug%7D/>
>> 
>> You'd think this would be easy but unfortunately it has been a very elusive
>> beast.
>> 

Thanks for all the comments and suggestions.  Turns out the solution is to do the following (I'm hoping this doesn't break anything, but if so I'll document):

1.) Create a "Page" called "Blog", give it a URL slug of "blog"
2.) In Settings/Reading set Front Page Display to "A static page" and set the Posts page to the "Blog" page
3.) In Settings/Permalinks set to these (or similar):

	Posts      => /blog/%year%/%monthnum%/%postname%/
	Categories => blog/categories
	Tags       => blog/tags

What threw me was that 1.) Matt didn't suggest this solution and 2.) the fact that the "Posts page" ignores the content and the page template for that page; that was just counter intuitive for me so I didn't think to look there.  Curious when that was added; I'm pretty sure it wasn't always there in version 2.x, right?

Anyway, problem solved. 

-Mike

On Nov 28, 2009, at 10:20 AM, scribu wrote:

> On Sat, Nov 28, 2009 at 4:46 PM, Mike Schinkel
> 
> I've encountered this problem before.
> 
> Something that kind of works is adding /blog/ in the post permalink
> structure, in the admin:
> 
> /blog/%year%/...
> 
> 
> 
> 
>> I met Matt at WordCamp Birmingham and he proposed a(n ugly) hack. The hack
>> required moving everything index.php and wp-config.php into a /wp/
>> subdirectory and then in index.php I changed the require link to:
>> 
>> require('./wp/wp-blog-header.php');
>> 
>> And added this in wp-config.php:
>> 
>> define('WP_SITEURL', 'http://example.com/wp' <http://example.com/wp%27>);
>> 
>> It worked, except for it broke the media uploads (I didn't learn that until
>> much later, and who knows what else it breaks?)
>> 
> 
> I wouldn't call that a dirty hack, but it doesn't adress your issue.
> 
> It simply allows you to have all the WP files in a different directory.
> 
> 
> -- 
> http://scribu.net
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers


From wordpress at dd32.id.au  Sun Nov 29 00:47:11 2009
From: wordpress at dd32.id.au (Dion Hulse (dd32))
Date: Sun, 29 Nov 2009 11:47:11 +1100
Subject: [wp-hackers] Putting post into /blog/
In-Reply-To: <EDA4241F-ABF5-4E14-8C59-7361CC3705D9@newclarity.net>
References: <1C3F993B-12FC-4E1E-8373-EBCF534C509A@newclarity.net>
	<349fe48b0911280720mb085d8bvaa924b33e859c537@mail.gmail.com>
	<EDA4241F-ABF5-4E14-8C59-7361CC3705D9@newclarity.net>
Message-ID: <op.u34sgxltspxmuu@dd32>

On Sun, 29 Nov 2009 11:32:07 +1100, Mike Schinkel  
<mikeschinkel at newclarity.net> wrote:
> 1.) Create a "Page" called "Blog", give it a URL slug of "blog"
> 2.) In Settings/Reading set Front Page Display to "A static page" and  
> set the Posts page to the "Blog" page
> 3.) In Settings/Permalinks set to these (or similar):
>
> 	Posts      => /blog/%year%/%monthnum%/%postname%/
> 	Categories => blog/categories
> 	Tags       => blog/tags

Just remember that setting Categories and Tags is optional, Its  
auomatically done, UNLESS you change the stubs to a custom value. ie.  
blogs/section

> What threw me was that 1.) Matt didn't suggest this solution
Its pretty hard for Matt to know -everything- about WordPress, While he  
may've started it, and still overlooks, Its easy to forget some of the  
many functions - I think the static posts page has been around for awhile  
though.. Its one of those little used features.

> I'm pretty sure it wasn't always there in version 2.x, right?

Nope, Looks like it was introduced 4 years ago in 2.1, Oh how time flies:  
http://core.trac.wordpress.org/ticket/2515

I dont think the UI has even been touched since then either, so there is  
the potential to make that screen a bit more user friendly. Any comments  
 from anyone on how to improve it? Feel free to comment:  
http://core.trac.wordpress.org/ticket/11279#comment:6
-- 
Using Opera's revolutionary e-mail client: http://www.opera.com/mail/

From mikeschinkel at newclarity.net  Sun Nov 29 00:44:57 2009
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Sat, 28 Nov 2009 19:44:57 -0500
Subject: [wp-hackers] Putting post into /blog/
In-Reply-To: <op.u34sgxltspxmuu@dd32>
References: <1C3F993B-12FC-4E1E-8373-EBCF534C509A@newclarity.net>
	<349fe48b0911280720mb085d8bvaa924b33e859c537@mail.gmail.com>
	<EDA4241F-ABF5-4E14-8C59-7361CC3705D9@newclarity.net>
	<op.u34sgxltspxmuu@dd32>
Message-ID: <ECB72FCC-D314-4E6B-AAF9-0E9817DF01E1@newclarity.net>


On Nov 28, 2009, at 7:47 PM, Dion Hulse (dd32) wrote:
> Just remember that setting Categories and Tags is optional, Its auomatically done, UNLESS you change the stubs to a custom value. ie. blogs/section

Not sure I follow what you mean by "setting."  Do you mean that the slugs are set automatically, but they wouldn't be set to blog/category unless I explicitly set them?

> Its pretty hard for Matt to know -everything- about WordPress, While he may've started it, and still overlooks, Its easy to forget some of the many functions - I think the static posts page has been around for awhile though.. Its one of those little used features.

I understand, I just made a silly assumption.

> Nope, Looks like it was introduced 4 years ago in 2.1, Oh how time flies: http://core.trac.wordpress.org/ticket/2515
> 
> I dont think the UI has even been touched since then either, so there is the potential to make that screen a bit more user friendly. Any comments from anyone on how to improve it? Feel free to comment: http://core.trac.wordpress.org/ticket/11279#comment:6

THANKS!

-Mike Schinkel

From wordpress at dd32.id.au  Sun Nov 29 01:21:56 2009
From: wordpress at dd32.id.au (Dion Hulse (dd32))
Date: Sun, 29 Nov 2009 12:21:56 +1100
Subject: [wp-hackers] Putting post into /blog/
In-Reply-To: <ECB72FCC-D314-4E6B-AAF9-0E9817DF01E1@newclarity.net>
References: <1C3F993B-12FC-4E1E-8373-EBCF534C509A@newclarity.net>
	<349fe48b0911280720mb085d8bvaa924b33e859c537@mail.gmail.com>
	<EDA4241F-ABF5-4E14-8C59-7361CC3705D9@newclarity.net>
	<op.u34sgxltspxmuu@dd32>
	<ECB72FCC-D314-4E6B-AAF9-0E9817DF01E1@newclarity.net>
Message-ID: <op.u34t2uqcspxmuu@dd32>

On Sun, 29 Nov 2009 11:44:57 +1100, Mike Schinkel  
<mikeschinkel at newclarity.net> wrote:

>
> On Nov 28, 2009, at 7:47 PM, Dion Hulse (dd32) wrote:
>> Just remember that setting Categories and Tags is optional, Its  
>> auomatically done, UNLESS you change the stubs to a custom value. ie.  
>> blogs/section
>
> Not sure I follow what you mean by "setting."  Do you mean that the  
> slugs are set automatically, but they wouldn't be set to blog/category  
> unless I explicitly set them?

By default, The Category and Tag stubs are blank, This means WordPress  
will fill them in automatically.

If the posts page is the front of the blog (as standard), It prefixes the  
category stub with Homeurl:
<HOME>/category/<CAT SLUG>/ - http://dd32.id.au/category/test/

If the posts page is set to a custom page, It prefixed the category stub  
with the pages Permalink:
<PAGE PERMALINK>/category/<CAT SLUG>/ -  
http://dd32.id.au/blog/category/test/

IF you set the 'category' stub to 'section' (As i do occasionally), Then  
WordPress uses that specifically, Eg:
<HOME>/<STUB>/<CAT SLUG> - Even if you set the posts page to a page  
(/blog/)

So, That means, If you set the sub to somehing, then you need hte full  
link, ie. Stub = 'blog/section', To allow for what you would "Expect".

(Sorry, Send keyboard shortcut activated while typing..)

From mikeschinkel at newclarity.net  Sun Nov 29 01:26:27 2009
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Sat, 28 Nov 2009 20:26:27 -0500
Subject: [wp-hackers] Putting post into /blog/
In-Reply-To: <op.u34t2uqcspxmuu@dd32>
References: <1C3F993B-12FC-4E1E-8373-EBCF534C509A@newclarity.net>
	<349fe48b0911280720mb085d8bvaa924b33e859c537@mail.gmail.com>
	<EDA4241F-ABF5-4E14-8C59-7361CC3705D9@newclarity.net>
	<op.u34sgxltspxmuu@dd32>
	<ECB72FCC-D314-4E6B-AAF9-0E9817DF01E1@newclarity.net>
	<op.u34t2uqcspxmuu@dd32>
Message-ID: <3B19531F-8AD9-48DE-8946-69F1B49DAF3C@newclarity.net>

On Nov 28, 2009, at 8:21 PM, Dion Hulse (dd32) wrote:
> On Sun, 29 Nov 2009 11:44:57 +1100, Mike Schinkel <mikeschinkel at newclarity.net> wrote:
>> On Nov 28, 2009, at 7:47 PM, Dion Hulse (dd32) wrote:
>>> Just remember that setting Categories and Tags is optional, Its auomatically done, UNLESS you change the stubs to a custom value. ie. blogs/section
>> Not sure I follow what you mean by "setting."  Do you mean that the slugs are set automatically, but they wouldn't be set to blog/category unless I explicitly set them?
> 
> By default, The Category and Tag stubs are blank, This means WordPress will fill them in automatically.
> 
> If the posts page is the front of the blog (as standard), It prefixes the category stub with Homeurl:
> <HOME>/category/<CAT SLUG>/ - http://dd32.id.au/category/test/
> 
> If the posts page is set to a custom page, It prefixed the category stub with the pages Permalink:
> <PAGE PERMALINK>/category/<CAT SLUG>/ - http://dd32.id.au/blog/category/test/
> 
> IF you set the 'category' stub to 'section' (As i do occasionally), Then WordPress uses that specifically, Eg:
> <HOME>/<STUB>/<CAT SLUG> - Even if you set the posts page to a page (/blog/)
> 
> So, That means, If you set the sub to somehing, then you need hte full link, ie. Stub = 'blog/section', To allow for what you would "Expect".

Thanks for the clarification.  

-Mike Schinkel


From wordpress at dd32.id.au  Sun Nov 29 06:46:42 2009
From: wordpress at dd32.id.au (Dion Hulse (dd32))
Date: Sun, 29 Nov 2009 17:46:42 +1100
Subject: [wp-hackers] The problem with WP_Rewrite <<< RE: Options for
 Controller - Views
In-Reply-To: <E7B7D271-B75D-4561-BE5F-8E054D62F7A7@newclarity.net>
References: <4B0C80C1.5070502@santosj.name>
	<161617690911261124v3a8258abl46c603abdf5efe9a@mail.gmail.com>
	<8B9D5A49-3CE6-4661-9B3B-EBCF617B3E99@newclarity.net>
	<161617690911271131t6d21b3f6y35bc814f73f09a06@mail.gmail.com>
	<E7B7D271-B75D-4561-BE5F-8E054D62F7A7@newclarity.net>
Message-ID: <op.u34834dqspxmuu@dd32>

On Sat, 28 Nov 2009 23:58:05 +1100, Mike Schinkel  
<mikeschinkel at newclarity.net> wrote:
>> In other words, I'm trying to explain why I think it's a good system,
>> and trying to get you to explain to me why you think that it is not.
>
> To start, it is very confusing and hard to figure out what you need to  
> do to accomplish a URL routing task in WordPress.  Let's take a look at  
> the following which is what I'd like to be able to do (my plugin  
> actually does it but in a manner I feel is very fragile):
>
> add_custom_url(	array(
>    'name'          => 'product-page',
>    'url_type'      => 'single-post',
>    'url_template'  => 'products/{product_slug}',
>    'template_file' => 'custom/product.php',
>    'post_type'     => 'product',
> ));
>
> To me that seems very straightforward and is a level of simplicity I  
> think we should strive for, don't you think?  (Wouldn't it be great to  
> have custom URLs addable from the admin console? That's what I think we  
> should have. Also note is assumes a custom post type, the other thing  
> Wordpress badly needs to support in core.)
>
> Now what is (some of) the code I have to write to support that?  Let's  
> take a look:
>
> $wp_query->query_vars['page_id'] = 0;
> $wp_query->is_page = false;  // A "single-post" is not same as a  
> WordPress "Page"
> $wp_query->is_single = $wp_query->is_singular = true;
> if ($post_id = self::get_post_id($wp_query)) {
>    $wp_query->queried_object = $wp_query->post = get_post($post_id);
>    $wp_query->query_vars['p'] = $post_id;
> } else {
>    $wp_query->is_404 = true;
> }
>
> Simple?  I think not (what's "is_single" and how does it compare to  
> "is_singular?" Why do I need to set "page_id" to 0? Why do I have to set  
> "query_vars['p']" to $post_id? Why do I have to set "is_page" to false?  
> What else should I have set that I didn't know to set? )
> ..<snip>..
> What's more, there's lots of code that runs in core that, by the time I  
> get enough control in my plugin, I have to unravel and redo. That's not  
> an ideal architecture and that's what I'm looking to have improved.

I think you're hooking too late in the process, and as such, you're  
running into issues related to WordPress looking too deeply into it before  
you tell it otherwise.

Your idea of add_custom_url() is indeed very simplistic, and clean, The  
major problem with that IMO, is its not flexible enough.. Its ok for  
simplistic structures, but i'm certain it'll not last for ever.

For everyones benefit, i've just written a quick plugin which achieves  
what you set out to do with the product rewrite rules, whilst reducing the  
ammount of useless SQL queries performed as well as avoiding some rather  
messy code:

http://dd32.id.au/uploads/2009/11/HTDIR_URL_Rewrite.zip

In a nutshell:
  * 3 filters to control Rewrite, Query, and Template
  * No eronous SQL queries, The only query is the product load query. (I'm  
refering to post queries here btw)
  * Works with WordPress 2.9, 2.8 should work too
  * Fair bit of comments inline, Not finished obviously
  * Takes /products/<slug> and spits out post_type = product
  * Works no matter what your permastructure is ( none, ie.  
?product=product-1, /product/product-1/, /index.php/product/product-1/)
  * Admin panel to add/remove products
  * 2 lines which i would call hackish.. But thats only telling wordpress  
that we're on a custom page.. (is_single = true, is_home = false)
  * Uses a custom page template bundled with the plugin (Taken from  
single.php from default theme, removed a bit of code, bare basics)
  * Uses as much of the API as currently exists for it.
  * Not finished 100%, Final few touches need to be put on, such as  
flushing of rules on deactivation

Yes, This is not a complete writeup, Its just to demonstrate, that the  
code does not have to be as messy as you've quoted, And while its longer  
and more verbose than add_cusotm_url(), its definately a better start.

I'll be writing a series based around things like this, this code is to  
become part of the first post in the series.

I'd like to see register_post_type() extended to take care of custom  
url's, to a certain extent, and i'll be creating a few tickets later for  
3.0 i hope.. 3.0 is going to bring some great changes by the look of it.
I can say however, That register_post_type will NOT be able to do  
everything for you, It will most likely however, manage to take care of  
the basics at first.
-- 
Using Opera's revolutionary e-mail client: http://www.opera.com/mail/

From wordpress at santosj.name  Sun Nov 29 07:38:40 2009
From: wordpress at santosj.name (Jacob Santos)
Date: Sun, 29 Nov 2009 01:38:40 -0600
Subject: [wp-hackers] The problem with WP_Rewrite <<< RE: Options for
 Controller - Views
In-Reply-To: <161617690911271138o514df897w63f30ac84947d9aa@mail.gmail.com>
References: <4B0C80C1.5070502@santosj.name>	<161617690911261124v3a8258abl46c603abdf5efe9a@mail.gmail.com>
	<4B0FDE83.4070508@santosj.name>
	<161617690911271138o514df897w63f30ac84947d9aa@mail.gmail.com>
Message-ID: <4B122500.4040503@santosj.name>

Well, I do want to thank you for taking the time to discuss this. Well, 
what I'm trying to accomplish is to use the content management and posts 
in WordPress, as well as the administration to manage a project that I 
hope to be extensible and maintainable. The problem is that I want or 
need to be able to have people who work on the code to be able to follow 
the entry points into different sections and templates without a whole 
lot of documentation and without a card house construction.

I will give it to you that I was trying to not use template_redirect and 
I may have been disgusted at WordPress when I realized that it was still 
required. I'm not trying to do what Martin is doing. What I'm trying to 
do is extend WordPress and add new pages and template files to achieve 
my goals. I have seen this done easily and extremely hackish, with page 
templates and I wish to avoid that monstrosity of code. Using a plugin 
instead, I can set up the URL paths that will load in specific template 
files and also prevent having to setup pages to perform the controller.

I will say that it is far easier to use the page template than it is to 
work with the WP_Rewrite and WP_Query. I'm looking to save time, but 
since I'm saving around two months by not working on the authentication, 
authorization, and administration, it will allow me to spend a small 
amount of time on the MVC.

I like MVC, it has proven to be the best way to manage a professional 
project that is maintainable, extensible, and gives freedom to focus on 
the other details of the project. Well, one of the advantages is that 
the controllers are located in one location, which I'll have to setup 
myself.

WordPress does follow some of the MVC (except that some of the model is 
mixed in with the views in some functions). While it isn't strictly MVC, 
it is closer to MVC than a strict presentation <-> business logic split. 
Hell, it uses a "Front Controller" Pattern in any case. I'm just looking 
to finish it up.

The second part is that if WordPress really wants to be used as a 
foundation and kick Joomla's ass, then it really needs to separate 
itself out from the controller part. WordPress (correctly in the 
majority of cases) assumes that you'll only ever use it for WordPress 
and when someone like me comes along and wants to use it instead of 
Joomla or Code Igniter, the decision is how hard is the learning curve?

I mean basically, I would like a system that allows for "routing" to a 
function or controller instead of having to do the workaround with 
setting a variable in WP_Query that I check in template_redirect. It is 
three steps when it should just be one.

I realize that the URL rewriting is separate from the Routing that is 
also separate from the controller. Basically, what you are interacting 
with is not the URL rewriting but the intermediary router which takes 
the URL rewrite and passes it along. Right now, the "router" part is 
contained in the WP_Query and template_redirect hook.

If you don't execute the process in the correct order at the correct 
hook stage then it all goes to hell. With a single function, it bypasses 
all of that. It also allows for rewriting when you want (as long as it 
is before or during the init stage).

Most likely the amount of additions I'm going to add to WordPress will 
most likely be larger than WordPress to where WordPress content 
functionality will exist of only a small part of the finished project. 
This said, The amount of work I am looking at and the amount of WP_Query 
and WP_Rewrite workarounds will make for extremely ugly code. I wish 
that it could be easier for someone to pick up on the code and 
understand what the code is doing, but I still believe it would be 
difficult except for those who understand a vast amount of WordPress. I 
am hoping that anyone can extend my project in the future, including 
adding new controllers as simply without having to figure it out on 
their own from my code.

With the community behind WordPress, the MVC implementation, no matter 
how rigid it may or may not be in the beginning, will most likely be 
expanded to encompass far more flexibility than any framework or class 
library. Or at least if it is done correctly. Definitely going to call 
for unit testing. It will be better than what is currently there.


More below:

Otto wrote:
> On Fri, Nov 27, 2009 at 8:13 AM, Jacob Santos <wordpress at santosj.name> 
> wrote:
>  
>> Yeah, I'm talking about the controller as a whole, which usually 
>> includes
>> the URI parsing, the Router, and the classes or in WordPress's case,
>> functions. I'm also talking about the views, because the controller 
>> that is
>> called loads the specific view.
>>     
>
> In that sense, WordPress has no controller, as you understand it. It
> doesn't really fit the MVC mold. Note: I think that's a good thing.
>   

Actually, it is that WordPress does follow MVC in some regards that it 
works as well as it does currently. Everything is separated in a sort of 
model, which you could just call the WordPress library with the 
templates serving as the views. Most people when working with just 
WordPress theming, don't have to worry about the controller aspect, 
since there is no need.

It is only when you wish to use WordPress for something that it was not 
meant for, that you need to start questioning whether using WordPress at 
all is a good idea. I'm talking about a 3 or 4 month project that will 
dwarf WordPress in functionality, but I'll rather be spending the one or 
two months working on the code quality of the actual project and not 
recreating what WordPress already has, if at all possible. That is time 
I could either have the project done sooner or used to improve the 
quality of the code and add additional features.

>> Actually, to clear up any confusion, the
>> WordPress views, i.e. the templates and their files, will not change. 
>> The
>> only thing that will change is that there will be functions or 
>> classes that
>> loads the view, instead of a if...elseif block.
>>     
>
> Fair enough, but I don't see any benefit to doing this. What will you
> be better able to do with a template-redirect.php changed into some
> class system that you cannot do right now?
>
> Also, again, I must state that this subsystem (file) has zero to do
> with URLs, parsing, rewriting, the query... So how do those fit into
> your idea?
>   

Well, besides the cutting of the three or four part system down to one 
and converting that file to functions or classes, there is none. That 
file has always bothered me, so I wish to finally get to a project I had 
my sights on for the past 14 to 16 months.

>> I couldn't care if it is going to
>> be acceptable for WordPress, I'm doing it for me and if anyone wants 
>> to see
>> it in WordPress, then so be it.
>>     
>
> I just don't want you to waste your time and then to become
> disillusioned if others dislike it. I'd prefer to understand what it
> is that you want to do before you go and do it. I'd like to help make
> improvements to the existing code, if you can tell me where you think
> there are failings.
>   

What I'm saying, is that I'm going to do it whether or not it is going 
to be accepted into WordPress. Simply, I would just release the project 
source as a fork, much like WordPress Mu is now. At some point in the 
future when the rewrite has been tested, is stable, then great. However, 
I think what BackPress is trying to solve would work well with a generic 
Controller implementation that doesn't suck.

>> Also, the whole thing about the parameters. That is already possible 
>> with
>> many controller implementations. Only the most rigid don't allow you 
>> to do
>> that with the URL string. However, one thing, if you wanted 
>> /tag/whatever to
>> set $tag = whatever, then do the same thing as setting certain parts to
>> parameters for a controller. So you would still send it to a 
>> controller, it
>> just wouldn't be the "tag" controller class or function. Or I mean, 
>> it could
>> be the tag controller to save time and automatically call the tag 
>> controller
>> class which sets the $tag parameter to "whatever".
>>     
>
> I understand this, but I found it difficult and confusing in every
> rigid-MVC style system I've tried, which is why I pretty much hate MVC
> in general. It's rigid and inflexible in 99% of the implementations of
> it. It's a bad way to write web-code. IMO, of course.
>   

Yeah, I will agree that when you have a small project, MVC probably 
would be more than it is worth. However in my instance, if I tried to do 
it any other way, I'll be in for a nightmare trying to maintain the 
code. I already found that out with a small project. After doing the 
presentation <-> business logic path and extending to MVC, I can see the 
vast advantages a true MVC implementation inherently gives.

Jacob Santos

From wordpress at santosj.name  Sun Nov 29 18:36:04 2009
From: wordpress at santosj.name (Jacob Santos)
Date: Sun, 29 Nov 2009 12:36:04 -0600
Subject: [wp-hackers] The problem with WP_Rewrite <<< RE: Options for
 Controller - Views
In-Reply-To: <4B122500.4040503@santosj.name>
References: <4B0C80C1.5070502@santosj.name>	<161617690911261124v3a8258abl46c603abdf5efe9a@mail.gmail.com>	<4B0FDE83.4070508@santosj.name>	<161617690911271138o514df897w63f30ac84947d9aa@mail.gmail.com>
	<4B122500.4040503@santosj.name>
Message-ID: <4B12BF14.4070109@santosj.name>

Actually, I think a compromise can be done that would solve my problems, 
be acceptable to add to WordPress now, and be simple. Quite simply, my 
argument is that there are too many actions that must be done and going 
slightly along the lines of the example earlier, I believe that it is 
possible to create a single function which encompasses the WP_rewrite 
rule addition, flushing the rules if needed, setting up the WP_Query, 
query, and executing a callback for the controller.

I believe that by adding this function that encompasses everything a 
person needs, it will be more rigid, but will be incredible simple to 
use and learn. Also, if the person wants to dive further into the 
WP_Rewrite and WP_Query for setting up their own advanced processes, 
then a function will exist to hold their hand along the way.

I will still investigate rewriting the components, so that WordPress is 
not needed to run and thus should speed up the controller parts when 
WordPress is not needed for certain views. Also, This function could be 
done in a few days time, provided I worked on it in a few days time. I'm 
not going to, because it is going to take hours to understand how 
WP_Rewrite and WP_Query work again and getting it to work. Then I'll 
need to create the function to set everything up correctly.

Furthermore, this should allow for forwards compatibility with the new 
code, when it is coded. The function that is called to do all of it 
won't change. I think I can actually live with this solution for my 
project with the advantage of avoid fixing the "problem" at a later date.

Also, it will only serve as a router and will only work with WP_Query to 
setup the correct view to load. I won't work with custom post types, 
that will still have to use the old way.

Jacob Santos

From ryan at boren.nu  Sun Nov 29 20:44:52 2009
From: ryan at boren.nu (Ryan Boren)
Date: Sun, 29 Nov 2009 14:44:52 -0600
Subject: [wp-hackers] Making Capability Manager site wide for MU
In-Reply-To: <eccf1e7c0911281606l47f07617sf75a78ab0cc5b3b4@mail.gmail.com>
References: <eccf1e7c0911281440maa8649dy284077398e70455b@mail.gmail.com>
	<349fe48b0911281524r6a13b7a5v560876ceb1dcaca2@mail.gmail.com>
	<eccf1e7c0911281606l47f07617sf75a78ab0cc5b3b4@mail.gmail.com>
Message-ID: <c8f37c930911291244r1775aa51o7b9cf4811e65bf98@mail.gmail.com>

On Sat, Nov 28, 2009 at 6:06 PM, Jordi Canals <jordi at jcanals.cat> wrote:
> 2009/11/29 scribu <scribu at gmail.com>
>
>> This feature would be really useful.
>>
>> Your implementation ideea looks solid to me.
>>
>> To clarify: this would not allow individual blogs to have different
>> capabilities for the same role, right? (This would be a good thing, in my
>> case)
>>
>>
> Thanks Scribu,
>
> I think you mean having a default site wide, and allow one or more blogs to
> be managed on it's own.
> At the first attempt I will do: Or managing blog by blog, or all blogs
> depending on global settings. After this working, in a next release, I can
> think about allowing some blogs to be 'independent'. (This last could not be
> so difficult, having the blog IDs, I think)
>
> Thanks again for your suggestion.

If the $wp_user_roles global is defined, it is used instead of the
roles in the options table.  Your plugin can store modifications in
site options and then use that site option to populate $wp_user_roles
during init.  On wordpress.com we just hard code the $wp_user_roles
array on wp-config since we rarely ever change it.  This avoids going
to the options table or site options table for role information.

From mikeschinkel at newclarity.net  Sun Nov 29 22:27:41 2009
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Sun, 29 Nov 2009 17:27:41 -0500
Subject: [wp-hackers] The problem with WP_Rewrite <<< RE: Options for
	Controller - Views
In-Reply-To: <op.u34834dqspxmuu@dd32>
References: <4B0C80C1.5070502@santosj.name>
	<161617690911261124v3a8258abl46c603abdf5efe9a@mail.gmail.com>
	<8B9D5A49-3CE6-4661-9B3B-EBCF617B3E99@newclarity.net>
	<161617690911271131t6d21b3f6y35bc814f73f09a06@mail.gmail.com>
	<E7B7D271-B75D-4561-BE5F-8E054D62F7A7@newclarity.net>
	<op.u34834dqspxmuu@dd32>
Message-ID: <9AFC0AE1-D2AC-4E3B-8EB2-6DCC772377E5@newclarity.net>

On Nov 29, 2009, at 1:46 AM, Dion Hulse (dd32) wrote:

Hi Dion,

> For everyones benefit, i've just written a quick plugin which achieves what you set out to do with the product rewrite rules, whilst reducing the amount of useless SQL queries performed as well as avoiding some rather messy code:

Thanks for the proof of concept.  I'll be applying it to my use cases very soon to see how it applies and if it actually addresses the same needs (but it will be a few days before I can get to it, though.)

> Your idea of add_custom_url() is indeed very simplistic, and clean, The major problem with that IMO, is its not flexible enough.. Its ok for simplistic structures, but i'm certain it'll not last for ever.


I'm curious what about add_custom_url() is not flexible enough, at least in concept?  Can you give me some viable use cases such an approach cannot handle?

> Yes, This is not a complete writeup, Its just to demonstrate, that the code does not have to be as messy as you've quoted, And while its longer and more verbose than add_cusotm_url(), its definately a better start.

A point of note; as implemented your solution hard codes the "product" path in logic too complex for the average developer who isn't intimately familiar with adding rewrites, permastructs, flushing of rules, parsing queries, trailingslashits, etc. And it requires careful coordination to make sure everything lines up correctly. Imagine if I had 5 URLs for custom content types? Or 20, especially if they are more complex then just "foo/{foo}?" To implement with the approach you presented would be way beyond all but the more advanced users. 

My #1 key stated goal of my plugin was to hide that complexity (and I think that's what Jacob wants to accomplish too, with his most recent email to the list.)

Of course you could be showing the mechanics so I can make it more generic and if so I really appreciate that.  OTOH, if so I'm confused by your assertion that "add_custom_url() is not flexible enough?"

BTW, I see that you and the WordPress community are fond of using percent signs (%) as URL delimiters and because of that I probably should too.  OTOH, I've always been disheartened that WordPress uses percent signs because there is a draft proposal that has a lot of backers for a URI Template syntax that can scale in complexity unlike WordPress' current approach:

http://bitworking.org/projects/URI-Templates/spec/draft-gregorio-uritemplate-03.html

Minimally that syntax uses braces like the following and I'd like to advocate that WordPress move in that direction for 3.0 so as to be compatible with that future standard (it's already a defacto standard in use by many):

/product/{product_slug}

Maybe I should submit a proposal on Trac?

> * Admin panel to add/remove products

I especially appreciate this part; it shows me how to do something I didn't previously realize there where hooks for.

> I'll be writing a series based around things like this, this code is to become part of the first post in the series.

I look forward to see where you are taking this.

> I'd like to see register_post_type() extended to take care of custom url's, to a certain extent, and i'll be creating a few tickets later for 3.0

Yes it would be nice to have register_post_type() handle custom URLs but I really hope that functionality is not coupled to register_post_type(); it would be better if it were independent but able to be called from register_post_type() for convenience too as there are other custom URL use cases that are not post-type specific, albeit significantly fewer in comparison.

> i hope.. 3.0 is going to bring some great changes by the look of it.

I'm anxious for it!

> I can say however, That register_post_type will NOT be able to do everything for you, It will most likely however, manage to take care of the basics at first.

Do you have specifics of what it WON'T be able to do in mind, or was that a general disclaimer?  

Thanks in advance for response.

-Mike Schinkel

> On Sat, 28 Nov 2009 23:58:05 +1100, Mike Schinkel <mikeschinkel at newclarity.net> wrote:
>>> In other words, I'm trying to explain why I think it's a good system,
>>> and trying to get you to explain to me why you think that it is not.
>> 
>> To start, it is very confusing and hard to figure out what you need to do to accomplish a URL routing task in WordPress.  Let's take a look at the following which is what I'd like to be able to do (my plugin actually does it but in a manner I feel is very fragile):
>> 
>> add_custom_url(	array(
>>   'name'          => 'product-page',
>>   'url_type'      => 'single-post',
>>   'url_template'  => 'products/{product_slug}',
>>   'template_file' => 'custom/product.php',
>>   'post_type'     => 'product',
>> ));
>> 
>> To me that seems very straightforward and is a level of simplicity I think we should strive for, don't you think?  (Wouldn't it be great to have custom URLs addable from the admin console? That's what I think we should have. Also note is assumes a custom post type, the other thing Wordpress badly needs to support in core.)
>> 
>> Now what is (some of) the code I have to write to support that?  Let's take a look:
>> 
>> $wp_query->query_vars['page_id'] = 0;
>> $wp_query->is_page = false;  // A "single-post" is not same as a WordPress "Page"
>> $wp_query->is_single = $wp_query->is_singular = true;
>> if ($post_id = self::get_post_id($wp_query)) {
>>   $wp_query->queried_object = $wp_query->post = get_post($post_id);
>>   $wp_query->query_vars['p'] = $post_id;
>> } else {
>>   $wp_query->is_404 = true;
>> }
>> 
>> Simple?  I think not (what's "is_single" and how does it compare to "is_singular?" Why do I need to set "page_id" to 0? Why do I have to set "query_vars['p']" to $post_id? Why do I have to set "is_page" to false? What else should I have set that I didn't know to set? )
>> ..<snip>..
>> What's more, there's lots of code that runs in core that, by the time I get enough control in my plugin, I have to unravel and redo. That's not an ideal architecture and that's what I'm looking to have improved.
> 
> I think you're hooking too late in the process, and as such, you're running into issues related to WordPress looking too deeply into it before you tell it otherwise.
> 
> Your idea of add_custom_url() is indeed very simplistic, and clean, The major problem with that IMO, is its not flexible enough.. Its ok for simplistic structures, but i'm certain it'll not last for ever.
> 
> For everyones benefit, i've just written a quick plugin which achieves what you set out to do with the product rewrite rules, whilst reducing the ammount of useless SQL queries performed as well as avoiding some rather messy code:
> 
> http://dd32.id.au/uploads/2009/11/HTDIR_URL_Rewrite.zip
> 
> In a nutshell:
> * 3 filters to control Rewrite, Query, and Template
> * No eronous SQL queries, The only query is the product load query. (I'm refering to post queries here btw)
> * Works with WordPress 2.9, 2.8 should work too
> * Fair bit of comments inline, Not finished obviously
> * Takes /products/<slug> and spits out post_type = product
> * Works no matter what your permastructure is ( none, ie. ?product=product-1, /product/product-1/, /index.php/product/product-1/)
> * Admin panel to add/remove products
> * 2 lines which i would call hackish.. But thats only telling wordpress that we're on a custom page.. (is_single = true, is_home = false)
> * Uses a custom page template bundled with the plugin (Taken from single.php from default theme, removed a bit of code, bare basics)
> * Uses as much of the API as currently exists for it.
> * Not finished 100%, Final few touches need to be put on, such as flushing of rules on deactivation
> 
> Yes, This is not a complete writeup, Its just to demonstrate, that the code does not have to be as messy as you've quoted, And while its longer and more verbose than add_cusotm_url(), its definately a better start.
> 
> I'll be writing a series based around things like this, this code is to become part of the first post in the series.
> 
> I'd like to see register_post_type() extended to take care of custom url's, to a certain extent, and i'll be creating a few tickets later for 3.0 i hope.. 3.0 is going to bring some great changes by the look of it.
> I can say however, That register_post_type will NOT be able to do everything for you, It will most likely however, manage to take care of the basics at first.
> -- 
> Using Opera's revolutionary e-mail client: http://www.opera.com/mail/
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers


From pete at jointforcestech.com  Sun Nov 29 22:32:22 2009
From: pete at jointforcestech.com (Pete Mall)
Date: Sun, 29 Nov 2009 14:32:22 -0800
Subject: [wp-hackers] Install any plugin version from the admin
In-Reply-To: <349fe48b0911281532p51800c1eubc96abca73a840b4@mail.gmail.com>
References: <349fe48b0911271525y72810153qc286abc3de51d600@mail.gmail.com> 
	<4B106B04.20802@wpseek.com>
	<349fe48b0911281532p51800c1eubc96abca73a840b4@mail.gmail.com>
Message-ID: <7f49e8010911291432n381ff41fr53bce78b0f59d3cb@mail.gmail.com>

Here you go...
http://www.developersmind.com/wodpress-plugins/wp-plugin-installer
I'm using a hack to get the dev version of the plugin. It would be nice to
have a hook in place to insert the 'Install Development Version' link under
the 'Install Now' link and to add options to allow installing different
versions of a plugin.

--
http://developersmind.com

On Sat, Nov 28, 2009 at 3:32 PM, scribu <scribu at gmail.com> wrote:

> Opened a ticket: http://core.trac.wordpress.org/ticket/11281
>
>
> --
> http://scribu.net
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From jordi at jcanals.cat  Sun Nov 29 23:51:14 2009
From: jordi at jcanals.cat (Jordi Canals)
Date: Mon, 30 Nov 2009 00:51:14 +0100
Subject: [wp-hackers] Making Capability Manager site wide for MU
In-Reply-To: <c8f37c930911291244r1775aa51o7b9cf4811e65bf98@mail.gmail.com>
References: <eccf1e7c0911281440maa8649dy284077398e70455b@mail.gmail.com>
	<349fe48b0911281524r6a13b7a5v560876ceb1dcaca2@mail.gmail.com>
	<eccf1e7c0911281606l47f07617sf75a78ab0cc5b3b4@mail.gmail.com>
	<c8f37c930911291244r1775aa51o7b9cf4811e65bf98@mail.gmail.com>
Message-ID: <eccf1e7c0911291551i6ae34637l6e155778d4500957@mail.gmail.com>

2009/11/29 Ryan Boren <ryan at boren.nu>


> If the $wp_user_roles global is defined, it is used instead of the
> roles in the options table.  Your plugin can store modifications in
> site options and then use that site option to populate $wp_user_roles
> during init.  On wordpress.com we just hard code the $wp_user_roles
> array on wp-config since we rarely ever change it.  This avoids going
> to the options table or site options table for role information.
> _______________________________________________
>

This really looks a nice approach. As it this is a GPL released plugin,
setting it on wp-config is really not an option, but can be used on personal
sites.

Populating the global var $wp_user_roles on init looks really a good option.
Then I just have to save the settings to the site options.

I will play with this on my sandbox. The only con I see, is about the
request made by scribu: Allowing a blog to set its own roles (different from
sitewide ones).
So, I will test both options on development and sure I will found the best
balance between both.

Thanks for your comments! Them are so valuable,

Jordi Canals

From wp-hackers at striderweb.com  Mon Nov 30 02:06:38 2009
From: wp-hackers at striderweb.com (Stephen Rider)
Date: Sun, 29 Nov 2009 20:06:38 -0600
Subject: [wp-hackers] This was painful to read...
In-Reply-To: <B89C1FE6-8591-48A7-AE1B-519C991331B1@newclarity.net>
References: <4DDFBF3D-6E70-4420-8DF0-15579CAAFC78@newclarity.net>
	<77b239a00911280421q5ff6ea94ja0243cc441bdf587@mail.gmail.com>
	<FB4CB4CB-CD30-43DB-89EB-AA1712156124@striderweb.com>
	<B89C1FE6-8591-48A7-AE1B-519C991331B1@newclarity.net>
Message-ID: <8F635931-FFA4-482E-BC01-CDE28BCBDB4A@striderweb.com>


On Nov 28, 2009, at 3:00 PM, Mike Schinkel wrote:

> On Nov 28, 2009, at 3:24 PM, Stephen Rider wrote:
>> It would be cool, for example, to make edit pages modular and abstracted, so Plugins could readily make custom edit pages for Post Types by adding in edit sections -- almost like widgets.  For Post Type X I need the Text box, Parent, Categories, and nothing else.  Boom. Done.
> 
[...]
> That sounds like an extremely good plan.  
> 
> What's more, I'd really like to see the artificial distinction between Posts and Pages minimized, i.e. Currently Posts can have tags and categories, but not Pages while Pages can be part of a menu but not Posts. etc.  It would be nice to have each of these features decoupled and allowed to be assigned in the admin.

I actually have no problem with the way it is, as it's designed to work well, by default, for the way most people do blogs.  That's fine.

The point is that plugins should be able to easily add such things to Pages (for example).  I currently use a (tiny) plugin that adds the Description field to Edit Pages.

> The default configure would be to have Posts and Pages the way they are now but if I wanted to add tagging to Pages then it would be great if I could just add it.

No distinct need for it to be in core if it can readily be done with a plugin.  Let's leave the default as is, and make it *easy* for plugins to do all this as needed.

Regards,

Stephen

-- 
Stephen Rider
http://striderweb.com/


From mikeschinkel at newclarity.net  Mon Nov 30 02:19:43 2009
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Sun, 29 Nov 2009 21:19:43 -0500
Subject: [wp-hackers] This was painful to read...
In-Reply-To: <8F635931-FFA4-482E-BC01-CDE28BCBDB4A@striderweb.com>
References: <4DDFBF3D-6E70-4420-8DF0-15579CAAFC78@newclarity.net>
	<77b239a00911280421q5ff6ea94ja0243cc441bdf587@mail.gmail.com>
	<FB4CB4CB-CD30-43DB-89EB-AA1712156124@striderweb.com>
	<B89C1FE6-8591-48A7-AE1B-519C991331B1@newclarity.net>
	<8F635931-FFA4-482E-BC01-CDE28BCBDB4A@striderweb.com>
Message-ID: <9F19F65F-B730-409A-B513-3CAB535973F5@newclarity.net>

On Nov 29, 2009, at 9:06 PM, Stephen Rider wrote:
> On Nov 28, 2009, at 3:00 PM, Mike Schinkel wrote:
>> What's more, I'd really like to see the artificial distinction between Posts and Pages minimized, i.e. Currently Posts can have tags and categories, but not Pages while Pages can be part of a menu but not Posts. etc.  It would be nice to have each of these features decoupled and allowed to be assigned in the admin.
> 
> I actually have no problem with the way it is, as it's designed to work well, by default, for the way most people do blogs.  That's fine.
> 
> The point is that plugins should be able to easily add such things to Pages (for example).  I currently use a (tiny) plugin that adds the Description field to Edit Pages.
> 
>> The default configure would be to have Posts and Pages the way they are now but if I wanted to add tagging to Pages then it would be great if I could just add it.
> 
> No distinct need for it to be in core if it can readily be done with a plugin.  Let's leave the default as is, and make it *easy* for plugins to do all this as needed.

There's two concerns; how it's architected and what's in the admin console.  I was proposing it to be architected so that the functionality is plugin and play rather than hardcoded.

OTOH I would prefer it to be surfaced in the admin as an advanced option too although I'll willingly cede that concern as long as the architecture is in place for a plugin to leverage it.  

I personally think that if it were in the admin the majority of WordPress sites would be using it within 18 months (note: when I say majority I refer to many sites which haven't been launched yet but would be if the functionality were in the core admin. There is just far too much value that this would create for people who want to launch sites to ignore it.)

-Mike Schinkel
 

From wp-hackers at striderweb.com  Mon Nov 30 02:35:00 2009
From: wp-hackers at striderweb.com (Stephen Rider)
Date: Sun, 29 Nov 2009 20:35:00 -0600
Subject: [wp-hackers] This was painful to read...
In-Reply-To: <9F19F65F-B730-409A-B513-3CAB535973F5@newclarity.net>
References: <4DDFBF3D-6E70-4420-8DF0-15579CAAFC78@newclarity.net>
	<77b239a00911280421q5ff6ea94ja0243cc441bdf587@mail.gmail.com>
	<FB4CB4CB-CD30-43DB-89EB-AA1712156124@striderweb.com>
	<B89C1FE6-8591-48A7-AE1B-519C991331B1@newclarity.net>
	<8F635931-FFA4-482E-BC01-CDE28BCBDB4A@striderweb.com>
	<9F19F65F-B730-409A-B513-3CAB535973F5@newclarity.net>
Message-ID: <65D0F384-ABC1-4B77-AFBC-62F38E4F1B03@striderweb.com>


On Nov 29, 2009, at 8:19 PM, Mike Schinkel wrote:

> I personally think that if it were in the admin the majority of WordPress sites would be using it within 18 months (note: when I say majority I refer to many sites which haven't been launched yet but would be if the functionality were in the core admin. There is just far too much value that this would create for people who want to launch sites to ignore it.)

Being in the Admin would be nice, but not going to happen soon methinks.  Get the infrastructure in there, and *after* it has proved its undeniable worth, then we go back and consider the merits of making the customization GUI part of Core.  Baby steps.  ;-)

Stephen

From scribu at gmail.com  Mon Nov 30 02:35:55 2009
From: scribu at gmail.com (scribu)
Date: Mon, 30 Nov 2009 04:35:55 +0200
Subject: [wp-hackers] Install any plugin version from the admin
In-Reply-To: <7f49e8010911291432n381ff41fr53bce78b0f59d3cb@mail.gmail.com>
References: <349fe48b0911271525y72810153qc286abc3de51d600@mail.gmail.com>
	<4B106B04.20802@wpseek.com>
	<349fe48b0911281532p51800c1eubc96abca73a840b4@mail.gmail.com>
	<7f49e8010911291432n381ff41fr53bce78b0f59d3cb@mail.gmail.com>
Message-ID: <349fe48b0911291835q3620cd1cj9ac1d2e67f6bfe81@mail.gmail.com>

Pretty hackish, but it works :)

PS: In the zip file, you shouldn't have

wp-plugin-installer/wp-plugin-installer/wp-plugin-installer.php

but simply

wp-plugin-installer/wp-plugin-installer.php


On Mon, Nov 30, 2009 at 12:32 AM, Pete Mall <pete at jointforcestech.com>wrote:

> Here you go...
> http://www.developersmind.com/wodpress-plugins/wp-plugin-installer
> I'm using a hack to get the dev version of the plugin. It would be nice to
> have a hook in place to insert the 'Install Development Version' link under
> the 'Install Now' link and to add options to allow installing different
> versions of a plugin.
>
> --
> http://developersmind.com
>
> On Sat, Nov 28, 2009 at 3:32 PM, scribu <scribu at gmail.com> wrote:
>
> > Opened a ticket: http://core.trac.wordpress.org/ticket/11281
> >
> >
> > --
> > http://scribu.net
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers at lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> >
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>



-- 
http://scribu.net

From mikeschinkel at newclarity.net  Mon Nov 30 02:37:54 2009
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Sun, 29 Nov 2009 21:37:54 -0500
Subject: [wp-hackers] This was painful to read...
In-Reply-To: <65D0F384-ABC1-4B77-AFBC-62F38E4F1B03@striderweb.com>
References: <4DDFBF3D-6E70-4420-8DF0-15579CAAFC78@newclarity.net>
	<77b239a00911280421q5ff6ea94ja0243cc441bdf587@mail.gmail.com>
	<FB4CB4CB-CD30-43DB-89EB-AA1712156124@striderweb.com>
	<B89C1FE6-8591-48A7-AE1B-519C991331B1@newclarity.net>
	<8F635931-FFA4-482E-BC01-CDE28BCBDB4A@striderweb.com>
	<9F19F65F-B730-409A-B513-3CAB535973F5@newclarity.net>
	<65D0F384-ABC1-4B77-AFBC-62F38E4F1B03@striderweb.com>
Message-ID: <BDD1AA90-A64C-408F-BC06-F5BA620DA739@newclarity.net>

Agreed.

On Nov 29, 2009, at 9:35 PM, Stephen Rider wrote:

> 
> On Nov 29, 2009, at 8:19 PM, Mike Schinkel wrote:
> 
>> I personally think that if it were in the admin the majority of WordPress sites would be using it within 18 months (note: when I say majority I refer to many sites which haven't been launched yet but would be if the functionality were in the core admin. There is just far too much value that this would create for people who want to launch sites to ignore it.)
> 
> Being in the Admin would be nice, but not going to happen soon methinks.  Get the infrastructure in there, and *after* it has proved its undeniable worth, then we go back and consider the merits of making the customization GUI part of Core.  Baby steps.  ;-)
> 
> Stephen
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers


From scribu at gmail.com  Mon Nov 30 02:39:59 2009
From: scribu at gmail.com (scribu)
Date: Mon, 30 Nov 2009 04:39:59 +0200
Subject: [wp-hackers] Making Capability Manager site wide for MU
In-Reply-To: <eccf1e7c0911291551i6ae34637l6e155778d4500957@mail.gmail.com>
References: <eccf1e7c0911281440maa8649dy284077398e70455b@mail.gmail.com>
	<349fe48b0911281524r6a13b7a5v560876ceb1dcaca2@mail.gmail.com>
	<eccf1e7c0911281606l47f07617sf75a78ab0cc5b3b4@mail.gmail.com>
	<c8f37c930911291244r1775aa51o7b9cf4811e65bf98@mail.gmail.com>
	<eccf1e7c0911291551i6ae34637l6e155778d4500957@mail.gmail.com>
Message-ID: <349fe48b0911291839l73b4054fn56981870c06406d4@mail.gmail.com>

>
> I will play with this on my sandbox. The only con I see, is about the
> request made by scribu: Allowing a blog to set its own roles (different
> from
> sitewide ones).
>

I wasn't clear: I _don't_ need that feature. But I suppose that other people
might.

Ryan's suggestion looks like the most efficient approach.


-- 
http://scribu.net

From pete at jointforcestech.com  Mon Nov 30 03:19:26 2009
From: pete at jointforcestech.com (Pete Mall)
Date: Sun, 29 Nov 2009 19:19:26 -0800
Subject: [wp-hackers] Install any plugin version from the admin
In-Reply-To: <349fe48b0911291835q3620cd1cj9ac1d2e67f6bfe81@mail.gmail.com>
References: <349fe48b0911271525y72810153qc286abc3de51d600@mail.gmail.com> 
	<4B106B04.20802@wpseek.com>
	<349fe48b0911281532p51800c1eubc96abca73a840b4@mail.gmail.com> 
	<7f49e8010911291432n381ff41fr53bce78b0f59d3cb@mail.gmail.com> 
	<349fe48b0911291835q3620cd1cj9ac1d2e67f6bfe81@mail.gmail.com>
Message-ID: <7f49e8010911291919y7d84d8ccke91e05deb88baafd@mail.gmail.com>

Didn't catch that.. Thanks for the heads up.

On Sun, Nov 29, 2009 at 6:35 PM, scribu <scribu at gmail.com> wrote:

> Pretty hackish, but it works :)
>
> PS: In the zip file, you shouldn't have
>
> wp-plugin-installer/wp-plugin-installer/wp-plugin-installer.php
>
> but simply
>
> wp-plugin-installer/wp-plugin-installer.php
>
>
> On Mon, Nov 30, 2009 at 12:32 AM, Pete Mall <pete at jointforcestech.com
> >wrote:
>
> > Here you go...
> > http://www.developersmind.com/wodpress-plugins/wp-plugin-installer
> > I'm using a hack to get the dev version of the plugin. It would be nice
> to
> > have a hook in place to insert the 'Install Development Version' link
> under
> > the 'Install Now' link and to add options to allow installing different
> > versions of a plugin.
> >
> > --
> > http://developersmind.com
> >
> > On Sat, Nov 28, 2009 at 3:32 PM, scribu <scribu at gmail.com> wrote:
> >
> > > Opened a ticket: http://core.trac.wordpress.org/ticket/11281
> > >
> > >
> > > --
> > > http://scribu.net
> > > _______________________________________________
> > > wp-hackers mailing list
> > > wp-hackers at lists.automattic.com
> > > http://lists.automattic.com/mailman/listinfo/wp-hackers
> > >
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers at lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> >
>
>
>
> --
> http://scribu.net
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From ghodmode at ghodmode.com  Mon Nov 30 05:42:15 2009
From: ghodmode at ghodmode.com (Ghodmode)
Date: Mon, 30 Nov 2009 18:42:15 +1300
Subject: [wp-hackers] no 'before' or 'after' parameters for wp_list_pages()?
Message-ID: <1259559735.15443.12.camel@home>

I'm using both wp_list_bookmarks() and wp_list_pages() in my theme to
generate a horizontal menu bar in the header.  I prefer not to use HTML
lists (li) elements, so I use the 'before=' and 'after=' parameters for
my call to wp_list_bookmarks(), but there's no equivalent parameter for
the wp_list_pages() function.

I noticed that wp_list_bookmarks() gets 'before' and 'after' from
wp_parse_args(), but wp_list_pages() looks a bit more convoluted.

I'd like to have those two options available to wp_list_pages().  Does
anyone agree or disagree?

Thank you.

--
Ghodmode
http://www.ghodmode.com


From pete at jointforcestech.com  Mon Nov 30 05:50:58 2009
From: pete at jointforcestech.com (Pete Mall)
Date: Sun, 29 Nov 2009 21:50:58 -0800
Subject: [wp-hackers] no 'before' or 'after' parameters for
	wp_list_pages()?
In-Reply-To: <1259559735.15443.12.camel@home>
References: <1259559735.15443.12.camel@home>
Message-ID: <7f49e8010911292150v1006b201waed6bc53d1507095@mail.gmail.com>

wp_list_pages() accepts the following two arguments:
 *link_before*  (*string*) Sets the text or html that proceeds the link text
inside <a> tag. (This parameter was added with Version 2.7 </Version_2.7>)
*link_after*  (*string*) Sets the text or html that follows the link text
inside <a> tag. (This parameter was added with Version 2.7 </Version_2.7>)
On Sun, Nov 29, 2009 at 9:42 PM, Ghodmode <ghodmode at ghodmode.com> wrote:

> I'm using both wp_list_bookmarks() and wp_list_pages() in my theme to
> generate a horizontal menu bar in the header.  I prefer not to use HTML
> lists (li) elements, so I use the 'before=' and 'after=' parameters for
> my call to wp_list_bookmarks(), but there's no equivalent parameter for
> the wp_list_pages() function.
>
> I noticed that wp_list_bookmarks() gets 'before' and 'after' from
> wp_parse_args(), but wp_list_pages() looks a bit more convoluted.
>
> I'd like to have those two options available to wp_list_pages().  Does
> anyone agree or disagree?
>
> Thank you.
>
> --
> Ghodmode
> http://www.ghodmode.com
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From ghodmode at ghodmode.com  Mon Nov 30 05:57:54 2009
From: ghodmode at ghodmode.com (Ghodmode)
Date: Mon, 30 Nov 2009 18:57:54 +1300
Subject: [wp-hackers] no 'before' or 'after' parameters for
 wp_list_pages()?
In-Reply-To: <7f49e8010911292150v1006b201waed6bc53d1507095@mail.gmail.com>
References: <1259559735.15443.12.camel@home>
	<7f49e8010911292150v1006b201waed6bc53d1507095@mail.gmail.com>
Message-ID: <1259560674.15443.14.camel@home>

On Sun, 2009-11-29 at 21:50 -0800, Pete Mall wrote:
> wp_list_pages() accepts the following two arguments:
>  *link_before*  (*string*) Sets the text or html that proceeds the link text
> inside <a> tag. (This parameter was added with Version 2.7 </Version_2.7>)
> *link_after*  (*string*) Sets the text or html that follows the link text
> inside <a> tag. (This parameter was added with Version 2.7 </Version_2.7>)
> On Sun, Nov 29, 2009 at 9:42 PM, Ghodmode <ghodmode at ghodmode.com> wrote:

Those don't serve the same purpose because they only control text or
html that is _inside_ the anchor tag.

I want to get rid of the <li> tags outside of the anchor tag.


From spencer.gurnk at gmail.com  Mon Nov 30 06:01:42 2009
From: spencer.gurnk at gmail.com (Spencer Finnell)
Date: Mon, 30 Nov 2009 01:01:42 -0500
Subject: [wp-hackers] no 'before' or 'after' parameters for
	wp_list_pages()?
In-Reply-To: <1259559735.15443.12.camel@home>
References: <1259559735.15443.12.camel@home>
Message-ID: <4B135FC6.4090706@gmail.com>

You could use get_pages 
<http://codex.wordpress.org/Function_Reference/get_pages> to get an 
array of the pages, then loop through them creating a custom structure.

Ghodmode wrote:
> I'm using both wp_list_bookmarks() and wp_list_pages() in my theme to
> generate a horizontal menu bar in the header.  I prefer not to use HTML
> lists (li) elements, so I use the 'before=' and 'after=' parameters for
> my call to wp_list_bookmarks(), but there's no equivalent parameter for
> the wp_list_pages() function.
>
> I noticed that wp_list_bookmarks() gets 'before' and 'after' from
> wp_parse_args(), but wp_list_pages() looks a bit more convoluted.
>
> I'd like to have those two options available to wp_list_pages().  Does
> anyone agree or disagree?
>
> Thank you.
>
> --
> Ghodmode
> http://www.ghodmode.com
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
>   

From anacin at gwhatchet.com  Mon Nov 30 06:02:38 2009
From: anacin at gwhatchet.com (Andrew Nacin)
Date: Mon, 30 Nov 2009 01:02:38 -0500
Subject: [wp-hackers] no 'before' or 'after' parameters for
	wp_list_pages()?
In-Reply-To: <4B135FC6.4090706@gmail.com>
References: <1259559735.15443.12.camel@home> <4B135FC6.4090706@gmail.com>
Message-ID: <8b870c460911292202q668c8d5al70ea382773bce942@mail.gmail.com>

>
> You could use get_pages <
> http://codex.wordpress.org/Function_Reference/get_pages> to get an array
> of the pages, then loop through them creating a custom structure.
>

Or you could write your own walker for wp_list_pages.

From ghodmode at ghodmode.com  Mon Nov 30 06:15:46 2009
From: ghodmode at ghodmode.com (Ghodmode)
Date: Mon, 30 Nov 2009 19:15:46 +1300
Subject: [wp-hackers] no 'before' or 'after' parameters for
 wp_list_pages()?
In-Reply-To: <8b870c460911292202q668c8d5al70ea382773bce942@mail.gmail.com>
References: <1259559735.15443.12.camel@home> <4B135FC6.4090706@gmail.com>
	<8b870c460911292202q668c8d5al70ea382773bce942@mail.gmail.com>
Message-ID: <1259561746.15443.23.camel@home>

On Mon, 2009-11-30 at 01:02 -0500, Andrew Nacin wrote:
> >
> > You could use get_pages <
> > http://codex.wordpress.org/Function_Reference/get_pages> to get an array
> > of the pages, then loop through them creating a custom structure.
> >
> 
> Or you could write your own walker for wp_list_pages.

Thank you.  Both of those ideas solve the problem.  I can also solve the
visual problem with just a little bit more CSS.  But I'm still wondering
if these parameters should be available for wp_list_pages().

Is this idea interesting enough to consider a change to the wordpress
code?

If so, does anyone feel like making the change?

I certainly know PHP, but I'm not sure if I'm up to contributing a code
change on such a large project.  Still, if noone else wants to do it, I
might consider giving it a try, unless someone tells me it's a stupid
idea :)

--
Ghodmode
http://www.ghodmode.com


From ghodmode at ghodmode.com  Mon Nov 30 08:36:16 2009
From: ghodmode at ghodmode.com (Ghodmode)
Date: Mon, 30 Nov 2009 21:36:16 +1300
Subject: [wp-hackers] no 'before' or 'after' parameters for
	wp_list_pages()?
In-Reply-To: <1259559735.15443.12.camel@home>
References: <1259559735.15443.12.camel@home>
Message-ID: <1259570176.30644.16.camel@home>

On Mon, 2009-11-30 at 18:42 +1300, Ghodmode wrote:
> I'm using both wp_list_bookmarks() and wp_list_pages() in my theme to
> generate a horizontal menu bar in the header.  I prefer not to use HTML
> lists (li) elements, so I use the 'before=' and 'after=' parameters for
> my call to wp_list_bookmarks(), but there's no equivalent parameter for
> the wp_list_pages() function.

I was reinventing the wheel here.  wp_page_menu()
(http://codex.wordpress.org/Template_Tags/wp_page_menu ) is designed to
do what I want.  This generates a DIV which contains an unordered list
where each list item contains a link.

-- Kinda Off Topic ...
Doesn't the default unordered list go against the concept of separating
data from presentation and semantic representation?  I know that a UL is
a popular way to represent a menu, but a menu is, semantically, a
different part of a document than the traditional meaning of the word
"list".  For example, a list of my favorite movies isn't equivalent to
the menu.  The menu is an index of the entire site's content, not
actually part of the current document.

Anyway, that's a debate for a different list :)

Thank you.

--
Ghodmode
http://www.ghodmode.com


From scribu at gmail.com  Mon Nov 30 12:01:42 2009
From: scribu at gmail.com (scribu)
Date: Mon, 30 Nov 2009 14:01:42 +0200
Subject: [wp-hackers] no 'before' or 'after' parameters for
	wp_list_pages()?
In-Reply-To: <1259570176.30644.16.camel@home>
References: <1259559735.15443.12.camel@home> <1259570176.30644.16.camel@home>
Message-ID: <349fe48b0911300401r2894ec50m813c4246f4086e34@mail.gmail.com>

On Mon, Nov 30, 2009 at 10:36 AM, Ghodmode <ghodmode at ghodmode.com> wrote:

> Doesn't the default unordered list go against the concept of separating
> data from presentation and semantic representation?  I know that a UL is
> a popular way to represent a menu, but a menu is, semantically, a
> different part of a document than the traditional meaning of the word
> "list".  For example, a list of my favorite movies isn't equivalent to
> the menu.  The menu is an index of the entire site's content, not
> actually part of the current document.
>

I can't think of a more semantic way to represent a menu, except for the nev
<nav> element in HTML5. But that still uses a list.


-- 
http://scribu.net

From mikeschinkel at newclarity.net  Mon Nov 30 12:06:36 2009
From: mikeschinkel at newclarity.net (Mike Schinkel)
Date: Mon, 30 Nov 2009 07:06:36 -0500
Subject: [wp-hackers] no 'before' or 'after' parameters for
	wp_list_pages()?
In-Reply-To: <349fe48b0911300401r2894ec50m813c4246f4086e34@mail.gmail.com>
References: <1259559735.15443.12.camel@home> <1259570176.30644.16.camel@home>
	<349fe48b0911300401r2894ec50m813c4246f4086e34@mail.gmail.com>
Message-ID: <CA0B5200-3C2A-4027-9EDA-F9821A70DF60@newclarity.net>

On Mon, Nov 30, 2009 at 10:36 AM, Ghodmode <ghodmode at ghodmode.com> wrote:
> Doesn't the default unordered list go against the concept of separating
> data from presentation and semantic representation?  I know that a UL is
> a popular way to represent a menu, but a menu is, semantically, a
> different part of a document than the traditional meaning of the word
> "list".  For example, a list of my favorite movies isn't equivalent to
> the menu.  The menu is an index of the entire site's content, not
> actually part of the current document.
> 

<ul class="movies favorites">
...
</ul>

vs. 

<ul class="menu">
...
</ul>

Or similar.

-Mike Schinkel

From kkarpieszuk at gmail.com  Mon Nov 30 17:11:52 2009
From: kkarpieszuk at gmail.com (Konrad Karpieszuk)
Date: Mon, 30 Nov 2009 18:11:52 +0100
Subject: [wp-hackers] what if i will import sql file with database?
In-Reply-To: <4B11617A.2040202@gmail.com>
References: <67dfa4090911280707j17801aauce59f9520b15e850@mail.gmail.com>
	<4B11617A.2040202@gmail.com>
Message-ID: <67dfa4090911300911k76ac8f38h9d0b67c9ae3d6492@mail.gmail.com>

ok, we are after moving databases and... it doesn't work :)

i dumped mysql database (mysqldump) at old server and put it on new
server. i also copied plugins and themes folder (images for this
moment wasnt moved)

everything looks great except of wp-admin which we cannot achieve.
when i try to log in, i write there login and password, click to log
in and wordpress again shows me login page

if i put wrong password it shows me info that password was wrong. this
must be some problem with session but why and what?

On Sat, Nov 28, 2009 at 6:44 PM, Harish Narayanan
<harish.mlists at gmail.com> wrote:
> Konrad Karpieszuk wrote:
>> hello
>>
>> we plan to move our wordpress installation with tons of posts, plugins
>> and images to new hosting with new domain.
>>
>> we just made copy of database with mysqldump and we want to put it on
>> new web server, where new installation of wordpress is installed (we
>> will remove automatically created database and we will change settings
>> in wp-config.php). also we plan to import everything from /wp-content
>>
>> what should we expect? :) for sure will be problem with domain. in
>> which cell in mysql it is saved? what ellse?
>
> Following the steps you describe, everything should be fine, except
> you'll find your site magically remembering the old domain and
> constantly jumping to it (like if you try to log-in to wp-admin).
>
> In order to get around this, I used to change the site URL in a couple
> of places in the database, but upon some googling,
>
> http://lmgtfy.com/?q=moving+wordpress+to+a+new+domain
>
> I see that it can be done by adding the following to your wp-config.php
>
> define('WP_SITEURL', 'http://newdomain.pl');
> define('WP_HOME', 'http://newdomain.pl');
>
> Harish
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>



-- 
(en) regards / (pl) pozdrawiam
Konrad Karpieszuk
http://konradjestwrwandzie.wordpress.com/

From scribu at gmail.com  Mon Nov 30 17:41:44 2009
From: scribu at gmail.com (scribu)
Date: Mon, 30 Nov 2009 19:41:44 +0200
Subject: [wp-hackers] what if i will import sql file with database?
In-Reply-To: <67dfa4090911300911k76ac8f38h9d0b67c9ae3d6492@mail.gmail.com>
References: <67dfa4090911280707j17801aauce59f9520b15e850@mail.gmail.com>
	<4B11617A.2040202@gmail.com>
	<67dfa4090911300911k76ac8f38h9d0b67c9ae3d6492@mail.gmail.com>
Message-ID: <349fe48b0911300941u201d7f65oaebd7835bc2ae39e@mail.gmail.com>

In the new db, go to wp_options and update the values for 'home' and
'siteurl'.


On Mon, Nov 30, 2009 at 7:11 PM, Konrad Karpieszuk <kkarpieszuk at gmail.com>wrote:

> ok, we are after moving databases and... it doesn't work :)
>
> i dumped mysql database (mysqldump) at old server and put it on new
> server. i also copied plugins and themes folder (images for this
> moment wasnt moved)
>
> everything looks great except of wp-admin which we cannot achieve.
> when i try to log in, i write there login and password, click to log
> in and wordpress again shows me login page
>
> if i put wrong password it shows me info that password was wrong. this
> must be some problem with session but why and what?
>
> On Sat, Nov 28, 2009 at 6:44 PM, Harish Narayanan
> <harish.mlists at gmail.com> wrote:
> > Konrad Karpieszuk wrote:
> >> hello
> >>
> >> we plan to move our wordpress installation with tons of posts, plugins
> >> and images to new hosting with new domain.
> >>
> >> we just made copy of database with mysqldump and we want to put it on
> >> new web server, where new installation of wordpress is installed (we
> >> will remove automatically created database and we will change settings
> >> in wp-config.php). also we plan to import everything from /wp-content
> >>
> >> what should we expect? :) for sure will be problem with domain. in
> >> which cell in mysql it is saved? what ellse?
> >
> > Following the steps you describe, everything should be fine, except
> > you'll find your site magically remembering the old domain and
> > constantly jumping to it (like if you try to log-in to wp-admin).
> >
> > In order to get around this, I used to change the site URL in a couple
> > of places in the database, but upon some googling,
> >
> > http://lmgtfy.com/?q=moving+wordpress+to+a+new+domain
> >
> > I see that it can be done by adding the following to your wp-config.php
> >
> > define('WP_SITEURL', 'http://newdomain.pl');
> > define('WP_HOME', 'http://newdomain.pl');
> >
> > Harish
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers at lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> >
>
>
>
> --
> (en) regards / (pl) pozdrawiam
> Konrad Karpieszuk
> http://konradjestwrwandzie.wordpress.com/
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>



-- 
http://scribu.net

From jer at simianuprising.com  Mon Nov 30 18:19:20 2009
From: jer at simianuprising.com (Jeremy Clarke)
Date: Mon, 30 Nov 2009 13:19:20 -0500
Subject: [wp-hackers] no 'before' or 'after' parameters for
	wp_list_pages()?
In-Reply-To: <CA0B5200-3C2A-4027-9EDA-F9821A70DF60@newclarity.net>
References: <1259559735.15443.12.camel@home> <1259570176.30644.16.camel@home>
	<349fe48b0911300401r2894ec50m813c4246f4086e34@mail.gmail.com>
	<CA0B5200-3C2A-4027-9EDA-F9821A70DF60@newclarity.net>
Message-ID: <e1202cb10911301019v7c6957efs458f0fdaa3f57f9@mail.gmail.com>

On a related note I recently wrote a simple function to handle what seems to
be a common trope for the template tags api:

the_{object}($before = '', $after = '', $echo = TRUE);

Almost all the_* functions use this and IMHO its a good system for display
functions. I started using it in my own display functions and got sick of
duplicating the if ($before) logic, so I wrote this instead:


/**
 * Handle $before $after and handle $echo parameters for display functions
 *
 * If $output is empty nothing will happen.
 *
 * @param string $output actual stuff to display
 * @param string $before html to show before $output
 * @param string $after html to show after $output
 * @param boolean $echo if FALSE return instead of printing
 */
function gv_before_after_echo ($output, $before = '', $after = '', $echo =
TRUE) {

    if (!$output) return

    $final_output = '';
    if ($before)
        $final_output .= $before;

    $final_output .= $output;

    if ($after)
        $final_output .= $after;

    // use $echo to determine if it should be returned or printed

    if (!$echo)
        return $final_output;

    echo $final_output;
}


This means that instead of having logic in each function you just generate
the actual output without $before and $after, then pass it to this, like

function the_thing($output, $before = '', $after = '', $echo = TRUE) {
 $output = get_thing();
 return gv_before_after_echo($output, $before, $after, $echo);
}

IMHO having this in core would simplify things a lot and would make it easy
to create intelligent template tags. Like wp_parse_args() I think it would
also have the effect of getting more people to write more extensible
template tags rather than forgetting to include $before and $after.

I haven't written a patch for it yet, so let me know if you have any ideas
as to why its a dumb idea or anything. It would be a big project to convert
every template tag from the start, but we could switch a few and catch the
others as they come around.



-- 
Jeremy Clarke | http://jeremyclarke.org
Code and Design | http://globalvoicesonline.org

From photofantaisie at gmail.com  Mon Nov 30 20:37:40 2009
From: photofantaisie at gmail.com (Ade Walker)
Date: Mon, 30 Nov 2009 21:37:40 +0100
Subject: [wp-hackers] Using after_plugin_row_$plugin_file when plugin is
	deactivated
Message-ID: <9dd057850911301237u42783fd5i7b58db27fc8a1b5b@mail.gmail.com>

Hi all,

Maybe I'm going about this the wrong way, or overlooking something
blindingly obvious...

I want to add a WP version check after my plugin has been installed, but
before it is activated, and display a warning message in the main plugins
page if the WP version is not compatible. However, hooking into
after_plugin_row_$plugin_file only works once the plugin has been activated
- which is too late.

Any thoughts?

Thanks. :-)

From dan at jallits.com  Mon Nov 30 20:41:18 2009
From: dan at jallits.com (Daniel Craig Jallits)
Date: Mon, 30 Nov 2009 14:41:18 -0600
Subject: [wp-hackers] Using after_plugin_row_$plugin_file when plugin is
	deactivated
In-Reply-To: <9dd057850911301237u42783fd5i7b58db27fc8a1b5b@mail.gmail.com>
References: <9dd057850911301237u42783fd5i7b58db27fc8a1b5b@mail.gmail.com>
Message-ID: <2D8B4591-AC80-4789-9CEE-E2541981AC0B@jallits.com>

Sorry I went to Colorado for the weekend and did a little skiing with  
some buddies from the Marines over the weekend. The testimonials are  
now working. Take a look. I know we will address the email newsletter  
sign-up and the contact form when the site is on Shell's server. I  
will take care of the menu when it is moved there as well.

Is there anything else? Let me know. I want to get this moved off my  
server as I will be doing some heavy modifications to the server in  
anticipation of the hosting contracts I have coming.

_____________________________
Daniel Craig Jallits
3427 N. Paulina Street #1
Chicago, Illinois, 60657-1220
United States of America
(312) 613 0537 | http://jallits.com/

On Nov 30, 2009, at 2:37 PM, Ade Walker wrote:

> Hi all,
>
> Maybe I'm going about this the wrong way, or overlooking something
> blindingly obvious...
>
> I want to add a WP version check after my plugin has been installed,  
> but
> before it is activated, and display a warning message in the main  
> plugins
> page if the WP version is not compatible. However, hooking into
> after_plugin_row_$plugin_file only works once the plugin has been  
> activated
> - which is too late.
>
> Any thoughts?
>
> Thanks. :-)
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers


From dan at jallits.com  Mon Nov 30 20:44:59 2009
From: dan at jallits.com (Daniel Craig Jallits)
Date: Mon, 30 Nov 2009 14:44:59 -0600
Subject: [wp-hackers] Using after_plugin_row_$plugin_file when plugin is
	deactivated
In-Reply-To: <9dd057850911301237u42783fd5i7b58db27fc8a1b5b@mail.gmail.com>
References: <9dd057850911301237u42783fd5i7b58db27fc8a1b5b@mail.gmail.com>
Message-ID: <00D34096-3BF6-4B33-88B9-43468193BD2B@jallits.com>

Okay I am an idiot everybody. Sorry!

_____________________________
Daniel Craig Jallits
3427 N. Paulina Street #1
Chicago, Illinois, 60657-1220
United States of America
(312) 613 0537 | http://jallits.com/



From if.website at gmail.com  Mon Nov 30 20:49:33 2009
From: if.website at gmail.com (Austin Matzko)
Date: Mon, 30 Nov 2009 14:49:33 -0600
Subject: [wp-hackers] Using after_plugin_row_$plugin_file when plugin is
	deactivated
In-Reply-To: <9dd057850911301237u42783fd5i7b58db27fc8a1b5b@mail.gmail.com>
References: <9dd057850911301237u42783fd5i7b58db27fc8a1b5b@mail.gmail.com>
Message-ID: <674b4a3b0911301249t79486198ofe043c0b0b001b7e@mail.gmail.com>

On Mon, Nov 30, 2009 at 2:37 PM, Ade Walker <photofantaisie at gmail.com> wrote:
> However, hooking into
> after_plugin_row_$plugin_file only works once the plugin has been activated
> - which is too late.
>
> Any thoughts?

Put enough compatible code in the main plugin file to display the
message, and include any incompatible code from a separate file only
if everything checks out.

From emmensetech at gmail.com  Mon Nov 30 21:25:25 2009
From: emmensetech at gmail.com (Aaron Brazell)
Date: Mon, 30 Nov 2009 16:25:25 -0500
Subject: [wp-hackers] This was painful to read...
In-Reply-To: <31CE3F55-B12E-4B8F-8096-394E23D1B579@newclarity.net>
References: <4DDFBF3D-6E70-4420-8DF0-15579CAAFC78@newclarity.net>
	<77b239a00911280421q5ff6ea94ja0243cc441bdf587@mail.gmail.com>
	<659E46A2-76B1-4894-9766-1C51BBEC414E@newclarity.net>
	<77b239a00911280527v2501fb92i2ef2de9d9657cbc1@mail.gmail.com>
	<81AC58EF-62EC-4203-B4F6-0D7E0B4C070A@newclarity.net>
	<349fe48b0911280609n6691d318mf6e519c0eb3b0c3b@mail.gmail.com>
	<7F9E570E-0FF2-47AB-9DED-F7462C99D19C@newclarity.net>
	<349fe48b0911280620t52092161iea9a4eac95831d66@mail.gmail.com>
	<31CE3F55-B12E-4B8F-8096-394E23D1B579@newclarity.net>
Message-ID: <ca7320070911301325m16ae9eb2p2b7cdbb8e727cebe@mail.gmail.com>

On Sat, Nov 28, 2009 at 9:25 AM, Mike Schinkel
<mikeschinkel at newclarity.net>wrote:

> Sounds like then that my issue with custom URLs will need to (mostly) be
> addressed in order to make custom post types usable, right?
>
> FYI, I'd say that 80% of what I've needed custom URLs for has been custom
> post types.
>
>
In WP 2.9, register_post_type() adds a post type of foo.

Using WP_Rewrite::add_rewrite_tag() allows you to add a new custom permalink
structure, say, /%foo%/

Add these things to a fuction hooked on init with a low priority and you
should be good to go. I don't see the problem with a little ingenuity and a
few lines of code.


Aaron Brazell
CEO, Emmense Technologies
Lead Editor, Technosailor.com
Author, The WordPress Bible

e: aaron at technosailor.com
b: http://technosailor.com
t: http://twitter.com/technosailor
p: 443-455-1056Aaron Brazell
web:: www.technosailor.com
phone:: 410-608-6620
skype:: technosailor
twitter:: @technosailor

From derek at amphibian.info  Mon Nov 30 22:02:01 2009
From: derek at amphibian.info (Derek Hogue)
Date: Mon, 30 Nov 2009 14:02:01 -0800 (PST)
Subject: [wp-hackers] MU-compatbility with custom plugin tables?
Message-ID: <0a3aa8ae-b827-4de5-a222-f44d62b012f1@g27g2000yqn.googlegroups.com>

Hey all - recently I've been asked by several users to look into full
MU-compatibility for my plugin GigPress. The problem is, GigPress uses
4 custom database tables to hold its data.

So when it's installed, these tables are created with the current
database prefix (say, wp_').  But if the plugin is installed as a site-
wide plugin (in the 'mu-plugins' folder), when other users try to add
data, it doesn't fly (trying to insert into tables that don't exist,
like 'wp_2_gigpress_shows').

Does MU offer any sort of hook for site-wide-plugins to automatically
create these tables for each individual blog when it's created? Or are
plugins which use their own DB tables only compatible when put into
the 'plugins' folder in MU?

Any guidance here would be great!  Thanks,
Derek

From otto at ottodestruct.com  Mon Nov 30 22:05:36 2009
From: otto at ottodestruct.com (Otto)
Date: Mon, 30 Nov 2009 16:05:36 -0600
Subject: [wp-hackers] Using after_plugin_row_$plugin_file when plugin is
	deactivated
In-Reply-To: <9dd057850911301237u42783fd5i7b58db27fc8a1b5b@mail.gmail.com>
References: <9dd057850911301237u42783fd5i7b58db27fc8a1b5b@mail.gmail.com>
Message-ID: <161617690911301405h126a3bcdo37dcb27f16b0a15a@mail.gmail.com>

Nothing of the plugin gets included until it's activated. So what you
want can't be done.

-Otto



On Mon, Nov 30, 2009 at 2:37 PM, Ade Walker <photofantaisie at gmail.com> wrote:
> Hi all,
>
> Maybe I'm going about this the wrong way, or overlooking something
> blindingly obvious...
>
> I want to add a WP version check after my plugin has been installed, but
> before it is activated, and display a warning message in the main plugins
> page if the WP version is not compatible. However, hooking into
> after_plugin_row_$plugin_file only works once the plugin has been activated
> - which is too late.
>
> Any thoughts?
>
> Thanks. :-)
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From if.website at gmail.com  Mon Nov 30 22:06:20 2009
From: if.website at gmail.com (Austin Matzko)
Date: Mon, 30 Nov 2009 16:06:20 -0600
Subject: [wp-hackers] MU-compatbility with custom plugin tables?
In-Reply-To: <0a3aa8ae-b827-4de5-a222-f44d62b012f1@g27g2000yqn.googlegroups.com>
References: <0a3aa8ae-b827-4de5-a222-f44d62b012f1@g27g2000yqn.googlegroups.com>
Message-ID: <674b4a3b0911301406u7f4da17bsaf4fb498befa8c1a@mail.gmail.com>

On Mon, Nov 30, 2009 at 4:02 PM, Derek Hogue <derek at amphibian.info> wrote:
> Hey all - recently I've been asked by several users to look into full
> MU-compatibility for my plugin GigPress. The problem is, GigPress uses
> 4 custom database tables to hold its data.
>
> So when it's installed, these tables are created with the current
> database prefix (say, wp_'). ?But if the plugin is installed as a site-
> wide plugin (in the 'mu-plugins' folder), when other users try to add
> data, it doesn't fly (trying to insert into tables that don't exist,
> like 'wp_2_gigpress_shows').
>
> Does MU offer any sort of hook for site-wide-plugins to automatically
> create these tables for each individual blog when it's created? Or are
> plugins which use their own DB tables only compatible when put into
> the 'plugins' folder in MU?

WPMU has $wpdb->base_prefix, which would be "wp_" in your example, and
the standard WordPress $wpdb->prefix, which changes depending on the
current blog (changing to things like "wp_2_").  Check for and use
$wpdb->base_prefix to set up site-wide tables.

From photofantaisie at gmail.com  Mon Nov 30 22:43:18 2009
From: photofantaisie at gmail.com (Ade Walker)
Date: Mon, 30 Nov 2009 23:43:18 +0100
Subject: [wp-hackers] Using after_plugin_row_$plugin_file when plugin is
	deactivated
In-Reply-To: <161617690911301405h126a3bcdo37dcb27f16b0a15a@mail.gmail.com>
References: <9dd057850911301237u42783fd5i7b58db27fc8a1b5b@mail.gmail.com>
	<161617690911301405h126a3bcdo37dcb27f16b0a15a@mail.gmail.com>
Message-ID: <9dd057850911301443s2fc7839ob5db9723bfed7c43@mail.gmail.com>

Of course, I realise that now. I told you I was overlooking the blindingly
obvious... :-)

I'll follow Austin's advice.

Thanks!

2009/11/30 Otto <otto at ottodestruct.com>

> Nothing of the plugin gets included until it's activated. So what you
> want can't be done.
>
> -Otto
>
>
>
> On Mon, Nov 30, 2009 at 2:37 PM, Ade Walker <photofantaisie at gmail.com>
> wrote:
> > Hi all,
> >
> > Maybe I'm going about this the wrong way, or overlooking something
> > blindingly obvious...
> >
> > I want to add a WP version check after my plugin has been installed, but
> > before it is activated, and display a warning message in the main plugins
> > page if the WP version is not compatible. However, hooking into
> > after_plugin_row_$plugin_file only works once the plugin has been
> activated
> > - which is too late.
> >
> > Any thoughts?
> >
> > Thanks. :-)
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers at lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> >
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From mgerring at emrl.com  Mon Nov 30 23:27:13 2009
From: mgerring at emrl.com (Matthew Gerring)
Date: Mon, 30 Nov 2009 15:27:13 -0800
Subject: [wp-hackers] Custom page orders in edit pages menu?
Message-ID: <05A9CD6C-A675-4756-A6F7-44339802B586@emrl.com>

I've got kind of a sticky situation- I'm working on a site that has a  
bunch of custom taxonomies and metadata for pages (biographies, in  
this case) and my client wants to be able to sort the posts by the  
custom taxonomies or by custom fields in the backend. I found some  
code that will allow you to do that on the Edit Posts page, but not  
the Edit Pages page.

Here's the code: http://wordpress.pastebin.com/m24f51530

What changes would need to be made to allow this to work in the Pages  
edit screen? I looked for a pre_get_pages hook, but there apparently  
isn't one.

