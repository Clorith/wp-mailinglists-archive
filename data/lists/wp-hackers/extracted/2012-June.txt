From halukkaramete at gmail.com  Fri Jun  1 02:15:20 2012
From: halukkaramete at gmail.com (Haluk Karamete)
Date: Thu, 31 May 2012 19:15:20 -0700
Subject: [wp-hackers] safely deleting custom fields and terms that contain
	specific strings
Message-ID: <CAHERW=29Xvd9-8msrLVhhBH1y_BRWxMwiLSECmve65zeDhingg@mail.gmail.com>

I've got some programmatically created terms and custom fields.

My terms (regardless of the taxonomies they belong to ) always have
the string in their description fields in the wp_term_taxonomy table.

And similarly, all the custom fields that I created has the -blp-
someewhere in their fieldnames.

They are in thousands.

How do I delete them safely so that the terms and custom fields ( that
have been created manually or some other processes ) are not touched.

Of course when I delete a term, the relationship in between the
post_id and taxonomy_term_id should be deleted as well.

http://wordpress.stackexchange.com/questions/53897/safely-deleting-custom-fields-and-terms-that-contain-specific-strings

From halukkaramete at gmail.com  Fri Jun  1 02:27:17 2012
From: halukkaramete at gmail.com (Haluk Karamete)
Date: Thu, 31 May 2012 19:27:17 -0700
Subject: [wp-hackers] doing validations at save/update time. advise is
	needed.
Message-ID: <CAHERW=0mdY8Hb4u2wDP38cyVV0yJfP=GXEzEjCogj2CfETxQTg@mail.gmail.com>

What's a good plug-in that taps into the update post or save post
action that allows admins to enforce rules such as if a user selects a
category with the ID 5 then he also has to select at least one
category from the the XYZ custom taxonomy etc - or that update/save
won't go thru.

I'd like to write my own rules as to who ( which roles ) can do what and so on.

My plan is this. Get a well-written plug-in and use that as the boiler
plate for customizations. So, I can just go into the source code of
that plug in and inject all kinds of business logic that is specific
to my web site.

Any leads towards this goal is really appreciated.

From warproof at warproof.com  Fri Jun  1 03:29:26 2012
From: warproof at warproof.com (Rich Christiansen)
Date: Thu, 31 May 2012 21:29:26 -0600
Subject: [wp-hackers] WP_Query leaking absurd amounts of memory
Message-ID: <4FC83716.8050906@warproof.com>

Hello, all!

I'm super boggled with a strange (or maybe not?) memory leak issue.

Every time I call WP_Query() in the function below, Wordpress leaks 8 
megs of memory. And since I call this function a lot, things get hairy 
pretty quickly... :( I've tried unsetting the resulting $queryObject as 
well as periodically calling wp_cache_flush(), but neither seems to have 
any effect. Any thoughts?

-Rich


function get_post_ids_in_taxonomies($taxonomies, &$terms=array()) {
     $post_ids = array();

     $query = gen_query_get_posts_in_taxonomies($taxonomies, $terms);
     // var_dump($query);

     //Perform the query
     $queryObject = new WP_Query($query); //*****THE 8 MEGABYTES IS 
LEAKED HERE*****

     //For all posts found...
     if($queryObject->have_posts()) {
         while($queryObject->have_posts()) {
             $queryObject->the_post();

             //Get the $post_id by capturing the output of the_ID()
             ob_start();
             the_ID();
             $post_id = (int) ob_get_contents();
             ob_end_clean();

             // echo $post_id."\n";
             $post_ids[] = $post_id;
         }
     }

     unset($queryObject);

     return $post_ids;
}



gen_query_get_posts_in_taxonomies() is:

function gen_query_get_posts_in_taxonomies($taxonomies, &$terms=array()) {
     //General query params
     $query = array(
         'posts_per_page'    => -1,  //Get all posts (no paging)
         'tax_query'             => array('relation' => 'OR'),
     );

     //Add the specific taxonomies and terms onto $query['tax_query']
     foreach($taxonomies as $tax) {
         //Get terms in the taxonomies if we haven't yet
         if(!array_key_exists($tax, $terms)) {
             $terms[$tax] = array();

             $terms_tmp = get_terms($tax);
             foreach($terms_tmp as $tt)
                 $terms[$tax][] = $tt->term_taxonomy_id;
         }

         $query['tax_query'][] = array(
             'taxonomy' => $tax,
             'terms' => $terms[$tax],
             'field' => 'term_taxonomy_id',
         );
     }

     return $query;
}

From will.davis at gmail.com  Fri Jun  1 03:39:06 2012
From: will.davis at gmail.com (William P. Davis)
Date: Fri, 1 Jun 2012 03:39:06 +0000
Subject: [wp-hackers] WP_Query leaking absurd amounts of memory
In-Reply-To: <4FC83716.8050906@warproof.com>
References: <4FC83716.8050906@warproof.com>
Message-ID: <1467904188-1338521947-cardhu_decombobulator_blackberry.rim.net-2058166016-@b28.c4.bise6.blackberry>

What plugins and dropins are you using? Also, I would avoid calling wp_cache_flush - that's just going to spawn more queries which won't help much. 

Will
Sent from my BlackBerry

-----Original Message-----
From: Rich Christiansen <warproof at warproof.com>
Sender: wp-hackers-bounces at lists.automattic.com
Date: Thu, 31 May 2012 21:29:26 
To: <wp-hackers at lists.automattic.com>
Reply-To: wp-hackers at lists.automattic.com
Subject: [wp-hackers] WP_Query leaking absurd amounts of memory

Hello, all!

I'm super boggled with a strange (or maybe not?) memory leak issue.

Every time I call WP_Query() in the function below, Wordpress leaks 8 
megs of memory. And since I call this function a lot, things get hairy 
pretty quickly... :( I've tried unsetting the resulting $queryObject as 
well as periodically calling wp_cache_flush(), but neither seems to have 
any effect. Any thoughts?

-Rich


function get_post_ids_in_taxonomies($taxonomies, &$terms=array()) {
     $post_ids = array();

     $query = gen_query_get_posts_in_taxonomies($taxonomies, $terms);
     // var_dump($query);

     //Perform the query
     $queryObject = new WP_Query($query); //*****THE 8 MEGABYTES IS 
LEAKED HERE*****

     //For all posts found...
     if($queryObject->have_posts()) {
         while($queryObject->have_posts()) {
             $queryObject->the_post();

             //Get the $post_id by capturing the output of the_ID()
             ob_start();
             the_ID();
             $post_id = (int) ob_get_contents();
             ob_end_clean();

             // echo $post_id."\n";
             $post_ids[] = $post_id;
         }
     }

     unset($queryObject);

     return $post_ids;
}



gen_query_get_posts_in_taxonomies() is:

function gen_query_get_posts_in_taxonomies($taxonomies, &$terms=array()) {
     //General query params
     $query = array(
         'posts_per_page'    => -1,  //Get all posts (no paging)
         'tax_query'             => array('relation' => 'OR'),
     );

     //Add the specific taxonomies and terms onto $query['tax_query']
     foreach($taxonomies as $tax) {
         //Get terms in the taxonomies if we haven't yet
         if(!array_key_exists($tax, $terms)) {
             $terms[$tax] = array();

             $terms_tmp = get_terms($tax);
             foreach($terms_tmp as $tt)
                 $terms[$tax][] = $tt->term_taxonomy_id;
         }

         $query['tax_query'][] = array(
             'taxonomy' => $tax,
             'terms' => $terms[$tax],
             'field' => 'term_taxonomy_id',
         );
     }

     return $query;
}
_______________________________________________
wp-hackers mailing list
wp-hackers at lists.automattic.com
http://lists.automattic.com/mailman/listinfo/wp-hackers

From wordpress at dd32.id.au  Fri Jun  1 03:47:18 2012
From: wordpress at dd32.id.au (Dion Hulse (dd32))
Date: Fri, 1 Jun 2012 13:47:18 +1000
Subject: [wp-hackers] WP_Query leaking absurd amounts of memory
In-Reply-To: <1467904188-1338521947-cardhu_decombobulator_blackberry.rim.net-2058166016-@b28.c4.bise6.blackberry>
References: <4FC83716.8050906@warproof.com>
	<1467904188-1338521947-cardhu_decombobulator_blackberry.rim.net-2058166016-@b28.c4.bise6.blackberry>
Message-ID: <CAL4EHfnc=CBwRmzemdzfbLeW3AP33YVGJb9S-dD388BGSZseyQ@mail.gmail.com>

What you're doing with that query, is loading EVERY matching post into
memory, including the full post contents.
As you can imagine, this is probably quite a lot of items.

You can pass 'fields' => 'ids' into WP_Query to simply return a list
of matching post_ids instead, which should reduce the memory (and
processing time) significantly:

http://codex.wordpress.org/Class_Reference/WP_Query#Post_Field_Parameters

Cheers
D

On 1 June 2012 13:39, William P. Davis <will.davis at gmail.com> wrote:
> What plugins and dropins are you using? Also, I would avoid calling wp_cache_flush - that's just going to spawn more queries which won't help much.
>
> Will
> Sent from my BlackBerry
>
> -----Original Message-----
> From: Rich Christiansen <warproof at warproof.com>
> Sender: wp-hackers-bounces at lists.automattic.com
> Date: Thu, 31 May 2012 21:29:26
> To: <wp-hackers at lists.automattic.com>
> Reply-To: wp-hackers at lists.automattic.com
> Subject: [wp-hackers] WP_Query leaking absurd amounts of memory
>
> Hello, all!
>
> I'm super boggled with a strange (or maybe not?) memory leak issue.
>
> Every time I call WP_Query() in the function below, Wordpress leaks 8
> megs of memory. And since I call this function a lot, things get hairy
> pretty quickly... :( I've tried unsetting the resulting $queryObject as
> well as periodically calling wp_cache_flush(), but neither seems to have
> any effect. Any thoughts?
>
> -Rich
>
>
> function get_post_ids_in_taxonomies($taxonomies, &$terms=array()) {
> ? ? $post_ids = array();
>
> ? ? $query = gen_query_get_posts_in_taxonomies($taxonomies, $terms);
> ? ? // var_dump($query);
>
> ? ? //Perform the query
> ? ? $queryObject = new WP_Query($query); //*****THE 8 MEGABYTES IS
> LEAKED HERE*****
>
> ? ? //For all posts found...
> ? ? if($queryObject->have_posts()) {
> ? ? ? ? while($queryObject->have_posts()) {
> ? ? ? ? ? ? $queryObject->the_post();
>
> ? ? ? ? ? ? //Get the $post_id by capturing the output of the_ID()
> ? ? ? ? ? ? ob_start();
> ? ? ? ? ? ? the_ID();
> ? ? ? ? ? ? $post_id = (int) ob_get_contents();
> ? ? ? ? ? ? ob_end_clean();
>
> ? ? ? ? ? ? // echo $post_id."\n";
> ? ? ? ? ? ? $post_ids[] = $post_id;
> ? ? ? ? }
> ? ? }
>
> ? ? unset($queryObject);
>
> ? ? return $post_ids;
> }
>
>
>
> gen_query_get_posts_in_taxonomies() is:
>
> function gen_query_get_posts_in_taxonomies($taxonomies, &$terms=array()) {
> ? ? //General query params
> ? ? $query = array(
> ? ? ? ? 'posts_per_page' ? ?=> -1, ?//Get all posts (no paging)
> ? ? ? ? 'tax_query' ? ? ? ? ? ? => array('relation' => 'OR'),
> ? ? );
>
> ? ? //Add the specific taxonomies and terms onto $query['tax_query']
> ? ? foreach($taxonomies as $tax) {
> ? ? ? ? //Get terms in the taxonomies if we haven't yet
> ? ? ? ? if(!array_key_exists($tax, $terms)) {
> ? ? ? ? ? ? $terms[$tax] = array();
>
> ? ? ? ? ? ? $terms_tmp = get_terms($tax);
> ? ? ? ? ? ? foreach($terms_tmp as $tt)
> ? ? ? ? ? ? ? ? $terms[$tax][] = $tt->term_taxonomy_id;
> ? ? ? ? }
>
> ? ? ? ? $query['tax_query'][] = array(
> ? ? ? ? ? ? 'taxonomy' => $tax,
> ? ? ? ? ? ? 'terms' => $terms[$tax],
> ? ? ? ? ? ? 'field' => 'term_taxonomy_id',
> ? ? ? ? );
> ? ? }
>
> ? ? return $query;
> }
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

From lionel.pointet at globalis-ms.com  Fri Jun  1 08:55:56 2012
From: lionel.pointet at globalis-ms.com (Lionel POINTET)
Date: Fri, 1 Jun 2012 10:55:56 +0200
Subject: [wp-hackers] WP_Query leaking absurd amounts of memory
In-Reply-To: <CAL4EHfnc=CBwRmzemdzfbLeW3AP33YVGJb9S-dD388BGSZseyQ@mail.gmail.com>
References: <4FC83716.8050906@warproof.com>
	<1467904188-1338521947-cardhu_decombobulator_blackberry.rim.net-2058166016-@b28.c4.bise6.blackberry>
	<CAL4EHfnc=CBwRmzemdzfbLeW3AP33YVGJb9S-dD388BGSZseyQ@mail.gmail.com>
Message-ID: <CADTzLV-zmEJdekk6rWqeO8fEtDYspGCJQTGXf2zhRz2zRSh7AQ@mail.gmail.com>

Did you defined SAVEQUERIES constant?
This enables the query log from the wpdb class and could take a lot of
memory when you do a lot of queries!

2012/6/1 Dion Hulse (dd32) <wordpress at dd32.id.au>

> What you're doing with that query, is loading EVERY matching post into
> memory, including the full post contents.
> As you can imagine, this is probably quite a lot of items.
>
> You can pass 'fields' => 'ids' into WP_Query to simply return a list
> of matching post_ids instead, which should reduce the memory (and
> processing time) significantly:
>
> http://codex.wordpress.org/Class_Reference/WP_Query#Post_Field_Parameters
>
> Cheers
> D
>
> On 1 June 2012 13:39, William P. Davis <will.davis at gmail.com> wrote:
> > What plugins and dropins are you using? Also, I would avoid calling
> wp_cache_flush - that's just going to spawn more queries which won't help
> much.
> >
> > Will
> > Sent from my BlackBerry
> >
> > -----Original Message-----
> > From: Rich Christiansen <warproof at warproof.com>
> > Sender: wp-hackers-bounces at lists.automattic.com
> > Date: Thu, 31 May 2012 21:29:26
> > To: <wp-hackers at lists.automattic.com>
> > Reply-To: wp-hackers at lists.automattic.com
> > Subject: [wp-hackers] WP_Query leaking absurd amounts of memory
> >
> > Hello, all!
> >
> > I'm super boggled with a strange (or maybe not?) memory leak issue.
> >
> > Every time I call WP_Query() in the function below, Wordpress leaks 8
> > megs of memory. And since I call this function a lot, things get hairy
> > pretty quickly... :( I've tried unsetting the resulting $queryObject as
> > well as periodically calling wp_cache_flush(), but neither seems to have
> > any effect. Any thoughts?
> >
> > -Rich
> >
> >
> > function get_post_ids_in_taxonomies($taxonomies, &$terms=array()) {
> >     $post_ids = array();
> >
> >     $query = gen_query_get_posts_in_taxonomies($taxonomies, $terms);
> >     // var_dump($query);
> >
> >     //Perform the query
> >     $queryObject = new WP_Query($query); //*****THE 8 MEGABYTES IS
> > LEAKED HERE*****
> >
> >     //For all posts found...
> >     if($queryObject->have_posts()) {
> >         while($queryObject->have_posts()) {
> >             $queryObject->the_post();
> >
> >             //Get the $post_id by capturing the output of the_ID()
> >             ob_start();
> >             the_ID();
> >             $post_id = (int) ob_get_contents();
> >             ob_end_clean();
> >
> >             // echo $post_id."\n";
> >             $post_ids[] = $post_id;
> >         }
> >     }
> >
> >     unset($queryObject);
> >
> >     return $post_ids;
> > }
> >
> >
> >
> > gen_query_get_posts_in_taxonomies() is:
> >
> > function gen_query_get_posts_in_taxonomies($taxonomies, &$terms=array())
> {
> >     //General query params
> >     $query = array(
> >         'posts_per_page'    => -1,  //Get all posts (no paging)
> >         'tax_query'             => array('relation' => 'OR'),
> >     );
> >
> >     //Add the specific taxonomies and terms onto $query['tax_query']
> >     foreach($taxonomies as $tax) {
> >         //Get terms in the taxonomies if we haven't yet
> >         if(!array_key_exists($tax, $terms)) {
> >             $terms[$tax] = array();
> >
> >             $terms_tmp = get_terms($tax);
> >             foreach($terms_tmp as $tt)
> >                 $terms[$tax][] = $tt->term_taxonomy_id;
> >         }
> >
> >         $query['tax_query'][] = array(
> >             'taxonomy' => $tax,
> >             'terms' => $terms[$tax],
> >             'field' => 'term_taxonomy_id',
> >         );
> >     }
> >
> >     return $query;
> > }
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers at lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers at lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From wordpress at zed1.com  Fri Jun  1 13:03:47 2012
From: wordpress at zed1.com (Mike Little)
Date: Fri, 1 Jun 2012 14:03:47 +0100
Subject: [wp-hackers] doing validations at save/update time. advise is
	needed.
In-Reply-To: <CAHERW=0mdY8Hb4u2wDP38cyVV0yJfP=GXEzEjCogj2CfETxQTg@mail.gmail.com>
References: <CAHERW=0mdY8Hb4u2wDP38cyVV0yJfP=GXEzEjCogj2CfETxQTg@mail.gmail.com>
Message-ID: <CAMb54M2RGyDRnMnKTjhBp3UQmxUTTUUL9-WY+2kCoa1i30uesw@mail.gmail.com>

On Fri, Jun 1, 2012 at 3:27 AM, Haluk Karamete <halukkaramete at gmail.com>wrote:

> What's a good plug-in that taps into the update post or save post
> action that allows admins to enforce rules such as if a user selects a
> category with the ID 5 then he also has to select at least one
> category from the the XYZ custom taxonomy etc - or that update/save
> won't go thru.
>
>
I don't have a specific plugin to recommend*, but be aware that you cannot
stop the update/save going through.

What you can do is force the post back into draft status (if they tried to
publish), and display a message explaining the business logic issues with
the post in the feedback message (using the
standard 'post_updated_messages' filter).


* I reviewed a plugin last year that someone is writing which allows you to
specify as set of business logic/validation rules for posts (and pages and
cpts), and which included an extension interface so you can write your own
rules. However it has not yet been released (and in fact, I recommended the
extension interface be re-written).


Mike
-- 
Mike Little
http://zed1.com/

From halukkaramete at gmail.com  Sat Jun  2 00:50:13 2012
From: halukkaramete at gmail.com (Haluk Karamete)
Date: Fri, 1 Jun 2012 17:50:13 -0700
Subject: [wp-hackers] Changing the default (alphabetical) ordering of
 category lists on the Admin Dashboard
Message-ID: <CAHERW=33g2O1AGUizVZnEFNPU3Mxn6A6oj=24gJBkivNc4yk1Q@mail.gmail.com>

By default, WordPress displays the order of cats alphabetically. What
do I do to put them in the order I want?

Example:

cat 1
cat 2
cat 3
   cat 3.1
   cat 3.2
   cat 3.3
   cat 3.4
   cat 3.5
   cat 3.6
   cat 3.7
   ...
   cat 3.100
cat 4
And I want it to be ordered as

cat 1
cat 2
cat 4
cat 3
   cat 3.1
   cat 3.2
   cat 3.3
   cat 3.4
   cat 3.5
   cat 3.6
   cat 3.7
   ...
   cat 3.100
One thing to clarify. This question has nothing to do with the other
default behavior of WP where WP takes the selected cats out of their
hierarchal order to display them at top. There are plug ins to deal
with that.

Here, I'm talking about the default ordering of TOP LEVEL CATS at the
time of ADDING A NEW POST.

From mpwalsh8 at gmail.com  Sat Jun  2 14:22:52 2012
From: mpwalsh8 at gmail.com (Mike Walsh)
Date: Sat, 2 Jun 2012 10:22:52 -0400
Subject: [wp-hackers] What would strip $_POST before 'init' runs?
Message-ID: <CAMg3evEN2_ptHRZ04LSQo6MgEr8GhZjGmygVbyW4zjVLHj6BpQ@mail.gmail.com>

I am trying to help a user who is using my WordPress Google Form plugin and
am seeing some very odd behavior.  The plugin reads the HTML from Google
Forms and inserts into into a post or page.  The "submit" action will call
the same page the form appears on and the second pass through, the short
code processor submits the form data to Google using the WordPress HTTP API.

In this one case I am helping a user debug, there is no POST data after the
form is submitted.  I put some debug code in an action hooked to 'init' and
the the POST variable is empty there as well.  Any suggestions of where or
how to look to see why $_POST isn't set?  This one has me stumped.

Mike
-- 
Mike Walsh - mpwalsh8 at gmail.com

From Gavin.Pearce at 3seven9.com  Sat Jun  2 14:52:09 2012
From: Gavin.Pearce at 3seven9.com (Gavin Pearce)
Date: Sat, 2 Jun 2012 15:52:09 +0100
Subject: [wp-hackers] What would strip $_POST before 'init' runs?
In-Reply-To: <CAMg3evEN2_ptHRZ04LSQo6MgEr8GhZjGmygVbyW4zjVLHj6BpQ@mail.gmail.com>
References: <CAMg3evEN2_ptHRZ04LSQo6MgEr8GhZjGmygVbyW4zjVLHj6BpQ@mail.gmail.com>
Message-ID: <CD47955B7E065D48AB5CF226C2ED75C050C48C@tbs-sbs01.TBS.local>

Covering the basics - have you checked their isn't a redirect running
between the POST and your init action?

Perhaps happening on a action that runs before yours? Have experienced
this previously. 

Gavin.


-----Original Message-----
From: wp-hackers-bounces at lists.automattic.com
[mailto:wp-hackers-bounces at lists.automattic.com] On Behalf Of Mike Walsh
Sent: 02 June 2012 15:23
To: wp-hackers at lists.automattic.com
Subject: [wp-hackers] What would strip $_POST before 'init' runs?

I am trying to help a user who is using my WordPress Google Form plugin
and am seeing some very odd behavior.  The plugin reads the HTML from
Google Forms and inserts into into a post or page.  The "submit" action
will call the same page the form appears on and the second pass through,
the short code processor submits the form data to Google using the
WordPress HTTP API.

In this one case I am helping a user debug, there is no POST data after
the form is submitted.  I put some debug code in an action hooked to
'init' and the the POST variable is empty there as well.  Any
suggestions of where or how to look to see why $_POST isn't set?  This
one has me stumped.

Mike
--
Mike Walsh - mpwalsh8 at gmail.com
_______________________________________________
wp-hackers mailing list
wp-hackers at lists.automattic.com
http://lists.automattic.com/mailman/listinfo/wp-hackers

From mpwalsh8 at gmail.com  Sat Jun  2 15:15:05 2012
From: mpwalsh8 at gmail.com (Mike Walsh)
Date: Sat, 2 Jun 2012 16:15:05 +0100
Subject: [wp-hackers] What would strip $_POST before 'init' runs?
In-Reply-To: <CD47955B7E065D48AB5CF226C2ED75C050C48C@tbs-sbs01.TBS.local>
References: <CAMg3evEN2_ptHRZ04LSQo6MgEr8GhZjGmygVbyW4zjVLHj6BpQ@mail.gmail.com>
	<CD47955B7E065D48AB5CF226C2ED75C050C48C@tbs-sbs01.TBS.local>
Message-ID: <CAMg3evG-hRtNbLDamO5qEbbyoSJeov4dK1hKrvFU44pZr0q-_Q@mail.gmail.com>

I disabled all of the plugins and it still happens - I've glanced through
the theme and didn't see anything obvious.

Any suggestion on how I can check for a redirect that isn't obvious to me?
 Is there some server setting that could be involved?  To me it looks like
a redirect of some sort but I am not sure how to follow the execution and
see what is happening.

Mike

On Sat, Jun 2, 2012 at 3:52 PM, Gavin Pearce <Gavin.Pearce at 3seven9.com>wrote:

> Covering the basics - have you checked their isn't a redirect running
> between the POST and your init action?
>
> Perhaps happening on a action that runs before yours? Have experienced
> this previously.
>
> Gavin.
>
>
> -----Original Message-----
> From: wp-hackers-bounces at lists.automattic.com
> [mailto:wp-hackers-bounces at lists.automattic.com] On Behalf Of Mike Walsh
> Sent: 02 June 2012 15:23
> To: wp-hackers at lists.automattic.com
> Subject: [wp-hackers] What would strip $_POST before 'init' runs?
>
> I am trying to help a user who is using my WordPress Google Form plugin
> and am seeing some very odd behavior.  The plugin reads the HTML from
> Google Forms and inserts into into a post or page.  The "submit" action
> will call the same page the form appears on and the second pass through,
> the short code processor submits the form data to Google using the
> WordPress HTTP API.
>
> In this one case I am helping a user debug, there is no POST data after
> the form is submitted.  I put some debug code in an action hooked to
> 'init' and the the POST variable is empty there as well.  Any
> suggestions of where or how to look to see why $_POST isn't set?  This
> one has me stumped.
>
> Mike
> --
> Mike Walsh - mpwalsh8 at gmail.com
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>



-- 
Mike Walsh - mpwalsh8 at gmail.com

From mpwalsh8 at gmail.com  Sat Jun  2 16:27:50 2012
From: mpwalsh8 at gmail.com (Mike Walsh)
Date: Sat, 2 Jun 2012 12:27:50 -0400
Subject: [wp-hackers] What would strip $_POST before 'init' runs?
In-Reply-To: <CAMg3evG-hRtNbLDamO5qEbbyoSJeov4dK1hKrvFU44pZr0q-_Q@mail.gmail.com>
References: <CAMg3evEN2_ptHRZ04LSQo6MgEr8GhZjGmygVbyW4zjVLHj6BpQ@mail.gmail.com>
	<CD47955B7E065D48AB5CF226C2ED75C050C48C@tbs-sbs01.TBS.local>
	<CAMg3evG-hRtNbLDamO5qEbbyoSJeov4dK1hKrvFU44pZr0q-_Q@mail.gmail.com>
Message-ID: <CAMg3evHczG0Y-dkrnSWCC-nHUVQ3UBiPBsLCJRMybiYVpastSw@mail.gmail.com>

I hooked my debug 'init' hook in with priority 1 and I see the post data I
expect to see so there is some init action on this site that is doing
something to the $_POST data.  I guess I need to come through the plugins
to see what is mucking with the post data.  I must have missed something
when I disabled them all.

Mike

On Sat, Jun 2, 2012 at 11:15 AM, Mike Walsh <mpwalsh8 at gmail.com> wrote:

> I disabled all of the plugins and it still happens - I've glanced through
> the theme and didn't see anything obvious.
>
> Any suggestion on how I can check for a redirect that isn't obvious to me?
>  Is there some server setting that could be involved?  To me it looks like
> a redirect of some sort but I am not sure how to follow the execution and
> see what is happening.
>
> Mike
>
> On Sat, Jun 2, 2012 at 3:52 PM, Gavin Pearce <Gavin.Pearce at 3seven9.com>wrote:
>
>> Covering the basics - have you checked their isn't a redirect running
>> between the POST and your init action?
>>
>> Perhaps happening on a action that runs before yours? Have experienced
>> this previously.
>>
>> Gavin.
>>
>>
>> -----Original Message-----
>> From: wp-hackers-bounces at lists.automattic.com
>> [mailto:wp-hackers-bounces at lists.automattic.com] On Behalf Of Mike Walsh
>> Sent: 02 June 2012 15:23
>> To: wp-hackers at lists.automattic.com
>> Subject: [wp-hackers] What would strip $_POST before 'init' runs?
>>
>> I am trying to help a user who is using my WordPress Google Form plugin
>> and am seeing some very odd behavior.  The plugin reads the HTML from
>> Google Forms and inserts into into a post or page.  The "submit" action
>> will call the same page the form appears on and the second pass through,
>> the short code processor submits the form data to Google using the
>> WordPress HTTP API.
>>
>> In this one case I am helping a user debug, there is no POST data after
>> the form is submitted.  I put some debug code in an action hooked to
>> 'init' and the the POST variable is empty there as well.  Any
>> suggestions of where or how to look to see why $_POST isn't set?  This
>> one has me stumped.
>>
>> Mike
>> --
>> Mike Walsh - mpwalsh8 at gmail.com
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
>
>
>
> --
> Mike Walsh - mpwalsh8 at gmail.com
>



-- 
Mike Walsh - mpwalsh8 at gmail.com

From Gavin.Pearce at 3seven9.com  Sat Jun  2 17:25:28 2012
From: Gavin.Pearce at 3seven9.com (Gavin Pearce)
Date: Sat, 2 Jun 2012 18:25:28 +0100
Subject: [wp-hackers] What would strip $_POST before 'init' runs?
In-Reply-To: <CAMg3evG-hRtNbLDamO5qEbbyoSJeov4dK1hKrvFU44pZr0q-_Q@mail.gmail.com>
References: <CAMg3evEN2_ptHRZ04LSQo6MgEr8GhZjGmygVbyW4zjVLHj6BpQ@mail.gmail.com><CD47955B7E065D48AB5CF226C2ED75C050C48C@tbs-sbs01.TBS.local>
	<CAMg3evG-hRtNbLDamO5qEbbyoSJeov4dK1hKrvFU44pZr0q-_Q@mail.gmail.com>
Message-ID: <CD47955B7E065D48AB5CF226C2ED75C050C48D@tbs-sbs01.TBS.local>

In Firefox you can use the Net tab in Firebug to view page requests.
(Live HTTP headers will provide some more detail also. Chrome's
developer toolbar has a similar 'Network' feature.)

If it is redirecting, you should see your original POST to the server,
the server responding with a 302/301, and then your browser making a
request to another page. Remember to press the Persist button (next to
Clear), otherwise it's going to reset the tab when the redirect happens.

Looking at where it's redirecting you to/from might give you a clue -
but either way, yes, run through your plugins one by one to narrow it
down. If a redirect is happening that's why your POST data is clearing,
though could also be a plugin simply unsetting $_POST ...

G

-----Original Message-----
From: wp-hackers-bounces at lists.automattic.com
[mailto:wp-hackers-bounces at lists.automattic.com] On Behalf Of Mike Walsh
Sent: 02 June 2012 16:15
To: wp-hackers at lists.automattic.com
Subject: Re: [wp-hackers] What would strip $_POST before 'init' runs?

I disabled all of the plugins and it still happens - I've glanced
through the theme and didn't see anything obvious.

Any suggestion on how I can check for a redirect that isn't obvious to
me?
 Is there some server setting that could be involved?  To me it looks
like a redirect of some sort but I am not sure how to follow the
execution and see what is happening.

Mike

On Sat, Jun 2, 2012 at 3:52 PM, Gavin Pearce
<Gavin.Pearce at 3seven9.com>wrote:

> Covering the basics - have you checked their isn't a redirect running 
> between the POST and your init action?
>
> Perhaps happening on a action that runs before yours? Have experienced

> this previously.
>
> Gavin.
>
>
> -----Original Message-----
> From: wp-hackers-bounces at lists.automattic.com
> [mailto:wp-hackers-bounces at lists.automattic.com] On Behalf Of Mike 
> Walsh
> Sent: 02 June 2012 15:23
> To: wp-hackers at lists.automattic.com
> Subject: [wp-hackers] What would strip $_POST before 'init' runs?
>
> I am trying to help a user who is using my WordPress Google Form 
> plugin and am seeing some very odd behavior.  The plugin reads the 
> HTML from Google Forms and inserts into into a post or page.  The 
> "submit" action will call the same page the form appears on and the 
> second pass through, the short code processor submits the form data to

> Google using the WordPress HTTP API.
>
> In this one case I am helping a user debug, there is no POST data 
> after the form is submitted.  I put some debug code in an action 
> hooked to 'init' and the the POST variable is empty there as well.  
> Any suggestions of where or how to look to see why $_POST isn't set?  
> This one has me stumped.
>
> Mike
> --
> Mike Walsh - mpwalsh8 at gmail.com
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>



--
Mike Walsh - mpwalsh8 at gmail.com
_______________________________________________
wp-hackers mailing list
wp-hackers at lists.automattic.com
http://lists.automattic.com/mailman/listinfo/wp-hackers

From mpwalsh8 at gmail.com  Sun Jun  3 11:59:46 2012
From: mpwalsh8 at gmail.com (Mike Walsh)
Date: Sun, 3 Jun 2012 07:59:46 -0400
Subject: [wp-hackers] What would strip $_POST before 'init' runs?
In-Reply-To: <CD47955B7E065D48AB5CF226C2ED75C050C48D@tbs-sbs01.TBS.local>
References: <CAMg3evEN2_ptHRZ04LSQo6MgEr8GhZjGmygVbyW4zjVLHj6BpQ@mail.gmail.com>
	<CD47955B7E065D48AB5CF226C2ED75C050C48C@tbs-sbs01.TBS.local>
	<CAMg3evG-hRtNbLDamO5qEbbyoSJeov4dK1hKrvFU44pZr0q-_Q@mail.gmail.com>
	<CD47955B7E065D48AB5CF226C2ED75C050C48D@tbs-sbs01.TBS.local>
Message-ID: <CAMg3evH4WWFC1iFzuikr5=eO8NcFhM+Gew3dnXA+KjjQwk+Mgg@mail.gmail.com>

On Sat, Jun 2, 2012 at 1:25 PM, Gavin Pearce <Gavin.Pearce at 3seven9.com>wrote:

> In Firefox you can use the Net tab in Firebug to view page requests.
> (Live HTTP headers will provide some more detail also. Chrome's
> developer toolbar has a similar 'Network' feature.)
>
> If it is redirecting, you should see your original POST to the server,
> the server responding with a 302/301, and then your browser making a
> request to another page. Remember to press the Persist button (next to
> Clear), otherwise it's going to reset the tab when the redirect happens.
>
> Looking at where it's redirecting you to/from might give you a clue -
> but either way, yes, run through your plugins one by one to narrow it
> down. If a redirect is happening that's why your POST data is clearing,
> though could also be a plugin simply unsetting $_POST ...
>
> G
>
> -----Original Message-----
> From: wp-hackers-bounces at lists.automattic.com
> [mailto:wp-hackers-bounces at lists.automattic.com] On Behalf Of Mike Walsh
> Sent: 02 June 2012 16:15
> To: wp-hackers at lists.automattic.com
> Subject: Re: [wp-hackers] What would strip $_POST before 'init' runs?
>
> I disabled all of the plugins and it still happens - I've glanced
> through the theme and didn't see anything obvious.
>
> Any suggestion on how I can check for a redirect that isn't obvious to
> me?
>  Is there some server setting that could be involved?  To me it looks
> like a redirect of some sort but I am not sure how to follow the
> execution and see what is happening.
>
> Mike
>
>
>
The FireBug net tab is helpful, thanks for pointing my in that direction.
 The problem I am chasing seems to be a 403 Forbidden error which I can't
figure out the source of.  This one has me stumped.

Mike

-- 
Mike Walsh - mpwalsh8 at gmail.com

From Gavin.Pearce at 3seven9.com  Sun Jun  3 12:48:38 2012
From: Gavin.Pearce at 3seven9.com (Gavin Pearce)
Date: Sun, 3 Jun 2012 13:48:38 +0100
Subject: [wp-hackers] What would strip $_POST before 'init' runs?
In-Reply-To: <CAMg3evH4WWFC1iFzuikr5=eO8NcFhM+Gew3dnXA+KjjQwk+Mgg@mail.gmail.com>
References: <CAMg3evEN2_ptHRZ04LSQo6MgEr8GhZjGmygVbyW4zjVLHj6BpQ@mail.gmail.com><CD47955B7E065D48AB5CF226C2ED75C050C48C@tbs-sbs01.TBS.local><CAMg3evG-hRtNbLDamO5qEbbyoSJeov4dK1hKrvFU44pZr0q-_Q@mail.gmail.com><CD47955B7E065D48AB5CF226C2ED75C050C48D@tbs-sbs01.TBS.local>
	<CAMg3evH4WWFC1iFzuikr5=eO8NcFhM+Gew3dnXA+KjjQwk+Mgg@mail.gmail.com>
Message-ID: <CD47955B7E065D48AB5CF226C2ED75C050C490@tbs-sbs01.TBS.local>

> The FireBug net tab is helpful, thanks for pointing my in that
direction.
> The problem I am chasing seems to be a 403 Forbidden error which I
can't figure out the source of.  This one has me  stumped.

Is the 403 returned when WordPress receives the POST data? What data are
you posting? 

Do the usual trick of disabling all plugins one-by-one, and switching to
the default theme first. 

If it doesn't help - certain $_POST keys trigger different behaviours in
WordPress. $_POST['name'] is one of them, though will usually give you a
404 rather than a 403. Try prefixing all POST data with the name of your
plugin. $_POST['pluginname_name'], $_POST['pluginname_email'] etc. Any
luck?

Failing that, make sure you check your .htaccess file and virtual host
to check you haven't got any strange configurations in there.

Give a shout if none of the above helps.

G




From mpwalsh8 at gmail.com  Sun Jun  3 15:39:10 2012
From: mpwalsh8 at gmail.com (Mike Walsh)
Date: Sun, 3 Jun 2012 16:39:10 +0100
Subject: [wp-hackers] What would strip $_POST before 'init' runs?
In-Reply-To: <CD47955B7E065D48AB5CF226C2ED75C050C490@tbs-sbs01.TBS.local>
References: <CAMg3evEN2_ptHRZ04LSQo6MgEr8GhZjGmygVbyW4zjVLHj6BpQ@mail.gmail.com>
	<CD47955B7E065D48AB5CF226C2ED75C050C48C@tbs-sbs01.TBS.local>
	<CAMg3evG-hRtNbLDamO5qEbbyoSJeov4dK1hKrvFU44pZr0q-_Q@mail.gmail.com>
	<CD47955B7E065D48AB5CF226C2ED75C050C48D@tbs-sbs01.TBS.local>
	<CAMg3evH4WWFC1iFzuikr5=eO8NcFhM+Gew3dnXA+KjjQwk+Mgg@mail.gmail.com>
	<CD47955B7E065D48AB5CF226C2ED75C050C490@tbs-sbs01.TBS.local>
Message-ID: <CAMg3evHZbwKyGy0pF3D9pCA6SewmN32oXcjwCGBoLkz9iKKdQA@mail.gmail.com>

On Sun, Jun 3, 2012 at 1:48 PM, Gavin Pearce <Gavin.Pearce at 3seven9.com>wrote:

> > The FireBug net tab is helpful, thanks for pointing my in that
> direction.
> > The problem I am chasing seems to be a 403 Forbidden error which I
> can't figure out the source of.  This one has me  stumped.
>
> Is the 403 returned when WordPress receives the POST data? What data are
> you posting?
>
> Do the usual trick of disabling all plugins one-by-one, and switching to
> the default theme first.
>
> If it doesn't help - certain $_POST keys trigger different behaviours in
> WordPress. $_POST['name'] is one of them, though will usually give you a
> 404 rather than a 403. Try prefixing all POST data with the name of your
> plugin. $_POST['pluginname_name'], $_POST['pluginname_email'] etc. Any
> luck?
>
> Failing that, make sure you check your .htaccess file and virtual host
> to check you haven't got any strange configurations in there.
>
> Give a shout if none of the above helps.
>
> G
>

I created a simple 'init' hook at priority 0 which does nothing more than
dump the contents of $_SERVER, $_POST, and $_GET.  $_SERVER has a bunch of
REDIRECT_x (where x is one of number variable suffixes) of array elements
including REDIRECT_URL as shown below (with the IP address removed).

    [REDIRECT_REDIRECT_REQUEST_METHOD] => POST
    [REDIRECT_REDIRECT_STATUS] => 403
    [REDIRECT_REDIRECT_UNIQUE_ID] => T8uDs3rJTaEAAEPWSkMAAAAA
    [REDIRECT_STATUS] => 403
    [REDIRECT_UNIQUE_ID] => T8uDs3rJTaEAAEPWSkMAAAAA
    [REDIRECT_URL] => /403.shtml
    [REMOTE_ADDR] => nn.nn.nnn.nnn
    [REMOTE_PORT] => 52560
    [REQUEST_METHOD] => GET

What I find odd (well, there is a lot odd ...) is the REQUEST_METHOD is
shown as a GET when the form is set up as a POST.  I have admin access to
WordPress and FTP access to the installation but I can't look at how the
server is set up.  The .htaccess file looks fine BUT when I dump phpinfo(),
I can see that eAccellerator is installed.  Could it be the source of the
problem?  Is there any way to turn it off using ini_set() or .htaccess?  I
tried putting ini_set('eaccellerator.enable', 0); in wp-config.php but it
didn't make any difference.

Thx.

Mike
-- 
Mike Walsh - mpwalsh8 at gmail.com

From Gavin.Pearce at 3seven9.com  Sun Jun  3 17:11:29 2012
From: Gavin.Pearce at 3seven9.com (Gavin Pearce)
Date: Sun, 3 Jun 2012 18:11:29 +0100
Subject: [wp-hackers] What would strip $_POST before 'init' runs?
In-Reply-To: <CAMg3evHZbwKyGy0pF3D9pCA6SewmN32oXcjwCGBoLkz9iKKdQA@mail.gmail.com>
References: <CAMg3evEN2_ptHRZ04LSQo6MgEr8GhZjGmygVbyW4zjVLHj6BpQ@mail.gmail.com><CD47955B7E065D48AB5CF226C2ED75C050C48C@tbs-sbs01.TBS.local><CAMg3evG-hRtNbLDamO5qEbbyoSJeov4dK1hKrvFU44pZr0q-_Q@mail.gmail.com><CD47955B7E065D48AB5CF226C2ED75C050C48D@tbs-sbs01.TBS.local><CAMg3evH4WWFC1iFzuikr5=eO8NcFhM+Gew3dnXA+KjjQwk+Mgg@mail.gmail.com><CD47955B7E065D48AB5CF226C2ED75C050C490@tbs-sbs01.TBS.local>
	<CAMg3evHZbwKyGy0pF3D9pCA6SewmN32oXcjwCGBoLkz9iKKdQA@mail.gmail.com>
Message-ID: <CD47955B7E065D48AB5CF226C2ED75C050C491@tbs-sbs01.TBS.local>

> Is there any way to turn it off using ini_set() or .htaccess?

php_flag eaccelerator.enable 0
php_flag eaccelerator.optimizer 0
in a .htaccess should turn it off.

Have you tried creating a simple $_POST form outside of WP? Odds are it
would generate the same 403 error outside of WP if eAccelerator / server
config issues? At least you can discount WP then. 

G

From mpwalsh8 at gmail.com  Sun Jun  3 18:54:34 2012
From: mpwalsh8 at gmail.com (Mike Walsh)
Date: Sun, 3 Jun 2012 19:54:34 +0100
Subject: [wp-hackers] What would strip $_POST before 'init' runs?
In-Reply-To: <CD47955B7E065D48AB5CF226C2ED75C050C491@tbs-sbs01.TBS.local>
References: <CAMg3evEN2_ptHRZ04LSQo6MgEr8GhZjGmygVbyW4zjVLHj6BpQ@mail.gmail.com>
	<CD47955B7E065D48AB5CF226C2ED75C050C48C@tbs-sbs01.TBS.local>
	<CAMg3evG-hRtNbLDamO5qEbbyoSJeov4dK1hKrvFU44pZr0q-_Q@mail.gmail.com>
	<CD47955B7E065D48AB5CF226C2ED75C050C48D@tbs-sbs01.TBS.local>
	<CAMg3evH4WWFC1iFzuikr5=eO8NcFhM+Gew3dnXA+KjjQwk+Mgg@mail.gmail.com>
	<CD47955B7E065D48AB5CF226C2ED75C050C490@tbs-sbs01.TBS.local>
	<CAMg3evHZbwKyGy0pF3D9pCA6SewmN32oXcjwCGBoLkz9iKKdQA@mail.gmail.com>
	<CD47955B7E065D48AB5CF226C2ED75C050C491@tbs-sbs01.TBS.local>
Message-ID: <CAMg3evFMBECGcA=x_tq1HOxi6YMbkMYJ+sgR2BG+j--TpOY6yw@mail.gmail.com>

A simple test form works correctly.  Surprisingly, disabling all plugins
and using the default theme, doesn't make any difference, the POST variable
is still empty.  The action on the form element is set to an empty string
("").  Submitting a comment on the page works correctly.  I am starting to
wonder if this site has a modified version of WordPress installed.

Mike

On Sunday, June 3, 2012, Gavin Pearce wrote:

> > Is there any way to turn it off using ini_set() or .htaccess?
>
> php_flag eaccelerator.enable 0
> php_flag eaccelerator.optimizer 0
> in a .htaccess should turn it off.
>
> Have you tried creating a simple $_POST form outside of WP? Odds are it
> would generate the same 403 error outside of WP if eAccelerator / server
> config issues? At least you can discount WP then.
>
> G
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com <javascript:;>
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>


-- 
Mike Walsh - mpwalsh8 at gmail.com

From lists at rotorised.com  Sun Jun  3 23:58:58 2012
From: lists at rotorised.com (Ryan McCue)
Date: Mon, 04 Jun 2012 11:58:58 +1200
Subject: [wp-hackers] What would strip $_POST before 'init' runs?
In-Reply-To: <CAMg3evHZbwKyGy0pF3D9pCA6SewmN32oXcjwCGBoLkz9iKKdQA@mail.gmail.com>
References: <CAMg3evEN2_ptHRZ04LSQo6MgEr8GhZjGmygVbyW4zjVLHj6BpQ@mail.gmail.com>
	<CD47955B7E065D48AB5CF226C2ED75C050C48C@tbs-sbs01.TBS.local>
	<CAMg3evG-hRtNbLDamO5qEbbyoSJeov4dK1hKrvFU44pZr0q-_Q@mail.gmail.com>
	<CD47955B7E065D48AB5CF226C2ED75C050C48D@tbs-sbs01.TBS.local>
	<CAMg3evH4WWFC1iFzuikr5=eO8NcFhM+Gew3dnXA+KjjQwk+Mgg@mail.gmail.com>
	<CD47955B7E065D48AB5CF226C2ED75C050C490@tbs-sbs01.TBS.local>
	<CAMg3evHZbwKyGy0pF3D9pCA6SewmN32oXcjwCGBoLkz9iKKdQA@mail.gmail.com>
Message-ID: <4FCBFA42.1020602@rotorised.com>

Mike Walsh wrote:
>      [REDIRECT_URL] =>  /403.shtml
That line seems to indicate to me that Apache (or whatever server 
software you may be using) is handling the request and issuing a 403. Is 
it possible that you have a .htaccess/.htpasswd interfering?

-- 
Ryan McCue
<http://ryanmccue.info/>


From nanogwp at gmail.com  Mon Jun  4 13:30:00 2012
From: nanogwp at gmail.com (Robert Lusby)
Date: Mon, 04 Jun 2012 14:30:00 +0100
Subject: [wp-hackers] current_user_can
Message-ID: <4FCCB858.8010807@gmail.com>

I've seen the following in several plugins, and sure I've seen it in 
core code somewhere:

if (current_user_can('edit_user', $current_user->ID)) {
     //do something
}

Is this valid? A look at the current_user_can function seems to suggest 
there isn't a second argument to that function. There also doesn't seem 
to be an 'edit_user' capability listed, only 'edit_users' (plural).

Considering I've seen this used, and it seems to be returning true/false 
appropriately am I missing something?

Rob.


From info at swordstudios.net  Mon Jun  4 13:40:42 2012
From: info at swordstudios.net (SWORD Studios)
Date: Mon, 4 Jun 2012 09:40:42 -0400
Subject: [wp-hackers] SSL Domain Mapping with WP Multisite
Message-ID: <CAGtTZ+Z4df6oEbm9c1eZrXoiAL7_28RqBOLfQvkpzu0n5U7jgQ@mail.gmail.com>

I'm looking to host a couple hundred sites on a WordPress Multisite
Network.  Each site will have it's own mapped domain.  I've done all this
many many times.

My new issue is that about a dozen of these sites need SSL to be compliant
(with their industry manufacturers).  I'm having some real issues
accomplishing https://domain.com as a mapped domain to these sites.
 Everything I've read (some links below) makes it seem possible as long as
you are using SNI or a WildCard SSL to support multiple ssl's on the same
IP.

I'm looking for a real solution to this problem.  I've spent hours reading
many forum posts, articles, tutorials and everything seems to be
theoretical.  I have yet to see anyone actual say "Yes I've done this and
this is how I did it."   Has anyone actually accomplished this task?    If
not can anyone provide me with instructions on how to move forward.

Thank you in advance for any help.

http://wordpress.org/support/topic/plugin-wordpress-mu-domain-mapping-ssl-and-mapped-domain

http://wordpress.org/support/topic/plugin-wordpress-mu-domain-mapping-ssl-with-mapped-domain

http://lists.automattic.com/pipermail/wp-hackers/2011-August/040649.html

Jesse

From lionel.pointet at globalis-ms.com  Mon Jun  4 13:48:24 2012
From: lionel.pointet at globalis-ms.com (Lionel Pointet)
Date: Mon, 04 Jun 2012 15:48:24 +0200
Subject: [wp-hackers] current_user_can
In-Reply-To: <4FCCB858.8010807@gmail.com>
References: <4FCCB858.8010807@gmail.com>
Message-ID: <4FCCBCA8.9030400@globalis-ms.com>

Hi Rob,

This function takes as many arguments as you want, and send them to the 
"has_cap" method of the WP_User class, which then call "map_meta_cap" 
with these same arguments.
The "edit_user" capability actually exists and calling with this cap 
will return true in 2 cases (for non-multisite installations):

  * the current_user is the user you want to edit
  * the current_user has the "edit_users" capability

So this is valid and recommanded to do this if you know that your code 
will edit one user in particular: this allows plugins to hook and 
disable the edition for some users (for example).

Lionel

Le 04/06/2012 15:30, Robert Lusby a ?crit :
> I've seen the following in several plugins, and sure I've seen it in 
> core code somewhere:
>
> if (current_user_can('edit_user', $current_user->ID)) {
>     //do something
> }
>
> Is this valid? A look at the current_user_can function seems to 
> suggest there isn't a second argument to that function. There also 
> doesn't seem to be an 'edit_user' capability listed, only 'edit_users' 
> (plural).
>
> Considering I've seen this used, and it seems to be returning 
> true/false appropriately am I missing something?
>
> Rob.
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

From wordpress at dd32.id.au  Mon Jun  4 14:46:29 2012
From: wordpress at dd32.id.au (Dion Hulse (dd32))
Date: Tue, 5 Jun 2012 00:46:29 +1000
Subject: [wp-hackers] SSL Domain Mapping with WP Multisite
In-Reply-To: <CAGtTZ+Z4df6oEbm9c1eZrXoiAL7_28RqBOLfQvkpzu0n5U7jgQ@mail.gmail.com>
References: <CAGtTZ+Z4df6oEbm9c1eZrXoiAL7_28RqBOLfQvkpzu0n5U7jgQ@mail.gmail.com>
Message-ID: <CAL4EHf=Nd_9pfCsF6EPp-gsWX_GwwWCbWo0V5ZN2wRWBOuVaDQ@mail.gmail.com>

I can't directly help, but since SSL is handled at the server layer,
there isn't much you need to do really..
Wildcard SSL certs are generally *.domain.com, or, you can get a ssl
cert that has multiple domains, ie. domain1.com, domain2.org, etc.
You may want to do something similar to WordPress.com, All mapped
domains are front-end only, and there's a *.wordpress.com SSL cert for
the admin area (in every case, xxxxx.wordpress.com for admin)

The only catch is that at the server level, you need to ensure that
all VirtualHost's for the domains map into the same common web
directory (And yes, If you're using Apache, I believe you'd need a
seperate VirtualHost for every domain so that you can define the
domains SSL certs).

Example for Apache:
http://wiki.apache.org/httpd/NameBasedSSLVHosts

Example for Nginx you'd do something similar (although, you can
probably use Variables in the config file so that you don't need so
many server defs):
http://www.digicert.com/ssl-certificate-installation-nginx.htm

Note, that if you're using PHP-FPM/Cgi, You'll need to add extra SSL
lines into your WordPress config so that it can detect the SSL-ness of
the site correctly (As it's basically acting as a Reverse-Proxy in
that case)
http://core.trac.wordpress.org/ticket/9235#comment:40



On 4 June 2012 23:40, SWORD Studios <info at swordstudios.net> wrote:
> I'm looking to host a couple hundred sites on a WordPress Multisite
> Network. ?Each site will have it's own mapped domain. ?I've done all this
> many many times.
>
> My new issue is that about a dozen of these sites need SSL to be compliant
> (with their industry manufacturers). ?I'm having some real issues
> accomplishing https://domain.com as a mapped domain to these sites.
> ?Everything I've read (some links below) makes it seem possible as long as
> you are using SNI or a WildCard SSL to support multiple ssl's on the same
> IP.
>
> I'm looking for a real solution to this problem. ?I've spent hours reading
> many forum posts, articles, tutorials and everything seems to be
> theoretical. ?I have yet to see anyone actual say "Yes I've done this and
> this is how I did it." ? Has anyone actually accomplished this task? ? ?If
> not can anyone provide me with instructions on how to move forward.
>
> Thank you in advance for any help.
>
> http://wordpress.org/support/topic/plugin-wordpress-mu-domain-mapping-ssl-and-mapped-domain
>
> http://wordpress.org/support/topic/plugin-wordpress-mu-domain-mapping-ssl-with-mapped-domain
>
> http://lists.automattic.com/pipermail/wp-hackers/2011-August/040649.html
>
> Jesse
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

From wp-hackers at thecodecave.com  Mon Jun  4 14:55:06 2012
From: wp-hackers at thecodecave.com (Brian Layman)
Date: Mon, 04 Jun 2012 10:55:06 -0400
Subject: [wp-hackers] SSL Domain Mapping with WP Multisite
In-Reply-To: <CAGtTZ+Z4df6oEbm9c1eZrXoiAL7_28RqBOLfQvkpzu0n5U7jgQ@mail.gmail.com>
References: <CAGtTZ+Z4df6oEbm9c1eZrXoiAL7_28RqBOLfQvkpzu0n5U7jgQ@mail.gmail.com>
Message-ID: <4FCCCC4A.8000603@thecodecave.com>

Here's the issue: in order to have completely secure communication, 
Apache only uses the IP address/port of inbound communication to 
identify the traffic destination and send the correct certificate and 
begin encryption.

So if you are hosting multiple sites on the same IP address, Apache 
won't know which certificate to send.  Apache will do the only thing it 
can and send the first/default certificate for that IP in order to try 
to be secure.  If you have dozens of sites, chances are the 
communication isn't for the first vhost you have configured and so the 
certificate will be wrong.

However once you understand what it is doing, it allows you to get 
around the problem and serve multiple secure domains using vhost.  What 
you MUST do is configure your certificate to validate for all of the 
domains (straight domain and www or *) that will be served under that IP 
address.  You can configure a certificate for any number of sites, but 
I've been told to limit it to a couple dozen to be practical - you never 
know how the client/browser will handle a large number of sites in a 
certificate.

If you have more than a couple dozen sites, then serve the remaining 
sites under a different IP address with another certificate for the next 
dozen or two sites.  Creating this many certificates could become 
expensive, so I recommend that you get certified through StartSSL.com 
and become your own notary in order to issue your own certificates, as I 
have.

Apache will yell at you that you've configured your sites incorrectly, 
in most cases that would be true. It's unusual for a certificate to span 
multiple sites and a new release of Apache could change this behaviour.  
However: Yes, I have done it and that's how I did it.

Brian Layman


On 6/4/2012 9:40 AM, SWORD Studios wrote:
> I'm looking to host a couple hundred sites on a WordPress Multisite
> Network.  Each site will have it's own mapped domain.  I've done all this
> many many times.
>
> My new issue is that about a dozen of these sites need SSL to be compliant
> (with their industry manufacturers).  I'm having some real issues
> accomplishing https://domain.com as a mapped domain to these sites.
>   Everything I've read (some links below) makes it seem possible as long as
> you are using SNI or a WildCard SSL to support multiple ssl's on the same
> IP.
>
> I'm looking for a real solution to this problem.  I've spent hours reading
> many forum posts, articles, tutorials and everything seems to be
> theoretical.  I have yet to see anyone actual say "Yes I've done this and
> this is how I did it."   Has anyone actually accomplished this task?    If
> not can anyone provide me with instructions on how to move forward.
>
> Thank you in advance for any help.
>
> http://wordpress.org/support/topic/plugin-wordpress-mu-domain-mapping-ssl-and-mapped-domain
>
> http://wordpress.org/support/topic/plugin-wordpress-mu-domain-mapping-ssl-with-mapped-domain
>
> http://lists.automattic.com/pipermail/wp-hackers/2011-August/040649.html
>
> Jesse
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

From zamoose at gmail.com  Mon Jun  4 15:01:40 2012
From: zamoose at gmail.com (Doug Stewart)
Date: Mon, 4 Jun 2012 11:01:40 -0400
Subject: [wp-hackers] SSL Domain Mapping with WP Multisite
In-Reply-To: <4FCCCC4A.8000603@thecodecave.com>
References: <CAGtTZ+Z4df6oEbm9c1eZrXoiAL7_28RqBOLfQvkpzu0n5U7jgQ@mail.gmail.com>
	<4FCCCC4A.8000603@thecodecave.com>
Message-ID: <CANFh3d5g5vcRf2GvdPzSHoOaNx5dn3XXJKpwfb9j_7YnfDLkAw@mail.gmail.com>

Not true. SNI (which has some problems under older IE's) has made
multiple SSL certs on one IP possible:
http://en.wikipedia.org/wiki/Server_Name_Indication

On Mon, Jun 4, 2012 at 10:55 AM, Brian Layman
<wp-hackers at thecodecave.com> wrote:
> Here's the issue: in order to have completely secure communication, Apache
> only uses the IP address/port of inbound communication to identify the
> traffic destination and send the correct certificate and begin encryption.
>
> So if you are hosting multiple sites on the same IP address, Apache won't
> know which certificate to send. ?Apache will do the only thing it can and
> send the first/default certificate for that IP in order to try to be secure.
> ?If you have dozens of sites, chances are the communication isn't for the
> first vhost you have configured and so the certificate will be wrong.
>
> However once you understand what it is doing, it allows you to get around
> the problem and serve multiple secure domains using vhost. ?What you MUST do
> is configure your certificate to validate for all of the domains (straight
> domain and www or *) that will be served under that IP address. ?You can
> configure a certificate for any number of sites, but I've been told to limit
> it to a couple dozen to be practical - you never know how the client/browser
> will handle a large number of sites in a certificate.
>
> If you have more than a couple dozen sites, then serve the remaining sites
> under a different IP address with another certificate for the next dozen or
> two sites. ?Creating this many certificates could become expensive, so I
> recommend that you get certified through StartSSL.com and become your own
> notary in order to issue your own certificates, as I have.
>
> Apache will yell at you that you've configured your sites incorrectly, in
> most cases that would be true. It's unusual for a certificate to span
> multiple sites and a new release of Apache could change this behaviour.
> ?However: Yes, I have done it and that's how I did it.
>
> Brian Layman
>
>
>
> On 6/4/2012 9:40 AM, SWORD Studios wrote:
>>
>> I'm looking to host a couple hundred sites on a WordPress Multisite
>> Network. ?Each site will have it's own mapped domain. ?I've done all this
>> many many times.
>>
>> My new issue is that about a dozen of these sites need SSL to be compliant
>> (with their industry manufacturers). ?I'm having some real issues
>> accomplishing https://domain.com as a mapped domain to these sites.
>> ?Everything I've read (some links below) makes it seem possible as long as
>> you are using SNI or a WildCard SSL to support multiple ssl's on the same
>> IP.
>>
>> I'm looking for a real solution to this problem. ?I've spent hours reading
>> many forum posts, articles, tutorials and everything seems to be
>> theoretical. ?I have yet to see anyone actual say "Yes I've done this and
>> this is how I did it." ? Has anyone actually accomplished this task? ? ?If
>> not can anyone provide me with instructions on how to move forward.
>>
>> Thank you in advance for any help.
>>
>>
>> http://wordpress.org/support/topic/plugin-wordpress-mu-domain-mapping-ssl-and-mapped-domain
>>
>>
>> http://wordpress.org/support/topic/plugin-wordpress-mu-domain-mapping-ssl-with-mapped-domain
>>
>> http://lists.automattic.com/pipermail/wp-hackers/2011-August/040649.html
>>
>> Jesse
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers



-- 
-Doug

From wp-hackers at thecodecave.com  Mon Jun  4 15:20:17 2012
From: wp-hackers at thecodecave.com (Brian Layman)
Date: Mon, 04 Jun 2012 11:20:17 -0400
Subject: [wp-hackers] SSL Domain Mapping with WP Multisite
In-Reply-To: <CANFh3d5g5vcRf2GvdPzSHoOaNx5dn3XXJKpwfb9j_7YnfDLkAw@mail.gmail.com>
References: <CAGtTZ+Z4df6oEbm9c1eZrXoiAL7_28RqBOLfQvkpzu0n5U7jgQ@mail.gmail.com>
	<4FCCCC4A.8000603@thecodecave.com>
	<CANFh3d5g5vcRf2GvdPzSHoOaNx5dn3XXJKpwfb9j_7YnfDLkAw@mail.gmail.com>
Message-ID: <4FCCD231.2030400@thecodecave.com>

Yes, SNI should provide an enhanced ability to do this. When I created 
the configuration described below, Apache 2.2.12 had just been released 
and was not widely available, so I did not dig into it very far. Plus, 
the largest percentage of my visitors had incompatible browsers. However 
the scarcity of IP address has made SNI a necessity and it's come a long 
way in the last 3 years.

So that wiki article indicates that IE under Windows XP still doesn't 
support SNI at all.  That needs to be taken into consideration. If your 
sites are to be used in a corporate environment which has a 
signification investment in a Windows XP architecture, SNI may not be an 
option.  Something to consider.

"As of 2011 most web browsers and SSL libraries have implemented support 
for SNI but there are still a large number of users still using 
combinations of browser and operating system that do not support it."
http://en.wikipedia.org/wiki/Server_Name_Indication#Support

So I guess it depends upon your target audience.  I wonder; how do you 
handle fail over if SNI doesn't work?  Can you even detect that?

Brian Layman


On 6/4/2012 11:01 AM, Doug Stewart wrote:
> Not true. SNI (which has some problems under older IE's) has made
> multiple SSL certs on one IP possible:
> http://en.wikipedia.org/wiki/Server_Name_Indication

From bryan at ibaku.net  Mon Jun  4 15:21:12 2012
From: bryan at ibaku.net (Bryan Petty)
Date: Mon, 4 Jun 2012 09:21:12 -0600
Subject: [wp-hackers] SSL Domain Mapping with WP Multisite
In-Reply-To: <CAL4EHf=Nd_9pfCsF6EPp-gsWX_GwwWCbWo0V5ZN2wRWBOuVaDQ@mail.gmail.com>
References: <CAGtTZ+Z4df6oEbm9c1eZrXoiAL7_28RqBOLfQvkpzu0n5U7jgQ@mail.gmail.com>
	<CAL4EHf=Nd_9pfCsF6EPp-gsWX_GwwWCbWo0V5ZN2wRWBOuVaDQ@mail.gmail.com>
Message-ID: <CAKB8V+qx5quJ4MDEnn5i8KM1=3gW-37N0u3+AJJ2yw6ZYc-52Q@mail.gmail.com>

On Mon, Jun 4, 2012 at 8:46 AM, Dion Hulse (dd32) <wordpress at dd32.id.au> wrote:
> The only catch is that at the server level, you need to ensure that
> all VirtualHost's for the domains map into the same common web
> directory (And yes, If you're using Apache, I believe you'd need a
> seperate VirtualHost for every domain so that you can define the
> domains SSL certs).

In both Nginx and Apache, as long as all domains are being mapped to
the same document root directory, and they all use the same SSL
certificate (i.e. this will *have* to be wildcard), and they are on
the same IP address, then you can still use the same <VirtualHost>
definition for everything by using ServerAlias in Apache (wildcards
being supported too: *.example.com), or just as additional domains
(again with wildcards, or full regex) listed on "server_name" in
Nginx. In fact, Nginx can get around the same document root directory
requirement in a single virtual host definition ( server{} ) where
Apache can't.

If any one of those rules is broken, you will be forced to use
multiple vhosts, and very likely will be required to use multiple IP
addresses per domain (at least at a load balancer if not at the web
server).

Something to note with SNI is that while it does finally solve the
problem of requiring multiple IP addresses for each unique SSL
certificate (because it's really just a limitation of one certificate
per IP, not actually one domain per IP), SNI is NOT supported by all
browsers and operating systems still. Most notably, it doesn't work in
any version of IE on Windows XP (not even IE8), or Safari on OSX 10.4
and below. So SNI can really still only be used internally under
controlled conditions. For example, you could handle traffic at a load
balancer with SSL termination and re-negotiation - which *is* using
multiple IP addresses, and point them all back to a single IP address
on a web server with SNI configured, but that defeats the purpose of
having multiple SSL certificates.

Regards,
Bryan Petty

From bryan at ibaku.net  Mon Jun  4 15:27:38 2012
From: bryan at ibaku.net (Bryan Petty)
Date: Mon, 4 Jun 2012 09:27:38 -0600
Subject: [wp-hackers] SSL Domain Mapping with WP Multisite
In-Reply-To: <4FCCD231.2030400@thecodecave.com>
References: <CAGtTZ+Z4df6oEbm9c1eZrXoiAL7_28RqBOLfQvkpzu0n5U7jgQ@mail.gmail.com>
	<4FCCCC4A.8000603@thecodecave.com>
	<CANFh3d5g5vcRf2GvdPzSHoOaNx5dn3XXJKpwfb9j_7YnfDLkAw@mail.gmail.com>
	<4FCCD231.2030400@thecodecave.com>
Message-ID: <CAKB8V+o06T_Z6J0bNdBbgK_QSt1vZdUOYCqB75O_8F9dhggUcA@mail.gmail.com>

On Mon, Jun 4, 2012 at 9:20 AM, Brian Layman <wp-hackers at thecodecave.com> wrote:
> So I guess it depends upon your target audience. ?I wonder; how do you
> handle fail over if SNI doesn't work? ?Can you even detect that?

In Apache, just make sure you have a default VirtualHost loaded first
on the same IP/port combination as all your SNI hosts, leave
SSLStrictSNIVHostCheck off, and all browsers that don't support SNI
will be forwarded there.

Regards,
Bryan Petty

From wp-hackers at thecodecave.com  Mon Jun  4 16:43:56 2012
From: wp-hackers at thecodecave.com (Brian Layman)
Date: Mon, 04 Jun 2012 12:43:56 -0400
Subject: [wp-hackers] SSL Domain Mapping with WP Multisite
In-Reply-To: <CAKB8V+o06T_Z6J0bNdBbgK_QSt1vZdUOYCqB75O_8F9dhggUcA@mail.gmail.com>
References: <CAGtTZ+Z4df6oEbm9c1eZrXoiAL7_28RqBOLfQvkpzu0n5U7jgQ@mail.gmail.com>
	<4FCCCC4A.8000603@thecodecave.com>
	<CANFh3d5g5vcRf2GvdPzSHoOaNx5dn3XXJKpwfb9j_7YnfDLkAw@mail.gmail.com>
	<4FCCD231.2030400@thecodecave.com>
	<CAKB8V+o06T_Z6J0bNdBbgK_QSt1vZdUOYCqB75O_8F9dhggUcA@mail.gmail.com>
Message-ID: <4FCCE5CC.7020206@thecodecave.com>

On 6/4/2012 11:27 AM, Bryan Petty wrote:
> On Mon, Jun 4, 2012 at 9:20 AM, Brian Layman<wp-hackers at thecodecave.com>  wrote:
>> So I guess it depends upon your target audience.  I wonder; how do you
>> handle fail over if SNI doesn't work?  Can you even detect that?
> In Apache, just make sure you have a default VirtualHost loaded first
> on the same IP/port combination as all your SNI hosts, leave
> SSLStrictSNIVHostCheck off, and all browsers that don't support SNI
> will be forwarded there.
Will be forwarded there or will get that certificate?

-- 
*Brian Layman*

From bryan at ibaku.net  Mon Jun  4 16:49:05 2012
From: bryan at ibaku.net (Bryan Petty)
Date: Mon, 4 Jun 2012 10:49:05 -0600
Subject: [wp-hackers] SSL Domain Mapping with WP Multisite
In-Reply-To: <4FCCE5CC.7020206@thecodecave.com>
References: <CAGtTZ+Z4df6oEbm9c1eZrXoiAL7_28RqBOLfQvkpzu0n5U7jgQ@mail.gmail.com>
	<4FCCCC4A.8000603@thecodecave.com>
	<CANFh3d5g5vcRf2GvdPzSHoOaNx5dn3XXJKpwfb9j_7YnfDLkAw@mail.gmail.com>
	<4FCCD231.2030400@thecodecave.com>
	<CAKB8V+o06T_Z6J0bNdBbgK_QSt1vZdUOYCqB75O_8F9dhggUcA@mail.gmail.com>
	<4FCCE5CC.7020206@thecodecave.com>
Message-ID: <CAKB8V+oxZiyGoovrqt2uMJz8G+G_31OcDbkaeKxsQnhZuGSbJQ@mail.gmail.com>

On Mon, Jun 4, 2012 at 10:43 AM, Brian Layman
<wp-hackers at thecodecave.com> wrote:
> On 6/4/2012 11:27 AM, Bryan Petty wrote:
>>
>> On Mon, Jun 4, 2012 at 9:20 AM, Brian Layman<wp-hackers at thecodecave.com>
>> ?wrote:
>>>
>>> So I guess it depends upon your target audience. ?I wonder; how do you
>>> handle fail over if SNI doesn't work? ?Can you even detect that?
>>
>> In Apache, just make sure you have a default VirtualHost loaded first
>> on the same IP/port combination as all your SNI hosts, leave
>> SSLStrictSNIVHostCheck off, and all browsers that don't support SNI
>> will be forwarded there.
>
> Will be forwarded there or will get that certificate?

Both, which I guess brings up a good point, it likely won't be the
appropriate SSL certificate, but it will be one.

Regards,
Bryan Petty

From dan at phiffer.org  Mon Jun  4 20:52:58 2012
From: dan at phiffer.org (Dan Phiffer)
Date: Mon, 4 Jun 2012 16:52:58 -0400
Subject: [wp-hackers] WordPress security question
Message-ID: <42D1CE29-5729-4573-A6ED-EAC264339FEE@phiffer.org>

Hi wp-hackers,

We recently had one of our WP sites compromised at work and we're now in the process of assessing the fallout. The site was running WP 3.3.2 when the attack happened, best I can tell from our backups. Here are some relevant links, in case anyone has ideas for things I might want to look into. Is there some kind of security issue submission process? It would be great to get some context for what to look out for in terms of potential entry points that might've allowed this.

Back-end PHP file, wp-includes/kses.php: https://gist.github.com/c0e3c24ddc1969e855c2 (line 1)
Resulting front-end HTML: https://gist.github.com/ba0c3d78d9bf87fd3a0d (line 32)

We're already working with an incident response team to tell us if the servers themselves had unauthorized access. And I'm now going through the steps mentioned on the Codex.

Thanks,
Dan

From halukkaramete at gmail.com  Tue Jun  5 02:06:51 2012
From: halukkaramete at gmail.com (Haluk Karamete)
Date: Mon, 4 Jun 2012 19:06:51 -0700
Subject: [wp-hackers] weird behavior usig wp_insert_post
Message-ID: <CAHERW=37GfY89R8y+fBJrjHXfAXy3yj8DWY5ENhPnquUPHCRtQ@mail.gmail.com>

On an empty wordpress database, I insert one sample post using the
wp_insert_post.

Since it's an empty database, the first post I add ends up with id 1.
And I check that in the wp_posts, everything looks right ( well for
some reason post_name is blank but I do not want to focus on that now
).

The question is but when I want to update that post ( again using the
wp_insert_post), instead of updating the early record, I end up
getting post id 2!

If you ask how I update the record with the wp_insert_post, I simply
set the ID to 1 when I build my $data array for the wp_insert_post.

The codex say that when you supply the 'ID' array element to the
wp_insert_post's $data array, it simply updates that post with that
ID.

Well, in my cases, It does not.

I end up getting the post id 2.
Post ID 2's author goes as 0  (post id's author was 1 ), and post id
2's post_name is 1-revision  (  post id 1s post_name was blank as I
said above)

Any idea of why this could be happening?

Or should I simply forget the idea of using wp_insert_post for post updates?

From will.davis at gmail.com  Tue Jun  5 02:12:53 2012
From: will.davis at gmail.com (William P. Davis)
Date: Tue, 5 Jun 2012 02:12:53 +0000
Subject: [wp-hackers] weird behavior usig wp_insert_post
In-Reply-To: <CAHERW=37GfY89R8y+fBJrjHXfAXy3yj8DWY5ENhPnquUPHCRtQ@mail.gmail.com>
References: <CAHERW=37GfY89R8y+fBJrjHXfAXy3yj8DWY5ENhPnquUPHCRtQ@mail.gmail.com>
Message-ID: <1748474980-1338862374-cardhu_decombobulator_blackberry.rim.net-1559180495-@b12.c4.bise6.blackberry>

Haluk,
This is expected behavior - these are post revisions.  Post ID 1 remains the primary post and Post ID 2 is the earlier version. Post ID 2 has a different post type and post status than general posts. You can disable revisions by adding define ('WP_POST_REVISIONS', 0); to wp-config
Sent from my BlackBerry

-----Original Message-----
From: Haluk Karamete <halukkaramete at gmail.com>
Sender: wp-hackers-bounces at lists.automattic.com
Date: Mon, 4 Jun 2012 19:06:51 
To: <wp-hackers at lists.automattic.com>
Reply-To: wp-hackers at lists.automattic.com
Subject: [wp-hackers] weird behavior usig wp_insert_post

On an empty wordpress database, I insert one sample post using the
wp_insert_post.

Since it's an empty database, the first post I add ends up with id 1.
And I check that in the wp_posts, everything looks right ( well for
some reason post_name is blank but I do not want to focus on that now
).

The question is but when I want to update that post ( again using the
wp_insert_post), instead of updating the early record, I end up
getting post id 2!

If you ask how I update the record with the wp_insert_post, I simply
set the ID to 1 when I build my $data array for the wp_insert_post.

The codex say that when you supply the 'ID' array element to the
wp_insert_post's $data array, it simply updates that post with that
ID.

Well, in my cases, It does not.

I end up getting the post id 2.
Post ID 2's author goes as 0  (post id's author was 1 ), and post id
2's post_name is 1-revision  (  post id 1s post_name was blank as I
said above)

Any idea of why this could be happening?

Or should I simply forget the idea of using wp_insert_post for post updates?
_______________________________________________
wp-hackers mailing list
wp-hackers at lists.automattic.com
http://lists.automattic.com/mailman/listinfo/wp-hackers

From will.davis at gmail.com  Tue Jun  5 02:14:47 2012
From: will.davis at gmail.com (William P. Davis)
Date: Tue, 5 Jun 2012 02:14:47 +0000
Subject: [wp-hackers] weird behavior usig wp_insert_post
In-Reply-To: <1748474980-1338862374-cardhu_blackberry.rim.net-copy_sent_folder-1983062915-@b12.c4.bise6.blackberry>
References: <CAHERW=37GfY89R8y+fBJrjHXfAXy3yj8DWY5ENhPnquUPHCRtQ@mail.gmail.com>
	<1748474980-1338862374-cardhu_blackberry.rim.net-copy_sent_folder-1983062915-@b12.c4.bise6.blackberry>
Message-ID: <390235598-1338862488-cardhu_decombobulator_blackberry.rim.net-81573189-@b12.c4.bise6.blackberry>

You can read more at http://codex.wordpress.org/Revision_Management
Sent from my BlackBerry

-----Original Message-----
From: "William P. Davis" <will.davis at gmail.com>
Date: Tue, 5 Jun 2012 02:12:53 
To: <wp-hackers at lists.automattic.com>
Reply-To: will.davis at gmail.com
Subject: Re: [wp-hackers] weird behavior usig wp_insert_post

Haluk,
This is expected behavior - these are post revisions.  Post ID 1 remains the primary post and Post ID 2 is the earlier version. Post ID 2 has a different post type and post status than general posts. You can disable revisions by adding define ('WP_POST_REVISIONS', 0); to wp-config
Sent from my BlackBerry

-----Original Message-----
From: Haluk Karamete <halukkaramete at gmail.com>
Sender: wp-hackers-bounces at lists.automattic.com
Date: Mon, 4 Jun 2012 19:06:51 
To: <wp-hackers at lists.automattic.com>
Reply-To: wp-hackers at lists.automattic.com
Subject: [wp-hackers] weird behavior usig wp_insert_post

On an empty wordpress database, I insert one sample post using the
wp_insert_post.

Since it's an empty database, the first post I add ends up with id 1.
And I check that in the wp_posts, everything looks right ( well for
some reason post_name is blank but I do not want to focus on that now
).

The question is but when I want to update that post ( again using the
wp_insert_post), instead of updating the early record, I end up
getting post id 2!

If you ask how I update the record with the wp_insert_post, I simply
set the ID to 1 when I build my $data array for the wp_insert_post.

The codex say that when you supply the 'ID' array element to the
wp_insert_post's $data array, it simply updates that post with that
ID.

Well, in my cases, It does not.

I end up getting the post id 2.
Post ID 2's author goes as 0  (post id's author was 1 ), and post id
2's post_name is 1-revision  (  post id 1s post_name was blank as I
said above)

Any idea of why this could be happening?

Or should I simply forget the idea of using wp_insert_post for post updates?
_______________________________________________
wp-hackers mailing list
wp-hackers at lists.automattic.com
http://lists.automattic.com/mailman/listinfo/wp-hackers

From andrew.s.freeman at gmail.com  Tue Jun  5 02:50:39 2012
From: andrew.s.freeman at gmail.com (Andrew Freeman)
Date: Mon, 4 Jun 2012 19:50:39 -0700
Subject: [wp-hackers] WordPress security question (Dan Phiffer)
Message-ID: <CALT+zmKFuBXUXjH2F8NYaYp0FHHdvdkvQe9xyvkec6dN5S7D1g@mail.gmail.com>

Howdy Dan,

Having cleaned up about a half-dozen sites in the past two months or so, I
have some suggestions for things to look for in terms of
backdoors/potential vulnerabilities.

Most hacks I've seen come from a vulnerable Timthumb hack, an old image
thumbnail script which allowed an attacker to upload malicious code to the
server, giving them full shell access (or at least as much as Apache/PHP/WP
has). You can read technical details about it here:
http://markmaunder.com/2011/08/02/technical-details-and-scripts-of-the-wordpress-timthumb-php-hack/

You can use the Timthumb Vulnerability Scanner to quickly see if you have
any outdated versions of the script lying around:
http://wordpress.org/extend/plugins/timthumb-vulnerability-scanner/ . Even
an unused theme with the old version of the script is vulnerable.

Most hacks definitely add crazy base64_decode script to the header of
important files - often index.php of site root or theme root. This one
looks like it gets around base64_decode which makes it harder to detect. If
you can, ssh into the server and grep for 'lqxizr' to find if it's been
injected into any other files. Also, checking wp-config.php is a good idea,
because I've seen old backdoors left inside the file (usually separated
above and below the malicious script by several thousand blank lines).

Other hacks I've seen append every front-facing JavaScript with malicious
code right instead of going the PHP route. I'd recommend checking your
frontend scripts for anything strange, the time last updated in FTP may be
of some help.

Also, if you can, check the raw access logs for anything suspicious. One
time I thought my server was clear of shell-like scripts, but after another
hack that day the raw access logs showed that one actually just signed in
and used the WordPress editor to make the changes.

I hope this can be of assistance and best of luck,
Andrew Freeman

From mickey at infamia.com  Tue Jun  5 12:50:52 2012
From: mickey at infamia.com (Mickey Panayiotakis)
Date: Tue, 5 Jun 2012 08:50:52 -0400
Subject: [wp-hackers] WordPress security question
Message-ID: <CAPZNwe2-pz54Atb0EJ0OsD1QpxxM19G9feVbH24J26yj_J3+Yg@mail.gmail.com>

I've seen plenty of hacks based on timthumb vulnerabilities.
However, I don't think wordpress core uses timthumb. (I'm sure the group
will correct me here, which I invite.)

The user is left to fend on their own when using a free or commercial
theme, to a lesser or greater extent depending on the theme vendor.  Some
themes do a great job of providing updates and alerting the user to theme
and framework udpates (and thanks to WP3 we can see that in the usual
updates area).  The problem is that when you customize a theme, updates
become more visible.

One of the most disturbing bits of advice I heard recently is that if you
use a custom theme, you shouldn't update wordpress.  I'm sure what the
speaker meant was to work with your vendor to make sure that WP and all
plugins and themes stay up to date.

mickey


> Message: 1
> Date: Mon, 4 Jun 2012 19:50:39 -0700
> From: Andrew Freeman <andrew.s.freeman at gmail.com>
> Subject: Re: [wp-hackers] WordPress security question (Dan Phiffer)
> To: wp-hackers at lists.automattic.com
> Message-ID:
>        <CALT+zmKFuBXUXjH2F8NYaYp0FHHdvdkvQe9xyvkec6dN5S7D1g at mail.gmail.com
> >
> Content-Type: text/plain; charset=ISO-8859-1
> Howdy Dan,
> Having cleaned up about a half-dozen sites in the past two months or so, I
> have some suggestions for things to look for in terms of
> backdoors/potential vulnerabilities.
> Most hacks I've seen come from a vulnerable Timthumb hack, an old image
> thumbnail script which allowed an attacker to upload malicious code to the
> server, giving them full shell access (or at least as much as Apache/PHP/WP
> has). You can read technical details about it here:
>
> http://markmaunder.com/2011/08/02/technical-details-and-scripts-of-the-wordpress-timthumb-php-hack/
> You can use the Timthumb Vulnerability Scanner to quickly see if you have
> any outdated versions of the script lying around:
> http://wordpress.org/extend/plugins/timthumb-vulnerability-scanner/ . Even
> an unused theme with the old version of the script is vulnerable.
> Most hacks definitely add crazy base64_decode script to the header of
> important files - often index.php of site root or theme root. This one
> looks like it gets around base64_decode which makes it harder to detect. If
> you can, ssh into the server and grep for 'lqxizr' to find if it's been
> injected into any other files. Also, checking wp-config.php is a good idea,
> because I've seen old backdoors left inside the file (usually separated
> above and below the malicious script by several thousand blank lines).
> Other hacks I've seen append every front-facing JavaScript with malicious
> code right instead of going the PHP route. I'd recommend checking your
> frontend scripts for anything strange, the time last updated in FTP may be
> of some help.
> Also, if you can, check the raw access logs for anything suspicious. One
> time I thought my server was clear of shell-like scripts, but after another
> hack that day the raw access logs showed that one actually just signed in
> and used the WordPress editor to make the changes.
> I hope this can be of assistance and best of luck,
> Andrew Freeman
>

--

Mickey Panayiotakis
Managing Partner
800.270.5170 x512
<http://www.infamia.com>

From ipstenu at ipstenu.org  Tue Jun  5 15:49:57 2012
From: ipstenu at ipstenu.org (Mika A Epstein)
Date: Tue, 5 Jun 2012 10:49:57 -0500
Subject: [wp-hackers] WordPress security question
In-Reply-To: <CAPZNwe2-pz54Atb0EJ0OsD1QpxxM19G9feVbH24J26yj_J3+Yg@mail.gmail.com>
References: <CAPZNwe2-pz54Atb0EJ0OsD1QpxxM19G9feVbH24J26yj_J3+Yg@mail.gmail.com>
Message-ID: <33CF3F93-772F-4708-8207-96A016140958@ipstenu.org>

TimThumb is not a part of core, nor is it allowed in themes hosted on the WP theme repo (as of the last time I looked).



On Jun 5, 2012, at 7:50 AM, Mickey Panayiotakis <mickey at infamia.com> wrote:

> I've seen plenty of hacks based on timthumb vulnerabilities.
> However, I don't think wordpress core uses timthumb. (I'm sure the group
> will correct me here, which I invite.)
> 
> The user is left to fend on their own when using a free or commercial
> theme, to a lesser or greater extent depending on the theme vendor.  Some
> themes do a great job of providing updates and alerting the user to theme
> and framework udpates (and thanks to WP3 we can see that in the usual
> updates area).  The problem is that when you customize a theme, updates
> become more visible.
> 
> One of the most disturbing bits of advice I heard recently is that if you
> use a custom theme, you shouldn't update wordpress.  I'm sure what the
> speaker meant was to work with your vendor to make sure that WP and all
> plugins and themes stay up to date.
> 
> mickey
> 
> 
>> Message: 1
>> Date: Mon, 4 Jun 2012 19:50:39 -0700
>> From: Andrew Freeman <andrew.s.freeman at gmail.com>
>> Subject: Re: [wp-hackers] WordPress security question (Dan Phiffer)
>> To: wp-hackers at lists.automattic.com
>> Message-ID:
>>       <CALT+zmKFuBXUXjH2F8NYaYp0FHHdvdkvQe9xyvkec6dN5S7D1g at mail.gmail.com
>>> 
>> Content-Type: text/plain; charset=ISO-8859-1
>> Howdy Dan,
>> Having cleaned up about a half-dozen sites in the past two months or so, I
>> have some suggestions for things to look for in terms of
>> backdoors/potential vulnerabilities.
>> Most hacks I've seen come from a vulnerable Timthumb hack, an old image
>> thumbnail script which allowed an attacker to upload malicious code to the
>> server, giving them full shell access (or at least as much as Apache/PHP/WP
>> has). You can read technical details about it here:
>> 
>> http://markmaunder.com/2011/08/02/technical-details-and-scripts-of-the-wordpress-timthumb-php-hack/
>> You can use the Timthumb Vulnerability Scanner to quickly see if you have
>> any outdated versions of the script lying around:
>> http://wordpress.org/extend/plugins/timthumb-vulnerability-scanner/ . Even
>> an unused theme with the old version of the script is vulnerable.
>> Most hacks definitely add crazy base64_decode script to the header of
>> important files - often index.php of site root or theme root. This one
>> looks like it gets around base64_decode which makes it harder to detect. If
>> you can, ssh into the server and grep for 'lqxizr' to find if it's been
>> injected into any other files. Also, checking wp-config.php is a good idea,
>> because I've seen old backdoors left inside the file (usually separated
>> above and below the malicious script by several thousand blank lines).
>> Other hacks I've seen append every front-facing JavaScript with malicious
>> code right instead of going the PHP route. I'd recommend checking your
>> frontend scripts for anything strange, the time last updated in FTP may be
>> of some help.
>> Also, if you can, check the raw access logs for anything suspicious. One
>> time I thought my server was clear of shell-like scripts, but after another
>> hack that day the raw access logs showed that one actually just signed in
>> and used the WordPress editor to make the changes.
>> I hope this can be of assistance and best of luck,
>> Andrew Freeman
>> 
> 
> --
> 
> Mickey Panayiotakis
> Managing Partner
> 800.270.5170 x512
> <http://www.infamia.com>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

From patrick_laverty at brown.edu  Tue Jun  5 16:02:42 2012
From: patrick_laverty at brown.edu (Patrick Laverty)
Date: Tue, 5 Jun 2012 12:02:42 -0400
Subject: [wp-hackers] WordPress security question
In-Reply-To: <CAPZNwe2-pz54Atb0EJ0OsD1QpxxM19G9feVbH24J26yj_J3+Yg@mail.gmail.com>
References: <CAPZNwe2-pz54Atb0EJ0OsD1QpxxM19G9feVbH24J26yj_J3+Yg@mail.gmail.com>
Message-ID: <CAHZK5OZrR=u1sNCvF3BQneT=xFrBgRUpe031juPUDU57kfw9Pw@mail.gmail.com>

> One of the most disturbing bits of advice I heard recently is that if you
> use a custom theme, you shouldn't update wordpress. ?I'm sure what the
> speaker meant was to work with your vendor to make sure that WP and all
> plugins and themes stay up to date.

Yes, that is disturbing. I think what that person ran into was a core
upgrade broke his theme, so he blamed core. If you are going to write
custom themes and plugins, you do need to check those things before
you go live. Maybe a core upgrade breaks your custom theme and
plugins, but that just means they need to be fixed.

I can't think of a legitimate reason to *not* update core when it has
security fixes. Maybe if it only has functionality additions that are
not security related, I could see that, but never avoid an upgrade
that has security fixes.

From wp-hackers at thecodecave.com  Tue Jun  5 16:42:26 2012
From: wp-hackers at thecodecave.com (Brian Layman)
Date: Tue, 05 Jun 2012 12:42:26 -0400
Subject: [wp-hackers] WordPress security question
In-Reply-To: <CAHZK5OZrR=u1sNCvF3BQneT=xFrBgRUpe031juPUDU57kfw9Pw@mail.gmail.com>
References: <CAPZNwe2-pz54Atb0EJ0OsD1QpxxM19G9feVbH24J26yj_J3+Yg@mail.gmail.com>
	<CAHZK5OZrR=u1sNCvF3BQneT=xFrBgRUpe031juPUDU57kfw9Pw@mail.gmail.com>
Message-ID: <4FCE36F2.5050404@thecodecave.com>

On 6/5/2012 12:02 PM, Patrick Laverty wrote:
>> One of the most disturbing bits of advice I heard recently is that if you
>> use a custom theme, you shouldn't update wordpress.  I'm sure what the
>> speaker meant was to work with your vendor to make sure that WP and all
>> plugins and themes stay up to date.
> Yes, that is disturbing. I think what that person ran into was a core
> upgrade broke his theme, so he blamed core. If you are going to write
> custom themes and plugins, you do need to check those things before
> you go live. Maybe a core upgrade breaks your custom theme and
> plugins, but that just means they need to be fixed.
>
> I can't think of a legitimate reason to *not* update core when it has
> security fixes. Maybe if it only has functionality additions that are
> not security related, I could see that, but never avoid an upgrade
> that has security fixes.

I wish it was that simple.  A large number of people are simply scared 
to upgrade - so they don't.

It's a common mentality. All of us who have/participate in  a local 
meetup, you should bring this up a few time each year to correct the 
misconceptions.

Brian Layman


From dan at phiffer.org  Tue Jun  5 19:22:58 2012
From: dan at phiffer.org (Dan Phiffer)
Date: Tue, 5 Jun 2012 15:22:58 -0400
Subject: [wp-hackers] WordPress security question (Dan Phiffer)
In-Reply-To: <CALT+zmKFuBXUXjH2F8NYaYp0FHHdvdkvQe9xyvkec6dN5S7D1g@mail.gmail.com>
References: <CALT+zmKFuBXUXjH2F8NYaYp0FHHdvdkvQe9xyvkec6dN5S7D1g@mail.gmail.com>
Message-ID: <477ACE83-BA20-4DAB-8234-D5086B1CA6E4@phiffer.org>

Thanks for all the replies. Just to follow up on some of your feedback...

On Jun 4, 2012, at 10:50 PM, Andrew Freeman wrote:

> Most hacks I've seen come from a vulnerable Timthumb hack,

This is good to know, but we weren't using Timthumb on the attacked site.


> Most hacks definitely add crazy base64_decode script to the header of
> important files - often index.php of site root or theme root. This one
> looks like it gets around base64_decode which makes it harder to detect. If
> you can, ssh into the server and grep for 'lqxizr' to find if it's been
> injected into any other files.

This was the only file that was changed, so $lqxizr doesn't make an appearance anywhere else. Instead of using base64_decode, this is using preg_replace("/.*/e", ...). The 'e' flag executes the resulting matches, which includes an obfuscated instance of base64_decode.


> Other hacks I've seen append every front-facing JavaScript with malicious
> code right instead of going the PHP route. I'd recommend checking your
> frontend scripts for anything strange, the time last updated in FTP may be
> of some help.

According to our diff's against backups nothing else was touched -- just that one file, wp-includes/kses.php.


> Also, if you can, check the raw access logs for anything suspicious. One
> time I thought my server was clear of shell-like scripts, but after another
> hack that day the raw access logs showed that one actually just signed in
> and used the WordPress editor to make the changes.

Yeah, one thing I still need to do is to see if I can find any instances of access to 'wp-admin/theme-editor.php'. We skipped one privilege escalation security release on this site, which might be something to look into more. Are most privilege escalation attacks designed so the user changes their roles/capabilities in the database, or is it more that they trick WP into ignoring the lower capabilities?

We try to keep our sites up-to-date fairly aggressively. This one had a 12 day lag time from when 3.3.2 came out (upgrading from 3.2.1) due to some compatibility issues with plugins. IMO, not doing due diligence in upgrading your core files is maybe an indication you shouldn't be responsible for hosting your own website.

Thanks again,
Dan


From phillip.lord at newcastle.ac.uk  Wed Jun  6 14:08:09 2012
From: phillip.lord at newcastle.ac.uk (Phillip Lord)
Date: Wed, 06 Jun 2012 15:08:09 +0100
Subject: [wp-hackers] WordPress security question
In-Reply-To: <33CF3F93-772F-4708-8207-96A016140958@ipstenu.org> (Mika A.
	Epstein's message of "Tue, 5 Jun 2012 10:49:57 -0500")
References: <CAPZNwe2-pz54Atb0EJ0OsD1QpxxM19G9feVbH24J26yj_J3+Yg@mail.gmail.com>
	<33CF3F93-772F-4708-8207-96A016140958@ipstenu.org>
Message-ID: <8762b4v8hi.fsf@newcastle.ac.uk>


Unfortunately, this this is not quite true. It may be that it is not
allowed now, but this doesn't mean that it was never allowed. 

What I never understood with Wordpress is why plugins have update
notification, while themes do not. I was one of the many who get
zero-day exploited through timthumb. The theme in question (suffusion)
had removed timthumb quite a long time before but, of course, we got no
update notifications, so we had not updated. More fool me, you might say.
Well, yes, true. Also more fool many of the other thousands who got
hacked. 

Combined with an largely undocumented schema change between WPMU-2 and
WP-3 which made the restoration from backup a long, long process. I was
thinking 2 or 3 hours (including VM set up), but it took 2 or 3 days. 

Phil

Mika A Epstein <ipstenu at ipstenu.org> writes:

> TimThumb is not a part of core, nor is it allowed in themes hosted on
> the WP theme repo (as of the last time I looked).
>
>
>
> On Jun 5, 2012, at 7:50 AM, Mickey Panayiotakis <mickey at infamia.com> wrote:
>
>> I've seen plenty of hacks based on timthumb vulnerabilities.
>> However, I don't think wordpress core uses timthumb. (I'm sure the group
>> will correct me here, which I invite.)
>> 
>> The user is left to fend on their own when using a free or commercial
>> theme, to a lesser or greater extent depending on the theme vendor.  Some
>> themes do a great job of providing updates and alerting the user to theme
>> and framework udpates (and thanks to WP3 we can see that in the usual
>> updates area).  The problem is that when you customize a theme, updates
>> become more visible.
>> 
>> One of the most disturbing bits of advice I heard recently is that if you
>> use a custom theme, you shouldn't update wordpress.  I'm sure what the
>> speaker meant was to work with your vendor to make sure that WP and all
>> plugins and themes stay up to date.
>> 
>> mickey
>> 
>> 
>>> Message: 1
>>> Date: Mon, 4 Jun 2012 19:50:39 -0700
>>> From: Andrew Freeman <andrew.s.freeman at gmail.com>
>>> Subject: Re: [wp-hackers] WordPress security question (Dan Phiffer)
>>> To: wp-hackers at lists.automattic.com
>>> Message-ID:
>>>       <CALT+zmKFuBXUXjH2F8NYaYp0FHHdvdkvQe9xyvkec6dN5S7D1g at mail.gmail.com
>>>> 
>>> Content-Type: text/plain; charset=ISO-8859-1
>>> Howdy Dan,
>>> Having cleaned up about a half-dozen sites in the past two months or so, I
>>> have some suggestions for things to look for in terms of
>>> backdoors/potential vulnerabilities.
>>> Most hacks I've seen come from a vulnerable Timthumb hack, an old image
>>> thumbnail script which allowed an attacker to upload malicious code to the
>>> server, giving them full shell access (or at least as much as Apache/PHP/WP
>>> has). You can read technical details about it here:
>>> 
>>> http://markmaunder.com/2011/08/02/technical-details-and-scripts-of-the-wordpress-timthumb-php-hack/
>>> You can use the Timthumb Vulnerability Scanner to quickly see if you have
>>> any outdated versions of the script lying around:
>>> http://wordpress.org/extend/plugins/timthumb-vulnerability-scanner/ . Even
>>> an unused theme with the old version of the script is vulnerable.
>>> Most hacks definitely add crazy base64_decode script to the header of
>>> important files - often index.php of site root or theme root. This one
>>> looks like it gets around base64_decode which makes it harder to detect. If
>>> you can, ssh into the server and grep for 'lqxizr' to find if it's been
>>> injected into any other files. Also, checking wp-config.php is a good idea,
>>> because I've seen old backdoors left inside the file (usually separated
>>> above and below the malicious script by several thousand blank lines).
>>> Other hacks I've seen append every front-facing JavaScript with malicious
>>> code right instead of going the PHP route. I'd recommend checking your
>>> frontend scripts for anything strange, the time last updated in FTP may be
>>> of some help.
>>> Also, if you can, check the raw access logs for anything suspicious. One
>>> time I thought my server was clear of shell-like scripts, but after another
>>> hack that day the raw access logs showed that one actually just signed in
>>> and used the WordPress editor to make the changes.
>>> I hope this can be of assistance and best of luck,
>>> Andrew Freeman
>>> 
>> 
>> --
>> 
>> Mickey Panayiotakis
>> Managing Partner
>> 800.270.5170 x512
>> <http://www.infamia.com>
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
>

-- 
Phillip Lord,                           Phone: +44 (0) 191 222 7827
Lecturer in Bioinformatics,             Email: phillip.lord at newcastle.ac.uk
School of Computing Science,            http://homepages.cs.ncl.ac.uk/phillip.lord
Room 914 Claremont Tower,               skype: russet_apples
Newcastle University,                   msn: msn at russet.org.uk
NE1 7RU                                 twitter: phillord

From helen.y.hou at gmail.com  Wed Jun  6 14:13:11 2012
From: helen.y.hou at gmail.com (Helen Hou-Sandi)
Date: Wed, 6 Jun 2012 10:13:11 -0400
Subject: [wp-hackers] WordPress security question
In-Reply-To: <8762b4v8hi.fsf@newcastle.ac.uk>
References: <CAPZNwe2-pz54Atb0EJ0OsD1QpxxM19G9feVbH24J26yj_J3+Yg@mail.gmail.com>
	<33CF3F93-772F-4708-8207-96A016140958@ipstenu.org>
	<8762b4v8hi.fsf@newcastle.ac.uk>
Message-ID: <CAA0DF=_w3CUywxYRcC3UaY7p2msTYF_+W5ckjA9vQM5TVGZK6A@mail.gmail.com>

>
> What I never understood with Wordpress is why plugins have update
> notification, while themes do not.
>

That is not true. Themes absolutely do get updates, provided that they are
in the WordPress.org Theme Repo or the theme author has hooked in to the
update system.

From ipstenu at ipstenu.org  Wed Jun  6 14:59:34 2012
From: ipstenu at ipstenu.org (Mika A Epstein)
Date: Wed, 6 Jun 2012 09:59:34 -0500
Subject: [wp-hackers] WordPress security question
In-Reply-To: <8762b4v8hi.fsf@newcastle.ac.uk>
References: <CAPZNwe2-pz54Atb0EJ0OsD1QpxxM19G9feVbH24J26yj_J3+Yg@mail.gmail.com>
	<33CF3F93-772F-4708-8207-96A016140958@ipstenu.org>
	<8762b4v8hi.fsf@newcastle.ac.uk>
Message-ID: <490A487D-942E-4EA7-83FD-8BC1E7C1062B@ipstenu.org>

I didn't say it was never allowed :) it was, once, allowed. All themes have been updated (or removed).

As Helen rightly pointed out, you do get theme update notifications. You don't for deleted ones, but I'm assuming (hoping?) the theme review folks did some sort of update? If not, yes, there are some folks with no-longer-approved themes out there, but this was pretty well posted and reported. Due dilligenece has been done. Can't make people change their oil, but the car can beep at you a lot :)



On Jun 6, 2012, at 9:08 AM, phillip.lord at newcastle.ac.uk (Phillip Lord) wrote:

> 
> Unfortunately, this this is not quite true. It may be that it is not
> allowed now, but this doesn't mean that it was never allowed. 
> 
> What I never understood with Wordpress is why plugins have update
> notification, while themes do not. I was one of the many who get
> zero-day exploited through timthumb. The theme in question (suffusion)
> had removed timthumb quite a long time before but, of course, we got no
> update notifications, so we had not updated. More fool me, you might say.
> Well, yes, true. Also more fool many of the other thousands who got
> hacked. 
> 
> Combined with an largely undocumented schema change between WPMU-2 and
> WP-3 which made the restoration from backup a long, long process. I was
> thinking 2 or 3 hours (including VM set up), but it took 2 or 3 days. 
> 
> Phil
> 
> Mika A Epstein <ipstenu at ipstenu.org> writes:
> 
>> TimThumb is not a part of core, nor is it allowed in themes hosted on
>> the WP theme repo (as of the last time I looked).
>> 
>> 
>> 
>> On Jun 5, 2012, at 7:50 AM, Mickey Panayiotakis <mickey at infamia.com> wrote:
>> 
>>> I've seen plenty of hacks based on timthumb vulnerabilities.
>>> However, I don't think wordpress core uses timthumb. (I'm sure the group
>>> will correct me here, which I invite.)
>>> 
>>> The user is left to fend on their own when using a free or commercial
>>> theme, to a lesser or greater extent depending on the theme vendor.  Some
>>> themes do a great job of providing updates and alerting the user to theme
>>> and framework udpates (and thanks to WP3 we can see that in the usual
>>> updates area).  The problem is that when you customize a theme, updates
>>> become more visible.
>>> 
>>> One of the most disturbing bits of advice I heard recently is that if you
>>> use a custom theme, you shouldn't update wordpress.  I'm sure what the
>>> speaker meant was to work with your vendor to make sure that WP and all
>>> plugins and themes stay up to date.
>>> 
>>> mickey
>>> 
>>> 
>>>> Message: 1
>>>> Date: Mon, 4 Jun 2012 19:50:39 -0700
>>>> From: Andrew Freeman <andrew.s.freeman at gmail.com>
>>>> Subject: Re: [wp-hackers] WordPress security question (Dan Phiffer)
>>>> To: wp-hackers at lists.automattic.com
>>>> Message-ID:
>>>>      <CALT+zmKFuBXUXjH2F8NYaYp0FHHdvdkvQe9xyvkec6dN5S7D1g at mail.gmail.com
>>>>> 
>>>> Content-Type: text/plain; charset=ISO-8859-1
>>>> Howdy Dan,
>>>> Having cleaned up about a half-dozen sites in the past two months or so, I
>>>> have some suggestions for things to look for in terms of
>>>> backdoors/potential vulnerabilities.
>>>> Most hacks I've seen come from a vulnerable Timthumb hack, an old image
>>>> thumbnail script which allowed an attacker to upload malicious code to the
>>>> server, giving them full shell access (or at least as much as Apache/PHP/WP
>>>> has). You can read technical details about it here:
>>>> 
>>>> http://markmaunder.com/2011/08/02/technical-details-and-scripts-of-the-wordpress-timthumb-php-hack/
>>>> You can use the Timthumb Vulnerability Scanner to quickly see if you have
>>>> any outdated versions of the script lying around:
>>>> http://wordpress.org/extend/plugins/timthumb-vulnerability-scanner/ . Even
>>>> an unused theme with the old version of the script is vulnerable.
>>>> Most hacks definitely add crazy base64_decode script to the header of
>>>> important files - often index.php of site root or theme root. This one
>>>> looks like it gets around base64_decode which makes it harder to detect. If
>>>> you can, ssh into the server and grep for 'lqxizr' to find if it's been
>>>> injected into any other files. Also, checking wp-config.php is a good idea,
>>>> because I've seen old backdoors left inside the file (usually separated
>>>> above and below the malicious script by several thousand blank lines).
>>>> Other hacks I've seen append every front-facing JavaScript with malicious
>>>> code right instead of going the PHP route. I'd recommend checking your
>>>> frontend scripts for anything strange, the time last updated in FTP may be
>>>> of some help.
>>>> Also, if you can, check the raw access logs for anything suspicious. One
>>>> time I thought my server was clear of shell-like scripts, but after another
>>>> hack that day the raw access logs showed that one actually just signed in
>>>> and used the WordPress editor to make the changes.
>>>> I hope this can be of assistance and best of luck,
>>>> Andrew Freeman
>>>> 
>>> 
>>> --
>>> 
>>> Mickey Panayiotakis
>>> Managing Partner
>>> 800.270.5170 x512
>>> <http://www.infamia.com>
>>> _______________________________________________
>>> wp-hackers mailing list
>>> wp-hackers at lists.automattic.com
>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>> 
>> 
> 
> -- 
> Phillip Lord,                           Phone: +44 (0) 191 222 7827
> Lecturer in Bioinformatics,             Email: phillip.lord at newcastle.ac.uk
> School of Computing Science,            http://homepages.cs.ncl.ac.uk/phillip.lord
> Room 914 Claremont Tower,               skype: russet_apples
> Newcastle University,                   msn: msn at russet.org.uk
> NE1 7RU                                 twitter: phillord
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

From chip at chipbennett.net  Wed Jun  6 15:13:14 2012
From: chip at chipbennett.net (Chip Bennett)
Date: Wed, 6 Jun 2012 10:13:14 -0500
Subject: [wp-hackers] WordPress security question
In-Reply-To: <490A487D-942E-4EA7-83FD-8BC1E7C1062B@ipstenu.org>
References: <CAPZNwe2-pz54Atb0EJ0OsD1QpxxM19G9feVbH24J26yj_J3+Yg@mail.gmail.com>
	<33CF3F93-772F-4708-8207-96A016140958@ipstenu.org>
	<8762b4v8hi.fsf@newcastle.ac.uk>
	<490A487D-942E-4EA7-83FD-8BC1E7C1062B@ipstenu.org>
Message-ID: <CAPdLKqdv+jmT9Nzdj15ztW1SrV6LjP=deYdxYNBDd4UgBaAjtQ@mail.gmail.com>

There are no *active* Themes in Extend that use TimThumb. All that were
found were suspended. Since some time ago, Themes using TimThumb have been
blocked from even being uploaded to Extend.

That said: we have no way of notifying users that they may be using
vulnerable code. As much as we would love to provide such notifications to
users (be it for TimThumb, or merely for obsolete Themes/code), we have no
way to do so. It is a limitation of the update/notification system that is
well outside of our scope/control. Either the Theme developer would have to
release an update to Extend, or else the user would have to switch Themes
on his own.

Chip

p.s. what are "WPMU2" and "WP3"?

On Wed, Jun 6, 2012 at 9:59 AM, Mika A Epstein <ipstenu at ipstenu.org> wrote:

> I didn't say it was never allowed :) it was, once, allowed. All themes
> have been updated (or removed).
>
> As Helen rightly pointed out, you do get theme update notifications. You
> don't for deleted ones, but I'm assuming (hoping?) the theme review folks
> did some sort of update? If not, yes, there are some folks with
> no-longer-approved themes out there, but this was pretty well posted and
> reported. Due dilligenece has been done. Can't make people change their
> oil, but the car can beep at you a lot :)
>
>
>
> On Jun 6, 2012, at 9:08 AM, phillip.lord at newcastle.ac.uk (Phillip Lord)
> wrote:
>
> >
> > Unfortunately, this this is not quite true. It may be that it is not
> > allowed now, but this doesn't mean that it was never allowed.
> >
> > What I never understood with Wordpress is why plugins have update
> > notification, while themes do not. I was one of the many who get
> > zero-day exploited through timthumb. The theme in question (suffusion)
> > had removed timthumb quite a long time before but, of course, we got no
> > update notifications, so we had not updated. More fool me, you might say.
> > Well, yes, true. Also more fool many of the other thousands who got
> > hacked.
> >
> > Combined with an largely undocumented schema change between WPMU-2 and
> > WP-3 which made the restoration from backup a long, long process. I was
> > thinking 2 or 3 hours (including VM set up), but it took 2 or 3 days.
> >
> > Phil
> >
> > Mika A Epstein <ipstenu at ipstenu.org> writes:
> >
> >> TimThumb is not a part of core, nor is it allowed in themes hosted on
> >> the WP theme repo (as of the last time I looked).
> >>
> >>
> >>
> >> On Jun 5, 2012, at 7:50 AM, Mickey Panayiotakis <mickey at infamia.com>
> wrote:
> >>
> >>> I've seen plenty of hacks based on timthumb vulnerabilities.
> >>> However, I don't think wordpress core uses timthumb. (I'm sure the
> group
> >>> will correct me here, which I invite.)
> >>>
> >>> The user is left to fend on their own when using a free or commercial
> >>> theme, to a lesser or greater extent depending on the theme vendor.
>  Some
> >>> themes do a great job of providing updates and alerting the user to
> theme
> >>> and framework udpates (and thanks to WP3 we can see that in the usual
> >>> updates area).  The problem is that when you customize a theme, updates
> >>> become more visible.
> >>>
> >>> One of the most disturbing bits of advice I heard recently is that if
> you
> >>> use a custom theme, you shouldn't update wordpress.  I'm sure what the
> >>> speaker meant was to work with your vendor to make sure that WP and all
> >>> plugins and themes stay up to date.
> >>>
> >>> mickey
> >>>
> >>>
> >>>> Message: 1
> >>>> Date: Mon, 4 Jun 2012 19:50:39 -0700
> >>>> From: Andrew Freeman <andrew.s.freeman at gmail.com>
> >>>> Subject: Re: [wp-hackers] WordPress security question (Dan Phiffer)
> >>>> To: wp-hackers at lists.automattic.com
> >>>> Message-ID:
> >>>>      <
> CALT+zmKFuBXUXjH2F8NYaYp0FHHdvdkvQe9xyvkec6dN5S7D1g at mail.gmail.com
> >>>>>
> >>>> Content-Type: text/plain; charset=ISO-8859-1
> >>>> Howdy Dan,
> >>>> Having cleaned up about a half-dozen sites in the past two months or
> so, I
> >>>> have some suggestions for things to look for in terms of
> >>>> backdoors/potential vulnerabilities.
> >>>> Most hacks I've seen come from a vulnerable Timthumb hack, an old
> image
> >>>> thumbnail script which allowed an attacker to upload malicious code
> to the
> >>>> server, giving them full shell access (or at least as much as
> Apache/PHP/WP
> >>>> has). You can read technical details about it here:
> >>>>
> >>>>
> http://markmaunder.com/2011/08/02/technical-details-and-scripts-of-the-wordpress-timthumb-php-hack/
> >>>> You can use the Timthumb Vulnerability Scanner to quickly see if you
> have
> >>>> any outdated versions of the script lying around:
> >>>> http://wordpress.org/extend/plugins/timthumb-vulnerability-scanner/. Even
> >>>> an unused theme with the old version of the script is vulnerable.
> >>>> Most hacks definitely add crazy base64_decode script to the header of
> >>>> important files - often index.php of site root or theme root. This one
> >>>> looks like it gets around base64_decode which makes it harder to
> detect. If
> >>>> you can, ssh into the server and grep for 'lqxizr' to find if it's
> been
> >>>> injected into any other files. Also, checking wp-config.php is a good
> idea,
> >>>> because I've seen old backdoors left inside the file (usually
> separated
> >>>> above and below the malicious script by several thousand blank lines).
> >>>> Other hacks I've seen append every front-facing JavaScript with
> malicious
> >>>> code right instead of going the PHP route. I'd recommend checking your
> >>>> frontend scripts for anything strange, the time last updated in FTP
> may be
> >>>> of some help.
> >>>> Also, if you can, check the raw access logs for anything suspicious.
> One
> >>>> time I thought my server was clear of shell-like scripts, but after
> another
> >>>> hack that day the raw access logs showed that one actually just
> signed in
> >>>> and used the WordPress editor to make the changes.
> >>>> I hope this can be of assistance and best of luck,
> >>>> Andrew Freeman
> >>>>
> >>>
> >>> --
> >>>
> >>> Mickey Panayiotakis
> >>> Managing Partner
> >>> 800.270.5170 x512
> >>> <http://www.infamia.com>
> >>> _______________________________________________
> >>> wp-hackers mailing list
> >>> wp-hackers at lists.automattic.com
> >>> http://lists.automattic.com/mailman/listinfo/wp-hackers
> >> _______________________________________________
> >> wp-hackers mailing list
> >> wp-hackers at lists.automattic.com
> >> http://lists.automattic.com/mailman/listinfo/wp-hackers
> >>
> >>
> >
> > --
> > Phillip Lord,                           Phone: +44 (0) 191 222 7827
> > Lecturer in Bioinformatics,             Email:
> phillip.lord at newcastle.ac.uk
> > School of Computing Science,
> http://homepages.cs.ncl.ac.uk/phillip.lord
> > Room 914 Claremont Tower,               skype: russet_apples
> > Newcastle University,                   msn: msn at russet.org.uk
> > NE1 7RU                                 twitter: phillord
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers at lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From scottg.wp-hackers at mhg2.com  Wed Jun  6 15:31:15 2012
From: scottg.wp-hackers at mhg2.com (Scott R. Godin)
Date: Wed, 06 Jun 2012 11:31:15 -0400
Subject: [wp-hackers] suggestions for wordpress theme tags
Message-ID: <jqnt43$v8s$1@dough.gmane.org>

I would like to suggest the following additional tags for wordpress
theme searching:

one for HTML5-based themes (as opposed to those that are still using
XHTML Transitional/Strict)

and one for mobile-responsive themes that are designed to work with
specifics for mobile-devices.


-- 
(please respond to the list as opposed to my email box directly,
unless you are supplying private information you don't want public
on the list)


From phillip.lord at newcastle.ac.uk  Wed Jun  6 15:34:05 2012
From: phillip.lord at newcastle.ac.uk (Phillip Lord)
Date: Wed, 06 Jun 2012 16:34:05 +0100
Subject: [wp-hackers] WordPress security question
In-Reply-To: <CAA0DF=_w3CUywxYRcC3UaY7p2msTYF_+W5ckjA9vQM5TVGZK6A@mail.gmail.com>
	(Helen Hou-Sandi's message of "Wed, 6 Jun 2012 10:13:11 -0400")
References: <CAPZNwe2-pz54Atb0EJ0OsD1QpxxM19G9feVbH24J26yj_J3+Yg@mail.gmail.com>
	<33CF3F93-772F-4708-8207-96A016140958@ipstenu.org>
	<8762b4v8hi.fsf@newcastle.ac.uk>
	<CAA0DF=_w3CUywxYRcC3UaY7p2msTYF_+W5ckjA9vQM5TVGZK6A@mail.gmail.com>
Message-ID: <87fwa8tpxu.fsf@newcastle.ac.uk>



Helen Hou-Sandi <helen.y.hou at gmail.com> writes:

>>
>> What I never understood with Wordpress is why plugins have update
>> notification, while themes do not.
>>
>
> That is not true. Themes absolutely do get updates, provided that they are
> in the WordPress.org Theme Repo or the theme author has hooked in to the
> update system.


Hmmm. Well that would explain why I have never understood it. 

Phil


From chip at chipbennett.net  Wed Jun  6 15:35:40 2012
From: chip at chipbennett.net (Chip Bennett)
Date: Wed, 6 Jun 2012 10:35:40 -0500
Subject: [wp-hackers] suggestions for wordpress theme tags
In-Reply-To: <jqnt43$v8s$1@dough.gmane.org>
References: <jqnt43$v8s$1@dough.gmane.org>
Message-ID: <CAPdLKqcZyVYXMzDZCTEPhfSBMs3-cWJTNWMtJjiaM_GKpPN2Zg@mail.gmail.com>

A far better audience for these suggestions would be the theme-reviewers
mail-list. We've actually already been discussing, off and on, the merits
of a "mobile" tag. Please come contribute!

Chip

On Wed, Jun 6, 2012 at 10:31 AM, Scott R. Godin
<scottg.wp-hackers at mhg2.com>wrote:

> I would like to suggest the following additional tags for wordpress
> theme searching:
>
> one for HTML5-based themes (as opposed to those that are still using
> XHTML Transitional/Strict)
>
> and one for mobile-responsive themes that are designed to work with
> specifics for mobile-devices.
>
>
> --
> (please respond to the list as opposed to my email box directly,
> unless you are supplying private information you don't want public
> on the list)
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From dan at phiffer.org  Wed Jun  6 18:05:19 2012
From: dan at phiffer.org (Dan Phiffer)
Date: Wed, 6 Jun 2012 14:05:19 -0400
Subject: [wp-hackers] How does privilege escalation work?
Message-ID: <08A9D319-D9B5-4F7C-8AB6-35BAE2863C1B@phiffer.org>

Just thought I'd pull this question out of my last email to give it more visibility: are most privilege escalation attacks designed so the user changes their roles/capabilities in the database, or is it more that they trick WP into ignoring the lower capabilities?

Thanks,
Dan

From lox.dev at knc.nc  Wed Jun  6 21:09:29 2012
From: lox.dev at knc.nc (Lox)
Date: Thu, 7 Jun 2012 08:09:29 +1100
Subject: [wp-hackers] SSL Domain Mapping with WP Multisite
In-Reply-To: <CAKB8V+oxZiyGoovrqt2uMJz8G+G_31OcDbkaeKxsQnhZuGSbJQ@mail.gmail.com>
References: <CAGtTZ+Z4df6oEbm9c1eZrXoiAL7_28RqBOLfQvkpzu0n5U7jgQ@mail.gmail.com>
	<4FCCCC4A.8000603@thecodecave.com>
	<CANFh3d5g5vcRf2GvdPzSHoOaNx5dn3XXJKpwfb9j_7YnfDLkAw@mail.gmail.com>
	<4FCCD231.2030400@thecodecave.com>
	<CAKB8V+o06T_Z6J0bNdBbgK_QSt1vZdUOYCqB75O_8F9dhggUcA@mail.gmail.com>
	<4FCCE5CC.7020206@thecodecave.com>
	<CAKB8V+oxZiyGoovrqt2uMJz8G+G_31OcDbkaeKxsQnhZuGSbJQ@mail.gmail.com>
Message-ID: <CA+sFoLpAObjqCo9yLQvWNSBGr63ynYpiZTvuKwYiq8GrL=rSBQ@mail.gmail.com>

I hacked the domain mapping plugin so that SSL request of a site is mapped
to the main site:

ex:
mainsite.com and mainsite.com/site mapped to site.com

When site.com is accessed using SSL, it gets redirected to
https://mainsite.com/site.

2012/6/5 Bryan Petty <bryan at ibaku.net>

> On Mon, Jun 4, 2012 at 10:43 AM, Brian Layman
> <wp-hackers at thecodecave.com> wrote:
> > On 6/4/2012 11:27 AM, Bryan Petty wrote:
> >>
> >> On Mon, Jun 4, 2012 at 9:20 AM, Brian Layman<wp-hackers at thecodecave.com
> >
> >>  wrote:
> >>>
> >>> So I guess it depends upon your target audience.  I wonder; how do you
> >>> handle fail over if SNI doesn't work?  Can you even detect that?
> >>
> >> In Apache, just make sure you have a default VirtualHost loaded first
> >> on the same IP/port combination as all your SNI hosts, leave
> >> SSLStrictSNIVHostCheck off, and all browsers that don't support SNI
> >> will be forwarded there.
> >
> > Will be forwarded there or will get that certificate?
>
> Both, which I guess brings up a good point, it likely won't be the
> appropriate SSL certificate, but it will be one.
>
> Regards,
> Bryan Petty
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>



-- 
Lox
lox.dev at knc.nc

From lox.dev at knc.nc  Wed Jun  6 21:15:31 2012
From: lox.dev at knc.nc (Lox)
Date: Thu, 7 Jun 2012 08:15:31 +1100
Subject: [wp-hackers] MU - Global post_type / taxonomy
Message-ID: <CA+sFoLpDbVBfY86VGsCnT48S7vBvHn=fmef9wmjpBR_jb166Ag@mail.gmail.com>

Hello,

I am working on a wordpress mu network. I need to created some network wide
organizations that users will be mapped to. I also need to map users to a
'city' taxonomy.

That is ok. I can do it using a custom_post_type for the organizations, and
a taxonomy for cities. The matter comes from MU, I need those custom
post_type & taxonomy to be global to all blogs, like the wp_users ...

Is that possible to achieve ?

Regards.

-- 
Lox
lox.dev at knc.nc

From ipstenu at ipstenu.org  Wed Jun  6 23:06:14 2012
From: ipstenu at ipstenu.org (Mika A Epstein)
Date: Wed, 6 Jun 2012 18:06:14 -0500
Subject: [wp-hackers] MU - Global post_type / taxonomy
In-Reply-To: <CA+sFoLpDbVBfY86VGsCnT48S7vBvHn=fmef9wmjpBR_jb166Ag@mail.gmail.com>
References: <CA+sFoLpDbVBfY86VGsCnT48S7vBvHn=fmef9wmjpBR_jb166Ag@mail.gmail.com>
Message-ID: <E748557C-41AF-4335-8744-882C434A3061@ipstenu.org>

If you make the CPTs into an mu-plugin, it'll be there for all the sites.

The content will not, however.

----
Mika A Epstein (aka Ipstenu)
http://ipstenu.org | http://halfelf.org

On 6 Jun 2012, at 4:15:31PM, Lox wrote:

> Hello,
> 
> I am working on a wordpress mu network. I need to created some network wide
> organizations that users will be mapped to. I also need to map users to a
> 'city' taxonomy.
> 
> That is ok. I can do it using a custom_post_type for the organizations, and
> a taxonomy for cities. The matter comes from MU, I need those custom
> post_type & taxonomy to be global to all blogs, like the wp_users ...
> 
> Is that possible to achieve ?
> 
> Regards.
> 
> -- 
> Lox
> lox.dev at knc.nc
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers


From lox.dev at knc.nc  Wed Jun  6 23:50:00 2012
From: lox.dev at knc.nc (Lox)
Date: Thu, 7 Jun 2012 10:50:00 +1100
Subject: [wp-hackers] MU - Global post_type / taxonomy
In-Reply-To: <E748557C-41AF-4335-8744-882C434A3061@ipstenu.org>
References: <CA+sFoLpDbVBfY86VGsCnT48S7vBvHn=fmef9wmjpBR_jb166Ag@mail.gmail.com>
	<E748557C-41AF-4335-8744-882C434A3061@ipstenu.org>
Message-ID: <CA+sFoLobkzxJxSY8R8hrxwz+KYH4VQ8x-K1gka38WnbKeO-1Yw@mail.gmail.com>

2012/6/7 Mika A Epstein <ipstenu at ipstenu.org>

> If you make the CPTs into an mu-plugin, it'll be there for all the sites.
>
> The content will not, however.
>

I need the data to be global like the users.
I think the only way would be to switch_to_blog(1) but the other blogs
won't have the UI ...

Anyone?

-- 
Lox
lox.dev at knc.nc

From ipstenu at ipstenu.org  Thu Jun  7 00:12:36 2012
From: ipstenu at ipstenu.org (Mika A Epstein)
Date: Wed, 6 Jun 2012 19:12:36 -0500
Subject: [wp-hackers] MU - Global post_type / taxonomy
In-Reply-To: <CA+sFoLobkzxJxSY8R8hrxwz+KYH4VQ8x-K1gka38WnbKeO-1Yw@mail.gmail.com>
References: <CA+sFoLpDbVBfY86VGsCnT48S7vBvHn=fmef9wmjpBR_jb166Ag@mail.gmail.com>
	<E748557C-41AF-4335-8744-882C434A3061@ipstenu.org>
	<CA+sFoLobkzxJxSY8R8hrxwz+KYH4VQ8x-K1gka38WnbKeO-1Yw@mail.gmail.com>
Message-ID: <42D9265F-702F-4D9B-8090-0F860236980E@ipstenu.org>

You'd have to take one of the plugins that broadcasts posts, but really that's not how Multisite works :) It's meant for multiple, separate, blogs, with separated content, that happens to run off one install (see wordpress.com)

> I need to created some network wide organizations that users will be mapped to. I also need to map users to a 'city' taxonomy.

Can you explain more what you mean?

There are ways to do make 'groups' (like how BuddyPress does it) that would do this, but BP may be over kill :)

----
Mika A Epstein (aka Ipstenu)
http://ipstenu.org | http://halfelf.org

On 6 Jun 2012, at 6:50:00PM, Lox wrote:

> 2012/6/7 Mika A Epstein <ipstenu at ipstenu.org>
> 
>> If you make the CPTs into an mu-plugin, it'll be there for all the sites.
>> 
>> The content will not, however.
>> 
> 
> I need the data to be global like the users.
> I think the only way would be to switch_to_blog(1) but the other blogs
> won't have the UI ...
> 
> Anyone?
> 
> -- 
> Lox
> lox.dev at knc.nc
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers


From phillip.lord at newcastle.ac.uk  Thu Jun  7 13:08:50 2012
From: phillip.lord at newcastle.ac.uk (Phillip Lord)
Date: Thu, 07 Jun 2012 14:08:50 +0100
Subject: [wp-hackers] WordPress security question
In-Reply-To: <CAPdLKqdv+jmT9Nzdj15ztW1SrV6LjP=deYdxYNBDd4UgBaAjtQ@mail.gmail.com>
	(Chip Bennett's message of "Wed, 6 Jun 2012 10:13:14 -0500")
References: <CAPZNwe2-pz54Atb0EJ0OsD1QpxxM19G9feVbH24J26yj_J3+Yg@mail.gmail.com>
	<33CF3F93-772F-4708-8207-96A016140958@ipstenu.org>
	<8762b4v8hi.fsf@newcastle.ac.uk>
	<490A487D-942E-4EA7-83FD-8BC1E7C1062B@ipstenu.org>
	<CAPdLKqdv+jmT9Nzdj15ztW1SrV6LjP=deYdxYNBDd4UgBaAjtQ@mail.gmail.com>
Message-ID: <87y5nz9sm5.fsf@newcastle.ac.uk>



Yes, this is exactly my point. It's possible to draw the conclusion from
the statement that "there are no themes in Extend that use timthumb"
that "as I got my theme from extend, I cannot get hacked through a
timthumb exploit". The former may be true, the latter is not. 

WPMU2 == wordpress multi-user version 2 which has merged with 
WP3 or Wordpress 3. 

In the ideal world, updates would just happen. The rest of my OS
updates, but because I develop against Wordpress, I've not managed to
achieve this with wordpress itself. 

Phil

Chip Bennett <chip at chipbennett.net> writes:

> There are no *active* Themes in Extend that use TimThumb. All that were
> found were suspended. Since some time ago, Themes using TimThumb have been
> blocked from even being uploaded to Extend.
>
> That said: we have no way of notifying users that they may be using
> vulnerable code. As much as we would love to provide such notifications to
> users (be it for TimThumb, or merely for obsolete Themes/code), we have no
> way to do so. It is a limitation of the update/notification system that is
> well outside of our scope/control. Either the Theme developer would have to
> release an update to Extend, or else the user would have to switch Themes
> on his own.
>
> Chip
>
> p.s. what are "WPMU2" and "WP3"?
>
> On Wed, Jun 6, 2012 at 9:59 AM, Mika A Epstein <ipstenu at ipstenu.org> wrote:
>
>> I didn't say it was never allowed :) it was, once, allowed. All themes
>> have been updated (or removed).
>>
>> As Helen rightly pointed out, you do get theme update notifications. You
>> don't for deleted ones, but I'm assuming (hoping?) the theme review folks
>> did some sort of update? If not, yes, there are some folks with
>> no-longer-approved themes out there, but this was pretty well posted and
>> reported. Due dilligenece has been done. Can't make people change their
>> oil, but the car can beep at you a lot :)
>>
>>
>>
>> On Jun 6, 2012, at 9:08 AM, phillip.lord at newcastle.ac.uk (Phillip Lord)
>> wrote:
>>
>> >
>> > Unfortunately, this this is not quite true. It may be that it is not
>> > allowed now, but this doesn't mean that it was never allowed.
>> >
>> > What I never understood with Wordpress is why plugins have update
>> > notification, while themes do not. I was one of the many who get
>> > zero-day exploited through timthumb. The theme in question (suffusion)
>> > had removed timthumb quite a long time before but, of course, we got no
>> > update notifications, so we had not updated. More fool me, you might say.
>> > Well, yes, true. Also more fool many of the other thousands who got
>> > hacked.
>> >
>> > Combined with an largely undocumented schema change between WPMU-2 and
>> > WP-3 which made the restoration from backup a long, long process. I was
>> > thinking 2 or 3 hours (including VM set up), but it took 2 or 3 days.
>> >
>> > Phil
>> >
>> > Mika A Epstein <ipstenu at ipstenu.org> writes:
>> >
>> >> TimThumb is not a part of core, nor is it allowed in themes hosted on
>> >> the WP theme repo (as of the last time I looked).
>> >>
>> >>
>> >>
>> >> On Jun 5, 2012, at 7:50 AM, Mickey Panayiotakis <mickey at infamia.com>
>> wrote:
>> >>
>> >>> I've seen plenty of hacks based on timthumb vulnerabilities.
>> >>> However, I don't think wordpress core uses timthumb. (I'm sure the
>> group
>> >>> will correct me here, which I invite.)
>> >>>
>> >>> The user is left to fend on their own when using a free or commercial
>> >>> theme, to a lesser or greater extent depending on the theme vendor.
>>  Some
>> >>> themes do a great job of providing updates and alerting the user to
>> theme
>> >>> and framework udpates (and thanks to WP3 we can see that in the usual
>> >>> updates area).  The problem is that when you customize a theme, updates
>> >>> become more visible.
>> >>>
>> >>> One of the most disturbing bits of advice I heard recently is that if
>> you
>> >>> use a custom theme, you shouldn't update wordpress.  I'm sure what the
>> >>> speaker meant was to work with your vendor to make sure that WP and all
>> >>> plugins and themes stay up to date.
>> >>>
>> >>> mickey
>> >>>
>> >>>
>> >>>> Message: 1
>> >>>> Date: Mon, 4 Jun 2012 19:50:39 -0700
>> >>>> From: Andrew Freeman <andrew.s.freeman at gmail.com>
>> >>>> Subject: Re: [wp-hackers] WordPress security question (Dan Phiffer)
>> >>>> To: wp-hackers at lists.automattic.com
>> >>>> Message-ID:
>> >>>>      <
>> CALT+zmKFuBXUXjH2F8NYaYp0FHHdvdkvQe9xyvkec6dN5S7D1g at mail.gmail.com
>> >>>>>
>> >>>> Content-Type: text/plain; charset=ISO-8859-1
>> >>>> Howdy Dan,
>> >>>> Having cleaned up about a half-dozen sites in the past two months or
>> so, I
>> >>>> have some suggestions for things to look for in terms of
>> >>>> backdoors/potential vulnerabilities.
>> >>>> Most hacks I've seen come from a vulnerable Timthumb hack, an old
>> image
>> >>>> thumbnail script which allowed an attacker to upload malicious code
>> to the
>> >>>> server, giving them full shell access (or at least as much as
>> Apache/PHP/WP
>> >>>> has). You can read technical details about it here:
>> >>>>
>> >>>>
>> http://markmaunder.com/2011/08/02/technical-details-and-scripts-of-the-wordpress-timthumb-php-hack/
>> >>>> You can use the Timthumb Vulnerability Scanner to quickly see if you
>> have
>> >>>> any outdated versions of the script lying around:
>> >>>> http://wordpress.org/extend/plugins/timthumb-vulnerability-scanner/. Even
>> >>>> an unused theme with the old version of the script is vulnerable.
>> >>>> Most hacks definitely add crazy base64_decode script to the header of
>> >>>> important files - often index.php of site root or theme root. This one
>> >>>> looks like it gets around base64_decode which makes it harder to
>> detect. If
>> >>>> you can, ssh into the server and grep for 'lqxizr' to find if it's
>> been
>> >>>> injected into any other files. Also, checking wp-config.php is a good
>> idea,
>> >>>> because I've seen old backdoors left inside the file (usually
>> separated
>> >>>> above and below the malicious script by several thousand blank lines).
>> >>>> Other hacks I've seen append every front-facing JavaScript with
>> malicious
>> >>>> code right instead of going the PHP route. I'd recommend checking your
>> >>>> frontend scripts for anything strange, the time last updated in FTP
>> may be
>> >>>> of some help.
>> >>>> Also, if you can, check the raw access logs for anything suspicious.
>> One
>> >>>> time I thought my server was clear of shell-like scripts, but after
>> another
>> >>>> hack that day the raw access logs showed that one actually just
>> signed in
>> >>>> and used the WordPress editor to make the changes.
>> >>>> I hope this can be of assistance and best of luck,
>> >>>> Andrew Freeman
>> >>>>
>> >>>
>> >>> --
>> >>>
>> >>> Mickey Panayiotakis
>> >>> Managing Partner
>> >>> 800.270.5170 x512
>> >>> <http://www.infamia.com>
>> >>> _______________________________________________
>> >>> wp-hackers mailing list
>> >>> wp-hackers at lists.automattic.com
>> >>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>> >> _______________________________________________
>> >> wp-hackers mailing list
>> >> wp-hackers at lists.automattic.com
>> >> http://lists.automattic.com/mailman/listinfo/wp-hackers
>> >>
>> >>
>> >
>> > --
>> > Phillip Lord,                           Phone: +44 (0) 191 222 7827
>> > Lecturer in Bioinformatics,             Email:
>> phillip.lord at newcastle.ac.uk
>> > School of Computing Science,
>> http://homepages.cs.ncl.ac.uk/phillip.lord
>> > Room 914 Claremont Tower,               skype: russet_apples
>> > Newcastle University,                   msn: msn at russet.org.uk
>> > NE1 7RU                                 twitter: phillord
>> > _______________________________________________
>> > wp-hackers mailing list
>> > wp-hackers at lists.automattic.com
>> > http://lists.automattic.com/mailman/listinfo/wp-hackers
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
>

-- 
Phillip Lord,                           Phone: +44 (0) 191 222 7827
Lecturer in Bioinformatics,             Email: phillip.lord at newcastle.ac.uk
School of Computing Science,            http://homepages.cs.ncl.ac.uk/phillip.lord
Room 914 Claremont Tower,               skype: russet_apples
Newcastle University,                   msn: msn at russet.org.uk
NE1 7RU                                 twitter: phillord

From ipstenu at ipstenu.org  Thu Jun  7 13:19:42 2012
From: ipstenu at ipstenu.org (Mika A Epstein)
Date: Thu, 7 Jun 2012 08:19:42 -0500
Subject: [wp-hackers] WordPress security question
In-Reply-To: <87y5nz9sm5.fsf@newcastle.ac.uk>
References: <CAPZNwe2-pz54Atb0EJ0OsD1QpxxM19G9feVbH24J26yj_J3+Yg@mail.gmail.com>
	<33CF3F93-772F-4708-8207-96A016140958@ipstenu.org>
	<8762b4v8hi.fsf@newcastle.ac.uk>
	<490A487D-942E-4EA7-83FD-8BC1E7C1062B@ipstenu.org>
	<CAPdLKqdv+jmT9Nzdj15ztW1SrV6LjP=deYdxYNBDd4UgBaAjtQ@mail.gmail.com>
	<87y5nz9sm5.fsf@newcastle.ac.uk>
Message-ID: <EE4CD7C2-850E-41E0-B73E-DC0ED756FD51@ipstenu.org>

Semantics. There are no themes in Extend that use timthumb as of whenever that happened. If you use a theme that is currently supported in extend, and you updated, you're safe.

Maybe themes should talk to Nacin about how he wrangled plugins to provide a fake update "Hi! This is malware! Don't use it." But that borders on some shenanigans. Theme repo blog could list all the themes that were removed for exploits? Hard to manage.

On Jun 7, 2012, at 8:08 AM, phillip.lord at newcastle.ac.uk (Phillip Lord) wrote:

> 
> 
> Yes, this is exactly my point. It's possible to draw the conclusion from
> the statement that "there are no themes in Extend that use timthumb"
> that "as I got my theme from extend, I cannot get hacked through a
> timthumb exploit". The former may be true, the latter is not. 
> 
> WPMU2 == wordpress multi-user version 2 which has merged with 
> WP3 or Wordpress 3. 
> 
> In the ideal world, updates would just happen. The rest of my OS
> updates, but because I develop against Wordpress, I've not managed to
> achieve this with wordpress itself. 
> 
> Phil
> 
> Chip Bennett <chip at chipbennett.net> writes:
> 
>> There are no *active* Themes in Extend that use TimThumb. All that were
>> found were suspended. Since some time ago, Themes using TimThumb have been
>> blocked from even being uploaded to Extend.
>> 
>> That said: we have no way of notifying users that they may be using
>> vulnerable code. As much as we would love to provide such notifications to
>> users (be it for TimThumb, or merely for obsolete Themes/code), we have no
>> way to do so. It is a limitation of the update/notification system that is
>> well outside of our scope/control. Either the Theme developer would have to
>> release an update to Extend, or else the user would have to switch Themes
>> on his own.
>> 
>> Chip
>> 
>> p.s. what are "WPMU2" and "WP3"?
>> 
>> On Wed, Jun 6, 2012 at 9:59 AM, Mika A Epstein <ipstenu at ipstenu.org> wrote:
>> 
>>> I didn't say it was never allowed :) it was, once, allowed. All themes
>>> have been updated (or removed).
>>> 
>>> As Helen rightly pointed out, you do get theme update notifications. You
>>> don't for deleted ones, but I'm assuming (hoping?) the theme review folks
>>> did some sort of update? If not, yes, there are some folks with
>>> no-longer-approved themes out there, but this was pretty well posted and
>>> reported. Due dilligenece has been done. Can't make people change their
>>> oil, but the car can beep at you a lot :)
>>> 
>>> 
>>> 
>>> On Jun 6, 2012, at 9:08 AM, phillip.lord at newcastle.ac.uk (Phillip Lord)
>>> wrote:
>>> 
>>>> 
>>>> Unfortunately, this this is not quite true. It may be that it is not
>>>> allowed now, but this doesn't mean that it was never allowed.
>>>> 
>>>> What I never understood with Wordpress is why plugins have update
>>>> notification, while themes do not. I was one of the many who get
>>>> zero-day exploited through timthumb. The theme in question (suffusion)
>>>> had removed timthumb quite a long time before but, of course, we got no
>>>> update notifications, so we had not updated. More fool me, you might say.
>>>> Well, yes, true. Also more fool many of the other thousands who got
>>>> hacked.
>>>> 
>>>> Combined with an largely undocumented schema change between WPMU-2 and
>>>> WP-3 which made the restoration from backup a long, long process. I was
>>>> thinking 2 or 3 hours (including VM set up), but it took 2 or 3 days.
>>>> 
>>>> Phil
>>>> 
>>>> Mika A Epstein <ipstenu at ipstenu.org> writes:
>>>> 
>>>>> TimThumb is not a part of core, nor is it allowed in themes hosted on
>>>>> the WP theme repo (as of the last time I looked).
>>>>> 
>>>>> 
>>>>> 
>>>>> On Jun 5, 2012, at 7:50 AM, Mickey Panayiotakis <mickey at infamia.com>
>>> wrote:
>>>>> 
>>>>>> I've seen plenty of hacks based on timthumb vulnerabilities.
>>>>>> However, I don't think wordpress core uses timthumb. (I'm sure the
>>> group
>>>>>> will correct me here, which I invite.)
>>>>>> 
>>>>>> The user is left to fend on their own when using a free or commercial
>>>>>> theme, to a lesser or greater extent depending on the theme vendor.
>>> Some
>>>>>> themes do a great job of providing updates and alerting the user to
>>> theme
>>>>>> and framework udpates (and thanks to WP3 we can see that in the usual
>>>>>> updates area).  The problem is that when you customize a theme, updates
>>>>>> become more visible.
>>>>>> 
>>>>>> One of the most disturbing bits of advice I heard recently is that if
>>> you
>>>>>> use a custom theme, you shouldn't update wordpress.  I'm sure what the
>>>>>> speaker meant was to work with your vendor to make sure that WP and all
>>>>>> plugins and themes stay up to date.
>>>>>> 
>>>>>> mickey
>>>>>> 
>>>>>> 
>>>>>>> Message: 1
>>>>>>> Date: Mon, 4 Jun 2012 19:50:39 -0700
>>>>>>> From: Andrew Freeman <andrew.s.freeman at gmail.com>
>>>>>>> Subject: Re: [wp-hackers] WordPress security question (Dan Phiffer)
>>>>>>> To: wp-hackers at lists.automattic.com
>>>>>>> Message-ID:
>>>>>>>     <
>>> CALT+zmKFuBXUXjH2F8NYaYp0FHHdvdkvQe9xyvkec6dN5S7D1g at mail.gmail.com
>>>>>>>> 
>>>>>>> Content-Type: text/plain; charset=ISO-8859-1
>>>>>>> Howdy Dan,
>>>>>>> Having cleaned up about a half-dozen sites in the past two months or
>>> so, I
>>>>>>> have some suggestions for things to look for in terms of
>>>>>>> backdoors/potential vulnerabilities.
>>>>>>> Most hacks I've seen come from a vulnerable Timthumb hack, an old
>>> image
>>>>>>> thumbnail script which allowed an attacker to upload malicious code
>>> to the
>>>>>>> server, giving them full shell access (or at least as much as
>>> Apache/PHP/WP
>>>>>>> has). You can read technical details about it here:
>>>>>>> 
>>>>>>> 
>>> http://markmaunder.com/2011/08/02/technical-details-and-scripts-of-the-wordpress-timthumb-php-hack/
>>>>>>> You can use the Timthumb Vulnerability Scanner to quickly see if you
>>> have
>>>>>>> any outdated versions of the script lying around:
>>>>>>> http://wordpress.org/extend/plugins/timthumb-vulnerability-scanner/. Even
>>>>>>> an unused theme with the old version of the script is vulnerable.
>>>>>>> Most hacks definitely add crazy base64_decode script to the header of
>>>>>>> important files - often index.php of site root or theme root. This one
>>>>>>> looks like it gets around base64_decode which makes it harder to
>>> detect. If
>>>>>>> you can, ssh into the server and grep for 'lqxizr' to find if it's
>>> been
>>>>>>> injected into any other files. Also, checking wp-config.php is a good
>>> idea,
>>>>>>> because I've seen old backdoors left inside the file (usually
>>> separated
>>>>>>> above and below the malicious script by several thousand blank lines).
>>>>>>> Other hacks I've seen append every front-facing JavaScript with
>>> malicious
>>>>>>> code right instead of going the PHP route. I'd recommend checking your
>>>>>>> frontend scripts for anything strange, the time last updated in FTP
>>> may be
>>>>>>> of some help.
>>>>>>> Also, if you can, check the raw access logs for anything suspicious.
>>> One
>>>>>>> time I thought my server was clear of shell-like scripts, but after
>>> another
>>>>>>> hack that day the raw access logs showed that one actually just
>>> signed in
>>>>>>> and used the WordPress editor to make the changes.
>>>>>>> I hope this can be of assistance and best of luck,
>>>>>>> Andrew Freeman
>>>>>>> 
>>>>>> 
>>>>>> --
>>>>>> 
>>>>>> Mickey Panayiotakis
>>>>>> Managing Partner
>>>>>> 800.270.5170 x512
>>>>>> <http://www.infamia.com>
>>>>>> _______________________________________________
>>>>>> wp-hackers mailing list
>>>>>> wp-hackers at lists.automattic.com
>>>>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>>>> _______________________________________________
>>>>> wp-hackers mailing list
>>>>> wp-hackers at lists.automattic.com
>>>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>>>> 
>>>>> 
>>>> 
>>>> --
>>>> Phillip Lord,                           Phone: +44 (0) 191 222 7827
>>>> Lecturer in Bioinformatics,             Email:
>>> phillip.lord at newcastle.ac.uk
>>>> School of Computing Science,
>>> http://homepages.cs.ncl.ac.uk/phillip.lord
>>>> Room 914 Claremont Tower,               skype: russet_apples
>>>> Newcastle University,                   msn: msn at russet.org.uk
>>>> NE1 7RU                                 twitter: phillord
>>>> _______________________________________________
>>>> wp-hackers mailing list
>>>> wp-hackers at lists.automattic.com
>>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>> _______________________________________________
>>> wp-hackers mailing list
>>> wp-hackers at lists.automattic.com
>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>> 
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>> 
>> 
> 
> -- 
> Phillip Lord,                           Phone: +44 (0) 191 222 7827
> Lecturer in Bioinformatics,             Email: phillip.lord at newcastle.ac.uk
> School of Computing Science,            http://homepages.cs.ncl.ac.uk/phillip.lord
> Room 914 Claremont Tower,               skype: russet_apples
> Newcastle University,                   msn: msn at russet.org.uk
> NE1 7RU                                 twitter: phillord
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

From chip at chipbennett.net  Thu Jun  7 13:37:43 2012
From: chip at chipbennett.net (Chip Bennett)
Date: Thu, 7 Jun 2012 08:37:43 -0500
Subject: [wp-hackers] WordPress security question
In-Reply-To: <87y5nz9sm5.fsf@newcastle.ac.uk>
References: <CAPZNwe2-pz54Atb0EJ0OsD1QpxxM19G9feVbH24J26yj_J3+Yg@mail.gmail.com>
	<33CF3F93-772F-4708-8207-96A016140958@ipstenu.org>
	<8762b4v8hi.fsf@newcastle.ac.uk>
	<490A487D-942E-4EA7-83FD-8BC1E7C1062B@ipstenu.org>
	<CAPdLKqdv+jmT9Nzdj15ztW1SrV6LjP=deYdxYNBDd4UgBaAjtQ@mail.gmail.com>
	<87y5nz9sm5.fsf@newcastle.ac.uk>
Message-ID: <CAPdLKqeTmuKL9SyOEiwwxfWV_eCyF7t8DgRKy3BtuZYyFsV-qw@mail.gmail.com>

But that would be a faulty conclusion to draw. Taken in full context, my
previous statement *also* indicates that at one time there were Themes that
use TimThumb in Extend.

The bottom line is that people are responsible for their own server
applications. It is impossible for the WordPress project to manage core,
Themes, and Plugins remotely (not to mention: to attempt to do so would be
anathema to the free software philosophy under which WordPress operates).
The best we can do is to address issues when they are made apparent, and to
communicate. If users do not avail themselves of updates and communication,
what can we do?

There never was such a thing as "WPMU2", nor was/is there such a thing as
"WP3" or "WordPress 3". Major versions of both applications take the form
"X.Y". WordPress 3.0 is neither a more nor less significant version than
WordPress 2.9 or WordPress 3.1.

I bring this up because I often wonder if some people fail to update core
(or Themes/Plugins) because they fail to understand the versioning
nomenclature for WordPress, and thus think that "WordPress 3.0" is a major
release, but that "WordPress 3.1" is not? If so, that is a misunderstanding
that desperately needs to be eradicated from the user community.

Chip

On Thu, Jun 7, 2012 at 8:08 AM, Phillip Lord
<phillip.lord at newcastle.ac.uk>wrote:

>
>
> Yes, this is exactly my point. It's possible to draw the conclusion from
> the statement that "there are no themes in Extend that use timthumb"
> that "as I got my theme from extend, I cannot get hacked through a
> timthumb exploit". The former may be true, the latter is not.
>
> WPMU2 == wordpress multi-user version 2 which has merged with
> WP3 or Wordpress 3.
>
> In the ideal world, updates would just happen. The rest of my OS
> updates, but because I develop against Wordpress, I've not managed to
> achieve this with wordpress itself.
>
> Phil
>
> Chip Bennett <chip at chipbennett.net> writes:
>
> > There are no *active* Themes in Extend that use TimThumb. All that were
> > found were suspended. Since some time ago, Themes using TimThumb have
> been
> > blocked from even being uploaded to Extend.
> >
> > That said: we have no way of notifying users that they may be using
> > vulnerable code. As much as we would love to provide such notifications
> to
> > users (be it for TimThumb, or merely for obsolete Themes/code), we have
> no
> > way to do so. It is a limitation of the update/notification system that
> is
> > well outside of our scope/control. Either the Theme developer would have
> to
> > release an update to Extend, or else the user would have to switch Themes
> > on his own.
> >
> > Chip
> >
> > p.s. what are "WPMU2" and "WP3"?
> >
> > On Wed, Jun 6, 2012 at 9:59 AM, Mika A Epstein <ipstenu at ipstenu.org>
> wrote:
> >
> >> I didn't say it was never allowed :) it was, once, allowed. All themes
> >> have been updated (or removed).
> >>
> >> As Helen rightly pointed out, you do get theme update notifications. You
> >> don't for deleted ones, but I'm assuming (hoping?) the theme review
> folks
> >> did some sort of update? If not, yes, there are some folks with
> >> no-longer-approved themes out there, but this was pretty well posted and
> >> reported. Due dilligenece has been done. Can't make people change their
> >> oil, but the car can beep at you a lot :)
> >>
> >>
> >>
> >> On Jun 6, 2012, at 9:08 AM, phillip.lord at newcastle.ac.uk (Phillip Lord)
> >> wrote:
> >>
> >> >
> >> > Unfortunately, this this is not quite true. It may be that it is not
> >> > allowed now, but this doesn't mean that it was never allowed.
> >> >
> >> > What I never understood with Wordpress is why plugins have update
> >> > notification, while themes do not. I was one of the many who get
> >> > zero-day exploited through timthumb. The theme in question (suffusion)
> >> > had removed timthumb quite a long time before but, of course, we got
> no
> >> > update notifications, so we had not updated. More fool me, you might
> say.
> >> > Well, yes, true. Also more fool many of the other thousands who got
> >> > hacked.
> >> >
> >> > Combined with an largely undocumented schema change between WPMU-2 and
> >> > WP-3 which made the restoration from backup a long, long process. I
> was
> >> > thinking 2 or 3 hours (including VM set up), but it took 2 or 3 days.
> >> >
> >> > Phil
> >> >
> >> > Mika A Epstein <ipstenu at ipstenu.org> writes:
> >> >
> >> >> TimThumb is not a part of core, nor is it allowed in themes hosted on
> >> >> the WP theme repo (as of the last time I looked).
> >> >>
> >> >>
> >> >>
> >> >> On Jun 5, 2012, at 7:50 AM, Mickey Panayiotakis <mickey at infamia.com>
> >> wrote:
> >> >>
> >> >>> I've seen plenty of hacks based on timthumb vulnerabilities.
> >> >>> However, I don't think wordpress core uses timthumb. (I'm sure the
> >> group
> >> >>> will correct me here, which I invite.)
> >> >>>
> >> >>> The user is left to fend on their own when using a free or
> commercial
> >> >>> theme, to a lesser or greater extent depending on the theme vendor.
> >>  Some
> >> >>> themes do a great job of providing updates and alerting the user to
> >> theme
> >> >>> and framework udpates (and thanks to WP3 we can see that in the
> usual
> >> >>> updates area).  The problem is that when you customize a theme,
> updates
> >> >>> become more visible.
> >> >>>
> >> >>> One of the most disturbing bits of advice I heard recently is that
> if
> >> you
> >> >>> use a custom theme, you shouldn't update wordpress.  I'm sure what
> the
> >> >>> speaker meant was to work with your vendor to make sure that WP and
> all
> >> >>> plugins and themes stay up to date.
> >> >>>
> >> >>> mickey
> >> >>>
> >> >>>
> >> >>>> Message: 1
> >> >>>> Date: Mon, 4 Jun 2012 19:50:39 -0700
> >> >>>> From: Andrew Freeman <andrew.s.freeman at gmail.com>
> >> >>>> Subject: Re: [wp-hackers] WordPress security question (Dan Phiffer)
> >> >>>> To: wp-hackers at lists.automattic.com
> >> >>>> Message-ID:
> >> >>>>      <
> >> CALT+zmKFuBXUXjH2F8NYaYp0FHHdvdkvQe9xyvkec6dN5S7D1g at mail.gmail.com
> >> >>>>>
> >> >>>> Content-Type: text/plain; charset=ISO-8859-1
> >> >>>> Howdy Dan,
> >> >>>> Having cleaned up about a half-dozen sites in the past two months
> or
> >> so, I
> >> >>>> have some suggestions for things to look for in terms of
> >> >>>> backdoors/potential vulnerabilities.
> >> >>>> Most hacks I've seen come from a vulnerable Timthumb hack, an old
> >> image
> >> >>>> thumbnail script which allowed an attacker to upload malicious code
> >> to the
> >> >>>> server, giving them full shell access (or at least as much as
> >> Apache/PHP/WP
> >> >>>> has). You can read technical details about it here:
> >> >>>>
> >> >>>>
> >>
> http://markmaunder.com/2011/08/02/technical-details-and-scripts-of-the-wordpress-timthumb-php-hack/
> >> >>>> You can use the Timthumb Vulnerability Scanner to quickly see if
> you
> >> have
> >> >>>> any outdated versions of the script lying around:
> >> >>>>
> http://wordpress.org/extend/plugins/timthumb-vulnerability-scanner/. Even
> >> >>>> an unused theme with the old version of the script is vulnerable.
> >> >>>> Most hacks definitely add crazy base64_decode script to the header
> of
> >> >>>> important files - often index.php of site root or theme root. This
> one
> >> >>>> looks like it gets around base64_decode which makes it harder to
> >> detect. If
> >> >>>> you can, ssh into the server and grep for 'lqxizr' to find if it's
> >> been
> >> >>>> injected into any other files. Also, checking wp-config.php is a
> good
> >> idea,
> >> >>>> because I've seen old backdoors left inside the file (usually
> >> separated
> >> >>>> above and below the malicious script by several thousand blank
> lines).
> >> >>>> Other hacks I've seen append every front-facing JavaScript with
> >> malicious
> >> >>>> code right instead of going the PHP route. I'd recommend checking
> your
> >> >>>> frontend scripts for anything strange, the time last updated in FTP
> >> may be
> >> >>>> of some help.
> >> >>>> Also, if you can, check the raw access logs for anything
> suspicious.
> >> One
> >> >>>> time I thought my server was clear of shell-like scripts, but after
> >> another
> >> >>>> hack that day the raw access logs showed that one actually just
> >> signed in
> >> >>>> and used the WordPress editor to make the changes.
> >> >>>> I hope this can be of assistance and best of luck,
> >> >>>> Andrew Freeman
> >> >>>>
> >> >>>
> >> >>> --
> >> >>>
> >> >>> Mickey Panayiotakis
> >> >>> Managing Partner
> >> >>> 800.270.5170 x512
> >> >>> <http://www.infamia.com>
> >> >>> _______________________________________________
> >> >>> wp-hackers mailing list
> >> >>> wp-hackers at lists.automattic.com
> >> >>> http://lists.automattic.com/mailman/listinfo/wp-hackers
> >> >> _______________________________________________
> >> >> wp-hackers mailing list
> >> >> wp-hackers at lists.automattic.com
> >> >> http://lists.automattic.com/mailman/listinfo/wp-hackers
> >> >>
> >> >>
> >> >
> >> > --
> >> > Phillip Lord,                           Phone: +44 (0) 191 222 7827
> >> > Lecturer in Bioinformatics,             Email:
> >> phillip.lord at newcastle.ac.uk
> >> > School of Computing Science,
> >> http://homepages.cs.ncl.ac.uk/phillip.lord
> >> > Room 914 Claremont Tower,               skype: russet_apples
> >> > Newcastle University,                   msn: msn at russet.org.uk
> >> > NE1 7RU                                 twitter: phillord
> >> > _______________________________________________
> >> > wp-hackers mailing list
> >> > wp-hackers at lists.automattic.com
> >> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> >> _______________________________________________
> >> wp-hackers mailing list
> >> wp-hackers at lists.automattic.com
> >> http://lists.automattic.com/mailman/listinfo/wp-hackers
> >>
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers at lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> >
> >
>
> --
> Phillip Lord,                           Phone: +44 (0) 191 222 7827
> Lecturer in Bioinformatics,             Email:
> phillip.lord at newcastle.ac.uk
> School of Computing Science,
> http://homepages.cs.ncl.ac.uk/phillip.lord
> Room 914 Claremont Tower,               skype: russet_apples
> Newcastle University,                   msn: msn at russet.org.uk
> NE1 7RU                                 twitter: phillord
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From info at swordstudios.net  Thu Jun  7 14:08:10 2012
From: info at swordstudios.net (SWORD Studios)
Date: Thu, 7 Jun 2012 10:08:10 -0400
Subject: [wp-hackers] WordPress security question
In-Reply-To: <CAPdLKqeTmuKL9SyOEiwwxfWV_eCyF7t8DgRKy3BtuZYyFsV-qw@mail.gmail.com>
References: <CAPZNwe2-pz54Atb0EJ0OsD1QpxxM19G9feVbH24J26yj_J3+Yg@mail.gmail.com>
	<33CF3F93-772F-4708-8207-96A016140958@ipstenu.org>
	<8762b4v8hi.fsf@newcastle.ac.uk>
	<490A487D-942E-4EA7-83FD-8BC1E7C1062B@ipstenu.org>
	<CAPdLKqdv+jmT9Nzdj15ztW1SrV6LjP=deYdxYNBDd4UgBaAjtQ@mail.gmail.com>
	<87y5nz9sm5.fsf@newcastle.ac.uk>
	<CAPdLKqeTmuKL9SyOEiwwxfWV_eCyF7t8DgRKy3BtuZYyFsV-qw@mail.gmail.com>
Message-ID: <CAGtTZ+ZhWt_BXmrrfSeEDxp1noehDD4-Qd652DhTpoFvb7uX2Q@mail.gmail.com>

It seems to me that every effort is made to alert an Admin of the need to
update.  There is no more emphasis put on 3.0 over 3.3.2.  We've all seen
the attached alert window at the top.  There is no reason to think someone
who would "fail to understand the versioning nomenclature for WordPress"
would put any more stock in one version of WordPress or another. The
majority of WordPress admins will get their info from the actual admin and
since the alert bar at the top doesn't change in size, color or design
based on version there is no reason to believe that users would extrapolate
  that.

I would say that any update that has a security fix should have that type
of emphasis put on it.  Maybe instead of a yellow bar we could have a red
bar, something to signify the importance of this specific update.  This
however may be  a topic for another discussion.

Jesse

On Thu, Jun 7, 2012 at 9:37 AM, Chip Bennett <chip at chipbennett.net> wrote:

> But that would be a faulty conclusion to draw. Taken in full context, my
> previous statement *also* indicates that at one time there were Themes that
> use TimThumb in Extend.
>
> The bottom line is that people are responsible for their own server
> applications. It is impossible for the WordPress project to manage core,
> Themes, and Plugins remotely (not to mention: to attempt to do so would be
> anathema to the free software philosophy under which WordPress operates).
> The best we can do is to address issues when they are made apparent, and to
> communicate. If users do not avail themselves of updates and communication,
> what can we do?
>
> There never was such a thing as "WPMU2", nor was/is there such a thing as
> "WP3" or "WordPress 3". Major versions of both applications take the form
> "X.Y". WordPress 3.0 is neither a more nor less significant version than
> WordPress 2.9 or WordPress 3.1.
>
> I bring this up because I often wonder if some people fail to update core
> (or Themes/Plugins) because they fail to understand the versioning
> nomenclature for WordPress, and thus think that "WordPress 3.0" is a major
> release, but that "WordPress 3.1" is not? If so, that is a misunderstanding
> that desperately needs to be eradicated from the user community.
>
> Chip
>
> On Thu, Jun 7, 2012 at 8:08 AM, Phillip Lord
> <phillip.lord at newcastle.ac.uk>wrote:
>
> >
> >
> > Yes, this is exactly my point. It's possible to draw the conclusion from
> > the statement that "there are no themes in Extend that use timthumb"
> > that "as I got my theme from extend, I cannot get hacked through a
> > timthumb exploit". The former may be true, the latter is not.
> >
> > WPMU2 == wordpress multi-user version 2 which has merged with
> > WP3 or Wordpress 3.
> >
> > In the ideal world, updates would just happen. The rest of my OS
> > updates, but because I develop against Wordpress, I've not managed to
> > achieve this with wordpress itself.
> >
> > Phil
> >
> > Chip Bennett <chip at chipbennett.net> writes:
> >
> > > There are no *active* Themes in Extend that use TimThumb. All that were
> > > found were suspended. Since some time ago, Themes using TimThumb have
> > been
> > > blocked from even being uploaded to Extend.
> > >
> > > That said: we have no way of notifying users that they may be using
> > > vulnerable code. As much as we would love to provide such notifications
> > to
> > > users (be it for TimThumb, or merely for obsolete Themes/code), we have
> > no
> > > way to do so. It is a limitation of the update/notification system that
> > is
> > > well outside of our scope/control. Either the Theme developer would
> have
> > to
> > > release an update to Extend, or else the user would have to switch
> Themes
> > > on his own.
> > >
> > > Chip
> > >
> > > p.s. what are "WPMU2" and "WP3"?
> > >
> > > On Wed, Jun 6, 2012 at 9:59 AM, Mika A Epstein <ipstenu at ipstenu.org>
> > wrote:
> > >
> > >> I didn't say it was never allowed :) it was, once, allowed. All themes
> > >> have been updated (or removed).
> > >>
> > >> As Helen rightly pointed out, you do get theme update notifications.
> You
> > >> don't for deleted ones, but I'm assuming (hoping?) the theme review
> > folks
> > >> did some sort of update? If not, yes, there are some folks with
> > >> no-longer-approved themes out there, but this was pretty well posted
> and
> > >> reported. Due dilligenece has been done. Can't make people change
> their
> > >> oil, but the car can beep at you a lot :)
> > >>
> > >>
> > >>
> > >> On Jun 6, 2012, at 9:08 AM, phillip.lord at newcastle.ac.uk (Phillip
> Lord)
> > >> wrote:
> > >>
> > >> >
> > >> > Unfortunately, this this is not quite true. It may be that it is not
> > >> > allowed now, but this doesn't mean that it was never allowed.
> > >> >
> > >> > What I never understood with Wordpress is why plugins have update
> > >> > notification, while themes do not. I was one of the many who get
> > >> > zero-day exploited through timthumb. The theme in question
> (suffusion)
> > >> > had removed timthumb quite a long time before but, of course, we got
> > no
> > >> > update notifications, so we had not updated. More fool me, you might
> > say.
> > >> > Well, yes, true. Also more fool many of the other thousands who got
> > >> > hacked.
> > >> >
> > >> > Combined with an largely undocumented schema change between WPMU-2
> and
> > >> > WP-3 which made the restoration from backup a long, long process. I
> > was
> > >> > thinking 2 or 3 hours (including VM set up), but it took 2 or 3
> days.
> > >> >
> > >> > Phil
> > >> >
> > >> > Mika A Epstein <ipstenu at ipstenu.org> writes:
> > >> >
> > >> >> TimThumb is not a part of core, nor is it allowed in themes hosted
> on
> > >> >> the WP theme repo (as of the last time I looked).
> > >> >>
> > >> >>
> > >> >>
> > >> >> On Jun 5, 2012, at 7:50 AM, Mickey Panayiotakis <
> mickey at infamia.com>
> > >> wrote:
> > >> >>
> > >> >>> I've seen plenty of hacks based on timthumb vulnerabilities.
> > >> >>> However, I don't think wordpress core uses timthumb. (I'm sure the
> > >> group
> > >> >>> will correct me here, which I invite.)
> > >> >>>
> > >> >>> The user is left to fend on their own when using a free or
> > commercial
> > >> >>> theme, to a lesser or greater extent depending on the theme
> vendor.
> > >>  Some
> > >> >>> themes do a great job of providing updates and alerting the user
> to
> > >> theme
> > >> >>> and framework udpates (and thanks to WP3 we can see that in the
> > usual
> > >> >>> updates area).  The problem is that when you customize a theme,
> > updates
> > >> >>> become more visible.
> > >> >>>
> > >> >>> One of the most disturbing bits of advice I heard recently is that
> > if
> > >> you
> > >> >>> use a custom theme, you shouldn't update wordpress.  I'm sure what
> > the
> > >> >>> speaker meant was to work with your vendor to make sure that WP
> and
> > all
> > >> >>> plugins and themes stay up to date.
> > >> >>>
> > >> >>> mickey
> > >> >>>
> > >> >>>
> > >> >>>> Message: 1
> > >> >>>> Date: Mon, 4 Jun 2012 19:50:39 -0700
> > >> >>>> From: Andrew Freeman <andrew.s.freeman at gmail.com>
> > >> >>>> Subject: Re: [wp-hackers] WordPress security question (Dan
> Phiffer)
> > >> >>>> To: wp-hackers at lists.automattic.com
> > >> >>>> Message-ID:
> > >> >>>>      <
> > >> CALT+zmKFuBXUXjH2F8NYaYp0FHHdvdkvQe9xyvkec6dN5S7D1g at mail.gmail.com
> > >> >>>>>
> > >> >>>> Content-Type: text/plain; charset=ISO-8859-1
> > >> >>>> Howdy Dan,
> > >> >>>> Having cleaned up about a half-dozen sites in the past two months
> > or
> > >> so, I
> > >> >>>> have some suggestions for things to look for in terms of
> > >> >>>> backdoors/potential vulnerabilities.
> > >> >>>> Most hacks I've seen come from a vulnerable Timthumb hack, an old
> > >> image
> > >> >>>> thumbnail script which allowed an attacker to upload malicious
> code
> > >> to the
> > >> >>>> server, giving them full shell access (or at least as much as
> > >> Apache/PHP/WP
> > >> >>>> has). You can read technical details about it here:
> > >> >>>>
> > >> >>>>
> > >>
> >
> http://markmaunder.com/2011/08/02/technical-details-and-scripts-of-the-wordpress-timthumb-php-hack/
> > >> >>>> You can use the Timthumb Vulnerability Scanner to quickly see if
> > you
> > >> have
> > >> >>>> any outdated versions of the script lying around:
> > >> >>>>
> > http://wordpress.org/extend/plugins/timthumb-vulnerability-scanner/.
> Even
> > >> >>>> an unused theme with the old version of the script is vulnerable.
> > >> >>>> Most hacks definitely add crazy base64_decode script to the
> header
> > of
> > >> >>>> important files - often index.php of site root or theme root.
> This
> > one
> > >> >>>> looks like it gets around base64_decode which makes it harder to
> > >> detect. If
> > >> >>>> you can, ssh into the server and grep for 'lqxizr' to find if
> it's
> > >> been
> > >> >>>> injected into any other files. Also, checking wp-config.php is a
> > good
> > >> idea,
> > >> >>>> because I've seen old backdoors left inside the file (usually
> > >> separated
> > >> >>>> above and below the malicious script by several thousand blank
> > lines).
> > >> >>>> Other hacks I've seen append every front-facing JavaScript with
> > >> malicious
> > >> >>>> code right instead of going the PHP route. I'd recommend checking
> > your
> > >> >>>> frontend scripts for anything strange, the time last updated in
> FTP
> > >> may be
> > >> >>>> of some help.
> > >> >>>> Also, if you can, check the raw access logs for anything
> > suspicious.
> > >> One
> > >> >>>> time I thought my server was clear of shell-like scripts, but
> after
> > >> another
> > >> >>>> hack that day the raw access logs showed that one actually just
> > >> signed in
> > >> >>>> and used the WordPress editor to make the changes.
> > >> >>>> I hope this can be of assistance and best of luck,
> > >> >>>> Andrew Freeman
> > >> >>>>
> > >> >>>
> > >> >>> --
> > >> >>>
> > >> >>> Mickey Panayiotakis
> > >> >>> Managing Partner
> > >> >>> 800.270.5170 x512
> > >> >>> <http://www.infamia.com>
> > >> >>> _______________________________________________
> > >> >>> wp-hackers mailing list
> > >> >>> wp-hackers at lists.automattic.com
> > >> >>> http://lists.automattic.com/mailman/listinfo/wp-hackers
> > >> >> _______________________________________________
> > >> >> wp-hackers mailing list
> > >> >> wp-hackers at lists.automattic.com
> > >> >> http://lists.automattic.com/mailman/listinfo/wp-hackers
> > >> >>
> > >> >>
> > >> >
> > >> > --
> > >> > Phillip Lord,                           Phone: +44 (0) 191 222 7827
> > >> > Lecturer in Bioinformatics,             Email:
> > >> phillip.lord at newcastle.ac.uk
> > >> > School of Computing Science,
> > >> http://homepages.cs.ncl.ac.uk/phillip.lord
> > >> > Room 914 Claremont Tower,               skype: russet_apples
> > >> > Newcastle University,                   msn: msn at russet.org.uk
> > >> > NE1 7RU                                 twitter: phillord
> > >> > _______________________________________________
> > >> > wp-hackers mailing list
> > >> > wp-hackers at lists.automattic.com
> > >> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> > >> _______________________________________________
> > >> wp-hackers mailing list
> > >> wp-hackers at lists.automattic.com
> > >> http://lists.automattic.com/mailman/listinfo/wp-hackers
> > >>
> > > _______________________________________________
> > > wp-hackers mailing list
> > > wp-hackers at lists.automattic.com
> > > http://lists.automattic.com/mailman/listinfo/wp-hackers
> > >
> > >
> >
> > --
> > Phillip Lord,                           Phone: +44 (0) 191 222 7827
> > Lecturer in Bioinformatics,             Email:
> > phillip.lord at newcastle.ac.uk
> > School of Computing Science,
> > http://homepages.cs.ncl.ac.uk/phillip.lord
> > Room 914 Claremont Tower,               skype: russet_apples
> > Newcastle University,                   msn: msn at russet.org.uk
> > NE1 7RU                                 twitter: phillord
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers at lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> >
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>



-- 
thanks,

*Jesse Friedman | *Web Nerd
508-507-9673 | jesserfriedman at gmail.com
http://jesserfriedman.com | http://braintoblog.com | @professor<
http://twitter.com/professor>

From kovshenin at gmail.com  Fri Jun  8 07:50:47 2012
From: kovshenin at gmail.com (Konstantin Kovshenin)
Date: Fri, 8 Jun 2012 00:50:47 -0700 (PDT)
Subject: [wp-hackers] Rename the wp-admin directory
In-Reply-To: <4F4D7B9B.4040206@gmail.com>
References: <5993450.1222.1330332534879.JavaMail.geo-discussion-forums@ynlw24>
	<CAL4EHf=j7fG2fzXU9doCZK5vMQ_z7Mh5P23D4SgojA5xoJamFA@mail.gmail.com>
	<8853255.651.1330460723685.JavaMail.geo-discussion-forums@ynca15>
	<CAL4EHfnnVkstWwEURDV-PUPpnkfObjLwZVhmTa=wyYzFtqhL3Q@mail.gmail.com>
	<4F4D7B9B.4040206@gmail.com>
Message-ID: <0a7c54f8-90aa-49d8-ae9d-890f61062ac3@googlegroups.com>

Blocking access to wp-admin might be a good idea, but don't forget that 
things like admin-ajax.php should be accessible to non-logged in users if 
your front-end (theme or plugin) is using the AJAX API which WordPress 
provides: http://codex.wordpress.org/AJAX_in_Plugins#Ajax_on_the_Viewer-Facing_Side

On Wednesday, February 29, 2012 5:12:59 AM UTC+4, zhaiz... at gmail.com wrote:
>
> Why don't you put wp-admin into a subdomain, and block the access to the 
> main domain of wp-admin?
> I use this method in one of my wordpress site, and all admin features 
> work fine. Check here 
> <http://www.zhaiziming.com/zZ/2012/put-wordpress-admin-into-a-subdomain/>.
>
> James
>
> On 2/28/2012 3:11 PM, Dion Hulse (dd32) wrote:
> > It's a public mailing list. Do whatever you want with the reply, just
> > don't take things out of context.
> >
> > On 29 February 2012 07:25, 24/7<24-7 at gmx.net>  wrote:
> >> @Dion Hulse
> >>
> >> Would you mind if I copy/paste your answer to the Q for later readers?
> >>
> >> Am Montag, 27. Februar 2012 10:02:40 UTC+1 schrieb Dion Hulse (dd32):
> >>> Put simply: You can't.
> >>>
> >>> Longer answer: You can hack around things, and get it working, but
> >>> you'll loose all ability to upgrade without issue (potentially causing
> >>> security issues thanks to running an out of date version), you'll
> >>> loose access to certain plugins that rely on /wp-admin/, you'll
> >>> potentially loose styling when images are embedded in some
> >>> stylesheets, etc.
> >>>
> >>> puclic_html/wordpress-trunk$ grep -r wp-admin * | grep -v '\.svn' |
> >>> grep -v 'wp-content' | grep '\.php'
> >>> provides 498 good reasons not to attempt it.
> >>>
> >>> I'm not saying it can't be done, I'm just saying WordPress doesn't
> >>> support it, and that it's a waste of your time attempting it.
> >>> Both from a "you can do it" perspective, AND from a security
> >>> perspective, it's going to provide little protection, given the
> >>> alternatives available (proper passwords.. SSL, .htaccess HTTP
> >>> Authentication, combination of all of the previous.. etc)
> >>>
> >>> On 27 February 2012 19:48, 24/7<24-7 at gmx.net>  wrote:
> >>>> Hi list members,
> >>>>
> >>>> I stumbled upon this Q on WPSE<
> >>> 
> http://wordpress.stackexchange.com/questions/43560/how-do-i-rename-the-wp-admin-folder-with-the-admin-url-filter#comment55078_43560
> >>>> .
> >>>> I found it interesting, but never tried it myself, so I have no 
> starting
> >>>> point to help this guy.
> >>>>
> >>>> 1) Is it actually possible to change the /wp-admin directory name?
> >>>> 2) Is it the correct way he's trying it?
> >>>> 3) Where should he start debugging?
> >>>>
> >>>> Best wishes,
> >>>> Kaiser.
> >>>>
> >>>>
> >>>> *) I'm the 2nd guy in the comments.
> >>>>
> >>>> _______________________________________________
> >>>> wp-hackers mailing list
> >>>> wp-hackers at lists.automattic.com
> >>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
> >>>>
> >>> _______________________________________________
> >>> wp-hackers mailing list
> >>> wp-hackers at lists.automattic.com
> >>> http://lists.automattic.com/mailman/listinfo/wp-hackers
> >>>
> >>>
> >> _______________________________________________
> >> wp-hackers mailing list
> >> wp-hackers at lists.automattic.com
> >> http://lists.automattic.com/mailman/listinfo/wp-hackers
> >>
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers at lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
>

From cross at thisismyurl.com  Fri Jun  8 11:46:28 2012
From: cross at thisismyurl.com (Christopher Ross)
Date: Fri, 8 Jun 2012 08:46:28 -0300
Subject: [wp-hackers] get_posts() meta_key numeric search
Message-ID: <9F03225B-1497-4506-AB17-A1D857366ACA@thisismyurl.com>

I'm calling a get_posts() function using the meta_key to sort but it's returning the 1's out of order at the moment. For example:

$args = array(
        'numberposts'     => 30,
	'meta_key'        => 'image_score_' . $user_id,
        'orderby'         => 'meta_value',
	'order'         	=> 'DESC',
    );

Will return 99,98,9,100,10,1 instead of 100,99,98,10,9,1

I could loop into an array first and fix it but is there a way to force the sort order straight out of the get_posts()?

--

Christopher Ross : @thisismyurl : Pinterest : Facebook : LinkedIn : Google+
Telephone: (506) 455-4122

399 King Street,
Fredericton, New Brunswick
E3B 3E5

Photography : Blog





From wordpress at zed1.com  Fri Jun  8 11:59:09 2012
From: wordpress at zed1.com (Mike Little)
Date: Fri, 8 Jun 2012 12:59:09 +0100
Subject: [wp-hackers] get_posts() meta_key numeric search
In-Reply-To: <9F03225B-1497-4506-AB17-A1D857366ACA@thisismyurl.com>
References: <9F03225B-1497-4506-AB17-A1D857366ACA@thisismyurl.com>
Message-ID: <CAMb54M251tioDfbuGRQu_ggm=gZeY=KkrGZ+tLGO9pN9dMp5rw@mail.gmail.com>

On Fri, Jun 8, 2012 at 12:46 PM, Christopher Ross <cross at thisismyurl.com>wrote:

> I'm calling a get_posts() function using the meta_key to sort but it's
> returning the 1's out of order at the moment. For example:
>
> $args = array(
>        'numberposts'     => 30,
>        'meta_key'        => 'image_score_' . $user_id,
>        'orderby'         => 'meta_value',
>        'order'                 => 'DESC',
>    );
>
> Will return 99,98,9,100,10,1 instead of 100,99,98,10,9,1
>
>
Use
'orderby' => 'meta_value_num'


To force a numerical comparison (default is string comparison).


Mike

-- 
Mike Little
http://zed1.com/

From halukkaramete at gmail.com  Mon Jun 11 10:28:58 2012
From: halukkaramete at gmail.com (Haluk Karamete)
Date: Mon, 11 Jun 2012 03:28:58 -0700
Subject: [wp-hackers] Displaying the custom taxonomies side by side on the
	admin dashboard
Message-ID: <CAHERW=2y9pvSHy+Gg+gVxLMcwSRvWs-3FUBTp+sWV=zF0_xK4w@mail.gmail.com>

I got 5 top level cats and for each of these top level cats, I have
directly corresponding 5 non-hierarchal custom taxonomies.

By default, WordpPress UI display these CT's one after the other.
Right below the cats... By using a plug in, I can define the order...
As far as admin UI options, WP gives me the ability to change the UI
from 1 col to 2 col view which helps but not totally.

In 2 col view, I can easily see that I  got plenty of room to fit in
at least 3 or 4 CT's floating next to each other. When I turned the
2-col view however,   current UI allows me to drag only one tag box
into what's below the post content editor. So, with 2 col view, I
don't get to do what I wanted to. There simply is no point to drag a
tag box below the post editor cause it is unnecessarily too long.

Is it possible to make the tag boxes to float right next to one another?
So, The more room there is, the more the CT's show side by side.

    post content___________________________________________________cats box here

    CT 1__________CT 2__________CT 3__________CT 4__________


    CT 5__________


http://wordpress.stackexchange.com/questions/54812/displaying-the-custom-taxonomies-side-by-side-on-the-admin-dashboard

From halukkaramete at gmail.com  Mon Jun 11 11:31:54 2012
From: halukkaramete at gmail.com (Haluk Karamete)
Date: Mon, 11 Jun 2012 04:31:54 -0700
Subject: [wp-hackers] Handling the featured tags
Message-ID: <CAHERW=1pfAJYBZQ0m4mGym+q=YQ6Dxc7Mva1mDmHoXiCPE52Fg@mail.gmail.com>


From wordpress at zed1.com  Mon Jun 11 11:41:35 2012
From: wordpress at zed1.com (Mike Little)
Date: Mon, 11 Jun 2012 12:41:35 +0100
Subject: [wp-hackers] Handling the featured tags
In-Reply-To: <CAHERW=1pfAJYBZQ0m4mGym+q=YQ6Dxc7Mva1mDmHoXiCPE52Fg@mail.gmail.com>
References: <CAHERW=1pfAJYBZQ0m4mGym+q=YQ6Dxc7Mva1mDmHoXiCPE52Fg@mail.gmail.com>
Message-ID: <CAMb54M2dAf3Mv+X11dLcjcyo6zwFJRgC7ET7J3HzAq5anCbCcw@mail.gmail.com>

On Mon, Jun 11, 2012 at 12:31 PM, Haluk Karamete <halukkaramete at gmail.com>wrote:

> From time to time, I feature posts from the archives. Sometimes, I
> need to feature items 2 3 years back.
>
> In order to feature such posts, I simply categorized them into the
> `featured` category and once I am done featuring them, I unchecked
> them from the `featured` cat so I can have the room to feature new
> ones.
>
> This approach has multiple drawbacks.
>
> Firstly, I cannot simply go pick a post and then categorize it under
> `featured` and expect it to be appear on my `featured` zone!. I MUST
> UNCHECK AT LEAST ONE OF THE EXISTING FEATURED POSTS. Why? Well, if I
> got room to display 5 featured items, and I happen to just feature a
> 6th one. which 5 is to show in there?
>
> Secondly, due to the unchecking, I can never build an archive of 'once
> featured' or 'at least once featured' list of posts.
>
> It seems to me that WordPress make a one heck of an assumption that
> featured posts come from the latest posts! So, As you bring new posts
> in it, you can simply keep on checking them into the `featured` posts,
> and WP will nicely show them in your `featured items zone` in the
> chronological order. This obviously kicks the 6th one out of the view,
> keeping the latest 5 in the zone.
>
> But, what if you pick one old post (from say 3 mts ago && you want
> that to appear in that very same zone? Change the post date?
>
> Let me quickly note here that the Sticky posts feature of WP won't
> help here neither, cause they too require the maintenance of
> 'unsticking'. Sticks posts may help with the situation for one Zs and
> two Zs but if you constantly feature items from the past, it won't
> help at all.
>
> I wish there was a special category, called FEATURED with an option to
> change the base name  whereby WP manages the featured items using a a
> different date based criteria.
>
> So, Everytime an item is checked into that special `featured` WP
> category, WP  keeps track of the date of this action into a database
> field, called `last featured date` or something like that and when it
> displays the items in the `featured` cat ( and all of its sub cats ),
> it simply sort posts  using that date - instead of the post_created
> date!
>
> My question to you is that if there are slick solutions out there to
> address this problem?
>


I've not heard of such a plugin, but you've just described a plugin that
should only take a couple of hours for an experienced plugin writer to
create.


Mike
-- 
Mike Little
http://zed1.com/

From halukkaramete at gmail.com  Mon Jun 11 12:19:35 2012
From: halukkaramete at gmail.com (Haluk Karamete)
Date: Mon, 11 Jun 2012 05:19:35 -0700
Subject: [wp-hackers] Handling the featured tags
In-Reply-To: <CAMb54M2dAf3Mv+X11dLcjcyo6zwFJRgC7ET7J3HzAq5anCbCcw@mail.gmail.com>
References: <CAHERW=1pfAJYBZQ0m4mGym+q=YQ6Dxc7Mva1mDmHoXiCPE52Fg@mail.gmail.com>
	<CAMb54M2dAf3Mv+X11dLcjcyo6zwFJRgC7ET7J3HzAq5anCbCcw@mail.gmail.com>
Message-ID: <CAHERW=2hAunJmp_wWMBPG5t48=nTvbLK_XoZB8+wjvEax0e9iA@mail.gmail.com>

Would an algorithm like this work?

At save/update post time,
     check the post's featured category status; by comparing its
before and after status
     if the before and after statuses ( as far as featured cat goes )
are the same, do nothing special.
     if the before status was unchecked, and the after status is
checked, then update a field ( WELL WHAT FIELD ? )

    How about post_date_gmt? Right from the wp_posts? What say you?



On Mon, Jun 11, 2012 at 4:41 AM, Mike Little <wordpress at zed1.com> wrote:
> On Mon, Jun 11, 2012 at 12:31 PM, Haluk Karamete <halukkaramete at gmail.com>wrote:
>
>> From time to time, I feature posts from the archives. Sometimes, I
>> need to feature items 2 3 years back.
>>
>> In order to feature such posts, I simply categorized them into the
>> `featured` category and once I am done featuring them, I unchecked
>> them from the `featured` cat so I can have the room to feature new
>> ones.
>>
>> This approach has multiple drawbacks.
>>
>> Firstly, I cannot simply go pick a post and then categorize it under
>> `featured` and expect it to be appear on my `featured` zone!. I MUST
>> UNCHECK AT LEAST ONE OF THE EXISTING FEATURED POSTS. Why? Well, if I
>> got room to display 5 featured items, and I happen to just feature a
>> 6th one. which 5 is to show in there?
>>
>> Secondly, due to the unchecking, I can never build an archive of 'once
>> featured' or 'at least once featured' list of posts.
>>
>> It seems to me that WordPress make a one heck of an assumption that
>> featured posts come from the latest posts! So, As you bring new posts
>> in it, you can simply keep on checking them into the `featured` posts,
>> and WP will nicely show them in your `featured items zone` in the
>> chronological order. This obviously kicks the 6th one out of the view,
>> keeping the latest 5 in the zone.
>>
>> But, what if you pick one old post (from say 3 mts ago && you want
>> that to appear in that very same zone? Change the post date?
>>
>> Let me quickly note here that the Sticky posts feature of WP won't
>> help here neither, cause they too require the maintenance of
>> 'unsticking'. Sticks posts may help with the situation for one Zs and
>> two Zs but if you constantly feature items from the past, it won't
>> help at all.
>>
>> I wish there was a special category, called FEATURED with an option to
>> change the base name ?whereby WP manages the featured items using a a
>> different date based criteria.
>>
>> So, Everytime an item is checked into that special `featured` WP
>> category, WP ?keeps track of the date of this action into a database
>> field, called `last featured date` or something like that and when it
>> displays the items in the `featured` cat ( and all of its sub cats ),
>> it simply sort posts ?using that date - instead of the post_created
>> date!
>>
>> My question to you is that if there are slick solutions out there to
>> address this problem?
>>
>
>
> I've not heard of such a plugin, but you've just described a plugin that
> should only take a couple of hours for an experienced plugin writer to
> create.
>
>
> Mike
> --
> Mike Little
> http://zed1.com/
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

From wordpress at zed1.com  Mon Jun 11 12:50:22 2012
From: wordpress at zed1.com (Mike Little)
Date: Mon, 11 Jun 2012 13:50:22 +0100
Subject: [wp-hackers] Handling the featured tags
In-Reply-To: <CAHERW=2hAunJmp_wWMBPG5t48=nTvbLK_XoZB8+wjvEax0e9iA@mail.gmail.com>
References: <CAHERW=1pfAJYBZQ0m4mGym+q=YQ6Dxc7Mva1mDmHoXiCPE52Fg@mail.gmail.com>
	<CAMb54M2dAf3Mv+X11dLcjcyo6zwFJRgC7ET7J3HzAq5anCbCcw@mail.gmail.com>
	<CAHERW=2hAunJmp_wWMBPG5t48=nTvbLK_XoZB8+wjvEax0e9iA@mail.gmail.com>
Message-ID: <CAMb54M1hLVeSEs0yUGhiOpA0J-D=HXDb4imqP1844G2=wgWTOg@mail.gmail.com>

On Mon, Jun 11, 2012 at 1:19 PM, Haluk Karamete <halukkaramete at gmail.com>wrote:

> Would an algorithm like this work?
>
> At save/update post time,
>     check the post's featured category status; by comparing its
> before and after status
>     if the before and after statuses ( as far as featured cat goes )
> are the same, do nothing special.
>     if the before status was unchecked, and the after status is
> checked, then update a field ( WELL WHAT FIELD ? )
>
>    How about post_date_gmt? Right from the wp_posts? What say you?
>
>
If you want to use a standard category (there is no need to, but it might
be more comfortable for your users), then simply hook into the
'added_term_relationship' and 'deleted_term_relationship' actions, and add
or remove a meta data field with a current timestamp. Then, in the function
called from your theme template to retrieve these featured posts, simply
add a reverse sort using the added timestamp meta data.


By the way, this line:

"checked, then update a field ( WELL WHAT FIELD ? )"

comes across as quite rude. Using all capitals is considered the textual
equivalent of 'shouting', and in a forum where you are asking for help,
it's not a good idea to shout at the people you hope will help you.

Mike
-- 
Mike Little
http://zed1.com/

From niladam at gmail.com  Mon Jun 11 13:29:09 2012
From: niladam at gmail.com (Tache Madalin)
Date: Mon, 11 Jun 2012 16:29:09 +0300
Subject: [wp-hackers] Handling the featured tags
In-Reply-To: <CAMb54M1hLVeSEs0yUGhiOpA0J-D=HXDb4imqP1844G2=wgWTOg@mail.gmail.com>
References: <CAHERW=1pfAJYBZQ0m4mGym+q=YQ6Dxc7Mva1mDmHoXiCPE52Fg@mail.gmail.com>
	<CAMb54M2dAf3Mv+X11dLcjcyo6zwFJRgC7ET7J3HzAq5anCbCcw@mail.gmail.com>
	<CAHERW=2hAunJmp_wWMBPG5t48=nTvbLK_XoZB8+wjvEax0e9iA@mail.gmail.com>
	<CAMb54M1hLVeSEs0yUGhiOpA0J-D=HXDb4imqP1844G2=wgWTOg@mail.gmail.com>
Message-ID: <826830DF-689E-43C2-A537-06CD70664086@gmail.com>

How about using custom fields? They kinda rock if you get to know them...

Sent from my iPhone

On 11.06.2012, at 15:50, Mike Little <wordpress at zed1.com> wrote:

> On Mon, Jun 11, 2012 at 1:19 PM, Haluk Karamete <halukkaramete at gmail.com>wrote:
> 
>> Would an algorithm like this work?
>> 
>> At save/update post time,
>>    check the post's featured category status; by comparing its
>> before and after status
>>    if the before and after statuses ( as far as featured cat goes )
>> are the same, do nothing special.
>>    if the before status was unchecked, and the after status is
>> checked, then update a field ( WELL WHAT FIELD ? )
>> 
>>   How about post_date_gmt? Right from the wp_posts? What say you?
>> 
>> 
> If you want to use a standard category (there is no need to, but it might
> be more comfortable for your users), then simply hook into the
> 'added_term_relationship' and 'deleted_term_relationship' actions, and add
> or remove a meta data field with a current timestamp. Then, in the function
> called from your theme template to retrieve these featured posts, simply
> add a reverse sort using the added timestamp meta data.
> 
> 
> By the way, this line:
> 
> "checked, then update a field ( WELL WHAT FIELD ? )"
> 
> comes across as quite rude. Using all capitals is considered the textual
> equivalent of 'shouting', and in a forum where you are asking for help,
> it's not a good idea to shout at the people you hope will help you.
> 
> Mike
> -- 
> Mike Little
> http://zed1.com/
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

From wordpress at zed1.com  Mon Jun 11 14:13:23 2012
From: wordpress at zed1.com (Mike Little)
Date: Mon, 11 Jun 2012 15:13:23 +0100
Subject: [wp-hackers] Handling the featured tags
In-Reply-To: <826830DF-689E-43C2-A537-06CD70664086@gmail.com>
References: <CAHERW=1pfAJYBZQ0m4mGym+q=YQ6Dxc7Mva1mDmHoXiCPE52Fg@mail.gmail.com>
	<CAMb54M2dAf3Mv+X11dLcjcyo6zwFJRgC7ET7J3HzAq5anCbCcw@mail.gmail.com>
	<CAHERW=2hAunJmp_wWMBPG5t48=nTvbLK_XoZB8+wjvEax0e9iA@mail.gmail.com>
	<CAMb54M1hLVeSEs0yUGhiOpA0J-D=HXDb4imqP1844G2=wgWTOg@mail.gmail.com>
	<826830DF-689E-43C2-A537-06CD70664086@gmail.com>
Message-ID: <CAMb54M3cZ7aBhZ_ag--GjJ31Ta7FAV3eo3DoKig4tqwBBCiiPA@mail.gmail.com>

On Mon, Jun 11, 2012 at 2:29 PM, Tache Madalin <niladam at gmail.com> wrote:

> How about using custom fields? They kinda rock if you get to know them...
>
>
That is what is meant be metadata field


Mike
-- 
Mike Little
http://zed1.com/

From halukkaramete at gmail.com  Mon Jun 11 18:10:26 2012
From: halukkaramete at gmail.com (Haluk Karamete)
Date: Mon, 11 Jun 2012 11:10:26 -0700
Subject: [wp-hackers] Handling the featured tags
In-Reply-To: <CAMb54M3cZ7aBhZ_ag--GjJ31Ta7FAV3eo3DoKig4tqwBBCiiPA@mail.gmail.com>
References: <CAHERW=1pfAJYBZQ0m4mGym+q=YQ6Dxc7Mva1mDmHoXiCPE52Fg@mail.gmail.com>
	<CAMb54M2dAf3Mv+X11dLcjcyo6zwFJRgC7ET7J3HzAq5anCbCcw@mail.gmail.com>
	<CAHERW=2hAunJmp_wWMBPG5t48=nTvbLK_XoZB8+wjvEax0e9iA@mail.gmail.com>
	<CAMb54M1hLVeSEs0yUGhiOpA0J-D=HXDb4imqP1844G2=wgWTOg@mail.gmail.com>
	<826830DF-689E-43C2-A537-06CD70664086@gmail.com>
	<CAMb54M3cZ7aBhZ_ag--GjJ31Ta7FAV3eo3DoKig4tqwBBCiiPA@mail.gmail.com>
Message-ID: <CAHERW=2_6hg-XnLvSg-SQzKNJKcsg56HyomjTZ7oPZ0nPr8BEA@mail.gmail.com>

3 questions:

Would you have crafted a different solution for a high traffic, a very
high traffic site?

What would be the greatest harm of tapping into the post_date_gmt of
the wp_posts? I incline towards the GMT field ( as opposed to using
custom fields ) strictly for performance reasons. Again, if the site
gets 1 query a day, who cares? But what if the site gets 100000 page
views a day.

Where  do GMT stuff gets used really? Can I just say heck with it and
use that instead?

On Mon, Jun 11, 2012 at 7:13 AM, Mike Little <wordpress at zed1.com> wrote:
> On Mon, Jun 11, 2012 at 2:29 PM, Tache Madalin <niladam at gmail.com> wrote:
>
>> How about using custom fields? They kinda rock if you get to know them...
>>
>>
> That is what is meant be metadata field
>
>
> Mike
> --
> Mike Little
> http://zed1.com/
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

From dmitry at getmoxied.net  Mon Jun 11 18:23:36 2012
From: dmitry at getmoxied.net (Dmitry Tokmakov)
Date: Mon, 11 Jun 2012 14:23:36 -0400
Subject: [wp-hackers] Handling the featured tags
In-Reply-To: <CAHERW=2_6hg-XnLvSg-SQzKNJKcsg56HyomjTZ7oPZ0nPr8BEA@mail.gmail.com>
References: <CAHERW=1pfAJYBZQ0m4mGym+q=YQ6Dxc7Mva1mDmHoXiCPE52Fg@mail.gmail.com>
	<CAMb54M2dAf3Mv+X11dLcjcyo6zwFJRgC7ET7J3HzAq5anCbCcw@mail.gmail.com>
	<CAHERW=2hAunJmp_wWMBPG5t48=nTvbLK_XoZB8+wjvEax0e9iA@mail.gmail.com>
	<CAMb54M1hLVeSEs0yUGhiOpA0J-D=HXDb4imqP1844G2=wgWTOg@mail.gmail.com>
	<826830DF-689E-43C2-A537-06CD70664086@gmail.com>
	<CAMb54M3cZ7aBhZ_ag--GjJ31Ta7FAV3eo3DoKig4tqwBBCiiPA@mail.gmail.com>
	<CAHERW=2_6hg-XnLvSg-SQzKNJKcsg56HyomjTZ7oPZ0nPr8BEA@mail.gmail.com>
Message-ID: <DC18B0CE-3A50-454B-93C3-F7809816623D@getmoxied.net>

Hi check out this link:
10 Million hits per day with WordPress on a $15 virtual server
http://www.ewanleith.com/blog/900/10-million-hits-a-day-with-wordpress-using-a-15-server

Dmitry Tokmakov,
Digital Spin
On Jun 11, 2012, at 2:10 PM, Haluk Karamete wrote:

> 3 questions:
> 
> Would you have crafted a different solution for a high traffic, a very
> high traffic site?
> 
> What would be the greatest harm of tapping into the post_date_gmt of
> the wp_posts? I incline towards the GMT field ( as opposed to using
> custom fields ) strictly for performance reasons. Again, if the site
> gets 1 query a day, who cares? But what if the site gets 100000 page
> views a day.
> 
> Where  do GMT stuff gets used really? Can I just say heck with it and
> use that instead?
> 
> On Mon, Jun 11, 2012 at 7:13 AM, Mike Little <wordpress at zed1.com> wrote:
>> On Mon, Jun 11, 2012 at 2:29 PM, Tache Madalin <niladam at gmail.com> wrote:
>> 
>>> How about using custom fields? They kinda rock if you get to know them...
>>> 
>>> 
>> That is what is meant be metadata field
>> 
>> 
>> Mike
>> --
>> Mike Little
>> http://zed1.com/
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers


From wordpress at zed1.com  Mon Jun 11 20:27:23 2012
From: wordpress at zed1.com (Mike Little)
Date: Mon, 11 Jun 2012 21:27:23 +0100
Subject: [wp-hackers] Handling the featured tags
In-Reply-To: <CAHERW=2_6hg-XnLvSg-SQzKNJKcsg56HyomjTZ7oPZ0nPr8BEA@mail.gmail.com>
References: <CAHERW=1pfAJYBZQ0m4mGym+q=YQ6Dxc7Mva1mDmHoXiCPE52Fg@mail.gmail.com>
	<CAMb54M2dAf3Mv+X11dLcjcyo6zwFJRgC7ET7J3HzAq5anCbCcw@mail.gmail.com>
	<CAHERW=2hAunJmp_wWMBPG5t48=nTvbLK_XoZB8+wjvEax0e9iA@mail.gmail.com>
	<CAMb54M1hLVeSEs0yUGhiOpA0J-D=HXDb4imqP1844G2=wgWTOg@mail.gmail.com>
	<826830DF-689E-43C2-A537-06CD70664086@gmail.com>
	<CAMb54M3cZ7aBhZ_ag--GjJ31Ta7FAV3eo3DoKig4tqwBBCiiPA@mail.gmail.com>
	<CAHERW=2_6hg-XnLvSg-SQzKNJKcsg56HyomjTZ7oPZ0nPr8BEA@mail.gmail.com>
Message-ID: <CAMb54M1uxAM0sJFfjLa9WX7Cjm7u=3YFTYh_dbFFn4+7T0ybjg@mail.gmail.com>

On Mon, Jun 11, 2012 at 7:10 PM, Haluk Karamete <halukkaramete at gmail.com>wrote:

> 3 questions:
>
> Would you have crafted a different solution for a high traffic, a very
> high traffic site?
>
>
No I wouldn't.


> What would be the greatest harm of tapping into the post_date_gmt of
> the wp_posts? I incline towards the GMT field ( as opposed to using
> custom fields ) strictly for performance reasons. Again, if the site
> gets 1 query a day, who cares? But what if the site gets 100000 page
> views a day.
>
> Where  do GMT stuff gets used really? Can I just say heck with it and
> use that instead?
>
>
The GMT date is the one that has to be used for scheduling posts, for RSS
feeds and more. Without GMT dates scheduling and the like become much
trickier.

Of course, you can do what you want with your own site.

But remember that sites don't get much more higher traffic than
WordPress.com and I don't expect they need to hack the code to do odd
things with it.


Mike
-- 
Mike Little
http://zed1.com/

From halukkaramete at gmail.com  Mon Jun 11 21:59:00 2012
From: halukkaramete at gmail.com (Haluk Karamete)
Date: Mon, 11 Jun 2012 14:59:00 -0700
Subject: [wp-hackers] Handling the featured tags
In-Reply-To: <CAMb54M1uxAM0sJFfjLa9WX7Cjm7u=3YFTYh_dbFFn4+7T0ybjg@mail.gmail.com>
References: <CAHERW=1pfAJYBZQ0m4mGym+q=YQ6Dxc7Mva1mDmHoXiCPE52Fg@mail.gmail.com>
	<CAMb54M2dAf3Mv+X11dLcjcyo6zwFJRgC7ET7J3HzAq5anCbCcw@mail.gmail.com>
	<CAHERW=2hAunJmp_wWMBPG5t48=nTvbLK_XoZB8+wjvEax0e9iA@mail.gmail.com>
	<CAMb54M1hLVeSEs0yUGhiOpA0J-D=HXDb4imqP1844G2=wgWTOg@mail.gmail.com>
	<826830DF-689E-43C2-A537-06CD70664086@gmail.com>
	<CAMb54M3cZ7aBhZ_ag--GjJ31Ta7FAV3eo3DoKig4tqwBBCiiPA@mail.gmail.com>
	<CAHERW=2_6hg-XnLvSg-SQzKNJKcsg56HyomjTZ7oPZ0nPr8BEA@mail.gmail.com>
	<CAMb54M1uxAM0sJFfjLa9WX7Cjm7u=3YFTYh_dbFFn4+7T0ybjg@mail.gmail.com>
Message-ID: <CAHERW=2gdSj-Fkg6SYo=7J1-dLbC5Mj_k=zQdmOr=t+-ft4YKQ@mail.gmail.com>

>>But remember that sites don't get much more higher traffic than
WordPress.com and I don't expect they need to hack the code to do odd
things with it.

Though wordpress.com got tons of servers to load balance the traffic,
I do get your point.
It's well said.


On Mon, Jun 11, 2012 at 1:27 PM, Mike Little <wordpress at zed1.com> wrote:
> On Mon, Jun 11, 2012 at 7:10 PM, Haluk Karamete <halukkaramete at gmail.com>wrote:
>
>> 3 questions:
>>
>> Would you have crafted a different solution for a high traffic, a very
>> high traffic site?
>>
>>
> No I wouldn't.
>
>
>> What would be the greatest harm of tapping into the post_date_gmt of
>> the wp_posts? I incline towards the GMT field ( as opposed to using
>> custom fields ) strictly for performance reasons. Again, if the site
>> gets 1 query a day, who cares? But what if the site gets 100000 page
>> views a day.
>>
>> Where ?do GMT stuff gets used really? Can I just say heck with it and
>> use that instead?
>>
>>
> The GMT date is the one that has to be used for scheduling posts, for RSS
> feeds and more. Without GMT dates scheduling and the like become much
> trickier.
>
> Of course, you can do what you want with your own site.
>
> But remember that sites don't get much more higher traffic than
> WordPress.com and I don't expect they need to hack the code to do odd
> things with it.
>
>
> Mike
> --
> Mike Little
> http://zed1.com/
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

From scottg.wp-hackers at mhg2.com  Tue Jun 12 15:10:19 2012
From: scottg.wp-hackers at mhg2.com (Scott R. Godin)
Date: Tue, 12 Jun 2012 11:10:19 -0400
Subject: [wp-hackers] suggestions for wordpress theme tags
In-Reply-To: <CAPdLKqcZyVYXMzDZCTEPhfSBMs3-cWJTNWMtJjiaM_GKpPN2Zg@mail.gmail.com>
References: <jqnt43$v8s$1@dough.gmane.org>
	<CAPdLKqcZyVYXMzDZCTEPhfSBMs3-cWJTNWMtJjiaM_GKpPN2Zg@mail.gmail.com>
Message-ID: <jr7m4r$47m$1@dough.gmane.org>

It doesn't seem to be linked to Gmane/Gwene like this list is. :( I
prefer to follow mailing lists via a news/newsreader format -- easier to
subscribe/unsubscribe, follow threads, etc.

On 06/06/2012 11:35 AM, Chip Bennett wrote:
> A far better audience for these suggestions would be the theme-reviewers
> mail-list. We've actually already been discussing, off and on, the merits
> of a "mobile" tag. Please come contribute!
> 
> Chip
> 
> On Wed, Jun 6, 2012 at 10:31 AM, Scott R. Godin
> <scottg.wp-hackers at mhg2.com>wrote:
> 
>> I would like to suggest the following additional tags for wordpress
>> theme searching:
>>
>> one for HTML5-based themes (as opposed to those that are still using
>> XHTML Transitional/Strict)
>>
>> and one for mobile-responsive themes that are designed to work with
>> specifics for mobile-devices.
>>
>>
>> --
>> (please respond to the list as opposed to my email box directly,
>> unless you are supplying private information you don't want public
>> on the list)
>>
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>


-- 
(please respond to the list as opposed to my email box directly,
unless you are supplying private information you don't want public
on the list)


From jer at simianuprising.com  Tue Jun 12 16:09:55 2012
From: jer at simianuprising.com (Jeremy Clarke)
Date: Tue, 12 Jun 2012 12:09:55 -0400
Subject: [wp-hackers] MU - Global post_type / taxonomy
In-Reply-To: <CA+sFoLobkzxJxSY8R8hrxwz+KYH4VQ8x-K1gka38WnbKeO-1Yw@mail.gmail.com>
References: <CA+sFoLpDbVBfY86VGsCnT48S7vBvHn=fmef9wmjpBR_jb166Ag@mail.gmail.com>
	<E748557C-41AF-4335-8744-882C434A3061@ipstenu.org>
	<CA+sFoLobkzxJxSY8R8hrxwz+KYH4VQ8x-K1gka38WnbKeO-1Yw@mail.gmail.com>
Message-ID: <CAAHgzDO0i4GaX9Su+Hmn5snk7K-dCcY9wsg_MRqEh=fmEMVMkQ@mail.gmail.com>

On Wed, Jun 6, 2012 at 7:50 PM, Lox <lox.dev at knc.nc> wrote:

>
> I need the data to be global like the users.
> I think the only way would be to switch_to_blog(1) but the other blogs
> won't have the UI ...
>
>
You should probably focus on keeping the data in the usermeta system if you
don't want to build something from scratch. It might feel like a bit of a
hack but would make it a lot easier to use the data across all sites.

Maybe a mix of usermeta for each user, and global storage of any other
information you need in get_site_option() so that it's available. You could
also have some kind of UI for editing the data on just one of the sites
that saves to the global options (potentially based on a CPT).

Also you should definitely consider BuddyPress as it might solve your
problems though like Mika said, it will also add lots of problems for you ;)

-- 
Jeremy Clarke ? jeremyclarke.org
Code and Design ? globalvoicesonline.org

From contato at jimmymacedo.com  Wed Jun 13 20:20:13 2012
From: contato at jimmymacedo.com (JimmyMacedo)
Date: Wed, 13 Jun 2012 17:20:13 -0300
Subject: [wp-hackers] Problems with dynamic image processing.
Message-ID: <CAMSdA6s3HruH7jfUXtEQ9b4TJYPsO91x8CBCWhBshsm=2FaaEA@mail.gmail.com>

Hello, hakers.
I'm trying to use a class for manipulating images inside of WordPress. To
process measurements and things like watermark in real time.
But whenever I make a request, the WP returns a "404 not found" and
(strangest of all) loads the image immediately. And this is repeated with
each new refrash. (ignoring any cache ...).
Recalling that the class works perfectly fine outside of WP.
Anyone know how to help me?
Here are a few pictures of the incident and the code I'm using is in
pastebin.

http://pastebin.com/1fRBF237

Jimmy Lopes de Macedo
contato at jimmymacedo.com
www.jimmymacedo.com

<http://www.facebook.com/jimmymacedo> <http://twitter.com/jimmymacedo>
<http://br.linkedin.com/pub/jimmy-macedo/27/7b4/242>
<http://lattes.cnpq.br/4509397096603463>

From otto at ottodestruct.com  Wed Jun 13 20:36:29 2012
From: otto at ottodestruct.com (Otto)
Date: Wed, 13 Jun 2012 15:36:29 -0500
Subject: [wp-hackers] Problems with dynamic image processing.
In-Reply-To: <CAMSdA6s3HruH7jfUXtEQ9b4TJYPsO91x8CBCWhBshsm=2FaaEA@mail.gmail.com>
References: <CAMSdA6s3HruH7jfUXtEQ9b4TJYPsO91x8CBCWhBshsm=2FaaEA@mail.gmail.com>
Message-ID: <CAD-FghxttK=iBR4jhQ28EMHCPQKrmKjimPM1HVgW4WNGWn7a-A@mail.gmail.com>

The 404 status header is set by the main query, before it gets to
template_redirect. To override that, you'll need to call
status_header(200) for the case where it's not actually supposed to be
a 404 anymore for your own code returning something different.

Basically, your rewrite rule was parsed into query_vars properly, and
then the main query ran, didn't find any matching posts, set the 404
status and the is_404 flag, and then came back. When the template
loader runs, you're hooking into template_redirect, and saying "no,
this isn't a 404, it's my special case". Then you probably return
content type and the image and such, but the 404 was already set in
the header. status_header(200) will let you override that.

-Otto



On Wed, Jun 13, 2012 at 3:20 PM, JimmyMacedo <contato at jimmymacedo.com> wrote:
> Hello, hakers.
> I'm trying to use a class for manipulating images inside of WordPress. To
> process measurements and things like watermark in real time.
> But whenever I make a request, the WP returns a "404 not found" and
> (strangest of all) loads the image immediately. And this is repeated with
> each new refrash. (ignoring any cache ...).
> Recalling that the class works perfectly fine outside of WP.
> Anyone know how to help me?
> Here are a few pictures of the incident and the code I'm using is in
> pastebin.
>
> http://pastebin.com/1fRBF237
>
> Jimmy Lopes de Macedo
> contato at jimmymacedo.com
> www.jimmymacedo.com
>
> <http://www.facebook.com/jimmymacedo> <http://twitter.com/jimmymacedo>
> <http://br.linkedin.com/pub/jimmy-macedo/27/7b4/242>
> <http://lattes.cnpq.br/4509397096603463>
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From contato at jimmymacedo.com  Wed Jun 13 23:14:56 2012
From: contato at jimmymacedo.com (JimmyMacedo)
Date: Wed, 13 Jun 2012 20:14:56 -0300
Subject: [wp-hackers] Problems with dynamic image processing.
In-Reply-To: <CAD-FghxttK=iBR4jhQ28EMHCPQKrmKjimPM1HVgW4WNGWn7a-A@mail.gmail.com>
References: <CAMSdA6s3HruH7jfUXtEQ9b4TJYPsO91x8CBCWhBshsm=2FaaEA@mail.gmail.com>
	<CAD-FghxttK=iBR4jhQ28EMHCPQKrmKjimPM1HVgW4WNGWn7a-A@mail.gmail.com>
Message-ID: <CAMSdA6vpGuVcHSLZgngEryiexo9URw=RDJpUTMdjiCPC1K1fJA@mail.gmail.com>

Which hook should I call the status_header (200)?


Jimmy Lopes de Macedo
contato at jimmymacedo.com
www.jimmymacedo.com

<http://www.facebook.com/jimmymacedo> <http://twitter.com/jimmymacedo>
<http://br.linkedin.com/pub/jimmy-macedo/27/7b4/242>
<http://lattes.cnpq.br/4509397096603463>



2012/6/13 Otto <otto at ottodestruct.com>

> The 404 status header is set by the main query, before it gets to
> template_redirect. To override that, you'll need to call
> status_header(200) for the case where it's not actually supposed to be
> a 404 anymore for your own code returning something different.
>
> Basically, your rewrite rule was parsed into query_vars properly, and
> then the main query ran, didn't find any matching posts, set the 404
> status and the is_404 flag, and then came back. When the template
> loader runs, you're hooking into template_redirect, and saying "no,
> this isn't a 404, it's my special case". Then you probably return
> content type and the image and such, but the 404 was already set in
> the header. status_header(200) will let you override that.
>
> -Otto
>
>
>
> On Wed, Jun 13, 2012 at 3:20 PM, JimmyMacedo <contato at jimmymacedo.com>
> wrote:
> > Hello, hakers.
> > I'm trying to use a class for manipulating images inside of WordPress. To
> > process measurements and things like watermark in real time.
> > But whenever I make a request, the WP returns a "404 not found" and
> > (strangest of all) loads the image immediately. And this is repeated with
> > each new refrash. (ignoring any cache ...).
> > Recalling that the class works perfectly fine outside of WP.
> > Anyone know how to help me?
> > Here are a few pictures of the incident and the code I'm using is in
> > pastebin.
> >
> > http://pastebin.com/1fRBF237
> >
> > Jimmy Lopes de Macedo
> > contato at jimmymacedo.com
> > www.jimmymacedo.com
> >
> > <http://www.facebook.com/jimmymacedo> <http://twitter.com/jimmymacedo>
> > <http://br.linkedin.com/pub/jimmy-macedo/27/7b4/242>
> > <http://lattes.cnpq.br/4509397096603463>
> >
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers at lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> >
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From otto at ottodestruct.com  Wed Jun 13 23:24:38 2012
From: otto at ottodestruct.com (Otto)
Date: Wed, 13 Jun 2012 18:24:38 -0500
Subject: [wp-hackers] Problems with dynamic image processing.
In-Reply-To: <CAMSdA6vpGuVcHSLZgngEryiexo9URw=RDJpUTMdjiCPC1K1fJA@mail.gmail.com>
References: <CAMSdA6s3HruH7jfUXtEQ9b4TJYPsO91x8CBCWhBshsm=2FaaEA@mail.gmail.com>
	<CAD-FghxttK=iBR4jhQ28EMHCPQKrmKjimPM1HVgW4WNGWn7a-A@mail.gmail.com>
	<CAMSdA6vpGuVcHSLZgngEryiexo9URw=RDJpUTMdjiCPC1K1fJA@mail.gmail.com>
Message-ID: <CAD-FghwBoXh3QV=MrmotYEGHfqvW3tO5X+u1ZPuacPA_p8a_Wg@mail.gmail.com>

No hook. You need to call it before you produce any output in your code.

Wherever you're outputting the image file, you need to adjust the
status before you do that.

-Otto


On Wed, Jun 13, 2012 at 6:14 PM, JimmyMacedo <contato at jimmymacedo.com> wrote:
> Which hook should I call the status_header (200)?
>
>
> Jimmy Lopes de Macedo
> contato at jimmymacedo.com
> www.jimmymacedo.com
>
> <http://www.facebook.com/jimmymacedo> <http://twitter.com/jimmymacedo>
> <http://br.linkedin.com/pub/jimmy-macedo/27/7b4/242>
> <http://lattes.cnpq.br/4509397096603463>
>
>
>
> 2012/6/13 Otto <otto at ottodestruct.com>
>
>> The 404 status header is set by the main query, before it gets to
>> template_redirect. To override that, you'll need to call
>> status_header(200) for the case where it's not actually supposed to be
>> a 404 anymore for your own code returning something different.
>>
>> Basically, your rewrite rule was parsed into query_vars properly, and
>> then the main query ran, didn't find any matching posts, set the 404
>> status and the is_404 flag, and then came back. When the template
>> loader runs, you're hooking into template_redirect, and saying "no,
>> this isn't a 404, it's my special case". Then you probably return
>> content type and the image and such, but the 404 was already set in
>> the header. status_header(200) will let you override that.
>>
>> -Otto
>>
>>
>>
>> On Wed, Jun 13, 2012 at 3:20 PM, JimmyMacedo <contato at jimmymacedo.com>
>> wrote:
>> > Hello, hakers.
>> > I'm trying to use a class for manipulating images inside of WordPress. To
>> > process measurements and things like watermark in real time.
>> > But whenever I make a request, the WP returns a "404 not found" and
>> > (strangest of all) loads the image immediately. And this is repeated with
>> > each new refrash. (ignoring any cache ...).
>> > Recalling that the class works perfectly fine outside of WP.
>> > Anyone know how to help me?
>> > Here are a few pictures of the incident and the code I'm using is in
>> > pastebin.
>> >
>> > http://pastebin.com/1fRBF237
>> >
>> > Jimmy Lopes de Macedo
>> > contato at jimmymacedo.com
>> > www.jimmymacedo.com
>> >
>> > <http://www.facebook.com/jimmymacedo> <http://twitter.com/jimmymacedo>
>> > <http://br.linkedin.com/pub/jimmy-macedo/27/7b4/242>
>> > <http://lattes.cnpq.br/4509397096603463>
>> >
>> > _______________________________________________
>> > wp-hackers mailing list
>> > wp-hackers at lists.automattic.com
>> > http://lists.automattic.com/mailman/listinfo/wp-hackers
>> >
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

From contato at jimmymacedo.com  Wed Jun 13 23:33:56 2012
From: contato at jimmymacedo.com (JimmyMacedo)
Date: Wed, 13 Jun 2012 20:33:56 -0300
Subject: [wp-hackers] Problems with dynamic image processing.
In-Reply-To: <CAMSdA6vpGuVcHSLZgngEryiexo9URw=RDJpUTMdjiCPC1K1fJA@mail.gmail.com>
References: <CAMSdA6s3HruH7jfUXtEQ9b4TJYPsO91x8CBCWhBshsm=2FaaEA@mail.gmail.com>
	<CAD-FghxttK=iBR4jhQ28EMHCPQKrmKjimPM1HVgW4WNGWn7a-A@mail.gmail.com>
	<CAMSdA6vpGuVcHSLZgngEryiexo9URw=RDJpUTMdjiCPC1K1fJA@mail.gmail.com>
Message-ID: <CAMSdA6u4=xvC=zbk-3De_XZC2R1yQgGJpdsX6n=7BzwZQMcUeg@mail.gmail.com>

I put the status_header (200) immediately after the "if (get_query_var
('image')) {" and it looks like it worked!
Tanks, Otto!

Jimmy Lopes de Macedo
contato at jimmymacedo.com
www.jimmymacedo.com

<http://www.facebook.com/jimmymacedo> <http://twitter.com/jimmymacedo>
<http://br.linkedin.com/pub/jimmy-macedo/27/7b4/242>
<http://lattes.cnpq.br/4509397096603463>



2012/6/13 JimmyMacedo <contato at jimmymacedo.com>

> Which hook should I call the status_header (200)?
>
>
>
> Jimmy Lopes de Macedo
> contato at jimmymacedo.com
> www.jimmymacedo.com
>
> <http://www.facebook.com/jimmymacedo> <http://twitter.com/jimmymacedo>
> <http://br.linkedin.com/pub/jimmy-macedo/27/7b4/242>
> <http://lattes.cnpq.br/4509397096603463>
>
>
>
> 2012/6/13 Otto <otto at ottodestruct.com>
>
>> The 404 status header is set by the main query, before it gets to
>> template_redirect. To override that, you'll need to call
>> status_header(200) for the case where it's not actually supposed to be
>> a 404 anymore for your own code returning something different.
>>
>> Basically, your rewrite rule was parsed into query_vars properly, and
>> then the main query ran, didn't find any matching posts, set the 404
>> status and the is_404 flag, and then came back. When the template
>> loader runs, you're hooking into template_redirect, and saying "no,
>> this isn't a 404, it's my special case". Then you probably return
>> content type and the image and such, but the 404 was already set in
>> the header. status_header(200) will let you override that.
>>
>> -Otto
>>
>>
>>
>> On Wed, Jun 13, 2012 at 3:20 PM, JimmyMacedo <contato at jimmymacedo.com>
>> wrote:
>> > Hello, hakers.
>> > I'm trying to use a class for manipulating images inside of WordPress.
>> To
>> > process measurements and things like watermark in real time.
>> > But whenever I make a request, the WP returns a "404 not found" and
>> > (strangest of all) loads the image immediately. And this is repeated
>> with
>> > each new refrash. (ignoring any cache ...).
>> > Recalling that the class works perfectly fine outside of WP.
>> > Anyone know how to help me?
>> > Here are a few pictures of the incident and the code I'm using is in
>> > pastebin.
>> >
>> > http://pastebin.com/1fRBF237
>> >
>> > Jimmy Lopes de Macedo
>> > contato at jimmymacedo.com
>> > www.jimmymacedo.com
>> >
>> > <http://www.facebook.com/jimmymacedo> <http://twitter.com/jimmymacedo>
>> > <http://br.linkedin.com/pub/jimmy-macedo/27/7b4/242>
>> > <http://lattes.cnpq.br/4509397096603463>
>> >
>> > _______________________________________________
>> > wp-hackers mailing list
>> > wp-hackers at lists.automattic.com
>> > http://lists.automattic.com/mailman/listinfo/wp-hackers
>> >
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
>
>

From jer at simianuprising.com  Thu Jun 14 13:56:50 2012
From: jer at simianuprising.com (Jeremy Clarke)
Date: Thu, 14 Jun 2012 09:56:50 -0400
Subject: [wp-hackers] Changing the default (alphabetical) ordering of
 category lists on the Admin Dashboard
In-Reply-To: <CAHERW=33g2O1AGUizVZnEFNPU3Mxn6A6oj=24gJBkivNc4yk1Q@mail.gmail.com>
References: <CAHERW=33g2O1AGUizVZnEFNPU3Mxn6A6oj=24gJBkivNc4yk1Q@mail.gmail.com>
Message-ID: <CAAHgzDPfCSODKRxetJSvSJAWYPhtVG7k8Tb7a2LWqtHhJyRQmw@mail.gmail.com>

On Fri, Jun 1, 2012 at 8:50 PM, Haluk Karamete <halukkaramete at gmail.com>wrote:

> By default, WordPress displays the order of cats alphabetically. What
> do I do to put them in the order I want?
>
>
Haluk you asked this exact same question in April. I wrote you a detailed
response on April 16. Here's an archive on the web:

http://old.nabble.com/Re%3A-ordering-the-cats-in-a-particular-order-p33698595.html


-- 
Jeremy Clarke ? jeremyclarke.org
Code and Design ? globalvoicesonline.org

From e at leau.net  Thu Jun 14 18:24:14 2012
From: e at leau.net (Edward de Leau)
Date: Thu, 14 Jun 2012 20:24:14 +0200
Subject: [wp-hackers] Plugin usage info
In-Reply-To: <p06240801c99549a84b24@192.168.1.2>
References: <AANLkTinVcdwCoNZtXNbbmLdYxYQbWPiV2VQMmdMboJZu@mail.gmail.com>
	<p06240806c9942b452c4f@192.168.1.2>
	<AANLkTimdSYuykFXkNM44FJFrCKhH5nF74A=j3VXq7JUe@mail.gmail.com>
	<p06240801c99549a84b24@192.168.1.2>
Message-ID: <CAEVdKciL-gMOxAw=wJJvWYe6mGXwsKR36VYBGHFcYLKKzDvJTQ@mail.gmail.com>

Sorry to break in this older thread...

But in the request string it passes in the query $user_count['total_users']
on line 73
While on line 55 it requests for a MULTISITE the INTEGER $user_count

Where does thecasting from integer to an array takes place?

Ed



On Thu, Mar 3, 2011 at 2:53 PM, Michael Clark <
dc153464a11bcf5aeb18180db28017fb.wp-hackers at planetmike.com> wrote:

> At 1:57 PM -0500 3/2/11, Andrew Nacin wrote:
>
>> Otto answered:
>> On Mon, Feb 28, 2011 at 2:13 PM, Otto <otto at ottodestruct.com> wrote:
>>
>>>  No, there is no way to get actual numbers. Only statistics are kept, not
>>>
>> the raw data.
>>
>>>
>>>
>> Because of the inconsistencies in reporting and aggregation, it's not
>> reliable to keep (or especially display) anything beyond percentages which
>> are normalized over a time period.
>>
>
> Since the stats dashboard page is showing percentages, couldn't the total
> denominator be shown? There must be some value stored somewhere as a total.
>
>
> --
>
> Michael Clark
> http://www.PlanetMike.com
>
> "Injustice anywhere is a threat to justice everywhere."
>  - Martin Luther King Jr.
> ______________________________**_________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.**com <wp-hackers at lists.automattic.com>
> http://lists.automattic.com/**mailman/listinfo/wp-hackers<http://lists.automattic.com/mailman/listinfo/wp-hackers>
>

From yojoaquin at gmail.com  Thu Jun 14 19:22:28 2012
From: yojoaquin at gmail.com (Joaquin Rodriguez Montero)
Date: Thu, 14 Jun 2012 16:22:28 -0300
Subject: [wp-hackers] Sessions and parse query
Message-ID: <CAAVCQdEDnavGV0gMiG3qTniS=UsOSaNpPs0xfVi3eDfE1Rm-vg@mail.gmail.com>

Hi guys! I was wondering if you could give me a hint on how would you
approach the following case:
I have two regions (global, latam) and cases and clients that have content
for each region. I also have disciplines (thinking custom post type and p2p
/ scribu) for each case. Finally I have languages (qtranslate plugin)! This
couldn't get any bette :)
I was thinking of having each region as a $_session and get the page
"cases" (looping through the post_type cases). This loop should set the
taxonomy "region" based on the session. Would you agree? How would you set
this query to get the $_session and parse the loop automagically?

I'm burnt out. Hopefully I was clear enough and you could give me a hand on
this.

thanks!

J

From bpetty at bluehost.com  Thu Jun 14 20:22:41 2012
From: bpetty at bluehost.com (Bryan Petty)
Date: Thu, 14 Jun 2012 14:22:41 -0600
Subject: [wp-hackers] Introduction: WordPress Developer from Bluehost
Message-ID: <4FDA4811.8050609@bluehost.com>

Bluehost has been very generous, and made some room in the budget to 
hire on a couple full-time developers who will be dedicated to working 
on WordPress core. I am one of those developers, so I wanted to 
introduce myself to the list, and give everyone a little background on 
myself (the other developer hasn't been hired yet, but will be very soon).

My WP.org username is "bpetty", and I've been programming professionally 
for right around 10 years. I've been using PHP since version 3, but the 
first 7 of those 10 years was also spent writing C++ desktop application 
for both Windows and OSX (Phoenix Project Manager if you're curious).

I'm also one of the official developers on the open source wxWidgets 
project where besides working on the actual C++ library itself, I also 
run the official website, wiki, online documentation, and the forums. As 
one of the wxWidgets developers, I have mentored students in the Google 
Summer of Code program, and I have actually met a few of you in person 
at the Mentor Summits from the last 3 years (to be honest though, I 
don't recall any names).

If you didn't catch me in the #wordpress-dev IRC channel yesterday when 
I gave this introduction there, I will be lurking in there from now on 
under the nick "tierra".

My existing experience with WordPress is simply as a developer that has 
launched a few sites using WordPress. I have built new themes from 
scratch for a couple of those sites, and I have also already made 
several fixes to 4 or 5 existing extensions. I am very familiar with the 
custom post types, fields, and taxonomies having built sites with 
WordPress as both a blog and as a full CMS. However, I have not dug 
myself in much deeper into core WordPress code until now.

My initial plans here are simply to submit bug patches and perform 
testing as needed on the backlog of Trac tickets on core as well as 
helping with unit tests once I'm a little more familiar with the system. 
We'll see where my strengths land after the first few months here, and I 
can start digging into larger new features and changes later on down the 
road. I do know that some of the most annoying parts of WordPress that 
I'd like to see improved lie mostly in the mess that is the public 
template functions and tags (I am strong with developer APIs and 
backwards compatibility), so that's one likely area I will jump into, 
but only after high priority stuff is taken care of first.

Regards,

Bryan Petty
Wordpress Developer
bpetty at bluehost.com

P.S. If WordPress is considering a migration from SVN to git/GitHub, let 
it be known that I've been using git for over two years now, so no 
training is needed here. In fact, I plan on using the GitHub WP mirror 
for my patches until it's time to look at possible SVN commit access way 
down the road here.

From wp at andrewnacin.com  Fri Jun 15 01:51:58 2012
From: wp at andrewnacin.com (Andrew Nacin)
Date: Thu, 14 Jun 2012 21:51:58 -0400
Subject: [wp-hackers] Introduction: WordPress Developer from Bluehost
In-Reply-To: <4FDA4811.8050609@bluehost.com>
References: <4FDA4811.8050609@bluehost.com>
Message-ID: <CAP29PvgGj=8ayh4x=OzV_qBLfwZUxS8HiiUc5zqu3VdBc01VzA@mail.gmail.com>

On Thu, Jun 14, 2012 at 4:22 PM, Bryan Petty <bpetty at bluehost.com> wrote:

> My initial plans here are simply to submit bug patches and perform testing
> as needed on the backlog of Trac tickets on core as well as helping with
> unit tests once I'm a little more familiar with the system. We'll see where
> my strengths land after the first few months here, and I can start digging
> into larger new features and changes later on down the road. I do know that
> some of the most annoying parts of WordPress that I'd like to see improved
> lie mostly in the mess that is the public template functions and tags (I am
> strong with developer APIs and backwards compatibility), so that's one
> likely area I will jump into, but only after high priority stuff is taken
> care of first.


Welcome! There's always more to do than we have contributors, and 3.5 will
be getting underway probably next week. Getting yourself in the mindset of
always thinking about backwards compatibility is definitely one of the most
important (and hardest) things to do, and it makes a reviewers' job that
much easier. Often, Trac history and svn blame are your friends. :-)


> P.S. If WordPress is considering a migration from SVN to git/GitHub, let
> it be known that I've been using git for over two years now, so no training
> is needed here.


We're not, but a number of people use Git to create patches, including Mark
Jaquith
http://markjaquith.wordpress.com/2011/05/26/developing-on-wordpress-using-git/and
scribu
http://scribu.net/wordpress/svn-patches-from-git.html.

From wp at andrewnacin.com  Fri Jun 15 01:53:57 2012
From: wp at andrewnacin.com (Andrew Nacin)
Date: Thu, 14 Jun 2012 21:53:57 -0400
Subject: [wp-hackers] Plugin usage info
In-Reply-To: <CAEVdKciL-gMOxAw=wJJvWYe6mGXwsKR36VYBGHFcYLKKzDvJTQ@mail.gmail.com>
References: <AANLkTinVcdwCoNZtXNbbmLdYxYQbWPiV2VQMmdMboJZu@mail.gmail.com>
	<p06240806c9942b452c4f@192.168.1.2>
	<AANLkTimdSYuykFXkNM44FJFrCKhH5nF74A=j3VXq7JUe@mail.gmail.com>
	<p06240801c99549a84b24@192.168.1.2>
	<CAEVdKciL-gMOxAw=wJJvWYe6mGXwsKR36VYBGHFcYLKKzDvJTQ@mail.gmail.com>
Message-ID: <CAP29PvgFu3fAD5FwUpUvqXrr_4=pyFr3h8M_z6tpyE22zr3GGA@mail.gmail.com>

On Thu, Jun 14, 2012 at 2:24 PM, Edward de Leau <e at leau.net> wrote:

> But in the request string it passes in the query $user_count['total_users']
> on line 73
> While on line 55 it requests for a MULTISITE the INTEGER $user_count


When the variables are set. In multisite, we use get_user_count() (a cached
array), while in single site, we call count_users() (a direct count).

From vid at zippykid.com  Fri Jun 15 04:31:51 2012
From: vid at zippykid.com (Vid Luther)
Date: Thu, 14 Jun 2012 23:31:51 -0500
Subject: [wp-hackers] a newbie question on wp_enqueue_scripts and an action
	or a filter
Message-ID: <CALNB6gZvDMOj3Cnk+uYQBd830ocokZk9Zp7UVf0+g-s7EM=w7A@mail.gmail.com>

Hi everyone,
 Here's what I'm trying to do.

I want to append the "version" parameter I send to wp_enqueue_scripts based
on some external factors. Using the example in the code for
wp_enqueue_scripts as inspiration, I whipped the following snippet up.

function theme_styles() {

   $cssfile = get_stylesheet_directory() . "/style.css";
   if (file_exists($cssfile)) {
       $version = filectime($cssfile);

       // Register the style like this for a theme:
       // (First the unique name for the style (custom-style) then the src,
       // then dependencies and ver no. and media type)
       wp_register_style('dd', get_template_directory_uri() .
'/css/style.css', array(), $version, 'all');

       // enqueing:
       wp_enqueue_style('dd');
   }
}

add_action('wp_print_styles', 'theme_styles');

The action runs without any errors, but the problem is that I end up with
two lines for style.css, one with the auto version I want, and the other
without.

The bad one:
<link rel="stylesheet" type="text/css" media="all" href="
http://wordpress.zippykid.dev/wp-content/themes/twentyeleven/style.css" />

The good one:
<link rel='stylesheet' id='dd-css'  href='
http://wordpress.zippykid.dev/wp-content/themes/twentyeleven/css/style.css?ver=1339616402'
type='text/css' media='all' />

My question is.. how do I add the version to the first call of style.css,
and then not load it again?

From chip at chipbennett.net  Fri Jun 15 04:42:37 2012
From: chip at chipbennett.net (Chip Bennett)
Date: Thu, 14 Jun 2012 23:42:37 -0500
Subject: [wp-hackers] a newbie question on wp_enqueue_scripts and an
 action or a filter
In-Reply-To: <CALNB6gZvDMOj3Cnk+uYQBd830ocokZk9Zp7UVf0+g-s7EM=w7A@mail.gmail.com>
References: <CALNB6gZvDMOj3Cnk+uYQBd830ocokZk9Zp7UVf0+g-s7EM=w7A@mail.gmail.com>
Message-ID: <CAPdLKqeRBfUVDiNqwBPNCs37gOSxTkH0CTrCcXQS3b-AaOACfA@mail.gmail.com>

Those are two different files being enqueued:

twentyeleven/style.css

and

twentyeleven/css/style.css

Are you not intending to enqueue both of these files? (Note: the first one
is probably hard-coded in header.php, rather than enqueued via callback.)

Chip

On Thu, Jun 14, 2012 at 11:31 PM, Vid Luther <vid at zippykid.com> wrote:

> Hi everyone,
>  Here's what I'm trying to do.
>
> I want to append the "version" parameter I send to wp_enqueue_scripts based
> on some external factors. Using the example in the code for
> wp_enqueue_scripts as inspiration, I whipped the following snippet up.
>
> function theme_styles() {
>
>   $cssfile = get_stylesheet_directory() . "/style.css";
>   if (file_exists($cssfile)) {
>       $version = filectime($cssfile);
>
>       // Register the style like this for a theme:
>       // (First the unique name for the style (custom-style) then the src,
>       // then dependencies and ver no. and media type)
>       wp_register_style('dd', get_template_directory_uri() .
> '/css/style.css', array(), $version, 'all');
>
>       // enqueing:
>       wp_enqueue_style('dd');
>   }
> }
>
> add_action('wp_print_styles', 'theme_styles');
>
> The action runs without any errors, but the problem is that I end up with
> two lines for style.css, one with the auto version I want, and the other
> without.
>
> The bad one:
> <link rel="stylesheet" type="text/css" media="all" href="
> http://wordpress.zippykid.dev/wp-content/themes/twentyeleven/style.css" />
>
> The good one:
> <link rel='stylesheet' id='dd-css'  href='
>
> http://wordpress.zippykid.dev/wp-content/themes/twentyeleven/css/style.css?ver=1339616402
> '
> type='text/css' media='all' />
>
> My question is.. how do I add the version to the first call of style.css,
> and then not load it again?
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From lists at rotorised.com  Fri Jun 15 05:34:20 2012
From: lists at rotorised.com (Ryan McCue)
Date: Fri, 15 Jun 2012 15:34:20 +1000
Subject: [wp-hackers] a newbie question on wp_enqueue_scripts and an
 action or a filter
In-Reply-To: <CALNB6gZvDMOj3Cnk+uYQBd830ocokZk9Zp7UVf0+g-s7EM=w7A@mail.gmail.com>
References: <CALNB6gZvDMOj3Cnk+uYQBd830ocokZk9Zp7UVf0+g-s7EM=w7A@mail.gmail.com>
Message-ID: <4FDAC95C.6050908@rotorised.com>

Vid Luther wrote:
> Hi everyone,
>   Here's what I'm trying to do.
>
> I want to append the "version" parameter I send to wp_enqueue_scripts based
> on some external factors. Using the example in the code for
> wp_enqueue_scripts as inspiration, I whipped the following snippet up.
>
> function theme_styles() {
>
>     $cssfile = get_stylesheet_directory() . "/style.css";
>     if (file_exists($cssfile)) {
>         $version = filectime($cssfile);
>
>         // Register the style like this for a theme:
>         // (First the unique name for the style (custom-style) then the src,
>         // then dependencies and ver no. and media type)
>         wp_register_style('dd', get_template_directory_uri() .
> '/css/style.css', array(), $version, 'all');
>
>         // enqueing:
>         wp_enqueue_style('dd');
>     }
> }

As Chip stated, you're checking two different files here, 
$stylesheet_dir/style.css and $template_dir/css/style.css (note there's 
two differences, you should stick to the stylesheet directory for all of 
those).

However, that's probably not your issue. The "bad one" that you don't 
want is hardcoded into header.php in the theme:

<link rel="stylesheet" type="text/css" media="all" href="<?php bloginfo( 
'stylesheet_url' ); ?>" />

The way I'd change it is to filter that instead.

add_filter('stylesheet_url', function () {
	return get_stylesheet_directory_uri() . '/css/style.css';
});


-- 
Ryan McCue
<http://ryanmccue.info/>

From zamoose at gmail.com  Fri Jun 15 11:41:39 2012
From: zamoose at gmail.com (Doug Stewart)
Date: Fri, 15 Jun 2012 07:41:39 -0400
Subject: [wp-hackers] SVN issues with 3.4 tag?
Message-ID: <CANFh3d5W-wmH2sQP=XUPUjhppcMvuS0SZTksVih2ti3Ca3Z3aQ@mail.gmail.com>

Howdy all,
Anyone else getting denied when trying to check out tags/3.4? I can
get branches/3.4, but tags/3.4 fails with:

svn: OPTIONS of 'http://svn.automattic.com/wordpress/tags/3.4': Could
not read status line: connection was closed by server
(http://svn.automattic.com)

Downforeveryoneorjustme?

-- 
-Doug

From kapil.chugh at hotmail.com  Fri Jun 15 12:05:50 2012
From: kapil.chugh at hotmail.com (Kapil Chugh)
Date: Fri, 15 Jun 2012 17:35:50 +0530
Subject: [wp-hackers] SVN issues with 3.4 tag?
Message-ID: <DUB0-P4-EAS20AA9A2B3C6C6EF011A2FAEFFB0@phx.gbl>

It is working for me.

Best Regards,

Kapil Chugh

-----Original Message-----

From: Doug Stewart
Sent: 15 Jun 2012 11:42:08 GMT
To: wp-hackers at lists.automattic.com
Subject: [wp-hackers] SVN issues with 3.4 tag?

Howdy all,
Anyone else getting denied when trying to check out tags/3.4? I can
get branches/3.4, but tags/3.4 fails with:

svn: OPTIONS of 'http://svn.automattic.com/wordpress/tags/3.4': Could
not read status line: connection was closed by server
(http://svn.automattic.com)

Downforeveryoneorjustme?

--
-Doug
_______________________________________________
wp-hackers mailing list
wp-hackers at lists.automattic.com
http://lists.automattic.com/mailman/listinfo/wp-hackers

From will.davis at gmail.com  Fri Jun 15 12:11:29 2012
From: will.davis at gmail.com (William P. Davis)
Date: Fri, 15 Jun 2012 12:11:29 +0000
Subject: [wp-hackers] SVN issues with 3.4 tag?
Message-ID: <1553823363-1339762291-cardhu_decombobulator_blackberry.rim.net-617596532-@b28.c4.bise6.blackberry>

Any reason you're using the automattic repo rather than the .org repo?

http://codex.wordpress.org/Installing/Updating_WordPress_with_Subversion
------Original Message------
From: Kapil Chugh
Sender: wp-hackers-bounces at lists.automattic.com
To: wp-hackers at lists.automattic.com
ReplyTo: wp-hackers at lists.automattic.com
Subject: Re: [wp-hackers] SVN issues with 3.4 tag?
Sent: Jun 15, 2012 8:05 AM

It is working for me.

Best Regards,

Kapil Chugh

-----Original Message-----

From: Doug Stewart
Sent: 15 Jun 2012 11:42:08 GMT
To: wp-hackers at lists.automattic.com
Subject: [wp-hackers] SVN issues with 3.4 tag?

Howdy all,
Anyone else getting denied when trying to check out tags/3.4? I can
get branches/3.4, but tags/3.4 fails with:

svn: OPTIONS of 'http://svn.automattic.com/wordpress/tags/3.4': Could
not read status line: connection was closed by server
(http://svn.automattic.com)

Downforeveryoneorjustme?

--
-Doug
_______________________________________________
wp-hackers mailing list
wp-hackers at lists.automattic.com
http://lists.automattic.com/mailman/listinfo/wp-hackers
_______________________________________________
wp-hackers mailing list
wp-hackers at lists.automattic.com
http://lists.automattic.com/mailman/listinfo/wp-hackers

Sent from my BlackBerry

From vid at zippykid.com  Fri Jun 15 12:48:38 2012
From: vid at zippykid.com (Vid Luther)
Date: Fri, 15 Jun 2012 07:48:38 -0500
Subject: [wp-hackers] a newbie question on wp_enqueue_scripts and an
 action or a filter
In-Reply-To: <4FDAC95C.6050908@rotorised.com>
References: <CALNB6gZvDMOj3Cnk+uYQBd830ocokZk9Zp7UVf0+g-s7EM=w7A@mail.gmail.com>
	<4FDAC95C.6050908@rotorised.com>
Message-ID: <CALNB6gaL+4=tQmi=o+ZrhvosOm_GU31y=_ZWpEBt995XfqmMoA@mail.gmail.com>

Ok, I'm clearly not understanding the chain of events properly. Based on
what Ryan and Chip said, and understanding that wp_enqueue_script isn't run
in wp_head().

I noticed that the docs here are sparse:
http://codex.wordpress.org/Plugin_API/Filter_Reference#Template_Filters

What I want the following code to do:

print out a string in the format of
$websitehost/wp-content/themes/$theme/style.css?v=timethefilewaslastmodified

What I'm seeing:

http://wordpress.zippykid.dev/wp-content/themes/twentyeleven/style.css?v=1339616402added
as the first line of the html that's returned.

When I change the last line of the function to return $cssuri; I get
nothing (even the call for bloginfo('stylesheet_uri') returns a blank
string as the value for href='' )




add_filter('stylesheet_uri', zk_css_versioner());

/**
 * the goal of this method is to append a query string to the css url for
the site.
 * the query string currently is determined by the last time the css file
was modified
 * the theory is that if the file is modified, change the value of v=,
which should
 * force the CDN to pull a new version from the origin server. This could
be a
 * a hit on performance, not sure yet. Let's get it working first.
 *
 * @return string
 */
function zk_css_versioner() {


    $cssfile = get_stylesheet_directory() . "/style.css";

    if (file_exists($cssfile)) {
        $cssuri = get_stylesheet_uri() . "?v=" . filectime($cssfile);
    }

    echo $cssuri;
}
On Fri, Jun 15, 2012 at 12:34 AM, Ryan McCue <lists at rotorised.com> wrote:
>
> However, that's probably not your issue. The "bad one" that you don't want
> is hardcoded into header.php in the theme:
>
> <link rel="stylesheet" type="text/css" media="all" href="<?php bloginfo(
> 'stylesheet_url' ); ?>" />
>
> The way I'd change it is to filter that instead.
>
> add_filter('stylesheet_url', function () {
>        return get_stylesheet_directory_uri() . '/css/style.css';
> });
>
>
> --
> Ryan McCue
> <http://ryanmccue.info/>
>
> ______________________________**_________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.**com <wp-hackers at lists.automattic.com>
> http://lists.automattic.com/**mailman/listinfo/wp-hackers<http://lists.automattic.com/mailman/listinfo/wp-hackers>
>



-- 
Vid Luther
CEO and Founder
ZippyKid
Managed Wordpress Hosting
http://zippykid.com/
210-789-0369

From zamoose at gmail.com  Fri Jun 15 12:55:37 2012
From: zamoose at gmail.com (Doug Stewart)
Date: Fri, 15 Jun 2012 08:55:37 -0400
Subject: [wp-hackers] SVN issues with 3.4 tag?
In-Reply-To: <1553823363-1339762291-cardhu_decombobulator_blackberry.rim.net-617596532-@b28.c4.bise6.blackberry>
References: <1553823363-1339762291-cardhu_decombobulator_blackberry.rim.net-617596532-@b28.c4.bise6.blackberry>
Message-ID: <CANFh3d50FwvEVnjBC8iGoe1F1h23nty23xHPusYijZ3mmVa6Ng@mail.gmail.com>

On Fri, Jun 15, 2012 at 8:11 AM, William P. Davis <will.davis at gmail.com> wrote:
> Any reason you're using the automattic repo rather than the .org repo?
>

Because I've been using that FQDN ever since there WAS an Automattic,
I guess. *grin*

The old habits, they die hard.

-- 
-Doug

From lists at rotorised.com  Fri Jun 15 12:56:46 2012
From: lists at rotorised.com (Ryan McCue)
Date: Fri, 15 Jun 2012 22:56:46 +1000
Subject: [wp-hackers] a newbie question on wp_enqueue_scripts and an
 action or a filter
In-Reply-To: <CALNB6gaL+4=tQmi=o+ZrhvosOm_GU31y=_ZWpEBt995XfqmMoA@mail.gmail.com>
References: <CALNB6gZvDMOj3Cnk+uYQBd830ocokZk9Zp7UVf0+g-s7EM=w7A@mail.gmail.com>
	<4FDAC95C.6050908@rotorised.com>
	<CALNB6gaL+4=tQmi=o+ZrhvosOm_GU31y=_ZWpEBt995XfqmMoA@mail.gmail.com>
Message-ID: <4FDB310E.9080704@rotorised.com>

Vid Luther wrote:
> Ok, I'm clearly not understanding the chain of events properly. Based on
> what Ryan and Chip said, and understanding that wp_enqueue_script isn't run
> in wp_head().

So, walking through it:

1. twentyeleven/header.php is loaded
(Some stuff happens here)
2. The start of the <link> tag is output
3. The stylesheet URI is output
4. The rest of the <link> tag is output
(More stuff here)
5. wp_head() is called
5a. Enqueued scripts are output

Note that these are separate. Enqueued styles are output during 
wp_head(), but the other output is hardcoded in the file and not 
related. The reason you're getting two <link> tags is because the first 
one in header.php is being output, then your enqueued one is being 
output later.

> add_filter('stylesheet_uri', zk_css_versioner());

The second parameter to add_filter() is a callback, which in PHP is 
represented as a string for normal functions. What this is doing is 
taking the result of that function, and attempting to hook that function 
in as a filter (and the 'http://.../style.css' function does not exist, 
causing problems).

Try using a string instead:

     add_filter('stylesheet_uri', 'zk_css_versioner');

>      echo $cssuri;

This should be returning the string instead of echoing it. The filter 
calls your callback and takes the result of that as the value that it 
will output.
-- 
Ryan McCue
<http://ryanmccue.info/>

From scottg.wp-hackers at mhg2.com  Fri Jun 15 14:11:42 2012
From: scottg.wp-hackers at mhg2.com (Scott R. Godin)
Date: Fri, 15 Jun 2012 10:11:42 -0400
Subject: [wp-hackers] suggestions for wordpress theme tags
In-Reply-To: <jr7m4r$47m$1@dough.gmane.org>
References: <jqnt43$v8s$1@dough.gmane.org>
	<CAPdLKqcZyVYXMzDZCTEPhfSBMs3-cWJTNWMtJjiaM_GKpPN2Zg@mail.gmail.com>
	<jr7m4r$47m$1@dough.gmane.org>
Message-ID: <jrffqt$mvn$1@dough.gmane.org>

Is there any impetus to get that list added to the rest of the group of
wordpress mailing lists on gmane ?

as I've mentioned I find it infinitely easier to follow a mailing list
in the format of nntp://news.gmane.org/gmane.comp.web.wordpress.devel/
(and am using thunderbird as my current reader) than to have to filter
them all through my inbox in email format. Our email servers are choked
enough as it is with all the spam.

On 06/12/2012 11:10 AM, Scott R. Godin wrote:
> It doesn't seem to be linked to Gmane/Gwene like this list is. :( I
> prefer to follow mailing lists via a news/newsreader format -- easier to
> subscribe/unsubscribe, follow threads, etc.
> 
> On 06/06/2012 11:35 AM, Chip Bennett wrote:
>> A far better audience for these suggestions would be the theme-reviewers
>> mail-list. We've actually already been discussing, off and on, the merits
>> of a "mobile" tag. Please come contribute!
>>
>> Chip
>>
>> On Wed, Jun 6, 2012 at 10:31 AM, Scott R. Godin
>> <scottg.wp-hackers at mhg2.com>wrote:
>>
>>> I would like to suggest the following additional tags for wordpress
>>> theme searching:
>>>
>>> one for HTML5-based themes (as opposed to those that are still using
>>> XHTML Transitional/Strict)
>>>
>>> and one for mobile-responsive themes that are designed to work with
>>> specifics for mobile-devices.



-- 
(please respond to the list as opposed to my email box directly,
unless you are supplying private information you don't want public
on the list)


From mail at scribu.net  Fri Jun 15 19:42:39 2012
From: mail at scribu.net (scribu)
Date: Fri, 15 Jun 2012 22:42:39 +0300
Subject: [wp-hackers] Sessions and parse query
In-Reply-To: <CAAVCQdEDnavGV0gMiG3qTniS=UsOSaNpPs0xfVi3eDfE1Rm-vg@mail.gmail.com>
References: <CAAVCQdEDnavGV0gMiG3qTniS=UsOSaNpPs0xfVi3eDfE1Rm-vg@mail.gmail.com>
Message-ID: <CABzSYNMd-tetZWQs3J19HhH9vRFOfHHGEf+jsmzo3TJP8adjGg@mail.gmail.com>

WordPress does not play well with sessions. Try using a plain cookie
instead.

-- 
http://scribu.net

From wordpress at dd32.id.au  Fri Jun 15 19:44:26 2012
From: wordpress at dd32.id.au (Dion Hulse (dd32))
Date: Fri, 15 Jun 2012 15:44:26 -0400
Subject: [wp-hackers] Sessions and parse query
In-Reply-To: <CABzSYNMd-tetZWQs3J19HhH9vRFOfHHGEf+jsmzo3TJP8adjGg@mail.gmail.com>
References: <CAAVCQdEDnavGV0gMiG3qTniS=UsOSaNpPs0xfVi3eDfE1Rm-vg@mail.gmail.com>
	<CABzSYNMd-tetZWQs3J19HhH9vRFOfHHGEf+jsmzo3TJP8adjGg@mail.gmail.com>
Message-ID: <CAL4EHfkN3DD82x3m0QhoNTWiq+v3zg-ABN4iv9GEYmw-bOT+hg@mail.gmail.com>

On 15 June 2012 15:42, scribu <mail at scribu.net> wrote:
> WordPress does not play well with sessions. Try using a plain cookie
> instead

huh? How do you come up with that conclusion?
Plenty of plugins use Sessions, and sessions are simply a Cookie with
a Server side data store.

From rafaehlers at gmail.com  Fri Jun 15 19:45:59 2012
From: rafaehlers at gmail.com (Rafael Ehlers)
Date: Fri, 15 Jun 2012 16:45:59 -0300
Subject: [wp-hackers] Sessions and parse query
In-Reply-To: <CAL4EHfkN3DD82x3m0QhoNTWiq+v3zg-ABN4iv9GEYmw-bOT+hg@mail.gmail.com>
References: <CAAVCQdEDnavGV0gMiG3qTniS=UsOSaNpPs0xfVi3eDfE1Rm-vg@mail.gmail.com>
	<CABzSYNMd-tetZWQs3J19HhH9vRFOfHHGEf+jsmzo3TJP8adjGg@mail.gmail.com>
	<CAL4EHfkN3DD82x3m0QhoNTWiq+v3zg-ABN4iv9GEYmw-bOT+hg@mail.gmail.com>
Message-ID: <CAF_6N0MyuJKk6YGu=yjLfGLjCakxy3nJyuVO00EsB6wq_UEq6g@mail.gmail.com>

Indeed, just use it inside init hook:

function init_session()
 {
   session_start();
 }

add_action('init', 'init_session', 1);

 more: http://www.kanasolution.com/2011/01/session-variable-in-wordpress/

On Fri, Jun 15, 2012 at 4:44 PM, Dion Hulse (dd32) <wordpress at dd32.id.au>wrote:

> On 15 June 2012 15:42, scribu <mail at scribu.net> wrote:
> > WordPress does not play well with sessions. Try using a plain cookie
> > instead
>
> huh? How do you come up with that conclusion?
> Plenty of plugins use Sessions, and sessions are simply a Cookie with
> a Server side data store.
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From yojoaquin at gmail.com  Fri Jun 15 19:53:54 2012
From: yojoaquin at gmail.com (Joaquin Rodriguez Montero)
Date: Fri, 15 Jun 2012 16:53:54 -0300
Subject: [wp-hackers] Sessions and parse query
Message-ID: <CAAVCQdE00QuFwOk-SE7LpmG-1gZ3CkNsBBxDeHVV4VgJVtorzw@mail.gmail.com>

Thanks guys! I'll try both approaches. Could you give me a hint on how
would you query that value (either cookie or session). I was thinking
something like pre_get_posts or parse_query to get those post types and
assigning the region as a taxonomy before the actual query on those pages
(clients and cases) is executed.

From mail at scribu.net  Fri Jun 15 23:12:19 2012
From: mail at scribu.net (scribu)
Date: Sat, 16 Jun 2012 02:12:19 +0300
Subject: [wp-hackers] Sessions and parse query
In-Reply-To: <CAL4EHfkN3DD82x3m0QhoNTWiq+v3zg-ABN4iv9GEYmw-bOT+hg@mail.gmail.com>
References: <CAAVCQdEDnavGV0gMiG3qTniS=UsOSaNpPs0xfVi3eDfE1Rm-vg@mail.gmail.com>
	<CABzSYNMd-tetZWQs3J19HhH9vRFOfHHGEf+jsmzo3TJP8adjGg@mail.gmail.com>
	<CAL4EHfkN3DD82x3m0QhoNTWiq+v3zg-ABN4iv9GEYmw-bOT+hg@mail.gmail.com>
Message-ID: <CABzSYNOqKf2CaXgF6vinfcqXKsbdY+JsoSLFURX=m9uOSJuQkQ@mail.gmail.com>

On Fri, Jun 15, 2012 at 10:44 PM, Dion Hulse (dd32) <wordpress at dd32.id.au>wrote:

> On 15 June 2012 15:42, scribu <mail at scribu.net> wrote:
> > WordPress does not play well with sessions. Try using a plain cookie
> > instead
>
> huh? How do you come up with that conclusion?
> Plenty of plugins use Sessions, and sessions are simply a Cookie with
> a Server side data store.
>

I guess I saw too many people having trouble with sessions, but it probably
was because of wp_unregister_globals(). Thanks Rafael Ehlers for the link
to the useful tutorial.

Joaquin, you can hook into the 'request' filter to feed the cookie/session
value into the $args array.

-- 
http://scribu.net

From vid at zippykid.com  Sat Jun 16 16:09:34 2012
From: vid at zippykid.com (Vid Luther)
Date: Sat, 16 Jun 2012 11:09:34 -0500
Subject: [wp-hackers] a newbie question on wp_enqueue_scripts and an
 action or a filter
In-Reply-To: <4FDB310E.9080704@rotorised.com>
References: <CALNB6gZvDMOj3Cnk+uYQBd830ocokZk9Zp7UVf0+g-s7EM=w7A@mail.gmail.com>
	<4FDAC95C.6050908@rotorised.com>
	<CALNB6gaL+4=tQmi=o+ZrhvosOm_GU31y=_ZWpEBt995XfqmMoA@mail.gmail.com>
	<4FDB310E.9080704@rotorised.com>
Message-ID: <CALNB6gYGO0ybBGdFPviWS_ZtYOFiWPQUSvAtoEuupKm_6+cH_A@mail.gmail.com>

Thanks for the walkthrough and the pointer on the callback, Ryan.

I have it working now, at: https://gist.github.com/2941787

We're going to test it out now and follow up on any performance issues we
run into, with this.

On Fri, Jun 15, 2012 at 7:56 AM, Ryan McCue <lists at rotorised.com> wrote:

> Vid Luther wrote:
>
>> Ok, I'm clearly not understanding the chain of events properly. Based on
>> what Ryan and Chip said, and understanding that wp_enqueue_script isn't
>> run
>> in wp_head().
>>
>
> So, walking through it:
>
> 1. twentyeleven/header.php is loaded
> (Some stuff happens here)
> 2. The start of the <link> tag is output
> 3. The stylesheet URI is output
> 4. The rest of the <link> tag is output
> (More stuff here)
> 5. wp_head() is called
> 5a. Enqueued scripts are output
>
> Note that these are separate. Enqueued styles are output during wp_head(),
> but the other output is hardcoded in the file and not related. The reason
> you're getting two <link> tags is because the first one in header.php is
> being output, then your enqueued one is being output later.
>
>  add_filter('stylesheet_uri', zk_css_versioner());
>>
>
> The second parameter to add_filter() is a callback, which in PHP is
> represented as a string for normal functions. What this is doing is taking
> the result of that function, and attempting to hook that function in as a
> filter (and the 'http://.../style.css' function does not exist, causing
> problems).
>
> Try using a string instead:
>
>    add_filter('stylesheet_uri', 'zk_css_versioner');
>
>      echo $cssuri;
>>
>
> This should be returning the string instead of echoing it. The filter
> calls your callback and takes the result of that as the value that it will
> output.
>
> --
> Ryan McCue
> <http://ryanmccue.info/>
> ______________________________**_________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.**com <wp-hackers at lists.automattic.com>
> http://lists.automattic.com/**mailman/listinfo/wp-hackers<http://lists.automattic.com/mailman/listinfo/wp-hackers>
>



-- 
Vid Luther
CEO and Founder
ZippyKid
Managed Wordpress Hosting
http://zippykid.com/
210-789-0369

From halukkaramete at gmail.com  Sat Jun 16 20:53:34 2012
From: halukkaramete at gmail.com (Haluk Karamete)
Date: Sat, 16 Jun 2012 13:53:34 -0700
Subject: [wp-hackers] category URL's and SEO ranking
Message-ID: <CAHERW=2WZFRQmSkS3CWYv8Tq84_vi8pFRjy_uAv90KMRay=8oA@mail.gmail.com>

When you keep the category base ( that is you don't remove it by a
plug in) WordPress does allow you to browse to your 2 level deep
category in two different ways as the example below would demonstrate
it.

say, your category has a top level item "MULTIMEDIA" and a child under
it called VIDEO.

Visually, we are talking about a situation like this;

Category taxonomy

multimedia
    video
    audio
topics
    science
    politics
Well, you may get to that child (video) in the following 2 different ways;

yoursite.com/category/multimedia/video or yoursite.com/category/video

The point here is that WP brings you to the exact same page,
regardless of which URL has been used, and there are no redirects here
neither, so both URL's remain on the visitor's browser as is just like
it was requested at the first place. And with either URL, the
resulting content is identical.

That's a hateful situation by Google.

Google punishes such sites cause your web site got the same exact
content appearing under 2 different URL's. ( This is of course when
you happen to use both URLs. ) Sure, Nobody would want to do that
deliberarely but sometimes you end up with that. And this question is
all about that case.

Let's say, you wanted to pick the simpler URL for your VIDEO category
and you want to stick to that only. Basically, you want the URL to be

yoursite.com/category/video

This is easy to achieve when you use the custom menu feature that
comes with WordPress where you can specify a URL for that particular
custom menu item of yours. So, when visitors click on the VIDEO link
on the custom menu, they end up coming to

yoursite.com/category/video

No problems so far...

But as soon as they pick a post out of that category, and they end up
coming to a post where the post's meta data displays things like
"CATEGORIZED in" or "TAGGED by" etc, they will be exposed to the
alternative URL for that VIDEO category.

So, if a user clicks on the VIDEO link in the "Categorized in" area,
the URL that they will end up with would be

yoursite.com/category/multimedia/video

And with that, there goes your SEO ranking.

My question is what techniques do you use here so WordPress always and
always use one single URL, the URL you defined in the custom menu.

I thought, category slugs could do this, but when I checked it, slug
feature allows me to change only the category term in the URL, not the
path to it.

If it were to give me a choice like

video slug: /category/video

I would be done.

But that choice is not available at this moment. When you do that, you
end up with the following slug instead

categoryvideo

That's because / is not a valid character for a slug.

Please suggest an alternative way to tell WordPress to stick to
/category/video at all times.

Before suggesting the obvious, ( well, just skip the 'multimedia' and
make the 'video' a top level cat. ), let me say that that suggestion
won't work for our situation.

From wordpress at zed1.com  Sun Jun 17 10:15:20 2012
From: wordpress at zed1.com (Mike Little)
Date: Sun, 17 Jun 2012 11:15:20 +0100
Subject: [wp-hackers] category URL's and SEO ranking
In-Reply-To: <CAHERW=2WZFRQmSkS3CWYv8Tq84_vi8pFRjy_uAv90KMRay=8oA@mail.gmail.com>
References: <CAHERW=2WZFRQmSkS3CWYv8Tq84_vi8pFRjy_uAv90KMRay=8oA@mail.gmail.com>
Message-ID: <CAMb54M0s3iCgf1JBDBHKtegAVM2m24bKBiDGhbPFAGiUDY9KHg@mail.gmail.com>

There are a number of ways to solve this problem, which, by the way,
doesn't merit such strong words as "hateful" and "punishes". Google's
ranking algorithm is just that: an algorithm, it doesn't hate or punish.

Anyway, there is a filter 'term_link' which WordPress passes the generated
term link and the elements used to construct it. So you can reconstruct it
in the way that you want.

For example, add this code to your theme's functions.php or a plugin

add_filter( "term_link", 'my_term_link', 10, 3 );
function my_term_link( $termlink, $term, $taxonomy) {
 // check this is a category link, and we are using permalinks
if ( ( 'category' == $taxonomy ) && ( false === strpos( $termlink, '?' ) )
)  {
 global $wp_rewrite;
$termlink = $wp_rewrite->get_extra_permastruct( $taxonomy );
 $termlink = str_replace( "%$taxonomy%", $term->slug, $termlink );
$termlink = home_url( user_trailingslashit( $termlink, 'category' ) );
 }
return $termlink;
}

This will work for category links in the custom menus too (assuming you
don't use custom links there)

Another solution (which feels like a better solution to me) would be to add
a canonical link to the header of the category archives page. This code
will do that.
add_action( 'wp_head', 'category_rel_canonical' );
function category_rel_canonical() {
if ( !is_archive() )
return;

global $wp_the_query;
$term = $wp_the_query->get_queried_object();
 $taxonomy = $term->taxonomy;
$t = get_taxonomy($taxonomy);
if ( $t->rewrite['hierarchical'] ) {
 $link = get_term_link( $term, $taxonomy );
echo "<link rel='canonical' href='$link' />\n";
 }
}

If you run the two lots of code together then you will always get the
non-hierarchical canonical link. But then you might as well not use
hierarchical categories at all.


Mike
-- 
Mike Little
http://zed1.com/

From halukkaramete at gmail.com  Sun Jun 17 13:18:54 2012
From: halukkaramete at gmail.com (Haluk Karamete)
Date: Sun, 17 Jun 2012 06:18:54 -0700
Subject: [wp-hackers] category URL's and SEO ranking
In-Reply-To: <CAMb54M0s3iCgf1JBDBHKtegAVM2m24bKBiDGhbPFAGiUDY9KHg@mail.gmail.com>
References: <CAHERW=2WZFRQmSkS3CWYv8Tq84_vi8pFRjy_uAv90KMRay=8oA@mail.gmail.com>
	<CAMb54M0s3iCgf1JBDBHKtegAVM2m24bKBiDGhbPFAGiUDY9KHg@mail.gmail.com>
Message-ID: <CAHERW=1eD+mtv5598thOxxGSDp8j9unDh4az6ybYBvaio=Y8iA@mail.gmail.com>

Mike,

Thank you for the code. I have only a handful of cats, ( 20 so to speak ).
And not all of them needs this kind o shortening. For example, a URL like

site.com/explore/region/north-america

, though longer, is better than

site.com/explore/north-america.

Ofcourse, what's better or not is debatable but the point is for some
cats, the site owner decides to go with the full url and in some the
shorter one.

Having said that, would then the following adjustment to your code be
OK to go with;

add_filter( "term_link", 'my_term_link', 10, 3 );
function my_term_link( $termlink, $term, $taxonomy)
{
    // check this is a category link, and we are using permalinks
    if ( ( 'category' == $taxonomy ) && ( false === strpos( $termlink,
'?' ) ) )
    {
        if(0):
            global $wp_rewrite;
            $termlink = $wp_rewrite->get_extra_permastruct( $taxonomy );
            $termlink = str_replace( "%$taxonomy%", $term->slug, $termlink );
            $termlink = home_url( user_trailingslashit( $termlink,
'category' ) );
        else:
            $taxonomy_term = $taxonomy . "_" . $term;
            switch($taxonomy_term):
            case  "3_10": //alternatively, I can go here
"category_video" too right? Assuming the filter is called like that?
                    //overwrite the WP computed URL alone when
taxonomy ID is 3 and term id is 10
                    $termlink = "/category/video";
                    break;
            default:
                    //leave WP computed URL alone
                    break;
            endswitch;
        endif;
    }
    return $termlink;
}

Also, I could not understand the part " ( false === strpos( $termlink,
'?' ) ) ) "
When you check for the query string existence, what do you make of
that? Does your original code uses the full URL ( that is
/category/multimedia/video as opposed to /category/video ) when the
URL happens to have a QS attached to it? Did I get this part wrong?



On Sun, Jun 17, 2012 at 3:15 AM, Mike Little <wordpress at zed1.com> wrote:
> There are a number of ways to solve this problem, which, by the way,
> doesn't merit such strong words as "hateful" and "punishes". Google's
> ranking algorithm is just that: an algorithm, it doesn't hate or punish.
>
> Anyway, there is a filter 'term_link' which WordPress passes the generated
> term link and the elements used to construct it. So you can reconstruct it
> in the way that you want.
>
> For example, add this code to your theme's functions.php or a plugin
>
> add_filter( "term_link", 'my_term_link', 10, 3 );
> function my_term_link( $termlink, $term, $taxonomy) {
> ?// check this is a category link, and we are using permalinks
> if ( ( 'category' == $taxonomy ) && ( false === strpos( $termlink, '?' ) )
> ) ?{
> ?global $wp_rewrite;
> $termlink = $wp_rewrite->get_extra_permastruct( $taxonomy );
> ?$termlink = str_replace( "%$taxonomy%", $term->slug, $termlink );
> $termlink = home_url( user_trailingslashit( $termlink, 'category' ) );
> ?}
> return $termlink;
> }
>
> This will work for category links in the custom menus too (assuming you
> don't use custom links there)
>
> Another solution (which feels like a better solution to me) would be to add
> a canonical link to the header of the category archives page. This code
> will do that.
> add_action( 'wp_head', 'category_rel_canonical' );
> function category_rel_canonical() {
> if ( !is_archive() )
> return;
>
> global $wp_the_query;
> $term = $wp_the_query->get_queried_object();
> ?$taxonomy = $term->taxonomy;
> $t = get_taxonomy($taxonomy);
> if ( $t->rewrite['hierarchical'] ) {
> ?$link = get_term_link( $term, $taxonomy );
> echo "<link rel='canonical' href='$link' />\n";
> ?}
> }
>
> If you run the two lots of code together then you will always get the
> non-hierarchical canonical link. But then you might as well not use
> hierarchical categories at all.
>
>
> Mike
> --
> Mike Little
> http://zed1.com/
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

From wordpress at zed1.com  Sun Jun 17 18:36:52 2012
From: wordpress at zed1.com (Mike Little)
Date: Sun, 17 Jun 2012 19:36:52 +0100
Subject: [wp-hackers] category URL's and SEO ranking
In-Reply-To: <CAHERW=1eD+mtv5598thOxxGSDp8j9unDh4az6ybYBvaio=Y8iA@mail.gmail.com>
References: <CAHERW=2WZFRQmSkS3CWYv8Tq84_vi8pFRjy_uAv90KMRay=8oA@mail.gmail.com>
	<CAMb54M0s3iCgf1JBDBHKtegAVM2m24bKBiDGhbPFAGiUDY9KHg@mail.gmail.com>
	<CAHERW=1eD+mtv5598thOxxGSDp8j9unDh4az6ybYBvaio=Y8iA@mail.gmail.com>
Message-ID: <CAMb54M3Dh1nPRdZwXm0GWPk0gO4Oeic8Prn_7QHnOJTkYi1fKw@mail.gmail.com>

On 17 June 2012 14:18, Haluk Karamete <halukkaramete at gmail.com> wrote:

> Mike,
>
> Thank you for the code. I have only a handful of cats, ( 20 so to speak ).
> And not all of them needs this kind o shortening. For example, a URL like
>
> site.com/explore/region/north-america
>
> , though longer, is better than
>
> site.com/explore/north-america.
>
> Ofcourse, what's better or not is debatable but the point is for some
> cats, the site owner decides to go with the full url and in some the
> shorter one.
>
>
It actually sounds like some of your categories should be a different
taxonomy.



> Having said that, would then the following adjustment to your code be
> OK to go with;
>
> add_filter( "term_link", 'my_term_link', 10, 3 );
> function my_term_link( $termlink, $term, $taxonomy)
> {
>    // check this is a category link, and we are using permalinks
>    if ( ( 'category' == $taxonomy ) && ( false === strpos( $termlink,
> '?' ) ) )
>    {
>         if(0):
>             global $wp_rewrite;
>            $termlink = $wp_rewrite->get_extra_permastruct( $taxonomy );
>            $termlink = str_replace( "%$taxonomy%", $term->slug, $termlink
> );
>            $termlink = home_url( user_trailingslashit( $termlink,
> 'category' ) );
>         else:
>            $taxonomy_term = $taxonomy . "_" . $term;
>


You can't do this, the term is an object that is passed. And neither is a
number. The taxonomy is a string.
And my code only operates when the taxonomy is 'category' so you wouldn't
need to test for it again.

If you are thinking of numbers for these things you are thinking wrong: the
numbers are incidental and really only relevant to the database. Yes,
WordPress code uses ID's of various objects, but that is only because they
are convenient keys into the database record.



>            switch($taxonomy_term):
>            case  "3_10": //alternatively, I can go here
> "category_video" too right? Assuming the filter is called like that?
>                    //overwrite the WP computed URL alone when
> taxonomy ID is 3 and term id is 10
>                    $termlink = "/category/video";
>


Not sure why you haven't used the call to home_url() and backslashit()


                   break;
>            default:
>                    //leave WP computed URL alone
>                    break;
>            endswitch;
>        endif;
>    }
>    return $termlink;
> }
>
> Also, I could not understand the part " ( false === strpos( $termlink,
> '?' ) ) ) "
> When you check for the query string existence, what do you make of
> that? Does your original code uses the full URL ( that is
> /category/multimedia/video as opposed to /category/video ) when the
> URL happens to have a QS attached to it? Did I get this part wrong?
>
>
>
The code I wrote is checking whether pretty permalinks are turned on, if
they are not, the url will include a query string, and therefore the
manipulation does not need to be done.


Mike
-- 
Mike Little
http://zed1.com/

From kkarpieszuk at gmail.com  Mon Jun 18 13:44:30 2012
From: kkarpieszuk at gmail.com (Konrad Karpieszuk)
Date: Mon, 18 Jun 2012 15:44:30 +0200
Subject: [wp-hackers] filter or action before loop?
Message-ID: <CAGhUOaCtmO6ePQ6i=h_kKMjdvg5+5Nue4PTNsq4PdJv1DjjWhg@mail.gmail.com>

hi there,

is it possible to display something over main loop of posts using
hooks? i don't want to ask users of my plugin to put my template tag.
i want to make function which will check if loop starts and then show
some html result

--
(en) regards / (pl) pozdrawiam
Konrad Karpieszuk
http://tradematik.pl wtyczka do WordPressa do tworzenia sklep?w dla
klient?w z Polski

From kkarpieszuk at gmail.com  Mon Jun 18 13:48:17 2012
From: kkarpieszuk at gmail.com (Konrad Karpieszuk)
Date: Mon, 18 Jun 2012 15:48:17 +0200
Subject: [wp-hackers] filter or action before loop?
In-Reply-To: <CAGhUOaCtmO6ePQ6i=h_kKMjdvg5+5Nue4PTNsq4PdJv1DjjWhg@mail.gmail.com>
References: <CAGhUOaCtmO6ePQ6i=h_kKMjdvg5+5Nue4PTNsq4PdJv1DjjWhg@mail.gmail.com>
Message-ID: <CAGhUOaCCY+9pCFTYjjHsNuKOw+BYaC79ra6_gTgtRamNRZq1pQ@mail.gmail.com>

i will answer to myself :) action name is loop_start and works as i expected :)

--
(en) regards / (pl) pozdrawiam
Konrad Karpieszuk
http://tradematik.pl wtyczka do WordPressa do tworzenia sklep?w dla
klient?w z Polski



On Mon, Jun 18, 2012 at 3:44 PM, Konrad Karpieszuk
<kkarpieszuk at gmail.com> wrote:
> hi there,
>
> is it possible to display something over main loop of posts using
> hooks? i don't want to ask users of my plugin to put my template tag.
> i want to make function which will check if loop starts and then show
> some html result
>
> --
> (en) regards / (pl) pozdrawiam
> Konrad Karpieszuk
> http://tradematik.pl wtyczka do WordPressa do tworzenia sklep?w dla
> klient?w z Polski

From lionel.pointet at globalis-ms.com  Mon Jun 18 13:49:56 2012
From: lionel.pointet at globalis-ms.com (Lionel Pointet)
Date: Mon, 18 Jun 2012 15:49:56 +0200
Subject: [wp-hackers] filter or action before loop?
In-Reply-To: <CAGhUOaCtmO6ePQ6i=h_kKMjdvg5+5Nue4PTNsq4PdJv1DjjWhg@mail.gmail.com>
References: <CAGhUOaCtmO6ePQ6i=h_kKMjdvg5+5Nue4PTNsq4PdJv1DjjWhg@mail.gmail.com>
Message-ID: <4FDF3204.8000608@globalis-ms.com>

Hi Konrad,

You could hook into "loop_start" and "loop_end" actions, which are launched:

  * loop_start: the first time (and only the first time) "the_post()"
    function is used on the query
  * loop_end: the last time "have_posts()" function is used on the query

You get the WP_Query object associated with these actions.

This isn't a option taken by the majority of the other plugins because 
you don't let the developper do what he wants with your API: if he wants 
to create a widget that displays, without any loop, one part of your 
data, he just can't...

As I write that, I can see you answered to yourself. Just keep in mind 
that this will work only with one need, try to think of any needs!

BR,
Lionel

Le 18/06/2012 15:44, Konrad Karpieszuk a ?crit :

> hi there,
>
> is it possible to display something over main loop of posts using
> hooks? i don't want to ask users of my plugin to put my template tag.
> i want to make function which will check if loop starts and then show
> some html result
>
> --
> (en) regards / (pl) pozdrawiam
> Konrad Karpieszuk
> http://tradematik.pl wtyczka do WordPressa do tworzenia sklep?w dla
> klient?w z Polski
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers



From scottg.wp-hackers at mhg2.com  Mon Jun 18 15:04:21 2012
From: scottg.wp-hackers at mhg2.com (Scott R. Godin)
Date: Mon, 18 Jun 2012 11:04:21 -0400
Subject: [wp-hackers] seeking users of Whiteboard Framework
Message-ID: <jrng1q$n98$1@dough.gmane.org>

I'm interested in talking to anyone who's used the Whiteboard framework
http://whiteboardframework.com/ for theme development of mobile+desktop
sites.

Someone in #wordpress on freenode had recommended it but I no longer
recall who that was.

The documentation on their website is somewhat sparse, so I'm looking
for those of you experienced whiteboard users who hang around on that
freenode channel that I could bounce some things off of, before getting
too deep into it.


-- 
(please respond to the list as opposed to my email box directly,
unless you are supplying private information you don't want public
on the list)


From dc153464a11bcf5aeb18180db28017fb.wp-hackers at planetmike.com  Mon Jun 18 16:16:35 2012
From: dc153464a11bcf5aeb18180db28017fb.wp-hackers at planetmike.com (Michael Clark)
Date: Mon, 18 Jun 2012 12:16:35 -0400
Subject: [wp-hackers] Ever a valid reason to access a plugin's readme.txt?
Message-ID: <p06240807cc0502aa8777@[192.168.1.5]>

Is there ever a valid reason for an end-user (anyone in the world) to 
directly access a plugin's readme.txt? As recently as a month ago 
crackers would scan my WordPress sites for insecure plugins by simply 
requesting the plugin file name (e.g. 
http://example.com/wp-content/plugins/whatever/whatever.php ). These 
were easily blocked with a handful of .htaccess rules. Last night the 
crackers started looking for readme.txt files of plugins ( 
http://example.com/wp-content/plugins/whatever/readme.txt ). Can I 
safely remove the readme.txt files of my installed plugins? Then I 
can easily block any requests of readme.txt. Mike



-- 

Michael Clark
http://www.PlanetMike.com

"Injustice anywhere is a threat to justice everywhere."
  - Martin Luther King Jr.

From lionel.pointet at globalis-ms.com  Mon Jun 18 16:19:55 2012
From: lionel.pointet at globalis-ms.com (Lionel Pointet)
Date: Mon, 18 Jun 2012 18:19:55 +0200
Subject: [wp-hackers] Ever a valid reason to access a plugin's
	readme.txt?
In-Reply-To: <p06240807cc0502aa8777@[192.168.1.5]>
References: <p06240807cc0502aa8777@[192.168.1.5]>
Message-ID: <4FDF552B.6070705@globalis-ms.com>

Indeed, they probably check the version number to see if a known bug can 
be exploited... All the WordPress plugins readme files are written with 
the same formatting, making it easy to parse it and extract useful data 
from it.

Le 18/06/2012 18:16, Michael Clark a ?crit :
> Is there ever a valid reason for an end-user (anyone in the world) to 
> directly access a plugin's readme.txt? As recently as a month ago 
> crackers would scan my WordPress sites for insecure plugins by simply 
> requesting the plugin file name (e.g. 
> http://example.com/wp-content/plugins/whatever/whatever.php ). These 
> were easily blocked with a handful of .htaccess rules. Last night the 
> crackers started looking for readme.txt files of plugins ( 
> http://example.com/wp-content/plugins/whatever/readme.txt ). Can I 
> safely remove the readme.txt files of my installed plugins? Then I can 
> easily block any requests of readme.txt. Mike
>
>
>



From wordpress at dd32.id.au  Mon Jun 18 16:20:28 2012
From: wordpress at dd32.id.au (Dion Hulse (dd32))
Date: Mon, 18 Jun 2012 12:20:28 -0400
Subject: [wp-hackers] Ever a valid reason to access a plugin's
	readme.txt?
In-Reply-To: <p06240807cc0502aa8777@192.168.1.5>
References: <p06240807cc0502aa8777@192.168.1.5>
Message-ID: <CAL4EHfmwu7XbyPZvidd0-uDLr5tocQG3Vy83GUHG4GO6=qNcCg@mail.gmail.com>

There's no reason why a Plugin would need HTTP access to a readme, or
not one I can think of at least.
Some plugins are known to dynamically load data from their readme's to
display in the admin panel however (Eg, changelog).

I'd just add a .htaccess rule to deny access to any readme.txt's if
you don't want people looking in there

On 18 June 2012 12:16, Michael Clark
<dc153464a11bcf5aeb18180db28017fb.wp-hackers at planetmike.com> wrote:
> Is there ever a valid reason for an end-user (anyone in the world) to
> directly access a plugin's readme.txt? As recently as a month ago crackers
> would scan my WordPress sites for insecure plugins by simply requesting the
> plugin file name (e.g.
> http://example.com/wp-content/plugins/whatever/whatever.php ). These were
> easily blocked with a handful of .htaccess rules. Last night the crackers
> started looking for readme.txt files of plugins (
> http://example.com/wp-content/plugins/whatever/readme.txt ). Can I safely
> remove the readme.txt files of my installed plugins? Then I can easily block
> any requests of readme.txt. Mike
>
>
>
> --
>
> Michael Clark
> http://www.PlanetMike.com
>
> "Injustice anywhere is a threat to justice everywhere."
> ?- Martin Luther King Jr.
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

From wp-hackers at google-adsense-templates.co.uk  Tue Jun 19 13:28:42 2012
From: wp-hackers at google-adsense-templates.co.uk (David Law)
Date: Tue, 19 Jun 2012 14:28:42 +0100
Subject: [wp-hackers] category URL's and SEO ranking
In-Reply-To: <CAHERW=2WZFRQmSkS3CWYv8Tq84_vi8pFRjy_uAv90KMRay=8oA@mail.gmail.com>
References: <CAHERW=2WZFRQmSkS3CWYv8Tq84_vi8pFRjy_uAv90KMRay=8oA@mail.gmail.com>
Message-ID: <4436BC9A2ACA454894FDD2DBDD96F4ED@seodavelt>

I tend not to have multiple level deep categories for another SEO reason, 
what's in the child cat is copied in the parent cat and if you aren't 
careful (where you have only one child cat everything is repeated in the 
parent as well) that will generate duplicate content.

Anyway, think you've found a WordPress SEO problem that doesn't exist in the 
real world, in theory yes, in reality no.

WordPress by default links to the child cats with the parent cat in the URL, 
there shouldn't be links to both of these URLs-

yoursite.com/category/multimedia/video
yoursite.com/category/video

There should only be links generated by WordPress to 
yoursite.com/category/multimedia/video

Yes, you or others could link to either URL but why would that occur? I've 
been using WordPress for over 5 years and I didn't know both load the same 
content until 10 mins ago. If there's no links Google won't find both URLs. 
If for some reason both are indexed Google is quite good (though not 
perfect) at determining the best URL, will normally use the URL that has 
most backlinks which would be yoursite.com/category/multimedia/video

This site http://www.free-recipe.co.uk/ uses the structure you are concerned 
about, had that structure for years, it's got over 200,000 pages indexed 
(the site has 130,000 posts) in Google, 27 parent cats and 300ish child cats 
in those parent cats. All the parent cats but one are alphabetical, A 
Recipes etc...

Didn't do extensive tests, but child cats like 
http://www.free-recipe.co.uk/free-recipes/a-recipes/appetizer-recipes are 
not indexed in the other URL format.

Google site search use this format
site:site:http://www.free-recipe.co.uk/free-recipes/appetizer-recipes
site:http://www.free-recipe.co.uk/free-recipes/bread-recipes

Basically removing the parent category part of the URL shows no results as 
I'd expect event though the URLs do load content.

Feel free to check as many child cats this way, there's 300 to choose from. 
Either WordPress and no one has linked to the alternative URL format or 
Google has combined the results to the correct URL, either way nothing to 
worry about.

You are also over estimating duplicate content damage, in the vast majority 
of cases where a site inadvertently had duplicate content (very easy to do 
in WordPress monthly archives can be a copy of the home page for example) 
Google combines the results into the best URL without the need for canonical 
URLs or 301 redirects.

David
-- 
http://www.stallion-theme.com/ Stallion All In One WordPress SEO Theme

-----Original Message----- 
From: Haluk Karamete
Sent: Saturday, June 16, 2012 9:53 PM
To: wp-hackers at lists.automattic.com
Subject: [wp-hackers] category URL's and SEO ranking

When you keep the category base ( that is you don't remove it by a
plug in) WordPress does allow you to browse to your 2 level deep
category in two different ways as the example below would demonstrate
it.

say, your category has a top level item "MULTIMEDIA" and a child under
it called VIDEO.

Visually, we are talking about a situation like this;

Category taxonomy

multimedia
    video
    audio
topics
    science
    politics
Well, you may get to that child (video) in the following 2 different ways;

yoursite.com/category/multimedia/video or yoursite.com/category/video

The point here is that WP brings you to the exact same page,
regardless of which URL has been used, and there are no redirects here
neither, so both URL's remain on the visitor's browser as is just like
it was requested at the first place. And with either URL, the
resulting content is identical.

That's a hateful situation by Google.

Google punishes such sites cause your web site got the same exact
content appearing under 2 different URL's. ( This is of course when
you happen to use both URLs. ) Sure, Nobody would want to do that
deliberarely but sometimes you end up with that. And this question is
all about that case.

Let's say, you wanted to pick the simpler URL for your VIDEO category
and you want to stick to that only. Basically, you want the URL to be

yoursite.com/category/video

This is easy to achieve when you use the custom menu feature that
comes with WordPress where you can specify a URL for that particular
custom menu item of yours. So, when visitors click on the VIDEO link
on the custom menu, they end up coming to

yoursite.com/category/video

No problems so far...

But as soon as they pick a post out of that category, and they end up
coming to a post where the post's meta data displays things like
"CATEGORIZED in" or "TAGGED by" etc, they will be exposed to the
alternative URL for that VIDEO category.

So, if a user clicks on the VIDEO link in the "Categorized in" area,
the URL that they will end up with would be

yoursite.com/category/multimedia/video

And with that, there goes your SEO ranking.

My question is what techniques do you use here so WordPress always and
always use one single URL, the URL you defined in the custom menu.

I thought, category slugs could do this, but when I checked it, slug
feature allows me to change only the category term in the URL, not the
path to it.

If it were to give me a choice like

video slug: /category/video

I would be done.

But that choice is not available at this moment. When you do that, you
end up with the following slug instead

categoryvideo

That's because / is not a valid character for a slug.

Please suggest an alternative way to tell WordPress to stick to
/category/video at all times.

Before suggesting the obvious, ( well, just skip the 'multimedia' and
make the 'video' a top level cat. ), let me say that that suggestion
won't work for our situation.
_______________________________________________
wp-hackers mailing list
wp-hackers at lists.automattic.com
http://lists.automattic.com/mailman/listinfo/wp-hackers 



From shastaw at gmail.com  Tue Jun 19 16:53:16 2012
From: shastaw at gmail.com (Shasta Willson)
Date: Tue, 19 Jun 2012 09:53:16 -0700
Subject: [wp-hackers] category URL's and SEO ranking
In-Reply-To: <4436BC9A2ACA454894FDD2DBDD96F4ED@seodavelt>
References: <CAHERW=2WZFRQmSkS3CWYv8Tq84_vi8pFRjy_uAv90KMRay=8oA@mail.gmail.com>
	<4436BC9A2ACA454894FDD2DBDD96F4ED@seodavelt>
Message-ID: <CAGguigcp6u2b2tF3pj2jbNem5U+fRHRiNU=gwODZPoSrOMkXog@mail.gmail.com>

I sometimes create a category page which displays any posts in the
category (but NOT posts in the children), and then links to the
children categories.  So far as I can tell this removes any path to
get to the subcategory posts from the parent category.

e.g. http://pprc.org/testing123/testbed/index.php/category/networking/

(After this goes live the testing parts of the URL will go away.)

You can use http://codex.wordpress.org/Template_Tags/in_category for
testing if the post is actually in THIS category (not a subcategory)
to decide whether to post it.  (Note if the client checks the parent
category then it's in it too.)

<?php
$cat_id = get_query_var('cat');
$catlist = get_categories('child_of=' . $cat_id);

 if (have_posts()) : while (have_posts()) : the_post(); ?>
    <?php if (in_category($cat_id)) : ?>
	<div class="one_synopsis">
	<div class="cat_headline">
	<h1 class="storytitle"><a href="<?php echo get_permalink(); ?>"><?php
the_title(); ?></a></h1>
	<?php if (is_category('Blog')) : ?>
       <b><i><?php echo get_the_date( $d ); ?></b></i>
	<?php endif; ?>	
	</div>
	<div class="storycontent">
		<?php the_advanced_excerpt('length=50&use_words=1&no_custom=0&exclude_tags=img,p,strong,h1,h2,h3,a,i,b,
em'); ?>
	</div>
	<div class="storyimage">
	<?php if( has_post_thumbnail() )
			{ the_post_thumbnail('carousel_thumbnail'); } ?>
	</div>
	<div style="clear:both;"></div>
	</div>
    <?php endif; ?>
<?php endwhile; else: ?>
<p><?php _e('Page not found.'); ?></p>
<?php endif;  ?>

<?php if ($catlist) {
	foreach ($catlist as $category) {
	echo '<div class="subcategory"><h1>Related Topic: <a href="' .
get_category_link( $category->term_id ) . '" title="' . sprintf( __(
"View all posts in %s" ), $category->name ) . '" ' . '>' .
$category->name.'</a></h1> ';
    	echo '<p>'. $category->description . '</p> </div>';
    	
  }
 } ?>

- Shasta

From Gavin.Pearce at 3seven9.com  Tue Jun 19 20:31:37 2012
From: Gavin.Pearce at 3seven9.com (Gavin Pearce)
Date: Tue, 19 Jun 2012 21:31:37 +0100
Subject: [wp-hackers] Trac etiquette
Message-ID: <CD47955B7E065D48AB5CF226C2ED75C050C663@tbs-sbs01.TBS.local>

Could someone take a moment to clarify Trac 'etiquette' for me please?
Or point me in the right direction?

 

Having just submitted a [albeit stupidly simple] patch
(http://core.trac.wordpress.org/ticket/21017), I've added the keywords,
and assigned to nacin for review (as nacin suggested the patch). Is this
what people want and what works best for them? Don't want to offend
anyone by assigning them work.

 

The Action section at the base of a ticket (leave as reviewing, resolve
as fixed, reassign review to, accept etc)  all seem like tasks that
should be left to core committers, perhaps with the exception of
reassign review to someone to test/feedback?

 

Any guidance much appreciated. The Codex touches on the various tags and
actions, and what they mean, but not when to use them (in the case of
actions) - or more importantly: who should  be using them.

 

Gav.


From halukkaramete at gmail.com  Tue Jun 19 21:35:46 2012
From: halukkaramete at gmail.com (Haluk Karamete)
Date: Tue, 19 Jun 2012 14:35:46 -0700
Subject: [wp-hackers] Stress testing WordPress
Message-ID: <CAHERW=1REuZOjMimjvhxfQLFWZFgqRRiMtK5e_xKr5e2pSH47A@mail.gmail.com>

We are going to launch a community site with 100K posts, 100K
comments, 10K terms, 5 users ( all admin/editorial), and approx 500K
recs in the wp_postmeta.

Site may grow with a larger author base and we hope it will grow to
become a much bigger site...

At this time, I would like to know how would WordPress behave when the
above numbers reach the 10 times the current fold, that is

1M posts,
1M comments,
100K terms,
500 users,
and approx 5M recs in the wp_postmeta.

First off, are there any tools out there  to put this many records (
dummy recs fine ) into a WordPress install in a fast-efficient manner?

My migration routine takes about 10 hours to complete to put 100K
posts into WP. I must find more efficient ways to 1M records!

I know WP can handle fairly large database content and WordPress.com
is the greatest example for that.
However, those guys have of a ton of servers to blaance to load and
much more expensive servers which skew the whole equation.
In my case, I have what I have. A since $10K IIS server running at a
data center.

I'm curious to see/experience how the admin dashboard would load and
how the front page ( with multiple loops ) behave when I have that
many posts in there..

Any ideas/tools towards this goal is greatly appreciated...

Of course, once I have that many recs, I will be needing a stress
testing tool but I think I can find utilities for that.That's more of
a IIS question.

and BTW, we must be on an IIS (windows) server and we cannot switch to
a LINUX server for lots of legacy code (ASP) reasons anytime soon.

Thank you for your help.

From martin at lazarov.bg  Tue Jun 19 22:05:25 2012
From: martin at lazarov.bg (Martin Lazarov)
Date: Wed, 20 Jun 2012 01:05:25 +0300
Subject: [wp-hackers] Stress testing WordPress
In-Reply-To: <CAHERW=1REuZOjMimjvhxfQLFWZFgqRRiMtK5e_xKr5e2pSH47A@mail.gmail.com>
References: <CAHERW=1REuZOjMimjvhxfQLFWZFgqRRiMtK5e_xKr5e2pSH47A@mail.gmail.com>
Message-ID: <CAFJ6JWGgObX-pU2S_EaN4TBJM9RV-SAbQDP9=Tqvy5jBHDLGPQ@mail.gmail.com>

How it will work depends on what hardware you have (RAM,CPU,HDD's) and
how much users you expect to visit your site at the same time. 100K
posts can be 1Gb mysql data, but can be 100GB of space required for
mysql to strore it. Posts numbers doesn't make real sense but posts
size (in bytes).

To optimize your migration routine you have to found where is the
bottleneck of this procedure (CPU,HDD)? Did you make mysql-server
optimizations?

And BTW this server will be shared hosting or what? Wordpress doesnt'
require ASP. You want to serve 1M posts from server doing any work
found in your office - this is wrong and you will have a lot of
problems sharing one big site with other stuff on one server.

Consider using cache plugins (for example hyper cache extended) - that
way you can overpower site usage spikes.

What about accessibility and high availability? Only one big server? (
= one big crash)


On Wed, Jun 20, 2012 at 12:35 AM, Haluk Karamete
<halukkaramete at gmail.com> wrote:
> We are going to launch a community site with 100K posts, 100K
> comments, 10K terms, 5 users ( all admin/editorial), and approx 500K
> recs in the wp_postmeta.
>
> Site may grow with a larger author base and we hope it will grow to
> become a much bigger site...
>
> At this time, I would like to know how would WordPress behave when the
> above numbers reach the 10 times the current fold, that is
>
> 1M posts,
> 1M comments,
> 100K terms,
> 500 users,
> and approx 5M recs in the wp_postmeta.
>
> First off, are there any tools out there ?to put this many records (
> dummy recs fine ) into a WordPress install in a fast-efficient manner?
>
> My migration routine takes about 10 hours to complete to put 100K
> posts into WP. I must find more efficient ways to 1M records!
>
> I know WP can handle fairly large database content and WordPress.com
> is the greatest example for that.
> However, those guys have of a ton of servers to blaance to load and
> much more expensive servers which skew the whole equation.
> In my case, I have what I have. A since $10K IIS server running at a
> data center.
>
> I'm curious to see/experience how the admin dashboard would load and
> how the front page ( with multiple loops ) behave when I have that
> many posts in there..
>
> Any ideas/tools towards this goal is greatly appreciated...
>
> Of course, once I have that many recs, I will be needing a stress
> testing tool but I think I can find utilities for that.That's more of
> a IIS question.
>
> and BTW, we must be on an IIS (windows) server and we cannot switch to
> a LINUX server for lots of legacy code (ASP) reasons anytime soon.
>
> Thank you for your help.
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

From wp-hackers at thecodecave.com  Tue Jun 19 22:21:29 2012
From: wp-hackers at thecodecave.com (Brian Layman)
Date: Tue, 19 Jun 2012 18:21:29 -0400
Subject: [wp-hackers] Stress testing WordPress
In-Reply-To: <CAHERW=1REuZOjMimjvhxfQLFWZFgqRRiMtK5e_xKr5e2pSH47A@mail.gmail.com>
References: <CAHERW=1REuZOjMimjvhxfQLFWZFgqRRiMtK5e_xKr5e2pSH47A@mail.gmail.com>
Message-ID: <4FE0FB69.5020300@thecodecave.com>

Random ramblings inspired by your question:
Generally speaking, the numbers you are quoting don't sound like a huge 
problem and of course that all depends upon what all the server is doing 
and how you've configured it and the network connecting it to the 
Internet backbone.  The price of the server doesn't tell us much since a 
$10K server bought last month would work better than a $10K server 
bought 4 years ago.  Regardless of your hardware, you can do a lot of 
things to take the greatest advantage of what you have.

You'll want to watch for the bottlenecks in your system on an on-going 
basis.  Make sure you have a gigabit network card so that you can feed 
data out of the machine fast enough. Make sure that you have a 
persistent cache installed so that your CPU is not taxed (on Windows 
consider Couchbase - a drop in memcache replacement 
http://www.couchbase.com/couchbase-server/overview). This means doing 
object caching, page caching and even manual piecemeal caching of 
appropriate sections of your theme.  Look at what you can do do reduce 
the load on hard drives and network created by static files (use a CDN - 
amazon or even Cloudflare maybe).  The biggest thing you need to watch 
for is your plugins causing writes to the database or file system upon 
page load. Avoid that at all costs as writing creates a change in the 
physical world and between that and file system locks, that is where 
your load time will be spent.

Also you've said that you are locked into IIS.  I wouldn't look at this 
right way, but you may not be as locked in as you think.  You may have 
ASP requirements outside of WordPress, but that doesn't mean you can't 
serve the WordPress site (and all static files) via NginX and send all 
remaining traffic over to an instance IIS that is running on the same 
server but listening from a different port.  After all, if you've ever 
installed Nginx with fastcgi, that's all you're doing with your PHP 
traffic. You are just proxying it to a different server running on the 
same machine.  I imagine nginx could send all traffic for the IIS sites 
over to IIS running on port 8080 and if Nginx is more efficient on that 
machine than IIS, that may be something you want to consider 
eventually.  (And if you ever want to just play with Nginx on a windows 
system, here is a maintained binary install for local Nginx dev 
testing.. http://winginx.com/

Brian Layman



From halukkaramete at gmail.com  Tue Jun 19 22:55:35 2012
From: halukkaramete at gmail.com (Haluk Karamete)
Date: Tue, 19 Jun 2012 15:55:35 -0700
Subject: [wp-hackers] Stress testing WordPress
In-Reply-To: <4FE0FB69.5020300@thecodecave.com>
References: <CAHERW=1REuZOjMimjvhxfQLFWZFgqRRiMtK5e_xKr5e2pSH47A@mail.gmail.com>
	<4FE0FB69.5020300@thecodecave.com>
Message-ID: <CAHERW=2v+rwpZ=OfWjO-mEMgzc82xdhkBGgTx4CaPiQhMhWX6Q@mail.gmail.com>

That's right Brian. A $10K server does not give much info.

A more detailed server info is below.

We got two servers that are identical.
one for web server(  IIS ) and the other for database (SQL)
They both are
DELL PowerEdge R710 with x64-based PC,
Intel(R) Xeon(R) CPU, X5650  @ 2.67GHz, 2660 Mhz,
6 Core(s) With a Physical Memory (RAM) 32.0 GB

They are not shared neither. They are on our rack and They are
connected to the backbone directly cause they are hosted on a pretty
good data center.



On Tue, Jun 19, 2012 at 3:21 PM, Brian Layman
<wp-hackers at thecodecave.com> wrote:
> Random ramblings inspired by your question:
> Generally speaking, the numbers you are quoting don't sound like a huge
> problem and of course that all depends upon what all the server is doing and
> how you've configured it and the network connecting it to the Internet
> backbone. ?The price of the server doesn't tell us much since a $10K server
> bought last month would work better than a $10K server bought 4 years ago.
> ?Regardless of your hardware, you can do a lot of things to take the
> greatest advantage of what you have.
>
> You'll want to watch for the bottlenecks in your system on an on-going
> basis. ?Make sure you have a gigabit network card so that you can feed data
> out of the machine fast enough. Make sure that you have a persistent cache
> installed so that your CPU is not taxed (on Windows consider Couchbase - a
> drop in memcache replacement
> http://www.couchbase.com/couchbase-server/overview). This means doing object
> caching, page caching and even manual piecemeal caching of appropriate
> sections of your theme. ?Look at what you can do do reduce the load on hard
> drives and network created by static files (use a CDN - amazon or even
> Cloudflare maybe). ?The biggest thing you need to watch for is your plugins
> causing writes to the database or file system upon page load. Avoid that at
> all costs as writing creates a change in the physical world and between that
> and file system locks, that is where your load time will be spent.
>
> Also you've said that you are locked into IIS. ?I wouldn't look at this
> right way, but you may not be as locked in as you think. ?You may have ASP
> requirements outside of WordPress, but that doesn't mean you can't serve the
> WordPress site (and all static files) via NginX and send all remaining
> traffic over to an instance IIS that is running on the same server but
> listening from a different port. ?After all, if you've ever installed Nginx
> with fastcgi, that's all you're doing with your PHP traffic. You are just
> proxying it to a different server running on the same machine. ?I imagine
> nginx could send all traffic for the IIS sites over to IIS running on port
> 8080 and if Nginx is more efficient on that machine than IIS, that may be
> something you want to consider eventually. ?(And if you ever want to just
> play with Nginx on a windows system, here is a maintained binary install for
> local Nginx dev testing.. http://winginx.com/
>
> Brian Layman
>
>
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

From kpayne+wordpress+hackers at gmail.com  Wed Jun 20 02:05:32 2012
From: kpayne+wordpress+hackers at gmail.com (Kurt Payne)
Date: Tue, 19 Jun 2012 19:05:32 -0700
Subject: [wp-hackers] Trac etiquette
In-Reply-To: <CD47955B7E065D48AB5CF226C2ED75C050C663@tbs-sbs01.TBS.local>
References: <CD47955B7E065D48AB5CF226C2ED75C050C663@tbs-sbs01.TBS.local>
Message-ID: <CAMNmD-fKf9XZtKi0Q3bHr+_H6NmKhETkUa1udn+9wqvcgEj9uw@mail.gmail.com>

Hi Gavin,

See the Core Contributor Handbook here:
http://nacin.com/projects/core-contributor-handbook/the-bug-tracker-trac/

And there's some supplemental info here:
http://codex.wordpress.org/Reporting_Bugs

And you can always ask in IRC (conditioned upon availability).

--Kurt


On Tue, Jun 19, 2012 at 1:31 PM, Gavin Pearce <Gavin.Pearce at 3seven9.com> wrote:
> Could someone take a moment to clarify Trac 'etiquette' for me please?
> Or point me in the right direction?
>
>
>
> Having just submitted a [albeit stupidly simple] patch
> (http://core.trac.wordpress.org/ticket/21017), I've added the keywords,
> and assigned to nacin for review (as nacin suggested the patch). Is this
> what people want and what works best for them? Don't want to offend
> anyone by assigning them work.
>
>
>
> The Action section at the base of a ticket (leave as reviewing, resolve
> as fixed, reassign review to, accept etc) ?all seem like tasks that
> should be left to core committers, perhaps with the exception of
> reassign review to someone to test/feedback?
>
>
>
> Any guidance much appreciated. The Codex touches on the various tags and
> actions, and what they mean, but not when to use them (in the case of
> actions) - or more importantly: who should ?be using them.
>
>
>
> Gav.
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

From tcbarrett at gmail.com  Wed Jun 20 11:15:39 2012
From: tcbarrett at gmail.com (Tom Barrett)
Date: Wed, 20 Jun 2012 12:15:39 +0100
Subject: [wp-hackers] Multiple additional TinyMCE plugins
Message-ID: <CAEgmxaYNE3kVDTNoX5VS4w4jkdwK2YWOAwjzTM4-my5EVvhKdQ@mail.gmail.com>

Hey ho

I'm adding some shortcodes with a graphical representation in the post
editor. Like the gallery shortcode or image tags.
I have something that works, and have added a single external plugin using
this codex page as a template:
http://codex.wordpress.org/TinyMCE_Custom_Buttons

I would like a .js file for each shortcode, and have tried simply adding
another item to the array:

<code>
add_action('init', 'myplugin_addbuttons');
function myplugin_addbuttons() {
  if ( ! current_user_can('edit_posts') && ! current_user_can('edit_pages')
)
    return;

  // Add only in Rich Editor mode
  if ( get_user_option('rich_editing') == 'true') {
    add_filter( 'mce_external_plugins', 'add_myplugin_tinymce_plugin', 99 );
    //add_filter( 'mce_buttons',          'register_myplugin_button' );
  }
}
function add_myplugin_tinymce_plugin($plugin_array) {
  // The first item here breaks.
   $plugin_array['wppluginone'] = THEMEURL .
'/js/tinymce-shortcode-pluginone.js';
   $plugin_array['wpplugintwo'] = THEMEURL .
'/js/tinymce-shortcode-plugintwo.js';
   return $plugin_array;
}
</code>

However this breaks the 'edit' and 'del' buttons on whichever plugin is
listed first. If I swap the two lines then other one works. I've opened it
in firefox with firebug open and I get no js errors in the console.

Any ideas where to look for this behaviour?


-- 
http://www.tcbarrett.com | http://gplus.to/tcbarrett |
http://twitter.com/tcbarrett

From mpwalsh8 at gmail.com  Wed Jun 20 12:42:04 2012
From: mpwalsh8 at gmail.com (Mike Walsh)
Date: Wed, 20 Jun 2012 13:42:04 +0100
Subject: [wp-hackers] Seeking SQL advice to identify performance problem
Message-ID: <CAMg3evF4kae+cOWH168PP+TESsEhbBjF8Tsx4tpURCe9n-TzTw@mail.gmail.com>

I have a query that I have used in a couple plugins that someone on this
mailing list helped me with several years ago.  I want to retrieve the list
of Users, including their ID, username, display name, first name, and last
name so I can present the information in a form in a way that is easily
readable.  This is the query I am using:

SELECT DISTINCT ID, display_name, user_email, user_login, first_name,
last_name FROM wp_usermeta, wp_users
LEFT JOIN ( SELECT user_id AS uid, meta_value AS first_name FROM
wp_usermeta WHERE meta_key = 'first_name' ) AS metaF ON wp_users.ID =
metaF.uid LEFT JOIN ( SELECT user_id AS uid, meta_value AS last_name
FROM wp_usermeta WHERE meta_key = 'last_name' ) AS metaL ON
wp_users.ID = metaL.uid  WHERE (id<>1)  ORDER BY last_name

In my development area this query takes almost 4 minutes to run and my
WordPress database has 650 users defined.  There is very little other
content in the database besides some test posts.

-- 
Mike Walsh - mpwalsh8 at gmail.com

From mpwalsh8 at gmail.com  Wed Jun 20 12:49:44 2012
From: mpwalsh8 at gmail.com (Mike Walsh)
Date: Wed, 20 Jun 2012 13:49:44 +0100
Subject: [wp-hackers] Seeking SQL advice to identify performance problem
In-Reply-To: <CAMg3evF4kae+cOWH168PP+TESsEhbBjF8Tsx4tpURCe9n-TzTw@mail.gmail.com>
References: <CAMg3evF4kae+cOWH168PP+TESsEhbBjF8Tsx4tpURCe9n-TzTw@mail.gmail.com>
Message-ID: <CAMg3evHLbFzcCtxSnpM+T3n6JBTj-HbkcBGQMLxQE4S9J1RBEg@mail.gmail.com>

On Wed, Jun 20, 2012 at 1:42 PM, Mike Walsh <mpwalsh8 at gmail.com> wrote:

> I have a query that I have used in a couple plugins that someone on this
> mailing list helped me with several years ago.  I want to retrieve the list
> of Users, including their ID, username, display name, first name, and last
> name so I can present the information in a form in a way that is easily
> readable.  This is the query I am using:
>
> SELECT DISTINCT ID, display_name, user_email, user_login, first_name, last_name FROM wp_usermeta, wp_users
> LEFT JOIN ( SELECT user_id AS uid, meta_value AS first_name FROM wp_usermeta WHERE meta_key = 'first_name' ) AS metaF ON wp_users.ID = metaF.uid LEFT JOIN ( SELECT user_id AS uid, meta_value AS last_name FROM wp_usermeta WHERE meta_key = 'last_name' ) AS metaL ON wp_users.ID = metaL.uid  WHERE (id<>1)  ORDER BY last_name
>
> In my development area this query takes almost 4 minutes to run and my
> WordPress database has 650 users defined.  There is very little other
> content in the database besides some test posts.
>
> --
> Mike Walsh - mpwalsh8 at gmail.com
>

Inadvertently hit "Send" to quickly!  Is there a better (aka more
efficient) way to retrieve this information?  I am guessing the LEFT JOIN
constructs I am using are really slowing it down.  I have some plugin users
that have more than 3000 users so it is never completing for them.

Thanks,

Mike
-- 
Mike Walsh - mpwalsh8 at gmail.com

From tcbarrett at gmail.com  Wed Jun 20 13:19:12 2012
From: tcbarrett at gmail.com (Tom Barrett)
Date: Wed, 20 Jun 2012 14:19:12 +0100
Subject: [wp-hackers] Multiple additional TinyMCE plugins
In-Reply-To: <CAEgmxaYNE3kVDTNoX5VS4w4jkdwK2YWOAwjzTM4-my5EVvhKdQ@mail.gmail.com>
References: <CAEgmxaYNE3kVDTNoX5VS4w4jkdwK2YWOAwjzTM4-my5EVvhKdQ@mail.gmail.com>
Message-ID: <CAEgmxaYpiX67rPiBrcXL76BxwF2Jmy8FYNyMW2sPmLdYqsDc=Q@mail.gmail.com>

On 20 June 2012 12:15, Tom Barrett <tcbarrett at gmail.com> wrote:

> However this breaks the 'edit' and 'del' buttons on whichever plugin is
> listed first. If I swap the two lines then other one works. I've opened it
> in firefox with firebug open and I get no js errors in the console.
>
> Any ideas where to look for this behaviour?
>

I was not using a unique element id in the _createButtons function. Simples.

-- 
http://www.tcbarrett.com | http://gplus.to/tcbarrett |
http://twitter.com/tcbarrett

From piemanek at gmail.com  Wed Jun 20 13:52:02 2012
From: piemanek at gmail.com (Simon Blackbourn)
Date: Wed, 20 Jun 2012 14:52:02 +0100
Subject: [wp-hackers] Seeking SQL advice to identify performance problem
In-Reply-To: <CAMg3evHLbFzcCtxSnpM+T3n6JBTj-HbkcBGQMLxQE4S9J1RBEg@mail.gmail.com>
References: <CAMg3evF4kae+cOWH168PP+TESsEhbBjF8Tsx4tpURCe9n-TzTw@mail.gmail.com>
	<CAMg3evHLbFzcCtxSnpM+T3n6JBTj-HbkcBGQMLxQE4S9J1RBEg@mail.gmail.com>
Message-ID: <CAJxFMSDf16YvVL-oDK3-ear81RjBt3bBnnZ_rFHLYUO6V-fUGA@mail.gmail.com>

>
>
> > I have a query that I have used in a couple plugins that someone on this
> > mailing list helped me with several years ago.  I want to retrieve the
> list
> > of Users, including their ID, username, display name, first name, and
> last
> > name so I can present the information in a form in a way that is easily
> > readable.
>


You can use the get_users() function [1] with the 'fields' parameter set
to 'all_with_meta', and then perform a usort on the results:

$args = array(
'number'     => 1000000, //  unfortunately you can't use -1 here
'fields'     => 'all_with_meta', // required
                        'exclude' => array( 1 ) // user IDs to exclude
);

$user_list = get_users( $args );

if ( ! empty( $user_list ) ) {
usort( $user_list, 'sort_my_users_by_lastname' );
foreach ( $user_list as $user ) {
                // do stuff here...
}
}

// .....

function  sort_my_users_by_lastname( $a, $b ) {

if ( $a->last_name == $b->last_name ) {
return 0;
}

return ( $a->last_name < $b->last_name ) ? -1 : 1;

}


Ideally you would paginate using the 'number' and 'offset' fields to make
it more efficient, but if you need all users in one go as I did, sorted by
lastname, it still seems to work very well. I've got this running on a site
without just short of 1000 users and the query takes 1/100th of a second.

Simon

[1] http://codex.wordpress.org/Function_Reference/get_users

From paul at codehooligans.com  Wed Jun 20 14:31:23 2012
From: paul at codehooligans.com (Paul Menard)
Date: Wed, 20 Jun 2012 10:31:23 -0400
Subject: [wp-hackers] Seeking SQL advice to identify performance problem
In-Reply-To: <CAMg3evF4kae+cOWH168PP+TESsEhbBjF8Tsx4tpURCe9n-TzTw@mail.gmail.com>
References: <CAMg3evF4kae+cOWH168PP+TESsEhbBjF8Tsx4tpURCe9n-TzTw@mail.gmail.com>
Message-ID: <BF81A581-719E-48D0-8BA5-18804068B789@codehooligans.com>


On Jun 20, 2012, at 8:42 AM, Mike Walsh wrote:

> SELECT DISTINCT ID, display_name, user_email, user_login, first_name,
> last_name FROM wp_usermeta, wp_users
> LEFT JOIN ( SELECT user_id AS uid, meta_value AS first_name FROM
> wp_usermeta WHERE meta_key = 'first_name' ) AS metaF ON wp_users.ID =
> metaF.uid LEFT JOIN ( SELECT user_id AS uid, meta_value AS last_name
> FROM wp_usermeta WHERE meta_key = 'last_name' ) AS metaL ON
> wp_users.ID = metaL.uid  WHERE (id<>1)  ORDER BY last_name
> 
> In my development area this query takes almost 4 minutes to run and my
> WordPress database has 650 users defined.  There is very little other
> content in the database besides some test posts.


I might just be too old school. I don't have much of a need to write my own SQL any more thanks to WordPress. But when I do I never structure my JOINS like that. I would write the same SQL something like the following. Seems much more straight forward when I read it. I know the JOIN is effectively performing a sub-query which is how your query is written. 

SELECT ID, u.display_name, u.user_email, u.user_login, um_fname.meta_value as first_name, um_lname.meta_value as last_name
FROM wp_users u
LEFT JOIN wp_usermeta um_fname ON u.ID=um_fname.user_id AND um_fname.meta_key='first_name'
LEFT JOIN wp_usermeta um_lname ON u.ID=um_lname.user_id AND um_lname.meta_key='last_name'
WHERE (u.ID<>1)
ORDER BY um_lname.meta_value

P-




From bryan at ibaku.net  Wed Jun 20 14:43:48 2012
From: bryan at ibaku.net (Bryan Petty)
Date: Wed, 20 Jun 2012 08:43:48 -0600
Subject: [wp-hackers] Seeking SQL advice to identify performance problem
In-Reply-To: <CAMg3evF4kae+cOWH168PP+TESsEhbBjF8Tsx4tpURCe9n-TzTw@mail.gmail.com>
References: <CAMg3evF4kae+cOWH168PP+TESsEhbBjF8Tsx4tpURCe9n-TzTw@mail.gmail.com>
Message-ID: <CAKB8V+qTGOUFTWWmzqGTankDQj2qL9xec+hCXBRgu7DeVqq6Lg@mail.gmail.com>

On Wed, Jun 20, 2012 at 6:42 AM, Mike Walsh <mpwalsh8 at gmail.com> wrote:
> In my development area this query takes almost 4 minutes to run and my
> WordPress database has 650 users defined. ?There is very little other
> content in the database besides some test posts.

Sorry, but this is some pretty bad SQL. Let me help though.

The problem here is not that it uses joins, but that it uses joins
with subqueries, and that it's also a double join with the usermeta
table, not just the users table (even though no wp_usermeta columns
are being selected in the outer main query).

If you can, it's recommended that you use Simon's suggested approach
that does not require custom SQL in your WordPress plugins. However,
if you have to for one reason or another, here's a much more
appropriate SQL query:

SELECT ID, display_name, user_email,
    m1.meta_value first_name, m2.meta_value last_name
FROM wp_users u
LEFT JOIN wp_usermeta m1 ON
    (m1.user_id = u.ID AND m1.meta_key = 'first_name')
LEFT JOIN wp_usermeta m2 ON
    (m2.user_id = u.ID AND m2.meta_key = 'last_name')
WHERE ID <> 1
ORDER BY last_name

With the proper indexes (in this case, wp_users.ID and
wp_usermeta.user_id), joins are a very natural part of relational
databases, and are incredibly efficient as long as they aren't used
with subqueries. I haven't used a single subquery with this. This
should run in a fraction of a second even with over 10,000 users,
possibly even 100,000 users no problem.

Regards,
Bryan Petty

From mpwalsh8 at gmail.com  Wed Jun 20 15:06:42 2012
From: mpwalsh8 at gmail.com (Mike Walsh)
Date: Wed, 20 Jun 2012 16:06:42 +0100
Subject: [wp-hackers] Seeking SQL advice to identify performance problem
In-Reply-To: <CAJxFMSDf16YvVL-oDK3-ear81RjBt3bBnnZ_rFHLYUO6V-fUGA@mail.gmail.com>
References: <CAMg3evF4kae+cOWH168PP+TESsEhbBjF8Tsx4tpURCe9n-TzTw@mail.gmail.com>
	<CAMg3evHLbFzcCtxSnpM+T3n6JBTj-HbkcBGQMLxQE4S9J1RBEg@mail.gmail.com>
	<CAJxFMSDf16YvVL-oDK3-ear81RjBt3bBnnZ_rFHLYUO6V-fUGA@mail.gmail.com>
Message-ID: <CAMg3evH_eivNzxQUJMfeJePp5+L0K6KY6t1j95xJsmw-MX0MHA@mail.gmail.com>

I must be missing something as I am unable to retrieve the first_name and
last_name fileds using get_users().  Here is an example (this is dummy
data, not from a real user) of what I get back when I call get_users() as
outlined below:

[885] => WP_User Object        (            [data] => stdClass Object
              (                    [ID] => 885
[user_login] => aarntzen                    [user_pass] =>
$P$BFVck6WesTLX9SboEeNAaaaDxZQfx81                    [user_nicename]
=> aarntzen                    [user_email] =>
aarntzen at wpst.example.com                    [user_url] =>
        [user_registered] => 2012-06-19 14:53:28
[user_activation_key] =>                     [user_status] => 0
            [display_name] => Alejandro Arntzen                )
     [ID] => 885            [caps] => Array                (
         [subscriber] => 1                )            [cap_key] =>
wp_capabilities            [roles] => Array                (
         [0] => subscriber                )            [allcaps] =>
Array                (                    [read] => 1
  [level_0] => 1                    [subscriber] => 1                )
           [filter] =>         )

This is how I called it:

    $args = array(
        'fields' => 'all_with_meta'
       ,'exclude' => $exclude_id
       ,'number' => 25
    ) ;
$users = get_users($args) ;

Am I missing something?

Mike

On Wed, Jun 20, 2012 at 2:52 PM, Simon Blackbourn <piemanek at gmail.com>wrote:

> >
> >
> > > I have a query that I have used in a couple plugins that someone on
> this
> > > mailing list helped me with several years ago.  I want to retrieve the
> > list
> > > of Users, including their ID, username, display name, first name, and
> > last
> > > name so I can present the information in a form in a way that is easily
> > > readable.
> >
>
>
> You can use the get_users() function [1] with the 'fields' parameter set
> to 'all_with_meta', and then perform a usort on the results:
>
> $args = array(
> 'number'     => 1000000, //  unfortunately you can't use -1 here
> 'fields'     => 'all_with_meta', // required
>                        'exclude' => array( 1 ) // user IDs to exclude
> );
>
> $user_list = get_users( $args );
>
> if ( ! empty( $user_list ) ) {
> usort( $user_list, 'sort_my_users_by_lastname' );
> foreach ( $user_list as $user ) {
>                // do stuff here...
> }
> }
>
> // .....
>
> function  sort_my_users_by_lastname( $a, $b ) {
>
> if ( $a->last_name == $b->last_name ) {
> return 0;
> }
>
> return ( $a->last_name < $b->last_name ) ? -1 : 1;
>
> }
>
>
> Ideally you would paginate using the 'number' and 'offset' fields to make
> it more efficient, but if you need all users in one go as I did, sorted by
> lastname, it still seems to work very well. I've got this running on a site
> without just short of 1000 users and the query takes 1/100th of a second.
>
> Simon
>
> [1] http://codex.wordpress.org/Function_Reference/get_users
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>



-- 
Mike Walsh - mpwalsh8 at gmail.com

From mpwalsh8 at gmail.com  Wed Jun 20 15:17:09 2012
From: mpwalsh8 at gmail.com (Mike Walsh)
Date: Wed, 20 Jun 2012 16:17:09 +0100
Subject: [wp-hackers] Seeking SQL advice to identify performance problem
In-Reply-To: <CAKB8V+qTGOUFTWWmzqGTankDQj2qL9xec+hCXBRgu7DeVqq6Lg@mail.gmail.com>
References: <CAMg3evF4kae+cOWH168PP+TESsEhbBjF8Tsx4tpURCe9n-TzTw@mail.gmail.com>
	<CAKB8V+qTGOUFTWWmzqGTankDQj2qL9xec+hCXBRgu7DeVqq6Lg@mail.gmail.com>
Message-ID: <CAMg3evGBo2_sB0hvQLrPuhOu9t0CxEWkth3z3cLciAKnhtdPNA@mail.gmail.com>

I am no SQL guru by any means - as I noted, the SQL came from help on this
mailing list back in 2008.  Since I was unable to get the information I
want (first name and last name) using get_users(), I adapted the SQL you
provided below and it works great - thank you very much.

Mike

On Wed, Jun 20, 2012 at 3:43 PM, Bryan Petty <bryan at ibaku.net> wrote:

> On Wed, Jun 20, 2012 at 6:42 AM, Mike Walsh <mpwalsh8 at gmail.com> wrote:
> > In my development area this query takes almost 4 minutes to run and my
> > WordPress database has 650 users defined.  There is very little other
> > content in the database besides some test posts.
>
> Sorry, but this is some pretty bad SQL. Let me help though.
>
> The problem here is not that it uses joins, but that it uses joins
> with subqueries, and that it's also a double join with the usermeta
> table, not just the users table (even though no wp_usermeta columns
> are being selected in the outer main query).
>
> If you can, it's recommended that you use Simon's suggested approach
> that does not require custom SQL in your WordPress plugins. However,
> if you have to for one reason or another, here's a much more
> appropriate SQL query:
>
> SELECT ID, display_name, user_email,
>    m1.meta_value first_name, m2.meta_value last_name
> FROM wp_users u
> LEFT JOIN wp_usermeta m1 ON
>    (m1.user_id = u.ID AND m1.meta_key = 'first_name')
> LEFT JOIN wp_usermeta m2 ON
>    (m2.user_id = u.ID AND m2.meta_key = 'last_name')
> WHERE ID <> 1
> ORDER BY last_name
>
> With the proper indexes (in this case, wp_users.ID and
> wp_usermeta.user_id), joins are a very natural part of relational
> databases, and are incredibly efficient as long as they aren't used
> with subqueries. I haven't used a single subquery with this. This
> should run in a fraction of a second even with over 10,000 users,
> possibly even 100,000 users no problem.
>
> Regards,
> Bryan Petty
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>



-- 
Mike Walsh - mpwalsh8 at gmail.com

From otto at ottodestruct.com  Wed Jun 20 16:07:44 2012
From: otto at ottodestruct.com (Otto)
Date: Wed, 20 Jun 2012 11:07:44 -0500
Subject: [wp-hackers] Seeking SQL advice to identify performance problem
In-Reply-To: <CAMg3evH_eivNzxQUJMfeJePp5+L0K6KY6t1j95xJsmw-MX0MHA@mail.gmail.com>
References: <CAMg3evF4kae+cOWH168PP+TESsEhbBjF8Tsx4tpURCe9n-TzTw@mail.gmail.com>
	<CAMg3evHLbFzcCtxSnpM+T3n6JBTj-HbkcBGQMLxQE4S9J1RBEg@mail.gmail.com>
	<CAJxFMSDf16YvVL-oDK3-ear81RjBt3bBnnZ_rFHLYUO6V-fUGA@mail.gmail.com>
	<CAMg3evH_eivNzxQUJMfeJePp5+L0K6KY6t1j95xJsmw-MX0MHA@mail.gmail.com>
Message-ID: <CAD-FghxrOj+bbrUnjKDcrUqAi1FYvmw-GOU3ROLN78BHHk3RBw@mail.gmail.com>

On Wed, Jun 20, 2012 at 10:06 AM, Mike Walsh <mpwalsh8 at gmail.com> wrote:
> I must be missing something as I am unable to retrieve the first_name and
> last_name fileds using get_users(). ?Here is an example (this is dummy
> data, not from a real user) of what I get back when I call get_users() as
> outlined below:
>
> [885] => WP_User Object ? ? ? ?( ? ? ? ? ? ?[data] => stdClass Object
> ? ? ? ? ? ? ?( ? ? ? ? ? ? ? ? ? ?[ID] => 885
> [user_login] => aarntzen ? ? ? ? ? ? ? ? ? ?[user_pass] =>
> $P$BFVck6WesTLX9SboEeNAaaaDxZQfx81 ? ? ? ? ? ? ? ? ? ?[user_nicename]
> => aarntzen ? ? ? ? ? ? ? ? ? ?[user_email] =>
> aarntzen at wpst.example.com ? ? ? ? ? ? ? ? ? ?[user_url] =>
> ? ? ? ?[user_registered] => 2012-06-19 14:53:28
> [user_activation_key] => ? ? ? ? ? ? ? ? ? ? [user_status] => 0
> ? ? ? ? ? ?[display_name] => Alejandro Arntzen ? ? ? ? ? ? ? ?)
> ? ? [ID] => 885 ? ? ? ? ? ?[caps] => Array ? ? ? ? ? ? ? ?(
> ? ? ? ? [subscriber] => 1 ? ? ? ? ? ? ? ?) ? ? ? ? ? ?[cap_key] =>
> wp_capabilities ? ? ? ? ? ?[roles] => Array ? ? ? ? ? ? ? ?(
> ? ? ? ? [0] => subscriber ? ? ? ? ? ? ? ?) ? ? ? ? ? ?[allcaps] =>
> Array ? ? ? ? ? ? ? ?( ? ? ? ? ? ? ? ? ? ?[read] => 1
> ?[level_0] => 1 ? ? ? ? ? ? ? ? ? ?[subscriber] => 1 ? ? ? ? ? ? ? ?)
> ? ? ? ? ? [filter] => ? ? ? ? )
>
> This is how I called it:
>
> ? ?$args = array(
> ? ? ? ?'fields' => 'all_with_meta'
> ? ? ? ,'exclude' => $exclude_id
> ? ? ? ,'number' => 25
> ? ?) ;
> $users = get_users($args) ;
>
> Am I missing something?


Yes, you're missing the power of "magic" methods. Just because you
don't see it in a var_dump() doesn't mean that it isn't there.

Your code works perfectly. Just ask it for the first and last names,
and you'll find that it returns them to you just fine.

foreach($users as $user) {
  echo $user->first_name.' '.$user->last_name;
}


-Otto

From mail at scribu.net  Wed Jun 20 16:38:41 2012
From: mail at scribu.net (scribu)
Date: Wed, 20 Jun 2012 19:38:41 +0300
Subject: [wp-hackers] Seeking SQL advice to identify performance problem
In-Reply-To: <CAJxFMSDf16YvVL-oDK3-ear81RjBt3bBnnZ_rFHLYUO6V-fUGA@mail.gmail.com>
References: <CAMg3evF4kae+cOWH168PP+TESsEhbBjF8Tsx4tpURCe9n-TzTw@mail.gmail.com>
	<CAMg3evHLbFzcCtxSnpM+T3n6JBTj-HbkcBGQMLxQE4S9J1RBEg@mail.gmail.com>
	<CAJxFMSDf16YvVL-oDK3-ear81RjBt3bBnnZ_rFHLYUO6V-fUGA@mail.gmail.com>
Message-ID: <CABzSYNOOX0xrp+0Frkpg5mGD4hdCQpzv4n0wCitHQHn=Zfs9VA@mail.gmail.com>

On Wed, Jun 20, 2012 at 4:52 PM, Simon Blackbourn <piemanek at gmail.com>wrote:

> You can use the get_users() function [1] with the 'fields' parameter set
> to 'all_with_meta', and then perform a usort on the results:
>
> $args = array(
> 'number'     => 1000000, //  unfortunately you can't use -1 here
> 'fields'     => 'all_with_meta', // required
>                        'exclude' => array( 1 ) // user IDs to exclude
> );
>
> $user_list = get_users( $args );
>

Actually, unlike WP_Query, users are not paginated by default, so if you
don't pass the 'number' parameter at all, you'll get all the users.

As for the "magic" that Otto mentioned, here's a blog post about it:
http://scribu.net/wordpress/the-magic-of-wp_user.html

-- 
http://scribu.net

From piemanek at gmail.com  Wed Jun 20 17:37:42 2012
From: piemanek at gmail.com (Simon Blackbourn)
Date: Wed, 20 Jun 2012 18:37:42 +0100
Subject: [wp-hackers] Seeking SQL advice to identify performance problem
In-Reply-To: <CABzSYNOOX0xrp+0Frkpg5mGD4hdCQpzv4n0wCitHQHn=Zfs9VA@mail.gmail.com>
References: <CAMg3evF4kae+cOWH168PP+TESsEhbBjF8Tsx4tpURCe9n-TzTw@mail.gmail.com>
	<CAMg3evHLbFzcCtxSnpM+T3n6JBTj-HbkcBGQMLxQE4S9J1RBEg@mail.gmail.com>
	<CAJxFMSDf16YvVL-oDK3-ear81RjBt3bBnnZ_rFHLYUO6V-fUGA@mail.gmail.com>
	<CABzSYNOOX0xrp+0Frkpg5mGD4hdCQpzv4n0wCitHQHn=Zfs9VA@mail.gmail.com>
Message-ID: <CAJxFMSBW_F6J7T=U_bDMENf_gJ=GC7q8-9yYnyQqr=fwo0sPEQ@mail.gmail.com>

>
>
> > 'number'     => 1000000, //  unfortunately you can't use -1 here
>
> Actually, unlike WP_Query, users are not paginated by default, so if you
> don't pass the 'number' parameter at all, you'll get all the users.
>
>

Sorry, yes you're right.

By the way, I just thought I'd say that this thread for me demonstrates a
perfect example of what as a developer I love about the direction WordPress
has taken: classes such as WP_User and associated functions like get_users
remove the need (in 99% of cases) to faff around with SQL, provide a
massive level of flexibility through the parameters array, and with things
like the meta_query parameter we have very similar syntax whether working
with posts, pages, attachments, users or whatever. Kudos to the people who
put all the thought & foresight into these kind of things.

From wpmidia at gmail.com  Wed Jun 20 20:31:08 2012
From: wpmidia at gmail.com (wpmidia lab)
Date: Wed, 20 Jun 2012 17:31:08 -0300
Subject: [wp-hackers] Pagination problem - Is this a bug?
Message-ID: <CADqS_aw88Hv+snudcmQspN7gMRObTjriOkwm-EzSgntwBDCW+Q@mail.gmail.com>

Hello masters!

I'm having problems with the paging of WordPress 3.4. I use the WP Pagenavi
plugin and before I upgrade, everything worked perfectly.

I used *print_r ($ wp_query)* to check what was being loaded. I could see
that in *found_posts *is bringing me only 10 posts. I have 10 posts and 19
custom posts, 29 posts should not be in found_posts?

After the third page, I get 404 error. Before it was not so, then just
thought it might be some kind of bug.

Anyone here noticed the same thing?

My index code: http://pastebin.com/N2CRmegW



Thanks in advance.
-- 
*M?riam de Paula *
*Twitter:* @miriamdepaula


*desenvolvimento web*
http://wpmidia.com.br
twitter: @wpmidia

*WordPress Brasil no Facebook:*
http://www.facebook.com/groups/wordpress.brasil

*OpenCart Brasil no Facebook:*
http://www.facebook.com/groups/opencart.brasil/

From bill.erickson at gmail.com  Wed Jun 20 21:07:02 2012
From: bill.erickson at gmail.com (Bill Erickson)
Date: Wed, 20 Jun 2012 16:07:02 -0500
Subject: [wp-hackers] Pagination problem - Is this a bug?
In-Reply-To: <CADqS_aw88Hv+snudcmQspN7gMRObTjriOkwm-EzSgntwBDCW+Q@mail.gmail.com>
References: <CADqS_aw88Hv+snudcmQspN7gMRObTjriOkwm-EzSgntwBDCW+Q@mail.gmail.com>
Message-ID: <CADvbF5pHidV2ArCJACk6KPbiWYh--b2SDokMNy7iGaMakGgo+Q@mail.gmail.com>

Never use query_posts. If you want to modify the main query, you need to
use the pre_get_posts hook.

On your site, WordPress 404's (rightly) before it gets to your code that
changes the query.

More information: http://www.billerickson.net/customize-the-wordpress-query/


---
Bill Erickson
WordPress Consultant
http://www.billerickson.net

NOTE: To better serve my clients, partners, and most importantly my family,
I've begun checking email only three times per day.

For phone calls, please schedule here: http://tungle.me/billerickson . If
it's an emergency, please call now and leave a voicemail



On Wed, Jun 20, 2012 at 3:31 PM, wpmidia lab <wpmidia at gmail.com> wrote:

> Hello masters!
>
> I'm having problems with the paging of WordPress 3.4. I use the WP Pagenavi
> plugin and before I upgrade, everything worked perfectly.
>
> I used *print_r ($ wp_query)* to check what was being loaded. I could see
> that in *found_posts *is bringing me only 10 posts. I have 10 posts and 19
> custom posts, 29 posts should not be in found_posts?
>
> After the third page, I get 404 error. Before it was not so, then just
> thought it might be some kind of bug.
>
> Anyone here noticed the same thing?
>
> My index code: http://pastebin.com/N2CRmegW
>
>
>
> Thanks in advance.
> --
> *M?riam de Paula *
> *Twitter:* @miriamdepaula
>
>
> *desenvolvimento web*
> http://wpmidia.com.br
> twitter: @wpmidia
>
> *WordPress Brasil no Facebook:*
> http://www.facebook.com/groups/wordpress.brasil
>
> *OpenCart Brasil no Facebook:*
> http://www.facebook.com/groups/opencart.brasil/
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From wpmidia at gmail.com  Wed Jun 20 21:59:25 2012
From: wpmidia at gmail.com (wpmidia lab)
Date: Wed, 20 Jun 2012 18:59:25 -0300
Subject: [wp-hackers] Pagination problem - Is this a bug?
In-Reply-To: <CADvbF5pHidV2ArCJACk6KPbiWYh--b2SDokMNy7iGaMakGgo+Q@mail.gmail.com>
References: <CADqS_aw88Hv+snudcmQspN7gMRObTjriOkwm-EzSgntwBDCW+Q@mail.gmail.com>
	<CADvbF5pHidV2ArCJACk6KPbiWYh--b2SDokMNy7iGaMakGgo+Q@mail.gmail.com>
Message-ID: <CADqS_azPc4n0hBJj9P-Gw+sk=yqVPq2yNr0KBBSpWAVqWhmX1Q@mail.gmail.com>

Hi Bill .... Thanks for your answer!

I did this:

add_action( 'pre_get_posts', 'change_query_from_home' );
function change_query_from_home( $query ) {

if( $query->is_main_query() && !is_admin() ) {
$query->set('post_type', array('post, lab'));
$query->set( 'posts_per_page', '3' );
$query->set( 'paged', get_query_var('paged') );
}
}

Now my index returns zero posts!!!

found_posts => 0

=(

I'm very sad...



2012/6/20 Bill Erickson <bill.erickson at gmail.com>

> Never use query_posts. If you want to modify the main query, you need to
> use the pre_get_posts hook.
>
> On your site, WordPress 404's (rightly) before it gets to your code that
> changes the query.
>
> More information:
> http://www.billerickson.net/customize-the-wordpress-query/
>
>
> ---
> Bill Erickson
> WordPress Consultant
> http://www.billerickson.net
>
> NOTE: To better serve my clients, partners, and most importantly my family,
> I've begun checking email only three times per day.
>
> For phone calls, please schedule here: http://tungle.me/billerickson . If
> it's an emergency, please call now and leave a voicemail
>
>
>
> On Wed, Jun 20, 2012 at 3:31 PM, wpmidia lab <wpmidia at gmail.com> wrote:
>
> > Hello masters!
> >
> > I'm having problems with the paging of WordPress 3.4. I use the WP
> Pagenavi
> > plugin and before I upgrade, everything worked perfectly.
> >
> > I used *print_r ($ wp_query)* to check what was being loaded. I could see
> > that in *found_posts *is bringing me only 10 posts. I have 10 posts and
> 19
> > custom posts, 29 posts should not be in found_posts?
> >
> > After the third page, I get 404 error. Before it was not so, then just
> > thought it might be some kind of bug.
> >
> > Anyone here noticed the same thing?
> >
> > My index code: http://pastebin.com/N2CRmegW
> >
> >
> >
> > Thanks in advance.
> > --
> > *M?riam de Paula *
> > *Twitter:* @miriamdepaula
> >
> >
> > *desenvolvimento web*
> > http://wpmidia.com.br
> > twitter: @wpmidia
> >
> > *WordPress Brasil no Facebook:*
> > http://www.facebook.com/groups/wordpress.brasil
> >
> > *OpenCart Brasil no Facebook:*
> > http://www.facebook.com/groups/opencart.brasil/
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers at lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> >
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>



-- 
*M?riam de Paula *
*Twitter:* @miriamdepaula


*desenvolvimento web*
http://wpmidia.com.br
twitter: @wpmidia

*WordPress Brasil no Facebook:*
http://www.facebook.com/groups/wordpress.brasil

*OpenCart Brasil no Facebook:*
http://www.facebook.com/groups/opencart.brasil/

From johnbillion+wp at gmail.com  Wed Jun 20 22:39:05 2012
From: johnbillion+wp at gmail.com (John Blackbourn)
Date: Wed, 20 Jun 2012 23:39:05 +0100
Subject: [wp-hackers] Pagination problem - Is this a bug?
In-Reply-To: <CADqS_azPc4n0hBJj9P-Gw+sk=yqVPq2yNr0KBBSpWAVqWhmX1Q@mail.gmail.com>
References: <CADqS_aw88Hv+snudcmQspN7gMRObTjriOkwm-EzSgntwBDCW+Q@mail.gmail.com>
	<CADvbF5pHidV2ArCJACk6KPbiWYh--b2SDokMNy7iGaMakGgo+Q@mail.gmail.com>
	<CADqS_azPc4n0hBJj9P-Gw+sk=yqVPq2yNr0KBBSpWAVqWhmX1Q@mail.gmail.com>
Message-ID: <CAOqAKWCXfOJsbxCQ9uirea0d-cLBpgBtsJ4KVBvN7LPYfv+BCA@mail.gmail.com>

On 20 June 2012 22:59, wpmidia lab <wpmidia at gmail.com> wrote:
> Hi Bill .... Thanks for your answer!
>
> I did this:
>
> add_action( 'pre_get_posts', 'change_query_from_home' );
> function change_query_from_home( $query ) {
>
> if( $query->is_main_query() && !is_admin() ) {
> $query->set('post_type', array('post, lab'));

^ The array in this line should be: array('post', 'lab')

John

> $query->set( 'posts_per_page', '3' );
> $query->set( 'paged', get_query_var('paged') );
> }
> }
>
> Now my index returns zero posts!!!
>
> found_posts => 0
>
> =(
>
> I'm very sad...
>
>
>
> 2012/6/20 Bill Erickson <bill.erickson at gmail.com>
>
>> Never use query_posts. If you want to modify the main query, you need to
>> use the pre_get_posts hook.
>>
>> On your site, WordPress 404's (rightly) before it gets to your code that
>> changes the query.
>>
>> More information:
>> http://www.billerickson.net/customize-the-wordpress-query/
>>
>>
>> ---
>> Bill Erickson
>> WordPress Consultant
>> http://www.billerickson.net
>>
>> NOTE: To better serve my clients, partners, and most importantly my family,
>> I've begun checking email only three times per day.
>>
>> For phone calls, please schedule here: http://tungle.me/billerickson . If
>> it's an emergency, please call now and leave a voicemail
>>
>>
>>
>> On Wed, Jun 20, 2012 at 3:31 PM, wpmidia lab <wpmidia at gmail.com> wrote:
>>
>> > Hello masters!
>> >
>> > I'm having problems with the paging of WordPress 3.4. I use the WP
>> Pagenavi
>> > plugin and before I upgrade, everything worked perfectly.
>> >
>> > I used *print_r ($ wp_query)* to check what was being loaded. I could see
>> > that in *found_posts *is bringing me only 10 posts. I have 10 posts and
>> 19
>> > custom posts, 29 posts should not be in found_posts?
>> >
>> > After the third page, I get 404 error. Before it was not so, then just
>> > thought it might be some kind of bug.
>> >
>> > Anyone here noticed the same thing?
>> >
>> > My index code: http://pastebin.com/N2CRmegW
>> >
>> >
>> >
>> > Thanks in advance.
>> > --
>> > *M?riam de Paula *
>> > *Twitter:* @miriamdepaula
>> >
>> >
>> > *desenvolvimento web*
>> > http://wpmidia.com.br
>> > twitter: @wpmidia
>> >
>> > *WordPress Brasil no Facebook:*
>> > http://www.facebook.com/groups/wordpress.brasil
>> >
>> > *OpenCart Brasil no Facebook:*
>> > http://www.facebook.com/groups/opencart.brasil/
>> > _______________________________________________
>> > wp-hackers mailing list
>> > wp-hackers at lists.automattic.com
>> > http://lists.automattic.com/mailman/listinfo/wp-hackers
>> >
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
>
>
>
> --
> *M?riam de Paula *
> *Twitter:* @miriamdepaula
>
>
> *desenvolvimento web*
> http://wpmidia.com.br
> twitter: @wpmidia
>
> *WordPress Brasil no Facebook:*
> http://www.facebook.com/groups/wordpress.brasil
>
> *OpenCart Brasil no Facebook:*
> http://www.facebook.com/groups/opencart.brasil/
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

From wpmidia at gmail.com  Wed Jun 20 22:55:04 2012
From: wpmidia at gmail.com (wpmidia lab)
Date: Wed, 20 Jun 2012 19:55:04 -0300
Subject: [wp-hackers] Pagination problem - Is this a bug?
In-Reply-To: <CAOqAKWCXfOJsbxCQ9uirea0d-cLBpgBtsJ4KVBvN7LPYfv+BCA@mail.gmail.com>
References: <CADqS_aw88Hv+snudcmQspN7gMRObTjriOkwm-EzSgntwBDCW+Q@mail.gmail.com>
	<CADvbF5pHidV2ArCJACk6KPbiWYh--b2SDokMNy7iGaMakGgo+Q@mail.gmail.com>
	<CADqS_azPc4n0hBJj9P-Gw+sk=yqVPq2yNr0KBBSpWAVqWhmX1Q@mail.gmail.com>
	<CAOqAKWCXfOJsbxCQ9uirea0d-cLBpgBtsJ4KVBvN7LPYfv+BCA@mail.gmail.com>
Message-ID: <CADqS_ayVNWr1ATduBAc=ESHG0xwRDfubpTVGqwuRaRVgVvcnKw@mail.gmail.com>

Thank you John!!!

Works! Now  [found_posts] => 29

Thanks Bill and John! I will return to my WordPress 3.4 tests! =)



Miriam de Paula

2012/6/20 John Blackbourn <johnbillion+wp at gmail.com>

> On 20 June 2012 22:59, wpmidia lab <wpmidia at gmail.com> wrote:
> > Hi Bill .... Thanks for your answer!
> >
> > I did this:
> >
> > add_action( 'pre_get_posts', 'change_query_from_home' );
> > function change_query_from_home( $query ) {
> >
> > if( $query->is_main_query() && !is_admin() ) {
> > $query->set('post_type', array('post, lab'));
>
> ^ The array in this line should be: array('post', 'lab')
>
> John
>
> > $query->set( 'posts_per_page', '3' );
> > $query->set( 'paged', get_query_var('paged') );
> > }
> > }
> >
> > Now my index returns zero posts!!!
> >
> > found_posts => 0
> >
> > =(
> >
> > I'm very sad...
> >
> >
> >
> > 2012/6/20 Bill Erickson <bill.erickson at gmail.com>
> >
> >> Never use query_posts. If you want to modify the main query, you need to
> >> use the pre_get_posts hook.
> >>
> >> On your site, WordPress 404's (rightly) before it gets to your code that
> >> changes the query.
> >>
> >> More information:
> >> http://www.billerickson.net/customize-the-wordpress-query/
> >>
> >>
> >> ---
> >> Bill Erickson
> >> WordPress Consultant
> >> http://www.billerickson.net
> >>
> >> NOTE: To better serve my clients, partners, and most importantly my
> family,
> >> I've begun checking email only three times per day.
> >>
> >> For phone calls, please schedule here: http://tungle.me/billerickson .
> If
> >> it's an emergency, please call now and leave a voicemail
> >>
> >>
> >>
> >> On Wed, Jun 20, 2012 at 3:31 PM, wpmidia lab <wpmidia at gmail.com> wrote:
> >>
> >> > Hello masters!
> >> >
> >> > I'm having problems with the paging of WordPress 3.4. I use the WP
> >> Pagenavi
> >> > plugin and before I upgrade, everything worked perfectly.
> >> >
> >> > I used *print_r ($ wp_query)* to check what was being loaded. I could
> see
> >> > that in *found_posts *is bringing me only 10 posts. I have 10 posts
> and
> >> 19
> >> > custom posts, 29 posts should not be in found_posts?
> >> >
> >> > After the third page, I get 404 error. Before it was not so, then just
> >> > thought it might be some kind of bug.
> >> >
> >> > Anyone here noticed the same thing?
> >> >
> >> > My index code: http://pastebin.com/N2CRmegW
> >> >
> >> >
> >> >
> >> > Thanks in advance.
> >> > --
> >> > *M?riam de Paula *
> >> > *Twitter:* @miriamdepaula
> >> >
> >> >
> >> > *desenvolvimento web*
> >> > http://wpmidia.com.br
> >> > twitter: @wpmidia
> >> >
> >> > *WordPress Brasil no Facebook:*
> >> > http://www.facebook.com/groups/wordpress.brasil
> >> >
> >> > *OpenCart Brasil no Facebook:*
> >> > http://www.facebook.com/groups/opencart.brasil/
> >> > _______________________________________________
> >> > wp-hackers mailing list
> >> > wp-hackers at lists.automattic.com
> >> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> >> >
> >> _______________________________________________
> >> wp-hackers mailing list
> >> wp-hackers at lists.automattic.com
> >> http://lists.automattic.com/mailman/listinfo/wp-hackers
> >>
> >
> >
> >
> > --
> > *M?riam de Paula *
> > *Twitter:* @miriamdepaula
> >
> >
> > *desenvolvimento web*
> > http://wpmidia.com.br
> > twitter: @wpmidia
> >
> > *WordPress Brasil no Facebook:*
> > http://www.facebook.com/groups/wordpress.brasil
> >
> > *OpenCart Brasil no Facebook:*
> > http://www.facebook.com/groups/opencart.brasil/
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers at lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>



-- 
*M?riam de Paula *
*Twitter:* @miriamdepaula


*desenvolvimento web*
http://wpmidia.com.br
twitter: @wpmidia

*WordPress Brasil no Facebook:*
http://www.facebook.com/groups/wordpress.brasil

*OpenCart Brasil no Facebook:*
http://www.facebook.com/groups/opencart.brasil/

From jnolte at getmoxied.net  Thu Jun 21 17:02:26 2012
From: jnolte at getmoxied.net (Jeffrey Nolte)
Date: Thu, 21 Jun 2012 13:02:26 -0400
Subject: [wp-hackers] Best Practice for Mobile WP View
Message-ID: <9153C94F-420D-471E-96EF-C7E22AAD2E36@getmoxied.net>

We are on the process of building a mobile site in WordPress.  

I would like to get some insight on best practice for configuring the site. I have listed some details below.
Site is current in WP on http://site.com
We would like to have mobile on http://m.site.com
Both domains / views / sites will use the same database and assets (images attached to posts, etc)
Our ideas for implementation were to configure another WordPress(http://m.site.com) on the same server as using http://site.com and connecting this new WP install to the existing db (http://site.com).

I know there may be a better way hence me reaching out to the community.

Thank you in advance,

Jeffrey Nolte
Moxie Media Group, Inc.



From halukkaramete at gmail.com  Thu Jun 21 19:08:38 2012
From: halukkaramete at gmail.com (Haluk Karamete)
Date: Thu, 21 Jun 2012 12:08:38 -0700
Subject: [wp-hackers] preventing the duplicate wp_insert_post effect
Message-ID: <CAHERW=2F3G8jRRh=fh4y4jaWUVQVnwEY_CtDeuyPVxaquKcR+g@mail.gmail.com>

This is all part of a migration routine I wrote where a while loop
goes thru 15,000 records from an ms-sql table and converts each record
into a post_data array to be fed into the wp_insert_post API.
Technically, since I'm dealing with 15000 recs in ms-sql, I should end
up with 15000 posts in a fresh installed wp_posts table. Right? In my
case, I sometimes get 16000, sometimes 290000. It's never the same.
Everytime is different. I'm almost to the point to re-write the code.
But if the culprit itself the wp_insert_post and some internal wp
process or wordpress cache that I do not know of or mysql server
config and or and or and or... , even the new approach won't work.

After some research, I've come to learm I'm not alone on this. But
from what I read, I could not get a wrapper around it.

As I said above, I create the posts going thru a while loop.

Since the process takes a long time, I had to build a custom time-out
module. As the code goes thru the iterations of the while loop, it
marks its process into a time_out table, and siince I got a watch dog
page that's running in an iframe to keep an eye on the time_out
table's progress, even if the bottom frame ( the one that handles the
ms-sql to wp_posts process ) times out, I know from what record to
kick start the process.

This way I do not have to sit in front of the computer to keep
clicking on 'continue'. link.

Well, this trick works on all of my implementations that are severed
by timeouts . I eventually end up getting the whole table is processed
and the watch dog iframe stops refreshing when the number of records
to be processed is equal to the number of records that have been
processed in the last instance. So the time-out module works perfectly
except....

Only and only when the destination table is wp_posts and when the the
wp_insert_post API is involved, I get a problem.

After the first time-out, things start getting hay-wired.


From halukkaramete at gmail.com  Fri Jun 22 00:12:00 2012
From: halukkaramete at gmail.com (Haluk Karamete)
Date: Thu, 21 Jun 2012 17:12:00 -0700
Subject: [wp-hackers] preventing the duplicate wp_insert_post effect
In-Reply-To: <CAHERW=2F3G8jRRh=fh4y4jaWUVQVnwEY_CtDeuyPVxaquKcR+g@mail.gmail.com>
References: <CAHERW=2F3G8jRRh=fh4y4jaWUVQVnwEY_CtDeuyPVxaquKcR+g@mail.gmail.com>
Message-ID: <CAHERW=1Rw+xQV55iPPUtN6U4Wqsi-EWHdQG0V4fdmpnSapx5Nw@mail.gmail.com>

One discovery...

If I change the  "wp_insert_post"  to wpdb->insert and use a straight
wpdb insert, there are no problems. So this is all comes down to the
wp_insert_post.

On Thu, Jun 21, 2012 at 12:08 PM, Haluk Karamete
<halukkaramete at gmail.com> wrote:
> This is all part of a migration routine I wrote where a while loop
> goes thru 15,000 records from an ms-sql table and converts each record
> into a post_data array to be fed into the wp_insert_post API.
> Technically, since I'm dealing with 15000 recs in ms-sql, I should end
> up with 15000 posts in a fresh installed wp_posts table. Right? In my
> case, I sometimes get 16000, sometimes 290000. It's never the same.
> Everytime is different. I'm almost to the point to re-write the code.
> But if the culprit itself the wp_insert_post and some internal wp
> process or wordpress cache that I do not know of or mysql server
> config and or and or and or... , even the new approach won't work.
>
> After some research, I've come to learm I'm not alone on this. But
> from what I read, I could not get a wrapper around it.
>
> As I said above, I create the posts going thru a while loop.
>
> Since the process takes a long time, I had to build a custom time-out
> module. As the code goes thru the iterations of the while loop, it
> marks its process into a time_out table, and siince I got a watch dog
> page that's running in an iframe to keep an eye on the time_out
> table's progress, even if the bottom frame ( the one that handles the
> ms-sql to wp_posts process ) times out, I know from what record to
> kick start the process.
>
> This way I do not have to sit in front of the computer to keep
> clicking on 'continue'. link.
>
> Well, this trick works on all of my implementations that are severed
> by timeouts . I eventually end up getting the whole table is processed
> and the watch dog iframe stops refreshing when the number of records
> to be processed is equal to the number of records that have been
> processed in the last instance. So the time-out module works perfectly
> except....
>
> Only and only when the destination table is wp_posts and when the the
> wp_insert_post API is involved, I get a problem.
>
> After the first time-out, things start getting hay-wired.
>
> From time to time, wp_insert_post ends up firing twice/thrice causing
> the same record to be inserted multiple times.
>
> To remedy the situation, I've tried 3 different techniques including
> the use of custom fields, but no luck. I also tried inserting a unique
> key into the post itself to minimize the database activity. I found
> this is better cause it avoids the involvement of custom fields, and
> yet achieves the same goal. I put the source_key ( which is something
> like --{$db_name}.{$table_name}.{$recid_value}-- ) in the post and
> at_insert_time , I just check the existence of that key ( using like
> operator ) to see if that post was added previously. but even that
> fails... Wp_insert_post surprisingly creates double records. and up
> until now, I simply cannot pin-down the occurrence of the problem.
>
> I read this, Prevent duplicate posts in wp_insert_post using custom
> fields But my techniques were simply alternatives to it.
>
> Here is a cut-down code of how I do it...
>
> while ($row = mysql_fetch_assoc($RS)) :
>
> ? ? ? ?$source_recid = $row['source_recid'];
> ? ? ? ?//source_recid is something like db.table.tablerecid
> ? ? ? ? ? ?//example services.media.1223
>
> ? ? ? ?$post_data['post_content'] = $row['some_field_thats_got_page_content'];
>
> ? ? ? ?//append the source_recid to the post data in forms of an html
> comment for uniqueness purposes
> ? ? ? ?$post_data['post_content'] = $post_data['post_content'] .
> "<!--{$source_recid}-->";
>
> ? ? ? ?//do the other stuff... ( shortened here for the clarify purposes... )
>
> ? ? ? ?....
>
> ? ? ? ?$post_data['post_status'] = 'publish';
>
> ? ? ? ?Insert_or_UpdatePost($dbh,$post_data,$source_recid,$post_id);
>
>
> ? ? ? ?if ($post_id==0):
>
> ? ? ? ? ? ?//log the error and move on
>
> ? ? ? ? ? ?continue;
>
> ? ? ? ?endif;
>
>
> endwhile;
>
> function Insert_or_UpdatePost($dbh,$post_data,$source_recid,&$post_id){
>
> ? ? ? ?// this function first looks up the --db.table.tablerecid-- sequence
> ? ? ? ?// across all wp_posts post_content field
> ? ? ? ?// in determining if this record has been already INSERTed!
>
> ? ? ? ?// and depending on the outcome, it does an insert or update
> ? ? ? ?// and return the $post_id accordingly
>
> ? ? ? ?// if the function determines there are no such records,
> ? ? ? ?// then and only then, it runs the wp_insert_post!
>
> ? ? ? ?// if the function determines that there is a post like that,
> ? ? ? ?// it retrieves the post_id
> ? ? ? ?// and then switches to operation
> ? ? ? ?// to use the wp_update_post instead!
>
> ? ? ? ?// with this approach, technically speaking,
> ? ? ? ?// it should impossible to run wp_insert_post on an existing post!
>
> ? ? ? ?// and yet, I still get duplicate posts...
>
> ? ? ? ?// here we go;
>
> ? ? ? ?$post_id_probed = blp_sql_getdbvals($dbh,"select id from
> wp_posts where post_content LIKE '%--{$source_recid}--%'");
>
> ? ? ? ?if (blp_isnumber($post_id_probed)):
> ? ? ? ? ? ?$post_id = $post_id_probed;
>
> ? ? ? ? ? ?$post_data['ID'] = $post_id;
> ? ? ? ? ? ?$post_id = wp_update_post( $post_data );
>
> ? ? ? ? ? ?if ($post_id == 0):
>
> ? ? ? ? ? ? ? ?//add error
>
> ? ? ? ? ? ? ? ?return FALSE;
>
>
> ? ? ? ? ? ?else:
>
> ? ? ? ? ? ? ? ?update_post_meta($post_id, "wpcf-blp-migration-date",
> blp_now('mysql'));
>
> ? ? ? ? ? ? ? ?return TRUE;
>
> ? ? ? ? ? ?endif;
>
>
> ? ? ? ? endif;
>
> ? ? ? ? // if we make it this part, it means only one thing!
> ? ? ? ? // there is no post for the db.table.tablerecid yet,
> ? ? ? ? // so do the insert!
>
> ? ? ? ?$post_id = wp_insert_post( $post_data );
>
>
>
> ? ? ? ?if ($post_id == 0):
>
> ? ? ? ? ? ?//add error
>
> ? ? ? ? ? ?return FALSE;
>
>
> ? ? ? ?else:
>
> ? ? ? ? ? ?//add_post_meta($post_id, "wpcf-blp-migration-source",
> $source_recid,TRUE);
> ? ? ? ? ? ?//no need for that anymore
>
> ? ? ? ? ? ?return TRUE;
>
>
> ? ? ? ?endif;
>
>
> }
>
> There is also a post I created at wordpress.stackexchange site.
>
> http://wordpress.stackexchange.com/questions/19732/prevent-duplicate-posts-in-wp-insert-post-using-custom-fields

From brenda at redletterdesign.net  Fri Jun 22 13:03:59 2012
From: brenda at redletterdesign.net (Brenda Egeland)
Date: Fri, 22 Jun 2012 09:03:59 -0400
Subject: [wp-hackers] Rewrite rule for pages from old site
Message-ID: <0DEF35A1-B5C5-4431-893C-BC4E1F67EF64@redletterdesign.net>

I am converting a non-WP site to WP. There are hundreds of files in the form:sermons/sermon20120325.php

These can be found on the new site at /sermon/2012/03/25?post_type=sermon 

Sermon is a custom post type. I've tried add this to my functions.php for a custom rewrite rule:

add_action('init', 'find_old_sermons');
function find_old_sermons() {
  add_rewrite_tag("%sermons%", '([^/]*)'); 
  add_rewrite_rule(
    '^/sermons/sermon([0-9]{4})([0-9]{2})([0-9]{2})\.php?',
    '$matches[1]/$matches[2]/$matches[3]?post_type=sermon',
    'top'
  );
}

But I keep getting a sorry...not found. I've tried resaving the permalinks in the Settings panel, and still no luck.

Thanks for your help.

Brenda Egeland
Red Letter Design
www.RedLetterDesign.net
301-260-7545




From ipstenu at ipstenu.org  Fri Jun 22 13:13:53 2012
From: ipstenu at ipstenu.org (Mika A Epstein)
Date: Fri, 22 Jun 2012 08:13:53 -0500
Subject: [wp-hackers] Rewrite rule for pages from old site
In-Reply-To: <0DEF35A1-B5C5-4431-893C-BC4E1F67EF64@redletterdesign.net>
References: <0DEF35A1-B5C5-4431-893C-BC4E1F67EF64@redletterdesign.net>
Message-ID: <0FD1E6D1-26B6-4E70-A3BE-A6096D1F6F70@ipstenu.org>

Why not just do it in .htaccess directly?

RewriteRule ^sermons/([0-9]{4})([0-9]{2})([0-9]{2}).php?$ /sermon/$1/$2/$3?post_type=sermon [L,R=301]

(Caveat - Elf is still on that first cuppa)

Though why do you need the extra post_type on the end? The new CPT URLs should be /cpt/title/ normally, you don't generally push YMD in there (I know you can, but the guy who wrote the plugin for it dropped support because it was somewhat a bad idea).

----
Mika A Epstein (aka Ipstenu)
http://ipstenu.org | http://halfelf.org

On 22 Jun 2012, at 8:03:59AM, Brenda Egeland wrote:

> I am converting a non-WP site to WP. There are hundreds of files in the form:sermons/sermon20120325.php
> 
> These can be found on the new site at /sermon/2012/03/25?post_type=sermon 
> 
> Sermon is a custom post type. I've tried add this to my functions.php for a custom rewrite rule:
> 
> add_action('init', 'find_old_sermons');
> function find_old_sermons() {
>  add_rewrite_tag("%sermons%", '([^/]*)'); 
>  add_rewrite_rule(
>    '^/sermons/sermon([0-9]{4})([0-9]{2})([0-9]{2})\.php?',
>    '$matches[1]/$matches[2]/$matches[3]?post_type=sermon',
>    'top'
>  );
> }
> 
> But I keep getting a sorry...not found. I've tried resaving the permalinks in the Settings panel, and still no luck.
> 
> Thanks for your help.
> 
> Brenda Egeland
> Red Letter Design
> www.RedLetterDesign.net
> 301-260-7545
> 
> 
> 
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers


From otto at ottodestruct.com  Fri Jun 22 13:23:22 2012
From: otto at ottodestruct.com (Otto)
Date: Fri, 22 Jun 2012 08:23:22 -0500
Subject: [wp-hackers] Rewrite rule for pages from old site
In-Reply-To: <0DEF35A1-B5C5-4431-893C-BC4E1F67EF64@redletterdesign.net>
References: <0DEF35A1-B5C5-4431-893C-BC4E1F67EF64@redletterdesign.net>
Message-ID: <CAD-Fghz9XH54Nyx2XEfh5HF=Zq=xdMv1vuxtcq2zVPxP=dnKSg@mail.gmail.com>

On Fri, Jun 22, 2012 at 8:03 AM, Brenda Egeland
<brenda at redletterdesign.net> wrote:
> Sermon is a custom post type. I've tried add this to my functions.php for a custom rewrite rule:
>
> ?add_rewrite_rule(
> ? ?'^/sermons/sermon([0-9]{4})([0-9]{2})([0-9]{2})\.php?',
> ? ?'$matches[1]/$matches[2]/$matches[3]?post_type=sermon',
> ? ?'top'
> ?);
>
> But I keep getting a sorry...not found. I've tried resaving the permalinks in the Settings panel, and still no luck.

That isn't how rewrite rules work.

You're trying to rewrite the old .php based URL into the new "pretty"
url, but what a rewrite rule in WP does is to convert a "pretty" URL
into a "default" URL. Default is that thing with ?p=123&year=2012 and
so forth.

In other words, you can do what you want, but the second part of the
rewrite rule needs to be "non-pretty".


?add_rewrite_rule(
 ? ?'^/sermons/sermon([0-9]{4})([0-9]{2})([0-9]{2})\.php?',
 ? ?'index.php?post_type=sermon&year=$matches[1]&month=$matches[2]&day=$matches[3]',
 ? ?'top'
 ?);

Or something like that. Didn't test it specifically, might be wrong.

But that won't redirect the old URL to the new one, that will just
make the old URL work and show the proper content.


If you're wanting to actually REDIRECT from the old format to the new
one, then you're doing it wrong. add_rewrite_rule can't do that
directly. (Well, it *can*, it's just a bit pointless to do it that
way). If you want to redirect from the old to the new, then putting a
RewriteRule directly into the .htaccess (as Mika suggested previously)
is the simpler and easier way.

-Otto

From taylor.d.young at gmail.com  Fri Jun 22 14:42:15 2012
From: taylor.d.young at gmail.com (taylor young)
Date: Fri, 22 Jun 2012 09:42:15 -0500
Subject: [wp-hackers] Best Practice for Mobile WP View
Message-ID: <CAFzLAweY0uegrAgDY4yNiMjePZ=QmYfsc=unjcj6rr3tx2v4gw@mail.gmail.com>

Use media queries to change the layout, use the same markup, and the same
domain.

http://adstexas.com
http://modassicmarketing.com

-Taylor

On Fri, Jun 22, 2012 at 7:00 AM, <wp-hackers-request at lists.automattic.com>wrote:

> Send wp-hackers mailing list submissions to
>        wp-hackers at lists.automattic.com
>
> To subscribe or unsubscribe via the World Wide Web, visit
>        http://lists.automattic.com/mailman/listinfo/wp-hackers
> or, via email, send a message with subject or body 'help' to
>        wp-hackers-request at lists.automattic.com
>
> You can reach the person managing the list at
>        wp-hackers-owner at lists.automattic.com
>
> When replying, please edit your Subject line so it is more specific
> than "Re: Contents of wp-hackers digest..."
>
>
> Today's Topics:
>
>   1. Best Practice for Mobile WP View (Jeffrey Nolte)
>   2. preventing the duplicate wp_insert_post effect (Haluk Karamete)
>   3. Re: preventing the duplicate wp_insert_post effect
>      (Haluk Karamete)
>
>
> ----------------------------------------------------------------------
>
> Message: 1
> Date: Thu, 21 Jun 2012 13:02:26 -0400
> From: Jeffrey Nolte <jnolte at getmoxied.net>
> Subject: [wp-hackers] Best Practice for Mobile WP View
> To: Wp Hackers <wp-hackers at lists.automattic.com>
> Message-ID: <9153C94F-420D-471E-96EF-C7E22AAD2E36 at getmoxied.net>
> Content-Type: text/plain;       charset=us-ascii
>
> We are on the process of building a mobile site in WordPress.
>
> I would like to get some insight on best practice for configuring the
> site. I have listed some details below.
> Site is current in WP on http://site.com
> We would like to have mobile on http://m.site.com
> Both domains / views / sites will use the same database and assets (images
> attached to posts, etc)
> Our ideas for implementation were to configure another WordPress(
> http://m.site.com) on the same server as using http://site.com and
> connecting this new WP install to the existing db (http://site.com).
>
> I know there may be a better way hence me reaching out to the community.
>
> Thank you in advance,
>
> Jeffrey Nolte
> Moxie Media Group, Inc.
>
>
>
>
> ------------------------------
>
> Message: 2
> Date: Thu, 21 Jun 2012 12:08:38 -0700
> From: Haluk Karamete <halukkaramete at gmail.com>
> Subject: [wp-hackers] preventing the duplicate wp_insert_post effect
> To: wp-hackers at lists.automattic.com
> Message-ID:
>        <CAHERW=2F3G8jRRh=fh4y4jaWUVQVnwEY_CtDeuyPVxaquKcR+g at mail.gmail.com
> >
> Content-Type: text/plain; charset=ISO-8859-1
>
> This is all part of a migration routine I wrote where a while loop
> goes thru 15,000 records from an ms-sql table and converts each record
> into a post_data array to be fed into the wp_insert_post API.
> Technically, since I'm dealing with 15000 recs in ms-sql, I should end
> up with 15000 posts in a fresh installed wp_posts table. Right? In my
> case, I sometimes get 16000, sometimes 290000. It's never the same.
> Everytime is different. I'm almost to the point to re-write the code.
> But if the culprit itself the wp_insert_post and some internal wp
> process or wordpress cache that I do not know of or mysql server
> config and or and or and or... , even the new approach won't work.
>
> After some research, I've come to learm I'm not alone on this. But
> from what I read, I could not get a wrapper around it.
>
> As I said above, I create the posts going thru a while loop.
>
> Since the process takes a long time, I had to build a custom time-out
> module. As the code goes thru the iterations of the while loop, it
> marks its process into a time_out table, and siince I got a watch dog
> page that's running in an iframe to keep an eye on the time_out
> table's progress, even if the bottom frame ( the one that handles the
> ms-sql to wp_posts process ) times out, I know from what record to
> kick start the process.
>
> This way I do not have to sit in front of the computer to keep
> clicking on 'continue'. link.
>
> Well, this trick works on all of my implementations that are severed
> by timeouts . I eventually end up getting the whole table is processed
> and the watch dog iframe stops refreshing when the number of records
> to be processed is equal to the number of records that have been
> processed in the last instance. So the time-out module works perfectly
> except....
>
> Only and only when the destination table is wp_posts and when the the
> wp_insert_post API is involved, I get a problem.
>
> After the first time-out, things start getting hay-wired.
>
> >From time to time, wp_insert_post ends up firing twice/thrice causing
> the same record to be inserted multiple times.
>
> To remedy the situation, I've tried 3 different techniques including
> the use of custom fields, but no luck. I also tried inserting a unique
> key into the post itself to minimize the database activity. I found
> this is better cause it avoids the involvement of custom fields, and
> yet achieves the same goal. I put the source_key ( which is something
> like --{$db_name}.{$table_name}.{$recid_value}-- ) in the post and
> at_insert_time , I just check the existence of that key ( using like
> operator ) to see if that post was added previously. but even that
> fails... Wp_insert_post surprisingly creates double records. and up
> until now, I simply cannot pin-down the occurrence of the problem.
>
> I read this, Prevent duplicate posts in wp_insert_post using custom
> fields But my techniques were simply alternatives to it.
>
> Here is a cut-down code of how I do it...
>
> while ($row = mysql_fetch_assoc($RS)) :
>
>        $source_recid = $row['source_recid'];
>        //source_recid is something like db.table.tablerecid
>            //example services.media.1223
>
>        $post_data['post_content'] =
> $row['some_field_thats_got_page_content'];
>
>        //append the source_recid to the post data in forms of an html
> comment for uniqueness purposes
>        $post_data['post_content'] = $post_data['post_content'] .
> "<!--{$source_recid}-->";
>
>        //do the other stuff... ( shortened here for the clarify
> purposes... )
>
>        ....
>
>        $post_data['post_status'] = 'publish';
>
>        Insert_or_UpdatePost($dbh,$post_data,$source_recid,$post_id);
>
>
>        if ($post_id==0):
>
>            //log the error and move on
>
>            continue;
>
>        endif;
>
>
> endwhile;
>
> function Insert_or_UpdatePost($dbh,$post_data,$source_recid,&$post_id){
>
>        // this function first looks up the --db.table.tablerecid-- sequence
>        // across all wp_posts post_content field
>        // in determining if this record has been already INSERTed!
>
>        // and depending on the outcome, it does an insert or update
>        // and return the $post_id accordingly
>
>        // if the function determines there are no such records,
>        // then and only then, it runs the wp_insert_post!
>
>        // if the function determines that there is a post like that,
>        // it retrieves the post_id
>        // and then switches to operation
>        // to use the wp_update_post instead!
>
>        // with this approach, technically speaking,
>        // it should impossible to run wp_insert_post on an existing post!
>
>        // and yet, I still get duplicate posts...
>
>        // here we go;
>
>        $post_id_probed = blp_sql_getdbvals($dbh,"select id from
> wp_posts where post_content LIKE '%--{$source_recid}--%'");
>
>        if (blp_isnumber($post_id_probed)):
>            $post_id = $post_id_probed;
>
>            $post_data['ID'] = $post_id;
>            $post_id = wp_update_post( $post_data );
>
>            if ($post_id == 0):
>
>                //add error
>
>                return FALSE;
>
>
>            else:
>
>                update_post_meta($post_id, "wpcf-blp-migration-date",
> blp_now('mysql'));
>
>                return TRUE;
>
>            endif;
>
>
>         endif;
>
>         // if we make it this part, it means only one thing!
>         // there is no post for the db.table.tablerecid yet,
>         // so do the insert!
>
>        $post_id = wp_insert_post( $post_data );
>
>
>
>        if ($post_id == 0):
>
>            //add error
>
>            return FALSE;
>
>
>        else:
>
>            //add_post_meta($post_id, "wpcf-blp-migration-source",
> $source_recid,TRUE);
>            //no need for that anymore
>
>            return TRUE;
>
>
>        endif;
>
>
> }
>
> There is also a post I created at wordpress.stackexchange site.
>
>
> http://wordpress.stackexchange.com/questions/19732/prevent-duplicate-posts-in-wp-insert-post-using-custom-fields
>
>
> ------------------------------
>
> Message: 3
> Date: Thu, 21 Jun 2012 17:12:00 -0700
> From: Haluk Karamete <halukkaramete at gmail.com>
> Subject: Re: [wp-hackers] preventing the duplicate wp_insert_post
>        effect
> To: wp-hackers at lists.automattic.com
> Message-ID:
>        <CAHERW=1Rw+xQV55iPPUtN6U4Wqsi-EWHdQG0V4fdmpnSapx5Nw at mail.gmail.com
> >
> Content-Type: text/plain; charset=ISO-8859-1
>
> One discovery...
>
> If I change the  "wp_insert_post"  to wpdb->insert and use a straight
> wpdb insert, there are no problems. So this is all comes down to the
> wp_insert_post.
>
> On Thu, Jun 21, 2012 at 12:08 PM, Haluk Karamete
> <halukkaramete at gmail.com> wrote:
> > This is all part of a migration routine I wrote where a while loop
> > goes thru 15,000 records from an ms-sql table and converts each record
> > into a post_data array to be fed into the wp_insert_post API.
> > Technically, since I'm dealing with 15000 recs in ms-sql, I should end
> > up with 15000 posts in a fresh installed wp_posts table. Right? In my
> > case, I sometimes get 16000, sometimes 290000. It's never the same.
> > Everytime is different. I'm almost to the point to re-write the code.
> > But if the culprit itself the wp_insert_post and some internal wp
> > process or wordpress cache that I do not know of or mysql server
> > config and or and or and or... , even the new approach won't work.
> >
> > After some research, I've come to learm I'm not alone on this. But
> > from what I read, I could not get a wrapper around it.
> >
> > As I said above, I create the posts going thru a while loop.
> >
> > Since the process takes a long time, I had to build a custom time-out
> > module. As the code goes thru the iterations of the while loop, it
> > marks its process into a time_out table, and siince I got a watch dog
> > page that's running in an iframe to keep an eye on the time_out
> > table's progress, even if the bottom frame ( the one that handles the
> > ms-sql to wp_posts process ) times out, I know from what record to
> > kick start the process.
> >
> > This way I do not have to sit in front of the computer to keep
> > clicking on 'continue'. link.
> >
> > Well, this trick works on all of my implementations that are severed
> > by timeouts . I eventually end up getting the whole table is processed
> > and the watch dog iframe stops refreshing when the number of records
> > to be processed is equal to the number of records that have been
> > processed in the last instance. So the time-out module works perfectly
> > except....
> >
> > Only and only when the destination table is wp_posts and when the the
> > wp_insert_post API is involved, I get a problem.
> >
> > After the first time-out, things start getting hay-wired.
> >
> > From time to time, wp_insert_post ends up firing twice/thrice causing
> > the same record to be inserted multiple times.
> >
> > To remedy the situation, I've tried 3 different techniques including
> > the use of custom fields, but no luck. I also tried inserting a unique
> > key into the post itself to minimize the database activity. I found
> > this is better cause it avoids the involvement of custom fields, and
> > yet achieves the same goal. I put the source_key ( which is something
> > like --{$db_name}.{$table_name}.{$recid_value}-- ) in the post and
> > at_insert_time , I just check the existence of that key ( using like
> > operator ) to see if that post was added previously. but even that
> > fails... Wp_insert_post surprisingly creates double records. and up
> > until now, I simply cannot pin-down the occurrence of the problem.
> >
> > I read this, Prevent duplicate posts in wp_insert_post using custom
> > fields But my techniques were simply alternatives to it.
> >
> > Here is a cut-down code of how I do it...
> >
> > while ($row = mysql_fetch_assoc($RS)) :
> >
> > ? ? ? ?$source_recid = $row['source_recid'];
> > ? ? ? ?//source_recid is something like db.table.tablerecid
> > ? ? ? ? ? ?//example services.media.1223
> >
> > ? ? ? ?$post_data['post_content'] =
> $row['some_field_thats_got_page_content'];
> >
> > ? ? ? ?//append the source_recid to the post data in forms of an html
> > comment for uniqueness purposes
> > ? ? ? ?$post_data['post_content'] = $post_data['post_content'] .
> > "<!--{$source_recid}-->";
> >
> > ? ? ? ?//do the other stuff... ( shortened here for the clarify
> purposes... )
> >
> > ? ? ? ?....
> >
> > ? ? ? ?$post_data['post_status'] = 'publish';
> >
> > ? ? ? ?Insert_or_UpdatePost($dbh,$post_data,$source_recid,$post_id);
> >
> >
> > ? ? ? ?if ($post_id==0):
> >
> > ? ? ? ? ? ?//log the error and move on
> >
> > ? ? ? ? ? ?continue;
> >
> > ? ? ? ?endif;
> >
> >
> > endwhile;
> >
> > function Insert_or_UpdatePost($dbh,$post_data,$source_recid,&$post_id){
> >
> > ? ? ? ?// this function first looks up the --db.table.tablerecid--
> sequence
> > ? ? ? ?// across all wp_posts post_content field
> > ? ? ? ?// in determining if this record has been already INSERTed!
> >
> > ? ? ? ?// and depending on the outcome, it does an insert or update
> > ? ? ? ?// and return the $post_id accordingly
> >
> > ? ? ? ?// if the function determines there are no such records,
> > ? ? ? ?// then and only then, it runs the wp_insert_post!
> >
> > ? ? ? ?// if the function determines that there is a post like that,
> > ? ? ? ?// it retrieves the post_id
> > ? ? ? ?// and then switches to operation
> > ? ? ? ?// to use the wp_update_post instead!
> >
> > ? ? ? ?// with this approach, technically speaking,
> > ? ? ? ?// it should impossible to run wp_insert_post on an existing post!
> >
> > ? ? ? ?// and yet, I still get duplicate posts...
> >
> > ? ? ? ?// here we go;
> >
> > ? ? ? ?$post_id_probed = blp_sql_getdbvals($dbh,"select id from
> > wp_posts where post_content LIKE '%--{$source_recid}--%'");
> >
> > ? ? ? ?if (blp_isnumber($post_id_probed)):
> > ? ? ? ? ? ?$post_id = $post_id_probed;
> >
> > ? ? ? ? ? ?$post_data['ID'] = $post_id;
> > ? ? ? ? ? ?$post_id = wp_update_post( $post_data );
> >
> > ? ? ? ? ? ?if ($post_id == 0):
> >
> > ? ? ? ? ? ? ? ?//add error
> >
> > ? ? ? ? ? ? ? ?return FALSE;
> >
> >
> > ? ? ? ? ? ?else:
> >
> > ? ? ? ? ? ? ? ?update_post_meta($post_id, "wpcf-blp-migration-date",
> > blp_now('mysql'));
> >
> > ? ? ? ? ? ? ? ?return TRUE;
> >
> > ? ? ? ? ? ?endif;
> >
> >
> > ? ? ? ? endif;
> >
> > ? ? ? ? // if we make it this part, it means only one thing!
> > ? ? ? ? // there is no post for the db.table.tablerecid yet,
> > ? ? ? ? // so do the insert!
> >
> > ? ? ? ?$post_id = wp_insert_post( $post_data );
> >
> >
> >
> > ? ? ? ?if ($post_id == 0):
> >
> > ? ? ? ? ? ?//add error
> >
> > ? ? ? ? ? ?return FALSE;
> >
> >
> > ? ? ? ?else:
> >
> > ? ? ? ? ? ?//add_post_meta($post_id, "wpcf-blp-migration-source",
> > $source_recid,TRUE);
> > ? ? ? ? ? ?//no need for that anymore
> >
> > ? ? ? ? ? ?return TRUE;
> >
> >
> > ? ? ? ?endif;
> >
> >
> > }
> >
> > There is also a post I created at wordpress.stackexchange site.
> >
> >
> http://wordpress.stackexchange.com/questions/19732/prevent-duplicate-posts-in-wp-insert-post-using-custom-fields
>
>
> ------------------------------
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
>
> End of wp-hackers Digest, Vol 89, Issue 29
> ******************************************
>



-- 
-Taylor Y.
taylor.d.young at gmail.com

From brenda at redletterdesign.net  Fri Jun 22 14:51:37 2012
From: brenda at redletterdesign.net (Brenda Egeland)
Date: Fri, 22 Jun 2012 10:51:37 -0400
Subject: [wp-hackers] Rewrite rule for pages from old site
In-Reply-To: <mailman.29586.1340376159.1433.wp-hackers@lists.automattic.com>
References: <mailman.29586.1340376159.1433.wp-hackers@lists.automattic.com>
Message-ID: <F5F433A1-D5EE-4E4F-8C2A-F7046708C7C9@redletterdesign.net>

Thanks Mika and Otto. I think .htaccess is the way to go, because I want the 301 code to get the search engines to update to the new urls. I think I misunderstood something I read somewhere that said add_rewrite_rule was the preferred method. Now I understand it's for modify the permalink structure, not every case of rewrite rules (such as mine).

fyi, the new urls are generally /sermon/what-ever-the-title-is , but I can't see a way to rewrite those urls given the existing site's url structure (sermonYYYYMMDD.php).

Brenda Egeland
Red Letter Design
www.RedLetterDesign.net
301-260-7545



On Jun 22, 2012, at 10:42 AM, wp-hackers-request at lists.automattic.com wrote:
> 
> Message: 2
> Date: Fri, 22 Jun 2012 08:13:53 -0500
> From: Mika A Epstein <ipstenu at ipstenu.org>
> Subject: Re: [wp-hackers] Rewrite rule for pages from old site
> To: wp-hackers at lists.automattic.com
> Message-ID: <0FD1E6D1-26B6-4E70-A3BE-A6096D1F6F70 at ipstenu.org>
> Content-Type: text/plain; charset=us-ascii
> 
> Why not just do it in .htaccess directly?
> 
> RewriteRule ^sermons/([0-9]{4})([0-9]{2})([0-9]{2}).php?$ /sermon/$1/$2/$3?post_type=sermon [L,R=301]
> 
> (Caveat - Elf is still on that first cuppa)
> 
> Though why do you need the extra post_type on the end? The new CPT URLs should be /cpt/title/ normally, you don't generally push YMD in there (I know you can, but the guy who wrote the plugin for it dropped support because it was somewhat a bad idea).
> 
> ----
> Mika A Epstein (aka Ipstenu)
> http://ipstenu.org | http://halfelf.org
> 
> ------------------------------
> 
> Message: 3
> Date: Fri, 22 Jun 2012 08:23:22 -0500
> From: Otto <otto at ottodestruct.com>
> Subject: Re: [wp-hackers] Rewrite rule for pages from old site
> To: wp-hackers at lists.automattic.com
> Message-ID:
> 	<CAD-Fghz9XH54Nyx2XEfh5HF=Zq=xdMv1vuxtcq2zVPxP=dnKSg at mail.gmail.com>
> Content-Type: text/plain; charset=ISO-8859-1
> 
> On Fri, Jun 22, 2012 at 8:03 AM, Brenda Egeland
> <brenda at redletterdesign.net> wrote:
>> Sermon is a custom post type. I've tried add this to my functions.php for a custom rewrite rule:
>> 
>> ?add_rewrite_rule(
>> ? ?'^/sermons/sermon([0-9]{4})([0-9]{2})([0-9]{2})\.php?',
>> ? ?'$matches[1]/$matches[2]/$matches[3]?post_type=sermon',
>> ? ?'top'
>> ?);
>> 
>> But I keep getting a sorry...not found. I've tried resaving the permalinks in the Settings panel, and still no luck.
> 
> That isn't how rewrite rules work.
> 
> You're trying to rewrite the old .php based URL into the new "pretty"
> url, but what a rewrite rule in WP does is to convert a "pretty" URL
> into a "default" URL. Default is that thing with ?p=123&year=2012 and
> so forth.
> 
> In other words, you can do what you want, but the second part of the
> rewrite rule needs to be "non-pretty".
> 
> 
> ?add_rewrite_rule(
> ? ?'^/sermons/sermon([0-9]{4})([0-9]{2})([0-9]{2})\.php?',
> ? ?'index.php?post_type=sermon&year=$matches[1]&month=$matches[2]&day=$matches[3]',
> ? ?'top'
> ?);
> 
> Or something like that. Didn't test it specifically, might be wrong.
> 
> But that won't redirect the old URL to the new one, that will just
> make the old URL work and show the proper content.
> 
> 
> If you're wanting to actually REDIRECT from the old format to the new
> one, then you're doing it wrong. add_rewrite_rule can't do that
> directly. (Well, it *can*, it's just a bit pointless to do it that
> way). If you want to redirect from the old to the new, then putting a
> RewriteRule directly into the .htaccess (as Mika suggested previously)
> is the simpler and easier way.
> 
> -Otto
> 
> 


From halukkaramete at gmail.com  Fri Jun 22 17:35:59 2012
From: halukkaramete at gmail.com (Haluk Karamete)
Date: Fri, 22 Jun 2012 10:35:59 -0700
Subject: [wp-hackers] phpmyadmin post count vs wordpress dashboard's own
	post count
Message-ID: <CAHERW=1op5LAR8woP4LagDP5hGkefoZP4wfHP6DZ8BgAP+0WVQ@mail.gmail.com>

php myadmin view:
Showing rows 0 - 29 (10,223 total, Query took 0.0022 sec) SQL query:
SELECT * FROM wp_posts LIMIT 0 , 30

vs
wordpress dashboard view:
All (10,222) | Published (10,222) Search Posts: 10,222 items ? ? of 512 ? ?

Why is there a disconnect? Does anyone know why phpmyadmin reports
10223 on an unconditional SQL query while admin dashboard reports one
less?

From ipstenu at ipstenu.org  Fri Jun 22 17:37:33 2012
From: ipstenu at ipstenu.org (Mika A Epstein)
Date: Fri, 22 Jun 2012 12:37:33 -0500
Subject: [wp-hackers] phpmyadmin post count vs wordpress dashboard's own
	post count
In-Reply-To: <CAHERW=1op5LAR8woP4LagDP5hGkefoZP4wfHP6DZ8BgAP+0WVQ@mail.gmail.com>
References: <CAHERW=1op5LAR8woP4LagDP5hGkefoZP4wfHP6DZ8BgAP+0WVQ@mail.gmail.com>
Message-ID: <926E2487-26AF-48EB-901A-A77AA87D7D38@ipstenu.org>

Post revisions? Drafts? CPTs?

----
Mika A Epstein (aka Ipstenu)
http://ipstenu.org | http://halfelf.org

On 22 Jun 2012, at 12:35:59PM, Haluk Karamete wrote:

> php myadmin view:
> Showing rows 0 - 29 (10,223 total, Query took 0.0022 sec) SQL query:
> SELECT * FROM wp_posts LIMIT 0 , 30
> 
> vs
> wordpress dashboard view:
> All (10,222) | Published (10,222) Search Posts: 10,222 items ? ? of 512 ? ?
> 
> Why is there a disconnect? Does anyone know why phpmyadmin reports
> 10223 on an unconditional SQL query while admin dashboard reports one
> less?
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers


From chris at lod.com  Fri Jun 22 17:44:12 2012
From: chris at lod.com (chris mccoy)
Date: Fri, 22 Jun 2012 13:44:12 -0400
Subject: [wp-hackers] phpmyadmin post count vs wordpress dashboard's
	own	post count
In-Reply-To: <CAHERW=1op5LAR8woP4LagDP5hGkefoZP4wfHP6DZ8BgAP+0WVQ@mail.gmail.com>
References: <CAHERW=1op5LAR8woP4LagDP5hGkefoZP4wfHP6DZ8BgAP+0WVQ@mail.gmail.com>
Message-ID: <000301cd509e$a31b1b90$e95152b0$@lod.com>

Item in trash maybe?

-----Original Message-----
From: wp-hackers-bounces at lists.automattic.com [mailto:wp-hackers-bounces at lists.automattic.com] On Behalf Of Haluk Karamete
Sent: Friday, June 22, 2012 1:36 PM
To: wp-hackers at lists.automattic.com
Subject: [wp-hackers] phpmyadmin post count vs wordpress dashboard's own post count

php myadmin view:
Showing rows 0 - 29 (10,223 total, Query took 0.0022 sec) SQL query:
SELECT * FROM wp_posts LIMIT 0 , 30

vs
wordpress dashboard view:
All (10,222) | Published (10,222) Search Posts: 10,222 items ? ? of 512 ? ?

Why is there a disconnect? Does anyone know why phpmyadmin reports
10223 on an unconditional SQL query while admin dashboard reports one less?
_______________________________________________
wp-hackers mailing list
wp-hackers at lists.automattic.com
http://lists.automattic.com/mailman/listinfo/wp-hackers


From jesper at jarlskov.dk  Fri Jun 22 18:06:39 2012
From: jesper at jarlskov.dk (Jesper Jarlskov)
Date: Fri, 22 Jun 2012 20:06:39 +0200
Subject: [wp-hackers] phpmyadmin post count vs wordpress dashboard's own
 post count
In-Reply-To: <000301cd509e$a31b1b90$e95152b0$@lod.com>
References: <CAHERW=1op5LAR8woP4LagDP5hGkefoZP4wfHP6DZ8BgAP+0WVQ@mail.gmail.com>
	<000301cd509e$a31b1b90$e95152b0$@lod.com>
Message-ID: <CAA31KDZ+UM6mLArPdAzNs9wvKtemgtHyD2ypTCLeWTMNxySA-Q@mail.gmail.com>

But then, why is there no difference between "all" and "published"?

On Fri, Jun 22, 2012 at 7:44 PM, chris mccoy <chris at lod.com> wrote:

> Item in trash maybe?
>
> -----Original Message-----
> From: wp-hackers-bounces at lists.automattic.com [mailto:
> wp-hackers-bounces at lists.automattic.com] On Behalf Of Haluk Karamete
> Sent: Friday, June 22, 2012 1:36 PM
> To: wp-hackers at lists.automattic.com
> Subject: [wp-hackers] phpmyadmin post count vs wordpress dashboard's own
> post count
>
> php myadmin view:
> Showing rows 0 - 29 (10,223 total, Query took 0.0022 sec) SQL query:
> SELECT * FROM wp_posts LIMIT 0 , 30
>
> vs
> wordpress dashboard view:
> All (10,222) | Published (10,222) Search Posts: 10,222 items ? ? of 512 ? ?
>
> Why is there a disconnect? Does anyone know why phpmyadmin reports
> 10223 on an unconditional SQL query while admin dashboard reports one less?
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>



-- 
Jesper Jarlskov

From ipstenu at ipstenu.org  Fri Jun 22 18:21:14 2012
From: ipstenu at ipstenu.org (Mika A Epstein)
Date: Fri, 22 Jun 2012 13:21:14 -0500
Subject: [wp-hackers] phpmyadmin post count vs wordpress dashboard's own
	post count
In-Reply-To: <CAA31KDZ+UM6mLArPdAzNs9wvKtemgtHyD2ypTCLeWTMNxySA-Q@mail.gmail.com>
References: <CAHERW=1op5LAR8woP4LagDP5hGkefoZP4wfHP6DZ8BgAP+0WVQ@mail.gmail.com>
	<000301cd509e$a31b1b90$e95152b0$@lod.com>
	<CAA31KDZ+UM6mLArPdAzNs9wvKtemgtHyD2ypTCLeWTMNxySA-Q@mail.gmail.com>
Message-ID: <43DCDAEB-8B2C-48BD-B51B-8C38D78D9F55@ipstenu.org>

All doesn't count trash.

All (641)
Published (638)
Drafts (3)
Trash (1)

----
Mika A Epstein (aka Ipstenu)
http://ipstenu.org | http://halfelf.org

On 22 Jun 2012, at 1:06:39PM, Jesper Jarlskov wrote:

> But then, why is there no difference between "all" and "published"?
> 
> On Fri, Jun 22, 2012 at 7:44 PM, chris mccoy <chris at lod.com> wrote:
> 
>> Item in trash maybe?
>> 
>> -----Original Message-----
>> From: wp-hackers-bounces at lists.automattic.com [mailto:
>> wp-hackers-bounces at lists.automattic.com] On Behalf Of Haluk Karamete
>> Sent: Friday, June 22, 2012 1:36 PM
>> To: wp-hackers at lists.automattic.com
>> Subject: [wp-hackers] phpmyadmin post count vs wordpress dashboard's own
>> post count
>> 
>> php myadmin view:
>> Showing rows 0 - 29 (10,223 total, Query took 0.0022 sec) SQL query:
>> SELECT * FROM wp_posts LIMIT 0 , 30
>> 
>> vs
>> wordpress dashboard view:
>> All (10,222) | Published (10,222) Search Posts: 10,222 items ? ? of 512 ? ?
>> 
>> Why is there a disconnect? Does anyone know why phpmyadmin reports
>> 10223 on an unconditional SQL query while admin dashboard reports one less?
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>> 
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>> 
> 
> 
> 
> -- 
> Jesper Jarlskov
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers


From mpwalsh8 at gmail.com  Fri Jun 22 18:58:27 2012
From: mpwalsh8 at gmail.com (Mike Walsh)
Date: Fri, 22 Jun 2012 19:58:27 +0100
Subject: [wp-hackers] Seeking SQL advice to identify performance problem
In-Reply-To: <CABzSYNOOX0xrp+0Frkpg5mGD4hdCQpzv4n0wCitHQHn=Zfs9VA@mail.gmail.com>
References: <CAMg3evF4kae+cOWH168PP+TESsEhbBjF8Tsx4tpURCe9n-TzTw@mail.gmail.com>
	<CAMg3evHLbFzcCtxSnpM+T3n6JBTj-HbkcBGQMLxQE4S9J1RBEg@mail.gmail.com>
	<CAJxFMSDf16YvVL-oDK3-ear81RjBt3bBnnZ_rFHLYUO6V-fUGA@mail.gmail.com>
	<CABzSYNOOX0xrp+0Frkpg5mGD4hdCQpzv4n0wCitHQHn=Zfs9VA@mail.gmail.com>
Message-ID: <CAMg3evEt0pCdrQGx7uPnEwEvJK3U=TNzX=i-SE-iRzsEhAXtGA@mail.gmail.com>

On Wed, Jun 20, 2012 at 5:38 PM, scribu <mail at scribu.net> wrote:

> On Wed, Jun 20, 2012 at 4:52 PM, Simon Blackbourn <piemanek at gmail.com
> >wrote:
>
> > You can use the get_users() function [1] with the 'fields' parameter set
> > to 'all_with_meta', and then perform a usort on the results:
> >
> > $args = array(
> > 'number'     => 1000000, //  unfortunately you can't use -1 here
> > 'fields'     => 'all_with_meta', // required
> >                        'exclude' => array( 1 ) // user IDs to exclude
> > );
> >
> > $user_list = get_users( $args );
> >
>
> Actually, unlike WP_Query, users are not paginated by default, so if you
> don't pass the 'number' parameter at all, you'll get all the users.
>
> As for the "magic" that Otto mentioned, here's a blog post about it:
> http://scribu.net/wordpress/the-magic-of-wp_user.html
>
>
>
Now that I understand the magic, and the link to the post helped a lot,
this makes more sense and I am using it place of the SQL for one part of my
plugin.  I've tried to migrate it to a second instance and as near as I can
tell, I cannot order the results of get_users() on a user meta value.  Am I
correct or as in the earlier case, am I missing something?

Thanks,

Mike
-- 
Mike Walsh - mpwalsh8 at gmail.com

From halukkaramete at gmail.com  Fri Jun 22 19:05:49 2012
From: halukkaramete at gmail.com (Haluk Karamete)
Date: Fri, 22 Jun 2012 12:05:49 -0700
Subject: [wp-hackers] phpmyadmin post count vs wordpress dashboard's own
 post count
In-Reply-To: <43DCDAEB-8B2C-48BD-B51B-8C38D78D9F55@ipstenu.org>
References: <CAHERW=1op5LAR8woP4LagDP5hGkefoZP4wfHP6DZ8BgAP+0WVQ@mail.gmail.com>
	<000301cd509e$a31b1b90$e95152b0$@lod.com>
	<CAA31KDZ+UM6mLArPdAzNs9wvKtemgtHyD2ypTCLeWTMNxySA-Q@mail.gmail.com>
	<43DCDAEB-8B2C-48BD-B51B-8C38D78D9F55@ipstenu.org>
Message-ID: <CAHERW=2ifJ03FUy7mJS-VuSNYVknhUa=-3AaDXoi6O2R4+c5yg@mail.gmail.com>

I created all these posts programmatically. All of them supposed to be
as drafts. How do you see the trashed view? Next time I run the
migration I'd like to check it.


On Fri, Jun 22, 2012 at 11:21 AM, Mika A Epstein <ipstenu at ipstenu.org> wrote:
> All doesn't count trash.
>
> All (641)
> Published (638)
> Drafts (3)
> Trash (1)
>
> ----
> Mika A Epstein (aka Ipstenu)
> http://ipstenu.org | http://halfelf.org
>
> On 22 Jun 2012, at 1:06:39PM, Jesper Jarlskov wrote:
>
>> But then, why is there no difference between "all" and "published"?
>>
>> On Fri, Jun 22, 2012 at 7:44 PM, chris mccoy <chris at lod.com> wrote:
>>
>>> Item in trash maybe?
>>>
>>> -----Original Message-----
>>> From: wp-hackers-bounces at lists.automattic.com [mailto:
>>> wp-hackers-bounces at lists.automattic.com] On Behalf Of Haluk Karamete
>>> Sent: Friday, June 22, 2012 1:36 PM
>>> To: wp-hackers at lists.automattic.com
>>> Subject: [wp-hackers] phpmyadmin post count vs wordpress dashboard's own
>>> post count
>>>
>>> php myadmin view:
>>> Showing rows 0 - 29 (10,223 total, Query took 0.0022 sec) SQL query:
>>> SELECT * FROM wp_posts LIMIT 0 , 30
>>>
>>> vs
>>> wordpress dashboard view:
>>> All (10,222) | Published (10,222) Search Posts: 10,222 items ? ? of 512 ? ?
>>>
>>> Why is there a disconnect? Does anyone know why phpmyadmin reports
>>> 10223 on an unconditional SQL query while admin dashboard reports one less?
>>> _______________________________________________
>>> wp-hackers mailing list
>>> wp-hackers at lists.automattic.com
>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>>
>>> _______________________________________________
>>> wp-hackers mailing list
>>> wp-hackers at lists.automattic.com
>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>>
>>
>>
>>
>> --
>> Jesper Jarlskov
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

From lazyest at brimosoft.nl  Fri Jun 22 19:08:21 2012
From: lazyest at brimosoft.nl (=?utf-8?B?bGF6eWVzdEBicmltb3NvZnQubmw=?=)
Date: Fri, 22 Jun 2012 21:08:21 +0200
Subject: [wp-hackers]
 =?utf-8?q?phpmyadmin_post_count_vs_wordpress_dashboa?=
 =?utf-8?q?rd=27s_own=09post_count?=
Message-ID: <20120622190831.506034744D@lists.luv.wordpress.org>

And you have revisions.


----- Reply message -----
Van: "Mika A Epstein" <ipstenu at ipstenu.org>
Aan: <wp-hackers at lists.automattic.com>
Onderwerp: [wp-hackers] phpmyadmin post count vs wordpress dashboard's own	post count
Datum: vr, jun. 22, 2012 20:21


All doesn't count trash.

All (641)
Published (638)
Drafts (3)
Trash (1)

----
Mika A Epstein (aka Ipstenu)
http://ipstenu.org | http://halfelf.org

On 22 Jun 2012, at 1:06:39PM, Jesper Jarlskov wrote:

> But then, why is there no difference between "all" and "published"?
>
> On Fri, Jun 22, 2012 at 7:44 PM, chris mccoy <chris at lod.com> wrote:
>
>> Item in trash maybe?
>>
>> -----Original Message-----
>> From: wp-hackers-bounces at lists.automattic.com [mailto:
>> wp-hackers-bounces at lists.automattic.com] On Behalf Of Haluk Karamete
>> Sent: Friday, June 22, 2012 1:36 PM
>> To: wp-hackers at lists.automattic.com
>> Subject: [wp-hackers] phpmyadmin post count vs wordpress dashboard's own
>> post count
>>
>> php myadmin view:
>> Showing rows 0 - 29 (10,223 total, Query took 0.0022 sec) SQL query:
>> SELECT * FROM wp_posts LIMIT 0 , 30
>>
>> vs
>> wordpress dashboard view:
>> All (10,222) | Published (10,222) Search Posts: 10,222 items ? ? of 512 ? ?
>>
>> Why is there a disconnect? Does anyone know why phpmyadmin reports
>> 10223 on an unconditional SQL query while admin dashboard reports one less?
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
>
>
>
> --
> Jesper Jarlskov
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

_______________________________________________
wp-hackers mailing list
wp-hackers at lists.automattic.com
http://lists.automattic.com/mailman/listinfo/wp-hackers

From piemanek at gmail.com  Fri Jun 22 19:23:04 2012
From: piemanek at gmail.com (Simon Blackbourn)
Date: Fri, 22 Jun 2012 20:23:04 +0100
Subject: [wp-hackers] Seeking SQL advice to identify performance problem
In-Reply-To: <CAMg3evEt0pCdrQGx7uPnEwEvJK3U=TNzX=i-SE-iRzsEhAXtGA@mail.gmail.com>
References: <CAMg3evF4kae+cOWH168PP+TESsEhbBjF8Tsx4tpURCe9n-TzTw@mail.gmail.com>
	<CAMg3evHLbFzcCtxSnpM+T3n6JBTj-HbkcBGQMLxQE4S9J1RBEg@mail.gmail.com>
	<CAJxFMSDf16YvVL-oDK3-ear81RjBt3bBnnZ_rFHLYUO6V-fUGA@mail.gmail.com>
	<CABzSYNOOX0xrp+0Frkpg5mGD4hdCQpzv4n0wCitHQHn=Zfs9VA@mail.gmail.com>
	<CAMg3evEt0pCdrQGx7uPnEwEvJK3U=TNzX=i-SE-iRzsEhAXtGA@mail.gmail.com>
Message-ID: <CAJxFMSCYEV6dY7fdVh8ZrX-ZvDw3hrP6mSG8_NAzueRZX3YrvA@mail.gmail.com>

>
>
> I cannot order the results of get_users() on a user meta value.  Am I
> correct or as in the earlier case, am I missing something?
>
>

did you put the usort and associated function in there? that works for me,
on either first_name or last_name.

From mpwalsh8 at gmail.com  Fri Jun 22 19:27:47 2012
From: mpwalsh8 at gmail.com (Mike Walsh)
Date: Fri, 22 Jun 2012 20:27:47 +0100
Subject: [wp-hackers] Hierarchical Menu Management Plugin?
Message-ID: <CAMg3evG=x8t2G2QewZW_v8g8PnqGdasyQoTev6HNGsxbMLxDqA@mail.gmail.com>

I am struggling with a site which has lots of pages, most of which will end
up on menus.  The large volume of pages make the standard WordPress menu
management GUI cumbersome.  I need to be able to move entire hierarchical
menus around in their entirety.  I've searched but haven't been successful
- my search results are overwhelmed with information about how to create a
hierarchical menu in WordPress.

I am envisioning a standard tree view that expands and closes kind of like
these jQuery examples:

http://jquery.bassistance.de/treeview/demo/

In addition to expanding and contracting the hierarchy, I'd want to be able
to drag and drop any element to another location.  I really don't want to
go reinvent the wheel, I would have thought this problem would have already
been solved but was unable to find anything similar.

Suggestions?  How do people manage large menu structures?

Thanks,

Mike
-- 
Mike Walsh - mpwalsh8 at gmail.com

From paul at codehooligans.com  Fri Jun 22 19:32:18 2012
From: paul at codehooligans.com (Paul Menard)
Date: Fri, 22 Jun 2012 15:32:18 -0400
Subject: [wp-hackers] Hierarchical Menu Management Plugin?
In-Reply-To: <CAMg3evG=x8t2G2QewZW_v8g8PnqGdasyQoTev6HNGsxbMLxDqA@mail.gmail.com>
References: <CAMg3evG=x8t2G2QewZW_v8g8PnqGdasyQoTev6HNGsxbMLxDqA@mail.gmail.com>
Message-ID: <7647A0EF-B0A9-42CE-808E-52DCF2CB43A1@codehooligans.com>

Mike,

I write a plugin which should help. Thought it does not show in a tree view expand/collapse. Instead it should the Post Types and Taxonomies as levels. For example showing the top-level Pages. On the items with children there is a hover link to show the child pages. Also, included is a breadcrumb nav at the top. 

Check out Pages-Children http://wordpress.org/extend/plugins/pages-children/ 

P-


On Jun 22, 2012, at 3:27 PM, Mike Walsh wrote:

> I am struggling with a site which has lots of pages, most of which will end
> up on menus.  The large volume of pages make the standard WordPress menu
> management GUI cumbersome.  I need to be able to move entire hierarchical
> menus around in their entirety.  I've searched but haven't been successful
> - my search results are overwhelmed with information about how to create a
> hierarchical menu in WordPress.
> 
> I am envisioning a standard tree view that expands and closes kind of like
> these jQuery examples:
> 
> http://jquery.bassistance.de/treeview/demo/
> 
> In addition to expanding and contracting the hierarchy, I'd want to be able
> to drag and drop any element to another location.  I really don't want to
> go reinvent the wheel, I would have thought this problem would have already
> been solved but was unable to find anything similar.
> 
> Suggestions?  How do people manage large menu structures?
> 
> Thanks,
> 
> Mike
> -- 
> Mike Walsh - mpwalsh8 at gmail.com
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers


From bill.erickson at gmail.com  Fri Jun 22 19:33:23 2012
From: bill.erickson at gmail.com (Bill Erickson)
Date: Fri, 22 Jun 2012 14:33:23 -0500
Subject: [wp-hackers] Hierarchical Menu Management Plugin?
In-Reply-To: <7647A0EF-B0A9-42CE-808E-52DCF2CB43A1@codehooligans.com>
References: <CAMg3evG=x8t2G2QewZW_v8g8PnqGdasyQoTev6HNGsxbMLxDqA@mail.gmail.com>
	<7647A0EF-B0A9-42CE-808E-52DCF2CB43A1@codehooligans.com>
Message-ID: <CADvbF5o1n2KEtCwtd-YUFP73z+sJK19EaDfQzqETneYPWQNghg@mail.gmail.com>

Give CMS Page Order a go:
http://wordpress.org/extend/plugins/cms-page-order/screenshots/


---
Bill Erickson
WordPress Consultant
http://www.billerickson.net

NOTE: To better serve my clients, partners, and most importantly my family,
I've begun checking email only three times per day.

For phone calls, please schedule here: http://tungle.me/billerickson . If
it's an emergency, please call now and leave a voicemail



On Fri, Jun 22, 2012 at 2:32 PM, Paul Menard <paul at codehooligans.com> wrote:

> Mike,
>
> I write a plugin which should help. Thought it does not show in a tree
> view expand/collapse. Instead it should the Post Types and Taxonomies as
> levels. For example showing the top-level Pages. On the items with children
> there is a hover link to show the child pages. Also, included is a
> breadcrumb nav at the top.
>
> Check out Pages-Children
> http://wordpress.org/extend/plugins/pages-children/
>
> P-
>
>
> On Jun 22, 2012, at 3:27 PM, Mike Walsh wrote:
>
> > I am struggling with a site which has lots of pages, most of which will
> end
> > up on menus.  The large volume of pages make the standard WordPress menu
> > management GUI cumbersome.  I need to be able to move entire hierarchical
> > menus around in their entirety.  I've searched but haven't been
> successful
> > - my search results are overwhelmed with information about how to create
> a
> > hierarchical menu in WordPress.
> >
> > I am envisioning a standard tree view that expands and closes kind of
> like
> > these jQuery examples:
> >
> > http://jquery.bassistance.de/treeview/demo/
> >
> > In addition to expanding and contracting the hierarchy, I'd want to be
> able
> > to drag and drop any element to another location.  I really don't want to
> > go reinvent the wheel, I would have thought this problem would have
> already
> > been solved but was unable to find anything similar.
> >
> > Suggestions?  How do people manage large menu structures?
> >
> > Thanks,
> >
> > Mike
> > --
> > Mike Walsh - mpwalsh8 at gmail.com
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers at lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From mpwalsh8 at gmail.com  Fri Jun 22 19:36:30 2012
From: mpwalsh8 at gmail.com (Mike Walsh)
Date: Fri, 22 Jun 2012 20:36:30 +0100
Subject: [wp-hackers] Seeking SQL advice to identify performance problem
In-Reply-To: <CAJxFMSCYEV6dY7fdVh8ZrX-ZvDw3hrP6mSG8_NAzueRZX3YrvA@mail.gmail.com>
References: <CAMg3evF4kae+cOWH168PP+TESsEhbBjF8Tsx4tpURCe9n-TzTw@mail.gmail.com>
	<CAMg3evHLbFzcCtxSnpM+T3n6JBTj-HbkcBGQMLxQE4S9J1RBEg@mail.gmail.com>
	<CAJxFMSDf16YvVL-oDK3-ear81RjBt3bBnnZ_rFHLYUO6V-fUGA@mail.gmail.com>
	<CABzSYNOOX0xrp+0Frkpg5mGD4hdCQpzv4n0wCitHQHn=Zfs9VA@mail.gmail.com>
	<CAMg3evEt0pCdrQGx7uPnEwEvJK3U=TNzX=i-SE-iRzsEhAXtGA@mail.gmail.com>
	<CAJxFMSCYEV6dY7fdVh8ZrX-ZvDw3hrP6mSG8_NAzueRZX3YrvA@mail.gmail.com>
Message-ID: <CAMg3evGuxDjHSidF_-e0VGtMRPRcw3=8XkX0V=qQ7o3sfjiawg@mail.gmail.com>

Yes I did and it worked as expected in one application I needed.

Next I wanted to use get_users() in conjunction with the WP_List_Table
class to present user data (including meta data) in a standard WordPress
style table with pagination.  Based on my testing it appears that the way
the WP_List_Table class works with the offset and number settings to show a
subset of the users on each page the users aren't sorted correctly because
get_users() has a default ordering (or 3-4 other standard choices) that
results in the custom sort running on the wrong subset of the data based on
the paging and offset.  I don't think I am explaining this correctly but
hopefully you get the idea.  I was hoping I could pass my meta term to
get_users() as the order parameter but that doesn't seem possible.

Mike

On Fri, Jun 22, 2012 at 8:23 PM, Simon Blackbourn <piemanek at gmail.com>wrote:

> >
> >
> > I cannot order the results of get_users() on a user meta value.  Am I
> > correct or as in the earlier case, am I missing something?
> >
> >
>
> did you put the usort and associated function in there? that works for me,
> on either first_name or last_name.
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>



-- 
Mike Walsh - mpwalsh8 at gmail.com

From mpwalsh8 at gmail.com  Fri Jun 22 19:48:20 2012
From: mpwalsh8 at gmail.com (Mike Walsh)
Date: Fri, 22 Jun 2012 20:48:20 +0100
Subject: [wp-hackers] Hierarchical Menu Management Plugin?
In-Reply-To: <CADvbF5o1n2KEtCwtd-YUFP73z+sJK19EaDfQzqETneYPWQNghg@mail.gmail.com>
References: <CAMg3evG=x8t2G2QewZW_v8g8PnqGdasyQoTev6HNGsxbMLxDqA@mail.gmail.com>
	<7647A0EF-B0A9-42CE-808E-52DCF2CB43A1@codehooligans.com>
	<CADvbF5o1n2KEtCwtd-YUFP73z+sJK19EaDfQzqETneYPWQNghg@mail.gmail.com>
Message-ID: <CAMg3evHhMmHnG3Ed9RoZX9PK-nzoeHp=juLM1u15nbG3xcpQ-Q@mail.gmail.com>

On Fri, Jun 22, 2012 at 8:33 PM, Bill Erickson <bill.erickson at gmail.com>wrote:

> Give CMS Page Order a go:
> http://wordpress.org/extend/plugins/cms-page-order/screenshots/
>
>
> ---
> Bill Erickson
> WordPress Consultant
> http://www.billerickson.net
>
>
This appears to exactly what I was looking for - we'll give this a go and
see if my Editors and Authors can make this work.

Thanks,

Mike
-- 
Mike Walsh - mpwalsh8 at gmail.com

From halukkaramete at gmail.com  Fri Jun 22 19:51:47 2012
From: halukkaramete at gmail.com (Haluk Karamete)
Date: Fri, 22 Jun 2012 12:51:47 -0700
Subject: [wp-hackers] phpmyadmin post count vs wordpress dashboard's own
 post count
In-Reply-To: <000301cd509e$a31b1b90$e95152b0$@lod.com>
References: <CAHERW=1op5LAR8woP4LagDP5hGkefoZP4wfHP6DZ8BgAP+0WVQ@mail.gmail.com>
	<000301cd509e$a31b1b90$e95152b0$@lod.com>
Message-ID: <CAHERW=3CgcnoRGq8b9joamdXU8qz92_mFt3ipxCxL=Ap03=ZRQ@mail.gmail.com>

In phpmyadmin, I sorted the records by 'post_status' field just to see
what's out there to see 'other than' the 'draft'.
Top of the list was one single record with the post_status is
auto-draft which happens to be the last one and I have no idea how it
got there.

At the end of the migration routine, I ended up with 10222 posts and
only one of them is missing the title/body/etc...

How does it get there?


On Fri, Jun 22, 2012 at 10:44 AM, chris mccoy <chris at lod.com> wrote:
> Item in trash maybe?
>
> -----Original Message-----
> From: wp-hackers-bounces at lists.automattic.com [mailto:wp-hackers-bounces at lists.automattic.com] On Behalf Of Haluk Karamete
> Sent: Friday, June 22, 2012 1:36 PM
> To: wp-hackers at lists.automattic.com
> Subject: [wp-hackers] phpmyadmin post count vs wordpress dashboard's own post count
>
> php myadmin view:
> Showing rows 0 - 29 (10,223 total, Query took 0.0022 sec) SQL query:
> SELECT * FROM wp_posts LIMIT 0 , 30
>
> vs
> wordpress dashboard view:
> All (10,222) | Published (10,222) Search Posts: 10,222 items ? ? of 512 ? ?
>
> Why is there a disconnect? Does anyone know why phpmyadmin reports
> 10223 on an unconditional SQL query while admin dashboard reports one less?
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

From jw at jacksonwhelan.com  Fri Jun 22 20:07:32 2012
From: jw at jacksonwhelan.com (Jackson Whelan)
Date: Fri, 22 Jun 2012 16:07:32 -0400
Subject: [wp-hackers] phpmyadmin post count vs wordpress dashboard's own
 post count
In-Reply-To: <CAHERW=3CgcnoRGq8b9joamdXU8qz92_mFt3ipxCxL=Ap03=ZRQ@mail.gmail.com>
References: <CAHERW=1op5LAR8woP4LagDP5hGkefoZP4wfHP6DZ8BgAP+0WVQ@mail.gmail.com>
	<000301cd509e$a31b1b90$e95152b0$@lod.com>
	<CAHERW=3CgcnoRGq8b9joamdXU8qz92_mFt3ipxCxL=Ap03=ZRQ@mail.gmail.com>
Message-ID: <4FE4D084.7020600@jacksonwhelan.com>

Perhaps you visited

http://domain.com/wp-admin/post-new.php

On 6/22/12 3:51 PM, Haluk Karamete wrote:
> In phpmyadmin, I sorted the records by 'post_status' field just to see
> what's out there to see 'other than' the 'draft'.
> Top of the list was one single record with the post_status is
> auto-draft which happens to be the last one and I have no idea how it
> got there.
>
> At the end of the migration routine, I ended up with 10222 posts and
> only one of them is missing the title/body/etc...
>
> How does it get there?
>
>
> On Fri, Jun 22, 2012 at 10:44 AM, chris mccoy <chris at lod.com> wrote:
>> Item in trash maybe?
>>
>> -----Original Message-----
>> From: wp-hackers-bounces at lists.automattic.com [mailto:wp-hackers-bounces at lists.automattic.com] On Behalf Of Haluk Karamete
>> Sent: Friday, June 22, 2012 1:36 PM
>> To: wp-hackers at lists.automattic.com
>> Subject: [wp-hackers] phpmyadmin post count vs wordpress dashboard's own post count
>>
>> php myadmin view:
>> Showing rows 0 - 29 (10,223 total, Query took 0.0022 sec) SQL query:
>> SELECT * FROM wp_posts LIMIT 0 , 30
>>
>> vs
>> wordpress dashboard view:
>> All (10,222) | Published (10,222) Search Posts: 10,222 items ? ? of 512 ? ?
>>
>> Why is there a disconnect? Does anyone know why phpmyadmin reports
>> 10223 on an unconditional SQL query while admin dashboard reports one less?
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers



From wp-hackers at thecodecave.com  Fri Jun 22 20:42:30 2012
From: wp-hackers at thecodecave.com (Brian Layman)
Date: Fri, 22 Jun 2012 16:42:30 -0400
Subject: [wp-hackers] phpmyadmin post count vs wordpress dashboard's own
 post count
In-Reply-To: <926E2487-26AF-48EB-901A-A77AA87D7D38@ipstenu.org>
References: <CAHERW=1op5LAR8woP4LagDP5hGkefoZP4wfHP6DZ8BgAP+0WVQ@mail.gmail.com>
	<926E2487-26AF-48EB-901A-A77AA87D7D38@ipstenu.org>
Message-ID: <4FE4D8B6.9020101@thecodecave.com>

It's probably the sample Page that came in with the initial WordPress 
install.

You need to include `post_type`='post' if you are just looking at posts. 
Then after that you'll need to do things like filter out     
`post_status`='inherit'.

The days are gone when you can expect a 1 to 1 relationship between any 
part of the UI and a WP table.  There's always something more to 
consider. But if you spend some time looking at each of the columns, 
you'll be able to understand what's going on.  everything except for the 
terms structure is pretty straight forward.

Brian Layman

On 6/22/2012 1:37 PM, Mika A Epstein wrote:
> Post revisions? Drafts? CPTs?
>
> ----
> Mika A Epstein (aka Ipstenu)
> http://ipstenu.org | http://halfelf.org
>
> On 22 Jun 2012, at 12:35:59PM, Haluk Karamete wrote:
>
>> php myadmin view:
>> Showing rows 0 - 29 (10,223 total, Query took 0.0022 sec) SQL query:
>> SELECT * FROM wp_posts LIMIT 0 , 30
>>
>> vs
>> wordpress dashboard view:
>> All (10,222) | Published (10,222) Search Posts: 10,222 items ? ? of 512 ? ?
>>
>> Why is there a disconnect? Does anyone know why phpmyadmin reports
>> 10223 on an unconditional SQL query while admin dashboard reports one
>> less?
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers



From halukkaramete at gmail.com  Fri Jun 22 22:08:03 2012
From: halukkaramete at gmail.com (Haluk Karamete)
Date: Fri, 22 Jun 2012 15:08:03 -0700
Subject: [wp-hackers] phpmyadmin post count vs wordpress dashboard's own
 post count
In-Reply-To: <4FE4D8B6.9020101@thecodecave.com>
References: <CAHERW=1op5LAR8woP4LagDP5hGkefoZP4wfHP6DZ8BgAP+0WVQ@mail.gmail.com>
	<926E2487-26AF-48EB-901A-A77AA87D7D38@ipstenu.org>
	<4FE4D8B6.9020101@thecodecave.com>
Message-ID: <CAHERW=1osrVN1A51mBMBkha_cqRf_9Rk67x1vGE6d5FTQwmdtA@mail.gmail.com>

It cannot be the sample page. cause my migration routine blows it away
to start with 0 posts.
the culprit is the last post and its post status is auto-draft.


it all comes down to this http://core.trac.wordpress.org/ticket/11889

so, there is nothing to worry about it for the time being.


On Fri, Jun 22, 2012 at 1:42 PM, Brian Layman
<wp-hackers at thecodecave.com> wrote:
> It's probably the sample Page that came in with the initial WordPress
> install.
>
> You need to include `post_type`='post' if you are just looking at posts.
> Then after that you'll need to do things like filter out
> `post_status`='inherit'.
>
> The days are gone when you can expect a 1 to 1 relationship between any part
> of the UI and a WP table. ?There's always something more to consider. But if
> you spend some time looking at each of the columns, you'll be able to
> understand what's going on. ?everything except for the terms structure is
> pretty straight forward.
>
> Brian Layman
>
>
> On 6/22/2012 1:37 PM, Mika A Epstein wrote:
>>
>> Post revisions? Drafts? CPTs?
>>
>> ----
>> Mika A Epstein (aka Ipstenu)
>> http://ipstenu.org | http://halfelf.org
>>
>> On 22 Jun 2012, at 12:35:59PM, Haluk Karamete wrote:
>>
>>> php myadmin view:
>>> Showing rows 0 - 29 (10,223 total, Query took 0.0022 sec) SQL query:
>>> SELECT * FROM wp_posts LIMIT 0 , 30
>>>
>>> vs
>>> wordpress dashboard view:
>>> All (10,222) | Published (10,222) Search Posts: 10,222 items ? ? of 512 ?
>>> ?
>>>
>>> Why is there a disconnect? Does anyone know why phpmyadmin reports
>>> 10223 on an unconditional SQL query while admin dashboard reports one
>>> less?
>>> _______________________________________________
>>> wp-hackers mailing list
>>> wp-hackers at lists.automattic.com
>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
>
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

From contato at jimmymacedo.com  Sat Jun 23 11:46:22 2012
From: contato at jimmymacedo.com (JimmyMacedo)
Date: Sat, 23 Jun 2012 08:46:22 -0300
Subject: [wp-hackers] Problems with dynamic image processing.
In-Reply-To: <CAMSdA6u4=xvC=zbk-3De_XZC2R1yQgGJpdsX6n=7BzwZQMcUeg@mail.gmail.com>
References: <CAMSdA6s3HruH7jfUXtEQ9b4TJYPsO91x8CBCWhBshsm=2FaaEA@mail.gmail.com>
	<CAD-FghxttK=iBR4jhQ28EMHCPQKrmKjimPM1HVgW4WNGWn7a-A@mail.gmail.com>
	<CAMSdA6vpGuVcHSLZgngEryiexo9URw=RDJpUTMdjiCPC1K1fJA@mail.gmail.com>
	<CAMSdA6u4=xvC=zbk-3De_XZC2R1yQgGJpdsX6n=7BzwZQMcUeg@mail.gmail.com>
Message-ID: <CAMSdA6suuOFfHvuJYzUnaLQ2AmT2TbvjCwdj5QcY4hptRn+ErA@mail.gmail.com>

I saw now that the problem was not solved completely.
The 404 error is gone, but he is not storing the images in the user cache.
Each new request it loads the image again.
What else can I do about this?


Jimmy Lopes de Macedo
contato at jimmymacedo.com
www.jimmymacedo.com

<http://www.facebook.com/jimmymacedo> <http://twitter.com/jimmymacedo>
<http://br.linkedin.com/pub/jimmy-macedo/27/7b4/242>
<http://lattes.cnpq.br/4509397096603463>



2012/6/13 JimmyMacedo <contato at jimmymacedo.com>

> I put the status_header (200) immediately after the "if (get_query_var
> ('image')) {" and it looks like it worked!
> Tanks, Otto!
>
>
> Jimmy Lopes de Macedo
> contato at jimmymacedo.com
> www.jimmymacedo.com
>
> <http://www.facebook.com/jimmymacedo> <http://twitter.com/jimmymacedo>
> <http://br.linkedin.com/pub/jimmy-macedo/27/7b4/242>
> <http://lattes.cnpq.br/4509397096603463>
>
>
>
> 2012/6/13 JimmyMacedo <contato at jimmymacedo.com>
>
>> Which hook should I call the status_header (200)?
>>
>>
>>
>> Jimmy Lopes de Macedo
>> contato at jimmymacedo.com
>> www.jimmymacedo.com
>>
>> <http://www.facebook.com/jimmymacedo> <http://twitter.com/jimmymacedo>
>> <http://br.linkedin.com/pub/jimmy-macedo/27/7b4/242>
>> <http://lattes.cnpq.br/4509397096603463>
>>
>>
>>
>> 2012/6/13 Otto <otto at ottodestruct.com>
>>
>>> The 404 status header is set by the main query, before it gets to
>>> template_redirect. To override that, you'll need to call
>>> status_header(200) for the case where it's not actually supposed to be
>>> a 404 anymore for your own code returning something different.
>>>
>>> Basically, your rewrite rule was parsed into query_vars properly, and
>>> then the main query ran, didn't find any matching posts, set the 404
>>> status and the is_404 flag, and then came back. When the template
>>> loader runs, you're hooking into template_redirect, and saying "no,
>>> this isn't a 404, it's my special case". Then you probably return
>>> content type and the image and such, but the 404 was already set in
>>> the header. status_header(200) will let you override that.
>>>
>>> -Otto
>>>
>>>
>>>
>>> On Wed, Jun 13, 2012 at 3:20 PM, JimmyMacedo <contato at jimmymacedo.com>
>>> wrote:
>>> > Hello, hakers.
>>> > I'm trying to use a class for manipulating images inside of WordPress.
>>> To
>>> > process measurements and things like watermark in real time.
>>> > But whenever I make a request, the WP returns a "404 not found" and
>>> > (strangest of all) loads the image immediately. And this is repeated
>>> with
>>> > each new refrash. (ignoring any cache ...).
>>> > Recalling that the class works perfectly fine outside of WP.
>>> > Anyone know how to help me?
>>> > Here are a few pictures of the incident and the code I'm using is in
>>> > pastebin.
>>> >
>>> > http://pastebin.com/1fRBF237
>>> >
>>> > Jimmy Lopes de Macedo
>>> > contato at jimmymacedo.com
>>> > www.jimmymacedo.com
>>> >
>>> > <http://www.facebook.com/jimmymacedo> <http://twitter.com/jimmymacedo>
>>> > <http://br.linkedin.com/pub/jimmy-macedo/27/7b4/242>
>>> > <http://lattes.cnpq.br/4509397096603463>
>>> >
>>> > _______________________________________________
>>> > wp-hackers mailing list
>>> > wp-hackers at lists.automattic.com
>>> > http://lists.automattic.com/mailman/listinfo/wp-hackers
>>> >
>>> _______________________________________________
>>> wp-hackers mailing list
>>> wp-hackers at lists.automattic.com
>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>>
>>
>>
>

From otto at ottodestruct.com  Sat Jun 23 13:37:04 2012
From: otto at ottodestruct.com (Otto)
Date: Sat, 23 Jun 2012 08:37:04 -0500
Subject: [wp-hackers] Problems with dynamic image processing.
In-Reply-To: <CAMSdA6suuOFfHvuJYzUnaLQ2AmT2TbvjCwdj5QcY4hptRn+ErA@mail.gmail.com>
References: <CAMSdA6s3HruH7jfUXtEQ9b4TJYPsO91x8CBCWhBshsm=2FaaEA@mail.gmail.com>
	<CAD-FghxttK=iBR4jhQ28EMHCPQKrmKjimPM1HVgW4WNGWn7a-A@mail.gmail.com>
	<CAMSdA6vpGuVcHSLZgngEryiexo9URw=RDJpUTMdjiCPC1K1fJA@mail.gmail.com>
	<CAMSdA6u4=xvC=zbk-3De_XZC2R1yQgGJpdsX6n=7BzwZQMcUeg@mail.gmail.com>
	<CAMSdA6suuOFfHvuJYzUnaLQ2AmT2TbvjCwdj5QcY4hptRn+ErA@mail.gmail.com>
Message-ID: <CAD-FghwV=0LFJvDpg1ppRsmTgEXgmYCS9X7OOccbQ5pKoXP7DA@mail.gmail.com>

On Sat, Jun 23, 2012 at 6:46 AM, JimmyMacedo <contato at jimmymacedo.com> wrote:
> I saw now that the problem was not solved completely.
> The 404 error is gone, but he is not storing the images in the user cache.
> Each new request it loads the image again.
> What else can I do about this?

You don't have any code there to store the images in a cache, as far
as I can see.

-Otto

From santec at riseup.net  Sat Jun 23 13:58:36 2012
From: santec at riseup.net (Federico Razzoli)
Date: Sat, 23 Jun 2012 15:58:36 +0200
Subject: [wp-hackers] [proposal] wpdb_compat interface
In-Reply-To: <mailman.0.1340457061.18063.wp-hackers@lists.automattic.com>
References: <mailman.0.1340457061.18063.wp-hackers@lists.automattic.com>
Message-ID: <f919e01c668018b960df80a0b2dcd041.squirrel@fulvetta.riseup.net>

This is a proposal for a small feature.

[Summary]


From bpetty at bluehost.com  Sat Jun 23 16:09:45 2012
From: bpetty at bluehost.com (Bryan Petty)
Date: Sat, 23 Jun 2012 10:09:45 -0600
Subject: [wp-hackers] [proposal] wpdb_compat interface
In-Reply-To: <f919e01c668018b960df80a0b2dcd041.squirrel@fulvetta.riseup.net>
References: <mailman.0.1340457061.18063.wp-hackers@lists.automattic.com>
	<f919e01c668018b960df80a0b2dcd041.squirrel@fulvetta.riseup.net>
Message-ID: <4FE5EA49.90400@bluehost.com>

On 06/23/2012 07:58 AM, Federico Razzoli wrote:
> I have a patch which works correctly, but it seems that I can not post it
> in Your Trac. How can I submit my patch to Your attention?

You must register a user account on WordPress.org which can be used on
Trac: http://wordpress.org/support/register.php

Regards,

Bryan Petty
WordPress Developer
bpetty at bluehost.com

From santec at riseup.net  Sat Jun 23 17:41:02 2012
From: santec at riseup.net (Federico Razzoli)
Date: Sat, 23 Jun 2012 19:41:02 +0200
Subject: [wp-hackers] [proposal] wpdb_compat interface
In-Reply-To: <4FE5EA49.90400@bluehost.com>
References: <mailman.0.1340457061.18063.wp-hackers@lists.automattic.com>
	<f919e01c668018b960df80a0b2dcd041.squirrel@fulvetta.riseup.net>
	<4FE5EA49.90400@bluehost.com>
Message-ID: <7ab4bb116e966646e37bc8df343c36fd.squirrel@fulvetta.riseup.net>

> You must register a user account on WordPress.org which can be used on

Thank you for the link, Bryan.

I submitted a feature request:
http://core.trac.wordpress.org/ticket/21055

As I am not familiar with your development process, I hope that everything
is right.

Best regards,
Federico Razzoli




From wp at andrewnacin.com  Sat Jun 23 21:35:23 2012
From: wp at andrewnacin.com (Andrew Nacin)
Date: Sat, 23 Jun 2012 17:35:23 -0400
Subject: [wp-hackers] preventing the duplicate wp_insert_post effect
In-Reply-To: <CAHERW=1Rw+xQV55iPPUtN6U4Wqsi-EWHdQG0V4fdmpnSapx5Nw@mail.gmail.com>
References: <CAHERW=2F3G8jRRh=fh4y4jaWUVQVnwEY_CtDeuyPVxaquKcR+g@mail.gmail.com>
	<CAHERW=1Rw+xQV55iPPUtN6U4Wqsi-EWHdQG0V4fdmpnSapx5Nw@mail.gmail.com>
Message-ID: <CAP29Pvhi_3fTA0EkOsTkgupWozoenGu-Y_wETTxkEY8N5R8BUg@mail.gmail.com>

On Thu, Jun 21, 2012 at 8:12 PM, Haluk Karamete <halukkaramete at gmail.com>wrote:

> One discovery...
>
> If I change the  "wp_insert_post"  to wpdb->insert and use a straight
> wpdb insert, there are no problems. So this is all comes down to the
> wp_insert_post.
>

I've never seen your issue before, and I've worked on similar migration
scripts many times, with tens, hundreds of thousands, and millions
of records. I've also never seen a bug report on Trac highlighting an
issue with duplicated inserts for wp_insert_post(). You say you're
not alone, and that may be true, but I've never heard of "the duplicate
"wp_insert_post effect".

So, something tells me this is a bug in your code. Perhaps your code
to differentiate between an insert and an update does not work and
instead you get repeated inserts. Perhaps you have code (or a plugin)
that does something very weird (and wrong) on an action fired by
wp_insert_post(). Given that you modified it to use $wpdb->insert()
directly (which is a very bad idea, as it isn't very forwards compatible
if wp_insert_post() changes in the future), a code conflict seems likely.

Nacin

From will at itsananderson.com  Sun Jun 24 08:17:38 2012
From: will at itsananderson.com (Will Anderson)
Date: Sun, 24 Jun 2012 01:17:38 -0700
Subject: [wp-hackers] Best Practice for Mobile WP View
In-Reply-To: <CAFzLAweY0uegrAgDY4yNiMjePZ=QmYfsc=unjcj6rr3tx2v4gw@mail.gmail.com>
References: <CAFzLAweY0uegrAgDY4yNiMjePZ=QmYfsc=unjcj6rr3tx2v4gw@mail.gmail.com>
Message-ID: <CAG5CGyMgtA2TPG4yc8kiv36d7CmgoXpaysGfS13YTA=hs1HKQQ@mail.gmail.com>

Media queries are probably a decent option, but depending on how much
you've already invested in writing separate themes, that might not be
feasible.

Here's a mu-plugin solution that works more along the lines of what you
were hoping to accomplish:

https://gist.github.com/2982374

You'll want to change that code in the following places:

Line 14: Change the domain to your actual mobile site domain
Line 29: Change the theme to your actual mobile theme

Also, it's probably a good idea to read through the rest of it to get an
idea of what's going on. Basically it's switching your theme (and changing
the site URL) based on which domain was used to make the request.

To get this working on your site, install the code as a Must Use plugin
(after making the previously mentioned changes). Must Use plugins go in
/wp-content/mu-plugins/. You'll probably have to create the mu-plugins
folder. Name the PHP file something like "mobile.php" (or
whatever-you-want.php, really). Then just point both domains at that
WordPress instance, and you should be good to go.

The one caveat I can think of is that site caching might do funny things to
this solution (like serve mobile versions to desktop users, or visa-versa).
You could probably find a decent workaround for that as well, but it would
almost definitely have to be more specific to the caching plugin you're
using.

Also, this solution doesn't actually redirect mobile users to the mobile
domain, but I'd assume there's already code (or a plugin) out there
somewhere for doing that.

Hope this helps!
Will Anderson


On Fri, Jun 22, 2012 at 7:42 AM, taylor young <taylor.d.young at gmail.com>wrote:

> Use media queries to change the layout, use the same markup, and the same
> domain.
>
> http://adstexas.com
> http://modassicmarketing.com
>
> -Taylor
>
> On Fri, Jun 22, 2012 at 7:00 AM, <wp-hackers-request at lists.automattic.com
> >wrote:
>
> > Send wp-hackers mailing list submissions to
> >        wp-hackers at lists.automattic.com
> >
> > To subscribe or unsubscribe via the World Wide Web, visit
> >        http://lists.automattic.com/mailman/listinfo/wp-hackers
> > or, via email, send a message with subject or body 'help' to
> >        wp-hackers-request at lists.automattic.com
> >
> > You can reach the person managing the list at
> >        wp-hackers-owner at lists.automattic.com
> >
> > When replying, please edit your Subject line so it is more specific
> > than "Re: Contents of wp-hackers digest..."
> >
> >
> > Today's Topics:
> >
> >   1. Best Practice for Mobile WP View (Jeffrey Nolte)
> >   2. preventing the duplicate wp_insert_post effect (Haluk Karamete)
> >   3. Re: preventing the duplicate wp_insert_post effect
> >      (Haluk Karamete)
> >
> >
> > ----------------------------------------------------------------------
> >
> > Message: 1
> > Date: Thu, 21 Jun 2012 13:02:26 -0400
> > From: Jeffrey Nolte <jnolte at getmoxied.net>
> > Subject: [wp-hackers] Best Practice for Mobile WP View
> > To: Wp Hackers <wp-hackers at lists.automattic.com>
> > Message-ID: <9153C94F-420D-471E-96EF-C7E22AAD2E36 at getmoxied.net>
> > Content-Type: text/plain;       charset=us-ascii
> >
> > We are on the process of building a mobile site in WordPress.
> >
> > I would like to get some insight on best practice for configuring the
> > site. I have listed some details below.
> > Site is current in WP on http://site.com
> > We would like to have mobile on http://m.site.com
> > Both domains / views / sites will use the same database and assets
> (images
> > attached to posts, etc)
> > Our ideas for implementation were to configure another WordPress(
> > http://m.site.com) on the same server as using http://site.com and
> > connecting this new WP install to the existing db (http://site.com).
> >
> > I know there may be a better way hence me reaching out to the community.
> >
> > Thank you in advance,
> >
> > Jeffrey Nolte
> > Moxie Media Group, Inc.
> >
> >
> >
> >
> > ------------------------------
> >
> > Message: 2
> > Date: Thu, 21 Jun 2012 12:08:38 -0700
> > From: Haluk Karamete <halukkaramete at gmail.com>
> > Subject: [wp-hackers] preventing the duplicate wp_insert_post effect
> > To: wp-hackers at lists.automattic.com
> > Message-ID:
> >        <CAHERW=2F3G8jRRh=
> fh4y4jaWUVQVnwEY_CtDeuyPVxaquKcR+g at mail.gmail.com
> > >
> > Content-Type: text/plain; charset=ISO-8859-1
> >
> > This is all part of a migration routine I wrote where a while loop
> > goes thru 15,000 records from an ms-sql table and converts each record
> > into a post_data array to be fed into the wp_insert_post API.
> > Technically, since I'm dealing with 15000 recs in ms-sql, I should end
> > up with 15000 posts in a fresh installed wp_posts table. Right? In my
> > case, I sometimes get 16000, sometimes 290000. It's never the same.
> > Everytime is different. I'm almost to the point to re-write the code.
> > But if the culprit itself the wp_insert_post and some internal wp
> > process or wordpress cache that I do not know of or mysql server
> > config and or and or and or... , even the new approach won't work.
> >
> > After some research, I've come to learm I'm not alone on this. But
> > from what I read, I could not get a wrapper around it.
> >
> > As I said above, I create the posts going thru a while loop.
> >
> > Since the process takes a long time, I had to build a custom time-out
> > module. As the code goes thru the iterations of the while loop, it
> > marks its process into a time_out table, and siince I got a watch dog
> > page that's running in an iframe to keep an eye on the time_out
> > table's progress, even if the bottom frame ( the one that handles the
> > ms-sql to wp_posts process ) times out, I know from what record to
> > kick start the process.
> >
> > This way I do not have to sit in front of the computer to keep
> > clicking on 'continue'. link.
> >
> > Well, this trick works on all of my implementations that are severed
> > by timeouts . I eventually end up getting the whole table is processed
> > and the watch dog iframe stops refreshing when the number of records
> > to be processed is equal to the number of records that have been
> > processed in the last instance. So the time-out module works perfectly
> > except....
> >
> > Only and only when the destination table is wp_posts and when the the
> > wp_insert_post API is involved, I get a problem.
> >
> > After the first time-out, things start getting hay-wired.
> >
> > >From time to time, wp_insert_post ends up firing twice/thrice causing
> > the same record to be inserted multiple times.
> >
> > To remedy the situation, I've tried 3 different techniques including
> > the use of custom fields, but no luck. I also tried inserting a unique
> > key into the post itself to minimize the database activity. I found
> > this is better cause it avoids the involvement of custom fields, and
> > yet achieves the same goal. I put the source_key ( which is something
> > like --{$db_name}.{$table_name}.{$recid_value}-- ) in the post and
> > at_insert_time , I just check the existence of that key ( using like
> > operator ) to see if that post was added previously. but even that
> > fails... Wp_insert_post surprisingly creates double records. and up
> > until now, I simply cannot pin-down the occurrence of the problem.
> >
> > I read this, Prevent duplicate posts in wp_insert_post using custom
> > fields But my techniques were simply alternatives to it.
> >
> > Here is a cut-down code of how I do it...
> >
> > while ($row = mysql_fetch_assoc($RS)) :
> >
> >        $source_recid = $row['source_recid'];
> >        //source_recid is something like db.table.tablerecid
> >            //example services.media.1223
> >
> >        $post_data['post_content'] =
> > $row['some_field_thats_got_page_content'];
> >
> >        //append the source_recid to the post data in forms of an html
> > comment for uniqueness purposes
> >        $post_data['post_content'] = $post_data['post_content'] .
> > "<!--{$source_recid}-->";
> >
> >        //do the other stuff... ( shortened here for the clarify
> > purposes... )
> >
> >        ....
> >
> >        $post_data['post_status'] = 'publish';
> >
> >        Insert_or_UpdatePost($dbh,$post_data,$source_recid,$post_id);
> >
> >
> >        if ($post_id==0):
> >
> >            //log the error and move on
> >
> >            continue;
> >
> >        endif;
> >
> >
> > endwhile;
> >
> > function Insert_or_UpdatePost($dbh,$post_data,$source_recid,&$post_id){
> >
> >        // this function first looks up the --db.table.tablerecid--
> sequence
> >        // across all wp_posts post_content field
> >        // in determining if this record has been already INSERTed!
> >
> >        // and depending on the outcome, it does an insert or update
> >        // and return the $post_id accordingly
> >
> >        // if the function determines there are no such records,
> >        // then and only then, it runs the wp_insert_post!
> >
> >        // if the function determines that there is a post like that,
> >        // it retrieves the post_id
> >        // and then switches to operation
> >        // to use the wp_update_post instead!
> >
> >        // with this approach, technically speaking,
> >        // it should impossible to run wp_insert_post on an existing post!
> >
> >        // and yet, I still get duplicate posts...
> >
> >        // here we go;
> >
> >        $post_id_probed = blp_sql_getdbvals($dbh,"select id from
> > wp_posts where post_content LIKE '%--{$source_recid}--%'");
> >
> >        if (blp_isnumber($post_id_probed)):
> >            $post_id = $post_id_probed;
> >
> >            $post_data['ID'] = $post_id;
> >            $post_id = wp_update_post( $post_data );
> >
> >            if ($post_id == 0):
> >
> >                //add error
> >
> >                return FALSE;
> >
> >
> >            else:
> >
> >                update_post_meta($post_id, "wpcf-blp-migration-date",
> > blp_now('mysql'));
> >
> >                return TRUE;
> >
> >            endif;
> >
> >
> >         endif;
> >
> >         // if we make it this part, it means only one thing!
> >         // there is no post for the db.table.tablerecid yet,
> >         // so do the insert!
> >
> >        $post_id = wp_insert_post( $post_data );
> >
> >
> >
> >        if ($post_id == 0):
> >
> >            //add error
> >
> >            return FALSE;
> >
> >
> >        else:
> >
> >            //add_post_meta($post_id, "wpcf-blp-migration-source",
> > $source_recid,TRUE);
> >            //no need for that anymore
> >
> >            return TRUE;
> >
> >
> >        endif;
> >
> >
> > }
> >
> > There is also a post I created at wordpress.stackexchange site.
> >
> >
> >
> http://wordpress.stackexchange.com/questions/19732/prevent-duplicate-posts-in-wp-insert-post-using-custom-fields
> >
> >
> > ------------------------------
> >
> > Message: 3
> > Date: Thu, 21 Jun 2012 17:12:00 -0700
> > From: Haluk Karamete <halukkaramete at gmail.com>
> > Subject: Re: [wp-hackers] preventing the duplicate wp_insert_post
> >        effect
> > To: wp-hackers at lists.automattic.com
> > Message-ID:
> >        <CAHERW=
> 1Rw+xQV55iPPUtN6U4Wqsi-EWHdQG0V4fdmpnSapx5Nw at mail.gmail.com
> > >
> > Content-Type: text/plain; charset=ISO-8859-1
> >
> > One discovery...
> >
> > If I change the  "wp_insert_post"  to wpdb->insert and use a straight
> > wpdb insert, there are no problems. So this is all comes down to the
> > wp_insert_post.
> >
> > On Thu, Jun 21, 2012 at 12:08 PM, Haluk Karamete
> > <halukkaramete at gmail.com> wrote:
> > > This is all part of a migration routine I wrote where a while loop
> > > goes thru 15,000 records from an ms-sql table and converts each record
> > > into a post_data array to be fed into the wp_insert_post API.
> > > Technically, since I'm dealing with 15000 recs in ms-sql, I should end
> > > up with 15000 posts in a fresh installed wp_posts table. Right? In my
> > > case, I sometimes get 16000, sometimes 290000. It's never the same.
> > > Everytime is different. I'm almost to the point to re-write the code.
> > > But if the culprit itself the wp_insert_post and some internal wp
> > > process or wordpress cache that I do not know of or mysql server
> > > config and or and or and or... , even the new approach won't work.
> > >
> > > After some research, I've come to learm I'm not alone on this. But
> > > from what I read, I could not get a wrapper around it.
> > >
> > > As I said above, I create the posts going thru a while loop.
> > >
> > > Since the process takes a long time, I had to build a custom time-out
> > > module. As the code goes thru the iterations of the while loop, it
> > > marks its process into a time_out table, and siince I got a watch dog
> > > page that's running in an iframe to keep an eye on the time_out
> > > table's progress, even if the bottom frame ( the one that handles the
> > > ms-sql to wp_posts process ) times out, I know from what record to
> > > kick start the process.
> > >
> > > This way I do not have to sit in front of the computer to keep
> > > clicking on 'continue'. link.
> > >
> > > Well, this trick works on all of my implementations that are severed
> > > by timeouts . I eventually end up getting the whole table is processed
> > > and the watch dog iframe stops refreshing when the number of records
> > > to be processed is equal to the number of records that have been
> > > processed in the last instance. So the time-out module works perfectly
> > > except....
> > >
> > > Only and only when the destination table is wp_posts and when the the
> > > wp_insert_post API is involved, I get a problem.
> > >
> > > After the first time-out, things start getting hay-wired.
> > >
> > > From time to time, wp_insert_post ends up firing twice/thrice causing
> > > the same record to be inserted multiple times.
> > >
> > > To remedy the situation, I've tried 3 different techniques including
> > > the use of custom fields, but no luck. I also tried inserting a unique
> > > key into the post itself to minimize the database activity. I found
> > > this is better cause it avoids the involvement of custom fields, and
> > > yet achieves the same goal. I put the source_key ( which is something
> > > like --{$db_name}.{$table_name}.{$recid_value}-- ) in the post and
> > > at_insert_time , I just check the existence of that key ( using like
> > > operator ) to see if that post was added previously. but even that
> > > fails... Wp_insert_post surprisingly creates double records. and up
> > > until now, I simply cannot pin-down the occurrence of the problem.
> > >
> > > I read this, Prevent duplicate posts in wp_insert_post using custom
> > > fields But my techniques were simply alternatives to it.
> > >
> > > Here is a cut-down code of how I do it...
> > >
> > > while ($row = mysql_fetch_assoc($RS)) :
> > >
> > > ? ? ? ?$source_recid = $row['source_recid'];
> > > ? ? ? ?//source_recid is something like db.table.tablerecid
> > > ? ? ? ? ? ?//example services.media.1223
> > >
> > > ? ? ? ?$post_data['post_content'] =
> > $row['some_field_thats_got_page_content'];
> > >
> > > ? ? ? ?//append the source_recid to the post data in forms of an html
> > > comment for uniqueness purposes
> > > ? ? ? ?$post_data['post_content'] = $post_data['post_content'] .
> > > "<!--{$source_recid}-->";
> > >
> > > ? ? ? ?//do the other stuff... ( shortened here for the clarify
> > purposes... )
> > >
> > > ? ? ? ?....
> > >
> > > ? ? ? ?$post_data['post_status'] = 'publish';
> > >
> > > ? ? ? ?Insert_or_UpdatePost($dbh,$post_data,$source_recid,$post_id);
> > >
> > >
> > > ? ? ? ?if ($post_id==0):
> > >
> > > ? ? ? ? ? ?//log the error and move on
> > >
> > > ? ? ? ? ? ?continue;
> > >
> > > ? ? ? ?endif;
> > >
> > >
> > > endwhile;
> > >
> > > function Insert_or_UpdatePost($dbh,$post_data,$source_recid,&$post_id){
> > >
> > > ? ? ? ?// this function first looks up the --db.table.tablerecid--
> > sequence
> > > ? ? ? ?// across all wp_posts post_content field
> > > ? ? ? ?// in determining if this record has been already INSERTed!
> > >
> > > ? ? ? ?// and depending on the outcome, it does an insert or update
> > > ? ? ? ?// and return the $post_id accordingly
> > >
> > > ? ? ? ?// if the function determines there are no such records,
> > > ? ? ? ?// then and only then, it runs the wp_insert_post!
> > >
> > > ? ? ? ?// if the function determines that there is a post like that,
> > > ? ? ? ?// it retrieves the post_id
> > > ? ? ? ?// and then switches to operation
> > > ? ? ? ?// to use the wp_update_post instead!
> > >
> > > ? ? ? ?// with this approach, technically speaking,
> > > ? ? ? ?// it should impossible to run wp_insert_post on an existing
> post!
> > >
> > > ? ? ? ?// and yet, I still get duplicate posts...
> > >
> > > ? ? ? ?// here we go;
> > >
> > > ? ? ? ?$post_id_probed = blp_sql_getdbvals($dbh,"select id from
> > > wp_posts where post_content LIKE '%--{$source_recid}--%'");
> > >
> > > ? ? ? ?if (blp_isnumber($post_id_probed)):
> > > ? ? ? ? ? ?$post_id = $post_id_probed;
> > >
> > > ? ? ? ? ? ?$post_data['ID'] = $post_id;
> > > ? ? ? ? ? ?$post_id = wp_update_post( $post_data );
> > >
> > > ? ? ? ? ? ?if ($post_id == 0):
> > >
> > > ? ? ? ? ? ? ? ?//add error
> > >
> > > ? ? ? ? ? ? ? ?return FALSE;
> > >
> > >
> > > ? ? ? ? ? ?else:
> > >
> > > ? ? ? ? ? ? ? ?update_post_meta($post_id, "wpcf-blp-migration-date",
> > > blp_now('mysql'));
> > >
> > > ? ? ? ? ? ? ? ?return TRUE;
> > >
> > > ? ? ? ? ? ?endif;
> > >
> > >
> > > ? ? ? ? endif;
> > >
> > > ? ? ? ? // if we make it this part, it means only one thing!
> > > ? ? ? ? // there is no post for the db.table.tablerecid yet,
> > > ? ? ? ? // so do the insert!
> > >
> > > ? ? ? ?$post_id = wp_insert_post( $post_data );
> > >
> > >
> > >
> > > ? ? ? ?if ($post_id == 0):
> > >
> > > ? ? ? ? ? ?//add error
> > >
> > > ? ? ? ? ? ?return FALSE;
> > >
> > >
> > > ? ? ? ?else:
> > >
> > > ? ? ? ? ? ?//add_post_meta($post_id, "wpcf-blp-migration-source",
> > > $source_recid,TRUE);
> > > ? ? ? ? ? ?//no need for that anymore
> > >
> > > ? ? ? ? ? ?return TRUE;
> > >
> > >
> > > ? ? ? ?endif;
> > >
> > >
> > > }
> > >
> > > There is also a post I created at wordpress.stackexchange site.
> > >
> > >
> >
> http://wordpress.stackexchange.com/questions/19732/prevent-duplicate-posts-in-wp-insert-post-using-custom-fields
> >
> >
> > ------------------------------
> >
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers at lists.automattic.com
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> >
> >
> > End of wp-hackers Digest, Vol 89, Issue 29
> > ******************************************
> >
>
>
>
> --
> -Taylor Y.
> taylor.d.young at gmail.com
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>

From info at a5d.org  Mon Jun 25 09:20:08 2012
From: info at a5d.org (Lee Rickler)
Date: Mon, 25 Jun 2012 10:20:08 +0100
Subject: [wp-hackers] Best Practice for Mobile WP View
In-Reply-To: <CAFzLAweY0uegrAgDY4yNiMjePZ=QmYfsc=unjcj6rr3tx2v4gw@mail.gmail.com>
References: <CAFzLAweY0uegrAgDY4yNiMjePZ=QmYfsc=unjcj6rr3tx2v4gw@mail.gmail.com>
Message-ID: <A7997988-6E40-41F4-9A39-F83209B64617@a5d.org>

Totally agree.

I've just completed a huge, cross browser, cross platform, cross device project which only took a few extra lines of CSS to get everything working correctly.


Lee

On 22 Jun 2012, at 15:42, taylor young wrote:

> Use media queries to change the layout, use the same markup, and the same
> domain.
> 
> http://adstexas.com
> http://modassicmarketing.com
> 
> -Taylor


From chris at lod.com  Tue Jun 26 01:56:07 2012
From: chris at lod.com (chris mccoy)
Date: Mon, 25 Jun 2012 21:56:07 -0400
Subject: [wp-hackers] chrome and 3.4 acting up
Message-ID: <000301cd533e$da1ca300$8e55e900$@lod.com>

Anyone else notice that in chrome and the latest 3.4 its throwing some
errors with the wp-load causing the visual editor to be broken?

 

Other browsers works fine.

 

I tried clearing the cache, and it seemed to work, but as soon as I do any
navigating it does the same error again.

 

Curious if anyone else has run into this.

 


From raven at mecus.es  Tue Jun 26 07:36:43 2012
From: raven at mecus.es (Rafael Poveda - RaveN)
Date: Tue, 26 Jun 2012 09:36:43 +0200
Subject: [wp-hackers] chrome and 3.4 acting up
In-Reply-To: <000301cd533e$da1ca300$8e55e900$@lod.com>
References: <000301cd533e$da1ca300$8e55e900$@lod.com>
Message-ID: <E75D72E5D81248B4BB882A4A4F9F9C5A@gmail.com>

About 300 client sites using Chrome. Noone reported any problem.   

--
Rafael Poveda <RaveN>


El martes 26 de junio de 2012 a las 03:56, chris mccoy escribi?:

> Anyone else notice that in chrome and the latest 3.4 its throwing some
> errors with the wp-load causing the visual editor to be broken?
>  
>  
> Other browsers works fine.
>  
>  
> I tried clearing the cache, and it seemed to work, but as soon as I do any
> navigating it does the same error again.
>  
>  
> Curious if anyone else has run into this.
>  
>  
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com (mailto:wp-hackers at lists.automattic.com)
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>  
>  



From ipstenu at ipstenu.org  Tue Jun 26 11:38:58 2012
From: ipstenu at ipstenu.org (Mika A Epstein)
Date: Tue, 26 Jun 2012 06:38:58 -0500
Subject: [wp-hackers] chrome and 3.4 acting up
In-Reply-To: <E75D72E5D81248B4BB882A4A4F9F9C5A@gmail.com>
References: <000301cd533e$da1ca300$8e55e900$@lod.com>
	<E75D72E5D81248B4BB882A4A4F9F9C5A@gmail.com>
Message-ID: <E0D17CC8-B926-45A1-89A3-1FFB56AA8A66@ipstenu.org>

You know the drill :)

Turn off all your plugins, etc etc. I pretty much use Chrome exclusively and have no issues, save when testing plugins.


On Jun 26, 2012, at 2:36 AM, Rafael Poveda - RaveN <raven at mecus.es> wrote:

> About 300 client sites using Chrome. Noone reported any problem.   
> 
> --
> Rafael Poveda <RaveN>
> 
> 
> El martes 26 de junio de 2012 a las 03:56, chris mccoy escribi?:
> 
>> Anyone else notice that in chrome and the latest 3.4 its throwing some
>> errors with the wp-load causing the visual editor to be broken?
>> 
>> 
>> Other browsers works fine.
>> 
>> 
>> I tried clearing the cache, and it seemed to work, but as soon as I do any
>> navigating it does the same error again.
>> 
>> 
>> Curious if anyone else has run into this.
>> 
>> 
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com (mailto:wp-hackers at lists.automattic.com)
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>> 
>> 
> 
> 
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

From remkus at forsite.nu  Tue Jun 26 11:43:13 2012
From: remkus at forsite.nu (=?utf-8?Q?Remkus_de_Vries_=7C_ForSite_Media?=)
Date: Tue, 26 Jun 2012 13:43:13 +0200
Subject: [wp-hackers] chrome and 3.4 acting up
In-Reply-To: <E0D17CC8-B926-45A1-89A3-1FFB56AA8A66@ipstenu.org>
References: <000301cd533e$da1ca300$8e55e900$@lod.com>
	<E75D72E5D81248B4BB882A4A4F9F9C5A@gmail.com>
	<E0D17CC8-B926-45A1-89A3-1FFB56AA8A66@ipstenu.org>
Message-ID: <75BD87DFD49D4EADAF2C4465A4AF9172@forsite.nu>

If you are by any chance using the Chrome beta build (currently 20.x) then yes, that one has been quite buggy for me as well, but I doubt you're using that one ..

/* ForSite Media
-------------------------------------------*/
WordPress Design & Development
NL: www.forsitemedia.nl
EN: www.forsitemedia.net
+31622164385


On Tuesday, 26 June 2012 at 13:38, Mika A Epstein wrote:

> You know the drill :)
>  
> Turn off all your plugins, etc etc. I pretty much use Chrome exclusively and have no issues, save when testing plugins.
>  
>  
> On Jun 26, 2012, at 2:36 AM, Rafael Poveda - RaveN <raven at mecus.es (mailto:raven at mecus.es)> wrote:
>  
> > About 300 client sites using Chrome. Noone reported any problem.  
> >  
> > --
> > Rafael Poveda <RaveN>
> >  
> >  
> > El martes 26 de junio de 2012 a las 03:56, chris mccoy escribi?:
> >  
> > > Anyone else notice that in chrome and the latest 3.4 its throwing some
> > > errors with the wp-load causing the visual editor to be broken?
> > >  
> > >  
> > > Other browsers works fine.
> > >  
> > >  
> > > I tried clearing the cache, and it seemed to work, but as soon as I do any
> > > navigating it does the same error again.
> > >  
> > >  
> > > Curious if anyone else has run into this.
> > >  
> > >  
> > > _______________________________________________
> > > wp-hackers mailing list
> > > wp-hackers at lists.automattic.com (mailto:wp-hackers at lists.automattic.com)
> > > http://lists.automattic.com/mailman/listinfo/wp-hackers
> > >  
> >  
> >  
> >  
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers at lists.automattic.com (mailto:wp-hackers at lists.automattic.com)
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> >  
>  
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com (mailto:wp-hackers at lists.automattic.com)
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>  
>  



From chris at lod.com  Tue Jun 26 12:30:32 2012
From: chris at lod.com (chris mccoy)
Date: Tue, 26 Jun 2012 08:30:32 -0400
Subject: [wp-hackers] chrome and 3.4 acting up
In-Reply-To: <75BD87DFD49D4EADAF2C4465A4AF9172@forsite.nu>
References: <000301cd533e$da1ca300$8e55e900$@lod.com>
	<E75D72E5D81248B4BB882A4A4F9F9C5A@gmail.com>
	<E0D17CC8-B926-45A1-89A3-1FFB56AA8A66@ipstenu.org>
	<75BD87DFD49D4EADAF2C4465A4AF9172@forsite.nu>
Message-ID: <000301cd5397$7a87ce20$6f976a60$@lod.com>

Ya I am using beta 20, its on the widgets screen, you cant drag widgets, I will see about downgrading.


-----Original Message-----
From: wp-hackers-bounces at lists.automattic.com [mailto:wp-hackers-bounces at lists.automattic.com] On Behalf Of Remkus de Vries | ForSite Media
Sent: Tuesday, June 26, 2012 7:43 AM
To: wp-hackers at lists.automattic.com
Subject: Re: [wp-hackers] chrome and 3.4 acting up

If you are by any chance using the Chrome beta build (currently 20.x) then yes, that one has been quite buggy for me as well, but I doubt you're using that one ..

/* ForSite Media
-------------------------------------------*/
WordPress Design & Development
NL: www.forsitemedia.nl
EN: www.forsitemedia.net
+31622164385


On Tuesday, 26 June 2012 at 13:38, Mika A Epstein wrote:

> You know the drill :)
>  
> Turn off all your plugins, etc etc. I pretty much use Chrome exclusively and have no issues, save when testing plugins.
>  
>  
> On Jun 26, 2012, at 2:36 AM, Rafael Poveda - RaveN <raven at mecus.es (mailto:raven at mecus.es)> wrote:
>  
> > About 300 client sites using Chrome. Noone reported any problem.  
> >  
> > --
> > Rafael Poveda <RaveN>
> >  
> >  
> > El martes 26 de junio de 2012 a las 03:56, chris mccoy escribi?:
> >  
> > > Anyone else notice that in chrome and the latest 3.4 its throwing 
> > > some errors with the wp-load causing the visual editor to be broken?
> > >  
> > >  
> > > Other browsers works fine.
> > >  
> > >  
> > > I tried clearing the cache, and it seemed to work, but as soon as 
> > > I do any navigating it does the same error again.
> > >  
> > >  
> > > Curious if anyone else has run into this.
> > >  
> > >  
> > > _______________________________________________
> > > wp-hackers mailing list
> > > wp-hackers at lists.automattic.com 
> > > (mailto:wp-hackers at lists.automattic.com)
> > > http://lists.automattic.com/mailman/listinfo/wp-hackers
> > >  
> >  
> >  
> >  
> > _______________________________________________
> > wp-hackers mailing list
> > wp-hackers at lists.automattic.com 
> > (mailto:wp-hackers at lists.automattic.com)
> > http://lists.automattic.com/mailman/listinfo/wp-hackers
> >  
>  
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com 
> (mailto:wp-hackers at lists.automattic.com)
> http://lists.automattic.com/mailman/listinfo/wp-hackers
>  
>  


_______________________________________________
wp-hackers mailing list
wp-hackers at lists.automattic.com
http://lists.automattic.com/mailman/listinfo/wp-hackers


From piemanek at gmail.com  Tue Jun 26 12:33:59 2012
From: piemanek at gmail.com (Simon Blackbourn)
Date: Tue, 26 Jun 2012 13:33:59 +0100
Subject: [wp-hackers] chrome and 3.4 acting up
In-Reply-To: <000301cd5397$7a87ce20$6f976a60$@lod.com>
References: <000301cd533e$da1ca300$8e55e900$@lod.com>
	<E75D72E5D81248B4BB882A4A4F9F9C5A@gmail.com>
	<E0D17CC8-B926-45A1-89A3-1FFB56AA8A66@ipstenu.org>
	<75BD87DFD49D4EADAF2C4465A4AF9172@forsite.nu>
	<000301cd5397$7a87ce20$6f976a60$@lod.com>
Message-ID: <CAJxFMSBtN8P2bUF35_LkKEgG8gCe9S8V-AjJCdPO5E_HgTwzxg@mail.gmail.com>

> Ya I am using beta 20, its on the widgets screen, you cant drag widgets, I
> will see about downgrading.
>
>
>
widget dragging works fine for me in chrome beta 20.

From leogermani at gmail.com  Tue Jun 26 20:37:53 2012
From: leogermani at gmail.com (Leo germani)
Date: Tue, 26 Jun 2012 17:37:53 -0300
Subject: [wp-hackers] Put New Customize Theme feature on menu
Message-ID: <CAB6WXM48bkOS7sc9TjB5yAz2uTtyLHxe4uSMGq=c9B0mwJYo1w@mail.gmail.com>

Hi all,

This new customize theme feature of 3.4 is just great. Following the great
tutorial written from Otto I was able to change the way the user tweaked
the theme in no time, thanks Otto.

Now to the questions:

Why isnt "Customize" in a new menu item under the "Appearance" menu. Isnt
it expected? I though it will be default. Is there another way to put it
there appart from add_theme_page(...) ?

Is there an option to easily remove "Backgroun" and "Header" menu items?
Since you can do all this through the new "Customize", I dont see why they
should stay there... Am I missing something?

Thanks

Leo,,

-- 
leogermani.com.br

From otto at ottodestruct.com  Tue Jun 26 21:20:22 2012
From: otto at ottodestruct.com (Otto)
Date: Tue, 26 Jun 2012 16:20:22 -0500
Subject: [wp-hackers] Put New Customize Theme feature on menu
In-Reply-To: <CAB6WXM48bkOS7sc9TjB5yAz2uTtyLHxe4uSMGq=c9B0mwJYo1w@mail.gmail.com>
References: <CAB6WXM48bkOS7sc9TjB5yAz2uTtyLHxe4uSMGq=c9B0mwJYo1w@mail.gmail.com>
Message-ID: <CAD-FghzVSMDqLZKMb-98W5b8sW-cTexM7FxB4mrH_Fej2HGA_g@mail.gmail.com>

I believe that it wasn't added there due to backwards compatibility
concerns for now. Also, the background and header pages have somewhat
more functionality on their menu-accessible pages than in the
customizer at the moment, so the menu items were left there.

I expect that things will change around this in future versions as
more themes use it and the core team sees how they use it and what is
needed.

-Otto



On Tue, Jun 26, 2012 at 3:37 PM, Leo germani <leogermani at gmail.com> wrote:
> Hi all,
>
> This new customize theme feature of 3.4 is just great. Following the great
> tutorial written from Otto I was able to change the way the user tweaked
> the theme in no time, thanks Otto.
>
> Now to the questions:
>
> Why isnt "Customize" in a new menu item under the "Appearance" menu. Isnt
> it expected? I though it will be default. Is there another way to put it
> there appart from add_theme_page(...) ?
>
> Is there an option to easily remove "Backgroun" and "Header" menu items?
> Since you can do all this through the new "Customize", I dont see why they
> should stay there... Am I missing something?
>
> Thanks
>
> Leo,,
>
> --
> leogermani.com.br
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

From harry at dxw.com  Wed Jun 27 11:47:10 2012
From: harry at dxw.com (Harry Metcalfe)
Date: Wed, 27 Jun 2012 12:47:10 +0100
Subject: [wp-hackers] Disabling Tools->Export
Message-ID: <4FEAF2BE.5070902@dxw.com>

Hello,

We've found that some of our corporate clients have concerns about the 
ability for their staff to mass-export data from the WP backend.

I realise we can (and have) removed the administrator role's capability 
to do that, but I wondered if it might be useful to add a constant that 
disables it? There's a bit of concern that a plugin could re-add the 
capability without us noticing. Something that works like 
DISALLOW_FILE_EDIT would be more robust.

Very happy to submit a patch if people think it's a good idea.

Harry


From cross at thisismyurl.com  Wed Jun 27 12:31:57 2012
From: cross at thisismyurl.com (Christopher Ross)
Date: Wed, 27 Jun 2012 09:31:57 -0300
Subject: [wp-hackers] Disabling Tools->Export
In-Reply-To: <4FEAF2BE.5070902@dxw.com>
References: <4FEAF2BE.5070902@dxw.com>
Message-ID: <4F570E69-164B-4A54-82D5-AC78210D3399@thisismyurl.com>

Harry, I hesitate to ever suggest changing core files but the only way I could think of to ensure the export can't run *ever* would be to edit /wp-admin/export.php and remove the functionality. 


On 2012-06-27, at 8:47 AM, Harry Metcalfe wrote:

> Hello,
> 
> We've found that some of our corporate clients have concerns about the ability for their staff to mass-export data from the WP backend.
> 
> I realise we can (and have) removed the administrator role's capability to do that, but I wondered if it might be useful to add a constant that disables it? There's a bit of concern that a plugin could re-add the capability without us noticing. Something that works like DISALLOW_FILE_EDIT would be more robust.
> 
> Very happy to submit a patch if people think it's a good idea.
> 
> Harry
> 
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers


--

Christopher Ross : @thisismyurl : Pinterest : Facebook : LinkedIn : Google+
Telephone: (506) 455-4122

399 King Street,
Fredericton, New Brunswick
E3B 3E5

Photography : Blog





From harry at dxw.com  Wed Jun 27 12:45:00 2012
From: harry at dxw.com (Harry Metcalfe)
Date: Wed, 27 Jun 2012 13:45:00 +0100
Subject: [wp-hackers] Disabling Tools->Export
In-Reply-To: <4F570E69-164B-4A54-82D5-AC78210D3399@thisismyurl.com>
References: <4FEAF2BE.5070902@dxw.com>
	<4F570E69-164B-4A54-82D5-AC78210D3399@thisismyurl.com>
Message-ID: <4FEB004C.1080100@dxw.com>

Yup, that's what I'm suggesting - but agree that one-off core editing is 
bad. Hence happy to write a patch, if it would be accepted.

Harry


On 27/06/12 13:31, Christopher Ross wrote:
> Harry, I hesitate to ever suggest changing core files but the only way I could think of to ensure the export can't run *ever* would be to edit /wp-admin/export.php and remove the functionality.
>
>
> On 2012-06-27, at 8:47 AM, Harry Metcalfe wrote:
>
>> Hello,
>>
>> We've found that some of our corporate clients have concerns about the ability for their staff to mass-export data from the WP backend.
>>
>> I realise we can (and have) removed the administrator role's capability to do that, but I wondered if it might be useful to add a constant that disables it? There's a bit of concern that a plugin could re-add the capability without us noticing. Something that works like DISALLOW_FILE_EDIT would be more robust.
>>
>> Very happy to submit a patch if people think it's a good idea.
>>
>> Harry
>>
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
> --
>
> Christopher Ross : @thisismyurl : Pinterest : Facebook : LinkedIn : Google+
> Telephone: (506) 455-4122
>
> 399 King Street,
> Fredericton, New Brunswick
> E3B 3E5
>
> Photography : Blog
>
>
>
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

From wordpress at dd32.id.au  Wed Jun 27 12:50:04 2012
From: wordpress at dd32.id.au (Dion Hulse (dd32))
Date: Wed, 27 Jun 2012 22:50:04 +1000
Subject: [wp-hackers] Disabling Tools->Export
In-Reply-To: <4FEB004C.1080100@dxw.com>
References: <4FEAF2BE.5070902@dxw.com>
	<4F570E69-164B-4A54-82D5-AC78210D3399@thisismyurl.com>
	<4FEB004C.1080100@dxw.com>
Message-ID: <CAL4EHf=PHOkPJiRfxk8OWhLtKDVmrX+eHWGRjCnUu73nfpOiEw@mail.gmail.com>

you could just filter the capability and always return false on it?
I think something like this would work: (i don't know the export cap
off the top of my head though, and i'm sure there's a better hook for
this..)


add_filter( 'role_has_cap', function( $caps, $cap_searched_for ) {
if ( 'export_cap_name' == $cap_searched_for)
  return false;
else
  return $caps;
}, 100, 2);

On 27 June 2012 22:45, Harry Metcalfe <harry at dxw.com> wrote:
> Yup, that's what I'm suggesting - but agree that one-off core editing is
> bad. Hence happy to write a patch, if it would be accepted.
>
> Harry
>
>
>
> On 27/06/12 13:31, Christopher Ross wrote:
>>
>> Harry, I hesitate to ever suggest changing core files but the only way I
>> could think of to ensure the export can't run *ever* would be to edit
>> /wp-admin/export.php and remove the functionality.
>>
>>
>> On 2012-06-27, at 8:47 AM, Harry Metcalfe wrote:
>>
>>> Hello,
>>>
>>> We've found that some of our corporate clients have concerns about the
>>> ability for their staff to mass-export data from the WP backend.
>>>
>>> I realise we can (and have) removed the administrator role's capability
>>> to do that, but I wondered if it might be useful to add a constant that
>>> disables it? There's a bit of concern that a plugin could re-add the
>>> capability without us noticing. Something that works like DISALLOW_FILE_EDIT
>>> would be more robust.
>>>
>>> Very happy to submit a patch if people think it's a good idea.
>>>
>>> Harry
>>>
>>> _______________________________________________
>>> wp-hackers mailing list
>>> wp-hackers at lists.automattic.com
>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
>>
>> --
>>
>> Christopher Ross : @thisismyurl : Pinterest : Facebook : LinkedIn :
>> Google+
>> Telephone: (506) 455-4122
>>
>> 399 King Street,
>> Fredericton, New Brunswick
>> E3B 3E5
>>
>> Photography : Blog
>>
>>
>>
>>
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

From harry at dxw.com  Wed Jun 27 12:52:40 2012
From: harry at dxw.com (Harry Metcalfe)
Date: Wed, 27 Jun 2012 13:52:40 +0100
Subject: [wp-hackers] Disabling Tools->Export
In-Reply-To: <CAL4EHf=PHOkPJiRfxk8OWhLtKDVmrX+eHWGRjCnUu73nfpOiEw@mail.gmail.com>
References: <4FEAF2BE.5070902@dxw.com>
	<4F570E69-164B-4A54-82D5-AC78210D3399@thisismyurl.com>
	<4FEB004C.1080100@dxw.com>
	<CAL4EHf=PHOkPJiRfxk8OWhLtKDVmrX+eHWGRjCnUu73nfpOiEw@mail.gmail.com>
Message-ID: <4FEB0218.7000109@dxw.com>

Yup, we've got something very similar that we'll be deploying soon. But 
the problem is that another plugin could very easily just remove that, 
or add its own filter with higher priority and override the first one. A 
constant that forces wp-admin/export.php to bail would be more robust.

Harry


On 27/06/12 13:50, Dion Hulse (dd32) wrote:
> you could just filter the capability and always return false on it?
> I think something like this would work: (i don't know the export cap
> off the top of my head though, and i'm sure there's a better hook for
> this..)
>
>
> add_filter( 'role_has_cap', function( $caps, $cap_searched_for ) {
> if ( 'export_cap_name' == $cap_searched_for)
>    return false;
> else
>    return $caps;
> }, 100, 2);
>
> On 27 June 2012 22:45, Harry Metcalfe<harry at dxw.com>  wrote:
>> Yup, that's what I'm suggesting - but agree that one-off core editing is
>> bad. Hence happy to write a patch, if it would be accepted.
>>
>> Harry
>>
>>
>>
>> On 27/06/12 13:31, Christopher Ross wrote:
>>> Harry, I hesitate to ever suggest changing core files but the only way I
>>> could think of to ensure the export can't run *ever* would be to edit
>>> /wp-admin/export.php and remove the functionality.
>>>
>>>
>>> On 2012-06-27, at 8:47 AM, Harry Metcalfe wrote:
>>>
>>>> Hello,
>>>>
>>>> We've found that some of our corporate clients have concerns about the
>>>> ability for their staff to mass-export data from the WP backend.
>>>>
>>>> I realise we can (and have) removed the administrator role's capability
>>>> to do that, but I wondered if it might be useful to add a constant that
>>>> disables it? There's a bit of concern that a plugin could re-add the
>>>> capability without us noticing. Something that works like DISALLOW_FILE_EDIT
>>>> would be more robust.
>>>>
>>>> Very happy to submit a patch if people think it's a good idea.
>>>>
>>>> Harry
>>>>
>>>> _______________________________________________
>>>> wp-hackers mailing list
>>>> wp-hackers at lists.automattic.com
>>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>>
>>> --
>>>
>>> Christopher Ross : @thisismyurl : Pinterest : Facebook : LinkedIn :
>>> Google+
>>> Telephone: (506) 455-4122
>>>
>>> 399 King Street,
>>> Fredericton, New Brunswick
>>> E3B 3E5
>>>
>>> Photography : Blog
>>>
>>>
>>>
>>>
>>> _______________________________________________
>>> wp-hackers mailing list
>>> wp-hackers at lists.automattic.com
>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

From wordpress at dd32.id.au  Wed Jun 27 12:56:50 2012
From: wordpress at dd32.id.au (Dion Hulse (dd32))
Date: Wed, 27 Jun 2012 22:56:50 +1000
Subject: [wp-hackers] Disabling Tools->Export
In-Reply-To: <4FEB0218.7000109@dxw.com>
References: <4FEAF2BE.5070902@dxw.com>
	<4F570E69-164B-4A54-82D5-AC78210D3399@thisismyurl.com>
	<4FEB004C.1080100@dxw.com>
	<CAL4EHf=PHOkPJiRfxk8OWhLtKDVmrX+eHWGRjCnUu73nfpOiEw@mail.gmail.com>
	<4FEB0218.7000109@dxw.com>
Message-ID: <CAL4EHf=cGvT34kGEVqHohQEAe7BkzdYGiZCnKKoaQMdZpThz9g@mail.gmail.com>

I think you're significantly over thinking things.. A plugin isn't
likely to force the export to be enabled, and in any sense, if you're
so worried about the security of the data you should be looking at
what the plugin does, and how it does it, more closer.

if you wanted to be paranoid, you could use some insanely high
priority that is unlikely to be matched, PHP_MAXINT if you so wish.

A constant is detrimental to most users of WordPress - well,
detrimental might be the wrong word, but un-needed for sure, A plugin
is where disabling exports should happen.

On 27 June 2012 22:52, Harry Metcalfe <harry at dxw.com> wrote:
> Yup, we've got something very similar that we'll be deploying soon. But the
> problem is that another plugin could very easily just remove that, or add
> its own filter with higher priority and override the first one. A constant
> that forces wp-admin/export.php to bail would be more robust.
>
> Harry
>
>
>
> On 27/06/12 13:50, Dion Hulse (dd32) wrote:
>>
>> you could just filter the capability and always return false on it?
>> I think something like this would work: (i don't know the export cap
>> off the top of my head though, and i'm sure there's a better hook for
>> this..)
>>
>>
>> add_filter( 'role_has_cap', function( $caps, $cap_searched_for ) {
>> if ( 'export_cap_name' == $cap_searched_for)
>> ? return false;
>> else
>> ? return $caps;
>> }, 100, 2);
>>
>> On 27 June 2012 22:45, Harry Metcalfe<harry at dxw.com> ?wrote:
>>>
>>> Yup, that's what I'm suggesting - but agree that one-off core editing is
>>> bad. Hence happy to write a patch, if it would be accepted.
>>>
>>> Harry
>>>
>>>
>>>
>>> On 27/06/12 13:31, Christopher Ross wrote:
>>>>
>>>> Harry, I hesitate to ever suggest changing core files but the only way I
>>>> could think of to ensure the export can't run *ever* would be to edit
>>>> /wp-admin/export.php and remove the functionality.
>>>>
>>>>
>>>> On 2012-06-27, at 8:47 AM, Harry Metcalfe wrote:
>>>>
>>>>> Hello,
>>>>>
>>>>> We've found that some of our corporate clients have concerns about the
>>>>> ability for their staff to mass-export data from the WP backend.
>>>>>
>>>>> I realise we can (and have) removed the administrator role's capability
>>>>> to do that, but I wondered if it might be useful to add a constant that
>>>>> disables it? There's a bit of concern that a plugin could re-add the
>>>>> capability without us noticing. Something that works like
>>>>> DISALLOW_FILE_EDIT
>>>>> would be more robust.
>>>>>
>>>>> Very happy to submit a patch if people think it's a good idea.
>>>>>
>>>>> Harry
>>>>>
>>>>> _______________________________________________
>>>>> wp-hackers mailing list
>>>>> wp-hackers at lists.automattic.com
>>>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>>>
>>>>
>>>> --
>>>>
>>>> Christopher Ross : @thisismyurl : Pinterest : Facebook : LinkedIn :
>>>> Google+
>>>> Telephone: (506) 455-4122
>>>>
>>>> 399 King Street,
>>>> Fredericton, New Brunswick
>>>> E3B 3E5
>>>>
>>>> Photography : Blog
>>>>
>>>>
>>>>
>>>>
>>>> _______________________________________________
>>>> wp-hackers mailing list
>>>> wp-hackers at lists.automattic.com
>>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>>
>>> _______________________________________________
>>> wp-hackers mailing list
>>> wp-hackers at lists.automattic.com
>>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>>
>> _______________________________________________
>> wp-hackers mailing list
>> wp-hackers at lists.automattic.com
>> http://lists.automattic.com/mailman/listinfo/wp-hackers
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

From wordpress at zed1.com  Wed Jun 27 13:19:22 2012
From: wordpress at zed1.com (Mike Little)
Date: Wed, 27 Jun 2012 14:19:22 +0100
Subject: [wp-hackers] Disabling Tools->Export
In-Reply-To: <CAL4EHf=cGvT34kGEVqHohQEAe7BkzdYGiZCnKKoaQMdZpThz9g@mail.gmail.com>
References: <4FEAF2BE.5070902@dxw.com>
	<4F570E69-164B-4A54-82D5-AC78210D3399@thisismyurl.com>
	<4FEB004C.1080100@dxw.com>
	<CAL4EHf=PHOkPJiRfxk8OWhLtKDVmrX+eHWGRjCnUu73nfpOiEw@mail.gmail.com>
	<4FEB0218.7000109@dxw.com>
	<CAL4EHf=cGvT34kGEVqHohQEAe7BkzdYGiZCnKKoaQMdZpThz9g@mail.gmail.com>
Message-ID: <CAMb54M2LGJYTQxWPV-B73dY7hMFjJ60Y4bqONuDWbK_KjeZ-RQ@mail.gmail.com>

Also Harry, if someone has the ability to load and activate plugins, they
have the ability to extract the DB credentials from wp-config.php and write
their own DB dump code. So no flag in the core of WordPress would prevent
that.

Put your code to disable the functionality (and hide the menu if it helps)
in a must use plugin (wp-content/mu-plugins), and make it non-writable by
any users of the system (apache or any ftp users) -- I usually make the
file owned by root and read only.

And don't allow any no-trusted users the ability to install plugins, by any
means.


Mike
-- 
Mike Little
http://zed1.com/

From ryannmicua at gmail.com  Wed Jun 27 13:20:34 2012
From: ryannmicua at gmail.com (Ryann Micua)
Date: Wed, 27 Jun 2012 21:20:34 +0800
Subject: [wp-hackers] hide specific nav items from public users
Message-ID: <4FEB08A2.4090008@gmail.com>

Hi, can you guys help me with this thing I want to do?

So I created this metabox for pages. This metabox has a checkbox "Show 
to logged in users only". If it's checked, this page should be seen only 
by logged in users.

I then added this page to the main menu using wp's menu editor.

I can handle the checks in the page template. What I'd like to do though 
is to be able to "hide" the page from the main nav if the user is not 
logged in - even if I added it to the main menu.

I could probably hunt for the right filter somewhere but I figured it'd 
be faster to ask for help from the gurus :) Is there like a filter 
similar to the "the_posts" filter which gives an array of post objects 
queried from the database? I sometimes use this filter to hide posts 
from non-logged in users, so I was hoping there'd be a similar filter in 
place for nav items which would be useful for modifying the items just 
before they're displayed..

Thanks so much for your help!

-- 
*Ryann Micua*
/Web Developer/
------------------------------------------------------------------------

Website: /www.pogidude.com/
Skype: /rmicua/
Mobile: /+639169273059/


From harry at dxw.com  Wed Jun 27 13:24:46 2012
From: harry at dxw.com (Harry Metcalfe)
Date: Wed, 27 Jun 2012 14:24:46 +0100
Subject: [wp-hackers] Disabling Tools->Export
In-Reply-To: <CAMb54M2LGJYTQxWPV-B73dY7hMFjJ60Y4bqONuDWbK_KjeZ-RQ@mail.gmail.com>
References: <4FEAF2BE.5070902@dxw.com>
	<4F570E69-164B-4A54-82D5-AC78210D3399@thisismyurl.com>
	<4FEB004C.1080100@dxw.com>
	<CAL4EHf=PHOkPJiRfxk8OWhLtKDVmrX+eHWGRjCnUu73nfpOiEw@mail.gmail.com>
	<4FEB0218.7000109@dxw.com>
	<CAL4EHf=cGvT34kGEVqHohQEAe7BkzdYGiZCnKKoaQMdZpThz9g@mail.gmail.com>
	<CAMb54M2LGJYTQxWPV-B73dY7hMFjJ60Y4bqONuDWbK_KjeZ-RQ@mail.gmail.com>
Message-ID: <4FEB099E.9090900@dxw.com>

It's not so much that I'm concerned that it would happen maliciously - 
clearly, if they can install plugins, we're already screwed. It's more 
that a plugin we want to install might re-add the capability without us 
knowing.

It is certainly not a major risk, but it is also not much work to 
mitigate it completely -- 3 lines of code and a paragraph on the codex.

It just seems a bit fragile to use a plugin to enforce something that 
any other plugin could simply remove.


On 27/06/12 14:19, Mike Little wrote:
> Also Harry, if someone has the ability to load and activate plugins, they
> have the ability to extract the DB credentials from wp-config.php and write
> their own DB dump code. So no flag in the core of WordPress would prevent
> that.
>
> Put your code to disable the functionality (and hide the menu if it helps)
> in a must use plugin (wp-content/mu-plugins), and make it non-writable by
> any users of the system (apache or any ftp users) -- I usually make the
> file owned by root and read only.
>
> And don't allow any no-trusted users the ability to install plugins, by any
> means.
>
>
> Mike

From lionel.pointet at globalis-ms.com  Wed Jun 27 13:28:15 2012
From: lionel.pointet at globalis-ms.com (Lionel Pointet)
Date: Wed, 27 Jun 2012 15:28:15 +0200
Subject: [wp-hackers] hide specific nav items from public users
In-Reply-To: <4FEB08A2.4090008@gmail.com>
References: <4FEB08A2.4090008@gmail.com>
Message-ID: <4FEB0A6F.5020205@globalis-ms.com>

Hi Ryann,

You're right, there are in fact 2 (maybe more?) filters that lets you do 
what you want with the items to be displayed in a nav menu (supposing 
you use the wp_nav_menu function):

 1. wp_get_nav_menu_items:
 2. wp_nav_menu_objects

You get an array of "item" objects which are globally "post" objects but 
with some more attributes...

Hope that helps.
Lionel

Le 27/06/2012 15:20, Ryann Micua a ?crit :
> Hi, can you guys help me with this thing I want to do?
>
> So I created this metabox for pages. This metabox has a checkbox "Show 
> to logged in users only". If it's checked, this page should be seen 
> only by logged in users.
>
> I then added this page to the main menu using wp's menu editor.
>
> I can handle the checks in the page template. What I'd like to do 
> though is to be able to "hide" the page from the main nav if the user 
> is not logged in - even if I added it to the main menu.
>
> I could probably hunt for the right filter somewhere but I figured 
> it'd be faster to ask for help from the gurus :) Is there like a 
> filter similar to the "the_posts" filter which gives an array of post 
> objects queried from the database? I sometimes use this filter to hide 
> posts from non-logged in users, so I was hoping there'd be a similar 
> filter in place for nav items which would be useful for modifying the 
> items just before they're displayed..
>
> Thanks so much for your help!
>



From zamoose at gmail.com  Wed Jun 27 13:29:20 2012
From: zamoose at gmail.com (Doug Stewart)
Date: Wed, 27 Jun 2012 09:29:20 -0400
Subject: [wp-hackers] hide specific nav items from public users
In-Reply-To: <4FEB08A2.4090008@gmail.com>
References: <4FEB08A2.4090008@gmail.com>
Message-ID: <CANFh3d6sV475CAvvR5QCQR9XNjXHWj-q4ukfxJzRsns9_Jpi4w@mail.gmail.com>

wp_update_nav_menu_item()

http://hitchhackerguide.com/2011/02/12/wp_update_nav_menu_item/

On Wed, Jun 27, 2012 at 9:20 AM, Ryann Micua <ryannmicua at gmail.com> wrote:
> Hi, can you guys help me with this thing I want to do?
>
> So I created this metabox for pages. This metabox has a checkbox "Show to
> logged in users only". If it's checked, this page should be seen only by
> logged in users.
>
> I then added this page to the main menu using wp's menu editor.
>
> I can handle the checks in the page template. What I'd like to do though is
> to be able to "hide" the page from the main nav if the user is not logged in
> - even if I added it to the main menu.
>
> I could probably hunt for the right filter somewhere but I figured it'd be
> faster to ask for help from the gurus :) Is there like a filter similar to
> the "the_posts" filter which gives an array of post objects queried from the
> database? I sometimes use this filter to hide posts from non-logged in
> users, so I was hoping there'd be a similar filter in place for nav items
> which would be useful for modifying the items just before they're
> displayed..
>
> Thanks so much for your help!
>
> --
> *Ryann Micua*
> /Web Developer/
> ------------------------------------------------------------------------
>
> Website: /www.pogidude.com/
> Skype: /rmicua/
> Mobile: /+639169273059/
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers



-- 
-Doug

From zamoose at gmail.com  Wed Jun 27 13:30:50 2012
From: zamoose at gmail.com (Doug Stewart)
Date: Wed, 27 Jun 2012 09:30:50 -0400
Subject: [wp-hackers] Disabling Tools->Export
In-Reply-To: <4FEB099E.9090900@dxw.com>
References: <4FEAF2BE.5070902@dxw.com>
	<4F570E69-164B-4A54-82D5-AC78210D3399@thisismyurl.com>
	<4FEB004C.1080100@dxw.com>
	<CAL4EHf=PHOkPJiRfxk8OWhLtKDVmrX+eHWGRjCnUu73nfpOiEw@mail.gmail.com>
	<4FEB0218.7000109@dxw.com>
	<CAL4EHf=cGvT34kGEVqHohQEAe7BkzdYGiZCnKKoaQMdZpThz9g@mail.gmail.com>
	<CAMb54M2LGJYTQxWPV-B73dY7hMFjJ60Y4bqONuDWbK_KjeZ-RQ@mail.gmail.com>
	<4FEB099E.9090900@dxw.com>
Message-ID: <CANFh3d5LMw4hweMsJsyADr5KASODnGe_OTy-Oq2tFQC433LEAg@mail.gmail.com>

Get more trustworthy users?

*grin*

On Wed, Jun 27, 2012 at 9:24 AM, Harry Metcalfe <harry at dxw.com> wrote:
> It's not so much that I'm concerned that it would happen maliciously -
> clearly, if they can install plugins, we're already screwed. It's more that
> a plugin we want to install might re-add the capability without us knowing.
>
> It is certainly not a major risk, but it is also not much work to mitigate
> it completely -- 3 lines of code and a paragraph on the codex.
>
> It just seems a bit fragile to use a plugin to enforce something that any
> other plugin could simply remove.
>
>
>
> On 27/06/12 14:19, Mike Little wrote:
>>
>> Also Harry, if someone has the ability to load and activate plugins, they
>> have the ability to extract the DB credentials from wp-config.php and
>> write
>> their own DB dump code. So no flag in the core of WordPress would prevent
>> that.
>>
>> Put your code to disable the functionality (and hide the menu if it helps)
>> in a must use plugin (wp-content/mu-plugins), and make it non-writable by
>> any users of the system (apache or any ftp users) -- I usually make the
>> file owned by root and read only.
>>
>> And don't allow any no-trusted users the ability to install plugins, by
>> any
>> means.
>>
>>
>> Mike
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers



-- 
-Doug

From wordpress at dd32.id.au  Wed Jun 27 13:37:41 2012
From: wordpress at dd32.id.au (Dion Hulse (dd32))
Date: Wed, 27 Jun 2012 23:37:41 +1000
Subject: [wp-hackers] Disabling Tools->Export
In-Reply-To: <4FEB099E.9090900@dxw.com>
References: <4FEAF2BE.5070902@dxw.com>
	<4F570E69-164B-4A54-82D5-AC78210D3399@thisismyurl.com>
	<4FEB004C.1080100@dxw.com>
	<CAL4EHf=PHOkPJiRfxk8OWhLtKDVmrX+eHWGRjCnUu73nfpOiEw@mail.gmail.com>
	<4FEB0218.7000109@dxw.com>
	<CAL4EHf=cGvT34kGEVqHohQEAe7BkzdYGiZCnKKoaQMdZpThz9g@mail.gmail.com>
	<CAMb54M2LGJYTQxWPV-B73dY7hMFjJ60Y4bqONuDWbK_KjeZ-RQ@mail.gmail.com>
	<4FEB099E.9090900@dxw.com>
Message-ID: <CAL4EHf=NaUDiVP-FnzPc2QOqXC6fVJ7Sp6RU3MtQkfvnMt4nOw@mail.gmail.com>

At the same time, any constant in core would simply be defaulting that
cap to false - which is exactly what the existing constants do
(DISALOW_FILE_EDIT, DISALOW_UNFILTERED_HTML, etc), any plugin could
technically override these or ignore them and do something anyway..
http://core.trac.wordpress.org/browser/trunk/wp-includes/capabilities.php#L1129
(So there you go, you should be using the map_meta_cap filter to deny
the cap on, not the one i posted before)

WordPress plugins come down to trust, you have to trust that a plugin
is doing something right..
The filter priorities are there not just for ordering of actions, but
to say "I really intend on this being the highest priority possible"..
plugins should more often than not, choose 15 rather than 100 as their
"higher than default" priority for example, you have to trust that a
plugin hasn't just said "Ok, lets run after the core code runs, lets
use 99999999.."



On 27 June 2012 23:24, Harry Metcalfe <harry at dxw.com> wrote:
> It's not so much that I'm concerned that it would happen maliciously -
> clearly, if they can install plugins, we're already screwed. It's more that
> a plugin we want to install might re-add the capability without us knowing.
>
> It is certainly not a major risk, but it is also not much work to mitigate
> it completely -- 3 lines of code and a paragraph on the codex.
>
> It just seems a bit fragile to use a plugin to enforce something that any
> other plugin could simply remove.
>
>
>
> On 27/06/12 14:19, Mike Little wrote:
>>
>> Also Harry, if someone has the ability to load and activate plugins, they
>> have the ability to extract the DB credentials from wp-config.php and
>> write
>> their own DB dump code. So no flag in the core of WordPress would prevent
>> that.
>>
>> Put your code to disable the functionality (and hide the menu if it helps)
>> in a must use plugin (wp-content/mu-plugins), and make it non-writable by
>> any users of the system (apache or any ftp users) -- I usually make the
>> file owned by root and read only.
>>
>> And don't allow any no-trusted users the ability to install plugins, by
>> any
>> means.
>>
>>
>> Mike
>
> _______________________________________________
> wp-hackers mailing list
> wp-hackers at lists.automattic.com
> http://lists.automattic.com/mailman/listinfo/wp-hackers

From bpetty at bluehost.com  Wed Jun 27 14:41:03 2012
From: bpetty at bluehost.com (Bryan Petty)
Date: Wed, 27 Jun 2012 08:41:03 -0600
Subject: [wp-hackers] Disabling Tools->Export
In-Reply-To: <CAL4EHf=cGvT34kGEVqHohQEAe7BkzdYGiZCnKKoaQMdZpThz9g@mail.gmail.com>
References: <4FEAF2BE.5070902@dxw.com>
	<4F570E69-164B-4A54-82D5-AC78210D3399@thisismyurl.com>
	<4FEB004C.1080100@dxw.com>
	<CAL4EHf=PHOkPJiRfxk8OWhLtKDVmrX+eHWGRjCnUu73nfpOiEw@mail.gmail.com>
	<4FEB0218.7000109@dxw.com>
	<CAL4EHf=cGvT34kGEVqHohQEAe7BkzdYGiZCnKKoaQMdZpThz9g@mail.gmail.com>
Message-ID: <4FEB1B7F.4010601@bluehost.com>

On 06/27/2012 06:56 AM, Dion Hulse (dd32) wrote:
> A constant is detrimental to most users of WordPress - well,
> detrimental might be the wrong word, but un-needed for sure, A plugin
> is where disabling exports should happen.

Actually, forcing users to install plugins just to enable/disable core
behavior instead of using simple true/false config settings is very
detrimental to WP users. A plugin is meant for modifying or extending
core behavior in some specialized manner, not configuring WP itself.

Just look at the level of knowledge and the amount of work involved with
performing the task of writing up this whole new plugin just to disable
export on Harry's installation. Sure, he's here on the mailing list and
obviously knows how to write plugins, but that's rarely the case with
most WP users.

The simplest answer is the one that is already possible with the current
release of WordPress, and that's obviously the advice that should be
given, so you aren't wrong in pointing Harry to that solution. However,
I would hope that it's painfully obvious that any UX team would toss a
huge red flag at these instructions, and that some alternative, easier
solution for configuring options such as this should probably be
considered or at least up for discussion.

Has anyone here ever pulled up "about:config" in Firefox or
"about:flags" in Chrome?

-- 
Bryan Petty
WordPress Developer
bpetty at bluehost.com

From otto at ottodestruct.com  Wed Jun 27 16:04:32 2012
From: otto at ottodestruct.com (Otto)
Date: Wed, 27 Jun 2012 11:04:32 -0500
Subject: [wp-hackers] Disabling Tools->Export
In-Reply-To: <4FEB1B7F.4010601@bluehost.com>
References: <4FEAF2BE.5070902@dxw.com>
	<4F570E69-164B-4A54-82D5-AC78210D3399@thisismyurl.com>
	<4FEB004C.1080100@dxw.com>
	<CAL4EHf=PHOkPJiRfxk8OWhLtKDVmrX+eHWGRjCnUu73nfpOiEw@mail.gmail.com>
	<4FEB0218.7000109@dxw.com>
	<CAL4EHf=cGvT34kGEVqHohQEAe7BkzdYGiZCnKKoaQMdZpThz9g@mail.gmail.com>
	<4FEB1B7F.4010601@bluehost.com>
Message-ID: <CAD-FghxEJu2O7-V7bP5-c9a-MKLDZ1T9YfzWVu7XuKy6M+rLnA@mail.gmail.com>

On Wed, Jun 27, 2012 at 9:41 AM, Bryan Petty <bpetty at bluehost.com> wrote:
> Actually, forcing users to install plugins just to enable/disable core
> behavior instead of using simple true/false config settings is very
> detrimental to WP users. A plugin is meant for modifying or extending
> core behavior in some specialized manner, not configuring WP itself.

Disabling core behavior in major ways like this is exactly the same as
"modifying it". Providing some way for users to "disable exporting"
isn't a feature likely to appeal or be needed by as much as 1% of the
populace, much less the 80% that is generally quoted in this sort of
regard.

Using a plugin for this sort of deep modification is exactly what
plugins are for.


> Just look at the level of knowledge and the amount of work involved with
> performing the task of writing up this whole new plugin just to disable
> export on Harry's installation. Sure, he's here on the mailing list and
> obviously knows how to write plugins, but that's rarely the case with
> most WP users.

True, but then he also knows that this can be done and is
intentionally doing it. For any normal client and user, I'd expect
them to be talked out of it. What is the benefit of disabling export
capabilities? Furthermore, what is the need to disable it in such a
big way that you have to ensure that they can't accidentally re-enable
it? What kind of security issues does this client really have? The
questions here are deeper, and the suggested solution by the OP is
extremely shallow, it seems to me.

If somebody asked me to disable some major section of WP, I'd ask why
and find out what their needs really are first. They may think that
this is a good idea, when in reality they need a different solution.
Having a big set of friggin' checkboxes somewhere for even
the-kitchen-sink doesn't solve their problem.


> I would hope that it's painfully obvious that any UX team would toss a
> huge red flag at these instructions, and that some alternative, easier
> solution for configuring options such as this should probably be
> considered or at least up for discussion.

The discussion I'd have here would be a code one, not a UX one. If
it's difficult to disable this stuff with a filter or something, then
a generic means to do that should be devised. However, given the
presented solution only being a few lines of code, I don't see that
it's really a major issue in this case.


> Has anyone here ever pulled up "about:config" in Firefox or
> "about:flags" in Chrome?

Yes. And it's like a bad nightmare. The browser should *just work*,
not have a zillion different ways of breaking stupidly.

-Otto

From wojciech.chrapka at software.com.pl  Thu Jun 28 11:47:41 2012
From: wojciech.chrapka at software.com.pl (Wojciech Chrapka)
Date: Thu, 28 Jun 2012 13:47:41 +0200
Subject: [wp-hackers] Security Devices - Web App Pentest Magazine
Message-ID: <CAEv=05nLwq+5O6adkXKjtFpgMUErZADehj_BJ5W76pjPeBVZfQ@mail.gmail.com>

Hello!

New Web App Pentesting Magazine released. You can see the full content at
http://pentestmag.com/using-and-making-of-zap-wapt-062012/

Inside:

- Web Service Security: REST vs. SOAP - which and when you should use ,
- Security Products or Door for Hackers? A Report on the Vulnerability
Trends in Security Products,
- Firewall Audit - are you sure your firewall isn't a next gate for hackers?
- Making of Zed Attack Proxy - check if you can help OWASP with that,
- Get it on with ZAP- tutorial for all ,
- WebVulScan - new spen source scanner developed by single person,


Full table of content available at:
http://pentestmag.com/using-and-making-of-zap-wapt-062012/

 This is paid publication but you can get teaser and other 4 free issues
after registration at http://pentestmag.com/subscribe/free-account/

Best Regards,

Wojciech Chrapka

From ryannmicua at gmail.com  Thu Jun 28 12:13:29 2012
From: ryannmicua at gmail.com (Ryann Micua)
Date: Thu, 28 Jun 2012 20:13:29 +0800
Subject: [wp-hackers] hide specific nav items from public users
Message-ID: <4FEC4A69.6030502@gmail.com>

Thanks so much. wp_get_nav_menu_items filter worked just fine.

if anybody is in this situation too and wants to know what I did, just 
let me know and I'll post it here. Thanks!

> Hi Ryann,
>
> You're right, there are in fact 2 (maybe more?) filters that lets you do
> what you want with the items to be displayed in a nav menu (supposing
> you use the wp_nav_menu function):
>
>   1. wp_get_nav_menu_items:
>   2. wp_nav_menu_objects
>
> You get an array of "item" objects which are globally "post" objects but
> with some more attributes...
>
> Hope that helps.
> Lionel

-- 
*Ryann Micua*
/Web Developer/
------------------------------------------------------------------------

Website: /www.pogidude.com/
Skype: /rmicua/
Mobile: /+639169273059/


From kapil.chugh at hotmail.com  Thu Jun 28 13:34:13 2012
From: kapil.chugh at hotmail.com (Kapil Chugh)
Date: Thu, 28 Jun 2012 19:04:13 +0530
Subject: [wp-hackers] hide specific nav items from public users
Message-ID: <DUB0-P2-EAS818380DF2EBBB712277370EFE60@phx.gbl>

Ryann, please share your code.

Best Regards,

Kapil Chugh

-----Original Message-----

From: Ryann Micua
Sent: 28 Jun 2012 12:13:41 GMT
To: wp-hackers at lists.automattic.com
Subject: Re: [wp-hackers] hide specific nav items from public users

Thanks so much. wp_get_nav_menu_items filter worked just fine.

if anybody is in this situation too and wants to know what I did, just
let me know and I'll post it here. Thanks!

> Hi Ryann,
>
> You're right, there are in fact 2 (maybe more?) filters that lets you do
> what you want with the items to be displayed in a nav menu (supposing
> you use the wp_nav_menu function):
>
>   1. wp_get_nav_menu_items:
>   2. wp_nav_menu_objects
>
> You get an array of "item" objects which are globally "post" objects but
> with some more attributes...
>
> Hope that helps.
> Lionel

--
*Ryann Micua*
/Web Developer/
------------------------------------------------------------------------

Website: /www.pogidude.com/
Skype: /rmicua/
Mobile: /+639169273059/

_______________________________________________
wp-hackers mailing list
wp-hackers at lists.automattic.com
http://lists.automattic.com/mailman/listinfo/wp-hackers

From filippo.pisano at gmail.com  Fri Jun 29 21:55:21 2012
From: filippo.pisano at gmail.com (Filippo Pisano)
Date: Fri, 29 Jun 2012 23:55:21 +0200
Subject: [wp-hackers] Customize JS Action
Message-ID: <CABCyq-nBqw-5vFuRLeUKG7yWxasaXRm6RqBcBqhKBBosyDN=RQ@mail.gmail.com>

Hi all,

I'm working on a theme customization and I can't find out how to send
custom values to wp.customize() JS function for live preview.
This is what I want to do:

1. Create a customized Customize_Control class extending the default one
(no problem)
2. Send to theme's live preview values from the customized panel.

What is the JS call to do that?

Thank you

Filippo Pisano

